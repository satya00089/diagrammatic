function fG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nx={exports:{}},zd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WD;function hG(){if(WD)return zd;WD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return zd.Fragment=e,zd.jsx=n,zd.jsxs=n,zd}var KD;function pG(){return KD||(KD=1,Nx.exports=hG()),Nx.exports}var g=pG(),Tx={exports:{}},et={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YD;function mG(){if(YD)return et;YD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function S(z,W,ae){this.props=z,this.context=W,this.refs=w,this.updater=ae||b}S.prototype.isReactComponent={},S.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},S.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function C(){}C.prototype=S.prototype;function T(z,W,ae){this.props=z,this.context=W,this.refs=w,this.updater=ae||b}var E=T.prototype=new C;E.constructor=T,x(E,S.prototype),E.isPureReactComponent=!0;var N=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function O(z,W,ae,re,$,Z){return ae=Z.ref,{$$typeof:t,type:z,key:W,ref:ae!==void 0?ae:null,props:Z}}function R(z,W){return O(z.type,W,void 0,void 0,void 0,z.props)}function L(z){return typeof z=="object"&&z!==null&&z.$$typeof===t}function I(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ae){return W[ae]})}var F=/\/+/g;function q(z,W){return typeof z=="object"&&z!==null&&z.key!=null?I(""+z.key):W.toString(36)}function U(){}function P(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(U,U):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function H(z,W,ae,re,$){var Z=typeof z;(Z==="undefined"||Z==="boolean")&&(z=null);var ee=!1;if(z===null)ee=!0;else switch(Z){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(z.$$typeof){case t:case e:ee=!0;break;case f:return ee=z._init,H(ee(z._payload),W,ae,re,$)}}if(ee)return $=$(z),ee=re===""?"."+q(z,0):re,N($)?(ae="",ee!=null&&(ae=ee.replace(F,"$&/")+"/"),H($,W,ae,"",function(ye){return ye})):$!=null&&(L($)&&($=R($,ae+($.key==null||z&&z.key===$.key?"":(""+$.key).replace(F,"$&/")+"/")+ee)),W.push($)),1;ee=0;var de=re===""?".":re+":";if(N(z))for(var oe=0;oe<z.length;oe++)re=z[oe],Z=de+q(re,oe),ee+=H(re,W,ae,Z,$);else if(oe=m(z),typeof oe=="function")for(z=oe.call(z),oe=0;!(re=z.next()).done;)re=re.value,Z=de+q(re,oe++),ee+=H(re,W,ae,Z,$);else if(Z==="object"){if(typeof z.then=="function")return H(P(z),W,ae,re,$);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ee}function j(z,W,ae){if(z==null)return z;var re=[],$=0;return H(z,re,"","",function(Z){return W.call(ae,Z,$++)}),re}function V(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(ae){(z._status===0||z._status===-1)&&(z._status=1,z._result=ae)},function(ae){(z._status===0||z._status===-1)&&(z._status=2,z._result=ae)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var G=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function te(){}return et.Children={map:j,forEach:function(z,W,ae){j(z,function(){W.apply(this,arguments)},ae)},count:function(z){var W=0;return j(z,function(){W++}),W},toArray:function(z){return j(z,function(W){return W})||[]},only:function(z){if(!L(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},et.Component=S,et.Fragment=n,et.Profiler=i,et.PureComponent=T,et.StrictMode=r,et.Suspense=u,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,et.__COMPILER_RUNTIME={__proto__:null,c:function(z){return A.H.useMemoCache(z)}},et.cache=function(z){return function(){return z.apply(null,arguments)}},et.cloneElement=function(z,W,ae){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var re=x({},z.props),$=z.key,Z=void 0;if(W!=null)for(ee in W.ref!==void 0&&(Z=void 0),W.key!==void 0&&($=""+W.key),W)!_.call(W,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&W.ref===void 0||(re[ee]=W[ee]);var ee=arguments.length-2;if(ee===1)re.children=ae;else if(1<ee){for(var de=Array(ee),oe=0;oe<ee;oe++)de[oe]=arguments[oe+2];re.children=de}return O(z.type,$,void 0,void 0,Z,re)},et.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},et.createElement=function(z,W,ae){var re,$={},Z=null;if(W!=null)for(re in W.key!==void 0&&(Z=""+W.key),W)_.call(W,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&($[re]=W[re]);var ee=arguments.length-2;if(ee===1)$.children=ae;else if(1<ee){for(var de=Array(ee),oe=0;oe<ee;oe++)de[oe]=arguments[oe+2];$.children=de}if(z&&z.defaultProps)for(re in ee=z.defaultProps,ee)$[re]===void 0&&($[re]=ee[re]);return O(z,Z,void 0,void 0,null,$)},et.createRef=function(){return{current:null}},et.forwardRef=function(z){return{$$typeof:l,render:z}},et.isValidElement=L,et.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:V}},et.memo=function(z,W){return{$$typeof:d,type:z,compare:W===void 0?null:W}},et.startTransition=function(z){var W=A.T,ae={};A.T=ae;try{var re=z(),$=A.S;$!==null&&$(ae,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(te,G)}catch(Z){G(Z)}finally{A.T=W}},et.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},et.use=function(z){return A.H.use(z)},et.useActionState=function(z,W,ae){return A.H.useActionState(z,W,ae)},et.useCallback=function(z,W){return A.H.useCallback(z,W)},et.useContext=function(z){return A.H.useContext(z)},et.useDebugValue=function(){},et.useDeferredValue=function(z,W){return A.H.useDeferredValue(z,W)},et.useEffect=function(z,W,ae){var re=A.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(z,W)},et.useId=function(){return A.H.useId()},et.useImperativeHandle=function(z,W,ae){return A.H.useImperativeHandle(z,W,ae)},et.useInsertionEffect=function(z,W){return A.H.useInsertionEffect(z,W)},et.useLayoutEffect=function(z,W){return A.H.useLayoutEffect(z,W)},et.useMemo=function(z,W){return A.H.useMemo(z,W)},et.useOptimistic=function(z,W){return A.H.useOptimistic(z,W)},et.useReducer=function(z,W,ae){return A.H.useReducer(z,W,ae)},et.useRef=function(z){return A.H.useRef(z)},et.useState=function(z){return A.H.useState(z)},et.useSyncExternalStore=function(z,W,ae){return A.H.useSyncExternalStore(z,W,ae)},et.useTransition=function(){return A.H.useTransition()},et.version="19.1.1",et}var XD;function ph(){return XD||(XD=1,Tx.exports=mG()),Tx.exports}var M=ph();const ke=hh(M),gG=fG({__proto__:null,default:ke},[M]);var Ax={exports:{}},Vd={},Mx={exports:{}},_x={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD;function yG(){return ZD||(ZD=1,(function(t){function e(j,V){var G=j.length;j.push(V);e:for(;0<G;){var te=G-1>>>1,z=j[te];if(0<i(z,V))j[te]=V,j[G]=z,G=te;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var V=j[0],G=j.pop();if(G!==V){j[0]=G;e:for(var te=0,z=j.length,W=z>>>1;te<W;){var ae=2*(te+1)-1,re=j[ae],$=ae+1,Z=j[$];if(0>i(re,G))$<z&&0>i(Z,re)?(j[te]=Z,j[$]=G,te=$):(j[te]=re,j[ae]=G,te=ae);else if($<z&&0>i(Z,G))j[te]=Z,j[$]=G,te=$;else break e}}return V}function i(j,V){var G=j.sortIndex-V.sortIndex;return G!==0?G:j.id-V.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,m=3,b=!1,x=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(j){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=j)r(d),V.sortIndex=V.expirationTime,e(u,V);else break;V=n(d)}}function A(j){if(w=!1,N(j),!x)if(n(u)!==null)x=!0,_||(_=!0,q());else{var V=n(d);V!==null&&H(A,V.startTime-j)}}var _=!1,O=-1,R=5,L=-1;function I(){return S?!0:!(t.unstable_now()-L<R)}function F(){if(S=!1,_){var j=t.unstable_now();L=j;var V=!0;try{e:{x=!1,w&&(w=!1,T(O),O=-1),b=!0;var G=m;try{t:{for(N(j),p=n(u);p!==null&&!(p.expirationTime>j&&I());){var te=p.callback;if(typeof te=="function"){p.callback=null,m=p.priorityLevel;var z=te(p.expirationTime<=j);if(j=t.unstable_now(),typeof z=="function"){p.callback=z,N(j),V=!0;break t}p===n(u)&&r(u),N(j)}else r(u);p=n(u)}if(p!==null)V=!0;else{var W=n(d);W!==null&&H(A,W.startTime-j),V=!1}}break e}finally{p=null,m=G,b=!1}V=void 0}}finally{V?q():_=!1}}}var q;if(typeof E=="function")q=function(){E(F)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,P=U.port2;U.port1.onmessage=F,q=function(){P.postMessage(null)}}else q=function(){C(F,0)};function H(j,V){O=C(function(){j(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(j){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var G=m;m=V;try{return j()}finally{m=G}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(j,V){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var G=m;m=j;try{return V()}finally{m=G}},t.unstable_scheduleCallback=function(j,V,G){var te=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?te+G:te):G=te,j){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=G+z,j={id:f++,callback:V,priorityLevel:j,startTime:G,expirationTime:z,sortIndex:-1},G>te?(j.sortIndex=G,e(d,j),n(u)===null&&j===n(d)&&(w?(T(O),O=-1):w=!0,H(A,G-te))):(j.sortIndex=z,e(u,j),x||b||(x=!0,_||(_=!0,q()))),j},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(j){var V=m;return function(){var G=m;m=V;try{return j.apply(this,arguments)}finally{m=G}}}})(_x)),_x}var JD;function bG(){return JD||(JD=1,Mx.exports=yG()),Mx.exports}var Dx={exports:{}},dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD;function xG(){if(QD)return dr;QD=1;var t=ph();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dr.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,f)},dr.flushSync=function(u){var d=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=f,r.d.f()}},dr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},dr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},dr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:b}):f==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},dr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},dr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);r.d.L(u,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},dr.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},dr.requestFormReset=function(u){r.d.r(u)},dr.unstable_batchedUpdates=function(u,d){return u(d)},dr.useFormState=function(u,d,f){return o.H.useFormState(u,d,f)},dr.useFormStatus=function(){return o.H.useHostTransitionStatus()},dr.version="19.1.1",dr}var eR;function bB(){if(eR)return Dx.exports;eR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dx.exports=xG(),Dx.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tR;function vG(){if(tR)return Vd;tR=1;var t=bG(),e=ph(),n=bB();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,y=c;;){var v=h.return;if(v===null)break;var k=v.alternate;if(k===null){if(y=v.return,y!==null){h=y;continue}break}if(v.child===k.child){for(k=v.child;k;){if(k===h)return l(v),a;if(k===y)return l(v),c;k=k.sibling}throw Error(r(188))}if(h.return!==y.return)h=v,y=k;else{for(var D=!1,B=v.child;B;){if(B===h){D=!0,h=v,y=k;break}if(B===y){D=!0,y=v,h=k;break}B=B.sibling}if(!D){for(B=k.child;B;){if(B===h){D=!0,h=k,y=v;break}if(B===y){D=!0,y=k,h=v;break}B=B.sibling}if(!D)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function q(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var U=Symbol.for("react.client.reference");function P(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===U?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case E:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case N:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return c=a.displayName||null,c!==null?c:P(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return P(a(c))}catch{}}return null}var H=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},te=[],z=-1;function W(a){return{current:a}}function ae(a){0>z||(a.current=te[z],te[z]=null,z--)}function re(a,c){z++,te[z]=a.current,a.current=c}var $=W(null),Z=W(null),ee=W(null),de=W(null);function oe(a,c){switch(re(ee,c),re(Z,a),re($,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?wD(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=wD(c),a=SD(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ae($),re($,a)}function ye(){ae($),ae(Z),ae(ee)}function Ce(a){a.memoizedState!==null&&re(de,a);var c=$.current,h=SD(c,a.type);c!==h&&(re(Z,a),re($,h))}function Pe(a){Z.current===a&&(ae($),ae(Z)),de.current===a&&(ae(de),Od._currentValue=G)}var Ie=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,Ee=t.unstable_cancelCallback,Ne=t.unstable_shouldYield,yt=t.unstable_requestPaint,Oe=t.unstable_now,xt=t.unstable_getCurrentPriorityLevel,wt=t.unstable_ImmediatePriority,Yt=t.unstable_UserBlockingPriority,gn=t.unstable_NormalPriority,Ht=t.unstable_LowPriority,Mt=t.unstable_IdlePriority,Dn=t.log,yn=t.unstable_setDisableYieldValue,Bt=null,ht=null;function _t(a){if(typeof Dn=="function"&&yn(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Bt,a)}catch{}}var Dt=Math.clz32?Math.clz32:Ii,xr=Math.log,Hr=Math.LN2;function Ii(a){return a>>>=0,a===0?32:31-(xr(a)/Hr|0)|0}var rn=256,Le=4194304;function $e(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function vr(a,c,h){var y=a.pendingLanes;if(y===0)return 0;var v=0,k=a.suspendedLanes,D=a.pingedLanes;a=a.warmLanes;var B=y&134217727;return B!==0?(y=B&~k,y!==0?v=$e(y):(D&=B,D!==0?v=$e(D):h||(h=B&~a,h!==0&&(v=$e(h))))):(B=y&~k,B!==0?v=$e(B):D!==0?v=$e(D):h||(h=y&~a,h!==0&&(v=$e(h)))),v===0?0:c!==0&&c!==v&&(c&k)===0&&(k=v&-v,h=c&-c,k>=h||k===32&&(h&4194048)!==0)?c:v}function pt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function bn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vo(){var a=rn;return rn<<=1,(rn&4194048)===0&&(rn=256),a}function Pi(){var a=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),a}function Ur(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function $r(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function wr(a,c,h,y,v,k){var D=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var B=a.entanglements,K=a.expirationTimes,le=a.hiddenUpdates;for(h=D&~h;0<h;){var fe=31-Dt(h),me=1<<fe;B[fe]=0,K[fe]=-1;var ce=le[fe];if(ce!==null)for(le[fe]=null,fe=0;fe<ce.length;fe++){var ue=ce[fe];ue!==null&&(ue.lane&=-536870913)}h&=~me}y!==0&&Dr(a,y,0),k!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=k&~(D&~c))}function Dr(a,c,h){a.pendingLanes|=c,a.suspendedLanes&=~c;var y=31-Dt(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|h&4194090}function Gr(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var y=31-Dt(h),v=1<<y;v&c|a[y]&c&&(a[y]|=c),h&=~v}}function St(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Kn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function wo(){var a=V.p;return a!==0?a:(a=window.event,a===void 0?32:qD(a.type))}function Bi(a,c){var h=V.p;try{return V.p=a,c()}finally{V.p=h}}var sr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+sr,zt="__reactProps$"+sr,Rr="__reactContainer$"+sr,Rn="__reactEvents$"+sr,Wr="__reactListeners$"+sr,es="__reactHandles$"+sr,Os="__reactResources$"+sr,Kr="__reactMarker$"+sr;function ts(a){delete a[Xt],delete a[zt],delete a[Rn],delete a[Wr],delete a[es]}function xn(a){var c=a[Xt];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Rr]||h[Xt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=ND(a);a!==null;){if(h=a[Xt])return h;a=ND(a)}return c}a=h,h=a.parentNode}return null}function He(a){if(a=a[Xt]||a[Rr]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function or(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function ar(a){var c=a[Os];return c||(c=a[Os]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Lt(a){a[Kr]=!0}var ns=new Set,Re={};function J(a,c){ge(a,c),ge(a+"Capture",c)}function ge(a,c){for(Re[a]=c,a=0;a<c.length;a++)ns.add(c[a])}var _e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dt={},Vt={};function Rt(a){return Ie.call(Vt,a)?!0:Ie.call(dt,a)?!1:_e.test(a)?Vt[a]=!0:(dt[a]=!0,!1)}function Ut(a,c,h){if(Rt(c))if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+h)}}function Bn(a,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+h)}}function vn(a,c,h,y){if(y===null)a.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(c,h,""+y)}}var fi,qt;function Yn(a){if(fi===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);fi=c&&c[1]||"",qt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+a+qt}var rs=!1;function Oa(a,c){if(!a||rs)return"";rs=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ue){var ce=ue}Reflect.construct(a,[],me)}else{try{me.call()}catch(ue){ce=ue}a.call(me.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=y.DetermineComponentFrameRoot(),D=k[0],B=k[1];if(D&&B){var K=D.split(`
`),le=B.split(`
`);for(v=y=0;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;for(;v<le.length&&!le[v].includes("DetermineComponentFrameRoot");)v++;if(y===K.length||v===le.length)for(y=K.length-1,v=le.length-1;1<=y&&0<=v&&K[y]!==le[v];)v--;for(;1<=y&&0<=v;y--,v--)if(K[y]!==le[v]){if(y!==1||v!==1)do if(y--,v--,0>v||K[y]!==le[v]){var fe=`
`+K[y].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=y&&0<=v);break}}}finally{rs=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?Yn(h):""}function Ql(a){switch(a.tag){case 26:case 27:case 5:return Yn(a.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return Oa(a.type,!1);case 11:return Oa(a.type.render,!1);case 1:return Oa(a.type,!0);case 31:return Yn("Activity");default:return""}}function ec(a){try{var c="";do c+=Ql(a),a=a.return;while(a);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function lr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function tc(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Hu(a){var c=tc(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,k=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return v.call(this)},set:function(D){y=""+D,k.call(this,D)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function So(a){a._valueTracker||(a._valueTracker=Hu(a))}function is(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return a&&(y=tc(a)?a.checked?"true":"false":a.value),a=y,a!==h?(c.setValue(a),!0):!1}function ss(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var ko=/[\n"\\]/g;function cr(a){return a.replace(ko,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Yr(a,c,h,y,v,k,D,B){a.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.type=D:a.removeAttribute("type"),c!=null?D==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+lr(c)):a.value!==""+lr(c)&&(a.value=""+lr(c)):D!=="submit"&&D!=="reset"||a.removeAttribute("value"),c!=null?La(a,D,lr(c)):h!=null?La(a,D,lr(h)):y!=null&&a.removeAttribute("value"),v==null&&k!=null&&(a.defaultChecked=!!k),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?a.name=""+lr(B):a.removeAttribute("name")}function Co(a,c,h,y,v,k,D,B){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(a.type=k),c!=null||h!=null){if(!(k!=="submit"&&k!=="reset"||c!=null))return;h=h!=null?""+lr(h):"",c=c!=null?""+lr(c):h,B||c===a.value||(a.value=c),a.defaultValue=c}y=y??v,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=B?a.checked:!!y,a.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.name=D)}function La(a,c,h){c==="number"&&ss(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function zi(a,c,h,y){if(a=a.options,c){c={};for(var v=0;v<h.length;v++)c["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=c.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&y&&(a[h].defaultSelected=!0)}else{for(h=""+lr(h),c=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,y&&(a[v].defaultSelected=!0);return}c!==null||a[v].disabled||(c=a[v])}c!==null&&(c.selected=!0)}}function Uu(a,c,h){if(c!=null&&(c=""+lr(c),c!==a.value&&(a.value=c),h==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=h!=null?""+lr(h):""}function nc(a,c,h,y){if(c==null){if(y!=null){if(h!=null)throw Error(r(92));if(H(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),c=h}h=lr(c),a.defaultValue=h,y=a.textContent,y===h&&y!==""&&y!==null&&(a.value=y)}function Eo(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var _0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $h(a,c,h){var y=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":y?a.setProperty(c,h):typeof h!="number"||h===0||_0.has(c)?c==="float"?a.cssFloat=h:a[c]=(""+h).trim():a[c]=h+"px"}function Gh(a,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var v in c)y=c[v],c.hasOwnProperty(v)&&h[v]!==y&&$h(a,v,y)}else for(var k in c)c.hasOwnProperty(k)&&$h(a,k,c[k])}function $u(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(a){return D0.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Gu=null;function Ia(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var No=null,To=null;function Kh(a){var c=He(a);if(c&&(a=c.stateNode)){var h=a[zt]||null;e:switch(a=c.stateNode,c.type){case"input":if(Yr(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+cr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==a&&y.form===a.form){var v=y[zt]||null;if(!v)throw Error(r(90));Yr(y,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<h.length;c++)y=h[c],y.form===a.form&&is(y)}break e;case"textarea":Uu(a,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&zi(a,!!h.multiple,c,!1)}}}var Wu=!1;function Yh(a,c,h){if(Wu)return a(c,h);Wu=!0;try{var y=a(c);return y}finally{if(Wu=!1,(No!==null||To!==null)&&(Rp(),No&&(c=No,a=To,To=No=null,Kh(c),a)))for(c=0;c<a.length;c++)Kh(a[c])}}function Pa(a,c){var h=a.stateNode;if(h===null)return null;var y=h[zt]||null;if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ku=!1;if(Vi)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Ku=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Ku=!1}var as=null,Yu=null,za=null;function Xh(){if(za)return za;var a,c=Yu,h=c.length,y,v="value"in as?as.value:as.textContent,k=v.length;for(a=0;a<h&&c[a]===v[a];a++);var D=h-a;for(y=1;y<=D&&c[h-y]===v[k-y];y++);return za=v.slice(a,1<y?1-y:void 0)}function ic(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function sc(){return!0}function X(){return!1}function Y(a){function c(h,y,v,k,D){this._reactName=h,this._targetInst=v,this.type=y,this.nativeEvent=k,this.target=D,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(h=a[B],this[B]=h?h(k):k[B]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?sc:X,this.isPropagationStopped=X,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),c}var ie={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pe=Y(ie),be=f({},ie,{view:0,detail:0}),we=Y(be),Se,Be,Qe,De=f({},be,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O0,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Qe&&(Qe&&a.type==="mousemove"?(Se=a.screenX-Qe.screenX,Be=a.screenY-Qe.screenY):Be=Se=0,Qe=a),Se)},movementY:function(a){return"movementY"in a?a.movementY:Be}}),Ze=Y(De),mt=f({},De,{dataTransfer:0}),R0=Y(mt),j0=f({},be,{relatedTarget:0}),Xu=Y(j0),Zh=f({},ie,{animationName:0,elapsedTime:0,pseudoElement:0}),Xn=Y(Zh),hi=f({},ie,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jh=Y(hi),v$=f({},ie,{data:0}),AA=Y(v$),w$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C$(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=k$[a])?!!c[a]:!1}function O0(){return C$}var E$=f({},be,{key:function(a){if(a.key){var c=w$[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=ic(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?S$[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O0,charCode:function(a){return a.type==="keypress"?ic(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ic(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),N$=Y(E$),T$=f({},De,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MA=Y(T$),A$=f({},be,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O0}),M$=Y(A$),_$=f({},ie,{propertyName:0,elapsedTime:0,pseudoElement:0}),D$=Y(_$),R$=f({},De,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),j$=Y(R$),O$=f({},ie,{newState:0,oldState:0}),L$=Y(O$),I$=[9,13,27,32],L0=Vi&&"CompositionEvent"in window,Zu=null;Vi&&"documentMode"in document&&(Zu=document.documentMode);var P$=Vi&&"TextEvent"in window&&!Zu,_A=Vi&&(!L0||Zu&&8<Zu&&11>=Zu),DA=" ",RA=!1;function jA(a,c){switch(a){case"keyup":return I$.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OA(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var oc=!1;function B$(a,c){switch(a){case"compositionend":return OA(c);case"keypress":return c.which!==32?null:(RA=!0,DA);case"textInput":return a=c.data,a===DA&&RA?null:a;default:return null}}function z$(a,c){if(oc)return a==="compositionend"||!L0&&jA(a,c)?(a=Xh(),za=Yu=as=null,oc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return _A&&c.locale!=="ko"?null:c.data;default:return null}}var V$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LA(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!V$[a.type]:c==="textarea"}function IA(a,c,h,y){No?To?To.push(y):To=[y]:No=y,c=Bp(c,"onChange"),0<c.length&&(h=new pe("onChange","change",null,h,y),a.push({event:h,listeners:c}))}var Ju=null,Qu=null;function q$(a){gD(a,0)}function Qh(a){var c=or(a);if(is(c))return a}function PA(a,c){if(a==="change")return c}var BA=!1;if(Vi){var I0;if(Vi){var P0="oninput"in document;if(!P0){var zA=document.createElement("div");zA.setAttribute("oninput","return;"),P0=typeof zA.oninput=="function"}I0=P0}else I0=!1;BA=I0&&(!document.documentMode||9<document.documentMode)}function VA(){Ju&&(Ju.detachEvent("onpropertychange",qA),Qu=Ju=null)}function qA(a){if(a.propertyName==="value"&&Qh(Qu)){var c=[];IA(c,Qu,a,Ia(a)),Yh(q$,c)}}function F$(a,c,h){a==="focusin"?(VA(),Ju=c,Qu=h,Ju.attachEvent("onpropertychange",qA)):a==="focusout"&&VA()}function H$(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Qh(Qu)}function U$(a,c){if(a==="click")return Qh(c)}function $$(a,c){if(a==="input"||a==="change")return Qh(c)}function G$(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Xr=typeof Object.is=="function"?Object.is:G$;function ed(a,c){if(Xr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var v=h[y];if(!Ie.call(c,v)||!Xr(a[v],c[v]))return!1}return!0}function FA(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function HA(a,c){var h=FA(a);a=0;for(var y;h;){if(h.nodeType===3){if(y=a+h.textContent.length,a<=c&&y>=c)return{node:h,offset:c-a};a=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=FA(h)}}function UA(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?UA(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function $A(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=ss(a.document);c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=ss(a.document)}return c}function B0(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var W$=Vi&&"documentMode"in document&&11>=document.documentMode,ac=null,z0=null,td=null,V0=!1;function GA(a,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;V0||ac==null||ac!==ss(y)||(y=ac,"selectionStart"in y&&B0(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),td&&ed(td,y)||(td=y,y=Bp(z0,"onSelect"),0<y.length&&(c=new pe("onSelect","select",null,c,h),a.push({event:c,listeners:y}),c.target=ac)))}function Va(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var lc={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},q0={},WA={};Vi&&(WA=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function qa(a){if(q0[a])return q0[a];if(!lc[a])return a;var c=lc[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in WA)return q0[a]=c[h];return a}var KA=qa("animationend"),YA=qa("animationiteration"),XA=qa("animationstart"),K$=qa("transitionrun"),Y$=qa("transitionstart"),X$=qa("transitioncancel"),ZA=qa("transitionend"),JA=new Map,F0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");F0.push("scrollEnd");function qi(a,c){JA.set(a,c),J(c,[a])}var QA=new WeakMap;function pi(a,c){if(typeof a=="object"&&a!==null){var h=QA.get(a);return h!==void 0?h:(c={value:a,source:c,stack:ec(c)},QA.set(a,c),c)}return{value:a,source:c,stack:ec(c)}}var mi=[],cc=0,H0=0;function ep(){for(var a=cc,c=H0=cc=0;c<a;){var h=mi[c];mi[c++]=null;var y=mi[c];mi[c++]=null;var v=mi[c];mi[c++]=null;var k=mi[c];if(mi[c++]=null,y!==null&&v!==null){var D=y.pending;D===null?v.next=v:(v.next=D.next,D.next=v),y.pending=v}k!==0&&eM(h,v,k)}}function tp(a,c,h,y){mi[cc++]=a,mi[cc++]=c,mi[cc++]=h,mi[cc++]=y,H0|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function U0(a,c,h,y){return tp(a,c,h,y),np(a)}function uc(a,c){return tp(a,null,null,c),np(a)}function eM(a,c,h){a.lanes|=h;var y=a.alternate;y!==null&&(y.lanes|=h);for(var v=!1,k=a.return;k!==null;)k.childLanes|=h,y=k.alternate,y!==null&&(y.childLanes|=h),k.tag===22&&(a=k.stateNode,a===null||a._visibility&1||(v=!0)),a=k,k=k.return;return a.tag===3?(k=a.stateNode,v&&c!==null&&(v=31-Dt(h),a=k.hiddenUpdates,y=a[v],y===null?a[v]=[c]:y.push(c),c.lane=h|536870912),k):null}function np(a){if(50<Nd)throw Nd=0,Xb=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var dc={};function Z$(a,c,h,y){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(a,c,h,y){return new Z$(a,c,h,y)}function $0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ls(a,c){var h=a.alternate;return h===null?(h=Zr(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function tM(a,c){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,c=h.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function rp(a,c,h,y,v,k){var D=0;if(y=a,typeof a=="function")$0(a)&&(D=1);else if(typeof a=="string")D=Q7(a,h,$.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=Zr(31,h,c,v),a.elementType=L,a.lanes=k,a;case x:return Fa(h.children,v,k,c);case w:D=8,v|=24;break;case S:return a=Zr(12,h,c,v|2),a.elementType=S,a.lanes=k,a;case A:return a=Zr(13,h,c,v),a.elementType=A,a.lanes=k,a;case _:return a=Zr(19,h,c,v),a.elementType=_,a.lanes=k,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:case E:D=10;break e;case T:D=9;break e;case N:D=11;break e;case O:D=14;break e;case R:D=16,y=null;break e}D=29,h=Error(r(130,a===null?"null":typeof a,"")),y=null}return c=Zr(D,h,c,v),c.elementType=a,c.type=y,c.lanes=k,c}function Fa(a,c,h,y){return a=Zr(7,a,y,c),a.lanes=h,a}function G0(a,c,h){return a=Zr(6,a,null,c),a.lanes=h,a}function W0(a,c,h){return c=Zr(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var fc=[],hc=0,ip=null,sp=0,gi=[],yi=0,Ha=null,Is=1,Ps="";function Ua(a,c){fc[hc++]=sp,fc[hc++]=ip,ip=a,sp=c}function nM(a,c,h){gi[yi++]=Is,gi[yi++]=Ps,gi[yi++]=Ha,Ha=a;var y=Is;a=Ps;var v=32-Dt(y)-1;y&=~(1<<v),h+=1;var k=32-Dt(c)+v;if(30<k){var D=v-v%5;k=(y&(1<<D)-1).toString(32),y>>=D,v-=D,Is=1<<32-Dt(c)+v|h<<v|y,Ps=k+a}else Is=1<<k|h<<v|y,Ps=a}function K0(a){a.return!==null&&(Ua(a,1),nM(a,1,0))}function Y0(a){for(;a===ip;)ip=fc[--hc],fc[hc]=null,sp=fc[--hc],fc[hc]=null;for(;a===Ha;)Ha=gi[--yi],gi[yi]=null,Ps=gi[--yi],gi[yi]=null,Is=gi[--yi],gi[yi]=null}var Sr=null,sn=null,vt=!1,$a=null,ls=!1,X0=Error(r(519));function Ga(a){var c=Error(r(418,""));throw id(pi(c,a)),X0}function rM(a){var c=a.stateNode,h=a.type,y=a.memoizedProps;switch(c[Xt]=a,c[zt]=y,h){case"dialog":ot("cancel",c),ot("close",c);break;case"iframe":case"object":case"embed":ot("load",c);break;case"video":case"audio":for(h=0;h<Ad.length;h++)ot(Ad[h],c);break;case"source":ot("error",c);break;case"img":case"image":case"link":ot("error",c),ot("load",c);break;case"details":ot("toggle",c);break;case"input":ot("invalid",c),Co(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),So(c);break;case"select":ot("invalid",c);break;case"textarea":ot("invalid",c),nc(c,y.value,y.defaultValue,y.children),So(c)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||y.suppressHydrationWarning===!0||vD(c.textContent,h)?(y.popover!=null&&(ot("beforetoggle",c),ot("toggle",c)),y.onScroll!=null&&ot("scroll",c),y.onScrollEnd!=null&&ot("scrollend",c),y.onClick!=null&&(c.onclick=zp),c=!0):c=!1,c||Ga(a)}function iM(a){for(Sr=a.return;Sr;)switch(Sr.tag){case 5:case 13:ls=!1;return;case 27:case 3:ls=!0;return;default:Sr=Sr.return}}function nd(a){if(a!==Sr)return!1;if(!vt)return iM(a),vt=!0,!1;var c=a.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||fx(a.type,a.memoizedProps)),h=!h),h&&sn&&Ga(a),iM(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(h=a.data,h==="/$"){if(c===0){sn=Hi(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;a=a.nextSibling}sn=null}}else c===27?(c=sn,Ho(a.type)?(a=gx,gx=null,sn=a):sn=c):sn=Sr?Hi(a.stateNode.nextSibling):null;return!0}function rd(){sn=Sr=null,vt=!1}function sM(){var a=$a;return a!==null&&(Lr===null?Lr=a:Lr.push.apply(Lr,a),$a=null),a}function id(a){$a===null?$a=[a]:$a.push(a)}var Z0=W(null),Wa=null,Bs=null;function Ao(a,c,h){re(Z0,c._currentValue),c._currentValue=h}function zs(a){a._currentValue=Z0.current,ae(Z0)}function J0(a,c,h){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===h)break;a=a.return}}function Q0(a,c,h,y){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var k=v.dependencies;if(k!==null){var D=v.child;k=k.firstContext;e:for(;k!==null;){var B=k;k=v;for(var K=0;K<c.length;K++)if(B.context===c[K]){k.lanes|=h,B=k.alternate,B!==null&&(B.lanes|=h),J0(k.return,h,a),y||(D=null);break e}k=B.next}}else if(v.tag===18){if(D=v.return,D===null)throw Error(r(341));D.lanes|=h,k=D.alternate,k!==null&&(k.lanes|=h),J0(D,h,a),D=null}else D=v.child;if(D!==null)D.return=v;else for(D=v;D!==null;){if(D===a){D=null;break}if(v=D.sibling,v!==null){v.return=D.return,D=v;break}D=D.return}v=D}}function sd(a,c,h,y){a=null;for(var v=c,k=!1;v!==null;){if(!k){if((v.flags&524288)!==0)k=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var D=v.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var B=v.type;Xr(v.pendingProps.value,D.value)||(a!==null?a.push(B):a=[B])}}else if(v===de.current){if(D=v.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Od):a=[Od])}v=v.return}a!==null&&Q0(c,a,h,y),c.flags|=262144}function op(a){for(a=a.firstContext;a!==null;){if(!Xr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ka(a){Wa=a,Bs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ur(a){return oM(Wa,a)}function ap(a,c){return Wa===null&&Ka(a),oM(a,c)}function oM(a,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Bs===null){if(a===null)throw Error(r(308));Bs=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Bs=Bs.next=c;return h}var J$=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(h,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(h){return h()})}},Q$=t.unstable_scheduleCallback,e7=t.unstable_NormalPriority,jn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function eb(){return{controller:new J$,data:new Map,refCount:0}}function od(a){a.refCount--,a.refCount===0&&Q$(e7,function(){a.controller.abort()})}var ad=null,tb=0,pc=0,mc=null;function t7(a,c){if(ad===null){var h=ad=[];tb=0,pc=rx(),mc={status:"pending",value:void 0,then:function(y){h.push(y)}}}return tb++,c.then(aM,aM),c}function aM(){if(--tb===0&&ad!==null){mc!==null&&(mc.status="fulfilled");var a=ad;ad=null,pc=0,mc=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function n7(a,c){var h=[],y={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return a.then(function(){y.status="fulfilled",y.value=c;for(var v=0;v<h.length;v++)(0,h[v])(c)},function(v){for(y.status="rejected",y.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),y}var lM=j.S;j.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&t7(a,c),lM!==null&&lM(a,c)};var Ya=W(null);function nb(){var a=Ya.current;return a!==null?a:It.pooledCache}function lp(a,c){c===null?re(Ya,Ya.current):re(Ya,c.pool)}function cM(){var a=nb();return a===null?null:{parent:jn._currentValue,pool:a}}var ld=Error(r(460)),uM=Error(r(474)),cp=Error(r(542)),rb={then:function(){}};function dM(a){return a=a.status,a==="fulfilled"||a==="rejected"}function up(){}function fM(a,c,h){switch(h=a[h],h===void 0?a.push(c):h!==c&&(c.then(up,up),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,pM(a),a;default:if(typeof c.status=="string")c.then(up,up);else{if(a=It,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(y){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=y}},function(y){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,pM(a),a}throw cd=c,ld}}var cd=null;function hM(){if(cd===null)throw Error(r(459));var a=cd;return cd=null,a}function pM(a){if(a===ld||a===cp)throw Error(r(483))}var Mo=!1;function ib(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sb(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function _o(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Do(a,c,h){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(kt&2)!==0){var v=y.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),y.pending=c,c=np(a),eM(a,null,h),c}return tp(a,y,c,h),np(a)}function ud(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Gr(a,h)}}function ob(a,c){var h=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var v=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};k===null?v=k=D:k=k.next=D,h=h.next}while(h!==null);k===null?v=k=c:k=k.next=c}else v=k=c;h={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:k,shared:y.shared,callbacks:y.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}var ab=!1;function dd(){if(ab){var a=mc;if(a!==null)throw a}}function fd(a,c,h,y){ab=!1;var v=a.updateQueue;Mo=!1;var k=v.firstBaseUpdate,D=v.lastBaseUpdate,B=v.shared.pending;if(B!==null){v.shared.pending=null;var K=B,le=K.next;K.next=null,D===null?k=le:D.next=le,D=K;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,B=fe.lastBaseUpdate,B!==D&&(B===null?fe.firstBaseUpdate=le:B.next=le,fe.lastBaseUpdate=K))}if(k!==null){var me=v.baseState;D=0,fe=le=K=null,B=k;do{var ce=B.lane&-536870913,ue=ce!==B.lane;if(ue?(ft&ce)===ce:(y&ce)===ce){ce!==0&&ce===pc&&(ab=!0),fe!==null&&(fe=fe.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var We=a,Ue=B;ce=c;var At=h;switch(Ue.tag){case 1:if(We=Ue.payload,typeof We=="function"){me=We.call(At,me,ce);break e}me=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Ue.payload,ce=typeof We=="function"?We.call(At,me,ce):We,ce==null)break e;me=f({},me,ce);break e;case 2:Mo=!0}}ce=B.callback,ce!==null&&(a.flags|=64,ue&&(a.flags|=8192),ue=v.callbacks,ue===null?v.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:B.tag,payload:B.payload,callback:B.callback,next:null},fe===null?(le=fe=ue,K=me):fe=fe.next=ue,D|=ce;if(B=B.next,B===null){if(B=v.shared.pending,B===null)break;ue=B,B=ue.next,ue.next=null,v.lastBaseUpdate=ue,v.shared.pending=null}}while(!0);fe===null&&(K=me),v.baseState=K,v.firstBaseUpdate=le,v.lastBaseUpdate=fe,k===null&&(v.shared.lanes=0),zo|=D,a.lanes=D,a.memoizedState=me}}function mM(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function gM(a,c){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)mM(h[a],c)}var gc=W(null),dp=W(0);function yM(a,c){a=Gs,re(dp,a),re(gc,c),Gs=a|c.baseLanes}function lb(){re(dp,Gs),re(gc,gc.current)}function cb(){Gs=dp.current,ae(gc),ae(dp)}var Ro=0,rt=null,Nt=null,wn=null,fp=!1,yc=!1,Xa=!1,hp=0,hd=0,bc=null,r7=0;function dn(){throw Error(r(321))}function ub(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Xr(a[h],c[h]))return!1;return!0}function db(a,c,h,y,v,k){return Ro=k,rt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,j.H=a===null||a.memoizedState===null?e_:t_,Xa=!1,k=h(y,v),Xa=!1,yc&&(k=xM(c,h,y,v)),bM(a),k}function bM(a){j.H=xp;var c=Nt!==null&&Nt.next!==null;if(Ro=0,wn=Nt=rt=null,fp=!1,hd=0,bc=null,c)throw Error(r(300));a===null||zn||(a=a.dependencies,a!==null&&op(a)&&(zn=!0))}function xM(a,c,h,y){rt=a;var v=0;do{if(yc&&(bc=null),hd=0,yc=!1,25<=v)throw Error(r(301));if(v+=1,wn=Nt=null,a.updateQueue!=null){var k=a.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}j.H=u7,k=c(h,y)}while(yc);return k}function i7(){var a=j.H,c=a.useState()[0];return c=typeof c.then=="function"?pd(c):c,a=a.useState()[0],(Nt!==null?Nt.memoizedState:null)!==a&&(rt.flags|=1024),c}function fb(){var a=hp!==0;return hp=0,a}function hb(a,c,h){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~h}function pb(a){if(fp){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}fp=!1}Ro=0,wn=Nt=rt=null,yc=!1,hd=hp=0,bc=null}function jr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?rt.memoizedState=wn=a:wn=wn.next=a,wn}function Sn(){if(Nt===null){var a=rt.alternate;a=a!==null?a.memoizedState:null}else a=Nt.next;var c=wn===null?rt.memoizedState:wn.next;if(c!==null)wn=c,Nt=a;else{if(a===null)throw rt.alternate===null?Error(r(467)):Error(r(310));Nt=a,a={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},wn===null?rt.memoizedState=wn=a:wn=wn.next=a}return wn}function mb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pd(a){var c=hd;return hd+=1,bc===null&&(bc=[]),a=fM(bc,a,c),c=rt,(wn===null?c.memoizedState:wn.next)===null&&(c=c.alternate,j.H=c===null||c.memoizedState===null?e_:t_),a}function pp(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return pd(a);if(a.$$typeof===E)return ur(a)}throw Error(r(438,String(a)))}function gb(a){var c=null,h=rt.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=rt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=mb(),rt.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(a),y=0;y<a;y++)h[y]=I;return c.index++,h}function Vs(a,c){return typeof c=="function"?c(a):c}function mp(a){var c=Sn();return yb(c,Nt,a)}function yb(a,c,h){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var v=a.baseQueue,k=y.pending;if(k!==null){if(v!==null){var D=v.next;v.next=k.next,k.next=D}c.baseQueue=v=k,y.pending=null}if(k=a.baseState,v===null)a.memoizedState=k;else{c=v.next;var B=D=null,K=null,le=c,fe=!1;do{var me=le.lane&-536870913;if(me!==le.lane?(ft&me)===me:(Ro&me)===me){var ce=le.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),me===pc&&(fe=!0);else if((Ro&ce)===ce){le=le.next,ce===pc&&(fe=!0);continue}else me={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(B=K=me,D=k):K=K.next=me,rt.lanes|=ce,zo|=ce;me=le.action,Xa&&h(k,me),k=le.hasEagerState?le.eagerState:h(k,me)}else ce={lane:me,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(B=K=ce,D=k):K=K.next=ce,rt.lanes|=me,zo|=me;le=le.next}while(le!==null&&le!==c);if(K===null?D=k:K.next=B,!Xr(k,a.memoizedState)&&(zn=!0,fe&&(h=mc,h!==null)))throw h;a.memoizedState=k,a.baseState=D,a.baseQueue=K,y.lastRenderedState=k}return v===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function bb(a){var c=Sn(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var y=h.dispatch,v=h.pending,k=c.memoizedState;if(v!==null){h.pending=null;var D=v=v.next;do k=a(k,D.action),D=D.next;while(D!==v);Xr(k,c.memoizedState)||(zn=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),h.lastRenderedState=k}return[k,y]}function vM(a,c,h){var y=rt,v=Sn(),k=vt;if(k){if(h===void 0)throw Error(r(407));h=h()}else h=c();var D=!Xr((Nt||v).memoizedState,h);D&&(v.memoizedState=h,zn=!0),v=v.queue;var B=kM.bind(null,y,v,a);if(md(2048,8,B,[a]),v.getSnapshot!==c||D||wn!==null&&wn.memoizedState.tag&1){if(y.flags|=2048,xc(9,gp(),SM.bind(null,y,v,h,c),null),It===null)throw Error(r(349));k||(Ro&124)!==0||wM(y,c,h)}return h}function wM(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=rt.updateQueue,c===null?(c=mb(),rt.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function SM(a,c,h,y){c.value=h,c.getSnapshot=y,CM(c)&&EM(a)}function kM(a,c,h){return h(function(){CM(c)&&EM(a)})}function CM(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Xr(a,h)}catch{return!0}}function EM(a){var c=uc(a,2);c!==null&&ni(c,a,2)}function xb(a){var c=jr();if(typeof a=="function"){var h=a;if(a=h(),Xa){_t(!0);try{h()}finally{_t(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:a},c}function NM(a,c,h,y){return a.baseState=h,yb(a,Nt,typeof y=="function"?y:Vs)}function s7(a,c,h,y,v){if(bp(a))throw Error(r(485));if(a=c.action,a!==null){var k={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){k.listeners.push(D)}};j.T!==null?h(!0):k.isTransition=!1,y(k),h=c.pending,h===null?(k.next=c.pending=k,TM(c,k)):(k.next=h.next,c.pending=h.next=k)}}function TM(a,c){var h=c.action,y=c.payload,v=a.state;if(c.isTransition){var k=j.T,D={};j.T=D;try{var B=h(v,y),K=j.S;K!==null&&K(D,B),AM(a,c,B)}catch(le){vb(a,c,le)}finally{j.T=k}}else try{k=h(v,y),AM(a,c,k)}catch(le){vb(a,c,le)}}function AM(a,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){MM(a,c,y)},function(y){return vb(a,c,y)}):MM(a,c,h)}function MM(a,c,h){c.status="fulfilled",c.value=h,_M(c),a.state=h,c=a.pending,c!==null&&(h=c.next,h===c?a.pending=null:(h=h.next,c.next=h,TM(a,h)))}function vb(a,c,h){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,_M(c),c=c.next;while(c!==y)}a.action=null}function _M(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function DM(a,c){return c}function RM(a,c){if(vt){var h=It.formState;if(h!==null){e:{var y=rt;if(vt){if(sn){t:{for(var v=sn,k=ls;v.nodeType!==8;){if(!k){v=null;break t}if(v=Hi(v.nextSibling),v===null){v=null;break t}}k=v.data,v=k==="F!"||k==="F"?v:null}if(v){sn=Hi(v.nextSibling),y=v.data==="F!";break e}}Ga(y)}y=!1}y&&(c=h[0])}}return h=jr(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:DM,lastRenderedState:c},h.queue=y,h=ZM.bind(null,rt,y),y.dispatch=h,y=xb(!1),k=Eb.bind(null,rt,!1,y.queue),y=jr(),v={state:c,dispatch:null,action:a,pending:null},y.queue=v,h=s7.bind(null,rt,v,k,h),v.dispatch=h,y.memoizedState=a,[c,h,!1]}function jM(a){var c=Sn();return OM(c,Nt,a)}function OM(a,c,h){if(c=yb(a,c,DM)[0],a=mp(Vs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=pd(c)}catch(D){throw D===ld?cp:D}else y=c;c=Sn();var v=c.queue,k=v.dispatch;return h!==c.memoizedState&&(rt.flags|=2048,xc(9,gp(),o7.bind(null,v,h),null)),[y,k,a]}function o7(a,c){a.action=c}function LM(a){var c=Sn(),h=Nt;if(h!==null)return OM(c,h,a);Sn(),c=c.memoizedState,h=Sn();var y=h.queue.dispatch;return h.memoizedState=a,[c,y,!1]}function xc(a,c,h,y){return a={tag:a,create:h,deps:y,inst:c,next:null},c=rt.updateQueue,c===null&&(c=mb(),rt.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=a.next=a:(y=h.next,h.next=a,a.next=y,c.lastEffect=a),a}function gp(){return{destroy:void 0,resource:void 0}}function IM(){return Sn().memoizedState}function yp(a,c,h,y){var v=jr();y=y===void 0?null:y,rt.flags|=a,v.memoizedState=xc(1|c,gp(),h,y)}function md(a,c,h,y){var v=Sn();y=y===void 0?null:y;var k=v.memoizedState.inst;Nt!==null&&y!==null&&ub(y,Nt.memoizedState.deps)?v.memoizedState=xc(c,k,h,y):(rt.flags|=a,v.memoizedState=xc(1|c,k,h,y))}function PM(a,c){yp(8390656,8,a,c)}function BM(a,c){md(2048,8,a,c)}function zM(a,c){return md(4,2,a,c)}function VM(a,c){return md(4,4,a,c)}function qM(a,c){if(typeof c=="function"){a=a();var h=c(a);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function FM(a,c,h){h=h!=null?h.concat([a]):null,md(4,4,qM.bind(null,c,a),h)}function wb(){}function HM(a,c){var h=Sn();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&ub(c,y[1])?y[0]:(h.memoizedState=[a,c],a)}function UM(a,c){var h=Sn();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&ub(c,y[1]))return y[0];if(y=a(),Xa){_t(!0);try{a()}finally{_t(!1)}}return h.memoizedState=[y,c],y}function Sb(a,c,h){return h===void 0||(Ro&1073741824)!==0?a.memoizedState=c:(a.memoizedState=h,a=W_(),rt.lanes|=a,zo|=a,h)}function $M(a,c,h,y){return Xr(h,c)?h:gc.current!==null?(a=Sb(a,h,y),Xr(a,c)||(zn=!0),a):(Ro&42)===0?(zn=!0,a.memoizedState=h):(a=W_(),rt.lanes|=a,zo|=a,c)}function GM(a,c,h,y,v){var k=V.p;V.p=k!==0&&8>k?k:8;var D=j.T,B={};j.T=B,Eb(a,!1,c,h);try{var K=v(),le=j.S;if(le!==null&&le(B,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=n7(K,y);gd(a,c,fe,ti(a))}else gd(a,c,y,ti(a))}catch(me){gd(a,c,{then:function(){},status:"rejected",reason:me},ti())}finally{V.p=k,j.T=D}}function a7(){}function kb(a,c,h,y){if(a.tag!==5)throw Error(r(476));var v=WM(a).queue;GM(a,v,c,G,h===null?a7:function(){return KM(a),h(y)})}function WM(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:G},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vs,lastRenderedState:h},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function KM(a){var c=WM(a).next.queue;gd(a,c,{},ti())}function Cb(){return ur(Od)}function YM(){return Sn().memoizedState}function XM(){return Sn().memoizedState}function l7(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var h=ti();a=_o(h);var y=Do(c,a,h);y!==null&&(ni(y,c,h),ud(y,c,h)),c={cache:eb()},a.payload=c;return}c=c.return}}function c7(a,c,h){var y=ti();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},bp(a)?JM(c,h):(h=U0(a,c,h,y),h!==null&&(ni(h,a,y),QM(h,c,y)))}function ZM(a,c,h){var y=ti();gd(a,c,h,y)}function gd(a,c,h,y){var v={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(bp(a))JM(c,v);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var D=c.lastRenderedState,B=k(D,h);if(v.hasEagerState=!0,v.eagerState=B,Xr(B,D))return tp(a,c,v,0),It===null&&ep(),!1}catch{}finally{}if(h=U0(a,c,v,y),h!==null)return ni(h,a,y),QM(h,c,y),!0}return!1}function Eb(a,c,h,y){if(y={lane:2,revertLane:rx(),action:y,hasEagerState:!1,eagerState:null,next:null},bp(a)){if(c)throw Error(r(479))}else c=U0(a,h,y,2),c!==null&&ni(c,a,2)}function bp(a){var c=a.alternate;return a===rt||c!==null&&c===rt}function JM(a,c){yc=fp=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function QM(a,c,h){if((h&4194048)!==0){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Gr(a,h)}}var xp={readContext:ur,use:pp,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn},e_={readContext:ur,use:pp,useCallback:function(a,c){return jr().memoizedState=[a,c===void 0?null:c],a},useContext:ur,useEffect:PM,useImperativeHandle:function(a,c,h){h=h!=null?h.concat([a]):null,yp(4194308,4,qM.bind(null,c,a),h)},useLayoutEffect:function(a,c){return yp(4194308,4,a,c)},useInsertionEffect:function(a,c){yp(4,2,a,c)},useMemo:function(a,c){var h=jr();c=c===void 0?null:c;var y=a();if(Xa){_t(!0);try{a()}finally{_t(!1)}}return h.memoizedState=[y,c],y},useReducer:function(a,c,h){var y=jr();if(h!==void 0){var v=h(c);if(Xa){_t(!0);try{h(c)}finally{_t(!1)}}}else v=c;return y.memoizedState=y.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},y.queue=a,a=a.dispatch=c7.bind(null,rt,a),[y.memoizedState,a]},useRef:function(a){var c=jr();return a={current:a},c.memoizedState=a},useState:function(a){a=xb(a);var c=a.queue,h=ZM.bind(null,rt,c);return c.dispatch=h,[a.memoizedState,h]},useDebugValue:wb,useDeferredValue:function(a,c){var h=jr();return Sb(h,a,c)},useTransition:function(){var a=xb(!1);return a=GM.bind(null,rt,a.queue,!0,!1),jr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,h){var y=rt,v=jr();if(vt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),It===null)throw Error(r(349));(ft&124)!==0||wM(y,c,h)}v.memoizedState=h;var k={value:h,getSnapshot:c};return v.queue=k,PM(kM.bind(null,y,k,a),[a]),y.flags|=2048,xc(9,gp(),SM.bind(null,y,k,h,c),null),h},useId:function(){var a=jr(),c=It.identifierPrefix;if(vt){var h=Ps,y=Is;h=(y&~(1<<32-Dt(y)-1)).toString(32)+h,c=""+c+"R"+h,h=hp++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=r7++,c=""+c+"r"+h.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:Cb,useFormState:RM,useActionState:RM,useOptimistic:function(a){var c=jr();c.memoizedState=c.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Eb.bind(null,rt,!0,h),h.dispatch=c,[a,c]},useMemoCache:gb,useCacheRefresh:function(){return jr().memoizedState=l7.bind(null,rt)}},t_={readContext:ur,use:pp,useCallback:HM,useContext:ur,useEffect:BM,useImperativeHandle:FM,useInsertionEffect:zM,useLayoutEffect:VM,useMemo:UM,useReducer:mp,useRef:IM,useState:function(){return mp(Vs)},useDebugValue:wb,useDeferredValue:function(a,c){var h=Sn();return $M(h,Nt.memoizedState,a,c)},useTransition:function(){var a=mp(Vs)[0],c=Sn().memoizedState;return[typeof a=="boolean"?a:pd(a),c]},useSyncExternalStore:vM,useId:YM,useHostTransitionStatus:Cb,useFormState:jM,useActionState:jM,useOptimistic:function(a,c){var h=Sn();return NM(h,Nt,a,c)},useMemoCache:gb,useCacheRefresh:XM},u7={readContext:ur,use:pp,useCallback:HM,useContext:ur,useEffect:BM,useImperativeHandle:FM,useInsertionEffect:zM,useLayoutEffect:VM,useMemo:UM,useReducer:bb,useRef:IM,useState:function(){return bb(Vs)},useDebugValue:wb,useDeferredValue:function(a,c){var h=Sn();return Nt===null?Sb(h,a,c):$M(h,Nt.memoizedState,a,c)},useTransition:function(){var a=bb(Vs)[0],c=Sn().memoizedState;return[typeof a=="boolean"?a:pd(a),c]},useSyncExternalStore:vM,useId:YM,useHostTransitionStatus:Cb,useFormState:LM,useActionState:LM,useOptimistic:function(a,c){var h=Sn();return Nt!==null?NM(h,Nt,a,c):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:gb,useCacheRefresh:XM},vc=null,yd=0;function vp(a){var c=yd;return yd+=1,vc===null&&(vc=[]),fM(vc,a,c)}function bd(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function wp(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function n_(a){var c=a._init;return c(a._payload)}function r_(a){function c(ne,Q){if(a){var se=ne.deletions;se===null?(ne.deletions=[Q],ne.flags|=16):se.push(Q)}}function h(ne,Q){if(!a)return null;for(;Q!==null;)c(ne,Q),Q=Q.sibling;return null}function y(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function v(ne,Q){return ne=Ls(ne,Q),ne.index=0,ne.sibling=null,ne}function k(ne,Q,se){return ne.index=se,a?(se=ne.alternate,se!==null?(se=se.index,se<Q?(ne.flags|=67108866,Q):se):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function D(ne){return a&&ne.alternate===null&&(ne.flags|=67108866),ne}function B(ne,Q,se,he){return Q===null||Q.tag!==6?(Q=G0(se,ne.mode,he),Q.return=ne,Q):(Q=v(Q,se),Q.return=ne,Q)}function K(ne,Q,se,he){var je=se.type;return je===x?fe(ne,Q,se.props.children,he,se.key):Q!==null&&(Q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===R&&n_(je)===Q.type)?(Q=v(Q,se.props),bd(Q,se),Q.return=ne,Q):(Q=rp(se.type,se.key,se.props,null,ne.mode,he),bd(Q,se),Q.return=ne,Q)}function le(ne,Q,se,he){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==se.containerInfo||Q.stateNode.implementation!==se.implementation?(Q=W0(se,ne.mode,he),Q.return=ne,Q):(Q=v(Q,se.children||[]),Q.return=ne,Q)}function fe(ne,Q,se,he,je){return Q===null||Q.tag!==7?(Q=Fa(se,ne.mode,he,je),Q.return=ne,Q):(Q=v(Q,se),Q.return=ne,Q)}function me(ne,Q,se){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=G0(""+Q,ne.mode,se),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return se=rp(Q.type,Q.key,Q.props,null,ne.mode,se),bd(se,Q),se.return=ne,se;case b:return Q=W0(Q,ne.mode,se),Q.return=ne,Q;case R:var he=Q._init;return Q=he(Q._payload),me(ne,Q,se)}if(H(Q)||q(Q))return Q=Fa(Q,ne.mode,se,null),Q.return=ne,Q;if(typeof Q.then=="function")return me(ne,vp(Q),se);if(Q.$$typeof===E)return me(ne,ap(ne,Q),se);wp(ne,Q)}return null}function ce(ne,Q,se,he){var je=Q!==null?Q.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return je!==null?null:B(ne,Q,""+se,he);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case m:return se.key===je?K(ne,Q,se,he):null;case b:return se.key===je?le(ne,Q,se,he):null;case R:return je=se._init,se=je(se._payload),ce(ne,Q,se,he)}if(H(se)||q(se))return je!==null?null:fe(ne,Q,se,he,null);if(typeof se.then=="function")return ce(ne,Q,vp(se),he);if(se.$$typeof===E)return ce(ne,Q,ap(ne,se),he);wp(ne,se)}return null}function ue(ne,Q,se,he,je){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ne=ne.get(se)||null,B(Q,ne,""+he,je);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case m:return ne=ne.get(he.key===null?se:he.key)||null,K(Q,ne,he,je);case b:return ne=ne.get(he.key===null?se:he.key)||null,le(Q,ne,he,je);case R:var it=he._init;return he=it(he._payload),ue(ne,Q,se,he,je)}if(H(he)||q(he))return ne=ne.get(se)||null,fe(Q,ne,he,je,null);if(typeof he.then=="function")return ue(ne,Q,se,vp(he),je);if(he.$$typeof===E)return ue(ne,Q,se,ap(Q,he),je);wp(Q,he)}return null}function We(ne,Q,se,he){for(var je=null,it=null,ze=Q,Ge=Q=0,qn=null;ze!==null&&Ge<se.length;Ge++){ze.index>Ge?(qn=ze,ze=null):qn=ze.sibling;var bt=ce(ne,ze,se[Ge],he);if(bt===null){ze===null&&(ze=qn);break}a&&ze&&bt.alternate===null&&c(ne,ze),Q=k(bt,Q,Ge),it===null?je=bt:it.sibling=bt,it=bt,ze=qn}if(Ge===se.length)return h(ne,ze),vt&&Ua(ne,Ge),je;if(ze===null){for(;Ge<se.length;Ge++)ze=me(ne,se[Ge],he),ze!==null&&(Q=k(ze,Q,Ge),it===null?je=ze:it.sibling=ze,it=ze);return vt&&Ua(ne,Ge),je}for(ze=y(ze);Ge<se.length;Ge++)qn=ue(ze,ne,Ge,se[Ge],he),qn!==null&&(a&&qn.alternate!==null&&ze.delete(qn.key===null?Ge:qn.key),Q=k(qn,Q,Ge),it===null?je=qn:it.sibling=qn,it=qn);return a&&ze.forEach(function(Ko){return c(ne,Ko)}),vt&&Ua(ne,Ge),je}function Ue(ne,Q,se,he){if(se==null)throw Error(r(151));for(var je=null,it=null,ze=Q,Ge=Q=0,qn=null,bt=se.next();ze!==null&&!bt.done;Ge++,bt=se.next()){ze.index>Ge?(qn=ze,ze=null):qn=ze.sibling;var Ko=ce(ne,ze,bt.value,he);if(Ko===null){ze===null&&(ze=qn);break}a&&ze&&Ko.alternate===null&&c(ne,ze),Q=k(Ko,Q,Ge),it===null?je=Ko:it.sibling=Ko,it=Ko,ze=qn}if(bt.done)return h(ne,ze),vt&&Ua(ne,Ge),je;if(ze===null){for(;!bt.done;Ge++,bt=se.next())bt=me(ne,bt.value,he),bt!==null&&(Q=k(bt,Q,Ge),it===null?je=bt:it.sibling=bt,it=bt);return vt&&Ua(ne,Ge),je}for(ze=y(ze);!bt.done;Ge++,bt=se.next())bt=ue(ze,ne,Ge,bt.value,he),bt!==null&&(a&&bt.alternate!==null&&ze.delete(bt.key===null?Ge:bt.key),Q=k(bt,Q,Ge),it===null?je=bt:it.sibling=bt,it=bt);return a&&ze.forEach(function(dG){return c(ne,dG)}),vt&&Ua(ne,Ge),je}function At(ne,Q,se,he){if(typeof se=="object"&&se!==null&&se.type===x&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case m:e:{for(var je=se.key;Q!==null;){if(Q.key===je){if(je=se.type,je===x){if(Q.tag===7){h(ne,Q.sibling),he=v(Q,se.props.children),he.return=ne,ne=he;break e}}else if(Q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===R&&n_(je)===Q.type){h(ne,Q.sibling),he=v(Q,se.props),bd(he,se),he.return=ne,ne=he;break e}h(ne,Q);break}else c(ne,Q);Q=Q.sibling}se.type===x?(he=Fa(se.props.children,ne.mode,he,se.key),he.return=ne,ne=he):(he=rp(se.type,se.key,se.props,null,ne.mode,he),bd(he,se),he.return=ne,ne=he)}return D(ne);case b:e:{for(je=se.key;Q!==null;){if(Q.key===je)if(Q.tag===4&&Q.stateNode.containerInfo===se.containerInfo&&Q.stateNode.implementation===se.implementation){h(ne,Q.sibling),he=v(Q,se.children||[]),he.return=ne,ne=he;break e}else{h(ne,Q);break}else c(ne,Q);Q=Q.sibling}he=W0(se,ne.mode,he),he.return=ne,ne=he}return D(ne);case R:return je=se._init,se=je(se._payload),At(ne,Q,se,he)}if(H(se))return We(ne,Q,se,he);if(q(se)){if(je=q(se),typeof je!="function")throw Error(r(150));return se=je.call(se),Ue(ne,Q,se,he)}if(typeof se.then=="function")return At(ne,Q,vp(se),he);if(se.$$typeof===E)return At(ne,Q,ap(ne,se),he);wp(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Q!==null&&Q.tag===6?(h(ne,Q.sibling),he=v(Q,se),he.return=ne,ne=he):(h(ne,Q),he=G0(se,ne.mode,he),he.return=ne,ne=he),D(ne)):h(ne,Q)}return function(ne,Q,se,he){try{yd=0;var je=At(ne,Q,se,he);return vc=null,je}catch(ze){if(ze===ld||ze===cp)throw ze;var it=Zr(29,ze,null,ne.mode);return it.lanes=he,it.return=ne,it}finally{}}}var wc=r_(!0),i_=r_(!1),bi=W(null),cs=null;function jo(a){var c=a.alternate;re(On,On.current&1),re(bi,a),cs===null&&(c===null||gc.current!==null||c.memoizedState!==null)&&(cs=a)}function s_(a){if(a.tag===22){if(re(On,On.current),re(bi,a),cs===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(cs=a)}}else Oo()}function Oo(){re(On,On.current),re(bi,bi.current)}function qs(a){ae(bi),cs===a&&(cs=null),ae(On)}var On=W(0);function Sp(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||mx(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Nb(a,c,h,y){c=a.memoizedState,h=h(y,c),h=h==null?c:f({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Tb={enqueueSetState:function(a,c,h){a=a._reactInternals;var y=ti(),v=_o(y);v.payload=c,h!=null&&(v.callback=h),c=Do(a,v,y),c!==null&&(ni(c,a,y),ud(c,a,y))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var y=ti(),v=_o(y);v.tag=1,v.payload=c,h!=null&&(v.callback=h),c=Do(a,v,y),c!==null&&(ni(c,a,y),ud(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=ti(),y=_o(h);y.tag=2,c!=null&&(y.callback=c),c=Do(a,y,h),c!==null&&(ni(c,a,h),ud(c,a,h))}};function o_(a,c,h,y,v,k,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,k,D):c.prototype&&c.prototype.isPureReactComponent?!ed(h,y)||!ed(v,k):!0}function a_(a,c,h,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==a&&Tb.enqueueReplaceState(c,c.state,null)}function Za(a,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(a=a.defaultProps){h===c&&(h=f({},h));for(var v in a)h[v]===void 0&&(h[v]=a[v])}return h}var kp=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function l_(a){kp(a)}function c_(a){console.error(a)}function u_(a){kp(a)}function Cp(a,c){try{var h=a.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function d_(a,c,h){try{var y=a.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ab(a,c,h){return h=_o(h),h.tag=3,h.payload={element:null},h.callback=function(){Cp(a,c)},h}function f_(a){return a=_o(a),a.tag=3,a}function h_(a,c,h,y){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var k=y.value;a.payload=function(){return v(k)},a.callback=function(){d_(c,h,y)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(a.callback=function(){d_(c,h,y),typeof v!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var B=y.stack;this.componentDidCatch(y.value,{componentStack:B!==null?B:""})})}function d7(a,c,h,y,v){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&sd(c,h,v,!0),h=bi.current,h!==null){switch(h.tag){case 13:return cs===null?Jb():h.alternate===null&&on===0&&(on=3),h.flags&=-257,h.flags|=65536,h.lanes=v,y===rb?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),ex(a,y,v)),!1;case 22:return h.flags|=65536,y===rb?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),ex(a,y,v)),!1}throw Error(r(435,h.tag))}return ex(a,y,v),Jb(),!1}if(vt)return c=bi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,y!==X0&&(a=Error(r(422),{cause:y}),id(pi(a,h)))):(y!==X0&&(c=Error(r(423),{cause:y}),id(pi(c,h))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,y=pi(y,h),v=Ab(a.stateNode,y,v),ob(a,v),on!==4&&(on=2)),!1;var k=Error(r(520),{cause:y});if(k=pi(k,h),Ed===null?Ed=[k]:Ed.push(k),on!==4&&(on=2),c===null)return!0;y=pi(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,a=v&-v,h.lanes|=a,a=Ab(h.stateNode,y,a),ob(h,a),!1;case 1:if(c=h.type,k=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Vo===null||!Vo.has(k))))return h.flags|=65536,v&=-v,h.lanes|=v,v=f_(v),h_(v,a,h,y),ob(h,v),!1}h=h.return}while(h!==null);return!1}var p_=Error(r(461)),zn=!1;function Zn(a,c,h,y){c.child=a===null?i_(c,null,h,y):wc(c,a.child,h,y)}function m_(a,c,h,y,v){h=h.render;var k=c.ref;if("ref"in y){var D={};for(var B in y)B!=="ref"&&(D[B]=y[B])}else D=y;return Ka(c),y=db(a,c,h,D,k,v),B=fb(),a!==null&&!zn?(hb(a,c,v),Fs(a,c,v)):(vt&&B&&K0(c),c.flags|=1,Zn(a,c,y,v),c.child)}function g_(a,c,h,y,v){if(a===null){var k=h.type;return typeof k=="function"&&!$0(k)&&k.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=k,y_(a,c,k,y,v)):(a=rp(h.type,null,y,c,c.mode,v),a.ref=c.ref,a.return=c,c.child=a)}if(k=a.child,!Ib(a,v)){var D=k.memoizedProps;if(h=h.compare,h=h!==null?h:ed,h(D,y)&&a.ref===c.ref)return Fs(a,c,v)}return c.flags|=1,a=Ls(k,y),a.ref=c.ref,a.return=c,c.child=a}function y_(a,c,h,y,v){if(a!==null){var k=a.memoizedProps;if(ed(k,y)&&a.ref===c.ref)if(zn=!1,c.pendingProps=y=k,Ib(a,v))(a.flags&131072)!==0&&(zn=!0);else return c.lanes=a.lanes,Fs(a,c,v)}return Mb(a,c,h,y,v)}function b_(a,c,h){var y=c.pendingProps,v=y.children,k=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=k!==null?k.baseLanes|h:h,a!==null){for(v=c.child=a.child,k=0;v!==null;)k=k|v.lanes|v.childLanes,v=v.sibling;c.childLanes=k&~y}else c.childLanes=0,c.child=null;return x_(a,c,y,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&lp(c,k!==null?k.cachePool:null),k!==null?yM(c,k):lb(),s_(c);else return c.lanes=c.childLanes=536870912,x_(a,c,k!==null?k.baseLanes|h:h,h)}else k!==null?(lp(c,k.cachePool),yM(c,k),Oo(),c.memoizedState=null):(a!==null&&lp(c,null),lb(),Oo());return Zn(a,c,v,h),c.child}function x_(a,c,h,y){var v=nb();return v=v===null?null:{parent:jn._currentValue,pool:v},c.memoizedState={baseLanes:h,cachePool:v},a!==null&&lp(c,null),lb(),s_(c),a!==null&&sd(a,c,y,!0),null}function Ep(a,c){var h=c.ref;if(h===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(a===null||a.ref!==h)&&(c.flags|=4194816)}}function Mb(a,c,h,y,v){return Ka(c),h=db(a,c,h,y,void 0,v),y=fb(),a!==null&&!zn?(hb(a,c,v),Fs(a,c,v)):(vt&&y&&K0(c),c.flags|=1,Zn(a,c,h,v),c.child)}function v_(a,c,h,y,v,k){return Ka(c),c.updateQueue=null,h=xM(c,y,h,v),bM(a),y=fb(),a!==null&&!zn?(hb(a,c,k),Fs(a,c,k)):(vt&&y&&K0(c),c.flags|=1,Zn(a,c,h,k),c.child)}function w_(a,c,h,y,v){if(Ka(c),c.stateNode===null){var k=dc,D=h.contextType;typeof D=="object"&&D!==null&&(k=ur(D)),k=new h(y,k),c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Tb,c.stateNode=k,k._reactInternals=c,k=c.stateNode,k.props=y,k.state=c.memoizedState,k.refs={},ib(c),D=h.contextType,k.context=typeof D=="object"&&D!==null?ur(D):dc,k.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Nb(c,h,D,y),k.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(D=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),D!==k.state&&Tb.enqueueReplaceState(k,k.state,null),fd(c,y,k,v),dd(),k.state=c.memoizedState),typeof k.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(a===null){k=c.stateNode;var B=c.memoizedProps,K=Za(h,B);k.props=K;var le=k.context,fe=h.contextType;D=dc,typeof fe=="object"&&fe!==null&&(D=ur(fe));var me=h.getDerivedStateFromProps;fe=typeof me=="function"||typeof k.getSnapshotBeforeUpdate=="function",B=c.pendingProps!==B,fe||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(B||le!==D)&&a_(c,k,y,D),Mo=!1;var ce=c.memoizedState;k.state=ce,fd(c,y,k,v),dd(),le=c.memoizedState,B||ce!==le||Mo?(typeof me=="function"&&(Nb(c,h,me,y),le=c.memoizedState),(K=Mo||o_(c,h,K,y,ce,le,D))?(fe||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(c.flags|=4194308)):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=le),k.props=y,k.state=le,k.context=D,y=K):(typeof k.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{k=c.stateNode,sb(a,c),D=c.memoizedProps,fe=Za(h,D),k.props=fe,me=c.pendingProps,ce=k.context,le=h.contextType,K=dc,typeof le=="object"&&le!==null&&(K=ur(le)),B=h.getDerivedStateFromProps,(le=typeof B=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(D!==me||ce!==K)&&a_(c,k,y,K),Mo=!1,ce=c.memoizedState,k.state=ce,fd(c,y,k,v),dd();var ue=c.memoizedState;D!==me||ce!==ue||Mo||a!==null&&a.dependencies!==null&&op(a.dependencies)?(typeof B=="function"&&(Nb(c,h,B,y),ue=c.memoizedState),(fe=Mo||o_(c,h,fe,y,ce,ue,K)||a!==null&&a.dependencies!==null&&op(a.dependencies))?(le||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(y,ue,K),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(y,ue,K)),typeof k.componentDidUpdate=="function"&&(c.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof k.componentDidUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=ue),k.props=y,k.state=ue,k.context=K,y=fe):(typeof k.componentDidUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=1024),y=!1)}return k=y,Ep(a,c),y=(c.flags&128)!==0,k||y?(k=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:k.render(),c.flags|=1,a!==null&&y?(c.child=wc(c,a.child,null,v),c.child=wc(c,null,h,v)):Zn(a,c,h,v),c.memoizedState=k.state,a=c.child):a=Fs(a,c,v),a}function S_(a,c,h,y){return rd(),c.flags|=256,Zn(a,c,h,y),c.child}var _b={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Db(a){return{baseLanes:a,cachePool:cM()}}function Rb(a,c,h){return a=a!==null?a.childLanes&~h:0,c&&(a|=xi),a}function k_(a,c,h){var y=c.pendingProps,v=!1,k=(c.flags&128)!==0,D;if((D=k)||(D=a!==null&&a.memoizedState===null?!1:(On.current&2)!==0),D&&(v=!0,c.flags&=-129),D=(c.flags&32)!==0,c.flags&=-33,a===null){if(vt){if(v?jo(c):Oo(),vt){var B=sn,K;if(K=B){e:{for(K=B,B=ls;K.nodeType!==8;){if(!B){B=null;break e}if(K=Hi(K.nextSibling),K===null){B=null;break e}}B=K}B!==null?(c.memoizedState={dehydrated:B,treeContext:Ha!==null?{id:Is,overflow:Ps}:null,retryLane:536870912,hydrationErrors:null},K=Zr(18,null,null,0),K.stateNode=B,K.return=c,c.child=K,Sr=c,sn=null,K=!0):K=!1}K||Ga(c)}if(B=c.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return mx(B)?c.lanes=32:c.lanes=536870912,null;qs(c)}return B=y.children,y=y.fallback,v?(Oo(),v=c.mode,B=Np({mode:"hidden",children:B},v),y=Fa(y,v,h,null),B.return=c,y.return=c,B.sibling=y,c.child=B,v=c.child,v.memoizedState=Db(h),v.childLanes=Rb(a,D,h),c.memoizedState=_b,y):(jo(c),jb(c,B))}if(K=a.memoizedState,K!==null&&(B=K.dehydrated,B!==null)){if(k)c.flags&256?(jo(c),c.flags&=-257,c=Ob(a,c,h)):c.memoizedState!==null?(Oo(),c.child=a.child,c.flags|=128,c=null):(Oo(),v=y.fallback,B=c.mode,y=Np({mode:"visible",children:y.children},B),v=Fa(v,B,h,null),v.flags|=2,y.return=c,v.return=c,y.sibling=v,c.child=y,wc(c,a.child,null,h),y=c.child,y.memoizedState=Db(h),y.childLanes=Rb(a,D,h),c.memoizedState=_b,c=v);else if(jo(c),mx(B)){if(D=B.nextSibling&&B.nextSibling.dataset,D)var le=D.dgst;D=le,y=Error(r(419)),y.stack="",y.digest=D,id({value:y,source:null,stack:null}),c=Ob(a,c,h)}else if(zn||sd(a,c,h,!1),D=(h&a.childLanes)!==0,zn||D){if(D=It,D!==null&&(y=h&-h,y=(y&42)!==0?1:St(y),y=(y&(D.suspendedLanes|h))!==0?0:y,y!==0&&y!==K.retryLane))throw K.retryLane=y,uc(a,y),ni(D,a,y),p_;B.data==="$?"||Jb(),c=Ob(a,c,h)}else B.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=K.treeContext,sn=Hi(B.nextSibling),Sr=c,vt=!0,$a=null,ls=!1,a!==null&&(gi[yi++]=Is,gi[yi++]=Ps,gi[yi++]=Ha,Is=a.id,Ps=a.overflow,Ha=c),c=jb(c,y.children),c.flags|=4096);return c}return v?(Oo(),v=y.fallback,B=c.mode,K=a.child,le=K.sibling,y=Ls(K,{mode:"hidden",children:y.children}),y.subtreeFlags=K.subtreeFlags&65011712,le!==null?v=Ls(le,v):(v=Fa(v,B,h,null),v.flags|=2),v.return=c,y.return=c,y.sibling=v,c.child=y,y=v,v=c.child,B=a.child.memoizedState,B===null?B=Db(h):(K=B.cachePool,K!==null?(le=jn._currentValue,K=K.parent!==le?{parent:le,pool:le}:K):K=cM(),B={baseLanes:B.baseLanes|h,cachePool:K}),v.memoizedState=B,v.childLanes=Rb(a,D,h),c.memoizedState=_b,y):(jo(c),h=a.child,a=h.sibling,h=Ls(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,a!==null&&(D=c.deletions,D===null?(c.deletions=[a],c.flags|=16):D.push(a)),c.child=h,c.memoizedState=null,h)}function jb(a,c){return c=Np({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Np(a,c){return a=Zr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Ob(a,c,h){return wc(c,a.child,null,h),a=jb(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function C_(a,c,h){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),J0(a.return,c,h)}function Lb(a,c,h,y,v){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:v}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=y,k.tail=h,k.tailMode=v)}function E_(a,c,h){var y=c.pendingProps,v=y.revealOrder,k=y.tail;if(Zn(a,c,y.children,h),y=On.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&C_(a,h,c);else if(a.tag===19)C_(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(re(On,y),v){case"forwards":for(h=c.child,v=null;h!==null;)a=h.alternate,a!==null&&Sp(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=c.child,c.child=null):(v=h.sibling,h.sibling=null),Lb(c,!1,v,h,k);break;case"backwards":for(h=null,v=c.child,c.child=null;v!==null;){if(a=v.alternate,a!==null&&Sp(a)===null){c.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}Lb(c,!0,h,null,k);break;case"together":Lb(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Fs(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),zo|=c.lanes,(h&c.childLanes)===0)if(a!==null){if(sd(a,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=Ls(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=Ls(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function Ib(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&op(a)))}function f7(a,c,h){switch(c.tag){case 3:oe(c,c.stateNode.containerInfo),Ao(c,jn,a.memoizedState.cache),rd();break;case 27:case 5:Ce(c);break;case 4:oe(c,c.stateNode.containerInfo);break;case 10:Ao(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(jo(c),c.flags|=128,null):(h&c.child.childLanes)!==0?k_(a,c,h):(jo(c),a=Fs(a,c,h),a!==null?a.sibling:null);jo(c);break;case 19:var v=(a.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(sd(a,c,h,!1),y=(h&c.childLanes)!==0),v){if(y)return E_(a,c,h);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),re(On,On.current),y)break;return null;case 22:case 23:return c.lanes=0,b_(a,c,h);case 24:Ao(c,jn,a.memoizedState.cache)}return Fs(a,c,h)}function N_(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps)zn=!0;else{if(!Ib(a,h)&&(c.flags&128)===0)return zn=!1,f7(a,c,h);zn=(a.flags&131072)!==0}else zn=!1,vt&&(c.flags&1048576)!==0&&nM(c,sp,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,v=y._init;if(y=v(y._payload),c.type=y,typeof y=="function")$0(y)?(a=Za(y,a),c.tag=1,c=w_(null,c,y,a,h)):(c.tag=0,c=Mb(null,c,y,a,h));else{if(y!=null){if(v=y.$$typeof,v===N){c.tag=11,c=m_(null,c,y,a,h);break e}else if(v===O){c.tag=14,c=g_(null,c,y,a,h);break e}}throw c=P(y)||y,Error(r(306,c,""))}}return c;case 0:return Mb(a,c,c.type,c.pendingProps,h);case 1:return y=c.type,v=Za(y,c.pendingProps),w_(a,c,y,v,h);case 3:e:{if(oe(c,c.stateNode.containerInfo),a===null)throw Error(r(387));y=c.pendingProps;var k=c.memoizedState;v=k.element,sb(a,c),fd(c,y,null,h);var D=c.memoizedState;if(y=D.cache,Ao(c,jn,y),y!==k.cache&&Q0(c,[jn],h,!0),dd(),y=D.element,k.isDehydrated)if(k={element:y,isDehydrated:!1,cache:D.cache},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){c=S_(a,c,y,h);break e}else if(y!==v){v=pi(Error(r(424)),c),id(v),c=S_(a,c,y,h);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(sn=Hi(a.firstChild),Sr=c,vt=!0,$a=null,ls=!0,h=i_(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(rd(),y===v){c=Fs(a,c,h);break e}Zn(a,c,y,h)}c=c.child}return c;case 26:return Ep(a,c),a===null?(h=_D(c.type,null,c.pendingProps,null))?c.memoizedState=h:vt||(h=c.type,a=c.pendingProps,y=Vp(ee.current).createElement(h),y[Xt]=c,y[zt]=a,Qn(y,h,a),Lt(y),c.stateNode=y):c.memoizedState=_D(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Ce(c),a===null&&vt&&(y=c.stateNode=TD(c.type,c.pendingProps,ee.current),Sr=c,ls=!0,v=sn,Ho(c.type)?(gx=v,sn=Hi(y.firstChild)):sn=v),Zn(a,c,c.pendingProps.children,h),Ep(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&vt&&((v=y=sn)&&(y=V7(y,c.type,c.pendingProps,ls),y!==null?(c.stateNode=y,Sr=c,sn=Hi(y.firstChild),ls=!1,v=!0):v=!1),v||Ga(c)),Ce(c),v=c.type,k=c.pendingProps,D=a!==null?a.memoizedProps:null,y=k.children,fx(v,k)?y=null:D!==null&&fx(v,D)&&(c.flags|=32),c.memoizedState!==null&&(v=db(a,c,i7,null,null,h),Od._currentValue=v),Ep(a,c),Zn(a,c,y,h),c.child;case 6:return a===null&&vt&&((a=h=sn)&&(h=q7(h,c.pendingProps,ls),h!==null?(c.stateNode=h,Sr=c,sn=null,a=!0):a=!1),a||Ga(c)),null;case 13:return k_(a,c,h);case 4:return oe(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=wc(c,null,y,h):Zn(a,c,y,h),c.child;case 11:return m_(a,c,c.type,c.pendingProps,h);case 7:return Zn(a,c,c.pendingProps,h),c.child;case 8:return Zn(a,c,c.pendingProps.children,h),c.child;case 12:return Zn(a,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,Ao(c,c.type,y.value),Zn(a,c,y.children,h),c.child;case 9:return v=c.type._context,y=c.pendingProps.children,Ka(c),v=ur(v),y=y(v),c.flags|=1,Zn(a,c,y,h),c.child;case 14:return g_(a,c,c.type,c.pendingProps,h);case 15:return y_(a,c,c.type,c.pendingProps,h);case 19:return E_(a,c,h);case 31:return y=c.pendingProps,h=c.mode,y={mode:y.mode,children:y.children},a===null?(h=Np(y,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Ls(a.child,y),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return b_(a,c,h);case 24:return Ka(c),y=ur(jn),a===null?(v=nb(),v===null&&(v=It,k=eb(),v.pooledCache=k,k.refCount++,k!==null&&(v.pooledCacheLanes|=h),v=k),c.memoizedState={parent:y,cache:v},ib(c),Ao(c,jn,v)):((a.lanes&h)!==0&&(sb(a,c),fd(c,null,null,h),dd()),v=a.memoizedState,k=c.memoizedState,v.parent!==y?(v={parent:y,cache:y},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),Ao(c,jn,y)):(y=k.cache,Ao(c,jn,y),y!==v.cache&&Q0(c,[jn],h,!0))),Zn(a,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Hs(a){a.flags|=4}function T_(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!LD(c)){if(c=bi.current,c!==null&&((ft&4194048)===ft?cs!==null:(ft&62914560)!==ft&&(ft&536870912)===0||c!==cs))throw cd=rb,uM;a.flags|=8192}}function Tp(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Pi():536870912,a.lanes|=c,Ec|=c)}function xd(a,c){if(!vt)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Zt(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,y=0;if(c)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,y|=v.subtreeFlags&65011712,y|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=y,a.childLanes=h,c}function h7(a,c,h){var y=c.pendingProps;switch(Y0(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(c),null;case 1:return Zt(c),null;case 3:return h=c.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),zs(jn),ye(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(nd(c)?Hs(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,sM())),Zt(c),null;case 26:return h=c.memoizedState,a===null?(Hs(c),h!==null?(Zt(c),T_(c,h)):(Zt(c),c.flags&=-16777217)):h?h!==a.memoizedState?(Hs(c),Zt(c),T_(c,h)):(Zt(c),c.flags&=-16777217):(a.memoizedProps!==y&&Hs(c),Zt(c),c.flags&=-16777217),null;case 27:Pe(c),h=ee.current;var v=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==y&&Hs(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Zt(c),null}a=$.current,nd(c)?rM(c):(a=TD(v,y,h),c.stateNode=a,Hs(c))}return Zt(c),null;case 5:if(Pe(c),h=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&Hs(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Zt(c),null}if(a=$.current,nd(c))rM(c);else{switch(v=Vp(ee.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?v.createElement("select",{is:y.is}):v.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?v.createElement(h,{is:y.is}):v.createElement(h)}}a[Xt]=c,a[zt]=y;e:for(v=c.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break e;for(;v.sibling===null;){if(v.return===null||v.return===c)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}c.stateNode=a;e:switch(Qn(a,h,y),h){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Hs(c)}}return Zt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==y&&Hs(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(a=ee.current,nd(c)){if(a=c.stateNode,h=c.memoizedProps,y=null,v=Sr,v!==null)switch(v.tag){case 27:case 5:y=v.memoizedProps}a[Xt]=c,a=!!(a.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||vD(a.nodeValue,h)),a||Ga(c)}else a=Vp(a).createTextNode(y),a[Xt]=c,c.stateNode=a}return Zt(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=nd(c),y!==null&&y.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Xt]=c}else rd(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Zt(c),v=!1}else v=sM(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(qs(c),c):(qs(c),null)}if(qs(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=y!==null,a=a!==null&&a.memoizedState!==null,h){y=c.child,v=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(v=y.alternate.memoizedState.cachePool.pool);var k=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(k=y.memoizedState.cachePool.pool),k!==v&&(y.flags|=2048)}return h!==a&&h&&(c.child.flags|=8192),Tp(c,c.updateQueue),Zt(c),null;case 4:return ye(),a===null&&ax(c.stateNode.containerInfo),Zt(c),null;case 10:return zs(c.type),Zt(c),null;case 19:if(ae(On),v=c.memoizedState,v===null)return Zt(c),null;if(y=(c.flags&128)!==0,k=v.rendering,k===null)if(y)xd(v,!1);else{if(on!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(k=Sp(a),k!==null){for(c.flags|=128,xd(v,!1),a=k.updateQueue,c.updateQueue=a,Tp(c,a),c.subtreeFlags=0,a=h,h=c.child;h!==null;)tM(h,a),h=h.sibling;return re(On,On.current&1|2),c.child}a=a.sibling}v.tail!==null&&Oe()>_p&&(c.flags|=128,y=!0,xd(v,!1),c.lanes=4194304)}else{if(!y)if(a=Sp(k),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,Tp(c,a),xd(v,!0),v.tail===null&&v.tailMode==="hidden"&&!k.alternate&&!vt)return Zt(c),null}else 2*Oe()-v.renderingStartTime>_p&&h!==536870912&&(c.flags|=128,y=!0,xd(v,!1),c.lanes=4194304);v.isBackwards?(k.sibling=c.child,c.child=k):(a=v.last,a!==null?a.sibling=k:c.child=k,v.last=k)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=Oe(),c.sibling=null,a=On.current,re(On,y?a&1|2:a&1),c):(Zt(c),null);case 22:case 23:return qs(c),cb(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(h&536870912)!==0&&(c.flags&128)===0&&(Zt(c),c.subtreeFlags&6&&(c.flags|=8192)):Zt(c),h=c.updateQueue,h!==null&&Tp(c,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),a!==null&&ae(Ya),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),zs(jn),Zt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function p7(a,c){switch(Y0(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return zs(jn),ye(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Pe(c),null;case 13:if(qs(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));rd()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ae(On),null;case 4:return ye(),null;case 10:return zs(c.type),null;case 22:case 23:return qs(c),cb(),a!==null&&ae(Ya),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return zs(jn),null;case 25:return null;default:return null}}function A_(a,c){switch(Y0(c),c.tag){case 3:zs(jn),ye();break;case 26:case 27:case 5:Pe(c);break;case 4:ye();break;case 13:qs(c);break;case 19:ae(On);break;case 10:zs(c.type);break;case 22:case 23:qs(c),cb(),a!==null&&ae(Ya);break;case 24:zs(jn)}}function vd(a,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var v=y.next;h=v;do{if((h.tag&a)===a){y=void 0;var k=h.create,D=h.inst;y=k(),D.destroy=y}h=h.next}while(h!==v)}}catch(B){jt(c,c.return,B)}}function Lo(a,c,h){try{var y=c.updateQueue,v=y!==null?y.lastEffect:null;if(v!==null){var k=v.next;y=k;do{if((y.tag&a)===a){var D=y.inst,B=D.destroy;if(B!==void 0){D.destroy=void 0,v=c;var K=h,le=B;try{le()}catch(fe){jt(v,K,fe)}}}y=y.next}while(y!==k)}}catch(fe){jt(c,c.return,fe)}}function M_(a){var c=a.updateQueue;if(c!==null){var h=a.stateNode;try{gM(c,h)}catch(y){jt(a,a.return,y)}}}function __(a,c,h){h.props=Za(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(y){jt(a,c,y)}}function wd(a,c){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof h=="function"?a.refCleanup=h(y):h.current=y}}catch(v){jt(a,c,v)}}function us(a,c){var h=a.ref,y=a.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(v){jt(a,c,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){jt(a,c,v)}else h.current=null}function D_(a){var c=a.type,h=a.memoizedProps,y=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(v){jt(a,a.return,v)}}function Pb(a,c,h){try{var y=a.stateNode;L7(y,a.type,h,c),y[zt]=c}catch(v){jt(a,a.return,v)}}function R_(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ho(a.type)||a.tag===4}function Bb(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||R_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ho(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zb(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(a),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=zp));else if(y!==4&&(y===27&&Ho(a.type)&&(h=a.stateNode,c=null),a=a.child,a!==null))for(zb(a,c,h),a=a.sibling;a!==null;)zb(a,c,h),a=a.sibling}function Ap(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(y!==4&&(y===27&&Ho(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Ap(a,c,h),a=a.sibling;a!==null;)Ap(a,c,h),a=a.sibling}function j_(a){var c=a.stateNode,h=a.memoizedProps;try{for(var y=a.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);Qn(c,y,h),c[Xt]=a,c[zt]=h}catch(k){jt(a,a.return,k)}}var Us=!1,fn=!1,Vb=!1,O_=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function m7(a,c){if(a=a.containerInfo,ux=Gp,a=$A(a),B0(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var v=y.anchorOffset,k=y.focusNode;y=y.focusOffset;try{h.nodeType,k.nodeType}catch{h=null;break e}var D=0,B=-1,K=-1,le=0,fe=0,me=a,ce=null;t:for(;;){for(var ue;me!==h||v!==0&&me.nodeType!==3||(B=D+v),me!==k||y!==0&&me.nodeType!==3||(K=D+y),me.nodeType===3&&(D+=me.nodeValue.length),(ue=me.firstChild)!==null;)ce=me,me=ue;for(;;){if(me===a)break t;if(ce===h&&++le===v&&(B=D),ce===k&&++fe===y&&(K=D),(ue=me.nextSibling)!==null)break;me=ce,ce=me.parentNode}me=ue}h=B===-1||K===-1?null:{start:B,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(dx={focusedElem:a,selectionRange:h},Gp=!1,Vn=c;Vn!==null;)if(c=Vn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Vn=a;else for(;Vn!==null;){switch(c=Vn,k=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&k!==null){a=void 0,h=c,v=k.memoizedProps,k=k.memoizedState,y=h.stateNode;try{var We=Za(h.type,v,h.elementType===h.type);a=y.getSnapshotBeforeUpdate(We,k),y.__reactInternalSnapshotBeforeUpdate=a}catch(Ue){jt(h,h.return,Ue)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,h=a.nodeType,h===9)px(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":px(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Vn=a;break}Vn=c.return}}function L_(a,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Io(a,h),y&4&&vd(5,h);break;case 1:if(Io(a,h),y&4)if(a=h.stateNode,c===null)try{a.componentDidMount()}catch(D){jt(h,h.return,D)}else{var v=Za(h.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(v,c,a.__reactInternalSnapshotBeforeUpdate)}catch(D){jt(h,h.return,D)}}y&64&&M_(h),y&512&&wd(h,h.return);break;case 3:if(Io(a,h),y&64&&(a=h.updateQueue,a!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{gM(a,c)}catch(D){jt(h,h.return,D)}}break;case 27:c===null&&y&4&&j_(h);case 26:case 5:Io(a,h),c===null&&y&4&&D_(h),y&512&&wd(h,h.return);break;case 12:Io(a,h);break;case 13:Io(a,h),y&4&&B_(a,h),y&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=C7.bind(null,h),F7(a,h))));break;case 22:if(y=h.memoizedState!==null||Us,!y){c=c!==null&&c.memoizedState!==null||fn,v=Us;var k=fn;Us=y,(fn=c)&&!k?Po(a,h,(h.subtreeFlags&8772)!==0):Io(a,h),Us=v,fn=k}break;case 30:break;default:Io(a,h)}}function I_(a){var c=a.alternate;c!==null&&(a.alternate=null,I_(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&ts(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var $t=null,Or=!1;function $s(a,c,h){for(h=h.child;h!==null;)P_(a,c,h),h=h.sibling}function P_(a,c,h){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Bt,h)}catch{}switch(h.tag){case 26:fn||us(h,c),$s(a,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||us(h,c);var y=$t,v=Or;Ho(h.type)&&($t=h.stateNode,Or=!1),$s(a,c,h),_d(h.stateNode),$t=y,Or=v;break;case 5:fn||us(h,c);case 6:if(y=$t,v=Or,$t=null,$s(a,c,h),$t=y,Or=v,$t!==null)if(Or)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(h.stateNode)}catch(k){jt(h,c,k)}else try{$t.removeChild(h.stateNode)}catch(k){jt(h,c,k)}break;case 18:$t!==null&&(Or?(a=$t,ED(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),Bd(a)):ED($t,h.stateNode));break;case 4:y=$t,v=Or,$t=h.stateNode.containerInfo,Or=!0,$s(a,c,h),$t=y,Or=v;break;case 0:case 11:case 14:case 15:fn||Lo(2,h,c),fn||Lo(4,h,c),$s(a,c,h);break;case 1:fn||(us(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&__(h,c,y)),$s(a,c,h);break;case 21:$s(a,c,h);break;case 22:fn=(y=fn)||h.memoizedState!==null,$s(a,c,h),fn=y;break;default:$s(a,c,h)}}function B_(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Bd(a)}catch(h){jt(c,c.return,h)}}function g7(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new O_),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new O_),c;default:throw Error(r(435,a.tag))}}function qb(a,c){var h=g7(a);c.forEach(function(y){var v=E7.bind(null,a,y);h.has(y)||(h.add(y),y.then(v,v))})}function Jr(a,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var v=h[y],k=a,D=c,B=D;e:for(;B!==null;){switch(B.tag){case 27:if(Ho(B.type)){$t=B.stateNode,Or=!1;break e}break;case 5:$t=B.stateNode,Or=!1;break e;case 3:case 4:$t=B.stateNode.containerInfo,Or=!0;break e}B=B.return}if($t===null)throw Error(r(160));P_(k,D,v),$t=null,Or=!1,k=v.alternate,k!==null&&(k.return=null),v.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)z_(c,a),c=c.sibling}var Fi=null;function z_(a,c){var h=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Jr(c,a),Qr(a),y&4&&(Lo(3,a,a.return),vd(3,a),Lo(5,a,a.return));break;case 1:Jr(c,a),Qr(a),y&512&&(fn||h===null||us(h,h.return)),y&64&&Us&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var v=Fi;if(Jr(c,a),Qr(a),y&512&&(fn||h===null||us(h,h.return)),y&4){var k=h!==null?h.memoizedState:null;if(y=a.memoizedState,h===null)if(y===null)if(a.stateNode===null){e:{y=a.type,h=a.memoizedProps,v=v.ownerDocument||v;t:switch(y){case"title":k=v.getElementsByTagName("title")[0],(!k||k[Kr]||k[Xt]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=v.createElement(y),v.head.insertBefore(k,v.querySelector("head > title"))),Qn(k,y,h),k[Xt]=a,Lt(k),y=k;break e;case"link":var D=jD("link","href",v).get(y+(h.href||""));if(D){for(var B=0;B<D.length;B++)if(k=D[B],k.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&k.getAttribute("rel")===(h.rel==null?null:h.rel)&&k.getAttribute("title")===(h.title==null?null:h.title)&&k.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(B,1);break t}}k=v.createElement(y),Qn(k,y,h),v.head.appendChild(k);break;case"meta":if(D=jD("meta","content",v).get(y+(h.content||""))){for(B=0;B<D.length;B++)if(k=D[B],k.getAttribute("content")===(h.content==null?null:""+h.content)&&k.getAttribute("name")===(h.name==null?null:h.name)&&k.getAttribute("property")===(h.property==null?null:h.property)&&k.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&k.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(B,1);break t}}k=v.createElement(y),Qn(k,y,h),v.head.appendChild(k);break;default:throw Error(r(468,y))}k[Xt]=a,Lt(k),y=k}a.stateNode=y}else OD(v,a.type,a.stateNode);else a.stateNode=RD(v,y,a.memoizedProps);else k!==y?(k===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):k.count--,y===null?OD(v,a.type,a.stateNode):RD(v,y,a.memoizedProps)):y===null&&a.stateNode!==null&&Pb(a,a.memoizedProps,h.memoizedProps)}break;case 27:Jr(c,a),Qr(a),y&512&&(fn||h===null||us(h,h.return)),h!==null&&y&4&&Pb(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Jr(c,a),Qr(a),y&512&&(fn||h===null||us(h,h.return)),a.flags&32){v=a.stateNode;try{Eo(v,"")}catch(ue){jt(a,a.return,ue)}}y&4&&a.stateNode!=null&&(v=a.memoizedProps,Pb(a,v,h!==null?h.memoizedProps:v)),y&1024&&(Vb=!0);break;case 6:if(Jr(c,a),Qr(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,h=a.stateNode;try{h.nodeValue=y}catch(ue){jt(a,a.return,ue)}}break;case 3:if(Hp=null,v=Fi,Fi=qp(c.containerInfo),Jr(c,a),Fi=v,Qr(a),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Bd(c.containerInfo)}catch(ue){jt(a,a.return,ue)}Vb&&(Vb=!1,V_(a));break;case 4:y=Fi,Fi=qp(a.stateNode.containerInfo),Jr(c,a),Qr(a),Fi=y;break;case 12:Jr(c,a),Qr(a);break;case 13:Jr(c,a),Qr(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Wb=Oe()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,qb(a,y)));break;case 22:v=a.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,le=Us,fe=fn;if(Us=le||v,fn=fe||K,Jr(c,a),fn=fe,Us=le,Qr(a),y&8192)e:for(c=a.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(h===null||K||Us||fn||Ja(a)),h=null,c=a;;){if(c.tag===5||c.tag===26){if(h===null){K=h=c;try{if(k=K.stateNode,v)D=k.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{B=K.stateNode;var me=K.memoizedProps.style,ce=me!=null&&me.hasOwnProperty("display")?me.display:null;B.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){jt(K,K.return,ue)}}}else if(c.tag===6){if(h===null){K=c;try{K.stateNode.nodeValue=v?"":K.memoizedProps}catch(ue){jt(K,K.return,ue)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=a.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,qb(a,h))));break;case 19:Jr(c,a),Qr(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,qb(a,y)));break;case 30:break;case 21:break;default:Jr(c,a),Qr(a)}}function Qr(a){var c=a.flags;if(c&2){try{for(var h,y=a.return;y!==null;){if(R_(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var v=h.stateNode,k=Bb(a);Ap(a,k,v);break;case 5:var D=h.stateNode;h.flags&32&&(Eo(D,""),h.flags&=-33);var B=Bb(a);Ap(a,B,D);break;case 3:case 4:var K=h.stateNode.containerInfo,le=Bb(a);zb(a,le,K);break;default:throw Error(r(161))}}catch(fe){jt(a,a.return,fe)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function V_(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;V_(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Io(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)L_(a,c.alternate,c),c=c.sibling}function Ja(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Lo(4,c,c.return),Ja(c);break;case 1:us(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&__(c,c.return,h),Ja(c);break;case 27:_d(c.stateNode);case 26:case 5:us(c,c.return),Ja(c);break;case 22:c.memoizedState===null&&Ja(c);break;case 30:Ja(c);break;default:Ja(c)}a=a.sibling}}function Po(a,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,v=a,k=c,D=k.flags;switch(k.tag){case 0:case 11:case 15:Po(v,k,h),vd(4,k);break;case 1:if(Po(v,k,h),y=k,v=y.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(le){jt(y,y.return,le)}if(y=k,v=y.updateQueue,v!==null){var B=y.stateNode;try{var K=v.shared.hiddenCallbacks;if(K!==null)for(v.shared.hiddenCallbacks=null,v=0;v<K.length;v++)mM(K[v],B)}catch(le){jt(y,y.return,le)}}h&&D&64&&M_(k),wd(k,k.return);break;case 27:j_(k);case 26:case 5:Po(v,k,h),h&&y===null&&D&4&&D_(k),wd(k,k.return);break;case 12:Po(v,k,h);break;case 13:Po(v,k,h),h&&D&4&&B_(v,k);break;case 22:k.memoizedState===null&&Po(v,k,h),wd(k,k.return);break;case 30:break;default:Po(v,k,h)}c=c.sibling}}function Fb(a,c){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&od(h))}function Hb(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&od(a))}function ds(a,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)q_(a,c,h,y),c=c.sibling}function q_(a,c,h,y){var v=c.flags;switch(c.tag){case 0:case 11:case 15:ds(a,c,h,y),v&2048&&vd(9,c);break;case 1:ds(a,c,h,y);break;case 3:ds(a,c,h,y),v&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&od(a)));break;case 12:if(v&2048){ds(a,c,h,y),a=c.stateNode;try{var k=c.memoizedProps,D=k.id,B=k.onPostCommit;typeof B=="function"&&B(D,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(K){jt(c,c.return,K)}}else ds(a,c,h,y);break;case 13:ds(a,c,h,y);break;case 23:break;case 22:k=c.stateNode,D=c.alternate,c.memoizedState!==null?k._visibility&2?ds(a,c,h,y):Sd(a,c):k._visibility&2?ds(a,c,h,y):(k._visibility|=2,Sc(a,c,h,y,(c.subtreeFlags&10256)!==0)),v&2048&&Fb(D,c);break;case 24:ds(a,c,h,y),v&2048&&Hb(c.alternate,c);break;default:ds(a,c,h,y)}}function Sc(a,c,h,y,v){for(v=v&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var k=a,D=c,B=h,K=y,le=D.flags;switch(D.tag){case 0:case 11:case 15:Sc(k,D,B,K,v),vd(8,D);break;case 23:break;case 22:var fe=D.stateNode;D.memoizedState!==null?fe._visibility&2?Sc(k,D,B,K,v):Sd(k,D):(fe._visibility|=2,Sc(k,D,B,K,v)),v&&le&2048&&Fb(D.alternate,D);break;case 24:Sc(k,D,B,K,v),v&&le&2048&&Hb(D.alternate,D);break;default:Sc(k,D,B,K,v)}c=c.sibling}}function Sd(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=a,y=c,v=y.flags;switch(y.tag){case 22:Sd(h,y),v&2048&&Fb(y.alternate,y);break;case 24:Sd(h,y),v&2048&&Hb(y.alternate,y);break;default:Sd(h,y)}c=c.sibling}}var kd=8192;function kc(a){if(a.subtreeFlags&kd)for(a=a.child;a!==null;)F_(a),a=a.sibling}function F_(a){switch(a.tag){case 26:kc(a),a.flags&kd&&a.memoizedState!==null&&tG(Fi,a.memoizedState,a.memoizedProps);break;case 5:kc(a);break;case 3:case 4:var c=Fi;Fi=qp(a.stateNode.containerInfo),kc(a),Fi=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=kd,kd=16777216,kc(a),kd=c):kc(a));break;default:kc(a)}}function H_(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Cd(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Vn=y,$_(y,a)}H_(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)U_(a),a=a.sibling}function U_(a){switch(a.tag){case 0:case 11:case 15:Cd(a),a.flags&2048&&Lo(9,a,a.return);break;case 3:Cd(a);break;case 12:Cd(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Mp(a)):Cd(a);break;default:Cd(a)}}function Mp(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Vn=y,$_(y,a)}H_(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Lo(8,c,c.return),Mp(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Mp(c));break;default:Mp(c)}a=a.sibling}}function $_(a,c){for(;Vn!==null;){var h=Vn;switch(h.tag){case 0:case 11:case 15:Lo(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:od(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Vn=y;else e:for(h=a;Vn!==null;){y=Vn;var v=y.sibling,k=y.return;if(I_(y),y===h){Vn=null;break e}if(v!==null){v.return=k,Vn=v;break e}Vn=k}}}var y7={getCacheForType:function(a){var c=ur(jn),h=c.data.get(a);return h===void 0&&(h=a(),c.data.set(a,h)),h}},b7=typeof WeakMap=="function"?WeakMap:Map,kt=0,It=null,st=null,ft=0,Ct=0,ei=null,Bo=!1,Cc=!1,Ub=!1,Gs=0,on=0,zo=0,Qa=0,$b=0,xi=0,Ec=0,Ed=null,Lr=null,Gb=!1,Wb=0,_p=1/0,Dp=null,Vo=null,Jn=0,qo=null,Nc=null,Tc=0,Kb=0,Yb=null,G_=null,Nd=0,Xb=null;function ti(){if((kt&2)!==0&&ft!==0)return ft&-ft;if(j.T!==null){var a=pc;return a!==0?a:rx()}return wo()}function W_(){xi===0&&(xi=(ft&536870912)===0||vt?vo():536870912);var a=bi.current;return a!==null&&(a.flags|=32),xi}function ni(a,c,h){(a===It&&(Ct===2||Ct===9)||a.cancelPendingCommit!==null)&&(Ac(a,0),Fo(a,ft,xi,!1)),$r(a,h),((kt&2)===0||a!==It)&&(a===It&&((kt&2)===0&&(Qa|=h),on===4&&Fo(a,ft,xi,!1)),fs(a))}function K_(a,c,h){if((kt&6)!==0)throw Error(r(327));var y=!h&&(c&124)===0&&(c&a.expiredLanes)===0||pt(a,c),v=y?w7(a,c):Qb(a,c,!0),k=y;do{if(v===0){Cc&&!y&&Fo(a,c,0,!1);break}else{if(h=a.current.alternate,k&&!x7(h)){v=Qb(a,c,!1),k=!1;continue}if(v===2){if(k=c,a.errorRecoveryDisabledLanes&k)var D=0;else D=a.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){c=D;e:{var B=a;v=Ed;var K=B.current.memoizedState.isDehydrated;if(K&&(Ac(B,D).flags|=256),D=Qb(B,D,!1),D!==2){if(Ub&&!K){B.errorRecoveryDisabledLanes|=k,Qa|=k,v=4;break e}k=Lr,Lr=v,k!==null&&(Lr===null?Lr=k:Lr.push.apply(Lr,k))}v=D}if(k=!1,v!==2)continue}}if(v===1){Ac(a,0),Fo(a,c,0,!0);break}e:{switch(y=a,k=v,k){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Fo(y,c,xi,!Bo);break e;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(v=Wb+300-Oe(),10<v)){if(Fo(y,c,xi,!Bo),vr(y,0,!0)!==0)break e;y.timeoutHandle=kD(Y_.bind(null,y,h,Lr,Dp,Gb,c,xi,Qa,Ec,Bo,k,2,-0,0),v);break e}Y_(y,h,Lr,Dp,Gb,c,xi,Qa,Ec,Bo,k,0,-0,0)}}break}while(!0);fs(a)}function Y_(a,c,h,y,v,k,D,B,K,le,fe,me,ce,ue){if(a.timeoutHandle=-1,me=c.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(jd={stylesheets:null,count:0,unsuspend:eG},F_(c),me=nG(),me!==null)){a.cancelPendingCommit=me(nD.bind(null,a,c,k,h,y,v,D,B,K,fe,1,ce,ue)),Fo(a,k,D,!le);return}nD(a,c,k,h,y,v,D,B,K)}function x7(a){for(var c=a;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var v=h[y],k=v.getSnapshot;v=v.value;try{if(!Xr(k(),v))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Fo(a,c,h,y){c&=~$b,c&=~Qa,a.suspendedLanes|=c,a.pingedLanes&=~c,y&&(a.warmLanes|=c),y=a.expirationTimes;for(var v=c;0<v;){var k=31-Dt(v),D=1<<k;y[k]=-1,v&=~D}h!==0&&Dr(a,h,c)}function Rp(){return(kt&6)===0?(Td(0),!1):!0}function Zb(){if(st!==null){if(Ct===0)var a=st.return;else a=st,Bs=Wa=null,pb(a),vc=null,yd=0,a=st;for(;a!==null;)A_(a.alternate,a),a=a.return;st=null}}function Ac(a,c){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,P7(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Zb(),It=a,st=h=Ls(a.current,null),ft=c,Ct=0,ei=null,Bo=!1,Cc=pt(a,c),Ub=!1,Ec=xi=$b=Qa=zo=on=0,Lr=Ed=null,Gb=!1,(c&8)!==0&&(c|=c&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=c;0<y;){var v=31-Dt(y),k=1<<v;c|=a[v],y&=~k}return Gs=c,ep(),h}function X_(a,c){rt=null,j.H=xp,c===ld||c===cp?(c=hM(),Ct=3):c===uM?(c=hM(),Ct=4):Ct=c===p_?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ei=c,st===null&&(on=1,Cp(a,pi(c,a.current)))}function Z_(){var a=j.H;return j.H=xp,a===null?xp:a}function J_(){var a=j.A;return j.A=y7,a}function Jb(){on=4,Bo||(ft&4194048)!==ft&&bi.current!==null||(Cc=!0),(zo&134217727)===0&&(Qa&134217727)===0||It===null||Fo(It,ft,xi,!1)}function Qb(a,c,h){var y=kt;kt|=2;var v=Z_(),k=J_();(It!==a||ft!==c)&&(Dp=null,Ac(a,c)),c=!1;var D=on;e:do try{if(Ct!==0&&st!==null){var B=st,K=ei;switch(Ct){case 8:Zb(),D=6;break e;case 3:case 2:case 9:case 6:bi.current===null&&(c=!0);var le=Ct;if(Ct=0,ei=null,Mc(a,B,K,le),h&&Cc){D=0;break e}break;default:le=Ct,Ct=0,ei=null,Mc(a,B,K,le)}}v7(),D=on;break}catch(fe){X_(a,fe)}while(!0);return c&&a.shellSuspendCounter++,Bs=Wa=null,kt=y,j.H=v,j.A=k,st===null&&(It=null,ft=0,ep()),D}function v7(){for(;st!==null;)Q_(st)}function w7(a,c){var h=kt;kt|=2;var y=Z_(),v=J_();It!==a||ft!==c?(Dp=null,_p=Oe()+500,Ac(a,c)):Cc=pt(a,c);e:do try{if(Ct!==0&&st!==null){c=st;var k=ei;t:switch(Ct){case 1:Ct=0,ei=null,Mc(a,c,k,1);break;case 2:case 9:if(dM(k)){Ct=0,ei=null,eD(c);break}c=function(){Ct!==2&&Ct!==9||It!==a||(Ct=7),fs(a)},k.then(c,c);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:dM(k)?(Ct=0,ei=null,eD(c)):(Ct=0,ei=null,Mc(a,c,k,7));break;case 5:var D=null;switch(st.tag){case 26:D=st.memoizedState;case 5:case 27:var B=st;if(!D||LD(D)){Ct=0,ei=null;var K=B.sibling;if(K!==null)st=K;else{var le=B.return;le!==null?(st=le,jp(le)):st=null}break t}}Ct=0,ei=null,Mc(a,c,k,5);break;case 6:Ct=0,ei=null,Mc(a,c,k,6);break;case 8:Zb(),on=6;break e;default:throw Error(r(462))}}S7();break}catch(fe){X_(a,fe)}while(!0);return Bs=Wa=null,j.H=y,j.A=v,kt=h,st!==null?0:(It=null,ft=0,ep(),on)}function S7(){for(;st!==null&&!Ne();)Q_(st)}function Q_(a){var c=N_(a.alternate,a,Gs);a.memoizedProps=a.pendingProps,c===null?jp(a):st=c}function eD(a){var c=a,h=c.alternate;switch(c.tag){case 15:case 0:c=v_(h,c,c.pendingProps,c.type,void 0,ft);break;case 11:c=v_(h,c,c.pendingProps,c.type.render,c.ref,ft);break;case 5:pb(c);default:A_(h,c),c=st=tM(c,Gs),c=N_(h,c,Gs)}a.memoizedProps=a.pendingProps,c===null?jp(a):st=c}function Mc(a,c,h,y){Bs=Wa=null,pb(c),vc=null,yd=0;var v=c.return;try{if(d7(a,v,c,h,ft)){on=1,Cp(a,pi(h,a.current)),st=null;return}}catch(k){if(v!==null)throw st=v,k;on=1,Cp(a,pi(h,a.current)),st=null;return}c.flags&32768?(vt||y===1?a=!0:Cc||(ft&536870912)!==0?a=!1:(Bo=a=!0,(y===2||y===9||y===3||y===6)&&(y=bi.current,y!==null&&y.tag===13&&(y.flags|=16384))),tD(c,a)):jp(c)}function jp(a){var c=a;do{if((c.flags&32768)!==0){tD(c,Bo);return}a=c.return;var h=h7(c.alternate,c,Gs);if(h!==null){st=h;return}if(c=c.sibling,c!==null){st=c;return}st=c=a}while(c!==null);on===0&&(on=5)}function tD(a,c){do{var h=p7(a.alternate,a);if(h!==null){h.flags&=32767,st=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(a=a.sibling,a!==null)){st=a;return}st=a=h}while(a!==null);on=6,st=null}function nD(a,c,h,y,v,k,D,B,K){a.cancelPendingCommit=null;do Op();while(Jn!==0);if((kt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(k=c.lanes|c.childLanes,k|=H0,wr(a,h,k,D,B,K),a===It&&(st=It=null,ft=0),Nc=c,qo=a,Tc=h,Kb=k,Yb=v,G_=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,N7(gn,function(){return aD(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=j.T,j.T=null,v=V.p,V.p=2,D=kt,kt|=4;try{m7(a,c,h)}finally{kt=D,V.p=v,j.T=y}}Jn=1,rD(),iD(),sD()}}function rD(){if(Jn===1){Jn=0;var a=qo,c=Nc,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=j.T,j.T=null;var y=V.p;V.p=2;var v=kt;kt|=4;try{z_(c,a);var k=dx,D=$A(a.containerInfo),B=k.focusedElem,K=k.selectionRange;if(D!==B&&B&&B.ownerDocument&&UA(B.ownerDocument.documentElement,B)){if(K!==null&&B0(B)){var le=K.start,fe=K.end;if(fe===void 0&&(fe=le),"selectionStart"in B)B.selectionStart=le,B.selectionEnd=Math.min(fe,B.value.length);else{var me=B.ownerDocument||document,ce=me&&me.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),We=B.textContent.length,Ue=Math.min(K.start,We),At=K.end===void 0?Ue:Math.min(K.end,We);!ue.extend&&Ue>At&&(D=At,At=Ue,Ue=D);var ne=HA(B,Ue),Q=HA(B,At);if(ne&&Q&&(ue.rangeCount!==1||ue.anchorNode!==ne.node||ue.anchorOffset!==ne.offset||ue.focusNode!==Q.node||ue.focusOffset!==Q.offset)){var se=me.createRange();se.setStart(ne.node,ne.offset),ue.removeAllRanges(),Ue>At?(ue.addRange(se),ue.extend(Q.node,Q.offset)):(se.setEnd(Q.node,Q.offset),ue.addRange(se))}}}}for(me=[],ue=B;ue=ue.parentNode;)ue.nodeType===1&&me.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<me.length;B++){var he=me[B];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Gp=!!ux,dx=ux=null}finally{kt=v,V.p=y,j.T=h}}a.current=c,Jn=2}}function iD(){if(Jn===2){Jn=0;var a=qo,c=Nc,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=j.T,j.T=null;var y=V.p;V.p=2;var v=kt;kt|=4;try{L_(a,c.alternate,c)}finally{kt=v,V.p=y,j.T=h}}Jn=3}}function sD(){if(Jn===4||Jn===3){Jn=0,yt();var a=qo,c=Nc,h=Tc,y=G_;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Jn=5:(Jn=0,Nc=qo=null,oD(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Vo=null),Kn(h),c=c.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Bt,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=j.T,v=V.p,V.p=2,j.T=null;try{for(var k=a.onRecoverableError,D=0;D<y.length;D++){var B=y[D];k(B.value,{componentStack:B.stack})}}finally{j.T=c,V.p=v}}(Tc&3)!==0&&Op(),fs(a),v=a.pendingLanes,(h&4194090)!==0&&(v&42)!==0?a===Xb?Nd++:(Nd=0,Xb=a):Nd=0,Td(0)}}function oD(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,od(c)))}function Op(a){return rD(),iD(),sD(),aD()}function aD(){if(Jn!==5)return!1;var a=qo,c=Kb;Kb=0;var h=Kn(Tc),y=j.T,v=V.p;try{V.p=32>h?32:h,j.T=null,h=Yb,Yb=null;var k=qo,D=Tc;if(Jn=0,Nc=qo=null,Tc=0,(kt&6)!==0)throw Error(r(331));var B=kt;if(kt|=4,U_(k.current),q_(k,k.current,D,h),kt=B,Td(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Bt,k)}catch{}return!0}finally{V.p=v,j.T=y,oD(a,c)}}function lD(a,c,h){c=pi(h,c),c=Ab(a.stateNode,c,2),a=Do(a,c,2),a!==null&&($r(a,2),fs(a))}function jt(a,c,h){if(a.tag===3)lD(a,a,h);else for(;c!==null;){if(c.tag===3){lD(c,a,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Vo===null||!Vo.has(y))){a=pi(h,a),h=f_(2),y=Do(c,h,2),y!==null&&(h_(h,y,c,a),$r(y,2),fs(y));break}}c=c.return}}function ex(a,c,h){var y=a.pingCache;if(y===null){y=a.pingCache=new b7;var v=new Set;y.set(c,v)}else v=y.get(c),v===void 0&&(v=new Set,y.set(c,v));v.has(h)||(Ub=!0,v.add(h),a=k7.bind(null,a,c,h),c.then(a,a))}function k7(a,c,h){var y=a.pingCache;y!==null&&y.delete(c),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,It===a&&(ft&h)===h&&(on===4||on===3&&(ft&62914560)===ft&&300>Oe()-Wb?(kt&2)===0&&Ac(a,0):$b|=h,Ec===ft&&(Ec=0)),fs(a)}function cD(a,c){c===0&&(c=Pi()),a=uc(a,c),a!==null&&($r(a,c),fs(a))}function C7(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),cD(a,h)}function E7(a,c){var h=0;switch(a.tag){case 13:var y=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(c),cD(a,h)}function N7(a,c){return Ae(a,c)}var Lp=null,_c=null,tx=!1,Ip=!1,nx=!1,el=0;function fs(a){a!==_c&&a.next===null&&(_c===null?Lp=_c=a:_c=_c.next=a),Ip=!0,tx||(tx=!0,A7())}function Td(a,c){if(!nx&&Ip){nx=!0;do for(var h=!1,y=Lp;y!==null;){if(a!==0){var v=y.pendingLanes;if(v===0)var k=0;else{var D=y.suspendedLanes,B=y.pingedLanes;k=(1<<31-Dt(42|a)+1)-1,k&=v&~(D&~B),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(h=!0,hD(y,k))}else k=ft,k=vr(y,y===It?k:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(k&3)===0||pt(y,k)||(h=!0,hD(y,k));y=y.next}while(h);nx=!1}}function T7(){uD()}function uD(){Ip=tx=!1;var a=0;el!==0&&(I7()&&(a=el),el=0);for(var c=Oe(),h=null,y=Lp;y!==null;){var v=y.next,k=dD(y,c);k===0?(y.next=null,h===null?Lp=v:h.next=v,v===null&&(_c=h)):(h=y,(a!==0||(k&3)!==0)&&(Ip=!0)),y=v}Td(a)}function dD(a,c){for(var h=a.suspendedLanes,y=a.pingedLanes,v=a.expirationTimes,k=a.pendingLanes&-62914561;0<k;){var D=31-Dt(k),B=1<<D,K=v[D];K===-1?((B&h)===0||(B&y)!==0)&&(v[D]=bn(B,c)):K<=c&&(a.expiredLanes|=B),k&=~B}if(c=It,h=ft,h=vr(a,a===c?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,h===0||a===c&&(Ct===2||Ct===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&Ee(y),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||pt(a,h)){if(c=h&-h,c===a.callbackPriority)return c;switch(y!==null&&Ee(y),Kn(h)){case 2:case 8:h=Yt;break;case 32:h=gn;break;case 268435456:h=Mt;break;default:h=gn}return y=fD.bind(null,a),h=Ae(h,y),a.callbackPriority=c,a.callbackNode=h,c}return y!==null&&y!==null&&Ee(y),a.callbackPriority=2,a.callbackNode=null,2}function fD(a,c){if(Jn!==0&&Jn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(Op()&&a.callbackNode!==h)return null;var y=ft;return y=vr(a,a===It?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(K_(a,y,c),dD(a,Oe()),a.callbackNode!=null&&a.callbackNode===h?fD.bind(null,a):null)}function hD(a,c){if(Op())return null;K_(a,c,!0)}function A7(){B7(function(){(kt&6)!==0?Ae(wt,T7):uD()})}function rx(){return el===0&&(el=vo()),el}function pD(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:rc(""+a)}function mD(a,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,a.id&&h.setAttribute("form",a.id),c.parentNode.insertBefore(h,c),a=new FormData(a),h.parentNode.removeChild(h),a}function M7(a,c,h,y,v){if(c==="submit"&&h&&h.stateNode===v){var k=pD((v[zt]||null).action),D=y.submitter;D&&(c=(c=D[zt]||null)?pD(c.formAction):D.getAttribute("formAction"),c!==null&&(k=c,D=null));var B=new pe("action","action",null,y,v);a.push({event:B,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(el!==0){var K=D?mD(v,D):new FormData(v);kb(h,{pending:!0,data:K,method:v.method,action:k},null,K)}}else typeof k=="function"&&(B.preventDefault(),K=D?mD(v,D):new FormData(v),kb(h,{pending:!0,data:K,method:v.method,action:k},k,K))},currentTarget:v}]})}}for(var ix=0;ix<F0.length;ix++){var sx=F0[ix],_7=sx.toLowerCase(),D7=sx[0].toUpperCase()+sx.slice(1);qi(_7,"on"+D7)}qi(KA,"onAnimationEnd"),qi(YA,"onAnimationIteration"),qi(XA,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(K$,"onTransitionRun"),qi(Y$,"onTransitionStart"),qi(X$,"onTransitionCancel"),qi(ZA,"onTransitionEnd"),ge("onMouseEnter",["mouseout","mouseover"]),ge("onMouseLeave",["mouseout","mouseover"]),ge("onPointerEnter",["pointerout","pointerover"]),ge("onPointerLeave",["pointerout","pointerover"]),J("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),J("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),J("onBeforeInput",["compositionend","keypress","textInput","paste"]),J("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),J("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),J("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ad));function gD(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var y=a[h],v=y.event;y=y.listeners;e:{var k=void 0;if(c)for(var D=y.length-1;0<=D;D--){var B=y[D],K=B.instance,le=B.currentTarget;if(B=B.listener,K!==k&&v.isPropagationStopped())break e;k=B,v.currentTarget=le;try{k(v)}catch(fe){kp(fe)}v.currentTarget=null,k=K}else for(D=0;D<y.length;D++){if(B=y[D],K=B.instance,le=B.currentTarget,B=B.listener,K!==k&&v.isPropagationStopped())break e;k=B,v.currentTarget=le;try{k(v)}catch(fe){kp(fe)}v.currentTarget=null,k=K}}}}function ot(a,c){var h=c[Rn];h===void 0&&(h=c[Rn]=new Set);var y=a+"__bubble";h.has(y)||(yD(c,a,2,!1),h.add(y))}function ox(a,c,h){var y=0;c&&(y|=4),yD(h,a,y,c)}var Pp="_reactListening"+Math.random().toString(36).slice(2);function ax(a){if(!a[Pp]){a[Pp]=!0,ns.forEach(function(h){h!=="selectionchange"&&(R7.has(h)||ox(h,!1,a),ox(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Pp]||(c[Pp]=!0,ox("selectionchange",!1,c))}}function yD(a,c,h,y){switch(qD(c)){case 2:var v=sG;break;case 8:v=oG;break;default:v=wx}h=v.bind(null,c,h,a),v=void 0,!Ku||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),y?v!==void 0?a.addEventListener(c,h,{capture:!0,passive:v}):a.addEventListener(c,h,!0):v!==void 0?a.addEventListener(c,h,{passive:v}):a.addEventListener(c,h,!1)}function lx(a,c,h,y,v){var k=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var B=y.stateNode.containerInfo;if(B===v)break;if(D===4)for(D=y.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===v)return;D=D.return}for(;B!==null;){if(D=xn(B),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){y=k=D;continue e}B=B.parentNode}}y=y.return}Yh(function(){var le=k,fe=Ia(h),me=[];e:{var ce=JA.get(a);if(ce!==void 0){var ue=pe,We=a;switch(a){case"keypress":if(ic(h)===0)break e;case"keydown":case"keyup":ue=N$;break;case"focusin":We="focus",ue=Xu;break;case"focusout":We="blur",ue=Xu;break;case"beforeblur":case"afterblur":ue=Xu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ze;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=R0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=M$;break;case KA:case YA:case XA:ue=Xn;break;case ZA:ue=D$;break;case"scroll":case"scrollend":ue=we;break;case"wheel":ue=j$;break;case"copy":case"cut":case"paste":ue=Jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=MA;break;case"toggle":case"beforetoggle":ue=L$}var Ue=(c&4)!==0,At=!Ue&&(a==="scroll"||a==="scrollend"),ne=Ue?ce!==null?ce+"Capture":null:ce;Ue=[];for(var Q=le,se;Q!==null;){var he=Q;if(se=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||se===null||ne===null||(he=Pa(Q,ne),he!=null&&Ue.push(Md(Q,he,se))),At)break;Q=Q.return}0<Ue.length&&(ce=new ue(ce,We,null,h,fe),me.push({event:ce,listeners:Ue}))}}if((c&7)===0){e:{if(ce=a==="mouseover"||a==="pointerover",ue=a==="mouseout"||a==="pointerout",ce&&h!==Gu&&(We=h.relatedTarget||h.fromElement)&&(xn(We)||We[Rr]))break e;if((ue||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(We=h.relatedTarget||h.toElement,ue=le,We=We?xn(We):null,We!==null&&(At=s(We),Ue=We.tag,We!==At||Ue!==5&&Ue!==27&&Ue!==6)&&(We=null)):(ue=null,We=le),ue!==We)){if(Ue=Ze,he="onMouseLeave",ne="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(Ue=MA,he="onPointerLeave",ne="onPointerEnter",Q="pointer"),At=ue==null?ce:or(ue),se=We==null?ce:or(We),ce=new Ue(he,Q+"leave",ue,h,fe),ce.target=At,ce.relatedTarget=se,he=null,xn(fe)===le&&(Ue=new Ue(ne,Q+"enter",We,h,fe),Ue.target=se,Ue.relatedTarget=At,he=Ue),At=he,ue&&We)t:{for(Ue=ue,ne=We,Q=0,se=Ue;se;se=Dc(se))Q++;for(se=0,he=ne;he;he=Dc(he))se++;for(;0<Q-se;)Ue=Dc(Ue),Q--;for(;0<se-Q;)ne=Dc(ne),se--;for(;Q--;){if(Ue===ne||ne!==null&&Ue===ne.alternate)break t;Ue=Dc(Ue),ne=Dc(ne)}Ue=null}else Ue=null;ue!==null&&bD(me,ce,ue,Ue,!1),We!==null&&At!==null&&bD(me,At,We,Ue,!0)}}e:{if(ce=le?or(le):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var je=PA;else if(LA(ce))if(BA)je=$$;else{je=H$;var it=F$}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&$u(le.elementType)&&(je=PA):je=U$;if(je&&(je=je(a,le))){IA(me,je,h,fe);break e}it&&it(a,ce,le),a==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&La(ce,"number",ce.value)}switch(it=le?or(le):window,a){case"focusin":(LA(it)||it.contentEditable==="true")&&(ac=it,z0=le,td=null);break;case"focusout":td=z0=ac=null;break;case"mousedown":V0=!0;break;case"contextmenu":case"mouseup":case"dragend":V0=!1,GA(me,h,fe);break;case"selectionchange":if(W$)break;case"keydown":case"keyup":GA(me,h,fe)}var ze;if(L0)e:{switch(a){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else oc?jA(a,h)&&(Ge="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Ge="onCompositionStart");Ge&&(_A&&h.locale!=="ko"&&(oc||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&oc&&(ze=Xh()):(as=fe,Yu="value"in as?as.value:as.textContent,oc=!0)),it=Bp(le,Ge),0<it.length&&(Ge=new AA(Ge,a,null,h,fe),me.push({event:Ge,listeners:it}),ze?Ge.data=ze:(ze=OA(h),ze!==null&&(Ge.data=ze)))),(ze=P$?B$(a,h):z$(a,h))&&(Ge=Bp(le,"onBeforeInput"),0<Ge.length&&(it=new AA("onBeforeInput","beforeinput",null,h,fe),me.push({event:it,listeners:Ge}),it.data=ze)),M7(me,a,le,h,fe)}gD(me,c)})}function Md(a,c,h){return{instance:a,listener:c,currentTarget:h}}function Bp(a,c){for(var h=c+"Capture",y=[];a!==null;){var v=a,k=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||k===null||(v=Pa(a,h),v!=null&&y.unshift(Md(a,v,k)),v=Pa(a,c),v!=null&&y.push(Md(a,v,k))),a.tag===3)return y;a=a.return}return[]}function Dc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function bD(a,c,h,y,v){for(var k=c._reactName,D=[];h!==null&&h!==y;){var B=h,K=B.alternate,le=B.stateNode;if(B=B.tag,K!==null&&K===y)break;B!==5&&B!==26&&B!==27||le===null||(K=le,v?(le=Pa(h,k),le!=null&&D.unshift(Md(h,le,K))):v||(le=Pa(h,k),le!=null&&D.push(Md(h,le,K)))),h=h.return}D.length!==0&&a.push({event:c,listeners:D})}var j7=/\r\n?/g,O7=/\u0000|\uFFFD/g;function xD(a){return(typeof a=="string"?a:""+a).replace(j7,`
`).replace(O7,"")}function vD(a,c){return c=xD(c),xD(a)===c}function zp(){}function Tt(a,c,h,y,v,k){switch(h){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Eo(a,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Eo(a,""+y);break;case"className":Bn(a,"class",y);break;case"tabIndex":Bn(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":Bn(a,h,y);break;case"style":Gh(a,y,k);break;case"data":if(c!=="object"){Bn(a,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||h!=="href")){a.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=rc(""+y),a.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(h==="formAction"?(c!=="input"&&Tt(a,c,"name",v.name,v,null),Tt(a,c,"formEncType",v.formEncType,v,null),Tt(a,c,"formMethod",v.formMethod,v,null),Tt(a,c,"formTarget",v.formTarget,v,null)):(Tt(a,c,"encType",v.encType,v,null),Tt(a,c,"method",v.method,v,null),Tt(a,c,"target",v.target,v,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=rc(""+y),a.setAttribute(h,y);break;case"onClick":y!=null&&(a.onclick=zp);break;case"onScroll":y!=null&&ot("scroll",a);break;case"onScrollEnd":y!=null&&ot("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}h=rc(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""+y):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":y===!0?a.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,y):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(h,y):a.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(h):a.setAttribute(h,y);break;case"popover":ot("beforetoggle",a),ot("toggle",a),Ut(a,"popover",y);break;case"xlinkActuate":vn(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":vn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":vn(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":vn(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":vn(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":vn(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":vn(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":vn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":vn(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ut(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Wh.get(h)||h,Ut(a,h,y))}}function cx(a,c,h,y,v,k){switch(h){case"style":Gh(a,y,k);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"children":typeof y=="string"?Eo(a,y):(typeof y=="number"||typeof y=="bigint")&&Eo(a,""+y);break;case"onScroll":y!=null&&ot("scroll",a);break;case"onScrollEnd":y!=null&&ot("scrollend",a);break;case"onClick":y!=null&&(a.onclick=zp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Re.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),c=h.slice(2,v?h.length-7:void 0),k=a[zt]||null,k=k!=null?k[h]:null,typeof k=="function"&&a.removeEventListener(c,k,v),typeof y=="function")){typeof k!="function"&&k!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(c,y,v);break e}h in a?a[h]=y:y===!0?a.setAttribute(h,""):Ut(a,h,y)}}}function Qn(a,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",a),ot("load",a);var y=!1,v=!1,k;for(k in h)if(h.hasOwnProperty(k)){var D=h[k];if(D!=null)switch(k){case"src":y=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Tt(a,c,k,D,h,null)}}v&&Tt(a,c,"srcSet",h.srcSet,h,null),y&&Tt(a,c,"src",h.src,h,null);return;case"input":ot("invalid",a);var B=k=D=v=null,K=null,le=null;for(y in h)if(h.hasOwnProperty(y)){var fe=h[y];if(fe!=null)switch(y){case"name":v=fe;break;case"type":D=fe;break;case"checked":K=fe;break;case"defaultChecked":le=fe;break;case"value":k=fe;break;case"defaultValue":B=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,c));break;default:Tt(a,c,y,fe,h,null)}}Co(a,k,B,K,le,D,v,!1),So(a);return;case"select":ot("invalid",a),y=D=k=null;for(v in h)if(h.hasOwnProperty(v)&&(B=h[v],B!=null))switch(v){case"value":k=B;break;case"defaultValue":D=B;break;case"multiple":y=B;default:Tt(a,c,v,B,h,null)}c=k,h=D,a.multiple=!!y,c!=null?zi(a,!!y,c,!1):h!=null&&zi(a,!!y,h,!0);return;case"textarea":ot("invalid",a),k=v=y=null;for(D in h)if(h.hasOwnProperty(D)&&(B=h[D],B!=null))switch(D){case"value":y=B;break;case"defaultValue":v=B;break;case"children":k=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(91));break;default:Tt(a,c,D,B,h,null)}nc(a,y,v,k),So(a);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(y=h[K],y!=null))switch(K){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Tt(a,c,K,y,h,null)}return;case"dialog":ot("beforetoggle",a),ot("toggle",a),ot("cancel",a),ot("close",a);break;case"iframe":case"object":ot("load",a);break;case"video":case"audio":for(y=0;y<Ad.length;y++)ot(Ad[y],a);break;case"image":ot("error",a),ot("load",a);break;case"details":ot("toggle",a);break;case"embed":case"source":case"link":ot("error",a),ot("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(y=h[le],y!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Tt(a,c,le,y,h,null)}return;default:if($u(c)){for(fe in h)h.hasOwnProperty(fe)&&(y=h[fe],y!==void 0&&cx(a,c,fe,y,h,void 0));return}}for(B in h)h.hasOwnProperty(B)&&(y=h[B],y!=null&&Tt(a,c,B,y,h,null))}function L7(a,c,h,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,k=null,D=null,B=null,K=null,le=null,fe=null;for(ue in h){var me=h[ue];if(h.hasOwnProperty(ue)&&me!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":K=me;default:y.hasOwnProperty(ue)||Tt(a,c,ue,null,y,me)}}for(var ce in y){var ue=y[ce];if(me=h[ce],y.hasOwnProperty(ce)&&(ue!=null||me!=null))switch(ce){case"type":k=ue;break;case"name":v=ue;break;case"checked":le=ue;break;case"defaultChecked":fe=ue;break;case"value":D=ue;break;case"defaultValue":B=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:ue!==me&&Tt(a,c,ce,ue,y,me)}}Yr(a,D,B,K,le,fe,k,v);return;case"select":ue=D=B=ce=null;for(k in h)if(K=h[k],h.hasOwnProperty(k)&&K!=null)switch(k){case"value":break;case"multiple":ue=K;default:y.hasOwnProperty(k)||Tt(a,c,k,null,y,K)}for(v in y)if(k=y[v],K=h[v],y.hasOwnProperty(v)&&(k!=null||K!=null))switch(v){case"value":ce=k;break;case"defaultValue":B=k;break;case"multiple":D=k;default:k!==K&&Tt(a,c,v,k,y,K)}c=B,h=D,y=ue,ce!=null?zi(a,!!h,ce,!1):!!y!=!!h&&(c!=null?zi(a,!!h,c,!0):zi(a,!!h,h?[]:"",!1));return;case"textarea":ue=ce=null;for(B in h)if(v=h[B],h.hasOwnProperty(B)&&v!=null&&!y.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Tt(a,c,B,null,y,v)}for(D in y)if(v=y[D],k=h[D],y.hasOwnProperty(D)&&(v!=null||k!=null))switch(D){case"value":ce=v;break;case"defaultValue":ue=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==k&&Tt(a,c,D,v,y,k)}Uu(a,ce,ue);return;case"option":for(var We in h)if(ce=h[We],h.hasOwnProperty(We)&&ce!=null&&!y.hasOwnProperty(We))switch(We){case"selected":a.selected=!1;break;default:Tt(a,c,We,null,y,ce)}for(K in y)if(ce=y[K],ue=h[K],y.hasOwnProperty(K)&&ce!==ue&&(ce!=null||ue!=null))switch(K){case"selected":a.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Tt(a,c,K,ce,y,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in h)ce=h[Ue],h.hasOwnProperty(Ue)&&ce!=null&&!y.hasOwnProperty(Ue)&&Tt(a,c,Ue,null,y,ce);for(le in y)if(ce=y[le],ue=h[le],y.hasOwnProperty(le)&&ce!==ue&&(ce!=null||ue!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,c));break;default:Tt(a,c,le,ce,y,ue)}return;default:if($u(c)){for(var At in h)ce=h[At],h.hasOwnProperty(At)&&ce!==void 0&&!y.hasOwnProperty(At)&&cx(a,c,At,void 0,y,ce);for(fe in y)ce=y[fe],ue=h[fe],!y.hasOwnProperty(fe)||ce===ue||ce===void 0&&ue===void 0||cx(a,c,fe,ce,y,ue);return}}for(var ne in h)ce=h[ne],h.hasOwnProperty(ne)&&ce!=null&&!y.hasOwnProperty(ne)&&Tt(a,c,ne,null,y,ce);for(me in y)ce=y[me],ue=h[me],!y.hasOwnProperty(me)||ce===ue||ce==null&&ue==null||Tt(a,c,me,ce,y,ue)}var ux=null,dx=null;function Vp(a){return a.nodeType===9?a:a.ownerDocument}function wD(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function SD(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function fx(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var hx=null;function I7(){var a=window.event;return a&&a.type==="popstate"?a===hx?!1:(hx=a,!0):(hx=null,!1)}var kD=typeof setTimeout=="function"?setTimeout:void 0,P7=typeof clearTimeout=="function"?clearTimeout:void 0,CD=typeof Promise=="function"?Promise:void 0,B7=typeof queueMicrotask=="function"?queueMicrotask:typeof CD<"u"?function(a){return CD.resolve(null).then(a).catch(z7)}:kD;function z7(a){setTimeout(function(){throw a})}function Ho(a){return a==="head"}function ED(a,c){var h=c,y=0,v=0;do{var k=h.nextSibling;if(a.removeChild(h),k&&k.nodeType===8)if(h=k.data,h==="/$"){if(0<y&&8>y){h=y;var D=a.ownerDocument;if(h&1&&_d(D.documentElement),h&2&&_d(D.body),h&4)for(h=D.head,_d(h),D=h.firstChild;D;){var B=D.nextSibling,K=D.nodeName;D[Kr]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||h.removeChild(D),D=B}}if(v===0){a.removeChild(k),Bd(c);return}v--}else h==="$"||h==="$?"||h==="$!"?v++:y=h.charCodeAt(0)-48;else y=0;h=k}while(h);Bd(c)}function px(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":px(h),ts(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function V7(a,c,h,y){for(;a.nodeType===1;){var v=h;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[Kr])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(k=a.getAttribute("rel"),k==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(k!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(k=a.getAttribute("src"),(k!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&k&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var k=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===k)return a}else return a;if(a=Hi(a.nextSibling),a===null)break}return null}function q7(a,c,h){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=Hi(a.nextSibling),a===null))return null;return a}function mx(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function F7(a,c){var h=a.ownerDocument;if(a.data!=="$?"||h.readyState==="complete")c();else{var y=function(){c(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function Hi(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var gx=null;function ND(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}function TD(a,c,h){switch(c=Vp(h),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function _d(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);ts(a)}var vi=new Map,AD=new Set;function qp(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ws=V.d;V.d={f:H7,r:U7,D:$7,C:G7,L:W7,m:K7,X:X7,S:Y7,M:Z7};function H7(){var a=Ws.f(),c=Rp();return a||c}function U7(a){var c=He(a);c!==null&&c.tag===5&&c.type==="form"?KM(c):Ws.r(a)}var Rc=typeof document>"u"?null:document;function MD(a,c,h){var y=Rc;if(y&&typeof c=="string"&&c){var v=cr(c);v='link[rel="'+a+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),AD.has(v)||(AD.add(v),a={rel:a,crossOrigin:h,href:c},y.querySelector(v)===null&&(c=y.createElement("link"),Qn(c,"link",a),Lt(c),y.head.appendChild(c)))}}function $7(a){Ws.D(a),MD("dns-prefetch",a,null)}function G7(a,c){Ws.C(a,c),MD("preconnect",a,c)}function W7(a,c,h){Ws.L(a,c,h);var y=Rc;if(y&&a&&c){var v='link[rel="preload"][as="'+cr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+cr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+cr(h.imageSizes)+'"]')):v+='[href="'+cr(a)+'"]';var k=v;switch(c){case"style":k=jc(a);break;case"script":k=Oc(a)}vi.has(k)||(a=f({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:a,as:c},h),vi.set(k,a),y.querySelector(v)!==null||c==="style"&&y.querySelector(Dd(k))||c==="script"&&y.querySelector(Rd(k))||(c=y.createElement("link"),Qn(c,"link",a),Lt(c),y.head.appendChild(c)))}}function K7(a,c){Ws.m(a,c);var h=Rc;if(h&&a){var y=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+cr(y)+'"][href="'+cr(a)+'"]',k=v;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Oc(a)}if(!vi.has(k)&&(a=f({rel:"modulepreload",href:a},c),vi.set(k,a),h.querySelector(v)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Rd(k)))return}y=h.createElement("link"),Qn(y,"link",a),Lt(y),h.head.appendChild(y)}}}function Y7(a,c,h){Ws.S(a,c,h);var y=Rc;if(y&&a){var v=ar(y).hoistableStyles,k=jc(a);c=c||"default";var D=v.get(k);if(!D){var B={loading:0,preload:null};if(D=y.querySelector(Dd(k)))B.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":c},h),(h=vi.get(k))&&yx(a,h);var K=D=y.createElement("link");Lt(K),Qn(K,"link",a),K._p=new Promise(function(le,fe){K.onload=le,K.onerror=fe}),K.addEventListener("load",function(){B.loading|=1}),K.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Fp(D,c,y)}D={type:"stylesheet",instance:D,count:1,state:B},v.set(k,D)}}}function X7(a,c){Ws.X(a,c);var h=Rc;if(h&&a){var y=ar(h).hoistableScripts,v=Oc(a),k=y.get(v);k||(k=h.querySelector(Rd(v)),k||(a=f({src:a,async:!0},c),(c=vi.get(v))&&bx(a,c),k=h.createElement("script"),Lt(k),Qn(k,"link",a),h.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(v,k))}}function Z7(a,c){Ws.M(a,c);var h=Rc;if(h&&a){var y=ar(h).hoistableScripts,v=Oc(a),k=y.get(v);k||(k=h.querySelector(Rd(v)),k||(a=f({src:a,async:!0,type:"module"},c),(c=vi.get(v))&&bx(a,c),k=h.createElement("script"),Lt(k),Qn(k,"link",a),h.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},y.set(v,k))}}function _D(a,c,h,y){var v=(v=ee.current)?qp(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=jc(h.href),h=ar(v).hoistableStyles,y=h.get(c),y||(y={type:"style",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=jc(h.href);var k=ar(v).hoistableStyles,D=k.get(a);if(D||(v=v.ownerDocument||v,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(a,D),(k=v.querySelector(Dd(a)))&&!k._p&&(D.instance=k,D.state.loading=5),vi.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},vi.set(a,h),k||J7(v,a,h,D.state))),c&&y===null)throw Error(r(528,""));return D}if(c&&y!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Oc(h),h=ar(v).hoistableScripts,y=h.get(c),y||(y={type:"script",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function jc(a){return'href="'+cr(a)+'"'}function Dd(a){return'link[rel="stylesheet"]['+a+"]"}function DD(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function J7(a,c,h,y){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=a.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Qn(c,"link",h),Lt(c),a.head.appendChild(c))}function Oc(a){return'[src="'+cr(a)+'"]'}function Rd(a){return"script[async]"+a}function RD(a,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var y=a.querySelector('style[data-href~="'+cr(h.href)+'"]');if(y)return c.instance=y,Lt(y),y;var v=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Lt(y),Qn(y,"style",v),Fp(y,h.precedence,a),c.instance=y;case"stylesheet":v=jc(h.href);var k=a.querySelector(Dd(v));if(k)return c.state.loading|=4,c.instance=k,Lt(k),k;y=DD(h),(v=vi.get(v))&&yx(y,v),k=(a.ownerDocument||a).createElement("link"),Lt(k);var D=k;return D._p=new Promise(function(B,K){D.onload=B,D.onerror=K}),Qn(k,"link",y),c.state.loading|=4,Fp(k,h.precedence,a),c.instance=k;case"script":return k=Oc(h.src),(v=a.querySelector(Rd(k)))?(c.instance=v,Lt(v),v):(y=h,(v=vi.get(k))&&(y=f({},h),bx(y,v)),a=a.ownerDocument||a,v=a.createElement("script"),Lt(v),Qn(v,"link",y),a.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,Fp(y,h.precedence,a));return c.instance}function Fp(a,c,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=y.length?y[y.length-1]:null,k=v,D=0;D<y.length;D++){var B=y[D];if(B.dataset.precedence===c)k=B;else if(k!==v)break}k?k.parentNode.insertBefore(a,k.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(a,c.firstChild))}function yx(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function bx(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Hp=null;function jD(a,c,h){if(Hp===null){var y=new Map,v=Hp=new Map;v.set(h,y)}else v=Hp,y=v.get(h),y||(y=new Map,v.set(h,y));if(y.has(a))return y;for(y.set(a,null),h=h.getElementsByTagName(a),v=0;v<h.length;v++){var k=h[v];if(!(k[Kr]||k[Xt]||a==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var D=k.getAttribute(c)||"";D=a+D;var B=y.get(D);B?B.push(k):y.set(D,[k])}}return y}function OD(a,c,h){a=a.ownerDocument||a,a.head.insertBefore(h,c==="title"?a.querySelector("head > title"):null)}function Q7(a,c,h){if(h===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function LD(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var jd=null;function eG(){}function tG(a,c,h){if(jd===null)throw Error(r(475));var y=jd;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=jc(h.href),k=a.querySelector(Dd(v));if(k){a=k._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Up.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=k,Lt(k);return}k=a.ownerDocument||a,h=DD(h),(v=vi.get(v))&&yx(h,v),k=k.createElement("link"),Lt(k);var D=k;D._p=new Promise(function(B,K){D.onload=B,D.onerror=K}),Qn(k,"link",h),c.instance=k}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=Up.bind(y),a.addEventListener("load",c),a.addEventListener("error",c))}}function nG(){if(jd===null)throw Error(r(475));var a=jd;return a.stylesheets&&a.count===0&&xx(a,a.stylesheets),0<a.count?function(c){var h=setTimeout(function(){if(a.stylesheets&&xx(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h)}}:null}function Up(){if(this.count--,this.count===0){if(this.stylesheets)xx(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $p=null;function xx(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,$p=new Map,c.forEach(rG,a),$p=null,Up.call(a))}function rG(a,c){if(!(c.state.loading&4)){var h=$p.get(a);if(h)var y=h.get(null);else{h=new Map,$p.set(a,h);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<v.length;k++){var D=v[k];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),y=D)}y&&h.set(null,y)}v=c.instance,D=v.getAttribute("data-precedence"),k=h.get(D)||y,k===y&&h.set(null,v),h.set(D,v),this.count++,y=Up.bind(this),v.addEventListener("load",y),v.addEventListener("error",y),k?k.parentNode.insertBefore(v,k.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),c.state.loading|=4}}var Od={$$typeof:E,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function iG(a,c,h,y,v,k,D,B){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=y,this.onUncaughtError=v,this.onCaughtError=k,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function ID(a,c,h,y,v,k,D,B,K,le,fe,me){return a=new iG(a,c,h,D,B,K,le,me),c=1,k===!0&&(c|=24),k=Zr(3,null,null,c),a.current=k,k.stateNode=a,c=eb(),c.refCount++,a.pooledCache=c,c.refCount++,k.memoizedState={element:y,isDehydrated:h,cache:c},ib(k),a}function PD(a){return a?(a=dc,a):dc}function BD(a,c,h,y,v,k){v=PD(v),y.context===null?y.context=v:y.pendingContext=v,y=_o(c),y.payload={element:h},k=k===void 0?null:k,k!==null&&(y.callback=k),h=Do(a,y,c),h!==null&&(ni(h,a,c),ud(h,a,c))}function zD(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function vx(a,c){zD(a,c),(a=a.alternate)&&zD(a,c)}function VD(a){if(a.tag===13){var c=uc(a,67108864);c!==null&&ni(c,a,67108864),vx(a,67108864)}}var Gp=!0;function sG(a,c,h,y){var v=j.T;j.T=null;var k=V.p;try{V.p=2,wx(a,c,h,y)}finally{V.p=k,j.T=v}}function oG(a,c,h,y){var v=j.T;j.T=null;var k=V.p;try{V.p=8,wx(a,c,h,y)}finally{V.p=k,j.T=v}}function wx(a,c,h,y){if(Gp){var v=Sx(y);if(v===null)lx(a,c,y,Wp,h),FD(a,y);else if(lG(v,a,c,h,y))y.stopPropagation();else if(FD(a,y),c&4&&-1<aG.indexOf(a)){for(;v!==null;){var k=He(v);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var D=$e(k.pendingLanes);if(D!==0){var B=k;for(B.pendingLanes|=2,B.entangledLanes|=2;D;){var K=1<<31-Dt(D);B.entanglements[1]|=K,D&=~K}fs(k),(kt&6)===0&&(_p=Oe()+500,Td(0))}}break;case 13:B=uc(k,2),B!==null&&ni(B,k,2),Rp(),vx(k,2)}if(k=Sx(y),k===null&&lx(a,c,y,Wp,h),k===v)break;v=k}v!==null&&y.stopPropagation()}else lx(a,c,y,null,h)}}function Sx(a){return a=Ia(a),kx(a)}var Wp=null;function kx(a){if(Wp=null,a=xn(a),a!==null){var c=s(a);if(c===null)a=null;else{var h=c.tag;if(h===13){if(a=o(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Wp=a,null}function qD(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case wt:return 2;case Yt:return 8;case gn:case Ht:return 32;case Mt:return 268435456;default:return 32}default:return 32}}var Cx=!1,Uo=null,$o=null,Go=null,Ld=new Map,Id=new Map,Wo=[],aG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FD(a,c){switch(a){case"focusin":case"focusout":Uo=null;break;case"dragenter":case"dragleave":$o=null;break;case"mouseover":case"mouseout":Go=null;break;case"pointerover":case"pointerout":Ld.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Id.delete(c.pointerId)}}function Pd(a,c,h,y,v,k){return a===null||a.nativeEvent!==k?(a={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:k,targetContainers:[v]},c!==null&&(c=He(c),c!==null&&VD(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),a)}function lG(a,c,h,y,v){switch(c){case"focusin":return Uo=Pd(Uo,a,c,h,y,v),!0;case"dragenter":return $o=Pd($o,a,c,h,y,v),!0;case"mouseover":return Go=Pd(Go,a,c,h,y,v),!0;case"pointerover":var k=v.pointerId;return Ld.set(k,Pd(Ld.get(k)||null,a,c,h,y,v)),!0;case"gotpointercapture":return k=v.pointerId,Id.set(k,Pd(Id.get(k)||null,a,c,h,y,v)),!0}return!1}function HD(a){var c=xn(a.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){a.blockedOn=c,Bi(a.priority,function(){if(h.tag===13){var y=ti();y=St(y);var v=uc(h,y);v!==null&&ni(v,h,y),vx(h,y)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Kp(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Sx(a.nativeEvent);if(h===null){h=a.nativeEvent;var y=new h.constructor(h.type,h);Gu=y,h.target.dispatchEvent(y),Gu=null}else return c=He(h),c!==null&&VD(c),a.blockedOn=h,!1;c.shift()}return!0}function UD(a,c,h){Kp(a)&&h.delete(c)}function cG(){Cx=!1,Uo!==null&&Kp(Uo)&&(Uo=null),$o!==null&&Kp($o)&&($o=null),Go!==null&&Kp(Go)&&(Go=null),Ld.forEach(UD),Id.forEach(UD)}function Yp(a,c){a.blockedOn===c&&(a.blockedOn=null,Cx||(Cx=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cG)))}var Xp=null;function $D(a){Xp!==a&&(Xp=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xp===a&&(Xp=null);for(var c=0;c<a.length;c+=3){var h=a[c],y=a[c+1],v=a[c+2];if(typeof y!="function"){if(kx(y||h)===null)continue;break}var k=He(h);k!==null&&(a.splice(c,3),c-=3,kb(k,{pending:!0,data:v,method:h.method,action:y},y,v))}}))}function Bd(a){function c(K){return Yp(K,a)}Uo!==null&&Yp(Uo,a),$o!==null&&Yp($o,a),Go!==null&&Yp(Go,a),Ld.forEach(c),Id.forEach(c);for(var h=0;h<Wo.length;h++){var y=Wo[h];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Wo.length&&(h=Wo[0],h.blockedOn===null);)HD(h),h.blockedOn===null&&Wo.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var v=h[y],k=h[y+1],D=v[zt]||null;if(typeof k=="function")D||$D(h);else if(D){var B=null;if(k&&k.hasAttribute("formAction")){if(v=k,D=k[zt]||null)B=D.formAction;else if(kx(v)!==null)continue}else B=D.action;typeof B=="function"?h[y+1]=B:(h.splice(y,3),y-=3),$D(h)}}}function Ex(a){this._internalRoot=a}Zp.prototype.render=Ex.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,y=ti();BD(h,y,a,c,null,null)},Zp.prototype.unmount=Ex.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;BD(a.current,2,null,a,null,null),Rp(),c[Rr]=null}};function Zp(a){this._internalRoot=a}Zp.prototype.unstable_scheduleHydration=function(a){if(a){var c=wo();a={blockedOn:null,target:a,priority:c};for(var h=0;h<Wo.length&&c!==0&&c<Wo[h].priority;h++);Wo.splice(h,0,a),h===0&&HD(a)}};var GD=e.version;if(GD!=="19.1.1")throw Error(r(527,GD,"19.1.1"));V.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var uG={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{Bt=Jp.inject(uG),ht=Jp}catch{}}return Vd.createRoot=function(a,c){if(!i(a))throw Error(r(299));var h=!1,y="",v=l_,k=c_,D=u_,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(k=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(B=c.unstable_transitionCallbacks)),c=ID(a,1,!1,null,null,h,y,v,k,D,B,null),a[Rr]=c.current,ax(a),new Ex(c)},Vd.hydrateRoot=function(a,c,h){if(!i(a))throw Error(r(299));var y=!1,v="",k=l_,D=c_,B=u_,K=null,le=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(k=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(le=h.formState)),c=ID(a,1,!0,c,h??null,y,v,k,D,B,K,le),c.context=PD(null),h=c.current,y=ti(),y=St(y),v=_o(y),v.callback=null,Do(h,v,y),h=y,c.current.lanes=h,$r(c,h),fs(c),a[Rr]=c.current,ax(a),new Zp(c)},Vd.version="19.1.1",Vd}var nR;function wG(){if(nR)return Ax.exports;nR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ax.exports=vG(),Ax.exports}var SG=wG(),kG=bB();const mh=hh(kG);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_f.apply(this,arguments)}var la;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(la||(la={}));const rR="popstate";function CG(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return yE("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vB(i)}return NG(e,n,null,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function xB(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function EG(){return Math.random().toString(36).substr(2,8)}function iR(t,e){return{usr:t.state,key:t.key,idx:e}}function yE(t,e,n,r){return n===void 0&&(n=null),_f({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_u(e):e,{state:n,key:e&&e.key||r||EG()})}function vB(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _u(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function NG(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=la.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(_f({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=la.Pop;let S=f(),C=S==null?null:S-d;d=S,u&&u({action:l,location:w.location,delta:C})}function m(S,C){l=la.Push;let T=yE(w.location,S,C);d=f()+1;let E=iR(T,d),N=w.createHref(T);try{o.pushState(E,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(N)}s&&u&&u({action:l,location:w.location,delta:1})}function b(S,C){l=la.Replace;let T=yE(w.location,S,C);d=f();let E=iR(T,d),N=w.createHref(T);o.replaceState(E,"",N),s&&u&&u({action:l,location:w.location,delta:0})}function x(S){let C=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof S=="string"?S:vB(S);return T=T.replace(/ $/,"%20"),In(C,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,C)}let w={get action(){return l},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(rR,p),u=S,()=>{i.removeEventListener(rR,p),u=null}},createHref(S){return e(i,S)},createURL:x,encodeLocation(S){let C=x(S);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:b,go(S){return o.go(S)}};return w}var sR;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sR||(sR={}));function TG(t,e,n){return n===void 0&&(n="/"),AG(t,e,n)}function AG(t,e,n,r){let i=typeof e=="string"?_u(e):e,s=kB(i.pathname||"/",n);if(s==null)return null;let o=wB(t);MG(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=qG(s);l=BG(o[u],d)}return l}function wB(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(In(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=gl([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(In(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),wB(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:IG(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of SB(s.path))i(s,o,u)}),e}function SB(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SB(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function MG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PG(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _G=/^:[\w-]+$/,DG=3,RG=2,jG=1,OG=10,LG=-2,oR=t=>t==="*";function IG(t,e){let n=t.split("/"),r=n.length;return n.some(oR)&&(r+=LG),e&&(r+=RG),n.filter(i=>!oR(i)).reduce((i,s)=>i+(_G.test(s)?DG:s===""?jG:OG),r)}function PG(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function BG(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=zG({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:gl([s,p.pathname]),pathnameBase:WG(gl([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=gl([s,p.pathnameBase]))}return o}function zG(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=VG(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:m,isOptional:b}=f;if(m==="*"){let w=l[p]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=l[p];return b&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function VG(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),xB(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function qG(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xB(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function kB(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function FG(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_u(t):t;return{pathname:n?n.startsWith("/")?n:HG(n,e):e,search:KG(r),hash:YG(i)}}function HG(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Rx(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UG(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $G(t,e){let n=UG(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function GG(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_u(t):(i=_f({},t),In(!i.pathname||!i.pathname.includes("?"),Rx("?","pathname","search",i)),In(!i.pathname||!i.pathname.includes("#"),Rx("#","pathname","hash",i)),In(!i.search||!i.search.includes("#"),Rx("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=FG(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const gl=t=>t.join("/").replace(/\/\/+/g,"/"),WG=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KG=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YG=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XG(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CB=["post","put","patch","delete"];new Set(CB);const ZG=["get",...CB];new Set(ZG);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Df(){return Df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Df.apply(this,arguments)}const Q2=M.createContext(null),JG=M.createContext(null),by=M.createContext(null),xy=M.createContext(null),Fl=M.createContext({outlet:null,matches:[],isDataRoute:!1}),EB=M.createContext(null);function vy(){return M.useContext(xy)!=null}function NB(){return vy()||In(!1),M.useContext(xy).location}function TB(t){M.useContext(by).static||M.useLayoutEffect(t)}function gh(){let{isDataRoute:t}=M.useContext(Fl);return t?fW():QG()}function QG(){vy()||In(!1);let t=M.useContext(Q2),{basename:e,future:n,navigator:r}=M.useContext(by),{matches:i}=M.useContext(Fl),{pathname:s}=NB(),o=JSON.stringify($G(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return TB(()=>{l.current=!0}),M.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=GG(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:gl([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}function eW(){let{matches:t}=M.useContext(Fl),e=t[t.length-1];return e?e.params:{}}function tW(t,e){return nW(t,e)}function nW(t,e,n,r){vy()||In(!1);let{navigator:i}=M.useContext(by),{matches:s}=M.useContext(Fl),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=NB(),f;if(e){var p;let S=typeof e=="string"?_u(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||In(!1),f=S}else f=d;let m=f.pathname||"/",b=m;if(u!=="/"){let S=u.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=TG(t,{pathname:b}),w=aW(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:gl([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:gl([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&w?M.createElement(xy.Provider,{value:{location:Df({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:la.Pop}},w):w}function rW(){let t=dW(),e=XG(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const iW=M.createElement(rW,null);class sW extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(Fl.Provider,{value:this.props.routeContext},M.createElement(EB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oW(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(Q2);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Fl.Provider,{value:e},r)}function aW(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);f>=0||In(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:b}=n,x=p.route.loader&&m[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,m)=>{let b,x=!1,w=null,S=null;n&&(b=l&&p.route.id?l[p.route.id]:void 0,w=p.route.errorElement||iW,u&&(d<0&&m===0?(hW("route-fallback"),x=!0,S=null):d===m&&(x=!0,S=p.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,m+1)),T=()=>{let E;return b?E=w:x?E=S:p.route.Component?E=M.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,M.createElement(oW,{match:p,routeContext:{outlet:f,matches:C,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?M.createElement(sW,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):T()},null)}var AB=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(AB||{}),MB=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(MB||{});function lW(t){let e=M.useContext(Q2);return e||In(!1),e}function cW(t){let e=M.useContext(JG);return e||In(!1),e}function uW(t){let e=M.useContext(Fl);return e||In(!1),e}function _B(t){let e=uW(),n=e.matches[e.matches.length-1];return n.route.id||In(!1),n.route.id}function dW(){var t;let e=M.useContext(EB),n=cW(),r=_B();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fW(){let{router:t}=lW(AB.UseNavigateStable),e=_B(MB.UseNavigateStable),n=M.useRef(!1);return TB(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Df({fromRouteId:e},s)))},[t,e])}const aR={};function hW(t,e,n){aR[t]||(aR[t]=!0)}function pW(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function rl(t){In(!1)}function mW(t){let{basename:e="/",children:n=null,location:r,navigationType:i=la.Pop,navigator:s,static:o=!1,future:l}=t;vy()&&In(!1);let u=e.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:u,navigator:s,static:o,future:Df({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=_u(r));let{pathname:f="/",search:p="",hash:m="",state:b=null,key:x="default"}=r,w=M.useMemo(()=>{let S=kB(f,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:b,key:x},navigationType:i}},[u,f,p,m,b,x,i]);return w==null?null:M.createElement(by.Provider,{value:d},M.createElement(xy.Provider,{children:n,value:w}))}function gW(t){let{children:e,location:n}=t;return tW(bE(e),n)}new Promise(()=>{});function bE(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,bE(r.props.children,s));return}r.type!==rl&&In(!1),!r.props.index||!r.props.children||In(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yW="6";try{window.__reactRouterVersion=yW}catch{}const bW="startTransition",lR=gG[bW];function xW(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=CG({window:i,v5Compat:!0}));let o=s.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=M.useCallback(p=>{d&&lR?lR(()=>u(p)):u(p)},[u,d]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.useEffect(()=>pW(r),[r]),M.createElement(mW,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var cR;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cR||(cR={}));var uR;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uR||(uR={}));var DB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dR=ke.createContext&&ke.createContext(DB),vW=["attr","size","title"];function wW(t,e){if(t==null)return{};var n=SW(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Zm(){return Zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zm.apply(this,arguments)}function fR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(n),!0).forEach(function(r){kW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kW(t,e,n){return e=CW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CW(t){var e=EW(t,"string");return typeof e=="symbol"?e:e+""}function EW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RB(t){return t&&t.map((e,n)=>ke.createElement(e.tag,Jm({key:n},e.attr),RB(e.child)))}function ct(t){return e=>ke.createElement(NW,Zm({attr:Jm({},t.attr)},e),RB(t.child))}function NW(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=wW(t,vW),l=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),ke.createElement("svg",Zm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Jm(Jm({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ke.createElement("title",null,s),t.children)};return dR!==void 0?ke.createElement(dR.Consumer,null,n=>e(n)):e(DB)}function TW(t){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function AW(t){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function eN(t){return ct({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(t)}const MW=t=>t==="system"||t==="light"||t==="dark";function Hl(){const[t,e]=M.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return MW(s)?s:"light"}),[n,r]=M.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return M.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(t);try{localStorage.setItem("theme",t)}catch{}},[t,n]),M.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:t,setTheme:e,flowColorMode:t==="system"?n?"dark":"light":t}}const yh=()=>{const{theme:t,setTheme:e}=Hl();return g.jsx("button",{onClick:()=>e(t==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:t==="light"?g.jsx(TW,{size:18}):g.jsx(AW,{size:18})})},ri={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},bh=({title:t,description:e,keywords:n,image:r,url:i,type:s="website"})=>(M.useEffect(()=>{document.title=t||ri.title;const o=(u,d,f=!1)=>{const p=f?"property":"name";let m=document.querySelector(`meta[${p}="${u}"]`);m?m.content=d:(m=document.createElement("meta"),m.setAttribute(p,u),m.content=d,document.head.appendChild(m))};o("description",e||ri.description),o("keywords",n||ri.keywords),o("og:title",t||ri.title,!0),o("og:description",e||ri.description,!0),o("og:image",r||ri.image,!0),o("og:url",i||ri.url,!0),o("og:type",s,!0),o("twitter:title",t||ri.title),o("twitter:description",e||ri.description),o("twitter:image",r||ri.image),o("twitter:url",i||ri.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||ri.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||ri.url,document.head.appendChild(l))},[t,e,n,r,i,s]),null);class Zd extends Error{}Zd.prototype.name="InvalidTokenError";function _W(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function DW(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return _W(e)}catch{return atob(e)}}function RW(t,e){if(typeof t!="string")throw new Zd("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new Zd(`Invalid token specified: missing part #${n+1}`);let i;try{i=DW(r)}catch(s){throw new Zd(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new Zd(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const kn="https://diagrammatic-api.vercel.app";class jW{getAuthHeaders(){const e=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}}async login(e){const n=await fetch(`${kn}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(e){const n=await fetch(`${kn}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(e){const n=await fetch(`${kn}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const e=await fetch(`${kn}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch user");return e.json()}async saveDiagram(e){const n=await fetch(`${kn}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(e,n){const r=await fetch(`${kn}/api/v1/diagrams/${e}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const e=await fetch(`${kn}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch diagrams");return e.json()}async getDiagram(e){const n=await fetch(`${kn}/api/v1/diagrams/${e}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async getPublicDiagram(e){const n=await fetch(`${kn}/api/v1/diagrams/${e}/public`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(e){if(!(await fetch(`${kn}/api/v1/diagrams/${e}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}async addCollaborator(e,n,r){const i=await fetch(`${kn}/api/v1/diagrams/${e}/share`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({email:n,permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to add collaborator"}));throw new Error(s.message||"Failed to add collaborator")}}async getCollaborators(e){const n=await fetch(`${kn}/api/v1/diagrams/${e}/collaborators`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch collaborators");return n.json()}async updateCollaborator(e,n,r){const i=await fetch(`${kn}/api/v1/diagrams/${e}/collaborators/${n}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to update collaborator"}));throw new Error(s.message||"Failed to update collaborator")}}async removeCollaborator(e,n){if(!(await fetch(`${kn}/api/v1/diagrams/${e}/collaborators/${n}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to remove collaborator")}async getAttemptedProblems(){const e=await fetch(`${kn}/api/v1/problems/attempted`,{headers:this.getAuthHeaders()});return e.ok?e.json():[]}async saveAttempt(e){const n=await fetch(`${kn}/api/v1/attempts`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to save attempt"}));throw new Error(r.message||"Failed to save attempt")}return n.json()}async getUserAttempts(){const e=await fetch(`${kn}/api/v1/attempts`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch attempts");return e.json()}async getAttemptByProblem(e){const n=await fetch(`${kn}/api/v1/attempts/problem/${e}`,{headers:this.getAuthHeaders()});if(n.status===404)return null;if(!n.ok)throw new Error("Failed to fetch attempt");return n.json()}async deleteAttempt(e){if(!(await fetch(`${kn}/api/v1/attempts/problem/${e}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete attempt")}async getRecommendations(e){const n={user_intent:e.userIntent?{title:e.userIntent.title,description:e.userIntent.description}:null,canvas_context:{node_count:e.canvasContext.nodeCount,edge_count:e.canvasContext.edgeCount,component_types:e.canvasContext.componentTypes,is_empty:e.canvasContext.isEmpty},components:e.components.map(s=>({id:s.id,type:s.type,label:s.label,has_description:s.hasDescription,properties:s.properties||{}})),connections:e.connections.map(s=>({source:s.source,target:s.target,type:s.type,has_label:s.hasLabel})),max_suggestions:e.maxSuggestions||5},r=await fetch(`${kn}/api/v1/recommendations`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to get recommendations");const i=await r.json();return{recommendations:i.recommendations.map(s=>({id:s.id,title:s.title,description:s.description,icon:s.icon,category:s.category,priority:s.priority,confidence:s.confidence,actionType:s.action_type,componentId:s.component_id,componentIds:s.component_ids,reasoning:s.reasoning})),totalCount:i.total_count,filteredCount:i.filtered_count,minConfidenceThreshold:i.min_confidence_threshold,contextSummary:i.context_summary,processingTimeMs:i.processing_time_ms}}}const Jt=new jW,jB=M.createContext(void 0),OW=({children:t})=>{const[e,n]=M.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=M.useCallback(f=>{try{const p=RW(f);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=M.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);M.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(m=>({...m,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(m=>({...m,isLoading:!1}));return}try{const m=await Jt.getCurrentUser();n({user:m,token:p,isAuthenticated:!0,isLoading:!1})}catch(m){console.error("Failed to fetch user:",m),localStorage.removeItem("auth_token"),n(b=>({...b,isLoading:!1}))}})()},[r]);const s=M.useCallback(async f=>{const{user:p,token:m}=await Jt.login(f);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),o=M.useCallback(async f=>{const{user:p,token:m}=await Jt.signup(f);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),l=M.useCallback(async f=>{const{user:p,token:m}=await Jt.googleLogin(f);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),u=M.useCallback(async()=>{if(e.token)try{const f=await Jt.getCurrentUser();n(p=>({...p,user:f}))}catch(f){console.error("Failed to refresh user:",f),i()}},[e.token,i]),d=M.useMemo(()=>({...e,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[e,s,o,l,i,u]);return g.jsx(jB.Provider,{value:d,children:t})},xh=()=>{const t=M.useContext(jB);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},tN=M.createContext({});function nN(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const rN=typeof window<"u",OB=rN?M.useLayoutEffect:M.useEffect,wy=M.createContext(null);function iN(t,e){t.indexOf(e)===-1&&t.push(e)}function sN(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ao=(t,e,n)=>n>e?e:n<t?t:n;let oN=()=>{};const lo={},LB=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function IB(t){return typeof t=="object"&&t!==null}const PB=t=>/^0[^.\s]+$/u.test(t);function aN(t){let e;return()=>(e===void 0&&(e=t()),e)}const _i=t=>t,LW=(t,e)=>n=>e(t(n)),vh=(...t)=>t.reduce(LW),Rf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class lN{constructor(){this.subscriptions=[]}add(e){return iN(this.subscriptions,e),()=>sN(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ws=t=>t*1e3,Mi=t=>t/1e3;function BB(t,e){return e?t*(1e3/e):0}const zB=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,IW=1e-7,PW=12;function BW(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=zB(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>IW&&++l<PW);return o}function wh(t,e,n,r){if(t===e&&n===r)return _i;const i=s=>BW(s,0,1,t,n);return s=>s===0||s===1?s:zB(i(s),e,r)}const VB=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,qB=t=>e=>1-t(1-e),FB=wh(.33,1.53,.69,.99),cN=qB(FB),HB=VB(cN),UB=t=>(t*=2)<1?.5*cN(t):.5*(2-Math.pow(2,-10*(t-1))),uN=t=>1-Math.sin(Math.acos(t)),$B=qB(uN),GB=VB(uN),zW=wh(.42,0,1,1),VW=wh(0,0,.58,1),WB=wh(.42,0,.58,1),qW=t=>Array.isArray(t)&&typeof t[0]!="number",KB=t=>Array.isArray(t)&&typeof t[0]=="number",FW={linear:_i,easeIn:zW,easeInOut:WB,easeOut:VW,circIn:uN,circInOut:GB,circOut:$B,backIn:cN,backInOut:HB,backOut:FB,anticipate:UB},HW=t=>typeof t=="string",hR=t=>{if(KB(t)){oN(t.length===4);const[e,n,r,i]=t;return wh(e,n,r,i)}else if(HW(t))return FW[t];return t},em=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function UW(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,m=!1)=>{const x=m&&i?n:r;return p&&o.add(f),x.has(f)||x.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(l=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(f))}};return d}const $W=40;function YB(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=em.reduce((E,N)=>(E[N]=UW(s),E),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:f,update:p,preRender:m,render:b,postRender:x}=o,w=()=>{const E=lo.useManualTiming?i.timestamp:performance.now();n=!1,lo.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,$W),1)),i.timestamp=E,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),m.process(i),b.process(i),x.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},S=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:em.reduce((E,N)=>{const A=o[N];return E[N]=(_,O=!1,R=!1)=>(n||S(),A.schedule(_,O,R)),E},{}),cancel:E=>{for(let N=0;N<em.length;N++)o[em[N]].cancel(E)},state:i,steps:o}}const{schedule:Gt,cancel:va,state:tr,steps:jx}=YB(typeof requestAnimationFrame<"u"?requestAnimationFrame:_i,!0);let Dm;function GW(){Dm=void 0}const Pr={now:()=>(Dm===void 0&&Pr.set(tr.isProcessing||lo.useManualTiming?tr.timestamp:performance.now()),Dm),set:t=>{Dm=t,queueMicrotask(GW)}},XB=t=>e=>typeof e=="string"&&e.startsWith(t),dN=XB("--"),WW=XB("var(--"),fN=t=>WW(t)?KW.test(t.split("/*")[0].trim()):!1,KW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Du={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jf={...Du,transform:t=>ao(0,1,t)},tm={...Du,default:1},cf=t=>Math.round(t*1e5)/1e5,hN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YW(t){return t==null}const XW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pN=(t,e)=>n=>!!(typeof n=="string"&&XW.test(n)&&n.startsWith(t)||e&&!YW(n)&&Object.prototype.hasOwnProperty.call(n,e)),ZB=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(hN);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},ZW=t=>ao(0,255,t),Ox={...Du,transform:t=>Math.round(ZW(t))},ll={test:pN("rgb","red"),parse:ZB("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ox.transform(t)+", "+Ox.transform(e)+", "+Ox.transform(n)+", "+cf(jf.transform(r))+")"};function JW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const xE={test:pN("#"),parse:JW,transform:ll.transform},Sh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Qo=Sh("deg"),Ss=Sh("%"),Ke=Sh("px"),QW=Sh("vh"),eK=Sh("vw"),pR={...Ss,parse:t=>Ss.parse(t)/100,transform:t=>Ss.transform(t*100)},Wc={test:pN("hsl","hue"),parse:ZB("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Ss.transform(cf(e))+", "+Ss.transform(cf(n))+", "+cf(jf.transform(r))+")"},Cn={test:t=>ll.test(t)||xE.test(t)||Wc.test(t),parse:t=>ll.test(t)?ll.parse(t):Wc.test(t)?Wc.parse(t):xE.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ll.transform(t):Wc.transform(t),getAnimatableNone:t=>{const e=Cn.parse(t);return e.alpha=0,Cn.transform(e)}},tK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nK(t){return isNaN(t)&&typeof t=="string"&&(t.match(hN)?.length||0)+(t.match(tK)?.length||0)>0}const JB="number",QB="color",rK="var",iK="var(",mR="${}",sK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Of(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(sK,u=>(Cn.test(u)?(r.color.push(s),i.push(QB),n.push(Cn.parse(u))):u.startsWith(iK)?(r.var.push(s),i.push(rK),n.push(u)):(r.number.push(s),i.push(JB),n.push(parseFloat(u))),++s,mR)).split(mR);return{values:n,split:l,indexes:r,types:i}}function ez(t){return Of(t).values}function tz(t){const{split:e,types:n}=Of(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===JB?s+=cf(i[o]):l===QB?s+=Cn.transform(i[o]):s+=i[o]}return s}}const oK=t=>typeof t=="number"?0:Cn.test(t)?Cn.getAnimatableNone(t):t;function aK(t){const e=ez(t);return tz(t)(e.map(oK))}const wa={test:nK,parse:ez,createTransformer:tz,getAnimatableNone:aK};function Lx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lK({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=Lx(u,l,t+1/3),s=Lx(u,l,t),o=Lx(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Qm(t,e){return n=>n>0?e:t}const tn=(t,e,n)=>t+(e-t)*n,Ix=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},cK=[xE,ll,Wc],uK=t=>cK.find(e=>e.test(t));function gR(t){const e=uK(t);if(!e)return!1;let n=e.parse(t);return e===Wc&&(n=lK(n)),n}const yR=(t,e)=>{const n=gR(t),r=gR(e);if(!n||!r)return Qm(t,e);const i={...n};return s=>(i.red=Ix(n.red,r.red,s),i.green=Ix(n.green,r.green,s),i.blue=Ix(n.blue,r.blue,s),i.alpha=tn(n.alpha,r.alpha,s),ll.transform(i))},vE=new Set(["none","hidden"]);function dK(t,e){return vE.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function fK(t,e){return n=>tn(t,e,n)}function mN(t){return typeof t=="number"?fK:typeof t=="string"?fN(t)?Qm:Cn.test(t)?yR:mK:Array.isArray(t)?nz:typeof t=="object"?Cn.test(t)?yR:hK:Qm}function nz(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>mN(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function hK(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=mN(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function pK(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const mK=(t,e)=>{const n=wa.createTransformer(e),r=Of(t),i=Of(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?vE.has(t)&&!i.values.length||vE.has(e)&&!r.values.length?dK(t,e):vh(nz(pK(r,i),i.values),n):Qm(t,e)};function rz(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tn(t,e,n):mN(t)(t,e)}const gK=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Gt.update(e,n),stop:()=>va(e),now:()=>tr.isProcessing?tr.timestamp:Pr.now()}},iz=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},eg=2e4;function gN(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<eg;)e+=n,r=t.next(e);return e>=eg?1/0:e}function yK(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(gN(r),eg);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Mi(i)}}const bK=5;function sz(t,e,n){const r=Math.max(e-bK,0);return BB(n-t(r),e-r)}const ln={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Px=.001;function xK({duration:t=ln.duration,bounce:e=ln.bounce,velocity:n=ln.velocity,mass:r=ln.mass}){let i,s,o=1-e;o=ao(ln.minDamping,ln.maxDamping,o),t=ao(ln.minDuration,ln.maxDuration,Mi(t)),o<1?(i=d=>{const f=d*o,p=f*t,m=f-n,b=wE(d,o),x=Math.exp(-p);return Px-m/b*x},s=d=>{const p=d*o*t,m=p*n+n,b=Math.pow(o,2)*Math.pow(d,2)*t,x=Math.exp(-p),w=wE(Math.pow(d,2),o);return(-i(d)+Px>0?-1:1)*((m-b)*x)/w}):(i=d=>{const f=Math.exp(-d*t),p=(d-n)*t+1;return-Px+f*p},s=d=>{const f=Math.exp(-d*t),p=(n-d)*(t*t);return f*p});const l=5/t,u=wK(i,s,l);if(t=ws(t),isNaN(u))return{stiffness:ln.stiffness,damping:ln.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const vK=12;function wK(t,e,n){let r=n;for(let i=1;i<vK;i++)r=r-t(r)/e(r);return r}function wE(t,e){return t*Math.sqrt(1-e*e)}const SK=["duration","bounce"],kK=["stiffness","damping","mass"];function bR(t,e){return e.some(n=>t[n]!==void 0)}function CK(t){let e={velocity:ln.velocity,stiffness:ln.stiffness,damping:ln.damping,mass:ln.mass,isResolvedFromDuration:!1,...t};if(!bR(t,kK)&&bR(t,SK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ao(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ln.mass,stiffness:i,damping:s}}else{const n=xK(t);e={...e,...n,mass:ln.mass},e.isResolvedFromDuration=!0}return e}function tg(t=ln.visualDuration,e=ln.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:f,duration:p,velocity:m,isResolvedFromDuration:b}=CK({...n,velocity:-Mi(n.velocity||0)}),x=m||0,w=d/(2*Math.sqrt(u*f)),S=o-s,C=Mi(Math.sqrt(u/f)),T=Math.abs(S)<5;r||(r=T?ln.restSpeed.granular:ln.restSpeed.default),i||(i=T?ln.restDelta.granular:ln.restDelta.default);let E;if(w<1){const A=wE(C,w);E=_=>{const O=Math.exp(-w*C*_);return o-O*((x+w*C*S)/A*Math.sin(A*_)+S*Math.cos(A*_))}}else if(w===1)E=A=>o-Math.exp(-C*A)*(S+(x+C*S)*A);else{const A=C*Math.sqrt(w*w-1);E=_=>{const O=Math.exp(-w*C*_),R=Math.min(A*_,300);return o-O*((x+w*C*S)*Math.sinh(R)+A*S*Math.cosh(R))/A}}const N={calculatedDuration:b&&p||null,next:A=>{const _=E(A);if(b)l.done=A>=p;else{let O=A===0?x:0;w<1&&(O=A===0?ws(x):sz(E,A,_));const R=Math.abs(O)<=r,L=Math.abs(o-_)<=i;l.done=R&&L}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(gN(N),eg),_=iz(O=>N.next(A*O).value,A,30);return A+"ms "+_},toTransition:()=>{}};return N}tg.applyToOptions=t=>{const e=yK(t,100,tg);return t.ease=e.ease,t.duration=ws(e.duration),t.type="keyframes",t};function SE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:f}){const p=t[0],m={done:!1,value:p},b=R=>l!==void 0&&R<l||u!==void 0&&R>u,x=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let w=n*e;const S=p+w,C=o===void 0?S:o(S);C!==S&&(w=C-p);const T=R=>-w*Math.exp(-R/r),E=R=>C+T(R),N=R=>{const L=T(R),I=E(R);m.done=Math.abs(L)<=d,m.value=m.done?C:I};let A,_;const O=R=>{b(m.value)&&(A=R,_=tg({keyframes:[m.value,x(m.value)],velocity:sz(E,R,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:f}))};return O(0),{calculatedDuration:null,next:R=>{let L=!1;return!_&&A===void 0&&(L=!0,N(R),O(R)),A!==void 0&&R>=A?_.next(R-A):(!L&&N(R),m)}}}function EK(t,e,n){const r=[],i=n||lo.mix||rz,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||_i:e;l=vh(u,l)}r.push(l)}return r}function NK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(oN(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=EK(e,r,i),u=l.length,d=f=>{if(o&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const m=Rf(t[p],t[p+1],f);return l[p](m)};return n?f=>d(ao(t[0],t[s-1],f)):d}function TK(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Rf(0,e,r);t.push(tn(n,1,i))}}function AK(t){const e=[0];return TK(e,t.length-1),e}function MK(t,e){return t.map(n=>n*e)}function _K(t,e){return t.map(()=>e||WB).splice(0,t.length-1)}function uf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=qW(r)?r.map(hR):hR(r),s={done:!1,value:e[0]},o=MK(n&&n.length===e.length?n:AK(e),t),l=NK(o,e,{ease:Array.isArray(i)?i:_K(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const DK=t=>t!==null;function yN(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(DK),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const RK={decay:SE,inertia:SE,tween:uf,keyframes:uf,spring:tg};function oz(t){typeof t.type=="string"&&(t.type=RK[t.type])}class bN{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const jK=t=>t/100;class xN extends bN{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Pr.now()&&this.tick(Pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;oz(e);const{type:n=uf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const u=n||uf;u!==uf&&typeof l[0]!="number"&&(this.mixKeyframes=vh(jK,rz(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=gN(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:b,type:x,onUpdate:w,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=r;if(p){const R=Math.min(this.currentTime,i)/l;let L=Math.floor(R),I=R%1;!I&&R>=1&&(I=1),I===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(m==="reverse"?(I=1-I,b&&(I-=b/l)):m==="mirror"&&(N=o)),E=ao(0,1,I)*l}const A=T?{done:!1,value:f[0]}:N.next(E);s&&(A.value=s(A.value));let{done:_}=A;!T&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return O&&x!==SE&&(A.value=yN(f,this.options,S,this.speed)),w&&w(A.value),O&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return Mi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mi(e)}get time(){return Mi(this.currentTime)}set time(e){e=ws(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=gK,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function OK(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const cl=t=>t*180/Math.PI,kE=t=>{const e=cl(Math.atan2(t[1],t[0]));return CE(e)},LK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:kE,rotateZ:kE,skewX:t=>cl(Math.atan(t[1])),skewY:t=>cl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},CE=t=>(t=t%360,t<0&&(t+=360),t),xR=kE,vR=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wR=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),IK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vR,scaleY:wR,scale:t=>(vR(t)+wR(t))/2,rotateX:t=>CE(cl(Math.atan2(t[6],t[5]))),rotateY:t=>CE(cl(Math.atan2(-t[2],t[0]))),rotateZ:xR,rotate:xR,skewX:t=>cl(Math.atan(t[4])),skewY:t=>cl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function EE(t){return t.includes("scale")?1:0}function NE(t,e){if(!t||t==="none")return EE(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=IK,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=LK,i=l}if(!i)return EE(e);const s=r[e],o=i[1].split(",").map(BK);return typeof s=="function"?s(o):o[s]}const PK=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return NE(n,e)};function BK(t){return parseFloat(t.trim())}const Ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ju=new Set(Ru),SR=t=>t===Du||t===Ke,zK=new Set(["x","y","z"]),VK=Ru.filter(t=>!zK.has(t));function qK(t){const e=[];return VK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const yl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>NE(e,"x"),y:(t,{transform:e})=>NE(e,"y")};yl.translateX=yl.x;yl.translateY=yl.y;const bl=new Set;let TE=!1,AE=!1,ME=!1;function az(){if(AE){const t=Array.from(bl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=qK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}AE=!1,TE=!1,bl.forEach(t=>t.complete(ME)),bl.clear()}function lz(){bl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(AE=!0)})}function FK(){ME=!0,lz(),az(),ME=!1}class vN{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(bl.add(this),TE||(TE=!0,Gt.read(lz),Gt.resolveKeyframes(az))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}OK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),bl.delete(this)}cancel(){this.state==="scheduled"&&(bl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const HK=t=>t.startsWith("--");function UK(t,e,n){HK(e)?t.style.setProperty(e,n):t.style[e]=n}const $K=aN(()=>window.ScrollTimeline!==void 0),GK={};function WK(t,e){const n=aN(t);return()=>GK[e]??n()}const cz=WK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,kR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jd([0,.65,.55,1]),circOut:Jd([.55,0,1,.45]),backIn:Jd([.31,.01,.66,-.59]),backOut:Jd([.33,1.53,.69,.99])};function uz(t,e){if(t)return typeof t=="function"?cz()?iz(t,e):"ease-out":KB(t)?Jd(t):Array.isArray(t)?t.map(n=>uz(n,e)||kR.easeOut):kR[t]}function KK(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const f={[e]:n};u&&(f.offset=u);const p=uz(l,i);Array.isArray(p)&&(f.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(f,m)}function dz(t){return typeof t=="function"&&"applyToOptions"in t}function YK({type:t,...e}){return dz(t)&&cz()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class XK extends bN{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,oN(typeof e.type!="string");const d=YK(e);this.animation=KK(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=yN(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):UK(n,r,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Mi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mi(e)}get time(){return Mi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ws(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&$K()?(this.animation.timeline=e,_i):n(this)}}const fz={anticipate:UB,backInOut:HB,circInOut:GB};function ZK(t){return t in fz}function JK(t){typeof t.ease=="string"&&ZK(t.ease)&&(t.ease=fz[t.ease])}const CR=10;class QK extends XK{constructor(e){JK(e),oz(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new xN({...o,autoplay:!1}),u=ws(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-CR).value,l.sample(u).value,CR),l.stop()}}const ER=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wa.test(t)||t==="0")&&!t.startsWith("url("));function eY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=ER(i,e),l=ER(s,e);return!o||!l?!1:eY(t)||(n==="spring"||dz(n))&&r}function _E(t){t.duration=0,t.type="keyframes"}const nY=new Set(["opacity","clipPath","filter","transform"]),rY=aN(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iY(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return rY()&&n&&nY.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const sY=40;class oY extends bN{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:f,...p},b=f?.KeyframeResolver||vN;this.keyframeResolver=new b(l,(x,w,S)=>this.onKeyframesResolved(x,w,m,!S),u,d,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:f}=r;this.resolvedAt=Pr.now(),tY(e,s,o,l)||((lo.instantAnimations||!u)&&f?.(yN(e,r,n)),e[0]=e[e.length-1],_E(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>sY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!d&&iY(m)?new QK({...m,element:m.motionValue.owner.current}):new xN(m);b.finished.then(()=>this.notifyFinished()).catch(_i),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),FK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const aY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lY(t){const e=aY.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function hz(t,e,n=1){const[r,i]=lY(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return LB(o)?parseFloat(o):o}return fN(i)?hz(i,e,n+1):i}function wN(t,e){return t?.[e]??t?.default??t}const pz=new Set(["width","height","top","left","right","bottom",...Ru]),cY={test:t=>t==="auto",parse:t=>t},mz=t=>e=>e.test(t),gz=[Du,Ke,Ss,Qo,eK,QW,cY],NR=t=>gz.find(mz(t));function uY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||PB(t):!0}const dY=new Set(["brightness","contrast","saturate","opacity"]);function fY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(hN)||[];if(!r)return t;const i=n.replace(r,"");let s=dY.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const hY=/\b([a-z-]*)\(.*?\)/gu,DE={...wa,getAnimatableNone:t=>{const e=t.match(hY);return e?e.map(fY).join(" "):t}},TR={...Du,transform:Math.round},pY={rotate:Qo,rotateX:Qo,rotateY:Qo,rotateZ:Qo,scale:tm,scaleX:tm,scaleY:tm,scaleZ:tm,skew:Qo,skewX:Qo,skewY:Qo,distance:Ke,translateX:Ke,translateY:Ke,translateZ:Ke,x:Ke,y:Ke,z:Ke,perspective:Ke,transformPerspective:Ke,opacity:jf,originX:pR,originY:pR,originZ:Ke},SN={borderWidth:Ke,borderTopWidth:Ke,borderRightWidth:Ke,borderBottomWidth:Ke,borderLeftWidth:Ke,borderRadius:Ke,radius:Ke,borderTopLeftRadius:Ke,borderTopRightRadius:Ke,borderBottomRightRadius:Ke,borderBottomLeftRadius:Ke,width:Ke,maxWidth:Ke,height:Ke,maxHeight:Ke,top:Ke,right:Ke,bottom:Ke,left:Ke,padding:Ke,paddingTop:Ke,paddingRight:Ke,paddingBottom:Ke,paddingLeft:Ke,margin:Ke,marginTop:Ke,marginRight:Ke,marginBottom:Ke,marginLeft:Ke,backgroundPositionX:Ke,backgroundPositionY:Ke,...pY,zIndex:TR,fillOpacity:jf,strokeOpacity:jf,numOctaves:TR},mY={...SN,color:Cn,backgroundColor:Cn,outlineColor:Cn,fill:Cn,stroke:Cn,borderColor:Cn,borderTopColor:Cn,borderRightColor:Cn,borderBottomColor:Cn,borderLeftColor:Cn,filter:DE,WebkitFilter:DE},yz=t=>mY[t];function bz(t,e){let n=yz(t);return n!==DE&&(n=wa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gY=new Set(["auto","none","0"]);function yY(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!gY.has(s)&&Of(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=bz(n,i)}class bY extends vN{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),fN(d))){const f=hz(d,n.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!pz.has(r)||e.length!==2)return;const[i,s]=e,o=NR(i),l=NR(s);if(o!==l)if(SR(o)&&SR(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else yl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||uY(e[i]))&&r.push(i);r.length&&yY(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=yl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function xY(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const xz=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function vz(t){return IB(t)&&"offsetHeight"in t}const AR=30,vY=t=>!isNaN(parseFloat(t));class wY{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Pr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=vY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lN);const r=this.events[e].add(n);return e==="change"?()=>{r(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>AR)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,AR);return BB(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cu(t,e){return new wY(t,e)}const{schedule:kN}=YB(queueMicrotask,!1),Ui={x:!1,y:!1};function wz(){return Ui.x||Ui.y}function SY(t){return t==="x"||t==="y"?Ui[t]?null:(Ui[t]=!0,()=>{Ui[t]=!1}):Ui.x||Ui.y?null:(Ui.x=Ui.y=!0,()=>{Ui.x=Ui.y=!1})}function Sz(t,e){const n=xY(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function MR(t){return!(t.pointerType==="touch"||wz())}function kY(t,e,n={}){const[r,i,s]=Sz(t,n),o=l=>{if(!MR(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const f=p=>{MR(p)&&(d(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const kz=(t,e)=>e?t===e?!0:kz(t,e.parentElement):!1,CN=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,CY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EY(t){return CY.has(t.tagName)||t.tabIndex!==-1}const Rm=new WeakSet;function _R(t){return e=>{e.key==="Enter"&&t(e)}}function Bx(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const NY=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=_R(()=>{if(Rm.has(n))return;Bx(n,"down");const i=_R(()=>{Bx(n,"up")}),s=()=>Bx(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function DR(t){return CN(t)&&!wz()}function TY(t,e,n={}){const[r,i,s]=Sz(t,n),o=l=>{const u=l.currentTarget;if(!DR(l))return;Rm.add(u);const d=e(u,l),f=(b,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Rm.has(u)&&Rm.delete(u),DR(b)&&typeof d=="function"&&d(b,{success:x})},p=b=>{f(b,u===window||u===document||n.useGlobalTarget||kz(u,b.target))},m=b=>{f(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),vz(l)&&(l.addEventListener("focus",d=>NY(d,i)),!EY(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function Cz(t){return IB(t)&&"ownerSVGElement"in t}function AY(t){return Cz(t)&&t.tagName==="svg"}const mr=t=>!!(t&&t.getVelocity),MY=[...gz,Cn,wa],_Y=t=>MY.find(mz(t)),EN=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function RR(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function DY(...t){return e=>{let n=!1;const r=t.map(i=>{const s=RR(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():RR(t[i],null)}}}}function RY(...t){return M.useCallback(DY(...t),t)}class jY extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=vz(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OY({children:t,isPresent:e,anchorX:n,root:r}){const i=M.useId(),s=M.useRef(null),o=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=M.useContext(EN),u=RY(s,t?.ref);return M.useInsertionEffect(()=>{const{width:d,height:f,top:p,left:m,right:b}=o.current;if(e||!s.current||!d||!f)return;const x=n==="left"?`left: ${m}`:`right: ${b}`;s.current.dataset.motionPopId=i;const w=document.createElement("style");l&&(w.nonce=l);const S=r??document.head;return S.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(w)&&S.removeChild(w)}},[e]),g.jsx(jY,{isPresent:e,childRef:s,sizeRef:o,children:M.cloneElement(t,{ref:u})})}const LY=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=nN(IY),f=M.useId();let p=!0,m=M.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const x of d.values())if(!x)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return s&&p&&(m={...m}),M.useMemo(()=>{d.forEach((b,x)=>d.set(x,!1))},[n]),M.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=g.jsx(OY,{isPresent:n,anchorX:l,root:u,children:t})),g.jsx(wy.Provider,{value:m,children:t})};function IY(){return new Map}function Ez(t=!0){const e=M.useContext(wy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=M.useId();M.useEffect(()=>{if(t)return i(s)},[t]);const o=M.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const nm=t=>t.key||"";function jR(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const uu=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,f]=Ez(o),p=M.useMemo(()=>jR(t),[t]),m=o&&!d?[]:p.map(nm),b=M.useRef(!0),x=M.useRef(p),w=nN(()=>new Map),[S,C]=M.useState(p),[T,E]=M.useState(p);OB(()=>{b.current=!1,x.current=p;for(let _=0;_<T.length;_++){const O=nm(T[_]);m.includes(O)?w.delete(O):w.get(O)!==!0&&w.set(O,!1)}},[T,m.length,m.join("-")]);const N=[];if(p!==S){let _=[...p];for(let O=0;O<T.length;O++){const R=T[O],L=nm(R);m.includes(L)||(_.splice(O,0,R),N.push(R))}return s==="wait"&&N.length&&(_=N),E(jR(_)),C(p),null}const{forceRender:A}=M.useContext(tN);return g.jsx(g.Fragment,{children:T.map(_=>{const O=nm(_),R=o&&!d?!1:p===T||m.includes(O),L=()=>{if(w.has(O))w.set(O,!0);else return;let I=!0;w.forEach(F=>{F||(I=!1)}),I&&(A?.(),E(x.current),o&&f?.(),r&&r())};return g.jsx(LY,{isPresent:R,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:L,anchorX:l,children:_},O)})})},Nz=M.createContext({strict:!1}),OR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},du={};for(const t in OR)du[t]={isEnabled:e=>OR[t].some(n=>!!e[n])};function PY(t){for(const e in t)du[e]={...du[e],...t[e]}}const BY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ng(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||BY.has(t)}let Tz=t=>!ng(t);function zY(t){typeof t=="function"&&(Tz=e=>e.startsWith("on")?!ng(e):t(e))}try{zY(require("@emotion/is-prop-valid").default)}catch{}function VY(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(Tz(i)||n===!0&&ng(i)||!e&&!ng(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Sy=M.createContext({});function ky(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Lf(t){return typeof t=="string"||Array.isArray(t)}const NN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],TN=["initial",...NN];function Cy(t){return ky(t.animate)||TN.some(e=>Lf(t[e]))}function Az(t){return!!(Cy(t)||t.variants)}function qY(t,e){if(Cy(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Lf(n)?n:void 0,animate:Lf(r)?r:void 0}}return t.inherit!==!1?e:{}}function FY(t){const{initial:e,animate:n}=qY(t,M.useContext(Sy));return M.useMemo(()=>({initial:e,animate:n}),[LR(e),LR(n)])}function LR(t){return Array.isArray(t)?t.join(" "):t}const If={};function HY(t){for(const e in t)If[e]=t[e],dN(e)&&(If[e].isCSSVariable=!0)}function Mz(t,{layout:e,layoutId:n}){return ju.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!If[t]||t==="opacity")}const UY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$Y=Ru.length;function GY(t,e,n){let r="",i=!0;for(let s=0;s<$Y;s++){const o=Ru[s],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=xz(l,SN[o]);if(!u){i=!1;const f=UY[o]||o;r+=`${f}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function AN(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(ju.has(u)){o=!0;continue}else if(dN(u)){i[u]=d;continue}else{const f=xz(d,SN[u]);u.startsWith("origin")?(l=!0,s[u]=f):r[u]=f}}if(e.transform||(o||n?r.transform=GY(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${d} ${f}`}}const MN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _z(t,e,n){for(const r in e)!mr(e[r])&&!Mz(r,n)&&(t[r]=e[r])}function WY({transformTemplate:t},e){return M.useMemo(()=>{const n=MN();return AN(n,e,t),Object.assign({},n.vars,n.style)},[e])}function KY(t,e){const n=t.style||{},r={};return _z(r,n,t),Object.assign(r,WY(t,e)),r}function YY(t,e){const n={},r=KY(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const XY={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZY={offset:"strokeDashoffset",array:"strokeDasharray"};function JY(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?XY:ZY;t[s.offset]=Ke.transform(-r);const o=Ke.transform(e),l=Ke.transform(n);t[s.array]=`${o} ${l}`}function Dz(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,f){if(AN(t,l,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&JY(p,i,s,o,!1)}const Rz=()=>({...MN(),attrs:{}}),jz=t=>typeof t=="string"&&t.toLowerCase()==="svg";function QY(t,e,n,r){const i=M.useMemo(()=>{const s=Rz();return Dz(s,e,jz(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};_z(s,t.style,t),i.style={...s,...i.style}}return i}const eX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _N(t){return typeof t!="string"||t.includes("-")?!1:!!(eX.indexOf(t)>-1||/[A-Z]/u.test(t))}function tX(t,e,n,{latestValues:r},i,s=!1){const l=(_N(t)?QY:YY)(e,r,i,t),u=VY(e,typeof t=="string",s),d=t!==M.Fragment?{...u,...l,ref:n}:{},{children:f}=e,p=M.useMemo(()=>mr(f)?f.get():f,[f]);return M.createElement(t,{...d,children:p})}function IR(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function DN(t,e,n,r){if(typeof e=="function"){const[i,s]=IR(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=IR(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function jm(t){return mr(t)?t.get():t}function nX({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:rX(n,r,i,t),renderState:e()}}function rX(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=jm(s[m]);let{initial:o,animate:l}=t;const u=Cy(t),d=Az(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const p=f?l:o;if(p&&typeof p!="boolean"&&!ky(p)){const m=Array.isArray(p)?p:[p];for(let b=0;b<m.length;b++){const x=DN(t,m[b]);if(x){const{transitionEnd:w,transition:S,...C}=x;for(const T in C){let E=C[T];if(Array.isArray(E)){const N=f?E.length-1:0;E=E[N]}E!==null&&(i[T]=E)}for(const T in w)i[T]=w[T]}}}return i}const Oz=t=>(e,n)=>{const r=M.useContext(Sy),i=M.useContext(wy),s=()=>nX(t,e,r,i);return n?s():nN(s)};function RN(t,e,n){const{style:r}=t,i={};for(const s in r)(mr(r[s])||e.style&&mr(e.style[s])||Mz(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const iX=Oz({scrapeMotionValuesFromProps:RN,createRenderState:MN});function Lz(t,e,n){const r=RN(t,e,n);for(const i in t)if(mr(t[i])||mr(e[i])){const s=Ru.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const sX=Oz({scrapeMotionValuesFromProps:Lz,createRenderState:Rz}),oX=Symbol.for("motionComponentSymbol");function Kc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function aX(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Kc(n)&&(n.current=r))},[e])}const jN=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lX="framerAppearId",Iz="data-"+jN(lX),Pz=M.createContext({});function cX(t,e,n,r,i){const{visualElement:s}=M.useContext(Sy),o=M.useContext(Nz),l=M.useContext(wy),u=M.useContext(EN).reducedMotion,d=M.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,p=M.useContext(Pz);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&uX(d.current,n,i,p);const m=M.useRef(!1);M.useInsertionEffect(()=>{f&&m.current&&f.update(n,l)});const b=n[Iz],x=M.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return OB(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),x.current&&f.animationState&&f.animationState.animateChanges())}),M.useEffect(()=>{f&&(!x.current&&f.animationState&&f.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),x.current=!1),f.enteringChildren=void 0)}),f}function uX(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Bz(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Kc(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:d})}function Bz(t){if(t)return t.options.allowProjection!==!1?t.projection:Bz(t.parent)}function zx(t,{forwardMotionProps:e=!1}={},n,r){n&&PY(n);const i=_N(t)?sX:iX;function s(l,u){let d;const f={...M.useContext(EN),...l,layoutId:dX(l)},{isStatic:p}=f,m=FY(l),b=i(l,p);if(!p&&rN){fX();const x=hX(f);d=x.MeasureLayout,m.visualElement=cX(t,b,f,r,x.ProjectionNode)}return g.jsxs(Sy.Provider,{value:m,children:[d&&m.visualElement?g.jsx(d,{visualElement:m.visualElement,...f}):null,tX(t,l,aX(b,m.visualElement,u),b,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=M.forwardRef(s);return o[oX]=t,o}function dX({layoutId:t}){const e=M.useContext(tN).id;return e&&t!==void 0?e+"-"+t:t}function fX(t,e){M.useContext(Nz).strict}function hX(t){const{drag:e,layout:n}=du;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function pX(t,e){if(typeof Proxy>"u")return zx;const n=new Map,r=(s,o)=>zx(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,zx(o,void 0,t,e)),n.get(o))})}function zz({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function mX({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gX(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Vx(t){return t===void 0||t===1}function RE({scale:t,scaleX:e,scaleY:n}){return!Vx(t)||!Vx(e)||!Vx(n)}function il(t){return RE(t)||Vz(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Vz(t){return PR(t.x)||PR(t.y)}function PR(t){return t&&t!=="0%"}function rg(t,e,n){const r=t-n,i=e*r;return n+i}function BR(t,e,n,r,i){return i!==void 0&&(t=rg(t,i,r)),rg(t,n,r)+e}function jE(t,e=0,n=1,r,i){t.min=BR(t.min,e,n,r,i),t.max=BR(t.max,e,n,r,i)}function qz(t,{x:e,y:n}){jE(t.x,e.translate,e.scale,e.originPoint),jE(t.y,n.translate,n.scale,n.originPoint)}const zR=.999999999999,VR=1.0000000000001;function yX(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xc(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,qz(t,o)),r&&il(s.latestValues)&&Xc(t,s.latestValues))}e.x<VR&&e.x>zR&&(e.x=1),e.y<VR&&e.y>zR&&(e.y=1)}function Yc(t,e){t.min=t.min+e,t.max=t.max+e}function qR(t,e,n,r,i=.5){const s=tn(t.min,t.max,i);jE(t,e,n,s,r)}function Xc(t,e){qR(t.x,e.x,e.scaleX,e.scale,e.originX),qR(t.y,e.y,e.scaleY,e.scale,e.originY)}function Fz(t,e){return zz(gX(t.getBoundingClientRect(),e))}function bX(t,e,n){const r=Fz(t,n),{scroll:i}=e;return i&&(Yc(r.x,i.offset.x),Yc(r.y,i.offset.y)),r}const FR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zc=()=>({x:FR(),y:FR()}),HR=()=>({min:0,max:0}),hn=()=>({x:HR(),y:HR()}),OE={current:null},Hz={current:!1};function xX(){if(Hz.current=!0,!!rN)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>OE.current=t.matches;t.addEventListener("change",e),e()}else OE.current=!1}const vX=new WeakMap;function wX(t,e,n){for(const r in e){const i=e[r],s=n[r];if(mr(i))t.addValue(r,i);else if(mr(s))t.addValue(r,cu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,cu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const UR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class SX{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vN,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Pr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Gt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Cy(n),this.isVariantNode=Az(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const b=p[m];u[m]!==void 0&&mr(b)&&b.set(u[m])}}mount(e){this.current=e,vX.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Hz.current||xX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:OE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),va(this.notifyUpdate),va(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ju.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in du){const n=du[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<UR.length;r++){const i=UR[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=wX(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=cu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(LB(r)||PB(r))?r=parseFloat(r):!_Y(r)&&wa.test(n)&&(r=bz(e,n)),this.setBaseTarget(e,mr(r)?r.get():r)),mr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=DN(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lN),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){kN.render(this.render)}}class Uz extends SX{constructor(){super(...arguments),this.KeyframeResolver=bY}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function $z(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function kX(t){return window.getComputedStyle(t)}class CX extends Uz{constructor(){super(...arguments),this.type="html",this.renderInstance=$z}readValueFromInstance(e,n){if(ju.has(n))return this.projection?.isProjecting?EE(n):PK(e,n);{const r=kX(e),i=(dN(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Fz(e,n)}build(e,n,r){AN(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return RN(e,n,r)}}const Gz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EX(t,e,n,r){$z(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Gz.has(i)?i:jN(i),e.attrs[i])}class NX extends Uz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ju.has(n)){const r=yz(n);return r&&r.default||0}return n=Gz.has(n)?n:jN(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Lz(e,n,r)}build(e,n,r){Dz(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){EX(e,n,r,i)}mount(e){this.isSVGTag=jz(e.tagName),super.mount(e)}}const TX=(t,e)=>_N(t)?new NX(e):new CX(e,{allowProjection:t!==M.Fragment});function tu(t,e,n){const r=t.getProps();return DN(r,e,n!==void 0?n:r.custom,t)}const LE=t=>Array.isArray(t);function AX(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,cu(n))}function MX(t){return LE(t)?t[t.length-1]||0:t}function _X(t,e){const n=tu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=MX(s[o]);AX(t,o,l)}}function DX(t){return!!(mr(t)&&t.add)}function IE(t,e){const n=t.getValue("willChange");if(DX(n))return n.add(e);if(!n&&lo.WillChange){const r=new lo.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Wz(t){return t.props[Iz]}const RX=t=>t!==null;function jX(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(RX),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const OX={type:"spring",stiffness:500,damping:25,restSpeed:10},LX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IX={type:"keyframes",duration:.8},PX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BX=(t,{keyframes:e})=>e.length>2?IX:ju.has(t)?t.startsWith("scale")?LX(e[1]):OX:PX;function zX({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const ON=(t,e,n,r={},i,s)=>o=>{const l=wN(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ws(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};zX(l)||Object.assign(f,BX(t,f)),f.duration&&(f.duration=ws(f.duration)),f.repeatDelay&&(f.repeatDelay=ws(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(_E(f),f.delay===0&&(p=!0)),(lo.instantAnimations||lo.skipAnimations)&&(p=!0,_E(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const m=jX(f.keyframes,l);if(m!==void 0){Gt.update(()=>{f.onUpdate(m),f.onComplete()});return}}return l.isSync?new xN(f):new oY(f)};function VX({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Kz(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,t.latestValues[f]??null),m=l[f];if(m===void 0||d&&VX(d,f))continue;const b={delay:n,...wN(s||{},f)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===x&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=Wz(t);if(C){const T=window.MotionHandoffAnimation(C,f,Gt);T!==null&&(b.startTime=T,w=!0)}}IE(t,f),p.start(ON(f,p,m,t.shouldReduceMotion&&pz.has(f)?{type:!1}:b,t,w));const S=p.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{Gt.update(()=>{o&&_X(t,o)})}),u}function Yz(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function PE(t,e,n={}){const r=tu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Kz(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=i;return qX(t,e,u,d,f,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function qX(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),l.push(PE(u,e,{...o,delay:n+(typeof r=="function"?0:r)+Yz(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function FX(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>PE(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=PE(t,e,n);else{const i=typeof e=="function"?tu(t,e,n.custom):e;r=Promise.all(Kz(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Xz(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const HX=TN.length;function Zz(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Zz(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<HX;n++){const r=TN[n],i=t.props[r];(Lf(i)||i===!1)&&(e[r]=i)}return e}const UX=[...NN].reverse(),$X=NN.length;function GX(t){return e=>Promise.all(e.map(({animation:n,options:r})=>FX(t,n,r)))}function WX(t){let e=GX(t),n=$R(),r=!0;const i=u=>(d,f)=>{const p=tu(t,f,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:b,...x}=p;d={...d,...x,...b}}return d};function s(u){e=u(t)}function o(u){const{props:d}=t,f=Zz(t.parent)||{},p=[],m=new Set;let b={},x=1/0;for(let S=0;S<$X;S++){const C=UX[S],T=n[C],E=d[C]!==void 0?d[C]:f[C],N=Lf(E),A=C===u?T.isActive:null;A===!1&&(x=S);let _=E===f[C]&&E!==d[C]&&N;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...b},!T.isActive&&A===null||!E&&!T.prevProp||ky(E)||typeof E=="boolean")continue;const O=KX(T.prevProp,E);let R=O||C===u&&T.isActive&&!_&&N||S>x&&N,L=!1;const I=Array.isArray(E)?E:[E];let F=I.reduce(i(C),{});A===!1&&(F={});const{prevResolvedValues:q={}}=T,U={...q,...F},P=V=>{R=!0,m.has(V)&&(L=!0,m.delete(V)),T.needsAnimating[V]=!0;const G=t.getValue(V);G&&(G.liveStyle=!1)};for(const V in U){const G=F[V],te=q[V];if(b.hasOwnProperty(V))continue;let z=!1;LE(G)&&LE(te)?z=!Xz(G,te):z=G!==te,z?G!=null?P(V):m.add(V):G!==void 0&&m.has(V)?P(V):T.protectedKeys[V]=!0}T.prevProp=E,T.prevResolvedValues=F,T.isActive&&(b={...b,...F}),r&&t.blockInitialAnimation&&(R=!1);const H=_&&O;R&&(!H||L)&&p.push(...I.map(V=>{const G={type:C};if(typeof V=="string"&&r&&!H&&t.manuallyAnimateOnMount&&t.parent){const{parent:te}=t,z=tu(te,V);if(te.enteringChildren&&z){const{delayChildren:W}=z.transition||{};G.delay=Yz(te.enteringChildren,t,W)}}return{animation:V,options:G}}))}if(m.size){const S={};if(typeof d.initial!="boolean"){const C=tu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(S.transition=C.transition)}m.forEach(C=>{const T=t.getBaseTarget(C),E=t.getValue(C);E&&(E.liveStyle=!0),S[C]=T??null}),p.push({animation:S})}let w=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const f=o(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=$R(),r=!0}}}function KX(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Xz(e,t):!1}function tl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $R(){return{animate:tl(!0),whileInView:tl(),whileHover:tl(),whileTap:tl(),whileDrag:tl(),whileFocus:tl(),exit:tl()}}class Aa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class YX extends Aa{constructor(e){super(e),e.animationState||(e.animationState=WX(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();ky(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let XX=0;class ZX extends Aa{constructor(){super(...arguments),this.id=XX++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const JX={animation:{Feature:YX},exit:{Feature:ZX}};function Pf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function kh(t){return{point:{x:t.pageX,y:t.pageY}}}const QX=t=>e=>CN(e)&&t(e,kh(e));function df(t,e,n,r){return Pf(t,e,QX(n),r)}const Jz=1e-4,eZ=1-Jz,tZ=1+Jz,Qz=.01,nZ=0-Qz,rZ=0+Qz;function Cr(t){return t.max-t.min}function iZ(t,e,n){return Math.abs(t-e)<=n}function GR(t,e,n,r=.5){t.origin=r,t.originPoint=tn(e.min,e.max,t.origin),t.scale=Cr(n)/Cr(e),t.translate=tn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=eZ&&t.scale<=tZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=nZ&&t.translate<=rZ||isNaN(t.translate))&&(t.translate=0)}function ff(t,e,n,r){GR(t.x,e.x,n.x,r?r.originX:void 0),GR(t.y,e.y,n.y,r?r.originY:void 0)}function WR(t,e,n){t.min=n.min+e.min,t.max=t.min+Cr(e)}function sZ(t,e,n){WR(t.x,e.x,n.x),WR(t.y,e.y,n.y)}function KR(t,e,n){t.min=e.min-n.min,t.max=t.min+Cr(e)}function hf(t,e,n){KR(t.x,e.x,n.x),KR(t.y,e.y,n.y)}function ki(t){return[t("x"),t("y")]}const e8=({current:t})=>t?t.ownerDocument.defaultView:null,YR=(t,e)=>Math.abs(t-e);function oZ(t,e){const n=YR(t.x,e.x),r=YR(t.y,e.y);return Math.sqrt(n**2+r**2)}class t8{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Fx(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=oZ(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:w}=m,{timestamp:S}=tr;this.history.push({...w,timestamp:S});const{onStart:C,onMove:T}=this.handlers;b||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=qx(b,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Fx(m.type==="pointercancel"?this.lastMoveEventInfo:qx(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,C),w&&w(m,C)},!CN(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=kh(e),u=qx(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=tr;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,Fx(u,this.history)),this.removeListeners=vh(df(this.contextWindow,"pointermove",this.handlePointerMove),df(this.contextWindow,"pointerup",this.handlePointerUp),df(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),va(this.updatePoint)}}function qx(t,e){return e?{point:e(t.point)}:t}function XR(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fx({point:t},e){return{point:t,delta:XR(t,n8(e)),offset:XR(t,aZ(e)),velocity:lZ(e,.1)}}function aZ(t){return t[0]}function n8(t){return t[t.length-1]}function lZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=n8(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ws(e)));)n--;if(!r)return{x:0,y:0};const s=Mi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function cZ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?tn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?tn(n,t,r.max):Math.min(t,n)),t}function ZR(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uZ(t,{top:e,left:n,bottom:r,right:i}){return{x:ZR(t.x,n,i),y:ZR(t.y,e,r)}}function JR(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function dZ(t,e){return{x:JR(t.x,e.x),y:JR(t.y,e.y)}}function fZ(t,e){let n=.5;const r=Cr(t),i=Cr(e);return i>r?n=Rf(e.min,e.max-r,t.min):r>i&&(n=Rf(t.min,t.max-i,e.min)),ao(0,1,n)}function hZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const BE=.35;function pZ(t=BE){return t===!1?t=0:t===!0&&(t=BE),{x:QR(t,"left","right"),y:QR(t,"top","bottom")}}function QR(t,e,n){return{min:ej(t,e),max:ej(t,n)}}function ej(t,e){return typeof t=="number"?t:t[e]||0}const mZ=new WeakMap;class gZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(kh(p).point)},o=(p,m)=>{const{drag:b,dragPropagation:x,onDragStart:w}=this.getProps();if(b&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=SY(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ki(C=>{let T=this.getAxisMotionValue(C).get()||0;if(Ss.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[C];N&&(T=Cr(N)*(parseFloat(T)/100))}}this.originPoint[C]=T}),w&&Gt.postRender(()=>w(p,m)),IE(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:x,onDirectionLock:w,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=m;if(x&&this.currentDirection===null){this.currentDirection=yZ(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),S&&S(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ki(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new t8(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:e8(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Gt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!rm(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=cZ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Kc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=uZ(r.layoutBox,e):this.constraints=!1,this.elastic=pZ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ki(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=hZ(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Kc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=bX(r,i.root,this.visualElement.getTransformPagePoint());let o=dZ(i.layout.layoutBox,s);if(n){const l=n(mX(o));this.hasMutatedConstraints=!!l,l&&(o=zz(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=ki(f=>{if(!rm(f,n,this.currentDirection))return;let p=u&&u[f]||{};o&&(p={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,x={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,x)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return IE(this.visualElement,e),r.start(ON(e,r,0,n,this.visualElement,!1))}stopAnimation(){ki(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ki(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ki(n=>{const{drag:r}=this.getProps();if(!rm(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-tn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Kc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ki(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=fZ({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ki(o=>{if(!rm(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(tn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;mZ.set(this.visualElement,this);const e=this.visualElement.current,n=df(e,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Kc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gt.read(r);const o=Pf(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ki(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=BE,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function rm(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function yZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class bZ extends Aa{constructor(e){super(e),this.removeGroupControls=_i,this.removeListeners=_i,this.controls=new gZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_i}unmount(){this.removeGroupControls(),this.removeListeners()}}const tj=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class xZ extends Aa{constructor(){super(...arguments),this.removePointerDownListener=_i}onPointerDown(e){this.session=new t8(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e8(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:tj(e),onStart:tj(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Gt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=df(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Om={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ke.test(t))t=parseFloat(t);else return t;const n=nj(t,e.target.x),r=nj(t,e.target.y);return`${n}% ${r}%`}},vZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wa.parse(t);if(i.length>5)return r;const s=wa.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const d=tn(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let Hx=!1;class wZ extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;HY(SZ),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Hx&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Om.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Hx=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Gt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),kN.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Hx=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function r8(t){const[e,n]=Ez(),r=M.useContext(tN);return g.jsx(wZ,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(Pz),isPresent:e,safeToRemove:n})}const SZ={borderRadius:{...qd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qd,borderTopRightRadius:qd,borderBottomLeftRadius:qd,borderBottomRightRadius:qd,boxShadow:vZ};function kZ(t,e,n){const r=mr(t)?t:cu(t);return r.start(ON("",r,e,n)),r.animation}const CZ=(t,e)=>t.depth-e.depth;class EZ{constructor(){this.children=[],this.isDirty=!1}add(e){iN(this.children,e),this.isDirty=!0}remove(e){sN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(CZ),this.isDirty=!1,this.children.forEach(e)}}function NZ(t,e){const n=Pr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(va(r),t(s-e))};return Gt.setup(r,!0),()=>va(r)}const i8=["TopLeft","TopRight","BottomLeft","BottomRight"],TZ=i8.length,rj=t=>typeof t=="string"?parseFloat(t):t,ij=t=>typeof t=="number"||Ke.test(t);function AZ(t,e,n,r,i,s){i?(t.opacity=tn(0,n.opacity??1,MZ(r)),t.opacityExit=tn(e.opacity??1,0,_Z(r))):s&&(t.opacity=tn(e.opacity??1,n.opacity??1,r));for(let o=0;o<TZ;o++){const l=`border${i8[o]}Radius`;let u=sj(e,l),d=sj(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||ij(u)===ij(d)?(t[l]=Math.max(tn(rj(u),rj(d),r),0),(Ss.test(d)||Ss.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=tn(e.rotate||0,n.rotate||0,r))}function sj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const MZ=s8(0,.5,$B),_Z=s8(.5,.95,_i);function s8(t,e,n){return r=>r<t?0:r>e?1:n(Rf(t,e,r))}function oj(t,e){t.min=e.min,t.max=e.max}function wi(t,e){oj(t.x,e.x),oj(t.y,e.y)}function aj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lj(t,e,n,r,i){return t-=e,t=rg(t,1/n,r),i!==void 0&&(t=rg(t,1/i,r)),t}function DZ(t,e=0,n=1,r=.5,i,s=t,o=t){if(Ss.test(e)&&(e=parseFloat(e),e=tn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=tn(s.min,s.max,r);t===s&&(l-=e),t.min=lj(t.min,e,n,l,i),t.max=lj(t.max,e,n,l,i)}function cj(t,e,[n,r,i],s,o){DZ(t,e[n],e[r],e[i],e.scale,s,o)}const RZ=["x","scaleX","originX"],jZ=["y","scaleY","originY"];function uj(t,e,n,r){cj(t.x,e,RZ,n?n.x:void 0,r?r.x:void 0),cj(t.y,e,jZ,n?n.y:void 0,r?r.y:void 0)}function dj(t){return t.translate===0&&t.scale===1}function o8(t){return dj(t.x)&&dj(t.y)}function fj(t,e){return t.min===e.min&&t.max===e.max}function OZ(t,e){return fj(t.x,e.x)&&fj(t.y,e.y)}function hj(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function a8(t,e){return hj(t.x,e.x)&&hj(t.y,e.y)}function pj(t){return Cr(t.x)/Cr(t.y)}function mj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class LZ{constructor(){this.members=[]}add(e){iN(this.members,e),e.scheduleRender()}remove(e){if(sN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IZ(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:p,rotateY:m,skewX:b,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const Ux=["","X","Y","Z"],PZ=1e3;let BZ=0;function $x(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function l8(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Wz(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&l8(r)}function c8({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e?.()){this.id=BZ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(qZ),this.nodes.forEach($Z),this.nodes.forEach(GZ),this.nodes.forEach(FZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new EZ)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lN),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Cz(o)&&!AY(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),t){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;Gt.read(()=>{p=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,f&&f(),f=NZ(m,250),Om.hasAnimatedSinceResize&&(Om.hasAnimatedSinceResize=!1,this.nodes.forEach(bj)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||ZZ,{onLayoutAnimationStart:w,onLayoutAnimationComplete:S}=d.getProps(),C=!this.targetLayout||!a8(this.targetLayout,b),T=!p&&m;if(this.options.layoutRoot||this.resumeFrom||T||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...wN(x,"layout"),onPlay:w,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(f,T)}else p||bj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),va(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WZ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&l8(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(yj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(UZ),this.nodes.forEach(zZ),this.nodes.forEach(VZ)):this.nodes.forEach(yj),this.clearAllSnapshots();const l=Pr.now();tr.delta=ao(0,1e3/60,l-tr.timestamp),tr.timestamp=l,tr.isProcessing=!0,jx.update.process(tr),jx.preRender.process(tr),jx.render.process(tr),tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HZ),this.sharedNodes.forEach(KZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Cr(this.snapshot.measuredBox.x)&&!Cr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!o8(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||il(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),JZ(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return hn();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(QZ))){const{scroll:d}=this.root;d&&(Yc(l.x,d.offset.x),Yc(l.y,d.offset.y))}return l}removeElementScroll(o){const l=hn();if(wi(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&wi(l,o),Yc(l.x,f.offset.x),Yc(l.y,f.offset.y))}return l}applyTransform(o,l=!1){const u=hn();wi(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Xc(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),il(f.latestValues)&&Xc(u,f.latestValues)}return il(this.latestValues)&&Xc(u,this.latestValues),u}removeTransform(o){const l=hn();wi(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!il(d.latestValues))continue;RE(d.latestValues)&&d.updateSnapshot();const f=hn(),p=d.measurePageBox();wi(f,p),uj(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return il(this.latestValues)&&uj(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=tr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),hf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),sZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),qz(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),hf(this.relativeTargetOrigin,this.target,m.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||RE(this.parent.latestValues)||Vz(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===tr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;wi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;yX(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=hn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aj(this.prevProjectionDelta.x,this.projectionDelta.x),aj(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!mj(this.projectionDelta.x,this.prevProjectionDelta.x)||!mj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zc(),this.projectionDelta=Zc(),this.projectionDeltaWithTransform=Zc()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},p=Zc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=hn(),b=u?u.source:void 0,x=this.layout?this.layout.source:void 0,w=b!==x,S=this.getStack(),C=!S||S.members.length<=1,T=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(XZ));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const A=N/1e3;xj(p.x,o.x,A),xj(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),YZ(this.relativeTarget,this.relativeTargetOrigin,m,A),E&&OZ(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=hn()),wi(E,this.relativeTarget)),w&&(this.animationValues=f,AZ(f,d,this.latestValues,A,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(va(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Om.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cu(0)),this.currentAnimation=kZ(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:f}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&u8(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||hn();const p=Cr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=Cr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}wi(l,u),Xc(l,f),ff(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new LZ),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&$x("z",o,d,this.animationValues);for(let f=0;f<Ux.length;f++)$x(`rotate${Ux[f]}`,o,d,this.animationValues),$x(`skew${Ux[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=jm(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=jm(l?.pointerEvents)||""),this.hasProjected&&!il(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=IZ(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),o.transform=p;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in If){if(f[x]===void 0)continue;const{correct:w,applyTo:S,isCSSVariable:C}=If[x],T=p==="none"?f[x]:w(f[x],d);if(S){const E=S.length;for(let N=0;N<E;N++)o[S[N]]=T}else C?this.options.visualElement.renderState.vars[x]=T:o[x]=T}this.options.layoutId&&(o.pointerEvents=d===this?jm(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(gj),this.root.sharedNodes.clear()}}}function zZ(t){t.updateLayout()}function VZ(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?ki(f=>{const p=s?e.measuredBox[f]:e.layoutBox[f],m=Cr(p);p.min=n[f].min,p.max=p.min+m}):u8(i,e.layoutBox,n)&&ki(f=>{const p=s?e.measuredBox[f]:e.layoutBox[f],m=Cr(n[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const o=Zc();ff(o,n,e.layoutBox);const l=Zc();s?ff(l,t.applyTransform(r,!0),e.measuredBox):ff(l,n,e.layoutBox);const u=!o8(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const b=hn();hf(b,e.layoutBox,p.layoutBox);const x=hn();hf(x,n,m.layoutBox),a8(b,x)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function qZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function FZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function HZ(t){t.clearSnapshot()}function gj(t){t.clearMeasurements()}function yj(t){t.isLayoutDirty=!1}function UZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function $Z(t){t.resolveTargetDelta()}function GZ(t){t.calcProjection()}function WZ(t){t.resetSkewAndRotation()}function KZ(t){t.removeLeadSnapshot()}function xj(t,e,n){t.translate=tn(e.translate,0,n),t.scale=tn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function vj(t,e,n,r){t.min=tn(e.min,n.min,r),t.max=tn(e.max,n.max,r)}function YZ(t,e,n,r){vj(t.x,e.x,n.x,r),vj(t.y,e.y,n.y,r)}function XZ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const ZZ={duration:.45,ease:[.4,0,.1,1]},wj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Sj=wj("applewebkit/")&&!wj("chrome/")?Math.round:_i;function kj(t){t.min=Sj(t.min),t.max=Sj(t.max)}function JZ(t){kj(t.x),kj(t.y)}function u8(t,e,n){return t==="position"||t==="preserve-aspect"&&!iZ(pj(e),pj(n),.2)}function QZ(t){return t!==t.root&&t.scroll?.wasRoot}const eJ=c8({attachResizeListener:(t,e)=>Pf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gx={current:void 0},d8=c8({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Gx.current){const t=new eJ({});t.mount(window),t.setOptions({layoutScroll:!0}),Gx.current=t}return Gx.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tJ={pan:{Feature:xZ},drag:{Feature:bZ,ProjectionNode:d8,MeasureLayout:r8}};function Cj(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Gt.postRender(()=>s(e,kh(e)))}class nJ extends Aa{mount(){const{current:e}=this.node;e&&(this.unmount=kY(e,(n,r)=>(Cj(this.node,r,"Start"),i=>Cj(this.node,i,"End"))))}unmount(){}}class rJ extends Aa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vh(Pf(this.node.current,"focus",()=>this.onFocus()),Pf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ej(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Gt.postRender(()=>s(e,kh(e)))}class iJ extends Aa{mount(){const{current:e}=this.node;e&&(this.unmount=TY(e,(n,r)=>(Ej(this.node,r,"Start"),(i,{success:s})=>Ej(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zE=new WeakMap,Wx=new WeakMap,sJ=t=>{const e=zE.get(t.target);e&&e(t)},oJ=t=>{t.forEach(sJ)};function aJ({root:t,...e}){const n=t||document;Wx.has(n)||Wx.set(n,{});const r=Wx.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(oJ,{root:t,...e})),r[i]}function lJ(t,e,n){const r=aJ(e);return zE.set(t,n),r.observe(t),()=>{zE.delete(t),r.unobserve(t)}}const cJ={some:0,all:1};class uJ extends Aa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cJ[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=d?f:p;m&&m(u)};return lJ(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dJ(e,n))&&this.startObserver()}unmount(){}}function dJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const fJ={inView:{Feature:uJ},tap:{Feature:iJ},focus:{Feature:rJ},hover:{Feature:nJ}},hJ={layout:{ProjectionNode:d8,MeasureLayout:r8}},pJ={...JX,...fJ,...tJ,...hJ},gt=pX(pJ,TX);function mJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function fu(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function Ey(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function gJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"},child:[]}]})(t)}function VE(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function yJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(t)}function bJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(t)}function xJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(t)}function vJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(t)}function wJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(t)}function SJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(t)}function kJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function CJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(t)}function EJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(t)}function NJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(t)}function TJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(t)}function AJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(t)}function MJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function _J(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function hu(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function DJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(t)}function f8(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(t)}function RJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function jJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function OJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(t)}function LJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 .01c0-.01 0-.01 0 0L0 0v24h24V.01zM0 0h24v24H0V0zm0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4a9.793 9.793 0 0 0-4.49-2.56l3.53 3.53.96-.97zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24A9.684 9.684 0 0 0 5 13v.01L6.99 15a7.042 7.042 0 0 1 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3a4.237 4.237 0 0 0-6 0z"},child:[]}]})(t)}function IJ(t){return ct({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}const Ny=({isOpen:t,onClose:e,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=M.useState("login"),[l,u]=M.useState(""),[d,f]=M.useState(""),[p,m]=M.useState(""),[b,x]=M.useState(""),[w,S]=M.useState(!1),[C,T]=M.useState(!1);M.useEffect(()=>{const _=()=>{const L=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");T(L)};_();const O=window.matchMedia("(prefers-color-scheme: dark)"),R=new MutationObserver(_);return O.addEventListener("change",_),R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{O.removeEventListener("change",_),R.disconnect()}},[]);const E=M.useCallback(async _=>{if(i){S(!0),x("");try{await i(_.credential),e()}catch(O){x(O instanceof Error?O.message:"Google authentication failed")}finally{S(!1)}}},[i,e]);M.useEffect(()=>{if(!t||!i)return;const _=document.createElement("script");return _.src="https://accounts.google.com/gsi/client",_.async=!0,_.defer=!0,document.body.appendChild(_),_.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:C?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(_)&&document.body.removeChild(_)}},[t,s,i,E,C]);const N=async _=>{_.preventDefault(),x(""),S(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),e(),u(""),f(""),m("")}catch(O){x(O instanceof Error?O.message:"Authentication failed")}finally{S(!1)}},A=()=>{o(_=>_==="login"?"signup":"login"),x("")};return t?g.jsx(uu,{children:t&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:_=>_.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),g.jsx("button",{type:"button",onClick:e,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:g.jsx(hu,{className:"h-5 w-5"})})]}),g.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),b&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:b}),i&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-theme/20"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),g.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s==="signup"&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),g.jsx("input",{id:"name",type:"text",value:p,onChange:_=>m(_.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),g.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),g.jsx("input",{id:"password",type:"password",value:d,onChange:_=>f(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&g.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),g.jsx("button",{type:"submit",disabled:w,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:w?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",g.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),g.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:g.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},Nj=()=>{Hl();const t=gh(),[e,n]=M.useState(!1),[r,i]=M.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:f}=xh(),[p,m]=M.useState(!1),[b,x]=M.useState(!1),[w,S]=M.useState([]),[C,T]=M.useState(!1);M.useEffect(()=>{n(!0)},[]),M.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),M.useEffect(()=>{(async()=>{if(!o){S([]);return}T(!0);try{const L=await Jt.getUserDiagrams();S(L)}catch(L){console.error("Failed to load diagrams:",L)}finally{T(!1)}})()},[o]);const E=R=>{t(`/playground/free?diagramId=${R}`)},N=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create system designs, ER diagrams, and UML diagrams from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"75+ Components",description:"System design, ER diagrams, UML diagrams, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"75+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],O=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 78+ components, AI assessment, UML & ER diagrams, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design, ER diagram, entity relationship diagram, UML diagram, class diagram, database design",url:"https://satya00089.github.io/diagrammatic/"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[g.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[g.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),g.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),g.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),g.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),g.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),g.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),g.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),g.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),g.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),g.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),g.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),g.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),g.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),g.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),g.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),g.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),g.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),g.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),g.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),g.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{type:"button",onClick:()=>t("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&g.jsx("button",{type:"button",onClick:()=>t("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:o?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>x(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?g.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),g.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),g.jsx("button",{type:"button",onClick:()=>{f(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):g.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),g.jsx("section",{className:"relative pt-16 pb-20",children:g.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[g.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[g.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),g.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),g.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),g.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),g.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),g.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),g.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),g.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:g.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[g.jsx("div",{className:"inline-block mb-6",children:g.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 75+ Components, UML & ER Diagrams, AI Assessment"})}),g.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[g.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),g.jsx("br",{}),g.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),g.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design, ER diagrams, and UML  practice, learn, and create architecture diagrams with ease"}),g.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((R,L)=>{const I=()=>L===0?"fade-in-up-delay-100":L===1?"fade-in-up-delay-200":"fade-in-up-delay-300";return g.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${e?"fade-in-up":"opacity-0 translate-y-5"} ${I()}`,children:[g.jsx("div",{className:"text-3xl mb-1",children:R.icon}),g.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),g.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label)})}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[g.jsxs("button",{type:"button",onClick:()=>t("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),g.jsxs("button",{type:"button",onClick:()=>t("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",g.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),g.jsx("p",{className:"mt-6 text-sm text-white/80",children:"Trusted by 1000+ developers  AI-powered feedback  Open source"})]})})]})}),o&&g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),g.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[w.length>0&&g.jsx("button",{type:"button",onClick:()=>t("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),g.jsxs("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),C?g.jsx("div",{className:"flex items-center justify-center py-20",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):w.length===0?g.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),g.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.slice(0,6).map(R=>g.jsxs("div",{onClick:()=>E(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),!R.isOwner&&g.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[g.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),g.jsxs("div",{className:"relative flex items-center gap-1.5",children:[g.jsxs("div",{className:"relative flex-shrink-0",children:[R.owner.pictureUrl?g.jsx("img",{src:R.owner.pictureUrl,alt:R.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:R.owner.name[0]?.toUpperCase()}),g.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),g.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:R.owner.name})]})]})]}),g.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${R.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:R.permission==="edit"?g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),g.jsx("span",{children:R.permission==="edit"?"Can Edit":"View Only"})]})]}),R.description&&g.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),g.jsx("div",{className:"text-3xl ml-2",children:""})]}),g.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),g.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),g.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:N.map((R,L)=>{const I=()=>L===0?"delay-0":L===1?"delay-100":"delay-200";return g.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${I()}`,onClick:()=>t(R.route),onKeyDown:F=>F.key==="Enter"&&t(R.route),role:"button",tabIndex:0,children:[g.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),g.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),g.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,g.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title)})})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),g.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,L)=>{const I=()=>["delay-0","delay-[50ms]","delay-[100ms]","delay-[150ms]","delay-[200ms]","delay-[250ms]"][L]||"delay-[250ms]";return g.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${I()}`,children:[g.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),g.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),g.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title)})})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),g.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:O.map(R=>g.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[g.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),g.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold text-theme",children:R.author}),g.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`${R.author}-${R.role}`))})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[g.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[g.jsxs("div",{className:"relative inline-block mb-6",children:[g.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),g.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),g.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),g.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[g.jsxs("div",{className:"relative inline-block mb-6",children:[g.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),g.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),g.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),g.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[g.jsxs("div",{className:"relative inline-block mb-6",children:[g.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),g.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),g.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:g.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),g.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),g.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),g.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),g.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),g.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),g.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&g.jsx(Ny,{isOpen:p,onClose:()=>m(!1),onLogin:async(R,L)=>{await l({email:R,password:L})},onSignup:async(R,L,I)=>{await u({email:R,password:L,name:I})},onGoogleLogin:async R=>{await d(R)}})]})]})};function co(t){return Array.isArray?Array.isArray(t):m8(t)==="[object Array]"}function PJ(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function BJ(t){return t==null?"":PJ(t)}function xs(t){return typeof t=="string"}function h8(t){return typeof t=="number"}function zJ(t){return t===!0||t===!1||VJ(t)&&m8(t)=="[object Boolean]"}function p8(t){return typeof t=="object"}function VJ(t){return p8(t)&&t!==null}function si(t){return t!=null}function Kx(t){return!t.trim().length}function m8(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const qJ="Incorrect 'index' type",FJ=t=>`Invalid value for key ${t}`,HJ=t=>`Pattern length exceeds max of ${t}.`,UJ=t=>`Missing ${t} property in key`,$J=t=>`Property 'weight' in key '${t}' must be a positive integer`,Tj=Object.prototype.hasOwnProperty;class GJ{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=g8(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function g8(t){let e=null,n=null,r=null,i=1,s=null;if(xs(t)||co(t))r=t,e=Aj(t),n=qE(t);else{if(!Tj.call(t,"name"))throw new Error(UJ("name"));const o=t.name;if(r=o,Tj.call(t,"weight")&&(i=t.weight,i<=0))throw new Error($J(o));e=Aj(o),n=qE(o),s=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:s}}function Aj(t){return co(t)?t:t.split(".")}function qE(t){return co(t)?t.join("."):t}function WJ(t,e){let n=[],r=!1;const i=(s,o,l)=>{if(si(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!si(d))return;if(l===o.length-1&&(xs(d)||h8(d)||zJ(d)))n.push(BJ(d));else if(co(d)){r=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,xs(e)?e.split("."):e,0),r?n:n[0]}const KJ={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},YJ={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},XJ={location:0,threshold:.6,distance:100},ZJ={useExtendedSearch:!1,getFn:WJ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ye={...YJ,...KJ,...XJ,...ZJ};const JJ=/[^ ]+/g;function QJ(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(JJ).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class LN{constructor({getFn:e=Ye.getFn,fieldNormWeight:n=Ye.fieldNormWeight}={}){this.norm=QJ(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,xs(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();xs(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!si(e)||Kx(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(si(o)){if(co(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:f}=u.pop();if(si(f))if(xs(f)&&!Kx(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else co(f)&&f.forEach((p,m)=>{u.push({nestedArrIndex:m,value:p})})}r.$[s]=l}else if(xs(o)&&!Kx(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function y8(t,e,{getFn:n=Ye.getFn,fieldNormWeight:r=Ye.fieldNormWeight}={}){const i=new LN({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(g8)),i.setSources(e),i.create(),i}function eQ(t,{getFn:e=Ye.getFn,fieldNormWeight:n=Ye.fieldNormWeight}={}){const{keys:r,records:i}=t,s=new LN({getFn:e,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function im(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Ye.distance,ignoreLocation:s=Ye.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function tQ(t=[],e=Ye.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[s-1]&&s-r>=e&&n.push([r,s-1]),n}const ol=32;function nQ(t,e,n,{location:r=Ye.location,distance:i=Ye.distance,threshold:s=Ye.threshold,findAllMatches:o=Ye.findAllMatches,minMatchCharLength:l=Ye.minMatchCharLength,includeMatches:u=Ye.includeMatches,ignoreLocation:d=Ye.ignoreLocation}={}){if(e.length>ol)throw new Error(HJ(ol));const f=e.length,p=t.length,m=Math.max(0,Math.min(r,p));let b=s,x=m;const w=l>1||u,S=w?Array(p):[];let C;for(;(C=t.indexOf(e,x))>-1;){let O=im(e,{currentLocation:C,expectedLocation:m,distance:i,ignoreLocation:d});if(b=Math.min(O,b),x=C+f,w){let R=0;for(;R<f;)S[C+R]=1,R+=1}}x=-1;let T=[],E=1,N=f+p;const A=1<<f-1;for(let O=0;O<f;O+=1){let R=0,L=N;for(;R<L;)im(e,{errors:O,currentLocation:m+L,expectedLocation:m,distance:i,ignoreLocation:d})<=b?R=L:N=L,L=Math.floor((N-R)/2+R);N=L;let I=Math.max(1,m-L+1),F=o?p:Math.min(m+L,p)+f,q=Array(F+2);q[F+1]=(1<<O)-1;for(let P=F;P>=I;P-=1){let H=P-1,j=n[t.charAt(H)];if(w&&(S[H]=+!!j),q[P]=(q[P+1]<<1|1)&j,O&&(q[P]|=(T[P+1]|T[P])<<1|1|T[P+1]),q[P]&A&&(E=im(e,{errors:O,currentLocation:H,expectedLocation:m,distance:i,ignoreLocation:d}),E<=b)){if(b=E,x=H,x<=m)break;I=Math.max(1,2*m-x)}}if(im(e,{errors:O+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:d})>b)break;T=q}const _={isMatch:x>=0,score:Math.max(.001,E)};if(w){const O=tQ(S,l);O.length?u&&(_.indices=O):_.isMatch=!1}return _}function rQ(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const ig=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class b8{constructor(e,{location:n=Ye.location,threshold:r=Ye.threshold,distance:i=Ye.distance,includeMatches:s=Ye.includeMatches,findAllMatches:o=Ye.findAllMatches,minMatchCharLength:l=Ye.minMatchCharLength,isCaseSensitive:u=Ye.isCaseSensitive,ignoreDiacritics:d=Ye.ignoreDiacritics,ignoreLocation:f=Ye.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f},e=u?e:e.toLowerCase(),e=d?ig(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(b,x)=>{this.chunks.push({pattern:b,alphabet:rQ(b),startIndex:x})},m=this.pattern.length;if(m>ol){let b=0;const x=m%ol,w=m-x;for(;b<w;)p(this.pattern.substr(b,ol),b),b+=ol;if(x){const S=m-ol;p(this.pattern.substr(S),S)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?ig(e):e,this.pattern===e){let w={isMatch:!0,score:0};return i&&(w.indices=[[0,e.length-1]]),w}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],m=0,b=!1;this.chunks.forEach(({pattern:w,alphabet:S,startIndex:C})=>{const{isMatch:T,score:E,indices:N}=nQ(e,w,S,{location:s+C,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(b=!0),m+=E,T&&N&&(p=[...p,...N])});let x={isMatch:b,score:b?m/this.chunks.length:1};return b&&i&&(x.indices=p),x}}class Ma{constructor(e){this.pattern=e}static isMultiMatch(e){return Mj(e,this.multiRegex)}static isSingleMatch(e){return Mj(e,this.singleRegex)}search(){}}function Mj(t,e){const n=t.match(e);return n?n[1]:null}class iQ extends Ma{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class sQ extends Ma{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class oQ extends Ma{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class aQ extends Ma{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class lQ extends Ma{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class cQ extends Ma{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class x8 extends Ma{constructor(e,{location:n=Ye.location,threshold:r=Ye.threshold,distance:i=Ye.distance,includeMatches:s=Ye.includeMatches,findAllMatches:o=Ye.findAllMatches,minMatchCharLength:l=Ye.minMatchCharLength,isCaseSensitive:u=Ye.isCaseSensitive,ignoreDiacritics:d=Ye.ignoreDiacritics,ignoreLocation:f=Ye.ignoreLocation}={}){super(e),this._bitapSearch=new b8(e,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class v8 extends Ma{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const FE=[iQ,v8,oQ,aQ,cQ,lQ,sQ,x8],_j=FE.length,uQ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,dQ="|";function fQ(t,e={}){return t.split(dQ).map(n=>{let r=n.trim().split(uQ).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<_j;){const f=FE[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),u=!0)}if(!u)for(d=-1;++d<_j;){const f=FE[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const hQ=new Set([x8.type,v8.type]);class pQ{constructor(e,{isCaseSensitive:n=Ye.isCaseSensitive,ignoreDiacritics:r=Ye.ignoreDiacritics,includeMatches:i=Ye.includeMatches,minMatchCharLength:s=Ye.minMatchCharLength,ignoreLocation:o=Ye.ignoreLocation,findAllMatches:l=Ye.findAllMatches,location:u=Ye.location,threshold:d=Ye.threshold,distance:f=Ye.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=r?ig(e):e,this.pattern=e,this.query=fQ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?ig(e):e;let o=0,l=[],u=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let m=0,b=p.length;m<b;m+=1){const x=p[m],{isMatch:w,indices:S,score:C}=x.search(e);if(w){if(o+=1,u+=C,r){const T=x.constructor.type;hQ.has(T)?l=[...l,...S]:l.push(S)}}else{u=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:u/o};return r&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const HE=[];function mQ(...t){HE.push(...t)}function UE(t,e){for(let n=0,r=HE.length;n<r;n+=1){let i=HE[n];if(i.condition(t,e))return new i(t,e)}return new b8(t,e)}const sg={AND:"$and",OR:"$or"},$E={PATH:"$path",PATTERN:"$val"},GE=t=>!!(t[sg.AND]||t[sg.OR]),gQ=t=>!!t[$E.PATH],yQ=t=>!co(t)&&p8(t)&&!GE(t),Dj=t=>({[sg.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function w8(t,e,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=gQ(i);if(!o&&s.length>1&&!GE(i))return r(Dj(i));if(yQ(i)){const u=o?i[$E.PATH]:s[0],d=o?i[$E.PATTERN]:i[u];if(!xs(d))throw new Error(FJ(u));const f={keyId:qE(u),pattern:d};return n&&(f.searcher=UE(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];co(d)&&d.forEach(f=>{l.children.push(r(f))})}),l};return GE(t)||(t=Dj(t)),r(t)}function bQ(t,{ignoreFieldNorm:e=Ye.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=r})}function xQ(t,e){const n=t.matches;e.matches=[],si(n)&&n.forEach(r=>{if(!si(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function vQ(t,e){e.score=t.score}function wQ(t,e,{includeMatches:n=Ye.includeMatches,includeScore:r=Ye.includeScore}={}){const i=[];return n&&i.push(xQ),r&&i.push(vQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class Ul{constructor(e,n={},r){this.options={...Ye,...n},this.options.useExtendedSearch,this._keyStore=new GJ(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof LN))throw new Error(qJ);this._myIndex=n||y8(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){si(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];e(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=xs(e)?xs(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return bQ(u,{ignoreFieldNorm:l}),s&&u.sort(o),h8(n)&&n>-1&&(u=u.slice(0,n)),wQ(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=UE(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!si(s))return;const{isMatch:u,score:d,indices:f}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=w8(e,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:m}=l,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:m});return b&&b.length?[{idx:d,item:u,matches:b}]:[]}const f=[];for(let p=0,m=l.children.length;p<m;p+=1){const b=l.children[p],x=r(b,u,d);if(x.length)f.push(...x);else if(l.operator===sg.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(si(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:f})=>{s[u].matches.push(...f)}))}}),o}_searchObjectList(e){const n=UE(e,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!si(o))return;let u=[];r.forEach((d,f)=>{u.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:e,value:n,searcher:r}){if(!si(n))return[];let i=[];if(co(n))n.forEach(({v:s,i:o,n:l})=>{if(!si(s))return;const{isMatch:u,score:d,indices:f}=r.searchIn(s);u&&i.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:e,value:s,norm:o,indices:d})}return i}}Ul.version="7.1.0";Ul.createIndex=y8;Ul.parseIndex=eQ;Ul.config=Ye;Ul.parseQuery=w8;mQ(pQ);const SQ=()=>{Hl();const t=gh(),[e,n]=M.useState("All"),[r,i]=M.useState("All"),[s,o]=M.useState(""),[l,u]=M.useState([]),[d,f]=M.useState(!0),[p,m]=M.useState(null),[b,x]=M.useState(!1),[w,S]=M.useState(!1),[C,T]=M.useState(new Set),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:O,logout:R}=xh();M.useEffect(()=>{(async()=>{try{f(!0),m(null);const H=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!H.ok)throw new Error(`Failed to fetch problems: ${H.status} ${H.statusText}`);const j=await H.json();u(j)}catch(P){m(P instanceof Error?P.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",P)}finally{f(!1)}})()},[]),M.useEffect(()=>{(async()=>{if(!N){T(new Set);return}try{const P=await Jt.getAttemptedProblems();T(new Set(P))}catch(P){console.error("Failed to fetch attempted problems:",P)}})()},[N]);const L=M.useMemo(()=>{const U=s?.trim()??"";let P=l;return U.length>0&&(P=new Ul(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(U).map(V=>V.item)),P.filter(j=>{const V=e==="All"||j.difficulty===e,G=r==="All"||j.category===r;return V&&G}).sort((j,V)=>{const G=C.has(j.id)?1:0;return(C.has(V.id)?1:0)-G})},[e,r,s,l,C]),I=["All",...Array.from(new Set(l.map(U=>U.category)))],F=["All","Easy","Medium","Hard","Very Hard"],q=U=>{switch(U){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[N&&g.jsx("button",{type:"button",onClick:()=>t("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),g.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${L.length} problems available`}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:N?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>x(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?g.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),g.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),g.jsx("button",{type:"button",onClick:()=>{R(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):g.jsx("button",{type:"button",onClick:()=>S(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),g.jsx("div",{className:"pt-16 relative z-10",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),g.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),g.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),g.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),g.jsx("div",{className:"text-muted text-sm mb-6",children:p}),g.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),g.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:U=>o(U.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),g.jsx("select",{id:"difficulty-select",value:e,onChange:U=>n(U.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:F.map(U=>g.jsx("option",{value:U,children:U},U))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),g.jsx("select",{id:"category-select",value:r,onChange:U=>i(U.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:I.map(U=>g.jsx("option",{value:U,children:U},U))})]})]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:L.map((U,P)=>g.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${P===0?"delay-0":P===1?"delay-100":P===2?"delay-200":""}`,children:[g.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),g.jsxs("div",{className:"relative p-6",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1 pr-2",children:U.title}),g.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 flex-shrink-0 ${q(U.difficulty)}`,children:U.difficulty})]}),g.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:U.description}),g.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{children:""})," ",U.category]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{children:""})," ",U.estimated_time]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[U.tags.slice(0,3).map(H=>g.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:H},H)),U.tags.length>3&&g.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",U.tags.length-3," more"]})]}),g.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),t(`/playground/${U.id}`)},"aria-label":`Start ${U.title}`,className:`w-full px-6 py-3 font-semibold rounded-xl transition-all duration-300 cursor-pointer group-hover:shadow-xl ${N&&C.has(U.id)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:shadow-lg hover:scale-105":"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white hover:shadow-lg hover:scale-105"}`,children:g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[N&&C.has(U.id)&&g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),N&&C.has(U.id)?"Continue Problem":"Start Problem"," "]})})]})]},U.id))}),L.length===0&&!d&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"text-7xl mb-6",children:""}),g.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),g.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),w&&g.jsx(Ny,{isOpen:w,onClose:()=>S(!1),onLogin:async(U,P)=>{await A({email:U,password:P})},onSignup:async(U,P,H)=>{await _({email:U,password:P,name:H})},onGoogleLogin:async U=>{await O(U)}})]})};var Yx={exports:{}},Xx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rj;function kQ(){if(Rj)return Xx;Rj=1;var t=ph();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(p,m){var b=m(),x=r({inst:{value:b,getSnapshot:m}}),w=x[0].inst,S=x[1];return s(function(){w.value=b,w.getSnapshot=m,u(w)&&S({inst:w})},[p,b,m]),i(function(){return u(w)&&S({inst:w}),p(function(){u(w)&&S({inst:w})})},[p]),o(b),b}function u(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!n(p,b)}catch{return!0}}function d(p,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return Xx.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,Xx}var jj;function S8(){return jj||(jj=1,Yx.exports=kQ()),Yx.exports}var k8=S8();function er(t){this.content=t}er.prototype={constructor:er,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new er(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new er(n)},addToStart:function(t,e){return new er([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new er(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new er(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=er.from(t),t.size?new er(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=er.from(t),t.size?new er(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=er.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};er.from=function(t){if(t instanceof er)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new er(e)};function C8(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=C8(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function E8(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,f=Math.min(o.text.length,l.text.length);for(;d<f&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=E8(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class xe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>e&&r(u,i+l,s||null,o)!==!1&&u.content.size){let f=l+1;u.nodesBetween(Math.max(0,e-f),Math.min(u.content.size,n-f),r,i+f)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(e,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new xe(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>e&&((o<e||u>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new xe(r,i)}cutByIndex(e,n){return e==n?xe.empty:e==0&&n==this.content.length?this:new xe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new xe(i,s)}addToStart(e){return new xe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new xe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return C8(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return E8(this,e,n,r)}findIndex(e){if(e==0)return sm(0,e);if(e==this.size)return sm(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?sm(n+1,s):sm(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return xe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new xe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return xe.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new xe(n||e,r)}static from(e){if(!e)return xe.empty;if(e instanceof xe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new xe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}xe.empty=new xe([],0);const Zx={index:0,offset:0};function sm(t,e){return Zx.index=t,Zx.offset=e,Zx}function og(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!og(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!og(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ot=class WE{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&og(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return WE.none;if(e instanceof WE)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ot.none=[];class ag extends Error{}class Te{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=T8(this.content,e+this.openStart,n);return r&&new Te(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Te(N8(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Te.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Te(xe.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Te(e,r,i)}}Te.empty=new Te(xe.empty,0,0);function N8(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(N8(s.content,e-i-1,n-i-1)))}function T8(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=T8(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function CQ(t,e,n){if(n.openStart>t.depth)throw new ag("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ag("Inconsistent open depths");return A8(t,e,n,0)}function A8(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=A8(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return vl(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=EQ(n,t);return vl(s,_8(t,o,l,e,r))}else return vl(s,lg(t,e,r))}function M8(t,e){if(!e.type.compatibleContent(t.type))throw new ag("Cannot join "+e.type.name+" onto "+t.type.name)}function KE(t,e,n){let r=t.node(n);return M8(r,e.node(n)),r}function xl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function pf(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(xl(t.nodeAfter,r),s++));for(let l=s;l<o;l++)xl(i.child(l),r);e&&e.depth==n&&e.textOffset&&xl(e.nodeBefore,r)}function vl(t,e){return t.type.checkContent(e),t.copy(e)}function _8(t,e,n,r,i){let s=t.depth>i&&KE(t,e,i+1),o=r.depth>i&&KE(n,r,i+1),l=[];return pf(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(M8(s,o),xl(vl(s,_8(t,e,n,r,i+1)),l)):(s&&xl(vl(s,lg(t,e,i+1)),l),pf(e,n,i,l),o&&xl(vl(o,lg(n,r,i+1)),l)),pf(r,null,i,l),new xe(l)}function lg(t,e,n){let r=[];if(pf(null,t,n,r),t.depth>n){let i=KE(t,e,n+1);xl(vl(i,lg(t,e,n+1)),r)}return pf(e,null,n,r),new xe(r)}function EQ(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(xe.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Bf{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ot.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new cg(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new Bf(n,r,s)}static resolveCached(e,n){let r=Oj.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Oj.set(e,r=new NQ);let i=r.elts[r.i]=Bf.resolve(e,n);return r.i=(r.i+1)%TQ,i}}class NQ{constructor(){this.elts=[],this.i=0}}const TQ=12,Oj=new WeakMap;class cg{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const AQ=Object.create(null);let ha=class YE{constructor(e,n,r,i=Ot.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||xe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&og(this.attrs,n||e.defaultAttrs||AQ)&&Ot.sameSet(this.marks,r||Ot.none)}copy(e=null){return e==this.content?this:new YE(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new YE(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Te.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new Te(d,i.depth-o,s.depth-o)}replace(e,n,r){return CQ(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Bf.resolveCached(this,e)}resolveNoCache(e){return Bf.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),D8(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=xe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ot.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ot.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=xe.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};ha.prototype.text=void 0;class ug extends ha{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):D8(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ug(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ug(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function D8(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Al{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new MQ(e,n);if(r.next==null)return Al.empty;let i=R8(r);r.next&&r.err("Unexpected trailing text");let s=IQ(LQ(i));return PQ(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(e,r);if(u&&(!n||u.validEnd))return xe.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:f,next:p}=o.next[d];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=s(p,l.concat(f));if(m)return m}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Al.empty=new Al(!0);class MQ{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function R8(t){let e=[];do e.push(_Q(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function _Q(t){let e=[];do e.push(DQ(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function DQ(t){let e=OQ(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=RQ(t,e);else break;return e}function Lj(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function RQ(t,e){let n=Lj(t),r=n;return t.eat(",")&&(t.next!="}"?r=Lj(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function jQ(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function OQ(t){if(t.eat("(")){let e=R8(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=jQ(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function LQ(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,u){let d={term:u,to:l};return e[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let f=n();i(s(o.expr,u),f),u=f}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let f=n();r(u,f),i(s(o.expr,u),f),u=f}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function j8(t,e){return e-t}function Ij(t,e){let n=[];return r(e),n.sort(j8);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function IQ(t){let e=Object.create(null);return n(Ij(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let f=0;f<i.length;f++)i[f][0]==l&&(d=i[f][1]);Ij(t,u).forEach(f=>{d||i.push([l,d=[]]),d.indexOf(f)==-1&&d.push(f)})})});let s=e[r.join(",")]=new Al(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(j8);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function PQ(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function O8(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function L8(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function I8(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function P8(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new zQ(t,r,e[r]);return n}let Pj=class B8{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=P8(e,r.attrs),this.defaultAttrs=O8(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Al.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:L8(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ha(this,this.computeAttrs(e),xe.from(n),Ot.setFrom(r))}createChecked(e=null,n,r){return n=xe.from(n),this.checkContent(n),new ha(this,this.computeAttrs(e),n,Ot.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=xe.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(xe.empty,!0);return s?new ha(this,e,n.append(s),Ot.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){I8(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ot.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new B8(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function BQ(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class zQ{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?BQ(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ty{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=P8(e,i.attrs),this.excluded=null;let s=O8(this.attrs);this.instance=s?new Ot(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ot(this,L8(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Ty(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){I8(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class z8{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=er.from(e.nodes),n.marks=er.from(e.marks||{}),this.nodes=Pj.compile(this.spec.nodes,this),this.marks=Ty.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Al.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Bj(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Bj(this,o.split(" "))}this.nodeFromJSON=i=>ha.fromJSON(this,i),this.markFromJSON=i=>Ot.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Pj){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ug(r,r.defaultAttrs,e,Ot.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Bj(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let u=t.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function VQ(t){return t.tag!=null}function qQ(t){return t.style!=null}let mf=class XE{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(VQ(i))this.tags.push(i);else if(qQ(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Vj(this,n,!1);return r.addAll(e,Ot.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Vj(this,n,!0);return r.addAll(e,Ot.none,n.from,n.to),Te.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(UQ(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=qj(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=qj(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new XE(e,XE.schemaRules(e)))}};const V8={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},FQ={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},q8={ol:!0,ul:!0},zf=1,ZE=2,gf=4;function zj(t,e,n){return e!=null?(e?zf:0)|(e==="full"?ZE:0):t&&t.whitespace=="pre"?zf|ZE:n&~gf}class om{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ot.none,this.match=s||(o&gf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(xe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&zf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=xe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(xe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!V8.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Vj{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=zj(null,n.preserveWhitespace,0)|(r?gf:0);i?s=new om(i.type,i.attrs,Ot.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new om(null,null,Ot.none,!0,null,o):s=new om(e.schema.topNodeType,null,Ot.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&ZE?"full":this.localPreserveWS||(i.options&zf)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;q8.hasOwnProperty(o)&&this.parser.normalizeLists&&HQ(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(u?u.ignore:FQ.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let d,f=this.needsBlock;if(V8.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let p=u&&u.skip?n:this.readStyles(e,n);p&&this.addAll(e,p),d&&this.sync(s),this.needsBlock=f}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(e);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ot.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):Fj(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=zj(e,s,o.options);o.options&gf&&o.content.length==0&&(l|=gf);let u=Ot.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):Fj(d.type,e))?(u=d.addToSet(u),!1):!0),this.nodes.push(new om(e,n,u,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=zf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let f=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!f||f.name!=d&&!f.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function HQ(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&q8.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function UQ(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function qj(t){let e={};for(let n in t)e[n]=t[n];return e}function Fj(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:f}=l.edge(u);if(d==e||s.indexOf(f)<0&&o(f))return!0}};if(o(i.contentMatch))return!0}}class $l{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Jx(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],f=this.serializeMark(d,o.isInline,n);f&&(s.push([d,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Lm(Jx(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Lm(Jx(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Lm(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new $l(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Hj(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Hj(e.marks)}}function Hj(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Jx(t){return t.document||window.document}const Uj=new WeakMap;function $Q(t){let e=Uj.get(t);return e===void 0&&Uj.set(t,e=GQ(t)),e}function GQ(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Lm(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=$Q(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?t.createElementNS(n,i):t.createElement(i),d=e[1],f=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){f=2;for(let p in d)if(d[p]!=null){let m=p.indexOf(" ");m>0?u.setAttributeNS(p.slice(0,m),p.slice(m+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=f;p<e.length;p++){let m=e[p];if(m===0){if(p<e.length-1||p>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:b,contentDOM:x}=Lm(t,m,n,r);if(u.appendChild(b),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const F8=65535,H8=Math.pow(2,16);function WQ(t,e){return t+e*H8}function $j(t){return t&F8}function KQ(t){return(t-(t&F8))/H8}const U8=1,$8=2,Im=4,G8=8;class JE{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&G8)>0}get deletedBefore(){return(this.delInfo&(U8|Im))>0}get deletedAfter(){return(this.delInfo&($8|Im))>0}get deletedAcross(){return(this.delInfo&Im)>0}}class oi{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&oi.empty)return oi.empty}recover(e){let n=0,r=$j(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+KQ(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>e)break;let d=this.ranges[l+s],f=this.ranges[l+o],p=u+d;if(e<=p){let m=d?e==u?-1:e==p?1:n:n,b=u+i+(m<0?0:f);if(r)return b;let x=e==(n<0?u:p)?null:WQ(l/3,e-u),w=e==u?$8:e==p?U8:Im;return(n<0?e!=u:e!=p)&&(w|=G8),new JE(b,w,x)}i+=f-d}return r?e+i:new JE(e+i,0,null)}touches(e,n){let r=0,i=$j(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>e)break;let d=this.ranges[l+s],f=u+d;if(e<=f&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],f=this.ranges[i+r];e(l,l+d,u,u+f),s+=f-d}}invert(){return new oi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?oi.empty:new oi(e<0?[0,-e,0]:[0,0,e])}}oi.empty=new oi([]);class Vf{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Vf(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Vf;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,e=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new JE(e,i,null)}}const Qx=Object.create(null);class br{getMap(){return oi.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Qx[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Qx)throw new RangeError("Duplicate use of step JSON ID "+e);return Qx[e]=n,n.prototype.jsonID=e,n}}class En{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new En(e,null)}static fail(e){return new En(null,e)}static fromReplace(e,n,r,i){try{return En.ok(e.replace(n,r,i))}catch(s){if(s instanceof ag)return En.fail(s.message);throw s}}}function IN(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(IN(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return xe.fromArray(r)}class ca extends br{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Te(IN(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return En.fromReplace(e,this.from,this.to,s)}invert(){return new Yi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ca(n.pos,r.pos,this.mark)}merge(e){return e instanceof ca&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ca(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ca(n.from,n.to,e.markFromJSON(n.mark))}}br.jsonID("addMark",ca);class Yi extends br{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Te(IN(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return En.fromReplace(e,this.from,this.to,r)}invert(){return new ca(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yi(n.from,n.to,e.markFromJSON(n.mark))}}br.jsonID("removeMark",Yi);class ua extends br{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return En.fromReplace(e,this.pos,this.pos+1,new Te(xe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ua(this.pos,n.marks[i]);return new ua(this.pos,this.mark)}}return new Ml(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ua(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ua(n.pos,e.markFromJSON(n.mark))}}br.jsonID("addNodeMark",ua);class Ml extends br{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return En.fromReplace(e,this.pos,this.pos+1,new Te(xe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ua(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ml(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ml(n.pos,e.markFromJSON(n.mark))}}br.jsonID("removeNodeMark",Ml);class Hn extends br{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&QE(e,this.from,this.to)?En.fail("Structure replace would overwrite content"):En.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new oi([this.from,this.to-this.from,this.slice.size])}invert(e){return new Hn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Hn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Hn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Te.empty:new Te(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Hn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Te.empty:new Te(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Hn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Hn(n.from,n.to,Te.fromJSON(e,n.slice),!!n.structure)}}br.jsonID("replace",Hn);class $n extends br{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(QE(e,this.from,this.gapFrom)||QE(e,this.gapTo,this.to)))return En.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return En.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?En.fromReplace(e,this.from,this.to,r):En.fail("Content does not fit in gap")}getMap(){return new oi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new $n(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new $n(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new $n(n.from,n.to,n.gapFrom,n.gapTo,Te.fromJSON(e,n.slice),n.insert,!!n.structure)}}br.jsonID("replaceAround",$n);function QE(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function YQ(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(u,d,f)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&f.type.allowsMarkType(r.type)){let m=Math.max(d,e),b=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let w=0;w<p.length;w++)p[w].isInSet(x)||(o&&o.to==m&&o.mark.eq(p[w])?o.to=b:i.push(o=new Yi(m,b,p[w])));l&&l.to==m?l.to=b:s.push(l=new ca(m,b,r))}}),i.forEach(u=>t.step(u)),s.forEach(u=>t.step(u))}function XQ(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Ty){let d=o.marks,f;for(;f=r.isInSet(d);)(u||(u=[])).push(f),d=f.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let f=0;f<u.length;f++){let p=u[f],m;for(let b=0;b<i.length;b++){let x=i[b];x.step==s-1&&p.eq(i[b].style)&&(m=x)}m?(m.to=d,m.step=s):i.push({style:p,from:Math.max(l,e),to:d,step:s})}}}),i.forEach(o=>t.step(new Yi(o.from,o.to,o.style)))}function PN(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),f=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new Hn(l,f,Te.empty));else{r=p;for(let m=0;m<d.marks.length;m++)n.allowsMarkType(d.marks[m].type)||t.step(new Yi(l,f,d.marks[m]));if(i&&d.isText&&n.whitespace!="pre"){let m,b=/\r?\n|\r/g,x;for(;m=b.exec(d.text);)x||(x=new Te(xe.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new Hn(l+m.index,l+m.index+m[0].length,x))}}l=f}if(!r.validEnd){let u=r.fillBefore(xe.empty,!0);t.replace(l,l,new Te(u,0,0))}for(let u=o.length-1;u>=0;u--)t.step(o[u])}function ZQ(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ou(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!ZQ(i,s,o))break}return null}function JQ(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),u=o,d=l,f=xe.empty,p=0;for(let x=s,w=!1;x>n;x--)w||r.index(x)>0?(w=!0,f=xe.from(r.node(x).copy(f)),p++):u--;let m=xe.empty,b=0;for(let x=s,w=!1;x>n;x--)w||i.after(x+1)<i.end(x)?(w=!0,m=xe.from(i.node(x).copy(m)),b++):d++;t.step(new $n(u,d,o,l,new Te(f.append(m),p,b),f.size-p,!0))}function BN(t,e,n=null,r=t){let i=QQ(t,e),s=i&&eee(r,e);return s?i.map(Gj).concat({type:e,attrs:n}).concat(s.map(Gj)):null}function Gj(t){return{type:t,attrs:null}}function QQ(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function eee(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:e).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function tee(t,e,n){let r=xe.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=xe.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new $n(i,s,i,s,new Te(r,0,0),n.length,!0))}function nee(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&ree(t.doc,t.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!x?d=!1:!b&&x&&(d=!0)}d===!1&&K8(t,o,l,s),PN(t,t.mapping.slice(s).map(l,1),r,void 0,d===null);let f=t.mapping.slice(s),p=f.map(l,1),m=f.map(l+o.nodeSize,1);return t.step(new $n(p,m,p+1,m-1,new Te(xe.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&W8(t,o,l,s),!1}})}function W8(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function K8(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function ree(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function iee(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new $n(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Te(xe.from(o),0,0),1,!0))}function io(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,f=n-2;d>s;d--,f--){let p=i.node(d),m=i.index(d);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(m,p.childCount),x=r&&r[f+1];x&&(b=b.replaceChild(0,x.type.create(x.attrs)));let w=r&&r[f]||p;if(!p.canReplace(m+1,p.childCount)||!w.type.validContent(b))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function see(t,e,n=1,r){let i=t.doc.resolve(e),s=xe.empty,o=xe.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=xe.from(i.node(l).copy(s));let f=r&&r[d];o=xe.from(f?f.type.create(f.attrs,o):i.node(l).copy(o))}t.step(new Hn(e,e,new Te(s.append(o),n,n),!0))}function _a(t,e){let n=t.resolve(e),r=n.index();return Y8(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function oee(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function Y8(t,e){return!!(t&&e&&!t.isLeaf&&oee(t,e))}function Ay(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&Y8(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function aee(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let f=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);f&&!p?r=!1:!f&&p&&(r=!0)}let l=t.steps.length;if(r===!1){let f=t.doc.resolve(e+n);K8(t,f.node(),f.before(),l)}o.inlineContent&&PN(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=t.mapping.slice(l),d=u.map(e-n);if(t.step(new Hn(d,u.map(e+n,-1),Te.empty,!0)),r===!0){let f=t.doc.resolve(d);W8(t,f.node(),f.before(),t.steps.length)}return t}function lee(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function X8(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),f=!1;if(s==1)f=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);f=p&&d.canReplaceWith(u,u,p[0])}if(f)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function My(t,e,n=e,r=Te.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return Z8(i,s,r)?new Hn(e,n,r):new cee(i,s,r).fit()}function Z8(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class cee{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=xe.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=xe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new Te(s,o,l);return e>-1?new $n(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Hn(r.pos,i.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=ev(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],f,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(xe.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(f=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:f};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ev(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Te(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=ev(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Te(Qd(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Te(Qd(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let w=0;w<s.length;w++)this.openFrontierNode(s[w]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-e,d=0,f=[],{match:p,type:m}=this.frontier[n];if(i){for(let w=0;w<i.childCount;w++)f.push(i.child(w));p=p.matchFragment(i)}let b=l.size+e-(o.content.size-o.openEnd);for(;d<l.childCount;){let w=l.child(d),S=p.matchType(w.type);if(!S)break;d++,(d>1||u==0||w.content.size)&&(p=S,f.push(J8(w.mark(m.allowedMarks(w.marks)),d==1?u:0,d==l.childCount?b:-1)))}let x=d==l.childCount;x||(b=-1),this.placed=ef(this.placed,n,xe.from(f)),this.frontier[n].match=p,x&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=l;w<b;w++){let C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=x?e==0?Te.empty:new Te(Qd(o.content,e-1,1),e-1,b<0?o.openEnd:e-1):new Te(Qd(o.content,e,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!tv(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=tv(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],f=tv(e,l,d,u,!0);if(!f||f.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ef(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ef(this.placed,this.depth,xe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(xe.empty,!0);n.childCount&&(this.placed=ef(this.placed,this.frontier.length,n))}}function Qd(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Qd(t.firstChild.content,e-1,n)))}function ef(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ef(t.lastChild.content,e-1,n)))}function ev(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function J8(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,J8(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(xe.empty,!0)))),t.copy(r)}function tv(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!uee(n,s.content,o)?l:null}function uee(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function dee(t){return t.spec.defining||t.spec.definingForContent}function fee(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(Z8(i,s,r))return t.step(new Hn(e,n,r));let o=eV(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let m=i.depth,b=i.pos-1;m>0;m--,b--){let x=i.node(m).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(m)>-1?l=m:i.before(m)==b&&o.splice(1,0,-m)}let u=o.indexOf(l),d=[],f=r.openStart;for(let m=r.content,b=0;;b++){let x=m.firstChild;if(d.push(x),b==r.openStart)break;m=x.content}for(let m=f-1;m>=0;m--){let b=d[m],x=dee(b.type);if(x&&!b.sameMarkup(i.node(Math.abs(l)-1)))f=m;else if(x||!b.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let b=(m+f+1)%(r.openStart+1),x=d[b];if(x)for(let w=0;w<o.length;w++){let S=o[(w+u)%o.length],C=!0;S<0&&(C=!1,S=-S);let T=i.node(S-1),E=i.index(S-1);if(T.canReplaceWith(E,E,x.type,x.marks))return t.replace(i.before(S),C?s.after(S):n,new Te(Q8(r.content,0,r.openStart,b),b,r.openEnd))}}let p=t.steps.length;for(let m=o.length-1;m>=0&&(t.replace(e,n,r),!(t.steps.length>p));m--){let b=o[m];b<0||(e=i.before(b),n=s.after(b))}}function Q8(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Q8(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(xe.empty,!0))}return t}function hee(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=lee(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Te(xe.from(r),0,0))}function pee(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=eV(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function eV(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class nu extends br{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return En.fromReplace(e,this.pos,this.pos+1,new Te(xe.from(i),0,n.isLeaf?0:1))}getMap(){return oi.empty}invert(e){return new nu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nu(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new nu(n.pos,n.attr,n.value)}}br.jsonID("attr",nu);class qf extends br{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return En.ok(r)}getMap(){return oi.empty}invert(e){return new qf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new qf(n.attr,n.value)}}br.jsonID("docAttr",qf);let pu=class extends Error{};pu=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};pu.prototype=Object.create(Error.prototype);pu.prototype.constructor=pu;pu.prototype.name="TransformError";let tV=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vf}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new pu(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Te.empty){let i=My(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Te(xe.from(r),0,0))}delete(e,n){return this.replace(e,n,Te.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return fee(this,e,n,r),this}replaceRangeWith(e,n,r){return hee(this,e,n,r),this}deleteRange(e,n){return pee(this,e,n),this}lift(e,n){return JQ(this,e,n),this}join(e,n=1){return aee(this,e,n),this}wrap(e,n){return tee(this,e,n),this}setBlockType(e,n=e,r,i=null){return nee(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return iee(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new nu(e,n,r)),this}setDocAttribute(e,n){return this.step(new qf(e,n)),this}addNodeMark(e,n){return this.step(new ua(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ot)n.isInSet(r.marks)&&this.step(new Ml(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Ml(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return see(this,e,n,r),this}addMark(e,n,r){return YQ(this,e,n,r),this}removeMark(e,n,r){return XQ(this,e,n,r),this}clearIncompatible(e,n,r){return PN(this,e,n,r),this}};const nv=Object.create(null);let tt=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new mee(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Te.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],f=e.mapping.slice(s);e.replaceRange(f.map(u.pos),f.map(d.pos),l?Te.empty:n),l==0&&Yj(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=e.mapping.slice(r),d=u.map(o.pos),f=u.map(l.pos);s?e.deleteRange(d,f):(e.replaceRangeWith(d,f,n),Yj(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Xe(e):qc(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?qc(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):qc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new li(e.node(0))}static atStart(e){return qc(e,e,0,0,1)||new li(e)}static atEnd(e){return qc(e,e,e.content.size,e.childCount,-1)||new li(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nv[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nv)throw new RangeError("Duplicate use of selection JSON ID "+e);return nv[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Xe.between(this.$anchor,this.$head).getBookmark()}};tt.prototype.visible=!0;class mee{constructor(e,n){this.$from=e,this.$to=n}}let Wj=!1;function Kj(t){!Wj&&!t.parent.inlineContent&&(Wj=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Xe extends tt{constructor(e,n=e){Kj(e),Kj(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return tt.near(r);let i=e.resolve(n.map(this.anchor));return new Xe(i.parent.inlineContent?i:r,r)}replace(e,n=Te.empty){if(super.replace(e,n),n==Te.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Xe&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new _y(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Xe(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=tt.findFrom(n,r,!0)||tt.findFrom(n,-r,!0);if(s)n=s.$head;else return tt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(tt.findFrom(e,-r,!0)||tt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Xe(e,n)}}tt.jsonID("text",Xe);class _y{constructor(e,n){this.anchor=e,this.head=n}map(e){return new _y(e.map(this.anchor),e.map(this.head))}resolve(e){return Xe.between(e.resolve(this.anchor),e.resolve(this.head))}}class Fe extends tt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?tt.near(s):new Fe(s)}content(){return new Te(xe.from(this.node),0,0)}eq(e){return e instanceof Fe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zN(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Fe(e.resolve(n.anchor))}static create(e,n){return new Fe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Fe.prototype.visible=!1;tt.jsonID("node",Fe);class zN{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new _y(r,r):new zN(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Fe.isSelectable(r)?new Fe(n):tt.near(n)}}class li extends tt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Te.empty){if(n==Te.empty){e.delete(0,e.doc.content.size);let r=tt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new li(e)}map(e){return new li(e)}eq(e){return e instanceof li}getBookmark(){return gee}}tt.jsonID("all",li);const gee={map(){return this},resolve(t){return new li(t)}};function qc(t,e,n,r,i,s=!1){if(e.inlineContent)return Xe.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&Fe.isSelectable(l))return Fe.create(t,n-(i<0?l.nodeSize:0))}else{let u=qc(t,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function Yj(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Hn||i instanceof $n))return;let s=t.mapping.maps[r],o;s.forEach((l,u,d,f)=>{o==null&&(o=f)}),t.setSelection(tt.near(t.doc.resolve(o),n))}const Xj=1,am=2,Zj=4;let yee=class extends tV{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Xj)&~am,this.storedMarks=null,this}get selectionSet(){return(this.updated&Xj)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=am,this}ensureMarks(e){return Ot.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&am)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~am,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ot.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(tt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Zj,this}get scrolledIntoView(){return(this.updated&Zj)>0}};function Jj(t,e){return!e||!t?t:t.bind(e)}class tf{constructor(e,n,r){this.name=e,this.init=Jj(n.init,r),this.apply=Jj(n.apply,r)}}const bee=[new tf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new tf("selection",{init(t,e){return t.selection||tt.atStart(e.doc)},apply(t){return t.selection}}),new tf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new tf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rv{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bee.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new tf(r.key,r.spec.state,r))})}}class Jc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,f=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(f&&r.filterTransaction(f,o)){if(f.setMeta("appendedTransaction",e),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(f),r=r.applyInner(f),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Jc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new yee(this)}static create(e){let n=new rv(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Jc(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rv(this.schema,e.plugins),r=n.fields,i=new Jc(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rv(e.schema,e.plugins),s=new Jc(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=ha.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=tt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function nV(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=nV(i,e,{})),n[r]=i}return n}class un{constructor(e){this.spec=e,this.props={},e.props&&nV(e.props,this,this.props),this.key=e.key?e.key.key:rV("plugin")}getState(e){return e[this.key]}}const iv=Object.create(null);function rV(t){return t in iv?t+"$"+ ++iv[t]:(iv[t]=0,t+"$")}class Wn{constructor(e="key"){this.key=rV(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},mu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let e2=null;const to=function(t,e,n){let r=e2||(e2=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},xee=function(){e2=null},_l=function(t,e,n,r){return n&&(Qj(t,e,n,r,-1)||Qj(t,e,n,r,1))},vee=/^(img|br|input|textarea|hr)$/i;function Qj(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ni(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Ch(t)||vee.test(t.nodeName)||t.contentEditable=="false")return!1;e=nr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ni(t):0}else return!1}}function Ni(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function wee(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ni(t)}else if(t.parentNode&&!Ch(t))e=nr(t),t=t.parentNode;else return null}}function See(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ch(t))e=nr(t)+1,t=t.parentNode;else return null}}function kee(t,e,n){for(let r=e==0,i=e==Ni(t);r||i;){if(t==n)return!0;let s=nr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Ni(t)}}function Ch(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Dy=function(t){return t.focusNode&&_l(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function al(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Cee(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Eee(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ni(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ni(r.startContainer),r.startOffset)}}}const Es=typeof navigator<"u"?navigator:null,eO=typeof document<"u"?document:null,Da=Es&&Es.userAgent||"",t2=/Edge\/(\d+)/.exec(Da),iV=/MSIE \d/.exec(Da),n2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Da),zr=!!(iV||n2||t2),pa=iV?document.documentMode:n2?+n2[1]:t2?+t2[1]:0,Di=!zr&&/gecko\/(\d+)/i.test(Da);Di&&+(/Firefox\/(\d+)/.exec(Da)||[0,0])[1];const r2=!zr&&/Chrome\/(\d+)/.exec(Da),gr=!!r2,sV=r2?+r2[1]:0,Nr=!zr&&!!Es&&/Apple Computer/.test(Es.vendor),gu=Nr&&(/Mobile\/\w+/.test(Da)||!!Es&&Es.maxTouchPoints>2),Ei=gu||(Es?/Mac/.test(Es.platform):!1),Nee=Es?/Win/.test(Es.platform):!1,no=/Android \d/.test(Da),Eh=!!eO&&"webkitFontSmoothing"in eO.documentElement.style,Tee=Eh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Aee(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ks(t,e){return typeof t=="number"?t:t[e]}function Mee(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function tO(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=mu(o);continue}let l=o,u=l==s.body,d=u?Aee(s):Mee(l),f=0,p=0;if(e.top<d.top+Ks(r,"top")?p=-(d.top-e.top+Ks(i,"top")):e.bottom>d.bottom-Ks(r,"bottom")&&(p=e.bottom-e.top>d.bottom-d.top?e.top+Ks(i,"top")-d.top:e.bottom-d.bottom+Ks(i,"bottom")),e.left<d.left+Ks(r,"left")?f=-(d.left-e.left+Ks(i,"left")):e.right>d.right-Ks(r,"right")&&(f=e.right-d.right+Ks(i,"right")),f||p)if(u)s.defaultView.scrollBy(f,p);else{let b=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),f&&(l.scrollLeft+=f);let w=l.scrollLeft-b,S=l.scrollTop-x;e={left:e.left-w,top:e.top-S,right:e.right-w,bottom:e.bottom-S}}let m=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(m))break;o=m=="absolute"?o.offsetParent:mu(o)}}function _ee(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:oV(t.dom)}}function oV(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=mu(r));return e}function Dee({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;aV(n,r==0?0:r-e)}function aV(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Lc=null;function Ree(t){if(t.setActive)return t.setActive();if(Lc)return t.focus(Lc);let e=oV(t);t.focus(Lc==null?{get preventScroll(){return Lc={preventScroll:!0},!0}}:void 0),Lc||(Lc=!1,aV(e,0))}function lV(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,u,d;for(let f=t.firstChild,p=0;f;f=f.nextSibling,p++){let m;if(f.nodeType==1)m=f.getClientRects();else if(f.nodeType==3)m=to(f).getClientRects();else continue;for(let b=0;b<m.length;b++){let x=m[b];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let w=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(w<r){n=f,r=w,i=w&&n.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,f.nodeType==1&&w&&(s=p+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!u&&x.left<=e.left&&x.right>=e.left&&(u=f,d={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!n&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?jee(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:lV(n,i)}function jee(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ea(r,1);if(s.top!=s.bottom&&VN(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function VN(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Oee(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Lee(t,e,n){let{node:r,offset:i}=lV(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function Iee(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function cV(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(VN(e,d))return cV(o,e,d)}}if((s=(s+1)%r)==i)break}return t}function Pee(t,e){let n=t.dom.ownerDocument,r,i=0,s=Eee(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=t.dom.getBoundingClientRect();if(!VN(e,d)||(o=cV(t.dom,e,d),!o))return null}if(Nr)for(let d=o;r&&d;d=mu(d))d.draggable&&(r=void 0);if(o=Oee(o,e),r){if(Di&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let f=r.childNodes[i],p;f.nodeName=="IMG"&&(p=f.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&i++}let d;Eh&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=Iee(t,r,i,e))}l==null&&(l=Lee(t,o,e));let u=t.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function nO(t){return t.top<t.bottom||t.left<t.right}function ea(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(nO(r))return r}return Array.prototype.find.call(n,nO)||t.getBoundingClientRect()}const Bee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function uV(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Eh||Di;if(r.nodeType==3)if(o&&(Bee.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=ea(to(r,i,i),n);if(Di&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=ea(to(r,i-1,i-1),-1);if(d.top==u.top){let f=ea(to(r,i,i+1),-1);if(f.top!=u.top)return Fd(f,f.left<d.left)}}return u}else{let u=i,d=i,f=n<0?1:-1;return n<0&&!i?(d++,f=-1):n>=0&&i==r.nodeValue.length?(u--,f=1):n<0?u--:d++,Fd(ea(to(r,u,d),f),f<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Ni(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return sv(u.getBoundingClientRect(),!1)}if(s==null&&i<Ni(r)){let u=r.childNodes[i];if(u.nodeType==1)return sv(u.getBoundingClientRect(),!0)}return sv(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Ni(r))){let u=r.childNodes[i-1],d=u.nodeType==3?to(u,Ni(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return Fd(ea(d,1),!1)}if(s==null&&i<Ni(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?to(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return Fd(ea(d,-1),!0)}return Fd(ea(r.nodeType==3?to(r):r,-n),n>=0)}function Fd(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function sv(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function dV(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function zee(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return dV(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=uV(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=to(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let f=u[d];if(f.bottom>f.top+1&&(n=="up"?o.top-f.top>(f.bottom-o.top)*2:f.bottom-o.bottom>(o.bottom-f.top)*2))return!1}}return!0})}const Vee=/[\u0590-\u08ac]/;function qee(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!Vee.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:dV(t,e,()=>{let{focusNode:u,focusOffset:d,anchorNode:f,anchorOffset:p}=t.domSelectionRange(),m=l.caretBidiLevel;l.modify("move",n,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:x,focusOffset:w}=t.domSelectionRange(),S=x&&!b.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==w;try{l.collapse(f,p),u&&(u!=f||d!=p)&&l.extend&&l.extend(u,d)}catch{}return m!=null&&(l.caretBidiLevel=m),S}):r.pos==r.start()||r.pos==r.end()}let rO=null,iO=null,sO=!1;function Fee(t,e,n){return rO==e&&iO==n?sO:(rO=e,iO=n,sO=n=="up"||n=="down"?zee(t,e,n):qee(t,e,n))}const Ri=0,oO=1,ul=2,Ns=3;class Nh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ri,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>nr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof hV){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof fV&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?nr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?nr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&e<=d){let f=o+u.border;if(e>=f&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,f);e=o;for(let p=l;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=nr(m.dom)+1;break}e-=m.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let f=l+1;f<this.children.length;f++){let p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=nr(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let b=0,x=0;b<this.children.length;b++){let w=this.children[b],S=x+w.size;if(s>x&&o<S)return w.setSelection(e-x-w.border,n-x-w.border,r,i);x=S}let l=this.domFromPos(e,e?-1:1),u=n==e?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),f=r.domSelectionRange(),p=!1;if((Di||Nr)&&e==n){let{node:b,offset:x}=l;if(b.nodeType==3){if(p=!!(x&&b.nodeValue[x-1]==`
`),p&&x==b.nodeValue.length)for(let w=b,S;w;w=w.parentNode){if(S=w.nextSibling){S.nodeName=="BR"&&(l=u={node:S.parentNode,offset:nr(S)+1});break}let C=w.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let w=b.childNodes[x-1];p=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Di&&f.focusNode&&f.focusNode!=u.node&&f.focusNode.nodeType==1){let b=f.focusNode.childNodes[f.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||p&&Nr)&&_l(l.node,l.offset,f.anchorNode,f.anchorOffset)&&_l(u.node,u.offset,f.focusNode,f.focusOffset))return;let m=!1;if((d.extend||e==n)&&!(p&&Di)){d.collapse(l.node,l.offset);try{e!=n&&d.extend(u.node,u.offset),m=!0}catch{}}if(!m){if(e>n){let x=l;l=u,u=x}let b=document.createRange();b.setEnd(u.node,u.offset),b.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,u=o-s.border;if(e>=l&&n<=u){this.dirty=e==r||n==o?ul:oO,e==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ns:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ul:Ns}r=o}this.dirty=ul}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ul:oO;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class fV extends Nh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ri&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class Hee extends Nh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Dl extends Nh{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=$l.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Dl(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ns||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ns&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ri){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ri}}slice(e,n,r){let i=Dl.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=s2(s,n,o,r)),e>0&&(s=s2(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ma extends Nh{constructor(e,n,r,i,s,o,l,u,d){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),f=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:p}=$l.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let m=f;return f=gV(f,r,n),d?u=new Uee(e,n,r,i,f,p||null,m,d,s,o+1):n.isText?new Ry(e,n,r,i,f,m,s):new ma(e,n,r,i,f,p||null,m,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>xe.empty)}return e}matchesNode(e,n,r){return this.dirty==Ri&&e.eq(this.node)&&dg(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new Gee(this,o&&o.node,e);Yee(this.node,this.innerDeco,(d,f,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!p&&u.syncToMarks(f==this.node.childCount?Ot.none:this.node.child(f).marks,r,e),u.placeWidget(d,e,i)},(d,f,p,m)=>{u.syncToMarks(d.marks,r,e);let b;u.findNodeMatch(d,f,p,m)||l&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(b=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,f,p,b,e)||u.updateNextNode(d,f,p,e,m,i)||u.addNode(d,f,p,e,i),i+=d.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==ul)&&(o&&this.protectLocalComposition(e,o),pV(this.contentDOM,this.children,e),gu&&Xee(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Xe)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=Zee(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new Hee(this,s,n,i);e.input.compositionNodes.push(o),this.children=s2(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ns||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ri}updateOuterDeco(e){if(dg(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=mV(this.dom,this.nodeDOM,i2(this.outerDeco,this.node,n),i2(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function aO(t,e,n,r,i){gV(r,e,t);let s=new ma(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Ry extends ma{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ns||this.dirty!=Ri&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ri||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ri,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Ry(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ns)}get domAtom(){return!1}isText(e){return this.node.text==e}}class hV extends Nh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ri&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class Uee extends ma{constructor(e,n,r,i,s,o,l,u,d,f){super(e,n,r,i,s,o,l,d,f),this.spec=u}update(e,n,r,i){if(this.dirty==Ns)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function pV(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=lO(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof Dl){let u=r?r.previousSibling:t.lastChild;pV(o.contentDOM,o.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=lO(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const yf=function(t){t&&(this.nodeName=t)};yf.prototype=Object.create(null);const dl=[new yf];function i2(t,e,n){if(t.length==0)return dl;let r=n?dl[0]:new yf,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new yf(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new yf(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function mV(t,e,n,r){if(n==dl&&r==dl)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=t&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=dl[0]),i=u}$ee(i,l||dl[0],o)}return i}function $ee(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function gV(t,e,n){return mV(t,t,dl,i2(e,n,t.nodeType!=1))}function dg(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function lO(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Gee{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Wee(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ri,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Dl.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ns&&o.dom==o.contentDOM&&(o.dirty=ul),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof ma){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let f=u.dom,p,m=this.isLocked(f)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Ns&&dg(n,u.outerDeco));if(!m&&u.update(e,n,r,i))return this.destroyBetween(this.index,l),u.dom!=f&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(u,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=ul,p.updateChildren(i,o+1),p.dirty=Ri),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!dg(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=ma.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let u of l.children)u.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=ma.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new fV(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Dl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ry)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Nr||gr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new hV(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function Wee(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Dl)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function Kee(t,e){return t.type.side-e.type.side}function Yee(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let f=t.child(d);r(f,i,e.forChild(s,f),d),s+=f.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let f,p;for(;o<i.length&&i[o].to==s;){let S=i[o++];S.widget&&(f?(p||(p=[f])).push(S):f=S)}if(f)if(p){p.sort(Kee);for(let S=0;S<p.length;S++)n(p[S],d,!!u)}else n(f,d,!!u);let m,b;if(u)b=-1,m=u,u=null;else if(d<t.childCount)b=d,m=t.child(d++);else break;for(let S=0;S<l.length;S++)l[S].to<=s&&l.splice(S--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+m.nodeSize;if(m.isText){let S=x;o<i.length&&i[o].from<S&&(S=i[o].from);for(let C=0;C<l.length;C++)l[C].to<S&&(S=l[C].to);S<x&&(u=m.cut(S-s),m=m.cut(0,S-s),x=S,b=-1)}else for(;o<i.length&&i[o].to<x;)o++;let w=m.isInline&&!m.isLeaf?l.filter(S=>!S.inline):l.slice();r(m,w,e.forChild(s,m),b),s=x}}function Xee(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Zee(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<t.childCount;){let d=t.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-e.length-l,r-l)==e)return r-e.length;let d=l<r?u.lastIndexOf(e,r-l-1):-1;if(d>=0&&d+e.length+l>=n)return l+d;if(n==r&&u.length>=r+e.length-l&&u.slice(r-l,r-l+e.length)==e)return r}}return-1}function s2(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let u=t[o],d=l,f=l+=u.size;d>=n||f<=e?s.push(u):(d<e&&s.push(u.slice(0,e-d,r)),i&&(s.push(i),i=void 0),f>n&&s.push(u.slice(n-d,u.size,r)))}return s}function qN(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(Dy(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Fe.isSelectable(p)&&i.parent&&!(p.isInline&&kee(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;d=new Fe(o==m?l:r.resolve(m))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,m=o;for(let b=0;b<n.rangeCount;b++){let x=n.getRangeAt(b);p=Math.min(p,t.docView.posFromDOM(x.startContainer,x.startOffset,1)),m=Math.max(m,t.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=m==t.state.selection.anchor?[m,p]:[p,m],l=r.resolve(o)}else u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let f=r.resolve(u);if(!d){let p=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;d=FN(t,f,l,p)}return d}function yV(t){return t.editable?t.hasFocus():xV(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function so(t,e=!1){let n=t.state.selection;if(bV(t,n),!!yV(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&gr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&_l(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Qee(t);else{let{anchor:r,head:i}=n,s,o;cO&&!(n instanceof Xe)&&(n.$from.parent.inlineContent||(s=uO(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=uO(t,n.to))),t.docView.setSelection(r,i,t,e),cO&&(s&&dO(s),o&&dO(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Jee(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const cO=Nr||gr&&sV<63;function uO(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Nr&&i&&i.contentEditable=="false")return ov(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ov(i);if(s)return ov(s)}}function ov(t){return t.contentEditable="true",Nr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function dO(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Jee(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!yV(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Qee(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,nr(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&zr&&pa<=11&&(n.disabled=!0,n.disabled=!1)}function bV(t,e){if(e instanceof Fe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(fO(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else fO(t)}function fO(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function FN(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Xe.between(e,n,r)}function hO(t){return t.editable&&!t.hasFocus()?!1:xV(t)}function xV(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function ete(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return _l(e.node,e.offset,n.anchorNode,n.anchorOffset)}function o2(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&tt.findFrom(s,e)}function ta(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function pO(t,e,n){let r=t.state.selection;if(r instanceof Xe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ta(t,new Xe(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=o2(t.state,e);return i&&i instanceof Fe?ta(t,i):!1}else if(!(Ei&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?Fe.isSelectable(s)?ta(t,new Fe(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Eh?ta(t,new Xe(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Fe&&r.node.isInline)return ta(t,new Xe(e>0?r.$to:r.$from));{let i=o2(t.state,e);return i?ta(t,i):!1}}}function fg(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function bf(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ic(t,e){return e<0?tte(t):nte(t)}function tte(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Di&&n.nodeType==1&&r<fg(n)&&bf(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(bf(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(vV(n))break;{let l=n.previousSibling;for(;l&&bf(l,-1);)i=n.parentNode,s=nr(l),l=l.previousSibling;if(l)n=l,r=fg(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?a2(t,n,r):i&&a2(t,i,s)}function nte(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=fg(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(bf(l,1))s=n,o=++r;else break}else{if(vV(n))break;{let l=n.nextSibling;for(;l&&bf(l,1);)s=l.parentNode,o=nr(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=fg(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&a2(t,s,o)}function vV(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function rte(t,e){for(;t&&e==t.childNodes.length&&!Ch(t);)e=nr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function ite(t,e){for(;t&&!e&&!Ch(t);)e=nr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function a2(t,e,n){if(e.nodeType!=3){let s,o;(o=rte(e,n))?(e=o,n=0):(s=ite(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Dy(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&so(t)},50)}function mO(t,e){let n=t.state.doc.resolve(e);if(!(gr||Nee)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function gO(t,e,n){let r=t.state.selection;if(r instanceof Xe&&!r.empty||n.indexOf("s")>-1||Ei&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=o2(t.state,e);if(o&&o instanceof Fe)return ta(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof li?tt.near(o,e):tt.findFrom(o,e);return l?ta(t,l):!1}return!1}function yO(t,e){if(!(t.state.selection instanceof Xe))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function bO(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ste(t){if(!Nr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;bO(t,r,"true"),setTimeout(()=>bO(t,r,"false"),20)}return!1}function ote(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function ate(t,e){let n=e.keyCode,r=ote(e);if(n==8||Ei&&n==72&&r=="c")return yO(t,-1)||Ic(t,-1);if(n==46&&!e.shiftKey||Ei&&n==68&&r=="c")return yO(t,1)||Ic(t,1);if(n==13||n==27)return!0;if(n==37||Ei&&n==66&&r=="c"){let i=n==37?mO(t,t.state.selection.from)=="ltr"?-1:1:-1;return pO(t,i,r)||Ic(t,i)}else if(n==39||Ei&&n==70&&r=="c"){let i=n==39?mO(t,t.state.selection.from)=="ltr"?1:-1:1;return pO(t,i,r)||Ic(t,i)}else{if(n==38||Ei&&n==80&&r=="c")return gO(t,-1,r)||Ic(t,-1);if(n==40||Ei&&n==78&&r=="c")return ste(t)||gO(t,1,r)||Ic(t,1);if(r==(Ei?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function HN(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let o=t.someProp("clipboardSerializer")||$l.fromSchema(t.state.schema),l=NV(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,f,p=0;for(;d&&d.nodeType==1&&(f=EV[d.nodeName.toLowerCase()]);){for(let b=f.length-1;b>=0;b--){let x=l.createElement(f[b]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:m,slice:e}}function wV(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let u=!!e&&(r||s||!n);if(u){if(t.someProp("transformPastedText",m=>{e=m(e,s||r,t)}),s)return l=new Te(xe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",m=>{l=m(l,t,!0)}),l;let p=t.someProp("clipboardTextParser",m=>m(e,i,r,t));if(p)l=p;else{let m=i.marks(),{schema:b}=t.state,x=$l.fromSchema(b);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=o.appendChild(document.createElement("p"));w&&S.appendChild(x.serializeNode(b.text(w,m)))})}}else t.someProp("transformPastedHTML",p=>{n=p(n,t)}),o=dte(n),Eh&&fte(o);let d=o&&o.querySelector("[data-pm-slice]"),f=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let p=+f[3];p>0;p--){let m=o.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;o=m}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||mf.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||f),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!lte.test(m.parentNode.nodeName)?{ignore:!0}:null}})),f)l=hte(xO(l,+f[1],+f[2]),f[4]);else if(l=Te.maxOpen(cte(l.content,i),!0),l.openStart||l.openEnd){let p=0,m=0;for(let b=l.content.firstChild;p<l.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=l.content.lastChild;m<l.openEnd&&!b.type.spec.isolating;m++,b=b.lastChild);l=xO(l,p,m)}return t.someProp("transformPasted",p=>{l=p(l,t,u)}),l}const lte=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function cte(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&kV(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=CV(o[o.length-1],s.length));let f=SV(l,u);o.push(f),i=i.matchType(f.type),s=u}}),o)return xe.from(o)}return t}function SV(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,xe.from(t));return t}function kV(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=kV(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(xe.from(SV(n,t,i+1))))}}function CV(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,CV(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(xe.empty,!0);return t.copy(n.append(r))}function l2(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=l2(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(xe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function xO(t,e,n){return e<t.openStart&&(t=new Te(l2(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Te(l2(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const EV={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let vO=null;function NV(){return vO||(vO=document.implementation.createHTMLDocument("title"))}let av=null;function ute(t){let e=window.trustedTypes;return e?(av||(av=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),av.createHTML(t)):t}function dte(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=NV().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&EV[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=ute(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function fte(t){let e=t.querySelectorAll(gr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function hte(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=xe.from(u.create(r[l+1],i)),s++,o++}return new Te(i,s,o)}const Tr={},Ar={},pte={touchstart:!0,touchmove:!0};class mte{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function gte(t){for(let e in Tr){let n=Tr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{bte(t,r)&&!UN(t,r)&&(t.editable||!(r.type in Ar))&&n(t,r)},pte[e]?{passive:!0}:void 0)}Nr&&t.dom.addEventListener("input",()=>null),c2(t)}function da(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function yte(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function c2(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>UN(t,r))})}function UN(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function bte(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function xte(t,e){!UN(t,e)&&Tr[e.type]&&(t.editable||!(e.type in Ar))&&Tr[e.type](t,e)}Ar.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!AV(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(no&&gr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),gu&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,al(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||ate(t,n)?n.preventDefault():da(t,"key")};Ar.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ar.keypress=(t,e)=>{let n=e;if(AV(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ei&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Xe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function jy(t){return{left:t.clientX,top:t.clientY}}function vte(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function $N(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ru(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function wte(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Fe.isSelectable(r)?(ru(t,new Fe(n)),!0):!1}function Ste(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Fe&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Fe.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ru(t,Fe.create(t.state.doc,i)),!0):!1}function kte(t,e,n,r,i){return $N(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Ste(t,n):wte(t,n))}function Cte(t,e,n,r){return $N(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Ete(t,e,n,r){return $N(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||Nte(t,n,r)}function Nte(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ru(t,Xe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ru(t,Xe.create(r,l+1,l+1+o.content.size));else if(Fe.isSelectable(o))ru(t,Fe.create(r,l));else continue;return!0}}function GN(t){return hg(t)}const TV=Ei?"metaKey":"ctrlKey";Tr.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=GN(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&vte(n,t.input.lastClick)&&!n[TV]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(jy(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Tte(t,o,n,!!r)):(s=="doubleClick"?Cte:Ete)(t,o.pos,o.inside,n)?n.preventDefault():da(t,"pointer"))};class Tte{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[TV],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let f=e.state.doc.resolve(n.pos);s=f.parent,o=f.depth?f.before():0}const l=i?null:r.target,u=l?e.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Fe&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Di&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),da(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>so(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(jy(e))),this.updateAllowDefault(e),this.allowDefault||!n?da(this.view,"pointer"):kte(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Nr&&this.mightDrag&&!this.mightDrag.node.isAtom||gr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ru(this.view,tt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):da(this.view,"pointer")}move(e){this.updateAllowDefault(e),da(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Tr.touchstart=t=>{t.input.lastTouch=Date.now(),GN(t),da(t,"pointer")};Tr.touchmove=t=>{t.input.lastTouch=Date.now(),da(t,"pointer")};Tr.contextmenu=t=>GN(t);function AV(t,e){return t.composing?!0:Nr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Ate=no?5e3:-1;Ar.compositionstart=Ar.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Xe&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),hg(t,!0),t.markCursor=null;else if(hg(t,!e.selection.empty),Di&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}MV(t,Ate)};Ar.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,MV(t,20))};function MV(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>hg(t),e))}function _V(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=_te());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Mte(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=wee(e.focusNode,e.focusOffset),r=See(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function _te(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hg(t,e=!1){if(!(no&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),_V(t),e||t.docView&&t.docView.dirty){let n=qN(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Dte(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ff=zr&&pa<15||gu&&Tee<604;Tr.copy=Ar.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Ff?null:n.clipboardData,o=r.content(),{dom:l,text:u}=HN(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):Dte(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Rte(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function jte(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Hf(t,r.value,null,i,e):Hf(t,r.textContent,r.innerHTML,i,e)},50)}function Hf(t,e,n,r,i){let s=wV(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,i,s||Te.empty)))return!0;if(!s)return!1;let o=Rte(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function DV(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ar.paste=(t,e)=>{let n=e;if(t.composing&&!no)return;let r=Ff?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Hf(t,DV(r),r.getData("text/html"),i,n)?n.preventDefault():jte(t,n)};class RV{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Ote=Ei?"altKey":"ctrlKey";function jV(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Ote]}Tr.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(jy(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Fe?i.to-1:i.to))){if(r&&r.mightDrag)o=Fe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=t.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(o=Fe.create(t.state.doc,p.posBefore))}}let l=(o||t.state.selection).content(),{dom:u,text:d,slice:f}=HN(t,l);(!n.dataTransfer.files.length||!gr||sV>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ff?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ff||n.dataTransfer.setData("text/plain",d),t.dragging=new RV(f,jV(t,n),o)};Tr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ar.dragover=Ar.dragenter=(t,e)=>e.preventDefault();Ar.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(jy(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",x=>{o=x(o,t,!1)}):o=wV(t,DV(n.dataTransfer),Ff?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&jV(t,n));if(t.someProp("handleDrop",x=>x(t,n,o||Te.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?X8(t.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=t.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let f=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(f,f,o.content.firstChild):d.replaceRange(f,f,o),d.doc.eq(m))return;let b=d.doc.resolve(f);if(p&&Fe.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Fe(b));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((w,S,C,T)=>x=T),d.setSelection(FN(t,b,d.doc.resolve(x)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};Tr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&so(t)},20))};Tr.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Tr.beforeinput=(t,e)=>{if(gr&&no&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,al(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ar)Tr[t]=Ar[t];function Uf(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class pg{constructor(e,n){this.toDOM=e,this.spec=n||wl,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Er(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof pg&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Uf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ga{constructor(e,n){this.attrs=e,this.spec=n||wl}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Er(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ga&&Uf(this.attrs,e.attrs)&&Uf(this.spec,e.spec)}static is(e){return e.type instanceof ga}destroy(){}}class WN{constructor(e,n){this.attrs=e,this.spec=n||wl}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Er(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof WN&&Uf(this.attrs,e.attrs)&&Uf(this.spec,e.spec)}destroy(){}}class Er{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Er(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Er(e,e,new pg(n,r))}static inline(e,n,r,i){return new Er(e,n,new ga(r,i))}static node(e,n,r,i){return new Er(e,n,new WN(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ga}get widget(){return this.type instanceof pg}}const Fc=[],wl={};class en{constructor(e,n){this.local=e.length?e:Fc,this.children=n.length?n:Fc}static create(e,n){return n.length?mg(n,e,0,wl):fr}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==fr||e.maps.length==0?this:this.mapInner(e,n,0,0,r||wl)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(e,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?Lte(this.children,o||[],e,n,r,i,s):o?new en(o.sort(Sl),Fc):fr}add(e,n){return n.length?this==fr?en.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,u)=>{let d=u+r,f;if(f=LV(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,f,d+1):i.splice(s,0,u,u+l.nodeSize,mg(f,l,d+1,wl)),s+=3}});let o=OV(s?IV(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new en(o.length?this.local.concat(o).sort(Sl):this.local,i||this.children)}remove(e){return e.length==0||this==fr?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let f=0,p;f<e.length;f++)(p=e[f])&&p.from>l&&p.to<u&&(e[f]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=fr?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new en(i,r):fr}forChild(e,n){if(this==fr)return this;if(n.isLeaf)return en.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof ga){let d=Math.max(s,u.from)-s,f=Math.min(o,u.to)-s;d<f&&(i||(i=[])).push(u.copy(d,f))}}if(i){let l=new en(i.sort(Sl),Fc);return r?new ia([l,r]):l}return r||fr}eq(e){if(this==e)return!0;if(!(e instanceof en)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return KN(this.localsInner(e))}localsInner(e){if(this==fr)return Fc;if(e.inlineContent||!this.local.some(ga.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ga||n.push(this.local[r]);return n}forEachSet(e){e(this)}}en.empty=new en([],[]);en.removeOverlap=KN;const fr=en.empty;class ia{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,wl));return ia.from(r)}forChild(e,n){if(n.isLeaf)return en.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=fr&&(s instanceof ia?r=r.concat(s.members):r.push(s))}return ia.from(r)}eq(e){if(!(e instanceof ia)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?KN(r?n:n.sort(Sl)):Fc}static from(e){switch(e.length){case 0:return fr;case 1:return e[0];default:return new ia(e.every(n=>n instanceof en)?e:e.reduce((n,r)=>n.concat(r instanceof en?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function Lte(t,e,n,r,i,s,o){let l=t.slice();for(let d=0,f=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((m,b,x,w)=>{let S=w-x-(b-m);for(let C=0;C<l.length;C+=3){let T=l[C+1];if(T<0||m>T+f-p)continue;let E=l[C]+f-p;b>=E?l[C+1]=m<=E?-2:-1:m>=f&&S&&(l[C]+=S,l[C+1]+=S)}p+=S}),f=n.maps[d].map(f,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let f=n.map(t[d]+s),p=f-i;if(p<0||p>=r.content.size){u=!0;continue}let m=n.map(t[d+1]+s,-1),b=m-i,{index:x,offset:w}=r.content.findIndex(p),S=r.maybeChild(x);if(S&&w==p&&w+S.nodeSize==b){let C=l[d+2].mapInner(n,S,f+1,t[d]+s+1,o);C!=fr?(l[d]=p,l[d+1]=b,l[d+2]=C):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=Ite(l,t,e,n,i,s,o),f=mg(d,r,0,o);e=f.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,m=0;p<f.children.length;p+=3){let b=f.children[p];for(;m<l.length&&l[m]<b;)m+=3;l.splice(m,0,f.children[p],f.children[p+1],f.children[p+2])}}return new en(e.sort(Sl),l)}function OV(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Er(i.from+e,i.to+e,i.type))}return n}function Ite(t,e,n,r,i,s,o){function l(u,d){for(let f=0;f<u.local.length;f++){let p=u.local[f].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[f].spec)}for(let f=0;f<u.children.length;f+=3)l(u.children[f+2],u.children[f]+d+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&l(t[u+2],e[u]+s+1);return n}function LV(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function IV(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function mg(t,e,n,r){let i=[],s=!1;e.forEach((l,u)=>{let d=LV(t,l,u+n);if(d){s=!0;let f=mg(d,l,n+u+1,r);f!=fr&&i.push(u,u+l.nodeSize,f)}});let o=OV(s?IV(t):t,-n).sort(Sl);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new en(o,i):fr}function Sl(t,e){return t.from-e.from||t.to-e.to}function KN(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),wO(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),wO(e,i,r.copy(s.from,r.to)));break}}}return e}function wO(t,e,n){for(;e<t.length&&Sl(n,t[e])>0;)e++;t.splice(e,0,n)}function lv(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=fr&&e.push(r)}),t.cursorWrapper&&e.push(en.create(t.state.doc,[t.cursorWrapper.deco])),ia.from(e)}const Pte={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Bte=zr&&pa<=11;class zte{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Vte{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new zte,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);zr&&pa<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),Bte&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Pte)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hO(this.view)){if(this.suppressingSelectionUpdates)return so(this.view);if(zr&&pa<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&_l(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=mu(s))n.add(s);for(let s=e.anchorNode;s;s=mu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hO(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(e.editable)for(let f=0;f<n.length;f++){let p=this.registerMutation(n[f],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(Di&&u.length){let f=u.filter(p=>p.nodeName=="BR");if(f.length==2){let[p,m]=f;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of f){let b=m.parentNode;b&&b.nodeName=="LI"&&(!p||Hte(e,p)!=b)&&m.remove()}}}let d=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Dy(r)&&(d=qN(e))&&d.eq(tt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,so(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),qte(e)),this.handleDOMChange(s,o,l,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||so(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++){let p=e.addedNodes[f];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(zr&&pa<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:p,nextSibling:m}=e.addedNodes[f];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m)}let o=i&&i.parentNode==e.target?nr(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),u=s&&s.parentNode==e.target?nr(s):e.target.childNodes.length,d=r.localPosFromDOM(e.target,u,1);return{from:l,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let SO=new WeakMap,kO=!1;function qte(t){if(!SO.has(t)&&(SO.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Di,kO)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),kO=!0}}function CO(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return _l(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function Fte(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return CO(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?CO(t,n):null}function Hte(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function Ute(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),u=t.domSelectionRange(),d,f=u.anchorNode;if(f&&t.dom.contains(f.nodeType==1?f:f.parentNode)&&(d=[{node:f,offset:u.anchorOffset}],Dy(u)||d.push({node:u.focusNode,offset:u.focusOffset})),gr&&t.input.lastKeyCode===8)for(let S=s;S>i;S--){let C=r.childNodes[S-1],T=C.pmViewDesc;if(C.nodeName=="BR"&&!T){s=S;break}if(!T||T.size)break}let p=t.state.doc,m=t.someProp("domParser")||mf.fromSchema(t.state.schema),b=p.resolve(o),x=null,w=m.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:$te,context:b});if(d&&d[0].pos!=null){let S=d[0].pos,C=d[1]&&d[1].pos;C==null&&(C=S),x={anchor:S+o,head:C+o}}return{doc:w,sel:x,from:o,to:l}}function $te(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Nr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Nr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Gte=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Wte(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,L=qN(t,R);if(L&&!t.state.selection.eq(L)){if(gr&&no&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",F=>F(t,al(13,"Enter"))))return;let I=t.state.tr.setSelection(L);R=="pointer"?I.setMeta("pointer",!0):R=="key"&&I.scrollIntoView(),s&&I.setMeta("composition",s),t.dispatch(I)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let u=t.state.selection,d=Ute(t,e,n),f=t.state.doc,p=f.slice(d.from,d.to),m,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(m=t.state.selection.to,b="end"):(m=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let x=Xte(p.content,d.doc.content,d.from,m,b);if(x&&t.input.domChangeCount++,(gu&&t.input.lastIOSEnter>Date.now()-225||no)&&i.some(R=>R.nodeType==1&&!Gte.test(R.nodeName))&&(!x||x.endA>=x.endB)&&t.someProp("handleKeyDown",R=>R(t,al(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof Xe&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=EO(t,t.state.doc,d.sel);if(R&&!R.eq(t.state.selection)){let L=t.state.tr.setSelection(R);s&&L.setMeta("composition",s),t.dispatch(L)}}return}t.state.selection.from<t.state.selection.to&&x.start==x.endB&&t.state.selection instanceof Xe&&(x.start>t.state.selection.from&&x.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?x.start=t.state.selection.from:x.endA<t.state.selection.to&&x.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(x.endB+=t.state.selection.to-x.endA,x.endA=t.state.selection.to)),zr&&pa<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let w=d.doc.resolveNoCache(x.start-d.from),S=d.doc.resolveNoCache(x.endB-d.from),C=f.resolve(x.start),T=w.sameParent(S)&&w.parent.inlineContent&&C.end()>=x.endA,E;if((gu&&t.input.lastIOSEnter>Date.now()-225&&(!T||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!T&&w.pos<d.doc.content.size&&(!w.sameParent(S)||!w.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(w.pos,S.pos,"",""))&&(E=tt.findFrom(d.doc.resolve(w.pos+1),1,!0))&&E.head>w.pos)&&t.someProp("handleKeyDown",R=>R(t,al(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>x.start&&Yte(f,x.start,x.endA,w,S)&&t.someProp("handleKeyDown",R=>R(t,al(8,"Backspace")))){no&&gr&&t.domObserver.suppressSelectionUpdates();return}gr&&x.endB==x.start&&(t.input.lastChromeDelete=Date.now()),no&&!T&&w.start()!=S.start()&&S.parentOffset==0&&w.depth==S.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,S=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,al(13,"Enter"))})},20));let N=x.start,A=x.endA,_=R=>{let L=R||t.state.tr.replace(N,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let I=EO(t,L.doc,d.sel);I&&!(gr&&t.composing&&I.empty&&(x.start!=x.endB||t.input.lastChromeDelete<Date.now()-100)&&(I.head==N||I.head==L.mapping.map(A)-1)||zr&&I.empty&&I.head==N)&&L.setSelection(I)}return s&&L.setMeta("composition",s),L.scrollIntoView()},O;if(T){if(w.pos==S.pos){zr&&pa<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>so(t),20));let R=_(t.state.tr.delete(N,A)),L=f.resolve(x.start).marksAcross(f.resolve(x.endA));L&&R.ensureMarks(L),t.dispatch(R)}else if(x.endA==x.endB&&(O=Kte(w.parent.content.cut(w.parentOffset,S.parentOffset),C.parent.content.cut(C.parentOffset,x.endA-C.start())))){let R=_(t.state.tr);O.type=="add"?R.addMark(N,A,O.mark):R.removeMark(N,A,O.mark),t.dispatch(R)}else if(w.parent.child(w.index()).isText&&w.index()==S.index()-(S.textOffset?0:1)){let R=w.parent.textBetween(w.parentOffset,S.parentOffset),L=()=>_(t.state.tr.insertText(R,N,A));t.someProp("handleTextInput",I=>I(t,N,A,R,L))||t.dispatch(L())}}else t.dispatch(_())}function EO(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:FN(t,e.resolve(n.anchor),e.resolve(n.head))}function Kte(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,u;for(let f=0;f<r.length;f++)i=r[f].removeFromSet(i);for(let f=0;f<n.length;f++)s=n[f].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=f=>f.mark(l.addToSet(f.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=f=>f.mark(l.removeFromSet(f.marks));else return null;let d=[];for(let f=0;f<e.childCount;f++)d.push(u(e.child(f)));if(xe.from(d).eq(t))return{mark:l,type:o}}function Yte(t,e,n,r,i){if(n-e<=i.pos-r.pos||cv(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(cv(s,!0,!0));return!o.parent.isTextblock||o.pos>n||cv(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function cv(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function Xte(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&t.size<e.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<e.size&&NO(e.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<t.size&&NO(t.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function NO(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class PV{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new mte,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(DO),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=MO(this),AO(this),this.nodeViews=_O(this),this.docView=aO(this.state.doc,TO(this),lv(this),this.dom,this),this.domObserver=new Vte(this,(r,i,s,o)=>Wte(this,r,i,s,o)),this.domObserver.start(),gte(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&c2(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(DO),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(_V(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=_O(this);Jte(b,this.nodeViews)&&(this.nodeViews=b,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&c2(this),this.editable=MO(this),AO(this);let u=lv(this),d=TO(this),f=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(e.doc,d,u);(p||!e.selection.eq(i.selection))&&(o=!0);let m=f=="preserve"&&o&&this.dom.style.overflowAnchor==null&&_ee(this);if(o){this.domObserver.stop();let b=p&&(zr||gr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Zte(i.selection,e.selection);if(p){let x=gr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Mte(this)),(s||!this.docView.update(e.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=aO(e.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ete(this))?so(this,b):(bV(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():m&&Dee(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Fe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&tO(this,n.getBoundingClientRect(),e)}else tO(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new RV(e.slice,e.move,i<0?void 0:Fe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(zr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Ree(this.dom),so(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return Pee(this,e)}coordsAtPos(e,n=1){return uV(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return Fee(this,n||this.state,e)}pasteHTML(e,n){return Hf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Hf(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return HN(this,e)}destroy(){this.docView&&(yte(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,xee())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return xte(this,e)}domSelectionRange(){let e=this.domSelection();return e?Nr&&this.root.nodeType===11&&Cee(this.dom.ownerDocument)==this.dom&&Fte(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}PV.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function TO(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Er.node(0,t.state.doc.content.size,e)]}function AO(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Er.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function MO(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Zte(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function _O(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Jte(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function DO(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Sa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gg={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Qte=typeof navigator<"u"&&/Mac/.test(navigator.platform),ene=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rr=0;rr<10;rr++)Sa[48+rr]=Sa[96+rr]=String(rr);for(var rr=1;rr<=24;rr++)Sa[rr+111]="F"+rr;for(var rr=65;rr<=90;rr++)Sa[rr]=String.fromCharCode(rr+32),gg[rr]=String.fromCharCode(rr);for(var uv in Sa)gg.hasOwnProperty(uv)||(gg[uv]=Sa[uv]);function tne(t){var e=Qte&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ene&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?gg:Sa)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const nne=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),rne=typeof navigator<"u"&&/Win/.test(navigator.platform);function ine(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let u=e[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))nne?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function sne(t){let e=Object.create(null);for(let n in t)e[ine(n)]=t[n];return e}function dv(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function one(t){return new un({props:{handleKeyDown:BV(t)}})}function BV(t){let e=sne(t);return function(n,r){let i=tne(r),s,o=e[dv(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[dv(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(rne&&r.ctrlKey&&r.altKey)&&(s=Sa[r.keyCode])&&s!=i){let l=e[dv(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const YN=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function zV(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const VV=(t,e,n)=>{let r=zV(t,n);if(!r)return!1;let i=XN(r);if(!i){let o=r.blockRange(),l=o&&Ou(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(YV(t,i,e,-1))return!0;if(r.parent.content.size==0&&(yu(s,"end")||Fe.isSelectable(s)))for(let o=r.depth;;o--){let l=My(t.doc,r.before(o),r.after(o),Te.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(yu(s,"end")?tt.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Fe.create(u.doc,i.pos-s.nodeSize)),e(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},ane=(t,e,n)=>{let r=zV(t,n);if(!r)return!1;let i=XN(r);return i?qV(t,i,e):!1},lne=(t,e,n)=>{let r=HV(t,n);if(!r)return!1;let i=ZN(r);return i?qV(t,i,e):!1};function qV(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let o=e.nodeAfter,l=o,u=e.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let f=l.firstChild;if(!f)return!1;l=f}let d=My(t.doc,s,u,Te.empty);if(!d||d.from!=s||d instanceof Hn&&d.slice.size>=u-s)return!1;if(n){let f=t.tr.step(d);f.setSelection(Xe.create(f.doc,s)),n(f.scrollIntoView())}return!0}function yu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const FV=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=XN(r)}let o=s&&s.nodeBefore;return!o||!Fe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Fe.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function XN(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function HV(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const UV=(t,e,n)=>{let r=HV(t,n);if(!r)return!1;let i=ZN(r);if(!i)return!1;let s=i.nodeAfter;if(YV(t,i,e,1))return!0;if(r.parent.content.size==0&&(yu(s,"start")||Fe.isSelectable(s))){let o=My(t.doc,r.before(),r.after(),Te.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(yu(s,"start")?tt.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Fe.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},$V=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=ZN(r)}let o=s&&s.nodeAfter;return!o||!Fe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Fe.create(t.doc,s.pos)).scrollIntoView()),!0)};function ZN(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const cne=(t,e)=>{let n=t.selection,r=n instanceof Fe,i;if(r){if(n.node.isTextblock||!_a(t.doc,n.from))return!1;i=n.from}else if(i=Ay(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Fe.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},une=(t,e)=>{let n=t.selection,r;if(n instanceof Fe){if(n.node.isTextblock||!_a(t.doc,n.to))return!1;r=n.to}else if(r=Ay(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},dne=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ou(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},GV=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function JN(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const fne=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=JN(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),u=t.tr.replaceWith(l,l,o.createAndFill());u.setSelection(tt.near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0},WV=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof li||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=JN(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Xe.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},KV=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(io(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ou(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function hne(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Fe&&e.selection.node.isBlock)return!r.parentOffset||!io(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){u=r.end(b)==r.pos+(r.depth-b),d=r.start(b)==r.pos-(r.depth-b),l=JN(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),s.unshift(u&&l?{type:l}:null),o=b;break}else{if(b==1)return!1;s.unshift(null)}let f=e.tr;(e.selection instanceof Xe||e.selection instanceof li)&&f.deleteSelection();let p=f.mapping.map(r.pos),m=io(f.doc,p,s.length,s);if(m||(s[0]=l?{type:l}:null,m=io(f.doc,p,s.length,s)),!m)return!1;if(f.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let b=f.mapping.map(r.before(o)),x=f.doc.resolve(b);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&f.setNodeMarkup(f.mapping.map(r.before(o)),l)}return n&&n(f.scrollIntoView()),!0}}const pne=hne(),mne=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Fe.create(t.doc,i))),!0)};function gne(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||_a(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function YV(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&gne(t,e,n))return!0;let d=!u&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let b=e.pos+s.nodeSize,x=xe.empty;for(let C=o.length-1;C>=0;C--)x=xe.from(o[C].create(null,x));x=xe.from(i.copy(x));let w=t.tr.step(new $n(e.pos-1,b,e.pos,b,new Te(x,1,0),o.length,!0)),S=w.doc.resolve(b+2*o.length);S.nodeAfter&&S.nodeAfter.type==i.type&&_a(w.doc,S.pos)&&w.join(S.pos),n(w.scrollIntoView())}return!0}let f=s.type.spec.isolating||r>0&&u?null:tt.findFrom(e,1),p=f&&f.$from.blockRange(f.$to),m=p&&Ou(p);if(m!=null&&m>=e.depth)return n&&n(t.tr.lift(p,m).scrollIntoView()),!0;if(d&&yu(s,"start",!0)&&yu(i,"end")){let b=i,x=[];for(;x.push(b),!b.isTextblock;)b=b.lastChild;let w=s,S=1;for(;!w.isTextblock;w=w.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,w.content)){if(n){let C=xe.empty;for(let E=x.length-1;E>=0;E--)C=xe.from(x[E].copy(C));let T=t.tr.step(new $n(e.pos-x.length,e.pos+s.nodeSize,e.pos+S,e.pos+s.nodeSize-S,new Te(C,x.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function XV(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Xe.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const yne=XV(-1),bne=XV(1);function xne(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&BN(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function RO(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)i=!0;else{let f=n.doc.resolve(d),p=f.index();i=f.parent.canReplaceWith(p,p+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,t,e)}r(s.scrollIntoView())}return!0}}function QN(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}QN(YN,VV,FV);QN(YN,UV,$V);QN(GV,WV,KV,pne);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function vne(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return wne(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function wne(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=o.resolve(e.start-2);s=new cg(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new cg(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=BN(s,n,r,e);return l?(t&&Sne(t,e,l,i,n),!0):!1}function Sne(t,e,n,r,i){let s=xe.empty;for(let f=n.length-1;f>=0;f--)s=xe.from(n[f].type.create(n[f].attrs,s));t.step(new $n(e.start-(r?2:0),e.end,e.start,e.end,new Te(s,0,0),n.length,!0));let o=0;for(let f=0;f<n.length;f++)n[f].type==i&&(o=f+1);let l=n.length-o,u=e.start+n.length-(r?2:0),d=e.parent;for(let f=e.startIndex,p=e.endIndex,m=!0;f<p;f++,m=!1)!m&&io(t.doc,u,l)&&(t.split(u,l),u+=2*l),u+=d.child(f).nodeSize;return t}function kne(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?Cne(e,n,t,s):Ene(e,n,s):!0:!1}}function Cne(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new $n(s-1,o,s,o,new Te(xe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new cg(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Ou(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return _a(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),e(i.scrollIntoView()),!0}function Ene(t,e,n){let r=t.tr,i=n.parent;for(let b=n.end,x=n.endIndex-1,w=n.startIndex;x>w;x--)b-=i.child(x).nodeSize,r.delete(b-1,b+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),f=s.index(-1);if(!d.canReplace(f+(l?0:1),f+1,o.content.append(u?xe.empty:xe.from(i))))return!1;let p=s.pos,m=p+o.nodeSize;return r.step(new $n(p-(l?1:0),m+(u?1:0),p+1,m-1,new Te((l?xe.empty:xe.from(i.copy(xe.empty))).append(u?xe.empty:xe.from(i.copy(xe.empty))),l?0:1,u?0:1),l?0:1)),e(r.scrollIntoView()),!0}function Nne(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=t)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,f=xe.from(d?t.create():null),p=new Te(xe.from(t.create(null,xe.from(l.type.create(null,f)))),d?3:1,0),m=s.start,b=s.end;n(e.tr.step(new $n(m-(d?3:1),b,m,b,p,1,!0)).scrollIntoView())}return!0}}var Tne=Object.defineProperty,ZV=(t,e)=>{for(var n in e)Tne(t,n,{get:e[n],enumerable:!0})};function Oy(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Ly=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...d)=>{const f=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!t,u=t||i.tr,d=()=>(!l&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...x)=>{const w=this.buildProps(u,e),S=m(...x)(w);return o.push(S),f}])),run:d};return f}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:Oy({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},Ane=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function JV(t,e){const n=new tV(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var QV=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&QV(r)}return t};function lm(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return QV(n)}function $f(t,e,n){if(t instanceof ha||t instanceof xe)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return xe.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),$f("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new z8({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?mf.fromSchema(u).parseSlice(lm(t),n.parseOptions):mf.fromSchema(u).parse(lm(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=mf.fromSchema(e);return n.slice?s.parseSlice(lm(t),n.parseOptions).content:s.parse(lm(t),n.parseOptions)}return $f("",e,n)}function u2(t,e,n={},r={}){return $f(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function Mne(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function _ne(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function Dne(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Iy(t){return e=>Dne(e.$from,t)}function Ve(t,e,n){return t.config[e]===void 0&&t.parent?Ve(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ve(t.parent,e,n):null}):t.config[e]}function eT(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ve(e,"addExtensions",n);return r?[e,...eT(r())]:e}).flat(10)}function tT(t,e){const n=$l.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function eq(t){return typeof t=="function"}function Et(t,e=void 0,...n){return eq(t)?e?t.bind(e)(...n):t(...n):t}function Rne(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Gf(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function tq(t){const e=[],{nodeExtensions:n,markExtensions:r}=Gf(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=Ve(o,"addGlobalAttributes",l);if(!u)return;u().forEach(f=>{f.types.forEach(p=>{Object.entries(f.attributes).forEach(([m,b])=>{e.push({type:p,name:m,attribute:{...s,...b}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=Ve(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([f,p])=>{const m={...s,...p};typeof m?.default=="function"&&(m.default=m.default()),m?.isRequired&&m?.default===void 0&&delete m.default,e.push({type:o.name,name:f,attribute:m})})}),e}function Tn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(f=>!u.includes(f));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(f=>f.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],d=new Map;u.forEach(f=>{const[p,m]=f.split(":").map(b=>b.trim());d.set(p,m)}),l.forEach(f=>{const[p,m]=f.split(":").map(b=>b.trim());d.set(p,m)}),r[i]=Array.from(d.entries()).map(([f,p])=>`${f}: ${p}`).join("; ")}else r[i]=s}),r},{})}function yg(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Tn(n,r),{})}function jne(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function jO(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):jne(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function OO(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Rne(n)?!1:n!=null))}function One(t,e){var n;const r=tq(t),{nodeExtensions:i,markExtensions:s}=Gf(t),o=(n=i.find(d=>Ve(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const f=r.filter(C=>C.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},m=t.reduce((C,T)=>{const E=Ve(T,"extendNodeSchema",p);return{...C,...E?E(d):{}}},{}),b=OO({...m,content:Et(Ve(d,"content",p)),marks:Et(Ve(d,"marks",p)),group:Et(Ve(d,"group",p)),inline:Et(Ve(d,"inline",p)),atom:Et(Ve(d,"atom",p)),selectable:Et(Ve(d,"selectable",p)),draggable:Et(Ve(d,"draggable",p)),code:Et(Ve(d,"code",p)),whitespace:Et(Ve(d,"whitespace",p)),linebreakReplacement:Et(Ve(d,"linebreakReplacement",p)),defining:Et(Ve(d,"defining",p)),isolating:Et(Ve(d,"isolating",p)),attrs:Object.fromEntries(f.map(C=>{var T,E;return[C.name,{default:(T=C?.attribute)==null?void 0:T.default,validate:(E=C?.attribute)==null?void 0:E.validate}]}))}),x=Et(Ve(d,"parseHTML",p));x&&(b.parseDOM=x.map(C=>jO(C,f)));const w=Ve(d,"renderHTML",p);w&&(b.toDOM=C=>w({node:C,HTMLAttributes:yg(C,f)}));const S=Ve(d,"renderText",p);return S&&(b.toText=S),[d.name,b]})),u=Object.fromEntries(s.map(d=>{const f=r.filter(S=>S.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},m=t.reduce((S,C)=>{const T=Ve(C,"extendMarkSchema",p);return{...S,...T?T(d):{}}},{}),b=OO({...m,inclusive:Et(Ve(d,"inclusive",p)),excludes:Et(Ve(d,"excludes",p)),group:Et(Ve(d,"group",p)),spanning:Et(Ve(d,"spanning",p)),code:Et(Ve(d,"code",p)),attrs:Object.fromEntries(f.map(S=>{var C,T;return[S.name,{default:(C=S?.attribute)==null?void 0:C.default,validate:(T=S?.attribute)==null?void 0:T.validate}]}))}),x=Et(Ve(d,"parseHTML",p));x&&(b.parseDOM=x.map(S=>jO(S,f)));const w=Ve(d,"renderHTML",p);return w&&(b.toDOM=S=>w({mark:S,HTMLAttributes:yg(S,f)})),[d.name,b]}));return new z8({topNode:o,nodes:l,marks:u})}function Lne(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function nT(t){return t.sort((n,r)=>{const i=Ve(n,"priority")||100,s=Ve(r,"priority")||100;return i>s?-1:i<s?1:0})}function nq(t){const e=nT(eT(t)),n=Lne(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function rq(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(u,d,f,p)=>{var m;u.isBlock&&d>r&&(l+=s);const b=o?.[u.type.name];if(b)return f&&(l+=b({node:u,pos:d,parent:f,index:p,range:e})),!1;u.isText&&(l+=(m=u?.text)==null?void 0:m.slice(Math.max(r,d)-d,i-d))}),l}function Ine(t,e){const n={from:0,to:t.content.size};return rq(t,n,e)}function iq(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function po(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function sq(t,e){const n=po(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function An(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Pne(t,e){const n=An(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Py(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function oq(t,e){const n=Py(typeof e=="string"?e:e.name,t.schema);return n==="node"?Pne(t,e):n==="mark"?sq(t,e):{}}function Bne(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function zne(t){const e=Bne(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function aq(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=e.slice(s).map(l,-1),f=e.slice(s).map(u),p=e.invert().map(d,-1),m=e.invert().map(f);r.push({oldRange:{from:p,to:m},newRange:{from:d,to:f}})})}),zne(r)}function rT(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function bg(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:rT(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function lq(t,e,n={}){return t.find(r=>r.type===e&&bg(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function LO(t,e,n={}){return!!lq(t,e,n)}function iT(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!lq([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&LO([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;u<t.parent.childCount&&LO([...t.parent.child(u).marks],e,n);)d+=t.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function sT(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=iT(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var Vne=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===e?o=l:s-=1}return[o,s]};function fv(t,e){return e.nodes[t]||e.marks[t]||null}function Pm(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var qne=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var u,d;const f=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?f:f.slice(0,Math.max(0,r-s))}),n};function d2(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?po(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>bg(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:m})=>{const b=p.pos,x=m.pos;t.doc.nodesBetween(b,x,(w,S)=>{if(!w.isText&&!w.marks.length)return;const C=Math.max(b,S),T=Math.min(x,S+w.nodeSize),E=T-C;o+=E,l.push(...w.marks.map(N=>({mark:N,from:C,to:T})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>bg(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,m)=>p+m.to-m.from,0);return(u>0?u+d:u)>=o}function ka(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?An(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const b=Math.max(r,m),x=Math.min(i,m+p.nodeSize);l.push({node:p,from:b,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>bg(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,m)=>p+m.to-m.from,0)>=u}function Fne(t,e,n={}){if(!e)return ka(t,null,n)||d2(t,null,n);const r=Py(e,t.schema);return r==="node"?ka(t,e,n):r==="mark"?d2(t,e,n):!1}var Hne=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=Iy(l=>l.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},Une=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function IO(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function PO(t,e){const{nodeExtensions:n}=Gf(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Et(Ve(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function By(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(By(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function cq(t){return t instanceof Fe}function uq(t){return t instanceof Xe}function fl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function dq(t,e=null){if(!e)return null;const n=tt.atStart(t),r=tt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Xe.create(t,fl(0,i,s),fl(t.content.size,i,s)):Xe.create(t,fl(e,i,s),fl(e,i,s))}function $ne(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Hn||i instanceof $n))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,u,d,f)=>{o===0&&(o=f)}),t.setSelection(tt.near(t.doc.resolve(o),n))}var zy=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},Gne=(t,e)=>{if(rT(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function cm(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(m=>m.type.spec.code))return!1;let f=!1;const p=qne(d)+s;return o.forEach(m=>{if(f)return;const b=Gne(p,m.find);if(!b)return;const x=u.state.tr,w=Oy({state:u.state,transaction:x}),S={from:r-(b[0].length-s.length),to:i},{commands:C,chain:T,can:E}=new Ly({editor:n,state:w});m.handler({state:w,range:S,match:b,commands:C,chain:T,can:E})===null||!x.steps.length||(m.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),f=!0)}),f}function Wne(t){const{editor:e,rules:n}=t,r=new un({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:f}=u;typeof f=="string"?f=f:f=tT(xe.from(f),o.schema);const{from:p}=u,m=p+f.length;cm({editor:e,from:p,to:m,text:f,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return cm({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&cm({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?cm({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function Kne(t){return Object.prototype.toString.call(t).slice(8,-1)}function um(t){return Kne(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function fq(t,e){const n={...t};return um(t)&&um(e)&&Object.keys(e).forEach(r=>{um(e[r])&&um(t[r])?n[r]=fq(t[r],e[r]):n[r]=e[r]}),n}var oT=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Et(Ve(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Et(Ve(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>fq(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Gl=class hq extends oT{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new hq(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Yne(t){return typeof t=="number"}var Xne=class{constructor(t){this.find=t.find,this.handler=t.handler}},Zne=(t,e,n)=>{if(rT(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Jne(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:u,chain:d,can:f}=new Ly({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,i,(b,x)=>{var w,S,C,T,E;if((S=(w=b.type)==null?void 0:w.spec)!=null&&S.code||!(b.isText||b.isTextblock||b.isInline))return;const N=(E=(T=(C=b.content)==null?void 0:C.size)!=null?T:b.nodeSize)!=null?E:0,A=Math.max(r,x),_=Math.min(i,x+N);if(A>=_)return;const O=b.isText?b.text||"":b.textBetween(A-x,_-x,void 0,"");Zne(O,s.find,o).forEach(L=>{if(L.index===void 0)return;const I=A+L.index+1,F=I+L[0].length,q={from:n.tr.mapping.map(I),to:n.tr.mapping.map(F)},U=s.handler({state:n,range:q,match:L,commands:u,chain:d,can:f,pasteEvent:o,dropEvent:l});p.push(U)})}),p.every(b=>b!==null)}var dm=null,Qne=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function ere(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:f,from:p,to:m,rule:b,pasteEvt:x})=>{const w=f.tr,S=Oy({state:f,transaction:w});if(!(!Jne({editor:e,state:S,from:Math.max(p-1,0),to:m.b-1,rule:b,pasteEvent:x,dropEvent:l})||!w.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(f=>new un({view(p){const m=x=>{var w;r=(w=p.dom.parentElement)!=null&&w.contains(x.target)?p.dom.parentElement:null,r&&(dm=e)},b=()=>{dm&&(dm=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(s=r===p.dom.parentElement,l=m,!s){const b=dm;b?.isEditable&&setTimeout(()=>{const x=b.state.selection;x&&b.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,m)=>{var b;const x=(b=m.clipboardData)==null?void 0:b.getData("text/html");return o=m,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,m,b)=>{const x=p[0],w=x.getMeta("uiEvent")==="paste"&&!i,S=x.getMeta("uiEvent")==="drop"&&!s,C=x.getMeta("applyPasteRules"),T=!!C;if(!w&&!S&&!T)return;if(T){let{text:A}=C;typeof A=="string"?A=A:A=tT(xe.from(A),b.schema);const{from:_}=C,O=_+A.length,R=Qne(A);return u({rule:f,state:b,from:_,to:{b:O},pasteEvt:R})}const E=m.doc.content.findDiffStart(b.doc.content),N=m.doc.content.findDiffEnd(b.doc.content);if(!(!Yne(E)||!N||E===N.b))return u({rule:f,state:b,from:E,to:N,pasteEvt:o})}}))}var Vy=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=nq(t),this.schema=One(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:fv(e.name,this.schema)},r=Ve(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return nT([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:fv(r.name,this.schema)},s=[],o=Ve(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&Ve(r,"exitable",i)&&(l.ArrowRight=()=>Gl.handleExit({editor:t,mark:r})),o){const m=Object.fromEntries(Object.entries(o()).map(([b,x])=>[b,()=>x({editor:t})]));l={...l,...m}}const u=one(l);s.push(u);const d=Ve(r,"addInputRules",i);if(IO(r,t.options.enableInputRules)&&d){const m=d();if(m&&m.length){const b=Wne({editor:t,rules:m}),x=Array.isArray(b)?b:[b];s.push(...x)}}const f=Ve(r,"addPasteRules",i);if(IO(r,t.options.enablePasteRules)&&f){const m=f();if(m&&m.length){const b=ere({editor:t,rules:m});s.push(...b)}}const p=Ve(r,"addProseMirrorPlugins",i);if(p){const m=p();s.push(...m)}return s})}get attributes(){return tq(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Gf(this.extensions);return Object.fromEntries(e.filter(n=>!!Ve(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:An(n.name,this.schema)},s=Ve(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,f,p)=>{const m=yg(l,r);return s()({node:l,view:u,getPos:d,decorations:f,innerDecorations:p,editor:t,extension:n,HTMLAttributes:m})};return[n.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Gf(this.extensions);return Object.fromEntries(e.filter(n=>!!Ve(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:po(n.name,this.schema)},s=Ve(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const f=yg(l,r);return s()({mark:l,view:u,inline:d,editor:t,extension:n,HTMLAttributes:f,updateAttributes:p=>{gie(l,t,p)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:fv(e.name,this.schema)};e.type==="mark"&&((n=Et(Ve(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Ve(e,"onBeforeCreate",r),s=Ve(e,"onCreate",r),o=Ve(e,"onUpdate",r),l=Ve(e,"onSelectionUpdate",r),u=Ve(e,"onTransaction",r),d=Ve(e,"onFocus",r),f=Ve(e,"onBlur",r),p=Ve(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),f&&this.editor.on("blur",f),p&&this.editor.on("destroy",p)})}};Vy.resolve=nq;Vy.sort=nT;Vy.flatten=eT;var tre={};ZV(tre,{ClipboardTextSerializer:()=>mq,Commands:()=>bq,Delete:()=>xq,Drop:()=>vq,Editable:()=>wq,FocusEvents:()=>kq,Keymap:()=>Cq,Paste:()=>Eq,Tabindex:()=>Nq,focusEventsPluginKey:()=>Sq});var mn=class pq extends oT{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new pq(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},mq=mn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new un({key:new Wn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(f=>f.$from.pos)),l=Math.max(...s.map(f=>f.$to.pos)),u=iq(n);return rq(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),gq={};ZV(gq,{blur:()=>nre,clearContent:()=>rre,clearNodes:()=>ire,command:()=>sre,createParagraphNear:()=>ore,cut:()=>are,deleteCurrentNode:()=>lre,deleteNode:()=>cre,deleteRange:()=>ure,deleteSelection:()=>dre,enter:()=>fre,exitCode:()=>hre,extendMarkRange:()=>pre,first:()=>mre,focus:()=>yre,forEach:()=>bre,insertContent:()=>xre,insertContentAt:()=>wre,joinBackward:()=>Cre,joinDown:()=>kre,joinForward:()=>Ere,joinItemBackward:()=>Nre,joinItemForward:()=>Tre,joinTextblockBackward:()=>Are,joinTextblockForward:()=>Mre,joinUp:()=>Sre,keyboardShortcut:()=>Dre,lift:()=>Rre,liftEmptyBlock:()=>jre,liftListItem:()=>Ore,newlineInCode:()=>Lre,resetAttributes:()=>Ire,scrollIntoView:()=>Pre,selectAll:()=>Bre,selectNodeBackward:()=>zre,selectNodeForward:()=>Vre,selectParentNode:()=>qre,selectTextblockEnd:()=>Fre,selectTextblockStart:()=>Hre,setContent:()=>Ure,setMark:()=>Gre,setMeta:()=>Wre,setNode:()=>Kre,setNodeSelection:()=>Yre,setTextSelection:()=>Xre,sinkListItem:()=>Zre,splitBlock:()=>Jre,splitListItem:()=>Qre,toggleList:()=>eie,toggleMark:()=>tie,toggleNode:()=>nie,toggleWrap:()=>rie,undoInputRule:()=>iie,unsetAllMarks:()=>sie,unsetMark:()=>oie,updateAttributes:()=>aie,wrapIn:()=>lie,wrapInList:()=>cie});var nre=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),rre=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),ire=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:f}=e,p=d.resolve(f.map(u)),m=d.resolve(f.map(u+l.nodeSize)),b=p.blockRange(m);if(!b)return;const x=Ou(b);if(l.type.isTextblock){const{defaultType:w}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(b.start,w)}(x||x===0)&&e.lift(b,x)})}),!0},sre=t=>e=>t(e),ore=()=>({state:t,dispatch:e})=>WV(t,e),are=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Xe(r.doc.resolve(Math.max(o-1,0)))),!0},lre=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),u=i.after(s);t.delete(l,u).scrollIntoView()}return!0}return!1},cre=t=>({tr:e,state:n,dispatch:r})=>{const i=An(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);e.delete(u,d).scrollIntoView()}return!0}return!1},ure=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},dre=()=>({state:t,dispatch:e})=>YN(t,e),fre=()=>({commands:t})=>t.keyboardShortcut("Enter"),hre=()=>({state:t,dispatch:e})=>fne(t,e),pre=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=po(t,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:f}=l;if(i){const p=iT(u,s,e);if(p&&p.from<=d&&p.to>=f){const m=Xe.create(o,p.from,p.to);n.setSelection(m)}}return!0},mre=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function gre(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function aT(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var yre=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(aT()||gre())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!uq(n.state.selection))return o(),!0;const l=dq(i.doc,t)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},bre=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),xre=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),vre=t=>!("type"in t),wre=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=S=>{s.emit("contentError",{editor:s,error:S,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{$f(e,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(S){u(S)}try{l=$f(e,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(S){return u(S),!1}let{from:f,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,b=!0;if((vre(l)?l:[l]).forEach(S=>{S.check(),m=m?S.isText&&S.marks.length===0:!1,b=b?S.isBlock:!1}),f===p&&b){const{parent:S}=r.doc.resolve(f);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(f-=1,p+=1)}let w;if(m){if(Array.isArray(e))w=e.map(S=>S.text||"").join("");else if(e instanceof xe){let S="";e.forEach(C=>{C.text&&(S+=C.text)}),w=S}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,f,p)}else{w=l;const S=r.doc.resolve(f),C=S.node(),T=S.parentOffset===0,E=C.isText||C.isTextblock,N=C.content.size>0;T&&E&&N&&(f=Math.max(0,f-1)),r.replaceWith(f,p,w)}n.updateSelection&&$ne(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:w})}return!0},Sre=()=>({state:t,dispatch:e})=>cne(t,e),kre=()=>({state:t,dispatch:e})=>une(t,e),Cre=()=>({state:t,dispatch:e})=>VV(t,e),Ere=()=>({state:t,dispatch:e})=>UV(t,e),Nre=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ay(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Tre=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ay(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Are=()=>({state:t,dispatch:e})=>ane(t,e),Mre=()=>({state:t,dispatch:e})=>lne(t,e);function yq(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function _re(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const u=e[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))aT()||yq()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var Dre=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=_re(t).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const f=d.map(r.mapping);f&&i&&r.maybeStep(f)}),!0},Rre=(t,e={})=>({state:n,dispatch:r})=>{const i=An(t,n.schema);return ka(n,i,e)?dne(n,r):!1},jre=()=>({state:t,dispatch:e})=>KV(t,e),Ore=t=>({state:e,dispatch:n})=>{const r=An(t,e.schema);return kne(r)(e,n)},Lre=()=>({state:t,dispatch:e})=>GV(t,e);function BO(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var Ire=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Py(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=An(t,r.schema)),l==="mark"&&(o=po(t,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,BO(d.attrs,e)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(f,f+d.nodeSize,o.create(BO(p.attrs,e)))})})}),!0):!1},Pre=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),Bre=()=>({tr:t,dispatch:e})=>{if(e){const n=new li(t.doc);t.setSelection(n)}return!0},zre=()=>({state:t,dispatch:e})=>FV(t,e),Vre=()=>({state:t,dispatch:e})=>$V(t,e),qre=()=>({state:t,dispatch:e})=>mne(t,e),Fre=()=>({state:t,dispatch:e})=>bne(t,e),Hre=()=>({state:t,dispatch:e})=>yne(t,e),Ure=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=u2(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function $re(t,e,n){var r;const{selection:i}=e;let s=null;if(uq(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,u.pos,(f,p,m)=>{if(d)return!1;if(f.isInline){const b=!m||m.type.allowsMarkType(n),x=!!n.isInSet(f.marks)||!f.marks.some(w=>w.type.excludes(n));d=b&&x}return!d}),d})}var Gre=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=po(t,r.schema);if(i)if(o){const d=sq(r,u);n.addStoredMark(u.create({...d,...e}))}else l.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(f,p,(m,b)=>{const x=Math.max(b,f),w=Math.min(b+m.nodeSize,p);m.marks.find(C=>C.type===u)?m.marks.forEach(C=>{u===C.type&&n.addMark(x,w,u.create({...C.attrs,...e}))}):n.addMark(x,w,u.create(e))})});return $re(r,n,u)},Wre=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),Kre=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=An(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>RO(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>RO(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Yre=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=fl(t,0,r.content.size),s=Fe.create(r,i);e.setSelection(s)}return!0},Xre=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Xe.atStart(r).from,l=Xe.atEnd(r).to,u=fl(i,o,l),d=fl(s,o,l),f=Xe.create(r,u,d);e.setSelection(f)}return!0},Zre=t=>({state:e,dispatch:n})=>{const r=An(t,e.schema);return Nne(r)(e,n)};function zO(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var Jre=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:u}=s,d=i.extensionManager.attributes,f=Pm(d,l.node().type.name,l.node().attrs);if(s instanceof Fe&&s.node.isBlock)return!l.parentOffset||!io(o,l.pos)?!1:(r&&(t&&zO(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,m=l.depth===0?void 0:Mne(l.node(-1).contentMatchAt(l.indexAfter(-1)));let b=p&&m?[{type:m,attrs:f}]:void 0,x=io(e.doc,e.mapping.map(l.pos),1,b);if(!b&&!x&&io(e.doc,e.mapping.map(l.pos),1,m?[{type:m}]:void 0)&&(x=!0,b=m?[{type:m,attrs:f}]:void 0),r){if(x&&(s instanceof Xe&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,b),m&&!p&&!l.parentOffset&&l.parent.type!==m)){const w=e.mapping.map(l.before()),S=e.doc.resolve(w);l.node(-1).canReplaceWith(S.index(),S.index()+1,m)&&e.setNodeMarkup(e.mapping.map(l.before()),m)}t&&zO(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return x},Qre=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=An(t,r.schema),{$from:u,$to:d}=r.selection,f=r.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const m=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let C=xe.empty;const T=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-T;R>=u.depth-3;R-=1)C=xe.from(u.node(R).copy(C));const E=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,N={...Pm(m,u.node().type.name,u.node().attrs),...e},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(N))||void 0;C=C.append(xe.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(T-1));n.replace(_,u.after(-E),new Te(C,4-T,0));let O=-1;n.doc.nodesBetween(_,n.doc.content.size,(R,L)=>{if(O>-1)return!1;R.isTextblock&&R.content.size===0&&(O=L+1)}),O>-1&&n.setSelection(Xe.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const b=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...Pm(m,p.type.name,p.attrs),...e},w={...Pm(m,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,d.pos);const S=b?[{type:l,attrs:x},{type:b,attrs:w}]:[{type:l,attrs:x}];if(!io(n.doc,u.pos,2))return!1;if(i){const{selection:C,storedMarks:T}=r,{splittableMarks:E}=s.extensionManager,N=T||C.$to.parentOffset&&C.$from.marks();if(n.split(u.pos,2,S).scrollIntoView(),!N||!i)return!0;const A=N.filter(_=>E.includes(_.type.name));n.ensureMarks(A)}return!0},hv=(t,e)=>{const n=Iy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&_a(t.doc,n.pos)&&t.join(n.pos),!0},pv=(t,e)=>{const n=Iy(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&_a(t.doc,r)&&t.join(r),!0},eie=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:f})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,b=An(t,o.schema),x=An(e,o.schema),{selection:w,storedMarks:S}=o,{$from:C,$to:T}=w,E=C.blockRange(T),N=S||w.$to.parentOffset&&w.$from.marks();if(!E)return!1;const A=Iy(_=>PO(_.type.name,p))(w);if(E.depth>=1&&A&&E.depth-A.depth<=1){if(A.node.type===b)return d.liftListItem(x);if(PO(A.node.type.name,p)&&b.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,b),!0)).command(()=>hv(s,b)).command(()=>pv(s,b)).run()}return!n||!N||!l?u().command(()=>f().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>hv(s,b)).command(()=>pv(s,b)).run():u().command(()=>{const _=f().wrapInList(b,r),O=N.filter(R=>m.includes(R.type.name));return s.ensureMarks(O),_?!0:d.clearNodes()}).wrapInList(b,r).command(()=>hv(s,b)).command(()=>pv(s,b)).run()},tie=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=po(t,r.schema);return d2(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},nie=(t,e,n={})=>({state:r,commands:i})=>{const s=An(t,r.schema),o=An(e,r.schema),l=ka(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},rie=(t,e={})=>({state:n,commands:r})=>{const i=An(t,n.schema);return ka(n,i,e)?r.lift(i):r.wrapIn(i,e)},iie=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},sie=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},oie=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,u=po(t,r.schema),{$from:d,empty:f,ranges:p}=l;if(!i)return!0;if(f&&o){let{from:m,to:b}=l;const x=(s=d.marks().find(S=>S.type===u))==null?void 0:s.attrs,w=iT(d,u,x);w&&(m=w.from,b=w.to),n.removeMark(m,b,u)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,u)});return n.removeStoredMark(u),!0},aie=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Py(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=An(t,r.schema)),l==="mark"&&(o=po(t,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;let p,m,b,x;n.selection.empty?r.doc.nodesBetween(d,f,(w,S)=>{s&&s===w.type&&(b=Math.max(S,d),x=Math.min(S+w.nodeSize,f),p=S,m=w)}):r.doc.nodesBetween(d,f,(w,S)=>{S<d&&s&&s===w.type&&(b=Math.max(S,d),x=Math.min(S+w.nodeSize,f),p=S,m=w),S>=d&&S<=f&&(s&&s===w.type&&n.setNodeMarkup(S,void 0,{...w.attrs,...e}),o&&w.marks.length&&w.marks.forEach(C=>{if(o===C.type){const T=Math.max(S,d),E=Math.min(S+w.nodeSize,f);n.addMark(T,E,o.create({...C.attrs,...e}))}}))}),m&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(w=>{o===w.type&&n.addMark(b,x,o.create({...w.attrs,...e}))}))}),!0):!1},lie=(t,e={})=>({state:n,dispatch:r})=>{const i=An(t,n.schema);return xne(i,e)(n,r)},cie=(t,e={})=>({state:n,dispatch:r})=>{const i=An(t,n.schema);return vne(i,e)(n,r)},bq=mn.create({name:"commands",addCommands(){return{...gq}}}),xq=mn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,t))!=null?d:t.getMeta("y-sync$"))return;const f=JV(t.before,[t,...e]);aq(f).forEach(b=>{f.mapping.mapResult(b.oldRange.from).deletedAfter&&f.mapping.mapResult(b.oldRange.to).deletedBefore&&f.before.nodesBetween(b.oldRange.from,b.oldRange.to,(x,w)=>{const S=w+x.nodeSize-2,C=b.oldRange.from<=w&&S<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:w,to:S,newFrom:f.mapping.map(w),newTo:f.mapping.map(S),deletedRange:b.oldRange,newRange:b.newRange,partial:!C,editor:this.editor,transaction:t,combinedTransform:f})})});const m=f.mapping;f.steps.forEach((b,x)=>{var w,S;if(b instanceof Yi){const C=m.slice(x).map(b.from,-1),T=m.slice(x).map(b.to),E=m.invert().map(C,-1),N=m.invert().map(T),A=(w=f.doc.nodeAt(C-1))==null?void 0:w.marks.some(O=>O.eq(b.mark)),_=(S=f.doc.nodeAt(T))==null?void 0:S.marks.some(O=>O.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:E,to:N},newRange:{from:C,to:T},partial:!!(_||A),editor:this.editor,transaction:t,combinedTransform:f})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),vq=mn.create({name:"drop",addProseMirrorPlugins(){return[new un({key:new Wn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),wq=mn.create({name:"editable",addProseMirrorPlugins(){return[new un({key:new Wn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Sq=new Wn("focusEvents"),kq=mn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new un({key:Sq,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Cq=mn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:f,$anchor:p}=u,{pos:m,parent:b}=p,x=p.parent.isTextblock&&m>0?l.doc.resolve(m-1):p,w=x.parent.type.spec.isolating,S=p.pos-p.parentOffset,C=w&&x.parent.childCount===1?S===p.pos:tt.atStart(d).from===m;return!f||!b.type.isTextblock||b.textContent.length||!C||C&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return aT()||yq()?s:i},addProseMirrorPlugins(){return[new un({key:new Wn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const r=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),i=t.some(w=>w.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,u=tt.atStart(e.doc).from,d=tt.atEnd(e.doc).to;if(s||!(o===u&&l===d)||!By(n.doc))return;const m=n.tr,b=Oy({state:n,transaction:m}),{commands:x}=new Ly({editor:this.editor,state:b});if(x.clearNodes(),!!m.steps.length)return m}})]}}),Eq=mn.create({name:"paste",addProseMirrorPlugins(){return[new un({key:new Wn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),Nq=mn.create({name:"tabindex",addProseMirrorPlugins(){return[new un({key:new Wn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),uie=class Hc{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Hc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Hc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Hc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new Hc(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),e.push(new Hc(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},die=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function fie(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var hie=class extends Ane{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=dq(e,this.options.autofocus);this.editorState=Jc.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=fie(die,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=eq(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[wq,mq.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),bq,kq,Cq,Nq,vq,Eq,xq].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Vy(r,this)}createCommandManager(){this.commandManager=new Ly({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=u2(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=u2(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new PV(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return oq(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Fne(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return tT(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return Ine(this.state.doc,{blockSeparator:e,textSerializers:{...iq(this.schema),...n}})}get isEmpty(){return By(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new uie(e,this)}get $doc(){return this.$pos(0)}};function bu(t){return new zy({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Et(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),f=d+o.length;if(sT(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(w=>w===t.type&&w!==b.mark.type)).filter(b=>b.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d);const m=n.from+u+o.length;s.addMark(n.from+u,m,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function pie(t){return new zy({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Et(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const u=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let f=o+d;f>l?f=l:l=f+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(f,l,u)}else if(r[0]){const d=t.type.isInline?o:o-1;s.insert(d,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:t.undoable})}function f2(t){return new zy({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Et(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function xu(t){return new zy({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Et(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&BN(u,t.type,s);if(!d)return null;if(o.wrap(u,d),t.keepMarks&&t.editor){const{selection:p,storedMarks:m}=e,{splittableMarks:b}=t.editor.extensionManager,x=m||p.$to.parentOffset&&p.$from.marks();if(x){const w=x.filter(S=>b.includes(S.type.name));o.ensureMarks(w)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const f=o.doc.resolve(n.from-1).nodeBefore;f&&f.type===t.type&&_a(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,f))&&o.join(n.from-1)},undoable:t.undoable})}function mie(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Fe){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function gie(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((l,u)=>{const d=s.mapping.map(u),f=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(b=>{if(b!==o)return!1;p=b}),!p)return;let m=!1;if(Object.keys(n).forEach(b=>{n[b]!==p.attrs[b]&&(m=!0)}),m){const b=t.type.create({...t.attrs,...n});s.removeMark(d,f,t.type),s.addMark(d,f,b)}}),s.docChanged&&e.view.dispatch(s)}var di=class Tq extends oT{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new Tq(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Rl(t){return new Xne({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Et(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];let d=n.to;if(l){const f=u.search(/\S/),p=n.from+u.indexOf(l),m=p+l.length;if(sT(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(S=>S===t.type&&S!==x.mark.type)).filter(x=>x.to>p).length)return null;m<n.to&&o.delete(m,n.to),p>n.from&&o.delete(n.from+f,p),d=n.from+f+l.length,o.addMark(n.from+f,d,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}var mv,VO;function yie(){return VO||(VO=1,mv=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),mv}var bie=yie();const xie=hh(bie);var gv={exports:{}},yv={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qO;function vie(){if(qO)return yv;qO=1;var t=ph(),e=S8();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return yv.useSyncExternalStoreWithSelector=function(d,f,p,m,b){var x=s(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=l(function(){function C(_){if(!T){if(T=!0,E=_,_=m(_),b!==void 0&&w.hasValue){var O=w.value;if(b(O,_))return N=O}return N=_}if(O=N,r(E,_))return O;var R=m(_);return b!==void 0&&b(O,R)?(E=_,O):(E=_,N=R)}var T=!1,E,N,A=p===void 0?null:p;return[function(){return C(f())},A===null?void 0:function(){return C(A())}]},[f,p,m,b]);var S=i(d,x[0],x[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),u(S),S},yv}var FO;function wie(){return FO||(FO=1,gv.exports=vie()),gv.exports}var Aq=wie();const Sie=hh(Aq);var kie=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Cie=({contentComponent:t})=>{const e=k8.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(e)})};function Eie(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:mh.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var Nie=class extends ke.Component{constructor(t){var e;super(t),this.editorContentRef=ke.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=Eie(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:kie(e,this.editorContentRef),...n}),t?.contentComponent&&g.jsx(Cie,{contentComponent:t.contentComponent})]})}},Tie=M.forwardRef((t,e)=>{const n=ke.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ke.createElement(Nie,{key:n,innerRef:e,...t})}),HO=ke.memo(Tie),Aie=typeof window<"u"?M.useLayoutEffect:M.useEffect,Mie=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function _ie(t){var e;const[n]=M.useState(()=>new Mie(t.editor)),r=Aq.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:xie);return Aie(()=>n.watch(t.editor),[t.editor,n]),M.useDebugValue(r),r}var Die=!1,h2=typeof window>"u",Rie=h2||!!(typeof window<"u"&&window.next),jie=class Mq{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?h2||Rie?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new hie(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Mq.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Oie(t={},e=[]){const n=M.useRef(t);n.current=t;const[r]=M.useState(()=>new jie(n)),i=k8.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(e)),_ie({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var Lie=M.createContext({editor:null});Lie.Consumer;var Iie=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Pie=()=>M.useContext(Iie);ke.forwardRef((t,e)=>{const{onDragStart:n}=Pie(),r=t.as||"div";return g.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ke.createContext({markViewContentRef:()=>{}});var xg=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},Bie=/^\s*>\s$/,zie=di.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return xg("blockquote",{...Tn(this.options.HTMLAttributes,t),children:xg("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xu({find:Bie,type:this.type})]}}),Vie=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,qie=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Fie=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Hie=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Uie=Gl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return xg("strong",{...Tn(this.options.HTMLAttributes,t),children:xg("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bu({find:Vie,type:this.type}),bu({find:Fie,type:this.type})]},addPasteRules(){return[Rl({find:qie,type:this.type}),Rl({find:Hie,type:this.type})]}}),$ie=/(^|[^`])`([^`]+)`(?!`)$/,Gie=/(^|[^`])`([^`]+)`(?!`)/g,Wie=Gl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bu({find:$ie,type:this.type})]},addPasteRules(){return[Rl({find:Gie,type:this.type})]}}),Kie=/^```([a-z]+)?[\s\n]$/,Yie=/^~~~([a-z]+)?[\s\n]$/,Xie=di.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Tn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?t.commands.insertContent(s):t.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=e.doc.textBetween(l,u,`
`,`
`).split(`
`).map(m=>s+m).join(`
`);return o.replaceWith(l,u,e.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?t.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=e.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,b=0;const x=l-u;for(let N=0;N<p.length;N+=1){if(b+p[N].length>=x){m=N;break}b+=p[N].length+1}const S=((o=p[m].match(/^ */))==null?void 0:o[0])||"",C=Math.min(S.length,this.options.tabSize);if(C===0)return!0;let T=u;for(let N=0;N<m;N+=1)T+=p[N].length+1;return s.delete(T,T+C),l-T<=C&&s.setSelection(Xe.create(s.doc,T)),!0}):t.commands.command(({tr:s})=>{const{from:o,to:l}=n,f=e.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var m;const b=((m=p.match(/^ */))==null?void 0:m[0])||"",x=Math.min(b.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,e.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:d})=>(d.setSelection(tt.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[f2({find:Kie,type:this.type,getAttributes:t=>({language:t[1]})}),f2({find:Yie,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new un({key:new Wn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Xe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),Zie=di.create({name:"doc",topNode:!0,content:"block+"}),Jie=di.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Tn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:f})=>{if(f&&u&&o){const p=u.filter(m=>l.includes(m.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_q=di.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>f2({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),Qie=_q,ese=di.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Tn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!mie(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return cq(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Xe.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Fe.create(s.doc,u.pos)):s.setSelection(Xe.create(s.doc,u.pos));else{const f=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();f&&(s.insert(d,f),s.setSelection(Xe.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[pie({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),tse=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,nse=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,rse=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ise=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,sse=Gl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bu({find:tse,type:this.type}),bu({find:rse,type:this.type})]},addPasteRules(){return[Rl({find:nse,type:this.type}),Rl({find:ise,type:this.type})]}});const ose="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ase="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",p2="numeric",m2="ascii",g2="alpha",xf="asciinumeric",nf="alphanumeric",y2="domain",Dq="emoji",lse="scheme",cse="slashscheme",bv="whitespace";function use(t,e){return t in e||(e[t]=[]),e[t]}function hl(t,e,n){e[p2]&&(e[xf]=!0,e[nf]=!0),e[m2]&&(e[xf]=!0,e[g2]=!0),e[xf]&&(e[nf]=!0),e[g2]&&(e[nf]=!0),e[nf]&&(e[y2]=!0),e[Dq]&&(e[y2]=!0);for(const r in e){const i=use(r,n);i.indexOf(t)<0&&i.push(t)}}function dse(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Ir(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ir.groups={};Ir.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Ir.groups;let i;return e&&e.j?i=e:(i=new Ir(e),n&&r&&hl(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Ir.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new Ir,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ir,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(dse(o.t,r),n);hl(s,u,r)}else n&&hl(s,n,r);o.t=s}return i.j[t]=o,o}};const nt=(t,e,n,r,i)=>t.ta(e,n,r,i),an=(t,e,n,r,i)=>t.tr(e,n,r,i),UO=(t,e,n,r,i)=>t.ts(e,n,r,i),ve=(t,e,n,r,i)=>t.tt(e,n,r,i),Qs="WORD",b2="UWORD",Rq="ASCIINUMERICAL",jq="ALPHANUMERICAL",Wf="LOCALHOST",x2="TLD",v2="UTLD",Bm="SCHEME",Uc="SLASH_SCHEME",lT="NUM",w2="WS",cT="NL",vf="OPENBRACE",wf="CLOSEBRACE",vg="OPENBRACKET",wg="CLOSEBRACKET",Sg="OPENPAREN",kg="CLOSEPAREN",Cg="OPENANGLEBRACKET",Eg="CLOSEANGLEBRACKET",Ng="FULLWIDTHLEFTPAREN",Tg="FULLWIDTHRIGHTPAREN",Ag="LEFTCORNERBRACKET",Mg="RIGHTCORNERBRACKET",_g="LEFTWHITECORNERBRACKET",Dg="RIGHTWHITECORNERBRACKET",Rg="FULLWIDTHLESSTHAN",jg="FULLWIDTHGREATERTHAN",Og="AMPERSAND",Lg="APOSTROPHE",Ig="ASTERISK",na="AT",Pg="BACKSLASH",Bg="BACKTICK",zg="CARET",sa="COLON",uT="COMMA",Vg="DOLLAR",gs="DOT",qg="EQUALS",dT="EXCLAMATION",Ci="HYPHEN",Sf="PERCENT",Fg="PIPE",Hg="PLUS",Ug="POUND",kf="QUERY",fT="QUOTE",Oq="FULLWIDTHMIDDLEDOT",hT="SEMI",ys="SLASH",Cf="TILDE",$g="UNDERSCORE",Lq="EMOJI",Gg="SYM";var Iq=Object.freeze({__proto__:null,ALPHANUMERICAL:jq,AMPERSAND:Og,APOSTROPHE:Lg,ASCIINUMERICAL:Rq,ASTERISK:Ig,AT:na,BACKSLASH:Pg,BACKTICK:Bg,CARET:zg,CLOSEANGLEBRACKET:Eg,CLOSEBRACE:wf,CLOSEBRACKET:wg,CLOSEPAREN:kg,COLON:sa,COMMA:uT,DOLLAR:Vg,DOT:gs,EMOJI:Lq,EQUALS:qg,EXCLAMATION:dT,FULLWIDTHGREATERTHAN:jg,FULLWIDTHLEFTPAREN:Ng,FULLWIDTHLESSTHAN:Rg,FULLWIDTHMIDDLEDOT:Oq,FULLWIDTHRIGHTPAREN:Tg,HYPHEN:Ci,LEFTCORNERBRACKET:Ag,LEFTWHITECORNERBRACKET:_g,LOCALHOST:Wf,NL:cT,NUM:lT,OPENANGLEBRACKET:Cg,OPENBRACE:vf,OPENBRACKET:vg,OPENPAREN:Sg,PERCENT:Sf,PIPE:Fg,PLUS:Hg,POUND:Ug,QUERY:kf,QUOTE:fT,RIGHTCORNERBRACKET:Mg,RIGHTWHITECORNERBRACKET:Dg,SCHEME:Bm,SEMI:hT,SLASH:ys,SLASH_SCHEME:Uc,SYM:Gg,TILDE:Cf,TLD:x2,UNDERSCORE:$g,UTLD:v2,UWORD:b2,WORD:Qs,WS:w2});const Ys=/[a-z]/,Hd=new RegExp("\\p{L}","u"),xv=new RegExp("\\p{Emoji}","u"),Xs=/\d/,vv=/\s/,$O="\r",wv=`
`,fse="",hse="",Sv="";let fm=null,hm=null;function pse(t=[]){const e={};Ir.groups=e;const n=new Ir;fm==null&&(fm=GO(ose)),hm==null&&(hm=GO(ase)),ve(n,"'",Lg),ve(n,"{",vf),ve(n,"}",wf),ve(n,"[",vg),ve(n,"]",wg),ve(n,"(",Sg),ve(n,")",kg),ve(n,"<",Cg),ve(n,">",Eg),ve(n,"",Ng),ve(n,"",Tg),ve(n,"",Ag),ve(n,"",Mg),ve(n,"",_g),ve(n,"",Dg),ve(n,"",Rg),ve(n,"",jg),ve(n,"&",Og),ve(n,"*",Ig),ve(n,"@",na),ve(n,"`",Bg),ve(n,"^",zg),ve(n,":",sa),ve(n,",",uT),ve(n,"$",Vg),ve(n,".",gs),ve(n,"=",qg),ve(n,"!",dT),ve(n,"-",Ci),ve(n,"%",Sf),ve(n,"|",Fg),ve(n,"+",Hg),ve(n,"#",Ug),ve(n,"?",kf),ve(n,'"',fT),ve(n,"/",ys),ve(n,";",hT),ve(n,"~",Cf),ve(n,"_",$g),ve(n,"\\",Pg),ve(n,"",Oq);const r=an(n,Xs,lT,{[p2]:!0});an(r,Xs,r);const i=an(r,Ys,Rq,{[xf]:!0}),s=an(r,Hd,jq,{[nf]:!0}),o=an(n,Ys,Qs,{[m2]:!0});an(o,Xs,i),an(o,Ys,o),an(i,Xs,i),an(i,Ys,i);const l=an(n,Hd,b2,{[g2]:!0});an(l,Ys),an(l,Xs,s),an(l,Hd,l),an(s,Xs,s),an(s,Ys),an(s,Hd,s);const u=ve(n,wv,cT,{[bv]:!0}),d=ve(n,$O,w2,{[bv]:!0}),f=an(n,vv,w2,{[bv]:!0});ve(n,Sv,f),ve(d,wv,u),ve(d,Sv,f),an(d,vv,f),ve(f,$O),ve(f,wv),an(f,vv,f),ve(f,Sv,f);const p=an(n,xv,Lq,{[Dq]:!0});ve(p,"#"),an(p,xv,p),ve(p,fse,p);const m=ve(p,hse);ve(m,"#"),an(m,xv,p);const b=[[Ys,o],[Xs,i]],x=[[Ys,null],[Hd,l],[Xs,s]];for(let w=0;w<fm.length;w++)Yo(n,fm[w],x2,Qs,b);for(let w=0;w<hm.length;w++)Yo(n,hm[w],v2,b2,x);hl(x2,{tld:!0,ascii:!0},e),hl(v2,{utld:!0,alpha:!0},e),Yo(n,"file",Bm,Qs,b),Yo(n,"mailto",Bm,Qs,b),Yo(n,"http",Uc,Qs,b),Yo(n,"https",Uc,Qs,b),Yo(n,"ftp",Uc,Qs,b),Yo(n,"ftps",Uc,Qs,b),hl(Bm,{scheme:!0,ascii:!0},e),hl(Uc,{slashscheme:!0,ascii:!0},e),t=t.sort((w,S)=>w[0]>S[0]?1:-1);for(let w=0;w<t.length;w++){const S=t[w][0],T=t[w][1]?{[lse]:!0}:{[cse]:!0};S.indexOf("-")>=0?T[y2]=!0:Ys.test(S)?Xs.test(S)?T[xf]=!0:T[m2]=!0:T[p2]=!0,UO(n,S,S,T)}return UO(n,"localhost",Wf,{ascii:!0}),n.jd=new Ir(Gg),{start:n,tokens:Object.assign({groups:e},Iq)}}function Pq(t,e){const n=mse(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,u=null,d=0,f=null,p=-1,m=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,m=0,f=l):p>=0&&(p+=n[o].length,m++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=m,d-=p,i.push({t:f.t,v:e.slice(s-d,s),s:s-d,e:s})}return i}function mse(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Yo(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const u=e[l];t.j[u]?s=t.j[u]:(s=new Ir(r),s.jr=i.slice(),t.j[u]=s),t=s}return s=new Ir(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function GO(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Kf={defaultProtocol:"http",events:null,format:WO,formatHref:WO,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function pT(t,e=null){let n=Object.assign({},Kf);t&&(n=Object.assign(n,t instanceof pT?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}pT.prototype={o:Kf,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Kf[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function WO(t){return t}function Bq(t,e){this.t="token",this.v=t,this.tk=e}Bq.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Kf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),u=t.get("target",n,e),d=t.get("rel",n,e),f=t.getObj("attributes",n,e),p=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),f&&Object.assign(o,f),{tagName:i,attributes:o,content:s,eventListeners:p}}};function qy(t,e){class n extends Bq{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const KO=qy("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),YO=qy("text"),gse=qy("nl"),pm=qy("url",{isLink:!0,toHref(t=Kf.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Wf&&t[1].t===sa}}),Si=t=>new Ir(t);function yse({groups:t}){const e=t.domain.concat([Og,Ig,na,Pg,Bg,zg,Vg,qg,Ci,lT,Sf,Fg,Hg,Ug,ys,Gg,Cf,$g]),n=[Lg,sa,uT,gs,dT,Sf,kf,fT,hT,Cg,Eg,vf,wf,wg,vg,Sg,kg,Ng,Tg,Ag,Mg,_g,Dg,Rg,jg],r=[Og,Lg,Ig,Pg,Bg,zg,Vg,qg,Ci,vf,wf,Sf,Fg,Hg,Ug,kf,ys,Gg,Cf,$g],i=Si(),s=ve(i,Cf);nt(s,r,s),nt(s,t.domain,s);const o=Si(),l=Si(),u=Si();nt(i,t.domain,o),nt(i,t.scheme,l),nt(i,t.slashscheme,u),nt(o,r,s),nt(o,t.domain,o);const d=ve(o,na);ve(s,na,d),ve(l,na,d),ve(u,na,d);const f=ve(s,gs);nt(f,r,s),nt(f,t.domain,s);const p=Si();nt(d,t.domain,p),nt(p,t.domain,p);const m=ve(p,gs);nt(m,t.domain,p);const b=Si(KO);nt(m,t.tld,b),nt(m,t.utld,b),ve(d,Wf,b);const x=ve(p,Ci);ve(x,Ci,x),nt(x,t.domain,p),nt(b,t.domain,p),ve(b,gs,m),ve(b,Ci,x);const w=ve(b,sa);nt(w,t.numeric,KO);const S=ve(o,Ci),C=ve(o,gs);ve(S,Ci,S),nt(S,t.domain,o),nt(C,r,s),nt(C,t.domain,o);const T=Si(pm);nt(C,t.tld,T),nt(C,t.utld,T),nt(T,t.domain,o),nt(T,r,s),ve(T,gs,C),ve(T,Ci,S),ve(T,na,d);const E=ve(T,sa),N=Si(pm);nt(E,t.numeric,N);const A=Si(pm),_=Si();nt(A,e,A),nt(A,n,_),nt(_,e,A),nt(_,n,_),ve(T,ys,A),ve(N,ys,A);const O=ve(l,sa),R=ve(u,sa),L=ve(R,ys),I=ve(L,ys);nt(l,t.domain,o),ve(l,gs,C),ve(l,Ci,S),nt(u,t.domain,o),ve(u,gs,C),ve(u,Ci,S),nt(O,t.domain,A),ve(O,ys,A),ve(O,kf,A),nt(I,t.domain,A),nt(I,e,A),ve(I,ys,A);const F=[[vf,wf],[vg,wg],[Sg,kg],[Cg,Eg],[Ng,Tg],[Ag,Mg],[_g,Dg],[Rg,jg]];for(let q=0;q<F.length;q++){const[U,P]=F[q],H=ve(A,U);ve(_,U,H),ve(H,P,A);const j=Si(pm);nt(H,e,j);const V=Si();nt(H,n),nt(j,e,j),nt(j,n,V),nt(V,e,j),nt(V,n,V),ve(j,P,A),ve(V,P,A)}return ve(i,Wf,T),ve(i,cT,gse),{start:i,tokens:Iq}}function bse(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,u=null,d=null,f=0,p=null,m=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(m=0,p=l):m>=0&&m++,i++,f++;if(m<0)i-=f,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(kv(YO,e,o)),o=[]),i-=m,f-=m;const b=p.t,x=n.slice(i-f,i);s.push(kv(b,e,x))}}return o.length>0&&s.push(kv(YO,e,o)),s}function kv(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const xse=typeof console<"u"&&console&&console.warn||(()=>{}),vse="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function wse(){return Ir.groups={},Ft.scanner=null,Ft.parser=null,Ft.tokenQueue=[],Ft.pluginQueue=[],Ft.customSchemes=[],Ft.initialized=!1,Ft}function XO(t,e=!1){if(Ft.initialized&&xse(`linkifyjs: already initialized - will not register custom scheme "${t}" ${vse}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ft.customSchemes.push([t,e])}function Sse(){Ft.scanner=pse(Ft.customSchemes);for(let t=0;t<Ft.tokenQueue.length;t++)Ft.tokenQueue[t][1]({scanner:Ft.scanner});Ft.parser=yse(Ft.scanner.tokens);for(let t=0;t<Ft.pluginQueue.length;t++)Ft.pluginQueue[t][1]({scanner:Ft.scanner,parser:Ft.parser});return Ft.initialized=!0,Ft}function mT(t){return Ft.initialized||Sse(),bse(Ft.parser.start,t,Pq(Ft.scanner.start,t))}mT.scan=Pq;function zq(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new pT(n),i=mT(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var gT="[\0- -\u2029]",kse=new RegExp(gT),Cse=new RegExp(`${gT}$`),Ese=new RegExp(gT,"g");function Nse(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Tse(t){return new un({key:new Wn("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=e.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=JV(n.doc,[...e]);if(aq(l).forEach(({newRange:d})=>{const f=_ne(r.doc,d,b=>b.isTextblock);let p,m;if(f.length>1)p=f[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(f.length){const b=r.doc.textBetween(d.from,d.to," "," ");if(!Cse.test(b))return;p=f[0],m=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&m){const b=m.split(kse).filter(Boolean);if(b.length<=0)return!1;const x=b[b.length-1],w=p.pos+m.lastIndexOf(x);if(!x)return!1;const S=mT(x).map(C=>C.toObject(t.defaultProtocol));if(!Nse(S))return!1;S.filter(C=>C.isLink).map(C=>({...C,from:w+C.start+1,to:w+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>t.validate(C.value)).filter(C=>t.shouldAutoLink(C.value)).forEach(C=>{sT(C.from,C.to,r.doc).some(T=>T.mark.type===t.type)||o.addMark(C.from,C.to,t.type.create({href:C.href}))})}}),!!o.steps.length)return o}})}function Ase(t){return new un({key:new Wn("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let f=r.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return!1;const l=oq(e.state,t.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&u?(window.open(u,d),!0):!1}}})}function Mse(t){return new un({key:new Wn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=zq(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function nl(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(Ese,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Vq=Gl.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){XO(t);return}XO(t.scheme,t.optionalSlashes)})},onDestroy(){wse()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!nl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!nl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!nl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Tn(this.options.HTMLAttributes,t),0]:["a",Tn(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!nl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!nl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Rl({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=zq(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!nl(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Tse({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!nl(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Ase({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Mse({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),_se=Vq,Dse=Object.defineProperty,Rse=(t,e)=>{for(var n in e)Dse(t,n,{get:e[n],enumerable:!0})},jse="listItem",ZO="textStyle",JO=/^\s*([-+*])\s$/,yT=di.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(jse,this.editor.getAttributes(ZO)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=xu({find:JO,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=xu({find:JO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ZO),editor:this.editor})),[t]}}),bT=di.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Tn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ose={};Rse(Ose,{findListItemPos:()=>Th,getNextListDepth:()=>xT,handleBackspace:()=>S2,handleDelete:()=>k2,hasListBefore:()=>qq,hasListItemAfter:()=>Lse,hasListItemBefore:()=>Fq,listItemHasSubList:()=>Hq,nextListIsDeeper:()=>Uq,nextListIsHigher:()=>$q});var Th=(t,e)=>{const{$from:n}=e.selection,r=An(t,e.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},xT=(t,e)=>{const n=Th(t,e);if(!n)return!1;const[,r]=Vne(e,t,n.$pos.pos+4);return r},qq=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Fq=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},Hq=(t,e,n)=>{if(!n)return!1;const r=An(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},S2=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ka(t.state,e)&&qq(t.state,e,n)){const{$anchor:l}=t.state.selection,u=t.state.doc.resolve(l.before()-1),d=[];u.node().descendants((m,b)=>{m.type.name===e&&d.push({node:m,pos:b})});const f=d.at(-1);if(!f)return!1;const p=t.state.doc.resolve(u.start()+f.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!ka(t.state,e)||!Une(t.state))return!1;const r=Th(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Hq(e,t.state,s);return Fq(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Uq=(t,e)=>{const n=xT(t,e),r=Th(t,e);return!r||!n?!1:n>r.depth},$q=(t,e)=>{const n=xT(t,e),r=Th(t,e);return!r||!n?!1:n<r.depth},k2=(t,e)=>{if(!ka(t.state,e)||!Hne(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Uq(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():$q(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},Lse=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},Gq=mn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&k2(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&k2(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&S2(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&S2(t,n,r)&&(e=!0)}),e}}}}),Ise="listItem",QO="textStyle",e3=/^(\d+)\.\s$/,vT=di.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Tn(this.options.HTMLAttributes,n),0]:["ol",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ise,this.editor.getAttributes(QO)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=xu({find:e3,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=xu({find:e3,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(QO)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),Pse=/^\s*(\[([( |x])?\])\s$/,Bse=di.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Tn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=f=>{var p,m;l.ariaLabel=((m=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:m.call(p,f,l.checked))||`Task item checkbox for ${f.textContent||"empty task item"}`};return d(t),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",f=>f.preventDefault()),l.addEventListener("change",f=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=f.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const b=n();if(typeof b!="number")return!1;const x=m.doc.nodeAt(b);return m.setNodeMarkup(b,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([f,p])=>{i.setAttribute(f,p)}),i.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(e).forEach(([f,p])=>{i.setAttribute(f,p)}),{dom:i,contentDOM:u,update:f=>f.type!==this.type?!1:(i.dataset.checked=f.attrs.checked,l.checked=f.attrs.checked,d(f),!0)}}},addInputRules(){return[xu({find:Pse,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),zse=di.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Tn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mn.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(yT.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(bT.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Gq.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(vT.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(Bse.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(zse.configure(this.options.taskList)),t}});var Vse=di.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),qse=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Fse=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Hse=Gl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bu({find:qse,type:this.type})]},addPasteRules(){return[Rl({find:Fse,type:this.type})]}}),Use=di.create({name:"text",group:"inline"}),Wq=Gl.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),$se=Wq;function Gse(t={}){return new un({view(e){return new Wse(e,t)}})}class Wse{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=e.nodeBefore,m=e.nodeAfter;if(p||m){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let x=b.getBoundingClientRect(),w=p?x.bottom:x.top;p&&m&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*l;r={left:x.left,right:x.right,top:w-S,bottom:w+S}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*o;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,f;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,f=-pageYOffset;else{let p=u.getBoundingClientRect(),m=p.width/u.offsetWidth,b=p.height/u.offsetHeight;d=p.left-u.scrollLeft*m,f=p.top-u.scrollTop*b}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-f)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=X8(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cn extends tt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return cn.valid(r)?new cn(r):tt.near(r)}content(){return Te.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(n.pos))}getBookmark(){return new wT(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Kse(e)||!Yse(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let u=e.doc.resolve(i);if(cn.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Fe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(cn.valid(l))return l}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;tt.jsonID("gapcursor",cn);class wT{constructor(e){this.pos=e}map(e){return new wT(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return cn.valid(n)?new cn(n):tt.near(n)}}function Kse(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Yse(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Xse(){return new un({props:{decorations:eoe,createSelectionBetween(t,e,n){return e.pos==n.pos&&cn.valid(n)?new cn(n):null},handleClick:Jse,handleKeyDown:Zse,handleDOMEvents:{beforeinput:Qse}}})}const Zse=BV({ArrowLeft:mm("horiz",-1),ArrowRight:mm("horiz",1),ArrowUp:mm("vert",-1),ArrowDown:mm("vert",1)});function mm(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,u=o.empty;if(o instanceof Xe){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(e>0?l.after():l.before())}let d=cn.findGapCursorFrom(l,e,u);return d?(i&&i(r.tr.setSelection(new cn(d))),!0):!1}}function Jse(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!cn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Fe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cn(r))),!0)}function Qse(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=xe.empty;for(let o=r.length-1;o>=0;o--)i=xe.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Te(i,0,0));return s.setSelection(Xe.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function eoe(t){if(!(t.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",en.create(t.doc,[Er.widget(t.selection.head,e,{key:"gapcursor"})])}var Wg=200,Gn=function(){};Gn.prototype.append=function(e){return e.length?(e=Gn.from(e),!this.length&&e||e.length<Wg&&this.leafAppend(e)||this.length<Wg&&e.leafPrepend(this)||this.appendInner(e)):this};Gn.prototype.prepend=function(e){return e.length?Gn.from(e).append(this):this};Gn.prototype.appendInner=function(e){return new toe(this,e)};Gn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Gn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Gn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Gn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Gn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Gn.from=function(e){return e instanceof Gn?e:e&&e.length?new Kq(e):Gn.empty};var Kq=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Wg)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Wg)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Gn);Gn.empty=new Kq([]);var toe=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Gn);const noe=500;class Wi{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,u,d=[],f=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),s=i.maps.length),s--,f.push(p);return}if(i){f.push(new Xo(p.map));let b=p.step.map(i.slice(s)),x;b&&o.maybeStep(b).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new Xo(x,void 0,void 0,d.length+f.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Wi(this.items.slice(0,r).append(f.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let f=0;f<e.steps.length;f++){let p=e.steps[f].invert(e.docs[f]),m=new Xo(e.mapping.maps[f],p,n),b;(b=u&&u.merge(m))&&(m=b,f?s.pop():l=l.slice(0,l.length-1)),s.push(m),n&&(o++,n=void 0),i||(u=m)}let d=o-r.depth;return d>ioe&&(l=roe(l,d),o-=d),new Wi(l.append(s),o)}remapping(e,n){let r=new Vf;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Wi(this.items.append(e.map(n=>new Xo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(m=>{m.selection&&l--},i);let u=n;this.items.forEach(m=>{let b=s.getMirror(--u);if(b==null)return;o=Math.min(o,b);let x=s.maps[b];if(m.step){let w=e.steps[b].invert(e.docs[b]),S=m.selection&&m.selection.map(s.slice(u+1,b));S&&l++,r.push(new Xo(x,w,S))}else r.push(new Xo(x))},i);let d=[];for(let m=n;m<o;m++)d.push(new Xo(s.maps[m]));let f=this.items.slice(0,i).append(d).append(r),p=new Wi(f,l);return p.emptyItemCount()>noe&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let f=o.selection&&o.selection.map(n.slice(r));f&&s++;let p=new Xo(d.invert(),u,f),m,b=i.length-1;(m=i.length&&i[b].merge(p))?i[b]=m:i.push(p)}}else o.map&&r--},this.items.length,0),new Wi(Gn.from(i.reverse()),s)}}Wi.empty=new Wi(Gn.empty,0);function roe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let Xo=class Yq{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Yq(n.getMap().invert(),n,this.selection)}}};class ra{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const ioe=20;function soe(t,e,n,r){let i=n.getMeta(kl),s;if(i)return i.historyState;n.getMeta(loe)&&(t=new ra(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(kl))return o.getMeta(kl).redo?new ra(t.done.addTransform(n,void 0,r,zm(e)),t.undone,t3(n.mapping.maps),t.prevTime,t.prevComposition):new ra(t.done,t.undone.addTransform(n,void 0,r,zm(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ooe(n,t.prevRanges)),d=o?Cv(t.prevRanges,n.mapping):t3(n.mapping.maps);return new ra(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,zm(e)),Wi.empty,d,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ra(t.done.rebased(n,s),t.undone.rebased(n,s),Cv(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ra(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Cv(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ooe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function t3(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function Cv(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function aoe(t,e,n){let r=zm(e),i=kl.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),u=new ra(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(kl,{redo:n,historyState:u})}let Ev=!1,n3=null;function zm(t){let e=t.plugins;if(n3!=e){Ev=!1,n3=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ev=!0;break}}return Ev}const kl=new Wn("history"),loe=new Wn("closeHistory");function coe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new un({key:kl,state:{init(){return new ra(Wi.empty,Wi.empty,null,0,-1)},apply(e,n,r){return soe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?Zq:r=="historyRedo"?Jq:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function Xq(t,e){return(n,r)=>{let i=kl.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=aoe(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const Zq=Xq(!1,!0),Jq=Xq(!0,!0);mn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new un({key:new Wn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,u=s-r,d=l-u,f=l;return e.deleteRange(d,f),!(this.storage.characters({node:e.doc})>r)}})]}});var uoe=mn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Gse(this.options)]}});mn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new un({key:new Wn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return en.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Er.node(d,d+u.nodeSize,{class:this.options.className}))}),en.create(t,s)}}})]}});var doe=mn.create({name:"gapCursor",addProseMirrorPlugins(){return[Xse()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Et(Ve(t,"allowGapCursor",n)))!=null?e:null}}}),foe=mn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new un({key:new Wn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&By(o);if((u||!this.options.showOnlyCurrent)&&d){const f=[this.options.emptyNodeClass];s&&f.push(this.options.emptyEditorClass);const p=Er.node(l,l+o.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),en.create(t,i)}}})]}});mn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new un({key:new Wn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||cq(n.selection)||t.view.dragging?null:en.create(n.doc,[Er.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function r3({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var hoe=mn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new Wn(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new un({key:t,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=t.getState(i),d=s.content.size,f=l.nodes[this.options.node];if(u)return o.insert(d,f.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!r3({node:i,types:e})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!r3({node:i,types:e})}}})]}}),poe=mn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Zq(t,e),redo:()=>({state:t,dispatch:e})=>Jq(t,e)}},addProseMirrorPlugins(){return[coe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),moe=mn.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(Uie.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(zie.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(yT.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Wie.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Xie.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Zie.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(uoe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(doe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Jie.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(_q.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(poe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(ese.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(sse.configure(this.options.italic)),this.options.listItem!==!1&&i.push(bT.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Gq.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(Vq.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(vT.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Vse.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Hse.configure(this.options.strike)),this.options.text!==!1&&i.push(Use.configure(this.options.text)),this.options.underline!==!1&&i.push(Wq.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(hoe.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),goe=moe,yoe=mn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),boe=yoe,xoe=foe,voe=yT,woe=vT,Soe=bT;const Fy=({label:t,id:e,children:n,focused:r,containerClassName:i})=>{const s=`${e}-label`;return g.jsxs(gt.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[t&&g.jsx(gt.label,{id:s,htmlFor:e,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:t}),n]})},Hy=()=>{const[t,e]=ke.useState(!1);return{focused:t,onFocus:()=>e(!0),onBlur:()=>e(!1)}},Pc=({onClick:t,disabled:e,active:n,title:r,children:i})=>g.jsx("button",{onClick:t,disabled:e,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${e?"opacity-50 cursor-not-allowed":""}`,children:i}),i3=({editor:t,disabled:e})=>{let n="0";return t.isActive("heading",{level:1})?n="1":t.isActive("heading",{level:2})?n="2":t.isActive("heading",{level:3})&&(n="3"),g.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?t.chain().focus().setParagraph().run():t.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:e,children:[g.jsx("option",{value:"0",children:"P"}),g.jsx("option",{value:"1",children:"H1"}),g.jsx("option",{value:"2",children:"H2"}),g.jsx("option",{value:"3",children:"H3"})]})},Kg=({id:t,label:e,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=M.useState(0),[d,f]=M.useState(!1),{focused:p,onFocus:m,onBlur:b}=Hy(),x=()=>u(Date.now()),w=()=>{f(!d)},S=Oie({extensions:[goe.configure({bulletList:!1,orderedList:!1,listItem:!1}),voe.configure({HTMLAttributes:{class:"bullet-list"}}),woe.configure({HTMLAttributes:{class:"ordered-list"}}),Soe.configure({HTMLAttributes:{class:"list-item"}}),$se,_se.configure({openOnClick:!1}),boe.configure({types:["heading","paragraph"]}),Qie.configure({levels:[1,2,3]}),xoe.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:N})=>{r(N.getHTML())},onFocus:m,onBlur:b,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(M.useEffect(()=>{S&&(n!==S.getHTML()&&S.commands.setContent(n,{emitUpdate:!1}),S.setEditable(!s))},[n,s,S]),M.useEffect(()=>{const N=A=>{A.key==="Escape"&&d&&f(!1)};return d?(document.addEventListener("keydown",N),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",N),document.body.style.overflow=""}},[d]),!S)return null;const C=[{key:"bold",title:"Bold",onClick:()=>S.chain().focus().toggleBold().run(),active:S.isActive("bold"),node:g.jsx(kJ,{size:16})},{key:"italic",title:"Italic",onClick:()=>S.chain().focus().toggleItalic().run(),active:S.isActive("italic"),node:g.jsx(CJ,{size:16})},{key:"underline",title:"Underline",onClick:()=>S.chain().focus().toggleUnderline().run(),active:S.isActive("underline"),node:g.jsx(AJ,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>S.chain().focus().toggleStrike().run(),active:S.isActive("strike"),node:g.jsx(g.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>S.chain().focus().toggleBulletList().run(),active:S.isActive("bulletList"),node:g.jsx(EJ,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>S.chain().focus().toggleOrderedList().run(),active:S.isActive("orderedList"),node:g.jsx(NJ,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>S.chain().focus().toggleBlockquote().run(),active:S.isActive("blockquote"),node:g.jsx(TJ,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>S.chain().focus().toggleCodeBlock().run(),active:S.isActive("codeBlock"),node:g.jsx(mJ,{size:16})}],T=[{key:"align-left",title:"Align Left",onClick:()=>S.chain().focus().setTextAlign("left").run(),active:S.isActive({textAlign:"left"}),node:g.jsx(wJ,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>S.chain().focus().setTextAlign("center").run(),active:S.isActive({textAlign:"center"}),node:g.jsx(vJ,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>S.chain().focus().setTextAlign("right").run(),active:S.isActive({textAlign:"right"}),node:g.jsx(SJ,{size:16})}],E=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:w,active:d,node:d?g.jsx(RJ,{size:16}):g.jsx(jJ,{size:16})}];return g.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?g.jsxs(gt.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[g.jsx("div",{className:"flex items-center gap-2 mr-4",children:e&&g.jsx("span",{className:"font-medium text-theme",children:e})}),g.jsx(i3,{editor:S,disabled:s}),C.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),g.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),g.jsx("div",{className:"flex-1 overflow-hidden",children:g.jsx("div",{className:"h-full overflow-y-auto p-4",children:g.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:g.jsx(HO,{editor:S,className:"focus:outline-none h-full"})})})})]}):g.jsx(Fy,{id:t,label:e,focused:p,containerClassName:l,children:g.jsxs(gt.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[g.jsx(i3,{editor:S,disabled:s}),C.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),g.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),g.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:g.jsx(HO,{editor:S,className:"focus:outline-none"})})]})})})},koe=()=>{Hl();const t=gh(),[e,n]=M.useState(!1),r=M.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=M.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(m,b)=>{o(x=>({...x,[m]:b}))},u=(m,b,x)=>{const w=s[m].map(S=>S.id===b?{...S,value:x}:S);o(S=>({...S,[m]:w}))},d=m=>{o(b=>({...b,[m]:[...b[m],{id:i(),value:""}]}))},f=(m,b)=>{const x=s[m].filter(w=>w.id!==b);o(w=>({...w,[m]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const m={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(b=>b.value).filter(b=>b.trim()!==""),constraints:s.constraints.map(b=>b.value).filter(b=>b.trim()!==""),hints:s.hints.map(b=>b.value).filter(b=>b.trim()!==""),tags:s.tags.map(b=>b.value).filter(b=>b.trim()!=="")};localStorage.setItem(`custom-problem-${m.id}`,JSON.stringify(m)),setTimeout(()=>{t(`/playground/${m.id}`)},300)};return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsx("div",{className:"flex items-center gap-4",children:g.jsx(yh,{})})]})})}),g.jsx("div",{className:"pt-16 relative z-10",children:g.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("div",{className:"inline-block mb-4",children:g.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),g.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),g.jsx("input",{id:"title",type:"text",value:s.title,onChange:m=>l("title",m.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsx("div",{children:g.jsx(Kg,{id:"description",label:" Description *",value:s.description,onChange:m=>l("description",m),placeholder:"Describe the problem in detail..."})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),g.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:m=>l("difficulty",m.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[g.jsx("option",{value:"Easy",children:"Easy"}),g.jsx("option",{value:"Medium",children:"Medium"}),g.jsx("option",{value:"Hard",children:"Hard"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Category"]}),g.jsx("input",{id:"category",type:"text",value:s.category,onChange:m=>l("category",m.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),g.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:m=>l("estimatedTime",m.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Requirements"]}),g.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((m,b)=>g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:"flex gap-3 items-start",children:[g.jsx("div",{className:"flex-1",children:g.jsx(Kg,{id:`requirement-${m.id}`,label:`Requirement ${b+1}`,value:m.value,onChange:x=>u("requirements",m.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&g.jsx("button",{type:"button",onClick:()=>f("requirements",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},m.id))]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Constraints"]}),g.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(m=>g.jsxs("div",{className:"flex gap-3 mb-3",children:[g.jsx("input",{type:"text",value:m.value,onChange:b=>u("constraints",m.id,b.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&g.jsx("button",{type:"button",onClick:()=>f("constraints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),g.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(m=>g.jsxs("div",{className:"flex gap-3 mb-3",children:[g.jsx("input",{type:"text",value:m.value,onChange:b=>u("hints",m.id,b.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&g.jsx("button",{type:"button",onClick:()=>f("hints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(m=>m.value.trim())&&g.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(m=>m.value.trim()).map(m=>g.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[g.jsx("span",{children:m.value}),g.jsx("button",{type:"button",onClick:()=>f("tags",m.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},m.id))}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:m=>u("tags",s.tags.at(-1)?.id||"",m.target.value),onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.value.trim()&&(m.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),g.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[g.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||e,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:e?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):g.jsx(g.Fragment,{children:" Create & Start Designing"})}),g.jsx("button",{type:"button",onClick:()=>t("/"),disabled:e,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},Coe=()=>{Hl();const t=gh(),[e,n]=M.useState([]),[r,i]=M.useState(!1),[s,o]=M.useState(""),[l,u]=M.useState("updated"),[d,f]=M.useState("all"),[p,m]=M.useState(!1),[b,x]=M.useState(!1),[w,S]=M.useState(!1),[C,T]=M.useState(null),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:O,logout:R}=xh();M.useEffect(()=>{N||t("/")},[N,t]),M.useEffect(()=>{(async()=>{if(!N){n([]);return}i(!0);try{const V=await Jt.getUserDiagrams();n(V)}catch(V){console.error("Failed to load diagrams:",V)}finally{i(!1)}})()},[N]);const L=j=>{t(`/playground/free?diagramId=${j}`)},I=async(j,V)=>{V.stopPropagation(),j.isOwner&&(T(j),S(!0))},F=async()=>{if(C)try{await Jt.deleteDiagram(C.id),n(j=>j.filter(V=>V.id!==C.id)),S(!1),T(null)}catch(j){console.error("Failed to delete diagram:",j),alert("Failed to delete diagram. Please try again.")}},q=()=>{S(!1),T(null)},U=e.filter(j=>{if(d==="owned"&&!j.isOwner||d==="shared"&&j.isOwner)return!1;const V=s.toLowerCase();return j.title.toLowerCase().includes(V)||j.description?.toLowerCase().includes(V)||j.owner.name.toLowerCase().includes(V)||j.owner.email.toLowerCase().includes(V)||!1}).sort((j,V)=>{switch(l){case"title":return j.title.localeCompare(V.title);case"created":return new Date(V.createdAt).getTime()-new Date(j.createdAt).getTime();case"updated":default:return new Date(V.updatedAt).getTime()-new Date(j.updatedAt).getTime()}}),P=e.filter(j=>j.isOwner).length,H=e.filter(j=>!j.isOwner).length;return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects and diagrams shared with you",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[N&&g.jsx("button",{type:"button",onClick:()=>t("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),g.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${P} owned  ${H} shared`}),g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:N?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>m(!p),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[E?.picture?g.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):g.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:E?.name?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline text-sm",children:E?.name||E?.email}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&g.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:g.jsxs("div",{className:"py-1",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name}),g.jsx("p",{className:"text-sm text-muted truncate",children:E?.email})]}),g.jsx("button",{type:"button",onClick:()=>{m(!1),R()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):g.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),g.jsx("div",{className:"pt-16 relative z-10",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),g.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved projects and diagrams shared with you"})]}),!r&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex gap-2 mb-6 justify-center",children:[g.jsxs("button",{type:"button",onClick:()=>f("all"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="all"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["All Designs (",e.length,")"]}),g.jsxs("button",{type:"button",onClick:()=>f("owned"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="owned"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["My Designs (",P,")"]}),g.jsxs("button",{type:"button",onClick:()=>f("shared"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="shared"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["Shared with Me (",H,")"]})]}),g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),g.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:j=>o(j.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),g.jsxs("select",{id:"sort-select",value:l,onChange:j=>u(j.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[g.jsx("option",{value:"updated",children:"Last Updated"}),g.jsx("option",{value:"created",children:"Date Created"}),g.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),g.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),g.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&U.length===0&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"text-7xl mb-6",children:s?"":d==="shared"?"":""}),g.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":d==="shared"?"No shared designs yet":d==="owned"?"No designs created yet":"No designs yet"}),g.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":d==="shared"?"Diagrams shared with you will appear here":"Start creating your first system design project"}),!s&&d!=="shared"&&g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&U.length>0&&g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:U.map((j,V)=>g.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${V===0?"delay-0":V===1?"delay-100":V===2?"delay-200":""}`,children:[g.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),g.jsxs("div",{className:"relative p-6",children:[j.isOwner&&g.jsx("button",{type:"button",onClick:G=>I(j,G),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),g.jsxs("div",{className:"cursor-pointer",onClick:()=>L(j.id),children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1 pr-8",children:[g.jsx("div",{className:"flex items-start gap-2 mb-2",children:g.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:j.title})}),!j.isOwner&&g.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[g.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),g.jsxs("div",{className:"relative flex items-center gap-1.5",children:[g.jsxs("div",{className:"relative flex-shrink-0",children:[j.owner.pictureUrl?g.jsx("img",{src:j.owner.pictureUrl,alt:j.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:j.owner.name[0]?.toUpperCase()}),g.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),g.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:j.owner.name})]})]})]}),g.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${j.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:j.permission==="edit"?g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),g.jsx("span",{children:j.permission==="edit"?"Can Edit":"View Only"})]})]}),j.description&&g.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:j.description})]}),g.jsx("div",{className:"text-3xl",children:""})]}),g.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),j.nodes.length," node",j.nodes.length===1?"":"s"]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),j.edges.length," connection",j.edges.length===1?"":"s"]})]}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[g.jsxs("span",{children:["Updated"," ",new Date(j.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),g.jsxs("span",{children:["Created"," ",new Date(j.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),g.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),L(j.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},j.id))})]})]})})]}),b&&g.jsx(Ny,{isOpen:b,onClose:()=>x(!1),onLogin:async(j,V)=>{await A({email:j,password:V})},onSignup:async(j,V,G)=>{await _({email:j,password:V,name:G})},onGoogleLogin:async j=>{await O(j)}}),w&&C&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),g.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),g.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",g.jsxs("strong",{children:['"',C.title,'"']}),"? This will permanently remove the design and all its data."]}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"button",onClick:q,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),g.jsx("button",{type:"button",onClick:F,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function Eoe(t){return ct({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(t)}const Qq=({id:t,checked:e,onChange:n,label:r,disabled:i=!1,className:s=""})=>g.jsxs("label",{htmlFor:t,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[g.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[g.jsx("input",{id:t,type:"checkbox",checked:e,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),g.jsx(uu,{children:e&&g.jsx(gt.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&g.jsx("span",{className:"text-sm text-theme",children:r})]}),eF=({id:t,label:e,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:f,onFocus:p,onBlur:m}=Hy();return g.jsx(Fy,{id:t,label:e,focused:f,containerClassName:d,children:g.jsx(gt.input,{id:t,type:"number",value:n??"",onChange:b=>r(Number(b.target.value)),onFocus:p,onBlur:m,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:f?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Vm=({id:t,label:e,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:f}=Hy();return g.jsx(Fy,{id:t,label:e,focused:u,containerClassName:l,children:g.jsx(gt.input,{id:t,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:f,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},tF=({id:t,label:e,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:f}=Hy(),p=`${t}-label`;return g.jsxs(Fy,{id:t,label:e,focused:u,containerClassName:l,children:[!e&&g.jsx("label",{id:p,htmlFor:t,className:"sr-only",children:t}),g.jsx(gt.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:g.jsx("select",{id:t,value:n??"",onChange:m=>r(m.target.value),onFocus:d,onBlur:f,disabled:s,"aria-labelledby":e?p:void 0,"aria-label":e||t,title:e||t,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(m=>g.jsx("option",{value:m,children:m},m))})})]})};function Noe(t,e=50){const[n,r]=M.useState({past:[],present:t,future:[]}),i=M.useRef(!1),s=M.useCallback(d=>{r(f=>{const p=typeof d=="function"?d(f.present):d;if(i.current)return i.current=!1,{...f,present:p};if(JSON.stringify(p)===JSON.stringify(f.present))return f;const m=[...f.past,f.present];return m.length>e&&m.shift(),{past:m,present:p,future:[]}})},[e]),o=M.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const f=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:f,future:[d.present,...d.future]}})},[]),l=M.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const f=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:f,future:p}})},[]),u=M.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Mn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Mn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Toe={value:()=>{}};function Uy(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qm(n)}function qm(t){this._=t}function Aoe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qm.prototype=Uy.prototype={constructor:qm,on:function(t,e){var n=this._,r=Aoe(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Moe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=s3(n[i],t.name,e);else if(e==null)for(i in n)n[i]=s3(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new qm(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Moe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function s3(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Toe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var C2="http://www.w3.org/1999/xhtml";const o3={svg:"http://www.w3.org/2000/svg",xhtml:C2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $y(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),o3.hasOwnProperty(e)?{space:o3[e],local:t}:t}function _oe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===C2&&e.documentElement.namespaceURI===C2?e.createElement(t):e.createElementNS(n,t)}}function Doe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nF(t){var e=$y(t);return(e.local?Doe:_oe)(e)}function Roe(){}function ST(t){return t==null?Roe:function(){return this.querySelector(t)}}function joe(t){typeof t!="function"&&(t=ST(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,d,f=0;f<o;++f)(u=s[f])&&(d=t.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d);return new ui(r,this._parents)}function Ooe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Loe(){return[]}function rF(t){return t==null?Loe:function(){return this.querySelectorAll(t)}}function Ioe(t){return function(){return Ooe(t.apply(this,arguments))}}function Poe(t){typeof t=="function"?t=Ioe(t):t=rF(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(t.call(u,u.__data__,d,o)),i.push(u));return new ui(r,i)}function iF(t){return function(){return this.matches(t)}}function sF(t){return function(e){return e.matches(t)}}var Boe=Array.prototype.find;function zoe(t){return function(){return Boe.call(this.children,t)}}function Voe(){return this.firstElementChild}function qoe(t){return this.select(t==null?Voe:zoe(typeof t=="function"?t:sF(t)))}var Foe=Array.prototype.filter;function Hoe(){return Array.from(this.children)}function Uoe(t){return function(){return Foe.call(this.children,t)}}function $oe(t){return this.selectAll(t==null?Hoe:Uoe(typeof t=="function"?t:sF(t)))}function Goe(t){typeof t!="function"&&(t=iF(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&l.push(u);return new ui(r,this._parents)}function oF(t){return new Array(t.length)}function Woe(){return new ui(this._enter||this._groups.map(oF),this._parents)}function Yg(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Yg.prototype={constructor:Yg,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Koe(t){return function(){return t}}function Yoe(t,e,n,r,i,s){for(var o=0,l,u=e.length,d=s.length;o<d;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Yg(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function Xoe(t,e,n,r,i,s,o){var l,u,d=new Map,f=e.length,p=s.length,m=new Array(f),b;for(l=0;l<f;++l)(u=e[l])&&(m[l]=b=o.call(u,u.__data__,l,e)+"",d.has(b)?i[l]=u:d.set(b,u));for(l=0;l<p;++l)b=o.call(t,s[l],l,s)+"",(u=d.get(b))?(r[l]=u,u.__data__=s[l],d.delete(b)):n[l]=new Yg(t,s[l]);for(l=0;l<f;++l)(u=e[l])&&d.get(m[l])===u&&(i[l]=u)}function Zoe(t){return t.__data__}function Joe(t,e){if(!arguments.length)return Array.from(this,Zoe);var n=e?Xoe:Yoe,r=this._parents,i=this._groups;typeof t!="function"&&(t=Koe(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var f=r[d],p=i[d],m=p.length,b=Qoe(t.call(f,f&&f.__data__,d,r)),x=b.length,w=l[d]=new Array(x),S=o[d]=new Array(x),C=u[d]=new Array(m);n(f,p,w,S,C,b,e);for(var T=0,E=0,N,A;T<x;++T)if(N=w[T]){for(T>=E&&(E=T+1);!(A=S[E])&&++E<x;);N._next=A||null}}return o=new ui(o,r),o._enter=l,o._exit=u,o}function Qoe(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function eae(){return new ui(this._exit||this._groups.map(oF),this._parents)}function tae(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function nae(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],f=r[u],p=d.length,m=l[u]=new Array(p),b,x=0;x<p;++x)(b=d[x]||f[x])&&(m[x]=b);for(;u<i;++u)l[u]=n[u];return new ui(l,this._parents)}function rae(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function iae(t){t||(t=sae);function e(p,m){return p&&m?t(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,f=0;f<l;++f)(d=o[f])&&(u[f]=d);u.sort(e)}return new ui(i,this._parents).order()}function sae(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function oae(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function aae(){return Array.from(this)}function lae(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function cae(){let t=0;for(const e of this)++t;return t}function uae(){return!this.node()}function dae(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function fae(t){return function(){this.removeAttribute(t)}}function hae(t){return function(){this.removeAttributeNS(t.space,t.local)}}function pae(t,e){return function(){this.setAttribute(t,e)}}function mae(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function gae(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function yae(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function bae(t,e){var n=$y(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?hae:fae:typeof e=="function"?n.local?yae:gae:n.local?mae:pae)(n,e))}function aF(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function xae(t){return function(){this.style.removeProperty(t)}}function vae(t,e,n){return function(){this.style.setProperty(t,e,n)}}function wae(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Sae(t,e,n){return arguments.length>1?this.each((e==null?xae:typeof e=="function"?wae:vae)(t,e,n??"")):vu(this.node(),t)}function vu(t,e){return t.style.getPropertyValue(e)||aF(t).getComputedStyle(t,null).getPropertyValue(e)}function kae(t){return function(){delete this[t]}}function Cae(t,e){return function(){this[t]=e}}function Eae(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Nae(t,e){return arguments.length>1?this.each((e==null?kae:typeof e=="function"?Eae:Cae)(t,e)):this.node()[t]}function lF(t){return t.trim().split(/^|\s+/)}function kT(t){return t.classList||new cF(t)}function cF(t){this._node=t,this._names=lF(t.getAttribute("class")||"")}cF.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function uF(t,e){for(var n=kT(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function dF(t,e){for(var n=kT(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Tae(t){return function(){uF(this,t)}}function Aae(t){return function(){dF(this,t)}}function Mae(t,e){return function(){(e.apply(this,arguments)?uF:dF)(this,t)}}function _ae(t,e){var n=lF(t+"");if(arguments.length<2){for(var r=kT(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Mae:e?Tae:Aae)(n,e))}function Dae(){this.textContent=""}function Rae(t){return function(){this.textContent=t}}function jae(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Oae(t){return arguments.length?this.each(t==null?Dae:(typeof t=="function"?jae:Rae)(t)):this.node().textContent}function Lae(){this.innerHTML=""}function Iae(t){return function(){this.innerHTML=t}}function Pae(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Bae(t){return arguments.length?this.each(t==null?Lae:(typeof t=="function"?Pae:Iae)(t)):this.node().innerHTML}function zae(){this.nextSibling&&this.parentNode.appendChild(this)}function Vae(){return this.each(zae)}function qae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fae(){return this.each(qae)}function Hae(t){var e=typeof t=="function"?t:nF(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Uae(){return null}function $ae(t,e){var n=typeof t=="function"?t:nF(t),r=e==null?Uae:typeof e=="function"?e:ST(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Gae(){var t=this.parentNode;t&&t.removeChild(this)}function Wae(){return this.each(Gae)}function Kae(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yae(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xae(t){return this.select(t?Yae:Kae)}function Zae(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Jae(t){return function(e){t.call(this,e,this.__data__)}}function Qae(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function ele(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function tle(t,e,n){return function(){var r=this.__on,i,s=Jae(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function nle(t,e,n){var r=Qae(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,f;u<d;++u)for(i=0,f=l[u];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(l=e?tle:ele,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function fF(t,e,n){var r=aF(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function rle(t,e){return function(){return fF(this,t,e)}}function ile(t,e){return function(){return fF(this,t,e.apply(this,arguments))}}function sle(t,e){return this.each((typeof e=="function"?ile:rle)(t,e))}function*ole(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var hF=[null];function ui(t,e){this._groups=t,this._parents=e}function Ah(){return new ui([[document.documentElement]],hF)}function ale(){return this}ui.prototype=Ah.prototype={constructor:ui,select:joe,selectAll:Poe,selectChild:qoe,selectChildren:$oe,filter:Goe,data:Joe,enter:Woe,exit:eae,join:tae,merge:nae,selection:ale,order:rae,sort:iae,call:oae,nodes:aae,node:lae,size:cae,empty:uae,each:dae,attr:bae,style:Sae,property:Nae,classed:_ae,text:Oae,html:Bae,raise:Vae,lower:Fae,append:Hae,insert:$ae,remove:Wae,clone:Xae,datum:Zae,on:nle,dispatch:sle,[Symbol.iterator]:ole};function ai(t){return typeof t=="string"?new ui([[document.querySelector(t)]],[document.documentElement]):new ui([[t]],hF)}function lle(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Gi(t,e){if(t=lle(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const cle={passive:!1},Yf={capture:!0,passive:!1};function Nv(t){t.stopImmediatePropagation()}function iu(t){t.preventDefault(),t.stopImmediatePropagation()}function pF(t){var e=t.document.documentElement,n=ai(t).on("dragstart.drag",iu,Yf);"onselectstart"in e?n.on("selectstart.drag",iu,Yf):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function mF(t,e){var n=t.document.documentElement,r=ai(t).on("dragstart.drag",null);e&&(r.on("click.drag",iu,Yf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const gm=t=>()=>t;function E2(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}E2.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ule(t){return!t.ctrlKey&&!t.button}function dle(){return this.parentNode}function fle(t,e){return e??{x:t.x,y:t.y}}function hle(){return navigator.maxTouchPoints||"ontouchstart"in this}function gF(){var t=ule,e=dle,n=fle,r=hle,i={},s=Uy("start","drag","end"),o=0,l,u,d,f,p=0;function m(N){N.on("mousedown.drag",b).filter(r).on("touchstart.drag",S).on("touchmove.drag",C,cle).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(N,A){if(!(f||!t.call(this,N,A))){var _=E(this,e.call(this,N,A),N,A,"mouse");_&&(ai(N.view).on("mousemove.drag",x,Yf).on("mouseup.drag",w,Yf),pF(N.view),Nv(N),d=!1,l=N.clientX,u=N.clientY,_("start",N))}}function x(N){if(iu(N),!d){var A=N.clientX-l,_=N.clientY-u;d=A*A+_*_>p}i.mouse("drag",N)}function w(N){ai(N.view).on("mousemove.drag mouseup.drag",null),mF(N.view,d),iu(N),i.mouse("end",N)}function S(N,A){if(t.call(this,N,A)){var _=N.changedTouches,O=e.call(this,N,A),R=_.length,L,I;for(L=0;L<R;++L)(I=E(this,O,N,A,_[L].identifier,_[L]))&&(Nv(N),I("start",N,_[L]))}}function C(N){var A=N.changedTouches,_=A.length,O,R;for(O=0;O<_;++O)(R=i[A[O].identifier])&&(iu(N),R("drag",N,A[O]))}function T(N){var A=N.changedTouches,_=A.length,O,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),O=0;O<_;++O)(R=i[A[O].identifier])&&(Nv(N),R("end",N,A[O]))}function E(N,A,_,O,R,L){var I=s.copy(),F=Gi(L||_,A),q,U,P;if((P=n.call(N,new E2("beforestart",{sourceEvent:_,target:m,identifier:R,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:I}),O))!=null)return q=P.x-F[0]||0,U=P.y-F[1]||0,function H(j,V,G){var te=F,z;switch(j){case"start":i[R]=H,z=o++;break;case"end":delete i[R],--o;case"drag":F=Gi(G||V,A),z=o;break}I.call(j,N,new E2(j,{sourceEvent:V,subject:P,target:m,identifier:R,active:z,x:F[0]+q,y:F[1]+U,dx:F[0]-te[0],dy:F[1]-te[1],dispatch:I}),O)}}return m.filter=function(N){return arguments.length?(t=typeof N=="function"?N:gm(!!N),m):t},m.container=function(N){return arguments.length?(e=typeof N=="function"?N:gm(N),m):e},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:gm(N),m):n},m.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:gm(!!N),m):r},m.on=function(){var N=s.on.apply(s,arguments);return N===s?m:N},m.clickDistance=function(N){return arguments.length?(p=(N=+N)*N,m):Math.sqrt(p)},m}function CT(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function yF(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Mh(){}var Xf=.7,Xg=1/Xf,su="\\s*([+-]?\\d+)\\s*",Zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ple=/^#([0-9a-f]{3,8})$/,mle=new RegExp(`^rgb\\(${su},${su},${su}\\)$`),gle=new RegExp(`^rgb\\(${ks},${ks},${ks}\\)$`),yle=new RegExp(`^rgba\\(${su},${su},${su},${Zf}\\)$`),ble=new RegExp(`^rgba\\(${ks},${ks},${ks},${Zf}\\)$`),xle=new RegExp(`^hsl\\(${Zf},${ks},${ks}\\)$`),vle=new RegExp(`^hsla\\(${Zf},${ks},${ks},${Zf}\\)$`),a3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CT(Mh,jl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:l3,formatHex:l3,formatHex8:wle,formatHsl:Sle,formatRgb:c3,toString:c3});function l3(){return this.rgb().formatHex()}function wle(){return this.rgb().formatHex8()}function Sle(){return bF(this).formatHsl()}function c3(){return this.rgb().formatRgb()}function jl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ple.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?u3(e):n===3?new Br(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ym(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ym(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=mle.exec(t))?new Br(e[1],e[2],e[3],1):(e=gle.exec(t))?new Br(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=yle.exec(t))?ym(e[1],e[2],e[3],e[4]):(e=ble.exec(t))?ym(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=xle.exec(t))?h3(e[1],e[2]/100,e[3]/100,1):(e=vle.exec(t))?h3(e[1],e[2]/100,e[3]/100,e[4]):a3.hasOwnProperty(t)?u3(a3[t]):t==="transparent"?new Br(NaN,NaN,NaN,0):null}function u3(t){return new Br(t>>16&255,t>>8&255,t&255,1)}function ym(t,e,n,r){return r<=0&&(t=e=n=NaN),new Br(t,e,n,r)}function kle(t){return t instanceof Mh||(t=jl(t)),t?(t=t.rgb(),new Br(t.r,t.g,t.b,t.opacity)):new Br}function N2(t,e,n,r){return arguments.length===1?kle(t):new Br(t,e,n,r??1)}function Br(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}CT(Br,N2,yF(Mh,{brighter(t){return t=t==null?Xg:Math.pow(Xg,t),new Br(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xf:Math.pow(Xf,t),new Br(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Br(Cl(this.r),Cl(this.g),Cl(this.b),Zg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d3,formatHex:d3,formatHex8:Cle,formatRgb:f3,toString:f3}));function d3(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}`}function Cle(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}${pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function f3(){const t=Zg(this.opacity);return`${t===1?"rgb(":"rgba("}${Cl(this.r)}, ${Cl(this.g)}, ${Cl(this.b)}${t===1?")":`, ${t})`}`}function Zg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Cl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function pl(t){return t=Cl(t),(t<16?"0":"")+t.toString(16)}function h3(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ki(t,e,n,r)}function bF(t){if(t instanceof Ki)return new Ki(t.h,t.s,t.l,t.opacity);if(t instanceof Mh||(t=jl(t)),!t)return new Ki;if(t instanceof Ki)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Ki(o,l,u,t.opacity)}function Ele(t,e,n,r){return arguments.length===1?bF(t):new Ki(t,e,n,r??1)}function Ki(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}CT(Ki,Ele,yF(Mh,{brighter(t){return t=t==null?Xg:Math.pow(Xg,t),new Ki(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xf:Math.pow(Xf,t),new Ki(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Br(Tv(t>=240?t-240:t+120,i,r),Tv(t,i,r),Tv(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ki(p3(this.h),bm(this.s),bm(this.l),Zg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zg(this.opacity);return`${t===1?"hsl(":"hsla("}${p3(this.h)}, ${bm(this.s)*100}%, ${bm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function p3(t){return t=(t||0)%360,t<0?t+360:t}function bm(t){return Math.max(0,Math.min(1,t||0))}function Tv(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ET=t=>()=>t;function Nle(t,e){return function(n){return t+n*e}}function Tle(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ale(t){return(t=+t)==1?xF:function(e,n){return n-e?Tle(e,n,t):ET(isNaN(e)?n:e)}}function xF(t,e){var n=e-t;return n?Nle(t,n):ET(isNaN(t)?e:t)}const Jg=(function t(e){var n=Ale(e);function r(i,s){var o=n((i=N2(i)).r,(s=N2(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=xF(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=u(f),i.opacity=d(f),i+""}}return r.gamma=t,r})(1);function Mle(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function _le(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Dle(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ef(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function Rle(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function jle(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ef(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var T2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Av=new RegExp(T2.source,"g");function Ole(t){return function(){return t}}function Lle(t){return function(e){return t(e)+""}}function vF(t,e){var n=T2.lastIndex=Av.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=T2.exec(t))&&(i=Av.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:bs(r,i)})),n=Av.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?Lle(u[0].x):Ole(e):(e=u.length,function(d){for(var f=0,p;f<e;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function Ef(t,e){var n=typeof e,r;return e==null||n==="boolean"?ET(e):(n==="number"?bs:n==="string"?(r=jl(e))?(e=r,Jg):vF:e instanceof jl?Jg:e instanceof Date?Rle:_le(e)?Mle:Array.isArray(e)?Dle:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?jle:bs)(t,e)}var m3=180/Math.PI,A2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wF(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*m3,skewX:Math.atan(u)*m3,scaleX:o,scaleY:l}}var xm;function Ile(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?A2:wF(e.a,e.b,e.c,e.d,e.e,e.f)}function Ple(t){return t==null||(xm||(xm=document.createElementNS("http://www.w3.org/2000/svg","g")),xm.setAttribute("transform",t),!(t=xm.transform.baseVal.consolidate()))?A2:(t=t.matrix,wF(t.a,t.b,t.c,t.d,t.e,t.f))}function SF(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,f,p,m,b,x){if(d!==p||f!==m){var w=b.push("translate(",null,e,null,n);x.push({i:w-4,x:bs(d,p)},{i:w-2,x:bs(f,m)})}else(p||m)&&b.push("translate("+p+e+m+n)}function o(d,f,p,m){d!==f?(d-f>180?f+=360:f-d>180&&(d+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:bs(d,f)})):f&&p.push(i(p)+"rotate("+f+r)}function l(d,f,p,m){d!==f?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:bs(d,f)}):f&&p.push(i(p)+"skewX("+f+r)}function u(d,f,p,m,b,x){if(d!==p||f!==m){var w=b.push(i(b)+"scale(",null,",",null,")");x.push({i:w-4,x:bs(d,p)},{i:w-2,x:bs(f,m)})}else(p!==1||m!==1)&&b.push(i(b)+"scale("+p+","+m+")")}return function(d,f){var p=[],m=[];return d=t(d),f=t(f),s(d.translateX,d.translateY,f.translateX,f.translateY,p,m),o(d.rotate,f.rotate,p,m),l(d.skewX,f.skewX,p,m),u(d.scaleX,d.scaleY,f.scaleX,f.scaleY,p,m),d=f=null,function(b){for(var x=-1,w=m.length,S;++x<w;)p[(S=m[x]).i]=S.x(b);return p.join("")}}}var Ble=SF(Ile,"px, ","px)","deg)"),zle=SF(Ple,", ",")",")"),Vle=1e-12;function g3(t){return((t=Math.exp(t))+1/t)/2}function qle(t){return((t=Math.exp(t))-1/t)/2}function Fle(t){return((t=Math.exp(2*t))-1)/(t+1)}const Fm=(function t(e,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],f=o[0],p=o[1],m=o[2],b=f-l,x=p-u,w=b*b+x*x,S,C;if(w<Vle)C=Math.log(m/d)/e,S=function(O){return[l+O*b,u+O*x,d*Math.exp(e*O*C)]};else{var T=Math.sqrt(w),E=(m*m-d*d+r*w)/(2*d*n*T),N=(m*m-d*d-r*w)/(2*m*n*T),A=Math.log(Math.sqrt(E*E+1)-E),_=Math.log(Math.sqrt(N*N+1)-N);C=(_-A)/e,S=function(O){var R=O*C,L=g3(A),I=d/(n*T)*(L*Fle(e*R+A)-qle(A));return[l+I*b,u+I*x,d*L/g3(e*R+A)]}}return S.duration=C*1e3*e/Math.SQRT2,S}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i})(Math.SQRT2,2,4);var wu=0,rf=0,Ud=0,kF=1e3,Qg,sf,ey=0,Ol=0,Gy=0,Jf=typeof performance=="object"&&performance.now?performance:Date,CF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function NT(){return Ol||(CF(Hle),Ol=Jf.now()+Gy)}function Hle(){Ol=0}function ty(){this._call=this._time=this._next=null}ty.prototype=EF.prototype={constructor:ty,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?NT():+n)+(e==null?0:+e),!this._next&&sf!==this&&(sf?sf._next=this:Qg=this,sf=this),this._call=t,this._time=n,M2()},stop:function(){this._call&&(this._call=null,this._time=1/0,M2())}};function EF(t,e,n){var r=new ty;return r.restart(t,e,n),r}function Ule(){NT(),++wu;for(var t=Qg,e;t;)(e=Ol-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wu}function y3(){Ol=(ey=Jf.now())+Gy,wu=rf=0;try{Ule()}finally{wu=0,Gle(),Ol=0}}function $le(){var t=Jf.now(),e=t-ey;e>kF&&(Gy-=e,ey=t)}function Gle(){for(var t,e=Qg,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qg=n);sf=t,M2(r)}function M2(t){if(!wu){rf&&(rf=clearTimeout(rf));var e=t-Ol;e>24?(t<1/0&&(rf=setTimeout(y3,t-Jf.now()-Gy)),Ud&&(Ud=clearInterval(Ud))):(Ud||(ey=Jf.now(),Ud=setInterval($le,kF)),wu=1,CF(y3))}}function b3(t,e,n){var r=new ty;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var Wle=Uy("start","end","cancel","interrupt"),Kle=[],NF=0,x3=1,_2=2,Hm=3,v3=4,D2=5,Um=6;function Wy(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;Yle(t,n,{name:e,index:r,group:i,on:Wle,tween:Kle,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:NF})}function TT(t,e){var n=Ji(t,e);if(n.state>NF)throw new Error("too late; already scheduled");return n}function Ds(t,e){var n=Ji(t,e);if(n.state>Hm)throw new Error("too late; already running");return n}function Ji(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Yle(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=EF(s,0,n.time);function s(d){n.state=x3,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var f,p,m,b;if(n.state!==x3)return u();for(f in r)if(b=r[f],b.name===n.name){if(b.state===Hm)return b3(o);b.state===v3?(b.state=Um,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[f]):+f<e&&(b.state=Um,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[f])}if(b3(function(){n.state===Hm&&(n.state=v3,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=_2,n.on.call("start",t,t.__data__,n.index,n.group),n.state===_2){for(n.state=Hm,i=new Array(m=n.tween.length),f=0,p=-1;f<m;++f)(b=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function l(d){for(var f=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=D2,1),p=-1,m=i.length;++p<m;)i[p].call(t,f);n.state===D2&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=Um,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function $m(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>_2&&r.state<D2,r.state=Um,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function Xle(t){return this.each(function(){$m(this,t)})}function Zle(t,e){var n,r;return function(){var i=Ds(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Jle(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ds(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===e){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function Qle(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ji(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?Zle:Jle)(n,t,e))}function AT(t,e,n){var r=t._id;return t.each(function(){var i=Ds(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ji(i,r).value[e]}}function TF(t,e){var n;return(typeof e=="number"?bs:e instanceof jl?Jg:(n=jl(e))?(e=n,Jg):vF)(t,e)}function ece(t){return function(){this.removeAttribute(t)}}function tce(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nce(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function rce(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function ice(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function sce(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function oce(t,e){var n=$y(t),r=n==="transform"?zle:TF;return this.attrTween(t,typeof e=="function"?(n.local?sce:ice)(n,r,AT(this,"attr."+t,e)):e==null?(n.local?tce:ece)(n):(n.local?rce:nce)(n,r,e))}function ace(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function lce(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cce(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&lce(t,s)),n}return i._value=e,i}function uce(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&ace(t,s)),n}return i._value=e,i}function dce(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=$y(t);return this.tween(n,(r.local?cce:uce)(r,e))}function fce(t,e){return function(){TT(this,t).delay=+e.apply(this,arguments)}}function hce(t,e){return e=+e,function(){TT(this,t).delay=e}}function pce(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fce:hce)(e,t)):Ji(this.node(),e).delay}function mce(t,e){return function(){Ds(this,t).duration=+e.apply(this,arguments)}}function gce(t,e){return e=+e,function(){Ds(this,t).duration=e}}function yce(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?mce:gce)(e,t)):Ji(this.node(),e).duration}function bce(t,e){if(typeof e!="function")throw new Error;return function(){Ds(this,t).ease=e}}function xce(t){var e=this._id;return arguments.length?this.each(bce(e,t)):Ji(this.node(),e).ease}function vce(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ds(this,t).ease=n}}function wce(t){if(typeof t!="function")throw new Error;return this.each(vce(this._id,t))}function Sce(t){typeof t!="function"&&(t=iF(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&l.push(u);return new uo(r,this._parents,this._name,this._id)}function kce(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],d=n[l],f=u.length,p=o[l]=new Array(f),m,b=0;b<f;++b)(m=u[b]||d[b])&&(p[b]=m);for(;l<r;++l)o[l]=e[l];return new uo(o,this._parents,this._name,this._id)}function Cce(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ece(t,e,n){var r,i,s=Cce(e)?TT:Ds;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function Nce(t,e){var n=this._id;return arguments.length<2?Ji(this.node(),n).on.on(t):this.each(Ece(n,t,e))}function Tce(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ace(){return this.on("end.remove",Tce(this._id))}function Mce(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ST(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),f,p,m=0;m<u;++m)(f=l[m])&&(p=t.call(f,f.__data__,m,l))&&("__data__"in f&&(p.__data__=f.__data__),d[m]=p,Wy(d[m],e,n,m,d,Ji(f,n)));return new uo(s,this._parents,e,n)}function _ce(t){var e=this._name,n=this._id;typeof t!="function"&&(t=rF(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,f,p=0;p<d;++p)if(f=u[p]){for(var m=t.call(f,f.__data__,p,u),b,x=Ji(f,n),w=0,S=m.length;w<S;++w)(b=m[w])&&Wy(b,e,n,w,m,x);s.push(m),o.push(f)}return new uo(s,o,e,n)}var Dce=Ah.prototype.constructor;function Rce(){return new Dce(this._groups,this._parents)}function jce(t,e){var n,r,i;return function(){var s=vu(this,t),o=(this.style.removeProperty(t),vu(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function AF(t){return function(){this.style.removeProperty(t)}}function Oce(t,e,n){var r,i=n+"",s;return function(){var o=vu(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Lce(t,e,n){var r,i,s;return function(){var o=vu(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),vu(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function Ice(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=Ds(this,t),d=u.on,f=u.value[s]==null?l||(l=AF(e)):void 0;(d!==n||i!==f)&&(r=(n=d).copy()).on(o,i=f),u.on=r}}function Pce(t,e,n){var r=(t+="")=="transform"?Ble:TF;return e==null?this.styleTween(t,jce(t,r)).on("end.style."+t,AF(t)):typeof e=="function"?this.styleTween(t,Lce(t,r,AT(this,"style."+t,e))).each(Ice(this._id,t)):this.styleTween(t,Oce(t,r,e),n).on("end.style."+t,null)}function Bce(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function zce(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Bce(t,o,n)),r}return s._value=e,s}function Vce(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,zce(t,e,n??""))}function qce(t){return function(){this.textContent=t}}function Fce(t){return function(){var e=t(this);this.textContent=e??""}}function Hce(t){return this.tween("text",typeof t=="function"?Fce(AT(this,"text",t)):qce(t==null?"":t+""))}function Uce(t){return function(e){this.textContent=t.call(this,e)}}function $ce(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Uce(i)),e}return r._value=t,r}function Gce(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,$ce(t))}function Wce(){for(var t=this._name,e=this._id,n=MF(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var f=Ji(u,e);Wy(u,t,n,d,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new uo(r,this._parents,t,n)}function Kce(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=Ds(this,r),f=d.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),d.on=e}),i===0&&s()})}var Yce=0;function uo(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function MF(){return++Yce}var Zs=Ah.prototype;uo.prototype={constructor:uo,select:Mce,selectAll:_ce,selectChild:Zs.selectChild,selectChildren:Zs.selectChildren,filter:Sce,merge:kce,selection:Rce,transition:Wce,call:Zs.call,nodes:Zs.nodes,node:Zs.node,size:Zs.size,empty:Zs.empty,each:Zs.each,on:Nce,attr:oce,attrTween:dce,style:Pce,styleTween:Vce,text:Hce,textTween:Gce,remove:Ace,tween:Qle,delay:pce,duration:yce,ease:xce,easeVarying:wce,end:Kce,[Symbol.iterator]:Zs[Symbol.iterator]};function Xce(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Zce={time:null,delay:0,duration:250,ease:Xce};function Jce(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Qce(t){var e,n;t instanceof uo?(e=t._id,t=t._name):(e=MF(),(n=Zce).time=NT(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&Wy(u,t,e,d,o,n||Jce(u,e));return new uo(r,this._parents,t,e)}Ah.prototype.interrupt=Xle;Ah.prototype.transition=Qce;const vm=t=>()=>t;function eue(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ro(t,e,n){this.k=t,this.x=e,this.y=n}ro.prototype={constructor:ro,scale:function(t){return t===1?this:new ro(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ro(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ky=new ro(1,0,0);_F.prototype=ro.prototype;function _F(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Ky;return t.__zoom}function Mv(t){t.stopImmediatePropagation()}function $d(t){t.preventDefault(),t.stopImmediatePropagation()}function tue(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function nue(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function w3(){return this.__zoom||Ky}function rue(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function iue(){return navigator.maxTouchPoints||"ontouchstart"in this}function sue(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function DF(){var t=tue,e=nue,n=sue,r=rue,i=iue,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Fm,d=Uy("start","zoom","end"),f,p,m,b=500,x=150,w=0,S=10;function C(P){P.property("__zoom",w3).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(P,H,j,V){var G=P.selection?P.selection():P;G.property("__zoom",w3),P!==G?A(P,H,j,V):G.interrupt().each(function(){_(this,arguments).event(V).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},C.scaleBy=function(P,H,j,V){C.scaleTo(P,function(){var G=this.__zoom.k,te=typeof H=="function"?H.apply(this,arguments):H;return G*te},j,V)},C.scaleTo=function(P,H,j,V){C.transform(P,function(){var G=e.apply(this,arguments),te=this.__zoom,z=j==null?N(G):typeof j=="function"?j.apply(this,arguments):j,W=te.invert(z),ae=typeof H=="function"?H.apply(this,arguments):H;return n(E(T(te,ae),z,W),G,o)},j,V)},C.translateBy=function(P,H,j,V){C.transform(P,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof j=="function"?j.apply(this,arguments):j),e.apply(this,arguments),o)},null,V)},C.translateTo=function(P,H,j,V,G){C.transform(P,function(){var te=e.apply(this,arguments),z=this.__zoom,W=V==null?N(te):typeof V=="function"?V.apply(this,arguments):V;return n(Ky.translate(W[0],W[1]).scale(z.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof j=="function"?-j.apply(this,arguments):-j),te,o)},V,G)};function T(P,H){return H=Math.max(s[0],Math.min(s[1],H)),H===P.k?P:new ro(H,P.x,P.y)}function E(P,H,j){var V=H[0]-j[0]*P.k,G=H[1]-j[1]*P.k;return V===P.x&&G===P.y?P:new ro(P.k,V,G)}function N(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function A(P,H,j,V){P.on("start.zoom",function(){_(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(V).end()}).tween("zoom",function(){var G=this,te=arguments,z=_(G,te).event(V),W=e.apply(G,te),ae=j==null?N(W):typeof j=="function"?j.apply(G,te):j,re=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),$=G.__zoom,Z=typeof H=="function"?H.apply(G,te):H,ee=u($.invert(ae).concat(re/$.k),Z.invert(ae).concat(re/Z.k));return function(de){if(de===1)de=Z;else{var oe=ee(de),ye=re/oe[2];de=new ro(ye,ae[0]-oe[0]*ye,ae[1]-oe[1]*ye)}z.zoom(null,de)}})}function _(P,H,j){return!j&&P.__zooming||new O(P,H)}function O(P,H){this.that=P,this.args=H,this.active=0,this.sourceEvent=null,this.extent=e.apply(P,H),this.taps=0}O.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,H){return this.mouse&&P!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var H=ai(this.that).datum();d.call(P,this.that,new eue(P,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:d}),H)}};function R(P,...H){if(!t.apply(this,arguments))return;var j=_(this,H).event(P),V=this.__zoom,G=Math.max(s[0],Math.min(s[1],V.k*Math.pow(2,r.apply(this,arguments)))),te=Gi(P);if(j.wheel)(j.mouse[0][0]!==te[0]||j.mouse[0][1]!==te[1])&&(j.mouse[1]=V.invert(j.mouse[0]=te)),clearTimeout(j.wheel);else{if(V.k===G)return;j.mouse=[te,V.invert(te)],$m(this),j.start()}$d(P),j.wheel=setTimeout(z,x),j.zoom("mouse",n(E(T(V,G),j.mouse[0],j.mouse[1]),j.extent,o));function z(){j.wheel=null,j.end()}}function L(P,...H){if(m||!t.apply(this,arguments))return;var j=P.currentTarget,V=_(this,H,!0).event(P),G=ai(P.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",re,!0),te=Gi(P,j),z=P.clientX,W=P.clientY;pF(P.view),Mv(P),V.mouse=[te,this.__zoom.invert(te)],$m(this),V.start();function ae($){if($d($),!V.moved){var Z=$.clientX-z,ee=$.clientY-W;V.moved=Z*Z+ee*ee>w}V.event($).zoom("mouse",n(E(V.that.__zoom,V.mouse[0]=Gi($,j),V.mouse[1]),V.extent,o))}function re($){G.on("mousemove.zoom mouseup.zoom",null),mF($.view,V.moved),$d($),V.event($).end()}}function I(P,...H){if(t.apply(this,arguments)){var j=this.__zoom,V=Gi(P.changedTouches?P.changedTouches[0]:P,this),G=j.invert(V),te=j.k*(P.shiftKey?.5:2),z=n(E(T(j,te),V,G),e.apply(this,H),o);$d(P),l>0?ai(this).transition().duration(l).call(A,z,V,P):ai(this).call(C.transform,z,V,P)}}function F(P,...H){if(t.apply(this,arguments)){var j=P.touches,V=j.length,G=_(this,H,P.changedTouches.length===V).event(P),te,z,W,ae;for(Mv(P),z=0;z<V;++z)W=j[z],ae=Gi(W,this),ae=[ae,this.__zoom.invert(ae),W.identifier],G.touch0?!G.touch1&&G.touch0[2]!==ae[2]&&(G.touch1=ae,G.taps=0):(G.touch0=ae,te=!0,G.taps=1+!!f);f&&(f=clearTimeout(f)),te&&(G.taps<2&&(p=ae[0],f=setTimeout(function(){f=null},b)),$m(this),G.start())}}function q(P,...H){if(this.__zooming){var j=_(this,H).event(P),V=P.changedTouches,G=V.length,te,z,W,ae;for($d(P),te=0;te<G;++te)z=V[te],W=Gi(z,this),j.touch0&&j.touch0[2]===z.identifier?j.touch0[0]=W:j.touch1&&j.touch1[2]===z.identifier&&(j.touch1[0]=W);if(z=j.that.__zoom,j.touch1){var re=j.touch0[0],$=j.touch0[1],Z=j.touch1[0],ee=j.touch1[1],de=(de=Z[0]-re[0])*de+(de=Z[1]-re[1])*de,oe=(oe=ee[0]-$[0])*oe+(oe=ee[1]-$[1])*oe;z=T(z,Math.sqrt(de/oe)),W=[(re[0]+Z[0])/2,(re[1]+Z[1])/2],ae=[($[0]+ee[0])/2,($[1]+ee[1])/2]}else if(j.touch0)W=j.touch0[0],ae=j.touch0[1];else return;j.zoom("touch",n(E(z,W,ae),j.extent,o))}}function U(P,...H){if(this.__zooming){var j=_(this,H).event(P),V=P.changedTouches,G=V.length,te,z;for(Mv(P),m&&clearTimeout(m),m=setTimeout(function(){m=null},b),te=0;te<G;++te)z=V[te],j.touch0&&j.touch0[2]===z.identifier?delete j.touch0:j.touch1&&j.touch1[2]===z.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(z=Gi(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<S)){var W=ai(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return C.wheelDelta=function(P){return arguments.length?(r=typeof P=="function"?P:vm(+P),C):r},C.filter=function(P){return arguments.length?(t=typeof P=="function"?P:vm(!!P),C):t},C.touchable=function(P){return arguments.length?(i=typeof P=="function"?P:vm(!!P),C):i},C.extent=function(P){return arguments.length?(e=typeof P=="function"?P:vm([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),C):e},C.scaleExtent=function(P){return arguments.length?(s[0]=+P[0],s[1]=+P[1],C):[s[0],s[1]]},C.translateExtent=function(P){return arguments.length?(o[0][0]=+P[0][0],o[1][0]=+P[1][0],o[0][1]=+P[0][1],o[1][1]=+P[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(P){return arguments.length?(n=P,C):n},C.duration=function(P){return arguments.length?(l=+P,C):l},C.interpolate=function(P){return arguments.length?(u=P,C):u},C.on=function(){var P=d.on.apply(d,arguments);return P===d?C:P},C.clickDistance=function(P){return arguments.length?(w=(P=+P)*P,C):Math.sqrt(w)},C.tapDistance=function(P){return arguments.length?(S=+P,C):S},C}const Ts={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Qf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],RF=["Enter"," ","Escape"],jF={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ll;(function(t){t.Strict="strict",t.Loose="loose"})(Ll||(Ll={}));var El;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(El||(El={}));var eh;(function(t){t.Partial="partial",t.Full="full"})(eh||(eh={}));const OF={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var oa;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(oa||(oa={}));var ny;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ny||(ny={}));var Me;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Me||(Me={}));const S3={[Me.Left]:Me.Right,[Me.Right]:Me.Left,[Me.Top]:Me.Bottom,[Me.Bottom]:Me.Top};function LF(t){return t===null?null:t?"valid":"invalid"}const IF=t=>"id"in t&&"source"in t&&"target"in t,oue=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),MT=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),_h=(t,e=[0,0])=>{const{width:n,height:r}=mo(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},PF=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):MT(i)?i:e.nodeLookup.get(i.id));const l=o?ry(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Yy(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Xy(n)},Dh=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=ry(r);n=Yy(n,i)}}),Xy(n)},_T=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...jh(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const d of t.values()){const{measured:f,selectable:p=!0,hidden:m=!1}=d;if(o&&!p||m)continue;const b=f.width??d.width??d.initialWidth??null,x=f.height??d.height??d.initialHeight??null,w=th(l,ku(d)),S=(b??0)*(x??0),C=s&&w>0;(!d.internals.handleBounds||C||w>=S||d.dragging)&&u.push(d)}return u},aue=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function lue(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function cue({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!0);const l=lue(t,o),u=Dh(l),d=Zy(u,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function BF({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},f=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Ts.error005());else{const b=l.measured.width,x=l.measured.height;b&&x&&(p=[[u,d],[u+b,d+x]])}else l&&Cu(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const m=Cu(p)?Il(e,p,o.measured):e;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",Ts.error015()),{position:{x:m.x-u+(o.measured.width??0)*f[0],y:m.y-d+(o.measured.height??0)*f[1]},positionAbsolute:m}}async function uue({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(m=>m.id)),o=[];for(const m of n){if(m.deletable===!1)continue;const b=s.has(m.id),x=!b&&m.parentId&&o.find(w=>w.id===m.parentId);(b||x)&&o.push(m)}const l=new Set(e.map(m=>m.id)),u=r.filter(m=>m.deletable!==!1),f=aue(o,u);for(const m of u)l.has(m.id)&&!f.find(x=>x.id===m.id)&&f.push(m);if(!i)return{edges:f,nodes:o};const p=await i({nodes:o,edges:f});return typeof p=="boolean"?p?{edges:f,nodes:o}:{edges:[],nodes:[]}:p}const Su=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Il=(t={x:0,y:0},e,n)=>({x:Su(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Su(t.y,e[0][1],e[1][1]-(n?.height??0))});function zF(t,e,n){const{width:r,height:i}=mo(n),{x:s,y:o}=n.internals.positionAbsolute;return Il(t,[[s,o],[s+r,o+i]],e)}const k3=(t,e,n)=>t<e?Su(Math.abs(t-e),1,e)/e:t>n?-Su(Math.abs(t-n),1,e)/e:0,VF=(t,e,n=15,r=40)=>{const i=k3(t.x,r,e.width-r)*n,s=k3(t.y,r,e.height-r)*n;return[i,s]},Yy=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),R2=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Xy=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),ku=(t,e=[0,0])=>{const{x:n,y:r}=MT(t)?t.internals.positionAbsolute:_h(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},ry=(t,e=[0,0])=>{const{x:n,y:r}=MT(t)?t.internals.positionAbsolute:_h(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},qF=(t,e)=>Xy(Yy(R2(t),R2(e))),th=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},C3=t=>Xi(t.width)&&Xi(t.height)&&Xi(t.x)&&Xi(t.y),Xi=t=>!isNaN(t)&&isFinite(t),due=(t,e)=>{},Rh=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),jh=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?Rh(l,o):l},iy=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r});function Bc(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function fue(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=Bc(t,n),i=Bc(t,e);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof t=="object"){const r=Bc(t.top??t.y??0,n),i=Bc(t.bottom??t.y??0,n),s=Bc(t.left??t.x??0,e),o=Bc(t.right??t.x??0,e);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function hue(t,e,n,r,i,s){const{x:o,y:l}=iy(t,[e,n,r]),{x:u,y:d}=iy({x:t.x+t.width,y:t.y+t.height},[e,n,r]),f=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(f),bottom:Math.floor(p)}}const Zy=(t,e,n,r,i,s)=>{const o=fue(s,e,n),l=(e-o.x)/t.width,u=(n-o.y)/t.height,d=Math.min(l,u),f=Su(d,r,i),p=t.x+t.width/2,m=t.y+t.height/2,b=e/2-p*f,x=n/2-m*f,w=hue(t,b,x,f,e,n),S={left:Math.min(w.left-o.left,0),top:Math.min(w.top-o.top,0),right:Math.min(w.right-o.right,0),bottom:Math.min(w.bottom-o.bottom,0)};return{x:b-S.left+S.right,y:x-S.top+S.bottom,zoom:f}},nh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Cu(t){return t!=null&&t!=="parent"}function mo(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function FF(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function HF(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function E3(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function pue(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function mue(t){return{...jF,...t||{}}}function Nf(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=vs(t),l=jh({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Rh(l,e):l;return{xSnapped:u,ySnapped:d,...l}}const DT=t=>({width:t.offsetWidth,height:t.offsetHeight}),UF=t=>t?.getRootNode?.()||window?.document,gue=["INPUT","SELECT","TEXTAREA"];function $F(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:gue.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const GF=t=>"clientX"in t,vs=(t,e)=>{const n=GF(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},N3=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...DT(o)}})};function WF({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,d=e*.125+s*.375+l*.375+r*.125,f=Math.abs(u-t),p=Math.abs(d-e);return[u,d,f,p]}function wm(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function T3({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Me.Left:return[e-wm(e-r,s),n];case Me.Right:return[e+wm(r-e,s),n];case Me.Top:return[e,n-wm(n-i,s)];case Me.Bottom:return[e,n+wm(i-n,s)]}}function Jy({sourceX:t,sourceY:e,sourcePosition:n=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top,curvature:o=.25}){const[l,u]=T3({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[d,f]=T3({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[p,m,b,x]=WF({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${t},${e} C${l},${u} ${d},${f} ${r},${i}`,p,m,b,x]}function Qy({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function yue({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(t.parentId?t.internals.z:0,e.parentId?e.internals.z:0);return s+o}function bue({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=Yy(ry(t),ry(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return th(o,Xy(s))>0}const xue=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,vue=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),KF=(t,e)=>{if(!t.source||!t.target)return e;let n;return IF(t)?n={...t}:n={...t,id:xue(t)},vue(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function YF({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=Qy({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const A3={[Me.Left]:{x:-1,y:0},[Me.Right]:{x:1,y:0},[Me.Top]:{x:0,y:-1},[Me.Bottom]:{x:0,y:1}},wue=({source:t,sourcePosition:e=Me.Bottom,target:n})=>e===Me.Left||e===Me.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},M3=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Sue({source:t,sourcePosition:e=Me.Bottom,target:n,targetPosition:r=Me.Top,center:i,offset:s,stepPosition:o}){const l=A3[e],u=A3[r],d={x:t.x+l.x*s,y:t.y+l.y*s},f={x:n.x+u.x*s,y:n.y+u.y*s},p=wue({source:d,sourcePosition:e,target:f}),m=p.x!==0?"x":"y",b=p[m];let x=[],w,S;const C={x:0,y:0},T={x:0,y:0},[,,E,N]=Qy({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[m]*u[m]===-1){m==="x"?(w=i.x??d.x+(f.x-d.x)*o,S=i.y??(d.y+f.y)/2):(w=i.x??(d.x+f.x)/2,S=i.y??d.y+(f.y-d.y)*o);const _=[{x:w,y:d.y},{x:w,y:f.y}],O=[{x:d.x,y:S},{x:f.x,y:S}];l[m]===b?x=m==="x"?_:O:x=m==="x"?O:_}else{const _=[{x:d.x,y:f.y}],O=[{x:f.x,y:d.y}];if(m==="x"?x=l.x===b?O:_:x=l.y===b?_:O,e===r){const q=Math.abs(t[m]-n[m]);if(q<=s){const U=Math.min(s-1,s-q);l[m]===b?C[m]=(d[m]>t[m]?-1:1)*U:T[m]=(f[m]>n[m]?-1:1)*U}}if(e!==r){const q=m==="x"?"y":"x",U=l[m]===u[q],P=d[q]>f[q],H=d[q]<f[q];(l[m]===1&&(!U&&P||U&&H)||l[m]!==1&&(!U&&H||U&&P))&&(x=m==="x"?_:O)}const R={x:d.x+C.x,y:d.y+C.y},L={x:f.x+T.x,y:f.y+T.y},I=Math.max(Math.abs(R.x-x[0].x),Math.abs(L.x-x[0].x)),F=Math.max(Math.abs(R.y-x[0].y),Math.abs(L.y-x[0].y));I>=F?(w=(R.x+L.x)/2,S=x[0].y):(w=x[0].x,S=(R.y+L.y)/2)}return[[t,{x:d.x+C.x,y:d.y+C.y},...x,{x:f.x+T.x,y:f.y+T.y},n],w,S,E,N]}function kue(t,e,n,r){const i=Math.min(M3(t,e)/2,M3(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const d=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*f}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function j2({sourceX:t,sourceY:e,sourcePosition:n=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:f=.5}){const[p,m,b,x,w]=Sue({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:f});return[p.reduce((C,T,E)=>{let N="";return E>0&&E<p.length-1?N=kue(p[E-1],T,p[E+1],o):N=`${E===0?"M":"L"}${T.x} ${T.y}`,C+=N,C},""),m,b,x,w]}function _3(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Cue(t){const{sourceNode:e,targetNode:n}=t;if(!_3(e)||!_3(n))return null;const r=e.internals.handleBounds||D3(e.handles),i=n.internals.handleBounds||D3(n.handles),s=R3(r?.source??[],t.sourceHandle),o=R3(t.connectionMode===Ll.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",Ts.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Me.Bottom,u=o?.position||Me.Top,d=rh(e,s,l),f=rh(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:u}}function D3(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function rh(t,e,n=Me.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??mo(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Me.Top:return{x:i+o/2,y:s};case Me.Right:return{x:i+o,y:s+l/2};case Me.Bottom:return{x:i+o/2,y:s+l};case Me.Left:return{x:i,y:s+l/2}}}function R3(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function O2(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function Eue(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=O2(u,e);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const RT={nodeOrigin:[0,0],nodeExtent:Qf,elevateNodesOnSelect:!0,defaults:{}},Nue={...RT,checkEquality:!0};function jT(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function Tue(t,e,n){const r=jT(RT,n);for(const i of t.values())if(i.parentId)OT(i,t,e,r);else{const s=_h(i,r.nodeOrigin),o=Cu(i.extent)?i.extent:r.nodeExtent,l=Il(s,o,mo(i));i.internals.positionAbsolute=l}}function L2(t,e,n,r){const i=jT(Nue,r);let s=t.length>0;const o=new Map(e),l=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)e.set(u.id,d);else{const f=_h(u,i.nodeOrigin),p=Cu(u.extent)?u.extent:i.nodeExtent,m=Il(f,p,mo(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:m,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:XF(u,l),userNode:u}},e.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&OT(d,e,n,r)}return s}function Aue(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function OT(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=jT(RT,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Aue(t,n);const d=i?1e3:0,{x:f,y:p,z:m}=Mue(t,u,s,o,d),{positionAbsolute:b}=t.internals,x=f!==b.x||p!==b.y;(x||m!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:x?{x:f,y:p}:b,z:m}})}function XF(t,e){return(Xi(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function Mue(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=mo(t),u=_h(t,n),d=Cu(t.extent)?Il(u,t.extent,l):u;let f=Il({x:s+d.x,y:o+d.y},r,l);t.extent==="parent"&&(f=zF(f,l,e));const p=XF(t,i),m=e.internals.z??0;return{x:f.x,y:f.y,z:m>=p?m+1:p}}function LT(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??ku(l),d=qF(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,f=mo(l),p=l.origin??r,m=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,b=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(f.width,Math.round(o.width)),w=Math.max(f.height,Math.round(o.height)),S=(x-f.width)*p[0],C=(w-f.height)*p[1];(m>0||b>0||S||C)&&(i.push({id:u,type:"position",position:{x:l.position.x-m+S,y:l.position.y-b+C}}),n.get(u)?.forEach(T=>{t.some(E=>E.id===T.id)||i.push({id:T.id,type:"position",position:{x:T.position.x+m,y:T.position.y+b}})})),(f.width<o.width||f.height<o.height||m||b)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(m?p[0]*m-S:0),height:w+(b?p[1]*b-C:0)}})}),i}function _ue(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const m of t.values()){const b=e.get(m.id);if(!b)continue;if(b.hidden){e.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),l=!0;continue}const x=DT(m.nodeElement),w=b.measured.width!==x.width||b.measured.height!==x.height;if(!!(x.width&&x.height&&(w||!b.internals.handleBounds||m.force))){const C=m.nodeElement.getBoundingClientRect(),T=Cu(b.extent)?b.extent:s;let{positionAbsolute:E}=b.internals;b.parentId&&b.extent==="parent"?E=zF(E,x,e.get(b.parentId)):T&&(E=Il(E,T,x));const N={...b,measured:x,internals:{...b.internals,positionAbsolute:E,handleBounds:{source:N3("source",m.nodeElement,C,f,b.id),target:N3("target",m.nodeElement,C,f,b.id)}}};e.set(b.id,N),b.parentId&&OT(N,e,n,{nodeOrigin:i}),l=!0,w&&(u.push({id:b.id,type:"dimensions",dimensions:x}),b.expandParent&&b.parentId&&p.push({id:b.id,parentId:b.parentId,rect:ku(N,i)}))}}if(p.length>0){const m=LT(p,e,n,i);u.push(...m)}return{changes:u,updatedInternals:l}}async function Due({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function j3(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,e))}}function ZF(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,f=`${s}-${l}--${i}-${o}`;j3("source",u,f,t,i,o),j3("target",u,d,t,s,l),e.set(r.id,r)}}function JF(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:JF(n,e):!1}function O3(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Rue(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!JF(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function _v({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function jue({dragItems:t,snapGrid:e,x:n,y:r}){const i=t.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Rh(s,e);return{x:o.x-s.x,y:o.y-s.y}}function Oue({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},f=null,p=!1,m=null,b=!1,x=!1,w=null;function S({noDragClassName:T,handleSelector:E,domNode:N,isSelectable:A,nodeId:_,nodeClickDistance:O=0}){m=ai(N);function R({x:q,y:U}){const{nodeLookup:P,nodeExtent:H,snapGrid:j,snapToGrid:V,nodeOrigin:G,onNodeDrag:te,onSelectionDrag:z,onError:W,updateNodePositions:ae}=e();s={x:q,y:U};let re=!1;const $=l.size>1,Z=$&&H?R2(Dh(l)):null,ee=$&&V?jue({dragItems:l,snapGrid:j,x:q,y:U}):null;for(const[de,oe]of l){if(!P.has(de))continue;let ye={x:q-oe.distance.x,y:U-oe.distance.y};V&&(ye=ee?{x:Math.round(ye.x+ee.x),y:Math.round(ye.y+ee.y)}:Rh(ye,j));let Ce=null;if($&&H&&!oe.extent&&Z){const{positionAbsolute:Ae}=oe.internals,Ee=Ae.x-Z.x+H[0][0],Ne=Ae.x+oe.measured.width-Z.x2+H[1][0],yt=Ae.y-Z.y+H[0][1],Oe=Ae.y+oe.measured.height-Z.y2+H[1][1];Ce=[[Ee,yt],[Ne,Oe]]}const{position:Pe,positionAbsolute:Ie}=BF({nodeId:de,nextPosition:ye,nodeLookup:P,nodeExtent:Ce||H,nodeOrigin:G,onError:W});re=re||oe.position.x!==Pe.x||oe.position.y!==Pe.y,oe.position=Pe,oe.internals.positionAbsolute=Ie}if(x=x||re,!!re&&(ae(l,!0),w&&(r||te||!_&&z))){const[de,oe]=_v({nodeId:_,dragItems:l,nodeLookup:P});r?.(w,l,de,oe),te?.(w,de,oe),_||z?.(w,oe)}}async function L(){if(!f)return;const{transform:q,panBy:U,autoPanSpeed:P,autoPanOnNodeDrag:H}=e();if(!H){u=!1,cancelAnimationFrame(o);return}const[j,V]=VF(d,f,P);(j!==0||V!==0)&&(s.x=(s.x??0)-j/q[2],s.y=(s.y??0)-V/q[2],await U({x:j,y:V})&&R(s)),o=requestAnimationFrame(L)}function I(q){const{nodeLookup:U,multiSelectionActive:P,nodesDraggable:H,transform:j,snapGrid:V,snapToGrid:G,selectNodesOnDrag:te,onNodeDragStart:z,onSelectionDragStart:W,unselectNodesAndEdges:ae}=e();p=!0,(!te||!A)&&!P&&_&&(U.get(_)?.selected||ae()),A&&te&&_&&t?.(_);const re=Nf(q.sourceEvent,{transform:j,snapGrid:V,snapToGrid:G,containerBounds:f});if(s=re,l=Rue(U,H,re,_),l.size>0&&(n||z||!_&&W)){const[$,Z]=_v({nodeId:_,dragItems:l,nodeLookup:U});n?.(q.sourceEvent,l,$,Z),z?.(q.sourceEvent,$,Z),_||W?.(q.sourceEvent,Z)}}const F=gF().clickDistance(O).on("start",q=>{const{domNode:U,nodeDragThreshold:P,transform:H,snapGrid:j,snapToGrid:V}=e();f=U?.getBoundingClientRect()||null,b=!1,x=!1,w=q.sourceEvent,P===0&&I(q),s=Nf(q.sourceEvent,{transform:H,snapGrid:j,snapToGrid:V,containerBounds:f}),d=vs(q.sourceEvent,f)}).on("drag",q=>{const{autoPanOnNodeDrag:U,transform:P,snapGrid:H,snapToGrid:j,nodeDragThreshold:V,nodeLookup:G}=e(),te=Nf(q.sourceEvent,{transform:P,snapGrid:H,snapToGrid:j,containerBounds:f});if(w=q.sourceEvent,(q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||_&&!G.has(_))&&(b=!0),!b){if(!u&&U&&p&&(u=!0,L()),!p){const z=te.xSnapped-(s.x??0),W=te.ySnapped-(s.y??0);Math.sqrt(z*z+W*W)>V&&I(q)}(s.x!==te.xSnapped||s.y!==te.ySnapped)&&l&&p&&(d=vs(q.sourceEvent,f),R(te))}}).on("end",q=>{if(!(!p||b)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:U,updateNodePositions:P,onNodeDragStop:H,onSelectionDragStop:j}=e();if(x&&(P(l,!1),x=!1),i||H||!_&&j){const[V,G]=_v({nodeId:_,dragItems:l,nodeLookup:U,dragging:!1});i?.(q.sourceEvent,l,V,G),H?.(q.sourceEvent,V,G),_||j?.(q.sourceEvent,G)}}}).filter(q=>{const U=q.target;return!q.button&&(!T||!O3(U,`.${T}`,N))&&(!E||O3(U,E,N))});m.call(F)}function C(){m?.on(".drag",null)}return{update:S,destroy:C}}function Lue(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())th(i,ku(s))>0&&r.push(s);return r}const Iue=250;function Pue(t,e,n,r){let i=[],s=1/0;const o=Lue(t,n,e+Iue);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=rh(l,d,d.position,!0),m=Math.sqrt(Math.pow(f-t.x,2)+Math.pow(p-t.y,2));m>e||(m<s?(i=[{...d,x:f,y:p}],s=m):m===s&&i.push({...d,x:f,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function QF(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...rh(o,u,u.position,!0)}:u}function eH(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Bue(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const tH=()=>!0;function zue(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:f,flowId:p,panBy:m,cancelConnection:b,onConnectStart:x,onConnect:w,onConnectEnd:S,isValidConnection:C=tH,onReconnectEnd:T,updateConnection:E,getTransform:N,getFromHandle:A,autoPanSpeed:_,dragThreshold:O=1,handleDomNode:R}){const L=UF(t.target);let I=0,F;const{x:q,y:U}=vs(t),P=eH(s,R),H=l?.getBoundingClientRect();let j=!1;if(!H||!P)return;const V=QF(i,P,r,u,e);if(!V)return;let G=vs(t,H),te=!1,z=null,W=!1,ae=null;function re(){if(!f||!H)return;const[Pe,Ie]=VF(G,H,_);m({x:Pe,y:Ie}),I=requestAnimationFrame(re)}const $={...V,nodeId:i,type:P,position:V.position},Z=u.get(i);let de={inProgress:!0,isValid:null,from:rh(Z,$,Me.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:Z,to:G,toHandle:null,toPosition:S3[$.position],toNode:null};function oe(){j=!0,E(de),x?.(t,{nodeId:i,handleId:r,handleType:P})}O===0&&oe();function ye(Pe){if(!j){const{x:Ne,y:yt}=vs(Pe),Oe=Ne-q,xt=yt-U;if(!(Oe*Oe+xt*xt>O*O))return;oe()}if(!A()||!$){Ce(Pe);return}const Ie=N();G=vs(Pe,H),F=Pue(jh(G,Ie,!1,[1,1]),n,u,$),te||(re(),te=!0);const Ae=nH(Pe,{handle:F,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:C,doc:L,lib:d,flowId:p,nodeLookup:u});ae=Ae.handleDomNode,z=Ae.connection,W=Bue(!!F,Ae.isValid);const Ee={...de,isValid:W,to:Ae.toHandle&&W?iy({x:Ae.toHandle.x,y:Ae.toHandle.y},Ie):G,toHandle:Ae.toHandle,toPosition:W&&Ae.toHandle?Ae.toHandle.position:S3[$.position],toNode:Ae.toHandle?u.get(Ae.toHandle.nodeId):null};W&&F&&de.toHandle&&Ee.toHandle&&de.toHandle.type===Ee.toHandle.type&&de.toHandle.nodeId===Ee.toHandle.nodeId&&de.toHandle.id===Ee.toHandle.id&&de.to.x===Ee.to.x&&de.to.y===Ee.to.y||(E(Ee),de=Ee)}function Ce(Pe){if(j){(F||ae)&&z&&W&&w?.(z);const{inProgress:Ie,...Ae}=de,Ee={...Ae,toPosition:de.toHandle?de.toPosition:null};S?.(Pe,Ee),s&&T?.(Pe,Ee)}b(),cancelAnimationFrame(I),te=!1,W=!1,z=null,ae=null,L.removeEventListener("mousemove",ye),L.removeEventListener("mouseup",Ce),L.removeEventListener("touchmove",ye),L.removeEventListener("touchend",Ce)}L.addEventListener("mousemove",ye),L.addEventListener("mouseup",Ce),L.addEventListener("touchmove",ye),L.addEventListener("touchend",Ce)}function nH(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=tH,nodeLookup:f}){const p=s==="target",m=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:b,y:x}=vs(t),w=o.elementFromPoint(b,x),S=w?.classList.contains(`${l}-flow__handle`)?w:m,C={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const T=eH(void 0,S),E=S.getAttribute("data-nodeid"),N=S.getAttribute("data-handleid"),A=S.classList.contains("connectable"),_=S.classList.contains("connectableend");if(!E||!T)return C;const O={source:p?E:r,sourceHandle:p?N:i,target:p?r:E,targetHandle:p?i:N};C.connection=O;const L=A&&_&&(n===Ll.Strict?p&&T==="source"||!p&&T==="target":E!==r||N!==i);C.isValid=L&&d(O),C.toHandle=QF(E,T,N,f,n,!0)}return C}const I2={onPointerDown:zue,isValid:nH};function Vue({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=ai(t);function s({translateExtent:l,width:u,height:d,zoomStep:f=1,pannable:p=!0,zoomable:m=!0,inversePan:b=!1}){const x=E=>{if(E.sourceEvent.type!=="wheel"||!e)return;const N=n(),A=E.sourceEvent.ctrlKey&&nh()?10:1,_=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*f,O=N[2]*Math.pow(2,_*A);e.scaleTo(O)};let w=[0,0];const S=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(w=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},C=E=>{const N=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!e)return;const A=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],_=[A[0]-w[0],A[1]-w[1]];w=A;const O=r()*Math.max(N[2],Math.log(N[2]))*(b?-1:1),R={x:N[0]-_[0]*O,y:N[1]-_[1]*O},L=[[0,0],[u,d]];e.setViewportConstrained({x:R.x,y:R.y,zoom:N[2]},L,l)},T=DF().on("start",S).on("zoom",p?C:null).on("zoom.wheel",m?x:null);i.call(T,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Gi}}const que=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,e0=t=>({x:t.x,y:t.y,zoom:t.k}),Dv=({x:t,y:e,zoom:n})=>Ky.translate(t,e).scale(n),Qc=(t,e)=>t.target.closest(`.${e}`),rH=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Fue=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Rv=(t,e=0,n=Fue,r=()=>{})=>{const i=typeof e=="number"&&e>0;return i||r(),i?t.transition().duration(e).ease(n).on("end",r):t},iH=t=>{const e=t.ctrlKey&&nh()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Hue({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return f=>{if(Qc(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(f.ctrlKey&&o){const S=Gi(f),C=iH(f),T=p*Math.pow(2,C);r.scaleTo(n,T,S,f);return}const m=f.deltaMode===1?20:1;let b=i===El.Vertical?0:f.deltaX*m,x=i===El.Horizontal?0:f.deltaY*m;!nh()&&f.shiftKey&&i!==El.Vertical&&(b=f.deltaY*m,x=0),r.translateBy(n,-(b/p)*s,-(x/p)*s,{internal:!0});const w=e0(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(f,w)),t.isPanScrolling&&(u?.(f,w),t.panScrollTimeout=setTimeout(()=>{d?.(f,w),t.isPanScrolling=!1},150))}}function Uue({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!e&&s&&!r.ctrlKey,l=Qc(r,t);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function $ue({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=e0(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function Gue({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&rH(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,e0(s.transform))}}function Wue({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&rH(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&que(t.prevViewport,o.transform))){const l=e0(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Kue({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return f=>{const p=t||e,m=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Qc(f,`${d}-flow__node`)||Qc(f,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Qc(f,l)&&f.type==="wheel"||Qc(f,u)&&(f.type!=="wheel"||i&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!p&&!i&&!m&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&b}}function Yue({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),m=DF().clickDistance(!Xi(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),b=ai(t).call(m);E({x:s.x,y:s.y,zoom:Su(s.zoom,e,n)},[[0,0],[p.width,p.height]],i);const x=b.on("wheel.zoom"),w=b.on("dblclick.zoom");m.wheelDelta(iH);function S(q,U){return b?new Promise(P=>{m?.interpolate(U?.interpolate==="linear"?Ef:Fm).transform(Rv(b,U?.duration,U?.ease,()=>P(!0)),q)}):Promise.resolve(!1)}function C({noWheelClassName:q,noPanClassName:U,onPaneContextMenu:P,userSelectionActive:H,panOnScroll:j,panOnDrag:V,panOnScrollMode:G,panOnScrollSpeed:te,preventScrolling:z,zoomOnPinch:W,zoomOnScroll:ae,zoomOnDoubleClick:re,zoomActivationKeyPressed:$,lib:Z,onTransformChange:ee}){H&&!f.isZoomingOrPanning&&T();const oe=j&&!$&&!H?Hue({zoomPanValues:f,noWheelClassName:q,d3Selection:b,d3Zoom:m,panOnScrollMode:G,panOnScrollSpeed:te,zoomOnPinch:W,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):Uue({noWheelClassName:q,preventScrolling:z,d3ZoomHandler:x});if(b.on("wheel.zoom",oe,{passive:!1}),!H){const Ce=$ue({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:l});m.on("start",Ce);const Pe=Gue({zoomPanValues:f,panOnDrag:V,onPaneContextMenu:!!P,onPanZoom:o,onTransformChange:ee});m.on("zoom",Pe);const Ie=Wue({zoomPanValues:f,panOnDrag:V,panOnScroll:j,onPaneContextMenu:P,onPanZoomEnd:u,onDraggingChange:d});m.on("end",Ie)}const ye=Kue({zoomActivationKeyPressed:$,panOnDrag:V,zoomOnScroll:ae,panOnScroll:j,zoomOnDoubleClick:re,zoomOnPinch:W,userSelectionActive:H,noPanClassName:U,noWheelClassName:q,lib:Z});m.filter(ye),re?b.on("dblclick.zoom",w):b.on("dblclick.zoom",null)}function T(){m.on("zoom",null)}async function E(q,U,P){const H=Dv(q),j=m?.constrain()(H,U,P);return j&&await S(j),new Promise(V=>V(j))}async function N(q,U){const P=Dv(q);return await S(P,U),new Promise(H=>H(P))}function A(q){if(b){const U=Dv(q),P=b.property("__zoom");(P.k!==q.zoom||P.x!==q.x||P.y!==q.y)&&m?.transform(b,U,null,{sync:!0})}}function _(){const q=b?_F(b.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function O(q,U){return b?new Promise(P=>{m?.interpolate(U?.interpolate==="linear"?Ef:Fm).scaleTo(Rv(b,U?.duration,U?.ease,()=>P(!0)),q)}):Promise.resolve(!1)}function R(q,U){return b?new Promise(P=>{m?.interpolate(U?.interpolate==="linear"?Ef:Fm).scaleBy(Rv(b,U?.duration,U?.ease,()=>P(!0)),q)}):Promise.resolve(!1)}function L(q){m?.scaleExtent(q)}function I(q){m?.translateExtent(q)}function F(q){const U=!Xi(q)||q<0?0:q;m?.clickDistance(U)}return{update:C,destroy:T,setViewport:N,setViewportConstrained:E,getViewport:_,scaleTo:O,scaleBy:R,setScaleExtent:L,setTranslateExtent:I,syncViewport:A,setClickDistance:F}}var Pl;(function(t){t.Line="line",t.Handle="handle"})(Pl||(Pl={}));const Xue=["top-left","top-right","bottom-left","bottom-right"],Zue=["top","right","bottom","left"];function Jue({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Que(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function Zo(t,e){return Math.max(0,e-t)}function Jo(t,e){return Math.max(0,t-e)}function Sm(t,e,n){return Math.max(0,e-t,t-n)}function L3(t,e){return t?!e:e}function ede(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=e;const{isHorizontal:f,isVertical:p}=e,m=f&&p,{xSnapped:b,ySnapped:x}=n,{minWidth:w,maxWidth:S,minHeight:C,maxHeight:T}=r,{x:E,y:N,width:A,height:_,aspectRatio:O}=t;let R=Math.floor(f?b-t.pointerX:0),L=Math.floor(p?x-t.pointerY:0);const I=A+(u?-R:R),F=_+(d?-L:L),q=-s[0]*A,U=-s[1]*_;let P=Sm(I,w,S),H=Sm(F,C,T);if(o){let G=0,te=0;u&&R<0?G=Zo(E+R+q,o[0][0]):!u&&R>0&&(G=Jo(E+I+q,o[1][0])),d&&L<0?te=Zo(N+L+U,o[0][1]):!d&&L>0&&(te=Jo(N+F+U,o[1][1])),P=Math.max(P,G),H=Math.max(H,te)}if(l){let G=0,te=0;u&&R>0?G=Jo(E+R,l[0][0]):!u&&R<0&&(G=Zo(E+I,l[1][0])),d&&L>0?te=Jo(N+L,l[0][1]):!d&&L<0&&(te=Zo(N+F,l[1][1])),P=Math.max(P,G),H=Math.max(H,te)}if(i){if(f){const G=Sm(I/O,C,T)*O;if(P=Math.max(P,G),o){let te=0;!u&&!d||u&&!d&&m?te=Jo(N+U+I/O,o[1][1])*O:te=Zo(N+U+(u?R:-R)/O,o[0][1])*O,P=Math.max(P,te)}if(l){let te=0;!u&&!d||u&&!d&&m?te=Zo(N+I/O,l[1][1])*O:te=Jo(N+(u?R:-R)/O,l[0][1])*O,P=Math.max(P,te)}}if(p){const G=Sm(F*O,w,S)/O;if(H=Math.max(H,G),o){let te=0;!u&&!d||d&&!u&&m?te=Jo(E+F*O+q,o[1][0])/O:te=Zo(E+(d?L:-L)*O+q,o[0][0])/O,H=Math.max(H,te)}if(l){let te=0;!u&&!d||d&&!u&&m?te=Zo(E+F*O,l[1][0])/O:te=Jo(E+(d?L:-L)*O,l[0][0])/O,H=Math.max(H,te)}}}L=L+(L<0?H:-H),R=R+(R<0?P:-P),i&&(m?I>F*O?L=(L3(u,d)?-R:R)/O:R=(L3(u,d)?-L:L)*O:f?(L=R/O,d=u):(R=L*O,u=d));const j=u?E+R:E,V=d?N+L:N;return{width:A+(u?-R:R),height:_+(d?-L:L),x:s[0]*R*(u?-1:1)+j,y:s[1]*L*(d?-1:1)+V}}const sH={width:0,height:0,x:0,y:0},tde={...sH,pointerX:0,pointerY:0,aspectRatio:1};function nde(t){return[[0,0],[t.measured.width,t.measured.height]]}function rde(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function ide({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=ai(t);function o({controlPosition:u,boundaries:d,keepAspectRatio:f,resizeDirection:p,onResizeStart:m,onResize:b,onResizeEnd:x,shouldResize:w}){let S={...sH},C={...tde};const T=Que(u);let E,N=null,A=[],_,O,R;const L=gF().on("start",I=>{const{nodeLookup:F,transform:q,snapGrid:U,snapToGrid:P,nodeOrigin:H,paneDomNode:j}=n();if(E=F.get(e),!E)return;N=j?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:G}=Nf(I.sourceEvent,{transform:q,snapGrid:U,snapToGrid:P,containerBounds:N});S={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},C={...S,pointerX:V,pointerY:G,aspectRatio:S.width/S.height},_=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(_=F.get(E.parentId),O=_&&E.extent==="parent"?nde(_):void 0),A=[],R=void 0;for(const[te,z]of F)if(z.parentId===e&&(A.push({id:te,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const W=rde(z,E,z.origin??H);R?R=[[Math.min(W[0][0],R[0][0]),Math.min(W[0][1],R[0][1])],[Math.max(W[1][0],R[1][0]),Math.max(W[1][1],R[1][1])]]:R=W}m?.(I,{...S})}).on("drag",I=>{const{transform:F,snapGrid:q,snapToGrid:U,nodeOrigin:P}=n(),H=Nf(I.sourceEvent,{transform:F,snapGrid:q,snapToGrid:U,containerBounds:N}),j=[];if(!E)return;const{x:V,y:G,width:te,height:z}=S,W={},ae=E.origin??P,{width:re,height:$,x:Z,y:ee}=ede(C,T,H,d,f,ae,O,R),de=re!==te,oe=$!==z,ye=Z!==V&&de,Ce=ee!==G&&oe;if(!ye&&!Ce&&!de&&!oe)return;if((ye||Ce||ae[0]===1||ae[1]===1)&&(W.x=ye?Z:S.x,W.y=Ce?ee:S.y,S.x=W.x,S.y=W.y,A.length>0)){const Ee=Z-V,Ne=ee-G;for(const yt of A)yt.position={x:yt.position.x-Ee+ae[0]*(re-te),y:yt.position.y-Ne+ae[1]*($-z)},j.push(yt)}if((de||oe)&&(W.width=de&&(!p||p==="horizontal")?re:S.width,W.height=oe&&(!p||p==="vertical")?$:S.height,S.width=W.width,S.height=W.height),_&&E.expandParent){const Ee=ae[0]*(W.width??0);W.x&&W.x<Ee&&(S.x=Ee,C.x=C.x-(W.x-Ee));const Ne=ae[1]*(W.height??0);W.y&&W.y<Ne&&(S.y=Ne,C.y=C.y-(W.y-Ne))}const Pe=Jue({width:S.width,prevWidth:te,height:S.height,prevHeight:z,affectsX:T.affectsX,affectsY:T.affectsY}),Ie={...S,direction:Pe};w?.(I,Ie)!==!1&&(b?.(I,Ie),r(W,j))}).on("end",I=>{x?.(I,{...S}),i?.({...S})});s.call(L)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const sde={},I3=t=>{let e;const n=new Set,r=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const b=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(x=>x(e,b))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(sde?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,i,u);return u},ode=t=>t?I3(t):I3,{useDebugValue:ade}=ke,{useSyncExternalStoreWithSelector:lde}=Sie,cde=t=>t;function oH(t,e=cde,n){const r=lde(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ade(r),r}const P3=(t,e)=>{const n=ode(t),r=(i,s=e)=>oH(n,i,s);return Object.assign(r,n),r},ude=(t,e)=>t?P3(t,e):P3;function nn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const t0=M.createContext(null),dde=t0.Provider,aH=Ts.error001();function lt(t,e){const n=M.useContext(t0);if(n===null)throw new Error(aH);return oH(n,t,e)}function Wt(){const t=M.useContext(t0);if(t===null)throw new Error(aH);return M.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const B3={display:"none"},fde={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},lH="react-flow__node-desc",cH="react-flow__edge-desc",hde="react-flow__aria-live",pde=t=>t.ariaLiveMessage,mde=t=>t.ariaLabelConfig;function gde({rfId:t}){const e=lt(pde);return g.jsx("div",{id:`${hde}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:fde,children:e})}function yde({rfId:t,disableKeyboardA11y:e}){const n=lt(mde);return g.jsxs(g.Fragment,{children:[g.jsx("div",{id:`${lH}-${t}`,style:B3,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),g.jsx("div",{id:`${cH}-${t}`,style:B3,children:n["edge.a11yDescription.default"]}),!e&&g.jsx(gde,{rfId:t})]})}const n0=M.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=`${t}`.split("-");return g.jsx("div",{className:Mn(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:e})});n0.displayName="Panel";function bde({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:g.jsx(n0,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const xde=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},km=t=>t.id;function vde(t,e){return nn(t.selectedNodes.map(km),e.selectedNodes.map(km))&&nn(t.selectedEdges.map(km),e.selectedEdges.map(km))}function wde({onSelectionChange:t}){const e=Wt(),{selectedNodes:n,selectedEdges:r}=lt(xde,vde);return M.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Sde=t=>!!t.onSelectionChangeHandlers;function kde({onSelectionChange:t}){const e=lt(Sde);return t||e?g.jsx(wde,{onSelectionChange:t}):null}const uH=[0,0],Cde={x:0,y:0,zoom:1},Ede=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],z3=[...Ede,"rfId"],Nde=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),V3={translateExtent:Qf,nodeOrigin:uH,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Tde(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=lt(Nde,nn),f=Wt();M.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{p.current=V3,l()}),[]);const p=M.useRef(V3);return M.useEffect(()=>{for(const m of z3){const b=t[m],x=p.current[m];b!==x&&(typeof t[m]>"u"||(m==="nodes"?e(b):m==="edges"?n(b):m==="minZoom"?r(b):m==="maxZoom"?i(b):m==="translateExtent"?s(b):m==="nodeExtent"?o(b):m==="paneClickDistance"?d(b):m==="ariaLabelConfig"?f.setState({ariaLabelConfig:mue(b)}):m==="fitView"?f.setState({fitViewQueued:b}):m==="fitViewOptions"?f.setState({fitViewOptions:b}):f.setState({[m]:b})))}p.current=t},z3.map(m=>t[m])),null}function q3(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Ade(t){const[e,n]=M.useState(t==="system"?null:t);return M.useEffect(()=>{if(t!=="system"){n(t);return}const r=q3(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:q3()?.matches?"dark":"light"}const F3=typeof document<"u"?document:null;function ih(t=null,e={target:F3,actInsideInputWithModifier:!0}){const[n,r]=M.useState(!1),i=M.useRef(!1),s=M.useRef(new Set([])),[o,l]=M.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=d.reduce((p,m)=>p.concat(...m),[]);return[d,f]}return[[],[]]},[t]);return M.useEffect(()=>{const u=e?.target??F3,d=e?.actInsideInputWithModifier??!0;if(t!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!i.current||i.current&&!d)&&$F(b))return!1;const w=U3(b.code,l);if(s.current.add(b[w]),H3(o,s.current,!1)){const S=b.composedPath?.()?.[0]||b.target,C=S?.nodeName==="BUTTON"||S?.nodeName==="A";e.preventDefault!==!1&&(i.current||!C)&&b.preventDefault(),r(!0)}},p=b=>{const x=U3(b.code,l);H3(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[x]),b.key==="Meta"&&s.current.clear(),i.current=!1},m=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[t,r]),n}function H3(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function U3(t,e){return e.includes(t)?"code":"key"}const Mde=()=>{const t=Wt();return M.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=Zy(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=t.getState();if(!o)return e;const{x:l,y:u}=o.getBoundingClientRect(),d={x:e.x-l,y:e.y-u},f=n.snapGrid??i,p=n.snapToGrid??s;return jh(d,r,p,f)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=iy(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function dH(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)_de(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function _de(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function fH(t,e){return dH(t,e)}function hH(t,e){return dH(t,e)}function sl(t,e){return{id:t,type:"select",selected:e}}function eu(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(sl(s.id,o)))}return r}function $3({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function G3(t){return{id:t.id,type:"remove"}}const W3=t=>oue(t),Dde=t=>IF(t);function pH(t){return M.forwardRef(t)}const Rde=typeof window<"u"?M.useLayoutEffect:M.useEffect;function K3(t){const[e,n]=M.useState(BigInt(0)),[r]=M.useState(()=>jde(()=>n(i=>i+BigInt(1))));return Rde(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function jde(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const mH=M.createContext(null);function Ode({children:t}){const e=Wt(),n=M.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:f,onNodesChange:p,nodeLookup:m,fitViewQueued:b}=e.getState();let x=u;for(const S of l)x=typeof S=="function"?S(x):S;const w=$3({items:x,lookup:m});f&&d(x),w.length>0?p?.(w):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:C,setNodes:T}=e.getState();S&&T(C)})},[]),r=K3(n),i=M.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:f,onEdgesChange:p,edgeLookup:m}=e.getState();let b=u;for(const x of l)b=typeof x=="function"?x(b):x;f?d(b):p&&p($3({items:b,lookup:m}))},[]),s=K3(i),o=M.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return g.jsx(mH.Provider,{value:o,children:t})}function Lde(){const t=M.useContext(mH);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const Ide=t=>!!t.panZoom;function sh(){const t=Mde(),e=Wt(),n=Lde(),r=lt(Ide),i=M.useMemo(()=>{const s=p=>e.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:m,nodeOrigin:b}=e.getState(),x=W3(p)?p:m.get(p.id),w=x.parentId?HF(x.position,x.measured,x.parentId,m,b):x.position,S={...x,position:w,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return ku(S)},d=(p,m,b={replace:!1})=>{o(x=>x.map(w=>{if(w.id===p){const S=typeof m=="function"?m(w):m;return b.replace&&W3(S)?S:{...w,...S}}return w}))},f=(p,m,b={replace:!1})=>{l(x=>x.map(w=>{if(w.id===p){const S=typeof m=="function"?m(w):m;return b.replace&&Dde(S)?S:{...w,...S}}return w}))};return{getNodes:()=>e.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=e.getState();return p.map(m=>({...m}))},getEdge:p=>e.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const m=Array.isArray(p)?p:[p];n.nodeQueue.push(b=>[...b,...m])},addEdges:p=>{const m=Array.isArray(p)?p:[p];n.edgeQueue.push(b=>[...b,...m])},toObject:()=>{const{nodes:p=[],edges:m=[],transform:b}=e.getState(),[x,w,S]=b;return{nodes:p.map(C=>({...C})),edges:m.map(C=>({...C})),viewport:{x,y:w,zoom:S}}},deleteElements:async({nodes:p=[],edges:m=[]})=>{const{nodes:b,edges:x,onNodesDelete:w,onEdgesDelete:S,triggerNodeChanges:C,triggerEdgeChanges:T,onDelete:E,onBeforeDelete:N}=e.getState(),{nodes:A,edges:_}=await uue({nodesToRemove:p,edgesToRemove:m,nodes:b,edges:x,onBeforeDelete:N}),O=_.length>0,R=A.length>0;if(O){const L=_.map(G3);S?.(_),T(L)}if(R){const L=A.map(G3);w?.(A),C(L)}return(R||O)&&E?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,m=!0,b)=>{const x=C3(p),w=x?p:u(p),S=b!==void 0;return w?(b||e.getState().nodes).filter(C=>{const T=e.getState().nodeLookup.get(C.id);if(T&&!x&&(C.id===p.id||!T.internals.positionAbsolute))return!1;const E=ku(S?C:T),N=th(E,w);return m&&N>0||N>=E.width*E.height||N>=w.width*w.height}):[]},isNodeIntersecting:(p,m,b=!0)=>{const w=C3(p)?p:u(p);if(!w)return!1;const S=th(w,m);return b&&S>0||S>=w.width*w.height},updateNode:d,updateNodeData:(p,m,b={replace:!1})=>{d(p,x=>{const w=typeof m=="function"?m(x):m;return b.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},b)},updateEdge:f,updateEdgeData:(p,m,b={replace:!1})=>{f(p,x=>{const w=typeof m=="function"?m(x):m;return b.replace?{...x,data:w}:{...x,data:{...x.data,...w}}},b)},getNodesBounds:p=>{const{nodeLookup:m,nodeOrigin:b}=e.getState();return PF(p,{nodeLookup:m,nodeOrigin:b})},getHandleConnections:({type:p,id:m,nodeId:b})=>Array.from(e.getState().connectionLookup.get(`${b}-${p}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:m,nodeId:b})=>Array.from(e.getState().connectionLookup.get(`${b}${p?m?`-${p}-${m}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const m=e.getState().fitViewResolver??pue();return e.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:m}),n.nodeQueue.push(b=>[...b]),m.promise}}},[]);return M.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const Y3=t=>t.selected,Pde=typeof window<"u"?window:void 0;function Bde({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Wt(),{deleteElements:r}=sh(),i=ih(t,{actInsideInputWithModifier:!1}),s=ih(e,{target:Pde});M.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(Y3),edges:o.filter(Y3)}),n.setState({nodesSelectionActive:!1})}},[i]),M.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function zde(t){const e=Wt();M.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=DT(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",Ts.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const r0={position:"absolute",width:"100%",height:"100%",top:0,left:0},Vde=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function qde({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=El.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:b=!0,children:x,noWheelClassName:w,noPanClassName:S,onViewportChange:C,isControlledViewport:T,paneClickDistance:E}){const N=Wt(),A=M.useRef(null),{userSelectionActive:_,lib:O}=lt(Vde,nn),R=ih(m),L=M.useRef();zde(A);const I=M.useCallback(F=>{C?.({x:F[0],y:F[1],zoom:F[2]}),T||N.setState({transform:F})},[C,T]);return M.useEffect(()=>{if(A.current){L.current=Yue({domNode:A.current,minZoom:f,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:E,onDraggingChange:P=>N.setState({paneDragging:P}),onPanZoomStart:(P,H)=>{const{onViewportChangeStart:j,onMoveStart:V}=N.getState();V?.(P,H),j?.(H)},onPanZoom:(P,H)=>{const{onViewportChange:j,onMove:V}=N.getState();V?.(P,H),j?.(H)},onPanZoomEnd:(P,H)=>{const{onViewportChangeEnd:j,onMoveEnd:V}=N.getState();V?.(P,H),j?.(H)}});const{x:F,y:q,zoom:U}=L.current.getViewport();return N.setState({panZoom:L.current,transform:[F,q,U],domNode:A.current.closest(".react-flow")}),()=>{L.current?.destroy()}}},[]),M.useEffect(()=>{L.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:b,noPanClassName:S,userSelectionActive:_,noWheelClassName:w,lib:O,onTransformChange:I})},[t,e,n,r,i,s,o,l,R,b,S,_,w,O,I]),g.jsx("div",{className:"react-flow__renderer",ref:A,style:r0,children:x})}const Fde=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Hde(){const{userSelectionActive:t,userSelectionRect:e}=lt(Fde,nn);return t&&e?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const jv=(t,e)=>n=>{n.target===e.current&&t?.(n)},Ude=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function $de({isSelecting:t,selectionKeyPressed:e,selectionMode:n=eh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:m,children:b}){const x=Wt(),{userSelectionActive:w,elementsSelectable:S,dragging:C,connectionInProgress:T}=lt(Ude,nn),E=S&&(t||w),N=M.useRef(null),A=M.useRef(),_=M.useRef(new Set),O=M.useRef(new Set),R=M.useRef(!1),L=M.useRef(!1),I=V=>{if(R.current||T){R.current=!1;return}l?.(V),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},F=V=>{if(Array.isArray(r)&&r?.includes(2)){V.preventDefault();return}u?.(V)},q=d?V=>d(V):void 0,U=V=>{const{resetSelectedElements:G,domNode:te}=x.getState();if(A.current=te?.getBoundingClientRect(),!S||!t||V.button!==0||V.target!==N.current||!A.current)return;V.target?.setPointerCapture?.(V.pointerId),L.current=!0,R.current=!1;const{x:z,y:W}=vs(V.nativeEvent,A.current);G(),x.setState({userSelectionRect:{width:0,height:0,startX:z,startY:W,x:z,y:W}}),s?.(V)},P=V=>{const{userSelectionRect:G,transform:te,nodeLookup:z,edgeLookup:W,connectionLookup:ae,triggerNodeChanges:re,triggerEdgeChanges:$,defaultEdgeOptions:Z}=x.getState();if(!A.current||!G)return;R.current=!0;const{x:ee,y:de}=vs(V.nativeEvent,A.current),{startX:oe,startY:ye}=G,Ce={startX:oe,startY:ye,x:ee<oe?ee:oe,y:de<ye?de:ye,width:Math.abs(ee-oe),height:Math.abs(de-ye)},Pe=_.current,Ie=O.current;_.current=new Set(_T(z,Ce,te,n===eh.Partial,!0).map(Ee=>Ee.id)),O.current=new Set;const Ae=Z?.selectable??!0;for(const Ee of _.current){const Ne=ae.get(Ee);if(Ne)for(const{edgeId:yt}of Ne.values()){const Oe=W.get(yt);Oe&&(Oe.selectable??Ae)&&O.current.add(yt)}}if(!E3(Pe,_.current)){const Ee=eu(z,_.current,!0);re(Ee)}if(!E3(Ie,O.current)){const Ee=eu(W,O.current);$(Ee)}x.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},H=V=>{if(V.button!==0||!L.current)return;V.target?.releasePointerCapture?.(V.pointerId);const{userSelectionRect:G}=x.getState();!w&&G&&V.target===N.current&&I?.(V),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(V),(e||i)&&(R.current=!1),L.current=!1},j=r===!0||Array.isArray(r)&&r.includes(0);return g.jsxs("div",{className:Mn(["react-flow__pane",{draggable:j,dragging:C,selection:t}]),onClick:E?void 0:jv(I,N),onContextMenu:jv(F,N),onWheel:jv(q,N),onPointerEnter:E?void 0:f,onPointerDown:E?U:p,onPointerMove:E?P:p,onPointerUp:E?H:void 0,onPointerLeave:m,ref:N,style:r0,children:[b,g.jsx(Hde,{})]})}function P2({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),d=l.get(t);if(!d){u?.("012",Ts.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function gH({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Wt(),[u,d]=M.useState(!1),f=M.useRef();return M.useEffect(()=>{f.current=Oue({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{P2({id:p,store:l,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),M.useEffect(()=>{if(e)f.current?.destroy();else if(t.current)return f.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{f.current?.destroy()}},[n,r,e,s,t,i]),u}const Gde=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function yH(){const t=Wt();return M.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:f}=t.getState(),p=new Map,m=Gde(o),b=i?s[0]:5,x=i?s[1]:5,w=n.direction.x*b*n.factor,S=n.direction.y*x*n.factor;for(const[,C]of d){if(!m(C))continue;let T={x:C.internals.positionAbsolute.x+w,y:C.internals.positionAbsolute.y+S};i&&(T=Rh(T,s));const{position:E,positionAbsolute:N}=BF({nodeId:C.id,nextPosition:T,nodeLookup:d,nodeExtent:r,nodeOrigin:f,onError:l});C.position=E,C.internals.positionAbsolute=N,p.set(C.id,C)}u(p)},[])}const IT=M.createContext(null),Wde=IT.Provider;IT.Consumer;const bH=()=>M.useContext(IT),Kde=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),Yde=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,f=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:f,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Ll.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:f&&d}};function Xde({type:t="source",position:e=Me.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:f,onTouchStart:p,...m},b){const x=o||null,w=t==="target",S=Wt(),C=bH(),{connectOnClick:T,noPanClassName:E,rfId:N}=lt(Kde,nn),{connectingFrom:A,connectingTo:_,clickConnecting:O,isPossibleEndHandle:R,connectionInProcess:L,clickConnectionInProcess:I,valid:F}=lt(Yde(C,x,t),nn);C||S.getState().onError?.("010",Ts.error010());const q=H=>{const{defaultEdgeOptions:j,onConnect:V,hasDefaultEdges:G}=S.getState(),te={...j,...H};if(G){const{edges:z,setEdges:W}=S.getState();W(KF(te,z))}V?.(te),l?.(te)},U=H=>{if(!C)return;const j=GF(H.nativeEvent);if(i&&(j&&H.button===0||!j)){const V=S.getState();I2.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:w,handleId:x,nodeId:C,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:q,isValidConnection:n||V.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}j?f?.(H):p?.(H)},P=H=>{const{onClickConnectStart:j,onClickConnectEnd:V,connectionClickStartHandle:G,connectionMode:te,isValidConnection:z,lib:W,rfId:ae,nodeLookup:re,connection:$}=S.getState();if(!C||!G&&!i)return;if(!G){j?.(H.nativeEvent,{nodeId:C,handleId:x,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:C,type:t,id:x}});return}const Z=UF(H.target),ee=n||z,{connection:de,isValid:oe}=I2.isValid(H.nativeEvent,{handle:{nodeId:C,id:x,type:t},connectionMode:te,fromNodeId:G.nodeId,fromHandleId:G.id||null,fromType:G.type,isValidConnection:ee,flowId:ae,doc:Z,lib:W,nodeLookup:re});oe&&de&&q(de);const ye=structuredClone($);delete ye.inProgress,ye.toPosition=ye.toHandle?ye.toHandle.position:null,V?.(H,ye),S.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":x,"data-nodeid":C,"data-handlepos":e,"data-id":`${N}-${C}-${x}-${t}`,className:Mn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,d,{source:!w,target:w,connectable:r,connectablestart:i,connectableend:s,clickconnecting:O,connectingfrom:A,connectingto:_,valid:F,connectionindicator:r&&(!L||R)&&(L||I?s:i)}]),onMouseDown:U,onTouchStart:U,onClick:T?P:void 0,ref:b,...m,children:u})}const Nn=M.memo(pH(Xde));function Zde({data:t,isConnectable:e,sourcePosition:n=Me.Bottom}){return g.jsxs(g.Fragment,{children:[t?.label,g.jsx(Nn,{type:"source",position:n,isConnectable:e})]})}function Jde({data:t,isConnectable:e,targetPosition:n=Me.Top,sourcePosition:r=Me.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(Nn,{type:"target",position:n,isConnectable:e}),t?.label,g.jsx(Nn,{type:"source",position:r,isConnectable:e})]})}function Qde(){return null}function efe({data:t,isConnectable:e,targetPosition:n=Me.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(Nn,{type:"target",position:n,isConnectable:e}),t?.label]})}const sy={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},X3={input:Zde,default:Jde,output:efe,group:Qde};function tfe(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const nfe=t=>{const{width:e,height:n,x:r,y:i}=Dh(t.nodeLookup,{filter:s=>!!s.selected});return{width:Xi(e)?e:null,height:Xi(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function rfe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Wt(),{width:i,height:s,transformString:o,userSelectionActive:l}=lt(nfe,nn),u=yH(),d=M.useRef(null);if(M.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),gH({nodeRef:d}),l||!i||!s)return null;const f=t?m=>{const b=r.getState().nodes.filter(x=>x.selected);t(m,b)}:void 0,p=m=>{Object.prototype.hasOwnProperty.call(sy,m.key)&&(m.preventDefault(),u({direction:sy[m.key],factor:m.shiftKey?4:1}))};return g.jsx("div",{className:Mn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:g.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const Z3=typeof window<"u"?window:void 0,ife=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function xH({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:S,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:N,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:O,panOnDrag:R,defaultViewport:L,translateExtent:I,minZoom:F,maxZoom:q,preventScrolling:U,onSelectionContextMenu:P,noWheelClassName:H,noPanClassName:j,disableKeyboardA11y:V,onViewportChange:G,isControlledViewport:te}){const{nodesSelectionActive:z,userSelectionActive:W}=lt(ife),ae=ih(d,{target:Z3}),re=ih(w,{target:Z3}),$=re||R,Z=re||N,ee=f&&$!==!0,de=ae||W||ee;return Bde({deleteKeyCode:u,multiSelectionKeyCode:x}),g.jsx(qde,{onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:Z,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:O,panOnDrag:!ae&&$,defaultViewport:L,translateExtent:I,minZoom:F,maxZoom:q,zoomActivationKeyCode:S,preventScrolling:U,noWheelClassName:H,noPanClassName:j,onViewportChange:G,isControlledViewport:te,paneClickDistance:l,children:g.jsxs($de,{onSelectionStart:m,onSelectionEnd:b,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:$,isSelecting:!!de,selectionMode:p,selectionKeyPressed:ae,selectionOnDrag:ee,children:[t,z&&g.jsx(rfe,{onSelectionContextMenu:P,noPanClassName:j,disableKeyboardA11y:V})]})})}xH.displayName="FlowRenderer";const sfe=M.memo(xH),ofe=t=>e=>t?_T(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function afe(t){return lt(M.useCallback(ofe(t),[t]),nn)}const lfe=t=>t.updateNodeInternals;function cfe(){const t=lt(lfe),[e]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return M.useEffect(()=>()=>{e?.disconnect()},[e]),e}function ufe({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Wt(),s=M.useRef(null),o=M.useRef(null),l=M.useRef(t.sourcePosition),u=M.useRef(t.targetPosition),d=M.useRef(e),f=n&&!!t.internals.handleBounds;return M.useEffect(()=>{s.current&&!t.hidden&&(!f||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[f,t.hidden]),M.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),M.useEffect(()=>{if(s.current){const p=d.current!==e,m=l.current!==t.sourcePosition,b=u.current!==t.targetPosition;(p||m||b)&&(d.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function dfe({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:f,resizeObserver:p,noDragClassName:m,noPanClassName:b,disableKeyboardA11y:x,rfId:w,nodeTypes:S,nodeClickDistance:C,onError:T}){const{node:E,internals:N,isParent:A}=lt(oe=>{const ye=oe.nodeLookup.get(t),Ce=oe.parentLookup.has(t);return{node:ye,internals:ye.internals,isParent:Ce}},nn);let _=E.type||"default",O=S?.[_]||X3[_];O===void 0&&(T?.("003",Ts.error003(_)),_="default",O=S?.default||X3.default);const R=!!(E.draggable||l&&typeof E.draggable>"u"),L=!!(E.selectable||u&&typeof E.selectable>"u"),I=!!(E.connectable||d&&typeof E.connectable>"u"),F=!!(E.focusable||f&&typeof E.focusable>"u"),q=Wt(),U=FF(E),P=ufe({node:E,nodeType:_,hasDimensions:U,resizeObserver:p}),H=gH({nodeRef:P,disabled:E.hidden||!R,noDragClassName:m,handleSelector:E.dragHandle,nodeId:t,isSelectable:L,nodeClickDistance:C}),j=yH();if(E.hidden)return null;const V=mo(E),G=tfe(E),te=L||R||e||n||r||i,z=n?oe=>n(oe,{...N.userNode}):void 0,W=r?oe=>r(oe,{...N.userNode}):void 0,ae=i?oe=>i(oe,{...N.userNode}):void 0,re=s?oe=>s(oe,{...N.userNode}):void 0,$=o?oe=>o(oe,{...N.userNode}):void 0,Z=oe=>{const{selectNodesOnDrag:ye,nodeDragThreshold:Ce}=q.getState();L&&(!ye||!R||Ce>0)&&P2({id:t,store:q,nodeRef:P}),e&&e(oe,{...N.userNode})},ee=oe=>{if(!($F(oe.nativeEvent)||x)){if(RF.includes(oe.key)&&L){const ye=oe.key==="Escape";P2({id:t,store:q,unselect:ye,nodeRef:P})}else if(R&&E.selected&&Object.prototype.hasOwnProperty.call(sy,oe.key)){oe.preventDefault();const{ariaLabelConfig:ye}=q.getState();q.setState({ariaLiveMessage:ye["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),j({direction:sy[oe.key],factor:oe.shiftKey?4:1})}}},de=()=>{if(x||!P.current?.matches(":focus-visible"))return;const{transform:oe,width:ye,height:Ce,autoPanOnNodeFocus:Pe,setCenter:Ie}=q.getState();if(!Pe)return;_T(new Map([[t,E]]),{x:0,y:0,width:ye,height:Ce},oe,!0).length>0||Ie(E.position.x+V.width/2,E.position.y+V.height/2,{zoom:oe[2]})};return g.jsx("div",{className:Mn(["react-flow__node",`react-flow__node-${_}`,{[b]:R},E.className,{selected:E.selected,selectable:L,parent:A,draggable:R,dragging:H}]),ref:P,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:te?"all":"none",visibility:U?"visible":"hidden",...E.style,...G},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:z,onMouseMove:W,onMouseLeave:ae,onContextMenu:re,onClick:Z,onDoubleClick:$,onKeyDown:F?ee:void 0,tabIndex:F?0:void 0,onFocus:F?de:void 0,role:E.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${lH}-${w}`,"aria-label":E.ariaLabel,...E.domAttributes,children:g.jsx(Wde,{value:t,children:g.jsx(O,{id:t,data:E.data,type:_,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:E.selected??!1,selectable:L,draggable:R,deletable:E.deletable??!0,isConnectable:I,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:H,dragHandle:E.dragHandle,zIndex:N.z,parentId:E.parentId,...V})})})}const ffe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function vH(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=lt(ffe,nn),o=afe(t.onlyRenderVisibleElements),l=cfe();return g.jsx("div",{className:"react-flow__nodes",style:r0,children:o.map(u=>g.jsx(dfe,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}vH.displayName="NodeRenderer";const hfe=M.memo(vH);function pfe(t){return lt(M.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&bue({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),nn)}const mfe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return g.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},gfe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return g.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},J3={[ny.Arrow]:mfe,[ny.ArrowClosed]:gfe};function yfe(t){const e=Wt();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(J3,t)?J3[t]:(e.getState().onError?.("009",Ts.error009(t)),null),[t])}const bfe=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=yfe(e);return u?g.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:g.jsx(u,{color:n,strokeWidth:o})}):null},wH=({defaultColor:t,rfId:e})=>{const n=lt(s=>s.edges),r=lt(s=>s.defaultEdgeOptions),i=M.useMemo(()=>Eue(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?g.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:g.jsx("defs",{children:i.map(s=>g.jsx(bfe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};wH.displayName="MarkerDefinitions";var xfe=M.memo(wH);function SH({x:t,y:e,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...f}){const[p,m]=M.useState({x:1,y:0,width:0,height:0}),b=Mn(["react-flow__edge-textwrapper",d]),x=M.useRef(null);return M.useEffect(()=>{if(x.current){const w=x.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?g.jsxs("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...f,children:[i&&g.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),g.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}SH.displayName="EdgeText";const vfe=M.memo(SH);function i0({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...f}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...f,d:t,fill:"none",className:Mn(["react-flow__edge-path",f.className])}),d?g.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&Xi(e)&&Xi(n)?g.jsx(vfe,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function Q3({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Me.Left||t===Me.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function kH({sourceX:t,sourceY:e,sourcePosition:n=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top}){const[o,l]=Q3({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,d]=Q3({pos:s,x1:r,y1:i,x2:t,y2:e}),[f,p,m,b]=WF({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${i}`,f,p,m,b]}function CH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,interactionWidth:C})=>{const[T,E,N]=kH({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=t.isInternal?void 0:e;return g.jsx(i0,{id:A,path:T,labelX:E,labelY:N,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,interactionWidth:C})})}const wfe=CH({isInternal:!1}),EH=CH({isInternal:!0});wfe.displayName="SimpleBezierEdge";EH.displayName="SimpleBezierEdgeInternal";function NH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,sourcePosition:b=Me.Bottom,targetPosition:x=Me.Top,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:T})=>{const[E,N,A]=j2({sourceX:n,sourceY:r,sourcePosition:b,targetX:i,targetY:s,targetPosition:x,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),_=t.isInternal?void 0:e;return g.jsx(i0,{id:_,path:E,labelX:N,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:w,markerStart:S,interactionWidth:T})})}const TH=NH({isInternal:!1}),AH=NH({isInternal:!0});TH.displayName="SmoothStepEdge";AH.displayName="SmoothStepEdgeInternal";function MH(t){return M.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return g.jsx(TH,{...n,id:r,pathOptions:M.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Sfe=MH({isInternal:!1}),_H=MH({isInternal:!0});Sfe.displayName="StepEdge";_H.displayName="StepEdgeInternal";function DH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:x,interactionWidth:w})=>{const[S,C,T]=YF({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=t.isInternal?void 0:e;return g.jsx(i0,{id:E,path:S,labelX:C,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:x,interactionWidth:w})})}const kfe=DH({isInternal:!1}),RH=DH({isInternal:!0});kfe.displayName="StraightEdge";RH.displayName="StraightEdgeInternal";function jH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Me.Bottom,targetPosition:l=Me.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,pathOptions:C,interactionWidth:T})=>{const[E,N,A]=Jy({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:C?.curvature}),_=t.isInternal?void 0:e;return g.jsx(i0,{id:_,path:E,labelX:N,labelY:A,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:w,markerStart:S,interactionWidth:T})})}const Cfe=jH({isInternal:!1}),OH=jH({isInternal:!0});Cfe.displayName="BezierEdge";OH.displayName="BezierEdgeInternal";const eL={default:OH,straight:RH,step:_H,smoothstep:AH,simplebezier:EH},tL={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Efe=(t,e,n)=>n===Me.Left?t-e:n===Me.Right?t+e:t,Nfe=(t,e,n)=>n===Me.Top?t-e:n===Me.Bottom?t+e:t,nL="react-flow__edgeupdater";function rL({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return g.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Mn([nL,`${nL}-${l}`]),cx:Efe(e,r,t),cy:Nfe(n,r,t),r,stroke:"transparent",fill:"transparent"})}function Tfe({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,setReconnecting:m,setUpdateHover:b}){const x=Wt(),w=(N,A)=>{if(N.button!==0)return;const{autoPanOnConnect:_,domNode:O,isValidConnection:R,connectionMode:L,connectionRadius:I,lib:F,onConnectStart:q,onConnectEnd:U,cancelConnection:P,nodeLookup:H,rfId:j,panBy:V,updateConnection:G}=x.getState(),te=A.type==="target",z=(re,$)=>{m(!1),p?.(re,n,A.type,$)},W=re=>d?.(n,re),ae=(re,$)=>{m(!0),f?.(N,n,A.type),q?.(re,$)};I2.onPointerDown(N.nativeEvent,{autoPanOnConnect:_,connectionMode:L,connectionRadius:I,domNode:O,handleId:A.id,nodeId:A.nodeId,nodeLookup:H,isTarget:te,edgeUpdaterType:A.type,lib:F,flowId:j,cancelConnection:P,panBy:V,isValidConnection:R,onConnect:W,onConnectStart:ae,onConnectEnd:U,onReconnectEnd:z,updateConnection:G,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},S=N=>w(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=N=>w(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>b(!0),E=()=>b(!1);return g.jsxs(g.Fragment,{children:[(t===!0||t==="source")&&g.jsx(rL,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:S,onMouseEnter:T,onMouseOut:E,type:"source"}),(t===!0||t==="target")&&g.jsx(rL,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:C,onMouseEnter:T,onMouseOut:E,type:"target"})]})}function Afe({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:b,rfId:x,edgeTypes:w,noPanClassName:S,onError:C,disableKeyboardA11y:T}){let E=lt(Ie=>Ie.edgeLookup.get(t));const N=lt(Ie=>Ie.defaultEdgeOptions);E=N?{...N,...E}:E;let A=E.type||"default",_=w?.[A]||eL[A];_===void 0&&(C?.("011",Ts.error011(A)),A="default",_=w?.default||eL.default);const O=!!(E.focusable||e&&typeof E.focusable>"u"),R=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),L=!!(E.selectable||r&&typeof E.selectable>"u"),I=M.useRef(null),[F,q]=M.useState(!1),[U,P]=M.useState(!1),H=Wt(),{zIndex:j,sourceX:V,sourceY:G,targetX:te,targetY:z,sourcePosition:W,targetPosition:ae}=lt(M.useCallback(Ie=>{const Ae=Ie.nodeLookup.get(E.source),Ee=Ie.nodeLookup.get(E.target);if(!Ae||!Ee)return{zIndex:E.zIndex,...tL};const Ne=Cue({id:t,sourceNode:Ae,targetNode:Ee,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Ie.connectionMode,onError:C});return{zIndex:yue({selected:E.selected,zIndex:E.zIndex,sourceNode:Ae,targetNode:Ee,elevateOnSelect:Ie.elevateEdgesOnSelect}),...Ne||tL}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),nn),re=M.useMemo(()=>E.markerStart?`url('#${O2(E.markerStart,x)}')`:void 0,[E.markerStart,x]),$=M.useMemo(()=>E.markerEnd?`url('#${O2(E.markerEnd,x)}')`:void 0,[E.markerEnd,x]);if(E.hidden||V===null||G===null||te===null||z===null)return null;const Z=Ie=>{const{addSelectedEdges:Ae,unselectNodesAndEdges:Ee,multiSelectionActive:Ne}=H.getState();L&&(H.setState({nodesSelectionActive:!1}),E.selected&&Ne?(Ee({nodes:[],edges:[E]}),I.current?.blur()):Ae([t])),i&&i(Ie,E)},ee=s?Ie=>{s(Ie,{...E})}:void 0,de=o?Ie=>{o(Ie,{...E})}:void 0,oe=l?Ie=>{l(Ie,{...E})}:void 0,ye=u?Ie=>{u(Ie,{...E})}:void 0,Ce=d?Ie=>{d(Ie,{...E})}:void 0,Pe=Ie=>{if(!T&&RF.includes(Ie.key)&&L){const{unselectNodesAndEdges:Ae,addSelectedEdges:Ee}=H.getState();Ie.key==="Escape"?(I.current?.blur(),Ae({edges:[E]})):Ee([t])}};return g.jsx("svg",{style:{zIndex:j},children:g.jsxs("g",{className:Mn(["react-flow__edge",`react-flow__edge-${A}`,E.className,S,{selected:E.selected,animated:E.animated,inactive:!L&&!i,updating:F,selectable:L}]),onClick:Z,onDoubleClick:ee,onContextMenu:de,onMouseEnter:oe,onMouseMove:ye,onMouseLeave:Ce,onKeyDown:O?Pe:void 0,tabIndex:O?0:void 0,role:E.ariaRole??(O?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":O?`${cH}-${x}`:void 0,ref:I,...E.domAttributes,children:[!U&&g.jsx(_,{id:t,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:L,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:V,sourceY:G,targetX:te,targetY:z,sourcePosition:W,targetPosition:ae,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:re,markerEnd:$,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),R&&g.jsx(Tfe,{edge:E,isReconnectable:R,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:b,sourceX:V,sourceY:G,targetX:te,targetY:z,sourcePosition:W,targetPosition:ae,setUpdateHover:q,setReconnecting:P})]})})}const Mfe=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function LH({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:b,onReconnectEnd:x,disableKeyboardA11y:w}){const{edgesFocusable:S,edgesReconnectable:C,elementsSelectable:T,onError:E}=lt(Mfe,nn),N=pfe(e);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(xfe,{defaultColor:t,rfId:n}),N.map(A=>g.jsx(Afe,{id:A,edgesFocusable:S,edgesReconnectable:C,elementsSelectable:T,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:f,reconnectRadius:p,onDoubleClick:m,onReconnectStart:b,onReconnectEnd:x,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:w},A))]})}LH.displayName="EdgeRenderer";const _fe=M.memo(LH),Dfe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Rfe({children:t}){const e=lt(Dfe);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function jfe(t){const e=sh(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Ofe=t=>t.panZoom?.syncViewport;function Lfe(t){const e=lt(Ofe),n=Wt();return M.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function Ife(t){return t.connection.inProgress?{...t.connection,to:jh(t.connection.to,t.transform)}:{...t.connection}}function Pfe(t){return Ife}function Bfe(t){const e=Pfe();return lt(e,nn)}const zfe=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function Vfe({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=lt(zfe,nn);return!(s&&i&&u)?null:g.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:Mn(["react-flow__connection",LF(l)]),children:g.jsx(IH,{style:e,type:n,CustomComponent:r,isValid:l})})})}const IH=({style:t,type:e=oa.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:f,toHandle:p,toPosition:m}=Bfe();if(!i)return;if(n)return g.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:m,connectionStatus:LF(r),toNode:f,toHandle:p});let b="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:m};switch(e){case oa.Bezier:[b]=Jy(x);break;case oa.SimpleBezier:[b]=kH(x);break;case oa.Step:[b]=j2({...x,borderRadius:0});break;case oa.SmoothStep:[b]=j2(x);break;default:[b]=YF(x)}return g.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:t})};IH.displayName="ConnectionLine";const qfe={};function iL(t=qfe){M.useRef(t),Wt(),M.useEffect(()=>{},[t])}function Ffe(){Wt(),M.useRef(!1),M.useEffect(()=>{},[])}function PH({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:w,connectionLineComponent:S,connectionLineContainerStyle:C,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:O,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:I,defaultViewport:F,translateExtent:q,minZoom:U,maxZoom:P,preventScrolling:H,defaultMarkerColor:j,zoomOnScroll:V,zoomOnPinch:G,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:W,zoomOnDoubleClick:ae,panOnDrag:re,onPaneClick:$,onPaneMouseEnter:Z,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneScroll:oe,onPaneContextMenu:ye,paneClickDistance:Ce,nodeClickDistance:Pe,onEdgeContextMenu:Ie,onEdgeMouseEnter:Ae,onEdgeMouseMove:Ee,onEdgeMouseLeave:Ne,reconnectRadius:yt,onReconnect:Oe,onReconnectStart:xt,onReconnectEnd:wt,noDragClassName:Yt,noWheelClassName:gn,noPanClassName:Ht,disableKeyboardA11y:Mt,nodeExtent:Dn,rfId:yn,viewport:Bt,onViewportChange:ht}){return iL(t),iL(e),Ffe(),jfe(n),Lfe(Bt),g.jsx(sfe,{onPaneClick:$,onPaneMouseEnter:Z,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneContextMenu:ye,onPaneScroll:oe,paneClickDistance:Ce,deleteKeyCode:R,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:O,elementsSelectable:I,zoomOnScroll:V,zoomOnPinch:G,zoomOnDoubleClick:ae,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:W,panOnDrag:re,defaultViewport:F,translateExtent:q,minZoom:U,maxZoom:P,onSelectionContextMenu:p,preventScrolling:H,noDragClassName:Yt,noWheelClassName:gn,noPanClassName:Ht,disableKeyboardA11y:Mt,onViewportChange:ht,isControlledViewport:!!Bt,children:g.jsxs(Rfe,{children:[g.jsx(_fe,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Oe,onReconnectStart:xt,onReconnectEnd:wt,onlyRenderVisibleElements:L,onEdgeContextMenu:Ie,onEdgeMouseEnter:Ae,onEdgeMouseMove:Ee,onEdgeMouseLeave:Ne,reconnectRadius:yt,defaultMarkerColor:j,noPanClassName:Ht,disableKeyboardA11y:Mt,rfId:yn}),g.jsx(Vfe,{style:w,type:x,component:S,containerStyle:C}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(hfe,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:Pe,onlyRenderVisibleElements:L,noPanClassName:Ht,noDragClassName:Yt,disableKeyboardA11y:Mt,nodeExtent:Dn,rfId:yn}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}PH.displayName="GraphView";const Hfe=M.memo(PH),sL=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:f,nodeExtent:p}={})=>{const m=new Map,b=new Map,x=new Map,w=new Map,S=r??e??[],C=n??t??[],T=f??[0,0],E=p??Qf;ZF(x,w,S);const N=L2(C,m,b,{nodeOrigin:T,nodeExtent:E,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=Dh(m,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:O,y:R,zoom:L}=Zy(_,i,s,u,d,l?.padding??.1);A=[O,R,L]}return{rfId:"1",width:0,height:0,transform:A,nodes:C,nodesInitialized:N,nodeLookup:m,parentLookup:b,edges:S,edgeLookup:w,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:Qf,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ll.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...OF},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:due,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:jF}},Ufe=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:p})=>ude((m,b)=>{async function x(){const{nodeLookup:w,panZoom:S,fitViewOptions:C,fitViewResolver:T,width:E,height:N,minZoom:A,maxZoom:_}=b();S&&(await cue({nodes:w,width:E,height:N,panZoom:S,minZoom:A,maxZoom:_},C),T?.resolve(!0),m({fitViewResolver:null}))}return{...sL({nodes:t,edges:e,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:w=>{const{nodeLookup:S,parentLookup:C,nodeOrigin:T,elevateNodesOnSelect:E,fitViewQueued:N}=b(),A=L2(w,S,C,{nodeOrigin:T,nodeExtent:p,elevateNodesOnSelect:E,checkEquality:!0});N&&A?(x(),m({nodes:w,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):m({nodes:w,nodesInitialized:A})},setEdges:w=>{const{connectionLookup:S,edgeLookup:C}=b();ZF(S,C,w),m({edges:w})},setDefaultNodesAndEdges:(w,S)=>{if(w){const{setNodes:C}=b();C(w),m({hasDefaultNodes:!0})}if(S){const{setEdges:C}=b();C(S),m({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:S,nodeLookup:C,parentLookup:T,domNode:E,nodeOrigin:N,nodeExtent:A,debug:_,fitViewQueued:O}=b(),{changes:R,updatedInternals:L}=_ue(w,C,T,E,N,A);L&&(Tue(C,T,{nodeOrigin:N,nodeExtent:A}),O?(x(),m({fitViewQueued:!1,fitViewOptions:void 0})):m({}),R?.length>0&&(_&&console.log("React Flow: trigger node changes",R),S?.(R)))},updateNodePositions:(w,S=!1)=>{const C=[],T=[],{nodeLookup:E,triggerNodeChanges:N}=b();for(const[A,_]of w){const O=E.get(A),R=!!(O?.expandParent&&O?.parentId&&_?.position),L={id:A,type:"position",position:R?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:S};R&&O.parentId&&C.push({id:A,parentId:O.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),T.push(L)}if(C.length>0){const{parentLookup:A,nodeOrigin:_}=b(),O=LT(C,E,A,_);T.push(...O)}N(T)},triggerNodeChanges:w=>{const{onNodesChange:S,setNodes:C,nodes:T,hasDefaultNodes:E,debug:N}=b();if(w?.length){if(E){const A=fH(w,T);C(A)}N&&console.log("React Flow: trigger node changes",w),S?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:S,setEdges:C,edges:T,hasDefaultEdges:E,debug:N}=b();if(w?.length){if(E){const A=hH(w,T);C(A)}N&&console.log("React Flow: trigger edge changes",w),S?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:S,edgeLookup:C,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(S){const A=w.map(_=>sl(_,!0));E(A);return}E(eu(T,new Set([...w]),!0)),N(eu(C))},addSelectedEdges:w=>{const{multiSelectionActive:S,edgeLookup:C,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(S){const A=w.map(_=>sl(_,!0));N(A);return}N(eu(C,new Set([...w]))),E(eu(T,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:S}={})=>{const{edges:C,nodes:T,nodeLookup:E,triggerNodeChanges:N,triggerEdgeChanges:A}=b(),_=w||T,O=S||C,R=_.map(I=>{const F=E.get(I.id);return F&&(F.selected=!1),sl(I.id,!1)}),L=O.map(I=>sl(I.id,!1));N(R),A(L)},setMinZoom:w=>{const{panZoom:S,maxZoom:C}=b();S?.setScaleExtent([w,C]),m({minZoom:w})},setMaxZoom:w=>{const{panZoom:S,minZoom:C}=b();S?.setScaleExtent([C,w]),m({maxZoom:w})},setTranslateExtent:w=>{b().panZoom?.setTranslateExtent(w),m({translateExtent:w})},setPaneClickDistance:w=>{b().panZoom?.setClickDistance(w)},resetSelectedElements:()=>{const{edges:w,nodes:S,triggerNodeChanges:C,triggerEdgeChanges:T,elementsSelectable:E}=b();if(!E)return;const N=S.reduce((_,O)=>O.selected?[..._,sl(O.id,!1)]:_,[]),A=w.reduce((_,O)=>O.selected?[..._,sl(O.id,!1)]:_,[]);C(N),T(A)},setNodeExtent:w=>{const{nodes:S,nodeLookup:C,parentLookup:T,nodeOrigin:E,elevateNodesOnSelect:N,nodeExtent:A}=b();w[0][0]===A[0][0]&&w[0][1]===A[0][1]&&w[1][0]===A[1][0]&&w[1][1]===A[1][1]||(L2(S,C,T,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:N,checkEquality:!1}),m({nodeExtent:w}))},panBy:w=>{const{transform:S,width:C,height:T,panZoom:E,translateExtent:N}=b();return Due({delta:w,panZoom:E,transform:S,translateExtent:N,width:C,height:T})},setCenter:async(w,S,C)=>{const{width:T,height:E,maxZoom:N,panZoom:A}=b();if(!A)return Promise.resolve(!1);const _=typeof C?.zoom<"u"?C.zoom:N;return await A.setViewport({x:T/2-w*_,y:E/2-S*_,zoom:_},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{m({connection:{...OF}})},updateConnection:w=>{m({connection:w})},reset:()=>m({...sL()})}},Object.is);function BH({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:f,nodeExtent:p,children:m}){const[b]=M.useState(()=>Ufe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:f,nodeExtent:p}));return g.jsx(dde,{value:b,children:g.jsx(Ode,{children:m})})}function $fe({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:m}){return M.useContext(t0)?g.jsx(g.Fragment,{children:t}):g.jsx(BH,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:f,nodeOrigin:p,nodeExtent:m,children:t})}const Gfe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Wfe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:b,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:C,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:O,onNodeDrag:R,onNodeDragStop:L,onNodesDelete:I,onEdgesDelete:F,onDelete:q,onSelectionChange:U,onSelectionDragStart:P,onSelectionDrag:H,onSelectionDragStop:j,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:te,onBeforeDelete:z,connectionMode:W,connectionLineType:ae=oa.Bezier,connectionLineStyle:re,connectionLineComponent:$,connectionLineContainerStyle:Z,deleteKeyCode:ee="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:oe=!1,selectionMode:ye=eh.Full,panActivationKeyCode:Ce="Space",multiSelectionKeyCode:Pe=nh()?"Meta":"Control",zoomActivationKeyCode:Ie=nh()?"Meta":"Control",snapToGrid:Ae,snapGrid:Ee,onlyRenderVisibleElements:Ne=!1,selectNodesOnDrag:yt,nodesDraggable:Oe,autoPanOnNodeFocus:xt,nodesConnectable:wt,nodesFocusable:Yt,nodeOrigin:gn=uH,edgesFocusable:Ht,edgesReconnectable:Mt,elementsSelectable:Dn=!0,defaultViewport:yn=Cde,minZoom:Bt=.5,maxZoom:ht=2,translateExtent:_t=Qf,preventScrolling:Dt=!0,nodeExtent:xr,defaultMarkerColor:Hr="#b1b1b7",zoomOnScroll:Ii=!0,zoomOnPinch:rn=!0,panOnScroll:Le=!1,panOnScrollSpeed:$e=.5,panOnScrollMode:vr=El.Free,zoomOnDoubleClick:pt=!0,panOnDrag:bn=!0,onPaneClick:vo,onPaneMouseEnter:Pi,onPaneMouseMove:Ur,onPaneMouseLeave:$r,onPaneScroll:wr,onPaneContextMenu:Dr,paneClickDistance:Gr=0,nodeClickDistance:St=0,children:Kn,onReconnect:wo,onReconnectStart:Bi,onReconnectEnd:sr,onEdgeContextMenu:Xt,onEdgeDoubleClick:zt,onEdgeMouseEnter:Rr,onEdgeMouseMove:Rn,onEdgeMouseLeave:Wr,reconnectRadius:es=10,onNodesChange:Os,onEdgesChange:Kr,noDragClassName:ts="nodrag",noWheelClassName:xn="nowheel",noPanClassName:He="nopan",fitView:or,fitViewOptions:ar,connectOnClick:Lt,attributionPosition:ns,proOptions:Re,defaultEdgeOptions:J,elevateNodesOnSelect:ge,elevateEdgesOnSelect:_e,disableKeyboardA11y:dt=!1,autoPanOnConnect:Vt,autoPanOnNodeDrag:Rt,autoPanSpeed:Ut,connectionRadius:Bn,isValidConnection:vn,onError:fi,style:qt,id:Yn,nodeDragThreshold:rs,connectionDragThreshold:Oa,viewport:Ql,onViewportChange:ec,width:lr,height:tc,colorMode:Hu="light",debug:So,onScroll:is,ariaLabelConfig:ss,...ko},cr){const Yr=Yn||"1",Co=Ade(Hu),La=M.useCallback(zi=>{zi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),is?.(zi)},[is]);return g.jsx("div",{"data-testid":"rf__wrapper",...ko,onScroll:La,style:{...qt,...Gfe},ref:cr,className:Mn(["react-flow",i,Co]),id:Yn,role:"application",children:g.jsxs($fe,{nodes:t,edges:e,width:lr,height:tc,fitView:or,fitViewOptions:ar,minZoom:Bt,maxZoom:ht,nodeOrigin:gn,nodeExtent:xr,children:[g.jsx(Hfe,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:ae,connectionLineStyle:re,connectionLineComponent:$,connectionLineContainerStyle:Z,selectionKeyCode:de,selectionOnDrag:oe,selectionMode:ye,deleteKeyCode:ee,multiSelectionKeyCode:Pe,panActivationKeyCode:Ce,zoomActivationKeyCode:Ie,onlyRenderVisibleElements:Ne,defaultViewport:yn,translateExtent:_t,minZoom:Bt,maxZoom:ht,preventScrolling:Dt,zoomOnScroll:Ii,zoomOnPinch:rn,zoomOnDoubleClick:pt,panOnScroll:Le,panOnScrollSpeed:$e,panOnScrollMode:vr,panOnDrag:bn,onPaneClick:vo,onPaneMouseEnter:Pi,onPaneMouseMove:Ur,onPaneMouseLeave:$r,onPaneScroll:wr,onPaneContextMenu:Dr,paneClickDistance:Gr,nodeClickDistance:St,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:te,onReconnect:wo,onReconnectStart:Bi,onReconnectEnd:sr,onEdgeContextMenu:Xt,onEdgeDoubleClick:zt,onEdgeMouseEnter:Rr,onEdgeMouseMove:Rn,onEdgeMouseLeave:Wr,reconnectRadius:es,defaultMarkerColor:Hr,noDragClassName:ts,noWheelClassName:xn,noPanClassName:He,rfId:Yr,disableKeyboardA11y:dt,nodeExtent:xr,viewport:Ql,onViewportChange:ec}),g.jsx(Tde,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:x,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:C,nodesDraggable:Oe,autoPanOnNodeFocus:xt,nodesConnectable:wt,nodesFocusable:Yt,edgesFocusable:Ht,edgesReconnectable:Mt,elementsSelectable:Dn,elevateNodesOnSelect:ge,elevateEdgesOnSelect:_e,minZoom:Bt,maxZoom:ht,nodeExtent:xr,onNodesChange:Os,onEdgesChange:Kr,snapToGrid:Ae,snapGrid:Ee,connectionMode:W,translateExtent:_t,connectOnClick:Lt,defaultEdgeOptions:J,fitView:or,fitViewOptions:ar,onNodesDelete:I,onEdgesDelete:F,onDelete:q,onNodeDragStart:O,onNodeDrag:R,onNodeDragStop:L,onSelectionDrag:H,onSelectionDragStart:P,onSelectionDragStop:j,onMove:f,onMoveStart:p,onMoveEnd:m,noPanClassName:He,nodeOrigin:gn,rfId:Yr,autoPanOnConnect:Vt,autoPanOnNodeDrag:Rt,autoPanSpeed:Ut,onError:fi,connectionRadius:Bn,isValidConnection:vn,selectNodesOnDrag:yt,nodeDragThreshold:rs,connectionDragThreshold:Oa,onBeforeDelete:z,paneClickDistance:Gr,debug:So,ariaLabelConfig:ss}),g.jsx(kde,{onSelectionChange:U}),Kn,g.jsx(bde,{proOptions:Re,position:ns}),g.jsx(yde,{rfId:Yr,disableKeyboardA11y:dt})]})})}var Kfe=pH(Wfe);function Yfe(t){const[e,n]=M.useState(t),r=M.useCallback(i=>n(s=>fH(i,s)),[]);return[e,n,r]}function Xfe(t){const[e,n]=M.useState(t),r=M.useCallback(i=>n(s=>hH(i,s)),[]);return[e,n,r]}function Zfe({dimensions:t,lineWidth:e,variant:n,className:r}){return g.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Mn(["react-flow__background-pattern",n,r])})}function Jfe({radius:t,className:e}){return g.jsx("circle",{cx:t,cy:t,r:t,className:Mn(["react-flow__background-pattern","dots",e])})}var ya;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ya||(ya={}));const Qfe={[ya.Dots]:1,[ya.Lines]:1,[ya.Cross]:6},ehe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function zH({id:t,variant:e=ya.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:f}){const p=M.useRef(null),{transform:m,patternId:b}=lt(ehe,nn),x=r||Qfe[e],w=e===ya.Dots,S=e===ya.Cross,C=Array.isArray(n)?n:[n,n],T=[C[0]*m[2]||1,C[1]*m[2]||1],E=x*m[2],N=Array.isArray(s)?s:[s,s],A=S?[E,E]:T,_=[N[0]*m[2]||1+A[0]/2,N[1]*m[2]||1+A[1]/2],O=`${b}${t||""}`;return g.jsxs("svg",{className:Mn(["react-flow__background",d]),style:{...u,...r0,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[g.jsx("pattern",{id:O,x:m[0]%T[0],y:m[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:w?g.jsx(Jfe,{radius:E/2,className:f}):g.jsx(Zfe,{dimensions:A,lineWidth:i,variant:e,className:f})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${O})`})]})}zH.displayName="Background";const the=M.memo(zH);function nhe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function rhe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function ihe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function she(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function ohe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Cm({children:t,className:e,...n}){return g.jsx("button",{type:"button",className:Mn(["react-flow__controls-button",e]),...n,children:t})}const ahe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function VH({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:f,position:p="bottom-left",orientation:m="vertical","aria-label":b}){const x=Wt(),{isInteractive:w,minZoomReached:S,maxZoomReached:C,ariaLabelConfig:T}=lt(ahe,nn),{zoomIn:E,zoomOut:N,fitView:A}=sh(),_=()=>{E(),s?.()},O=()=>{N(),o?.()},R=()=>{A(i),l?.()},L=()=>{x.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),u?.(!w)},I=m==="horizontal"?"horizontal":"vertical";return g.jsxs(n0,{className:Mn(["react-flow__controls",I,d]),position:p,style:t,"data-testid":"rf__controls","aria-label":b??T["controls.ariaLabel"],children:[e&&g.jsxs(g.Fragment,{children:[g.jsx(Cm,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:C,children:g.jsx(nhe,{})}),g.jsx(Cm,{onClick:O,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:S,children:g.jsx(rhe,{})})]}),n&&g.jsx(Cm,{className:"react-flow__controls-fitview",onClick:R,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:g.jsx(ihe,{})}),r&&g.jsx(Cm,{className:"react-flow__controls-interactive",onClick:L,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:w?g.jsx(ohe,{}):g.jsx(she,{})}),f]})}VH.displayName="Controls";const lhe=M.memo(VH);function che({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:f,shapeRendering:p,selected:m,onClick:b}){const{background:x,backgroundColor:w}=s||{},S=o||x||w;return g.jsx("rect",{className:Mn(["react-flow__minimap-node",{selected:m},d]),x:e,y:n,rx:f,ry:f,width:r,height:i,style:{fill:S,stroke:l,strokeWidth:u},shapeRendering:p,onClick:b?C=>b(C,t):void 0})}const uhe=M.memo(che),dhe=t=>t.nodes.map(e=>e.id),Ov=t=>t instanceof Function?t:()=>t;function fhe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=uhe,onClick:o}){const l=lt(dhe,nn),u=Ov(e),d=Ov(t),f=Ov(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:l.map(m=>g.jsx(phe,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function hhe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:f,y:p,width:m,height:b}=lt(x=>{const{internals:w}=x.nodeLookup.get(t),S=w.userNode,{x:C,y:T}=w.positionAbsolute,{width:E,height:N}=mo(S);return{node:S,x:C,y:T,width:E,height:N}},nn);return!d||d.hidden||!FF(d)?null:g.jsx(l,{x:f,y:p,width:m,height:b,style:d.style,selected:!!d.selected,className:r(d),color:e(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const phe=M.memo(hhe);var mhe=M.memo(fhe);const ghe=200,yhe=150,bhe=t=>!t.hidden,xhe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?qF(Dh(t.nodeLookup,{filter:bhe}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},vhe="react-flow__minimap-desc";function qH({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:f,maskStrokeWidth:p,position:m="bottom-right",onClick:b,onNodeClick:x,pannable:w=!1,zoomable:S=!1,ariaLabel:C,inversePan:T,zoomStep:E=1,offsetScale:N=5}){const A=Wt(),_=M.useRef(null),{boundingRect:O,viewBB:R,rfId:L,panZoom:I,translateExtent:F,flowWidth:q,flowHeight:U,ariaLabelConfig:P}=lt(xhe,nn),H=t?.width??ghe,j=t?.height??yhe,V=O.width/H,G=O.height/j,te=Math.max(V,G),z=te*H,W=te*j,ae=N*te,re=O.x-(z-O.width)/2-ae,$=O.y-(W-O.height)/2-ae,Z=z+ae*2,ee=W+ae*2,de=`${vhe}-${L}`,oe=M.useRef(0),ye=M.useRef();oe.current=te,M.useEffect(()=>{if(_.current&&I)return ye.current=Vue({domNode:_.current,panZoom:I,getTransform:()=>A.getState().transform,getViewScale:()=>oe.current}),()=>{ye.current?.destroy()}},[I]),M.useEffect(()=>{ye.current?.update({translateExtent:F,width:q,height:U,inversePan:T,pannable:w,zoomStep:E,zoomable:S})},[w,S,T,E,F,q,U]);const Ce=b?Ae=>{const[Ee,Ne]=ye.current?.pointer(Ae)||[0,0];b(Ae,{x:Ee,y:Ne})}:void 0,Pe=x?M.useCallback((Ae,Ee)=>{const Ne=A.getState().nodeLookup.get(Ee).internals.userNode;x(Ae,Ne)},[]):void 0,Ie=C??P["minimap.ariaLabel"];return g.jsx(n0,{position:m,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*te:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Mn(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:H,height:j,viewBox:`${re} ${$} ${Z} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:_,onClick:Ce,children:[Ie&&g.jsx("title",{id:de,children:Ie}),g.jsx(mhe,{onClick:Pe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${re-ae},${$-ae}h${Z+ae*2}v${ee+ae*2}h${-Z-ae*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}qH.displayName="MiniMap";const whe=M.memo(qH),She=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,khe={[Pl.Line]:"right",[Pl.Handle]:"bottom-right"};function Che({nodeId:t,position:e,variant:n=Pl.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:m,autoScale:b=!0,shouldResize:x,onResizeStart:w,onResize:S,onResizeEnd:C}){const T=bH(),E=typeof t=="string"?t:T,N=Wt(),A=M.useRef(null),_=n===Pl.Handle,O=lt(M.useCallback(She(_&&b),[_,b]),nn),R=M.useRef(null),L=e??khe[n];M.useEffect(()=>{if(!(!A.current||!E))return R.current||(R.current=ide({domNode:A.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:F,transform:q,snapGrid:U,snapToGrid:P,nodeOrigin:H,domNode:j}=N.getState();return{nodeLookup:F,transform:q,snapGrid:U,snapToGrid:P,nodeOrigin:H,paneDomNode:j}},onChange:(F,q)=>{const{triggerNodeChanges:U,nodeLookup:P,parentLookup:H,nodeOrigin:j}=N.getState(),V=[],G={x:F.x,y:F.y},te=P.get(E);if(te&&te.expandParent&&te.parentId){const z=te.origin??j,W=F.width??te.measured.width??0,ae=F.height??te.measured.height??0,re={id:te.id,parentId:te.parentId,rect:{width:W,height:ae,...HF({x:F.x??te.position.x,y:F.y??te.position.y},{width:W,height:ae},te.parentId,P,z)}},$=LT([re],P,H,j);V.push(...$),G.x=F.x?Math.max(z[0]*W,F.x):void 0,G.y=F.y?Math.max(z[1]*ae,F.y):void 0}if(G.x!==void 0&&G.y!==void 0){const z={id:E,type:"position",position:{...G}};V.push(z)}if(F.width!==void 0&&F.height!==void 0){const W={id:E,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};V.push(W)}for(const z of q){const W={...z,type:"position"};V.push(W)}U(V)},onEnd:({width:F,height:q})=>{const U={id:E,type:"dimensions",resizing:!1,dimensions:{width:F,height:q}};N.getState().triggerNodeChanges([U])}})),R.current.update({controlPosition:L,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:f},keepAspectRatio:p,resizeDirection:m,onResizeStart:w,onResize:S,onResizeEnd:C,shouldResize:x}),()=>{R.current?.destroy()}},[L,l,u,d,f,p,w,S,C,x]);const I=L.split("-");return g.jsx("div",{className:Mn(["react-flow__resize-control","nodrag",...I,n,r]),ref:A,style:{...i,scale:O,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const oL=M.memo(Che);function Ehe({nodeId:t,isVisible:e=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:m=!0,shouldResize:b,onResizeStart:x,onResize:w,onResizeEnd:S}){return e?g.jsxs(g.Fragment,{children:[Zue.map(C=>g.jsx(oL,{className:i,style:s,nodeId:t,position:C,variant:Pl.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:f,onResizeStart:x,keepAspectRatio:p,autoScale:m,shouldResize:b,onResize:w,onResizeEnd:S},C)),Xue.map(C=>g.jsx(oL,{className:n,style:r,nodeId:t,position:C,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:f,onResizeStart:x,keepAspectRatio:p,autoScale:m,shouldResize:b,onResize:w,onResizeEnd:S},C))]}):null}function Nhe(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const The=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function ba(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let zc=null;function FH(t={}){return zc||(t.includeStyleProperties?(zc=t.includeStyleProperties,zc):(zc=ba(window.getComputedStyle(document.documentElement)),zc))}function oy(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function Ahe(t){const e=oy(t,"border-left-width"),n=oy(t,"border-right-width");return t.clientWidth+e+n}function Mhe(t){const e=oy(t,"border-top-width"),n=oy(t,"border-bottom-width");return t.clientHeight+e+n}function HH(t,e={}){const n=e.width||Ahe(t),r=e.height||Mhe(t);return{width:n,height:r}}function _he(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const ii=16384;function Dhe(t){(t.width>ii||t.height>ii)&&(t.width>ii&&t.height>ii?t.width>t.height?(t.height*=ii/t.width,t.width=ii):(t.width*=ii/t.height,t.height=ii):t.width>ii?(t.height*=ii/t.width,t.width=ii):(t.width*=ii/t.height,t.height=ii))}function ay(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Rhe(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function jhe(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),Rhe(i)}const Vr=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Vr(n,e)};function Ohe(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Lhe(t,e){return FH(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Ihe(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?Ohe(n):Lhe(n,r);return document.createTextNode(`${i}{${s}}`)}function aL(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=The();try{e.className=`${e.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(Ihe(o,n,i,r)),e.appendChild(l)}function Phe(t,e,n){aL(t,e,":before",n),aL(t,e,":after",n)}const lL="application/font-woff",cL="image/jpeg",Bhe={woff:lL,woff2:lL,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:cL,jpeg:cL,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function zhe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function PT(t){const e=zhe(t).toLowerCase();return Bhe[e]||""}function Vhe(t){return t.split(/,/)[1]}function B2(t){return t.search(/^(data:)/)!==-1}function qhe(t,e){return`data:${e};base64,${t}`}async function UH(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const Lv={};function Fhe(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function BT(t,e,n){const r=Fhe(t,e,n.includeQueryParams);if(Lv[r]!=null)return Lv[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await UH(t,n.fetchRequestInit,({res:o,result:l})=>(e||(e=o.headers.get("Content-Type")||""),Vhe(l)));i=qhe(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Lv[r]=i,i}async function Hhe(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ay(e)}async function Uhe(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o?.drawImage(t,0,0,s.width,s.height);const l=s.toDataURL();return ay(l)}const n=t.poster,r=PT(n),i=await BT(n,r,e);return ay(i)}async function $he(t,e){var n;try{if(!((n=t?.contentDocument)===null||n===void 0)&&n.body)return await s0(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function Ghe(t,e){return Vr(t,HTMLCanvasElement)?Hhe(t):Vr(t,HTMLVideoElement)?Uhe(t,e):Vr(t,HTMLIFrameElement)?$he(t,e):t.cloneNode($H(t))}const Whe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",$H=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function Khe(t,e,n){var r,i;if($H(e))return e;let s=[];return Whe(t)&&t.assignedNodes?s=ba(t.assignedNodes()):Vr(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=ba(t.contentDocument.body.childNodes):s=ba(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||Vr(t,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>s0(l,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function Yhe(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):FH(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Vr(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function Xhe(t,e){Vr(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Vr(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function Zhe(t,e){if(Vr(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Jhe(t,e,n){return Vr(e,Element)&&(Yhe(t,e,n),Phe(t,e,n),Xhe(t,e),Zhe(t,e)),e}async function Qhe(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=t.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await s0(d,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);t.appendChild(o)}return t}async function s0(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>Ghe(r,e)).then(r=>Khe(t,r,e)).then(r=>Jhe(t,r,e)).then(r=>Qhe(r,e))}const GH=/url\((['"]?)([^'"]+?)\1\)/g,epe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,tpe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function npe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function rpe(t){const e=[];return t.replace(GH,(n,r,i)=>(e.push(i),n)),e.filter(n=>!B2(n))}async function ipe(t,e,n,r,i){try{const s=n?Nhe(e,n):e,o=PT(e);let l;return i||(l=await BT(s,o,r)),t.replace(npe(e),`$1${l}$3`)}catch{}return t}function spe(t,{preferredFontFormat:e}){return e?t.replace(tpe,n=>{for(;;){const[r,,i]=epe.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function WH(t){return t.search(GH)!==-1}async function KH(t,e,n){if(!WH(t))return t;const r=spe(t,n);return rpe(r).reduce((s,o)=>s.then(l=>ipe(l,o,e,n)),Promise.resolve(r))}async function Vc(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await KH(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function ope(t,e){await Vc("background",t,e)||await Vc("background-image",t,e),await Vc("mask",t,e)||await Vc("-webkit-mask",t,e)||await Vc("mask-image",t,e)||await Vc("-webkit-mask-image",t,e)}async function ape(t,e){const n=Vr(t,HTMLImageElement);if(!(n&&!B2(t.src))&&!(Vr(t,SVGImageElement)&&!B2(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await BT(r,PT(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...u)=>{try{s(e.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=t;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function lpe(t,e){const r=ba(t.childNodes).map(i=>YH(i,e));await Promise.all(r).then(()=>t)}async function YH(t,e){Vr(t,Element)&&(await ope(t,e),await ape(t,e),await lpe(t,e))}function cpe(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const uL={};async function dL(t){let e=uL[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},uL[t]=e,e}async function fL(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,t.url).href),UH(l,e.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function hL(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;e.push(u[0])}return e}async function upe(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{ba(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=dL(u).then(f=>fL(f,e)).then(f=>hL(f).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:p,error:m})}})).catch(f=>{console.error("Error loading remote css",f.toString())});r.push(d)}})}catch(s){const o=t.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(dL(i.href).then(l=>fL(l,e)).then(l=>hL(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{ba(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function dpe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>WH(e.style.getPropertyValue("src")))}async function fpe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=ba(t.ownerDocument.styleSheets),r=await upe(n,e);return dpe(r)}function XH(t){return t.trim().replace(/["']/g,"")}function hpe(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(XH(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function ppe(t,e){const n=await fpe(t,e),r=hpe(t);return(await Promise.all(n.filter(s=>r.has(XH(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return KH(s.cssText,o,e)}))).join(`
`)}async function mpe(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await ppe(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function ZH(t,e={}){const{width:n,height:r}=HH(t,e),i=await s0(t,e,!0);return await mpe(i,e),await YH(i,e),cpe(i,e),await jhe(i,n,r)}async function JH(t,e={}){const{width:n,height:r}=HH(t,e),i=await ZH(t,e),s=await ay(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=e.pixelRatio||_he(),d=e.canvasWidth||n,f=e.canvasHeight||r;return o.width=d*u,o.height=f*u,e.skipAutoScale||Dhe(o),o.style.width=`${d}`,o.style.height=`${f}`,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function gpe(t,e={}){return(await JH(t,e)).toDataURL()}async function ype(t,e={}){return(await JH(t,e)).toDataURL("image/jpeg",e.quality||1)}function zT(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Iv,pL;function bpe(){if(pL)return Iv;pL=1;function t(){this.__data__=[],this.size=0}return Iv=t,Iv}var Pv,mL;function Lu(){if(mL)return Pv;mL=1;function t(e,n){return e===n||e!==e&&n!==n}return Pv=t,Pv}var Bv,gL;function o0(){if(gL)return Bv;gL=1;var t=Lu();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return Bv=e,Bv}var zv,yL;function xpe(){if(yL)return zv;yL=1;var t=o0(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return zv=r,zv}var Vv,bL;function vpe(){if(bL)return Vv;bL=1;var t=o0();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Vv=e,Vv}var qv,xL;function wpe(){if(xL)return qv;xL=1;var t=o0();function e(n){return t(this.__data__,n)>-1}return qv=e,qv}var Fv,vL;function Spe(){if(vL)return Fv;vL=1;var t=o0();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Fv=e,Fv}var Hv,wL;function a0(){if(wL)return Hv;wL=1;var t=bpe(),e=xpe(),n=vpe(),r=wpe(),i=Spe();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Hv=s,Hv}var Uv,SL;function kpe(){if(SL)return Uv;SL=1;var t=a0();function e(){this.__data__=new t,this.size=0}return Uv=e,Uv}var $v,kL;function Cpe(){if(kL)return $v;kL=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return $v=t,$v}var Gv,CL;function Epe(){if(CL)return Gv;CL=1;function t(e){return this.__data__.get(e)}return Gv=t,Gv}var Wv,EL;function Npe(){if(EL)return Wv;EL=1;function t(e){return this.__data__.has(e)}return Wv=t,Wv}var Kv,NL;function QH(){if(NL)return Kv;NL=1;var t=typeof Qp=="object"&&Qp&&Qp.Object===Object&&Qp;return Kv=t,Kv}var Yv,TL;function Qi(){if(TL)return Yv;TL=1;var t=QH(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Yv=n,Yv}var Xv,AL;function Iu(){if(AL)return Xv;AL=1;var t=Qi(),e=t.Symbol;return Xv=e,Xv}var Zv,ML;function Tpe(){if(ML)return Zv;ML=1;var t=Iu(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var f=r.call(o);return d&&(l?o[i]=u:delete o[i]),f}return Zv=s,Zv}var Jv,_L;function Ape(){if(_L)return Jv;_L=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Jv=n,Jv}var Qv,DL;function Wl(){if(DL)return Qv;DL=1;var t=Iu(),e=Tpe(),n=Ape(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?e(l):n(l)}return Qv=o,Qv}var e1,RL;function Oi(){if(RL)return e1;RL=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return e1=t,e1}var t1,jL;function Oh(){if(jL)return t1;jL=1;var t=Wl(),e=Oi(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==r||u==i||u==n||u==s}return t1=o,t1}var n1,OL;function Mpe(){if(OL)return n1;OL=1;var t=Qi(),e=t["__core-js_shared__"];return n1=e,n1}var r1,LL;function _pe(){if(LL)return r1;LL=1;var t=Mpe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return r1=n,r1}var i1,IL;function eU(){if(IL)return i1;IL=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return i1=n,i1}var s1,PL;function Dpe(){if(PL)return s1;PL=1;var t=Oh(),e=_pe(),n=Oi(),r=eU(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||e(m))return!1;var b=t(m)?f:s;return b.test(r(m))}return s1=p,s1}var o1,BL;function Rpe(){if(BL)return o1;BL=1;function t(e,n){return e?.[n]}return o1=t,o1}var a1,zL;function Kl(){if(zL)return a1;zL=1;var t=Dpe(),e=Rpe();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return a1=n,a1}var l1,VL;function VT(){if(VL)return l1;VL=1;var t=Kl(),e=Qi(),n=t(e,"Map");return l1=n,l1}var c1,qL;function l0(){if(qL)return c1;qL=1;var t=Kl(),e=t(Object,"create");return c1=e,c1}var u1,FL;function jpe(){if(FL)return u1;FL=1;var t=l0();function e(){this.__data__=t?t(null):{},this.size=0}return u1=e,u1}var d1,HL;function Ope(){if(HL)return d1;HL=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return d1=t,d1}var f1,UL;function Lpe(){if(UL)return f1;UL=1;var t=l0(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return r.call(o,s)?o[s]:void 0}return f1=i,f1}var h1,$L;function Ipe(){if($L)return h1;$L=1;var t=l0(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return h1=r,h1}var p1,GL;function Ppe(){if(GL)return p1;GL=1;var t=l0(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return p1=n,p1}var m1,WL;function Bpe(){if(WL)return m1;WL=1;var t=jpe(),e=Ope(),n=Lpe(),r=Ipe(),i=Ppe();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,m1=s,m1}var g1,KL;function zpe(){if(KL)return g1;KL=1;var t=Bpe(),e=a0(),n=VT();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return g1=r,g1}var y1,YL;function Vpe(){if(YL)return y1;YL=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return y1=t,y1}var b1,XL;function c0(){if(XL)return b1;XL=1;var t=Vpe();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return b1=e,b1}var x1,ZL;function qpe(){if(ZL)return x1;ZL=1;var t=c0();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return x1=e,x1}var v1,JL;function Fpe(){if(JL)return v1;JL=1;var t=c0();function e(n){return t(this,n).get(n)}return v1=e,v1}var w1,QL;function Hpe(){if(QL)return w1;QL=1;var t=c0();function e(n){return t(this,n).has(n)}return w1=e,w1}var S1,e4;function Upe(){if(e4)return S1;e4=1;var t=c0();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return S1=e,S1}var k1,t4;function qT(){if(t4)return k1;t4=1;var t=zpe(),e=qpe(),n=Fpe(),r=Hpe(),i=Upe();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,k1=s,k1}var C1,n4;function $pe(){if(n4)return C1;n4=1;var t=a0(),e=VT(),n=qT(),r=200;function i(s,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return C1=i,C1}var E1,r4;function u0(){if(r4)return E1;r4=1;var t=a0(),e=kpe(),n=Cpe(),r=Epe(),i=Npe(),s=$pe();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,E1=o,E1}var N1,i4;function FT(){if(i4)return N1;i4=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return N1=t,N1}var T1,s4;function tU(){if(s4)return T1;s4=1;var t=Kl(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return T1=e,T1}var A1,o4;function d0(){if(o4)return A1;o4=1;var t=tU();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return A1=e,A1}var M1,a4;function f0(){if(a4)return M1;a4=1;var t=d0(),e=Lu(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&e(u,l))||l===void 0&&!(o in s))&&t(s,o,l)}return M1=i,M1}var _1,l4;function Lh(){if(l4)return _1;l4=1;var t=f0(),e=d0();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var f=i[u],p=o?o(s[f],r[f],f,s,r):void 0;p===void 0&&(p=r[f]),l?e(s,f,p):t(s,f,p)}return s}return _1=n,_1}var D1,c4;function Gpe(){if(c4)return D1;c4=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return D1=t,D1}var R1,u4;function Rs(){if(u4)return R1;u4=1;function t(e){return e!=null&&typeof e=="object"}return R1=t,R1}var j1,d4;function Wpe(){if(d4)return j1;d4=1;var t=Wl(),e=Rs(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return j1=r,j1}var O1,f4;function Ih(){if(f4)return O1;f4=1;var t=Wpe(),e=Rs(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return O1=s,O1}var L1,h4;function _n(){if(h4)return L1;h4=1;var t=Array.isArray;return L1=t,L1}var of={exports:{}},I1,p4;function Kpe(){if(p4)return I1;p4=1;function t(){return!1}return I1=t,I1}of.exports;var m4;function Pu(){return m4||(m4=1,(function(t,e){var n=Qi(),r=Kpe(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;t.exports=d})(of,of.exports)),of.exports}var P1,g4;function h0(){if(g4)return P1;g4=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return P1=n,P1}var B1,y4;function HT(){if(y4)return B1;y4=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return B1=e,B1}var z1,b4;function Ype(){if(b4)return z1;b4=1;var t=Wl(),e=HT(),n=Rs(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",b="[object Set]",x="[object String]",w="[object WeakMap]",S="[object ArrayBuffer]",C="[object DataView]",T="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",O="[object Uint8Array]",R="[object Uint8ClampedArray]",L="[object Uint16Array]",I="[object Uint32Array]",F={};F[T]=F[E]=F[N]=F[A]=F[_]=F[O]=F[R]=F[L]=F[I]=!0,F[r]=F[i]=F[S]=F[s]=F[C]=F[o]=F[l]=F[u]=F[d]=F[f]=F[p]=F[m]=F[b]=F[x]=F[w]=!1;function q(U){return n(U)&&e(U.length)&&!!F[t(U)]}return z1=q,z1}var V1,x4;function p0(){if(x4)return V1;x4=1;function t(e){return function(n){return e(n)}}return V1=t,V1}var af={exports:{}};af.exports;var v4;function UT(){return v4||(v4=1,(function(t,e){var n=QH(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(af,af.exports)),af.exports}var q1,w4;function Ph(){if(w4)return q1;w4=1;var t=Ype(),e=p0(),n=UT(),r=n&&n.isTypedArray,i=r?e(r):t;return q1=i,q1}var F1,S4;function nU(){if(S4)return F1;S4=1;var t=Gpe(),e=Ih(),n=_n(),r=Pu(),i=h0(),s=Ph(),o=Object.prototype,l=o.hasOwnProperty;function u(d,f){var p=n(d),m=!p&&e(d),b=!p&&!m&&r(d),x=!p&&!m&&!b&&s(d),w=p||m||b||x,S=w?t(d.length,String):[],C=S.length;for(var T in d)(f||l.call(d,T))&&!(w&&(T=="length"||b&&(T=="offset"||T=="parent")||x&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,C)))&&S.push(T);return S}return F1=u,F1}var H1,k4;function m0(){if(k4)return H1;k4=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return H1=e,H1}var U1,C4;function rU(){if(C4)return U1;C4=1;function t(e,n){return function(r){return e(n(r))}}return U1=t,U1}var $1,E4;function Xpe(){if(E4)return $1;E4=1;var t=rU(),e=t(Object.keys,Object);return $1=e,$1}var G1,N4;function $T(){if(N4)return G1;N4=1;var t=m0(),e=Xpe(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return G1=i,G1}var W1,T4;function go(){if(T4)return W1;T4=1;var t=Oh(),e=HT();function n(r){return r!=null&&e(r.length)&&!t(r)}return W1=n,W1}var K1,A4;function Ra(){if(A4)return K1;A4=1;var t=nU(),e=$T(),n=go();function r(i){return n(i)?t(i):e(i)}return K1=r,K1}var Y1,M4;function Zpe(){if(M4)return Y1;M4=1;var t=Lh(),e=Ra();function n(r,i){return r&&t(i,e(i),r)}return Y1=n,Y1}var X1,_4;function Jpe(){if(_4)return X1;_4=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return X1=t,X1}var Z1,D4;function Qpe(){if(D4)return Z1;D4=1;var t=Oi(),e=m0(),n=Jpe(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!t(o))return n(o);var l=e(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return Z1=s,Z1}var J1,R4;function Yl(){if(R4)return J1;R4=1;var t=nU(),e=Qpe(),n=go();function r(i){return n(i)?t(i,!0):e(i)}return J1=r,J1}var Q1,j4;function eme(){if(j4)return Q1;j4=1;var t=Lh(),e=Yl();function n(r,i){return r&&t(i,e(i),r)}return Q1=n,Q1}var lf={exports:{}};lf.exports;var O4;function iU(){return O4||(O4=1,(function(t,e){var n=Qi(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,f){if(f)return d.slice();var p=d.length,m=l?l(p):new d.constructor(p);return d.copy(m),m}t.exports=u})(lf,lf.exports)),lf.exports}var ew,L4;function sU(){if(L4)return ew;L4=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return ew=t,ew}var tw,I4;function oU(){if(I4)return tw;I4=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var l=e[r];n(l,r,e)&&(o[s++]=l)}return o}return tw=t,tw}var nw,P4;function aU(){if(P4)return nw;P4=1;function t(){return[]}return nw=t,nw}var rw,B4;function GT(){if(B4)return rw;B4=1;var t=oU(),e=aU(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return r.call(o,l)}))}:e;return rw=s,rw}var iw,z4;function tme(){if(z4)return iw;z4=1;var t=Lh(),e=GT();function n(r,i){return t(r,e(r),i)}return iw=n,iw}var sw,V4;function WT(){if(V4)return sw;V4=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return sw=t,sw}var ow,q4;function g0(){if(q4)return ow;q4=1;var t=rU(),e=t(Object.getPrototypeOf,Object);return ow=e,ow}var aw,F4;function lU(){if(F4)return aw;F4=1;var t=WT(),e=g0(),n=GT(),r=aU(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)t(l,n(o)),o=e(o);return l}:r;return aw=s,aw}var lw,H4;function nme(){if(H4)return lw;H4=1;var t=Lh(),e=lU();function n(r,i){return t(r,e(r),i)}return lw=n,lw}var cw,U4;function cU(){if(U4)return cw;U4=1;var t=WT(),e=_n();function n(r,i,s){var o=i(r);return e(r)?o:t(o,s(r))}return cw=n,cw}var uw,$4;function uU(){if($4)return uw;$4=1;var t=cU(),e=GT(),n=Ra();function r(i){return t(i,n,e)}return uw=r,uw}var dw,G4;function rme(){if(G4)return dw;G4=1;var t=cU(),e=lU(),n=Yl();function r(i){return t(i,n,e)}return dw=r,dw}var fw,W4;function ime(){if(W4)return fw;W4=1;var t=Kl(),e=Qi(),n=t(e,"DataView");return fw=n,fw}var hw,K4;function sme(){if(K4)return hw;K4=1;var t=Kl(),e=Qi(),n=t(e,"Promise");return hw=n,hw}var pw,Y4;function dU(){if(Y4)return pw;Y4=1;var t=Kl(),e=Qi(),n=t(e,"Set");return pw=n,pw}var mw,X4;function ome(){if(X4)return mw;X4=1;var t=Kl(),e=Qi(),n=t(e,"WeakMap");return mw=n,mw}var gw,Z4;function Bu(){if(Z4)return gw;Z4=1;var t=ime(),e=VT(),n=sme(),r=dU(),i=ome(),s=Wl(),o=eU(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",b=o(t),x=o(e),w=o(n),S=o(r),C=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=m||e&&T(new e)!=l||n&&T(n.resolve())!=d||r&&T(new r)!=f||i&&T(new i)!=p)&&(T=function(E){var N=s(E),A=N==u?E.constructor:void 0,_=A?o(A):"";if(_)switch(_){case b:return m;case x:return l;case w:return d;case S:return f;case C:return p}return N}),gw=T,gw}var yw,J4;function ame(){if(J4)return yw;J4=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return yw=n,yw}var bw,Q4;function fU(){if(Q4)return bw;Q4=1;var t=Qi(),e=t.Uint8Array;return bw=e,bw}var xw,eI;function KT(){if(eI)return xw;eI=1;var t=fU();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return xw=e,xw}var vw,tI;function lme(){if(tI)return vw;tI=1;var t=KT();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return vw=e,vw}var ww,nI;function cme(){if(nI)return ww;nI=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return ww=e,ww}var Sw,rI;function ume(){if(rI)return Sw;rI=1;var t=Iu(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Sw=r,Sw}var kw,iI;function hU(){if(iI)return kw;iI=1;var t=KT();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return kw=e,kw}var Cw,sI;function dme(){if(sI)return Cw;sI=1;var t=KT(),e=lme(),n=cme(),r=ume(),i=hU(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",f="[object Set]",p="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",C="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",O="[object Uint32Array]";function R(L,I,F){var q=L.constructor;switch(I){case b:return t(L);case s:case o:return new q(+L);case x:return e(L,F);case w:case S:case C:case T:case E:case N:case A:case _:case O:return i(L,F);case l:return new q;case u:case p:return new q(L);case d:return n(L);case f:return new q;case m:return r(L)}}return Cw=R,Cw}var Ew,oI;function pU(){if(oI)return Ew;oI=1;var t=Oi(),e=Object.create,n=(function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return Ew=n,Ew}var Nw,aI;function mU(){if(aI)return Nw;aI=1;var t=pU(),e=g0(),n=m0();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Nw=r,Nw}var Tw,lI;function fme(){if(lI)return Tw;lI=1;var t=Bu(),e=Rs(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return Tw=r,Tw}var Aw,cI;function hme(){if(cI)return Aw;cI=1;var t=fme(),e=p0(),n=UT(),r=n&&n.isMap,i=r?e(r):t;return Aw=i,Aw}var Mw,uI;function pme(){if(uI)return Mw;uI=1;var t=Bu(),e=Rs(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return Mw=r,Mw}var _w,dI;function mme(){if(dI)return _w;dI=1;var t=pme(),e=p0(),n=UT(),r=n&&n.isSet,i=r?e(r):t;return _w=i,_w}var Dw,fI;function gU(){if(fI)return Dw;fI=1;var t=u0(),e=FT(),n=f0(),r=Zpe(),i=eme(),s=iU(),o=sU(),l=tme(),u=nme(),d=uU(),f=rme(),p=Bu(),m=ame(),b=dme(),x=mU(),w=_n(),S=Pu(),C=hme(),T=Oi(),E=mme(),N=Ra(),A=Yl(),_=1,O=2,R=4,L="[object Arguments]",I="[object Array]",F="[object Boolean]",q="[object Date]",U="[object Error]",P="[object Function]",H="[object GeneratorFunction]",j="[object Map]",V="[object Number]",G="[object Object]",te="[object RegExp]",z="[object Set]",W="[object String]",ae="[object Symbol]",re="[object WeakMap]",$="[object ArrayBuffer]",Z="[object DataView]",ee="[object Float32Array]",de="[object Float64Array]",oe="[object Int8Array]",ye="[object Int16Array]",Ce="[object Int32Array]",Pe="[object Uint8Array]",Ie="[object Uint8ClampedArray]",Ae="[object Uint16Array]",Ee="[object Uint32Array]",Ne={};Ne[L]=Ne[I]=Ne[$]=Ne[Z]=Ne[F]=Ne[q]=Ne[ee]=Ne[de]=Ne[oe]=Ne[ye]=Ne[Ce]=Ne[j]=Ne[V]=Ne[G]=Ne[te]=Ne[z]=Ne[W]=Ne[ae]=Ne[Pe]=Ne[Ie]=Ne[Ae]=Ne[Ee]=!0,Ne[U]=Ne[P]=Ne[re]=!1;function yt(Oe,xt,wt,Yt,gn,Ht){var Mt,Dn=xt&_,yn=xt&O,Bt=xt&R;if(wt&&(Mt=gn?wt(Oe,Yt,gn,Ht):wt(Oe)),Mt!==void 0)return Mt;if(!T(Oe))return Oe;var ht=w(Oe);if(ht){if(Mt=m(Oe),!Dn)return o(Oe,Mt)}else{var _t=p(Oe),Dt=_t==P||_t==H;if(S(Oe))return s(Oe,Dn);if(_t==G||_t==L||Dt&&!gn){if(Mt=yn||Dt?{}:x(Oe),!Dn)return yn?u(Oe,i(Mt,Oe)):l(Oe,r(Mt,Oe))}else{if(!Ne[_t])return gn?Oe:{};Mt=b(Oe,_t,Dn)}}Ht||(Ht=new t);var xr=Ht.get(Oe);if(xr)return xr;Ht.set(Oe,Mt),E(Oe)?Oe.forEach(function(rn){Mt.add(yt(rn,xt,wt,rn,Oe,Ht))}):C(Oe)&&Oe.forEach(function(rn,Le){Mt.set(Le,yt(rn,xt,wt,Le,Oe,Ht))});var Hr=Bt?yn?f:d:yn?A:N,Ii=ht?void 0:Hr(Oe);return e(Ii||Oe,function(rn,Le){Ii&&(Le=rn,rn=Oe[Le]),n(Mt,Le,yt(rn,xt,wt,Le,Oe,Ht))}),Mt}return Dw=yt,Dw}var Rw,hI;function gme(){if(hI)return Rw;hI=1;var t=gU(),e=4;function n(r){return t(r,e)}return Rw=n,Rw}var jw,pI;function YT(){if(pI)return jw;pI=1;function t(e){return function(){return e}}return jw=t,jw}var Ow,mI;function yme(){if(mI)return Ow;mI=1;function t(e){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[e?u:++s];if(r(o[d],d,o)===!1)break}return n}}return Ow=t,Ow}var Lw,gI;function XT(){if(gI)return Lw;gI=1;var t=yme(),e=t();return Lw=e,Lw}var Iw,yI;function ZT(){if(yI)return Iw;yI=1;var t=XT(),e=Ra();function n(r,i){return r&&t(r,i,e)}return Iw=n,Iw}var Pw,bI;function bme(){if(bI)return Pw;bI=1;var t=go();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return Pw=e,Pw}var Bw,xI;function y0(){if(xI)return Bw;xI=1;var t=ZT(),e=bme(),n=e(t);return Bw=n,Bw}var zw,vI;function Xl(){if(vI)return zw;vI=1;function t(e){return e}return zw=t,zw}var Vw,wI;function yU(){if(wI)return Vw;wI=1;var t=Xl();function e(n){return typeof n=="function"?n:t}return Vw=e,Vw}var qw,SI;function bU(){if(SI)return qw;SI=1;var t=FT(),e=y0(),n=yU(),r=_n();function i(s,o){var l=r(s)?t:e;return l(s,n(o))}return qw=i,qw}var Fw,kI;function xU(){return kI||(kI=1,Fw=bU()),Fw}var Hw,CI;function xme(){if(CI)return Hw;CI=1;var t=y0();function e(n,r){var i=[];return t(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return Hw=e,Hw}var Uw,EI;function vme(){if(EI)return Uw;EI=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Uw=e,Uw}var $w,NI;function wme(){if(NI)return $w;NI=1;function t(e){return this.__data__.has(e)}return $w=t,$w}var Gw,TI;function vU(){if(TI)return Gw;TI=1;var t=qT(),e=vme(),n=wme();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Gw=r,Gw}var Ww,AI;function Sme(){if(AI)return Ww;AI=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return Ww=t,Ww}var Kw,MI;function wU(){if(MI)return Kw;MI=1;function t(e,n){return e.has(n)}return Kw=t,Kw}var Yw,_I;function SU(){if(_I)return Yw;_I=1;var t=vU(),e=Sme(),n=wU(),r=1,i=2;function s(o,l,u,d,f,p){var m=u&r,b=o.length,x=l.length;if(b!=x&&!(m&&x>b))return!1;var w=p.get(o),S=p.get(l);if(w&&S)return w==l&&S==o;var C=-1,T=!0,E=u&i?new t:void 0;for(p.set(o,l),p.set(l,o);++C<b;){var N=o[C],A=l[C];if(d)var _=m?d(A,N,C,l,o,p):d(N,A,C,o,l,p);if(_!==void 0){if(_)continue;T=!1;break}if(E){if(!e(l,function(O,R){if(!n(E,R)&&(N===O||f(N,O,u,d,p)))return E.push(R)})){T=!1;break}}else if(!(N===A||f(N,A,u,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return Yw=s,Yw}var Xw,DI;function kme(){if(DI)return Xw;DI=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return Xw=t,Xw}var Zw,RI;function JT(){if(RI)return Zw;RI=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Zw=t,Zw}var Jw,jI;function Cme(){if(jI)return Jw;jI=1;var t=Iu(),e=fU(),n=Lu(),r=SU(),i=kme(),s=JT(),o=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",m="[object Number]",b="[object RegExp]",x="[object Set]",w="[object String]",S="[object Symbol]",C="[object ArrayBuffer]",T="[object DataView]",E=t?t.prototype:void 0,N=E?E.valueOf:void 0;function A(_,O,R,L,I,F,q){switch(R){case T:if(_.byteLength!=O.byteLength||_.byteOffset!=O.byteOffset)return!1;_=_.buffer,O=O.buffer;case C:return!(_.byteLength!=O.byteLength||!F(new e(_),new e(O)));case u:case d:case m:return n(+_,+O);case f:return _.name==O.name&&_.message==O.message;case b:case w:return _==O+"";case p:var U=i;case x:var P=L&o;if(U||(U=s),_.size!=O.size&&!P)return!1;var H=q.get(_);if(H)return H==O;L|=l,q.set(_,O);var j=r(U(_),U(O),L,I,F,q);return q.delete(_),j;case S:if(N)return N.call(_)==N.call(O)}return!1}return Jw=A,Jw}var Qw,OI;function Eme(){if(OI)return Qw;OI=1;var t=uU(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,f){var p=l&e,m=t(s),b=m.length,x=t(o),w=x.length;if(b!=w&&!p)return!1;for(var S=b;S--;){var C=m[S];if(!(p?C in o:r.call(o,C)))return!1}var T=f.get(s),E=f.get(o);if(T&&E)return T==o&&E==s;var N=!0;f.set(s,o),f.set(o,s);for(var A=p;++S<b;){C=m[S];var _=s[C],O=o[C];if(u)var R=p?u(O,_,C,o,s,f):u(_,O,C,s,o,f);if(!(R===void 0?_===O||d(_,O,l,u,f):R)){N=!1;break}A||(A=C=="constructor")}if(N&&!A){var L=s.constructor,I=o.constructor;L!=I&&"constructor"in s&&"constructor"in o&&!(typeof L=="function"&&L instanceof L&&typeof I=="function"&&I instanceof I)&&(N=!1)}return f.delete(s),f.delete(o),N}return Qw=i,Qw}var eS,LI;function Nme(){if(LI)return eS;LI=1;var t=u0(),e=SU(),n=Cme(),r=Eme(),i=Bu(),s=_n(),o=Pu(),l=Ph(),u=1,d="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype,b=m.hasOwnProperty;function x(w,S,C,T,E,N){var A=s(w),_=s(S),O=A?f:i(w),R=_?f:i(S);O=O==d?p:O,R=R==d?p:R;var L=O==p,I=R==p,F=O==R;if(F&&o(w)){if(!o(S))return!1;A=!0,L=!1}if(F&&!L)return N||(N=new t),A||l(w)?e(w,S,C,T,E,N):n(w,S,O,C,T,E,N);if(!(C&u)){var q=L&&b.call(w,"__wrapped__"),U=I&&b.call(S,"__wrapped__");if(q||U){var P=q?w.value():w,H=U?S.value():S;return N||(N=new t),E(P,H,C,T,N)}}return F?(N||(N=new t),r(w,S,C,T,E,N)):!1}return eS=x,eS}var tS,II;function kU(){if(II)return tS;II=1;var t=Nme(),e=Rs();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,o,n,l)}return tS=n,tS}var nS,PI;function Tme(){if(PI)return nS;PI=1;var t=u0(),e=kU(),n=1,r=2;function i(s,o,l,u){var d=l.length,f=d,p=!u;if(s==null)return!f;for(s=Object(s);d--;){var m=l[d];if(p&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++d<f;){m=l[d];var b=m[0],x=s[b],w=m[1];if(p&&m[2]){if(x===void 0&&!(b in s))return!1}else{var S=new t;if(u)var C=u(x,w,b,s,o,S);if(!(C===void 0?e(w,x,n|r,u,S):C))return!1}}return!0}return nS=i,nS}var rS,BI;function CU(){if(BI)return rS;BI=1;var t=Oi();function e(n){return n===n&&!t(n)}return rS=e,rS}var iS,zI;function Ame(){if(zI)return iS;zI=1;var t=CU(),e=Ra();function n(r){for(var i=e(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,t(l)]}return i}return iS=n,iS}var sS,VI;function EU(){if(VI)return sS;VI=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return sS=t,sS}var oS,qI;function Mme(){if(qI)return oS;qI=1;var t=Tme(),e=Ame(),n=EU();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return oS=r,oS}var aS,FI;function zu(){if(FI)return aS;FI=1;var t=Wl(),e=Rs(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return aS=r,aS}var lS,HI;function QT(){if(HI)return lS;HI=1;var t=_n(),e=zu(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return lS=i,lS}var cS,UI;function _me(){if(UI)return cS;UI=1;var t=qT(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,cS=n,cS}var uS,$I;function Dme(){if($I)return uS;$I=1;var t=_me(),e=500;function n(r){var i=t(r,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return uS=n,uS}var dS,GI;function Rme(){if(GI)return dS;GI=1;var t=Dme(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return dS=r,dS}var fS,WI;function b0(){if(WI)return fS;WI=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return fS=t,fS}var hS,KI;function jme(){if(KI)return hS;KI=1;var t=Iu(),e=b0(),n=_n(),r=zu(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return hS=o,hS}var pS,YI;function NU(){if(YI)return pS;YI=1;var t=jme();function e(n){return n==null?"":t(n)}return pS=e,pS}var mS,XI;function x0(){if(XI)return mS;XI=1;var t=_n(),e=QT(),n=Rme(),r=NU();function i(s,o){return t(s)?s:e(s,o)?[s]:n(r(s))}return mS=i,mS}var gS,ZI;function Bh(){if(ZI)return gS;ZI=1;var t=zu();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return gS=e,gS}var yS,JI;function v0(){if(JI)return yS;JI=1;var t=x0(),e=Bh();function n(r,i){i=t(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[e(i[s++])];return s&&s==o?r:void 0}return yS=n,yS}var bS,QI;function Ome(){if(QI)return bS;QI=1;var t=v0();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return bS=e,bS}var xS,e5;function Lme(){if(e5)return xS;e5=1;function t(e,n){return e!=null&&n in Object(e)}return xS=t,xS}var vS,t5;function TU(){if(t5)return vS;t5=1;var t=x0(),e=Ih(),n=_n(),r=h0(),i=HT(),s=Bh();function o(l,u,d){u=t(u,l);for(var f=-1,p=u.length,m=!1;++f<p;){var b=s(u[f]);if(!(m=l!=null&&d(l,b)))break;l=l[b]}return m||++f!=p?m:(p=l==null?0:l.length,!!p&&i(p)&&r(b,p)&&(n(l)||e(l)))}return vS=o,vS}var wS,n5;function AU(){if(n5)return wS;n5=1;var t=Lme(),e=TU();function n(r,i){return r!=null&&e(r,i,t)}return wS=n,wS}var SS,r5;function Ime(){if(r5)return SS;r5=1;var t=kU(),e=Ome(),n=AU(),r=QT(),i=CU(),s=EU(),o=Bh(),l=1,u=2;function d(f,p){return r(f)&&i(p)?s(o(f),p):function(m){var b=e(m,f);return b===void 0&&b===p?n(m,f):t(p,b,l|u)}}return SS=d,SS}var kS,i5;function MU(){if(i5)return kS;i5=1;function t(e){return function(n){return n?.[e]}}return kS=t,kS}var CS,s5;function Pme(){if(s5)return CS;s5=1;var t=v0();function e(n){return function(r){return t(r,n)}}return CS=e,CS}var ES,o5;function Bme(){if(o5)return ES;o5=1;var t=MU(),e=Pme(),n=QT(),r=Bh();function i(s){return n(s)?t(r(s)):e(s)}return ES=i,ES}var NS,a5;function yo(){if(a5)return NS;a5=1;var t=Mme(),e=Ime(),n=Xl(),r=_n(),i=Bme();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return NS=s,NS}var TS,l5;function _U(){if(l5)return TS;l5=1;var t=oU(),e=xme(),n=yo(),r=_n();function i(s,o){var l=r(s)?t:e;return l(s,n(o,3))}return TS=i,TS}var AS,c5;function zme(){if(c5)return AS;c5=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return AS=n,AS}var MS,u5;function DU(){if(u5)return MS;u5=1;var t=zme(),e=TU();function n(r,i){return r!=null&&e(r,i,t)}return MS=n,MS}var _S,d5;function Vme(){if(d5)return _S;d5=1;var t=$T(),e=Bu(),n=Ih(),r=_n(),i=go(),s=Pu(),o=m0(),l=Ph(),u="[object Map]",d="[object Set]",f=Object.prototype,p=f.hasOwnProperty;function m(b){if(b==null)return!0;if(i(b)&&(r(b)||typeof b=="string"||typeof b.splice=="function"||s(b)||l(b)||n(b)))return!b.length;var x=e(b);if(x==u||x==d)return!b.size;if(o(b))return!t(b).length;for(var w in b)if(p.call(b,w))return!1;return!0}return _S=m,_S}var DS,f5;function RU(){if(f5)return DS;f5=1;function t(e){return e===void 0}return DS=t,DS}var RS,h5;function jU(){if(h5)return RS;h5=1;var t=y0(),e=go();function n(r,i){var s=-1,o=e(r)?Array(r.length):[];return t(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return RS=n,RS}var jS,p5;function OU(){if(p5)return jS;p5=1;var t=b0(),e=yo(),n=jU(),r=_n();function i(s,o){var l=r(s)?t:n;return l(s,e(o,3))}return jS=i,jS}var OS,m5;function qme(){if(m5)return OS;m5=1;function t(e,n,r,i){var s=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++s]);++s<o;)r=n(r,e[s],s,e);return r}return OS=t,OS}var LS,g5;function Fme(){if(g5)return LS;g5=1;function t(e,n,r,i,s){return s(e,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return LS=t,LS}var IS,y5;function LU(){if(y5)return IS;y5=1;var t=qme(),e=y0(),n=yo(),r=Fme(),i=_n();function s(o,l,u){var d=i(o)?t:r,f=arguments.length<3;return d(o,n(l,4),u,f,e)}return IS=s,IS}var PS,b5;function Hme(){if(b5)return PS;b5=1;var t=Wl(),e=_n(),n=Rs(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return PS=i,PS}var BS,x5;function Ume(){if(x5)return BS;x5=1;var t=MU(),e=t("length");return BS=e,BS}var zS,v5;function $me(){if(v5)return zS;v5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function u(d){return l.test(d)}return zS=u,zS}var VS,w5;function Gme(){if(w5)return VS;w5=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",x=d+"?",w="["+s+"]?",S="(?:"+b+"(?:"+[f,p,m].join("|")+")"+w+x+")*",C=w+x+S,T="(?:"+[f+l+"?",l,p,m,o].join("|")+")",E=RegExp(u+"(?="+u+")|"+T+C,"g");function N(A){for(var _=E.lastIndex=0;E.test(A);)++_;return _}return VS=N,VS}var qS,S5;function Wme(){if(S5)return qS;S5=1;var t=Ume(),e=$me(),n=Gme();function r(i){return e(i)?n(i):t(i)}return qS=r,qS}var FS,k5;function Kme(){if(k5)return FS;k5=1;var t=$T(),e=Bu(),n=go(),r=Hme(),i=Wme(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=e(u);return d==s||d==o?u.size:t(u).length}return FS=l,FS}var HS,C5;function Yme(){if(C5)return HS;C5=1;var t=FT(),e=pU(),n=ZT(),r=yo(),i=g0(),s=_n(),o=Pu(),l=Oh(),u=Oi(),d=Ph();function f(p,m,b){var x=s(p),w=x||o(p)||d(p);if(m=r(m,4),b==null){var S=p&&p.constructor;w?b=x?new S:[]:u(p)?b=l(S)?e(i(p)):{}:b={}}return(w?t:n)(p,function(C,T,E){return m(b,C,T,E)}),b}return HS=f,HS}var US,E5;function Xme(){if(E5)return US;E5=1;var t=Iu(),e=Ih(),n=_n(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return US=i,US}var $S,N5;function eA(){if(N5)return $S;N5=1;var t=WT(),e=Xme();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=e),l||(l=[]);++u<d;){var f=r[u];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return $S=n,$S}var GS,T5;function Zme(){if(T5)return GS;T5=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return GS=t,GS}var WS,A5;function IU(){if(A5)return WS;A5=1;var t=Zme(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=e(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),t(r,this,f)}}return WS=n,WS}var KS,M5;function Jme(){if(M5)return KS;M5=1;var t=YT(),e=tU(),n=Xl(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return KS=r,KS}var YS,_5;function Qme(){if(_5)return YS;_5=1;var t=800,e=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=e-(l-o);if(o=l,u>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return YS=r,YS}var XS,D5;function PU(){if(D5)return XS;D5=1;var t=Jme(),e=Qme(),n=e(t);return XS=n,XS}var ZS,R5;function w0(){if(R5)return ZS;R5=1;var t=Xl(),e=IU(),n=PU();function r(i,s){return n(e(i,s,t),i+"")}return ZS=r,ZS}var JS,j5;function BU(){if(j5)return JS;j5=1;function t(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return JS=t,JS}var QS,O5;function ege(){if(O5)return QS;O5=1;function t(e){return e!==e}return QS=t,QS}var ek,L5;function tge(){if(L5)return ek;L5=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return ek=t,ek}var tk,I5;function nge(){if(I5)return tk;I5=1;var t=BU(),e=ege(),n=tge();function r(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return tk=r,tk}var nk,P5;function rge(){if(P5)return nk;P5=1;var t=nge();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return nk=e,nk}var rk,B5;function ige(){if(B5)return rk;B5=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return rk=t,rk}var ik,z5;function sge(){if(z5)return ik;z5=1;function t(){}return ik=t,ik}var sk,V5;function oge(){if(V5)return sk;V5=1;var t=dU(),e=sge(),n=JT(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return sk=i,sk}var ok,q5;function age(){if(q5)return ok;q5=1;var t=vU(),e=rge(),n=ige(),r=wU(),i=oge(),s=JT(),o=200;function l(u,d,f){var p=-1,m=e,b=u.length,x=!0,w=[],S=w;if(f)x=!1,m=n;else if(b>=o){var C=d?null:i(u);if(C)return s(C);x=!1,m=r,S=new t}else S=d?[]:w;e:for(;++p<b;){var T=u[p],E=d?d(T):T;if(T=f||T!==0?T:0,x&&E===E){for(var N=S.length;N--;)if(S[N]===E)continue e;d&&S.push(E),w.push(T)}else m(S,E,f)||(S!==w&&S.push(E),w.push(T))}return w}return ok=l,ok}var ak,F5;function zU(){if(F5)return ak;F5=1;var t=go(),e=Rs();function n(r){return e(r)&&t(r)}return ak=n,ak}var lk,H5;function lge(){if(H5)return lk;H5=1;var t=eA(),e=w0(),n=age(),r=zU(),i=e(function(s){return n(t(s,1,r,!0))});return lk=i,lk}var ck,U5;function cge(){if(U5)return ck;U5=1;var t=b0();function e(n,r){return t(r,function(i){return n[i]})}return ck=e,ck}var uk,$5;function VU(){if($5)return uk;$5=1;var t=cge(),e=Ra();function n(r){return r==null?[]:t(r,e(r))}return uk=n,uk}var dk,G5;function Li(){if(G5)return dk;G5=1;var t;if(typeof zT=="function")try{t={clone:gme(),constant:YT(),each:xU(),filter:_U(),has:DU(),isArray:_n(),isEmpty:Vme(),isFunction:Oh(),isUndefined:RU(),keys:Ra(),map:OU(),reduce:LU(),size:Kme(),transform:Yme(),union:lge(),values:VU()}}catch{}return t||(t=window._),dk=t,dk}var fk,W5;function tA(){if(W5)return fk;W5=1;var t=Li();fk=i;var e="\0",n="\0",r="";function i(f){this._isDirected=t.has(f,"directed")?f.directed:!0,this._isMultigraph=t.has(f,"multigraph")?f.multigraph:!1,this._isCompound=t.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var f=this;return t.filter(this.nodes(),function(p){return t.isEmpty(f._in[p])})},i.prototype.sinks=function(){var f=this;return t.filter(this.nodes(),function(p){return t.isEmpty(f._out[p])})},i.prototype.setNodes=function(f,p){var m=arguments,b=this;return t.each(f,function(x){m.length>1?b.setNode(x,p):b.setNode(x)}),this},i.prototype.setNode=function(f,p){return t.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=p),this):(this._nodes[f]=arguments.length>1?p:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return t.has(this._nodes,f)},i.prototype.removeNode=function(f){var p=this;if(t.has(this._nodes,f)){var m=function(b){p.removeEdge(p._edgeObjs[b])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],t.each(this.children(f),function(b){p.setParent(b)}),delete this._children[f]),t.each(t.keys(this._in[f]),m),delete this._in[f],delete this._preds[f],t.each(t.keys(this._out[f]),m),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(p))p=n;else{p+="";for(var m=p;!t.isUndefined(m);m=this.parent(m))if(m===f)throw new Error("Setting "+p+" as parent of "+f+" would create a cycle");this.setNode(p)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=p,this._children[p][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var p=this._parent[f];if(p!==n)return p}},i.prototype.children=function(f){if(t.isUndefined(f)&&(f=n),this._isCompound){var p=this._children[f];if(p)return t.keys(p)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var p=this._preds[f];if(p)return t.keys(p)},i.prototype.successors=function(f){var p=this._sucs[f];if(p)return t.keys(p)},i.prototype.neighbors=function(f){var p=this.predecessors(f);if(p)return t.union(p,this.successors(f))},i.prototype.isLeaf=function(f){var p;return this.isDirected()?p=this.successors(f):p=this.neighbors(f),p.length===0},i.prototype.filterNodes=function(f){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;t.each(this._nodes,function(w,S){f(S)&&p.setNode(S,w)}),t.each(this._edgeObjs,function(w){p.hasNode(w.v)&&p.hasNode(w.w)&&p.setEdge(w,m.edge(w))});var b={};function x(w){var S=m.parent(w);return S===void 0||p.hasNode(S)?(b[w]=S,S):S in b?b[S]:x(S)}return this._isCompound&&t.each(p.nodes(),function(w){p.setParent(w,x(w))}),p},i.prototype.setDefaultEdgeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(f,p){var m=this,b=arguments;return t.reduce(f,function(x,w){return b.length>1?m.setEdge(x,w,p):m.setEdge(x,w),w}),this},i.prototype.setEdge=function(){var f,p,m,b,x=!1,w=arguments[0];typeof w=="object"&&w!==null&&"v"in w?(f=w.v,p=w.w,m=w.name,arguments.length===2&&(b=arguments[1],x=!0)):(f=w,p=arguments[1],m=arguments[3],arguments.length>2&&(b=arguments[2],x=!0)),f=""+f,p=""+p,t.isUndefined(m)||(m=""+m);var S=l(this._isDirected,f,p,m);if(t.has(this._edgeLabels,S))return x&&(this._edgeLabels[S]=b),this;if(!t.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(p),this._edgeLabels[S]=x?b:this._defaultEdgeLabelFn(f,p,m);var C=u(this._isDirected,f,p,m);return f=C.v,p=C.w,Object.freeze(C),this._edgeObjs[S]=C,s(this._preds[p],f),s(this._sucs[f],p),this._in[p][S]=C,this._out[f][S]=C,this._edgeCount++,this},i.prototype.edge=function(f,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,m);return this._edgeLabels[b]},i.prototype.hasEdge=function(f,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,m);return t.has(this._edgeLabels,b)},i.prototype.removeEdge=function(f,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,m),x=this._edgeObjs[b];return x&&(f=x.v,p=x.w,delete this._edgeLabels[b],delete this._edgeObjs[b],o(this._preds[p],f),o(this._sucs[f],p),delete this._in[p][b],delete this._out[f][b],this._edgeCount--),this},i.prototype.inEdges=function(f,p){var m=this._in[f];if(m){var b=t.values(m);return p?t.filter(b,function(x){return x.v===p}):b}},i.prototype.outEdges=function(f,p){var m=this._out[f];if(m){var b=t.values(m);return p?t.filter(b,function(x){return x.w===p}):b}},i.prototype.nodeEdges=function(f,p){var m=this.inEdges(f,p);if(m)return m.concat(this.outEdges(f,p))};function s(f,p){f[p]?f[p]++:f[p]=1}function o(f,p){--f[p]||delete f[p]}function l(f,p,m,b){var x=""+p,w=""+m;if(!f&&x>w){var S=x;x=w,w=S}return x+r+w+r+(t.isUndefined(b)?e:b)}function u(f,p,m,b){var x=""+p,w=""+m;if(!f&&x>w){var S=x;x=w,w=S}var C={v:x,w};return b&&(C.name=b),C}function d(f,p){return l(f,p.v,p.w,p.name)}return fk}var hk,K5;function uge(){return K5||(K5=1,hk="2.1.8"),hk}var pk,Y5;function dge(){return Y5||(Y5=1,pk={Graph:tA(),version:uge()}),pk}var mk,X5;function fge(){if(X5)return mk;X5=1;var t=Li(),e=tA();mk={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return t.isUndefined(o.graph())||(l.value=t.clone(o.graph())),l}function r(o){return t.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),f={v:l};return t.isUndefined(u)||(f.value=u),t.isUndefined(d)||(f.parent=d),f})}function i(o){return t.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return t.isUndefined(l.name)||(d.name=l.name),t.isUndefined(u)||(d.value=u),d})}function s(o){var l=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),t.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return mk}var gk,Z5;function hge(){if(Z5)return gk;Z5=1;var t=Li();gk=e;function e(n){var r={},i=[],s;function o(l){t.has(r,l)||(r[l]=!0,s.push(l),t.each(n.successors(l),o),t.each(n.predecessors(l),o))}return t.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return gk}var yk,J5;function qU(){if(J5)return yk;J5=1;var t=Li();yk=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},e.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},yk}var bk,Q5;function FU(){if(Q5)return bk;Q5=1;var t=Li(),e=qU();bk=r;var n=t.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},f=new e,p,m,b=function(x){var w=x.v!==p?x.v:x.w,S=d[w],C=l(x),T=m.distance+C;if(C<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+C);T<S.distance&&(S.distance=T,S.predecessor=p,f.decrease(w,T))};for(s.nodes().forEach(function(x){var w=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:w},f.add(x,w)});f.size()>0&&(p=f.removeMin(),m=d[p],m.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(b);return d}return bk}var xk,eP;function pge(){if(eP)return xk;eP=1;var t=FU(),e=Li();xk=n;function n(r,i,s){return e.transform(r.nodes(),function(o,l){o[l]=t(r,l,i,s)},{})}return xk}var vk,tP;function HU(){if(tP)return vk;tP=1;var t=Li();vk=e;function e(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(m){t.has(s,m)?s[m].onStack&&(d.lowlink=Math.min(d.lowlink,s[m].index)):(l(m),d.lowlink=Math.min(d.lowlink,s[m].lowlink))}),d.lowlink===d.index){var f=[],p;do p=i.pop(),s[p].onStack=!1,f.push(p);while(u!==p);o.push(f)}}return n.nodes().forEach(function(u){t.has(s,u)||l(u)}),o}return vk}var wk,nP;function mge(){if(nP)return wk;nP=1;var t=Li(),e=HU();wk=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return wk}var Sk,rP;function gge(){if(rP)return Sk;rP=1;var t=Li();Sk=n;var e=t.constant(1);function n(i,s,o){return r(i,s||e,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(f){d!==f&&(l[d][f]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(f){var p=f.v===d?f.w:f.v,m=s(f);l[d][p]={distance:m,predecessor:d}})}),u.forEach(function(d){var f=l[d];u.forEach(function(p){var m=l[p];u.forEach(function(b){var x=m[d],w=f[b],S=m[b],C=x.distance+w.distance;C<S.distance&&(S.distance=C,S.predecessor=w.predecessor)})})}),l}return Sk}var kk,iP;function UU(){if(iP)return kk;iP=1;var t=Li();kk=e,e.CycleException=n;function e(r){var i={},s={},o=[];function l(u){if(t.has(s,u))throw new n;t.has(i,u)||(s[u]=!0,i[u]=!0,t.each(r.predecessors(u),l),delete s[u],o.push(u))}if(t.each(r.sinks(),l),t.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,kk}var Ck,sP;function yge(){if(sP)return Ck;sP=1;var t=UU();Ck=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return Ck}var Ek,oP;function $U(){if(oP)return Ek;oP=1;var t=Li();Ek=e;function e(r,i,s){t.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return t.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){t.has(o,i)||(o[i]=!0,s||u.push(i),t.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return Ek}var Nk,aP;function bge(){if(aP)return Nk;aP=1;var t=$U();Nk=e;function e(n,r){return t(n,r,"post")}return Nk}var Tk,lP;function xge(){if(lP)return Tk;lP=1;var t=$U();Tk=e;function e(n,r){return t(n,r,"pre")}return Tk}var Ak,cP;function vge(){if(cP)return Ak;cP=1;var t=Li(),e=tA(),n=qU();Ak=r;function r(i,s){var o=new e,l={},u=new n,d;function f(m){var b=m.v===d?m.w:m.v,x=u.priority(b);if(x!==void 0){var w=s(m);w<x&&(l[b]=d,u.decrease(b,w))}}if(i.nodeCount()===0)return o;t.each(i.nodes(),function(m){u.add(m,Number.POSITIVE_INFINITY),o.setNode(m)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),t.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(f)}return o}return Ak}var Mk,uP;function wge(){return uP||(uP=1,Mk={components:hge(),dijkstra:FU(),dijkstraAll:pge(),findCycles:mge(),floydWarshall:gge(),isAcyclic:yge(),postorder:bge(),preorder:xge(),prim:vge(),tarjan:HU(),topsort:UU()}),Mk}var _k,dP;function Sge(){if(dP)return _k;dP=1;var t=dge();return _k={Graph:t.Graph,json:fge(),alg:wge(),version:t.version},_k}var Dk,fP;function Zi(){if(fP)return Dk;fP=1;var t;if(typeof zT=="function")try{t=Sge()}catch{}return t||(t=window.graphlib),Dk=t,Dk}var Rk,hP;function kge(){if(hP)return Rk;hP=1;var t=gU(),e=1,n=4;function r(i){return t(i,e|n)}return Rk=r,Rk}var jk,pP;function S0(){if(pP)return jk;pP=1;var t=Lu(),e=go(),n=h0(),r=Oi();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?e(l)&&n(o,l.length):u=="string"&&o in l)?t(l[o],s):!1}return jk=i,jk}var Ok,mP;function Cge(){if(mP)return Ok;mP=1;var t=w0(),e=Lu(),n=S0(),r=Yl(),i=Object.prototype,s=i.hasOwnProperty,o=t(function(l,u){l=Object(l);var d=-1,f=u.length,p=f>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(f=1);++d<f;)for(var m=u[d],b=r(m),x=-1,w=b.length;++x<w;){var S=b[x],C=l[S];(C===void 0||e(C,i[S])&&!s.call(l,S))&&(l[S]=m[S])}return l});return Ok=o,Ok}var Lk,gP;function Ege(){if(gP)return Lk;gP=1;var t=yo(),e=go(),n=Ra();function r(i){return function(s,o,l){var u=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var f=i(s,o,l);return f>-1?u[d?s[f]:f]:void 0}}return Lk=r,Lk}var Ik,yP;function Nge(){if(yP)return Ik;yP=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return Ik=e,Ik}var Pk,bP;function Tge(){if(bP)return Pk;bP=1;var t=Nge(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return Pk=n,Pk}var Bk,xP;function Age(){if(xP)return Bk;xP=1;var t=Tge(),e=Oi(),n=zu(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return Bk=u,Bk}var zk,vP;function GU(){if(vP)return zk;vP=1;var t=Age(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return zk=r,zk}var Vk,wP;function Mge(){if(wP)return Vk;wP=1;var t=GU();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return Vk=e,Vk}var qk,SP;function _ge(){if(SP)return qk;SP=1;var t=BU(),e=yo(),n=Mge(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),t(s,e(o,3),d)}return qk=i,qk}var Fk,kP;function Dge(){if(kP)return Fk;kP=1;var t=Ege(),e=_ge(),n=t(e);return Fk=n,Fk}var Hk,CP;function WU(){if(CP)return Hk;CP=1;var t=eA();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return Hk=e,Hk}var Uk,EP;function Rge(){if(EP)return Uk;EP=1;var t=XT(),e=yU(),n=Yl();function r(i,s){return i==null?i:t(i,e(s),n)}return Uk=r,Uk}var $k,NP;function jge(){if(NP)return $k;NP=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return $k=t,$k}var Gk,TP;function Oge(){if(TP)return Gk;TP=1;var t=d0(),e=ZT(),n=yo();function r(i,s){var o={};return s=n(s,3),e(i,function(l,u,d){t(o,u,s(l,u,d))}),o}return Gk=r,Gk}var Wk,AP;function nA(){if(AP)return Wk;AP=1;var t=zu();function e(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!t(u):i(u,d)))var d=u,f=l}return f}return Wk=e,Wk}var Kk,MP;function Lge(){if(MP)return Kk;MP=1;function t(e,n){return e>n}return Kk=t,Kk}var Yk,_P;function Ige(){if(_P)return Yk;_P=1;var t=nA(),e=Lge(),n=Xl();function r(i){return i&&i.length?t(i,n,e):void 0}return Yk=r,Yk}var Xk,DP;function KU(){if(DP)return Xk;DP=1;var t=d0(),e=Lu();function n(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&t(r,i,s)}return Xk=n,Xk}var Zk,RP;function Pge(){if(RP)return Zk;RP=1;var t=Wl(),e=g0(),n=Rs(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(f){if(!n(f)||t(f)!=r)return!1;var p=e(f);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return Zk=d,Zk}var Jk,jP;function YU(){if(jP)return Jk;jP=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return Jk=t,Jk}var Qk,OP;function Bge(){if(OP)return Qk;OP=1;var t=Lh(),e=Yl();function n(r){return t(r,e(r))}return Qk=n,Qk}var eC,LP;function zge(){if(LP)return eC;LP=1;var t=KU(),e=iU(),n=hU(),r=sU(),i=mU(),s=Ih(),o=_n(),l=zU(),u=Pu(),d=Oh(),f=Oi(),p=Pge(),m=Ph(),b=YU(),x=Bge();function w(S,C,T,E,N,A,_){var O=b(S,T),R=b(C,T),L=_.get(R);if(L){t(S,T,L);return}var I=A?A(O,R,T+"",S,C,_):void 0,F=I===void 0;if(F){var q=o(R),U=!q&&u(R),P=!q&&!U&&m(R);I=R,q||U||P?o(O)?I=O:l(O)?I=r(O):U?(F=!1,I=e(R,!0)):P?(F=!1,I=n(R,!0)):I=[]:p(R)||s(R)?(I=O,s(O)?I=x(O):(!f(O)||d(O))&&(I=i(R))):F=!1}F&&(_.set(R,I),N(I,R,E,A,_),_.delete(R)),t(S,T,I)}return eC=w,eC}var tC,IP;function Vge(){if(IP)return tC;IP=1;var t=u0(),e=KU(),n=XT(),r=zge(),i=Oi(),s=Yl(),o=YU();function l(u,d,f,p,m){u!==d&&n(d,function(b,x){if(m||(m=new t),i(b))r(u,d,x,f,l,p,m);else{var w=p?p(o(u,x),b,x+"",u,d,m):void 0;w===void 0&&(w=b),e(u,x,w)}},s)}return tC=l,tC}var nC,PP;function qge(){if(PP)return nC;PP=1;var t=w0(),e=S0();function n(r){return t(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&e(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var f=s[o];f&&r(i,f,o,u)}return i})}return nC=n,nC}var rC,BP;function Fge(){if(BP)return rC;BP=1;var t=Vge(),e=qge(),n=e(function(r,i,s){t(r,i,s)});return rC=n,rC}var iC,zP;function XU(){if(zP)return iC;zP=1;function t(e,n){return e<n}return iC=t,iC}var sC,VP;function Hge(){if(VP)return sC;VP=1;var t=nA(),e=XU(),n=Xl();function r(i){return i&&i.length?t(i,n,e):void 0}return sC=r,sC}var oC,qP;function Uge(){if(qP)return oC;qP=1;var t=nA(),e=yo(),n=XU();function r(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return oC=r,oC}var aC,FP;function $ge(){if(FP)return aC;FP=1;var t=Qi(),e=function(){return t.Date.now()};return aC=e,aC}var lC,HP;function Gge(){if(HP)return lC;HP=1;var t=f0(),e=x0(),n=h0(),r=Oi(),i=Bh();function s(o,l,u,d){if(!r(o))return o;l=e(l,o);for(var f=-1,p=l.length,m=p-1,b=o;b!=null&&++f<p;){var x=i(l[f]),w=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(f!=m){var S=b[x];w=d?d(S,x,b):void 0,w===void 0&&(w=r(S)?S:n(l[f+1])?[]:{})}t(b,x,w),b=b[x]}return o}return lC=s,lC}var cC,UP;function Wge(){if(UP)return cC;UP=1;var t=v0(),e=Gge(),n=x0();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var f=s[l],p=t(i,f);o(p,f)&&e(d,n(f,i),p)}return d}return cC=r,cC}var uC,$P;function Kge(){if($P)return uC;$P=1;var t=Wge(),e=AU();function n(r,i){return t(r,i,function(s,o){return e(r,o)})}return uC=n,uC}var dC,GP;function Yge(){if(GP)return dC;GP=1;var t=WU(),e=IU(),n=PU();function r(i){return n(e(i,void 0,t),i+"")}return dC=r,dC}var fC,WP;function Xge(){if(WP)return fC;WP=1;var t=Kge(),e=Yge(),n=e(function(r,i){return r==null?{}:t(r,i)});return fC=n,fC}var hC,KP;function Zge(){if(KP)return hC;KP=1;var t=Math.ceil,e=Math.max;function n(r,i,s,o){for(var l=-1,u=e(t((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return hC=n,hC}var pC,YP;function Jge(){if(YP)return pC;YP=1;var t=Zge(),e=S0(),n=GU();function r(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return pC=r,pC}var mC,XP;function Qge(){if(XP)return mC;XP=1;var t=Jge(),e=t();return mC=e,mC}var gC,ZP;function eye(){if(ZP)return gC;ZP=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return gC=t,gC}var yC,JP;function tye(){if(JP)return yC;JP=1;var t=zu();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=t(n),u=r!==void 0,d=r===null,f=r===r,p=t(r);if(!d&&!p&&!l&&n>r||l&&u&&f&&!d&&!p||s&&u&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!f)return-1}return 0}return yC=e,yC}var bC,QP;function nye(){if(QP)return bC;QP=1;var t=tye();function e(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-r.index}return bC=e,bC}var xC,e6;function rye(){if(e6)return xC;e6=1;var t=b0(),e=v0(),n=yo(),r=jU(),i=eye(),s=p0(),o=nye(),l=Xl(),u=_n();function d(f,p,m){p.length?p=t(p,function(w){return u(w)?function(S){return e(S,w.length===1?w[0]:w)}:w}):p=[l];var b=-1;p=t(p,s(n));var x=r(f,function(w,S,C){var T=t(p,function(E){return E(w)});return{criteria:T,index:++b,value:w}});return i(x,function(w,S){return o(w,S,m)})}return xC=d,xC}var vC,t6;function iye(){if(t6)return vC;t6=1;var t=eA(),e=rye(),n=w0(),r=S0(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return vC=i,vC}var wC,n6;function sye(){if(n6)return wC;n6=1;var t=NU(),e=0;function n(r){var i=++e;return t(r)+i}return wC=n,wC}var SC,r6;function oye(){if(r6)return SC;r6=1;function t(e,n,r){for(var i=-1,s=e.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,e[i],u)}return l}return SC=t,SC}var kC,i6;function aye(){if(i6)return kC;i6=1;var t=f0(),e=oye();function n(r,i){return e(r||[],i||[],t)}return kC=n,kC}var CC,s6;function Kt(){if(s6)return CC;s6=1;var t;if(typeof zT=="function")try{t={cloneDeep:kge(),constant:YT(),defaults:Cge(),each:xU(),filter:_U(),find:Dge(),flatten:WU(),forEach:bU(),forIn:Rge(),has:DU(),isUndefined:RU(),last:jge(),map:OU(),mapValues:Oge(),max:Ige(),merge:Fge(),min:Hge(),minBy:Uge(),now:$ge(),pick:Xge(),range:Qge(),reduce:LU(),sortBy:iye(),uniqueId:sye(),values:VU(),zipObject:aye()}}catch{}return t||(t=window._),CC=t,CC}var EC,o6;function lye(){if(o6)return EC;o6=1,EC=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return EC}var NC,a6;function cye(){if(a6)return NC;a6=1;var t=Kt(),e=Zi().Graph,n=lye();NC=i;var r=t.constant(1);function i(d,f){if(d.nodeCount()<=1)return[];var p=l(d,f||r),m=s(p.graph,p.buckets,p.zeroIdx);return t.flatten(t.map(m,function(b){return d.outEdges(b.v,b.w)}),!0)}function s(d,f,p){for(var m=[],b=f[f.length-1],x=f[0],w;d.nodeCount();){for(;w=x.dequeue();)o(d,f,p,w);for(;w=b.dequeue();)o(d,f,p,w);if(d.nodeCount()){for(var S=f.length-2;S>0;--S)if(w=f[S].dequeue(),w){m=m.concat(o(d,f,p,w,!0));break}}}return m}function o(d,f,p,m,b){var x=b?[]:void 0;return t.forEach(d.inEdges(m.v),function(w){var S=d.edge(w),C=d.node(w.v);b&&x.push({v:w.v,w:w.w}),C.out-=S,u(f,p,C)}),t.forEach(d.outEdges(m.v),function(w){var S=d.edge(w),C=w.w,T=d.node(C);T.in-=S,u(f,p,T)}),d.removeNode(m.v),x}function l(d,f){var p=new e,m=0,b=0;t.forEach(d.nodes(),function(S){p.setNode(S,{v:S,in:0,out:0})}),t.forEach(d.edges(),function(S){var C=p.edge(S.v,S.w)||0,T=f(S),E=C+T;p.setEdge(S.v,S.w,E),b=Math.max(b,p.node(S.v).out+=T),m=Math.max(m,p.node(S.w).in+=T)});var x=t.range(b+m+3).map(function(){return new n}),w=m+1;return t.forEach(p.nodes(),function(S){u(x,w,p.node(S))}),{graph:p,buckets:x,zeroIdx:w}}function u(d,f,p){p.out?p.in?d[p.out-p.in+f].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return NC}var TC,l6;function uye(){if(l6)return TC;l6=1;var t=Kt(),e=cye();TC={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?e(s,l(s)):r(s);t.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,t.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(f){t.has(u,f)||(u[f]=!0,l[f]=!0,t.forEach(s.outEdges(f),function(p){t.has(l,p.w)?o.push(p):d(p.w)}),delete l[f])}return t.forEach(s.nodes(),d),o}function i(s){t.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return TC}var AC,c6;function qr(){if(c6)return AC;c6=1;var t=Kt(),e=Zi().Graph;AC={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:f,addBorderNode:p,maxRank:m,partition:b,time:x,notime:w};function n(S,C,T,E){var N;do N=t.uniqueId(E);while(S.hasNode(N));return T.dummy=C,S.setNode(N,T),N}function r(S){var C=new e().setGraph(S.graph());return t.forEach(S.nodes(),function(T){C.setNode(T,S.node(T))}),t.forEach(S.edges(),function(T){var E=C.edge(T.v,T.w)||{weight:0,minlen:1},N=S.edge(T);C.setEdge(T.v,T.w,{weight:E.weight+N.weight,minlen:Math.max(E.minlen,N.minlen)})}),C}function i(S){var C=new e({multigraph:S.isMultigraph()}).setGraph(S.graph());return t.forEach(S.nodes(),function(T){S.children(T).length||C.setNode(T,S.node(T))}),t.forEach(S.edges(),function(T){C.setEdge(T,S.edge(T))}),C}function s(S){var C=t.map(S.nodes(),function(T){var E={};return t.forEach(S.outEdges(T),function(N){E[N.w]=(E[N.w]||0)+S.edge(N).weight}),E});return t.zipObject(S.nodes(),C)}function o(S){var C=t.map(S.nodes(),function(T){var E={};return t.forEach(S.inEdges(T),function(N){E[N.v]=(E[N.v]||0)+S.edge(N).weight}),E});return t.zipObject(S.nodes(),C)}function l(S,C){var T=S.x,E=S.y,N=C.x-T,A=C.y-E,_=S.width/2,O=S.height/2;if(!N&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,L;return Math.abs(A)*_>Math.abs(N)*O?(A<0&&(O=-O),R=O*N/A,L=O):(N<0&&(_=-_),R=_,L=_*A/N),{x:T+R,y:E+L}}function u(S){var C=t.map(t.range(m(S)+1),function(){return[]});return t.forEach(S.nodes(),function(T){var E=S.node(T),N=E.rank;t.isUndefined(N)||(C[N][E.order]=T)}),C}function d(S){var C=t.min(t.map(S.nodes(),function(T){return S.node(T).rank}));t.forEach(S.nodes(),function(T){var E=S.node(T);t.has(E,"rank")&&(E.rank-=C)})}function f(S){var C=t.min(t.map(S.nodes(),function(A){return S.node(A).rank})),T=[];t.forEach(S.nodes(),function(A){var _=S.node(A).rank-C;T[_]||(T[_]=[]),T[_].push(A)});var E=0,N=S.graph().nodeRankFactor;t.forEach(T,function(A,_){t.isUndefined(A)&&_%N!==0?--E:E&&t.forEach(A,function(O){S.node(O).rank+=E})})}function p(S,C,T,E){var N={width:0,height:0};return arguments.length>=4&&(N.rank=T,N.order=E),n(S,"border",N,C)}function m(S){return t.max(t.map(S.nodes(),function(C){var T=S.node(C).rank;if(!t.isUndefined(T))return T}))}function b(S,C){var T={lhs:[],rhs:[]};return t.forEach(S,function(E){C(E)?T.lhs.push(E):T.rhs.push(E)}),T}function x(S,C){var T=t.now();try{return C()}finally{console.log(S+" time: "+(t.now()-T)+"ms")}}function w(S,C){return C()}return AC}var MC,u6;function dye(){if(u6)return MC;u6=1;var t=Kt(),e=qr();MC={run:n,undo:i};function n(s){s.graph().dummyChains=[],t.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,f=s.node(d).rank,p=o.name,m=s.edge(o),b=m.labelRank;if(f!==u+1){s.removeEdge(o);var x,w,S;for(S=0,++u;u<f;++S,++u)m.points=[],w={width:0,height:0,edgeLabel:m,edgeObj:o,rank:u},x=e.addDummyNode(s,"edge",w,"_d"),u===b&&(w.width=m.width,w.height=m.height,w.dummy="edge-label",w.labelpos=m.labelpos),s.setEdge(l,x,{weight:m.weight},p),S===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:m.weight},p)}}function i(s){t.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return MC}var _C,d6;function ly(){if(d6)return _C;d6=1;var t=Kt();_C={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(t.has(i,o))return l.rank;i[o]=!0;var u=t.min(t.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}t.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return _C}var DC,f6;function ZU(){if(f6)return DC;f6=1;var t=Kt(),e=Zi().Graph,n=ly().slack;DC=r;function r(l){var u=new e({directed:!1}),d=l.nodes()[0],f=l.nodeCount();u.setNode(d,{});for(var p,m;i(u,l)<f;)p=s(u,l),m=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,m);return u}function i(l,u){function d(f){t.forEach(u.nodeEdges(f),function(p){var m=p.v,b=f===m?p.w:m;!l.hasNode(b)&&!n(u,p)&&(l.setNode(b,{}),l.setEdge(f,b,{}),d(b))})}return t.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return t.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){t.forEach(l.nodes(),function(f){u.node(f).rank+=d})}return DC}var RC,h6;function fye(){if(h6)return RC;h6=1;var t=Kt(),e=ZU(),n=ly().slack,r=ly().longestPath,i=Zi().alg.preorder,s=Zi().alg.postorder,o=qr().simplify;RC=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=f,l.leaveEdge=b,l.enterEdge=x,l.exchangeEdges=w;function l(E){E=o(E),r(E);var N=e(E);p(N),u(N,E);for(var A,_;A=b(N);)_=x(N,E,A),w(N,E,A,_)}function u(E,N){var A=s(E,E.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(_){d(E,N,_)})}function d(E,N,A){var _=E.node(A),O=_.parent;E.edge(A,O).cutvalue=f(E,N,A)}function f(E,N,A){var _=E.node(A),O=_.parent,R=!0,L=N.edge(A,O),I=0;return L||(R=!1,L=N.edge(O,A)),I=L.weight,t.forEach(N.nodeEdges(A),function(F){var q=F.v===A,U=q?F.w:F.v;if(U!==O){var P=q===R,H=N.edge(F).weight;if(I+=P?H:-H,C(E,A,U)){var j=E.edge(A,U).cutvalue;I+=P?-j:j}}}),I}function p(E,N){arguments.length<2&&(N=E.nodes()[0]),m(E,{},1,N)}function m(E,N,A,_,O){var R=A,L=E.node(_);return N[_]=!0,t.forEach(E.neighbors(_),function(I){t.has(N,I)||(A=m(E,N,A,I,_))}),L.low=R,L.lim=A++,O?L.parent=O:delete L.parent,A}function b(E){return t.find(E.edges(),function(N){return E.edge(N).cutvalue<0})}function x(E,N,A){var _=A.v,O=A.w;N.hasEdge(_,O)||(_=A.w,O=A.v);var R=E.node(_),L=E.node(O),I=R,F=!1;R.lim>L.lim&&(I=L,F=!0);var q=t.filter(N.edges(),function(U){return F===T(E,E.node(U.v),I)&&F!==T(E,E.node(U.w),I)});return t.minBy(q,function(U){return n(N,U)})}function w(E,N,A,_){var O=A.v,R=A.w;E.removeEdge(O,R),E.setEdge(_.v,_.w,{}),p(E),u(E,N),S(E,N)}function S(E,N){var A=t.find(E.nodes(),function(O){return!N.node(O).parent}),_=i(E,A);_=_.slice(1),t.forEach(_,function(O){var R=E.node(O).parent,L=N.edge(O,R),I=!1;L||(L=N.edge(R,O),I=!0),N.node(O).rank=N.node(R).rank+(I?L.minlen:-L.minlen)})}function C(E,N,A){return E.hasEdge(N,A)}function T(E,N,A){return A.low<=N.lim&&N.lim<=A.lim}return RC}var jC,p6;function hye(){if(p6)return jC;p6=1;var t=ly(),e=t.longestPath,n=ZU(),r=fye();jC=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return jC}var OC,m6;function pye(){if(m6)return OC;m6=1;var t=Kt();OC=e;function e(i){var s=r(i);t.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),f=d.path,p=d.lca,m=0,b=f[m],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(b=f[m])!==p&&i.node(b).maxRank<l.rank;)m++;b===p&&(x=!1)}if(!x){for(;m<f.length-1&&i.node(b=f[m+1]).minRank<=l.rank;)m++;b=f[m]}i.setParent(o,b),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],f=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),m,b;m=o;do m=i.parent(m),u.push(m);while(m&&(s[m].low>f||p>s[m].lim));for(b=m,m=l;(m=i.parent(m))!==b;)d.push(m);return{path:u.concat(d.reverse()),lca:b}}function r(i){var s={},o=0;function l(u){var d=o;t.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return t.forEach(i.children(),l),s}return OC}var LC,g6;function mye(){if(g6)return LC;g6=1;var t=Kt(),e=qr();LC={run:n,cleanup:o};function n(l){var u=e.addDummyNode(l,"root",{},"_root"),d=i(l),f=t.max(t.values(d))-1,p=2*f+1;l.graph().nestingRoot=u,t.forEach(l.edges(),function(b){l.edge(b).minlen*=p});var m=s(l)+1;t.forEach(l.children(),function(b){r(l,u,p,m,f,d,b)}),l.graph().nodeRankFactor=p}function r(l,u,d,f,p,m,b){var x=l.children(b);if(!x.length){b!==u&&l.setEdge(u,b,{weight:0,minlen:d});return}var w=e.addBorderNode(l,"_bt"),S=e.addBorderNode(l,"_bb"),C=l.node(b);l.setParent(w,b),C.borderTop=w,l.setParent(S,b),C.borderBottom=S,t.forEach(x,function(T){r(l,u,d,f,p,m,T);var E=l.node(T),N=E.borderTop?E.borderTop:T,A=E.borderBottom?E.borderBottom:T,_=E.borderTop?f:2*f,O=N!==A?1:p-m[b]+1;l.setEdge(w,N,{weight:_,minlen:O,nestingEdge:!0}),l.setEdge(A,S,{weight:_,minlen:O,nestingEdge:!0})}),l.parent(b)||l.setEdge(u,w,{weight:0,minlen:p+m[b]})}function i(l){var u={};function d(f,p){var m=l.children(f);m&&m.length&&t.forEach(m,function(b){d(b,p+1)}),u[f]=p}return t.forEach(l.children(),function(f){d(f,1)}),u}function s(l){return t.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(l.edges(),function(d){var f=l.edge(d);f.nestingEdge&&l.removeEdge(d)})}return LC}var IC,y6;function gye(){if(y6)return IC;y6=1;var t=Kt(),e=qr();IC=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&t.forEach(l,s),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,f=u.maxRank+1;d<f;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}t.forEach(i.children(),s)}function r(i,s,o,l,u,d){var f={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],m=e.addDummyNode(i,"border",f,o);u[s][d]=m,i.setParent(m,l),p&&i.setEdge(p,m,{weight:1})}return IC}var PC,b6;function yye(){if(b6)return PC;b6=1;var t=Kt();PC={adjust:e,undo:n};function e(d){var f=d.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&r(d)}function n(d){var f=d.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(d),(f==="lr"||f==="rl")&&(l(d),r(d))}function r(d){t.forEach(d.nodes(),function(f){i(d.node(f))}),t.forEach(d.edges(),function(f){i(d.edge(f))})}function i(d){var f=d.width;d.width=d.height,d.height=f}function s(d){t.forEach(d.nodes(),function(f){o(d.node(f))}),t.forEach(d.edges(),function(f){var p=d.edge(f);t.forEach(p.points,o),t.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){t.forEach(d.nodes(),function(f){u(d.node(f))}),t.forEach(d.edges(),function(f){var p=d.edge(f);t.forEach(p.points,u),t.has(p,"x")&&u(p)})}function u(d){var f=d.x;d.x=d.y,d.y=f}return PC}var BC,x6;function bye(){if(x6)return BC;x6=1;var t=Kt();BC=e;function e(n){var r={},i=t.filter(n.nodes(),function(d){return!n.children(d).length}),s=t.max(t.map(i,function(d){return n.node(d).rank})),o=t.map(t.range(s+1),function(){return[]});function l(d){if(!t.has(r,d)){r[d]=!0;var f=n.node(d);o[f.rank].push(d),t.forEach(n.successors(d),l)}}var u=t.sortBy(i,function(d){return n.node(d).rank});return t.forEach(u,l),o}return BC}var zC,v6;function xye(){if(v6)return zC;v6=1;var t=Kt();zC=e;function e(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=t.zipObject(s,t.map(s,function(m,b){return b})),l=t.flatten(t.map(i,function(m){return t.sortBy(t.map(r.outEdges(m),function(b){return{pos:o[b.w],weight:r.edge(b).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var f=t.map(new Array(d),function(){return 0}),p=0;return t.forEach(l.forEach(function(m){var b=m.pos+u;f[b]+=m.weight;for(var x=0;b>0;)b%2&&(x+=f[b+1]),b=b-1>>1,f[b]+=m.weight;p+=m.weight*x})),p}return zC}var VC,w6;function vye(){if(w6)return VC;w6=1;var t=Kt();VC=e;function e(n,r){return t.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=t.reduce(s,function(l,u){var d=n.edge(u),f=n.node(u.v);return{sum:l.sum+d.weight*f.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return VC}var qC,S6;function wye(){if(S6)return qC;S6=1;var t=Kt();qC=e;function e(i,s){var o={};t.forEach(i,function(u,d){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};t.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),t.forEach(s.edges(),function(u){var d=o[u.v],f=o[u.w];!t.isUndefined(d)&&!t.isUndefined(f)&&(f.indegree++,d.out.push(o[u.w]))});var l=t.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(f){f.merged||(t.isUndefined(f.barycenter)||t.isUndefined(d.barycenter)||f.barycenter>=d.barycenter)&&r(d,f)}}function l(d){return function(f){f.in.push(d),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),t.forEach(u.in.reverse(),o(u)),t.forEach(u.out,l(u))}return t.map(t.filter(s,function(d){return!d.merged}),function(d){return t.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return qC}var FC,k6;function Sye(){if(k6)return FC;k6=1;var t=Kt(),e=qr();FC=n;function n(s,o){var l=e.partition(s,function(w){return t.has(w,"barycenter")}),u=l.lhs,d=t.sortBy(l.rhs,function(w){return-w.i}),f=[],p=0,m=0,b=0;u.sort(i(!!o)),b=r(f,d,b),t.forEach(u,function(w){b+=w.vs.length,f.push(w.vs),p+=w.barycenter*w.weight,m+=w.weight,b=r(f,d,b)});var x={vs:t.flatten(f,!0)};return m&&(x.barycenter=p/m,x.weight=m),x}function r(s,o,l){for(var u;o.length&&(u=t.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return FC}var HC,C6;function kye(){if(C6)return HC;C6=1;var t=Kt(),e=vye(),n=wye(),r=Sye();HC=i;function i(l,u,d,f){var p=l.children(u),m=l.node(u),b=m?m.borderLeft:void 0,x=m?m.borderRight:void 0,w={};b&&(p=t.filter(p,function(A){return A!==b&&A!==x}));var S=e(l,p);t.forEach(S,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,f);w[A.v]=_,t.has(_,"barycenter")&&o(A,_)}});var C=n(S,d);s(C,w);var T=r(C,f);if(b&&(T.vs=t.flatten([b,T.vs,x],!0),l.predecessors(b).length)){var E=l.node(l.predecessors(b)[0]),N=l.node(l.predecessors(x)[0]);t.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+E.order+N.order)/(T.weight+2),T.weight+=2}return T}function s(l,u){t.forEach(l,function(d){d.vs=t.flatten(d.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(l,u){t.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return HC}var UC,E6;function Cye(){if(E6)return UC;E6=1;var t=Kt(),e=Zi().Graph;UC=n;function n(i,s,o){var l=r(i),u=new e({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return t.forEach(i.nodes(),function(d){var f=i.node(d),p=i.parent(d);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(d),u.setParent(d,p||l),t.forEach(i[o](d),function(m){var b=m.v===d?m.w:m.v,x=u.edge(b,d),w=t.isUndefined(x)?0:x.weight;u.setEdge(b,d,{weight:i.edge(m).weight+w})}),t.has(f,"minRank")&&u.setNode(d,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=t.uniqueId("_root")););return s}return UC}var $C,N6;function Eye(){if(N6)return $C;N6=1;var t=Kt();$C=e;function e(n,r,i){var s={},o;t.forEach(i,function(l){for(var u=n.parent(l),d,f;u;){if(d=n.parent(u),d?(f=s[d],s[d]=u):(f=o,o=u),f&&f!==u){r.setEdge(f,u);return}u=d}})}return $C}var GC,T6;function Nye(){if(T6)return GC;T6=1;var t=Kt(),e=bye(),n=xye(),r=kye(),i=Cye(),s=Eye(),o=Zi().Graph,l=qr();GC=u;function u(m){var b=l.maxRank(m),x=d(m,t.range(1,b+1),"inEdges"),w=d(m,t.range(b-1,-1,-1),"outEdges"),S=e(m);p(m,S);for(var C=Number.POSITIVE_INFINITY,T,E=0,N=0;N<4;++E,++N){f(E%2?x:w,E%4>=2),S=l.buildLayerMatrix(m);var A=n(m,S);A<C&&(N=0,T=t.cloneDeep(S),C=A)}p(m,T)}function d(m,b,x){return t.map(b,function(w){return i(m,w,x)})}function f(m,b){var x=new o;t.forEach(m,function(w){var S=w.graph().root,C=r(w,S,x,b);t.forEach(C.vs,function(T,E){w.node(T).order=E}),s(w,x,C.vs)})}function p(m,b){t.forEach(b,function(x){t.forEach(x,function(w,S){m.node(w).order=S})})}return GC}var WC,A6;function Tye(){if(A6)return WC;A6=1;var t=Kt(),e=Zi().Graph,n=qr();WC={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:m,findSmallestWidthAlignment:p,balance:b};function r(C,T){var E={};function N(A,_){var O=0,R=0,L=A.length,I=t.last(_);return t.forEach(_,function(F,q){var U=s(C,F),P=U?C.node(U).order:L;(U||F===I)&&(t.forEach(_.slice(R,q+1),function(H){t.forEach(C.predecessors(H),function(j){var V=C.node(j),G=V.order;(G<O||P<G)&&!(V.dummy&&C.node(H).dummy)&&o(E,j,H)})}),R=q+1,O=P)}),_}return t.reduce(T,N),E}function i(C,T){var E={};function N(_,O,R,L,I){var F;t.forEach(t.range(O,R),function(q){F=_[q],C.node(F).dummy&&t.forEach(C.predecessors(F),function(U){var P=C.node(U);P.dummy&&(P.order<L||P.order>I)&&o(E,U,F)})})}function A(_,O){var R=-1,L,I=0;return t.forEach(O,function(F,q){if(C.node(F).dummy==="border"){var U=C.predecessors(F);U.length&&(L=C.node(U[0]).order,N(O,I,q,R,L),I=q,R=L)}N(O,I,O.length,L,_.length)}),O}return t.reduce(T,A),E}function s(C,T){if(C.node(T).dummy)return t.find(C.predecessors(T),function(E){return C.node(E).dummy})}function o(C,T,E){if(T>E){var N=T;T=E,E=N}var A=C[T];A||(C[T]=A={}),A[E]=!0}function l(C,T,E){if(T>E){var N=T;T=E,E=N}return t.has(C[T],E)}function u(C,T,E,N){var A={},_={},O={};return t.forEach(T,function(R){t.forEach(R,function(L,I){A[L]=L,_[L]=L,O[L]=I})}),t.forEach(T,function(R){var L=-1;t.forEach(R,function(I){var F=N(I);if(F.length){F=t.sortBy(F,function(j){return O[j]});for(var q=(F.length-1)/2,U=Math.floor(q),P=Math.ceil(q);U<=P;++U){var H=F[U];_[I]===I&&L<O[H]&&!l(E,I,H)&&(_[H]=I,_[I]=A[I]=A[H],L=O[H])}}})}),{root:A,align:_}}function d(C,T,E,N,A){var _={},O=f(C,T,E,A),R=A?"borderLeft":"borderRight";function L(q,U){for(var P=O.nodes(),H=P.pop(),j={};H;)j[H]?q(H):(j[H]=!0,P.push(H),P=P.concat(U(H))),H=P.pop()}function I(q){_[q]=O.inEdges(q).reduce(function(U,P){return Math.max(U,_[P.v]+O.edge(P))},0)}function F(q){var U=O.outEdges(q).reduce(function(H,j){return Math.min(H,_[j.w]-O.edge(j))},Number.POSITIVE_INFINITY),P=C.node(q);U!==Number.POSITIVE_INFINITY&&P.borderType!==R&&(_[q]=Math.max(_[q],U))}return L(I,O.predecessors.bind(O)),L(F,O.successors.bind(O)),t.forEach(N,function(q){_[q]=_[E[q]]}),_}function f(C,T,E,N){var A=new e,_=C.graph(),O=w(_.nodesep,_.edgesep,N);return t.forEach(T,function(R){var L;t.forEach(R,function(I){var F=E[I];if(A.setNode(F),L){var q=E[L],U=A.edge(q,F);A.setEdge(q,F,Math.max(O(C,I,L),U||0))}L=I})}),A}function p(C,T){return t.minBy(t.values(T),function(E){var N=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(E,function(_,O){var R=S(C,O)/2;N=Math.max(_+R,N),A=Math.min(_-R,A)}),N-A})}function m(C,T){var E=t.values(T),N=t.min(E),A=t.max(E);t.forEach(["u","d"],function(_){t.forEach(["l","r"],function(O){var R=_+O,L=C[R],I;if(L!==T){var F=t.values(L);I=O==="l"?N-t.min(F):A-t.max(F),I&&(C[R]=t.mapValues(L,function(q){return q+I}))}})})}function b(C,T){return t.mapValues(C.ul,function(E,N){if(T)return C[T.toLowerCase()][N];var A=t.sortBy(t.map(C,N));return(A[1]+A[2])/2})}function x(C){var T=n.buildLayerMatrix(C),E=t.merge(r(C,T),i(C,T)),N={},A;t.forEach(["u","d"],function(O){A=O==="u"?T:t.values(T).reverse(),t.forEach(["l","r"],function(R){R==="r"&&(A=t.map(A,function(q){return t.values(q).reverse()}));var L=(O==="u"?C.predecessors:C.successors).bind(C),I=u(C,A,E,L),F=d(C,A,I.root,I.align,R==="r");R==="r"&&(F=t.mapValues(F,function(q){return-q})),N[O+R]=F})});var _=p(C,N);return m(N,_),b(N,C.graph().align)}function w(C,T,E){return function(N,A,_){var O=N.node(A),R=N.node(_),L=0,I;if(L+=O.width/2,t.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":I=-O.width/2;break;case"r":I=O.width/2;break}if(I&&(L+=E?I:-I),I=0,L+=(O.dummy?T:C)/2,L+=(R.dummy?T:C)/2,L+=R.width/2,t.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":I=R.width/2;break;case"r":I=-R.width/2;break}return I&&(L+=E?I:-I),I=0,L}}function S(C,T){return C.node(T).width}return WC}var KC,M6;function Aye(){if(M6)return KC;M6=1;var t=Kt(),e=qr(),n=Tye().positionX;KC=r;function r(s){s=e.asNonCompoundGraph(s),i(s),t.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=e.buildLayerMatrix(s),l=s.graph().ranksep,u=0;t.forEach(o,function(d){var f=t.max(t.map(d,function(p){return s.node(p).height}));t.forEach(d,function(p){s.node(p).y=u+f/2}),u+=f+l})}return KC}var YC,_6;function Mye(){if(_6)return YC;_6=1;var t=Kt(),e=uye(),n=dye(),r=hye(),i=qr().normalizeRanks,s=pye(),o=qr().removeEmptyRanks,l=mye(),u=gye(),d=yye(),f=Nye(),p=Aye(),m=qr(),b=Zi().Graph;YC=x;function x($,Z){var ee=Z&&Z.debugTiming?m.time:m.notime;ee("layout",function(){var de=ee("  buildLayoutGraph",function(){return L($)});ee("  runLayout",function(){w(de,ee)}),ee("  updateInputGraph",function(){S($,de)})})}function w($,Z){Z("    makeSpaceForEdgeLabels",function(){I($)}),Z("    removeSelfEdges",function(){te($)}),Z("    acyclic",function(){e.run($)}),Z("    nestingGraph.run",function(){l.run($)}),Z("    rank",function(){r(m.asNonCompoundGraph($))}),Z("    injectEdgeLabelProxies",function(){F($)}),Z("    removeEmptyRanks",function(){o($)}),Z("    nestingGraph.cleanup",function(){l.cleanup($)}),Z("    normalizeRanks",function(){i($)}),Z("    assignRankMinMax",function(){q($)}),Z("    removeEdgeLabelProxies",function(){U($)}),Z("    normalize.run",function(){n.run($)}),Z("    parentDummyChains",function(){s($)}),Z("    addBorderSegments",function(){u($)}),Z("    order",function(){f($)}),Z("    insertSelfEdges",function(){z($)}),Z("    adjustCoordinateSystem",function(){d.adjust($)}),Z("    position",function(){p($)}),Z("    positionSelfEdges",function(){W($)}),Z("    removeBorderNodes",function(){G($)}),Z("    normalize.undo",function(){n.undo($)}),Z("    fixupEdgeLabelCoords",function(){j($)}),Z("    undoCoordinateSystem",function(){d.undo($)}),Z("    translateGraph",function(){P($)}),Z("    assignNodeIntersects",function(){H($)}),Z("    reversePoints",function(){V($)}),Z("    acyclic.undo",function(){e.undo($)})}function S($,Z){t.forEach($.nodes(),function(ee){var de=$.node(ee),oe=Z.node(ee);de&&(de.x=oe.x,de.y=oe.y,Z.children(ee).length&&(de.width=oe.width,de.height=oe.height))}),t.forEach($.edges(),function(ee){var de=$.edge(ee),oe=Z.edge(ee);de.points=oe.points,t.has(oe,"x")&&(de.x=oe.x,de.y=oe.y)}),$.graph().width=Z.graph().width,$.graph().height=Z.graph().height}var C=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],N=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function L($){var Z=new b({multigraph:!0,compound:!0}),ee=re($.graph());return Z.setGraph(t.merge({},T,ae(ee,C),t.pick(ee,E))),t.forEach($.nodes(),function(de){var oe=re($.node(de));Z.setNode(de,t.defaults(ae(oe,N),A)),Z.setParent(de,$.parent(de))}),t.forEach($.edges(),function(de){var oe=re($.edge(de));Z.setEdge(de,t.merge({},O,ae(oe,_),t.pick(oe,R)))}),Z}function I($){var Z=$.graph();Z.ranksep/=2,t.forEach($.edges(),function(ee){var de=$.edge(ee);de.minlen*=2,de.labelpos.toLowerCase()!=="c"&&(Z.rankdir==="TB"||Z.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})}function F($){t.forEach($.edges(),function(Z){var ee=$.edge(Z);if(ee.width&&ee.height){var de=$.node(Z.v),oe=$.node(Z.w),ye={rank:(oe.rank-de.rank)/2+de.rank,e:Z};m.addDummyNode($,"edge-proxy",ye,"_ep")}})}function q($){var Z=0;t.forEach($.nodes(),function(ee){var de=$.node(ee);de.borderTop&&(de.minRank=$.node(de.borderTop).rank,de.maxRank=$.node(de.borderBottom).rank,Z=t.max(Z,de.maxRank))}),$.graph().maxRank=Z}function U($){t.forEach($.nodes(),function(Z){var ee=$.node(Z);ee.dummy==="edge-proxy"&&($.edge(ee.e).labelRank=ee.rank,$.removeNode(Z))})}function P($){var Z=Number.POSITIVE_INFINITY,ee=0,de=Number.POSITIVE_INFINITY,oe=0,ye=$.graph(),Ce=ye.marginx||0,Pe=ye.marginy||0;function Ie(Ae){var Ee=Ae.x,Ne=Ae.y,yt=Ae.width,Oe=Ae.height;Z=Math.min(Z,Ee-yt/2),ee=Math.max(ee,Ee+yt/2),de=Math.min(de,Ne-Oe/2),oe=Math.max(oe,Ne+Oe/2)}t.forEach($.nodes(),function(Ae){Ie($.node(Ae))}),t.forEach($.edges(),function(Ae){var Ee=$.edge(Ae);t.has(Ee,"x")&&Ie(Ee)}),Z-=Ce,de-=Pe,t.forEach($.nodes(),function(Ae){var Ee=$.node(Ae);Ee.x-=Z,Ee.y-=de}),t.forEach($.edges(),function(Ae){var Ee=$.edge(Ae);t.forEach(Ee.points,function(Ne){Ne.x-=Z,Ne.y-=de}),t.has(Ee,"x")&&(Ee.x-=Z),t.has(Ee,"y")&&(Ee.y-=de)}),ye.width=ee-Z+Ce,ye.height=oe-de+Pe}function H($){t.forEach($.edges(),function(Z){var ee=$.edge(Z),de=$.node(Z.v),oe=$.node(Z.w),ye,Ce;ee.points?(ye=ee.points[0],Ce=ee.points[ee.points.length-1]):(ee.points=[],ye=oe,Ce=de),ee.points.unshift(m.intersectRect(de,ye)),ee.points.push(m.intersectRect(oe,Ce))})}function j($){t.forEach($.edges(),function(Z){var ee=$.edge(Z);if(t.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function V($){t.forEach($.edges(),function(Z){var ee=$.edge(Z);ee.reversed&&ee.points.reverse()})}function G($){t.forEach($.nodes(),function(Z){if($.children(Z).length){var ee=$.node(Z),de=$.node(ee.borderTop),oe=$.node(ee.borderBottom),ye=$.node(t.last(ee.borderLeft)),Ce=$.node(t.last(ee.borderRight));ee.width=Math.abs(Ce.x-ye.x),ee.height=Math.abs(oe.y-de.y),ee.x=ye.x+ee.width/2,ee.y=de.y+ee.height/2}}),t.forEach($.nodes(),function(Z){$.node(Z).dummy==="border"&&$.removeNode(Z)})}function te($){t.forEach($.edges(),function(Z){if(Z.v===Z.w){var ee=$.node(Z.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:Z,label:$.edge(Z)}),$.removeEdge(Z)}})}function z($){var Z=m.buildLayerMatrix($);t.forEach(Z,function(ee){var de=0;t.forEach(ee,function(oe,ye){var Ce=$.node(oe);Ce.order=ye+de,t.forEach(Ce.selfEdges,function(Pe){m.addDummyNode($,"selfedge",{width:Pe.label.width,height:Pe.label.height,rank:Ce.rank,order:ye+ ++de,e:Pe.e,label:Pe.label},"_se")}),delete Ce.selfEdges})})}function W($){t.forEach($.nodes(),function(Z){var ee=$.node(Z);if(ee.dummy==="selfedge"){var de=$.node(ee.e.v),oe=de.x+de.width/2,ye=de.y,Ce=ee.x-oe,Pe=de.height/2;$.setEdge(ee.e,ee.label),$.removeNode(Z),ee.label.points=[{x:oe+2*Ce/3,y:ye-Pe},{x:oe+5*Ce/6,y:ye-Pe},{x:oe+Ce,y:ye},{x:oe+5*Ce/6,y:ye+Pe},{x:oe+2*Ce/3,y:ye+Pe}],ee.label.x=ee.x,ee.label.y=ee.y}})}function ae($,Z){return t.mapValues(t.pick($,Z),Number)}function re($){var Z={};return t.forEach($,function(ee,de){Z[de.toLowerCase()]=ee}),Z}return YC}var XC,D6;function _ye(){if(D6)return XC;D6=1;var t=Kt(),e=qr(),n=Zi().Graph;XC={debugOrdering:r};function r(i){var s=e.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),t.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),t.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),t.reduce(l,function(f,p){return o.setEdge(f,p,{style:"invis"}),p})}),o}return XC}var ZC,R6;function Dye(){return R6||(R6=1,ZC="0.8.5"),ZC}var JC,j6;function Rye(){return j6||(j6=1,JC={graphlib:Zi(),layout:Mye(),debug:_ye(),util:{time:qr().time,notime:qr().notime},version:Dye()}),JC}var jye=Rye();const Em=hh(jye),ps=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]},{id:"entity",group:"ER Diagram",icon:"",label:"Entity",description:"Database table/entity with attributes",nodeType:"tableNode",tags:["entity","table","database","erd","relation","schema","model"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., User, Order, Product",default:"Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this entity represents",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Regular",options:["Regular","Junction","Audit","Archive","View","Materialized View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0,isNullable:!1},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"weak-entity",group:"ER Diagram",icon:"",label:"Weak Entity",description:"Entity dependent on another entity for identification",nodeType:"tableNode",tags:["weak entity","dependent","erd","relationship","partial key"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., OrderItem, Dependent, Comment",default:"Weak Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this weak entity",default:""},{key:"ownerEntity",label:"Owner Entity",type:"text",placeholder:"Parent entity that this depends on",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Weak Entity",options:["Weak Entity","Junction","Dependent"]}],data:{attributes:[{id:"attr-1",name:"owner_id",type:"UUID",isForeignKey:!0,isNullable:!1},{id:"attr-2",name:"sequence_number",type:"INT",isPrimaryKey:!0,isNullable:!1},{id:"attr-3",name:"data",type:"VARCHAR(255)",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"double",borderWidth:4}},{id:"er-trigger",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Trigger",description:"Database trigger for automated actions on events",tags:["trigger","automation","event","database","erd"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-trigger"},{key:"componentName",label:"Trigger Name",type:"text",placeholder:"e.g., update_timestamp, log_changes, validate_data",default:"update_timestamp"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this trigger does",default:"Automatically updates the updated_at timestamp when a row is modified"},{key:"targetTable",label:"Target Table",type:"text",placeholder:"Table this trigger is attached to",default:"users"},{key:"timing",label:"Timing",type:"select",default:"BEFORE",options:["BEFORE","AFTER","INSTEAD OF"]},{key:"event",label:"Event",type:"select",default:"UPDATE",options:["INSERT","UPDATE","DELETE","TRUNCATE"]},{key:"level",label:"Level",type:"select",default:"ROW",options:["ROW","STATEMENT"]},{key:"condition",label:"Condition (WHEN)",type:"textarea",placeholder:"Optional condition: e.g., NEW.status != OLD.status",default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:100}},{id:"er-note",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Note/Constraint",description:"Business rule, constraint, or annotation",tags:["note","constraint","rule","annotation","comment","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"e.g., Business Rule, Constraint, Assumption",default:"Business Rule"},{key:"description",label:"Note Content",type:"textarea",placeholder:`Describe the rule, constraint, or important note
e.g., Email must be unique across all users
Orders can only be placed by verified customers`,default:"Email addresses must be unique across all user accounts"},{key:"type",label:"Type",type:"select",default:"Business Rule",options:["Business Rule","Database Constraint","Assumption","Clarification","TODO","Warning","Best Practice"]},{key:"severity",label:"Severity",type:"select",default:"Info",options:["Critical","High","Medium","Low","Info"]},{key:"relatedEntity",label:"Related To",type:"text",placeholder:"Entity or relationship this applies to",default:""},{key:"sqlConstraint",label:"SQL Constraint",type:"textarea",placeholder:`SQL code for this constraint
e.g., CHECK (price > 0)
CHECK (start_date < end_date)`,default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:120,borderStyle:"dashed"}},{id:"er-use-case",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Use Case",description:"Use case or functional requirement for the system",tags:["use case","requirement","functionality","scenario","note","annotation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., User Registration, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case or requirement",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"relatedEntities",label:"Related Entities",type:"text",placeholder:"Entities involved (comma-separated)",default:""}]},{id:"er-view",group:"ER Diagram",nodeType:"tableNode",icon:"",label:"View",description:"Database view or materialized view",tags:["view","query","virtual table","materialized","aggregation"],properties:[{key:"componentName",label:"View Name",type:"text",placeholder:"e.g., active_users_view, order_summary_view",default:"View"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this view provides",default:""},{key:"viewType",label:"View Type",type:"select",default:"Standard View",options:["Standard View","Materialized View","Indexed View","Updateable View"]},{key:"baseTables",label:"Base Tables",type:"text",placeholder:"Tables this view depends on (comma-separated)",default:""},{key:"tableType",label:"Table Type",type:"select",default:"View",options:["View","Materialized View","Indexed View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"computed_field",type:"VARCHAR(100)",isNullable:!0},{id:"attr-3",name:"aggregate_value",type:"INT",isNullable:!0}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:1}},{id:"uml-class",group:"UML",icon:"",label:"Class",description:"UML Class with attributes and methods",nodeType:"tableNode",tags:["uml","class","object-oriented","oop","class diagram","blueprint"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., User, Product, Order",default:"Class"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this class represents",default:""},{key:"stereotype",label:"Stereotype",type:"select",default:"None",options:["None","<<abstract>>","<<interface>>","<<entity>>","<<controller>>","<<service>>","<<repository>>"]},{key:"visibility",label:"Default Visibility",type:"select",default:"public",options:["public","private","protected","package"]}],data:{attributes:[{id:"attr-1",name:"- id",type:"String",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"+ name",type:"String",isNullable:!1},{id:"attr-3",name:"# createdAt",type:"Date",isNullable:!1},{id:"attr-4",name:"+ getName()",type:"String",isNullable:!1},{id:"attr-5",name:"+ setName(name: String)",type:"void",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-interface",group:"UML",icon:"",label:"Interface",description:"UML Interface definition",nodeType:"tableNode",tags:["uml","interface","contract","abstraction","oop"],properties:[{key:"componentName",label:"Interface Name",type:"text",placeholder:"e.g., IRepository, IService, Serializable",default:"Interface"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this interface defines",default:""}],data:{attributes:[{id:"attr-1",name:"+ save()",type:"void",isNullable:!1},{id:"attr-2",name:"+ delete()",type:"void",isNullable:!1},{id:"attr-3",name:"+ findById(id: String)",type:"Object",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Method",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm italic"}},{key:"type",label:"Return Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:2}},{id:"uml-abstract-class",group:"UML",icon:"",label:"Abstract Class",description:"Abstract class with abstract methods",nodeType:"tableNode",tags:["uml","abstract","base class","inheritance","oop"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., BaseRepository, AbstractService",default:"AbstractClass"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this abstract class",default:""}],data:{attributes:[{id:"attr-1",name:"# data",type:"Object",isNullable:!1},{id:"attr-2",name:"+ process()",type:"void",isNullable:!1},{id:"attr-3",name:"+ validate()",type:"boolean",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"solid",borderWidth:2}},{id:"uml-enum",group:"UML",icon:"",label:"Enum",description:"Enumeration type",nodeType:"tableNode",tags:["uml","enum","enumeration","constants","type"],properties:[{key:"componentName",label:"Enum Name",type:"text",placeholder:"e.g., Status, Color, Role",default:"Enum"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this enumeration",default:""}],data:{attributes:[{id:"attr-1",name:"ACTIVE",type:"",isNullable:!1},{id:"attr-2",name:"INACTIVE",type:"",isNullable:!1},{id:"attr-3",name:"PENDING",type:"",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Value",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm uppercase"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-use-case",group:"UML",nodeType:"erNode",icon:"",label:"Use Case",description:"System use case or functionality",tags:["uml","use case","functionality","requirement","scenario","er diagram","note"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., Login, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"complexity",label:"Complexity",type:"select",default:"Medium",options:["Simple","Medium","Complex"]}]},{id:"uml-note",group:"UML",nodeType:"erNode",icon:"",label:"Note/Comment",description:"Annotation or comment",tags:["uml","note","comment","annotation","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"Optional title",default:"Note"},{key:"description",label:"Content",type:"textarea",placeholder:"Add your note or comment here",default:""}]}];function JU(t){return ct({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(t)}function QU(t){return ct({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(t)}function e9(t){return ct({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(t)}function Oye(t){return ct({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(t)}function Lye({components:t,onAdd:e}){const[n,r]=ke.useState(!0),[i,s]=ke.useState(new Set),[o,l]=ke.useState(null),[u,d]=ke.useState(""),f=ke.useMemo(()=>new Ul(Array.from(t),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[t]),p=ke.useMemo(()=>{const x=u.trim();if(!x)return Array.from(t);const S=f.search(x).map(E=>E.item),C=t.find(E=>E.id==="custom-component"),T=S.some(E=>E.id==="custom-component");return C&&!T&&S.push(C),S},[t,f,u]),m=ke.useMemo(()=>{const x=new Map;for(const w of p){const S=w.group??"Other";x.has(S)||x.set(S,[]),x.get(S).push(w)}return Array.from(x.entries()).sort((w,S)=>w[0].localeCompare(S[0]))},[p]);ke.useEffect(()=>{m.length>0&&i.size===0&&s(new Set(m.map(([x])=>x)))},[m,i.size]);const b=x=>{s(w=>{const S=new Set(w);return S.has(x)?S.delete(x):S.add(x),S})};return g.jsxs("div",{className:"relative z-40",children:[g.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?g.jsx(QU,{size:16}):g.jsx(e9,{size:16})}),g.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?g.jsxs(g.Fragment,{children:[g.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),g.jsx("div",{className:"mr-3 mb-3",children:g.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),g.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[m.length===0?g.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):m.map(([x,w])=>{const S=i.has(x);return g.jsxs("div",{children:[g.jsxs("button",{type:"button",onClick:()=>b(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":S,"aria-controls":`group-${x}`,children:[g.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),g.jsx(JU,{size:12,className:`text-muted transition-transform duration-150 ${S?"rotate-0":"-rotate-90"}`})]}),S&&g.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:w.map(C=>g.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${C.label} to canvas`,onMouseEnter:T=>{const E=T.currentTarget.getBoundingClientRect();l({label:C.label,description:C.description||"",rect:E})},onMouseLeave:()=>l(null),onDragStart:T=>{l(null),T.dataTransfer?.setData("application/reactflow",JSON.stringify({type:C.id})),T.dataTransfer?.setData("text/plain",C.id),T.dataTransfer&&(T.dataTransfer.effectAllowed="move")},onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),e(C.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[g.jsx("div",{className:"text-center mb-1",children:g.jsx("span",{className:"text-2xl",children:C.icon})}),g.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:C.label})]},C.id))})})]},x)}),g.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[g.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),g.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:g.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&mh.createPortal(g.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[g.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),g.jsx("div",{className:"text-muted",children:o.description}),g.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const Iye=({reactFlowWrapperRef:t,nodes:e,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:f,onMouseMove:p,children:m})=>g.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:g.jsx("section",{className:"w-full h-full",ref:t,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:g.jsxs(Kfe,{className:"w-full h-full",nodes:e,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:f,onMouseMove:p,connectionMode:Ll.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[g.jsx(whe,{nodeStrokeWidth:3}),g.jsx(lhe,{}),g.jsx(the,{gap:16}),m]})})}),Pye=({problem:t,activeTab:e,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:f,isNodeInGroup:p})=>{const[m,b]=ke.useState(320),x=260,w=640,S=ke.useRef(!1),C=ke.useRef(null),[T,E]=ke.useState(!1),[N,A]=ke.useState(!0),_=ke.useCallback(q=>{if(!S.current)return;const U=Math.min(Math.max(window.innerWidth-q.clientX,x),w);b(U)},[]),O=ke.useCallback(()=>{S.current=!1,document.body.style.userSelect=""},[]),R=q=>{q.preventDefault(),S.current=!0,document.body.style.userSelect="none"};ke.useEffect(()=>(globalThis.addEventListener("mousemove",_),globalThis.addEventListener("mouseup",O),()=>{globalThis.removeEventListener("mousemove",_),globalThis.removeEventListener("mouseup",O)}),[_,O]),ke.useEffect(()=>{C.current&&(C.current.style.width=m+"px")},[m]);const L=t?.id==="free";if(ke.useEffect(()=>{L&&!r&&A(!1)},[L,r]),ke.useEffect(()=>{L&&r&&(n("inspector"),A(!0))},[L,r,n]),!t)return null;const I=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const q=document.createElement("textarea");q.value=JSON.stringify(d,null,2),q.style.position="fixed",q.style.opacity="0",document.body.appendChild(q),q.select();try{document.execCommand("copy")}catch{}q.remove()}},F=()=>{if(!d)return;const q=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),U=URL.createObjectURL(q),P=document.createElement("a");P.href=U,P.download=`assessment-${Date.now()}.json`,document.body.appendChild(P),P.click(),P.remove(),URL.revokeObjectURL(U)};return g.jsxs("div",{className:"relative z-40",children:[g.jsx("button",{type:"button",onClick:()=>A(q=>!q),"aria-label":N?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:N?g.jsx(e9,{size:16}):g.jsx(QU,{size:16})}),g.jsx("aside",{ref:C,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${N?"p-4":"w-6 p-1"}`,"data-width":m,style:{width:N?`${m}px`:"24px"},children:N&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onMouseDown:R,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[g.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),g.jsx(Oye,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),g.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!L&&g.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[g.jsx("span",{className:"text-sm",children:""}),g.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),!L&&g.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="assessment"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("assessment"),children:[g.jsx("span",{className:"text-sm",children:""}),g.jsx("span",{className:"text-sm font-medium",children:"Assessment"}),d&&g.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-semibold rounded-full bg-[var(--brand)] text-white",children:d.score})]}),g.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[g.jsx("span",{className:"text-sm",children:""}),g.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),g.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),g.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[e==="details"&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:t.title}),g.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:t.description}),g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),g.jsx("ul",{className:"space-y-1",children:t.requirements.map(q=>g.jsxs("li",{className:"flex items-start space-x-2",children:[g.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),g.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),g.jsx("ul",{className:"space-y-1",children:t.constraints.map(q=>g.jsxs("li",{className:"flex items-start space-x-2",children:[g.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),g.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("button",{type:"button",onClick:()=>E(!T),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[g.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),g.jsx(JU,{size:14,className:`text-muted transition-transform duration-150 ${T?"rotate-0":"-rotate-90"}`})]}),T&&g.jsx("div",{id:"hints-content",className:"space-y-2",children:t.hints.map(q=>g.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:g.jsx("div",{className:"text-xs text-white",children:q})},q))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),g.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(q=>g.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:q},q))})]})]}),e==="inspector"&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&g.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&g.jsxs("div",{children:[g.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&g.jsxs("div",{className:"mb-6",children:[g.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),g.jsx("div",{className:"space-y-2",children:s})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),g.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[g.jsx(VE,{size:14}),g.jsx("span",{children:"Add"})]})]}),g.jsx("div",{className:"space-y-2",children:o})]}),g.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&f&&g.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:f,title:"Remove this node from its parent group",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Detach from Group"})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),g.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]}),e==="assessment"&&g.jsx("div",{children:d?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("div",{className:"text-lg font-semibold text-theme",children:"Assessment Score"}),g.jsxs("div",{className:"text-2xl font-bold text-[var(--brand)]",children:[d.score,"%"]})]}),g.jsx("div",{className:"text-sm text-muted",children:d.isValid?" Pass":" Needs Improvement"})]}),g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-green-500",children:""}),g.jsx("span",{children:"What Went Right"})]}),d.architectureStrengths.length>0?g.jsx("ul",{className:"space-y-2",children:d.architectureStrengths.map(q=>g.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-green-500 mt-0.5",children:""}),g.jsx("span",{className:"text-theme",children:q})]},q))}):g.jsx("div",{className:"text-sm text-muted",children:"No notable strengths detected."})]}),g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-orange-500",children:"!"}),g.jsx("span",{children:"What to Improve"})]}),d.improvements.length>0?g.jsx("ul",{className:"space-y-2",children:d.improvements.map(q=>g.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),g.jsx("span",{className:"text-theme",children:q})]},q))}):g.jsx("div",{className:"text-sm text-muted",children:"No specific improvements suggested."})]}),g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsx("div",{className:"font-semibold text-theme mb-3",children:"Detailed Feedback"}),g.jsx("div",{className:"space-y-3",children:d.feedback.map(q=>g.jsxs("div",{className:"border-l-2 border-[var(--brand)] pl-3 py-1",children:[g.jsx("div",{className:"font-medium text-xs text-[var(--brand)] uppercase mb-1",children:q.category}),g.jsx("div",{className:"text-sm text-theme",children:q.message})]},`${q.category}-${q.message}`))})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:I,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Copy JSON"}),g.jsx("button",{type:"button",onClick:F,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Download"})]})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("div",{className:"text-lg font-semibold text-theme mb-2",children:"No Assessment Yet"}),g.jsx("div",{className:"text-sm text-muted",children:"Run an assessment to see your design evaluation and feedback."})]})})]})]})})]})},Bye=({isLoading:t,collaborators:e,onUpdatePermission:n,onRemove:r})=>t?g.jsxs("div",{className:"text-center py-4",children:[g.jsx("div",{className:"inline-block w-4 h-4 border border-accent/30 border-t-accent rounded-full animate-spin"}),g.jsx("p",{className:"text-sm text-muted mt-2",children:"Loading collaborators..."})]}):e.length===0?g.jsxs("div",{className:"text-center py-4 text-muted",children:[g.jsx("p",{className:"text-sm",children:"No collaborators yet"}),g.jsx("p",{className:"text-xs mt-1",children:"Share this diagram to start collaborating"})]}):g.jsx("div",{className:"space-y-2",children:e.map(i=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme/5 rounded-md",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:g.jsx("span",{className:"text-sm font-medium text-accent",children:i.email[0].toUpperCase()})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:i.email}),g.jsxs("p",{className:"text-xs text-muted capitalize",children:[i.permission," access"]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("select",{value:i.permission,onChange:s=>n(i.id,s.target.value),className:"text-xs px-2 py-1 border border-theme/20 rounded bg-theme text-theme",children:[g.jsx("option",{value:"read",children:"Read"}),g.jsx("option",{value:"edit",children:"Edit"})]}),g.jsx("button",{type:"button",onClick:()=>r(i.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove collaborator",children:g.jsx(hu,{className:"h-4 w-4"})})]})]},i.id))});async function zye(t,e){if(!t)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:t.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:t.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:t.explanation,keyPoints:t.keyPoints,problem:e?{title:e.title,description:e.description,requirements:Array.isArray(e.requirements)?e.requirements.join(`.
`):e.requirements,constraints:Array.isArray(e.constraints)?e.constraints.join(`.
`):e.constraints,difficulty:e.difficulty,category:e.category,estimatedTime:e.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),Vye(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function Vye(t){const e=t,n=(e.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:e.is_valid||!1,score:e.overall_score||0,feedback:n,suggestions:e.suggestions||[],missingComponents:e.missing_components||[],architectureStrengths:e.strengths||[],improvements:e.improvements||[]}}function rA(t){return ct({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(t)}const t9=ke.memo(({id:t,data:e,onCopy:n,isInGroup:r})=>{const[i,s]=ke.useState({visible:!1,x:0,y:0}),o=e.componentName||e.label,l=ke.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),u=ke.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),d=ke.useCallback(b=>{b.stopPropagation(),n?.(t,e)},[t,e,n]),f=ke.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:t}}))},[t]),p=ke.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s({visible:!0,x:b.clientX,y:b.clientY})},[]),m=ke.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return ke.useEffect(()=>{if(i.visible){const b=x=>{const w=document.querySelector("[data-context-menu]");w&&!w.contains(x.target)&&m()};return document.addEventListener("click",b),document.addEventListener("contextmenu",b),()=>{document.removeEventListener("click",b),document.removeEventListener("contextmenu",b)}}},[i.visible,m]),g.jsxs(g.Fragment,{children:[g.jsxs(gt.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",onContextMenu:p,children:[g.jsx("legend",{className:"sr-only",children:o}),g.jsx(Nn,{id:"top",type:"source",position:Me.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Me.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Me.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Me.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[g.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:e.icon??""}),g.jsxs("div",{className:"min-w-0 w-full text-center",children:[g.jsx("div",{className:"truncate font-medium text-sm",children:o}),e.subtitle&&g.jsx("div",{className:"text-xs text-muted truncate",children:e.subtitle})]})]})]}),i.visible&&mh.createPortal(g.jsxs(gt.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),u(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Ey,{className:"w-4 h-4"}),"Settings"]}),r&&g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),f(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[g.jsx(eN,{className:"w-4 h-4"}),"Detach from Group"]}),g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),d(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(rA,{className:"w-4 h-4"}),"Duplicate"]}),g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),l(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[g.jsx(fu,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});t9.displayName="Node";/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:n9,setPrototypeOf:O6,isFrozen:qye,getPrototypeOf:Fye,getOwnPropertyDescriptor:Hye}=Object;let{freeze:Mr,seal:ji,create:z2}=Object,{apply:V2,construct:q2}=typeof Reflect<"u"&&Reflect;Mr||(Mr=function(e){return e});ji||(ji=function(e){return e});V2||(V2=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return e.apply(n,i)});q2||(q2=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const Nm=_r(Array.prototype.forEach),Uye=_r(Array.prototype.lastIndexOf),L6=_r(Array.prototype.pop),Gd=_r(Array.prototype.push),$ye=_r(Array.prototype.splice),Gm=_r(String.prototype.toLowerCase),QC=_r(String.prototype.toString),eE=_r(String.prototype.match),Wd=_r(String.prototype.replace),Gye=_r(String.prototype.indexOf),Wye=_r(String.prototype.trim),$i=_r(Object.prototype.hasOwnProperty),kr=_r(RegExp.prototype.test),Kd=Kye(TypeError);function _r(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return V2(t,e,r)}}function Kye(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return q2(t,n)}}function at(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Gm;O6&&O6(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(qye(e)||(e[r]=s),i=s)}t[i]=!0}return t}function Yye(t){for(let e=0;e<t.length;e++)$i(t,e)||(t[e]=null);return t}function eo(t){const e=z2(null);for(const[n,r]of n9(t))$i(t,n)&&(Array.isArray(r)?e[n]=Yye(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=eo(r):e[n]=r);return e}function Yd(t,e){for(;t!==null;){const r=Hye(t,e);if(r){if(r.get)return _r(r.get);if(typeof r.value=="function")return _r(r.value)}t=Fye(t)}function n(){return null}return n}const I6=Mr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tE=Mr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nE=Mr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xye=Mr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rE=Mr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Zye=Mr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),P6=Mr(["#text"]),B6=Mr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),iE=Mr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),z6=Mr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Tm=Mr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Jye=ji(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Qye=ji(/<%[\w\W]*|[\w\W]*%>/gm),e0e=ji(/\$\{[\w\W]*/gm),t0e=ji(/^data-[\-\w.\u00B7-\uFFFF]+$/),n0e=ji(/^aria-[\-\w]+$/),r9=ji(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),r0e=ji(/^(?:\w+script|data):/i),i0e=ji(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),i9=ji(/^html$/i),s0e=ji(/^[a-z][.\w]*(-[.\w]+)+$/i);var V6=Object.freeze({__proto__:null,ARIA_ATTR:n0e,ATTR_WHITESPACE:i0e,CUSTOM_ELEMENT:s0e,DATA_ATTR:t0e,DOCTYPE_NAME:i9,ERB_EXPR:Qye,IS_ALLOWED_URI:r9,IS_SCRIPT_OR_DATA:r0e,MUSTACHE_EXPR:Jye,TMPLIT_EXPR:e0e});const Xd={element:1,text:3,progressingInstruction:7,comment:8,document:9},o0e=function(){return typeof window>"u"?null:window},a0e=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},q6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function s9(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:o0e();const e=Re=>s9(Re);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==Xd.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:d,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:b}=t,x=u.prototype,w=Yd(x,"cloneNode"),S=Yd(x,"remove"),C=Yd(x,"nextSibling"),T=Yd(x,"childNodes"),E=Yd(x,"parentNode");if(typeof o=="function"){const Re=n.createElement("template");Re.content&&Re.content.ownerDocument&&(n=Re.content.ownerDocument)}let N,A="";const{implementation:_,createNodeIterator:O,createDocumentFragment:R,getElementsByTagName:L}=n,{importNode:I}=r;let F=q6();e.isSupported=typeof n9=="function"&&typeof E=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:U,TMPLIT_EXPR:P,DATA_ATTR:H,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:G,CUSTOM_ELEMENT:te}=V6;let{IS_ALLOWED_URI:z}=V6,W=null;const ae=at({},[...I6,...tE,...nE,...rE,...P6]);let re=null;const $=at({},[...B6,...iE,...z6,...Tm]);let Z=Object.seal(z2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,de=null;const oe=Object.seal(z2(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ye=!0,Ce=!0,Pe=!1,Ie=!0,Ae=!1,Ee=!0,Ne=!1,yt=!1,Oe=!1,xt=!1,wt=!1,Yt=!1,gn=!0,Ht=!1;const Mt="user-content-";let Dn=!0,yn=!1,Bt={},ht=null;const _t=at({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Dt=null;const xr=at({},["audio","video","img","source","image","track"]);let Hr=null;const Ii=at({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),rn="http://www.w3.org/1998/Math/MathML",Le="http://www.w3.org/2000/svg",$e="http://www.w3.org/1999/xhtml";let vr=$e,pt=!1,bn=null;const vo=at({},[rn,Le,$e],QC);let Pi=at({},["mi","mo","mn","ms","mtext"]),Ur=at({},["annotation-xml"]);const $r=at({},["title","style","font","a","script"]);let wr=null;const Dr=["application/xhtml+xml","text/html"],Gr="text/html";let St=null,Kn=null;const wo=n.createElement("form"),Bi=function(J){return J instanceof RegExp||J instanceof Function},sr=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Kn&&Kn===J)){if((!J||typeof J!="object")&&(J={}),J=eo(J),wr=Dr.indexOf(J.PARSER_MEDIA_TYPE)===-1?Gr:J.PARSER_MEDIA_TYPE,St=wr==="application/xhtml+xml"?QC:Gm,W=$i(J,"ALLOWED_TAGS")?at({},J.ALLOWED_TAGS,St):ae,re=$i(J,"ALLOWED_ATTR")?at({},J.ALLOWED_ATTR,St):$,bn=$i(J,"ALLOWED_NAMESPACES")?at({},J.ALLOWED_NAMESPACES,QC):vo,Hr=$i(J,"ADD_URI_SAFE_ATTR")?at(eo(Ii),J.ADD_URI_SAFE_ATTR,St):Ii,Dt=$i(J,"ADD_DATA_URI_TAGS")?at(eo(xr),J.ADD_DATA_URI_TAGS,St):xr,ht=$i(J,"FORBID_CONTENTS")?at({},J.FORBID_CONTENTS,St):_t,ee=$i(J,"FORBID_TAGS")?at({},J.FORBID_TAGS,St):eo({}),de=$i(J,"FORBID_ATTR")?at({},J.FORBID_ATTR,St):eo({}),Bt=$i(J,"USE_PROFILES")?J.USE_PROFILES:!1,ye=J.ALLOW_ARIA_ATTR!==!1,Ce=J.ALLOW_DATA_ATTR!==!1,Pe=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ae=J.SAFE_FOR_TEMPLATES||!1,Ee=J.SAFE_FOR_XML!==!1,Ne=J.WHOLE_DOCUMENT||!1,xt=J.RETURN_DOM||!1,wt=J.RETURN_DOM_FRAGMENT||!1,Yt=J.RETURN_TRUSTED_TYPE||!1,Oe=J.FORCE_BODY||!1,gn=J.SANITIZE_DOM!==!1,Ht=J.SANITIZE_NAMED_PROPS||!1,Dn=J.KEEP_CONTENT!==!1,yn=J.IN_PLACE||!1,z=J.ALLOWED_URI_REGEXP||r9,vr=J.NAMESPACE||$e,Pi=J.MATHML_TEXT_INTEGRATION_POINTS||Pi,Ur=J.HTML_INTEGRATION_POINTS||Ur,Z=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&Bi(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&Bi(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ae&&(Ce=!1),wt&&(xt=!0),Bt&&(W=at({},P6),re=[],Bt.html===!0&&(at(W,I6),at(re,B6)),Bt.svg===!0&&(at(W,tE),at(re,iE),at(re,Tm)),Bt.svgFilters===!0&&(at(W,nE),at(re,iE),at(re,Tm)),Bt.mathMl===!0&&(at(W,rE),at(re,z6),at(re,Tm))),J.ADD_TAGS&&(typeof J.ADD_TAGS=="function"?oe.tagCheck=J.ADD_TAGS:(W===ae&&(W=eo(W)),at(W,J.ADD_TAGS,St))),J.ADD_ATTR&&(typeof J.ADD_ATTR=="function"?oe.attributeCheck=J.ADD_ATTR:(re===$&&(re=eo(re)),at(re,J.ADD_ATTR,St))),J.ADD_URI_SAFE_ATTR&&at(Hr,J.ADD_URI_SAFE_ATTR,St),J.FORBID_CONTENTS&&(ht===_t&&(ht=eo(ht)),at(ht,J.FORBID_CONTENTS,St)),Dn&&(W["#text"]=!0),Ne&&at(W,["html","head","body"]),W.table&&(at(W,["tbody"]),delete ee.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw Kd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Kd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=J.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else N===void 0&&(N=a0e(b,i)),N!==null&&typeof A=="string"&&(A=N.createHTML(""));Mr&&Mr(J),Kn=J}},Xt=at({},[...tE,...nE,...Xye]),zt=at({},[...rE,...Zye]),Rr=function(J){let ge=E(J);(!ge||!ge.tagName)&&(ge={namespaceURI:vr,tagName:"template"});const _e=Gm(J.tagName),dt=Gm(ge.tagName);return bn[J.namespaceURI]?J.namespaceURI===Le?ge.namespaceURI===$e?_e==="svg":ge.namespaceURI===rn?_e==="svg"&&(dt==="annotation-xml"||Pi[dt]):!!Xt[_e]:J.namespaceURI===rn?ge.namespaceURI===$e?_e==="math":ge.namespaceURI===Le?_e==="math"&&Ur[dt]:!!zt[_e]:J.namespaceURI===$e?ge.namespaceURI===Le&&!Ur[dt]||ge.namespaceURI===rn&&!Pi[dt]?!1:!zt[_e]&&($r[_e]||!Xt[_e]):!!(wr==="application/xhtml+xml"&&bn[J.namespaceURI]):!1},Rn=function(J){Gd(e.removed,{element:J});try{E(J).removeChild(J)}catch{S(J)}},Wr=function(J,ge){try{Gd(e.removed,{attribute:ge.getAttributeNode(J),from:ge})}catch{Gd(e.removed,{attribute:null,from:ge})}if(ge.removeAttribute(J),J==="is")if(xt||wt)try{Rn(ge)}catch{}else try{ge.setAttribute(J,"")}catch{}},es=function(J){let ge=null,_e=null;if(Oe)J="<remove></remove>"+J;else{const Rt=eE(J,/^[\r\n\t ]+/);_e=Rt&&Rt[0]}wr==="application/xhtml+xml"&&vr===$e&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const dt=N?N.createHTML(J):J;if(vr===$e)try{ge=new m().parseFromString(dt,wr)}catch{}if(!ge||!ge.documentElement){ge=_.createDocument(vr,"template",null);try{ge.documentElement.innerHTML=pt?A:dt}catch{}}const Vt=ge.body||ge.documentElement;return J&&_e&&Vt.insertBefore(n.createTextNode(_e),Vt.childNodes[0]||null),vr===$e?L.call(ge,Ne?"html":"body")[0]:Ne?ge.documentElement:Vt},Os=function(J){return O.call(J.ownerDocument||J,J,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Kr=function(J){return J instanceof p&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof f)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},ts=function(J){return typeof l=="function"&&J instanceof l};function xn(Re,J,ge){Nm(Re,_e=>{_e.call(e,J,ge,Kn)})}const He=function(J){let ge=null;if(xn(F.beforeSanitizeElements,J,null),Kr(J))return Rn(J),!0;const _e=St(J.nodeName);if(xn(F.uponSanitizeElement,J,{tagName:_e,allowedTags:W}),Ee&&J.hasChildNodes()&&!ts(J.firstElementChild)&&kr(/<[/\w!]/g,J.innerHTML)&&kr(/<[/\w!]/g,J.textContent)||J.nodeType===Xd.progressingInstruction||Ee&&J.nodeType===Xd.comment&&kr(/<[/\w]/g,J.data))return Rn(J),!0;if(!(oe.tagCheck instanceof Function&&oe.tagCheck(_e))&&(!W[_e]||ee[_e])){if(!ee[_e]&&ar(_e)&&(Z.tagNameCheck instanceof RegExp&&kr(Z.tagNameCheck,_e)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(_e)))return!1;if(Dn&&!ht[_e]){const dt=E(J)||J.parentNode,Vt=T(J)||J.childNodes;if(Vt&&dt){const Rt=Vt.length;for(let Ut=Rt-1;Ut>=0;--Ut){const Bn=w(Vt[Ut],!0);Bn.__removalCount=(J.__removalCount||0)+1,dt.insertBefore(Bn,C(J))}}}return Rn(J),!0}return J instanceof u&&!Rr(J)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&kr(/<\/no(script|embed|frames)/i,J.innerHTML)?(Rn(J),!0):(Ae&&J.nodeType===Xd.text&&(ge=J.textContent,Nm([q,U,P],dt=>{ge=Wd(ge,dt," ")}),J.textContent!==ge&&(Gd(e.removed,{element:J.cloneNode()}),J.textContent=ge)),xn(F.afterSanitizeElements,J,null),!1)},or=function(J,ge,_e){if(gn&&(ge==="id"||ge==="name")&&(_e in n||_e in wo))return!1;if(!(Ce&&!de[ge]&&kr(H,ge))){if(!(ye&&kr(j,ge))){if(!(oe.attributeCheck instanceof Function&&oe.attributeCheck(ge,J))){if(!re[ge]||de[ge]){if(!(ar(J)&&(Z.tagNameCheck instanceof RegExp&&kr(Z.tagNameCheck,J)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(J))&&(Z.attributeNameCheck instanceof RegExp&&kr(Z.attributeNameCheck,ge)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(ge,J))||ge==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&kr(Z.tagNameCheck,_e)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(_e))))return!1}else if(!Hr[ge]){if(!kr(z,Wd(_e,G,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&J!=="script"&&Gye(_e,"data:")===0&&Dt[J])){if(!(Pe&&!kr(V,Wd(_e,G,"")))){if(_e)return!1}}}}}}}return!0},ar=function(J){return J!=="annotation-xml"&&eE(J,te)},Lt=function(J){xn(F.beforeSanitizeAttributes,J,null);const{attributes:ge}=J;if(!ge||Kr(J))return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re,forceKeepAttr:void 0};let dt=ge.length;for(;dt--;){const Vt=ge[dt],{name:Rt,namespaceURI:Ut,value:Bn}=Vt,vn=St(Rt),fi=Bn;let qt=Rt==="value"?fi:Wye(fi);if(_e.attrName=vn,_e.attrValue=qt,_e.keepAttr=!0,_e.forceKeepAttr=void 0,xn(F.uponSanitizeAttribute,J,_e),qt=_e.attrValue,Ht&&(vn==="id"||vn==="name")&&(Wr(Rt,J),qt=Mt+qt),Ee&&kr(/((--!?|])>)|<\/(style|title|textarea)/i,qt)){Wr(Rt,J);continue}if(vn==="attributename"&&eE(qt,"href")){Wr(Rt,J);continue}if(_e.forceKeepAttr)continue;if(!_e.keepAttr){Wr(Rt,J);continue}if(!Ie&&kr(/\/>/i,qt)){Wr(Rt,J);continue}Ae&&Nm([q,U,P],rs=>{qt=Wd(qt,rs," ")});const Yn=St(J.nodeName);if(!or(Yn,vn,qt)){Wr(Rt,J);continue}if(N&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Ut)switch(b.getAttributeType(Yn,vn)){case"TrustedHTML":{qt=N.createHTML(qt);break}case"TrustedScriptURL":{qt=N.createScriptURL(qt);break}}if(qt!==fi)try{Ut?J.setAttributeNS(Ut,Rt,qt):J.setAttribute(Rt,qt),Kr(J)?Rn(J):L6(e.removed)}catch{Wr(Rt,J)}}xn(F.afterSanitizeAttributes,J,null)},ns=function Re(J){let ge=null;const _e=Os(J);for(xn(F.beforeSanitizeShadowDOM,J,null);ge=_e.nextNode();)xn(F.uponSanitizeShadowNode,ge,null),He(ge),Lt(ge),ge.content instanceof s&&Re(ge.content);xn(F.afterSanitizeShadowDOM,J,null)};return e.sanitize=function(Re){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,_e=null,dt=null,Vt=null;if(pt=!Re,pt&&(Re="<!-->"),typeof Re!="string"&&!ts(Re))if(typeof Re.toString=="function"){if(Re=Re.toString(),typeof Re!="string")throw Kd("dirty is not a string, aborting")}else throw Kd("toString is not a function");if(!e.isSupported)return Re;if(yt||sr(J),e.removed=[],typeof Re=="string"&&(yn=!1),yn){if(Re.nodeName){const Bn=St(Re.nodeName);if(!W[Bn]||ee[Bn])throw Kd("root node is forbidden and cannot be sanitized in-place")}}else if(Re instanceof l)ge=es("<!---->"),_e=ge.ownerDocument.importNode(Re,!0),_e.nodeType===Xd.element&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?ge=_e:ge.appendChild(_e);else{if(!xt&&!Ae&&!Ne&&Re.indexOf("<")===-1)return N&&Yt?N.createHTML(Re):Re;if(ge=es(Re),!ge)return xt?null:Yt?A:""}ge&&Oe&&Rn(ge.firstChild);const Rt=Os(yn?Re:ge);for(;dt=Rt.nextNode();)He(dt),Lt(dt),dt.content instanceof s&&ns(dt.content);if(yn)return Re;if(xt){if(wt)for(Vt=R.call(ge.ownerDocument);ge.firstChild;)Vt.appendChild(ge.firstChild);else Vt=ge;return(re.shadowroot||re.shadowrootmode)&&(Vt=I.call(r,Vt,!0)),Vt}let Ut=Ne?ge.outerHTML:ge.innerHTML;return Ne&&W["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&kr(i9,ge.ownerDocument.doctype.name)&&(Ut="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+Ut),Ae&&Nm([q,U,P],Bn=>{Ut=Wd(Ut,Bn," ")}),N&&Yt?N.createHTML(Ut):Ut},e.setConfig=function(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sr(Re),yt=!0},e.clearConfig=function(){Kn=null,yt=!1},e.isValidAttribute=function(Re,J,ge){Kn||sr({});const _e=St(Re),dt=St(J);return or(_e,dt,ge)},e.addHook=function(Re,J){typeof J=="function"&&Gd(F[Re],J)},e.removeHook=function(Re,J){if(J!==void 0){const ge=Uye(F[Re],J);return ge===-1?void 0:$ye(F[Re],ge,1)[0]}return L6(F[Re])},e.removeHooks=function(Re){F[Re]=[]},e.removeAllHooks=function(){F=q6()},e}var sE=s9();const o9=ke.memo(({id:t,data:e,onCopy:n,isInGroup:r})=>{const[i,s]=ke.useState({visible:!1,x:0,y:0}),o=e.componentName||e.label,l=e.nodeType||"entity",u=ke.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),d=ke.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),f=ke.useCallback(N=>{N.stopPropagation(),n?.(t,e)},[t,e,n]),p=ke.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:t}}))},[t]),m=ke.useCallback(N=>{N.preventDefault(),N.stopPropagation(),s({visible:!0,x:N.clientX,y:N.clientY})},[]),b=ke.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);ke.useEffect(()=>{if(i.visible){const N=A=>{const _=document.querySelector("[data-context-menu]");_&&!_.contains(A.target)&&b()};return document.addEventListener("click",N),document.addEventListener("contextmenu",N),()=>{document.removeEventListener("click",N),document.removeEventListener("contextmenu",N)}}},[i.visible,b]);const x=e.attributes?e.attributes.split(`
`).filter(N=>N.trim()):[],S=(()=>{switch(l){case"weak-entity":return{border:"3px double var(--theme-color, #333)",borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"};case"er-note":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};case"er-trigger":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--accent-bg, #fef3e7)",borderLeft:"4px solid var(--accent, #f59e0b)"};case"er-view":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px",borderStyle:"dashed",borderWidth:"2px"};case"uml-use-case":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--brand, #6366f1)"};case"uml-note":return{borderRadius:"0.25rem",minWidth:"160px",maxWidth:"450px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};default:return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"}}})(),C=l==="er-note"||l==="uml-note"||l==="uml-use-case",T=l==="er-trigger",E=["uml-use-case","uml-note"].includes(l);return g.jsxs(g.Fragment,{children:[g.jsxs(gt.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:`bg-surface border-2 border-theme text-sm shadow-sm cursor-grab relative overflow-y-auto er-node-scroll ${C?"bg-yellow-50 dark:bg-yellow-900/20 text-gray-900 dark:text-gray-100":""} ${T?"bg-orange-50 dark:bg-orange-900/20 text-gray-900 dark:text-gray-100":"text-theme"}`,style:S,onContextMenu:m,children:[g.jsx(Nn,{id:"top",type:"source",position:Me.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Me.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Me.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Me.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),!C&&!T&&g.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold text-center flex items-center justify-center gap-2",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{children:o})]}),C&&g.jsxs("div",{className:"px-3 py-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),e.description&&g.jsx("div",{className:"text-xs text-gray-700 mt-1",dangerouslySetInnerHTML:{__html:sE.sanitize(e.description)}})]}),T&&g.jsxs("div",{className:"px-3 py-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),g.jsxs("div",{className:"text-xs space-y-1 mt-2",children:[e.timing&&e.event&&g.jsxs("div",{className:"font-mono text-[11px] text-orange-700",children:[e.timing," ",e.event]}),e.targetTable&&g.jsxs("div",{className:"text-gray-700",children:["ON ",g.jsx("span",{className:"font-semibold text-gray-700",children:e.targetTable})]}),e.level&&g.jsxs("div",{className:"text-gray-600 text-[10px]",children:["FOR EACH ",e.level]}),e.description&&g.jsx("div",{className:"text-gray-700 mt-1 pt-1 border-t border-gray-300",dangerouslySetInnerHTML:{__html:sE.sanitize(e.description)}})]})]}),E&&!C&&g.jsx("div",{className:"px-4 py-3",children:g.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.icon&&g.jsx("span",{className:"text-3xl",children:e.icon}),g.jsx("span",{className:"font-semibold text-theme text-center",children:o}),e.description&&g.jsx("div",{className:"text-xs text-muted mt-1 text-center",dangerouslySetInnerHTML:{__html:sE.sanitize(e.description)}})]})}),(l==="entity"||l==="weak-entity")&&x.length>0&&g.jsx("div",{className:"px-3 py-2 border-t border-theme/20",children:g.jsx("div",{className:"space-y-1 text-xs",children:x.map((N,A)=>{const _=e.primaryKey&&N.includes(e.primaryKey),O=e.foreignKeys&&e.foreignKeys.split(`
`).some(R=>N.includes(R));return g.jsx("div",{className:`font-mono ${_?"font-bold text-yellow-600 dark:text-yellow-400":O?"text-blue-600 dark:text-blue-400":""}`,children:N.trim().startsWith("+")?g.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[" ",N.trim().substring(1).trim()]}):N.trim()},A)})})})]}),i.visible&&mh.createPortal(g.jsxs(gt.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),d(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Ey,{className:"w-4 h-4"}),"Settings"]}),r&&g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),p(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[g.jsx(eN,{className:"w-4 h-4"}),"Detach from Group"]}),g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),f(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(rA,{className:"w-4 h-4"}),"Duplicate"]}),g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),u(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[g.jsx(fu,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});o9.displayName="ERNode";const a9=ke.memo(({id:t,data:e,onCopy:n,isInGroup:r})=>{const[i,s]=M.useState({visible:!1,x:0,y:0}),[o,l]=M.useState(null),[u,d]=M.useState({name:"",type:""}),f=e.componentName||e.label,p=ke.useMemo(()=>{if(!e.attributes)return[];if(Array.isArray(e.attributes))return e.attributes;if(typeof e.attributes=="string")try{const I=JSON.parse(e.attributes);return Array.isArray(I)?I:[]}catch{return[]}return[]},[e.attributes]),m=ke.useMemo(()=>e.renderConfig?.columns&&e.renderConfig.columns.length>0?e.renderConfig.columns:[{key:"pk",label:"PK",width:"w-6"},{key:"name",label:"Column Name",width:"flex-1"},{key:"type",label:"Data Type",width:"w-24"},{key:"actions",label:"",width:"w-8"}],[e.renderConfig]),b=M.useCallback(I=>{I.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),x=M.useCallback(I=>{I.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),w=M.useCallback(I=>{I.stopPropagation(),n?.(t,e)},[t,e,n]),S=M.useCallback(I=>{I.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:t}}))},[t]),C=M.useCallback(I=>{I.preventDefault(),I.stopPropagation(),s({visible:!0,x:I.clientX,y:I.clientY})},[]),T=M.useCallback(()=>{s({visible:!1,x:0,y:0})},[]),E=M.useCallback(I=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-delete",{detail:{nodeId:t,attributeId:I}}))},[t]),N=M.useCallback(I=>{I.stopPropagation();const q=e.componentId?.startsWith("uml-")?{id:`attr-${Date.now()}`,name:"+ newMethod()",type:"void",isNullable:!1}:{id:`attr-${Date.now()}`,name:"newColumn",type:"VARCHAR(255)",isNullable:!0};globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-add",{detail:{nodeId:t,attribute:q}}))},[t,e.componentId]),A=M.useCallback((I,F)=>{F.stopPropagation(),l(I.id),d({name:I.name,type:I.type})},[]),_=M.useCallback(()=>{o&&(globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-update",{detail:{nodeId:t,attributeId:o,name:u.name,type:u.type}})),l(null))},[t,o,u]),O=M.useCallback(()=>{l(null)},[]),R=M.useCallback((I,F)=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-toggle",{detail:{nodeId:t,attributeId:I,key:F}}))},[t]),L=M.useCallback((I,F,q)=>{const U=I.width||"flex-1",P=F[I.key];if(I.type==="boolean"){const H=!!P,V=I.key==="isNullable"?!H:H,G=V?I.icon?.active:I.icon?.inactive,te=V?I.color?.active:I.color?.inactive;return g.jsx("button",{type:"button",onClick:()=>R(F.id,I.key),className:`${U} flex items-center justify-center ${te||""}`,title:I.label,children:G?g.jsx("span",{className:"text-xs",children:G}):g.jsx("div",{className:"w-3 h-3 border border-theme/40 rounded"})},I.key)}if(I.type==="text"&&I.editable){if(q)return g.jsx("input",{type:"text",value:String(u[I.key]||P||""),onChange:j=>d({...u,[I.key]:j.target.value}),onKeyDown:j=>{j.key==="Enter"&&_(),j.key==="Escape"&&O()},className:`${U} px-1 py-0.5 bg-surface border border-theme/40 rounded text-xs`,autoFocus:I.key==="name",onClick:j=>j.stopPropagation()},I.key);let H="text-xs cursor-pointer";return I.key==="name"?F.isPrimaryKey?H+=" font-semibold text-yellow-600 dark:text-yellow-400":F.isForeignKey&&(H+=" text-blue-600 dark:text-blue-400"):I.key==="type"&&(H+=" text-muted"),g.jsx("span",{className:`${U} truncate ${H}`,onDoubleClick:j=>A(F,j),title:"Double-click to edit",role:"button",tabIndex:0,children:String(P||"")},I.key)}return I.type==="readonly"&&I.key==="actions"?q?g.jsx("button",{type:"button",onClick:_,className:`${U} text-green-600 hover:text-green-700 text-xs`,title:"Save",children:""},"actions"):g.jsx("button",{type:"button",onClick:()=>E(F.id),className:`${U} opacity-0 group-hover:opacity-100 text-red-600 hover:text-red-700 transition-opacity`,title:"Delete attribute",children:g.jsx(fu,{className:"w-3 h-3"})},"actions"):g.jsx("span",{className:U,children:String(P||"")},I.key)},[R,E,A,_,O,u]);return ke.useEffect(()=>{if(i.visible){const I=F=>{const q=document.querySelector("[data-context-menu]");q&&!q.contains(F.target)&&T()};return document.addEventListener("click",I),document.addEventListener("contextmenu",I),()=>{document.removeEventListener("click",I),document.removeEventListener("contextmenu",I)}}},[i.visible,T]),g.jsxs(g.Fragment,{children:[g.jsxs(gt.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[220px] max-h-[500px] bg-surface border-2 border-theme text-theme text-sm shadow-lg cursor-grab relative rounded-lg overflow-hidden flex flex-col",onContextMenu:C,children:[g.jsx(Nn,{id:"top",type:"source",position:Me.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Me.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Me.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Me.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold flex items-center justify-between flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{children:f})]}),g.jsx("button",{type:"button",onClick:N,className:"p-1 hover:bg-white/20 rounded transition-colors",title:"Add attribute",children:g.jsx(VE,{className:"w-4 h-4"})})]}),g.jsx("div",{className:"bg-[var(--bg-hover)] px-3 py-1 border-b border-theme/20 flex items-center gap-2 text-xs font-semibold flex-shrink-0",children:m.map(I=>g.jsx("span",{className:I.width||"flex-1",style:{textAlign:I.align||"left"},children:I.label},I.key))}),g.jsx("div",{className:"divide-y divide-theme/10 overflow-y-auto flex-1 table-node-scroll",children:p.map(I=>{const F=o===I.id;return g.jsx("div",{className:"flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] group",children:m.map(q=>L(q,I,F))},I.id)})}),p.length===0&&g.jsx("div",{className:"px-3 py-4 text-center text-xs text-muted",children:"Click + to add attributes"})]}),i.visible&&mh.createPortal(g.jsxs(gt.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[g.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),x(I),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Ey,{className:"w-4 h-4"}),"Settings"]}),g.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),N(I),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(VE,{className:"w-4 h-4"}),"Add Attribute"]}),r&&g.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),S(I),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[g.jsx(eN,{className:"w-4 h-4"}),"Detach from Group"]}),g.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),w(I),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(rA,{className:"w-4 h-4"}),"Duplicate"]}),g.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),b(I),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[g.jsx(fu,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});a9.displayName="TableNode";const l0e=({sourceX:t,sourceY:e,targetX:n,targetY:r},i)=>{const s=(t+n)/2,o=(e+r)/2;return`M ${t} ${e} Q ${s} ${o+i} ${n} ${r}`},c0e=(t,e)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=t;if(e){const d=n<i?25:-25,f=l0e({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,b=p,x=m+d/2;return{edgePath:f,centerX:b,centerY:x}}const[o]=Jy(t),[l,u]=Qy({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},u0e=t=>{const{id:e,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:f,selected:p,markerEnd:m}=t,[b,x]=M.useState(!1),[w,S]=M.useState(f?.label??""),[C,T]=M.useState(f?.hasLabel??!1),E=M.useRef(null),N=lt(U=>{const P=U.edges.some(H=>H.id!==e&&H.source===r&&H.target===n);return P&&console.log(`Bi-directional edge detected: ${e} (${n} -> ${r})`),P}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:O,centerY:R}=c0e(A,N),L=U=>{U.stopPropagation(),x(!0),setTimeout(()=>E.current?.focus(),0)},I=U=>{U.stopPropagation(),T(!0),x(!0),setTimeout(()=>E.current?.focus(),0)},F=U=>{U.stopPropagation(),T(!1),S(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:"",hasLabel:!1}}))},q=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:w,hasLabel:C||w.trim().length>0}}))};return g.jsxs("g",{className:"react-flow__edge",children:[g.jsx("defs",{children:g.jsx("marker",{id:`arrow-${e}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:g.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),g.jsx("path",{id:e,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:m||`url(#arrow-${e})`,className:"transition-colors"}),g.jsx("foreignObject",{x:O-75,y:R-12,width:150,height:24,className:"overflow-visible",children:g.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:C?g.jsx("div",{className:"flex items-center gap-1",children:b?g.jsx("input",{ref:E,value:w,onChange:U=>S(U.target.value),onBlur:q,onKeyDown:U=>{U.key==="Enter"&&q(),U.key==="Escape"&&(x(!1),S(f?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onDoubleClick:L,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:w||"Label"}),p&&g.jsx("button",{onClick:F,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&g.jsx("button",{onClick:I,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},d0e=({sourceX:t,sourceY:e,targetX:n,targetY:r},i)=>{const s=(t+n)/2,o=(e+r)/2;return`M ${t} ${e} Q ${s} ${o+i} ${n} ${r}`},f0e=(t,e)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=t;if(e){const d=n<i?25:-25,f=d0e({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,b=p,x=m+d/2;return{edgePath:f,centerX:b,centerY:x}}const[o]=Jy(t),[l,u]=Qy({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},h0e=t=>{switch(t){case"one-to-one":case"one-to-many":case"zero-to-one":case"one-mandatory-many-optional":case"one-or-many":return"one";case"many-to-one":case"many-to-many":case"mandatory-many-to-many":case"optional-many-to-many":return"many";case"mandatory-one-to-one":case"mandatory-one-to-many":return"mandatory-one";case"optional-zero-to-one":case"optional-zero-to-many":case"zero-to-many":return"optional-zero";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"one";case"recursive-many-to-many":return"many";default:return"one"}},p0e=t=>{switch(t){case"one-to-one":case"many-to-one":case"zero-to-one":return"one";case"one-to-many":case"many-to-many":case"zero-to-many":case"one-mandatory-many-optional":case"one-or-many":return"many";case"mandatory-one-to-one":return"mandatory-one";case"mandatory-one-to-many":case"mandatory-many-to-many":return"mandatory-many";case"optional-zero-to-one":return"optional-one";case"optional-zero-to-many":case"optional-many-to-many":return"optional-many";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"many";case"recursive-many-to-many":return"many";default:return"many"}},m0e=t=>{const{id:e,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:f,selected:p}=t,m=f||{},[b,x]=M.useState(!1),[w,S]=M.useState(m.label??""),[C,T]=M.useState(m.hasLabel??!1),[E,N]=M.useState(m.cardinality??"one-to-many"),A=M.useRef(null),_=lt(G=>G.edges.some(z=>z.id!==e&&z.source===r&&z.target===n)),O={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:R,centerX:L,centerY:I}=f0e(O,_),F=G=>{G.stopPropagation(),x(!0),setTimeout(()=>A.current?.focus(),0)},q=G=>{G.stopPropagation(),T(!0),x(!0),setTimeout(()=>A.current?.focus(),0)},U=G=>{G.stopPropagation(),T(!1),S(""),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:"",hasLabel:!1}}))},P=()=>{x(!1),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:w,hasLabel:C||w.trim().length>0}}))},H=G=>{N(G),globalThis.dispatchEvent(new CustomEvent("diagram:edge-cardinality-change",{detail:{id:e,cardinality:G}}))},j=h0e(E),V=p0e(E);return g.jsxs("g",{className:"react-flow__edge",children:[g.jsxs("defs",{children:[g.jsx("marker",{id:`er-one-${e}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:g.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),g.jsxs("marker",{id:`er-many-${e}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[g.jsx("line",{x1:"0",y1:"10",x2:"15",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-mandatory-one-${e}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[g.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"3",y1:"0",x2:"3",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-mandatory-many-${e}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[g.jsx("line",{x1:"0",y1:"10",x2:"12",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"3",y1:"8",x2:"3",y2:"12",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsx("marker",{id:`er-optional-zero-${e}`,viewBox:"0 0 12 12",refX:"10",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:g.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})}),g.jsxs("marker",{id:`er-optional-one-${e}`,viewBox:"0 0 15 12",refX:"14",refY:"6",markerWidth:"12",markerHeight:"10",orient:"auto",children:[g.jsx("circle",{cx:"4",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),g.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"12",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-optional-many-${e}`,viewBox:"0 0 25 20",refX:"23",refY:"10",markerWidth:"14",markerHeight:"12",orient:"auto",children:[g.jsx("circle",{cx:"4",cy:"10",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),g.jsx("line",{x1:"10",y1:"10",x2:"18",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsx("marker",{id:`er-one-source-${e}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:g.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),g.jsxs("marker",{id:`er-many-source-${e}`,viewBox:"0 0 20 20",refX:"2",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[g.jsx("line",{x1:"20",y1:"10",x2:"5",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-mandatory-one-source-${e}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[g.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"7",y1:"0",x2:"7",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsx("marker",{id:`er-optional-zero-source-${e}`,viewBox:"0 0 12 12",refX:"2",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:g.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})})]}),g.jsx("path",{id:e,d:R,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:`url(#er-${V}-${e})`,markerStart:`url(#er-${j}-source-${e})`,className:"transition-colors"}),g.jsx("foreignObject",{x:L-100,y:I-40,width:200,height:80,className:"overflow-visible",children:g.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pointer-events-auto gap-2",children:[C?g.jsx("div",{className:"flex items-center gap-1",children:b?g.jsx("input",{ref:A,value:w,onChange:G=>S(G.target.value),onBlur:P,onKeyDown:G=>{G.key==="Enter"&&P(),G.key==="Escape"&&(x(!1),S(m.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onDoubleClick:F,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:w||"Label"}),p&&g.jsx("button",{onClick:U,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",type:"button",children:""})]})}):p&&g.jsx("button",{onClick:q,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",type:"button",children:"+ Label"}),p&&g.jsx("div",{className:"flex items-center gap-1 bg-[var(--surface)] border border-[var(--brand)] rounded px-2 py-1",children:g.jsxs("select",{value:E,onChange:G=>H(G.target.value),className:"text-xs bg-transparent text-theme focus:outline-none cursor-pointer",onClick:G=>G.stopPropagation(),children:[g.jsxs("optgroup",{label:" Basic Cardinality ",children:[g.jsx("option",{value:"one-to-one",children:"1:1 (One to One)"}),g.jsx("option",{value:"one-to-many",children:"1:N (One to Many)"}),g.jsx("option",{value:"many-to-one",children:"N:1 (Many to One)"}),g.jsx("option",{value:"many-to-many",children:"N:M (Many to Many)"})]}),g.jsxs("optgroup",{label:" Mandatory (Must Participate) ",children:[g.jsx("option",{value:"mandatory-one-to-one",children:"1:1 Mandatory (Both must exist)"}),g.jsx("option",{value:"mandatory-one-to-many",children:"1:N Mandatory (Both must exist)"}),g.jsx("option",{value:"mandatory-many-to-many",children:"M:N Mandatory (Both must exist)"})]}),g.jsxs("optgroup",{label:" Optional (May Participate) ",children:[g.jsx("option",{value:"optional-zero-to-one",children:"0:1 Optional (Zero or One)"}),g.jsx("option",{value:"optional-zero-to-many",children:"0:N Optional (Zero or Many)"}),g.jsx("option",{value:"optional-many-to-many",children:"0:M to 0:N Optional (Both optional)"})]}),g.jsxs("optgroup",{label:" Mixed Participation ",children:[g.jsx("option",{value:"one-mandatory-many-optional",children:"1 to 0..N (One mandatory, many optional)"}),g.jsx("option",{value:"zero-to-one",children:"0..1 (Zero or One)"}),g.jsx("option",{value:"zero-to-many",children:"0..N (Zero or Many)"}),g.jsx("option",{value:"one-or-many",children:"1..N (One or Many - at least one)"})]}),g.jsxs("optgroup",{label:" Recursive (Self-Referencing) ",children:[g.jsx("option",{value:"recursive-one-to-one",children:"Self 1:1 (Recursive One-to-One)"}),g.jsx("option",{value:"recursive-one-to-many",children:"Self 1:N (Recursive One-to-Many)"}),g.jsx("option",{value:"recursive-many-to-many",children:"Self M:N (Recursive Many-to-Many)"})]})]})})]})})]})},g0e=({id:t,data:e})=>{const n=e.backgroundColor||"rgba(100, 100, 255, 0.05)",r=e.borderColor||"rgba(100, 100, 255, 0.3)",i=ke.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),s=ke.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]);return g.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[g.jsx(Ehe,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),g.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[g.jsx(gt.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:g.jsx(Ey,{className:"w-3 h-3"})}),g.jsx(gt.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:g.jsx(fu,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.icon&&g.jsx("span",{children:e.icon}),g.jsx("span",{children:e.label})]}),e.subtitle&&g.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:e.subtitle}),g.jsx(Nn,{id:"top",type:"source",position:Me.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Me.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Me.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Me.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},y0e=({property:t,onUpdate:e,onDelete:n,isNew:r=!1})=>{const[i,s]=M.useState(r),o=d=>{e(t.id,{value:d})},l=(d,f)=>{e(t.id,{[d]:f})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return g.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[g.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[g.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?g.jsx(DJ,{size:18}):g.jsx(f8,{size:18}),g.jsx("span",{className:"text-sm font-medium text-theme truncate",children:t.label||"Unnamed Property"})]}),g.jsx("button",{type:"button",onClick:()=>n(t.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:g.jsx(fu,{size:16})})]}),i&&g.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx(Vm,{id:`${t.id}-key`,label:"Key",value:t.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),g.jsx(Vm,{id:`${t.id}-label`,label:"Label",value:t.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),g.jsx(tF,{id:`${t.id}-type`,label:"Type",value:t.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),g.jsxs("div",{className:"border-t border-theme pt-3",children:[g.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),t.type==="text"&&g.jsx(Vm,{id:`${t.id}-value`,label:"",value:String(t.value),onChange:o,placeholder:"Enter value"}),t.type==="textarea"&&g.jsx(Kg,{id:`${t.id}-value`,label:"",value:String(t.value),onChange:o,placeholder:"Enter value"}),t.type==="number"&&g.jsx(eF,{id:`${t.id}-value`,label:"",value:Number(t.value)||0,onChange:d=>o(d)}),t.type==="boolean"&&g.jsx("div",{className:"pt-1",children:g.jsx(Qq,{id:`${t.id}-value`,checked:!!t.value,onChange:o,label:"Enabled"})})]})]})]})},b0e=()=>{const[t,e]=M.useState([]),n=M.useCallback((u,d="info",f)=>{const m={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:f};e(b=>[...b,m])},[]),r=M.useCallback(u=>{e(d=>d.filter(f=>f.id!==u))},[]),i=M.useCallback((u,d)=>{n(u,"success",d)},[n]),s=M.useCallback((u,d)=>{n(u,"error",d)},[n]),o=M.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=M.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:t,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},x0e=({toast:t,onClose:e})=>{M.useEffect(()=>{const i=setTimeout(()=>{e(t.id)},t.duration||5e3);return()=>clearTimeout(i)},[t.id,t.duration,e]);const n=()=>{switch(t.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(t.type){case"success":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return g.jsxs(gt.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[g.jsx("div",{className:"flex-shrink-0",children:r()}),g.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),g.jsx("button",{type:"button",onClick:()=>e(t.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},v0e=({toasts:t,onClose:e})=>g.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:g.jsx(uu,{children:t.map(n=>g.jsx("div",{className:"pointer-events-auto",children:g.jsx(x0e,{toast:n,onClose:e})},n.id))})}),ms={YJS_COLLABORATION:"yjs-collaboration",AUTO_SAVE:"auto-save",OFFLINE_MODE:"offline-mode"},F6={development:{[ms.YJS_COLLABORATION]:!0,[ms.AUTO_SAVE]:!0,[ms.OFFLINE_MODE]:!1},staging:{[ms.YJS_COLLABORATION]:!1,[ms.AUTO_SAVE]:!0,[ms.OFFLINE_MODE]:!1},production:{[ms.YJS_COLLABORATION]:!1,[ms.AUTO_SAVE]:!0,[ms.OFFLINE_MODE]:!1}},w0e=(t,e="development")=>{const n=`feature-flag-${t}`,r=localStorage.getItem(n);return r!==null?r==="true":(F6[e]||F6.development)[t]??!1},S0e="ws://diagrammatic-yjs-server-production.up.railway.app",l9=()=>S0e,Fr=()=>new Map,F2=t=>{const e=Fr();return t.forEach((n,r)=>{e.set(r,n)}),e},js=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},k0e=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},C0e=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Ca=()=>new Set,oE=t=>t[t.length-1],E0e=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},fo=Array.from,N0e=Array.isArray;class c9{constructor(){this._observers=Fr()}on(e,n){return js(this._observers,e,Ca).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return fo((this._observers.get(e)||Fr()).values()).forEach(r=>r(...n))}destroy(){this._observers=Fr()}}class T0e{constructor(){this._observers=Fr()}on(e,n){js(this._observers,e,Ca).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return fo((this._observers.get(e)||Fr()).values()).forEach(r=>r(...n))}destroy(){this._observers=Fr()}}const ho=Math.floor,Wm=Math.abs,iA=(t,e)=>t<e?t:e,Zl=(t,e)=>t>e?t:e,A0e=Math.pow,u9=t=>t!==0?t<0:1/t<0,H6=1,U6=2,aE=4,lE=8,oh=32,oo=64,ci=128,k0=31,H2=63,Nl=127,M0e=2147483647,d9=Number.MAX_SAFE_INTEGER,_0e=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&ho(t)===t),D0e=String.fromCharCode,R0e=t=>t.toLowerCase(),j0e=/^\s*/g,O0e=t=>t.replace(j0e,""),L0e=/([A-Z])/g,$6=(t,e)=>O0e(t.replace(L0e,n=>`${e}${R0e(n)}`)),I0e=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},ah=typeof TextEncoder<"u"?new TextEncoder:null,P0e=t=>ah.encode(t),B0e=ah?P0e:I0e;let Tf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Tf&&Tf.decode(new Uint8Array).length===1&&(Tf=null);class zh{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const pr=()=>new zh,sA=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Qt=t=>{const e=new Uint8Array(sA(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},z0e=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Zl(n,e)*2),t.cpos=0)},Fn=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},U2=Fn,qe=(t,e)=>{for(;e>Nl;)Fn(t,ci|Nl&e),e=ho(e/128);Fn(t,Nl&e)},oA=(t,e)=>{const n=u9(e);for(n&&(e=-e),Fn(t,(e>H2?ci:0)|(n?oo:0)|H2&e),e=ho(e/64);e>0;)Fn(t,(e>Nl?ci:0)|Nl&e),e=ho(e/128)},$2=new Uint8Array(3e4),V0e=$2.length/3,q0e=(t,e)=>{if(e.length<V0e){const n=ah.encodeInto(e,$2).written||0;qe(t,n);for(let r=0;r<n;r++)Fn(t,$2[r])}else pn(t,B0e(e))},F0e=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;qe(t,r);for(let i=0;i<r;i++)Fn(t,n.codePointAt(i))},Tl=ah&&ah.encodeInto?q0e:F0e,C0=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=iA(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Zl(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},pn=(t,e)=>{qe(t,e.byteLength),C0(t,e)},aA=(t,e)=>{z0e(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},H0e=(t,e)=>aA(t,4).setFloat32(0,e,!1),U0e=(t,e)=>aA(t,8).setFloat64(0,e,!1),$0e=(t,e)=>aA(t,8).setBigInt64(0,e,!1),G6=new DataView(new ArrayBuffer(4)),G0e=t=>(G6.setFloat32(0,t),G6.getFloat32(0)===t),lh=(t,e)=>{switch(typeof e){case"string":Fn(t,119),Tl(t,e);break;case"number":_0e(e)&&Wm(e)<=M0e?(Fn(t,125),oA(t,e)):G0e(e)?(Fn(t,124),H0e(t,e)):(Fn(t,123),U0e(t,e));break;case"bigint":Fn(t,122),$0e(t,e);break;case"object":if(e===null)Fn(t,126);else if(N0e(e)){Fn(t,117),qe(t,e.length);for(let n=0;n<e.length;n++)lh(t,e[n])}else if(e instanceof Uint8Array)Fn(t,116),pn(t,e);else{Fn(t,118);const n=Object.keys(e);qe(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];Tl(t,i),lh(t,e[i])}}break;case"boolean":Fn(t,e?120:121);break;default:Fn(t,127)}};class W6 extends zh{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&qe(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const K6=t=>{t.count>0&&(oA(t.encoder,t.count===1?t.s:-t.s),t.count>1&&qe(t.encoder,t.count-2))};class Km{constructor(){this.encoder=new zh,this.s=0,this.count=0}write(e){this.s===e?this.count++:(K6(this),this.count=1,this.s=e)}toUint8Array(){return K6(this),Qt(this.encoder)}}const Y6=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);oA(t.encoder,e),t.count>1&&qe(t.encoder,t.count-2)}};class cE{constructor(){this.encoder=new zh,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Y6(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Y6(this),Qt(this.encoder)}}class W0e{constructor(){this.sarr=[],this.s="",this.lensE=new Km}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new zh;return this.sarr.push(this.s),this.s="",Tl(e,this.sarr.join("")),C0(e,this.lensE.toUint8Array()),Qt(e)}}const Ea=t=>new Error(t),Cs=()=>{throw Ea("Method unimplemented")},As=()=>{throw Ea("Unexpected case")},f9=Ea("Unexpected end of array"),h9=Ea("Integer out of Range");class E0{constructor(e){this.arr=e,this.pos=0}}const ja=t=>new E0(t),K0e=t=>t.pos!==t.arr.length,Y0e=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},hr=t=>Y0e(t,Je(t)),Eu=t=>t.arr[t.pos++],Je=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Nl)*n,n*=128,i<ci)return e;if(e>d9)throw h9}throw f9},lA=t=>{let e=t.arr[t.pos++],n=e&H2,r=64;const i=(e&oo)>0?-1:1;if((e&ci)===0)return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&Nl)*r,r*=128,e<ci)return i*n;if(n>d9)throw h9}throw f9},X0e=t=>{let e=Je(t);if(e===0)return"";{let n=String.fromCodePoint(Eu(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Eu(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},Z0e=t=>Tf.decode(hr(t)),xa=Tf?Z0e:X0e,cA=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},J0e=t=>cA(t,4).getFloat32(0,!1),Q0e=t=>cA(t,8).getFloat64(0,!1),ebe=t=>cA(t,8).getBigInt64(0,!1),tbe=[t=>{},t=>null,lA,J0e,Q0e,ebe,t=>!1,t=>!0,xa,t=>{const e=Je(t),n={};for(let r=0;r<e;r++){const i=xa(t);n[i]=ch(t)}return n},t=>{const e=Je(t),n=[];for(let r=0;r<e;r++)n.push(ch(t));return n},hr],ch=t=>tbe[127-Eu(t)](t);class X6 extends E0{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),K0e(this)?this.count=Je(this)+1:this.count=-1),this.count--,this.s}}class Ym extends E0{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=lA(this);const e=u9(this.s);this.count=1,e&&(this.s=-this.s,this.count=Je(this)+2)}return this.count--,this.s}}class uE extends E0{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=lA(this),n=e&1;this.diff=ho(e/2),this.count=1,n&&(this.count=Je(this)+2)}return this.s+=this.diff,this.count--,this.s}}class nbe{constructor(e){this.decoder=new Ym(e),this.str=xa(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const rbe=crypto.getRandomValues.bind(crypto),p9=()=>rbe(new Uint32Array(1))[0],ibe="10000000-1000-4000-8000"+-1e11,sbe=()=>ibe.replace(/[018]/g,t=>(t^p9()&15>>t/4).toString(16)),Bl=Date.now,Z6=t=>new Promise(t);Promise.all.bind(Promise);const J6=t=>t===void 0?null:t;class obe{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let m9=new obe,uA=!0;try{typeof localStorage<"u"&&localStorage&&(m9=localStorage,uA=!1)}catch{}const g9=m9,abe=t=>uA||addEventListener("storage",t),lbe=t=>uA||removeEventListener("storage",t),cbe=Object.assign,y9=Object.keys,ube=(t,e)=>{for(const n in t)e(t[n],n)},dbe=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},Q6=t=>y9(t).length,eB=t=>y9(t).length,fbe=t=>{for(const e in t)return!1;return!0},hbe=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},b9=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),pbe=(t,e)=>t===e||eB(t)===eB(e)&&hbe(t,(n,r)=>(n!==void 0||b9(e,r))&&e[r]===n),mbe=Object.freeze,x9=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&x9(t[e])}return mbe(t)},tB=Symbol("Equality"),dA=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&dA(t,e,n+1)}},gbe=t=>t,Af=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor)return!1;if(t[tB]!=null)return t[tB](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Af(t.get(n),e.get(n)))return!1;break}case Object:if(Q6(t)!==Q6(e))return!1;for(const n in t)if(!b9(t,n)||!Af(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Af(t[n],e[n]))return!1;break;default:return!1}return!0},ybe=(t,e)=>e.includes(t);var v9={};const Na=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",w9=typeof window<"u"&&typeof document<"u"&&!Na;let hs;const bbe=()=>{if(hs===void 0)if(Na){hs=Fr();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&hs.set(e,""),e=r):e!==null&&(hs.set(e,r),e=null)}e!==null&&hs.set(e,"")}else typeof location=="object"?(hs=Fr(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");hs.set(`--${$6(e,"-")}`,n),hs.set(`-${$6(e,"-")}`,n)}})):hs=Fr();return hs},G2=t=>bbe().has(t),cy=t=>J6(Na?v9[t.toUpperCase().replaceAll("-","_")]:g9.getItem(t)),S9=t=>G2("--"+t)||cy(t)!==null;S9("production");const xbe=Na&&ybe(v9.FORCE_COLOR,["true","1","2"]),vbe=xbe||!G2("--no-colors")&&!S9("no-color")&&(!Na||process.stdout.isTTY)&&(!Na||G2("--color")||cy("COLORTERM")!==null||(cy("TERM")||"").includes("color")),k9=t=>new Uint8Array(t),wbe=(t,e,n)=>new Uint8Array(t,e,n),Sbe=t=>new Uint8Array(t),kbe=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=D0e(t[n]);return btoa(e)},Cbe=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Ebe=t=>{const e=atob(t),n=k9(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},Nbe=t=>{const e=Buffer.from(t,"base64");return wbe(e.buffer,e.byteOffset,e.byteLength)},Tbe=w9?kbe:Cbe,Abe=w9?Ebe:Nbe,Mbe=t=>{const e=k9(t.byteLength);return e.set(t),e};class _be{constructor(e,n){this.left=e,this.right=n}}const Js=(t,e)=>new _be(t,e);typeof DOMParser<"u"&&new DOMParser;const Dbe=t=>k0e(t,(e,n)=>`${n}:${e};`).join(""),bo=Symbol,C9=bo(),E9=bo(),Rbe=bo(),jbe=bo(),Obe=bo(),N9=bo(),Lbe=bo(),fA=bo(),Ibe=bo(),Pbe=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},Bbe={[C9]:Js("font-weight","bold"),[E9]:Js("font-weight","normal"),[Rbe]:Js("color","blue"),[Obe]:Js("color","green"),[jbe]:Js("color","grey"),[N9]:Js("color","red"),[Lbe]:Js("color","purple"),[fA]:Js("color","orange"),[Ibe]:Js("color","black")},zbe=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=Fr();let i=[],s=0;for(;s<t.length;s++){const o=t[s],l=Bbe[o];if(l!==void 0)r.set(l.left,l.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const u=Dbe(r);s>0||u.length>0?(e.push("%c"+o),n.push(u)):e.push(o)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const o=t[s];o instanceof Symbol||i.push(o)}return i},T9=vbe?zbe:Pbe,Vbe=(...t)=>{console.log(...T9(t)),A9.forEach(e=>e.print(t))},qbe=(...t)=>{console.warn(...T9(t)),t.unshift(fA),A9.forEach(e=>e.print(t))},A9=Ca(),M9=t=>({[Symbol.iterator](){return this},next:t}),Fbe=(t,e)=>M9(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),dE=(t,e)=>M9(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class hA{constructor(e,n){this.clock=e,this.len=n}}class Vh{constructor(){this.clients=new Map}}const _9=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);if(s!=null){const o=s[s.length-1],l=o.id.clock+o.length;for(let u=0,d=r[u];u<r.length&&d.clock<l;d=r[++u])H9(t,s,d.clock,d.len,n)}}),Hbe=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=ho((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},D9=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&Hbe(n,e.clock)!==null},pA=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=Zl(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},Ube=t=>{const e=new Vh;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)E0e(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return pA(e),e},uy=(t,e,n,r)=>{js(t.clients,e,()=>[]).push(new hA(n,r))},$be=()=>new Vh,Gbe=t=>{const e=$be();return t.clients.forEach((n,r)=>{const i=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const l=o.id.clock;let u=o.length;if(s+1<n.length)for(let d=n[s+1];s+1<n.length&&d.deleted;d=n[++s+1])u+=d.length;i.push(new hA(l,u))}}i.length>0&&e.clients.set(r,i)}),e},Vu=(t,e)=>{qe(t.restEncoder,e.clients.size),fo(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),qe(t.restEncoder,n);const i=r.length;qe(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},mA=t=>{const e=new Vh,n=Je(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=Je(t.restDecoder),s=Je(t.restDecoder);if(s>0){const o=js(e.clients,i,()=>[]);for(let l=0;l<s;l++)o.push(new hA(t.readDsClock(),t.readDsLen()))}}return e},nB=(t,e,n)=>{const r=new Vh,i=Je(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=Je(t.restDecoder),l=Je(t.restDecoder),u=n.clients.get(o)||[],d=Un(n,o);for(let f=0;f<l;f++){const p=t.readDsClock(),m=p+t.readDsLen();if(p<d){d<m&&uy(r,o,d,m-d);let b=Ms(u,p),x=u[b];for(!x.deleted&&x.id.clock<p&&(u.splice(b+1,0,yy(e,x,p-x.id.clock)),b++);b<u.length&&(x=u[b++],x.id.clock<m);)x.deleted||(m<x.id.clock+x.length&&u.splice(b,0,yy(e,x,m-x.id.clock)),x.delete(e))}else uy(r,o,p,m-p)}}if(r.clients.size>0){const s=new zl;return qe(s.restEncoder,0),Vu(s,r),s.toUint8Array()}return null},R9=p9;class qu extends c9{constructor({guid:e=sbe(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=R9(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new q9,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Z6(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const u=()=>Z6(d=>{const f=p=>{(p===void 0||p===!0)&&(this.off("sync",f),d())};this.on("sync",f)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Pt(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(fo(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Pt(this,e,n)}get(e,n=ir){const r=js(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==ir&&i!==n)if(i===ir){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,au)}getText(e=""){return this.get(e,Au)}getMap(e=""){return this.get(e,Tu)}getXmlElement(e=""){return this.get(e,Mu)}getXmlFragment(e=""){return this.get(e,Vl)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,fo(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new qu({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Pt(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class j9{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Je(this.restDecoder)}readDsLen(){return Je(this.restDecoder)}}class O9 extends j9{readLeftID(){return ut(Je(this.restDecoder),Je(this.restDecoder))}readRightID(){return ut(Je(this.restDecoder),Je(this.restDecoder))}readClient(){return Je(this.restDecoder)}readInfo(){return Eu(this.restDecoder)}readString(){return xa(this.restDecoder)}readParentInfo(){return Je(this.restDecoder)===1}readTypeRef(){return Je(this.restDecoder)}readLen(){return Je(this.restDecoder)}readAny(){return ch(this.restDecoder)}readBuf(){return Mbe(hr(this.restDecoder))}readJSON(){return JSON.parse(xa(this.restDecoder))}readKey(){return xa(this.restDecoder)}}class Wbe{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Je(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Je(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Nu extends Wbe{constructor(e){super(e),this.keys=[],Je(e),this.keyClockDecoder=new uE(hr(e)),this.clientDecoder=new Ym(hr(e)),this.leftClockDecoder=new uE(hr(e)),this.rightClockDecoder=new uE(hr(e)),this.infoDecoder=new X6(hr(e),Eu),this.stringDecoder=new nbe(hr(e)),this.parentInfoDecoder=new X6(hr(e),Eu),this.typeRefDecoder=new Ym(hr(e)),this.lenDecoder=new Ym(hr(e))}readLeftID(){return new ou(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ou(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ch(this.restDecoder)}readBuf(){return hr(this.restDecoder)}readJSON(){return ch(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class L9{constructor(){this.restEncoder=pr()}toUint8Array(){return Qt(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){qe(this.restEncoder,e)}writeDsLen(e){qe(this.restEncoder,e)}}class qh extends L9{writeLeftID(e){qe(this.restEncoder,e.client),qe(this.restEncoder,e.clock)}writeRightID(e){qe(this.restEncoder,e.client),qe(this.restEncoder,e.clock)}writeClient(e){qe(this.restEncoder,e)}writeInfo(e){U2(this.restEncoder,e)}writeString(e){Tl(this.restEncoder,e)}writeParentInfo(e){qe(this.restEncoder,e?1:0)}writeTypeRef(e){qe(this.restEncoder,e)}writeLen(e){qe(this.restEncoder,e)}writeAny(e){lh(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){Tl(this.restEncoder,JSON.stringify(e))}writeKey(e){Tl(this.restEncoder,e)}}class I9{constructor(){this.restEncoder=pr(),this.dsCurrVal=0}toUint8Array(){return Qt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,qe(this.restEncoder,n)}writeDsLen(e){e===0&&As(),qe(this.restEncoder,e-1),this.dsCurrVal+=e}}class zl extends I9{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new cE,this.clientEncoder=new Km,this.leftClockEncoder=new cE,this.rightClockEncoder=new cE,this.infoEncoder=new W6(U2),this.stringEncoder=new W0e,this.parentInfoEncoder=new W6(U2),this.typeRefEncoder=new Km,this.lenEncoder=new Km}toUint8Array(){const e=pr();return qe(e,0),pn(e,this.keyClockEncoder.toUint8Array()),pn(e,this.clientEncoder.toUint8Array()),pn(e,this.leftClockEncoder.toUint8Array()),pn(e,this.rightClockEncoder.toUint8Array()),pn(e,Qt(this.infoEncoder)),pn(e,this.stringEncoder.toUint8Array()),pn(e,Qt(this.parentInfoEncoder)),pn(e,this.typeRefEncoder.toUint8Array()),pn(e,this.lenEncoder.toUint8Array()),C0(e,Qt(this.restEncoder)),Qt(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){lh(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){lh(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const Kbe=(t,e,n,r)=>{r=Zl(r,e[0].id.clock);const i=Ms(e,r);qe(t.restEncoder,e.length-i),t.writeClient(n),qe(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},gA=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{Un(e,s)>i&&r.set(s,i)}),N0(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),qe(t.restEncoder,r.size),fo(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{Kbe(t,e.clients.get(i),i,s)})},Ybe=(t,e)=>{const n=Fr(),r=Je(t.restDecoder);for(let i=0;i<r;i++){const s=Je(t.restDecoder),o=new Array(s),l=t.readClient();let u=Je(t.restDecoder);n.set(l,{i:0,refs:o});for(let d=0;d<s;d++){const f=t.readInfo();switch(k0&f){case 0:{const p=t.readLen();o[d]=new Ti(ut(l,u),p),u+=p;break}case 10:{const p=Je(t.restDecoder);o[d]=new Ai(ut(l,u),p),u+=p;break}default:{const p=(f&(oo|ci))===0,m=new Ln(ut(l,u),null,(f&ci)===ci?t.readLeftID():null,null,(f&oo)===oo?t.readRightID():null,p?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,p&&(f&oh)===oh?t.readString():null,l$(t,f));o[d]=m,u+=m.length}}}}return n},Xbe=(t,e,n)=>{const r=[];let i=fo(n.keys()).sort((b,x)=>b-x);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let b=n.get(i[i.length-1]);for(;b.refs.length===b.i;)if(i.pop(),i.length>0)b=n.get(i[i.length-1]);else return null;return b};let o=s();if(o===null)return null;const l=new q9,u=new Map,d=(b,x)=>{const w=u.get(b);(w==null||w>x)&&u.set(b,x)};let f=o.refs[o.i++];const p=new Map,m=()=>{for(const b of r){const x=b.id.client,w=n.get(x);w?(w.i--,l.clients.set(x,w.refs.slice(w.i)),n.delete(x),w.i=0,w.refs=[]):l.clients.set(x,[b]),i=i.filter(S=>S!==x)}r.length=0};for(;;){if(f.constructor!==Ai){const x=js(p,f.id.client,()=>Un(e,f.id.client))-f.id.clock;if(x<0)r.push(f),d(f.id.client,f.id.clock-1),m();else{const w=f.getMissing(t,e);if(w!==null){r.push(f);const S=n.get(w)||{refs:[],i:0};if(S.refs.length===S.i)d(w,Un(e,w)),m();else{f=S.refs[S.i++];continue}}else(x===0||x<f.length)&&(f.integrate(t,x),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(o!==null&&o.i<o.refs.length)f=o.refs[o.i++];else{if(o=s(),o===null)break;f=o.refs[o.i++]}}if(l.clients.size>0){const b=new zl;return gA(b,l,new Map),qe(b.restEncoder,0),{missing:u,update:b.toUint8Array()}}return null},Zbe=(t,e)=>gA(t,e.doc.store,e.beforeState),Jbe=(t,e,n,r=new Nu(t))=>Pt(e,i=>{i.local=!1;let s=!1;const o=i.doc,l=o.store,u=Ybe(r,o),d=Xbe(i,l,u),f=l.pendingStructs;if(f){for(const[m,b]of f.missing)if(b<Un(l,m)){s=!0;break}if(d){for(const[m,b]of d.missing){const x=f.missing.get(m);(x==null||x>b)&&f.missing.set(m,b)}f.update=dy([f.update,d.update])}}else l.pendingStructs=d;const p=nB(r,i,l);if(l.pendingDs){const m=new Nu(ja(l.pendingDs));Je(m.restDecoder);const b=nB(m,i,l);p&&b?l.pendingDs=dy([p,b]):l.pendingDs=p||b}else l.pendingDs=p;if(s){const m=l.pendingStructs.update;l.pendingStructs=null,P9(i.doc,m)}},n,!1),P9=(t,e,n,r=Nu)=>{const i=ja(e);Jbe(i,t,n,new r(i))},Qbe=(t,e,n)=>P9(t,e,n,O9),exe=(t,e,n=new Map)=>{gA(t,e.store,n),Vu(t,Gbe(e.store))},txe=(t,e=new Uint8Array([0]),n=new zl)=>{const r=B9(e);exe(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(yxe(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===qh)return mxe(i.map((s,o)=>o===0?s:xxe(s)));if(n.constructor===zl)return dy(i)}return i[0]},nxe=(t,e)=>txe(t,e,new qh),rxe=t=>{const e=new Map,n=Je(t.restDecoder);for(let r=0;r<n;r++){const i=Je(t.restDecoder),s=Je(t.restDecoder);e.set(i,s)}return e},B9=t=>rxe(new j9(ja(t))),z9=(t,e)=>(qe(t.restEncoder,e.size),fo(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{qe(t.restEncoder,n),qe(t.restEncoder,r)}),t),ixe=(t,e)=>z9(t,N0(e.store)),sxe=(t,e=new I9)=>(t instanceof Map?z9(e,t):ixe(e,t),e.toUint8Array()),oxe=t=>sxe(t,new L9);class axe{constructor(){this.l=[]}}const rB=()=>new axe,iB=(t,e)=>t.l.push(e),sB=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},V9=(t,e,n)=>dA(t.l,[e,n]);class ou{constructor(e,n){this.client=e,this.clock=n}}const Am=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,ut=(t,e)=>new ou(t,e),lxe=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw As()},$c=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!D9(e.ds,t.id),W2=(t,e)=>{const n=js(t.meta,W2,Ca),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<Un(r,s)&&Ta(t,ut(s,i))}),_9(t,e.ds,i=>{}),n.add(e))};class q9{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const N0=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},Un=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},F9=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw As()}n.push(e)},Ms=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=ho(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=ho((n+r)/2)}throw As()},cxe=(t,e)=>{const n=t.clients.get(e.client);return n[Ms(n,e.clock)]},fE=cxe,K2=(t,e,n)=>{const r=Ms(e,n),i=e[r];return i.id.clock<n&&i instanceof Ln?(e.splice(r+1,0,yy(t,i,n-i.id.clock)),r+1):r},Ta=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[K2(t,n,e.clock)]},oB=(t,e,n)=>{const r=e.clients.get(n.client),i=Ms(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Ti&&r.splice(i+1,0,yy(t,s,n.clock-s.id.clock+1)),s},uxe=(t,e,n)=>{const r=t.clients.get(e.id.client);r[Ms(r,e.id.clock)]=n},H9=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=K2(t,e,n),l;do l=e[o++],s<l.id.clock+l.length&&K2(t,e,s),i(l);while(o<e.length&&e[o].id.clock<s)};class dxe{constructor(e,n,r){this.doc=e,this.deleteSet=new Vh,this.beforeState=N0(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const aB=(t,e)=>e.deleteSet.clients.size===0&&!C0e(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(pA(e.deleteSet),Zbe(t,e),Vu(t,e.deleteSet),!0),lB=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&js(t.changed,e,Ca).add(n)},Xm=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ln&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},fxe=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const l=i[o],u=l.clock+l.len;for(let d=Ms(s,l.clock),f=s[d];d<s.length&&f.id.clock<u;f=s[++d]){const p=s[d];if(l.clock+l.len<=p.id.clock)break;p instanceof Ln&&p.deleted&&!p.keep&&n(p)&&p.gc(e,!1)}}}},hxe=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],l=iA(i.length-1,1+Ms(i,o.clock+o.len-1));for(let u=l,d=i[u];u>0&&d.id.clock>=o.clock;d=i[u])u-=1+Xm(i,u)}})},U9=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{pA(s),n.afterState=N0(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((u,d)=>l.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,u)})),l.push(()=>{n.changedParentTypes.forEach((u,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(u=u.filter(f=>f.target._item===null||!f.target._item.deleted),u.forEach(f=>{f.currentTarget=d,f._path=null}),u.sort((f,p)=>f.path.length-p.path.length),V9(d._dEH,u,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),dA(l,[]),n._needFormattingCleanup&&jxe(n)}finally{r.gc&&fxe(s,i,r.gcFilter),hxe(s,i),n.afterState.forEach((f,p)=>{const m=n.beforeState.get(p)||0;if(m!==f){const b=i.clients.get(p),x=Zl(Ms(b,m),1);for(let w=b.length-1;w>=x;)w-=1+Xm(b,w)}});for(let f=o.length-1;f>=0;f--){const{client:p,clock:m}=o[f].id,b=i.clients.get(p),x=Ms(b,m);x+1<b.length&&Xm(b,x+1)>1||x>0&&Xm(b,x)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Vbe(fA,C9,"[yjs] ",E9,N9,"Changed the client-id because another client seems to be using it."),r.clientID=R9()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new qh;aB(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new zl;aB(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:d}=n;(l.size>0||d.size>0||u.size>0)&&(l.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),d.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:u,added:l,removed:d},r,n]),d.forEach(f=>f.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):U9(t,e+1)}}},Pt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new dxe(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const l=t._transaction===i[0];t._transaction=null,l&&U9(i,0)}}return o};function*pxe(t){const e=Je(t.restDecoder);for(let n=0;n<e;n++){const r=Je(t.restDecoder),i=t.readClient();let s=Je(t.restDecoder);for(let o=0;o<r;o++){const l=t.readInfo();if(l===10){const u=Je(t.restDecoder);yield new Ai(ut(i,s),u),s+=u}else if((k0&l)!==0){const u=(l&(oo|ci))===0,d=new Ln(ut(i,s),null,(l&ci)===ci?t.readLeftID():null,null,(l&oo)===oo?t.readRightID():null,u?t.readParentInfo()?t.readString():t.readLeftID():null,u&&(l&oh)===oh?t.readString():null,l$(t,l));yield d,s+=d.length}else{const u=t.readLen();yield new Ti(ut(i,s),u),s+=u}}}}class yA{constructor(e,n){this.gen=pxe(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ai);return this.curr}}class bA{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const mxe=t=>dy(t,O9,qh),gxe=(t,e)=>{if(t.constructor===Ti){const{client:n,clock:r}=t.id;return new Ti(ut(n,r+e),t.length-e)}else if(t.constructor===Ai){const{client:n,clock:r}=t.id;return new Ai(ut(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Ln(ut(r,i+e),null,ut(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},dy=(t,e=Nu,n=zl)=>{if(t.length===1)return t[0];const r=t.map(f=>new e(ja(f)));let i=r.map(f=>new yA(f,!0)),s=null;const o=new n,l=new bA(o);for(;i=i.filter(m=>m.curr!==null),i.sort((m,b)=>{if(m.curr.id.client===b.curr.id.client){const x=m.curr.id.clock-b.curr.id.clock;return x===0?m.curr.constructor===b.curr.constructor?0:m.curr.constructor===Ai?1:-1:x}else return b.curr.id.client-m.curr.id.client}),i.length!==0;){const f=i[0],p=f.curr.id.client;if(s!==null){let m=f.curr,b=!1;for(;m!==null&&m.id.clock+m.length<=s.struct.id.clock+s.struct.length&&m.id.client>=s.struct.id.client;)m=f.next(),b=!0;if(m===null||m.id.client!==p||b&&m.id.clock>s.struct.id.clock+s.struct.length)continue;if(p!==s.struct.id.client)aa(l,s.struct,s.offset),s={struct:m,offset:0},f.next();else if(s.struct.id.clock+s.struct.length<m.id.clock)if(s.struct.constructor===Ai)s.struct.length=m.id.clock+m.length-s.struct.id.clock;else{aa(l,s.struct,s.offset);const x=m.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Ai(ut(p,s.struct.id.clock+s.struct.length),x),offset:0}}else{const x=s.struct.id.clock+s.struct.length-m.id.clock;x>0&&(s.struct.constructor===Ai?s.struct.length-=x:m=gxe(m,x)),s.struct.mergeWith(m)||(aa(l,s.struct,s.offset),s={struct:m,offset:0},f.next())}}else s={struct:f.curr,offset:0},f.next();for(let m=f.curr;m!==null&&m.id.client===p&&m.id.clock===s.struct.id.clock+s.struct.length&&m.constructor!==Ai;m=f.next())aa(l,s.struct,s.offset),s={struct:m,offset:0}}s!==null&&(aa(l,s.struct,s.offset),s=null),xA(l);const u=r.map(f=>mA(f)),d=Ube(u);return Vu(o,d),o.toUint8Array()},yxe=(t,e,n=Nu,r=zl)=>{const i=B9(e),s=new r,o=new bA(s),l=new n(ja(t)),u=new yA(l,!1);for(;u.curr;){const f=u.curr,p=f.id.client,m=i.get(p)||0;if(u.curr.constructor===Ai){u.next();continue}if(f.id.clock+f.length>m)for(aa(o,f,Zl(m-f.id.clock,0)),u.next();u.curr&&u.curr.id.client===p;)aa(o,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===p&&u.curr.id.clock+u.curr.length<=m;)u.next()}xA(o);const d=mA(l);return Vu(s,d),s.toUint8Array()},$9=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Qt(t.encoder.restEncoder)}),t.encoder.restEncoder=pr(),t.written=0)},aa=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&$9(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),qe(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},xA=t=>{$9(t);const e=t.encoder.restEncoder;qe(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];qe(e,r.written),C0(e,r.restEncoder)}},bxe=(t,e,n,r)=>{const i=new n(ja(t)),s=new yA(i,!1),o=new r,l=new bA(o);for(let d=s.curr;d!==null;d=s.next())aa(l,e(d),0);xA(l);const u=mA(i);return Vu(o,u),o.toUint8Array()},xxe=t=>bxe(t,gbe,Nu,qh),cB="You must not compute changes after the event-handler fired.";class T0{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=vxe(this.currentTarget,this.target))}deletes(e){return D9(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ea(cB);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,l;if(this.adds(s)){let u=s.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(s))if(u!==null&&this.deletes(u))o="delete",l=oE(u.content.getContent());else return;else u!==null&&this.deletes(u)?(o="update",l=oE(u.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=oE(s.content.getContent());else return;e.set(i,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ea(cB);const n=this.target,r=Ca(),i=Ca(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const u=()=>{l&&s.push(l)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((l===null||l.delete===void 0)&&(u(),l={delete:0}),l.delete+=d.length,i.add(d)):this.adds(d)?((l===null||l.insert===void 0)&&(u(),l={insert:[]}),l.insert=l.insert.concat(d.content.getContent()),r.add(d)):((l===null||l.retain===void 0)&&(u(),l={retain:0}),l.retain+=d.length);l!==null&&l.retain===void 0&&u()}this._changes=e}return e}}const vxe=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},yr=()=>{qbe("Invalid access: Add Yjs type to a document before reading data.")},G9=80;let vA=0;class wxe{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=vA++}}const Sxe=t=>{t.timestamp=vA++},W9=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=vA++},kxe=(t,e,n)=>{if(t.length>=G9){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return W9(r,e,n),r}else{const r=new wxe(e,n);return t.push(r),r}},A0=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>Wm(e-s.index)<Wm(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,Sxe(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&Wm(n.index-i)<r.parent.length/G9?(W9(n,r,i),n):kxe(t._searchMarker,r,i)},uh=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Zl(e,i.index+n))}},M0=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;js(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;V9(r._eH,n,e)};class ir{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=rB(),this._dEH=rB(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Cs()}clone(){throw Cs()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){iB(this._eH,e)}observeDeep(e){iB(this._dEH,e)}unobserve(e){sB(this._eH,e)}unobserveDeep(e){sB(this._dEH,e)}toJSON(){}}const K9=(t,e,n)=>{t.doc??yr(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&r>0;l++)i.push(o[l]),r--;e=0}}s=s.right}return i},Y9=t=>{t.doc??yr();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},dh=(t,e)=>{let n=0,r=t._start;for(t.doc??yr();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},X9=(t,e)=>{const n=[];return dh(t,(r,i)=>{n.push(e(r,i,t))}),n},Cxe=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},Z9=(t,e)=>{t.doc??yr();const n=A0(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},fy=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,l=s.store,u=n===null?e._start:n.right;let d=[];const f=()=>{d.length>0&&(i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new ql(d)),i.integrate(t,0),d=[])};r.forEach(p=>{if(p===null)d.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(p);break;default:switch(f(),p.constructor){case Uint8Array:case ArrayBuffer:i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new Fh(new Uint8Array(p))),i.integrate(t,0);break;case qu:i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new Hh(p)),i.integrate(t,0);break;default:if(p instanceof ir)i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new xo(p)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},J9=()=>Ea("Length exceeded!"),Q9=(t,e,n,r)=>{if(n>e._length)throw J9();if(n===0)return e._searchMarker&&uh(e._searchMarker,n,r.length),fy(t,e,null,r);const i=n,s=A0(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Ta(t,ut(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&uh(e._searchMarker,i,r.length),fy(t,e,o,r)},Exe=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return fy(t,e,i,n)},e$=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=A0(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Ta(t,ut(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Ta(t,ut(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw J9();e._searchMarker&&uh(e._searchMarker,i,-s+r)},hy=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},wA=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let l;if(r==null)l=new ql([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new ql([r]);break;case Uint8Array:l=new Fh(r);break;case qu:l=new Hh(r);break;default:if(r instanceof ir)l=new xo(r);else throw new Error("Unexpected content type")}new Ln(ut(o,Un(s.store,o)),i,i&&i.lastId,null,null,e,n,l).integrate(t,0)},SA=(t,e)=>{t.doc??yr();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},t$=t=>{const e={};return t.doc??yr(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},n$=(t,e)=>{t.doc??yr();const n=t._map.get(e);return n!==void 0&&!n.deleted},Nxe=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&$c(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},Mm=t=>(t.doc??yr(),Fbe(t._map.entries(),e=>!e[1].deleted));class Txe extends T0{}class au extends ir{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new au;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new au}clone(){const e=new au;return e.insert(0,this.toArray().map(n=>n instanceof ir?n.clone():n)),e}get length(){return this.doc??yr(),this._length}_callObserver(e,n){super._callObserver(e,n),M0(this,e,new Txe(this,e))}insert(e,n){this.doc!==null?Pt(this.doc,r=>{Q9(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Pt(this.doc,n=>{Exe(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Pt(this.doc,r=>{e$(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Z9(this,e)}toArray(){return Y9(this)}slice(e=0,n=this.length){return K9(this,e,n)}toJSON(){return this.map(e=>e instanceof ir?e.toJSON():e)}map(e){return X9(this,e)}forEach(e){dh(this,e)}[Symbol.iterator](){return Cxe(this)}_write(e){e.writeTypeRef(Jxe)}}const Axe=t=>new au;class Mxe extends T0{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Tu extends ir{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Tu}clone(){const e=new Tu;return this.forEach((n,r)=>{e.set(r,n instanceof ir?n.clone():n)}),e}_callObserver(e,n){M0(this,e,new Mxe(this,e,n))}toJSON(){this.doc??yr();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof ir?i.toJSON():i}}),e}get size(){return[...Mm(this)].length}keys(){return dE(Mm(this),e=>e[0])}values(){return dE(Mm(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return dE(Mm(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??yr(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Pt(this.doc,n=>{hy(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Pt(this.doc,r=>{wA(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return SA(this,e)}has(e){return n$(this,e)}clear(){this.doc!==null?Pt(this.doc,e=>{this.forEach(function(n,r,i){hy(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Qxe)}}const _xe=t=>new Tu,fa=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&pbe(t,e);class Y2{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&As(),this.right.content.constructor){case Pn:this.right.deleted||Fu(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const uB=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Pn:e.right.deleted||Fu(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Ta(t,ut(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},_m=(t,e,n,r)=>{const i=new Map,s=r?A0(e,n):null;if(s){const o=new Y2(s.p.left,s.p,s.index,i);return uB(t,o,n-s.index)}else{const o=new Y2(null,e._start,0,i);return uB(t,o,n)}},r$=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Pn&&fa(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,l)=>{const u=n.left,d=n.right,f=new Ln(ut(s,Un(i.store,s)),u,u&&u.lastId,d,d&&d.id,e,null,new Pn(l,o));f.integrate(t,0),n.right=f,n.forward()})},Fu=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},i$=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Pn&&fa(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},s$=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const l in r){const u=r[l],d=n.currentAttributes.get(l)??null;if(!fa(d,u)){o.set(l,d);const{left:f,right:p}=n;n.right=new Ln(ut(s,Un(i.store,s)),f,f&&f.lastId,p,p&&p.id,e,null,new Pn(l,u)),n.right.integrate(t,0),n.forward()}}return o},hE=(t,e,n,r,i)=>{n.currentAttributes.forEach((m,b)=>{i[b]===void 0&&(i[b]=null)});const s=t.doc,o=s.clientID;i$(n,i);const l=s$(t,e,n,i),u=r.constructor===String?new _s(r):r instanceof ir?new xo(r):new Jl(r);let{left:d,right:f,index:p}=n;e._searchMarker&&uh(e._searchMarker,n.index,u.getLength()),f=new Ln(ut(o,Un(s.store,o)),d,d&&d.lastId,f,f&&f.id,e,null,u),f.integrate(t,0),n.right=f,n.index=p,n.forward(),r$(t,e,n,l)},dB=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;i$(n,i);const l=s$(t,e,n,i);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===Pn));){if(!n.right.deleted)switch(n.right.content.constructor){case Pn:{const{key:u,value:d}=n.right.content,f=i[u];if(f!==void 0){if(fa(f,d))l.delete(u);else{if(r===0)break e;l.set(u,d)}n.right.delete(t)}else n.currentAttributes.set(u,d);break}default:r<n.right.length&&Ta(t,ut(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new Ln(ut(o,Un(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new _s(u)),n.right.integrate(t,0),n.forward()}r$(t,e,n,l)},o$=(t,e,n,r,i)=>{let s=e;const o=Fr();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Pn){const d=s.content;o.set(d.key,d)}s=s.right}let l=0,u=!1;for(;e!==s;){if(n===e&&(u=!0),!e.deleted){const d=e.content;switch(d.constructor){case Pn:{const{key:f,value:p}=d,m=r.get(f)??null;(o.get(f)!==d||m===p)&&(e.delete(t),l++,!u&&(i.get(f)??null)===p&&m!==p&&(m===null?i.delete(f):i.set(f,m))),!u&&!e.deleted&&Fu(i,d);break}}}e=e.right}return l},Dxe=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Pn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Rxe=t=>{let e=0;return Pt(t.doc,n=>{let r=t._start,i=t._start,s=Fr();const o=F2(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Pn:Fu(o,i.content);break;default:e+=o$(n,r,i,s,o),s=F2(o),r=i;break}i=i.right}}),e},jxe=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&H9(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===Pn&&o.constructor!==Ti&&e.add(o.parent)})}Pt(n,r=>{_9(t,t.deleteSet,i=>{if(i instanceof Ti||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===Pn?e.add(s):Dxe(r,i)});for(const i of e)Rxe(i)})},fB=(t,e,n)=>{const r=n,i=F2(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case xo:case Jl:case _s:n<e.right.length&&Ta(t,ut(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&o$(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&uh(o._searchMarker,e.index,-r+n),e};class Oxe extends T0{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Pt(e,r=>{const i=new Map,s=new Map;let o=this.target._start,l=null;const u={};let d="",f=0,p=0;const m=()=>{if(l!==null){let b=null;switch(l){case"delete":p>0&&(b={delete:p}),p=0;break;case"insert":(typeof d=="object"||d.length>0)&&(b={insert:d},i.size>0&&(b.attributes={},i.forEach((x,w)=>{x!==null&&(b.attributes[w]=x)}))),d="";break;case"retain":f>0&&(b={retain:f},fbe(u)||(b.attributes=cbe({},u))),f=0;break}b&&n.push(b),l=null}};for(;o!==null;){switch(o.content.constructor){case xo:case Jl:this.adds(o)?this.deletes(o)||(m(),l="insert",d=o.content.getContent()[0],m()):this.deletes(o)?(l!=="delete"&&(m(),l="delete"),p+=1):o.deleted||(l!=="retain"&&(m(),l="retain"),f+=1);break;case _s:this.adds(o)?this.deletes(o)||(l!=="insert"&&(m(),l="insert"),d+=o.content.str):this.deletes(o)?(l!=="delete"&&(m(),l="delete"),p+=o.length):o.deleted||(l!=="retain"&&(m(),l="retain"),f+=o.length);break;case Pn:{const{key:b,value:x}=o.content;if(this.adds(o)){if(!this.deletes(o)){const w=i.get(b)??null;fa(w,x)?x!==null&&o.delete(r):(l==="retain"&&m(),fa(x,s.get(b)??null)?delete u[b]:u[b]=x)}}else if(this.deletes(o)){s.set(b,x);const w=i.get(b)??null;fa(w,x)||(l==="retain"&&m(),u[b]=w)}else if(!o.deleted){s.set(b,x);const w=u[b];w!==void 0&&(fa(w,x)?w!==null&&o.delete(r):(l==="retain"&&m(),x===null?delete u[b]:u[b]=x))}o.deleted||(l==="insert"&&m(),Fu(i,o.content));break}}o=o.right}for(m();n.length>0;){const b=n[n.length-1];if(b.retain!==void 0&&b.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Au extends ir{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??yr(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Au}clone(){const e=new Au;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new Oxe(this,e,n);M0(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??yr();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===_s&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Pt(this.doc,r=>{const i=new Y2(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&hE(r,this,i,l,o.attributes||{})}else o.retain!==void 0?dB(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&fB(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??yr();const i=[],s=new Map,o=this.doc;let l="",u=this._start;function d(){if(l.length>0){const p={};let m=!1;s.forEach((x,w)=>{m=!0,p[w]=x});const b={insert:l};m&&(b.attributes=p),i.push(b),l=""}}const f=()=>{for(;u!==null;){if($c(u,e)||n!==void 0&&$c(u,n))switch(u.content.constructor){case _s:{const p=s.get("ychange");e!==void 0&&!$c(u,e)?(p===void 0||p.user!==u.id.client||p.type!=="removed")&&(d(),s.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!$c(u,n)?(p===void 0||p.user!==u.id.client||p.type!=="added")&&(d(),s.set("ychange",r?r("added",u.id):{type:"added"})):p!==void 0&&(d(),s.delete("ychange")),l+=u.content.str;break}case xo:case Jl:{d();const p={insert:u.content.getContent()[0]};if(s.size>0){const m={};p.attributes=m,s.forEach((b,x)=>{m[x]=b})}i.push(p);break}case Pn:$c(u,e)&&(d(),Fu(s,u.content));break}u=u.right}d()};return e||n?Pt(o,p=>{e&&W2(p,e),n&&W2(p,n),f()},"cleanup"):f(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Pt(i,s=>{const o=_m(s,this,e,!r);r||(r={},o.currentAttributes.forEach((l,u)=>{r[u]=l})),hE(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?Pt(i,s=>{const o=_m(s,this,e,!r);hE(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Pt(r,i=>{fB(i,_m(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?Pt(i,s=>{const o=_m(s,this,e,!1);o.right!==null&&dB(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Pt(this.doc,n=>{hy(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Pt(this.doc,r=>{wA(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return SA(this,e)}getAttributes(){return t$(this)}_write(e){e.writeTypeRef(eve)}}const Lxe=t=>new Au;class pE{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??yr()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Mu||n.constructor===Vl)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Vl extends ir{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Vl}clone(){const e=new Vl;return e.insert(0,this.toArray().map(n=>n instanceof ir?n.clone():n)),e}get length(){return this.doc??yr(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new pE(this,e)}querySelector(e){e=e.toUpperCase();const r=new pE(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),fo(new pE(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){M0(this,e,new Bxe(this,n,e))}toString(){return X9(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),dh(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?Pt(this.doc,r=>{Q9(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Pt(this.doc,r=>{const i=e&&e instanceof ir?e._item:e;fy(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Ea("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?Pt(this.doc,r=>{e$(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Y9(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Z9(this,e)}slice(e=0,n=this.length){return K9(this,e,n)}forEach(e){dh(this,e)}_write(e){e.writeTypeRef(nve)}}const Ixe=t=>new Vl;class Mu extends Vl{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Mu(this.nodeName)}clone(){const e=new Mu(this.nodeName),n=this.getAttributes();return ube(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof ir?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const i=r.length;for(let l=0;l<i;l++){const u=r[l];n.push(u+'="'+e[u]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Pt(this.doc,n=>{hy(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Pt(this.doc,r=>{wA(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return SA(this,e)}hasAttribute(e){return n$(this,e)}getAttributes(e){return e?Nxe(this,e):t$(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const l=s[o];typeof l=="string"&&i.setAttribute(o,l)}return dh(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(tve),e.writeKey(this.nodeName)}}const Pxe=t=>new Mu(t.readKey());class Bxe extends T0{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class py extends Tu{constructor(e){super(),this.hookName=e}_copy(){return new py(this.hookName)}clone(){const e=new py(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(rve),e.writeKey(this.hookName)}}const zxe=t=>new py(t.readKey());class my extends Au{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new my}clone(){const e=new my;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const l=s.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(ive)}}const Vxe=t=>new my;class kA{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Cs()}mergeWith(e){return!1}write(e,n,r){throw Cs()}integrate(e,n){throw Cs()}}const qxe=0;class Ti extends kA{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),F9(e.doc.store,this)}write(e,n){e.writeInfo(qxe),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Fh{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Fh(this.content)}splice(e){throw Cs()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const Fxe=t=>new Fh(t.readBuf());class fh{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new fh(this.len)}splice(e){const n=new fh(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){uy(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const Hxe=t=>new fh(t.readLen()),a$=(t,e)=>new qu({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Hh{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Hh(a$(this.doc.guid,this.opts))}splice(e){throw Cs()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const Uxe=t=>new Hh(a$(t.readString(),t.readAny()));class Jl{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Jl(this.embed)}splice(e){throw Cs()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const $xe=t=>new Jl(t.readJSON());class Pn{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Pn(this.key,this.value)}splice(e){throw Cs()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const Gxe=t=>new Pn(t.readKey(),t.readJSON());class gy{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new gy(this.arr)}splice(e){const n=new gy(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const Wxe=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new gy(n)},Kxe=cy("node_env")==="development";class ql{constructor(e){this.arr=e,Kxe&&x9(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ql(this.arr)}splice(e){const n=new ql(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const Yxe=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new ql(n)};class _s{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new _s(this.str)}splice(e){const n=new _s(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const Xxe=t=>new _s(t.readString()),Zxe=[Axe,_xe,Lxe,Pxe,Ixe,zxe,Vxe],Jxe=0,Qxe=1,eve=2,tve=3,nve=4,rve=5,ive=6;class xo{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xo(this.type._copy())}splice(e){throw Cs()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const sve=t=>new xo(Zxe[t.readTypeRef()](t)),yy=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new Ln(ut(r,i+n),e,ut(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=ut(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s};class Ln extends kA{constructor(e,n,r,i,s,o,l,u){super(e,u.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=u,this.info=this.content.isCountable()?U6:0}set marker(e){(this.info&lE)>0!==e&&(this.info^=lE)}get marker(){return(this.info&lE)>0}get keep(){return(this.info&H6)>0}set keep(e){this.keep!==e&&(this.info^=H6)}get countable(){return(this.info&U6)>0}get deleted(){return(this.info&aE)>0}set deleted(e){this.deleted!==e&&(this.info^=aE)}markDeleted(){this.info|=aE}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Un(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Un(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ou&&this.id.client!==this.parent.client&&this.parent.clock>=Un(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=oB(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Ta(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ti||this.right&&this.right.constructor===Ti)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ln?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ln&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ou){const r=fE(n,this.parent);r.constructor===Ti?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=oB(e,e.doc.store,ut(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),Am(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(Am(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(fE(e.doc.store,i.origin)))s.has(fE(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),F9(e.doc.store,this),this.content.integrate(e,this),lB(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Ti(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:ut(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Am(e.origin,this.lastId)&&this.right===e&&Am(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),uy(e.deleteSet,this.id.client,this.id.clock,this.length),lB(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw As();this.content.gc(e),n?uxe(e,this,new Ti(this.id,this.length)):this.content=new fh(this.length)}write(e,n){const r=n>0?ut(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&k0|(r===null?0:ci)|(i===null?0:oo)|(s===null?0:oh);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const l=this.parent;if(l._item!==void 0){const u=l._item;if(u===null){const d=lxe(l);e.writeParentInfo(!0),e.writeString(d)}else e.writeParentInfo(!1),e.writeLeftID(u.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===ou?(e.writeParentInfo(!1),e.writeLeftID(l)):As();s!==null&&e.writeString(s)}this.content.write(e,n)}}const l$=(t,e)=>ove[e&k0](t),ove=[()=>{As()},Hxe,Wxe,Fxe,Xxe,$xe,Gxe,sve,Yxe,Uxe,()=>{As()}],ave=10;class Ai extends kA{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){As()}write(e,n){e.writeInfo(ave),qe(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const c$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},u$="__ $YJS$ __";c$[u$]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");c$[u$]=!0;const d$=new Map;class lve{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:Abe(n.newValue||"")}),abe(this._onChange)}postMessage(e){g9.setItem(this.room,Tbe(Sbe(e)))}close(){lbe(this._onChange)}}const cve=typeof BroadcastChannel>"u"?lve:BroadcastChannel,CA=t=>js(d$,t,()=>{const e=Ca(),n=new cve(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),uve=(t,e)=>(CA(t).subs.add(e),e),dve=(t,e)=>{const n=CA(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),d$.delete(t)),r},Gc=(t,e,n=null)=>{const r=CA(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},f$=0,EA=1,h$=2,X2=(t,e)=>{qe(t,f$);const n=oxe(e);pn(t,n)},p$=(t,e,n)=>{qe(t,EA),pn(t,nxe(e,n))},fve=(t,e,n)=>p$(e,n,hr(t)),m$=(t,e,n)=>{try{Qbe(e,hr(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},hve=(t,e)=>{qe(t,h$),pn(t,e)},pve=m$,mve=(t,e,n,r)=>{const i=Je(t);switch(i){case f$:fve(t,e,n);break;case EA:m$(t,n,r);break;case h$:pve(t,n,r);break;default:throw new Error("Unknown message type")}return i},gve=0,yve=(t,e,n)=>{switch(Je(t)){case gve:n(e,xa(t))}},mE=3e4;class bve extends T0e{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Bl();this.getLocalState()!==null&&mE/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&mE<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&NA(this,r,"timeout")},ho(mE/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Bl()});const o=[],l=[],u=[],d=[];e===null?d.push(n):s==null?e!=null&&o.push(n):(l.push(n),Af(s,e)||u.push(n)),(o.length>0||u.length>0||d.length>0)&&this.emit("change",[{added:o,updated:u,removed:d},"local"]),this.emit("update",[{added:o,updated:l,removed:d},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}}const NA=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:Bl()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Mf=(t,e,n=t.states)=>{const r=e.length,i=pr();qe(i,r);for(let s=0;s<r;s++){const o=e[s],l=n.get(o)||null,u=t.meta.get(o).clock;qe(i,o),qe(i,u),Tl(i,JSON.stringify(l))}return Qt(i)},xve=(t,e,n)=>{const r=ja(e),i=Bl(),s=[],o=[],l=[],u=[],d=Je(r);for(let f=0;f<d;f++){const p=Je(r);let m=Je(r);const b=JSON.parse(xa(r)),x=t.meta.get(p),w=t.states.get(p),S=x===void 0?0:x.clock;(S<m||S===m&&b===null&&t.states.has(p))&&(b===null?p===t.clientID&&t.getLocalState()!=null?m++:t.states.delete(p):t.states.set(p,b),t.meta.set(p,{clock:m,lastUpdated:i}),x===void 0&&b!==null?s.push(p):x!==void 0&&b===null?u.push(p):b!==null&&(Af(b,w)||l.push(p),o.push(p)))}(s.length>0||l.length>0||u.length>0)&&t.emit("change",[{added:s,updated:l,removed:u},n]),(s.length>0||o.length>0||u.length>0)&&t.emit("update",[{added:s,updated:o,removed:u},n])},vve=t=>dbe(t,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&"),ml=0,g$=3,lu=1,wve=2,Uh=[];Uh[ml]=(t,e,n,r,i)=>{qe(t,ml);const s=mve(e,t,n.doc,n);r&&s===EA&&!n.synced&&(n.synced=!0)};Uh[g$]=(t,e,n,r,i)=>{qe(t,lu),pn(t,Mf(n.awareness,Array.from(n.awareness.getStates().keys())))};Uh[lu]=(t,e,n,r,i)=>{xve(n.awareness,hr(e),n)};Uh[wve]=(t,e,n,r,i)=>{yve(e,n.doc,(s,o)=>Sve(n,o))};const hB=3e4,Sve=(t,e)=>console.warn(`Permission denied to access ${t.url}.
${e}`),y$=(t,e,n)=>{const r=ja(e),i=pr(),s=Je(r),o=t.messageHandlers[s];return o?o(i,r,t,n,s):console.error("Unable to compute message"),i},Z2=(t,e,n)=>{e===t.ws&&(t.emit("connection-close",[n,t]),t.ws=null,e.close(),t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,NA(t.awareness,Array.from(t.awareness.getStates().keys()).filter(r=>r!==t.doc.clientID),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(b$,iA(A0e(2,t.wsUnsuccessfulReconnects)*100,t.maxBackoffTime),t))},b$=t=>{if(t.shouldConnect&&t.ws===null){const e=new t._WS(t.url,t.protocols);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=Bl();const r=y$(t,new Uint8Array(n.data),!0);sA(r)>1&&e.send(Qt(r))},e.onerror=n=>{t.emit("connection-error",[n,t])},e.onclose=n=>{Z2(t,e,n)},e.onopen=()=>{t.wsLastMessageReceived=Bl(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=pr();if(qe(n,ml),X2(n,t.doc),e.send(Qt(n)),t.awareness.getLocalState()!==null){const r=pr();qe(r,lu),pn(r,Mf(t.awareness,[t.doc.clientID])),e.send(Qt(r))}},t.emit("status",[{status:"connecting"}])}},gE=(t,e)=>{const n=t.ws;t.wsconnected&&n&&n.readyState===n.OPEN&&n.send(e),t.bcconnected&&Gc(t.bcChannel,e,t)};class kve extends c9{constructor(e,n,r,{connect:i=!0,awareness:s=new bve(r),params:o={},protocols:l=[],WebSocketPolyfill:u=WebSocket,resyncInterval:d=-1,maxBackoffTime:f=2500,disableBc:p=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+n,this.maxBackoffTime=f,this.params=o,this.protocols=l,this.roomname=n,this.doc=r,this._WS=u,this.awareness=s,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=p,this.wsUnsuccessfulReconnects=0,this.messageHandlers=Uh.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,d>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const m=pr();qe(m,ml),X2(m,r),this.ws.send(Qt(m))}},d)),this._bcSubscriber=(m,b)=>{if(b!==this){const x=y$(this,new Uint8Array(m),!1);sA(x)>1&&Gc(this.bcChannel,Qt(x),this)}},this._updateHandler=(m,b)=>{if(b!==this){const x=pr();qe(x,ml),hve(x,m),gE(this,Qt(x))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:m,updated:b,removed:x},w)=>{const S=m.concat(b).concat(x),C=pr();qe(C,lu),pn(C,Mf(s,S)),gE(this,Qt(C))},this._exitHandler=()=>{NA(this.awareness,[r.clientID],"app closed")},Na&&typeof process<"u"&&process.on("exit",this._exitHandler),s.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&hB<Bl()-this.wsLastMessageReceived&&Z2(this,this.ws,null)},hB/10),i&&this.connect()}get url(){const e=vve(this.params);return this.serverUrl+"/"+this.roomname+(e.length===0?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),Na&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(uve(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=pr();qe(e,ml),X2(e,this.doc),Gc(this.bcChannel,Qt(e),this);const n=pr();qe(n,ml),p$(n,this.doc),Gc(this.bcChannel,Qt(n),this);const r=pr();qe(r,g$),Gc(this.bcChannel,Qt(r),this);const i=pr();qe(i,lu),pn(i,Mf(this.awareness,[this.doc.clientID])),Gc(this.bcChannel,Qt(i),this)}disconnectBc(){const e=pr();qe(e,lu),pn(e,Mf(this.awareness,[this.doc.clientID],new Map)),gE(this,Qt(e)),this.bcconnected&&(dve(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&Z2(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(b$(this),this.connectBc())}}const Cve=({diagramId:t,nodes:e,edges:n,onNodesChange:r,onEdgesChange:i,userId:s,userName:o,userEmail:l,userPictureUrl:u,enabled:d=!0,onUserJoined:f,onUserLeft:p})=>{const m=M.useRef(null),b=M.useRef(null),[x,w]=M.useState({isConnected:!1,isSynced:!1,error:null,collaboratorCount:0}),[S,C]=M.useState([]),[T,E]=M.useState([]),N=M.useRef([]),A=M.useRef(r),_=M.useRef(i),O=M.useRef(f),R=M.useRef(p),L=M.useRef(e),I=M.useRef(n);M.useEffect(()=>{A.current=r,_.current=i,O.current=f,R.current=p,L.current=e,I.current=n},[r,i,f,p,e,n]);const F=M.useRef(!1),q=M.useCallback(()=>{if(d)try{const j=l9(),V=new qu;m.current=V;const G=V.getArray("nodes"),te=V.getArray("edges"),z=new kve(j,`diagram-${t}`,V,{connect:!0});b.current=z,z.awareness.setLocalState({user:{id:s,name:o,email:l,pictureUrl:u},cursor:null}),z.on("status",({status:re})=>{console.log(" Yjs Connection Status:",re),w($=>({...$,isConnected:re==="connected",error:re==="disconnected"?"Disconnected from server":null}))}),z.on("sync",re=>{console.log(" Yjs Sync Status:",re),w($=>({...$,isSynced:re})),re&&G.length===0&&te.length===0&&(F.current=!0,V.transact(()=>{G.push(L.current),te.push(I.current)}),F.current=!1)}),z.awareness.on("change",re=>{const $=z.awareness.getStates(),Z=z.awareness.clientID,ee=[],de=[];$.forEach((oe,ye)=>{if(ye===Z)return;const Ce=oe.user;Ce&&(ee.push(Ce),oe.cursor&&de.push({userId:Ce.id,user:Ce,position:oe.cursor,timestamp:new Date().toISOString()}))}),C(ee),E(de),N.current=ee,w(oe=>({...oe,collaboratorCount:ee.length})),re.added.forEach(oe=>{if(oe===Z)return;const ye=$.get(oe);ye?.user&&O.current?.(ye.user)}),re.removed.forEach(oe=>{if(oe===Z)return;const ye=N.current.find(Ce=>!ee.some(Pe=>Pe.id===Ce.id));ye&&R.current?.(ye)})});const W=()=>{if(F.current)return;const re=G.toArray();A.current(re)},ae=()=>{if(F.current)return;const re=te.toArray();_.current(re)};return G.observe(W),te.observe(ae),()=>{G.unobserve(W),te.unobserve(ae),z.destroy(),V.destroy()}}catch(j){w(V=>({...V,error:j instanceof Error?j.message:"Failed to initialize collaboration"})),console.error("Yjs initialization error:",j);return}},[t,s,o,l,u,d]);M.useEffect(()=>{const j=m.current;if(!j||!x.isSynced)return;const V=j.getArray("nodes"),G=j.getArray("edges");F.current=!0,j.transact(()=>{V.delete(0,V.length),V.push(e),G.delete(0,G.length),G.push(n)}),F.current=!1},[e,n,x.isSynced]),M.useEffect(()=>q(),[q]);const U=M.useCallback(()=>{b.current&&(b.current.disconnect(),w(j=>({...j,isConnected:!1,isSynced:!1})))},[]),P=M.useCallback(()=>{b.current?b.current.connect():q()},[q]),H=M.useCallback(j=>{const V=b.current;if(!V||!x.isConnected)return;const G=V.awareness.getLocalState();V.awareness.setLocalState({...G,cursor:j})},[x.isConnected]);return{state:x,provider:b.current,collaborators:S,cursors:T,sendCursorPosition:H,disconnect:U,reconnect:P}},Eve=({url:t,enabled:e=!0,onMessage:n,onOpen:r,onClose:i,onError:s,reconnect:o=!0,reconnectInterval:l=1e3,maxReconnectAttempts:u=5})=>{const d=M.useRef(null),f=M.useRef(null),p=M.useRef(0),m=M.useRef(!0),b=M.useRef(null),[x,w]=M.useState(!1),[S,C]=M.useState(!1),[T,E]=M.useState(0),N=M.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null)},[]),A=M.useCallback(()=>{m.current=!1,N(),d.current&&(d.current.close(),d.current=null),w(!1),C(!1),p.current=0,E(0)},[N]),_=M.useCallback(()=>{if(!(d.current?.readyState===WebSocket.OPEN||d.current?.readyState===WebSocket.CONNECTING))try{C(!0),d.current=new WebSocket(t),d.current.onopen=()=>{console.log("WebSocket connected"),w(!0),C(!1),p.current=0,E(0),r?.()},d.current.onmessage=L=>{try{const I=JSON.parse(L.data);n?.(I)}catch(I){console.error("Failed to parse WebSocket message:",I)}},d.current.onclose=L=>{console.log("WebSocket disconnected",L.code,L.reason),w(!1),C(!1),d.current=null,i?.(),m.current&&o&&b.current&&b.current()},d.current.onerror=L=>{console.error("WebSocket error:",L),s?.(L)}}catch(L){console.error("Failed to create WebSocket connection:",L),C(!1),m.current&&o&&b.current&&b.current()}},[t,n,r,i,s,o]),O=M.useCallback(()=>{if(!o||!m.current)return;if(p.current>=u){console.error("Max reconnection attempts reached"),C(!1);return}N();const L=l*Math.pow(2,p.current),I=Math.random()*1e3,F=Math.min(L+I,3e4);console.log(`Reconnecting in ${Math.round(F/1e3)}s... (attempt ${p.current+1}/${u})`),f.current=setTimeout(()=>{p.current++,E(p.current),_()},F)},[o,l,u,N,_]);M.useEffect(()=>{b.current=O},[O]);const R=M.useCallback(L=>{if(d.current?.readyState===WebSocket.OPEN)try{d.current.send(JSON.stringify(L))}catch(I){console.error("Failed to send WebSocket message:",I)}else console.warn("WebSocket is not connected. Message not sent:",L)},[]);return M.useEffect(()=>{if(e)return m.current=!0,_(),()=>{m.current=!1,A()}},[_,A,e]),{sendMessage:R,disconnect:A,connect:_,isConnected:x,isConnecting:S,reconnectAttempts:T}},Nve=t=>t.startsWith("https://")?t.replace("https://","wss://"):t.startsWith("http://")?t.replace("http://","ws://"):`ws://${t}`,Tve=Nve("https://diagrammatic-api.vercel.app"),Ave=({diagramId:t,token:e,enabled:n,onDiagramUpdate:r,onUserJoined:i,onUserLeft:s,onError:o})=>{const[l,u]=M.useState([]),[d,f]=M.useState([]),p=M.useRef(null),m=M.useRef(0),b=M.useRef(null),x=`${Tve}/api/v1/diagrams/${t}/collaborate?token=${e}`,w=M.useCallback(I=>{const F=I.type?.trim();switch(F){case"welcome":{const q=I.user;p.current=q.id,console.log("Welcome message received:",q.name);break}case"user_joined":{const q=I.user;u(U=>U.some(P=>P.id===q.id)?U:[...U,q]),i?.(q);break}case"user_left":{const q=I.user;u(U=>U.filter(P=>P.id!==q.id)),f(U=>U.filter(P=>P.userId!==q.id)),s?.(q);break}case"diagram_update":{const q=I.user,U=I.data;if(q.id===p.current)return;const P=Date.now();if(P-m.current<100)return;m.current=P,r?.(U,q.id);break}case"cursor_move":case"cursor_update":{const q=I.user,U=I.position,P=I.timestamp;if(q.id===p.current)return;f(H=>{const j=H.findIndex(G=>G.userId===q.id),V={userId:q.id,user:q,position:U,timestamp:P};if(j>=0){const G=[...H];return G[j]=V,G}return[...H,V]});break}case"pong":break;case"error":{const q=I.message||"Unknown error";console.error("WebSocket error:",q),o?.(q);break}default:console.warn("Unknown WebSocket message type:",F)}},[r,i,s,o]),S=M.useCallback(()=>{console.log("Collaboration WebSocket connected")},[]),C=M.useCallback(()=>{console.log("Collaboration WebSocket disconnected"),u([]),f([])},[]),T=M.useCallback(I=>{console.error("Collaboration WebSocket error:",I),o?.("Connection error. Retrying...")},[o]),{sendMessage:E,disconnect:N,isConnected:A,isConnecting:_,reconnectAttempts:O}=Eve({url:x,enabled:n,onMessage:w,onOpen:S,onClose:C,onError:T,reconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5}),R=M.useCallback(I=>{!n||!A||(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{E({type:"diagram_update",data:I,timestamp:new Date().toISOString()})},300))},[n,A,E]),L=M.useCallback(I=>{!n||!A||E({type:"cursor_move",position:I,timestamp:new Date().toISOString()})},[n,A,E]);return M.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),M.useEffect(()=>{if(!A||!n)return;const I=setInterval(()=>{E({type:"ping",timestamp:new Date().toISOString()})},3e4);return()=>clearInterval(I)},[A,n,E]),{sendDiagramUpdate:R,sendCursorPosition:L,collaborators:l,cursors:d,isConnected:A,isConnecting:_,reconnectAttempts:O,disconnect:N}},Mve=({diagramId:t,nodes:e,edges:n,onNodesChange:r,onEdgesChange:i,enabled:s})=>{const{user:o,token:l}=xh(),u=l9();console.log("VITE_YJS_URL value:",`"${u}"`);const d=w0e(ms.YJS_COLLABORATION),f=Cve({diagramId:t,nodes:e,edges:n,onNodesChange:r,onEdgesChange:i,userId:o?.id||"anonymous",userName:o?.name||"Anonymous",userEmail:o?.email,userPictureUrl:o?.picture||void 0,enabled:d&&s}),[p,m]=M.useState([]),[b,x]=M.useState([]),w=Ave({diagramId:t,token:l||"",enabled:!d&&s,onDiagramUpdate:R=>{R.nodes&&r(R.nodes),R.edges&&i(R.edges)},onUserJoined:R=>{m(L=>L.some(I=>I.id===R.id)?L:[...L,R])},onUserLeft:R=>{m(L=>L.filter(I=>I.id!==R.id)),x(L=>L.filter(I=>I.userId!==R.id))}}),S=w.cursors;S&&S.length!==b.length&&x(S.map(R=>({userId:R.userId,user:R.user,position:R.position,timestamp:R.timestamp})));const C=d?{isConnected:f.state.isConnected,isSynced:f.state.isSynced,collaboratorCount:f.state.collaboratorCount,error:f.state.error}:{isConnected:w.isConnected,isSynced:w.isConnected,collaboratorCount:p.length,error:w.isConnected?null:"Disconnected"};console.log(" Unified Collaboration State:",{useYjs:d,enabled:s,state:C,yjsState:d?f.state:null,wsState:d?null:{isConnected:w.isConnected}});const T=d?f.collaborators:p,E=d?f.cursors:b,N=M.useCallback(R=>{d||w.sendDiagramUpdate(R)},[d,w]),A=M.useCallback(R=>{d?f.sendCursorPosition(R):w.sendCursorPosition(R)},[d,f,w]),_=M.useCallback(()=>{d?f.disconnect():w.disconnect()},[d,f,w]),O=M.useCallback(()=>{d&&f.reconnect()},[d,f]);return{state:C,collaborators:T,cursors:E,sendUpdate:N,sendCursorPosition:A,disconnect:_,reconnect:O}},J2=t=>{const e=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899","#06b6d4","#6366f1"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},_ve=({isConnected:t,isConnecting:e,reconnectAttempts:n,collaborators:r,showCollaborators:i=!0})=>{const[s,o]=ke.useState(!1),l=e||!t,u=i&&r.length>0;if(!l&&!u)return null;const d=()=>e?n>0?`Reconnecting... (${n})`:"Connecting...":"Connection lost",f=()=>e?g.jsx(OJ,{className:"h-4 w-4 animate-spin"}):g.jsx(LJ,{className:"h-4 w-4"}),p=()=>e?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return g.jsxs("div",{className:"flex items-center gap-2",children:[l&&g.jsxs("button",{type:"button",className:`relative flex items-center gap-2 px-3 py-1.5 rounded-lg bg-surface border border-theme/10 ${p()} transition-colors cursor-default`,"aria-label":d(),"aria-describedby":s?"connection-tooltip":void 0,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onFocus:()=>o(!0),onBlur:()=>o(!1),tabIndex:0,children:[f(),g.jsx("span",{className:"text-xs font-medium",children:d()}),g.jsx(uu,{children:s&&g.jsx(gt.div,{id:"connection-tooltip",role:"tooltip",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full left-0 mt-2 p-2 bg-surface border border-theme/10 rounded-lg shadow-lg z-50 min-w-[200px]",children:g.jsxs("div",{className:"text-xs text-theme",children:[g.jsx("div",{className:"font-semibold mb-1",children:"Connection Status"}),g.jsx("div",{className:"text-muted",children:e?"Establishing connection...":"Collaboration unavailable"})]})})})]}),u&&g.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-surface border border-theme/10",role:"group","aria-label":`${r.length} collaborator${r.length>1?"s":""} online`,children:[g.jsx(IJ,{className:"h-4 w-4 text-theme","aria-hidden":"true"}),g.jsxs("div",{className:"flex -space-x-2",children:[r.slice(0,3).map(m=>g.jsx("div",{className:"relative group",role:"img","aria-label":m.name,title:m.name,children:m.pictureUrl?g.jsx("img",{src:m.pictureUrl,alt:m.name,className:"w-6 h-6 rounded-full border-2 border-surface",style:{borderColor:J2(m.id)}}):g.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-surface flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:J2(m.id)},"aria-label":m.name,children:m.name.charAt(0).toUpperCase()})},m.id)),r.length>3&&g.jsxs("div",{className:"w-6 h-6 rounded-full bg-theme/10 border-2 border-surface flex items-center justify-center text-xs font-bold text-theme",role:"img","aria-label":`${r.length-3} more collaborator${r.length-3>1?"s":""}`,children:["+",r.length-3]})]})]})]})},Dve=({name:t,color:e,position:n,pictureUrl:r})=>g.jsxs(gt.div,{className:"pointer-events-none absolute z-50",style:{left:n.x,top:n.y},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:[g.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:g.jsx("path",{d:"M5.5 3.21V20.79L10.29 16L14 21.5L15.5 20.5L11.79 15L18.5 14L5.5 3.21Z",fill:e,stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})}),g.jsxs("div",{className:"ml-6 -mt-2 px-2 py-1 rounded-md text-xs font-medium text-white whitespace-nowrap shadow-lg flex items-center gap-1.5",style:{backgroundColor:e},children:[r&&g.jsx("img",{src:r,alt:t,className:"w-4 h-4 rounded-full border border-white/50"}),g.jsx("span",{children:t})]})]}),Rve=(t,e,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:t,edges:e};return JSON.stringify(i,null,2)},jve=(t,e,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<t.length;l++){const u=t[l],d=`node-${l+2}`,f=u.data?.label||u.id,p=u.position?.x||0,m=u.position?.y||0,b=u.style?.width||u.width||200,x=u.style?.height||u.height||80,w=s();o+=`        <mxCell id="${d}" value="${i(String(f))}" `,o+=`style="${w}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${m}" width="${b}" height="${x}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<e.length;l++){const u=e[l],d=`edge-${l}`,f=t.findIndex(b=>b.id===u.source),p=t.findIndex(b=>b.id===u.target),m=u.label||u.data?.label||"";f!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(m))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${f+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},pB=t=>{try{const e=JSON.parse(t);if(!e.nodes||!Array.isArray(e.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!e.edges||!Array.isArray(e.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:e.nodes,edges:e.edges}}catch(e){throw new Error(e instanceof Error?`Failed to import JSON: ${e.message}`:"Failed to import JSON: Invalid format")}},mB=t=>{try{const n=new DOMParser().parseFromString(t,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const m=p.getAttribute("id")||`cell-${u}`,b=p.getAttribute("value")||`Node ${u+1}`,x=p.querySelector("mxGeometry"),w=Number.parseFloat(x?.getAttribute("x")||"0"),S=Number.parseFloat(x?.getAttribute("y")||"0"),C=Number.parseFloat(x?.getAttribute("width")||"200"),T=Number.parseFloat(x?.getAttribute("height")||"80"),E=`imported-node-${Date.now()}-${u}`;o.set(m,E);const N={label:b},A=p.querySelector("mxData");if(A){const _=A.querySelectorAll("property");for(const O of _){const R=O.getAttribute("name"),L=O.getAttribute("value");if(R&&L)try{N[R]=JSON.parse(L)}catch{N[R]=L}}}i.push({id:E,type:"custom",position:{x:w,y:S},data:N,...C&&T?{style:{width:C,height:T}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let f=0;for(const p of d){const m=p.getAttribute("source"),b=p.getAttribute("target"),x=p.getAttribute("value")||"";if(m&&b){const w=o.get(m),S=o.get(b);if(w&&S){const C={};x&&(C.label=x,C.hasLabel=!0);const T=p.querySelector("mxData");if(T){const E=T.querySelectorAll("property");for(const N of E){const A=N.getAttribute("name"),_=N.getAttribute("value");if(A&&_)try{C[A]=JSON.parse(_)}catch{C[A]=_}}}s.push({id:`imported-edge-${Date.now()}-${f}`,source:w,target:S,type:"customEdge",data:C,...x?{label:x}:{}})}}f++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(e){throw new Error(e instanceof Error?`Failed to import XML: ${e.message}`:"Failed to import XML: Invalid format")}},gB=(t,e,n)=>{const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},Ove=async t=>t.text(),yB={isOpen:!1,showWelcome:!0,userIntent:null,canvasContext:null,messages:[],currentSuggestions:[]},x$=M.createContext(void 0),Lve=({children:t})=>{const[e,n]=M.useState(yB),r=M.useCallback(()=>{n(f=>({...f,isOpen:!f.isOpen}))},[]),i=M.useCallback(f=>{n(p=>({...p,userIntent:f,showWelcome:!1}))},[]),s=M.useCallback(f=>{n(p=>({...p,canvasContext:f}))},[]),o=M.useCallback(f=>{const p={...f,id:`msg-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,timestamp:new Date};n(m=>({...m,messages:[...m.messages,p]}))},[]),l=M.useCallback(()=>{n(f=>({...f,showWelcome:!1}))},[]),u=M.useCallback(()=>{n(yB)},[]),d=M.useMemo(()=>({...e,toggleChatBot:r,setUserIntent:i,updateCanvasContext:s,addMessage:o,dismissWelcome:l,resetChatBot:u}),[e,r,i,s,o,l,u]);return g.jsx(x$.Provider,{value:d,children:t})},TA=()=>{const t=M.useContext(x$);if(!t)throw new Error("useChatBot must be used within a ChatBotProvider");return t},Ive=(t,e,n=[],r=[])=>{const[i,s]=M.useState(null);M.useEffect(()=>{if(!e){s(null);return}const l=async()=>{try{const d=n.map(b=>{const x=b.data||{},w=!!(x.description||x.subtitle||x.properties&&Object.keys(x.properties).length>0),S={description:x.description||x.subtitle||"",componentId:x.componentId,icon:x.icon};return x.properties&&typeof x.properties=="object"&&Object.assign(S,x.properties),x._customProperties&&(S.customProperties=x._customProperties),{id:b.id,type:b.type||"custom",label:typeof x.label=="string"?x.label:b.id,hasDescription:w,properties:S}}),f=r.map(b=>{const x=b.data||{};return{source:b.source,target:b.target,type:b.type||x.type,hasLabel:!!(x.label||x.hasLabel)}}),p=await Jt.getRecommendations({userIntent:t,canvasContext:e||{nodeCount:0,edgeCount:0,componentTypes:[],isEmpty:!0},components:d,connections:f,maxSuggestions:5}),m=p.recommendations.map(b=>({id:b.id,title:b.title,description:b.description,icon:b.icon,category:b.category,priority:b.priority,componentId:b.componentId,componentIds:b.componentIds,actionType:b.actionType,confidence:b.confidence,reasoning:b.reasoning,action:()=>{}}));s(m),m.length>0&&console.log(` AI Recommendations: ${m.length} suggestions (confidence >= ${p.minConfidenceThreshold})`)}catch(d){console.log(" Falling back to rule-based suggestions:",d instanceof Error?d.message:"Unknown error"),s(null)}},u=setTimeout(()=>{l()},500);return()=>clearTimeout(u)},[t,e,n,r]);const o=M.useMemo(()=>{const l=[];if(!t&&!e)return l;const u=t?`${t.title} ${t.description}`.toLowerCase():"";if((u.includes("database")||u.includes("schema")||u.includes("er "))&&(l.push({id:"er-entity",title:"Add Entity",description:"Create a database entity with attributes",action:()=>{},icon:"",category:"component",priority:10,componentId:"er-entity",actionType:"add-component"}),l.push({id:"er-relationship",title:"Add Relationship",description:"Connect entities with relationships",action:()=>{},icon:"",category:"component",priority:9,componentId:"er-relationship",actionType:"add-component"})),(u.includes("class")||u.includes("uml")||u.includes("oop")||u.includes("object-oriented"))&&(l.push({id:"uml-class",title:"Add Class",description:"Create a UML class with methods and properties",action:()=>{},icon:"",category:"component",priority:10,componentId:"uml-class",actionType:"add-component"}),l.push({id:"uml-interface",title:"Add Interface",description:"Define an interface for your design",action:()=>{},icon:"",category:"component",priority:8,componentId:"uml-interface",actionType:"add-component"})),(u.includes("system")||u.includes("architecture")||u.includes("microservice")||u.includes("api"))&&(l.push({id:"api-gateway",title:"Add API Gateway",description:"Central entry point for your services",action:()=>{},icon:"",category:"component",priority:10,componentId:"api-gateway",actionType:"add-component"}),l.push({id:"load-balancer",title:"Add Load Balancer",description:"Distribute traffic across servers",action:()=>{},icon:"",category:"component",priority:9,componentId:"loadbalancer",actionType:"add-component"}),l.push({id:"database",title:"Add Database",description:"Add a database to store your data",action:()=>{},icon:"",category:"component",priority:8,componentId:"database",actionType:"add-component"})),(u.includes("cache")||u.includes("redis")||u.includes("performance"))&&l.push({id:"cache",title:"Add Cache Layer",description:"Improve performance with caching",action:()=>{},icon:"",category:"component",priority:9,componentId:"cache",actionType:"add-component"}),(u.includes("queue")||u.includes("async")||u.includes("message")||u.includes("event"))&&l.push({id:"message-queue",title:"Add Message Queue",description:"Enable asynchronous communication",action:()=>{},icon:"",category:"component",priority:9,componentId:"queue",actionType:"add-component"}),e){const{nodeCount:d,componentTypes:f,isEmpty:p}=e;p&&l.push({id:"tip-start",title:"Start with a Component",description:"Drag a component from the palette to begin your design",action:()=>{},icon:"",category:"tip",priority:10,actionType:"info-only"}),d>1&&f.length>1&&l.push({id:"tip-connect",title:"Connect Components",description:"Click and drag from one component to another to create connections",action:()=>{},icon:"",category:"tip",priority:8,actionType:"info-only"}),d>5&&l.push({id:"group",title:"Organize with Groups",description:"Use group containers to organize related components",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"cluster",actionType:"add-component"}),f.includes("database")&&!f.includes("cache")&&l.push({id:"pattern-cache",title:"Consider Adding Cache",description:"Reduce database load with a caching layer",action:()=>{},icon:"",category:"pattern",priority:8,componentId:"cache",actionType:"add-component"}),(f.includes("api-gateway")||f.includes("server"))&&!f.includes("load-balancer")&&l.push({id:"pattern-lb",title:"Add Load Balancing",description:"Scale your API with a load balancer",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"loadbalancer",actionType:"add-component"})}return l.length===0&&(l.push({id:"tip-palette",title:"Explore Components",description:`Browse ${ps.length}+ components in the palette`,action:()=>{},icon:"",category:"tip",priority:5,actionType:"info-only"}),l.push({id:"tip-export",title:"Export Your Design",description:"Save your work as PNG or JSON",action:()=>{},icon:"",category:"tip",priority:4,actionType:"info-only"})),l.sort((d,f)=>f.priority-d.priority).slice(0,5)},[t,e]);return i&&i.length>0?i:o},Pve=()=>{const{dismissWelcome:t}=TA();return g.jsx(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-4xl mb-3",children:""}),g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Design Assistant!"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"I'm here to help you with smart suggestions based on what you're building. Start adding components to your canvas, and I'll provide contextual tips!"}),g.jsx("button",{onClick:t,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md
            transition-colors font-medium`,children:"Got it!"})]})})},Bve=({suggestion:t,wasAdded:e,onClick:n})=>{const r=t.actionType==="add-component"||t.actionType==="add-pattern",i=()=>{let o=`bg-theme/50 rounded-xl p-3.5
      transition-all duration-300 border shadow-sm`;return r?o+=` hover:shadow-md hover:scale-[1.02] hover:border-accent/40 
        hover:bg-accent/5 cursor-pointer transform`:o+=" border-theme/10",e?o+=" bg-green-500/10 border-green-500/30 shadow-green-500/20":o+=" border-theme/10",o},s=()=>r&&!e?g.jsx("span",{className:`text-xs px-2 py-1 bg-accent/10 text-accent rounded-full 
          font-medium border border-accent/20`,children:"Click to add"}):e?g.jsxs(gt.span,{initial:{scale:0},animate:{scale:1},className:`text-xs px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 
            rounded-full font-medium border border-green-500/20 flex items-center gap-1`,children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Added"})]}):null;return g.jsx(gt.div,{whileHover:r?{x:4}:{},className:i(),onClick:()=>n(t),children:g.jsxs("div",{className:"flex items-start gap-3",children:[t.icon&&g.jsx("div",{className:`w-8 h-8 flex-shrink-0 bg-accent/10 rounded-lg 
            flex items-center justify-center`,children:g.jsx("span",{className:"text-lg",children:t.icon})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[g.jsx("h5",{className:"font-semibold text-sm text-theme",children:t.title}),s()]}),g.jsx("p",{className:"text-xs text-muted leading-relaxed",children:t.description})]})]})})},zve=({canvasContext:t,nodes:e=[],edges:n=[],onAddComponent:r})=>{const{isOpen:i,showWelcome:s,userIntent:o,toggleChatBot:l,updateCanvasContext:u}=TA(),d=Ive(o,t??null,e,n),[f,p]=M.useState(null);M.useEffect(()=>{t&&u(t)},[t,u]);const m=b=>{if(b.actionType==="add-component"&&b.componentId&&r)r(b.componentId),p(b.id),setTimeout(()=>p(null),2e3);else if(b.actionType==="add-pattern"&&b.componentIds&&r){for(const x of b.componentIds)r(x);p(b.id),setTimeout(()=>p(null),2e3)}};return g.jsxs(g.Fragment,{children:[g.jsxs(gt.button,{onClick:l,className:`fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]
          text-white rounded-full shadow-xl flex items-center justify-center
          z-50 transition-all hover:shadow-2xl`,whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},"aria-label":"Toggle chat bot",children:[i?g.jsx(hu,{className:"w-8 h-8"}):g.jsx(gJ,{className:"w-8 h-8"}),d.length>0&&!i&&g.jsx(gt.div,{initial:{scale:0},animate:{scale:1},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full 
              flex items-center justify-center text-xs font-bold`,children:d.length})]}),g.jsx(uu,{children:i&&g.jsxs(gt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:`fixed bottom-24 right-6 w-96 max-h-[600px] 
              bg-[var(--surface)] rounded-2xl shadow-2xl
              border border-theme/10 backdrop-blur-sm
              flex flex-col z-50 overflow-hidden`,children:[g.jsxs("div",{className:`flex items-center justify-between px-5 py-4 
              bg-gradient-to-r from-[var(--brand)] to-[var(--accent)]`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:g.jsx("span",{className:"text-2xl",children:""})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:"Design Assistant"}),g.jsx("p",{className:"text-xs text-white/80",children:"Smart suggestions for you"})]})]}),g.jsx("button",{onClick:l,className:`text-white/80 hover:text-white transition-colors 
                  w-8 h-8 flex items-center justify-center rounded-full
                  hover:bg-white/10`,"aria-label":"Close chat bot",children:g.jsx(hu,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-gradient-to-b from-transparent to-theme/5 chatbot-scroll",children:g.jsx(uu,{mode:"wait",children:s?g.jsx(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:g.jsx(Pve,{})},"welcome"):g.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[o&&g.jsx(gt.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`bg-gradient-to-br from-accent/10 to-accent/5 
                          border border-accent/20 rounded-xl p-4 mb-4 shadow-sm`,children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("span",{className:"text-2xl",children:""}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-theme text-base mb-1",children:o.title||"Your Project"}),o.description&&g.jsx("p",{className:"text-sm text-muted leading-relaxed",children:o.description})]})]})}),d.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("h4",{className:"text-sm font-bold text-theme",children:"Suggestions for you"}),g.jsx("span",{className:`ml-auto text-xs px-2 py-1 bg-accent/10 
                            text-accent rounded-full font-medium`,children:d.length})]}),g.jsx("div",{className:"space-y-2",children:d.map((b,x)=>g.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.05},children:g.jsx(Bve,{suggestion:b,wasAdded:f===b.id,onClick:m})},b.id))})]}):g.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[g.jsx("div",{className:`w-16 h-16 mx-auto mb-4 bg-theme/5 rounded-full 
                          flex items-center justify-center`,children:g.jsx("span",{className:"text-4xl opacity-50",children:""})}),g.jsx("p",{className:"text-muted text-sm",children:"Start adding components to your canvas!"}),g.jsx("p",{className:"text-muted text-xs mt-1",children:"I'll provide smart suggestions as you design"})]}),t&&!t.isEmpty&&g.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-5 pt-4 border-t border-theme/10",children:[g.jsxs("h5",{className:"text-xs font-bold text-muted uppercase tracking-wide mb-3 flex items-center gap-2",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Canvas Overview"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:`bg-gradient-to-br from-blue-500/10 to-blue-500/5 
                            border border-blue-500/20 rounded-lg p-3 text-center`,children:[g.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.nodeCount}),g.jsx("div",{className:"text-xs text-muted mt-1",children:"Components"})]}),g.jsxs("div",{className:`bg-gradient-to-br from-purple-500/10 to-purple-500/5 
                            border border-purple-500/20 rounded-lg p-3 text-center`,children:[g.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.edgeCount}),g.jsx("div",{className:"text-xs text-muted mt-1",children:"Connections"})]})]})]})]},"suggestions")})}),g.jsx("div",{className:"px-5 py-3 border-t border-theme/10 bg-theme/5",children:g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("p",{className:"text-xs text-muted font-medium",children:"Suggestions adapt to your design"})]})})]})})]})},Vve=({onSubmit:t,onSkip:e})=>{const[n,r]=M.useState(""),[i,s]=M.useState(""),o=l=>{if(l.preventDefault(),n.trim()||i.trim()){const u={title:n.trim(),description:i.trim(),timestamp:new Date};t(u)}};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:g.jsx(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-[var(--surface)] rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4",children:g.jsxs("form",{onSubmit:o,children:[g.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[g.jsx("h2",{className:"text-xl font-bold text-theme",children:" What are you designing today?"}),g.jsx("p",{className:"text-sm text-muted mt-1",children:"Help us provide better suggestions by sharing what you're building"})]}),g.jsxs("div",{className:"px-6 py-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"project-title",className:"block text-sm font-medium text-theme mb-2",children:"Project Title"}),g.jsx("input",{id:"project-title",type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"e.g., E-commerce System, Blog Database, Microservices Architecture...",className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted`,autoFocus:!0})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"project-description",className:"block text-sm font-medium text-theme mb-2",children:["Description ",g.jsx("span",{className:"text-muted",children:"(Optional)"})]}),g.jsx("textarea",{id:"project-description",value:i,onChange:l=>s(l.target.value),placeholder:"Briefly describe what you want to design and its key features...",rows:4,className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted
                  resize-none`})]}),g.jsx("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-3",children:g.jsxs("p",{className:"text-xs text-theme",children:[" ",g.jsx("strong",{children:"Tip:"})," This information will be used for auto-save and to provide you with smart, context-aware suggestions while you design."]})})]}),g.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[g.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 text-sm font-medium text-muted
                hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors`,children:"Skip for now"}),g.jsx("button",{type:"submit",className:`px-4 py-2 text-sm font-medium bg-accent hover:brightness-90 
                text-white rounded-md transition-all`,children:"Continue"})]})]})})})},qve={customEdge:u0e,erRelationship:m0e},Fve=ke.memo(t=>{const e=t.data;return g.jsx(t9,{id:t.id,data:e,onCopy:(n,r)=>t.onCopy(n,r),isInGroup:t.isInGroup})}),Hve=ke.memo(t=>{const e=t.data;return g.jsx(o9,{id:t.id,data:e,onCopy:(n,r)=>t.onCopy(n,r),isInGroup:t.isInGroup})}),Uve=ke.memo(t=>{const e=t.data;return g.jsx(a9,{id:t.id,data:e,onCopy:(n,r)=>t.onCopy(n,r),isInGroup:t.isInGroup})}),$ve=(t,e)=>n=>{const r=e.current?.find(i=>i.id===n.id)?.parentId!==void 0;return g.jsx(Fve,{...n,onCopy:t,isInGroup:r})},Gve=(t,e)=>n=>{const r=e.current?.find(i=>i.id===n.id)?.parentId!==void 0;return g.jsx(Hve,{...n,onCopy:t,isInGroup:r})},Wve=(t,e)=>n=>{const r=e.current.find(i=>i.id===n.id)?.parentId!==void 0;return g.jsx(Uve,{...n,onCopy:t,isInGroup:r})},Kve=()=>{Hl();const t=gh(),n=eW()?.id,{screenToFlowPosition:r,flowToScreenPosition:i}=sh(),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:f}=xh(),{userIntent:p,setUserIntent:m,resetChatBot:b}=TA(),x=b0e(),w=M.useRef(x);w.current=x;const S=M.useRef([]),C=M.useRef(!1),E=new URLSearchParams(globalThis.location.search).get("diagramId"),[N,A]=M.useState(null),[_,O]=M.useState(!0),[R,L]=M.useState(null),[I,F]=M.useState(!1),[q,U]=M.useState(null),[P,H]=M.useState(null),[j,V]=M.useState(!1),[G,te]=M.useState(!1),[z,W]=M.useState(!1),[ae,re]=M.useState(""),[$,Z]=M.useState(""),[ee,de]=M.useState(!1),[oe,ye]=M.useState(""),[Ce,Pe]=M.useState("read"),[Ie,Ae]=M.useState([]),[Ee,Ne]=M.useState(!1),[yt,Oe]=M.useState(!1),[xt,wt]=M.useState("idle"),[Yt,gn]=M.useState(null),[Ht,Mt]=M.useState(!1),[Dn,yn]=M.useState(0),Bt=M.useRef(null);M.useEffect(()=>{if(!n){O(!1),L("No problem ID provided");return}if(n==="free"){A({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),O(!1);return}if(n.startsWith("custom-")){const Y=localStorage.getItem(`custom-problem-${n}`);if(Y){A(JSON.parse(Y)),O(!1);return}}(async()=>{try{O(!0),L(null);const ie=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!ie.ok)throw new Error(`Failed to fetch problem: ${ie.status} ${ie.statusText}`);const pe=await ie.json();A(pe)}catch(Y){L(Y instanceof Error?Y.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",Y)}finally{O(!1)}})()},[n]);const ht=()=>t("/"),{state:_t,setState:Dt,undo:xr,redo:Hr,canUndo:Ii,canRedo:rn}=Noe({nodes:[],edges:[]}),[Le,$e,vr]=Yfe(_t.nodes),[pt,bn,vo]=Xfe(_t.edges),{getNodes:Pi,fitView:Ur}=sh(),$r=M.useRef(!1);M.useEffect(()=>{S.current=Le},[Le]),M.useEffect(()=>{if(n==="free"&&!_){const X=!q&&!E&&Le.length===0;if(X&&!C.current){b();const Y=setTimeout(()=>{te(!0),C.current=!0},500);return()=>clearTimeout(Y)}else X||(C.current=!1)}},[n,_,q,E,Le.length,b]);const[wr,Dr]=M.useState(!1),[Gr,St]=M.useState(!1),Kn=M.useRef(null);M.useEffect(()=>{if(E)(async()=>{try{const Y=o?await Jt.getDiagram(E):await Jt.getPublicDiagram(E),ie=Y.nodes,pe=Y.edges;$e(ie),bn(pe),U(Y.id),H(Y),Dt({nodes:ie,edges:pe})}catch(Y){console.error("Failed to load diagram:",Y),x.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&o){const X=`last-diagram-${s?.id||"anonymous"}`,Y=localStorage.getItem(X);Y&&(async()=>{try{const pe=await Jt.getDiagram(Y),be=pe.nodes,we=pe.edges;$e(be),bn(we),U(pe.id),H(pe),Dt({nodes:be,edges:we}),x.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(X),x.error("Failed to restore previous design. Starting fresh.")}})()}else n&&n!=="free"&&o&&(async()=>{try{const Y=await Jt.getAttemptByProblem(n);if(console.log("Loaded attempt:",Y),Y){const ie=Y.nodes,pe=Y.edges;$e(ie),bn(pe),Y.elapsedTime&&yn(Y.elapsedTime),Y.lastAssessment&&(console.log("Restoring assessment:",Y.lastAssessment),zt(Y.lastAssessment),ge("assessment")),Dt({nodes:ie,edges:pe}),x.success("Progress restored from previous session")}}catch(Y){console.error("Failed to load saved attempt:",Y)}})()},[E,o,n,s?.id]),M.useEffect(()=>{Mt(o&&n!==void 0)},[o,n]),M.useEffect(()=>{if(!Ht||Le.length===0)return;const Y=setTimeout(async()=>{try{if(wt("saving"),n==="free")if(q){await Jt.updateDiagram(q,{title:P?.title||"Auto-saved Design",description:P?.description||"Auto-saved design",nodes:Le,edges:pt});const be=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(be,q)}else if(p&&(p.title||p.description)){const be=await Jt.saveDiagram({title:p.title||"Untitled Design",description:p.description||"",nodes:Le,edges:pt});U(be.id),H(be);const we=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(we,be.id)}else{W(!0),wt("idle");return}else{if(!n)return;await Jt.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:Le,edges:pt,elapsedTime:Dn})}wt("saved"),gn(new Date);const ie=localStorage.getItem("lastAutoSaveToast"),pe=Date.now();(!ie||pe-Number.parseInt(ie)>6e4)&&(x.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),localStorage.setItem("lastAutoSaveToast",pe.toString())),setTimeout(()=>wt("idle"),3e3)}catch(ie){console.error("Auto-save failed:",ie),wt("error"),setTimeout(()=>wt("idle"),5e3)}},3e3);return()=>clearTimeout(Y)},[Le,pt,Ht,n,q,s?.id,Dn,N,p]),M.useEffect(()=>{$r.current=!0,$e(_t.nodes),bn(_t.edges),setTimeout(()=>{$r.current=!1},0)},[_t,$e,bn]),M.useEffect(()=>{z&&p&&(p.title&&!ae&&re(p.title),p.description&&!$&&Z(p.description))},[z,p,ae,$]),M.useEffect(()=>{$r.current||Le.length===0&&pt.length===0||Dt({nodes:Le,edges:pt})},[Le,pt,Dt]),M.useEffect(()=>{const X=Y=>{(Y.ctrlKey||Y.metaKey)&&Y.key==="z"&&!Y.shiftKey&&(Y.preventDefault(),xr()),((Y.ctrlKey||Y.metaKey)&&Y.shiftKey&&Y.key==="z"||Y.ctrlKey&&Y.key==="y")&&(Y.preventDefault(),Hr())};return globalThis.addEventListener("keydown",X),()=>globalThis.removeEventListener("keydown",X)},[xr,Hr]),M.useEffect(()=>{if(n!=="free")return Bt.current=setInterval(()=>{yn(X=>X+1)},1e3),()=>{Bt.current&&clearInterval(Bt.current)}},[n]),M.useEffect(()=>()=>{const X=`last-diagram-${s?.id||"anonymous"}`;if(localStorage.removeItem(X),n&&n!=="free"){const Y=`problem-progress-${s?.id||"anonymous"}-${n}`;localStorage.removeItem(Y)}},[s?.id,n]);const wo=X=>{const Y=Math.floor(X/3600),ie=Math.floor(X%3600/60),pe=X%60;return Y>0?`${Y.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${ie.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},Bi=X=>{const ie=Math.floor((new Date().getTime()-X.getTime())/1e3);if(ie<60)return"a moment ago";if(ie<1800)return`${Math.floor(ie/60)} min ago`;if(ie<3600)return"about an hour ago";if(ie<86400){const pe=Math.floor(ie/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${X.toLocaleTimeString()}`};M.useEffect(()=>{const X=Y=>{wr&&(Y.target.closest(".relative")||Dr(!1))};if(wr)return document.addEventListener("click",X),()=>document.removeEventListener("click",X)},[wr]),M.useEffect(()=>{const X=Y=>{Gr&&(Y.target.closest(".relative")||St(!1))};if(Gr)return document.addEventListener("click",X),()=>document.removeEventListener("click",X)},[Gr]);const sr=X=>{const Y=Le.find(Se=>Se.id===X.source),ie=Le.find(Se=>Se.id===X.target),pe=Se=>{const Be=Se?.data?.componentId;return Be==="entity"||Be==="weak-entity"},be=pe(Y)&&pe(ie),we={...X,type:be?"erRelationship":"customEdge",data:be?{label:"",hasLabel:!1,cardinality:"one-to-many"}:{label:"",hasLabel:!1}};bn(Se=>KF(we,Se))},[Xt,zt]=ke.useState(null),[Rr,Rn]=M.useState(!1),Wr=async()=>{if(Rr)return;Rn(!0),zt(null);const X={components:Le.map(Y=>{const ie=Y.data??{},pe=ie.type;let be;typeof pe=="string"?be=pe:typeof Y.type=="string"?be=Y.type:be="microservice";const we=ie.label,Se=typeof we=="string"?we:String(Y.id),Be=ie&&typeof ie=="object"?{...ie}:{},{icon:Qe,subtitle:De,...Ze}=Be;return{id:Y.id,type:be,label:Se,position:{x:Y.position?.x??0,y:Y.position?.y??0},properties:{...Ze,nodeData:{label:Se,icon:ie.icon,subtitle:ie.subtitle}}}}),connections:pt.map(Y=>{const ie=Y.data??{},pe=ie.type,be=typeof pe=="string"?pe:"api-call",we=ie.label,Se=typeof we=="string"?we:void 0;return{id:Y.id??`${Y.source}-${Y.target}`,source:Y.source,target:Y.target,type:be,label:Se,properties:ie}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",X);const Y=await zye(X,N);if(zt(Y),ge("assessment"),n&&n!=="free"&&o)try{console.log("Saving assessment to database:",Y),await Jt.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:Le,edges:pt,elapsedTime:Dn,lastAssessment:Y}),console.log("Assessment saved successfully")}catch(ie){console.error("Failed to save assessment:",ie)}}catch(Y){console.error("Assessment failed:",Y),zt({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{Rn(!1)}},es=M.useRef(null),Os=X=>{X.preventDefault(),X.dataTransfer&&(X.dataTransfer.dropEffect="move")},Kr=X=>{X.preventDefault();const Y=X.dataTransfer?.getData("application/reactflow")||X.dataTransfer?.getData("text/plain");let ie=Y;try{Y&&(ie=JSON.parse(Y).type||Y)}catch{}const pe=r({x:X.clientX,y:X.clientY}),be=`${ie}-${Date.now()}`,we=ps.find(De=>De.id===ie),Se=we?.group==="Grouping",Be=we?.nodeType||(Se?"group":"custom"),Qe={id:be,position:pe,type:Be,style:Se?{width:400,height:300,zIndex:-1}:void 0,data:{label:we?.label??ie,componentId:we?.id,icon:we?.icon,subtitle:we?.description,backgroundColor:Se?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Se?"rgba(100, 100, 255, 0.3)":void 0,...Be==="tableNode"?{componentName:we?.label||"Entity",attributes:we?.data?.attributes||[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}],renderConfig:we?.renderConfig}:{},...Be==="erNode"?we?.properties?.reduce((De,Ze)=>(Ze.default!==void 0&&Ze.default!==""&&(De[Ze.key]=Ze.default),De),{}):{}}};$e(De=>[...De,Qe])},ts=(X,Y)=>{if(Y.parentId)return;const ie=Le.filter(be=>be.type==="group");let pe;for(const be of ie){if(be.id===Y.id)continue;const we=be.position.x,Se=be.position.y,Be=be.style?.width||400,Qe=be.style?.height||300,De=Y.position.x,Ze=Y.position.y,mt=10;if(De>we+mt&&De<we+Be-mt&&Ze>Se+mt&&Ze<Se+Qe-mt){pe=be.id;break}}pe&&$e(be=>be.map(we=>{if(we.id===Y.id){const Se=be.find(Qe=>Qe.id===pe),Be=Se?{x:Y.position.x-Se.position.x,y:Y.position.y-Se.position.y}:Y.position;return{...we,position:Be,parentId:pe,extent:"parent"}}return we}))},xn=M.useCallback(()=>{const X=Vt.current;X&&$e(Y=>Y.map(ie=>{if(ie.id===X&&ie.parentId){const pe=Y.find(Se=>Se.id===ie.parentId);let be=ie.position.x,we=ie.position.y;return pe&&(be+=pe.position.x,we+=pe.position.y),{...ie,position:{x:be,y:we},parentId:void 0,extent:void 0}}return ie}))},[$e]),[He,or]=M.useState(null),[ar,Lt]=M.useState({}),[ns,Re]=M.useState({}),[J,ge]=M.useState("details"),[_e,dt]=M.useState(!1),Vt=M.useRef(null);ke.useEffect(()=>{Vt.current=He},[He]);const Rt=M.useRef(void 0);Rt.current=X=>{const ie=X.detail.id;$e(pe=>pe.filter(be=>be.id!==ie)),Vt.current===ie&&(or(null),ge("details"))};const Ut=M.useRef(void 0);Ut.current=X=>{const ie=X.detail.id;or(pe=>{const be=pe===ie?null:ie;return ge(be?"inspector":"details"),be})};function Bn(X,Y,ie,pe){return X.map(be=>be.id===Y?{...be,data:{...be.data,label:ie,hasLabel:pe},label:ie}:be)}function vn(X,Y,ie){return X.map(pe=>pe.id===Y?{...pe,data:{...pe.data,cardinality:ie}}:pe)}const fi=ke.useRef(void 0);fi.current=X=>{const Y=X,{id:ie,label:pe,hasLabel:be}=Y.detail;bn(we=>Bn(we,ie,pe,be))};const qt=ke.useRef(void 0);qt.current=X=>{const Y=X,{id:ie,cardinality:pe}=Y.detail;bn(be=>vn(be,ie,pe))},ke.useEffect(()=>{const X=ie=>fi.current?.(ie),Y=ie=>qt.current?.(ie);return globalThis.addEventListener("diagram:edge-label-change",X),globalThis.addEventListener("diagram:edge-cardinality-change",Y),()=>{globalThis.removeEventListener("diagram:edge-label-change",X),globalThis.removeEventListener("diagram:edge-cardinality-change",Y)}},[]),ke.useEffect(()=>{const X=pe=>Rt.current?.(pe),Y=pe=>Ut.current?.(pe),ie=pe=>{const be=pe;$e(we=>we.map(Se=>{if(Se.id===be.detail.id&&Se.parentId){const Be=we.find(Ze=>Ze.id===Se.parentId);let Qe=Se.position.x,De=Se.position.y;return Be&&(Qe+=Be.position.x,De+=Be.position.y),{...Se,position:{x:Qe,y:De},parentId:void 0,extent:void 0}}return Se}))};return globalThis.addEventListener("diagram:node-delete",X),globalThis.addEventListener("diagram:node-toggle",Y),globalThis.addEventListener("diagram:node-detach",ie),()=>{globalThis.removeEventListener("diagram:node-delete",X),globalThis.removeEventListener("diagram:node-toggle",Y),globalThis.removeEventListener("diagram:node-detach",ie)}},[$e]),ke.useEffect(()=>{const X=we=>{if(!we)return[];if(Array.isArray(we))return we;if(typeof we=="string")try{const Se=JSON.parse(we);return Array.isArray(Se)?Se:[]}catch{return[]}return[]},Y=we=>{const Se=we;$e(Be=>Be.map(Qe=>{if(Qe.id===Se.detail.nodeId){const De=Qe.data,Ze=X(De.attributes);return{...Qe,data:{...De,attributes:[...Ze,Se.detail.attribute]}}}return Qe}))},ie=we=>{const Se=we;$e(Be=>Be.map(Qe=>{if(Qe.id===Se.detail.nodeId){const De=Qe.data,Ze=X(De.attributes);return{...Qe,data:{...De,attributes:Ze.filter(mt=>mt.id!==Se.detail.attributeId)}}}return Qe}))},pe=we=>{const Se=we;$e(Be=>Be.map(Qe=>{if(Qe.id===Se.detail.nodeId){const De=Qe.data,Ze=X(De.attributes);return{...Qe,data:{...De,attributes:Ze.map(mt=>mt.id===Se.detail.attributeId?{...mt,[Se.detail.key]:!mt[Se.detail.key]}:mt)}}}return Qe}))},be=we=>{const Se=we;$e(Be=>Be.map(Qe=>{if(Qe.id===Se.detail.nodeId){const De=Qe.data,Ze=X(De.attributes);return{...Qe,data:{...De,attributes:Ze.map(mt=>mt.id===Se.detail.attributeId?{...mt,name:Se.detail.name,type:Se.detail.type}:mt)}}}return Qe}))};return globalThis.addEventListener("diagram:table-attribute-add",Y),globalThis.addEventListener("diagram:table-attribute-delete",ie),globalThis.addEventListener("diagram:table-attribute-toggle",pe),globalThis.addEventListener("diagram:table-attribute-update",be),()=>{globalThis.removeEventListener("diagram:table-attribute-add",Y),globalThis.removeEventListener("diagram:table-attribute-delete",ie),globalThis.removeEventListener("diagram:table-attribute-toggle",pe),globalThis.removeEventListener("diagram:table-attribute-update",be)}},[$e]),ke.useEffect(()=>{if(!He)return;const X=Le.find(Y=>Y.id===He);Lt(X?.data??{})},[He,Le]);const Yn=(X,Y)=>{Lt(ie=>({...ie,[X]:Y})),He&&$e(ie=>ie.map(pe=>pe.id===He?{...pe,data:{...pe.data,[X]:Y}}:pe))},rs=(X,Y)=>Yn(X,Y),Oa=(X,Y)=>Yn(X,Y),Ql=(X,Y)=>Yn(X,Y),ec=(X,Y)=>Yn(X,Y),lr=()=>{if(!He)return;const X={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(ns[He]?.length||0)+1}`,label:`Custom Property ${(ns[He]?.length||0)+1}`,type:"text",value:""};Re(Y=>{const ie={...Y,[He]:[...Y[He]||[],X]};return $e(pe=>pe.map(be=>be.id===He?{...be,data:{...be.data,_customProperties:ie[He]}}:be)),ie})},tc=(X,Y)=>{He&&Re(ie=>{const be=(ie[He]||[]).map(we=>we.id===X?{...we,...Y}:we);return $e(we=>we.map(Se=>Se.id===He?{...Se,data:{...Se.data,_customProperties:be}}:Se)),{...ie,[He]:be}})},Hu=X=>{He&&Re(Y=>{const pe=(Y[He]||[]).filter(be=>be.id!==X);return $e(be=>be.map(we=>we.id===He?{...we,data:{...we.data,_customProperties:pe}}:we)),{...Y,[He]:pe}})};ke.useEffect(()=>{if(!He)return;const X=Le.find(Y=>Y.id===He);X?.data?._customProperties&&Re(Y=>({...Y,[He]:X.data._customProperties}))},[He,Le]);const So=X=>{const Y=`${He}-${X.key}`,ie=ar[X.key];let pe;typeof ie=="number"?pe=ie:typeof X.default=="number"?pe=X.default:pe=void 0;let be;typeof ie=="string"?be=ie:X.default===null||X.default===void 0?be="":be=String(X.default);let we;typeof ie=="string"?we=ie:X.default===null||X.default===void 0?we=void 0:we=String(X.default);const Se=!!ie;return g.jsxs("div",{className:"flex flex-col px-1",children:[X.type==="boolean"&&g.jsx(Qq,{id:Y,checked:Se,onChange:Be=>rs(X.key,Be),label:X.label}),X.type==="number"&&g.jsx(eF,{id:Y,label:X.label,value:pe,onChange:Be=>Oa(X.key,Be)}),X.type==="text"&&g.jsx(Vm,{id:Y,label:X.label,value:be,placeholder:X.placeholder,onChange:Be=>Ql(X.key,Be)}),X.type==="textarea"&&g.jsx(Kg,{id:Y,label:X.label,value:be,placeholder:X.placeholder,onChange:Be=>Ql(X.key,Be)}),X.type==="select"&&g.jsx(tF,{id:Y,label:X.label,value:we,options:X.options||[],onChange:Be=>ec(X.key,Be)})]},X.key)};let is=null;if(He){const X=Le.find(Y=>Y.id===He);if(X){const Y=X.data.componentId?ps.find(ie=>ie.id===X.data.componentId):ps.find(ie=>ie.label===X.data.label);Y?.properties?is=Y.properties.map(ie=>So(ie)):is=g.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else is=g.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let ss=null;if(He){const X=ns[He]||[];X.length>0?ss=X.map(Y=>g.jsx(y0e,{property:Y,onUpdate:tc,onDelete:Hu},Y.id)):ss=g.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const ko=M.useCallback((X,Y)=>{const ie=S.current.find(we=>we.id===X);if(!ie)return;const pe=`${X}-copy-${Date.now()}`,be={...ie,id:pe,position:{x:ie.position.x+200,y:ie.position.y+100},data:{...Y},selected:!1};$e(we=>[...we,be])},[$e]),cr=M.useMemo(()=>({custom:$ve(ko,S),erNode:Gve(ko,S),tableNode:Wve(ko,S),group:g0e}),[ko]),Yr=M.useCallback(async()=>{if(!(!q||!ee))try{Oe(!0);const X=await Jt.getCollaborators(q);Ae(X)}catch(X){console.error("Failed to load collaborators:",X),w.current.error("Failed to load collaborators.")}finally{Oe(!1)}},[q,ee]);M.useEffect(()=>{ee&&q?Yr():ee||Ae([])},[ee,q,Yr]);const{state:Co,collaborators:La,cursors:zi,sendCursorPosition:Uu}=Mve({diagramId:q||"",nodes:Le,edges:pt,onNodesChange:M.useCallback(X=>{$e(X)},[$e]),onEdgesChange:M.useCallback(X=>{bn(X)},[bn]),enabled:!!q&&o}),nc=Co.isConnected,Eo=!Co.isConnected&&!Co.error,_0=0,$h=M.useCallback(X=>{if(!nc||!es.current?.getBoundingClientRect())return;const ie=r({x:X.clientX,y:X.clientY});Uu(ie)},[nc,Uu,r]),Gh=M.useMemo(()=>{if(n!=="free")return;const X=Le.map(Y=>Y.data?.componentId).filter(Boolean);return{nodeCount:Le.length,edgeCount:pt.length,componentTypes:X,isEmpty:Le.length===0}},[n,Le,pt]);if(_)return g.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),g.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(R)return g.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),g.jsx("div",{className:"text-muted mb-4",children:R}),g.jsxs("div",{className:"flex gap-3 justify-center",children:[g.jsx("button",{onClick:ht,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),g.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!N)return g.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),g.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),g.jsx("button",{onClick:ht,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function $u(X){const Y=ps.find(Be=>Be.id===X);if(Y)return Y;const ie=X.toLowerCase(),pe=ps.find(Be=>Be.id.toLowerCase()===ie);if(pe)return pe;const be=ps.find(Be=>Be.label.toLowerCase()===ie);if(be)return be;const we=ps.find(Be=>Be.tags?.some(Qe=>Qe.toLowerCase().includes(ie)));if(we)return we;const Se=ps.find(Be=>Be.label.toLowerCase().includes(ie)||ie.includes(Be.label.toLowerCase()));return Se||null}function Wh(X){const Y=$u(X),ie=es.current?.getBoundingClientRect();if(!ie)return;const pe=r({x:ie.left+ie.width/2,y:ie.top+ie.height/2}),be=`${Y?.id||"custom-component"}-${Date.now()}`,we=Y?.group==="Grouping",Se=Y?.nodeType||(we?"group":"custom"),Be=Y?.label??X,Qe=Y?.icon??"",De=Y?.description??"Custom Component",Ze={id:be,position:pe,type:Se,style:we?{width:400,height:300,zIndex:-1}:void 0,data:{label:Be,componentId:Y?.id||"custom-component",icon:Qe,subtitle:De,backgroundColor:we?"rgba(100, 100, 255, 0.05)":void 0,borderColor:we?"rgba(100, 100, 255, 0.3)":void 0}};$e(mt=>[...mt,Ze])}const D0=()=>{Le.length===0&&pt.length===0||dt(!0)},rc=()=>{$e([]),bn([]),or(null),zt(null),dt(!1)},Gu=()=>{dt(!1)},Ia=(X="png")=>{const Y=PF(Pi()),ie=Zy(Y,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let be,we;X==="svg"?(be=ZH,we="svg"):X==="jpeg"?(be=ype,we="jpg"):(be=gpe,we="png"),be(pe,{backgroundColor:X==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${ie.x}px, ${ie.y}px) scale(${ie.zoom})`}}).then(Se=>{const Be=document.createElement("a");Be.setAttribute("download",`system-design-${Date.now()}.${we}`),Be.setAttribute("href",Se),Be.click()}).catch(Se=>{console.error("Error generating image:",Se)})},No=()=>{try{const X=N?.title||"System Design",Y=N?.description,ie=Rve(Le,pt,X,Y),pe=`${X.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;gB(ie,pe,"application/json"),w.current.success("Design exported as JSON successfully!")}catch(X){console.error("Export JSON error:",X),w.current.error("Failed to export as JSON")}},To=()=>{try{const X=N?.title||"System Design",Y=N?.description,ie=jve(Le,pt,X,Y),pe=`${X.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;gB(ie,pe,"application/xml"),x.success("Design exported as XML successfully!")}catch(X){console.error("Export XML error:",X),x.error("Failed to export as XML")}},Kh=async X=>{const Y=X.target.files?.[0];if(Y)try{const ie=await Ove(Y);let pe;if(Y.name.endsWith(".json"))pe=pB(ie),x.success("Design imported from JSON successfully!");else if(Y.name.endsWith(".xml")||Y.name.endsWith(".drawio"))pe=mB(ie),x.success("Design imported from XML successfully!");else{const be=ie.trim();if(be.startsWith("{")||be.startsWith("["))pe=pB(ie),x.success("Design imported from JSON successfully!");else if(be.startsWith("<?xml")||be.startsWith("<mxfile"))pe=mB(ie),x.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}$e(pe.nodes),bn(pe.edges),U(null),setTimeout(()=>{Ur({padding:.2,duration:400})},100)}catch(ie){console.error("Import error:",ie),x.error(ie instanceof Error?ie.message:"Failed to import diagram")}finally{Kn.current&&(Kn.current.value="")}},Wu=()=>{Kn.current?.click()},Yh=async()=>{if(!(!oe.trim()||!q))try{Ne(!0),await Jt.addCollaborator(q,oe.trim(),Ce),w.current.success(`Diagram shared with ${oe} successfully!`),ye(""),Pe("read"),Yr()}catch(X){console.error("Failed to Share Design:",X),w.current.error("Failed to Share Design. Please try again.")}finally{Ne(!1)}},Pa=async(X,Y)=>{if(q)try{await Jt.updateCollaborator(q,X,Y),w.current.success("Permission updated successfully!"),Yr()}catch(ie){console.error("Failed to update permission:",ie),w.current.error("Failed to update permission.")}},Vi=async X=>{if(q)try{await Jt.removeCollaborator(q,X),w.current.success("Collaborator removed successfully!"),Yr()}catch(Y){console.error("Failed to remove collaborator:",Y),w.current.error("Failed to remove collaborator.")}},Ku=X=>{m(X),te(!1),x.success("Great! I'll provide suggestions based on your project.")},Ba=()=>{te(!1)},as=async X=>{if(X.preventDefault(),!!ae.trim())try{wt("saving");const Y={title:ae.trim(),description:$.trim()||void 0,nodes:Le,edges:pt},ie=await Jt.saveDiagram(Y);U(ie.id),H(ie);const pe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(pe,ie.id),wt("saved"),gn(new Date),W(!1),re(""),Z(""),x.success("Design saved successfully!")}catch(Y){console.error("Failed to save diagram:",Y),wt("error"),x.error("Failed to save design. Please try again.")}},Yu=()=>{W(!1),wt("idle"),re(""),Z("")},za=(X="TB")=>{const Y=Le.filter(De=>De.type==="group"),ie=Le.filter(De=>De.type!=="group"&&!De.parentId),pe=De=>De.type==="tableNode"?{width:400,height:400}:De.type==="erNode"?{width:400,height:300}:{width:200,height:80},be=new Map,we=new Map;for(const De of Y){const Ze=Le.filter(Xn=>Xn.parentId===De.id);if(Ze.length===0)continue;const mt=new Em.graphlib.Graph;mt.setDefaultEdgeLabel(()=>({})),mt.setGraph({rankdir:X,nodesep:X==="LR"?80:60,ranksep:X==="LR"?100:80,marginx:20,marginy:20});for(const Xn of Ze){const hi=pe(Xn);be.set(Xn.id,hi),mt.setNode(Xn.id,hi)}const R0=pt.filter(Xn=>Ze.some(hi=>hi.id===Xn.source)&&Ze.some(hi=>hi.id===Xn.target));for(const Xn of R0)mt.setEdge(Xn.source,Xn.target);Em.layout(mt);const j0=30,Xu=50,Zh=new Map;for(const Xn of Ze){const hi=mt.node(Xn.id);if(hi){const Jh=be.get(Xn.id)||{width:200,height:80};Zh.set(Xn.id,{x:hi.x-Jh.width/2+j0,y:hi.y-Jh.height/2+Xu})}}we.set(De.id,Zh)}const Se=new Em.graphlib.Graph;Se.setDefaultEdgeLabel(()=>({})),Se.setGraph({rankdir:X,nodesep:X==="LR"?150:80,ranksep:X==="LR"?200:100});for(const De of ie){const Ze=pe(De);be.set(De.id,Ze),Se.setNode(De.id,Ze)}const Be=pt.filter(De=>ie.some(Ze=>Ze.id===De.source)&&ie.some(Ze=>Ze.id===De.target));for(const De of Be)Se.setEdge(De.source,De.target);ie.length>0&&Em.layout(Se);const Qe=Le.map(De=>{if(De.type==="group")return De;if(De.parentId){const Ze=we.get(De.parentId);if(Ze){const mt=Ze.get(De.id);if(mt)return{...De,position:{x:mt.x,y:mt.y}}}return De}else{const Ze=Se.node(De.id);if(Ze){const mt=be.get(De.id)||{width:200,height:80};return{...De,position:{x:Ze.x-mt.width/2,y:Ze.y-mt.height/2}}}}return De});$e(Qe),globalThis.requestAnimationFrame(()=>{Ur({padding:.2,duration:400})})},Xh=()=>{if($e(X=>X.map(Y=>Y.id===He?{...Y,data:{...Y.data,...ar}}:Y)),He){const X=Le.find(Y=>Y.id===He);console.log("Node properties saved:",{id:He,data:X?.data,nodeProps:ar})}},ic=n==="free"?"Design Studio | Diagrammatic":`${N?.title||"System Design Challenge"} | Diagrammatic`,sc=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${N?.title||"system design"} challenge. ${N?.description?.substring(0,150)||"Practice system design skills"}...`;return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:ic,description:sc,keywords:`system design playground, ${N?.title||"free canvas"}, architecture diagram tool, ${N?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),g.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[g.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:g.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:g.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("button",{type:"button",onClick:ht,className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[g.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":N.title,children:N.title}),n!=="free"&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":N.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:N.difficulty}),N.estimated_time&&g.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[g.jsx(xJ,{className:"h-3 w-3"}),N.estimated_time]})]}),n!=="free"&&g.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:g.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:wo(Dn)})})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&g.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:Ht&&g.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[xt==="saving"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:"Saving..."})]}),xt==="saved"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),g.jsxs("span",{children:["Saved"," ",Yt&&Bi(Yt)]})]}),xt==="error"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),g.jsx("span",{children:"Save failed"})]}),xt==="idle"&&Yt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),g.jsxs("span",{children:["Saved ",Bi(Yt)]})]})]})}),n&&n!=="free"&&Ht&&g.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:g.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[xt==="saving"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:"Saving progress..."})]}),xt==="saved"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),g.jsxs("span",{children:["Progress saved"," ",Yt&&Bi(Yt)]})]}),xt==="error"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),g.jsx("span",{children:"Save failed"})]}),xt==="idle"&&Yt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),g.jsxs("span",{children:["Progress saved ",Bi(Yt)]})]})]})}),g.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[g.jsx("button",{type:"button",onClick:xr,disabled:!Ii,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:g.jsx(bJ,{className:"h-5 w-5"})}),g.jsx("button",{type:"button",onClick:Hr,disabled:!rn,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:g.jsx(yJ,{className:"h-5 w-5"})}),g.jsx("button",{type:"button",onClick:D0,disabled:Le.length===0&&pt.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:g.jsx(hu,{className:"h-5 w-5"})})]}),n==="free"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{type:"button",onClick:Wu,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:g.jsx(_J,{className:"h-5 w-5"})}),g.jsx("input",{ref:Kn,type:"file",accept:".json,.xml,.drawio",onChange:Kh,className:"hidden","aria-label":"Import diagram file"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("button",{type:"button",onClick:()=>Dr(!wr),disabled:Le.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:g.jsx(MJ,{className:"h-5 w-5"})}),wr&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),g.jsx("button",{type:"button",onClick:()=>{Ia("png"),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),g.jsx("button",{type:"button",onClick:()=>{Ia("jpeg"),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),g.jsx("button",{type:"button",onClick:()=>{Ia("svg"),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),g.jsx("div",{className:"border-t border-theme/10 my-1"}),g.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),g.jsx("button",{type:"button",onClick:()=>{No(),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),g.jsx("button",{type:"button",onClick:()=>{To(),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("button",{type:"button",onClick:()=>St(!Gr),disabled:Le.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:g.jsx(Eoe,{className:"h-5 w-5"})}),Gr&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[g.jsx("button",{type:"button",onClick:()=>{za("TB"),St(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),g.jsx("button",{type:"button",onClick:()=>{za("LR"),St(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&o&&q&&g.jsxs(g.Fragment,{children:[g.jsx("button",{type:"button",onClick:()=>de(!0),className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Share Diagram",children:g.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),g.jsx(_ve,{isConnected:nc,isConnecting:Eo,reconnectAttempts:_0,collaborators:La,showCollaborators:!0})]}),N?.id!=="free"&&g.jsx("button",{type:"button",onClick:Wr,disabled:Rr,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:Rr?"Assessing...":"Run Assessment"}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:o?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>V(!j),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?g.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),g.jsx(f8,{className:"h-4 w-4"})]}),j&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),g.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),g.jsx("button",{type:"button",onClick:()=>{f(),V(!1),U(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):g.jsx("button",{type:"button",onClick:()=>F(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),g.jsxs("div",{className:"flex-1 flex min-h-0",children:[g.jsx(Lye,{components:ps,onAdd:Wh}),g.jsx(Iye,{reactFlowWrapperRef:es,nodes:Le,edges:pt,nodeTypes:cr,edgeTypes:qve,onNodesChange:vr,onEdgesChange:vo,onConnect:sr,onDragOver:Os,onDrop:Kr,onNodeDragStop:ts,onMouseMove:$h,children:zi.map(X=>{const Y=i(X.position);return g.jsx(Dve,{name:X.user.name,color:J2(X.userId),position:Y,pictureUrl:X.user.pictureUrl},X.userId)})}),g.jsx(Pye,{problem:N,activeTab:J,setActiveTab:ge,inspectedNodeId:He,setInspectedNodeId:or,propertyElements:is,customPropertyElements:ss,onAddCustomProperty:lr,handleSave:Xh,assessmentResult:Xt,onDetachFromGroup:xn,isNodeInGroup:He?Le.find(X=>X.id===He)?.parentId!==void 0:!1})]}),_e&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),g.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),g.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"button",onClick:Gu,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),g.jsx("button",{type:"button",onClick:rc,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),g.jsx(Ny,{isOpen:I,onClose:()=>F(!1),onLogin:async(X,Y)=>{await l({email:X,password:Y})},onSignup:async(X,Y,ie)=>{await u({email:X,password:Y,name:ie})},onGoogleLogin:d}),G&&g.jsx(Vve,{onSubmit:Ku,onSkip:Ba}),z&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:g.jsxs("form",{onSubmit:as,children:[g.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:g.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),g.jsxs("div",{className:"px-6 py-4 space-y-4",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{id:"title-input",type:"text",value:ae,onChange:X=>re(X.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),g.jsx("textarea",{id:"description-input",value:$,onChange:X=>Z(X.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),g.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[g.jsx("button",{type:"button",onClick:Yu,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:!ae.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),ee&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Share Design"}),g.jsx("button",{type:"button",onClick:()=>de(!1),className:"p-1 text-muted hover:text-theme rounded-md transition-colors",children:g.jsx(hu,{className:"h-5 w-5"})})]}),g.jsxs("p",{className:"text-sm text-muted mt-1",children:['Share "',P?.title||"Untitled Design",'" with others']})]}),g.jsxs("div",{className:"px-6 py-4 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-medium text-theme",children:"Add Collaborator"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"share-email",className:"block text-sm font-medium text-theme mb-2",children:"Email Address"}),g.jsx("input",{id:"share-email",type:"email",value:oe,onChange:X=>ye(X.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"share-permission",className:"block text-sm font-medium text-theme mb-2",children:"Permission Level"}),g.jsxs("select",{id:"share-permission",value:Ce,onChange:X=>Pe(X.target.value),className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",children:[g.jsx("option",{value:"read",children:"Read Only - Can view the diagram"}),g.jsx("option",{value:"edit",children:"Read & Edit - Can view and modify the diagram"})]})]}),g.jsx("button",{type:"button",onClick:Yh,disabled:!oe.trim()||Ee,className:"w-full px-4 py-2 bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:Ee?"Sharing...":"Share Design"})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-medium text-theme",children:"Current Collaborators"}),g.jsx(Bye,{isLoading:yt,collaborators:Ie,onUpdatePermission:Pa,onRemove:Vi})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("h3",{className:"text-sm font-medium text-theme",children:"Share Link"}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("input",{type:"text",value:`${globalThis.location.origin}/#/playground/free?diagramId=${q}`,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-theme/20 rounded-md bg-theme/50 text-theme"}),g.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${globalThis.location.origin}/#/playground/free?diagramId=${q}`),x.success("Link copied to clipboard!")},className:"px-3 py-2 bg-theme/10 hover:bg-theme/20 text-theme rounded-md transition-colors",children:"Copy"})]}),g.jsx("p",{className:"text-xs text-muted",children:"Anyone with this link can access the diagram according to their permission level"})]})]})]})}),g.jsx(v0e,{toasts:x.toasts,onClose:x.removeToast}),n==="free"&&g.jsx(zve,{canvasContext:Gh,nodes:Le,edges:pt,onAddComponent:Wh})]})]})},Yve=()=>g.jsx(BH,{children:g.jsx(Kve,{})}),Xve=()=>(Hl(),g.jsx(OW,{children:g.jsx(Lve,{children:g.jsx(xW,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:g.jsxs(gW,{children:[g.jsx(rl,{path:"/",element:g.jsx(Nj,{})}),g.jsx(rl,{path:"/problems",element:g.jsx(SQ,{})}),g.jsx(rl,{path:"/create-problem",element:g.jsx(koe,{})}),g.jsx(rl,{path:"/diagrams",element:g.jsx(Coe,{})}),g.jsx(rl,{path:"/playground/:id",element:g.jsx(Yve,{})}),g.jsx(rl,{path:"*",element:g.jsx(Nj,{})})]})})})}));SG.createRoot(document.getElementById("root")).render(g.jsx(M.StrictMode,{children:g.jsx(Xve,{})}));
