function eF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ky={exports:{}},Qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function tF(){if(SA)return Qc;SA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Qc.Fragment=t,Qc.jsx=n,Qc.jsxs=n,Qc}var CA;function nF(){return CA||(CA=1,Ky.exports=tF()),Ky.exports}var v=nF(),Yy={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA;function rF(){if(EA)return Fe;EA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(I,G,se){this.props=I,this.context=G,this.refs=S,this.updater=se||y}w.prototype.isReactComponent={},w.prototype.setState=function(I,G){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,G,"setState")},w.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function E(){}E.prototype=w.prototype;function N(I,G,se){this.props=I,this.context=G,this.refs=S,this.updater=se||y}var k=N.prototype=new E;k.constructor=N,x(k,w.prototype),k.isPureReactComponent=!0;var T=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function D(I,G,se,le,H,X){return se=X.ref,{$$typeof:e,type:I,key:G,ref:se!==void 0?se:null,props:X}}function R(I,G){return D(I.type,G,void 0,void 0,void 0,I.props)}function P(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function $(I){var G={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(se){return G[se]})}var V=/\/+/g;function z(I,G){return typeof I=="object"&&I!==null&&I.key!=null?$(""+I.key):G.toString(36)}function Y(){}function B(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(Y,Y):(I.status="pending",I.then(function(G){I.status==="pending"&&(I.status="fulfilled",I.value=G)},function(G){I.status==="pending"&&(I.status="rejected",I.reason=G)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function F(I,G,se,le,H){var X=typeof I;(X==="undefined"||X==="boolean")&&(I=null);var Q=!1;if(I===null)Q=!0;else switch(X){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(I.$$typeof){case e:case t:Q=!0;break;case h:return Q=I._init,F(Q(I._payload),G,se,le,H)}}if(Q)return H=H(I),Q=le===""?"."+z(I,0):le,T(H)?(se="",Q!=null&&(se=Q.replace(V,"$&/")+"/"),F(H,G,se,"",function(he){return he})):H!=null&&(P(H)&&(H=R(H,se+(H.key==null||I&&I.key===H.key?"":(""+H.key).replace(V,"$&/")+"/")+Q)),G.push(H)),1;Q=0;var ce=le===""?".":le+":";if(T(I))for(var ae=0;ae<I.length;ae++)le=I[ae],X=ce+z(le,ae),Q+=F(le,G,se,X,H);else if(ae=g(I),typeof ae=="function")for(I=ae.call(I),ae=0;!(le=I.next()).done;)le=le.value,X=ce+z(le,ae++),Q+=F(le,G,se,X,H);else if(X==="object"){if(typeof I.then=="function")return F(B(I),G,se,le,H);throw G=String(I),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Q}function L(I,G,se){if(I==null)return I;var le=[],H=0;return F(I,le,"","",function(X){return G.call(se,X,H++)}),le}function q(I){if(I._status===-1){var G=I._result;G=G(),G.then(function(se){(I._status===0||I._status===-1)&&(I._status=1,I._result=se)},function(se){(I._status===0||I._status===-1)&&(I._status=2,I._result=se)}),I._status===-1&&(I._status=0,I._result=G)}if(I._status===1)return I._result.default;throw I._result}var W=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)};function ee(){}return Fe.Children={map:L,forEach:function(I,G,se){L(I,function(){G.apply(this,arguments)},se)},count:function(I){var G=0;return L(I,function(){G++}),G},toArray:function(I){return L(I,function(G){return G})||[]},only:function(I){if(!P(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Fe.Component=w,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=N,Fe.StrictMode=r,Fe.Suspense=u,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(I){return A.H.useMemoCache(I)}},Fe.cache=function(I){return function(){return I.apply(null,arguments)}},Fe.cloneElement=function(I,G,se){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var le=x({},I.props),H=I.key,X=void 0;if(G!=null)for(Q in G.ref!==void 0&&(X=void 0),G.key!==void 0&&(H=""+G.key),G)!M.call(G,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&G.ref===void 0||(le[Q]=G[Q]);var Q=arguments.length-2;if(Q===1)le.children=se;else if(1<Q){for(var ce=Array(Q),ae=0;ae<Q;ae++)ce[ae]=arguments[ae+2];le.children=ce}return D(I.type,H,void 0,void 0,X,le)},Fe.createContext=function(I){return I={$$typeof:o,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:s,_context:I},I},Fe.createElement=function(I,G,se){var le,H={},X=null;if(G!=null)for(le in G.key!==void 0&&(X=""+G.key),G)M.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(H[le]=G[le]);var Q=arguments.length-2;if(Q===1)H.children=se;else if(1<Q){for(var ce=Array(Q),ae=0;ae<Q;ae++)ce[ae]=arguments[ae+2];H.children=ce}if(I&&I.defaultProps)for(le in Q=I.defaultProps,Q)H[le]===void 0&&(H[le]=Q[le]);return D(I,X,void 0,void 0,null,H)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(I){return{$$typeof:l,render:I}},Fe.isValidElement=P,Fe.lazy=function(I){return{$$typeof:h,_payload:{_status:-1,_result:I},_init:q}},Fe.memo=function(I,G){return{$$typeof:d,type:I,compare:G===void 0?null:G}},Fe.startTransition=function(I){var G=A.T,se={};A.T=se;try{var le=I(),H=A.S;H!==null&&H(se,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ee,W)}catch(X){W(X)}finally{A.T=G}},Fe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Fe.use=function(I){return A.H.use(I)},Fe.useActionState=function(I,G,se){return A.H.useActionState(I,G,se)},Fe.useCallback=function(I,G){return A.H.useCallback(I,G)},Fe.useContext=function(I){return A.H.useContext(I)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(I,G){return A.H.useDeferredValue(I,G)},Fe.useEffect=function(I,G,se){var le=A.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(I,G)},Fe.useId=function(){return A.H.useId()},Fe.useImperativeHandle=function(I,G,se){return A.H.useImperativeHandle(I,G,se)},Fe.useInsertionEffect=function(I,G){return A.H.useInsertionEffect(I,G)},Fe.useLayoutEffect=function(I,G){return A.H.useLayoutEffect(I,G)},Fe.useMemo=function(I,G){return A.H.useMemo(I,G)},Fe.useOptimistic=function(I,G){return A.H.useOptimistic(I,G)},Fe.useReducer=function(I,G,se){return A.H.useReducer(I,G,se)},Fe.useRef=function(I){return A.H.useRef(I)},Fe.useState=function(I){return A.H.useState(I)},Fe.useSyncExternalStore=function(I,G,se){return A.H.useSyncExternalStore(I,G,se)},Fe.useTransition=function(){return A.H.useTransition()},Fe.version="19.1.1",Fe}var kA;function fd(){return kA||(kA=1,Yy.exports=rF()),Yy.exports}var O=fd();const Le=dd(O),iF=eF({__proto__:null,default:Le},[O]);var Wy={exports:{}},Jc={},Xy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function sF(){return NA||(NA=1,(function(e){function t(L,q){var W=L.length;L.push(q);e:for(;0<W;){var ee=W-1>>>1,I=L[ee];if(0<i(I,q))L[ee]=q,L[W]=I,W=ee;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],W=L.pop();if(W!==q){L[0]=W;e:for(var ee=0,I=L.length,G=I>>>1;ee<G;){var se=2*(ee+1)-1,le=L[se],H=se+1,X=L[H];if(0>i(le,W))H<I&&0>i(X,le)?(L[ee]=X,L[H]=W,ee=H):(L[ee]=le,L[se]=W,ee=se);else if(H<I&&0>i(X,W))L[ee]=X,L[H]=W,ee=H;else break e}}return q}function i(L,q){var W=L.sortIndex-q.sortIndex;return W!==0?W:L.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,y=!1,x=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(L){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=L)r(d),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(d)}}function A(L){if(S=!1,T(L),!x)if(n(u)!==null)x=!0,M||(M=!0,z());else{var q=n(d);q!==null&&F(A,q.startTime-L)}}var M=!1,D=-1,R=5,P=-1;function $(){return w?!0:!(e.unstable_now()-P<R)}function V(){if(w=!1,M){var L=e.unstable_now();P=L;var q=!0;try{e:{x=!1,S&&(S=!1,N(D),D=-1),y=!0;var W=g;try{t:{for(T(L),p=n(u);p!==null&&!(p.expirationTime>L&&$());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,g=p.priorityLevel;var I=ee(p.expirationTime<=L);if(L=e.unstable_now(),typeof I=="function"){p.callback=I,T(L),q=!0;break t}p===n(u)&&r(u),T(L)}else r(u);p=n(u)}if(p!==null)q=!0;else{var G=n(d);G!==null&&F(A,G.startTime-L),q=!1}}break e}finally{p=null,g=W,y=!1}q=void 0}}finally{q?z():M=!1}}}var z;if(typeof k=="function")z=function(){k(V)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,B=Y.port2;Y.port1.onmessage=V,z=function(){B.postMessage(null)}}else z=function(){E(V,0)};function F(L,q){D=E(function(){L(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var W=g;g=q;try{return L()}finally{g=W}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var W=g;g=L;try{return q()}finally{g=W}},e.unstable_scheduleCallback=function(L,q,W){var ee=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ee+W:ee):W=ee,L){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=W+I,L={id:h++,callback:q,priorityLevel:L,startTime:W,expirationTime:I,sortIndex:-1},W>ee?(L.sortIndex=W,t(d,L),n(u)===null&&L===n(d)&&(S?(N(D),D=-1):S=!0,F(A,W-ee))):(L.sortIndex=I,t(u,L),x||y||(x=!0,M||(M=!0,z()))),L},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(L){var q=g;return function(){var W=g;g=q;try{return L.apply(this,arguments)}finally{g=W}}}})(Zy)),Zy}var TA;function oF(){return TA||(TA=1,Xy.exports=sF()),Xy.exports}var Qy={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA;function aF(){if(AA)return Cn;AA=1;var e=fd();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Cn.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},Cn.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Cn.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Cn.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Cn.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Cn.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Cn.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Cn.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Cn.requestFormReset=function(u){r.d.r(u)},Cn.unstable_batchedUpdates=function(u,d){return u(d)},Cn.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Cn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Cn.version="19.1.1",Cn}var MA;function f5(){if(MA)return Qy.exports;MA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qy.exports=aF(),Qy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function lF(){if(_A)return Jc;_A=1;var e=oF(),t=fd(),n=f5();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,m=c;;){var b=f.return;if(b===null)break;var C=b.alternate;if(C===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===f)return l(b),a;if(C===m)return l(b),c;C=C.sibling}throw Error(r(188))}if(f.return!==m.return)f=b,m=C;else{for(var _=!1,j=b.child;j;){if(j===f){_=!0,f=b,m=C;break}if(j===m){_=!0,m=b,f=C;break}j=j.sibling}if(!_){for(j=C.child;j;){if(j===f){_=!0,f=C,m=b;break}if(j===m){_=!0,m=C,f=b;break}j=j.sibling}if(!_)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var Y=Symbol.for("react.client.reference");function B(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Y?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case M:return"SuspenseList";case P:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case k:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return c=a.displayName||null,c!==null?c:B(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return B(a(c))}catch{}}return null}var F=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},ee=[],I=-1;function G(a){return{current:a}}function se(a){0>I||(a.current=ee[I],ee[I]=null,I--)}function le(a,c){I++,ee[I]=a.current,a.current=c}var H=G(null),X=G(null),Q=G(null),ce=G(null);function ae(a,c){switch(le(Q,c),le(X,a),le(H,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?XT(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=XT(c),a=ZT(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}se(H),le(H,a)}function he(){se(H),se(X),se(Q)}function be(a){a.memoizedState!==null&&le(ce,a);var c=H.current,f=ZT(c,a.type);c!==f&&(le(X,a),le(H,f))}function Oe(a){X.current===a&&(se(H),se(X)),ce.current===a&&(se(ce),Kc._currentValue=W)}var we=Object.prototype.hasOwnProperty,Se=e.unstable_scheduleCallback,Ce=e.unstable_cancelCallback,Ne=e.unstable_shouldYield,nt=e.unstable_requestPaint,Te=e.unstable_now,bt=e.unstable_getCurrentPriorityLevel,Bt=e.unstable_ImmediatePriority,jn=e.unstable_UserBlockingPriority,Xt=e.unstable_NormalPriority,tn=e.unstable_LowPriority,ft=e.unstable_IdlePriority,cr=e.log,xn=e.unstable_setDisableYieldValue,nn=null,ht=null;function zt(a){if(typeof cr=="function"&&xn(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(nn,a)}catch{}}var Rt=Math.clz32?Math.clz32:ss,Zr=Math.log,ho=Math.LN2;function ss(a){return a>>>=0,a===0?32:31-(Zr(a)/ho|0)|0}var fn=256,Re=4194304;function Ln(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Qr(a,c,f){var m=a.pendingLanes;if(m===0)return 0;var b=0,C=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var j=m&134217727;return j!==0?(m=j&~C,m!==0?b=Ln(m):(_&=j,_!==0?b=Ln(_):f||(f=j&~a,f!==0&&(b=Ln(f))))):(j=m&~C,j!==0?b=Ln(j):_!==0?b=Ln(_):f||(f=m&~a,f!==0&&(b=Ln(f)))),b===0?0:c!==0&&c!==b&&(c&C)===0&&(C=b&-b,f=c&-c,C>=f||C===32&&(f&4194048)!==0)?c:b}function Jr(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function po(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var a=fn;return fn<<=1,(fn&4194048)===0&&(fn=256),a}function Aa(){var a=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),a}function Rr(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Ci(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function mo(a,c,f,m,b,C){var _=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var j=a.entanglements,U=a.expirationTimes,re=a.hiddenUpdates;for(f=_&~f;0<f;){var de=31-Rt(f),pe=1<<de;j[de]=0,U[de]=-1;var ie=re[de];if(ie!==null)for(re[de]=null,de=0;de<ie.length;de++){var oe=ie[de];oe!==null&&(oe.lane&=-536870913)}f&=~pe}m!==0&&as(a,m,0),C!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=C&~(_&~c))}function as(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var m=31-Rt(c);a.entangledLanes|=c,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function ls(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var m=31-Rt(f),b=1<<m;b&c|a[m]&c&&(a[m]|=c),f&=~b}}function cs(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function go(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function yo(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:gA(a.type))}function us(a,c){var f=q.p;try{return q.p=a,c()}finally{q.p=f}}var ur=Math.random().toString(36).slice(2),qt="__reactFiber$"+ur,Zt="__reactProps$"+ur,ei="__reactContainer$"+ur,vo="__reactEvents$"+ur,nc="__reactListeners$"+ur,rc="__reactHandles$"+ur,Ma="__reactResources$"+ur,dr="__reactMarker$"+ur;function Ei(a){delete a[qt],delete a[Zt],delete a[vo],delete a[nc],delete a[rc]}function Or(a){var c=a[qt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[ei]||f[qt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=tA(a);a!==null;){if(f=a[qt])return f;a=tA(a)}return c}a=f,f=a.parentNode}return null}function jr(a){if(a=a[qt]||a[ei]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function ti(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Lr(a){var c=a[Ma];return c||(c=a[Ma]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function kt(a){a[dr]=!0}var _a=new Set,ds={};function Pr(a,c){ni(a,c),ni(a+"Capture",c)}function ni(a,c){for(ds[a]=c,a=0;a<c.length;a++)_a.add(c[a])}var ic=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},Da={};function sc(a){return we.call(Da,a)?!0:we.call(bo,a)?!1:ic.test(a)?Da[a]=!0:(bo[a]=!0,!1)}function fs(a,c,f){if(sc(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function hs(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function Pn(a,c,f,m){if(m===null)a.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+m)}}var xo,Ra;function Ir(a){if(xo===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);xo=c&&c[1]||"",Ra=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xo+a+Ra}var te=!1;function J(a,c){if(!a||te)return"";te=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(oe){var ie=oe}Reflect.construct(a,[],pe)}else{try{pe.call()}catch(oe){ie=oe}a.call(pe.prototype)}}else{try{throw Error()}catch(oe){ie=oe}(pe=a())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(oe){if(oe&&ie&&typeof oe.stack=="string")return[oe.stack,ie.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),_=C[0],j=C[1];if(_&&j){var U=_.split(`
`),re=j.split(`
`);for(b=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;b<re.length&&!re[b].includes("DetermineComponentFrameRoot");)b++;if(m===U.length||b===re.length)for(m=U.length-1,b=re.length-1;1<=m&&0<=b&&U[m]!==re[b];)b--;for(;1<=m&&0<=b;m--,b--)if(U[m]!==re[b]){if(m!==1||b!==1)do if(m--,b--,0>b||U[m]!==re[b]){var de=`
`+U[m].replace(" at new "," at ");return a.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",a.displayName)),de}while(1<=m&&0<=b);break}}}finally{te=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Ir(f):""}function ue(a){switch(a.tag){case 26:case 27:case 5:return Ir(a.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 15:return J(a.type,!1);case 11:return J(a.type.render,!1);case 1:return J(a.type,!0);case 31:return Ir("Activity");default:return""}}function ve(a){try{var c="";do c+=ue(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function ye(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ee(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ve(a){var c=Ee(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),m=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,C=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(_){m=""+_,C.call(this,_)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(_){m=""+_},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function He(a){a._valueTracker||(a._valueTracker=Ve(a))}function Ot(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return a&&(m=Ee(a)?a.checked?"true":"false":a.value),a=m,a!==f?(c.setValue(a),!0):!1}function wn(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Br=/[\n"\\]/g;function xt(a){return a.replace(Br,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ye(a,c,f,m,b,C,_,j){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),c!=null?_==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+ye(c)):a.value!==""+ye(c)&&(a.value=""+ye(c)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),c!=null?wo(a,_,ye(c)):f!=null?wo(a,_,ye(f)):m!=null&&a.removeAttribute("value"),b==null&&C!=null&&(a.defaultChecked=!!C),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.name=""+ye(j):a.removeAttribute("name")}function Vt(a,c,f,m,b,C,_,j){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+ye(f):"",c=c!=null?""+ye(c):f,j||c===a.value||(a.value=c),a.defaultValue=c}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=j?a.checked:!!m,a.defaultChecked=!!m,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_)}function wo(a,c,f){c==="number"&&wn(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function ki(a,c,f,m){if(a=a.options,c){c={};for(var b=0;b<f.length;b++)c["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=c.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&m&&(a[f].defaultSelected=!0)}else{for(f=""+ye(f),c=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Y2(a,c,f){if(c!=null&&(c=""+ye(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+ye(f):""}function W2(a,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(r(92));if(F(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=ye(c),a.defaultValue=f,m=a.textContent,m===f&&m!==""&&m!==null&&(a.value=m)}function Oa(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var ZV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function X2(a,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":m?a.setProperty(c,f):typeof f!="number"||f===0||ZV.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Z2(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var b in c)m=c[b],c.hasOwnProperty(b)&&f[b]!==m&&X2(a,b,m)}else for(var C in c)c.hasOwnProperty(C)&&X2(a,C,c[C])}function Gm(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ld(a){return JV.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Km=null;function Ym(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ja=null,La=null;function Q2(a){var c=jr(a);if(c&&(a=c.stateNode)){var f=a[Zt]||null;e:switch(a=c.stateNode,c.type){case"input":if(Ye(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+xt(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==a&&m.form===a.form){var b=m[Zt]||null;if(!b)throw Error(r(90));Ye(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===a.form&&Ot(m)}break e;case"textarea":Y2(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&ki(a,!!f.multiple,c,!1)}}}var Wm=!1;function J2(a,c,f){if(Wm)return a(c,f);Wm=!0;try{var m=a(c);return m}finally{if(Wm=!1,(ja!==null||La!==null)&&(wf(),ja&&(c=ja,a=La,La=ja=null,Q2(c),a)))for(c=0;c<a.length;c++)Q2(a[c])}}function oc(a,c){var f=a.stateNode;if(f===null)return null;var m=f[Zt]||null;if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xm=!1;if(Ni)try{var ac={};Object.defineProperty(ac,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",ac,ac),window.removeEventListener("test",ac,ac)}catch{Xm=!1}var ps=null,Zm=null,Pd=null;function ek(){if(Pd)return Pd;var a,c=Zm,f=c.length,m,b="value"in ps?ps.value:ps.textContent,C=b.length;for(a=0;a<f&&c[a]===b[a];a++);var _=f-a;for(m=1;m<=_&&c[f-m]===b[C-m];m++);return Pd=b.slice(a,1<m?1-m:void 0)}function Id(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Bd(){return!0}function tk(){return!1}function In(a){function c(f,m,b,C,_){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=C,this.target=_,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(f=a[j],this[j]=f?f(C):C[j]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Bd:tk,this.isPropagationStopped=tk,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),c}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zd=In(So),lc=h({},So,{view:0,detail:0}),e8=In(lc),Qm,Jm,cc,qd=h({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==cc&&(cc&&a.type==="mousemove"?(Qm=a.screenX-cc.screenX,Jm=a.screenY-cc.screenY):Jm=Qm=0,cc=a),Qm)},movementY:function(a){return"movementY"in a?a.movementY:Jm}}),nk=In(qd),t8=h({},qd,{dataTransfer:0}),n8=In(t8),r8=h({},lc,{relatedTarget:0}),eg=In(r8),i8=h({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),s8=In(i8),o8=h({},So,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),a8=In(o8),l8=h({},So,{data:0}),rk=In(l8),c8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f8(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=d8[a])?!!c[a]:!1}function tg(){return f8}var h8=h({},lc,{key:function(a){if(a.key){var c=c8[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Id(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?u8[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tg,charCode:function(a){return a.type==="keypress"?Id(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Id(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),p8=In(h8),m8=h({},qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ik=In(m8),g8=h({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tg}),y8=In(g8),v8=h({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),b8=In(v8),x8=h({},qd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),w8=In(x8),S8=h({},So,{newState:0,oldState:0}),C8=In(S8),E8=[9,13,27,32],ng=Ni&&"CompositionEvent"in window,uc=null;Ni&&"documentMode"in document&&(uc=document.documentMode);var k8=Ni&&"TextEvent"in window&&!uc,sk=Ni&&(!ng||uc&&8<uc&&11>=uc),ok=" ",ak=!1;function lk(a,c){switch(a){case"keyup":return E8.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ck(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Pa=!1;function N8(a,c){switch(a){case"compositionend":return ck(c);case"keypress":return c.which!==32?null:(ak=!0,ok);case"textInput":return a=c.data,a===ok&&ak?null:a;default:return null}}function T8(a,c){if(Pa)return a==="compositionend"||!ng&&lk(a,c)?(a=ek(),Pd=Zm=ps=null,Pa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return sk&&c.locale!=="ko"?null:c.data;default:return null}}var A8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uk(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!A8[a.type]:c==="textarea"}function dk(a,c,f,m){ja?La?La.push(m):La=[m]:ja=m,c=Tf(c,"onChange"),0<c.length&&(f=new zd("onChange","change",null,f,m),a.push({event:f,listeners:c}))}var dc=null,fc=null;function M8(a){$T(a,0)}function Vd(a){var c=ti(a);if(Ot(c))return a}function fk(a,c){if(a==="change")return c}var hk=!1;if(Ni){var rg;if(Ni){var ig="oninput"in document;if(!ig){var pk=document.createElement("div");pk.setAttribute("oninput","return;"),ig=typeof pk.oninput=="function"}rg=ig}else rg=!1;hk=rg&&(!document.documentMode||9<document.documentMode)}function mk(){dc&&(dc.detachEvent("onpropertychange",gk),fc=dc=null)}function gk(a){if(a.propertyName==="value"&&Vd(fc)){var c=[];dk(c,fc,a,Ym(a)),J2(M8,c)}}function _8(a,c,f){a==="focusin"?(mk(),dc=c,fc=f,dc.attachEvent("onpropertychange",gk)):a==="focusout"&&mk()}function D8(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Vd(fc)}function R8(a,c){if(a==="click")return Vd(c)}function O8(a,c){if(a==="input"||a==="change")return Vd(c)}function j8(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Kn=typeof Object.is=="function"?Object.is:j8;function hc(a,c){if(Kn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!we.call(c,b)||!Kn(a[b],c[b]))return!1}return!0}function yk(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function vk(a,c){var f=yk(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=c&&m>=c)return{node:f,offset:c-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=yk(f)}}function bk(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?bk(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function xk(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=wn(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=wn(a.document)}return c}function sg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var L8=Ni&&"documentMode"in document&&11>=document.documentMode,Ia=null,og=null,pc=null,ag=!1;function wk(a,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ag||Ia==null||Ia!==wn(m)||(m=Ia,"selectionStart"in m&&sg(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),pc&&hc(pc,m)||(pc=m,m=Tf(og,"onSelect"),0<m.length&&(c=new zd("onSelect","select",null,c,f),a.push({event:c,listeners:m}),c.target=Ia)))}function Co(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var Ba={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionrun:Co("Transition","TransitionRun"),transitionstart:Co("Transition","TransitionStart"),transitioncancel:Co("Transition","TransitionCancel"),transitionend:Co("Transition","TransitionEnd")},lg={},Sk={};Ni&&(Sk=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Eo(a){if(lg[a])return lg[a];if(!Ba[a])return a;var c=Ba[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in Sk)return lg[a]=c[f];return a}var Ck=Eo("animationend"),Ek=Eo("animationiteration"),kk=Eo("animationstart"),P8=Eo("transitionrun"),I8=Eo("transitionstart"),B8=Eo("transitioncancel"),Nk=Eo("transitionend"),Tk=new Map,cg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cg.push("scrollEnd");function zr(a,c){Tk.set(a,c),Pr(c,[a])}var Ak=new WeakMap;function fr(a,c){if(typeof a=="object"&&a!==null){var f=Ak.get(a);return f!==void 0?f:(c={value:a,source:c,stack:ve(c)},Ak.set(a,c),c)}return{value:a,source:c,stack:ve(c)}}var hr=[],za=0,ug=0;function Hd(){for(var a=za,c=ug=za=0;c<a;){var f=hr[c];hr[c++]=null;var m=hr[c];hr[c++]=null;var b=hr[c];hr[c++]=null;var C=hr[c];if(hr[c++]=null,m!==null&&b!==null){var _=m.pending;_===null?b.next=b:(b.next=_.next,_.next=b),m.pending=b}C!==0&&Mk(f,b,C)}}function Fd(a,c,f,m){hr[za++]=a,hr[za++]=c,hr[za++]=f,hr[za++]=m,ug|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function dg(a,c,f,m){return Fd(a,c,f,m),Ud(a)}function qa(a,c){return Fd(a,null,null,c),Ud(a)}function Mk(a,c,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var b=!1,C=a.return;C!==null;)C.childLanes|=f,m=C.alternate,m!==null&&(m.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(b=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,b&&c!==null&&(b=31-Rt(f),a=C.hiddenUpdates,m=a[b],m===null?a[b]=[c]:m.push(c),c.lane=f|536870912),C):null}function Ud(a){if(50<zc)throw zc=0,yy=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Va={};function z8(a,c,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(a,c,f,m){return new z8(a,c,f,m)}function fg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ti(a,c){var f=a.alternate;return f===null?(f=Yn(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function _k(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function $d(a,c,f,m,b,C){var _=0;if(m=a,typeof a=="function")fg(a)&&(_=1);else if(typeof a=="string")_=VH(a,f,H.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case P:return a=Yn(31,f,c,b),a.elementType=P,a.lanes=C,a;case x:return ko(f.children,b,C,c);case S:_=8,b|=24;break;case w:return a=Yn(12,f,c,b|2),a.elementType=w,a.lanes=C,a;case A:return a=Yn(13,f,c,b),a.elementType=A,a.lanes=C,a;case M:return a=Yn(19,f,c,b),a.elementType=M,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case k:_=10;break e;case N:_=9;break e;case T:_=11;break e;case D:_=14;break e;case R:_=16,m=null;break e}_=29,f=Error(r(130,a===null?"null":typeof a,"")),m=null}return c=Yn(_,f,c,b),c.elementType=a,c.type=m,c.lanes=C,c}function ko(a,c,f,m){return a=Yn(7,a,m,c),a.lanes=f,a}function hg(a,c,f){return a=Yn(6,a,null,c),a.lanes=f,a}function pg(a,c,f){return c=Yn(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Ha=[],Fa=0,Gd=null,Kd=0,pr=[],mr=0,No=null,Ai=1,Mi="";function To(a,c){Ha[Fa++]=Kd,Ha[Fa++]=Gd,Gd=a,Kd=c}function Dk(a,c,f){pr[mr++]=Ai,pr[mr++]=Mi,pr[mr++]=No,No=a;var m=Ai;a=Mi;var b=32-Rt(m)-1;m&=~(1<<b),f+=1;var C=32-Rt(c)+b;if(30<C){var _=b-b%5;C=(m&(1<<_)-1).toString(32),m>>=_,b-=_,Ai=1<<32-Rt(c)+b|f<<b|m,Mi=C+a}else Ai=1<<C|f<<b|m,Mi=a}function mg(a){a.return!==null&&(To(a,1),Dk(a,1,0))}function gg(a){for(;a===Gd;)Gd=Ha[--Fa],Ha[Fa]=null,Kd=Ha[--Fa],Ha[Fa]=null;for(;a===No;)No=pr[--mr],pr[mr]=null,Mi=pr[--mr],pr[mr]=null,Ai=pr[--mr],pr[mr]=null}var An=null,Nt=null,tt=!1,Ao=null,ri=!1,yg=Error(r(519));function Mo(a){var c=Error(r(418,""));throw yc(fr(c,a)),yg}function Rk(a){var c=a.stateNode,f=a.type,m=a.memoizedProps;switch(c[qt]=a,c[Zt]=m,f){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(f=0;f<Vc.length;f++)Xe(Vc[f],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":Xe("invalid",c),Vt(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),He(c);break;case"select":Xe("invalid",c);break;case"textarea":Xe("invalid",c),W2(c,m.value,m.defaultValue,m.children),He(c)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||WT(c.textContent,f)?(m.popover!=null&&(Xe("beforetoggle",c),Xe("toggle",c)),m.onScroll!=null&&Xe("scroll",c),m.onScrollEnd!=null&&Xe("scrollend",c),m.onClick!=null&&(c.onclick=Af),c=!0):c=!1,c||Mo(a)}function Ok(a){for(An=a.return;An;)switch(An.tag){case 5:case 13:ri=!1;return;case 27:case 3:ri=!0;return;default:An=An.return}}function mc(a){if(a!==An)return!1;if(!tt)return Ok(a),tt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Oy(a.type,a.memoizedProps)),f=!f),f&&Nt&&Mo(a),Ok(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Nt=Vr(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Nt=null}}else c===27?(c=Nt,_s(a.type)?(a=Iy,Iy=null,Nt=a):Nt=c):Nt=An?Vr(a.stateNode.nextSibling):null;return!0}function gc(){Nt=An=null,tt=!1}function jk(){var a=Ao;return a!==null&&(qn===null?qn=a:qn.push.apply(qn,a),Ao=null),a}function yc(a){Ao===null?Ao=[a]:Ao.push(a)}var vg=G(null),_o=null,_i=null;function ms(a,c,f){le(vg,c._currentValue),c._currentValue=f}function Di(a){a._currentValue=vg.current,se(vg)}function bg(a,c,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),a===f)break;a=a.return}}function xg(a,c,f,m){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var C=b.dependencies;if(C!==null){var _=b.child;C=C.firstContext;e:for(;C!==null;){var j=C;C=b;for(var U=0;U<c.length;U++)if(j.context===c[U]){C.lanes|=f,j=C.alternate,j!==null&&(j.lanes|=f),bg(C.return,f,a),m||(_=null);break e}C=j.next}}else if(b.tag===18){if(_=b.return,_===null)throw Error(r(341));_.lanes|=f,C=_.alternate,C!==null&&(C.lanes|=f),bg(_,f,a),_=null}else _=b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===a){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}}function vc(a,c,f,m){a=null;for(var b=c,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var _=b.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var j=b.type;Kn(b.pendingProps.value,_.value)||(a!==null?a.push(j):a=[j])}}else if(b===ce.current){if(_=b.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(Kc):a=[Kc])}b=b.return}a!==null&&xg(c,a,f,m),c.flags|=262144}function Yd(a){for(a=a.firstContext;a!==null;){if(!Kn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Do(a){_o=a,_i=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Sn(a){return Lk(_o,a)}function Wd(a,c){return _o===null&&Do(a),Lk(a,c)}function Lk(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},_i===null){if(a===null)throw Error(r(308));_i=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else _i=_i.next=c;return f}var q8=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},V8=e.unstable_scheduleCallback,H8=e.unstable_NormalPriority,Qt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wg(){return{controller:new q8,data:new Map,refCount:0}}function bc(a){a.refCount--,a.refCount===0&&V8(H8,function(){a.controller.abort()})}var xc=null,Sg=0,Ua=0,$a=null;function F8(a,c){if(xc===null){var f=xc=[];Sg=0,Ua=Ey(),$a={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Sg++,c.then(Pk,Pk),c}function Pk(){if(--Sg===0&&xc!==null){$a!==null&&($a.status="fulfilled");var a=xc;xc=null,Ua=0,$a=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function U8(a,c){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return a.then(function(){m.status="fulfilled",m.value=c;for(var b=0;b<f.length;b++)(0,f[b])(c)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var Ik=L.S;L.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&F8(a,c),Ik!==null&&Ik(a,c)};var Ro=G(null);function Cg(){var a=Ro.current;return a!==null?a:dt.pooledCache}function Xd(a,c){c===null?le(Ro,Ro.current):le(Ro,c.pool)}function Bk(){var a=Cg();return a===null?null:{parent:Qt._currentValue,pool:a}}var wc=Error(r(460)),zk=Error(r(474)),Zd=Error(r(542)),Eg={then:function(){}};function qk(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Qd(){}function Vk(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Qd,Qd),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,Fk(a),a;default:if(typeof c.status=="string")c.then(Qd,Qd);else{if(a=dt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(m){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=m}},function(m){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,Fk(a),a}throw Sc=c,wc}}var Sc=null;function Hk(){if(Sc===null)throw Error(r(459));var a=Sc;return Sc=null,a}function Fk(a){if(a===wc||a===Zd)throw Error(r(483))}var gs=!1;function kg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ng(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ys(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function vs(a,c,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(rt&2)!==0){var b=m.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),m.pending=c,c=Ud(a),Mk(a,null,f),c}return Fd(a,m,c,f),Ud(a)}function Cc(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,ls(a,f)}}function Tg(a,c){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var _={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?b=C=_:C=C.next=_,f=f.next}while(f!==null);C===null?b=C=c:C=C.next=c}else b=C=c;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var Ag=!1;function Ec(){if(Ag){var a=$a;if(a!==null)throw a}}function kc(a,c,f,m){Ag=!1;var b=a.updateQueue;gs=!1;var C=b.firstBaseUpdate,_=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var U=j,re=U.next;U.next=null,_===null?C=re:_.next=re,_=U;var de=a.alternate;de!==null&&(de=de.updateQueue,j=de.lastBaseUpdate,j!==_&&(j===null?de.firstBaseUpdate=re:j.next=re,de.lastBaseUpdate=U))}if(C!==null){var pe=b.baseState;_=0,de=re=U=null,j=C;do{var ie=j.lane&-536870913,oe=ie!==j.lane;if(oe?(Qe&ie)===ie:(m&ie)===ie){ie!==0&&ie===Ua&&(Ag=!0),de!==null&&(de=de.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ie=a,je=j;ie=c;var lt=f;switch(je.tag){case 1:if(Ie=je.payload,typeof Ie=="function"){pe=Ie.call(lt,pe,ie);break e}pe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=je.payload,ie=typeof Ie=="function"?Ie.call(lt,pe,ie):Ie,ie==null)break e;pe=h({},pe,ie);break e;case 2:gs=!0}}ie=j.callback,ie!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=b.callbacks,oe===null?b.callbacks=[ie]:oe.push(ie))}else oe={lane:ie,tag:j.tag,payload:j.payload,callback:j.callback,next:null},de===null?(re=de=oe,U=pe):de=de.next=oe,_|=ie;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;oe=j,j=oe.next,oe.next=null,b.lastBaseUpdate=oe,b.shared.pending=null}}while(!0);de===null&&(U=pe),b.baseState=U,b.firstBaseUpdate=re,b.lastBaseUpdate=de,C===null&&(b.shared.lanes=0),Ns|=_,a.lanes=_,a.memoizedState=pe}}function Uk(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function $k(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)Uk(f[a],c)}var Ga=G(null),Jd=G(0);function Gk(a,c){a=Bi,le(Jd,a),le(Ga,c),Bi=a|c.baseLanes}function Mg(){le(Jd,Bi),le(Ga,Ga.current)}function _g(){Bi=Jd.current,se(Ga),se(Jd)}var bs=0,Ge=null,ot=null,Ht=null,ef=!1,Ka=!1,Oo=!1,tf=0,Nc=0,Ya=null,$8=0;function jt(){throw Error(r(321))}function Dg(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Kn(a[f],c[f]))return!1;return!0}function Rg(a,c,f,m,b,C){return bs=C,Ge=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,L.H=a===null||a.memoizedState===null?MN:_N,Oo=!1,C=f(m,b),Oo=!1,Ka&&(C=Yk(c,f,m,b)),Kk(a),C}function Kk(a){L.H=lf;var c=ot!==null&&ot.next!==null;if(bs=0,Ht=ot=Ge=null,ef=!1,Nc=0,Ya=null,c)throw Error(r(300));a===null||rn||(a=a.dependencies,a!==null&&Yd(a)&&(rn=!0))}function Yk(a,c,f,m){Ge=a;var b=0;do{if(Ka&&(Ya=null),Nc=0,Ka=!1,25<=b)throw Error(r(301));if(b+=1,Ht=ot=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}L.H=Q8,C=c(f,m)}while(Ka);return C}function G8(){var a=L.H,c=a.useState()[0];return c=typeof c.then=="function"?Tc(c):c,a=a.useState()[0],(ot!==null?ot.memoizedState:null)!==a&&(Ge.flags|=1024),c}function Og(){var a=tf!==0;return tf=0,a}function jg(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Lg(a){if(ef){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}ef=!1}bs=0,Ht=ot=Ge=null,Ka=!1,Nc=tf=0,Ya=null}function Bn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ge.memoizedState=Ht=a:Ht=Ht.next=a,Ht}function Ft(){if(ot===null){var a=Ge.alternate;a=a!==null?a.memoizedState:null}else a=ot.next;var c=Ht===null?Ge.memoizedState:Ht.next;if(c!==null)Ht=c,ot=a;else{if(a===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));ot=a,a={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Ht===null?Ge.memoizedState=Ht=a:Ht=Ht.next=a}return Ht}function Pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tc(a){var c=Nc;return Nc+=1,Ya===null&&(Ya=[]),a=Vk(Ya,a,c),c=Ge,(Ht===null?c.memoizedState:Ht.next)===null&&(c=c.alternate,L.H=c===null||c.memoizedState===null?MN:_N),a}function nf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Tc(a);if(a.$$typeof===k)return Sn(a)}throw Error(r(438,String(a)))}function Ig(a){var c=null,f=Ge.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=Ge.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Pg(),Ge.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),m=0;m<a;m++)f[m]=$;return c.index++,f}function Ri(a,c){return typeof c=="function"?c(a):c}function rf(a){var c=Ft();return Bg(c,ot,a)}function Bg(a,c,f){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var b=a.baseQueue,C=m.pending;if(C!==null){if(b!==null){var _=b.next;b.next=C.next,C.next=_}c.baseQueue=b=C,m.pending=null}if(C=a.baseState,b===null)a.memoizedState=C;else{c=b.next;var j=_=null,U=null,re=c,de=!1;do{var pe=re.lane&-536870913;if(pe!==re.lane?(Qe&pe)===pe:(bs&pe)===pe){var ie=re.revertLane;if(ie===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),pe===Ua&&(de=!0);else if((bs&ie)===ie){re=re.next,ie===Ua&&(de=!0);continue}else pe={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=pe,_=C):U=U.next=pe,Ge.lanes|=ie,Ns|=ie;pe=re.action,Oo&&f(C,pe),C=re.hasEagerState?re.eagerState:f(C,pe)}else ie={lane:pe,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=ie,_=C):U=U.next=ie,Ge.lanes|=pe,Ns|=pe;re=re.next}while(re!==null&&re!==c);if(U===null?_=C:U.next=j,!Kn(C,a.memoizedState)&&(rn=!0,de&&(f=$a,f!==null)))throw f;a.memoizedState=C,a.baseState=_,a.baseQueue=U,m.lastRenderedState=C}return b===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function zg(a){var c=Ft(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var m=f.dispatch,b=f.pending,C=c.memoizedState;if(b!==null){f.pending=null;var _=b=b.next;do C=a(C,_.action),_=_.next;while(_!==b);Kn(C,c.memoizedState)||(rn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,m]}function Wk(a,c,f){var m=Ge,b=Ft(),C=tt;if(C){if(f===void 0)throw Error(r(407));f=f()}else f=c();var _=!Kn((ot||b).memoizedState,f);_&&(b.memoizedState=f,rn=!0),b=b.queue;var j=Qk.bind(null,m,b,a);if(Ac(2048,8,j,[a]),b.getSnapshot!==c||_||Ht!==null&&Ht.memoizedState.tag&1){if(m.flags|=2048,Wa(9,sf(),Zk.bind(null,m,b,f,c),null),dt===null)throw Error(r(349));C||(bs&124)!==0||Xk(m,c,f)}return f}function Xk(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Ge.updateQueue,c===null?(c=Pg(),Ge.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function Zk(a,c,f,m){c.value=f,c.getSnapshot=m,Jk(c)&&eN(a)}function Qk(a,c,f){return f(function(){Jk(c)&&eN(a)})}function Jk(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Kn(a,f)}catch{return!0}}function eN(a){var c=qa(a,2);c!==null&&Jn(c,a,2)}function qg(a){var c=Bn();if(typeof a=="function"){var f=a;if(a=f(),Oo){zt(!0);try{f()}finally{zt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:a},c}function tN(a,c,f,m){return a.baseState=f,Bg(a,ot,typeof m=="function"?m:Ri)}function K8(a,c,f,m,b){if(af(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){C.listeners.push(_)}};L.T!==null?f(!0):C.isTransition=!1,m(C),f=c.pending,f===null?(C.next=c.pending=C,nN(c,C)):(C.next=f.next,c.pending=f.next=C)}}function nN(a,c){var f=c.action,m=c.payload,b=a.state;if(c.isTransition){var C=L.T,_={};L.T=_;try{var j=f(b,m),U=L.S;U!==null&&U(_,j),rN(a,c,j)}catch(re){Vg(a,c,re)}finally{L.T=C}}else try{C=f(b,m),rN(a,c,C)}catch(re){Vg(a,c,re)}}function rN(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){iN(a,c,m)},function(m){return Vg(a,c,m)}):iN(a,c,f)}function iN(a,c,f){c.status="fulfilled",c.value=f,sN(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,nN(a,f)))}function Vg(a,c,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,sN(c),c=c.next;while(c!==m)}a.action=null}function sN(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function oN(a,c){return c}function aN(a,c){if(tt){var f=dt.formState;if(f!==null){e:{var m=Ge;if(tt){if(Nt){t:{for(var b=Nt,C=ri;b.nodeType!==8;){if(!C){b=null;break t}if(b=Vr(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){Nt=Vr(b.nextSibling),m=b.data==="F!";break e}}Mo(m)}m=!1}m&&(c=f[0])}}return f=Bn(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oN,lastRenderedState:c},f.queue=m,f=NN.bind(null,Ge,m),m.dispatch=f,m=qg(!1),C=Gg.bind(null,Ge,!1,m.queue),m=Bn(),b={state:c,dispatch:null,action:a,pending:null},m.queue=b,f=K8.bind(null,Ge,b,C,f),b.dispatch=f,m.memoizedState=a,[c,f,!1]}function lN(a){var c=Ft();return cN(c,ot,a)}function cN(a,c,f){if(c=Bg(a,c,oN)[0],a=rf(Ri)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Tc(c)}catch(_){throw _===wc?Zd:_}else m=c;c=Ft();var b=c.queue,C=b.dispatch;return f!==c.memoizedState&&(Ge.flags|=2048,Wa(9,sf(),Y8.bind(null,b,f),null)),[m,C,a]}function Y8(a,c){a.action=c}function uN(a){var c=Ft(),f=ot;if(f!==null)return cN(c,f,a);Ft(),c=c.memoizedState,f=Ft();var m=f.queue.dispatch;return f.memoizedState=a,[c,m,!1]}function Wa(a,c,f,m){return a={tag:a,create:f,deps:m,inst:c,next:null},c=Ge.updateQueue,c===null&&(c=Pg(),Ge.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,c.lastEffect=a),a}function sf(){return{destroy:void 0,resource:void 0}}function dN(){return Ft().memoizedState}function of(a,c,f,m){var b=Bn();m=m===void 0?null:m,Ge.flags|=a,b.memoizedState=Wa(1|c,sf(),f,m)}function Ac(a,c,f,m){var b=Ft();m=m===void 0?null:m;var C=b.memoizedState.inst;ot!==null&&m!==null&&Dg(m,ot.memoizedState.deps)?b.memoizedState=Wa(c,C,f,m):(Ge.flags|=a,b.memoizedState=Wa(1|c,C,f,m))}function fN(a,c){of(8390656,8,a,c)}function hN(a,c){Ac(2048,8,a,c)}function pN(a,c){return Ac(4,2,a,c)}function mN(a,c){return Ac(4,4,a,c)}function gN(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function yN(a,c,f){f=f!=null?f.concat([a]):null,Ac(4,4,gN.bind(null,c,a),f)}function Hg(){}function vN(a,c){var f=Ft();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&Dg(c,m[1])?m[0]:(f.memoizedState=[a,c],a)}function bN(a,c){var f=Ft();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&Dg(c,m[1]))return m[0];if(m=a(),Oo){zt(!0);try{a()}finally{zt(!1)}}return f.memoizedState=[m,c],m}function Fg(a,c,f){return f===void 0||(bs&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=ST(),Ge.lanes|=a,Ns|=a,f)}function xN(a,c,f,m){return Kn(f,c)?f:Ga.current!==null?(a=Fg(a,f,m),Kn(a,c)||(rn=!0),a):(bs&42)===0?(rn=!0,a.memoizedState=f):(a=ST(),Ge.lanes|=a,Ns|=a,c)}function wN(a,c,f,m,b){var C=q.p;q.p=C!==0&&8>C?C:8;var _=L.T,j={};L.T=j,Gg(a,!1,c,f);try{var U=b(),re=L.S;if(re!==null&&re(j,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var de=U8(U,m);Mc(a,c,de,Qn(a))}else Mc(a,c,m,Qn(a))}catch(pe){Mc(a,c,{then:function(){},status:"rejected",reason:pe},Qn())}finally{q.p=C,L.T=_}}function W8(){}function Ug(a,c,f,m){if(a.tag!==5)throw Error(r(476));var b=SN(a).queue;wN(a,b,c,W,f===null?W8:function(){return CN(a),f(m)})}function SN(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:W},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function CN(a){var c=SN(a).next.queue;Mc(a,c,{},Qn())}function $g(){return Sn(Kc)}function EN(){return Ft().memoizedState}function kN(){return Ft().memoizedState}function X8(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=Qn();a=ys(f);var m=vs(c,a,f);m!==null&&(Jn(m,c,f),Cc(m,c,f)),c={cache:wg()},a.payload=c;return}c=c.return}}function Z8(a,c,f){var m=Qn();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},af(a)?TN(c,f):(f=dg(a,c,f,m),f!==null&&(Jn(f,a,m),AN(f,c,m)))}function NN(a,c,f){var m=Qn();Mc(a,c,f,m)}function Mc(a,c,f,m){var b={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(af(a))TN(c,b);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var _=c.lastRenderedState,j=C(_,f);if(b.hasEagerState=!0,b.eagerState=j,Kn(j,_))return Fd(a,c,b,0),dt===null&&Hd(),!1}catch{}finally{}if(f=dg(a,c,b,m),f!==null)return Jn(f,a,m),AN(f,c,m),!0}return!1}function Gg(a,c,f,m){if(m={lane:2,revertLane:Ey(),action:m,hasEagerState:!1,eagerState:null,next:null},af(a)){if(c)throw Error(r(479))}else c=dg(a,f,m,2),c!==null&&Jn(c,a,2)}function af(a){var c=a.alternate;return a===Ge||c!==null&&c===Ge}function TN(a,c){Ka=ef=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function AN(a,c,f){if((f&4194048)!==0){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,ls(a,f)}}var lf={readContext:Sn,use:nf,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},MN={readContext:Sn,use:nf,useCallback:function(a,c){return Bn().memoizedState=[a,c===void 0?null:c],a},useContext:Sn,useEffect:fN,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,of(4194308,4,gN.bind(null,c,a),f)},useLayoutEffect:function(a,c){return of(4194308,4,a,c)},useInsertionEffect:function(a,c){of(4,2,a,c)},useMemo:function(a,c){var f=Bn();c=c===void 0?null:c;var m=a();if(Oo){zt(!0);try{a()}finally{zt(!1)}}return f.memoizedState=[m,c],m},useReducer:function(a,c,f){var m=Bn();if(f!==void 0){var b=f(c);if(Oo){zt(!0);try{f(c)}finally{zt(!1)}}}else b=c;return m.memoizedState=m.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},m.queue=a,a=a.dispatch=Z8.bind(null,Ge,a),[m.memoizedState,a]},useRef:function(a){var c=Bn();return a={current:a},c.memoizedState=a},useState:function(a){a=qg(a);var c=a.queue,f=NN.bind(null,Ge,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:Hg,useDeferredValue:function(a,c){var f=Bn();return Fg(f,a,c)},useTransition:function(){var a=qg(!1);return a=wN.bind(null,Ge,a.queue,!0,!1),Bn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var m=Ge,b=Bn();if(tt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),dt===null)throw Error(r(349));(Qe&124)!==0||Xk(m,c,f)}b.memoizedState=f;var C={value:f,getSnapshot:c};return b.queue=C,fN(Qk.bind(null,m,C,a),[a]),m.flags|=2048,Wa(9,sf(),Zk.bind(null,m,C,f,c),null),f},useId:function(){var a=Bn(),c=dt.identifierPrefix;if(tt){var f=Mi,m=Ai;f=(m&~(1<<32-Rt(m)-1)).toString(32)+f,c=""+c+"R"+f,f=tf++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=$8++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:$g,useFormState:aN,useActionState:aN,useOptimistic:function(a){var c=Bn();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Gg.bind(null,Ge,!0,f),f.dispatch=c,[a,c]},useMemoCache:Ig,useCacheRefresh:function(){return Bn().memoizedState=X8.bind(null,Ge)}},_N={readContext:Sn,use:nf,useCallback:vN,useContext:Sn,useEffect:hN,useImperativeHandle:yN,useInsertionEffect:pN,useLayoutEffect:mN,useMemo:bN,useReducer:rf,useRef:dN,useState:function(){return rf(Ri)},useDebugValue:Hg,useDeferredValue:function(a,c){var f=Ft();return xN(f,ot.memoizedState,a,c)},useTransition:function(){var a=rf(Ri)[0],c=Ft().memoizedState;return[typeof a=="boolean"?a:Tc(a),c]},useSyncExternalStore:Wk,useId:EN,useHostTransitionStatus:$g,useFormState:lN,useActionState:lN,useOptimistic:function(a,c){var f=Ft();return tN(f,ot,a,c)},useMemoCache:Ig,useCacheRefresh:kN},Q8={readContext:Sn,use:nf,useCallback:vN,useContext:Sn,useEffect:hN,useImperativeHandle:yN,useInsertionEffect:pN,useLayoutEffect:mN,useMemo:bN,useReducer:zg,useRef:dN,useState:function(){return zg(Ri)},useDebugValue:Hg,useDeferredValue:function(a,c){var f=Ft();return ot===null?Fg(f,a,c):xN(f,ot.memoizedState,a,c)},useTransition:function(){var a=zg(Ri)[0],c=Ft().memoizedState;return[typeof a=="boolean"?a:Tc(a),c]},useSyncExternalStore:Wk,useId:EN,useHostTransitionStatus:$g,useFormState:uN,useActionState:uN,useOptimistic:function(a,c){var f=Ft();return ot!==null?tN(f,ot,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Ig,useCacheRefresh:kN},Xa=null,_c=0;function cf(a){var c=_c;return _c+=1,Xa===null&&(Xa=[]),Vk(Xa,a,c)}function Dc(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function uf(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function DN(a){var c=a._init;return c(a._payload)}function RN(a){function c(Z,K){if(a){var ne=Z.deletions;ne===null?(Z.deletions=[K],Z.flags|=16):ne.push(K)}}function f(Z,K){if(!a)return null;for(;K!==null;)c(Z,K),K=K.sibling;return null}function m(Z){for(var K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function b(Z,K){return Z=Ti(Z,K),Z.index=0,Z.sibling=null,Z}function C(Z,K,ne){return Z.index=ne,a?(ne=Z.alternate,ne!==null?(ne=ne.index,ne<K?(Z.flags|=67108866,K):ne):(Z.flags|=67108866,K)):(Z.flags|=1048576,K)}function _(Z){return a&&Z.alternate===null&&(Z.flags|=67108866),Z}function j(Z,K,ne,fe){return K===null||K.tag!==6?(K=hg(ne,Z.mode,fe),K.return=Z,K):(K=b(K,ne),K.return=Z,K)}function U(Z,K,ne,fe){var ke=ne.type;return ke===x?de(Z,K,ne.props.children,fe,ne.key):K!==null&&(K.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===R&&DN(ke)===K.type)?(K=b(K,ne.props),Dc(K,ne),K.return=Z,K):(K=$d(ne.type,ne.key,ne.props,null,Z.mode,fe),Dc(K,ne),K.return=Z,K)}function re(Z,K,ne,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==ne.containerInfo||K.stateNode.implementation!==ne.implementation?(K=pg(ne,Z.mode,fe),K.return=Z,K):(K=b(K,ne.children||[]),K.return=Z,K)}function de(Z,K,ne,fe,ke){return K===null||K.tag!==7?(K=ko(ne,Z.mode,fe,ke),K.return=Z,K):(K=b(K,ne),K.return=Z,K)}function pe(Z,K,ne){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=hg(""+K,Z.mode,ne),K.return=Z,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case g:return ne=$d(K.type,K.key,K.props,null,Z.mode,ne),Dc(ne,K),ne.return=Z,ne;case y:return K=pg(K,Z.mode,ne),K.return=Z,K;case R:var fe=K._init;return K=fe(K._payload),pe(Z,K,ne)}if(F(K)||z(K))return K=ko(K,Z.mode,ne,null),K.return=Z,K;if(typeof K.then=="function")return pe(Z,cf(K),ne);if(K.$$typeof===k)return pe(Z,Wd(Z,K),ne);uf(Z,K)}return null}function ie(Z,K,ne,fe){var ke=K!==null?K.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ke!==null?null:j(Z,K,""+ne,fe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ne.key===ke?U(Z,K,ne,fe):null;case y:return ne.key===ke?re(Z,K,ne,fe):null;case R:return ke=ne._init,ne=ke(ne._payload),ie(Z,K,ne,fe)}if(F(ne)||z(ne))return ke!==null?null:de(Z,K,ne,fe,null);if(typeof ne.then=="function")return ie(Z,K,cf(ne),fe);if(ne.$$typeof===k)return ie(Z,K,Wd(Z,ne),fe);uf(Z,ne)}return null}function oe(Z,K,ne,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Z=Z.get(ne)||null,j(K,Z,""+fe,ke);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case g:return Z=Z.get(fe.key===null?ne:fe.key)||null,U(K,Z,fe,ke);case y:return Z=Z.get(fe.key===null?ne:fe.key)||null,re(K,Z,fe,ke);case R:var Ke=fe._init;return fe=Ke(fe._payload),oe(Z,K,ne,fe,ke)}if(F(fe)||z(fe))return Z=Z.get(ne)||null,de(K,Z,fe,ke,null);if(typeof fe.then=="function")return oe(Z,K,ne,cf(fe),ke);if(fe.$$typeof===k)return oe(Z,K,ne,Wd(K,fe),ke);uf(K,fe)}return null}function Ie(Z,K,ne,fe){for(var ke=null,Ke=null,Me=K,Pe=K=0,on=null;Me!==null&&Pe<ne.length;Pe++){Me.index>Pe?(on=Me,Me=null):on=Me.sibling;var et=ie(Z,Me,ne[Pe],fe);if(et===null){Me===null&&(Me=on);break}a&&Me&&et.alternate===null&&c(Z,Me),K=C(et,K,Pe),Ke===null?ke=et:Ke.sibling=et,Ke=et,Me=on}if(Pe===ne.length)return f(Z,Me),tt&&To(Z,Pe),ke;if(Me===null){for(;Pe<ne.length;Pe++)Me=pe(Z,ne[Pe],fe),Me!==null&&(K=C(Me,K,Pe),Ke===null?ke=Me:Ke.sibling=Me,Ke=Me);return tt&&To(Z,Pe),ke}for(Me=m(Me);Pe<ne.length;Pe++)on=oe(Me,Z,Pe,ne[Pe],fe),on!==null&&(a&&on.alternate!==null&&Me.delete(on.key===null?Pe:on.key),K=C(on,K,Pe),Ke===null?ke=on:Ke.sibling=on,Ke=on);return a&&Me.forEach(function(Ls){return c(Z,Ls)}),tt&&To(Z,Pe),ke}function je(Z,K,ne,fe){if(ne==null)throw Error(r(151));for(var ke=null,Ke=null,Me=K,Pe=K=0,on=null,et=ne.next();Me!==null&&!et.done;Pe++,et=ne.next()){Me.index>Pe?(on=Me,Me=null):on=Me.sibling;var Ls=ie(Z,Me,et.value,fe);if(Ls===null){Me===null&&(Me=on);break}a&&Me&&Ls.alternate===null&&c(Z,Me),K=C(Ls,K,Pe),Ke===null?ke=Ls:Ke.sibling=Ls,Ke=Ls,Me=on}if(et.done)return f(Z,Me),tt&&To(Z,Pe),ke;if(Me===null){for(;!et.done;Pe++,et=ne.next())et=pe(Z,et.value,fe),et!==null&&(K=C(et,K,Pe),Ke===null?ke=et:Ke.sibling=et,Ke=et);return tt&&To(Z,Pe),ke}for(Me=m(Me);!et.done;Pe++,et=ne.next())et=oe(Me,Z,Pe,et.value,fe),et!==null&&(a&&et.alternate!==null&&Me.delete(et.key===null?Pe:et.key),K=C(et,K,Pe),Ke===null?ke=et:Ke.sibling=et,Ke=et);return a&&Me.forEach(function(JH){return c(Z,JH)}),tt&&To(Z,Pe),ke}function lt(Z,K,ne,fe){if(typeof ne=="object"&&ne!==null&&ne.type===x&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:e:{for(var ke=ne.key;K!==null;){if(K.key===ke){if(ke=ne.type,ke===x){if(K.tag===7){f(Z,K.sibling),fe=b(K,ne.props.children),fe.return=Z,Z=fe;break e}}else if(K.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===R&&DN(ke)===K.type){f(Z,K.sibling),fe=b(K,ne.props),Dc(fe,ne),fe.return=Z,Z=fe;break e}f(Z,K);break}else c(Z,K);K=K.sibling}ne.type===x?(fe=ko(ne.props.children,Z.mode,fe,ne.key),fe.return=Z,Z=fe):(fe=$d(ne.type,ne.key,ne.props,null,Z.mode,fe),Dc(fe,ne),fe.return=Z,Z=fe)}return _(Z);case y:e:{for(ke=ne.key;K!==null;){if(K.key===ke)if(K.tag===4&&K.stateNode.containerInfo===ne.containerInfo&&K.stateNode.implementation===ne.implementation){f(Z,K.sibling),fe=b(K,ne.children||[]),fe.return=Z,Z=fe;break e}else{f(Z,K);break}else c(Z,K);K=K.sibling}fe=pg(ne,Z.mode,fe),fe.return=Z,Z=fe}return _(Z);case R:return ke=ne._init,ne=ke(ne._payload),lt(Z,K,ne,fe)}if(F(ne))return Ie(Z,K,ne,fe);if(z(ne)){if(ke=z(ne),typeof ke!="function")throw Error(r(150));return ne=ke.call(ne),je(Z,K,ne,fe)}if(typeof ne.then=="function")return lt(Z,K,cf(ne),fe);if(ne.$$typeof===k)return lt(Z,K,Wd(Z,ne),fe);uf(Z,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,K!==null&&K.tag===6?(f(Z,K.sibling),fe=b(K,ne),fe.return=Z,Z=fe):(f(Z,K),fe=hg(ne,Z.mode,fe),fe.return=Z,Z=fe),_(Z)):f(Z,K)}return function(Z,K,ne,fe){try{_c=0;var ke=lt(Z,K,ne,fe);return Xa=null,ke}catch(Me){if(Me===wc||Me===Zd)throw Me;var Ke=Yn(29,Me,null,Z.mode);return Ke.lanes=fe,Ke.return=Z,Ke}finally{}}}var Za=RN(!0),ON=RN(!1),gr=G(null),ii=null;function xs(a){var c=a.alternate;le(Jt,Jt.current&1),le(gr,a),ii===null&&(c===null||Ga.current!==null||c.memoizedState!==null)&&(ii=a)}function jN(a){if(a.tag===22){if(le(Jt,Jt.current),le(gr,a),ii===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(ii=a)}}else ws()}function ws(){le(Jt,Jt.current),le(gr,gr.current)}function Oi(a){se(gr),ii===a&&(ii=null),se(Jt)}var Jt=G(0);function df(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Py(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Kg(a,c,f,m){c=a.memoizedState,f=f(m,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Yg={enqueueSetState:function(a,c,f){a=a._reactInternals;var m=Qn(),b=ys(m);b.payload=c,f!=null&&(b.callback=f),c=vs(a,b,m),c!==null&&(Jn(c,a,m),Cc(c,a,m))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var m=Qn(),b=ys(m);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=vs(a,b,m),c!==null&&(Jn(c,a,m),Cc(c,a,m))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Qn(),m=ys(f);m.tag=2,c!=null&&(m.callback=c),c=vs(a,m,f),c!==null&&(Jn(c,a,f),Cc(c,a,f))}};function LN(a,c,f,m,b,C,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,_):c.prototype&&c.prototype.isPureReactComponent?!hc(f,m)||!hc(b,C):!0}function PN(a,c,f,m){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==a&&Yg.enqueueReplaceState(c,c.state,null)}function jo(a,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var b in a)f[b]===void 0&&(f[b]=a[b])}return f}var ff=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function IN(a){ff(a)}function BN(a){console.error(a)}function zN(a){ff(a)}function hf(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function qN(a,c,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Wg(a,c,f){return f=ys(f),f.tag=3,f.payload={element:null},f.callback=function(){hf(a,c)},f}function VN(a){return a=ys(a),a.tag=3,a}function HN(a,c,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var C=m.value;a.payload=function(){return b(C)},a.callback=function(){qN(c,f,m)}}var _=f.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){qN(c,f,m),typeof b!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function J8(a,c,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&vc(c,f,b,!0),f=gr.current,f!==null){switch(f.tag){case 13:return ii===null?by():f.alternate===null&&Tt===0&&(Tt=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===Eg?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),wy(a,m,b)),!1;case 22:return f.flags|=65536,m===Eg?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),wy(a,m,b)),!1}throw Error(r(435,f.tag))}return wy(a,m,b),by(),!1}if(tt)return c=gr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,m!==yg&&(a=Error(r(422),{cause:m}),yc(fr(a,f)))):(m!==yg&&(c=Error(r(423),{cause:m}),yc(fr(c,f))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,m=fr(m,f),b=Wg(a.stateNode,m,b),Tg(a,b),Tt!==4&&(Tt=2)),!1;var C=Error(r(520),{cause:m});if(C=fr(C,f),Bc===null?Bc=[C]:Bc.push(C),Tt!==4&&(Tt=2),c===null)return!0;m=fr(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=b&-b,f.lanes|=a,a=Wg(f.stateNode,m,a),Tg(f,a),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ts===null||!Ts.has(C))))return f.flags|=65536,b&=-b,f.lanes|=b,b=VN(b),HN(b,a,f,m),Tg(f,b),!1}f=f.return}while(f!==null);return!1}var FN=Error(r(461)),rn=!1;function hn(a,c,f,m){c.child=a===null?ON(c,null,f,m):Za(c,a.child,f,m)}function UN(a,c,f,m,b){f=f.render;var C=c.ref;if("ref"in m){var _={};for(var j in m)j!=="ref"&&(_[j]=m[j])}else _=m;return Do(c),m=Rg(a,c,f,_,C,b),j=Og(),a!==null&&!rn?(jg(a,c,b),ji(a,c,b)):(tt&&j&&mg(c),c.flags|=1,hn(a,c,m,b),c.child)}function $N(a,c,f,m,b){if(a===null){var C=f.type;return typeof C=="function"&&!fg(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,GN(a,c,C,m,b)):(a=$d(f.type,null,m,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!ry(a,b)){var _=C.memoizedProps;if(f=f.compare,f=f!==null?f:hc,f(_,m)&&a.ref===c.ref)return ji(a,c,b)}return c.flags|=1,a=Ti(C,m),a.ref=c.ref,a.return=c,c.child=a}function GN(a,c,f,m,b){if(a!==null){var C=a.memoizedProps;if(hc(C,m)&&a.ref===c.ref)if(rn=!1,c.pendingProps=m=C,ry(a,b))(a.flags&131072)!==0&&(rn=!0);else return c.lanes=a.lanes,ji(a,c,b)}return Xg(a,c,f,m,b)}function KN(a,c,f){var m=c.pendingProps,b=m.children,C=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=C!==null?C.baseLanes|f:f,a!==null){for(b=c.child=a.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;c.childLanes=C&~m}else c.childLanes=0,c.child=null;return YN(a,c,m,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Xd(c,C!==null?C.cachePool:null),C!==null?Gk(c,C):Mg(),jN(c);else return c.lanes=c.childLanes=536870912,YN(a,c,C!==null?C.baseLanes|f:f,f)}else C!==null?(Xd(c,C.cachePool),Gk(c,C),ws(),c.memoizedState=null):(a!==null&&Xd(c,null),Mg(),ws());return hn(a,c,b,f),c.child}function YN(a,c,f,m){var b=Cg();return b=b===null?null:{parent:Qt._currentValue,pool:b},c.memoizedState={baseLanes:f,cachePool:b},a!==null&&Xd(c,null),Mg(),jN(c),a!==null&&vc(a,c,m,!0),null}function pf(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function Xg(a,c,f,m,b){return Do(c),f=Rg(a,c,f,m,void 0,b),m=Og(),a!==null&&!rn?(jg(a,c,b),ji(a,c,b)):(tt&&m&&mg(c),c.flags|=1,hn(a,c,f,b),c.child)}function WN(a,c,f,m,b,C){return Do(c),c.updateQueue=null,f=Yk(c,m,f,b),Kk(a),m=Og(),a!==null&&!rn?(jg(a,c,C),ji(a,c,C)):(tt&&m&&mg(c),c.flags|=1,hn(a,c,f,C),c.child)}function XN(a,c,f,m,b){if(Do(c),c.stateNode===null){var C=Va,_=f.contextType;typeof _=="object"&&_!==null&&(C=Sn(_)),C=new f(m,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Yg,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=m,C.state=c.memoizedState,C.refs={},kg(c),_=f.contextType,C.context=typeof _=="object"&&_!==null?Sn(_):Va,C.state=c.memoizedState,_=f.getDerivedStateFromProps,typeof _=="function"&&(Kg(c,f,_,m),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(_=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),_!==C.state&&Yg.enqueueReplaceState(C,C.state,null),kc(c,m,C,b),Ec(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(a===null){C=c.stateNode;var j=c.memoizedProps,U=jo(f,j);C.props=U;var re=C.context,de=f.contextType;_=Va,typeof de=="object"&&de!==null&&(_=Sn(de));var pe=f.getDerivedStateFromProps;de=typeof pe=="function"||typeof C.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j||re!==_)&&PN(c,C,m,_),gs=!1;var ie=c.memoizedState;C.state=ie,kc(c,m,C,b),Ec(),re=c.memoizedState,j||ie!==re||gs?(typeof pe=="function"&&(Kg(c,f,pe,m),re=c.memoizedState),(U=gs||LN(c,f,U,m,ie,re,_))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=re),C.props=m,C.state=re,C.context=_,m=U):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{C=c.stateNode,Ng(a,c),_=c.memoizedProps,de=jo(f,_),C.props=de,pe=c.pendingProps,ie=C.context,re=f.contextType,U=Va,typeof re=="object"&&re!==null&&(U=Sn(re)),j=f.getDerivedStateFromProps,(re=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(_!==pe||ie!==U)&&PN(c,C,m,U),gs=!1,ie=c.memoizedState,C.state=ie,kc(c,m,C,b),Ec();var oe=c.memoizedState;_!==pe||ie!==oe||gs||a!==null&&a.dependencies!==null&&Yd(a.dependencies)?(typeof j=="function"&&(Kg(c,f,j,m),oe=c.memoizedState),(de=gs||LN(c,f,de,m,ie,oe,U)||a!==null&&a.dependencies!==null&&Yd(a.dependencies))?(re||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,oe,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,oe,U)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||_===a.memoizedProps&&ie===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&ie===a.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=oe),C.props=m,C.state=oe,C.context=U,m=de):(typeof C.componentDidUpdate!="function"||_===a.memoizedProps&&ie===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&ie===a.memoizedState||(c.flags|=1024),m=!1)}return C=m,pf(a,c),m=(c.flags&128)!==0,C||m?(C=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&m?(c.child=Za(c,a.child,null,b),c.child=Za(c,null,f,b)):hn(a,c,f,b),c.memoizedState=C.state,a=c.child):a=ji(a,c,b),a}function ZN(a,c,f,m){return gc(),c.flags|=256,hn(a,c,f,m),c.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qg(a){return{baseLanes:a,cachePool:Bk()}}function Jg(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=yr),a}function QN(a,c,f){var m=c.pendingProps,b=!1,C=(c.flags&128)!==0,_;if((_=C)||(_=a!==null&&a.memoizedState===null?!1:(Jt.current&2)!==0),_&&(b=!0,c.flags&=-129),_=(c.flags&32)!==0,c.flags&=-33,a===null){if(tt){if(b?xs(c):ws(),tt){var j=Nt,U;if(U=j){e:{for(U=j,j=ri;U.nodeType!==8;){if(!j){j=null;break e}if(U=Vr(U.nextSibling),U===null){j=null;break e}}j=U}j!==null?(c.memoizedState={dehydrated:j,treeContext:No!==null?{id:Ai,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},U=Yn(18,null,null,0),U.stateNode=j,U.return=c,c.child=U,An=c,Nt=null,U=!0):U=!1}U||Mo(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return Py(j)?c.lanes=32:c.lanes=536870912,null;Oi(c)}return j=m.children,m=m.fallback,b?(ws(),b=c.mode,j=mf({mode:"hidden",children:j},b),m=ko(m,b,f,null),j.return=c,m.return=c,j.sibling=m,c.child=j,b=c.child,b.memoizedState=Qg(f),b.childLanes=Jg(a,_,f),c.memoizedState=Zg,m):(xs(c),ey(c,j))}if(U=a.memoizedState,U!==null&&(j=U.dehydrated,j!==null)){if(C)c.flags&256?(xs(c),c.flags&=-257,c=ty(a,c,f)):c.memoizedState!==null?(ws(),c.child=a.child,c.flags|=128,c=null):(ws(),b=m.fallback,j=c.mode,m=mf({mode:"visible",children:m.children},j),b=ko(b,j,f,null),b.flags|=2,m.return=c,b.return=c,m.sibling=b,c.child=m,Za(c,a.child,null,f),m=c.child,m.memoizedState=Qg(f),m.childLanes=Jg(a,_,f),c.memoizedState=Zg,c=b);else if(xs(c),Py(j)){if(_=j.nextSibling&&j.nextSibling.dataset,_)var re=_.dgst;_=re,m=Error(r(419)),m.stack="",m.digest=_,yc({value:m,source:null,stack:null}),c=ty(a,c,f)}else if(rn||vc(a,c,f,!1),_=(f&a.childLanes)!==0,rn||_){if(_=dt,_!==null&&(m=f&-f,m=(m&42)!==0?1:cs(m),m=(m&(_.suspendedLanes|f))!==0?0:m,m!==0&&m!==U.retryLane))throw U.retryLane=m,qa(a,m),Jn(_,a,m),FN;j.data==="$?"||by(),c=ty(a,c,f)}else j.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=U.treeContext,Nt=Vr(j.nextSibling),An=c,tt=!0,Ao=null,ri=!1,a!==null&&(pr[mr++]=Ai,pr[mr++]=Mi,pr[mr++]=No,Ai=a.id,Mi=a.overflow,No=c),c=ey(c,m.children),c.flags|=4096);return c}return b?(ws(),b=m.fallback,j=c.mode,U=a.child,re=U.sibling,m=Ti(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,re!==null?b=Ti(re,b):(b=ko(b,j,f,null),b.flags|=2),b.return=c,m.return=c,m.sibling=b,c.child=m,m=b,b=c.child,j=a.child.memoizedState,j===null?j=Qg(f):(U=j.cachePool,U!==null?(re=Qt._currentValue,U=U.parent!==re?{parent:re,pool:re}:U):U=Bk(),j={baseLanes:j.baseLanes|f,cachePool:U}),b.memoizedState=j,b.childLanes=Jg(a,_,f),c.memoizedState=Zg,m):(xs(c),f=a.child,a=f.sibling,f=Ti(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,a!==null&&(_=c.deletions,_===null?(c.deletions=[a],c.flags|=16):_.push(a)),c.child=f,c.memoizedState=null,f)}function ey(a,c){return c=mf({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function mf(a,c){return a=Yn(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ty(a,c,f){return Za(c,a.child,null,f),a=ey(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function JN(a,c,f){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c),bg(a.return,c,f)}function ny(a,c,f,m,b){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=f,C.tailMode=b)}function eT(a,c,f){var m=c.pendingProps,b=m.revealOrder,C=m.tail;if(hn(a,c,m.children,f),m=Jt.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&JN(a,f,c);else if(a.tag===19)JN(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(le(Jt,m),b){case"forwards":for(f=c.child,b=null;f!==null;)a=f.alternate,a!==null&&df(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=c.child,c.child=null):(b=f.sibling,f.sibling=null),ny(c,!1,b,f,C);break;case"backwards":for(f=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&df(a)===null){c.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}ny(c,!0,f,null,C);break;case"together":ny(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function ji(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Ns|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(vc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=Ti(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Ti(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function ry(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Yd(a)))}function eH(a,c,f){switch(c.tag){case 3:ae(c,c.stateNode.containerInfo),ms(c,Qt,a.memoizedState.cache),gc();break;case 27:case 5:be(c);break;case 4:ae(c,c.stateNode.containerInfo);break;case 10:ms(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(xs(c),c.flags|=128,null):(f&c.child.childLanes)!==0?QN(a,c,f):(xs(c),a=ji(a,c,f),a!==null?a.sibling:null);xs(c);break;case 19:var b=(a.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(vc(a,c,f,!1),m=(f&c.childLanes)!==0),b){if(m)return eT(a,c,f);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),le(Jt,Jt.current),m)break;return null;case 22:case 23:return c.lanes=0,KN(a,c,f);case 24:ms(c,Qt,a.memoizedState.cache)}return ji(a,c,f)}function tT(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)rn=!0;else{if(!ry(a,f)&&(c.flags&128)===0)return rn=!1,eH(a,c,f);rn=(a.flags&131072)!==0}else rn=!1,tt&&(c.flags&1048576)!==0&&Dk(c,Kd,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var m=c.elementType,b=m._init;if(m=b(m._payload),c.type=m,typeof m=="function")fg(m)?(a=jo(m,a),c.tag=1,c=XN(null,c,m,a,f)):(c.tag=0,c=Xg(null,c,m,a,f));else{if(m!=null){if(b=m.$$typeof,b===T){c.tag=11,c=UN(null,c,m,a,f);break e}else if(b===D){c.tag=14,c=$N(null,c,m,a,f);break e}}throw c=B(m)||m,Error(r(306,c,""))}}return c;case 0:return Xg(a,c,c.type,c.pendingProps,f);case 1:return m=c.type,b=jo(m,c.pendingProps),XN(a,c,m,b,f);case 3:e:{if(ae(c,c.stateNode.containerInfo),a===null)throw Error(r(387));m=c.pendingProps;var C=c.memoizedState;b=C.element,Ng(a,c),kc(c,m,null,f);var _=c.memoizedState;if(m=_.cache,ms(c,Qt,m),m!==C.cache&&xg(c,[Qt],f,!0),Ec(),m=_.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:_.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=ZN(a,c,m,f);break e}else if(m!==b){b=fr(Error(r(424)),c),yc(b),c=ZN(a,c,m,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Nt=Vr(a.firstChild),An=c,tt=!0,Ao=null,ri=!0,f=ON(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(gc(),m===b){c=ji(a,c,f);break e}hn(a,c,m,f)}c=c.child}return c;case 26:return pf(a,c),a===null?(f=sA(c.type,null,c.pendingProps,null))?c.memoizedState=f:tt||(f=c.type,a=c.pendingProps,m=Mf(Q.current).createElement(f),m[qt]=c,m[Zt]=a,mn(m,f,a),kt(m),c.stateNode=m):c.memoizedState=sA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return be(c),a===null&&tt&&(m=c.stateNode=nA(c.type,c.pendingProps,Q.current),An=c,ri=!0,b=Nt,_s(c.type)?(Iy=b,Nt=Vr(m.firstChild)):Nt=b),hn(a,c,c.pendingProps.children,f),pf(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&tt&&((b=m=Nt)&&(m=AH(m,c.type,c.pendingProps,ri),m!==null?(c.stateNode=m,An=c,Nt=Vr(m.firstChild),ri=!1,b=!0):b=!1),b||Mo(c)),be(c),b=c.type,C=c.pendingProps,_=a!==null?a.memoizedProps:null,m=C.children,Oy(b,C)?m=null:_!==null&&Oy(b,_)&&(c.flags|=32),c.memoizedState!==null&&(b=Rg(a,c,G8,null,null,f),Kc._currentValue=b),pf(a,c),hn(a,c,m,f),c.child;case 6:return a===null&&tt&&((a=f=Nt)&&(f=MH(f,c.pendingProps,ri),f!==null?(c.stateNode=f,An=c,Nt=null,a=!0):a=!1),a||Mo(c)),null;case 13:return QN(a,c,f);case 4:return ae(c,c.stateNode.containerInfo),m=c.pendingProps,a===null?c.child=Za(c,null,m,f):hn(a,c,m,f),c.child;case 11:return UN(a,c,c.type,c.pendingProps,f);case 7:return hn(a,c,c.pendingProps,f),c.child;case 8:return hn(a,c,c.pendingProps.children,f),c.child;case 12:return hn(a,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,ms(c,c.type,m.value),hn(a,c,m.children,f),c.child;case 9:return b=c.type._context,m=c.pendingProps.children,Do(c),b=Sn(b),m=m(b),c.flags|=1,hn(a,c,m,f),c.child;case 14:return $N(a,c,c.type,c.pendingProps,f);case 15:return GN(a,c,c.type,c.pendingProps,f);case 19:return eT(a,c,f);case 31:return m=c.pendingProps,f=c.mode,m={mode:m.mode,children:m.children},a===null?(f=mf(m,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Ti(a.child,m),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return KN(a,c,f);case 24:return Do(c),m=Sn(Qt),a===null?(b=Cg(),b===null&&(b=dt,C=wg(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=f),b=C),c.memoizedState={parent:m,cache:b},kg(c),ms(c,Qt,b)):((a.lanes&f)!==0&&(Ng(a,c),kc(c,null,null,f),Ec()),b=a.memoizedState,C=c.memoizedState,b.parent!==m?(b={parent:m,cache:m},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),ms(c,Qt,m)):(m=C.cache,ms(c,Qt,m),m!==b.cache&&xg(c,[Qt],f,!0))),hn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Li(a){a.flags|=4}function nT(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!uA(c)){if(c=gr.current,c!==null&&((Qe&4194048)===Qe?ii!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||c!==ii))throw Sc=Eg,zk;a.flags|=8192}}function gf(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Aa():536870912,a.lanes|=c,tl|=c)}function Rc(a,c){if(!tt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function wt(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(c)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=f,c}function tH(a,c,f){var m=c.pendingProps;switch(gg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(c),null;case 1:return wt(c),null;case 3:return f=c.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Di(Qt),he(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(mc(c)?Li(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,jk())),wt(c),null;case 26:return f=c.memoizedState,a===null?(Li(c),f!==null?(wt(c),nT(c,f)):(wt(c),c.flags&=-16777217)):f?f!==a.memoizedState?(Li(c),wt(c),nT(c,f)):(wt(c),c.flags&=-16777217):(a.memoizedProps!==m&&Li(c),wt(c),c.flags&=-16777217),null;case 27:Oe(c),f=Q.current;var b=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==m&&Li(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return wt(c),null}a=H.current,mc(c)?Rk(c):(a=nA(b,m,f),c.stateNode=a,Li(c))}return wt(c),null;case 5:if(Oe(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==m&&Li(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return wt(c),null}if(a=H.current,mc(c))Rk(c);else{switch(b=Mf(Q.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?b.createElement(f,{is:m.is}):b.createElement(f)}}a[qt]=c,a[Zt]=m;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=a;e:switch(mn(a,f,m),f){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Li(c)}}return wt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==m&&Li(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(a=Q.current,mc(c)){if(a=c.stateNode,f=c.memoizedProps,m=null,b=An,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}a[qt]=c,a=!!(a.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||WT(a.nodeValue,f)),a||Mo(c)}else a=Mf(a).createTextNode(m),a[qt]=c,c.stateNode=a}return wt(c),null;case 13:if(m=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=mc(c),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[qt]=c}else gc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;wt(c),b=!1}else b=jk(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Oi(c),c):(Oi(c),null)}if(Oi(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=c.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==b&&(m.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),gf(c,c.updateQueue),wt(c),null;case 4:return he(),a===null&&Ay(c.stateNode.containerInfo),wt(c),null;case 10:return Di(c.type),wt(c),null;case 19:if(se(Jt),b=c.memoizedState,b===null)return wt(c),null;if(m=(c.flags&128)!==0,C=b.rendering,C===null)if(m)Rc(b,!1);else{if(Tt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=df(a),C!==null){for(c.flags|=128,Rc(b,!1),a=C.updateQueue,c.updateQueue=a,gf(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)_k(f,a),f=f.sibling;return le(Jt,Jt.current&1|2),c.child}a=a.sibling}b.tail!==null&&Te()>bf&&(c.flags|=128,m=!0,Rc(b,!1),c.lanes=4194304)}else{if(!m)if(a=df(C),a!==null){if(c.flags|=128,m=!0,a=a.updateQueue,c.updateQueue=a,gf(c,a),Rc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!tt)return wt(c),null}else 2*Te()-b.renderingStartTime>bf&&f!==536870912&&(c.flags|=128,m=!0,Rc(b,!1),c.lanes=4194304);b.isBackwards?(C.sibling=c.child,c.child=C):(a=b.last,a!==null?a.sibling=C:c.child=C,b.last=C)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Te(),c.sibling=null,a=Jt.current,le(Jt,m?a&1|2:a&1),c):(wt(c),null);case 22:case 23:return Oi(c),_g(),m=c.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&(wt(c),c.subtreeFlags&6&&(c.flags|=8192)):wt(c),f=c.updateQueue,f!==null&&gf(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),a!==null&&se(Ro),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Di(Qt),wt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function nH(a,c){switch(gg(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Di(Qt),he(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Oe(c),null;case 13:if(Oi(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));gc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return se(Jt),null;case 4:return he(),null;case 10:return Di(c.type),null;case 22:case 23:return Oi(c),_g(),a!==null&&se(Ro),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Di(Qt),null;case 25:return null;default:return null}}function rT(a,c){switch(gg(c),c.tag){case 3:Di(Qt),he();break;case 26:case 27:case 5:Oe(c);break;case 4:he();break;case 13:Oi(c);break;case 19:se(Jt);break;case 10:Di(c.type);break;case 22:case 23:Oi(c),_g(),a!==null&&se(Ro);break;case 24:Di(Qt)}}function Oc(a,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&a)===a){m=void 0;var C=f.create,_=f.inst;m=C(),_.destroy=m}f=f.next}while(f!==b)}}catch(j){ct(c,c.return,j)}}function Ss(a,c,f){try{var m=c.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var C=b.next;m=C;do{if((m.tag&a)===a){var _=m.inst,j=_.destroy;if(j!==void 0){_.destroy=void 0,b=c;var U=f,re=j;try{re()}catch(de){ct(b,U,de)}}}m=m.next}while(m!==C)}}catch(de){ct(c,c.return,de)}}function iT(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{$k(c,f)}catch(m){ct(a,a.return,m)}}}function sT(a,c,f){f.props=jo(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){ct(a,c,m)}}function jc(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(b){ct(a,c,b)}}function si(a,c){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){ct(a,c,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){ct(a,c,b)}else f.current=null}function oT(a){var c=a.type,f=a.memoizedProps,m=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){ct(a,a.return,b)}}function iy(a,c,f){try{var m=a.stateNode;CH(m,a.type,f,c),m[Zt]=c}catch(b){ct(a,a.return,b)}}function aT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&_s(a.type)||a.tag===4}function sy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||aT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&_s(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function oy(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Af));else if(m!==4&&(m===27&&_s(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(oy(a,c,f),a=a.sibling;a!==null;)oy(a,c,f),a=a.sibling}function yf(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(m!==4&&(m===27&&_s(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(yf(a,c,f),a=a.sibling;a!==null;)yf(a,c,f),a=a.sibling}function lT(a){var c=a.stateNode,f=a.memoizedProps;try{for(var m=a.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);mn(c,m,f),c[qt]=a,c[Zt]=f}catch(C){ct(a,a.return,C)}}var Pi=!1,Lt=!1,ay=!1,cT=typeof WeakSet=="function"?WeakSet:Set,sn=null;function rH(a,c){if(a=a.containerInfo,Dy=Lf,a=xk(a),sg(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var _=0,j=-1,U=-1,re=0,de=0,pe=a,ie=null;t:for(;;){for(var oe;pe!==f||b!==0&&pe.nodeType!==3||(j=_+b),pe!==C||m!==0&&pe.nodeType!==3||(U=_+m),pe.nodeType===3&&(_+=pe.nodeValue.length),(oe=pe.firstChild)!==null;)ie=pe,pe=oe;for(;;){if(pe===a)break t;if(ie===f&&++re===b&&(j=_),ie===C&&++de===m&&(U=_),(oe=pe.nextSibling)!==null)break;pe=ie,ie=pe.parentNode}pe=oe}f=j===-1||U===-1?null:{start:j,end:U}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ry={focusedElem:a,selectionRange:f},Lf=!1,sn=c;sn!==null;)if(c=sn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,sn=a;else for(;sn!==null;){switch(c=sn,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=c,b=C.memoizedProps,C=C.memoizedState,m=f.stateNode;try{var Ie=jo(f.type,b,f.elementType===f.type);a=m.getSnapshotBeforeUpdate(Ie,C),m.__reactInternalSnapshotBeforeUpdate=a}catch(je){ct(f,f.return,je)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)Ly(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Ly(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,sn=a;break}sn=c.return}}function uT(a,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Cs(a,f),m&4&&Oc(5,f);break;case 1:if(Cs(a,f),m&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(_){ct(f,f.return,_)}else{var b=jo(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(b,c,a.__reactInternalSnapshotBeforeUpdate)}catch(_){ct(f,f.return,_)}}m&64&&iT(f),m&512&&jc(f,f.return);break;case 3:if(Cs(a,f),m&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{$k(a,c)}catch(_){ct(f,f.return,_)}}break;case 27:c===null&&m&4&&lT(f);case 26:case 5:Cs(a,f),c===null&&m&4&&oT(f),m&512&&jc(f,f.return);break;case 12:Cs(a,f);break;case 13:Cs(a,f),m&4&&hT(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=fH.bind(null,f),_H(a,f))));break;case 22:if(m=f.memoizedState!==null||Pi,!m){c=c!==null&&c.memoizedState!==null||Lt,b=Pi;var C=Lt;Pi=m,(Lt=c)&&!C?Es(a,f,(f.subtreeFlags&8772)!==0):Cs(a,f),Pi=b,Lt=C}break;case 30:break;default:Cs(a,f)}}function dT(a){var c=a.alternate;c!==null&&(a.alternate=null,dT(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Ei(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var mt=null,zn=!1;function Ii(a,c,f){for(f=f.child;f!==null;)fT(a,c,f),f=f.sibling}function fT(a,c,f){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(nn,f)}catch{}switch(f.tag){case 26:Lt||si(f,c),Ii(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Lt||si(f,c);var m=mt,b=zn;_s(f.type)&&(mt=f.stateNode,zn=!1),Ii(a,c,f),Fc(f.stateNode),mt=m,zn=b;break;case 5:Lt||si(f,c);case 6:if(m=mt,b=zn,mt=null,Ii(a,c,f),mt=m,zn=b,mt!==null)if(zn)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(f.stateNode)}catch(C){ct(f,c,C)}else try{mt.removeChild(f.stateNode)}catch(C){ct(f,c,C)}break;case 18:mt!==null&&(zn?(a=mt,eA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Zc(a)):eA(mt,f.stateNode));break;case 4:m=mt,b=zn,mt=f.stateNode.containerInfo,zn=!0,Ii(a,c,f),mt=m,zn=b;break;case 0:case 11:case 14:case 15:Lt||Ss(2,f,c),Lt||Ss(4,f,c),Ii(a,c,f);break;case 1:Lt||(si(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&sT(f,c,m)),Ii(a,c,f);break;case 21:Ii(a,c,f);break;case 22:Lt=(m=Lt)||f.memoizedState!==null,Ii(a,c,f),Lt=m;break;default:Ii(a,c,f)}}function hT(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Zc(a)}catch(f){ct(c,c.return,f)}}function iH(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new cT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new cT),c;default:throw Error(r(435,a.tag))}}function ly(a,c){var f=iH(a);c.forEach(function(m){var b=hH.bind(null,a,m);f.has(m)||(f.add(m),m.then(b,b))})}function Wn(a,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],C=a,_=c,j=_;e:for(;j!==null;){switch(j.tag){case 27:if(_s(j.type)){mt=j.stateNode,zn=!1;break e}break;case 5:mt=j.stateNode,zn=!1;break e;case 3:case 4:mt=j.stateNode.containerInfo,zn=!0;break e}j=j.return}if(mt===null)throw Error(r(160));fT(C,_,b),mt=null,zn=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)pT(c,a),c=c.sibling}var qr=null;function pT(a,c){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Wn(c,a),Xn(a),m&4&&(Ss(3,a,a.return),Oc(3,a),Ss(5,a,a.return));break;case 1:Wn(c,a),Xn(a),m&512&&(Lt||f===null||si(f,f.return)),m&64&&Pi&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=qr;if(Wn(c,a),Xn(a),m&512&&(Lt||f===null||si(f,f.return)),m&4){var C=f!==null?f.memoizedState:null;if(m=a.memoizedState,f===null)if(m===null)if(a.stateNode===null){e:{m=a.type,f=a.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":C=b.getElementsByTagName("title")[0],(!C||C[dr]||C[qt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(m),b.head.insertBefore(C,b.querySelector("head > title"))),mn(C,m,f),C[qt]=a,kt(C),m=C;break e;case"link":var _=lA("link","href",b).get(m+(f.href||""));if(_){for(var j=0;j<_.length;j++)if(C=_[j],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){_.splice(j,1);break t}}C=b.createElement(m),mn(C,m,f),b.head.appendChild(C);break;case"meta":if(_=lA("meta","content",b).get(m+(f.content||""))){for(j=0;j<_.length;j++)if(C=_[j],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){_.splice(j,1);break t}}C=b.createElement(m),mn(C,m,f),b.head.appendChild(C);break;default:throw Error(r(468,m))}C[qt]=a,kt(C),m=C}a.stateNode=m}else cA(b,a.type,a.stateNode);else a.stateNode=aA(b,m,a.memoizedProps);else C!==m?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,m===null?cA(b,a.type,a.stateNode):aA(b,m,a.memoizedProps)):m===null&&a.stateNode!==null&&iy(a,a.memoizedProps,f.memoizedProps)}break;case 27:Wn(c,a),Xn(a),m&512&&(Lt||f===null||si(f,f.return)),f!==null&&m&4&&iy(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Wn(c,a),Xn(a),m&512&&(Lt||f===null||si(f,f.return)),a.flags&32){b=a.stateNode;try{Oa(b,"")}catch(oe){ct(a,a.return,oe)}}m&4&&a.stateNode!=null&&(b=a.memoizedProps,iy(a,b,f!==null?f.memoizedProps:b)),m&1024&&(ay=!0);break;case 6:if(Wn(c,a),Xn(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,f=a.stateNode;try{f.nodeValue=m}catch(oe){ct(a,a.return,oe)}}break;case 3:if(Rf=null,b=qr,qr=_f(c.containerInfo),Wn(c,a),qr=b,Xn(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Zc(c.containerInfo)}catch(oe){ct(a,a.return,oe)}ay&&(ay=!1,mT(a));break;case 4:m=qr,qr=_f(a.stateNode.containerInfo),Wn(c,a),Xn(a),qr=m;break;case 12:Wn(c,a),Xn(a);break;case 13:Wn(c,a),Xn(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(py=Te()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ly(a,m)));break;case 22:b=a.memoizedState!==null;var U=f!==null&&f.memoizedState!==null,re=Pi,de=Lt;if(Pi=re||b,Lt=de||U,Wn(c,a),Lt=de,Pi=re,Xn(a),m&8192)e:for(c=a.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(f===null||U||Pi||Lt||Lo(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){U=f=c;try{if(C=U.stateNode,b)_=C.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{j=U.stateNode;var pe=U.memoizedProps.style,ie=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;j.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(oe){ct(U,U.return,oe)}}}else if(c.tag===6){if(f===null){U=c;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(oe){ct(U,U.return,oe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,ly(a,f))));break;case 19:Wn(c,a),Xn(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ly(a,m)));break;case 30:break;case 21:break;default:Wn(c,a),Xn(a)}}function Xn(a){var c=a.flags;if(c&2){try{for(var f,m=a.return;m!==null;){if(aT(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,C=sy(a);yf(a,C,b);break;case 5:var _=f.stateNode;f.flags&32&&(Oa(_,""),f.flags&=-33);var j=sy(a);yf(a,j,_);break;case 3:case 4:var U=f.stateNode.containerInfo,re=sy(a);oy(a,re,U);break;default:throw Error(r(161))}}catch(de){ct(a,a.return,de)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function mT(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;mT(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Cs(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)uT(a,c.alternate,c),c=c.sibling}function Lo(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Ss(4,c,c.return),Lo(c);break;case 1:si(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&sT(c,c.return,f),Lo(c);break;case 27:Fc(c.stateNode);case 26:case 5:si(c,c.return),Lo(c);break;case 22:c.memoizedState===null&&Lo(c);break;case 30:Lo(c);break;default:Lo(c)}a=a.sibling}}function Es(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,b=a,C=c,_=C.flags;switch(C.tag){case 0:case 11:case 15:Es(b,C,f),Oc(4,C);break;case 1:if(Es(b,C,f),m=C,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(re){ct(m,m.return,re)}if(m=C,b=m.updateQueue,b!==null){var j=m.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)Uk(U[b],j)}catch(re){ct(m,m.return,re)}}f&&_&64&&iT(C),jc(C,C.return);break;case 27:lT(C);case 26:case 5:Es(b,C,f),f&&m===null&&_&4&&oT(C),jc(C,C.return);break;case 12:Es(b,C,f);break;case 13:Es(b,C,f),f&&_&4&&hT(b,C);break;case 22:C.memoizedState===null&&Es(b,C,f),jc(C,C.return);break;case 30:break;default:Es(b,C,f)}c=c.sibling}}function cy(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&bc(f))}function uy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&bc(a))}function oi(a,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)gT(a,c,f,m),c=c.sibling}function gT(a,c,f,m){var b=c.flags;switch(c.tag){case 0:case 11:case 15:oi(a,c,f,m),b&2048&&Oc(9,c);break;case 1:oi(a,c,f,m);break;case 3:oi(a,c,f,m),b&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&bc(a)));break;case 12:if(b&2048){oi(a,c,f,m),a=c.stateNode;try{var C=c.memoizedProps,_=C.id,j=C.onPostCommit;typeof j=="function"&&j(_,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(U){ct(c,c.return,U)}}else oi(a,c,f,m);break;case 13:oi(a,c,f,m);break;case 23:break;case 22:C=c.stateNode,_=c.alternate,c.memoizedState!==null?C._visibility&2?oi(a,c,f,m):Lc(a,c):C._visibility&2?oi(a,c,f,m):(C._visibility|=2,Qa(a,c,f,m,(c.subtreeFlags&10256)!==0)),b&2048&&cy(_,c);break;case 24:oi(a,c,f,m),b&2048&&uy(c.alternate,c);break;default:oi(a,c,f,m)}}function Qa(a,c,f,m,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,_=c,j=f,U=m,re=_.flags;switch(_.tag){case 0:case 11:case 15:Qa(C,_,j,U,b),Oc(8,_);break;case 23:break;case 22:var de=_.stateNode;_.memoizedState!==null?de._visibility&2?Qa(C,_,j,U,b):Lc(C,_):(de._visibility|=2,Qa(C,_,j,U,b)),b&&re&2048&&cy(_.alternate,_);break;case 24:Qa(C,_,j,U,b),b&&re&2048&&uy(_.alternate,_);break;default:Qa(C,_,j,U,b)}c=c.sibling}}function Lc(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,m=c,b=m.flags;switch(m.tag){case 22:Lc(f,m),b&2048&&cy(m.alternate,m);break;case 24:Lc(f,m),b&2048&&uy(m.alternate,m);break;default:Lc(f,m)}c=c.sibling}}var Pc=8192;function Ja(a){if(a.subtreeFlags&Pc)for(a=a.child;a!==null;)yT(a),a=a.sibling}function yT(a){switch(a.tag){case 26:Ja(a),a.flags&Pc&&a.memoizedState!==null&&FH(qr,a.memoizedState,a.memoizedProps);break;case 5:Ja(a);break;case 3:case 4:var c=qr;qr=_f(a.stateNode.containerInfo),Ja(a),qr=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Pc,Pc=16777216,Ja(a),Pc=c):Ja(a));break;default:Ja(a)}}function vT(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Ic(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];sn=m,xT(m,a)}vT(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)bT(a),a=a.sibling}function bT(a){switch(a.tag){case 0:case 11:case 15:Ic(a),a.flags&2048&&Ss(9,a,a.return);break;case 3:Ic(a);break;case 12:Ic(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,vf(a)):Ic(a);break;default:Ic(a)}}function vf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];sn=m,xT(m,a)}vT(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Ss(8,c,c.return),vf(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,vf(c));break;default:vf(c)}a=a.sibling}}function xT(a,c){for(;sn!==null;){var f=sn;switch(f.tag){case 0:case 11:case 15:Ss(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:bc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,sn=m;else e:for(f=a;sn!==null;){m=sn;var b=m.sibling,C=m.return;if(dT(m),m===f){sn=null;break e}if(b!==null){b.return=C,sn=b;break e}sn=C}}}var sH={getCacheForType:function(a){var c=Sn(Qt),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},oH=typeof WeakMap=="function"?WeakMap:Map,rt=0,dt=null,We=null,Qe=0,it=0,Zn=null,ks=!1,el=!1,dy=!1,Bi=0,Tt=0,Ns=0,Po=0,fy=0,yr=0,tl=0,Bc=null,qn=null,hy=!1,py=0,bf=1/0,xf=null,Ts=null,pn=0,As=null,nl=null,rl=0,my=0,gy=null,wT=null,zc=0,yy=null;function Qn(){if((rt&2)!==0&&Qe!==0)return Qe&-Qe;if(L.T!==null){var a=Ua;return a!==0?a:Ey()}return yo()}function ST(){yr===0&&(yr=(Qe&536870912)===0||tt?Si():536870912);var a=gr.current;return a!==null&&(a.flags|=32),yr}function Jn(a,c,f){(a===dt&&(it===2||it===9)||a.cancelPendingCommit!==null)&&(il(a,0),Ms(a,Qe,yr,!1)),Ci(a,f),((rt&2)===0||a!==dt)&&(a===dt&&((rt&2)===0&&(Po|=f),Tt===4&&Ms(a,Qe,yr,!1)),ai(a))}function CT(a,c,f){if((rt&6)!==0)throw Error(r(327));var m=!f&&(c&124)===0&&(c&a.expiredLanes)===0||Jr(a,c),b=m?cH(a,c):xy(a,c,!0),C=m;do{if(b===0){el&&!m&&Ms(a,c,0,!1);break}else{if(f=a.current.alternate,C&&!aH(f)){b=xy(a,c,!1),C=!1;continue}if(b===2){if(C=c,a.errorRecoveryDisabledLanes&C)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){c=_;e:{var j=a;b=Bc;var U=j.current.memoizedState.isDehydrated;if(U&&(il(j,_).flags|=256),_=xy(j,_,!1),_!==2){if(dy&&!U){j.errorRecoveryDisabledLanes|=C,Po|=C,b=4;break e}C=qn,qn=b,C!==null&&(qn===null?qn=C:qn.push.apply(qn,C))}b=_}if(C=!1,b!==2)continue}}if(b===1){il(a,0),Ms(a,c,0,!0);break}e:{switch(m=a,C=b,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Ms(m,c,yr,!ks);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=py+300-Te(),10<b)){if(Ms(m,c,yr,!ks),Qr(m,0,!0)!==0)break e;m.timeoutHandle=QT(ET.bind(null,m,f,qn,xf,hy,c,yr,Po,tl,ks,C,2,-0,0),b);break e}ET(m,f,qn,xf,hy,c,yr,Po,tl,ks,C,0,-0,0)}}break}while(!0);ai(a)}function ET(a,c,f,m,b,C,_,j,U,re,de,pe,ie,oe){if(a.timeoutHandle=-1,pe=c.subtreeFlags,(pe&8192||(pe&16785408)===16785408)&&(Gc={stylesheets:null,count:0,unsuspend:HH},yT(c),pe=UH(),pe!==null)){a.cancelPendingCommit=pe(DT.bind(null,a,c,C,f,m,b,_,j,U,de,1,ie,oe)),Ms(a,C,_,!re);return}DT(a,c,C,f,m,b,_,j,U)}function aH(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],C=b.getSnapshot;b=b.value;try{if(!Kn(C(),b))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ms(a,c,f,m){c&=~fy,c&=~Po,a.suspendedLanes|=c,a.pingedLanes&=~c,m&&(a.warmLanes|=c),m=a.expirationTimes;for(var b=c;0<b;){var C=31-Rt(b),_=1<<C;m[C]=-1,b&=~_}f!==0&&as(a,f,c)}function wf(){return(rt&6)===0?(qc(0),!1):!0}function vy(){if(We!==null){if(it===0)var a=We.return;else a=We,_i=_o=null,Lg(a),Xa=null,_c=0,a=We;for(;a!==null;)rT(a.alternate,a),a=a.return;We=null}}function il(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,kH(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),vy(),dt=a,We=f=Ti(a.current,null),Qe=c,it=0,Zn=null,ks=!1,el=Jr(a,c),dy=!1,tl=yr=fy=Po=Ns=Tt=0,qn=Bc=null,hy=!1,(c&8)!==0&&(c|=c&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=c;0<m;){var b=31-Rt(m),C=1<<b;c|=a[b],m&=~C}return Bi=c,Hd(),f}function kT(a,c){Ge=null,L.H=lf,c===wc||c===Zd?(c=Hk(),it=3):c===zk?(c=Hk(),it=4):it=c===FN?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Zn=c,We===null&&(Tt=1,hf(a,fr(c,a.current)))}function NT(){var a=L.H;return L.H=lf,a===null?lf:a}function TT(){var a=L.A;return L.A=sH,a}function by(){Tt=4,ks||(Qe&4194048)!==Qe&&gr.current!==null||(el=!0),(Ns&134217727)===0&&(Po&134217727)===0||dt===null||Ms(dt,Qe,yr,!1)}function xy(a,c,f){var m=rt;rt|=2;var b=NT(),C=TT();(dt!==a||Qe!==c)&&(xf=null,il(a,c)),c=!1;var _=Tt;e:do try{if(it!==0&&We!==null){var j=We,U=Zn;switch(it){case 8:vy(),_=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(c=!0);var re=it;if(it=0,Zn=null,sl(a,j,U,re),f&&el){_=0;break e}break;default:re=it,it=0,Zn=null,sl(a,j,U,re)}}lH(),_=Tt;break}catch(de){kT(a,de)}while(!0);return c&&a.shellSuspendCounter++,_i=_o=null,rt=m,L.H=b,L.A=C,We===null&&(dt=null,Qe=0,Hd()),_}function lH(){for(;We!==null;)AT(We)}function cH(a,c){var f=rt;rt|=2;var m=NT(),b=TT();dt!==a||Qe!==c?(xf=null,bf=Te()+500,il(a,c)):el=Jr(a,c);e:do try{if(it!==0&&We!==null){c=We;var C=Zn;t:switch(it){case 1:it=0,Zn=null,sl(a,c,C,1);break;case 2:case 9:if(qk(C)){it=0,Zn=null,MT(c);break}c=function(){it!==2&&it!==9||dt!==a||(it=7),ai(a)},C.then(c,c);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:qk(C)?(it=0,Zn=null,MT(c)):(it=0,Zn=null,sl(a,c,C,7));break;case 5:var _=null;switch(We.tag){case 26:_=We.memoizedState;case 5:case 27:var j=We;if(!_||uA(_)){it=0,Zn=null;var U=j.sibling;if(U!==null)We=U;else{var re=j.return;re!==null?(We=re,Sf(re)):We=null}break t}}it=0,Zn=null,sl(a,c,C,5);break;case 6:it=0,Zn=null,sl(a,c,C,6);break;case 8:vy(),Tt=6;break e;default:throw Error(r(462))}}uH();break}catch(de){kT(a,de)}while(!0);return _i=_o=null,L.H=m,L.A=b,rt=f,We!==null?0:(dt=null,Qe=0,Hd(),Tt)}function uH(){for(;We!==null&&!Ne();)AT(We)}function AT(a){var c=tT(a.alternate,a,Bi);a.memoizedProps=a.pendingProps,c===null?Sf(a):We=c}function MT(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=WN(f,c,c.pendingProps,c.type,void 0,Qe);break;case 11:c=WN(f,c,c.pendingProps,c.type.render,c.ref,Qe);break;case 5:Lg(c);default:rT(f,c),c=We=_k(c,Bi),c=tT(f,c,Bi)}a.memoizedProps=a.pendingProps,c===null?Sf(a):We=c}function sl(a,c,f,m){_i=_o=null,Lg(c),Xa=null,_c=0;var b=c.return;try{if(J8(a,b,c,f,Qe)){Tt=1,hf(a,fr(f,a.current)),We=null;return}}catch(C){if(b!==null)throw We=b,C;Tt=1,hf(a,fr(f,a.current)),We=null;return}c.flags&32768?(tt||m===1?a=!0:el||(Qe&536870912)!==0?a=!1:(ks=a=!0,(m===2||m===9||m===3||m===6)&&(m=gr.current,m!==null&&m.tag===13&&(m.flags|=16384))),_T(c,a)):Sf(c)}function Sf(a){var c=a;do{if((c.flags&32768)!==0){_T(c,ks);return}a=c.return;var f=tH(c.alternate,c,Bi);if(f!==null){We=f;return}if(c=c.sibling,c!==null){We=c;return}We=c=a}while(c!==null);Tt===0&&(Tt=5)}function _T(a,c){do{var f=nH(a.alternate,a);if(f!==null){f.flags&=32767,We=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){We=a;return}We=a=f}while(a!==null);Tt=6,We=null}function DT(a,c,f,m,b,C,_,j,U){a.cancelPendingCommit=null;do Cf();while(pn!==0);if((rt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=ug,mo(a,f,C,_,j,U),a===dt&&(We=dt=null,Qe=0),nl=c,As=a,rl=f,my=C,gy=b,wT=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,pH(Xt,function(){return PT(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=L.T,L.T=null,b=q.p,q.p=2,_=rt,rt|=4;try{rH(a,c,f)}finally{rt=_,q.p=b,L.T=m}}pn=1,RT(),OT(),jT()}}function RT(){if(pn===1){pn=0;var a=As,c=nl,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=L.T,L.T=null;var m=q.p;q.p=2;var b=rt;rt|=4;try{pT(c,a);var C=Ry,_=xk(a.containerInfo),j=C.focusedElem,U=C.selectionRange;if(_!==j&&j&&j.ownerDocument&&bk(j.ownerDocument.documentElement,j)){if(U!==null&&sg(j)){var re=U.start,de=U.end;if(de===void 0&&(de=re),"selectionStart"in j)j.selectionStart=re,j.selectionEnd=Math.min(de,j.value.length);else{var pe=j.ownerDocument||document,ie=pe&&pe.defaultView||window;if(ie.getSelection){var oe=ie.getSelection(),Ie=j.textContent.length,je=Math.min(U.start,Ie),lt=U.end===void 0?je:Math.min(U.end,Ie);!oe.extend&&je>lt&&(_=lt,lt=je,je=_);var Z=vk(j,je),K=vk(j,lt);if(Z&&K&&(oe.rangeCount!==1||oe.anchorNode!==Z.node||oe.anchorOffset!==Z.offset||oe.focusNode!==K.node||oe.focusOffset!==K.offset)){var ne=pe.createRange();ne.setStart(Z.node,Z.offset),oe.removeAllRanges(),je>lt?(oe.addRange(ne),oe.extend(K.node,K.offset)):(ne.setEnd(K.node,K.offset),oe.addRange(ne))}}}}for(pe=[],oe=j;oe=oe.parentNode;)oe.nodeType===1&&pe.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<pe.length;j++){var fe=pe[j];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Lf=!!Dy,Ry=Dy=null}finally{rt=b,q.p=m,L.T=f}}a.current=c,pn=2}}function OT(){if(pn===2){pn=0;var a=As,c=nl,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=L.T,L.T=null;var m=q.p;q.p=2;var b=rt;rt|=4;try{uT(a,c.alternate,c)}finally{rt=b,q.p=m,L.T=f}}pn=3}}function jT(){if(pn===4||pn===3){pn=0,nt();var a=As,c=nl,f=rl,m=wT;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?pn=5:(pn=0,nl=As=null,LT(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(Ts=null),go(f),c=c.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(nn,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=L.T,b=q.p,q.p=2,L.T=null;try{for(var C=a.onRecoverableError,_=0;_<m.length;_++){var j=m[_];C(j.value,{componentStack:j.stack})}}finally{L.T=c,q.p=b}}(rl&3)!==0&&Cf(),ai(a),b=a.pendingLanes,(f&4194090)!==0&&(b&42)!==0?a===yy?zc++:(zc=0,yy=a):zc=0,qc(0)}}function LT(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,bc(c)))}function Cf(a){return RT(),OT(),jT(),PT()}function PT(){if(pn!==5)return!1;var a=As,c=my;my=0;var f=go(rl),m=L.T,b=q.p;try{q.p=32>f?32:f,L.T=null,f=gy,gy=null;var C=As,_=rl;if(pn=0,nl=As=null,rl=0,(rt&6)!==0)throw Error(r(331));var j=rt;if(rt|=4,bT(C.current),gT(C,C.current,_,f),rt=j,qc(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(nn,C)}catch{}return!0}finally{q.p=b,L.T=m,LT(a,c)}}function IT(a,c,f){c=fr(f,c),c=Wg(a.stateNode,c,2),a=vs(a,c,2),a!==null&&(Ci(a,2),ai(a))}function ct(a,c,f){if(a.tag===3)IT(a,a,f);else for(;c!==null;){if(c.tag===3){IT(c,a,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ts===null||!Ts.has(m))){a=fr(f,a),f=VN(2),m=vs(c,f,2),m!==null&&(HN(f,m,c,a),Ci(m,2),ai(m));break}}c=c.return}}function wy(a,c,f){var m=a.pingCache;if(m===null){m=a.pingCache=new oH;var b=new Set;m.set(c,b)}else b=m.get(c),b===void 0&&(b=new Set,m.set(c,b));b.has(f)||(dy=!0,b.add(f),a=dH.bind(null,a,c,f),c.then(a,a))}function dH(a,c,f){var m=a.pingCache;m!==null&&m.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,dt===a&&(Qe&f)===f&&(Tt===4||Tt===3&&(Qe&62914560)===Qe&&300>Te()-py?(rt&2)===0&&il(a,0):fy|=f,tl===Qe&&(tl=0)),ai(a)}function BT(a,c){c===0&&(c=Aa()),a=qa(a,c),a!==null&&(Ci(a,c),ai(a))}function fH(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),BT(a,f)}function hH(a,c){var f=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),BT(a,f)}function pH(a,c){return Se(a,c)}var Ef=null,ol=null,Sy=!1,kf=!1,Cy=!1,Io=0;function ai(a){a!==ol&&a.next===null&&(ol===null?Ef=ol=a:ol=ol.next=a),kf=!0,Sy||(Sy=!0,gH())}function qc(a,c){if(!Cy&&kf){Cy=!0;do for(var f=!1,m=Ef;m!==null;){if(a!==0){var b=m.pendingLanes;if(b===0)var C=0;else{var _=m.suspendedLanes,j=m.pingedLanes;C=(1<<31-Rt(42|a)+1)-1,C&=b&~(_&~j),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,HT(m,C))}else C=Qe,C=Qr(m,m===dt?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(C&3)===0||Jr(m,C)||(f=!0,HT(m,C));m=m.next}while(f);Cy=!1}}function mH(){zT()}function zT(){kf=Sy=!1;var a=0;Io!==0&&(EH()&&(a=Io),Io=0);for(var c=Te(),f=null,m=Ef;m!==null;){var b=m.next,C=qT(m,c);C===0?(m.next=null,f===null?Ef=b:f.next=b,b===null&&(ol=f)):(f=m,(a!==0||(C&3)!==0)&&(kf=!0)),m=b}qc(a)}function qT(a,c){for(var f=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var _=31-Rt(C),j=1<<_,U=b[_];U===-1?((j&f)===0||(j&m)!==0)&&(b[_]=po(j,c)):U<=c&&(a.expiredLanes|=j),C&=~j}if(c=dt,f=Qe,f=Qr(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,f===0||a===c&&(it===2||it===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&Ce(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Jr(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(m!==null&&Ce(m),go(f)){case 2:case 8:f=jn;break;case 32:f=Xt;break;case 268435456:f=ft;break;default:f=Xt}return m=VT.bind(null,a),f=Se(f,m),a.callbackPriority=c,a.callbackNode=f,c}return m!==null&&m!==null&&Ce(m),a.callbackPriority=2,a.callbackNode=null,2}function VT(a,c){if(pn!==0&&pn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(Cf()&&a.callbackNode!==f)return null;var m=Qe;return m=Qr(a,a===dt?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(CT(a,m,c),qT(a,Te()),a.callbackNode!=null&&a.callbackNode===f?VT.bind(null,a):null)}function HT(a,c){if(Cf())return null;CT(a,c,!0)}function gH(){NH(function(){(rt&6)!==0?Se(Bt,mH):zT()})}function Ey(){return Io===0&&(Io=Si()),Io}function FT(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ld(""+a)}function UT(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function yH(a,c,f,m,b){if(c==="submit"&&f&&f.stateNode===b){var C=FT((b[Zt]||null).action),_=m.submitter;_&&(c=(c=_[Zt]||null)?FT(c.formAction):_.getAttribute("formAction"),c!==null&&(C=c,_=null));var j=new zd("action","action",null,m,b);a.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Io!==0){var U=_?UT(b,_):new FormData(b);Ug(f,{pending:!0,data:U,method:b.method,action:C},null,U)}}else typeof C=="function"&&(j.preventDefault(),U=_?UT(b,_):new FormData(b),Ug(f,{pending:!0,data:U,method:b.method,action:C},C,U))},currentTarget:b}]})}}for(var ky=0;ky<cg.length;ky++){var Ny=cg[ky],vH=Ny.toLowerCase(),bH=Ny[0].toUpperCase()+Ny.slice(1);zr(vH,"on"+bH)}zr(Ck,"onAnimationEnd"),zr(Ek,"onAnimationIteration"),zr(kk,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(P8,"onTransitionRun"),zr(I8,"onTransitionStart"),zr(B8,"onTransitionCancel"),zr(Nk,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vc));function $T(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],b=m.event;m=m.listeners;e:{var C=void 0;if(c)for(var _=m.length-1;0<=_;_--){var j=m[_],U=j.instance,re=j.currentTarget;if(j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(de){ff(de)}b.currentTarget=null,C=U}else for(_=0;_<m.length;_++){if(j=m[_],U=j.instance,re=j.currentTarget,j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(de){ff(de)}b.currentTarget=null,C=U}}}}function Xe(a,c){var f=c[vo];f===void 0&&(f=c[vo]=new Set);var m=a+"__bubble";f.has(m)||(GT(c,a,2,!1),f.add(m))}function Ty(a,c,f){var m=0;c&&(m|=4),GT(f,a,m,c)}var Nf="_reactListening"+Math.random().toString(36).slice(2);function Ay(a){if(!a[Nf]){a[Nf]=!0,_a.forEach(function(f){f!=="selectionchange"&&(xH.has(f)||Ty(f,!1,a),Ty(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Nf]||(c[Nf]=!0,Ty("selectionchange",!1,c))}}function GT(a,c,f,m){switch(gA(c)){case 2:var b=KH;break;case 8:b=YH;break;default:b=Hy}f=b.bind(null,c,f,a),b=void 0,!Xm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(c,f,{capture:!0,passive:b}):a.addEventListener(c,f,!0):b!==void 0?a.addEventListener(c,f,{passive:b}):a.addEventListener(c,f,!1)}function My(a,c,f,m,b){var C=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var _=m.tag;if(_===3||_===4){var j=m.stateNode.containerInfo;if(j===b)break;if(_===4)for(_=m.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===b)return;_=_.return}for(;j!==null;){if(_=Or(j),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){m=C=_;continue e}j=j.parentNode}}m=m.return}J2(function(){var re=C,de=Ym(f),pe=[];e:{var ie=Tk.get(a);if(ie!==void 0){var oe=zd,Ie=a;switch(a){case"keypress":if(Id(f)===0)break e;case"keydown":case"keyup":oe=p8;break;case"focusin":Ie="focus",oe=eg;break;case"focusout":Ie="blur",oe=eg;break;case"beforeblur":case"afterblur":oe=eg;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=nk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=n8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=y8;break;case Ck:case Ek:case kk:oe=s8;break;case Nk:oe=b8;break;case"scroll":case"scrollend":oe=e8;break;case"wheel":oe=w8;break;case"copy":case"cut":case"paste":oe=a8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=ik;break;case"toggle":case"beforetoggle":oe=C8}var je=(c&4)!==0,lt=!je&&(a==="scroll"||a==="scrollend"),Z=je?ie!==null?ie+"Capture":null:ie;je=[];for(var K=re,ne;K!==null;){var fe=K;if(ne=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ne===null||Z===null||(fe=oc(K,Z),fe!=null&&je.push(Hc(K,fe,ne))),lt)break;K=K.return}0<je.length&&(ie=new oe(ie,Ie,null,f,de),pe.push({event:ie,listeners:je}))}}if((c&7)===0){e:{if(ie=a==="mouseover"||a==="pointerover",oe=a==="mouseout"||a==="pointerout",ie&&f!==Km&&(Ie=f.relatedTarget||f.fromElement)&&(Or(Ie)||Ie[ei]))break e;if((oe||ie)&&(ie=de.window===de?de:(ie=de.ownerDocument)?ie.defaultView||ie.parentWindow:window,oe?(Ie=f.relatedTarget||f.toElement,oe=re,Ie=Ie?Or(Ie):null,Ie!==null&&(lt=s(Ie),je=Ie.tag,Ie!==lt||je!==5&&je!==27&&je!==6)&&(Ie=null)):(oe=null,Ie=re),oe!==Ie)){if(je=nk,fe="onMouseLeave",Z="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&(je=ik,fe="onPointerLeave",Z="onPointerEnter",K="pointer"),lt=oe==null?ie:ti(oe),ne=Ie==null?ie:ti(Ie),ie=new je(fe,K+"leave",oe,f,de),ie.target=lt,ie.relatedTarget=ne,fe=null,Or(de)===re&&(je=new je(Z,K+"enter",Ie,f,de),je.target=ne,je.relatedTarget=lt,fe=je),lt=fe,oe&&Ie)t:{for(je=oe,Z=Ie,K=0,ne=je;ne;ne=al(ne))K++;for(ne=0,fe=Z;fe;fe=al(fe))ne++;for(;0<K-ne;)je=al(je),K--;for(;0<ne-K;)Z=al(Z),ne--;for(;K--;){if(je===Z||Z!==null&&je===Z.alternate)break t;je=al(je),Z=al(Z)}je=null}else je=null;oe!==null&&KT(pe,ie,oe,je,!1),Ie!==null&&lt!==null&&KT(pe,lt,Ie,je,!0)}}e:{if(ie=re?ti(re):window,oe=ie.nodeName&&ie.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ie.type==="file")var ke=fk;else if(uk(ie))if(hk)ke=O8;else{ke=D8;var Ke=_8}else oe=ie.nodeName,!oe||oe.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?re&&Gm(re.elementType)&&(ke=fk):ke=R8;if(ke&&(ke=ke(a,re))){dk(pe,ke,f,de);break e}Ke&&Ke(a,ie,re),a==="focusout"&&re&&ie.type==="number"&&re.memoizedProps.value!=null&&wo(ie,"number",ie.value)}switch(Ke=re?ti(re):window,a){case"focusin":(uk(Ke)||Ke.contentEditable==="true")&&(Ia=Ke,og=re,pc=null);break;case"focusout":pc=og=Ia=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,wk(pe,f,de);break;case"selectionchange":if(L8)break;case"keydown":case"keyup":wk(pe,f,de)}var Me;if(ng)e:{switch(a){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Pa?lk(a,f)&&(Pe="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Pe="onCompositionStart");Pe&&(sk&&f.locale!=="ko"&&(Pa||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Pa&&(Me=ek()):(ps=de,Zm="value"in ps?ps.value:ps.textContent,Pa=!0)),Ke=Tf(re,Pe),0<Ke.length&&(Pe=new rk(Pe,a,null,f,de),pe.push({event:Pe,listeners:Ke}),Me?Pe.data=Me:(Me=ck(f),Me!==null&&(Pe.data=Me)))),(Me=k8?N8(a,f):T8(a,f))&&(Pe=Tf(re,"onBeforeInput"),0<Pe.length&&(Ke=new rk("onBeforeInput","beforeinput",null,f,de),pe.push({event:Ke,listeners:Pe}),Ke.data=Me)),yH(pe,a,re,f,de)}$T(pe,c)})}function Hc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Tf(a,c){for(var f=c+"Capture",m=[];a!==null;){var b=a,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=oc(a,f),b!=null&&m.unshift(Hc(a,b,C)),b=oc(a,c),b!=null&&m.push(Hc(a,b,C))),a.tag===3)return m;a=a.return}return[]}function al(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function KT(a,c,f,m,b){for(var C=c._reactName,_=[];f!==null&&f!==m;){var j=f,U=j.alternate,re=j.stateNode;if(j=j.tag,U!==null&&U===m)break;j!==5&&j!==26&&j!==27||re===null||(U=re,b?(re=oc(f,C),re!=null&&_.unshift(Hc(f,re,U))):b||(re=oc(f,C),re!=null&&_.push(Hc(f,re,U)))),f=f.return}_.length!==0&&a.push({event:c,listeners:_})}var wH=/\r\n?/g,SH=/\u0000|\uFFFD/g;function YT(a){return(typeof a=="string"?a:""+a).replace(wH,`
`).replace(SH,"")}function WT(a,c){return c=YT(c),YT(a)===c}function Af(){}function at(a,c,f,m,b,C){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Oa(a,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Oa(a,""+m);break;case"className":hs(a,"class",m);break;case"tabIndex":hs(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(a,f,m);break;case"style":Z2(a,m,C);break;case"data":if(c!=="object"){hs(a,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Ld(""+m),a.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&at(a,c,"name",b.name,b,null),at(a,c,"formEncType",b.formEncType,b,null),at(a,c,"formMethod",b.formMethod,b,null),at(a,c,"formTarget",b.formTarget,b,null)):(at(a,c,"encType",b.encType,b,null),at(a,c,"method",b.method,b,null),at(a,c,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Ld(""+m),a.setAttribute(f,m);break;case"onClick":m!=null&&(a.onclick=Af);break;case"onScroll":m!=null&&Xe("scroll",a);break;case"onScrollEnd":m!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}f=Ld(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""+m):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":m===!0?a.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,m):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(f,m):a.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(f):a.setAttribute(f,m);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),fs(a,"popover",m);break;case"xlinkActuate":Pn(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Pn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Pn(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Pn(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Pn(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Pn(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Pn(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Pn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Pn(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":fs(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=QV.get(f)||f,fs(a,f,m))}}function _y(a,c,f,m,b,C){switch(f){case"style":Z2(a,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof m=="string"?Oa(a,m):(typeof m=="number"||typeof m=="bigint")&&Oa(a,""+m);break;case"onScroll":m!=null&&Xe("scroll",a);break;case"onScrollEnd":m!=null&&Xe("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Af);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ds.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),c=f.slice(2,b?f.length-7:void 0),C=a[Zt]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(c,C,b),typeof m=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,m,b);break e}f in a?a[f]=m:m===!0?a.setAttribute(f,""):fs(a,f,m)}}}function mn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var m=!1,b=!1,C;for(C in f)if(f.hasOwnProperty(C)){var _=f[C];if(_!=null)switch(C){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:at(a,c,C,_,f,null)}}b&&at(a,c,"srcSet",f.srcSet,f,null),m&&at(a,c,"src",f.src,f,null);return;case"input":Xe("invalid",a);var j=C=_=b=null,U=null,re=null;for(m in f)if(f.hasOwnProperty(m)){var de=f[m];if(de!=null)switch(m){case"name":b=de;break;case"type":_=de;break;case"checked":U=de;break;case"defaultChecked":re=de;break;case"value":C=de;break;case"defaultValue":j=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:at(a,c,m,de,f,null)}}Vt(a,C,j,U,re,_,b,!1),He(a);return;case"select":Xe("invalid",a),m=_=C=null;for(b in f)if(f.hasOwnProperty(b)&&(j=f[b],j!=null))switch(b){case"value":C=j;break;case"defaultValue":_=j;break;case"multiple":m=j;default:at(a,c,b,j,f,null)}c=C,f=_,a.multiple=!!m,c!=null?ki(a,!!m,c,!1):f!=null&&ki(a,!!m,f,!0);return;case"textarea":Xe("invalid",a),C=b=m=null;for(_ in f)if(f.hasOwnProperty(_)&&(j=f[_],j!=null))switch(_){case"value":m=j;break;case"defaultValue":b=j;break;case"children":C=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:at(a,c,_,j,f,null)}W2(a,m,b,C),He(a);return;case"option":for(U in f)if(f.hasOwnProperty(U)&&(m=f[U],m!=null))switch(U){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:at(a,c,U,m,f,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(m=0;m<Vc.length;m++)Xe(Vc[m],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(m=f[re],m!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:at(a,c,re,m,f,null)}return;default:if(Gm(c)){for(de in f)f.hasOwnProperty(de)&&(m=f[de],m!==void 0&&_y(a,c,de,m,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(m=f[j],m!=null&&at(a,c,j,m,f,null))}function CH(a,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,_=null,j=null,U=null,re=null,de=null;for(oe in f){var pe=f[oe];if(f.hasOwnProperty(oe)&&pe!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":U=pe;default:m.hasOwnProperty(oe)||at(a,c,oe,null,m,pe)}}for(var ie in m){var oe=m[ie];if(pe=f[ie],m.hasOwnProperty(ie)&&(oe!=null||pe!=null))switch(ie){case"type":C=oe;break;case"name":b=oe;break;case"checked":re=oe;break;case"defaultChecked":de=oe;break;case"value":_=oe;break;case"defaultValue":j=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,c));break;default:oe!==pe&&at(a,c,ie,oe,m,pe)}}Ye(a,_,j,U,re,de,C,b);return;case"select":oe=_=j=ie=null;for(C in f)if(U=f[C],f.hasOwnProperty(C)&&U!=null)switch(C){case"value":break;case"multiple":oe=U;default:m.hasOwnProperty(C)||at(a,c,C,null,m,U)}for(b in m)if(C=m[b],U=f[b],m.hasOwnProperty(b)&&(C!=null||U!=null))switch(b){case"value":ie=C;break;case"defaultValue":j=C;break;case"multiple":_=C;default:C!==U&&at(a,c,b,C,m,U)}c=j,f=_,m=oe,ie!=null?ki(a,!!f,ie,!1):!!m!=!!f&&(c!=null?ki(a,!!f,c,!0):ki(a,!!f,f?[]:"",!1));return;case"textarea":oe=ie=null;for(j in f)if(b=f[j],f.hasOwnProperty(j)&&b!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:at(a,c,j,null,m,b)}for(_ in m)if(b=m[_],C=f[_],m.hasOwnProperty(_)&&(b!=null||C!=null))switch(_){case"value":ie=b;break;case"defaultValue":oe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==C&&at(a,c,_,b,m,C)}Y2(a,ie,oe);return;case"option":for(var Ie in f)if(ie=f[Ie],f.hasOwnProperty(Ie)&&ie!=null&&!m.hasOwnProperty(Ie))switch(Ie){case"selected":a.selected=!1;break;default:at(a,c,Ie,null,m,ie)}for(U in m)if(ie=m[U],oe=f[U],m.hasOwnProperty(U)&&ie!==oe&&(ie!=null||oe!=null))switch(U){case"selected":a.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:at(a,c,U,ie,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in f)ie=f[je],f.hasOwnProperty(je)&&ie!=null&&!m.hasOwnProperty(je)&&at(a,c,je,null,m,ie);for(re in m)if(ie=m[re],oe=f[re],m.hasOwnProperty(re)&&ie!==oe&&(ie!=null||oe!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,c));break;default:at(a,c,re,ie,m,oe)}return;default:if(Gm(c)){for(var lt in f)ie=f[lt],f.hasOwnProperty(lt)&&ie!==void 0&&!m.hasOwnProperty(lt)&&_y(a,c,lt,void 0,m,ie);for(de in m)ie=m[de],oe=f[de],!m.hasOwnProperty(de)||ie===oe||ie===void 0&&oe===void 0||_y(a,c,de,ie,m,oe);return}}for(var Z in f)ie=f[Z],f.hasOwnProperty(Z)&&ie!=null&&!m.hasOwnProperty(Z)&&at(a,c,Z,null,m,ie);for(pe in m)ie=m[pe],oe=f[pe],!m.hasOwnProperty(pe)||ie===oe||ie==null&&oe==null||at(a,c,pe,ie,m,oe)}var Dy=null,Ry=null;function Mf(a){return a.nodeType===9?a:a.ownerDocument}function XT(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ZT(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function Oy(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var jy=null;function EH(){var a=window.event;return a&&a.type==="popstate"?a===jy?!1:(jy=a,!0):(jy=null,!1)}var QT=typeof setTimeout=="function"?setTimeout:void 0,kH=typeof clearTimeout=="function"?clearTimeout:void 0,JT=typeof Promise=="function"?Promise:void 0,NH=typeof queueMicrotask=="function"?queueMicrotask:typeof JT<"u"?function(a){return JT.resolve(null).then(a).catch(TH)}:QT;function TH(a){setTimeout(function(){throw a})}function _s(a){return a==="head"}function eA(a,c){var f=c,m=0,b=0;do{var C=f.nextSibling;if(a.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<m&&8>m){f=m;var _=a.ownerDocument;if(f&1&&Fc(_.documentElement),f&2&&Fc(_.body),f&4)for(f=_.head,Fc(f),_=f.firstChild;_;){var j=_.nextSibling,U=_.nodeName;_[dr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=j}}if(b===0){a.removeChild(C),Zc(c);return}b--}else f==="$"||f==="$?"||f==="$!"?b++:m=f.charCodeAt(0)-48;else m=0;f=C}while(f);Zc(c)}function Ly(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Ly(f),Ei(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function AH(a,c,f,m){for(;a.nodeType===1;){var b=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[dr])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Vr(a.nextSibling),a===null)break}return null}function MH(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Vr(a.nextSibling),a===null))return null;return a}function Py(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function _H(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var m=function(){c(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Vr(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var Iy=null;function tA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function nA(a,c,f){switch(c=Mf(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Fc(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Ei(a)}var vr=new Map,rA=new Set;function _f(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var zi=q.d;q.d={f:DH,r:RH,D:OH,C:jH,L:LH,m:PH,X:BH,S:IH,M:zH};function DH(){var a=zi.f(),c=wf();return a||c}function RH(a){var c=jr(a);c!==null&&c.tag===5&&c.type==="form"?CN(c):zi.r(a)}var ll=typeof document>"u"?null:document;function iA(a,c,f){var m=ll;if(m&&typeof c=="string"&&c){var b=xt(c);b='link[rel="'+a+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),rA.has(b)||(rA.add(b),a={rel:a,crossOrigin:f,href:c},m.querySelector(b)===null&&(c=m.createElement("link"),mn(c,"link",a),kt(c),m.head.appendChild(c)))}}function OH(a){zi.D(a),iA("dns-prefetch",a,null)}function jH(a,c){zi.C(a,c),iA("preconnect",a,c)}function LH(a,c,f){zi.L(a,c,f);var m=ll;if(m&&a&&c){var b='link[rel="preload"][as="'+xt(c)+'"]';c==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+xt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+xt(f.imageSizes)+'"]')):b+='[href="'+xt(a)+'"]';var C=b;switch(c){case"style":C=cl(a);break;case"script":C=ul(a)}vr.has(C)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),vr.set(C,a),m.querySelector(b)!==null||c==="style"&&m.querySelector(Uc(C))||c==="script"&&m.querySelector($c(C))||(c=m.createElement("link"),mn(c,"link",a),kt(c),m.head.appendChild(c)))}}function PH(a,c){zi.m(a,c);var f=ll;if(f&&a){var m=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+xt(m)+'"][href="'+xt(a)+'"]',C=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=ul(a)}if(!vr.has(C)&&(a=h({rel:"modulepreload",href:a},c),vr.set(C,a),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector($c(C)))return}m=f.createElement("link"),mn(m,"link",a),kt(m),f.head.appendChild(m)}}}function IH(a,c,f){zi.S(a,c,f);var m=ll;if(m&&a){var b=Lr(m).hoistableStyles,C=cl(a);c=c||"default";var _=b.get(C);if(!_){var j={loading:0,preload:null};if(_=m.querySelector(Uc(C)))j.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=vr.get(C))&&By(a,f);var U=_=m.createElement("link");kt(U),mn(U,"link",a),U._p=new Promise(function(re,de){U.onload=re,U.onerror=de}),U.addEventListener("load",function(){j.loading|=1}),U.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Df(_,c,m)}_={type:"stylesheet",instance:_,count:1,state:j},b.set(C,_)}}}function BH(a,c){zi.X(a,c);var f=ll;if(f&&a){var m=Lr(f).hoistableScripts,b=ul(a),C=m.get(b);C||(C=f.querySelector($c(b)),C||(a=h({src:a,async:!0},c),(c=vr.get(b))&&zy(a,c),C=f.createElement("script"),kt(C),mn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(b,C))}}function zH(a,c){zi.M(a,c);var f=ll;if(f&&a){var m=Lr(f).hoistableScripts,b=ul(a),C=m.get(b);C||(C=f.querySelector($c(b)),C||(a=h({src:a,async:!0,type:"module"},c),(c=vr.get(b))&&zy(a,c),C=f.createElement("script"),kt(C),mn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(b,C))}}function sA(a,c,f,m){var b=(b=Q.current)?_f(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=cl(f.href),f=Lr(b).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=cl(f.href);var C=Lr(b).hoistableStyles,_=C.get(a);if(_||(b=b.ownerDocument||b,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,_),(C=b.querySelector(Uc(a)))&&!C._p&&(_.instance=C,_.state.loading=5),vr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vr.set(a,f),C||qH(b,a,f,_.state))),c&&m===null)throw Error(r(528,""));return _}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ul(f),f=Lr(b).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function cl(a){return'href="'+xt(a)+'"'}function Uc(a){return'link[rel="stylesheet"]['+a+"]"}function oA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function qH(a,c,f,m){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=a.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),mn(c,"link",f),kt(c),a.head.appendChild(c))}function ul(a){return'[src="'+xt(a)+'"]'}function $c(a){return"script[async]"+a}function aA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=a.querySelector('style[data-href~="'+xt(f.href)+'"]');if(m)return c.instance=m,kt(m),m;var b=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),kt(m),mn(m,"style",b),Df(m,f.precedence,a),c.instance=m;case"stylesheet":b=cl(f.href);var C=a.querySelector(Uc(b));if(C)return c.state.loading|=4,c.instance=C,kt(C),C;m=oA(f),(b=vr.get(b))&&By(m,b),C=(a.ownerDocument||a).createElement("link"),kt(C);var _=C;return _._p=new Promise(function(j,U){_.onload=j,_.onerror=U}),mn(C,"link",m),c.state.loading|=4,Df(C,f.precedence,a),c.instance=C;case"script":return C=ul(f.src),(b=a.querySelector($c(C)))?(c.instance=b,kt(b),b):(m=f,(b=vr.get(C))&&(m=h({},f),zy(m,b)),a=a.ownerDocument||a,b=a.createElement("script"),kt(b),mn(b,"link",m),a.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Df(m,f.precedence,a));return c.instance}function Df(a,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,C=b,_=0;_<m.length;_++){var j=m[_];if(j.dataset.precedence===c)C=j;else if(C!==b)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function By(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function zy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Rf=null;function lA(a,c,f){if(Rf===null){var m=new Map,b=Rf=new Map;b.set(f,m)}else b=Rf,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(a))return m;for(m.set(a,null),f=f.getElementsByTagName(a),b=0;b<f.length;b++){var C=f[b];if(!(C[dr]||C[qt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var _=C.getAttribute(c)||"";_=a+_;var j=m.get(_);j?j.push(C):m.set(_,[C])}}return m}function cA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function VH(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function uA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Gc=null;function HH(){}function FH(a,c,f){if(Gc===null)throw Error(r(475));var m=Gc;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=cl(f.href),C=a.querySelector(Uc(b));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Of.bind(m),a.then(m,m)),c.state.loading|=4,c.instance=C,kt(C);return}C=a.ownerDocument||a,f=oA(f),(b=vr.get(b))&&By(f,b),C=C.createElement("link"),kt(C);var _=C;_._p=new Promise(function(j,U){_.onload=j,_.onerror=U}),mn(C,"link",f),c.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Of.bind(m),a.addEventListener("load",c),a.addEventListener("error",c))}}function UH(){if(Gc===null)throw Error(r(475));var a=Gc;return a.stylesheets&&a.count===0&&qy(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&qy(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Of(){if(this.count--,this.count===0){if(this.stylesheets)qy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var jf=null;function qy(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,jf=new Map,c.forEach($H,a),jf=null,Of.call(a))}function $H(a,c){if(!(c.state.loading&4)){var f=jf.get(a);if(f)var m=f.get(null);else{f=new Map,jf.set(a,f);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var _=b[C];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(f.set(_.dataset.precedence,_),m=_)}m&&f.set(null,m)}b=c.instance,_=b.getAttribute("data-precedence"),C=f.get(_)||m,C===m&&f.set(null,b),f.set(_,b),this.count++,m=Of.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),C?C.parentNode.insertBefore(b,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),c.state.loading|=4}}var Kc={$$typeof:k,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function GH(a,c,f,m,b,C,_,j){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.hiddenUpdates=Rr(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function dA(a,c,f,m,b,C,_,j,U,re,de,pe){return a=new GH(a,c,f,_,j,U,re,pe),c=1,C===!0&&(c|=24),C=Yn(3,null,null,c),a.current=C,C.stateNode=a,c=wg(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:m,isDehydrated:f,cache:c},kg(C),a}function fA(a){return a?(a=Va,a):Va}function hA(a,c,f,m,b,C){b=fA(b),m.context===null?m.context=b:m.pendingContext=b,m=ys(c),m.payload={element:f},C=C===void 0?null:C,C!==null&&(m.callback=C),f=vs(a,m,c),f!==null&&(Jn(f,a,c),Cc(f,a,c))}function pA(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function Vy(a,c){pA(a,c),(a=a.alternate)&&pA(a,c)}function mA(a){if(a.tag===13){var c=qa(a,67108864);c!==null&&Jn(c,a,67108864),Vy(a,67108864)}}var Lf=!0;function KH(a,c,f,m){var b=L.T;L.T=null;var C=q.p;try{q.p=2,Hy(a,c,f,m)}finally{q.p=C,L.T=b}}function YH(a,c,f,m){var b=L.T;L.T=null;var C=q.p;try{q.p=8,Hy(a,c,f,m)}finally{q.p=C,L.T=b}}function Hy(a,c,f,m){if(Lf){var b=Fy(m);if(b===null)My(a,c,m,Pf,f),yA(a,m);else if(XH(b,a,c,f,m))m.stopPropagation();else if(yA(a,m),c&4&&-1<WH.indexOf(a)){for(;b!==null;){var C=jr(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var _=Ln(C.pendingLanes);if(_!==0){var j=C;for(j.pendingLanes|=2,j.entangledLanes|=2;_;){var U=1<<31-Rt(_);j.entanglements[1]|=U,_&=~U}ai(C),(rt&6)===0&&(bf=Te()+500,qc(0))}}break;case 13:j=qa(C,2),j!==null&&Jn(j,C,2),wf(),Vy(C,2)}if(C=Fy(m),C===null&&My(a,c,m,Pf,f),C===b)break;b=C}b!==null&&m.stopPropagation()}else My(a,c,m,null,f)}}function Fy(a){return a=Ym(a),Uy(a)}var Pf=null;function Uy(a){if(Pf=null,a=Or(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Pf=a,null}function gA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bt()){case Bt:return 2;case jn:return 8;case Xt:case tn:return 32;case ft:return 268435456;default:return 32}default:return 32}}var $y=!1,Ds=null,Rs=null,Os=null,Yc=new Map,Wc=new Map,js=[],WH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yA(a,c){switch(a){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Yc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(c.pointerId)}}function Xc(a,c,f,m,b,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:C,targetContainers:[b]},c!==null&&(c=jr(c),c!==null&&mA(c)),a):(a.eventSystemFlags|=m,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function XH(a,c,f,m,b){switch(c){case"focusin":return Ds=Xc(Ds,a,c,f,m,b),!0;case"dragenter":return Rs=Xc(Rs,a,c,f,m,b),!0;case"mouseover":return Os=Xc(Os,a,c,f,m,b),!0;case"pointerover":var C=b.pointerId;return Yc.set(C,Xc(Yc.get(C)||null,a,c,f,m,b)),!0;case"gotpointercapture":return C=b.pointerId,Wc.set(C,Xc(Wc.get(C)||null,a,c,f,m,b)),!0}return!1}function vA(a){var c=Or(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,us(a.priority,function(){if(f.tag===13){var m=Qn();m=cs(m);var b=qa(f,m);b!==null&&Jn(b,f,m),Vy(f,m)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function If(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Fy(a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Km=m,f.target.dispatchEvent(m),Km=null}else return c=jr(f),c!==null&&mA(c),a.blockedOn=f,!1;c.shift()}return!0}function bA(a,c,f){If(a)&&f.delete(c)}function ZH(){$y=!1,Ds!==null&&If(Ds)&&(Ds=null),Rs!==null&&If(Rs)&&(Rs=null),Os!==null&&If(Os)&&(Os=null),Yc.forEach(bA),Wc.forEach(bA)}function Bf(a,c){a.blockedOn===c&&(a.blockedOn=null,$y||($y=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZH)))}var zf=null;function xA(a){zf!==a&&(zf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){zf===a&&(zf=null);for(var c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],b=a[c+2];if(typeof m!="function"){if(Uy(m||f)===null)continue;break}var C=jr(f);C!==null&&(a.splice(c,3),c-=3,Ug(C,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function Zc(a){function c(U){return Bf(U,a)}Ds!==null&&Bf(Ds,a),Rs!==null&&Bf(Rs,a),Os!==null&&Bf(Os,a),Yc.forEach(c),Wc.forEach(c);for(var f=0;f<js.length;f++){var m=js[f];m.blockedOn===a&&(m.blockedOn=null)}for(;0<js.length&&(f=js[0],f.blockedOn===null);)vA(f),f.blockedOn===null&&js.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],C=f[m+1],_=b[Zt]||null;if(typeof C=="function")_||xA(f);else if(_){var j=null;if(C&&C.hasAttribute("formAction")){if(b=C,_=C[Zt]||null)j=_.formAction;else if(Uy(b)!==null)continue}else j=_.action;typeof j=="function"?f[m+1]=j:(f.splice(m,3),m-=3),xA(f)}}}function Gy(a){this._internalRoot=a}qf.prototype.render=Gy.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,m=Qn();hA(f,m,a,c,null,null)},qf.prototype.unmount=Gy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;hA(a.current,2,null,a,null,null),wf(),c[ei]=null}};function qf(a){this._internalRoot=a}qf.prototype.unstable_scheduleHydration=function(a){if(a){var c=yo();a={blockedOn:null,target:a,priority:c};for(var f=0;f<js.length&&c!==0&&c<js[f].priority;f++);js.splice(f,0,a),f===0&&vA(a)}};var wA=t.version;if(wA!=="19.1.1")throw Error(r(527,wA,"19.1.1"));q.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var QH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{nn=Vf.inject(QH),ht=Vf}catch{}}return Jc.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,m="",b=IN,C=BN,_=zN,j=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=dA(a,1,!1,null,null,f,m,b,C,_,j,null),a[ei]=c.current,Ay(a),new Gy(c)},Jc.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var m=!1,b="",C=IN,_=BN,j=zN,U=null,re=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(_=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks),f.formState!==void 0&&(re=f.formState)),c=dA(a,1,!0,c,f??null,m,b,C,_,j,U,re),c.context=fA(null),f=c.current,m=Qn(),m=cs(m),b=ys(m),b.callback=null,vs(f,b,m),f=m,c.current.lanes=f,Ci(c,f),ai(c),a[ei]=c.current,Ay(a),new qf(c)},Jc.version="19.1.1",Jc}var DA;function cF(){if(DA)return Wy.exports;DA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wy.exports=lF(),Wy.exports}var uF=cF(),dF=f5();const h5=dd(dF);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lu(){return Lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lu.apply(this,arguments)}var Ks;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ks||(Ks={}));const RA="popstate";function fF(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:u=""}=va(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),xS("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:p5(s))}function r(i,s){VC(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return pF(t,n,r,e)}function en(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function VC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function hF(){return Math.random().toString(36).substr(2,8)}function OA(e,t){return{usr:e.state,key:e.key,idx:t}}function xS(e,t,n,r){return n===void 0&&(n=null),Lu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?va(t):t,{state:n,key:t&&t.key||r||hF()})}function p5(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function va(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function pF(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Ks.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Lu({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Ks.Pop;let w=h(),E=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:E})}function g(w,E){l=Ks.Push;let N=xS(S.location,w,E);n&&n(N,w),d=h()+1;let k=OA(N,d),T=S.createHref(N);try{o.pushState(k,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&u&&u({action:l,location:S.location,delta:1})}function y(w,E){l=Ks.Replace;let N=xS(S.location,w,E);n&&n(N,w),d=h();let k=OA(N,d),T=S.createHref(N);o.replaceState(k,"",T),s&&u&&u({action:l,location:S.location,delta:0})}function x(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof w=="string"?w:p5(w);return N=N.replace(/ $/,"%20"),en(E,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,E)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(RA,p),u=w,()=>{i.removeEventListener(RA,p),u=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let E=x(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:y,go(w){return o.go(w)}};return S}var jA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(jA||(jA={}));function mF(e,t,n){return n===void 0&&(n="/"),gF(e,t,n)}function gF(e,t,n,r){let i=typeof t=="string"?va(t):t,s=y5(i.pathname||"/",n);if(s==null)return null;let o=m5(e);yF(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=MF(s);l=NF(o[u],d)}return l}function m5(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(en(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Qo([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(en(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),m5(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:EF(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of g5(s.path))i(s,o,u)}),t}function g5(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=g5(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function yF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vF=/^:[\w-]+$/,bF=3,xF=2,wF=1,SF=10,CF=-2,LA=e=>e==="*";function EF(e,t){let n=e.split("/"),r=n.length;return n.some(LA)&&(r+=CF),t&&(r+=xF),n.filter(i=>!LA(i)).reduce((i,s)=>i+(vF.test(s)?bF:s===""?wF:SF),r)}function kF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function NF(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=TF({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Qo([s,p.pathname]),pathnameBase:LF(Qo([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Qo([s,p.pathnameBase]))}return o}function TF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=AF(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[p];return y&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function AF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),VC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function MF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return VC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function y5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function _F(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?va(e):e;return{pathname:n?n.startsWith("/")?n:DF(n,t):t,search:PF(r),hash:IF(i)}}function DF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jy(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function OF(e,t){let n=RF(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jF(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=va(e):(i=Lu({},e),en(!i.pathname||!i.pathname.includes("?"),Jy("?","pathname","search",i)),en(!i.pathname||!i.pathname.includes("#"),Jy("#","pathname","hash",i)),en(!i.search||!i.search.includes("#"),Jy("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let u=_F(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Qo=e=>e.join("/").replace(/\/\/+/g,"/"),LF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const v5=["post","put","patch","delete"];new Set(v5);const zF=["get",...v5];new Set(zF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pu.apply(this,arguments)}const HC=O.createContext(null),qF=O.createContext(null),Hp=O.createContext(null),Fp=O.createContext(null),ba=O.createContext({outlet:null,matches:[],isDataRoute:!1}),b5=O.createContext(null);function Up(){return O.useContext(Fp)!=null}function x5(){return Up()||en(!1),O.useContext(Fp).location}function w5(e){O.useContext(Hp).static||O.useLayoutEffect(e)}function hd(){let{isDataRoute:e}=O.useContext(ba);return e?e9():VF()}function VF(){Up()||en(!1);let e=O.useContext(HC),{basename:t,future:n,navigator:r}=O.useContext(Hp),{matches:i}=O.useContext(ba),{pathname:s}=x5(),o=JSON.stringify(OF(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return w5(()=>{l.current=!0}),O.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=jF(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Qo([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function HF(){let{matches:e}=O.useContext(ba),t=e[e.length-1];return t?t.params:{}}function FF(e,t){return UF(e,t)}function UF(e,t,n,r){Up()||en(!1);let{navigator:i}=O.useContext(Hp),{matches:s}=O.useContext(ba),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=x5(),h;if(t){var p;let w=typeof t=="string"?va(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||en(!1),h=w}else h=d;let g=h.pathname||"/",y=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=mF(e,{pathname:y}),S=WF(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Qo([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Qo([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?O.createElement(Fp.Provider,{value:{location:Pu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ks.Pop}},S):S}function $F(){let e=JF(),t=BF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:i},n):null,null)}const GF=O.createElement($F,null);class KF extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?O.createElement(ba.Provider,{value:this.props.routeContext},O.createElement(b5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YF(e){let{routeContext:t,match:n,children:r}=e,i=O.useContext(HC);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ba.Provider,{value:t},r)}function WF(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||en(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:y}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,x=!1,S=null,w=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||GF,u&&(d<0&&g===0?(t9("route-fallback"),x=!0,w=null):d===g&&(x=!0,w=p.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,g+1)),N=()=>{let k;return y?k=S:x?k=w:p.route.Component?k=O.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,O.createElement(YF,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(KF,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:N(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):N()},null)}var S5=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(S5||{}),C5=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(C5||{});function XF(e){let t=O.useContext(HC);return t||en(!1),t}function ZF(e){let t=O.useContext(qF);return t||en(!1),t}function QF(e){let t=O.useContext(ba);return t||en(!1),t}function E5(e){let t=QF(),n=t.matches[t.matches.length-1];return n.route.id||en(!1),n.route.id}function JF(){var e;let t=O.useContext(b5),n=ZF(),r=E5();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function e9(){let{router:e}=XF(S5.UseNavigateStable),t=E5(C5.UseNavigateStable),n=O.useRef(!1);return w5(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Pu({fromRouteId:t},s)))},[e,t])}const PA={};function t9(e,t,n){PA[e]||(PA[e]=!0)}function n9(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function qo(e){en(!1)}function r9(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ks.Pop,navigator:s,static:o=!1,future:l}=e;Up()&&en(!1);let u=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:s,static:o,future:Pu({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=va(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:x="default"}=r,S=O.useMemo(()=>{let w=y5(h,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:x},navigationType:i}},[u,h,p,g,y,x,i]);return S==null?null:O.createElement(Hp.Provider,{value:d},O.createElement(Fp.Provider,{children:n,value:S}))}function i9(e){let{children:t,location:n}=e;return FF(wS(t),n)}new Promise(()=>{});function wS(e,t){t===void 0&&(t=[]);let n=[];return O.Children.forEach(e,(r,i)=>{if(!O.isValidElement(r))return;let s=[...t,i];if(r.type===O.Fragment){n.push.apply(n,wS(r.props.children,s));return}r.type!==qo&&en(!1),!r.props.index||!r.props.children||en(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const s9="6";try{window.__reactRouterVersion=s9}catch{}const o9="startTransition",IA=iF[o9];function a9(e){let{basename:t,children:n,future:r,window:i}=e,s=O.useRef();s.current==null&&(s.current=fF({window:i,v5Compat:!0}));let o=s.current,[l,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=O.useCallback(p=>{d&&IA?IA(()=>u(p)):u(p)},[u,d]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>n9(r),[r]),O.createElement(r9,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var BA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(BA||(BA={}));var zA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zA||(zA={}));var k5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},qA=Le.createContext&&Le.createContext(k5),l9=["attr","size","title"];function c9(e,t){if(e==null)return{};var n=u9(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function u9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_h.apply(this,arguments)}function VA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Dh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VA(Object(n),!0).forEach(function(r){d9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d9(e,t,n){return t=f9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f9(e){var t=h9(e,"string");return typeof t=="symbol"?t:t+""}function h9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N5(e){return e&&e.map((t,n)=>Le.createElement(t.tag,Dh({key:n},t.attr),N5(t.child)))}function Je(e){return t=>Le.createElement(p9,_h({attr:Dh({},e.attr)},t),N5(e.child))}function p9(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=c9(e,l9),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),Le.createElement("svg",_h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Dh(Dh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Le.createElement("title",null,s),e.children)};return qA!==void 0?Le.createElement(qA.Consumer,null,n=>t(n)):t(k5)}function m9(e){return Je({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function g9(e){return Je({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function y9(e){return Je({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const v9=e=>e==="system"||e==="light"||e==="dark";function xa(){const[e,t]=O.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return v9(s)?s:"light"}),[n,r]=O.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return O.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),O.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const pd=()=>{const{theme:e,setTheme:t}=xa();return v.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?v.jsx(m9,{size:18}):v.jsx(g9,{size:18})})},er={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},md=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(O.useEffect(()=>{document.title=e||er.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let g=document.querySelector(`meta[${p}="${u}"]`);g?g.content=d:(g=document.createElement("meta"),g.setAttribute(p,u),g.content=d,document.head.appendChild(g))};o("description",t||er.description),o("keywords",n||er.keywords),o("og:title",e||er.title,!0),o("og:description",t||er.description,!0),o("og:image",r||er.image,!0),o("og:url",i||er.url,!0),o("og:type",s,!0),o("twitter:title",e||er.title),o("twitter:description",t||er.description),o("twitter:image",r||er.image),o("twitter:url",i||er.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||er.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||er.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class ou extends Error{}ou.prototype.name="InvalidTokenError";function b9(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function x9(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b9(t)}catch{return atob(t)}}function w9(e,t){if(typeof e!="string")throw new ou("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new ou(`Invalid token specified: missing part #${n+1}`);let i;try{i=x9(r)}catch(s){throw new ou(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new ou(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const qi="https://diagrammatic-api.vercel.app";class S9{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${qi}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${qi}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${qi}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${qi}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${qi}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${qi}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${qi}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${qi}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${qi}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}}const rr=new S9,T5=O.createContext(void 0),C9=({children:e})=>{const[t,n]=O.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=O.useCallback(h=>{try{const p=w9(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=O.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);O.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(g=>({...g,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(g=>({...g,isLoading:!1}));return}try{const g=await rr.getCurrentUser();n({user:g,token:p,isAuthenticated:!0,isLoading:!1})}catch(g){console.error("Failed to fetch user:",g),localStorage.removeItem("auth_token"),n(y=>({...y,isLoading:!1}))}})()},[r]);const s=O.useCallback(async h=>{const{user:p,token:g}=await rr.login(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),o=O.useCallback(async h=>{const{user:p,token:g}=await rr.signup(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),l=O.useCallback(async h=>{const{user:p,token:g}=await rr.googleLogin(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),u=O.useCallback(async()=>{if(t.token)try{const h=await rr.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=O.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return v.jsx(T5.Provider,{value:d,children:e})},$p=()=>{const e=O.useContext(T5);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},FC=O.createContext({});function UC(e){const t=O.useRef(null);return t.current===null&&(t.current=e()),t.current}const $C=typeof window<"u",A5=$C?O.useLayoutEffect:O.useEffect,Gp=O.createContext(null);function GC(e,t){e.indexOf(t)===-1&&e.push(t)}function KC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Zi=(e,t,n)=>n>t?t:n<e?e:n;let YC=()=>{};const Qi={},M5=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function _5(e){return typeof e=="object"&&e!==null}const D5=e=>/^0[^.\s]+$/u.test(e);function WC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Tr=e=>e,E9=(e,t)=>n=>t(e(n)),gd=(...e)=>e.reduce(E9),Iu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class XC{constructor(){this.subscriptions=[]}add(t){return GC(this.subscriptions,t),()=>KC(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const pi=e=>e*1e3,kr=e=>e/1e3;function R5(e,t){return t?e*(1e3/t):0}const O5=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,k9=1e-7,N9=12;function T9(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=O5(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>k9&&++l<N9);return o}function yd(e,t,n,r){if(e===t&&n===r)return Tr;const i=s=>T9(s,0,1,e,n);return s=>s===0||s===1?s:O5(i(s),t,r)}const j5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,L5=e=>t=>1-e(1-t),P5=yd(.33,1.53,.69,.99),ZC=L5(P5),I5=j5(ZC),B5=e=>(e*=2)<1?.5*ZC(e):.5*(2-Math.pow(2,-10*(e-1))),QC=e=>1-Math.sin(Math.acos(e)),z5=L5(QC),q5=j5(QC),A9=yd(.42,0,1,1),M9=yd(0,0,.58,1),V5=yd(.42,0,.58,1),_9=e=>Array.isArray(e)&&typeof e[0]!="number",H5=e=>Array.isArray(e)&&typeof e[0]=="number",D9={linear:Tr,easeIn:A9,easeInOut:V5,easeOut:M9,circIn:QC,circInOut:q5,circOut:z5,backIn:ZC,backInOut:I5,backOut:P5,anticipate:B5},R9=e=>typeof e=="string",HA=e=>{if(H5(e)){YC(e.length===4);const[t,n,r,i]=e;return yd(t,n,r,i)}else if(R9(e))return D9[e];return e},Ff=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function O9(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const j9=40;function F5(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Ff.reduce((k,T)=>(k[T]=O9(s),k),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:g,render:y,postRender:x}=o,S=()=>{const k=Qi.useManualTiming?i.timestamp:performance.now();n=!1,Qi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,j9),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),y.process(i),x.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:Ff.reduce((k,T)=>{const A=o[T];return k[T]=(M,D=!1,R=!1)=>(n||w(),A.schedule(M,D,R)),k},{}),cancel:k=>{for(let T=0;T<Ff.length;T++)o[Ff[T]].cancel(k)},state:i,steps:o}}const{schedule:gt,cancel:ro,state:yn,steps:e0}=F5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tr,!0);let mh;function L9(){mh=void 0}const Hn={now:()=>(mh===void 0&&Hn.set(yn.isProcessing||Qi.useManualTiming?yn.timestamp:performance.now()),mh),set:e=>{mh=e,queueMicrotask(L9)}},U5=e=>t=>typeof t=="string"&&t.startsWith(e),JC=U5("--"),P9=U5("var(--"),eE=e=>P9(e)?I9.test(e.split("/*")[0].trim()):!1,I9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Kl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Bu={...Kl,transform:e=>Zi(0,1,e)},Uf={...Kl,default:1},yu=e=>Math.round(e*1e5)/1e5,tE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function B9(e){return e==null}const z9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nE=(e,t)=>n=>!!(typeof n=="string"&&z9.test(n)&&n.startsWith(e)||t&&!B9(n)&&Object.prototype.hasOwnProperty.call(n,t)),$5=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(tE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},q9=e=>Zi(0,255,e),t0={...Kl,transform:e=>Math.round(q9(e))},$o={test:nE("rgb","red"),parse:$5("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+t0.transform(e)+", "+t0.transform(t)+", "+t0.transform(n)+", "+yu(Bu.transform(r))+")"};function V9(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const SS={test:nE("#"),parse:V9,transform:$o.transform},vd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zs=vd("deg"),mi=vd("%"),Be=vd("px"),H9=vd("vh"),F9=vd("vw"),FA={...mi,parse:e=>mi.parse(e)/100,transform:e=>mi.transform(e*100)},wl={test:nE("hsl","hue"),parse:$5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+mi.transform(yu(t))+", "+mi.transform(yu(n))+", "+yu(Bu.transform(r))+")"},Ut={test:e=>$o.test(e)||SS.test(e)||wl.test(e),parse:e=>$o.test(e)?$o.parse(e):wl.test(e)?wl.parse(e):SS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?$o.transform(e):wl.transform(e),getAnimatableNone:e=>{const t=Ut.parse(e);return t.alpha=0,Ut.transform(t)}},U9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $9(e){return isNaN(e)&&typeof e=="string"&&(e.match(tE)?.length||0)+(e.match(U9)?.length||0)>0}const G5="number",K5="color",G9="var",K9="var(",UA="${}",Y9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(Y9,u=>(Ut.test(u)?(r.color.push(s),i.push(K5),n.push(Ut.parse(u))):u.startsWith(K9)?(r.var.push(s),i.push(G9),n.push(u)):(r.number.push(s),i.push(G5),n.push(parseFloat(u))),++s,UA)).split(UA);return{values:n,split:l,indexes:r,types:i}}function Y5(e){return zu(e).values}function W5(e){const{split:t,types:n}=zu(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===G5?s+=yu(i[o]):l===K5?s+=Ut.transform(i[o]):s+=i[o]}return s}}const W9=e=>typeof e=="number"?0:Ut.test(e)?Ut.getAnimatableNone(e):e;function X9(e){const t=Y5(e);return W5(e)(t.map(W9))}const io={test:$9,parse:Y5,createTransformer:W5,getAnimatableNone:X9};function n0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Z9({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=n0(u,l,e+1/3),s=n0(u,l,e),o=n0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Rh(e,t){return n=>n>0?t:e}const Ct=(e,t,n)=>e+(t-e)*n,r0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Q9=[SS,$o,wl],J9=e=>Q9.find(t=>t.test(e));function $A(e){const t=J9(e);if(!t)return!1;let n=t.parse(e);return t===wl&&(n=Z9(n)),n}const GA=(e,t)=>{const n=$A(e),r=$A(t);if(!n||!r)return Rh(e,t);const i={...n};return s=>(i.red=r0(n.red,r.red,s),i.green=r0(n.green,r.green,s),i.blue=r0(n.blue,r.blue,s),i.alpha=Ct(n.alpha,r.alpha,s),$o.transform(i))},CS=new Set(["none","hidden"]);function eU(e,t){return CS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function tU(e,t){return n=>Ct(e,t,n)}function rE(e){return typeof e=="number"?tU:typeof e=="string"?eE(e)?Rh:Ut.test(e)?GA:iU:Array.isArray(e)?X5:typeof e=="object"?Ut.test(e)?GA:nU:Rh}function X5(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>rE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function nU(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=rE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function rU(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const iU=(e,t)=>{const n=io.createTransformer(t),r=zu(e),i=zu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?CS.has(e)&&!i.values.length||CS.has(t)&&!r.values.length?eU(e,t):gd(X5(rU(r,i),i.values),n):Rh(e,t)};function Z5(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ct(e,t,n):rE(e)(e,t)}const sU=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>gt.update(t,n),stop:()=>ro(t),now:()=>yn.isProcessing?yn.timestamp:Hn.now()}},Q5=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Oh=2e4;function iE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Oh;)t+=n,r=e.next(t);return t>=Oh?1/0:t}function oU(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(iE(r),Oh);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:kr(i)}}const aU=5;function J5(e,t,n){const r=Math.max(t-aU,0);return R5(n-e(r),t-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},i0=.001;function lU({duration:e=Mt.duration,bounce:t=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let i,s,o=1-t;o=Zi(Mt.minDamping,Mt.maxDamping,o),e=Zi(Mt.minDuration,Mt.maxDuration,kr(e)),o<1?(i=d=>{const h=d*o,p=h*e,g=h-n,y=ES(d,o),x=Math.exp(-p);return i0-g/y*x},s=d=>{const p=d*o*e,g=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-p),S=ES(Math.pow(d,2),o);return(-i(d)+i0>0?-1:1)*((g-y)*x)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-i0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=uU(i,s,l);if(e=pi(e),isNaN(u))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const cU=12;function uU(e,t,n){let r=n;for(let i=1;i<cU;i++)r=r-e(r)/t(r);return r}function ES(e,t){return e*Math.sqrt(1-t*t)}const dU=["duration","bounce"],fU=["stiffness","damping","mass"];function KA(e,t){return t.some(n=>e[n]!==void 0)}function hU(e){let t={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...e};if(!KA(e,fU)&&KA(e,dU))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Zi(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Mt.mass,stiffness:i,damping:s}}else{const n=lU(e);t={...t,...n,mass:Mt.mass},t.isResolvedFromDuration=!0}return t}function jh(e=Mt.visualDuration,t=Mt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=hU({...n,velocity:-kr(n.velocity||0)}),x=g||0,S=d/(2*Math.sqrt(u*h)),w=o-s,E=kr(Math.sqrt(u/h)),N=Math.abs(w)<5;r||(r=N?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=N?Mt.restDelta.granular:Mt.restDelta.default);let k;if(S<1){const A=ES(E,S);k=M=>{const D=Math.exp(-S*E*M);return o-D*((x+S*E*w)/A*Math.sin(A*M)+w*Math.cos(A*M))}}else if(S===1)k=A=>o-Math.exp(-E*A)*(w+(x+E*w)*A);else{const A=E*Math.sqrt(S*S-1);k=M=>{const D=Math.exp(-S*E*M),R=Math.min(A*M,300);return o-D*((x+S*E*w)*Math.sinh(R)+A*w*Math.cosh(R))/A}}const T={calculatedDuration:y&&p||null,next:A=>{const M=k(A);if(y)l.done=A>=p;else{let D=A===0?x:0;S<1&&(D=A===0?pi(x):J5(k,A,M));const R=Math.abs(D)<=r,P=Math.abs(o-M)<=i;l.done=R&&P}return l.value=l.done?o:M,l},toString:()=>{const A=Math.min(iE(T),Oh),M=Q5(D=>T.next(A*D).value,A,30);return A+"ms "+M},toTransition:()=>{}};return T}jh.applyToOptions=e=>{const t=oU(e,100,jh);return e.ease=t.ease,e.duration=pi(t.duration),e.type="keyframes",e};function kS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],g={done:!1,value:p},y=R=>l!==void 0&&R<l||u!==void 0&&R>u,x=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let S=n*t;const w=p+S,E=o===void 0?w:o(w);E!==w&&(S=E-p);const N=R=>-S*Math.exp(-R/r),k=R=>E+N(R),T=R=>{const P=N(R),$=k(R);g.done=Math.abs(P)<=d,g.value=g.done?E:$};let A,M;const D=R=>{y(g.value)&&(A=R,M=jh({keyframes:[g.value,x(g.value)],velocity:J5(k,R,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return D(0),{calculatedDuration:null,next:R=>{let P=!1;return!M&&A===void 0&&(P=!0,T(R),D(R)),A!==void 0&&R>=A?M.next(R-A):(!P&&T(R),g)}}}function pU(e,t,n){const r=[],i=n||Qi.mix||Z5,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Tr:t;l=gd(u,l)}r.push(l)}return r}function mU(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(YC(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=pU(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const g=Iu(e[p],e[p+1],h);return l[p](g)};return n?h=>d(Zi(e[0],e[s-1],h)):d}function gU(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Iu(0,t,r);e.push(Ct(n,1,i))}}function yU(e){const t=[0];return gU(t,e.length-1),t}function vU(e,t){return e.map(n=>n*t)}function bU(e,t){return e.map(()=>t||V5).splice(0,e.length-1)}function vu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=_9(r)?r.map(HA):HA(r),s={done:!1,value:t[0]},o=vU(n&&n.length===t.length?n:yU(t),e),l=mU(o,t,{ease:Array.isArray(i)?i:bU(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const xU=e=>e!==null;function sE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(xU),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const wU={decay:kS,inertia:kS,tween:vu,keyframes:vu,spring:jh};function eP(e){typeof e.type=="string"&&(e.type=wU[e.type])}class oE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const SU=e=>e/100;class aE extends oE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;eP(t);const{type:n=vu,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||vu;u!==vu&&typeof l[0]!="number"&&(this.mixKeyframes=gd(SU,Z5(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=iE(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:y,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,T=r;if(p){const R=Math.min(this.currentTime,i)/l;let P=Math.floor(R),$=R%1;!$&&R>=1&&($=1),$===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(g==="reverse"?($=1-$,y&&($-=y/l)):g==="mirror"&&(T=o)),k=Zi(0,1,$)*l}const A=N?{done:!1,value:h[0]}:T.next(k);s&&(A.value=s(A.value));let{done:M}=A;!N&&u!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return D&&x!==kS&&(A.value=sE(h,this.options,w,this.speed)),S&&S(A.value),D&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return kr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+kr(t)}get time(){return kr(this.currentTime)}set time(t){t=pi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Hn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=kr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=sU,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function CU(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Go=e=>e*180/Math.PI,NS=e=>{const t=Go(Math.atan2(e[1],e[0]));return TS(t)},EU={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:NS,rotateZ:NS,skewX:e=>Go(Math.atan(e[1])),skewY:e=>Go(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},TS=e=>(e=e%360,e<0&&(e+=360),e),YA=NS,WA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),XA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),kU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:WA,scaleY:XA,scale:e=>(WA(e)+XA(e))/2,rotateX:e=>TS(Go(Math.atan2(e[6],e[5]))),rotateY:e=>TS(Go(Math.atan2(-e[2],e[0]))),rotateZ:YA,rotate:YA,skewX:e=>Go(Math.atan(e[4])),skewY:e=>Go(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function AS(e){return e.includes("scale")?1:0}function MS(e,t){if(!e||e==="none")return AS(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=kU,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=EU,i=l}if(!i)return AS(t);const s=r[t],o=i[1].split(",").map(TU);return typeof s=="function"?s(o):o[s]}const NU=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return MS(n,t)};function TU(e){return parseFloat(e.trim())}const Yl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wl=new Set(Yl),ZA=e=>e===Kl||e===Be,AU=new Set(["x","y","z"]),MU=Yl.filter(e=>!AU.has(e));function _U(e){const t=[];return MU.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Jo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>MS(t,"x"),y:(e,{transform:t})=>MS(t,"y")};Jo.translateX=Jo.x;Jo.translateY=Jo.y;const ea=new Set;let _S=!1,DS=!1,RS=!1;function tP(){if(DS){const e=Array.from(ea).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=_U(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}DS=!1,_S=!1,ea.forEach(e=>e.complete(RS)),ea.clear()}function nP(){ea.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(DS=!0)})}function DU(){RS=!0,nP(),tP(),RS=!1}class lE{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ea.add(this),_S||(_S=!0,gt.read(nP),gt.resolveKeyframes(tP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}CU(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ea.delete(this)}cancel(){this.state==="scheduled"&&(ea.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const RU=e=>e.startsWith("--");function OU(e,t,n){RU(t)?e.style.setProperty(t,n):e.style[t]=n}const jU=WC(()=>window.ScrollTimeline!==void 0),LU={};function PU(e,t){const n=WC(e);return()=>LU[t]??n()}const rP=PU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),au=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,QA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:au([0,.65,.55,1]),circOut:au([.55,0,1,.45]),backIn:au([.31,.01,.66,-.59]),backOut:au([.33,1.53,.69,.99])};function iP(e,t){if(e)return typeof e=="function"?rP()?Q5(e,t):"ease-out":H5(e)?au(e):Array.isArray(e)?e.map(n=>iP(n,t)||QA.easeOut):QA[e]}function IU(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=iP(l,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),e.animate(h,g)}function sP(e){return typeof e=="function"&&"applyToOptions"in e}function BU({type:e,...t}){return sP(e)&&rP()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class zU extends oE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,YC(typeof t.type!="string");const d=BU(t);this.animation=IU(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=sE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):OU(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return kr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+kr(t)}get time(){return kr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=pi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&jU()?(this.animation.timeline=t,Tr):n(this)}}const oP={anticipate:B5,backInOut:I5,circInOut:q5};function qU(e){return e in oP}function VU(e){typeof e.ease=="string"&&qU(e.ease)&&(e.ease=oP[e.ease])}const JA=10;class HU extends zU{constructor(t){VU(t),eP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new aE({...o,autoplay:!1}),u=pi(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-JA).value,l.sample(u).value,JA),l.stop()}}const eM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(io.test(e)||e==="0")&&!e.startsWith("url("));function FU(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function UU(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=eM(i,t),l=eM(s,t);return!o||!l?!1:FU(e)||(n==="spring"||sP(n))&&r}function OS(e){e.duration=0,e.type="keyframes"}const $U=new Set(["opacity","clipPath","filter","transform"]),GU=WC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function KU(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return GU()&&n&&$U.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const YU=40;class WU extends oE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},y=h?.KeyframeResolver||lE;this.keyframeResolver=new y(l,(x,S,w)=>this.onKeyframesResolved(x,S,g,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Hn.now(),UU(t,s,o,l)||((Qi.instantAnimations||!u)&&h?.(sE(t,r,n)),t[0]=t[t.length-1],OS(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>YU?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!d&&KU(g)?new HU({...g,element:g.motionValue.owner.current}):new aE(g);y.finished.then(()=>this.notifyFinished()).catch(Tr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),DU()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const XU=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ZU(e){const t=XU.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function aP(e,t,n=1){const[r,i]=ZU(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return M5(o)?parseFloat(o):o}return eE(i)?aP(i,t,n+1):i}function cE(e,t){return e?.[t]??e?.default??e}const lP=new Set(["width","height","top","left","right","bottom",...Yl]),QU={test:e=>e==="auto",parse:e=>e},cP=e=>t=>t.test(e),uP=[Kl,Be,mi,zs,F9,H9,QU],tM=e=>uP.find(cP(e));function JU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||D5(e):!0}const e7=new Set(["brightness","contrast","saturate","opacity"]);function t7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(tE)||[];if(!r)return e;const i=n.replace(r,"");let s=e7.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const n7=/\b([a-z-]*)\(.*?\)/gu,jS={...io,getAnimatableNone:e=>{const t=e.match(n7);return t?t.map(t7).join(" "):e}},nM={...Kl,transform:Math.round},r7={rotate:zs,rotateX:zs,rotateY:zs,rotateZ:zs,scale:Uf,scaleX:Uf,scaleY:Uf,scaleZ:Uf,skew:zs,skewX:zs,skewY:zs,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Bu,originX:FA,originY:FA,originZ:Be},uE={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...r7,zIndex:nM,fillOpacity:Bu,strokeOpacity:Bu,numOctaves:nM},i7={...uE,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:jS,WebkitFilter:jS},dP=e=>i7[e];function fP(e,t){let n=dP(e);return n!==jS&&(n=io),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const s7=new Set(["auto","none","0"]);function o7(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!s7.has(s)&&zu(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=fP(n,i)}class a7 extends lE{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),eE(d))){const h=aP(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!lP.has(r)||t.length!==2)return;const[i,s]=t,o=tM(i),l=tM(s);if(o!==l)if(ZA(o)&&ZA(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Jo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||JU(t[i]))&&r.push(i);r.length&&o7(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Jo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function l7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const hP=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function pP(e){return _5(e)&&"offsetHeight"in e}const rM=30,c7=e=>!isNaN(parseFloat(e));class u7{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Hn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=c7(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new XC);const r=this.events[t].add(n);return t==="change"?()=>{r(),gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,rM);return R5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function jl(e,t){return new u7(e,t)}const{schedule:dE}=F5(queueMicrotask,!1),Hr={x:!1,y:!1};function mP(){return Hr.x||Hr.y}function d7(e){return e==="x"||e==="y"?Hr[e]?null:(Hr[e]=!0,()=>{Hr[e]=!1}):Hr.x||Hr.y?null:(Hr.x=Hr.y=!0,()=>{Hr.x=Hr.y=!1})}function gP(e,t){const n=l7(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function iM(e){return!(e.pointerType==="touch"||mP())}function f7(e,t,n={}){const[r,i,s]=gP(e,n),o=l=>{if(!iM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{iM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const yP=(e,t)=>t?e===t?!0:yP(e,t.parentElement):!1,fE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,h7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p7(e){return h7.has(e.tagName)||e.tabIndex!==-1}const gh=new WeakSet;function sM(e){return t=>{t.key==="Enter"&&e(t)}}function s0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const m7=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=sM(()=>{if(gh.has(n))return;s0(n,"down");const i=sM(()=>{s0(n,"up")}),s=()=>s0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function oM(e){return fE(e)&&!mP()}function g7(e,t,n={}){const[r,i,s]=gP(e,n),o=l=>{const u=l.currentTarget;if(!oM(l))return;gh.add(u);const d=t(u,l),h=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),gh.has(u)&&gh.delete(u),oM(y)&&typeof d=="function"&&d(y,{success:x})},p=y=>{h(y,u===window||u===document||n.useGlobalTarget||yP(u,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),pP(l)&&(l.addEventListener("focus",d=>m7(d,i)),!p7(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function vP(e){return _5(e)&&"ownerSVGElement"in e}function y7(e){return vP(e)&&e.tagName==="svg"}const kn=e=>!!(e&&e.getVelocity),v7=[...uP,Ut,io],b7=e=>v7.find(cP(e)),hE=O.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function aM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function x7(...e){return t=>{let n=!1;const r=e.map(i=>{const s=aM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():aM(e[i],null)}}}}function w7(...e){return O.useCallback(x7(...e),e)}class S7 extends O.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=pP(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C7({children:e,isPresent:t,anchorX:n,root:r}){const i=O.useId(),s=O.useRef(null),o=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=O.useContext(hE),u=w7(s,e?.ref);return O.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:g,right:y}=o.current;if(t||!s.current||!d||!h)return;const x=n==="left"?`left: ${g}`:`right: ${y}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),v.jsx(S7,{isPresent:t,childRef:s,sizeRef:o,children:O.cloneElement(e,{ref:u})})}const E7=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=UC(k7),h=O.useId();let p=!0,g=O.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const x of d.values())if(!x)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return s&&p&&(g={...g}),O.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[n]),O.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=v.jsx(C7,{isPresent:n,anchorX:l,root:u,children:e})),v.jsx(Gp.Provider,{value:g,children:e})};function k7(){return new Map}function bP(e=!0){const t=O.useContext(Gp);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=O.useId();O.useEffect(()=>{if(e)return i(s)},[e]);const o=O.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const $f=e=>e.key||"";function lM(e){const t=[];return O.Children.forEach(e,n=>{O.isValidElement(n)&&t.push(n)}),t}const Kp=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=bP(o),p=O.useMemo(()=>lM(e),[e]),g=o&&!d?[]:p.map($f),y=O.useRef(!0),x=O.useRef(p),S=UC(()=>new Map),[w,E]=O.useState(p),[N,k]=O.useState(p);A5(()=>{y.current=!1,x.current=p;for(let M=0;M<N.length;M++){const D=$f(N[M]);g.includes(D)?S.delete(D):S.get(D)!==!0&&S.set(D,!1)}},[N,g.length,g.join("-")]);const T=[];if(p!==w){let M=[...p];for(let D=0;D<N.length;D++){const R=N[D],P=$f(R);g.includes(P)||(M.splice(D,0,R),T.push(R))}return s==="wait"&&T.length&&(M=T),k(lM(M)),E(p),null}const{forceRender:A}=O.useContext(FC);return v.jsx(v.Fragment,{children:N.map(M=>{const D=$f(M),R=o&&!d?!1:p===N||g.includes(D),P=()=>{if(S.has(D))S.set(D,!0);else return;let $=!0;S.forEach(V=>{V||($=!1)}),$&&(A?.(),k(x.current),o&&h?.(),r&&r())};return v.jsx(E7,{isPresent:R,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:P,anchorX:l,children:M},D)})})},xP=O.createContext({strict:!1}),cM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ll={};for(const e in cM)Ll[e]={isEnabled:t=>cM[e].some(n=>!!t[n])};function N7(e){for(const t in e)Ll[t]={...Ll[t],...e[t]}}const T7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Lh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||T7.has(e)}let wP=e=>!Lh(e);function A7(e){typeof e=="function"&&(wP=t=>t.startsWith("on")?!Lh(t):e(t))}try{A7(require("@emotion/is-prop-valid").default)}catch{}function M7(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(wP(i)||n===!0&&Lh(i)||!t&&!Lh(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Yp=O.createContext({});function Wp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function qu(e){return typeof e=="string"||Array.isArray(e)}const pE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mE=["initial",...pE];function Xp(e){return Wp(e.animate)||mE.some(t=>qu(e[t]))}function SP(e){return!!(Xp(e)||e.variants)}function _7(e,t){if(Xp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||qu(n)?n:void 0,animate:qu(r)?r:void 0}}return e.inherit!==!1?t:{}}function D7(e){const{initial:t,animate:n}=_7(e,O.useContext(Yp));return O.useMemo(()=>({initial:t,animate:n}),[uM(t),uM(n)])}function uM(e){return Array.isArray(e)?e.join(" "):e}const Vu={};function R7(e){for(const t in e)Vu[t]=e[t],JC(t)&&(Vu[t].isCSSVariable=!0)}function CP(e,{layout:t,layoutId:n}){return Wl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Vu[e]||e==="opacity")}const O7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},j7=Yl.length;function L7(e,t,n){let r="",i=!0;for(let s=0;s<j7;s++){const o=Yl[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=hP(l,uE[o]);if(!u){i=!1;const h=O7[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function gE(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Wl.has(u)){o=!0;continue}else if(JC(u)){i[u]=d;continue}else{const h=hP(d,uE[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=L7(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const yE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function EP(e,t,n){for(const r in t)!kn(t[r])&&!CP(r,n)&&(e[r]=t[r])}function P7({transformTemplate:e},t){return O.useMemo(()=>{const n=yE();return gE(n,t,e),Object.assign({},n.vars,n.style)},[t])}function I7(e,t){const n=e.style||{},r={};return EP(r,n,e),Object.assign(r,P7(e,t)),r}function B7(e,t){const n={},r=I7(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const z7={offset:"stroke-dashoffset",array:"stroke-dasharray"},q7={offset:"strokeDashoffset",array:"strokeDasharray"};function V7(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?z7:q7;e[s.offset]=Be.transform(-r);const o=Be.transform(t),l=Be.transform(n);e[s.array]=`${o} ${l}`}function kP(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(gE(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&V7(p,i,s,o,!1)}const NP=()=>({...yE(),attrs:{}}),TP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function H7(e,t,n,r){const i=O.useMemo(()=>{const s=NP();return kP(s,t,TP(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};EP(s,e.style,e),i.style={...s,...i.style}}return i}const F7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function vE(e){return typeof e!="string"||e.includes("-")?!1:!!(F7.indexOf(e)>-1||/[A-Z]/u.test(e))}function U7(e,t,n,{latestValues:r},i,s=!1){const l=(vE(e)?H7:B7)(t,r,i,e),u=M7(t,typeof e=="string",s),d=e!==O.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=O.useMemo(()=>kn(h)?h.get():h,[h]);return O.createElement(e,{...d,children:p})}function dM(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function bE(e,t,n,r){if(typeof t=="function"){const[i,s]=dM(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=dM(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function yh(e){return kn(e)?e.get():e}function $7({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:G7(n,r,i,e),renderState:t()}}function G7(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=yh(s[g]);let{initial:o,animate:l}=e;const u=Xp(e),d=SP(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Wp(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const x=bE(e,g[y]);if(x){const{transitionEnd:S,transition:w,...E}=x;for(const N in E){let k=E[N];if(Array.isArray(k)){const T=h?k.length-1:0;k=k[T]}k!==null&&(i[N]=k)}for(const N in S)i[N]=S[N]}}}return i}const AP=e=>(t,n)=>{const r=O.useContext(Yp),i=O.useContext(Gp),s=()=>$7(e,t,r,i);return n?s():UC(s)};function xE(e,t,n){const{style:r}=e,i={};for(const s in r)(kn(r[s])||t.style&&kn(t.style[s])||CP(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const K7=AP({scrapeMotionValuesFromProps:xE,createRenderState:yE});function MP(e,t,n){const r=xE(e,t,n);for(const i in e)if(kn(e[i])||kn(t[i])){const s=Yl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const Y7=AP({scrapeMotionValuesFromProps:MP,createRenderState:NP}),W7=Symbol.for("motionComponentSymbol");function Sl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function X7(e,t,n){return O.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Sl(n)&&(n.current=r))},[t])}const wE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z7="framerAppearId",_P="data-"+wE(Z7),DP=O.createContext({});function Q7(e,t,n,r,i){const{visualElement:s}=O.useContext(Yp),o=O.useContext(xP),l=O.useContext(Gp),u=O.useContext(hE).reducedMotion,d=O.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=O.useContext(DP);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&J7(d.current,n,i,p);const g=O.useRef(!1);O.useInsertionEffect(()=>{h&&g.current&&h.update(n,l)});const y=n[_P],x=O.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return A5(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),O.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),h.enteringChildren=void 0)}),h}function J7(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:RP(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Sl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function RP(e){if(e)return e.options.allowProjection!==!1?e.projection:RP(e.parent)}function o0(e,{forwardMotionProps:t=!1}={},n,r){n&&N7(n);const i=vE(e)?Y7:K7;function s(l,u){let d;const h={...O.useContext(hE),...l,layoutId:e$(l)},{isStatic:p}=h,g=D7(l),y=i(l,p);if(!p&&$C){t$();const x=n$(h);d=x.MeasureLayout,g.visualElement=Q7(e,y,h,r,x.ProjectionNode)}return v.jsxs(Yp.Provider,{value:g,children:[d&&g.visualElement?v.jsx(d,{visualElement:g.visualElement,...h}):null,U7(e,l,X7(y,g.visualElement,u),y,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=O.forwardRef(s);return o[W7]=e,o}function e$({layoutId:e}){const t=O.useContext(FC).id;return t&&e!==void 0?t+"-"+e:e}function t$(e,t){O.useContext(xP).strict}function n$(e){const{drag:t,layout:n}=Ll;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function r$(e,t){if(typeof Proxy>"u")return o0;const n=new Map,r=(s,o)=>o0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,o0(o,void 0,e,t)),n.get(o))})}function OP({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function i$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function s$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function a0(e){return e===void 0||e===1}function LS({scale:e,scaleX:t,scaleY:n}){return!a0(e)||!a0(t)||!a0(n)}function Vo(e){return LS(e)||jP(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function jP(e){return fM(e.x)||fM(e.y)}function fM(e){return e&&e!=="0%"}function Ph(e,t,n){const r=e-n,i=t*r;return n+i}function hM(e,t,n,r,i){return i!==void 0&&(e=Ph(e,i,r)),Ph(e,n,r)+t}function PS(e,t=0,n=1,r,i){e.min=hM(e.min,t,n,r,i),e.max=hM(e.max,t,n,r,i)}function LP(e,{x:t,y:n}){PS(e.x,t.translate,t.scale,t.originPoint),PS(e.y,n.translate,n.scale,n.originPoint)}const pM=.999999999999,mM=1.0000000000001;function o$(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&El(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,LP(e,o)),r&&Vo(s.latestValues)&&El(e,s.latestValues))}t.x<mM&&t.x>pM&&(t.x=1),t.y<mM&&t.y>pM&&(t.y=1)}function Cl(e,t){e.min=e.min+t,e.max=e.max+t}function gM(e,t,n,r,i=.5){const s=Ct(e.min,e.max,i);PS(e,t,n,s,r)}function El(e,t){gM(e.x,t.x,t.scaleX,t.scale,t.originX),gM(e.y,t.y,t.scaleY,t.scale,t.originY)}function PP(e,t){return OP(s$(e.getBoundingClientRect(),t))}function a$(e,t,n){const r=PP(e,n),{scroll:i}=t;return i&&(Cl(r.x,i.offset.x),Cl(r.y,i.offset.y)),r}const yM=()=>({translate:0,scale:1,origin:0,originPoint:0}),kl=()=>({x:yM(),y:yM()}),vM=()=>({min:0,max:0}),Pt=()=>({x:vM(),y:vM()}),IS={current:null},IP={current:!1};function l$(){if(IP.current=!0,!!$C)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>IS.current=e.matches;e.addEventListener("change",t),t()}else IS.current=!1}const c$=new WeakMap;function u$(e,t,n){for(const r in t){const i=t[r],s=n[r];if(kn(i))e.addValue(r,i);else if(kn(s))e.addValue(r,jl(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,jl(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const bM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class d${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Hn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,gt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Xp(n),this.isVariantNode=SP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];u[g]!==void 0&&kn(y)&&y.set(u[g])}}mount(t){this.current=t,c$.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),IP.current||l$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:IS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ro(this.notifyUpdate),ro(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Wl.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ll){const n=Ll[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<bM.length;r++){const i=bM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=u$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=jl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(M5(r)||D5(r))?r=parseFloat(r):!b7(r)&&io.test(n)&&(r=fP(t,n)),this.setBaseTarget(t,kn(r)?r.get():r)),kn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=bE(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!kn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new XC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){dE.render(this.render)}}class BP extends d${constructor(){super(...arguments),this.KeyframeResolver=a7}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;kn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function zP(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function f$(e){return window.getComputedStyle(e)}class h$ extends BP{constructor(){super(...arguments),this.type="html",this.renderInstance=zP}readValueFromInstance(t,n){if(Wl.has(n))return this.projection?.isProjecting?AS(n):NU(t,n);{const r=f$(t),i=(JC(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return PP(t,n)}build(t,n,r){gE(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return xE(t,n,r)}}const qP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function p$(e,t,n,r){zP(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(qP.has(i)?i:wE(i),t.attrs[i])}class m$ extends BP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Wl.has(n)){const r=dP(n);return r&&r.default||0}return n=qP.has(n)?n:wE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return MP(t,n,r)}build(t,n,r){kP(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){p$(t,n,r,i)}mount(t){this.isSVGTag=TP(t.tagName),super.mount(t)}}const g$=(e,t)=>vE(e)?new m$(t):new h$(t,{allowProjection:e!==O.Fragment});function Ml(e,t,n){const r=e.getProps();return bE(r,t,n!==void 0?n:r.custom,e)}const BS=e=>Array.isArray(e);function y$(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,jl(n))}function v$(e){return BS(e)?e[e.length-1]||0:e}function b$(e,t){const n=Ml(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=v$(s[o]);y$(e,o,l)}}function x$(e){return!!(kn(e)&&e.add)}function zS(e,t){const n=e.getValue("willChange");if(x$(n))return n.add(t);if(!n&&Qi.WillChange){const r=new Qi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function VP(e){return e.props[_P]}const w$=e=>e!==null;function S$(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(w$),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const C$={type:"spring",stiffness:500,damping:25,restSpeed:10},E$=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),k$={type:"keyframes",duration:.8},N$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T$=(e,{keyframes:t})=>t.length>2?k$:Wl.has(e)?e.startsWith("scale")?E$(t[1]):C$:N$;function A$({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const SE=(e,t,n,r={},i,s)=>o=>{const l=cE(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-pi(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};A$(l)||Object.assign(h,T$(e,h)),h.duration&&(h.duration=pi(h.duration)),h.repeatDelay&&(h.repeatDelay=pi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(OS(h),h.delay===0&&(p=!0)),(Qi.instantAnimations||Qi.skipAnimations)&&(p=!0,OS(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=S$(h.keyframes,l);if(g!==void 0){gt.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new aE(h):new WU(h)};function M$({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function HP(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),g=l[h];if(g===void 0||d&&M$(d,h))continue;const y={delay:n,...cE(s||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===x&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=VP(e);if(E){const N=window.MotionHandoffAnimation(E,h,gt);N!==null&&(y.startTime=N,S=!0)}}zS(e,h),p.start(SE(h,p,g,e.shouldReduceMotion&&lP.has(h)?{type:!1}:y,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{gt.update(()=>{o&&b$(e,o)})}),u}function FP(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function qS(e,t,n={}){const r=Ml(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(HP(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return _$(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function _$(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(qS(u,t,{...o,delay:n+(typeof r=="function"?0:r)+FP(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function D$(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>qS(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=qS(e,t,n);else{const i=typeof t=="function"?Ml(e,t,n.custom):t;r=Promise.all(HP(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function UP(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const R$=mE.length;function $P(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?$P(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<R$;n++){const r=mE[n],i=e.props[r];(qu(i)||i===!1)&&(t[r]=i)}return t}const O$=[...pE].reverse(),j$=pE.length;function L$(e){return t=>Promise.all(t.map(({animation:n,options:r})=>D$(e,n,r)))}function P$(e){let t=L$(e),n=xM(),r=!0;const i=u=>(d,h)=>{const p=Ml(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...x}=p;d={...d,...x,...y}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=$P(e.parent)||{},p=[],g=new Set;let y={},x=1/0;for(let w=0;w<j$;w++){const E=O$[w],N=n[E],k=d[E]!==void 0?d[E]:h[E],T=qu(k),A=E===u?N.isActive:null;A===!1&&(x=w);let M=k===h[E]&&k!==d[E]&&T;if(M&&r&&e.manuallyAnimateOnMount&&(M=!1),N.protectedKeys={...y},!N.isActive&&A===null||!k&&!N.prevProp||Wp(k)||typeof k=="boolean")continue;const D=I$(N.prevProp,k);let R=D||E===u&&N.isActive&&!M&&T||w>x&&T,P=!1;const $=Array.isArray(k)?k:[k];let V=$.reduce(i(E),{});A===!1&&(V={});const{prevResolvedValues:z={}}=N,Y={...z,...V},B=q=>{R=!0,g.has(q)&&(P=!0,g.delete(q)),N.needsAnimating[q]=!0;const W=e.getValue(q);W&&(W.liveStyle=!1)};for(const q in Y){const W=V[q],ee=z[q];if(y.hasOwnProperty(q))continue;let I=!1;BS(W)&&BS(ee)?I=!UP(W,ee):I=W!==ee,I?W!=null?B(q):g.add(q):W!==void 0&&g.has(q)?B(q):N.protectedKeys[q]=!0}N.prevProp=k,N.prevResolvedValues=V,N.isActive&&(y={...y,...V}),r&&e.blockInitialAnimation&&(R=!1);const F=M&&D;R&&(!F||P)&&p.push(...$.map(q=>{const W={type:E};if(typeof q=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:ee}=e,I=Ml(ee,q);if(ee.enteringChildren&&I){const{delayChildren:G}=I.transition||{};W.delay=FP(ee.enteringChildren,e,G)}}return{animation:q,options:W}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const E=Ml(e,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(w.transition=E.transition)}g.forEach(E=>{const N=e.getBaseTarget(E),k=e.getValue(E);k&&(k.liveStyle=!0),w[E]=N??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=xM(),r=!0}}}function I$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!UP(t,e):!1}function Bo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function xM(){return{animate:Bo(!0),whileInView:Bo(),whileHover:Bo(),whileTap:Bo(),whileDrag:Bo(),whileFocus:Bo(),exit:Bo()}}class ao{constructor(t){this.isMounted=!1,this.node=t}update(){}}class B$ extends ao{constructor(t){super(t),t.animationState||(t.animationState=P$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Wp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let z$=0;class q$ extends ao{constructor(){super(...arguments),this.id=z$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const V$={animation:{Feature:B$},exit:{Feature:q$}};function Hu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function bd(e){return{point:{x:e.pageX,y:e.pageY}}}const H$=e=>t=>fE(t)&&e(t,bd(t));function bu(e,t,n,r){return Hu(e,t,H$(n),r)}const GP=1e-4,F$=1-GP,U$=1+GP,KP=.01,$$=0-KP,G$=0+KP;function Mn(e){return e.max-e.min}function K$(e,t,n){return Math.abs(e-t)<=n}function wM(e,t,n,r=.5){e.origin=r,e.originPoint=Ct(t.min,t.max,e.origin),e.scale=Mn(n)/Mn(t),e.translate=Ct(n.min,n.max,e.origin)-e.originPoint,(e.scale>=F$&&e.scale<=U$||isNaN(e.scale))&&(e.scale=1),(e.translate>=$$&&e.translate<=G$||isNaN(e.translate))&&(e.translate=0)}function xu(e,t,n,r){wM(e.x,t.x,n.x,r?r.originX:void 0),wM(e.y,t.y,n.y,r?r.originY:void 0)}function SM(e,t,n){e.min=n.min+t.min,e.max=e.min+Mn(t)}function Y$(e,t,n){SM(e.x,t.x,n.x),SM(e.y,t.y,n.y)}function CM(e,t,n){e.min=t.min-n.min,e.max=e.min+Mn(t)}function wu(e,t,n){CM(e.x,t.x,n.x),CM(e.y,t.y,n.y)}function wr(e){return[e("x"),e("y")]}const YP=({current:e})=>e?e.ownerDocument.defaultView:null,EM=(e,t)=>Math.abs(e-t);function W$(e,t){const n=EM(e.x,t.x),r=EM(e.y,t.y);return Math.sqrt(n**2+r**2)}class WP{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=c0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=W$(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:S}=g,{timestamp:w}=yn;this.history.push({...S,timestamp:w});const{onStart:E,onMove:N}=this.handlers;y||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=l0(y,this.transformPagePoint),gt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=c0(g.type==="pointercancel"?this.lastMoveEventInfo:l0(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,E),S&&S(g,E)},!fE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=bd(t),u=l0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=yn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,c0(u,this.history)),this.removeListeners=gd(bu(this.contextWindow,"pointermove",this.handlePointerMove),bu(this.contextWindow,"pointerup",this.handlePointerUp),bu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ro(this.updatePoint)}}function l0(e,t){return t?{point:t(e.point)}:e}function kM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function c0({point:e},t){return{point:e,delta:kM(e,XP(t)),offset:kM(e,X$(t)),velocity:Z$(t,.1)}}function X$(e){return e[0]}function XP(e){return e[e.length-1]}function Z$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=XP(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>pi(t)));)n--;if(!r)return{x:0,y:0};const s=kr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Q$(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ct(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ct(n,e,r.max):Math.min(e,n)),e}function NM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function J$(e,{top:t,left:n,bottom:r,right:i}){return{x:NM(e.x,n,i),y:NM(e.y,t,r)}}function TM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function eG(e,t){return{x:TM(e.x,t.x),y:TM(e.y,t.y)}}function tG(e,t){let n=.5;const r=Mn(e),i=Mn(t);return i>r?n=Iu(t.min,t.max-r,e.min):r>i&&(n=Iu(e.min,e.max-i,t.min)),Zi(0,1,n)}function nG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const VS=.35;function rG(e=VS){return e===!1?e=0:e===!0&&(e=VS),{x:AM(e,"left","right"),y:AM(e,"top","bottom")}}function AM(e,t,n){return{min:MM(e,t),max:MM(e,n)}}function MM(e,t){return typeof e=="number"?e:e[t]||0}const iG=new WeakMap;class sG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(bd(p).point)},o=(p,g)=>{const{drag:y,dragPropagation:x,onDragStart:S}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d7(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(E=>{let N=this.getAxisMotionValue(E).get()||0;if(mi.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[E];T&&(N=Mn(T)*(parseFloat(N)/100))}}this.originPoint[E]=N}),S&&gt.postRender(()=>S(p,g)),zS(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=g;if(x&&this.currentDirection===null){this.currentDirection=oG(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>wr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new WP(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:YP(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&gt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Gf(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Q$(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Sl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=J$(r.layoutBox,t):this.constraints=!1,this.elastic=rG(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=nG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Sl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=a$(r,i.root,this.visualElement.getTransformPagePoint());let o=eG(i.layout.layoutBox,s);if(n){const l=n(i$(o));this.hasMutatedConstraints=!!l,l&&(o=OP(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=wr(h=>{if(!Gf(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return zS(this.visualElement,t),r.start(SE(t,r,0,n,this.visualElement,!1))}stopAnimation(){wr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){wr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){wr(n=>{const{drag:r}=this.getProps();if(!Gf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-Ct(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Sl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=tG({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wr(o=>{if(!Gf(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Ct(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;iG.set(this.visualElement,this);const t=this.visualElement.current,n=bu(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Sl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),gt.read(r);const o=Hu(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(wr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=VS,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Gf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function oG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class aG extends ao{constructor(t){super(t),this.removeGroupControls=Tr,this.removeListeners=Tr,this.controls=new sG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const _M=e=>(t,n)=>{e&&gt.postRender(()=>e(t,n))};class lG extends ao{constructor(){super(...arguments),this.removePointerDownListener=Tr}onPointerDown(t){this.session=new WP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_M(t),onStart:_M(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&gt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=bu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const eu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const n=DM(e,t.target.x),r=DM(e,t.target.y);return`${n}% ${r}%`}},cG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=io.parse(e);if(i.length>5)return r;const s=io.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=Ct(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let u0=!1;class uG extends O.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;R7(dG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),u0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),vh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,u0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||gt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),dE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;u0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ZP(e){const[t,n]=bP(),r=O.useContext(FC);return v.jsx(uG,{...e,layoutGroup:r,switchLayoutGroup:O.useContext(DP),isPresent:t,safeToRemove:n})}const dG={borderRadius:{...eu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:eu,borderTopRightRadius:eu,borderBottomLeftRadius:eu,borderBottomRightRadius:eu,boxShadow:cG};function fG(e,t,n){const r=kn(e)?e:jl(e);return r.start(SE("",r,t,n)),r.animation}const hG=(e,t)=>e.depth-t.depth;class pG{constructor(){this.children=[],this.isDirty=!1}add(t){GC(this.children,t),this.isDirty=!0}remove(t){KC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hG),this.isDirty=!1,this.children.forEach(t)}}function mG(e,t){const n=Hn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(ro(r),e(s-t))};return gt.setup(r,!0),()=>ro(r)}const QP=["TopLeft","TopRight","BottomLeft","BottomRight"],gG=QP.length,RM=e=>typeof e=="string"?parseFloat(e):e,OM=e=>typeof e=="number"||Be.test(e);function yG(e,t,n,r,i,s){i?(e.opacity=Ct(0,n.opacity??1,vG(r)),e.opacityExit=Ct(t.opacity??1,0,bG(r))):s&&(e.opacity=Ct(t.opacity??1,n.opacity??1,r));for(let o=0;o<gG;o++){const l=`border${QP[o]}Radius`;let u=jM(t,l),d=jM(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||OM(u)===OM(d)?(e[l]=Math.max(Ct(RM(u),RM(d),r),0),(mi.test(d)||mi.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Ct(t.rotate||0,n.rotate||0,r))}function jM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const vG=JP(0,.5,z5),bG=JP(.5,.95,Tr);function JP(e,t,n){return r=>r<e?0:r>t?1:n(Iu(e,t,r))}function LM(e,t){e.min=t.min,e.max=t.max}function br(e,t){LM(e.x,t.x),LM(e.y,t.y)}function PM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function IM(e,t,n,r,i){return e-=t,e=Ph(e,1/n,r),i!==void 0&&(e=Ph(e,1/i,r)),e}function xG(e,t=0,n=1,r=.5,i,s=e,o=e){if(mi.test(t)&&(t=parseFloat(t),t=Ct(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ct(s.min,s.max,r);e===s&&(l-=t),e.min=IM(e.min,t,n,l,i),e.max=IM(e.max,t,n,l,i)}function BM(e,t,[n,r,i],s,o){xG(e,t[n],t[r],t[i],t.scale,s,o)}const wG=["x","scaleX","originX"],SG=["y","scaleY","originY"];function zM(e,t,n,r){BM(e.x,t,wG,n?n.x:void 0,r?r.x:void 0),BM(e.y,t,SG,n?n.y:void 0,r?r.y:void 0)}function qM(e){return e.translate===0&&e.scale===1}function eI(e){return qM(e.x)&&qM(e.y)}function VM(e,t){return e.min===t.min&&e.max===t.max}function CG(e,t){return VM(e.x,t.x)&&VM(e.y,t.y)}function HM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function tI(e,t){return HM(e.x,t.x)&&HM(e.y,t.y)}function FM(e){return Mn(e.x)/Mn(e.y)}function UM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class EG{constructor(){this.members=[]}add(t){GC(this.members,t),t.scheduleRender()}remove(t){if(KC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kG(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const d0=["","X","Y","Z"],NG=1e3;let TG=0;function f0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function nI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=VP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",gt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&nI(r)}function rI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=TG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_G),this.nodes.forEach(jG),this.nodes.forEach(LG),this.nodes.forEach(DG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new pG)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new XC),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=vP(o)&&!y7(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;gt.read(()=>{p=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=mG(g,250),vh.hasAnimatedSinceResize&&(vh.hasAnimatedSinceResize=!1,this.nodes.forEach(KM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||qG,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),E=!this.targetLayout||!tI(this.targetLayout,y),N=!p&&g;if(this.options.layoutRoot||this.resumeFrom||N||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...cE(x,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,N)}else p||KM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ro(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($M);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(GM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OG),this.nodes.forEach(AG),this.nodes.forEach(MG)):this.nodes.forEach(GM),this.clearAllSnapshots();const l=Hn.now();yn.delta=Zi(0,1e3/60,l-yn.timestamp),yn.timestamp=l,yn.isProcessing=!0,e0.update.process(yn),e0.preRender.process(yn),e0.render.process(yn),yn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(RG),this.sharedNodes.forEach(IG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mn(this.snapshot.measuredBox.x)&&!Mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!eI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Vo(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),VG(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Pt();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HG))){const{scroll:d}=this.root;d&&(Cl(l.x,d.offset.x),Cl(l.y,d.offset.y))}return l}removeElementScroll(o){const l=Pt();if(br(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&br(l,o),Cl(l.x,h.offset.x),Cl(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=Pt();br(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&El(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Vo(h.latestValues)&&El(u,h.latestValues)}return Vo(this.latestValues)&&El(u,this.latestValues),u}removeTransform(o){const l=Pt();br(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Vo(d.latestValues))continue;LS(d.latestValues)&&d.updateSnapshot();const h=Pt(),p=d.measurePageBox();br(h,p),zM(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Vo(this.latestValues)&&zM(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=yn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),wu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Y$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):br(this.target,this.layout.layoutBox),LP(this.target,this.targetDelta)):br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),wu(this.relativeTargetOrigin,this.target,g.target),br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||LS(this.parent.latestValues)||jP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===yn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;br(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;o$(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Pt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(PM(this.prevProjectionDelta.x,this.projectionDelta.x),PM(this.prevProjectionDelta.y,this.projectionDelta.y)),xu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!UM(this.projectionDelta.x,this.prevProjectionDelta.x)||!UM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kl(),this.projectionDelta=kl(),this.projectionDeltaWithTransform=kl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=kl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Pt(),y=u?u.source:void 0,x=this.layout?this.layout.source:void 0,S=y!==x,w=this.getStack(),E=!w||w.members.length<=1,N=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(zG));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const A=T/1e3;YM(p.x,o.x,A),YM(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BG(this.relativeTarget,this.relativeTargetOrigin,g,A),k&&CG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Pt()),br(k,this.relativeTarget)),S&&(this.animationValues=h,yG(h,d,this.latestValues,A,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ro(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gt.update(()=>{vh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=jl(0)),this.currentAnimation=fG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&iI(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Pt();const p=Mn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=Mn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}br(l,u),El(l,h),xu(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new EG),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&f0("z",o,d,this.animationValues);for(let h=0;h<d0.length;h++)f0(`rotate${d0[h]}`,o,d,this.animationValues),f0(`skew${d0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=yh(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=yh(l?.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=kG(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:g,y}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Vu){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:E}=Vu[x],N=p==="none"?h[x]:S(h[x],d);if(w){const k=w.length;for(let T=0;T<k;T++)o[w[T]]=N}else E?this.options.visualElement.renderState.vars[x]=N:o[x]=N}this.options.layoutId&&(o.pointerEvents=d===this?yh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach($M),this.root.sharedNodes.clear()}}}function AG(e){e.updateLayout()}function MG(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?wr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Mn(p);p.min=n[h].min,p.max=p.min+g}):iI(i,t.layoutBox,n)&&wr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Mn(n[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=kl();xu(o,n,t.layoutBox);const l=kl();s?xu(l,e.applyTransform(r,!0),t.measuredBox):xu(l,n,t.layoutBox);const u=!eI(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=Pt();wu(y,t.layoutBox,p.layoutBox);const x=Pt();wu(x,n,g.layoutBox),tI(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function _G(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function DG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function RG(e){e.clearSnapshot()}function $M(e){e.clearMeasurements()}function GM(e){e.isLayoutDirty=!1}function OG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function KM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function jG(e){e.resolveTargetDelta()}function LG(e){e.calcProjection()}function PG(e){e.resetSkewAndRotation()}function IG(e){e.removeLeadSnapshot()}function YM(e,t,n){e.translate=Ct(t.translate,0,n),e.scale=Ct(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function WM(e,t,n,r){e.min=Ct(t.min,n.min,r),e.max=Ct(t.max,n.max,r)}function BG(e,t,n,r){WM(e.x,t.x,n.x,r),WM(e.y,t.y,n.y,r)}function zG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qG={duration:.45,ease:[.4,0,.1,1]},XM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ZM=XM("applewebkit/")&&!XM("chrome/")?Math.round:Tr;function QM(e){e.min=ZM(e.min),e.max=ZM(e.max)}function VG(e){QM(e.x),QM(e.y)}function iI(e,t,n){return e==="position"||e==="preserve-aspect"&&!K$(FM(t),FM(n),.2)}function HG(e){return e!==e.root&&e.scroll?.wasRoot}const FG=rI({attachResizeListener:(e,t)=>Hu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),h0={current:void 0},sI=rI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!h0.current){const e=new FG({});e.mount(window),e.setOptions({layoutScroll:!0}),h0.current=e}return h0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),UG={pan:{Feature:lG},drag:{Feature:aG,ProjectionNode:sI,MeasureLayout:ZP}};function JM(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&gt.postRender(()=>s(t,bd(t)))}class $G extends ao{mount(){const{current:t}=this.node;t&&(this.unmount=f7(t,(n,r)=>(JM(this.node,r,"Start"),i=>JM(this.node,i,"End"))))}unmount(){}}class GG extends ao{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gd(Hu(this.node.current,"focus",()=>this.onFocus()),Hu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function e_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&gt.postRender(()=>s(t,bd(t)))}class KG extends ao{mount(){const{current:t}=this.node;t&&(this.unmount=g7(t,(n,r)=>(e_(this.node,r,"Start"),(i,{success:s})=>e_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const HS=new WeakMap,p0=new WeakMap,YG=e=>{const t=HS.get(e.target);t&&t(e)},WG=e=>{e.forEach(YG)};function XG({root:e,...t}){const n=e||document;p0.has(n)||p0.set(n,{});const r=p0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(WG,{root:e,...t})),r[i]}function ZG(e,t,n){const r=XG(t);return HS.set(e,n),r.observe(e),()=>{HS.delete(e),r.unobserve(e)}}const QG={some:0,all:1};class JG extends ao{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:QG[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return ZG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(eK(t,n))&&this.startObserver()}unmount(){}}function eK({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const tK={inView:{Feature:JG},tap:{Feature:KG},focus:{Feature:GG},hover:{Feature:$G}},nK={layout:{ProjectionNode:sI,MeasureLayout:ZP}},rK={...V$,...tK,...UG,...nK},ln=r$(rK,g$);function iK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function CE(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function oI(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function sK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function oK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H9V4h9v12zM3 15v-2h2v2H3zm0-5.5h2v2H3v-2zM10 20h2v2h-2v-2zm-7-1.5v-2h2v2H3zM5 22c-1.1 0-2-.9-2-2h2v2zm3.5 0h-2v-2h2v2zm5 0v-2h2c0 1.1-.9 2-2 2zM5 6v2H3c0-1.1.9-2 2-2z"},child:[]}]})(e)}function aK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)}function lK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(e)}function cK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)}function uK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function dK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function fK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function hK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function pK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function mK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function gK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function yK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function vK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function bK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function xK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function wK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"},child:[]}]})(e)}function SK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)}function aI(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function CK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function lI(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function EK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function kK(e){return Je({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}const Zp=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=O.useState("login"),[l,u]=O.useState(""),[d,h]=O.useState(""),[p,g]=O.useState(""),[y,x]=O.useState(""),[S,w]=O.useState(!1),[E,N]=O.useState(!1);O.useEffect(()=>{const M=()=>{const P=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");N(P)};M();const D=window.matchMedia("(prefers-color-scheme: dark)"),R=new MutationObserver(M);return D.addEventListener("change",M),R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{D.removeEventListener("change",M),R.disconnect()}},[]);const k=O.useCallback(async M=>{if(i){w(!0),x("");try{await i(M.credential),t()}catch(D){x(D instanceof Error?D.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);O.useEffect(()=>{if(!e||!i)return;const M=document.createElement("script");return M.src="https://accounts.google.com/gsi/client",M.async=!0,M.defer=!0,document.body.appendChild(M),M.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:k}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:E?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(M)&&document.body.removeChild(M)}},[e,s,i,k,E]);const T=async M=>{M.preventDefault(),x(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),g("")}catch(D){x(D instanceof Error?D.message:"Authentication failed")}finally{w(!1)}},A=()=>{o(M=>M==="login"?"signup":"login"),x("")};return e?v.jsx(Kp,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(ln.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:M=>M.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx(aI,{className:"h-5 w-5"})})]}),v.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),y&&v.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:y}),i&&v.jsxs(v.Fragment,{children:[v.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-theme/20"})}),v.jsx("div",{className:"relative flex justify-center text-sm",children:v.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),v.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s==="signup"&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),v.jsx("input",{id:"name",type:"text",value:p,onChange:M=>g(M.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:l,onChange:M=>u(M.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:d,onChange:M=>h(M.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&v.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),v.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",v.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),v.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:v.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},t_=()=>{xa();const e=hd(),[t,n]=O.useState(!1),[r,i]=O.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=$p(),[p,g]=O.useState(!1),[y,x]=O.useState(!1),[S,w]=O.useState([]),[E,N]=O.useState(!1);O.useEffect(()=>{n(!0)},[]),O.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),O.useEffect(()=>{(async()=>{if(!o){w([]);return}N(!0);try{const P=await rr.getUserDiagrams();w(P)}catch(P){console.error("Failed to load diagrams:",P)}finally{N(!1)}})()},[o]);const k=R=>{e(`/playground/free?diagramId=${R}`)},T=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"55+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],M=[{value:"55+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],D=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return v.jsxs(v.Fragment,{children:[v.jsx(md,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 55+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[v.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),v.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),v.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),v.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),v.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx(pd,{}),v.jsx("div",{className:"relative",children:o?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?v.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("section",{className:"relative pt-16 pb-20",children:v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[v.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),v.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:v.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[v.jsx("div",{className:"inline-block mb-6",children:v.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 55+ Components & AI Assessment"})}),v.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[v.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),v.jsx("br",{}),v.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),v.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design  practice, learn, and create architecture diagrams with ease"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:M.map((R,P)=>v.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${P===0?"fade-in-up-delay-100":P===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[v.jsx("div",{className:"text-3xl mb-1",children:R.icon}),v.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),v.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label))}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),v.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",v.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),v.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required  Free forever  55+ components"})]})})]})}),o&&v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),E?v.jsx("div",{className:"flex items-center justify-center py-20",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?v.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),v.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(R=>v.jsxs("div",{onClick:()=>k(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),R.description&&v.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),v.jsx("div",{className:"text-3xl ml-2",children:""})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),v.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((R,P)=>v.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${P===0?"delay-0":P===1?"delay-100":"delay-200"}`,onClick:()=>e(R.route),onKeyDown:$=>$.key==="Enter"&&e(R.route),role:"button",tabIndex:0,children:[v.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),v.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,v.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,P)=>v.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${P===0?"delay-0":P===1?"delay-[50ms]":P===2?"delay-[100ms]":P===3?"delay-[150ms]":P===4?"delay-[200ms]":"delay-[250ms]"}`,children:[v.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),v.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:D.map((R,P)=>v.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[v.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),v.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold text-theme",children:R.author}),v.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`testimonial-${P}`))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),v.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),v.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),v.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),v.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),v.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&v.jsx(Zp,{isOpen:p,onClose:()=>g(!1),onLogin:async(R,P)=>{await l({email:R,password:P})},onSignup:async(R,P,$)=>{await u({email:R,password:P,name:$})},onGoogleLogin:async R=>{await d(R)}})]})]})};function Ji(e){return Array.isArray?Array.isArray(e):dI(e)==="[object Array]"}function NK(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function TK(e){return e==null?"":NK(e)}function fi(e){return typeof e=="string"}function cI(e){return typeof e=="number"}function AK(e){return e===!0||e===!1||MK(e)&&dI(e)=="[object Boolean]"}function uI(e){return typeof e=="object"}function MK(e){return uI(e)&&e!==null}function nr(e){return e!=null}function m0(e){return!e.trim().length}function dI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const _K="Incorrect 'index' type",DK=e=>`Invalid value for key ${e}`,RK=e=>`Pattern length exceeds max of ${e}.`,OK=e=>`Missing ${e} property in key`,jK=e=>`Property 'weight' in key '${e}' must be a positive integer`,n_=Object.prototype.hasOwnProperty;class LK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=fI(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function fI(e){let t=null,n=null,r=null,i=1,s=null;if(fi(e)||Ji(e))r=e,t=r_(e),n=FS(e);else{if(!n_.call(e,"name"))throw new Error(OK("name"));const o=e.name;if(r=o,n_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(jK(o));t=r_(o),n=FS(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function r_(e){return Ji(e)?e:e.split(".")}function FS(e){return Ji(e)?e.join("."):e}function PK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(nr(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!nr(d))return;if(l===o.length-1&&(fi(d)||cI(d)||AK(d)))n.push(TK(d));else if(Ji(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,fi(t)?t.split("."):t,0),r?n:n[0]}const IK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},BK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},zK={location:0,threshold:.6,distance:100},qK={useExtendedSearch:!1,getFn:PK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ze={...BK,...IK,...zK,...qK};const VK=/[^ ]+/g;function HK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(VK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class EE{constructor({getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){this.norm=HK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,fi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();fi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!nr(t)||m0(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(nr(o)){if(Ji(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(nr(h))if(fi(h)&&!m0(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else Ji(h)&&h.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(fi(o)&&!m0(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function hI(e,t,{getFn:n=ze.getFn,fieldNormWeight:r=ze.fieldNormWeight}={}){const i=new EE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(fI)),i.setSources(t),i.create(),i}function FK(e,{getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new EE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Kf(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=ze.distance,ignoreLocation:s=ze.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function UK(e=[],t=ze.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Fo=32;function $K(e,t,n,{location:r=ze.location,distance:i=ze.distance,threshold:s=ze.threshold,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,includeMatches:u=ze.includeMatches,ignoreLocation:d=ze.ignoreLocation}={}){if(t.length>Fo)throw new Error(RK(Fo));const h=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let y=s,x=g;const S=l>1||u,w=S?Array(p):[];let E;for(;(E=e.indexOf(t,x))>-1;){let D=Kf(t,{currentLocation:E,expectedLocation:g,distance:i,ignoreLocation:d});if(y=Math.min(D,y),x=E+h,S){let R=0;for(;R<h;)w[E+R]=1,R+=1}}x=-1;let N=[],k=1,T=h+p;const A=1<<h-1;for(let D=0;D<h;D+=1){let R=0,P=T;for(;R<P;)Kf(t,{errors:D,currentLocation:g+P,expectedLocation:g,distance:i,ignoreLocation:d})<=y?R=P:T=P,P=Math.floor((T-R)/2+R);T=P;let $=Math.max(1,g-P+1),V=o?p:Math.min(g+P,p)+h,z=Array(V+2);z[V+1]=(1<<D)-1;for(let B=V;B>=$;B-=1){let F=B-1,L=n[e.charAt(F)];if(S&&(w[F]=+!!L),z[B]=(z[B+1]<<1|1)&L,D&&(z[B]|=(N[B+1]|N[B])<<1|1|N[B+1]),z[B]&A&&(k=Kf(t,{errors:D,currentLocation:F,expectedLocation:g,distance:i,ignoreLocation:d}),k<=y)){if(y=k,x=F,x<=g)break;$=Math.max(1,2*g-x)}}if(Kf(t,{errors:D+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>y)break;N=z}const M={isMatch:x>=0,score:Math.max(.001,k)};if(S){const D=UK(w,l);D.length?u&&(M.indices=D):M.isMatch=!1}return M}function GK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Ih=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class pI{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:u=ze.isCaseSensitive,ignoreDiacritics:d=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?Ih(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(y,x)=>{this.chunks.push({pattern:y,alphabet:GK(y),startIndex:x})},g=this.pattern.length;if(g>Fo){let y=0;const x=g%Fo,S=g-x;for(;y<S;)p(this.pattern.substr(y,Fo),y),y+=Fo;if(x){const w=g-Fo;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Ih(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],g=0,y=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:E})=>{const{isMatch:N,score:k,indices:T}=$K(t,S,w,{location:s+E,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});N&&(y=!0),g+=k,N&&T&&(p=[...p,...T])});let x={isMatch:y,score:y?g/this.chunks.length:1};return y&&i&&(x.indices=p),x}}class lo{constructor(t){this.pattern=t}static isMultiMatch(t){return i_(t,this.multiRegex)}static isSingleMatch(t){return i_(t,this.singleRegex)}search(){}}function i_(e,t){const n=e.match(t);return n?n[1]:null}class KK extends lo{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class YK extends lo{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class WK extends lo{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class XK extends lo{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ZK extends lo{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class QK extends lo{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class mI extends lo{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:u=ze.isCaseSensitive,ignoreDiacritics:d=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){super(t),this._bitapSearch=new pI(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class gI extends lo{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const US=[KK,gI,WK,XK,QK,ZK,YK,mI],s_=US.length,JK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,eY="|";function tY(e,t={}){return e.split(eY).map(n=>{let r=n.trim().split(JK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<s_;){const h=US[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<s_;){const h=US[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const nY=new Set([mI.type,gI.type]);class rY{constructor(t,{isCaseSensitive:n=ze.isCaseSensitive,ignoreDiacritics:r=ze.ignoreDiacritics,includeMatches:i=ze.includeMatches,minMatchCharLength:s=ze.minMatchCharLength,ignoreLocation:o=ze.ignoreLocation,findAllMatches:l=ze.findAllMatches,location:u=ze.location,threshold:d=ze.threshold,distance:h=ze.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?Ih(t):t,this.pattern=t,this.query=tY(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Ih(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,y=p.length;g<y;g+=1){const x=p[g],{isMatch:S,indices:w,score:E}=x.search(t);if(S){if(o+=1,u+=E,r){const N=x.constructor.type;nY.has(N)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const $S=[];function iY(...e){$S.push(...e)}function GS(e,t){for(let n=0,r=$S.length;n<r;n+=1){let i=$S[n];if(i.condition(e,t))return new i(e,t)}return new pI(e,t)}const Bh={AND:"$and",OR:"$or"},KS={PATH:"$path",PATTERN:"$val"},YS=e=>!!(e[Bh.AND]||e[Bh.OR]),sY=e=>!!e[KS.PATH],oY=e=>!Ji(e)&&uI(e)&&!YS(e),o_=e=>({[Bh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function yI(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=sY(i);if(!o&&s.length>1&&!YS(i))return r(o_(i));if(oY(i)){const u=o?i[KS.PATH]:s[0],d=o?i[KS.PATTERN]:i[u];if(!fi(d))throw new Error(DK(u));const h={keyId:FS(u),pattern:d};return n&&(h.searcher=GS(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];Ji(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return YS(e)||(e=o_(e)),r(e)}function aY(e,{ignoreFieldNorm:t=ze.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function lY(e,t){const n=e.matches;t.matches=[],nr(n)&&n.forEach(r=>{if(!nr(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function cY(e,t){t.score=e.score}function uY(e,t,{includeMatches:n=ze.includeMatches,includeScore:r=ze.includeScore}={}){const i=[];return n&&i.push(lY),r&&i.push(cY),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class wa{constructor(t,n={},r){this.options={...ze,...n},this.options.useExtendedSearch,this._keyStore=new LK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof EE))throw new Error(_K);this._myIndex=n||hI(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){nr(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=fi(t)?fi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return aY(u,{ignoreFieldNorm:l}),s&&u.sort(o),cI(n)&&n>-1&&(u=u.slice(0,n)),uY(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=GS(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!nr(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=yI(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return y&&y.length?[{idx:d,item:u,matches:y}]:[]}const h=[];for(let p=0,g=l.children.length;p<g;p+=1){const y=l.children[p],x=r(y,u,d);if(x.length)h.push(...x);else if(l.operator===Bh.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(nr(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=GS(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!nr(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!nr(n))return[];let i=[];if(Ji(n))n.forEach(({v:s,i:o,n:l})=>{if(!nr(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}wa.version="7.1.0";wa.createIndex=hI;wa.parseIndex=FK;wa.config=ze;wa.parseQuery=yI;iY(rY);const dY=()=>{xa();const e=hd(),[t,n]=O.useState("All"),[r,i]=O.useState("All"),[s,o]=O.useState(""),[l,u]=O.useState([]),[d,h]=O.useState(!0),[p,g]=O.useState(null),[y,x]=O.useState(!1),[S,w]=O.useState(!1),{user:E,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:M}=$p();O.useEffect(()=>{(async()=>{try{h(!0),g(null);const Y=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!Y.ok)throw new Error(`Failed to fetch problems: ${Y.status} ${Y.statusText}`);const B=await Y.json();u(B)}catch(z){g(z instanceof Error?z.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",z)}finally{h(!1)}})()},[]);const D=O.useMemo(()=>{const V=s?.trim()??"";let z=l;return V.length>0&&(z=new wa(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(V).map(B=>B.item)),z.filter(Y=>{const B=t==="All"||Y.difficulty===t,F=r==="All"||Y.category===r;return B&&F})},[t,r,s,l]),R=["All",...Array.from(new Set(l.map(V=>V.category)))],P=["All","Easy","Medium","Hard","Very Hard"],$=V=>{switch(V){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return v.jsxs(v.Fragment,{children:[v.jsx(md,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${D.length} problems available`}),v.jsx(pd,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?v.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),v.jsx("button",{type:"button",onClick:()=>{M(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),v.jsx("div",{className:"text-muted text-sm mb-6",children:p}),v.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:V=>o(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),v.jsx("select",{id:"difficulty-select",value:t,onChange:V=>n(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:P.map(V=>v.jsx("option",{value:V,children:V},V))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),v.jsx("select",{id:"category-select",value:r,onChange:V=>i(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:R.map(V=>v.jsx("option",{value:V,children:V},V))})]})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:D.map((V,z)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${z===0?"delay-0":z===1?"delay-100":z===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:V.title}),v.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${$(V.difficulty)}`,children:V.difficulty})]}),v.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:V.description}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",V.category]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",V.estimated_time]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[V.tags.slice(0,3).map(Y=>v.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:Y},Y)),V.tags.length>3&&v.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",V.tags.length-3," more"]})]}),v.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),e(`/playground/${V.id}`)},"aria-label":`Start ${V.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem "})]})]},V.id))}),D.length===0&&!d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),v.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&v.jsx(Zp,{isOpen:S,onClose:()=>w(!1),onLogin:async(V,z)=>{await k({email:V,password:z})},onSignup:async(V,z,Y)=>{await T({email:V,password:z,name:Y})},onGoogleLogin:async V=>{await A(V)}})]})};var g0={exports:{}},y0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a_;function fY(){if(a_)return y0;a_=1;var e=fd();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,w=x[1];return s(function(){S.value=y,S.getSnapshot=g,u(S)&&w({inst:S})},[p,y,g]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return y0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,y0}var l_;function vI(){return l_||(l_=1,g0.exports=fY()),g0.exports}var bI=vI();function gn(e){this.content=e}gn.prototype={constructor:gn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new gn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new gn(n)},addToStart:function(e,t){return new gn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new gn(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new gn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=gn.from(e),e.size?new gn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=gn.from(e),e.size?new gn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=gn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};gn.from=function(e){if(e instanceof gn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new gn(t)};function xI(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=xI(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function wI(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=wI(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class me{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new me(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new me(r,i)}cutByIndex(t,n){return t==n?me.empty:t==0&&n==this.content.length?this:new me(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new me(i,s)}addToStart(t){return new me([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new me(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return xI(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return wI(this,t,n,r)}findIndex(t){if(t==0)return Yf(0,t);if(t==this.size)return Yf(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Yf(n+1,s):Yf(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return me.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new me(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return me.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new me(n||t,r)}static from(t){if(!t)return me.empty;if(t instanceof me)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new me([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}me.empty=new me([],0);const v0={index:0,offset:0};function Yf(e,t){return v0.index=e,v0.offset=t,v0}function zh(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!zh(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!zh(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let ut=class WS{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&zh(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return WS.none;if(t instanceof WS)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ut.none=[];class qh extends Error{}class xe{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=CI(this.content,t+this.openStart,n);return r&&new xe(r,this.openStart,this.openEnd)}removeBetween(t,n){return new xe(SI(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return xe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(me.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new xe(t,r,i)}}xe.empty=new xe(me.empty,0,0);function SI(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(SI(s.content,t-i-1,n-i-1)))}function CI(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=CI(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function hY(e,t,n){if(n.openStart>e.depth)throw new qh("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new qh("Inconsistent open depths");return EI(e,t,n,0)}function EI(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=EI(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return na(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=pY(n,e);return na(s,NI(e,o,l,t,r))}else return na(s,Vh(e,t,r))}function kI(e,t){if(!t.type.compatibleContent(e.type))throw new qh("Cannot join "+t.type.name+" onto "+e.type.name)}function XS(e,t,n){let r=e.node(n);return kI(r,t.node(n)),r}function ta(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Su(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(ta(e.nodeAfter,r),s++));for(let l=s;l<o;l++)ta(i.child(l),r);t&&t.depth==n&&t.textOffset&&ta(t.nodeBefore,r)}function na(e,t){return e.type.checkContent(t),e.copy(t)}function NI(e,t,n,r,i){let s=e.depth>i&&XS(e,t,i+1),o=r.depth>i&&XS(n,r,i+1),l=[];return Su(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(kI(s,o),ta(na(s,NI(e,t,n,r,i+1)),l)):(s&&ta(na(s,Vh(e,t,i+1)),l),Su(t,n,i,l),o&&ta(na(o,Vh(n,r,i+1)),l)),Su(r,null,i,l),new me(l)}function Vh(e,t,n){let r=[];if(Su(null,e,n,r),e.depth>n){let i=XS(e,t,n+1);ta(na(i,Vh(e,t,n+1)),r)}return Su(t,null,n,r),new me(r)}function pY(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(me.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Fu{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return ut.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Hh(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new Fu(n,r,s)}static resolveCached(t,n){let r=c_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else c_.set(t,r=new mY);let i=r.elts[r.i]=Fu.resolve(t,n);return r.i=(r.i+1)%gY,i}}class mY{constructor(){this.elts=[],this.i=0}}const gY=12,c_=new WeakMap;class Hh{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const yY=Object.create(null);let Zs=class ZS{constructor(t,n,r,i=ut.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&zh(this.attrs,n||t.defaultAttrs||yY)&&ut.sameSet(this.marks,r||ut.none)}copy(t=null){return t==this.content?this:new ZS(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new ZS(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return xe.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new xe(d,i.depth-o,s.depth-o)}replace(t,n,r){return hY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Fu.resolveCached(this,t)}resolveNoCache(t){return Fu.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),TI(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=me.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ut.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!ut.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=me.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Zs.prototype.text=void 0;class Fh extends Zs{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):TI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Fh(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Fh(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function TI(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class la{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new vY(t,n);if(r.next==null)return la.empty;let i=AI(r);r.next&&r.err("Unexpected trailing text");let s=kY(EY(i));return NY(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return me.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}la.empty=new la(!0);class vY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function AI(e){let t=[];do t.push(bY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function bY(e){let t=[];do t.push(xY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function xY(e){let t=CY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=wY(e,t);else break;return t}function u_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function wY(e,t){let n=u_(e),r=n;return e.eat(",")&&(e.next!="}"?r=u_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function SY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function CY(e){if(e.eat("(")){let t=AI(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=SY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function EY(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function MI(e,t){return t-e}function d_(e,t){let n=[];return r(t),n.sort(MI);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function kY(e){let t=Object.create(null);return n(d_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);d_(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new la(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(MI);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function NY(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function _I(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function DI(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function RI(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function OI(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new AY(e,r,t[r]);return n}let f_=class jI{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=OI(t,r.attrs),this.defaultAttrs=_I(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==la.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:DI(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Zs(this,this.computeAttrs(t),me.from(n),ut.setFrom(r))}createChecked(t=null,n,r){return n=me.from(n),this.checkContent(n),new Zs(this,this.computeAttrs(t),n,ut.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=me.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(me.empty,!0);return s?new Zs(this,t,n.append(s),ut.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){RI(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:ut.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new jI(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function TY(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class AY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?TY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Qp{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=OI(t,i.attrs),this.excluded=null;let s=_I(this.attrs);this.instance=s?new ut(this,s):null}create(t=null){return!t&&this.instance?this.instance:new ut(this,DI(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Qp(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){RI(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class LI{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=gn.from(t.nodes),n.marks=gn.from(t.marks||{}),this.nodes=f_.compile(this.spec.nodes,this),this.marks=Qp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=la.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?h_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:h_(this,o.split(" "))}this.nodeFromJSON=i=>Zs.fromJSON(this,i),this.markFromJSON=i=>ut.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof f_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Fh(r,r.defaultAttrs,t,ut.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function h_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function MY(e){return e.tag!=null}function _Y(e){return e.style!=null}let Cu=class QS{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(MY(i))this.tags.push(i);else if(_Y(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new m_(this,n,!1);return r.addAll(t,ut.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new m_(this,n,!0);return r.addAll(t,ut.none,n.from,n.to),xe.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(OY(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=g_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=g_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new QS(t,QS.schemaRules(t)))}};const PI={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},DY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},II={ol:!0,ul:!0},Uu=1,JS=2,Eu=4;function p_(e,t,n){return t!=null?(t?Uu:0)|(t==="full"?JS:0):e&&e.whitespace=="pre"?Uu|JS:n&~Eu}class Wf{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ut.none,this.match=s||(o&Eu?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(me.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Uu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=me.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(me.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!PI.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class m_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=p_(null,n.preserveWhitespace,0)|(r?Eu:0);i?s=new Wf(i.type,i.attrs,ut.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Wf(null,null,ut.none,!0,null,o):s=new Wf(t.schema.topNodeType,null,ut.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&JS?"full":this.localPreserveWS||(i.options&Uu)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;II.hasOwnProperty(o)&&this.parser.normalizeLists&&RY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:DY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(PI.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=ut.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):y_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=p_(t,s,o.options);o.options&Eu&&o.content.length==0&&(l|=Eu);let u=ut.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):y_(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Wf(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Uu)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function RY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&II.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function OY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function g_(e){let t={};for(let n in e)t[n]=e[n];return t}function y_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Sa{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=b0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=bh(b0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&bh(b0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return bh(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Sa(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=v_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return v_(t.marks)}}function v_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function b0(e){return e.document||window.document}const b_=new WeakMap;function jY(e){let t=b_.get(e);return t===void 0&&b_.set(e,t=LY(e)),t}function LY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function bh(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=jY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:x}=bh(e,g,n,r);if(u.appendChild(y),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const BI=65535,zI=Math.pow(2,16);function PY(e,t){return e+t*zI}function x_(e){return e&BI}function IY(e){return(e-(e&BI))/zI}const qI=1,VI=2,xh=4,HI=8;class eC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&HI)>0}get deletedBefore(){return(this.delInfo&(qI|xh))>0}get deletedAfter(){return(this.delInfo&(VI|xh))>0}get deletedAcross(){return(this.delInfo&xh)>0}}class ir{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&ir.empty)return ir.empty}recover(t){let n=0,r=x_(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+IY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let g=d?t==u?-1:t==p?1:n:n,y=u+i+(g<0?0:h);if(r)return y;let x=t==(n<0?u:p)?null:PY(l/3,t-u),S=t==u?VI:t==p?qI:xh;return(n<0?t!=u:t!=p)&&(S|=HI),new eC(y,S,x)}i+=h-d}return r?t+i:new eC(t+i,0,null)}touches(t,n){let r=0,i=x_(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new ir(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?ir.empty:new ir(t<0?[0,-t,0]:[0,0,t])}}ir.empty=new ir([]);class $u{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new $u(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new $u;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new eC(t,i,null)}}const x0=Object.create(null);class Tn{getMap(){return ir.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=x0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in x0)throw new RangeError("Duplicate use of step JSON ID "+t);return x0[t]=n,n.prototype.jsonID=t,n}}class $t{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new $t(t,null)}static fail(t){return new $t(null,t)}static fromReplace(t,n,r,i){try{return $t.ok(t.replace(n,r,i))}catch(s){if(s instanceof qh)return $t.fail(s.message);throw s}}}function kE(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(kE(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return me.fromArray(r)}class Ys extends Tn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new xe(kE(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return $t.fromReplace(t,this.from,this.to,s)}invert(){return new Gr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ys(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ys&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ys(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ys(n.from,n.to,t.markFromJSON(n.mark))}}Tn.jsonID("addMark",Ys);class Gr extends Tn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new xe(kE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return $t.fromReplace(t,this.from,this.to,r)}invert(){return new Ys(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Gr(n.pos,r.pos,this.mark)}merge(t){return t instanceof Gr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Gr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Gr(n.from,n.to,t.markFromJSON(n.mark))}}Tn.jsonID("removeMark",Gr);class Ws extends Tn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return $t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return $t.fromReplace(t,this.pos,this.pos+1,new xe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ws(this.pos,n.marks[i]);return new Ws(this.pos,this.mark)}}return new ca(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ws(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ws(n.pos,t.markFromJSON(n.mark))}}Tn.jsonID("addNodeMark",Ws);class ca extends Tn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return $t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return $t.fromReplace(t,this.pos,this.pos+1,new xe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ws(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ca(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ca(n.pos,t.markFromJSON(n.mark))}}Tn.jsonID("removeNodeMark",ca);class an extends Tn{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&tC(t,this.from,this.to)?$t.fail("Structure replace would overwrite content"):$t.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ir([this.from,this.to-this.from,this.slice.size])}invert(t){return new an(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new an(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof an)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?xe.empty:new xe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new an(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?xe.empty:new xe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new an(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new an(n.from,n.to,xe.fromJSON(t,n.slice),!!n.structure)}}Tn.jsonID("replace",an);class cn extends Tn{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(tC(t,this.from,this.gapFrom)||tC(t,this.gapTo,this.to)))return $t.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return $t.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?$t.fromReplace(t,this.from,this.to,r):$t.fail("Content does not fit in gap")}getMap(){return new ir([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new cn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new cn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new cn(n.from,n.to,n.gapFrom,n.gapTo,xe.fromJSON(t,n.slice),n.insert,!!n.structure)}}Tn.jsonID("replaceAround",cn);function tC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function BY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,t),y=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(x)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=y:i.push(o=new Gr(g,y,p[S])));l&&l.to==g?l.to=y:s.push(l=new Ys(g,y,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function zY(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Qp){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],g;for(let y=0;y<i.length;y++){let x=i[y];x.step==s-1&&p.eq(i[y].style)&&(g=x)}g?(g.to=d,g.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Gr(o.from,o.to,o.style)))}function NE(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new an(l,h,xe.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||e.step(new Gr(l,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,y=/\r?\n|\r/g,x;for(;g=y.exec(d.text);)x||(x=new xe(me.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new an(l+g.index,l+g.index+g[0].length,x))}}l=h}if(!r.validEnd){let u=r.fillBefore(me.empty,!0);e.replace(l,l,new xe(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function qY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Xl(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!qY(i,s,o))break}return null}function VY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=me.empty,p=0;for(let x=s,S=!1;x>n;x--)S||r.index(x)>0?(S=!0,h=me.from(r.node(x).copy(h)),p++):u--;let g=me.empty,y=0;for(let x=s,S=!1;x>n;x--)S||i.after(x+1)<i.end(x)?(S=!0,g=me.from(i.node(x).copy(g)),y++):d++;e.step(new cn(u,d,o,l,new xe(h.append(g),p,y),h.size-p,!0))}function TE(e,t,n=null,r=e){let i=HY(e,t),s=i&&FY(r,t);return s?i.map(w_).concat({type:t,attrs:n}).concat(s.map(w_)):null}function w_(e){return{type:e,attrs:null}}function HY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function FY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function UY(e,t,n){let r=me.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=me.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new cn(i,s,i,s,new xe(r,0,0),n.length,!0))}function $Y(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&GY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!x?d=!1:!y&&x&&(d=!0)}d===!1&&UI(e,o,l,s),NE(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return e.step(new cn(p,g,p+1,g-1,new xe(me.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&FI(e,o,l,s),!1}})}function FI(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function UI(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function GY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function KY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new cn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new xe(me.from(o),0,0),1,!0))}function Wi(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),g=i.index(d);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(g,p.childCount),x=r&&r[h+1];x&&(y=y.replaceChild(0,x.type.create(x.attrs)));let S=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(y))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function YY(e,t,n=1,r){let i=e.doc.resolve(t),s=me.empty,o=me.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=me.from(i.node(l).copy(s));let h=r&&r[d];o=me.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new an(t,t,new xe(s.append(o),n,n),!0))}function co(e,t){let n=e.resolve(t),r=n.index();return $I(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function WY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function $I(e,t){return!!(e&&t&&!e.isLeaf&&WY(e,t))}function Jp(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&$I(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function XY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);UI(e,h.node(),h.before(),l)}o.inlineContent&&NE(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new an(d,u.map(t+n,-1),xe.empty,!0)),r===!0){let h=e.doc.resolve(d);FI(e,h.node(),h.before(),e.steps.length)}return e}function ZY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function GI(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function em(e,t,n=t,r=xe.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return KI(i,s,r)?new an(t,n,r):new QY(i,s,r).fit()}function KI(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class QY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=me.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=me.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new xe(s,o,l);return t>-1?new cn(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new an(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=w0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(me.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=w0(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new xe(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=w0(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new xe(lu(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new xe(lu(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let y=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(YI(S.mark(g.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?y:-1)))}let x=d==l.childCount;x||(y=-1),this.placed=cu(this.placed,n,me.from(h)),this.frontier[n].match=p,x&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<y;S++){let E=w.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),w=E.content}this.unplaced=x?t==0?xe.empty:new xe(lu(o.content,t-1,1),t-1,y<0?o.openEnd:t-1):new xe(lu(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!S0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=S0(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=S0(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=cu(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=cu(this.placed,this.depth,me.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(me.empty,!0);n.childCount&&(this.placed=cu(this.placed,this.frontier.length,n))}}function lu(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(lu(e.firstChild.content,t-1,n)))}function cu(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(cu(e.lastChild.content,t-1,n)))}function w0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function YI(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,YI(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(me.empty,!0)))),e.copy(r)}function S0(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!JY(n,s.content,o)?l:null}function JY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function eW(e){return e.spec.defining||e.spec.definingForContent}function tW(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(KI(i,s,r))return e.step(new an(t,n,r));let o=XI(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let x=i.node(g).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==y&&o.splice(1,0,-g)}let u=o.indexOf(l),d=[],h=r.openStart;for(let g=r.content,y=0;;y++){let x=g.firstChild;if(d.push(x),y==r.openStart)break;g=x.content}for(let g=h-1;g>=0;g--){let y=d[g],x=eW(y.type);if(x&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(x||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),x=d[y];if(x)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],E=!0;w<0&&(E=!1,w=-w);let N=i.node(w-1),k=i.index(w-1);if(N.canReplaceWith(k,k,x.type,x.marks))return e.replace(i.before(w),E?s.after(w):n,new xe(WI(r.content,0,r.openStart,y),y,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let y=o[g];y<0||(t=i.before(y),n=s.after(y))}}function WI(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(WI(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(me.empty,!0))}return e}function nW(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=ZY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new xe(me.from(r),0,0))}function rW(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=XI(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function XI(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class _l extends Tn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return $t.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return $t.fromReplace(t,this.pos,this.pos+1,new xe(me.from(i),0,n.isLeaf?0:1))}getMap(){return ir.empty}invert(t){return new _l(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new _l(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new _l(n.pos,n.attr,n.value)}}Tn.jsonID("attr",_l);class Gu extends Tn{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return $t.ok(r)}getMap(){return ir.empty}invert(t){return new Gu(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gu(n.attr,n.value)}}Tn.jsonID("docAttr",Gu);let Pl=class extends Error{};Pl=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Pl.prototype=Object.create(Error.prototype);Pl.prototype.constructor=Pl;Pl.prototype.name="TransformError";let ZI=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new $u}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Pl(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=xe.empty){let i=em(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new xe(me.from(r),0,0))}delete(t,n){return this.replace(t,n,xe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return tW(this,t,n,r),this}replaceRangeWith(t,n,r){return nW(this,t,n,r),this}deleteRange(t,n){return rW(this,t,n),this}lift(t,n){return VY(this,t,n),this}join(t,n=1){return XY(this,t,n),this}wrap(t,n){return UY(this,t,n),this}setBlockType(t,n=t,r,i=null){return $Y(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return KY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new _l(t,n,r)),this}setDocAttribute(t,n){return this.step(new Gu(t,n)),this}addNodeMark(t,n){return this.step(new Ws(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof ut)n.isInSet(r.marks)&&this.step(new ca(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ca(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return YY(this,t,n,r),this}addMark(t,n,r){return BY(this,t,n,r),this}removeMark(t,n,r){return zY(this,t,n,r),this}clearIncompatible(t,n,r){return NE(this,t,n,r),this}};const C0=Object.create(null);let Ue=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new iW(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=xe.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?xe.empty:n),l==0&&E_(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),E_(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new qe(t):yl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?yl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):yl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new or(t.node(0))}static atStart(t){return yl(t,t,0,0,1)||new or(t)}static atEnd(t){return yl(t,t,t.content.size,t.childCount,-1)||new or(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=C0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in C0)throw new RangeError("Duplicate use of selection JSON ID "+t);return C0[t]=n,n.prototype.jsonID=t,n}getBookmark(){return qe.between(this.$anchor,this.$head).getBookmark()}};Ue.prototype.visible=!0;class iW{constructor(t,n){this.$from=t,this.$to=n}}let S_=!1;function C_(e){!S_&&!e.parent.inlineContent&&(S_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class qe extends Ue{constructor(t,n=t){C_(t),C_(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ue.near(r);let i=t.resolve(n.map(this.anchor));return new qe(i.parent.inlineContent?i:r,r)}replace(t,n=xe.empty){if(super.replace(t,n),n==xe.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof qe&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new tm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qe(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ue.findFrom(n,r,!0)||Ue.findFrom(n,-r,!0);if(s)n=s.$head;else return Ue.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ue.findFrom(t,-r,!0)||Ue.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new qe(t,n)}}Ue.jsonID("text",qe);class tm{constructor(t,n){this.anchor=t,this.head=n}map(t){return new tm(t.map(this.anchor),t.map(this.head))}resolve(t){return qe.between(t.resolve(this.anchor),t.resolve(this.head))}}class De extends Ue{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ue.near(s):new De(s)}content(){return new xe(me.from(this.node),0,0)}eq(t){return t instanceof De&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new AE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new De(t.resolve(n.anchor))}static create(t,n){return new De(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}De.prototype.visible=!1;Ue.jsonID("node",De);class AE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new tm(r,r):new AE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&De.isSelectable(r)?new De(n):Ue.near(n)}}class or extends Ue{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=xe.empty){if(n==xe.empty){t.delete(0,t.doc.content.size);let r=Ue.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new or(t)}map(t){return new or(t)}eq(t){return t instanceof or}getBookmark(){return sW}}Ue.jsonID("all",or);const sW={map(){return this},resolve(e){return new or(e)}};function yl(e,t,n,r,i,s=!1){if(t.inlineContent)return qe.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&De.isSelectable(l))return De.create(e,n-(i<0?l.nodeSize:0))}else{let u=yl(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function E_(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof an||i instanceof cn))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}const k_=1,Xf=2,N_=4;class oW extends ZI{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|k_)&~Xf,this.storedMarks=null,this}get selectionSet(){return(this.updated&k_)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Xf,this}ensureMarks(t){return ut.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Xf)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Xf,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ut.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=N_,this}get scrolledIntoView(){return(this.updated&N_)>0}}function T_(e,t){return!t||!e?e:e.bind(t)}class uu{constructor(t,n,r){this.name=t,this.init=T_(n.init,r),this.apply=T_(n.apply,r)}}const aW=[new uu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new uu("selection",{init(e,t){return e.selection||Ue.atStart(t.doc)},apply(e){return e.selection}}),new uu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new uu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class E0{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=aW.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new uu(r.key,r.spec.state,r))})}}class Nl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Nl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new oW(this)}static create(t){let n=new E0(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Nl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new E0(this.schema,t.plugins),r=n.fields,i=new Nl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new E0(t.schema,t.plugins),s=new Nl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Zs.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Ue.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function QI(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=QI(i,t,{})),n[r]=i}return n}class Dt{constructor(t){this.spec=t,this.props={},t.props&&QI(t.props,this,this.props),this.key=t.key?t.key.key:JI("plugin")}getState(t){return t[this.key]}}const k0=Object.create(null);function JI(e){return e in k0?e+"$"+ ++k0[e]:(k0[e]=0,e+"$")}class dn{constructor(t="key"){this.key=JI(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const vn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Il=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let nC=null;const Gi=function(e,t,n){let r=nC||(nC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},lW=function(){nC=null},ua=function(e,t,n,r){return n&&(A_(e,t,n,r,-1)||A_(e,t,n,r,1))},cW=/^(img|br|input|textarea|hr)$/i;function A_(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Er(e))){let o=e.parentNode;if(!o||o.nodeType!=1||xd(e)||cW.test(e.nodeName)||e.contentEditable=="false")return!1;t=vn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?Er(e):0}else return!1}}function Er(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function uW(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Er(e)}else if(e.parentNode&&!xd(e))t=vn(e),e=e.parentNode;else return null}}function dW(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!xd(e))t=vn(e)+1,e=e.parentNode;else return null}}function fW(e,t,n){for(let r=t==0,i=t==Er(e);r||i;){if(e==n)return!0;let s=vn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Er(e)}}function xd(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const nm=function(e){return e.focusNode&&ua(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Uo(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function hW(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function pW(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Er(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Er(r.startContainer),r.startOffset)}}}const yi=typeof navigator<"u"?navigator:null,M_=typeof document<"u"?document:null,uo=yi&&yi.userAgent||"",rC=/Edge\/(\d+)/.exec(uo),eB=/MSIE \d/.exec(uo),iC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(uo),Un=!!(eB||iC||rC),Qs=eB?document.documentMode:iC?+iC[1]:rC?+rC[1]:0,Ar=!Un&&/gecko\/(\d+)/i.test(uo);Ar&&+(/Firefox\/(\d+)/.exec(uo)||[0,0])[1];const sC=!Un&&/Chrome\/(\d+)/.exec(uo),Nn=!!sC,tB=sC?+sC[1]:0,Dn=!Un&&!!yi&&/Apple Computer/.test(yi.vendor),Bl=Dn&&(/Mobile\/\w+/.test(uo)||!!yi&&yi.maxTouchPoints>2),Cr=Bl||(yi?/Mac/.test(yi.platform):!1),mW=yi?/Win/.test(yi.platform):!1,Ki=/Android \d/.test(uo),wd=!!M_&&"webkitFontSmoothing"in M_.documentElement.style,gW=wd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function yW(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Vi(e,t){return typeof e=="number"?e:e[t]}function vW(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function __(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Il(o);continue}let l=o,u=l==s.body,d=u?yW(s):vW(l),h=0,p=0;if(t.top<d.top+Vi(r,"top")?p=-(d.top-t.top+Vi(i,"top")):t.bottom>d.bottom-Vi(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+Vi(i,"top")-d.top:t.bottom-d.bottom+Vi(i,"bottom")),t.left<d.left+Vi(r,"left")?h=-(d.left-t.left+Vi(i,"left")):t.right>d.right-Vi(r,"right")&&(h=t.right-d.right+Vi(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-y,w=l.scrollTop-x;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let g=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:Il(o)}}function bW(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:nB(e.dom)}}function nB(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Il(r));return t}function xW({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;rB(n,r==0?0:r-t)}function rB(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let dl=null;function wW(e){if(e.setActive)return e.setActive();if(dl)return e.focus(dl);let t=nB(e);e.focus(dl==null?{get preventScroll(){return dl={preventScroll:!0},!0}}:void 0),dl||(dl=!1,rB(t,0))}function iB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=Gi(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let x=g[y];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let S=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!u&&x.left<=t.left&&x.right>=t.left&&(u=h,d={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!n&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?SW(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:iB(n,i)}function SW(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=qs(r,1);if(s.top!=s.bottom&&ME(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function ME(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function CW(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function EW(e,t,n){let{node:r,offset:i}=iB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function kW(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function sB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(ME(t,d))return sB(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function NW(e,t){let n=e.dom.ownerDocument,r,i=0,s=pW(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!ME(t,d)||(o=sB(e.dom,t,d),!o))return null}if(Dn)for(let d=o;r&&d;d=Il(d))d.draggable&&(r=void 0);if(o=CW(o,t),r){if(Ar&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;wd&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=kW(e,r,i,t))}l==null&&(l=EW(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function D_(e){return e.top<e.bottom||e.left<e.right}function qs(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(D_(r))return r}return Array.prototype.find.call(n,D_)||e.getBoundingClientRect()}const TW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function oB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=wd||Ar;if(r.nodeType==3)if(o&&(TW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=qs(Gi(r,i,i),n);if(Ar&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=qs(Gi(r,i-1,i-1),-1);if(d.top==u.top){let h=qs(Gi(r,i,i+1),-1);if(h.top!=u.top)return tu(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,tu(qs(Gi(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Er(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return N0(u.getBoundingClientRect(),!1)}if(s==null&&i<Er(r)){let u=r.childNodes[i];if(u.nodeType==1)return N0(u.getBoundingClientRect(),!0)}return N0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Er(r))){let u=r.childNodes[i-1],d=u.nodeType==3?Gi(u,Er(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return tu(qs(d,1),!1)}if(s==null&&i<Er(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?Gi(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return tu(qs(d,-1),!0)}return tu(qs(r.nodeType==3?Gi(r):r,-n),n>=0)}function tu(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function N0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function aB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function AW(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return aB(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=oB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Gi(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const MW=/[\u0590-\u08ac]/;function _W(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!MW.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:aB(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let y=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:x,focusOffset:S}=e.domSelectionRange(),w=x&&!y.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return g!=null&&(l.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let R_=null,O_=null,j_=!1;function DW(e,t,n){return R_==t&&O_==n?j_:(R_=t,O_=n,j_=n=="up"||n=="down"?AW(e,t,n):_W(e,t,n))}const Mr=0,L_=1,Ko=2,vi=3;class Sd{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Mr,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>vn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof cB){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof lB&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?vn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?vn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=vn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=vn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let y=0,x=0;y<this.children.length;y++){let S=this.children[y],w=x+S.size;if(s>x&&o<w)return S.setSelection(t-x-S.border,n-x-S.border,r,i);x=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((Ar||Dn)&&t==n){let{node:y,offset:x}=l;if(y.nodeType==3){if(p=!!(x&&y.nodeValue[x-1]==`
`),p&&x==y.nodeValue.length)for(let S=y,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:vn(w)+1});break}let E=S.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let S=y.childNodes[x-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Ar&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&Dn)&&ua(l.node,l.offset,h.anchorNode,h.anchorOffset)&&ua(u.node,u.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||t==n)&&!(p&&Ar)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(t>n){let x=l;l=u,u=x}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?Ko:L_,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=vi:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ko:vi}r=o}this.dirty=Ko}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Ko:L_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class lB extends Sd{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Mr&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class RW extends Sd{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class da extends Sd{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Sa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new da(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&vi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=vi&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Mr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Mr}}slice(t,n,r){let i=da.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=aC(s,n,o,r)),t>0&&(s=aC(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Js extends Sd{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=Sa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=fB(h,r,n),d?u=new OW(t,n,r,i,h,p||null,g,d,s,o+1):n.isText?new rm(t,n,r,i,h,g,s):new Js(t,n,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>me.empty)}return t}matchesNode(t,n,r){return this.dirty==Mr&&t.eq(this.node)&&Uh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new LW(this,o&&o.node,t);BW(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?ut.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,g)=>{u.syncToMarks(d.marks,r,t);let y;u.findNodeMatch(d,h,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(y=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,y,t)||u.updateNextNode(d,h,p,t,g,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Ko)&&(o&&this.protectLocalComposition(t,o),uB(this.contentDOM,this.children,t),Bl&&zW(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof qe)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=qW(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new RW(this,s,n,i);t.input.compositionNodes.push(o),this.children=aC(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==vi||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Mr}updateOuterDeco(t){if(Uh(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=dB(this.dom,this.nodeDOM,oC(this.outerDeco,this.node,n),oC(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function P_(e,t,n,r,i){fB(r,t,e);let s=new Js(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class rm extends Js{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==vi||this.dirty!=Mr&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Mr||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Mr,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new rm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=vi)}get domAtom(){return!1}isText(t){return this.node.text==t}}class cB extends Sd{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Mr&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class OW extends Js{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==vi)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function uB(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=I_(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof da){let u=r?r.previousSibling:e.lastChild;uB(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=I_(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const ku=function(e){e&&(this.nodeName=e)};ku.prototype=Object.create(null);const Yo=[new ku];function oC(e,t,n){if(e.length==0)return Yo;let r=n?Yo[0]:new ku,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new ku(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new ku(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function dB(e,t,n,r){if(n==Yo&&r==Yo)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=Yo[0]),i=u}jW(i,l||Yo[0],o)}return i}function jW(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function fB(e,t,n){return dB(e,e,Yo,oC(t,n,e.nodeType!=1))}function Uh(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function I_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class LW{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=PW(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Mr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=da.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==vi&&o.dom==o.contentDOM&&(o.dirty=Ko),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof Js){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,g=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=vi&&Uh(n,u.outerDeco));if(!g&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=Ko,p.updateChildren(i,o+1),p.dirty=Mr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Uh(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Js.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Js.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new lB(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof da;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof rm)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Dn||Nn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new cB(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function PW(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof da)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function IW(e,t){return e.type.side-t.type.side}function BW(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(IW);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let g,y;if(u)y=-1,g=u,u=null;else if(d<e.childCount)y=d,g=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+g.nodeSize;if(g.isText){let w=x;o<i.length&&i[o].from<w&&(w=i[o].from);for(let E=0;E<l.length;E++)l[E].to<w&&(w=l[E].to);w<x&&(u=g.cut(w-s),g=g.cut(0,w-s),x=w,y=-1)}else for(;o<i.length&&i[o].to<x;)o++;let S=g.isInline&&!g.isLeaf?l.filter(w=>!w.inline):l.slice();r(g,S,t.forChild(s,g),y),s=x}}function zW(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function qW(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function aC(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function _E(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(nm(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&De.isSelectable(p)&&i.parent&&!(p.isInline&&fW(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new De(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let y=0;y<n.rangeCount;y++){let x=n.getRangeAt(y);p=Math.min(p,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=DE(e,h,l,p)}return d}function hB(e){return e.editable?e.hasFocus():mB(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Xi(e,t=!1){let n=e.state.selection;if(pB(e,n),!!hB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Nn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ua(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)HW(e);else{let{anchor:r,head:i}=n,s,o;B_&&!(n instanceof qe)&&(n.$from.parent.inlineContent||(s=z_(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=z_(e,n.to))),e.docView.setSelection(r,i,e,t),B_&&(s&&q_(s),o&&q_(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&VW(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const B_=Dn||Nn&&tB<63;function z_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Dn&&i&&i.contentEditable=="false")return T0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return T0(i);if(s)return T0(s)}}function T0(e){return e.contentEditable="true",Dn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function q_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function VW(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!hB(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function HW(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,vn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Un&&Qs<=11&&(n.disabled=!0,n.disabled=!1)}function pB(e,t){if(t instanceof De){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(V_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else V_(e)}function V_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function DE(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||qe.between(t,n,r)}function H_(e){return e.editable&&!e.hasFocus()?!1:mB(e)}function mB(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function FW(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return ua(t.node,t.offset,n.anchorNode,n.anchorOffset)}function lC(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ue.findFrom(s,t)}function Vs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function F_(e,t,n){let r=e.state.selection;if(r instanceof qe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Vs(e,new qe(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=lC(e.state,t);return i&&i instanceof De?Vs(e,i):!1}else if(!(Cr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?De.isSelectable(s)?Vs(e,new De(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):wd?Vs(e,new qe(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof De&&r.node.isInline)return Vs(e,new qe(t>0?r.$to:r.$from));{let i=lC(e.state,t);return i?Vs(e,i):!1}}}function $h(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Nu(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function fl(e,t){return t<0?UW(e):$W(e)}function UW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(Ar&&n.nodeType==1&&r<$h(n)&&Nu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Nu(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(gB(n))break;{let l=n.previousSibling;for(;l&&Nu(l,-1);)i=n.parentNode,s=vn(l),l=l.previousSibling;if(l)n=l,r=$h(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?cC(e,n,r):i&&cC(e,i,s)}function $W(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=$h(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Nu(l,1))s=n,o=++r;else break}else{if(gB(n))break;{let l=n.nextSibling;for(;l&&Nu(l,1);)s=l.parentNode,o=vn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=$h(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&cC(e,s,o)}function gB(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function GW(e,t){for(;e&&t==e.childNodes.length&&!xd(e);)t=vn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function KW(e,t){for(;e&&!t&&!xd(e);)t=vn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function cC(e,t,n){if(t.nodeType!=3){let s,o;(o=GW(t,n))?(t=o,n=0):(s=KW(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(nm(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Xi(e)},50)}function U_(e,t){let n=e.state.doc.resolve(t);if(!(Nn||mW)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function $_(e,t,n){let r=e.state.selection;if(r instanceof qe&&!r.empty||n.indexOf("s")>-1||Cr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=lC(e.state,t);if(o&&o instanceof De)return Vs(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof or?Ue.near(o,t):Ue.findFrom(o,t);return l?Vs(e,l):!1}return!1}function G_(e,t){if(!(e.state.selection instanceof qe))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function K_(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function YW(e){if(!Dn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;K_(e,r,"true"),setTimeout(()=>K_(e,r,"false"),20)}return!1}function WW(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function XW(e,t){let n=t.keyCode,r=WW(t);if(n==8||Cr&&n==72&&r=="c")return G_(e,-1)||fl(e,-1);if(n==46&&!t.shiftKey||Cr&&n==68&&r=="c")return G_(e,1)||fl(e,1);if(n==13||n==27)return!0;if(n==37||Cr&&n==66&&r=="c"){let i=n==37?U_(e,e.state.selection.from)=="ltr"?-1:1:-1;return F_(e,i,r)||fl(e,i)}else if(n==39||Cr&&n==70&&r=="c"){let i=n==39?U_(e,e.state.selection.from)=="ltr"?1:-1:1;return F_(e,i,r)||fl(e,i)}else{if(n==38||Cr&&n==80&&r=="c")return $_(e,-1,r)||fl(e,-1);if(n==40||Cr&&n==78&&r=="c")return YW(e)||$_(e,1,r)||fl(e,1);if(r==(Cr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function RE(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=e.someProp("clipboardSerializer")||Sa.fromSchema(e.state.schema),l=SB(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=wB[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let x=l.createElement(h[y]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:g,slice:t}}function yB(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new xe(me.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:y}=e.state,x=Sa.fromSchema(y);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(x.serializeNode(y.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=eX(n),wd&&tX(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Cu.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!ZW.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=nX(Y_(l,+h[1],+h[2]),h[4]);else if(l=xe.maxOpen(QW(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=Y_(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const ZW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function QW(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&bB(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=xB(o[o.length-1],s.length));let h=vB(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return me.from(o)}return e}function vB(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,me.from(e));return e}function bB(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=bB(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(me.from(vB(n,e,i+1))))}}function xB(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,xB(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(me.empty,!0);return e.copy(n.append(r))}function uC(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=uC(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(me.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function Y_(e,t,n){return t<e.openStart&&(e=new xe(uC(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new xe(uC(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const wB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let W_=null;function SB(){return W_||(W_=document.implementation.createHTMLDocument("title"))}let A0=null;function JW(e){let t=window.trustedTypes;return t?(A0||(A0=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),A0.createHTML(e)):e}function eX(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=SB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&wB[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=JW(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function tX(e){let t=e.querySelectorAll(Nn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function nX(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=me.from(u.create(r[l+1],i)),s++,o++}return new xe(i,s,o)}const Rn={},On={},rX={touchstart:!0,touchmove:!0};class iX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function sX(e){for(let t in Rn){let n=Rn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{aX(e,r)&&!OE(e,r)&&(e.editable||!(r.type in On))&&n(e,r)},rX[t]?{passive:!0}:void 0)}Dn&&e.dom.addEventListener("input",()=>null),dC(e)}function Xs(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function oX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function dC(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>OE(e,r))})}function OE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function aX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function lX(e,t){!OE(e,t)&&Rn[t.type]&&(e.editable||!(t.type in On))&&Rn[t.type](e,t)}On.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!EB(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ki&&Nn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Bl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,Uo(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||XW(e,n)?n.preventDefault():Xs(e,"key")};On.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};On.keypress=(e,t)=>{let n=t;if(EB(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Cr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof qe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function im(e){return{left:e.clientX,top:e.clientY}}function cX(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function jE(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Dl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function uX(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&De.isSelectable(r)?(Dl(e,new De(n)),!0):!1}function dX(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof De&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(De.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Dl(e,De.create(e.state.doc,i)),!0):!1}function fX(e,t,n,r,i){return jE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?dX(e,n):uX(e,n))}function hX(e,t,n,r){return jE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function pX(e,t,n,r){return jE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||mX(e,n,r)}function mX(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Dl(e,qe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Dl(e,qe.create(r,l+1,l+1+o.content.size));else if(De.isSelectable(o))Dl(e,De.create(r,l));else continue;return!0}}function LE(e){return Gh(e)}const CB=Cr?"metaKey":"ctrlKey";Rn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=LE(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&cX(n,e.input.lastClick)&&!n[CB]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(im(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new gX(e,o,n,!!r)):(s=="doubleClick"?hX:pX)(e,o.pos,o.inside,n)?n.preventDefault():Xs(e,"pointer"))};class gX{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[CB],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof De&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ar&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Xs(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Xi(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(im(t))),this.updateAllowDefault(t),this.allowDefault||!n?Xs(this.view,"pointer"):fX(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Dn&&this.mightDrag&&!this.mightDrag.node.isAtom||Nn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Dl(this.view,Ue.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Xs(this.view,"pointer")}move(t){this.updateAllowDefault(t),Xs(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Rn.touchstart=e=>{e.input.lastTouch=Date.now(),LE(e),Xs(e,"pointer")};Rn.touchmove=e=>{e.input.lastTouch=Date.now(),Xs(e,"pointer")};Rn.contextmenu=e=>LE(e);function EB(e,t){return e.composing?!0:Dn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const yX=Ki?5e3:-1;On.compositionstart=On.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof qe&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Gh(e,!0),e.markCursor=null;else if(Gh(e,!t.selection.empty),Ar&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}kB(e,yX)};On.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,kB(e,20))};function kB(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Gh(e),t))}function NB(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=bX());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function vX(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=uW(t.focusNode,t.focusOffset),r=dW(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function bX(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Gh(e,t=!1){if(!(Ki&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),NB(e),t||e.docView&&e.docView.dirty){let n=_E(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function xX(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Ku=Un&&Qs<15||Bl&&gW<604;Rn.copy=On.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=Ku?null:n.clipboardData,o=r.content(),{dom:l,text:u}=RE(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):xX(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function wX(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function SX(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Yu(e,r.value,null,i,t):Yu(e,r.textContent,r.innerHTML,i,t)},50)}function Yu(e,t,n,r,i){let s=yB(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||xe.empty)))return!0;if(!s)return!1;let o=wX(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function TB(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}On.paste=(e,t)=>{let n=t;if(e.composing&&!Ki)return;let r=Ku?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Yu(e,TB(r),r.getData("text/html"),i,n)?n.preventDefault():SX(e,n)};class AB{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const CX=Cr?"altKey":"ctrlKey";function MB(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[CX]}Rn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(im(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof De?i.to-1:i.to))){if(r&&r.mightDrag)o=De.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=De.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=RE(e,l);(!n.dataTransfer.files.length||!Nn||tB>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ku?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ku||n.dataTransfer.setData("text/plain",d),e.dragging=new AB(h,MB(e,n),o)};Rn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};On.dragover=On.dragenter=(e,t)=>t.preventDefault();On.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(im(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",x=>{o=x(o,e,!1)}):o=yB(e,TB(n.dataTransfer),Ku?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&MB(e,n));if(e.someProp("handleDrop",x=>x(e,n,o||xe.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?GI(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(g))return;let y=d.doc.resolve(h);if(p&&De.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new De(y));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,E,N)=>x=N),d.setSelection(DE(e,y,d.doc.resolve(x)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};Rn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Xi(e)},20))};Rn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Rn.beforeinput=(e,t)=>{if(Nn&&Ki&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Uo(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in On)Rn[e]=On[e];function Wu(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Kh{constructor(t,n){this.toDOM=t,this.spec=n||ra,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new _n(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Kh&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Wu(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class eo{constructor(t,n){this.attrs=t,this.spec=n||ra}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new _n(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof eo&&Wu(this.attrs,t.attrs)&&Wu(this.spec,t.spec)}static is(t){return t.type instanceof eo}destroy(){}}class PE{constructor(t,n){this.attrs=t,this.spec=n||ra}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new _n(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof PE&&Wu(this.attrs,t.attrs)&&Wu(this.spec,t.spec)}destroy(){}}class _n{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new _n(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new _n(t,t,new Kh(n,r))}static inline(t,n,r,i){return new _n(t,n,new eo(r,i))}static node(t,n,r,i){return new _n(t,n,new PE(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof eo}get widget(){return this.type instanceof Kh}}const vl=[],ra={};class St{constructor(t,n){this.local=t.length?t:vl,this.children=n.length?n:vl}static create(t,n){return n.length?Yh(n,t,0,ra):En}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==En||t.maps.length==0?this:this.mapInner(t,n,0,0,r||ra)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?EX(this.children,o||[],t,n,r,i,s):o?new St(o.sort(ia),vl):En}add(t,n){return n.length?this==En?St.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=DB(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,Yh(h,l,d+1,ra)),s+=3}});let o=_B(s?RB(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new St(o.length?this.local.concat(o).sort(ia):this.local,i||this.children)}remove(t){return t.length==0||this==En?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=En?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new St(i,r):En}forChild(t,n){if(this==En)return this;if(n.isLeaf)return St.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof eo){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new St(i.sort(ia),vl);return r?new Us([l,r]):l}return r||En}eq(t){if(this==t)return!0;if(!(t instanceof St)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return IE(this.localsInner(t))}localsInner(t){if(this==En)return vl;if(t.inlineContent||!this.local.some(eo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof eo||n.push(this.local[r]);return n}forEachSet(t){t(this)}}St.empty=new St([],[]);St.removeOverlap=IE;const En=St.empty;class Us{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,ra));return Us.from(r)}forChild(t,n){if(n.isLeaf)return St.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=En&&(s instanceof Us?r=r.concat(s.members):r.push(s))}return Us.from(r)}eq(t){if(!(t instanceof Us)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?IE(r?n:n.sort(ia)):vl}static from(t){switch(t.length){case 0:return En;case 1:return t[0];default:return new Us(t.every(n=>n instanceof St)?t:t.reduce((n,r)=>n.concat(r instanceof St?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function EX(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,y,x,S)=>{let w=S-x-(y-g);for(let E=0;E<l.length;E+=3){let N=l[E+1];if(N<0||g>N+h-p)continue;let k=l[E]+h-p;y>=k?l[E+1]=g<=k?-2:-1:g>=h&&w&&(l[E]+=w,l[E+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(e[d+1]+s,-1),y=g-i,{index:x,offset:S}=r.content.findIndex(p),w=r.maybeChild(x);if(w&&S==p&&S+w.nodeSize==y){let E=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);E!=En?(l[d]=p,l[d+1]=y,l[d+2]=E):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=kX(l,e,t,n,i,s,o),h=Yh(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let y=h.children[p];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new St(t.sort(ia),l)}function _B(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new _n(i.from+t,i.to+t,i.type))}return n}function kX(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function DB(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function RB(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Yh(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=DB(e,l,u+n);if(d){s=!0;let h=Yh(d,l,n+u+1,r);h!=En&&i.push(u,u+l.nodeSize,h)}});let o=_B(s?RB(e):e,-n).sort(ia);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new St(o,i):En}function ia(e,t){return e.from-t.from||e.to-t.to}function IE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),X_(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),X_(t,i,r.copy(s.from,r.to)));break}}}return t}function X_(e,t,n){for(;t<e.length&&ia(n,e[t])>0;)t++;e.splice(t,0,n)}function M0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=En&&t.push(r)}),e.cursorWrapper&&t.push(St.create(e.state.doc,[e.cursorWrapper.deco])),Us.from(t)}const NX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},TX=Un&&Qs<=11;class AX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class MX{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new AX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Un&&Qs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),TX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,NX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(H_(this.view)){if(this.suppressingSelectionUpdates)return Xi(this.view);if(Un&&Qs<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ua(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Il(s))n.add(s);for(let s=t.anchorNode;s;s=Il(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&H_(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(Ar&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!p||RX(t,p)!=y)&&g.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&nm(r)&&(d=_E(t))&&d.eq(Ue.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Xi(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),_X(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Xi(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Un&&Qs<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?vn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?vn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let Z_=new WeakMap,Q_=!1;function _X(e){if(!Z_.has(e)&&(Z_.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Ar,Q_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Q_=!0}}function J_(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return ua(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function DX(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return J_(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?J_(e,n):null}function RX(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function OX(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],nm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),Nn&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let E=r.childNodes[w-1],N=E.pmViewDesc;if(E.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let p=e.state.doc,g=e.someProp("domParser")||Cu.fromSchema(e.state.schema),y=p.resolve(o),x=null,S=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:jX,context:y});if(d&&d[0].pos!=null){let w=d[0].pos,E=d[1]&&d[1].pos;E==null&&(E=w),x={anchor:w+o,head:E+o}}return{doc:S,sel:x,from:o,to:l}}function jX(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Dn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Dn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const LX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function PX(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let R=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,P=_E(e,R);if(P&&!e.state.selection.eq(P)){if(Nn&&Ki&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",V=>V(e,Uo(13,"Enter"))))return;let $=e.state.tr.setSelection(P);R=="pointer"?$.setMeta("pointer",!0):R=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),e.dispatch($)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=OX(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),g,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,y="end"):(g=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let x=zX(p.content,d.doc.content,d.from,g,y);if(x&&e.input.domChangeCount++,(Bl&&e.input.lastIOSEnter>Date.now()-225||Ki)&&i.some(R=>R.nodeType==1&&!LX.test(R.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",R=>R(e,Uo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof qe&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=eD(e,e.state.doc,d.sel);if(R&&!R.eq(e.state.selection)){let P=e.state.tr.setSelection(R);s&&P.setMeta("composition",s),e.dispatch(P)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof qe&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Un&&Qs<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let S=d.doc.resolveNoCache(x.start-d.from),w=d.doc.resolveNoCache(x.endB-d.from),E=h.resolve(x.start),N=S.sameParent(w)&&S.parent.inlineContent&&E.end()>=x.endA,k;if((Bl&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!N&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(k=Ue.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",R=>R(e,Uo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&BX(h,x.start,x.endA,S,w)&&e.someProp("handleKeyDown",R=>R(e,Uo(8,"Backspace")))){Ki&&Nn&&e.domObserver.suppressSelectionUpdates();return}Nn&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),Ki&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,w=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(R){return R(e,Uo(13,"Enter"))})},20));let T=x.start,A=x.endA,M=R=>{let P=R||e.state.tr.replace(T,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let $=eD(e,P.doc,d.sel);$&&!(Nn&&e.composing&&$.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&($.head==T||$.head==P.mapping.map(A)-1)||Un&&$.empty&&$.head==T)&&P.setSelection($)}return s&&P.setMeta("composition",s),P.scrollIntoView()},D;if(N){if(S.pos==w.pos){Un&&Qs<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Xi(e),20));let R=M(e.state.tr.delete(T,A)),P=h.resolve(x.start).marksAcross(h.resolve(x.endA));P&&R.ensureMarks(P),e.dispatch(R)}else if(x.endA==x.endB&&(D=IX(S.parent.content.cut(S.parentOffset,w.parentOffset),E.parent.content.cut(E.parentOffset,x.endA-E.start())))){let R=M(e.state.tr);D.type=="add"?R.addMark(T,A,D.mark):R.removeMark(T,A,D.mark),e.dispatch(R)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let R=S.parent.textBetween(S.parentOffset,w.parentOffset),P=()=>M(e.state.tr.insertText(R,T,A));e.someProp("handleTextInput",$=>$(e,T,A,R,P))||e.dispatch(P())}}else e.dispatch(M())}function eD(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:DE(e,t.resolve(n.anchor),t.resolve(n.head))}function IX(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(me.from(d).eq(e))return{mark:l,type:o}}function BX(e,t,n,r,i){if(n-t<=i.pos-r.pos||_0(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(_0(s,!0,!0));return!o.parent.isTextblock||o.pos>n||_0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function _0(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function zX(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&tD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&tD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function tD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class OB{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new iX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(oD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=iD(this),rD(this),this.nodeViews=sD(this),this.docView=P_(this.state.doc,nD(this),M0(this),this.dom,this),this.domObserver=new MX(this,(r,i,s,o)=>PX(this,r,i,s,o)),this.domObserver.start(),sX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&dC(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(oD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(NB(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=sD(this);VX(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&dC(this),this.editable=iD(this),rD(this);let u=M0(this),d=nD(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&bW(this);if(o){this.domObserver.stop();let y=p&&(Un||Nn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&qX(i.selection,t.selection);if(p){let x=Nn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=vX(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=P_(t.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&FW(this))?Xi(this,y):(pB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&xW(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof De){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&__(this,n.getBoundingClientRect(),t)}else __(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new AB(t.slice,t.move,i<0?void 0:De.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Un){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&wW(this.dom),Xi(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return NW(this,t)}coordsAtPos(t,n=1){return oB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return DW(this,n||this.state,t)}pasteHTML(t,n){return Yu(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Yu(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return RE(this,t)}destroy(){this.docView&&(oX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],M0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,lW())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return lX(this,t)}domSelectionRange(){let t=this.domSelection();return t?Dn&&this.root.nodeType===11&&hW(this.dom.ownerDocument)==this.dom&&DX(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}OB.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function nD(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[_n.node(0,e.state.doc.content.size,t)]}function rD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:_n.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function iD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function qX(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function sD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function VX(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function oD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var so={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},HX=typeof navigator<"u"&&/Mac/.test(navigator.platform),FX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bn=0;bn<10;bn++)so[48+bn]=so[96+bn]=String(bn);for(var bn=1;bn<=24;bn++)so[bn+111]="F"+bn;for(var bn=65;bn<=90;bn++)so[bn]=String.fromCharCode(bn+32),Wh[bn]=String.fromCharCode(bn);for(var D0 in so)Wh.hasOwnProperty(D0)||(Wh[D0]=so[D0]);function UX(e){var t=HX&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||FX&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Wh:so)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const $X=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),GX=typeof navigator<"u"&&/Win/.test(navigator.platform);function KX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))$X?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function YX(e){let t=Object.create(null);for(let n in e)t[KX(n)]=e[n];return t}function R0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function WX(e){return new Dt({props:{handleKeyDown:jB(e)}})}function jB(e){let t=YX(e);return function(n,r){let i=UX(r),s,o=t[R0(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[R0(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(GX&&r.ctrlKey&&r.altKey)&&(s=so[r.keyCode])&&s!=i){let l=t[R0(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const BE=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function LB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const PB=(e,t,n)=>{let r=LB(e,n);if(!r)return!1;let i=zE(r);if(!i){let o=r.blockRange(),l=o&&Xl(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if($B(e,i,t,-1))return!0;if(r.parent.content.size==0&&(zl(s,"end")||De.isSelectable(s)))for(let o=r.depth;;o--){let l=em(e.doc,r.before(o),r.after(o),xe.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(zl(s,"end")?Ue.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):De.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},XX=(e,t,n)=>{let r=LB(e,n);if(!r)return!1;let i=zE(r);return i?IB(e,i,t):!1},ZX=(e,t,n)=>{let r=zB(e,n);if(!r)return!1;let i=qE(r);return i?IB(e,i,t):!1};function IB(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=em(e.doc,s,u,xe.empty);if(!d||d.from!=s||d instanceof an&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(qe.create(h.doc,s)),n(h.scrollIntoView())}return!0}function zl(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const BB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=zE(r)}let o=s&&s.nodeBefore;return!o||!De.isSelectable(o)?!1:(t&&t(e.tr.setSelection(De.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function zE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function zB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const qB=(e,t,n)=>{let r=zB(e,n);if(!r)return!1;let i=qE(r);if(!i)return!1;let s=i.nodeAfter;if($B(e,i,t,1))return!0;if(r.parent.content.size==0&&(zl(s,"start")||De.isSelectable(s))){let o=em(e.doc,r.before(),r.after(),xe.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(zl(s,"start")?Ue.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):De.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},VB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=qE(r)}let o=s&&s.nodeAfter;return!o||!De.isSelectable(o)?!1:(t&&t(e.tr.setSelection(De.create(e.doc,s.pos)).scrollIntoView()),!0)};function qE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const QX=(e,t)=>{let n=e.selection,r=n instanceof De,i;if(r){if(n.node.isTextblock||!co(e.doc,n.from))return!1;i=n.from}else if(i=Jp(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(De.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},JX=(e,t)=>{let n=e.selection,r;if(n instanceof De){if(n.node.isTextblock||!co(e.doc,n.to))return!1;r=n.to}else if(r=Jp(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},eZ=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Xl(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},HB=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function VE(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const tZ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=VE(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Ue.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},FB=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof or||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=VE(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(qe.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},UB=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Wi(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Xl(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function nZ(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof De&&t.selection.node.isBlock)return!r.parentOffset||!Wi(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){u=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),l=VE(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),s.unshift(u&&l?{type:l}:null),o=y;break}else{if(y==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof qe||t.selection instanceof or)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=Wi(h.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=Wi(h.doc,p,s.length,s)),!g)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let y=h.mapping.map(r.before(o)),x=h.doc.resolve(y);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const rZ=nZ(),iZ=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(De.create(e.doc,i))),!0)};function sZ(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||co(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function $B(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&sZ(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let y=t.pos+s.nodeSize,x=me.empty;for(let E=o.length-1;E>=0;E--)x=me.from(o[E].create(null,x));x=me.from(i.copy(x));let S=e.tr.step(new cn(t.pos-1,y,t.pos,y,new xe(x,1,0),o.length,!0)),w=S.doc.resolve(y+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&co(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:Ue.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),g=p&&Xl(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(d&&zl(s,"start",!0)&&zl(i,"end")){let y=i,x=[];for(;x.push(y),!y.isTextblock;)y=y.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,S.content)){if(n){let E=me.empty;for(let k=x.length-1;k>=0;k--)E=me.from(x[k].copy(E));let N=e.tr.step(new cn(t.pos-x.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new xe(E,x.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function GB(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(qe.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const oZ=GB(-1),aZ=GB(1);function lZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&TE(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function aD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function HE(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}HE(BE,PB,BB);HE(BE,qB,VB);HE(HB,FB,UB,rZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function cZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return uZ(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function uZ(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new Hh(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new Hh(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=TE(s,n,r,t);return l?(e&&dZ(e,t,l,i,n),!0):!1}function dZ(e,t,n,r,i){let s=me.empty;for(let h=n.length-1;h>=0;h--)s=me.from(n[h].type.create(n[h].attrs,s));e.step(new cn(t.start-(r?2:0),t.end,t.start,t.end,new xe(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,g=!0;h<p;h++,g=!1)!g&&Wi(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function fZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?hZ(t,n,e,s):pZ(t,n,s):!0:!1}}function hZ(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new cn(s-1,o,s,o,new xe(me.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Hh(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Xl(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return co(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function pZ(e,t,n){let r=e.tr,i=n.parent;for(let y=n.end,x=n.endIndex-1,S=n.startIndex;x>S;x--)y-=i.child(x).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?me.empty:me.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new cn(p-(l?1:0),g+(u?1:0),p+1,g-1,new xe((l?me.empty:me.from(i.copy(me.empty))).append(u?me.empty:me.from(i.copy(me.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function mZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=me.from(d?e.create():null),p=new xe(me.from(e.create(null,me.from(l.type.create(null,h)))),d?3:1,0),g=s.start,y=s.end;n(t.tr.step(new cn(g-(d?3:1),y,g,y,p,1,!0)).scrollIntoView())}return!0}}var gZ=Object.defineProperty,KB=(e,t)=>{for(var n in t)gZ(e,n,{get:t[n],enumerable:!0})};function sm(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var om=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...x)=>{const S=this.buildProps(u,t),w=g(...x)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:sm({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},yZ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function YB(e,t){const n=new ZI(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var WB=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&WB(r)}return e};function Zf(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return WB(n)}function Xu(e,t,n){if(e instanceof Zs||e instanceof me)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return me.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Xu("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new LI({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Cu.fromSchema(u).parseSlice(Zf(e),n.parseOptions):Cu.fromSchema(u).parse(Zf(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Cu.fromSchema(t);return n.slice?s.parseSlice(Zf(e),n.parseOptions).content:s.parse(Zf(e),n.parseOptions)}return Xu("",t,n)}function fC(e,t,n={},r={}){return Xu(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function vZ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function bZ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function xZ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function am(e){return t=>xZ(t.$from,e)}function _e(e,t,n){return e.config[t]===void 0&&e.parent?_e(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?_e(e.parent,t,n):null}):e.config[t]}function FE(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=_e(t,"addExtensions",n);return r?[t,...FE(r())]:t}).flat(10)}function UE(e,t){const n=Sa.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function XB(e){return typeof e=="function"}function st(e,t=void 0,...n){return XB(e)?t?e.bind(t)(...n):e(...n):e}function wZ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Zu(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function ZB(e){const t=[],{nodeExtensions:n,markExtensions:r}=Zu(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=_e(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,y])=>{t.push({type:p,name:g,attribute:{...s,...y}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=_e(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function Gt(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Xh(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Gt(n,r),{})}function SZ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function lD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):SZ(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function cD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&wZ(n)?!1:n!=null))}function CZ(e,t){var n;const r=ZB(e),{nodeExtensions:i,markExtensions:s}=Zu(e),o=(n=i.find(d=>_e(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(E=>E.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((E,N)=>{const k=_e(N,"extendNodeSchema",p);return{...E,...k?k(d):{}}},{}),y=cD({...g,content:st(_e(d,"content",p)),marks:st(_e(d,"marks",p)),group:st(_e(d,"group",p)),inline:st(_e(d,"inline",p)),atom:st(_e(d,"atom",p)),selectable:st(_e(d,"selectable",p)),draggable:st(_e(d,"draggable",p)),code:st(_e(d,"code",p)),whitespace:st(_e(d,"whitespace",p)),linebreakReplacement:st(_e(d,"linebreakReplacement",p)),defining:st(_e(d,"defining",p)),isolating:st(_e(d,"isolating",p)),attrs:Object.fromEntries(h.map(E=>{var N,k;return[E.name,{default:(N=E?.attribute)==null?void 0:N.default,validate:(k=E?.attribute)==null?void 0:k.validate}]}))}),x=st(_e(d,"parseHTML",p));x&&(y.parseDOM=x.map(E=>lD(E,h)));const S=_e(d,"renderHTML",p);S&&(y.toDOM=E=>S({node:E,HTMLAttributes:Xh(E,h)}));const w=_e(d,"renderText",p);return w&&(y.toText=w),[d.name,y]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((w,E)=>{const N=_e(E,"extendMarkSchema",p);return{...w,...N?N(d):{}}},{}),y=cD({...g,inclusive:st(_e(d,"inclusive",p)),excludes:st(_e(d,"excludes",p)),group:st(_e(d,"group",p)),spanning:st(_e(d,"spanning",p)),code:st(_e(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var E,N;return[w.name,{default:(E=w?.attribute)==null?void 0:E.default,validate:(N=w?.attribute)==null?void 0:N.validate}]}))}),x=st(_e(d,"parseHTML",p));x&&(y.parseDOM=x.map(w=>lD(w,h)));const S=_e(d,"renderHTML",p);return S&&(y.toDOM=w=>S({mark:w,HTMLAttributes:Xh(w,h)})),[d.name,y]}));return new LI({topNode:o,nodes:l,marks:u})}function EZ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function $E(e){return e.sort((n,r)=>{const i=_e(n,"priority")||100,s=_e(r,"priority")||100;return i>s?-1:i<s?1:0})}function QB(e){const t=$E(FE(e)),n=EZ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function JB(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var g;u.isBlock&&d>r&&(l+=s);const y=o?.[u.type.name];if(y)return h&&(l+=y({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(g=u?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),l}function kZ(e,t){const n={from:0,to:e.content.size};return JB(e,n,t)}function e6(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function ts(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function t6(e,t){const n=ts(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Kt(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function NZ(e,t){const n=Kt(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function lm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function n6(e,t){const n=lm(typeof t=="string"?t:t.name,e.schema);return n==="node"?NZ(e,t):n==="mark"?t6(e,t):{}}function TZ(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function AZ(e){const t=TZ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function r6(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),g=t.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:h}})})}),AZ(r)}function GE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Zh(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:GE(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function i6(e,t,n={}){return e.find(r=>r.type===t&&Zh(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function uD(e,t,n={}){return!!i6(e,t,n)}function KE(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!i6([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&uD([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&uD([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function YE(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=KE(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var MZ=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function O0(e,t){return t.nodes[e]||t.marks[e]||null}function wh(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var _Z=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function hC(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?ts(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Zh(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,x=g.pos;e.doc.nodesBetween(y,x,(S,w)=>{if(!S.isText&&!S.marks.length)return;const E=Math.max(y,w),N=Math.min(x,w+S.nodeSize),k=N-E;o+=k,l.push(...S.marks.map(T=>({mark:T,from:E,to:N})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Zh(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=o}function oo(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Kt(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),x=Math.min(i,g+p.nodeSize);l.push({node:p,from:y,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Zh(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}function DZ(e,t,n={}){if(!t)return oo(e,null,n)||hC(e,null,n);const r=lm(t,e.schema);return r==="node"?oo(e,t,n):r==="mark"?hC(e,t,n):!1}var RZ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=am(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},OZ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function dD(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function fD(e,t){const{nodeExtensions:n}=Zu(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=st(_e(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function cm(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(cm(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function s6(e){return e instanceof De}function o6(e){return e instanceof qe}function Wo(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function a6(e,t=null){if(!t)return null;const n=Ue.atStart(e),r=Ue.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?qe.create(e,Wo(0,i,s),Wo(e.content.size,i,s)):qe.create(e,Wo(t,i,s),Wo(t,i,s))}function jZ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof an||i instanceof cn))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}var um=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},LZ=(e,t)=>{if(GE(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Qf(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=_Z(d)+s;return o.forEach(g=>{if(h)return;const y=LZ(p,g.find);if(!y)return;const x=u.state.tr,S=sm({state:u.state,transaction:x}),w={from:r-(y[0].length-s.length),to:i},{commands:E,chain:N,can:k}=new om({editor:n,state:S});g.handler({state:S,range:w,match:y,commands:E,chain:N,can:k})===null||!x.steps.length||(g.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),h=!0)}),h}function PZ(e){const{editor:t,rules:n}=e,r=new Dt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=UE(me.from(h),o.schema);const{from:p}=u,g=p+h.length;Qf({editor:t,from:p,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Qf({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Qf({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Qf({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function IZ(e){return Object.prototype.toString.call(e).slice(8,-1)}function Jf(e){return IZ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function l6(e,t){const n={...e};return Jf(e)&&Jf(t)&&Object.keys(t).forEach(r=>{Jf(t[r])&&Jf(e[r])?n[r]=l6(e[r],t[r]):n[r]=t[r]}),n}var WE=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...st(_e(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...st(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>l6(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Ca=class c6 extends WE{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new c6(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function BZ(e){return typeof e=="number"}var zZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},qZ=(e,t,n)=>{if(GE(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function VZ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new om({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,x)=>{var S,w,E,N,k;if((w=(S=y.type)==null?void 0:S.spec)!=null&&w.code||!(y.isText||y.isTextblock||y.isInline))return;const T=(k=(N=(E=y.content)==null?void 0:E.size)!=null?N:y.nodeSize)!=null?k:0,A=Math.max(r,x),M=Math.min(i,x+T);if(A>=M)return;const D=y.isText?y.text||"":y.textBetween(A-x,M-x,void 0,"");qZ(D,s.find,o).forEach(P=>{if(P.index===void 0)return;const $=A+P.index+1,V=$+P[0].length,z={from:n.tr.mapping.map($),to:n.tr.mapping.map(V)},Y=s.handler({state:n,range:z,match:P,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(Y)})}),p.every(y=>y!==null)}var eh=null,HZ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function FZ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:g,rule:y,pasteEvt:x})=>{const S=h.tr,w=sm({state:h,transaction:S});if(!(!VZ({editor:t,state:w,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:x,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new Dt({view(p){const g=x=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(x.target)?p.dom.parentElement:null,r&&(eh=t)},y=()=>{eh&&(eh=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const y=eh;y?.isEditable&&setTimeout(()=>{const x=y.state.selection;x&&y.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,g)=>{var y;const x=(y=g.clipboardData)==null?void 0:y.getData("text/html");return o=g,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,y)=>{const x=p[0],S=x.getMeta("uiEvent")==="paste"&&!i,w=x.getMeta("uiEvent")==="drop"&&!s,E=x.getMeta("applyPasteRules"),N=!!E;if(!S&&!w&&!N)return;if(N){let{text:A}=E;typeof A=="string"?A=A:A=UE(me.from(A),y.schema);const{from:M}=E,D=M+A.length,R=HZ(A);return u({rule:h,state:y,from:M,to:{b:D},pasteEvt:R})}const k=g.doc.content.findDiffStart(y.doc.content),T=g.doc.content.findDiffEnd(y.doc.content);if(!(!BZ(k)||!T||k===T.b))return u({rule:h,state:y,from:k,to:T,pasteEvt:o})}}))}var dm=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=QB(e),this.schema=CZ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:O0(t.name,this.schema)},r=_e(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return $E([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:O0(r.name,this.schema)},s=[],o=_e(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&_e(r,"exitable",i)&&(l.ArrowRight=()=>Ca.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([y,x])=>[y,()=>x({editor:e})]));l={...l,...g}}const u=WX(l);s.push(u);const d=_e(r,"addInputRules",i);if(dD(r,e.options.enableInputRules)&&d){const g=d();if(g&&g.length){const y=PZ({editor:e,rules:g}),x=Array.isArray(y)?y:[y];s.push(...x)}}const h=_e(r,"addPasteRules",i);if(dD(r,e.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=FZ({editor:e,rules:g});s.push(...y)}}const p=_e(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return ZB(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Zu(this.extensions);return Object.fromEntries(t.filter(n=>!!_e(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Kt(n.name,this.schema)},s=_e(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const g=Xh(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Zu(this.extensions);return Object.fromEntries(t.filter(n=>!!_e(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:ts(n.name,this.schema)},s=_e(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=Xh(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{sJ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:O0(t.name,this.schema)};t.type==="mark"&&((n=st(_e(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=_e(t,"onBeforeCreate",r),s=_e(t,"onCreate",r),o=_e(t,"onUpdate",r),l=_e(t,"onSelectionUpdate",r),u=_e(t,"onTransaction",r),d=_e(t,"onFocus",r),h=_e(t,"onBlur",r),p=_e(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};dm.resolve=QB;dm.sort=$E;dm.flatten=FE;var UZ={};KB(UZ,{ClipboardTextSerializer:()=>d6,Commands:()=>p6,Delete:()=>m6,Drop:()=>g6,Editable:()=>y6,FocusEvents:()=>b6,Keymap:()=>x6,Paste:()=>w6,Tabindex:()=>S6,focusEventsPluginKey:()=>v6});var It=class u6 extends WE{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new u6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},d6=It.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Dt({key:new dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=e6(n);return JB(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),f6={};KB(f6,{blur:()=>$Z,clearContent:()=>GZ,clearNodes:()=>KZ,command:()=>YZ,createParagraphNear:()=>WZ,cut:()=>XZ,deleteCurrentNode:()=>ZZ,deleteNode:()=>QZ,deleteRange:()=>JZ,deleteSelection:()=>eQ,enter:()=>tQ,exitCode:()=>nQ,extendMarkRange:()=>rQ,first:()=>iQ,focus:()=>oQ,forEach:()=>aQ,insertContent:()=>lQ,insertContentAt:()=>uQ,joinBackward:()=>hQ,joinDown:()=>fQ,joinForward:()=>pQ,joinItemBackward:()=>mQ,joinItemForward:()=>gQ,joinTextblockBackward:()=>yQ,joinTextblockForward:()=>vQ,joinUp:()=>dQ,keyboardShortcut:()=>xQ,lift:()=>wQ,liftEmptyBlock:()=>SQ,liftListItem:()=>CQ,newlineInCode:()=>EQ,resetAttributes:()=>kQ,scrollIntoView:()=>NQ,selectAll:()=>TQ,selectNodeBackward:()=>AQ,selectNodeForward:()=>MQ,selectParentNode:()=>_Q,selectTextblockEnd:()=>DQ,selectTextblockStart:()=>RQ,setContent:()=>OQ,setMark:()=>LQ,setMeta:()=>PQ,setNode:()=>IQ,setNodeSelection:()=>BQ,setTextSelection:()=>zQ,sinkListItem:()=>qQ,splitBlock:()=>VQ,splitListItem:()=>HQ,toggleList:()=>FQ,toggleMark:()=>UQ,toggleNode:()=>$Q,toggleWrap:()=>GQ,undoInputRule:()=>KQ,unsetAllMarks:()=>YQ,unsetMark:()=>WQ,updateAttributes:()=>XQ,wrapIn:()=>ZQ,wrapInList:()=>QQ});var $Z=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),GZ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),KZ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),g=d.resolve(h.map(u+l.nodeSize)),y=p.blockRange(g);if(!y)return;const x=Xl(y);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(y.start,S)}(x||x===0)&&t.lift(y,x)})}),!0},YZ=e=>t=>e(t),WZ=()=>({state:e,dispatch:t})=>FB(e,t),XZ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new qe(r.doc.resolve(Math.max(o-1,0)))),!0},ZZ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},QZ=e=>({tr:t,state:n,dispatch:r})=>{const i=Kt(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},JZ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},eQ=()=>({state:e,dispatch:t})=>BE(e,t),tQ=()=>({commands:e})=>e.keyboardShortcut("Enter"),nQ=()=>({state:e,dispatch:t})=>tZ(e,t),rQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=ts(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=KE(u,s,t);if(p&&p.from<=d&&p.to>=h){const g=qe.create(o,p.from,p.to);n.setSelection(g)}}return!0},iQ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function sQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function XE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var oQ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(XE()||sQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!o6(n.state.selection))return o(),!0;const l=a6(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},aQ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),lQ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),cQ=e=>!("type"in e),uQ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Xu(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=Xu(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,y=!0;if((cQ(l)?l:[l]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),h===p&&y){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof me){let w="";t.forEach(E=>{E.text&&(w+=E.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),E=w.node(),N=w.parentOffset===0,k=E.isText||E.isTextblock,T=E.content.size>0;N&&k&&T&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&jZ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},dQ=()=>({state:e,dispatch:t})=>QX(e,t),fQ=()=>({state:e,dispatch:t})=>JX(e,t),hQ=()=>({state:e,dispatch:t})=>PB(e,t),pQ=()=>({state:e,dispatch:t})=>qB(e,t),mQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Jp(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},gQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Jp(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},yQ=()=>({state:e,dispatch:t})=>XX(e,t),vQ=()=>({state:e,dispatch:t})=>ZX(e,t);function h6(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function bQ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))XE()||h6()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var xQ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=bQ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},wQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Kt(e,n.schema);return oo(n,i,t)?eZ(n,r):!1},SQ=()=>({state:e,dispatch:t})=>UB(e,t),CQ=e=>({state:t,dispatch:n})=>{const r=Kt(e,t.schema);return fZ(r)(t,n)},EQ=()=>({state:e,dispatch:t})=>HB(e,t);function hD(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var kQ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=lm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Kt(e,r.schema)),l==="mark"&&(o=ts(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,hD(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(hD(p.attrs,t)))})})}),!0):!1},NQ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),TQ=()=>({tr:e,dispatch:t})=>{if(t){const n=new or(e.doc);e.setSelection(n)}return!0},AQ=()=>({state:e,dispatch:t})=>BB(e,t),MQ=()=>({state:e,dispatch:t})=>VB(e,t),_Q=()=>({state:e,dispatch:t})=>iZ(e,t),DQ=()=>({state:e,dispatch:t})=>aZ(e,t),RQ=()=>({state:e,dispatch:t})=>oZ(e,t),OQ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=fC(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function jQ(e,t,n){var r;const{selection:i}=t;let s=null;if(o6(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,g)=>{if(d)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(n),x=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=y&&x}return!d}),d})}var LQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=ts(e,r.schema);if(i)if(o){const d=t6(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(g,y)=>{const x=Math.max(y,h),S=Math.min(y+g.nodeSize,p);g.marks.find(E=>E.type===u)?g.marks.forEach(E=>{u===E.type&&n.addMark(x,S,u.create({...E.attrs,...t}))}):n.addMark(x,S,u.create(t))})});return jQ(r,n,u)},PQ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),IQ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Kt(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>aD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>aD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},BQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Wo(e,0,r.content.size),s=De.create(r,i);t.setSelection(s)}return!0},zQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=qe.atStart(r).from,l=qe.atEnd(r).to,u=Wo(i,o,l),d=Wo(s,o,l),h=qe.create(r,u,d);t.setSelection(h)}return!0},qQ=e=>({state:t,dispatch:n})=>{const r=Kt(e,t.schema);return mZ(r)(t,n)};function pD(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var VQ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=wh(d,l.node().type.name,l.node().attrs);if(s instanceof De&&s.node.isBlock)return!l.parentOffset||!Wi(o,l.pos)?!1:(r&&(e&&pD(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=l.depth===0?void 0:vZ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&g?[{type:g,attrs:h}]:void 0,x=Wi(t.doc,t.mapping.map(l.pos),1,y);if(!y&&!x&&Wi(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(x=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(x&&(s instanceof qe&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,y),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&pD(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},HQ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Kt(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let E=me.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-N;R>=u.depth-3;R-=1)E=me.from(u.node(R).copy(E));const k=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,T={...wh(g,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(T))||void 0;E=E.append(me.from(l.createAndFill(null,A)||void 0));const M=u.before(u.depth-(N-1));n.replace(M,u.after(-k),new xe(E,4-N,0));let D=-1;n.doc.nodesBetween(M,n.doc.content.size,(R,P)=>{if(D>-1)return!1;R.isTextblock&&R.content.size===0&&(D=P+1)}),D>-1&&n.setSelection(qe.near(n.doc.resolve(D))),n.scrollIntoView()}return!0}const y=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...wh(g,p.type.name,p.attrs),...t},S={...wh(g,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=y?[{type:l,attrs:x},{type:y,attrs:S}]:[{type:l,attrs:x}];if(!Wi(n.doc,u.pos,2))return!1;if(i){const{selection:E,storedMarks:N}=r,{splittableMarks:k}=s.extensionManager,T=N||E.$to.parentOffset&&E.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!T||!i)return!0;const A=T.filter(M=>k.includes(M.type.name));n.ensureMarks(A)}return!0},j0=(e,t)=>{const n=am(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&co(e.doc,n.pos)&&e.join(n.pos),!0},L0=(e,t)=>{const n=am(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&co(e.doc,r)&&e.join(r),!0},FQ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,y=Kt(e,o.schema),x=Kt(t,o.schema),{selection:S,storedMarks:w}=o,{$from:E,$to:N}=S,k=E.blockRange(N),T=w||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const A=am(M=>fD(M.type.name,p))(S);if(k.depth>=1&&A&&k.depth-A.depth<=1){if(A.node.type===y)return d.liftListItem(x);if(fD(A.node.type.name,p)&&y.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,y),!0)).command(()=>j0(s,y)).command(()=>L0(s,y)).run()}return!n||!T||!l?u().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>j0(s,y)).command(()=>L0(s,y)).run():u().command(()=>{const M=h().wrapInList(y,r),D=T.filter(R=>g.includes(R.type.name));return s.ensureMarks(D),M?!0:d.clearNodes()}).wrapInList(y,r).command(()=>j0(s,y)).command(()=>L0(s,y)).run()},UQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=ts(e,r.schema);return hC(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},$Q=(e,t,n={})=>({state:r,commands:i})=>{const s=Kt(e,r.schema),o=Kt(t,r.schema),l=oo(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},GQ=(e,t={})=>({state:n,commands:r})=>{const i=Kt(e,n.schema);return oo(n,i,t)?r.lift(i):r.wrapIn(i,t)},KQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},YQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},WQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=ts(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:y}=l;const x=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=KE(d,u,x);S&&(g=S.from,y=S.to),n.removeMark(g,y,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},XQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=lm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Kt(e,r.schema)),l==="mark"&&(o=ts(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,g,y,x;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(E=>{if(o===E.type){const N=Math.max(w,d),k=Math.min(w+S.nodeSize,h);n.addMark(N,k,o.create({...E.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(y,x,o.create({...S.attrs,...t}))}))}),!0):!1},ZQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Kt(e,n.schema);return lZ(i,t)(n,r)},QQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Kt(e,n.schema);return cZ(i,t)(n,r)},p6=It.create({name:"commands",addCommands(){return{...f6}}}),m6=It.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=YB(e.before,[e,...t]);r6(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(x,S)=>{const w=S+x.nodeSize-2,E=y.oldRange.from<=S&&w<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:y.oldRange,newRange:y.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,x)=>{var S,w;if(y instanceof Gr){const E=g.slice(x).map(y.from,-1),N=g.slice(x).map(y.to),k=g.invert().map(E,-1),T=g.invert().map(N),A=(S=h.doc.nodeAt(E-1))==null?void 0:S.marks.some(D=>D.eq(y.mark)),M=(w=h.doc.nodeAt(N))==null?void 0:w.marks.some(D=>D.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:k,to:T},newRange:{from:E,to:N},partial:!!(M||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),g6=It.create({name:"drop",addProseMirrorPlugins(){return[new Dt({key:new dn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),y6=It.create({name:"editable",addProseMirrorPlugins(){return[new Dt({key:new dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),v6=new dn("focusEvents"),b6=It.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Dt({key:v6,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),x6=It.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:g,parent:y}=p,x=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=x.parent.type.spec.isolating,w=p.pos-p.parentOffset,E=S&&x.parent.childCount===1?w===p.pos:Ue.atStart(d).from===g;return!h||!y.type.isTextblock||y.textContent.length||!E||E&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return XE()||h6()?s:i},addProseMirrorPlugins(){return[new Dt({key:new dn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Ue.atStart(t.doc).from,d=Ue.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!cm(n.doc))return;const g=n.tr,y=sm({state:n,transaction:g}),{commands:x}=new om({editor:this.editor,state:y});if(x.clearNodes(),!!g.steps.length)return g}})]}}),w6=It.create({name:"paste",addProseMirrorPlugins(){return[new Dt({key:new dn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),S6=It.create({name:"tabindex",addProseMirrorPlugins(){return[new Dt({key:new dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),JQ=class bl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new bl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new bl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new bl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new bl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new bl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},eJ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function tJ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var nJ=class extends yZ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=a6(t,this.options.autofocus);this.editorState=Nl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=tJ(eJ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=XB(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[y6,d6.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),p6,b6,x6,S6,g6,w6,m6].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new dm(r,this)}createCommandManager(){this.commandManager=new om({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=fC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=fC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new OB(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return n6(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return DZ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return UE(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return kZ(this.state.doc,{blockSeparator:t,textSerializers:{...e6(this.schema),...n}})}get isEmpty(){return cm(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new JQ(t,this)}get $doc(){return this.$pos(0)}};function ql(e){return new um({find:e.find,handler:({state:t,range:n,match:r})=>{const i=st(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(YE(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(S=>S===e.type&&S!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const g=n.from+u+o.length;s.addMark(n.from+u,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function rJ(e){return new um({find:e.find,handler:({state:t,range:n,match:r})=>{const i=st(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function pC(e){return new um({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=st(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Vl(e){return new um({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=st(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&TE(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:y}=e.editor.extensionManager,x=g||p.$to.parentOffset&&p.$from.marks();if(x){const S=x.filter(w=>y.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&co(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function iJ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof De){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function sJ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let g=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(g=!0)}),g){const y=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,y)}}),s.docChanged&&t.view.dispatch(s)}var lr=class C6 extends WE{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new C6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function fa(e){return new zZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=st(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),g=p+l.length;if(YE(n.from,n.to,t.doc).filter(x=>x.mark.type.excluded.find(w=>w===e.type&&w!==x.mark.type)).filter(x=>x.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var P0,mD;function oJ(){return mD||(mD=1,P0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),P0}var aJ=oJ();const lJ=dd(aJ);var I0={exports:{}},B0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gD;function cJ(){if(gD)return B0;gD=1;var e=fd(),t=vI();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return B0.useSyncExternalStoreWithSelector=function(d,h,p,g,y){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function E(M){if(!N){if(N=!0,k=M,M=g(M),y!==void 0&&S.hasValue){var D=S.value;if(y(D,M))return T=D}return T=M}if(D=T,r(k,M))return D;var R=g(M);return y!==void 0&&y(D,R)?(k=M,D):(k=M,T=R)}var N=!1,k,T,A=p===void 0?null:p;return[function(){return E(h())},A===null?void 0:function(){return E(A())}]},[h,p,g,y]);var w=i(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},B0}var yD;function uJ(){return yD||(yD=1,I0.exports=cJ()),I0.exports}var E6=uJ();const dJ=dd(E6);var fJ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},hJ=({contentComponent:e})=>{const t=bI.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(t)})};function pJ(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:h5.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var mJ=class extends Le.Component{constructor(e){var t;super(e),this.editorContentRef=Le.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=pJ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:fJ(t,this.editorContentRef),...n}),e?.contentComponent&&v.jsx(hJ,{contentComponent:e.contentComponent})]})}},gJ=O.forwardRef((e,t)=>{const n=Le.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Le.createElement(mJ,{key:n,innerRef:t,...e})}),vD=Le.memo(gJ),yJ=typeof window<"u"?O.useLayoutEffect:O.useEffect,vJ=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function bJ(e){var t;const[n]=O.useState(()=>new vJ(e.editor)),r=E6.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:lJ);return yJ(()=>n.watch(e.editor),[e.editor,n]),O.useDebugValue(r),r}var xJ=!1,mC=typeof window>"u",wJ=mC||!!(typeof window<"u"&&window.next),SJ=class k6{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?mC||wJ?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new nJ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?k6.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function CJ(e={},t=[]){const n=O.useRef(e);n.current=e;const[r]=O.useState(()=>new SJ(n)),i=bI.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(t)),bJ({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var EJ=O.createContext({editor:null});EJ.Consumer;var kJ=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),NJ=()=>O.useContext(kJ);Le.forwardRef((e,t)=>{const{onDragStart:n}=NJ(),r=e.as||"div";return v.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Le.createContext({markViewContentRef:()=>{}});var Qh=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},TJ=/^\s*>\s$/,AJ=lr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Qh("blockquote",{...Gt(this.options.HTMLAttributes,e),children:Qh("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Vl({find:TJ,type:this.type})]}}),MJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,_J=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,DJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,RJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,OJ=Ca.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Qh("strong",{...Gt(this.options.HTMLAttributes,e),children:Qh("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ql({find:MJ,type:this.type}),ql({find:DJ,type:this.type})]},addPasteRules(){return[fa({find:_J,type:this.type}),fa({find:RJ,type:this.type})]}}),jJ=/(^|[^`])`([^`]+)`(?!`)$/,LJ=/(^|[^`])`([^`]+)`(?!`)/g,PJ=Ca.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ql({find:jJ,type:this.type})]},addPasteRules(){return[fa({find:LJ,type:this.type})]}}),IJ=/^```([a-z]+)?[\s\n]$/,BJ=/^~~~([a-z]+)?[\s\n]$/,zJ=lr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Gt(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let g=0,y=0;const x=l-u;for(let T=0;T<p.length;T+=1){if(y+p[T].length>=x){g=T;break}y+=p[T].length+1}const w=((o=p[g].match(/^ */))==null?void 0:o[0])||"",E=Math.min(w.length,this.options.tabSize);if(E===0)return!0;let N=u;for(let T=0;T<g;T+=1)N+=p[T].length+1;return s.delete(N,N+E),l-N<=E&&s.setSelection(qe.create(s.doc,N)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const y=((g=p.match(/^ */))==null?void 0:g[0])||"",x=Math.min(y.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Ue.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[pC({find:IJ,type:this.type,getAttributes:e=>({language:e[1]})}),pC({find:BJ,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Dt({key:new dn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(qe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),qJ=lr.create({name:"doc",topNode:!0,content:"block+"}),VJ=lr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Gt(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(g=>l.includes(g.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),N6=lr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Gt(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>pC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),HJ=N6,FJ=lr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Gt(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!iJ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return s6(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(qe.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(De.create(s.doc,u.pos)):s.setSelection(qe.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(qe.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rJ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),UJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,$J=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,GJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YJ=Ca.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ql({find:UJ,type:this.type}),ql({find:GJ,type:this.type})]},addPasteRules(){return[fa({find:$J,type:this.type}),fa({find:KJ,type:this.type})]}});const WJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",XJ="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",gC="numeric",yC="ascii",vC="alpha",Tu="asciinumeric",du="alphanumeric",bC="domain",T6="emoji",ZJ="scheme",QJ="slashscheme",z0="whitespace";function JJ(e,t){return e in t||(t[e]=[]),t[e]}function Xo(e,t,n){t[gC]&&(t[Tu]=!0,t[du]=!0),t[yC]&&(t[Tu]=!0,t[vC]=!0),t[Tu]&&(t[du]=!0),t[vC]&&(t[du]=!0),t[du]&&(t[bC]=!0),t[T6]&&(t[bC]=!0);for(const r in t){const i=JJ(r,n);i.indexOf(e)<0&&i.push(e)}}function eee(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Vn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Vn.groups={};Vn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Vn.groups;let i;return t&&t.j?i=t:(i=new Vn(t),n&&r&&Xo(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Vn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Vn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Vn,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(eee(o.t,r),n);Xo(s,u,r)}else n&&Xo(s,n,r);o.t=s}return i.j[e]=o,o}};const $e=(e,t,n,r,i)=>e.ta(t,n,r,i),At=(e,t,n,r,i)=>e.tr(t,n,r,i),bD=(e,t,n,r,i)=>e.ts(t,n,r,i),ge=(e,t,n,r,i)=>e.tt(t,n,r,i),$i="WORD",xC="UWORD",A6="ASCIINUMERICAL",M6="ALPHANUMERICAL",Qu="LOCALHOST",wC="TLD",SC="UTLD",Sh="SCHEME",xl="SLASH_SCHEME",ZE="NUM",CC="WS",QE="NL",Au="OPENBRACE",Mu="CLOSEBRACE",Jh="OPENBRACKET",ep="CLOSEBRACKET",tp="OPENPAREN",np="CLOSEPAREN",rp="OPENANGLEBRACKET",ip="CLOSEANGLEBRACKET",sp="FULLWIDTHLEFTPAREN",op="FULLWIDTHRIGHTPAREN",ap="LEFTCORNERBRACKET",lp="RIGHTCORNERBRACKET",cp="LEFTWHITECORNERBRACKET",up="RIGHTWHITECORNERBRACKET",dp="FULLWIDTHLESSTHAN",fp="FULLWIDTHGREATERTHAN",hp="AMPERSAND",pp="APOSTROPHE",mp="ASTERISK",Hs="AT",gp="BACKSLASH",yp="BACKTICK",vp="CARET",$s="COLON",JE="COMMA",bp="DOLLAR",li="DOT",xp="EQUALS",e2="EXCLAMATION",Sr="HYPHEN",_u="PERCENT",wp="PIPE",Sp="PLUS",Cp="POUND",Du="QUERY",t2="QUOTE",_6="FULLWIDTHMIDDLEDOT",n2="SEMI",ci="SLASH",Ru="TILDE",Ep="UNDERSCORE",D6="EMOJI",kp="SYM";var R6=Object.freeze({__proto__:null,ALPHANUMERICAL:M6,AMPERSAND:hp,APOSTROPHE:pp,ASCIINUMERICAL:A6,ASTERISK:mp,AT:Hs,BACKSLASH:gp,BACKTICK:yp,CARET:vp,CLOSEANGLEBRACKET:ip,CLOSEBRACE:Mu,CLOSEBRACKET:ep,CLOSEPAREN:np,COLON:$s,COMMA:JE,DOLLAR:bp,DOT:li,EMOJI:D6,EQUALS:xp,EXCLAMATION:e2,FULLWIDTHGREATERTHAN:fp,FULLWIDTHLEFTPAREN:sp,FULLWIDTHLESSTHAN:dp,FULLWIDTHMIDDLEDOT:_6,FULLWIDTHRIGHTPAREN:op,HYPHEN:Sr,LEFTCORNERBRACKET:ap,LEFTWHITECORNERBRACKET:cp,LOCALHOST:Qu,NL:QE,NUM:ZE,OPENANGLEBRACKET:rp,OPENBRACE:Au,OPENBRACKET:Jh,OPENPAREN:tp,PERCENT:_u,PIPE:wp,PLUS:Sp,POUND:Cp,QUERY:Du,QUOTE:t2,RIGHTCORNERBRACKET:lp,RIGHTWHITECORNERBRACKET:up,SCHEME:Sh,SEMI:n2,SLASH:ci,SLASH_SCHEME:xl,SYM:kp,TILDE:Ru,TLD:wC,UNDERSCORE:Ep,UTLD:SC,UWORD:xC,WORD:$i,WS:CC});const Hi=/[a-z]/,nu=new RegExp("\\p{L}","u"),q0=new RegExp("\\p{Emoji}","u"),Fi=/\d/,V0=/\s/,xD="\r",H0=`
`,tee="",nee="",F0="";let th=null,nh=null;function ree(e=[]){const t={};Vn.groups=t;const n=new Vn;th==null&&(th=wD(WJ)),nh==null&&(nh=wD(XJ)),ge(n,"'",pp),ge(n,"{",Au),ge(n,"}",Mu),ge(n,"[",Jh),ge(n,"]",ep),ge(n,"(",tp),ge(n,")",np),ge(n,"<",rp),ge(n,">",ip),ge(n,"",sp),ge(n,"",op),ge(n,"",ap),ge(n,"",lp),ge(n,"",cp),ge(n,"",up),ge(n,"",dp),ge(n,"",fp),ge(n,"&",hp),ge(n,"*",mp),ge(n,"@",Hs),ge(n,"`",yp),ge(n,"^",vp),ge(n,":",$s),ge(n,",",JE),ge(n,"$",bp),ge(n,".",li),ge(n,"=",xp),ge(n,"!",e2),ge(n,"-",Sr),ge(n,"%",_u),ge(n,"|",wp),ge(n,"+",Sp),ge(n,"#",Cp),ge(n,"?",Du),ge(n,'"',t2),ge(n,"/",ci),ge(n,";",n2),ge(n,"~",Ru),ge(n,"_",Ep),ge(n,"\\",gp),ge(n,"",_6);const r=At(n,Fi,ZE,{[gC]:!0});At(r,Fi,r);const i=At(r,Hi,A6,{[Tu]:!0}),s=At(r,nu,M6,{[du]:!0}),o=At(n,Hi,$i,{[yC]:!0});At(o,Fi,i),At(o,Hi,o),At(i,Fi,i),At(i,Hi,i);const l=At(n,nu,xC,{[vC]:!0});At(l,Hi),At(l,Fi,s),At(l,nu,l),At(s,Fi,s),At(s,Hi),At(s,nu,s);const u=ge(n,H0,QE,{[z0]:!0}),d=ge(n,xD,CC,{[z0]:!0}),h=At(n,V0,CC,{[z0]:!0});ge(n,F0,h),ge(d,H0,u),ge(d,F0,h),At(d,V0,h),ge(h,xD),ge(h,H0),At(h,V0,h),ge(h,F0,h);const p=At(n,q0,D6,{[T6]:!0});ge(p,"#"),At(p,q0,p),ge(p,tee,p);const g=ge(p,nee);ge(g,"#"),At(g,q0,p);const y=[[Hi,o],[Fi,i]],x=[[Hi,null],[nu,l],[Fi,s]];for(let S=0;S<th.length;S++)Ps(n,th[S],wC,$i,y);for(let S=0;S<nh.length;S++)Ps(n,nh[S],SC,xC,x);Xo(wC,{tld:!0,ascii:!0},t),Xo(SC,{utld:!0,alpha:!0},t),Ps(n,"file",Sh,$i,y),Ps(n,"mailto",Sh,$i,y),Ps(n,"http",xl,$i,y),Ps(n,"https",xl,$i,y),Ps(n,"ftp",xl,$i,y),Ps(n,"ftps",xl,$i,y),Xo(Sh,{scheme:!0,ascii:!0},t),Xo(xl,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],N=e[S][1]?{[ZJ]:!0}:{[QJ]:!0};w.indexOf("-")>=0?N[bC]=!0:Hi.test(w)?Fi.test(w)?N[Tu]=!0:N[yC]=!0:N[gC]=!0,bD(n,w,w,N)}return bD(n,"localhost",Qu,{ascii:!0}),n.jd=new Vn(kp),{start:n,tokens:Object.assign({groups:t},R6)}}function O6(e,t){const n=iee(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,g=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=n[o].length,g++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function iee(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Ps(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Vn(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Vn(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function wD(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Ju={defaultProtocol:"http",events:null,format:SD,formatHref:SD,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function r2(e,t=null){let n=Object.assign({},Ju);e&&(n=Object.assign(n,e instanceof r2?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}r2.prototype={o:Ju,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Ju[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function SD(e){return e}function j6(e,t){this.t="token",this.v=e,this.tk=t}j6.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Ju.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function fm(e,t){class n extends j6{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const CD=fm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ED=fm("text"),see=fm("nl"),rh=fm("url",{isLink:!0,toHref(e=Ju.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Qu&&e[1].t===$s}}),xr=e=>new Vn(e);function oee({groups:e}){const t=e.domain.concat([hp,mp,Hs,gp,yp,vp,bp,xp,Sr,ZE,_u,wp,Sp,Cp,ci,kp,Ru,Ep]),n=[pp,$s,JE,li,e2,_u,Du,t2,n2,rp,ip,Au,Mu,ep,Jh,tp,np,sp,op,ap,lp,cp,up,dp,fp],r=[hp,pp,mp,gp,yp,vp,bp,xp,Sr,Au,Mu,_u,wp,Sp,Cp,Du,ci,kp,Ru,Ep],i=xr(),s=ge(i,Ru);$e(s,r,s),$e(s,e.domain,s);const o=xr(),l=xr(),u=xr();$e(i,e.domain,o),$e(i,e.scheme,l),$e(i,e.slashscheme,u),$e(o,r,s),$e(o,e.domain,o);const d=ge(o,Hs);ge(s,Hs,d),ge(l,Hs,d),ge(u,Hs,d);const h=ge(s,li);$e(h,r,s),$e(h,e.domain,s);const p=xr();$e(d,e.domain,p),$e(p,e.domain,p);const g=ge(p,li);$e(g,e.domain,p);const y=xr(CD);$e(g,e.tld,y),$e(g,e.utld,y),ge(d,Qu,y);const x=ge(p,Sr);ge(x,Sr,x),$e(x,e.domain,p),$e(y,e.domain,p),ge(y,li,g),ge(y,Sr,x);const S=ge(y,$s);$e(S,e.numeric,CD);const w=ge(o,Sr),E=ge(o,li);ge(w,Sr,w),$e(w,e.domain,o),$e(E,r,s),$e(E,e.domain,o);const N=xr(rh);$e(E,e.tld,N),$e(E,e.utld,N),$e(N,e.domain,o),$e(N,r,s),ge(N,li,E),ge(N,Sr,w),ge(N,Hs,d);const k=ge(N,$s),T=xr(rh);$e(k,e.numeric,T);const A=xr(rh),M=xr();$e(A,t,A),$e(A,n,M),$e(M,t,A),$e(M,n,M),ge(N,ci,A),ge(T,ci,A);const D=ge(l,$s),R=ge(u,$s),P=ge(R,ci),$=ge(P,ci);$e(l,e.domain,o),ge(l,li,E),ge(l,Sr,w),$e(u,e.domain,o),ge(u,li,E),ge(u,Sr,w),$e(D,e.domain,A),ge(D,ci,A),ge(D,Du,A),$e($,e.domain,A),$e($,t,A),ge($,ci,A);const V=[[Au,Mu],[Jh,ep],[tp,np],[rp,ip],[sp,op],[ap,lp],[cp,up],[dp,fp]];for(let z=0;z<V.length;z++){const[Y,B]=V[z],F=ge(A,Y);ge(M,Y,F),ge(F,B,A);const L=xr(rh);$e(F,t,L);const q=xr();$e(F,n),$e(L,t,L),$e(L,n,q),$e(q,t,L),$e(q,n,q),ge(L,B,A),ge(q,B,A)}return ge(i,Qu,N),ge(i,QE,see),{start:i,tokens:R6}}function aee(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,g=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(U0(ED,t,o)),o=[]),i-=g,h-=g;const y=p.t,x=n.slice(i-h,i);s.push(U0(y,t,x))}}return o.length>0&&s.push(U0(ED,t,o)),s}function U0(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const lee=typeof console<"u"&&console&&console.warn||(()=>{}),cee="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function uee(){return Vn.groups={},pt.scanner=null,pt.parser=null,pt.tokenQueue=[],pt.pluginQueue=[],pt.customSchemes=[],pt.initialized=!1,pt}function kD(e,t=!1){if(pt.initialized&&lee(`linkifyjs: already initialized - will not register custom scheme "${e}" ${cee}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);pt.customSchemes.push([e,t])}function dee(){pt.scanner=ree(pt.customSchemes);for(let e=0;e<pt.tokenQueue.length;e++)pt.tokenQueue[e][1]({scanner:pt.scanner});pt.parser=oee(pt.scanner.tokens);for(let e=0;e<pt.pluginQueue.length;e++)pt.pluginQueue[e][1]({scanner:pt.scanner,parser:pt.parser});return pt.initialized=!0,pt}function i2(e){return pt.initialized||dee(),aee(pt.parser.start,e,O6(pt.scanner.start,e))}i2.scan=O6;function L6(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new r2(n),i=i2(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var s2="[\0- -\u2029]",fee=new RegExp(s2),hee=new RegExp(`${s2}$`),pee=new RegExp(s2,"g");function mee(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function gee(e){return new Dt({key:new dn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=YB(n.doc,[...t]);if(r6(l).forEach(({newRange:d})=>{const h=bZ(r.doc,d,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!hee.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const y=g.split(fee).filter(Boolean);if(y.length<=0)return!1;const x=y[y.length-1],S=p.pos+g.lastIndexOf(x);if(!x)return!1;const w=i2(x).map(E=>E.toObject(e.defaultProtocol));if(!mee(w))return!1;w.filter(E=>E.isLink).map(E=>({...E,from:S+E.start+1,to:S+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{YE(E.from,E.to,r.doc).some(N=>N.mark.type===e.type)||o.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!o.steps.length)return o}})}function yee(e){return new Dt({key:new dn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=n6(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function vee(e){return new Dt({key:new dn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=L6(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function zo(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(pee,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var P6=Ca.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){kD(e);return}kD(e.scheme,e.optionalSlashes)})},onDestroy(){uee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!zo(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!zo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!zo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Gt(this.options.HTMLAttributes,e),0]:["a",Gt(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!zo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!zo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[fa({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=L6(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!zo(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(gee({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!zo(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(yee({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(vee({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),bee=P6,xee=Object.defineProperty,wee=(e,t)=>{for(var n in t)xee(e,n,{get:t[n],enumerable:!0})},See="listItem",ND="textStyle",TD=/^\s*([-+*])\s$/,o2=lr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(See,this.editor.getAttributes(ND)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Vl({find:TD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Vl({find:TD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(ND),editor:this.editor})),[e]}}),a2=lr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Gt(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Cee={};wee(Cee,{findListItemPos:()=>Cd,getNextListDepth:()=>l2,handleBackspace:()=>EC,handleDelete:()=>kC,hasListBefore:()=>I6,hasListItemAfter:()=>Eee,hasListItemBefore:()=>B6,listItemHasSubList:()=>z6,nextListIsDeeper:()=>q6,nextListIsHigher:()=>V6});var Cd=(e,t)=>{const{$from:n}=t.selection,r=Kt(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},l2=(e,t)=>{const n=Cd(e,t);if(!n)return!1;const[,r]=MZ(t,e,n.$pos.pos+4);return r},I6=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},B6=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},z6=(e,t,n)=>{if(!n)return!1;const r=Kt(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},EC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!oo(e.state,t)&&I6(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((g,y)=>{g.type.name===t&&d.push({node:g,pos:y})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!oo(e.state,t)||!OZ(e.state))return!1;const r=Cd(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=z6(t,e.state,s);return B6(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},q6=(e,t)=>{const n=l2(e,t),r=Cd(e,t);return!r||!n?!1:n>r.depth},V6=(e,t)=>{const n=l2(e,t),r=Cd(e,t);return!r||!n?!1:n<r.depth},kC=(e,t)=>{if(!oo(e.state,t)||!RZ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:q6(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():V6(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},Eee=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},H6=It.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&kC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&kC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&EC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&EC(e,n,r)&&(t=!0)}),t}}}}),kee="listItem",AD="textStyle",MD=/^(\d+)\.\s$/,c2=lr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Gt(this.options.HTMLAttributes,n),0]:["ol",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(kee,this.editor.getAttributes(AD)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Vl({find:MD,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Vl({find:MD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(AD)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Nee=/^\s*(\[([( |x])?\])\s$/,Tee=lr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Gt(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const y=n();if(typeof y!="number")return!1;const x=g.doc.nodeAt(y);return g.setNodeMarkup(y,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[Vl({find:Nee,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Aee=lr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Gt(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});It.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(o2.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(a2.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(H6.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(c2.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Tee.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Aee.configure(this.options.taskList)),e}});var Mee=lr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),_ee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Dee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Ree=Ca.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ql({find:_ee,type:this.type})]},addPasteRules(){return[fa({find:Dee,type:this.type})]}}),Oee=lr.create({name:"text",group:"inline"}),F6=Ca.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Gt(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),jee=F6;function Lee(e={}){return new Dt({view(t){return new Pee(t,e)}})}class Pee{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let x=y.getBoundingClientRect(),S=p?x.bottom:x.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:x.left,right:x.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,y=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,h=p.top-u.scrollTop*y}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=GI(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class _t extends Ue{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return _t.valid(r)?new _t(r):Ue.near(r)}content(){return xe.empty}eq(t){return t instanceof _t&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(t.resolve(n.pos))}getBookmark(){return new u2(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Iee(t)||!Bee(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&_t.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(_t.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!De.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(_t.valid(l))return l}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Ue.jsonID("gapcursor",_t);class u2{constructor(t){this.pos=t}map(t){return new u2(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return _t.valid(n)?new _t(n):Ue.near(n)}}function Iee(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Bee(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function zee(){return new Dt({props:{decorations:Fee,createSelectionBetween(e,t,n){return t.pos==n.pos&&_t.valid(n)?new _t(n):null},handleClick:Vee,handleKeyDown:qee,handleDOMEvents:{beforeinput:Hee}}})}const qee=jB({ArrowLeft:ih("horiz",-1),ArrowRight:ih("horiz",1),ArrowUp:ih("vert",-1),ArrowDown:ih("vert",1)});function ih(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof qe){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=_t.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new _t(d))),!0):!1}}function Vee(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!_t.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&De.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new _t(r))),!0)}function Hee(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof _t))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=me.empty;for(let o=r.length-1;o>=0;o--)i=me.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new xe(i,0,0));return s.setSelection(qe.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function Fee(e){if(!(e.selection instanceof _t))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",St.create(e.doc,[_n.widget(e.selection.head,t,{key:"gapcursor"})])}var Np=200,un=function(){};un.prototype.append=function(t){return t.length?(t=un.from(t),!this.length&&t||t.length<Np&&this.leafAppend(t)||this.length<Np&&t.leafPrepend(this)||this.appendInner(t)):this};un.prototype.prepend=function(t){return t.length?un.from(t).append(this):this};un.prototype.appendInner=function(t){return new Uee(this,t)};un.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?un.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};un.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};un.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};un.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};un.from=function(t){return t instanceof un?t:t&&t.length?new U6(t):un.empty};var U6=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Np)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Np)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(un);un.empty=new U6([]);var Uee=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(un);const $ee=500;class Ur{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new ui(p.map));let y=p.step.map(i.slice(s)),x;y&&o.maybeStep(y).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new ui(x,void 0,void 0,d.length+h.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Ur(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),g=new ui(t.mapping.maps[h],p,n),y;(y=u&&u.merge(g))&&(g=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(u=g)}let d=o-r.depth;return d>Kee&&(l=Gee(l,d),o-=d),new Ur(l.append(s),o)}remapping(t,n){let r=new $u;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Ur(this.items.append(t.map(n=>new ui(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let u=n;this.items.forEach(g=>{let y=s.getMirror(--u);if(y==null)return;o=Math.min(o,y);let x=s.maps[y];if(g.step){let S=t.steps[y].invert(t.docs[y]),w=g.selection&&g.selection.map(s.slice(u+1,y));w&&l++,r.push(new ui(x,S,w))}else r.push(new ui(x))},i);let d=[];for(let g=n;g<o;g++)d.push(new ui(s.maps[g]));let h=this.items.slice(0,i).append(d).append(r),p=new Ur(h,l);return p.emptyItemCount()>$ee&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new ui(d.invert(),u,h),g,y=i.length-1;(g=i.length&&i[y].merge(p))?i[y]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new Ur(un.from(i.reverse()),s)}}Ur.empty=new Ur(un.empty,0);function Gee(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class ui{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new ui(n.getMap().invert(),n,this.selection)}}}class Fs{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Kee=20;function Yee(e,t,n,r){let i=n.getMeta(sa),s;if(i)return i.historyState;n.getMeta(Zee)&&(e=new Fs(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(sa))return o.getMeta(sa).redo?new Fs(e.done.addTransform(n,void 0,r,Ch(t)),e.undone,_D(n.mapping.maps),e.prevTime,e.prevComposition):new Fs(e.done,e.undone.addTransform(n,void 0,r,Ch(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Wee(n,e.prevRanges)),d=o?$0(e.prevRanges,n.mapping):_D(n.mapping.maps);return new Fs(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,Ch(t)),Ur.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Fs(e.done.rebased(n,s),e.undone.rebased(n,s),$0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Fs(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),$0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Wee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function _D(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function $0(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function Xee(e,t,n){let r=Ch(t),i=sa.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new Fs(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(sa,{redo:n,historyState:u})}let G0=!1,DD=null;function Ch(e){let t=e.plugins;if(DD!=t){G0=!1,DD=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){G0=!0;break}}return G0}const sa=new dn("history"),Zee=new dn("closeHistory");function Qee(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Dt({key:sa,state:{init(){return new Fs(Ur.empty,Ur.empty,null,0,-1)},apply(t,n,r){return Yee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?G6:r=="historyRedo"?K6:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function $6(e,t){return(n,r)=>{let i=sa.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=Xee(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const G6=$6(!1,!0),K6=$6(!0,!0);It.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Dt({key:new dn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var Jee=It.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Lee(this.options)]}});It.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Dt({key:new dn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return St.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(_n.node(d,d+u.nodeSize,{class:this.options.className}))}),St.create(e,s)}}})]}});var ete=It.create({name:"gapCursor",addProseMirrorPlugins(){return[zee()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=st(_e(e,"allowGapCursor",n)))!=null?t:null}}}),tte=It.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Dt({key:new dn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&cm(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=_n.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),St.create(e,i)}}})]}});It.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Dt({key:new dn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||s6(n.selection)||e.view.dragging?null:St.create(n.doc,[_n.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function RD({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var nte=It.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new dn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Dt({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!RD({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!RD({node:i,types:t})}}})]}}),rte=It.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>G6(e,t),redo:()=>({state:e,dispatch:t})=>K6(e,t)}},addProseMirrorPlugins(){return[Qee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),ite=It.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(OJ.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(AJ.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(o2.configure(this.options.bulletList)),this.options.code!==!1&&i.push(PJ.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(zJ.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(qJ.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Jee.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(ete.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(VJ.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(N6.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(rte.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(FJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(YJ.configure(this.options.italic)),this.options.listItem!==!1&&i.push(a2.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(H6.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(P6.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(c2.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Mee.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Ree.configure(this.options.strike)),this.options.text!==!1&&i.push(Oee.configure(this.options.text)),this.options.underline!==!1&&i.push(F6.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(nte.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),ste=ite,ote=It.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),ate=ote,lte=tte,cte=o2,ute=c2,dte=a2;const hm=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return v.jsxs(ln.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&v.jsx(ln.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},pm=()=>{const[e,t]=Le.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}},hl=({onClick:e,disabled:t,active:n,title:r,children:i})=>v.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),OD=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),v.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[v.jsx("option",{value:"0",children:"P"}),v.jsx("option",{value:"1",children:"H1"}),v.jsx("option",{value:"2",children:"H2"}),v.jsx("option",{value:"3",children:"H3"})]})},Tp=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=O.useState(0),[d,h]=O.useState(!1),{focused:p,onFocus:g,onBlur:y}=pm(),x=()=>u(Date.now()),S=()=>{h(!d)},w=CJ({extensions:[ste.configure({bulletList:!1,orderedList:!1,listItem:!1}),cte.configure({HTMLAttributes:{class:"bullet-list"}}),ute.configure({HTMLAttributes:{class:"ordered-list"}}),dte.configure({HTMLAttributes:{class:"list-item"}}),jee,bee.configure({openOnClick:!1}),ate.configure({types:["heading","paragraph"]}),HJ.configure({levels:[1,2,3]}),lte.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:T})=>{r(T.getHTML())},onFocus:g,onBlur:y,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(O.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),O.useEffect(()=>{const T=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",T),document.body.style.overflow=""}},[d]),!w)return null;const E=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:v.jsx(pK,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:v.jsx(mK,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:v.jsx(bK,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:v.jsx(v.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:v.jsx(gK,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:v.jsx(yK,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:v.jsx(vK,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:v.jsx(iK,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:v.jsx(fK,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:v.jsx(dK,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:v.jsx(hK,{size:16})}],k=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?v.jsx(EK,{size:16}):v.jsx(kK,{size:16})}];return v.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?v.jsxs(ln.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[v.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&v.jsx("span",{className:"font-medium text-theme",children:t})}),v.jsx(OD,{editor:w,disabled:s}),E.map(T=>v.jsx(hl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(hl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(hl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsx("div",{className:"h-full overflow-y-auto p-4",children:v.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:v.jsx(vD,{editor:w,className:"focus:outline-none h-full"})})})})]}):v.jsx(hm,{id:e,label:t,focused:p,containerClassName:l,children:v.jsxs(ln.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[v.jsx(OD,{editor:w,disabled:s}),E.map(T=>v.jsx(hl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(hl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(hl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:v.jsx(vD,{editor:w,className:"focus:outline-none"})})]})})})},fte=()=>{xa();const e=hd(),[t,n]=O.useState(!1),r=O.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=O.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,y)=>{o(x=>({...x,[g]:y}))},u=(g,y,x)=>{const S=s[g].map(w=>w.id===y?{...w,value:x}:w);o(w=>({...w,[g]:S}))},d=g=>{o(y=>({...y,[g]:[...y[g],{id:i(),value:""}]}))},h=(g,y)=>{const x=s[g].filter(S=>S.id!==y);o(S=>({...S,[g]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(y=>y.value).filter(y=>y.trim()!==""),constraints:s.constraints.map(y=>y.value).filter(y=>y.trim()!==""),hints:s.hints.map(y=>y.value).filter(y=>y.trim()!==""),tags:s.tags.map(y=>y.value).filter(y=>y.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return v.jsxs(v.Fragment,{children:[v.jsx(md,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsx(pd,{})})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"inline-block mb-4",children:v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),v.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsx("div",{children:v.jsx(Tp,{id:"description",label:" Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),v.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"Easy",children:"Easy"}),v.jsx("option",{value:"Medium",children:"Medium"}),v.jsx("option",{value:"Hard",children:"Hard"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Category"]}),v.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),v.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Requirements"]}),v.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,y)=>v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-3 items-start",children:[v.jsx("div",{className:"flex-1",children:v.jsx(Tp,{id:`requirement-${g.id}`,label:`Requirement ${y+1}`,value:g.value,onChange:x=>u("requirements",g.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&v.jsx("button",{type:"button",onClick:()=>h("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Constraints"]}),v.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("constraints",g.id,y.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),v.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("hints",g.id,y.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(g=>g.value.trim())&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>v.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[v.jsx("span",{children:g.value}),v.jsx("button",{type:"button",onClick:()=>h("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>u("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),v.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[v.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):v.jsx(v.Fragment,{children:" Create & Start Designing"})}),v.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},hte=()=>{xa();const e=hd(),[t,n]=O.useState([]),[r,i]=O.useState(!1),[s,o]=O.useState(""),[l,u]=O.useState("updated"),[d,h]=O.useState(!1),[p,g]=O.useState(!1),{user:y,isAuthenticated:x,login:S,signup:w,googleLogin:E,logout:N}=$p();O.useEffect(()=>{x||e("/")},[x,e]),O.useEffect(()=>{(async()=>{if(!x){n([]);return}i(!0);try{const D=await rr.getUserDiagrams();n(D)}catch(D){console.error("Failed to load diagrams:",D)}finally{i(!1)}})()},[x]);const k=M=>{e(`/playground/free?diagramId=${M}`)},T=async(M,D)=>{if(D.stopPropagation(),!!globalThis.confirm("Are you sure you want to delete this diagram?"))try{await rr.deleteDiagram(M),n(R=>R.filter(P=>P.id!==M))}catch(R){console.error("Failed to delete diagram:",R),alert("Failed to delete diagram. Please try again.")}},A=t.filter(M=>{const D=s.toLowerCase();return M.title.toLowerCase().includes(D)||M.description?.toLowerCase().includes(D)||!1}).sort((M,D)=>{switch(l){case"title":return M.title.localeCompare(D.title);case"created":return new Date(D.createdAt).getTime()-new Date(M.createdAt).getTime();case"updated":default:return new Date(D.updatedAt).getTime()-new Date(M.updatedAt).getTime()}});return v.jsxs(v.Fragment,{children:[v.jsx(md,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[x&&v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${A.length} design${A.length===1?"":"s"}`}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),v.jsx(pd,{}),v.jsx("div",{className:"relative",children:x?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[y?.picture?v.jsx("img",{src:y.picture,alt:y.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:y?.name?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline text-sm",children:y?.name||y?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&v.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:v.jsxs("div",{className:"py-1",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:y?.name}),v.jsx("p",{className:"text-sm text-muted truncate",children:y?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(!1),N()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved system design projects"})]}),!r&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:M=>o(M.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),v.jsxs("select",{id:"sort-select",value:l,onChange:M=>u(M.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"updated",children:"Last Updated"}),v.jsx("option",{value:"created",children:"Date Created"}),v.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&A.length===0&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:s?"":""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":"No designs yet"}),v.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":"Start creating your first system design project"}),!s&&v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&A.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:A.map((M,D)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${D===0?"delay-0":D===1?"delay-100":D===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsx("button",{type:"button",onClick:R=>T(M.id,R),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{className:"cursor-pointer",onClick:()=>k(M.id),children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1 pr-8",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 mb-1",children:M.title}),M.description&&v.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:M.description})]}),v.jsx("div",{className:"text-3xl",children:""})]}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),M.nodes.length," node",M.nodes.length===1?"":"s"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),M.edges.length," connection",M.edges.length===1?"":"s"]})]}),v.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[v.jsxs("span",{children:["Updated"," ",new Date(M.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),v.jsxs("span",{children:["Created"," ",new Date(M.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),v.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),k(M.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},M.id))})]})]})})]}),p&&v.jsx(Zp,{isOpen:p,onClose:()=>g(!1),onLogin:async(M,D)=>{await S({email:M,password:D})},onSignup:async(M,D,R)=>{await w({email:M,password:D,name:R})},onGoogleLogin:async M=>{await E(M)}})]})};function pte(e){return Je({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(e)}const Y6=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>v.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[v.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[v.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),v.jsx(Kp,{children:t&&v.jsx(ln.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&v.jsx("span",{className:"text-sm text-theme",children:r})]}),W6=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:g}=pm();return v.jsx(hm,{id:e,label:t,focused:h,containerClassName:d,children:v.jsx(ln.input,{id:e,type:"number",value:n??"",onChange:y=>r(Number(y.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Eh=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=pm();return v.jsx(hm,{id:e,label:t,focused:u,containerClassName:l,children:v.jsx(ln.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},X6=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=pm(),p=`${e}-label`;return v.jsxs(hm,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&v.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),v.jsx(ln.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:v.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>v.jsx("option",{value:g,children:g},g))})})]})};function mte(e,t=50){const[n,r]=O.useState({past:[],present:e,future:[]}),i=O.useRef(!1),s=O.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const g=[...h.past,h.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=O.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=O.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=O.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Yt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Yt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var gte={value:()=>{}};function mm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new kh(n)}function kh(e){this._=e}function yte(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}kh.prototype=mm.prototype={constructor:kh,on:function(e,t){var n=this._,r=yte(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=vte(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=jD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=jD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new kh(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function vte(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function jD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=gte,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var NC="http://www.w3.org/1999/xhtml";const LD={svg:"http://www.w3.org/2000/svg",xhtml:NC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),LD.hasOwnProperty(t)?{space:LD[t],local:e}:e}function bte(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===NC&&t.documentElement.namespaceURI===NC?t.createElement(e):t.createElementNS(n,e)}}function xte(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Z6(e){var t=gm(e);return(t.local?xte:bte)(t)}function wte(){}function d2(e){return e==null?wte:function(){return this.querySelector(e)}}function Ste(e){typeof e!="function"&&(e=d2(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new ar(r,this._parents)}function Cte(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ete(){return[]}function Q6(e){return e==null?Ete:function(){return this.querySelectorAll(e)}}function kte(e){return function(){return Cte(e.apply(this,arguments))}}function Nte(e){typeof e=="function"?e=kte(e):e=Q6(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new ar(r,i)}function J6(e){return function(){return this.matches(e)}}function ez(e){return function(t){return t.matches(e)}}var Tte=Array.prototype.find;function Ate(e){return function(){return Tte.call(this.children,e)}}function Mte(){return this.firstElementChild}function _te(e){return this.select(e==null?Mte:Ate(typeof e=="function"?e:ez(e)))}var Dte=Array.prototype.filter;function Rte(){return Array.from(this.children)}function Ote(e){return function(){return Dte.call(this.children,e)}}function jte(e){return this.selectAll(e==null?Rte:Ote(typeof e=="function"?e:ez(e)))}function Lte(e){typeof e!="function"&&(e=J6(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new ar(r,this._parents)}function tz(e){return new Array(e.length)}function Pte(){return new ar(this._enter||this._groups.map(tz),this._parents)}function Ap(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ap.prototype={constructor:Ap,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ite(e){return function(){return e}}function Bte(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new Ap(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function zte(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,g=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(g[l]=y=o.call(u,u.__data__,l,t)+"",d.has(y)?i[l]=u:d.set(y,u));for(l=0;l<p;++l)y=o.call(e,s[l],l,s)+"",(u=d.get(y))?(r[l]=u,u.__data__=s[l],d.delete(y)):n[l]=new Ap(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(g[l])===u&&(i[l]=u)}function qte(e){return e.__data__}function Vte(e,t){if(!arguments.length)return Array.from(this,qte);var n=t?zte:Bte,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ite(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],g=p.length,y=Hte(e.call(h,h&&h.__data__,d,r)),x=y.length,S=l[d]=new Array(x),w=o[d]=new Array(x),E=u[d]=new Array(g);n(h,p,S,w,E,y,t);for(var N=0,k=0,T,A;N<x;++N)if(T=S[N]){for(N>=k&&(k=N+1);!(A=w[k])&&++k<x;);T._next=A||null}}return o=new ar(o,r),o._enter=l,o._exit=u,o}function Hte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fte(){return new ar(this._exit||this._groups.map(tz),this._parents)}function Ute(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function $te(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,g=l[u]=new Array(p),y,x=0;x<p;++x)(y=d[x]||h[x])&&(g[x]=y);for(;u<i;++u)l[u]=n[u];return new ar(l,this._parents)}function Gte(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Kte(e){e||(e=Yte);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new ar(i,this._parents).order()}function Yte(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Wte(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Xte(){return Array.from(this)}function Zte(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Qte(){let e=0;for(const t of this)++e;return e}function Jte(){return!this.node()}function ene(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function tne(e){return function(){this.removeAttribute(e)}}function nne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rne(e,t){return function(){this.setAttribute(e,t)}}function ine(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function sne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function one(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ane(e,t){var n=gm(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?nne:tne:typeof t=="function"?n.local?one:sne:n.local?ine:rne)(n,t))}function nz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lne(e){return function(){this.style.removeProperty(e)}}function cne(e,t,n){return function(){this.style.setProperty(e,t,n)}}function une(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function dne(e,t,n){return arguments.length>1?this.each((t==null?lne:typeof t=="function"?une:cne)(e,t,n??"")):Hl(this.node(),e)}function Hl(e,t){return e.style.getPropertyValue(t)||nz(e).getComputedStyle(e,null).getPropertyValue(t)}function fne(e){return function(){delete this[e]}}function hne(e,t){return function(){this[e]=t}}function pne(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function mne(e,t){return arguments.length>1?this.each((t==null?fne:typeof t=="function"?pne:hne)(e,t)):this.node()[e]}function rz(e){return e.trim().split(/^|\s+/)}function f2(e){return e.classList||new iz(e)}function iz(e){this._node=e,this._names=rz(e.getAttribute("class")||"")}iz.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sz(e,t){for(var n=f2(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function oz(e,t){for(var n=f2(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function gne(e){return function(){sz(this,e)}}function yne(e){return function(){oz(this,e)}}function vne(e,t){return function(){(t.apply(this,arguments)?sz:oz)(this,e)}}function bne(e,t){var n=rz(e+"");if(arguments.length<2){for(var r=f2(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?vne:t?gne:yne)(n,t))}function xne(){this.textContent=""}function wne(e){return function(){this.textContent=e}}function Sne(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cne(e){return arguments.length?this.each(e==null?xne:(typeof e=="function"?Sne:wne)(e)):this.node().textContent}function Ene(){this.innerHTML=""}function kne(e){return function(){this.innerHTML=e}}function Nne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tne(e){return arguments.length?this.each(e==null?Ene:(typeof e=="function"?Nne:kne)(e)):this.node().innerHTML}function Ane(){this.nextSibling&&this.parentNode.appendChild(this)}function Mne(){return this.each(Ane)}function _ne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dne(){return this.each(_ne)}function Rne(e){var t=typeof e=="function"?e:Z6(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function One(){return null}function jne(e,t){var n=typeof e=="function"?e:Z6(e),r=t==null?One:typeof t=="function"?t:d2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Lne(){var e=this.parentNode;e&&e.removeChild(this)}function Pne(){return this.each(Lne)}function Ine(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zne(e){return this.select(e?Bne:Ine)}function qne(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Vne(e){return function(t){e.call(this,t,this.__data__)}}function Hne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Fne(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Une(e,t,n){return function(){var r=this.__on,i,s=Vne(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function $ne(e,t,n){var r=Hne(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Une:Fne,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function az(e,t,n){var r=nz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Gne(e,t){return function(){return az(this,e,t)}}function Kne(e,t){return function(){return az(this,e,t.apply(this,arguments))}}function Yne(e,t){return this.each((typeof t=="function"?Kne:Gne)(e,t))}function*Wne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var lz=[null];function ar(e,t){this._groups=e,this._parents=t}function Ed(){return new ar([[document.documentElement]],lz)}function Xne(){return this}ar.prototype=Ed.prototype={constructor:ar,select:Ste,selectAll:Nte,selectChild:_te,selectChildren:jte,filter:Lte,data:Vte,enter:Pte,exit:Fte,join:Ute,merge:$te,selection:Xne,order:Gte,sort:Kte,call:Wte,nodes:Xte,node:Zte,size:Qte,empty:Jte,each:ene,attr:ane,style:dne,property:mne,classed:bne,text:Cne,html:Tne,raise:Mne,lower:Dne,append:Rne,insert:jne,remove:Pne,clone:zne,datum:qne,on:$ne,dispatch:Yne,[Symbol.iterator]:Wne};function sr(e){return typeof e=="string"?new ar([[document.querySelector(e)]],[document.documentElement]):new ar([[e]],lz)}function Zne(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Fr(e,t){if(e=Zne(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qne={passive:!1},ed={capture:!0,passive:!1};function K0(e){e.stopImmediatePropagation()}function Rl(e){e.preventDefault(),e.stopImmediatePropagation()}function cz(e){var t=e.document.documentElement,n=sr(e).on("dragstart.drag",Rl,ed);"onselectstart"in t?n.on("selectstart.drag",Rl,ed):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function uz(e,t){var n=e.document.documentElement,r=sr(e).on("dragstart.drag",null);t&&(r.on("click.drag",Rl,ed),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const sh=e=>()=>e;function TC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}TC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Jne(e){return!e.ctrlKey&&!e.button}function ere(){return this.parentNode}function tre(e,t){return t??{x:e.x,y:e.y}}function nre(){return navigator.maxTouchPoints||"ontouchstart"in this}function dz(){var e=Jne,t=ere,n=tre,r=nre,i={},s=mm("start","drag","end"),o=0,l,u,d,h,p=0;function g(T){T.on("mousedown.drag",y).filter(r).on("touchstart.drag",w).on("touchmove.drag",E,Qne).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(T,A){if(!(h||!e.call(this,T,A))){var M=k(this,t.call(this,T,A),T,A,"mouse");M&&(sr(T.view).on("mousemove.drag",x,ed).on("mouseup.drag",S,ed),cz(T.view),K0(T),d=!1,l=T.clientX,u=T.clientY,M("start",T))}}function x(T){if(Rl(T),!d){var A=T.clientX-l,M=T.clientY-u;d=A*A+M*M>p}i.mouse("drag",T)}function S(T){sr(T.view).on("mousemove.drag mouseup.drag",null),uz(T.view,d),Rl(T),i.mouse("end",T)}function w(T,A){if(e.call(this,T,A)){var M=T.changedTouches,D=t.call(this,T,A),R=M.length,P,$;for(P=0;P<R;++P)($=k(this,D,T,A,M[P].identifier,M[P]))&&(K0(T),$("start",T,M[P]))}}function E(T){var A=T.changedTouches,M=A.length,D,R;for(D=0;D<M;++D)(R=i[A[D].identifier])&&(Rl(T),R("drag",T,A[D]))}function N(T){var A=T.changedTouches,M=A.length,D,R;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),D=0;D<M;++D)(R=i[A[D].identifier])&&(K0(T),R("end",T,A[D]))}function k(T,A,M,D,R,P){var $=s.copy(),V=Fr(P||M,A),z,Y,B;if((B=n.call(T,new TC("beforestart",{sourceEvent:M,target:g,identifier:R,active:o,x:V[0],y:V[1],dx:0,dy:0,dispatch:$}),D))!=null)return z=B.x-V[0]||0,Y=B.y-V[1]||0,function F(L,q,W){var ee=V,I;switch(L){case"start":i[R]=F,I=o++;break;case"end":delete i[R],--o;case"drag":V=Fr(W||q,A),I=o;break}$.call(L,T,new TC(L,{sourceEvent:q,subject:B,target:g,identifier:R,active:I,x:V[0]+z,y:V[1]+Y,dx:V[0]-ee[0],dy:V[1]-ee[1],dispatch:$}),D)}}return g.filter=function(T){return arguments.length?(e=typeof T=="function"?T:sh(!!T),g):e},g.container=function(T){return arguments.length?(t=typeof T=="function"?T:sh(T),g):t},g.subject=function(T){return arguments.length?(n=typeof T=="function"?T:sh(T),g):n},g.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:sh(!!T),g):r},g.on=function(){var T=s.on.apply(s,arguments);return T===s?g:T},g.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,g):Math.sqrt(p)},g}function h2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function fz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function kd(){}var td=.7,Mp=1/td,Ol="\\s*([+-]?\\d+)\\s*",nd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rre=/^#([0-9a-f]{3,8})$/,ire=new RegExp(`^rgb\\(${Ol},${Ol},${Ol}\\)$`),sre=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),ore=new RegExp(`^rgba\\(${Ol},${Ol},${Ol},${nd}\\)$`),are=new RegExp(`^rgba\\(${gi},${gi},${gi},${nd}\\)$`),lre=new RegExp(`^hsl\\(${nd},${gi},${gi}\\)$`),cre=new RegExp(`^hsla\\(${nd},${gi},${gi},${nd}\\)$`),PD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};h2(kd,ha,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ID,formatHex:ID,formatHex8:ure,formatHsl:dre,formatRgb:BD,toString:BD});function ID(){return this.rgb().formatHex()}function ure(){return this.rgb().formatHex8()}function dre(){return hz(this).formatHsl()}function BD(){return this.rgb().formatRgb()}function ha(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rre.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?zD(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?oh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?oh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ire.exec(e))?new Fn(t[1],t[2],t[3],1):(t=sre.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ore.exec(e))?oh(t[1],t[2],t[3],t[4]):(t=are.exec(e))?oh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lre.exec(e))?HD(t[1],t[2]/100,t[3]/100,1):(t=cre.exec(e))?HD(t[1],t[2]/100,t[3]/100,t[4]):PD.hasOwnProperty(e)?zD(PD[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function zD(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function oh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function fre(e){return e instanceof kd||(e=ha(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function AC(e,t,n,r){return arguments.length===1?fre(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}h2(Fn,AC,fz(kd,{brighter(e){return e=e==null?Mp:Math.pow(Mp,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?td:Math.pow(td,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(oa(this.r),oa(this.g),oa(this.b),_p(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qD,formatHex:qD,formatHex8:hre,formatRgb:VD,toString:VD}));function qD(){return`#${Zo(this.r)}${Zo(this.g)}${Zo(this.b)}`}function hre(){return`#${Zo(this.r)}${Zo(this.g)}${Zo(this.b)}${Zo((isNaN(this.opacity)?1:this.opacity)*255)}`}function VD(){const e=_p(this.opacity);return`${e===1?"rgb(":"rgba("}${oa(this.r)}, ${oa(this.g)}, ${oa(this.b)}${e===1?")":`, ${e})`}`}function _p(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zo(e){return e=oa(e),(e<16?"0":"")+e.toString(16)}function HD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new $r(e,t,n,r)}function hz(e){if(e instanceof $r)return new $r(e.h,e.s,e.l,e.opacity);if(e instanceof kd||(e=ha(e)),!e)return new $r;if(e instanceof $r)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new $r(o,l,u,e.opacity)}function pre(e,t,n,r){return arguments.length===1?hz(e):new $r(e,t,n,r??1)}function $r(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}h2($r,pre,fz(kd,{brighter(e){return e=e==null?Mp:Math.pow(Mp,e),new $r(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?td:Math.pow(td,e),new $r(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn(Y0(e>=240?e-240:e+120,i,r),Y0(e,i,r),Y0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new $r(FD(this.h),ah(this.s),ah(this.l),_p(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_p(this.opacity);return`${e===1?"hsl(":"hsla("}${FD(this.h)}, ${ah(this.s)*100}%, ${ah(this.l)*100}%${e===1?")":`, ${e})`}`}}));function FD(e){return e=(e||0)%360,e<0?e+360:e}function ah(e){return Math.max(0,Math.min(1,e||0))}function Y0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const p2=e=>()=>e;function mre(e,t){return function(n){return e+n*t}}function gre(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yre(e){return(e=+e)==1?pz:function(t,n){return n-t?gre(t,n,e):p2(isNaN(t)?n:t)}}function pz(e,t){var n=t-e;return n?mre(e,n):p2(isNaN(e)?t:e)}const Dp=(function e(t){var n=yre(t);function r(i,s){var o=n((i=AC(i)).r,(s=AC(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=pz(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function vre(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function bre(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xre(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ou(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function wre(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function di(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Sre(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ou(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var MC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W0=new RegExp(MC.source,"g");function Cre(e){return function(){return e}}function Ere(e){return function(t){return e(t)+""}}function mz(e,t){var n=MC.lastIndex=W0.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=MC.exec(e))&&(i=W0.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:di(r,i)})),n=W0.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?Ere(u[0].x):Cre(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Ou(e,t){var n=typeof t,r;return t==null||n==="boolean"?p2(t):(n==="number"?di:n==="string"?(r=ha(t))?(t=r,Dp):mz:t instanceof ha?Dp:t instanceof Date?wre:bre(t)?vre:Array.isArray(t)?xre:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sre:di)(e,t)}var UD=180/Math.PI,_C={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gz(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*UD,skewX:Math.atan(u)*UD,scaleX:o,scaleY:l}}var lh;function kre(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_C:gz(t.a,t.b,t.c,t.d,t.e,t.f)}function Nre(e){return e==null||(lh||(lh=document.createElementNS("http://www.w3.org/2000/svg","g")),lh.setAttribute("transform",e),!(e=lh.transform.baseVal.consolidate()))?_C:(e=e.matrix,gz(e.a,e.b,e.c,e.d,e.e,e.f))}function yz(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push("translate(",null,t,null,n);x.push({i:S-4,x:di(d,p)},{i:S-2,x:di(h,g)})}else(p||g)&&y.push("translate("+p+t+g+n)}function o(d,h,p,g){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:di(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,g){d!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:di(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push(i(y)+"scale(",null,",",null,")");x.push({i:S-4,x:di(d,p)},{i:S-2,x:di(h,g)})}else(p!==1||g!==1)&&y.push(i(y)+"scale("+p+","+g+")")}return function(d,h){var p=[],g=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,g),o(d.rotate,h.rotate,p,g),l(d.skewX,h.skewX,p,g),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,g),d=h=null,function(y){for(var x=-1,S=g.length,w;++x<S;)p[(w=g[x]).i]=w.x(y);return p.join("")}}}var Tre=yz(kre,"px, ","px)","deg)"),Are=yz(Nre,", ",")",")"),Mre=1e-12;function $D(e){return((e=Math.exp(e))+1/e)/2}function _re(e){return((e=Math.exp(e))-1/e)/2}function Dre(e){return((e=Math.exp(2*e))-1)/(e+1)}const Nh=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],g=o[2],y=h-l,x=p-u,S=y*y+x*x,w,E;if(S<Mre)E=Math.log(g/d)/t,w=function(D){return[l+D*y,u+D*x,d*Math.exp(t*D*E)]};else{var N=Math.sqrt(S),k=(g*g-d*d+r*S)/(2*d*n*N),T=(g*g-d*d-r*S)/(2*g*n*N),A=Math.log(Math.sqrt(k*k+1)-k),M=Math.log(Math.sqrt(T*T+1)-T);E=(M-A)/t,w=function(D){var R=D*E,P=$D(A),$=d/(n*N)*(P*Dre(t*R+A)-_re(A));return[l+$*y,u+$*x,d*P/$D(t*R+A)]}}return w.duration=E*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var Fl=0,fu=0,ru=0,vz=1e3,Rp,hu,Op=0,pa=0,ym=0,rd=typeof performance=="object"&&performance.now?performance:Date,bz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function m2(){return pa||(bz(Rre),pa=rd.now()+ym)}function Rre(){pa=0}function jp(){this._call=this._time=this._next=null}jp.prototype=xz.prototype={constructor:jp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?m2():+n)+(t==null?0:+t),!this._next&&hu!==this&&(hu?hu._next=this:Rp=this,hu=this),this._call=e,this._time=n,DC()},stop:function(){this._call&&(this._call=null,this._time=1/0,DC())}};function xz(e,t,n){var r=new jp;return r.restart(e,t,n),r}function Ore(){m2(),++Fl;for(var e=Rp,t;e;)(t=pa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Fl}function GD(){pa=(Op=rd.now())+ym,Fl=fu=0;try{Ore()}finally{Fl=0,Lre(),pa=0}}function jre(){var e=rd.now(),t=e-Op;t>vz&&(ym-=t,Op=e)}function Lre(){for(var e,t=Rp,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rp=n);hu=e,DC(r)}function DC(e){if(!Fl){fu&&(fu=clearTimeout(fu));var t=e-pa;t>24?(e<1/0&&(fu=setTimeout(GD,e-rd.now()-ym)),ru&&(ru=clearInterval(ru))):(ru||(Op=rd.now(),ru=setInterval(jre,vz)),Fl=1,bz(GD))}}function KD(e,t,n){var r=new jp;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Pre=mm("start","end","cancel","interrupt"),Ire=[],wz=0,YD=1,RC=2,Th=3,WD=4,OC=5,Ah=6;function vm(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Bre(e,n,{name:t,index:r,group:i,on:Pre,tween:Ire,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:wz})}function g2(e,t){var n=Wr(e,t);if(n.state>wz)throw new Error("too late; already scheduled");return n}function xi(e,t){var n=Wr(e,t);if(n.state>Th)throw new Error("too late; already running");return n}function Wr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Bre(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=xz(s,0,n.time);function s(d){n.state=YD,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,g,y;if(n.state!==YD)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===Th)return KD(o);y.state===WD?(y.state=Ah,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=Ah,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(KD(function(){n.state===Th&&(n.state=WD,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=RC,n.on.call("start",e,e.__data__,n.index,n.group),n.state===RC){for(n.state=Th,i=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=OC,1),p=-1,g=i.length;++p<g;)i[p].call(e,h);n.state===OC&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Ah,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Mh(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>RC&&r.state<OC,r.state=Ah,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function zre(e){return this.each(function(){Mh(this,e)})}function qre(e,t){var n,r;return function(){var i=xi(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Vre(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=xi(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function Hre(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Wr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?qre:Vre)(n,e,t))}function y2(e,t,n){var r=e._id;return e.each(function(){var i=xi(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Wr(i,r).value[t]}}function Sz(e,t){var n;return(typeof t=="number"?di:t instanceof ha?Dp:(n=ha(t))?(t=n,Dp):mz)(e,t)}function Fre(e){return function(){this.removeAttribute(e)}}function Ure(e){return function(){this.removeAttributeNS(e.space,e.local)}}function $re(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Gre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Kre(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Yre(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Wre(e,t){var n=gm(e),r=n==="transform"?Are:Sz;return this.attrTween(e,typeof t=="function"?(n.local?Yre:Kre)(n,r,y2(this,"attr."+e,t)):t==null?(n.local?Ure:Fre)(n):(n.local?Gre:$re)(n,r,t))}function Xre(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Zre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Qre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Zre(e,s)),n}return i._value=t,i}function Jre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Xre(e,s)),n}return i._value=t,i}function eie(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gm(e);return this.tween(n,(r.local?Qre:Jre)(r,t))}function tie(e,t){return function(){g2(this,e).delay=+t.apply(this,arguments)}}function nie(e,t){return t=+t,function(){g2(this,e).delay=t}}function rie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tie:nie)(t,e)):Wr(this.node(),t).delay}function iie(e,t){return function(){xi(this,e).duration=+t.apply(this,arguments)}}function sie(e,t){return t=+t,function(){xi(this,e).duration=t}}function oie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iie:sie)(t,e)):Wr(this.node(),t).duration}function aie(e,t){if(typeof t!="function")throw new Error;return function(){xi(this,e).ease=t}}function lie(e){var t=this._id;return arguments.length?this.each(aie(t,e)):Wr(this.node(),t).ease}function cie(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;xi(this,e).ease=n}}function uie(e){if(typeof e!="function")throw new Error;return this.each(cie(this._id,e))}function die(e){typeof e!="function"&&(e=J6(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new es(r,this._parents,this._name,this._id)}function fie(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),g,y=0;y<h;++y)(g=u[y]||d[y])&&(p[y]=g);for(;l<r;++l)o[l]=t[l];return new es(o,this._parents,this._name,this._id)}function hie(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function pie(e,t,n){var r,i,s=hie(t)?g2:xi;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function mie(e,t){var n=this._id;return arguments.length<2?Wr(this.node(),n).on.on(e):this.each(pie(n,e,t))}function gie(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function yie(){return this.on("end.remove",gie(this._id))}function vie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=d2(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,g=0;g<u;++g)(h=l[g])&&(p=e.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),d[g]=p,vm(d[g],t,n,g,d,Wr(h,n)));return new es(s,this._parents,t,n)}function bie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Q6(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var g=e.call(h,h.__data__,p,u),y,x=Wr(h,n),S=0,w=g.length;S<w;++S)(y=g[S])&&vm(y,t,n,S,g,x);s.push(g),o.push(h)}return new es(s,o,t,n)}var xie=Ed.prototype.constructor;function wie(){return new xie(this._groups,this._parents)}function Sie(e,t){var n,r,i;return function(){var s=Hl(this,e),o=(this.style.removeProperty(e),Hl(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Cz(e){return function(){this.style.removeProperty(e)}}function Cie(e,t,n){var r,i=n+"",s;return function(){var o=Hl(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Eie(e,t,n){var r,i,s;return function(){var o=Hl(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Hl(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function kie(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=xi(this,e),d=u.on,h=u.value[s]==null?l||(l=Cz(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function Nie(e,t,n){var r=(e+="")=="transform"?Tre:Sz;return t==null?this.styleTween(e,Sie(e,r)).on("end.style."+e,Cz(e)):typeof t=="function"?this.styleTween(e,Eie(e,r,y2(this,"style."+e,t))).each(kie(this._id,e)):this.styleTween(e,Cie(e,r,t),n).on("end.style."+e,null)}function Tie(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Aie(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Tie(e,o,n)),r}return s._value=t,s}function Mie(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Aie(e,t,n??""))}function _ie(e){return function(){this.textContent=e}}function Die(e){return function(){var t=e(this);this.textContent=t??""}}function Rie(e){return this.tween("text",typeof e=="function"?Die(y2(this,"text",e)):_ie(e==null?"":e+""))}function Oie(e){return function(t){this.textContent=e.call(this,t)}}function jie(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Oie(i)),t}return r._value=e,r}function Lie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jie(e))}function Pie(){for(var e=this._name,t=this._id,n=Ez(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=Wr(u,t);vm(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new es(r,this._parents,e,n)}function Iie(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=xi(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var Bie=0;function es(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ez(){return++Bie}var Ui=Ed.prototype;es.prototype={constructor:es,select:vie,selectAll:bie,selectChild:Ui.selectChild,selectChildren:Ui.selectChildren,filter:die,merge:fie,selection:wie,transition:Pie,call:Ui.call,nodes:Ui.nodes,node:Ui.node,size:Ui.size,empty:Ui.empty,each:Ui.each,on:mie,attr:Wre,attrTween:eie,style:Nie,styleTween:Mie,text:Rie,textTween:Lie,remove:yie,tween:Hre,delay:rie,duration:oie,ease:lie,easeVarying:uie,end:Iie,[Symbol.iterator]:Ui[Symbol.iterator]};function zie(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qie={time:null,delay:0,duration:250,ease:zie};function Vie(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Hie(e){var t,n;e instanceof es?(t=e._id,e=e._name):(t=Ez(),(n=qie).time=m2(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&vm(u,e,t,d,o,n||Vie(u,t));return new es(r,this._parents,e,t)}Ed.prototype.interrupt=zre;Ed.prototype.transition=Hie;const ch=e=>()=>e;function Fie(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Yi(e,t,n){this.k=e,this.x=t,this.y=n}Yi.prototype={constructor:Yi,scale:function(e){return e===1?this:new Yi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Yi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bm=new Yi(1,0,0);kz.prototype=Yi.prototype;function kz(e){for(;!e.__zoom;)if(!(e=e.parentNode))return bm;return e.__zoom}function X0(e){e.stopImmediatePropagation()}function iu(e){e.preventDefault(),e.stopImmediatePropagation()}function Uie(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function $ie(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function XD(){return this.__zoom||bm}function Gie(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Kie(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yie(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Nz(){var e=Uie,t=$ie,n=Yie,r=Gie,i=Kie,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Nh,d=mm("start","zoom","end"),h,p,g,y=500,x=150,S=0,w=10;function E(B){B.property("__zoom",XD).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(B,F,L,q){var W=B.selection?B.selection():B;W.property("__zoom",XD),B!==W?A(B,F,L,q):W.interrupt().each(function(){M(this,arguments).event(q).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},E.scaleBy=function(B,F,L,q){E.scaleTo(B,function(){var W=this.__zoom.k,ee=typeof F=="function"?F.apply(this,arguments):F;return W*ee},L,q)},E.scaleTo=function(B,F,L,q){E.transform(B,function(){var W=t.apply(this,arguments),ee=this.__zoom,I=L==null?T(W):typeof L=="function"?L.apply(this,arguments):L,G=ee.invert(I),se=typeof F=="function"?F.apply(this,arguments):F;return n(k(N(ee,se),I,G),W,o)},L,q)},E.translateBy=function(B,F,L,q){E.transform(B,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),o)},null,q)},E.translateTo=function(B,F,L,q,W){E.transform(B,function(){var ee=t.apply(this,arguments),I=this.__zoom,G=q==null?T(ee):typeof q=="function"?q.apply(this,arguments):q;return n(bm.translate(G[0],G[1]).scale(I.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof L=="function"?-L.apply(this,arguments):-L),ee,o)},q,W)};function N(B,F){return F=Math.max(s[0],Math.min(s[1],F)),F===B.k?B:new Yi(F,B.x,B.y)}function k(B,F,L){var q=F[0]-L[0]*B.k,W=F[1]-L[1]*B.k;return q===B.x&&W===B.y?B:new Yi(B.k,q,W)}function T(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function A(B,F,L,q){B.on("start.zoom",function(){M(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(q).end()}).tween("zoom",function(){var W=this,ee=arguments,I=M(W,ee).event(q),G=t.apply(W,ee),se=L==null?T(G):typeof L=="function"?L.apply(W,ee):L,le=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),H=W.__zoom,X=typeof F=="function"?F.apply(W,ee):F,Q=u(H.invert(se).concat(le/H.k),X.invert(se).concat(le/X.k));return function(ce){if(ce===1)ce=X;else{var ae=Q(ce),he=le/ae[2];ce=new Yi(he,se[0]-ae[0]*he,se[1]-ae[1]*he)}I.zoom(null,ce)}})}function M(B,F,L){return!L&&B.__zooming||new D(B,F)}function D(B,F){this.that=B,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,F),this.taps=0}D.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,F){return this.mouse&&B!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var F=sr(this.that).datum();d.call(B,this.that,new Fie(B,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),F)}};function R(B,...F){if(!e.apply(this,arguments))return;var L=M(this,F).event(B),q=this.__zoom,W=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),ee=Fr(B);if(L.wheel)(L.mouse[0][0]!==ee[0]||L.mouse[0][1]!==ee[1])&&(L.mouse[1]=q.invert(L.mouse[0]=ee)),clearTimeout(L.wheel);else{if(q.k===W)return;L.mouse=[ee,q.invert(ee)],Mh(this),L.start()}iu(B),L.wheel=setTimeout(I,x),L.zoom("mouse",n(k(N(q,W),L.mouse[0],L.mouse[1]),L.extent,o));function I(){L.wheel=null,L.end()}}function P(B,...F){if(g||!e.apply(this,arguments))return;var L=B.currentTarget,q=M(this,F,!0).event(B),W=sr(B.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",le,!0),ee=Fr(B,L),I=B.clientX,G=B.clientY;cz(B.view),X0(B),q.mouse=[ee,this.__zoom.invert(ee)],Mh(this),q.start();function se(H){if(iu(H),!q.moved){var X=H.clientX-I,Q=H.clientY-G;q.moved=X*X+Q*Q>S}q.event(H).zoom("mouse",n(k(q.that.__zoom,q.mouse[0]=Fr(H,L),q.mouse[1]),q.extent,o))}function le(H){W.on("mousemove.zoom mouseup.zoom",null),uz(H.view,q.moved),iu(H),q.event(H).end()}}function $(B,...F){if(e.apply(this,arguments)){var L=this.__zoom,q=Fr(B.changedTouches?B.changedTouches[0]:B,this),W=L.invert(q),ee=L.k*(B.shiftKey?.5:2),I=n(k(N(L,ee),q,W),t.apply(this,F),o);iu(B),l>0?sr(this).transition().duration(l).call(A,I,q,B):sr(this).call(E.transform,I,q,B)}}function V(B,...F){if(e.apply(this,arguments)){var L=B.touches,q=L.length,W=M(this,F,B.changedTouches.length===q).event(B),ee,I,G,se;for(X0(B),I=0;I<q;++I)G=L[I],se=Fr(G,this),se=[se,this.__zoom.invert(se),G.identifier],W.touch0?!W.touch1&&W.touch0[2]!==se[2]&&(W.touch1=se,W.taps=0):(W.touch0=se,ee=!0,W.taps=1+!!h);h&&(h=clearTimeout(h)),ee&&(W.taps<2&&(p=se[0],h=setTimeout(function(){h=null},y)),Mh(this),W.start())}}function z(B,...F){if(this.__zooming){var L=M(this,F).event(B),q=B.changedTouches,W=q.length,ee,I,G,se;for(iu(B),ee=0;ee<W;++ee)I=q[ee],G=Fr(I,this),L.touch0&&L.touch0[2]===I.identifier?L.touch0[0]=G:L.touch1&&L.touch1[2]===I.identifier&&(L.touch1[0]=G);if(I=L.that.__zoom,L.touch1){var le=L.touch0[0],H=L.touch0[1],X=L.touch1[0],Q=L.touch1[1],ce=(ce=X[0]-le[0])*ce+(ce=X[1]-le[1])*ce,ae=(ae=Q[0]-H[0])*ae+(ae=Q[1]-H[1])*ae;I=N(I,Math.sqrt(ce/ae)),G=[(le[0]+X[0])/2,(le[1]+X[1])/2],se=[(H[0]+Q[0])/2,(H[1]+Q[1])/2]}else if(L.touch0)G=L.touch0[0],se=L.touch0[1];else return;L.zoom("touch",n(k(I,G,se),L.extent,o))}}function Y(B,...F){if(this.__zooming){var L=M(this,F).event(B),q=B.changedTouches,W=q.length,ee,I;for(X0(B),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),ee=0;ee<W;++ee)I=q[ee],L.touch0&&L.touch0[2]===I.identifier?delete L.touch0:L.touch1&&L.touch1[2]===I.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(I=Fr(I,this),Math.hypot(p[0]-I[0],p[1]-I[1])<w)){var G=sr(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return E.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:ch(+B),E):r},E.filter=function(B){return arguments.length?(e=typeof B=="function"?B:ch(!!B),E):e},E.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:ch(!!B),E):i},E.extent=function(B){return arguments.length?(t=typeof B=="function"?B:ch([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),E):t},E.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],E):[s[0],s[1]]},E.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(B){return arguments.length?(n=B,E):n},E.duration=function(B){return arguments.length?(l=+B,E):l},E.interpolate=function(B){return arguments.length?(u=B,E):u},E.on=function(){var B=d.on.apply(d,arguments);return B===d?E:B},E.clickDistance=function(B){return arguments.length?(S=(B=+B)*B,E):Math.sqrt(S)},E.tapDistance=function(B){return arguments.length?(w=+B,E):w},E}const bi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},id=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Tz=["Enter"," ","Escape"],Az={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ma;(function(e){e.Strict="strict",e.Loose="loose"})(ma||(ma={}));var aa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(aa||(aa={}));var sd;(function(e){e.Partial="partial",e.Full="full"})(sd||(sd={}));const Mz={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Gs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Gs||(Gs={}));var Lp;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Lp||(Lp={}));var Ae;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ae||(Ae={}));const ZD={[Ae.Left]:Ae.Right,[Ae.Right]:Ae.Left,[Ae.Top]:Ae.Bottom,[Ae.Bottom]:Ae.Top};function _z(e){return e===null?null:e?"valid":"invalid"}const Dz=e=>"id"in e&&"source"in e&&"target"in e,Wie=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),v2=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Nd=(e,t=[0,0])=>{const{width:n,height:r}=ns(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},Rz=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):v2(i)?i:t.nodeLookup.get(i.id));const l=o?Pp(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return xm(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return wm(n)},Td=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Pp(r);n=xm(n,i)}}),wm(n)},b2=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Md(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:g=!1}=d;if(o&&!p||g)continue;const y=h.width??d.width??d.initialWidth??null,x=h.height??d.height??d.initialHeight??null,S=od(l,$l(d)),w=(y??0)*(x??0),E=s&&S>0;(!d.internals.handleBounds||E||S>=w||d.dragging)&&u.push(d)}return u},Xie=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Zie(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Qie({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Zie(e,o),u=Td(l),d=Sm(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function Oz({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",bi.error005());else{const y=l.measured.width,x=l.measured.height;y&&x&&(p=[[u,d],[u+y,d+x]])}else l&&Gl(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=Gl(p)?ga(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",bi.error015()),{position:{x:g.x-u+(o.measured.width??0)*h[0],y:g.y-d+(o.measured.height??0)*h[1]},positionAbsolute:g}}async function Jie({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const y=s.has(g.id),x=!y&&g.parentId&&o.find(S=>S.id===g.parentId);(y||x)&&o.push(g)}const l=new Set(t.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),h=Xie(o,u);for(const g of u)l.has(g.id)&&!h.find(x=>x.id===g.id)&&h.push(g);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const Ul=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ga=(e={x:0,y:0},t,n)=>({x:Ul(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Ul(e.y,t[0][1],t[1][1]-(n?.height??0))});function jz(e,t,n){const{width:r,height:i}=ns(n),{x:s,y:o}=n.internals.positionAbsolute;return ga(e,[[s,o],[s+r,o+i]],t)}const QD=(e,t,n)=>e<t?Ul(Math.abs(e-t),1,t)/t:e>n?-Ul(Math.abs(e-n),1,t)/t:0,Lz=(e,t,n=15,r=40)=>{const i=QD(e.x,r,t.width-r)*n,s=QD(e.y,r,t.height-r)*n;return[i,s]},xm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),wm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),$l=(e,t=[0,0])=>{const{x:n,y:r}=v2(e)?e.internals.positionAbsolute:Nd(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Pp=(e,t=[0,0])=>{const{x:n,y:r}=v2(e)?e.internals.positionAbsolute:Nd(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Pz=(e,t)=>wm(xm(jC(e),jC(t))),od=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},JD=e=>Kr(e.width)&&Kr(e.height)&&Kr(e.x)&&Kr(e.y),Kr=e=>!isNaN(e)&&isFinite(e),ese=(e,t)=>{},Ad=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Md=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?Ad(l,o):l},Ip=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function pl(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function tse(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=pl(e,n),i=pl(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=pl(e.top??e.y??0,n),i=pl(e.bottom??e.y??0,n),s=pl(e.left??e.x??0,t),o=pl(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function nse(e,t,n,r,i,s){const{x:o,y:l}=Ip(e,[t,n,r]),{x:u,y:d}=Ip({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const Sm=(e,t,n,r,i,s)=>{const o=tse(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=Ul(d,r,i),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*h,x=n/2-g*h,S=nse(e,y,x,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:y-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},ad=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Gl(e){return e!=null&&e!=="parent"}function ns(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Iz(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Bz(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function eR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function rse(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function ise(e){return{...Az,...e||{}}}function ju(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=hi(e),l=Md({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Ad(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const x2=e=>({width:e.offsetWidth,height:e.offsetHeight}),zz=e=>e?.getRootNode?.()||window?.document,sse=["INPUT","SELECT","TEXTAREA"];function qz(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:sse.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Vz=e=>"clientX"in e,hi=(e,t)=>{const n=Vz(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},tR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...x2(o)}})};function Hz({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function uh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function nR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ae.Left:return[t-uh(t-r,s),n];case Ae.Right:return[t+uh(r-t,s),n];case Ae.Top:return[t,n-uh(n-i,s)];case Ae.Bottom:return[t,n+uh(i-n,s)]}}function w2({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,curvature:o=.25}){const[l,u]=nR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=nR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,y,x]=Hz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,g,y,x]}function S2({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function ose({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function ase({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=xm(Pp(e),Pp(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return od(o,wm(s))>0}const lse=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,cse=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Fz=(e,t)=>{if(!e.source||!e.target)return t;let n;return Dz(e)?n={...e}:n={...e,id:lse(e)},cse(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Uz({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=S2({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const rR={[Ae.Left]:{x:-1,y:0},[Ae.Right]:{x:1,y:0},[Ae.Top]:{x:0,y:-1},[Ae.Bottom]:{x:0,y:1}},use=({source:e,sourcePosition:t=Ae.Bottom,target:n})=>t===Ae.Left||t===Ae.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},iR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function dse({source:e,sourcePosition:t=Ae.Bottom,target:n,targetPosition:r=Ae.Top,center:i,offset:s,stepPosition:o}){const l=rR[t],u=rR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=use({source:d,sourcePosition:t,target:h}),g=p.x!==0?"x":"y",y=p[g];let x=[],S,w;const E={x:0,y:0},N={x:0,y:0},[,,k,T]=S2({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*u[g]===-1){g==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const M=[{x:S,y:d.y},{x:S,y:h.y}],D=[{x:d.x,y:w},{x:h.x,y:w}];l[g]===y?x=g==="x"?M:D:x=g==="x"?D:M}else{const M=[{x:d.x,y:h.y}],D=[{x:h.x,y:d.y}];if(g==="x"?x=l.x===y?D:M:x=l.y===y?M:D,t===r){const z=Math.abs(e[g]-n[g]);if(z<=s){const Y=Math.min(s-1,s-z);l[g]===y?E[g]=(d[g]>e[g]?-1:1)*Y:N[g]=(h[g]>n[g]?-1:1)*Y}}if(t!==r){const z=g==="x"?"y":"x",Y=l[g]===u[z],B=d[z]>h[z],F=d[z]<h[z];(l[g]===1&&(!Y&&B||Y&&F)||l[g]!==1&&(!Y&&F||Y&&B))&&(x=g==="x"?M:D)}const R={x:d.x+E.x,y:d.y+E.y},P={x:h.x+N.x,y:h.y+N.y},$=Math.max(Math.abs(R.x-x[0].x),Math.abs(P.x-x[0].x)),V=Math.max(Math.abs(R.y-x[0].y),Math.abs(P.y-x[0].y));$>=V?(S=(R.x+P.x)/2,w=x[0].y):(S=x[0].x,w=(R.y+P.y)/2)}return[[e,{x:d.x+E.x,y:d.y+E.y},...x,{x:h.x+N.x,y:h.y+N.y},n],S,w,k,T]}function fse(e,t,n,r){const i=Math.min(iR(e,t)/2,iR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function LC({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,g,y,x,S]=dse({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((E,N,k)=>{let T="";return k>0&&k<p.length-1?T=fse(p[k-1],N,p[k+1],o):T=`${k===0?"M":"L"}${N.x} ${N.y}`,E+=T,E},""),g,y,x,S]}function sR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function hse(e){const{sourceNode:t,targetNode:n}=e;if(!sR(t)||!sR(n))return null;const r=t.internals.handleBounds||oR(t.handles),i=n.internals.handleBounds||oR(n.handles),s=aR(r?.source??[],e.sourceHandle),o=aR(e.connectionMode===ma.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",bi.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Ae.Bottom,u=o?.position||Ae.Top,d=ld(t,s,l),h=ld(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function oR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ld(e,t,n=Ae.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??ns(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Ae.Top:return{x:i+o/2,y:s};case Ae.Right:return{x:i+o,y:s+l/2};case Ae.Bottom:return{x:i+o/2,y:s+l};case Ae.Left:return{x:i,y:s+l/2}}}function aR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function PC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function pse(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=PC(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const C2={nodeOrigin:[0,0],nodeExtent:id,elevateNodesOnSelect:!0,defaults:{}},mse={...C2,checkEquality:!0};function E2(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function gse(e,t,n){const r=E2(C2,n);for(const i of e.values())if(i.parentId)k2(i,e,t,r);else{const s=Nd(i,r.nodeOrigin),o=Gl(i.extent)?i.extent:r.nodeExtent,l=ga(s,o,ns(i));i.internals.positionAbsolute=l}}function IC(e,t,n,r){const i=E2(mse,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=Nd(u,i.nodeOrigin),p=Gl(u.extent)?u.extent:i.nodeExtent,g=ga(h,p,ns(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:$z(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&k2(d,t,n,r)}return s}function yse(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function k2(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=E2(C2,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}yse(e,n);const d=i?1e3:0,{x:h,y:p,z:g}=vse(e,u,s,o,d),{positionAbsolute:y}=e.internals,x=h!==y.x||p!==y.y;(x||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:p}:y,z:g}})}function $z(e,t){return(Kr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function vse(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=ns(e),u=Nd(e,n),d=Gl(e.extent)?ga(u,e.extent,l):u;let h=ga({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=jz(h,l,t));const p=$z(e,i),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=p?g+1:p}}function N2(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??$l(l),d=Pz(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=ns(l),p=l.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,y=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(x-h.width)*p[0],E=(S-h.height)*p[1];(g>0||y>0||w||E)&&(i.push({id:u,type:"position",position:{x:l.position.x-g+w,y:l.position.y-y+E}}),n.get(u)?.forEach(N=>{e.some(k=>k.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+g,y:N.position.y+y}})})),(h.width<o.width||h.height<o.height||g||y)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(g?p[0]*g-w:0),height:S+(y?p[1]*y-E:0)}})}),i}function bse(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const g of e.values()){const y=t.get(g.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const x=x2(g.nodeElement),S=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!y.internals.handleBounds||g.force))){const E=g.nodeElement.getBoundingClientRect(),N=Gl(y.extent)?y.extent:s;let{positionAbsolute:k}=y.internals;y.parentId&&y.extent==="parent"?k=jz(k,x,t.get(y.parentId)):N&&(k=ga(k,N,x));const T={...y,measured:x,internals:{...y.internals,positionAbsolute:k,handleBounds:{source:tR("source",g.nodeElement,E,h,y.id),target:tR("target",g.nodeElement,E,h,y.id)}}};t.set(y.id,T),y.parentId&&k2(T,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&p.push({id:y.id,parentId:y.parentId,rect:$l(T,i)}))}}if(p.length>0){const g=N2(p,t,n,i);u.push(...g)}return{changes:u,updatedInternals:l}}async function xse({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function lR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function Gz(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;lR("source",u,h,e,i,o),lR("target",u,d,e,s,l),t.set(r.id,r)}}function Kz(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Kz(n,t):!1}function cR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function wse(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!Kz(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function Z0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function Sse({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Ad(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Cse({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,g=null,y=!1,x=!1,S=null;function w({noDragClassName:N,handleSelector:k,domNode:T,isSelectable:A,nodeId:M,nodeClickDistance:D=0}){g=sr(T);function R({x:z,y:Y}){const{nodeLookup:B,nodeExtent:F,snapGrid:L,snapToGrid:q,nodeOrigin:W,onNodeDrag:ee,onSelectionDrag:I,onError:G,updateNodePositions:se}=t();s={x:z,y:Y};let le=!1;const H=l.size>1,X=H&&F?jC(Td(l)):null,Q=H&&q?Sse({dragItems:l,snapGrid:L,x:z,y:Y}):null;for(const[ce,ae]of l){if(!B.has(ce))continue;let he={x:z-ae.distance.x,y:Y-ae.distance.y};q&&(he=Q?{x:Math.round(he.x+Q.x),y:Math.round(he.y+Q.y)}:Ad(he,L));let be=null;if(H&&F&&!ae.extent&&X){const{positionAbsolute:Se}=ae.internals,Ce=Se.x-X.x+F[0][0],Ne=Se.x+ae.measured.width-X.x2+F[1][0],nt=Se.y-X.y+F[0][1],Te=Se.y+ae.measured.height-X.y2+F[1][1];be=[[Ce,nt],[Ne,Te]]}const{position:Oe,positionAbsolute:we}=Oz({nodeId:ce,nextPosition:he,nodeLookup:B,nodeExtent:be||F,nodeOrigin:W,onError:G});le=le||ae.position.x!==Oe.x||ae.position.y!==Oe.y,ae.position=Oe,ae.internals.positionAbsolute=we}if(x=x||le,!!le&&(se(l,!0),S&&(r||ee||!M&&I))){const[ce,ae]=Z0({nodeId:M,dragItems:l,nodeLookup:B});r?.(S,l,ce,ae),ee?.(S,ce,ae),M||I?.(S,ae)}}async function P(){if(!h)return;const{transform:z,panBy:Y,autoPanSpeed:B,autoPanOnNodeDrag:F}=t();if(!F){u=!1,cancelAnimationFrame(o);return}const[L,q]=Lz(d,h,B);(L!==0||q!==0)&&(s.x=(s.x??0)-L/z[2],s.y=(s.y??0)-q/z[2],await Y({x:L,y:q})&&R(s)),o=requestAnimationFrame(P)}function $(z){const{nodeLookup:Y,multiSelectionActive:B,nodesDraggable:F,transform:L,snapGrid:q,snapToGrid:W,selectNodesOnDrag:ee,onNodeDragStart:I,onSelectionDragStart:G,unselectNodesAndEdges:se}=t();p=!0,(!ee||!A)&&!B&&M&&(Y.get(M)?.selected||se()),A&&ee&&M&&e?.(M);const le=ju(z.sourceEvent,{transform:L,snapGrid:q,snapToGrid:W,containerBounds:h});if(s=le,l=wse(Y,F,le,M),l.size>0&&(n||I||!M&&G)){const[H,X]=Z0({nodeId:M,dragItems:l,nodeLookup:Y});n?.(z.sourceEvent,l,H,X),I?.(z.sourceEvent,H,X),M||G?.(z.sourceEvent,X)}}const V=dz().clickDistance(D).on("start",z=>{const{domNode:Y,nodeDragThreshold:B,transform:F,snapGrid:L,snapToGrid:q}=t();h=Y?.getBoundingClientRect()||null,y=!1,x=!1,S=z.sourceEvent,B===0&&$(z),s=ju(z.sourceEvent,{transform:F,snapGrid:L,snapToGrid:q,containerBounds:h}),d=hi(z.sourceEvent,h)}).on("drag",z=>{const{autoPanOnNodeDrag:Y,transform:B,snapGrid:F,snapToGrid:L,nodeDragThreshold:q,nodeLookup:W}=t(),ee=ju(z.sourceEvent,{transform:B,snapGrid:F,snapToGrid:L,containerBounds:h});if(S=z.sourceEvent,(z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||M&&!W.has(M))&&(y=!0),!y){if(!u&&Y&&p&&(u=!0,P()),!p){const I=ee.xSnapped-(s.x??0),G=ee.ySnapped-(s.y??0);Math.sqrt(I*I+G*G)>q&&$(z)}(s.x!==ee.xSnapped||s.y!==ee.ySnapped)&&l&&p&&(d=hi(z.sourceEvent,h),R(ee))}}).on("end",z=>{if(!(!p||y)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:Y,updateNodePositions:B,onNodeDragStop:F,onSelectionDragStop:L}=t();if(x&&(B(l,!1),x=!1),i||F||!M&&L){const[q,W]=Z0({nodeId:M,dragItems:l,nodeLookup:Y,dragging:!1});i?.(z.sourceEvent,l,q,W),F?.(z.sourceEvent,q,W),M||L?.(z.sourceEvent,W)}}}).filter(z=>{const Y=z.target;return!z.button&&(!N||!cR(Y,`.${N}`,T))&&(!k||cR(Y,k,T))});g.call(V)}function E(){g?.on(".drag",null)}return{update:w,destroy:E}}function Ese(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())od(i,$l(s))>0&&r.push(s);return r}const kse=250;function Nse(e,t,n,r){let i=[],s=1/0;const o=Ese(e,n,t+kse);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=ld(l,d,d.position,!0),g=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...d,x:h,y:p}],s=g):g===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function Yz(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...ld(o,u,u.position,!0)}:u}function Wz(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Tse(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Xz=()=>!0;function Ase(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:y,onConnectStart:x,onConnect:S,onConnectEnd:w,isValidConnection:E=Xz,onReconnectEnd:N,updateConnection:k,getTransform:T,getFromHandle:A,autoPanSpeed:M,dragThreshold:D=1,handleDomNode:R}){const P=zz(e.target);let $=0,V;const{x:z,y:Y}=hi(e),B=Wz(s,R),F=l?.getBoundingClientRect();let L=!1;if(!F||!B)return;const q=Yz(i,B,r,u,t);if(!q)return;let W=hi(e,F),ee=!1,I=null,G=!1,se=null;function le(){if(!h||!F)return;const[Oe,we]=Lz(W,F,M);g({x:Oe,y:we}),$=requestAnimationFrame(le)}const H={...q,nodeId:i,type:B,position:q.position},X=u.get(i);let ce={inProgress:!0,isValid:null,from:ld(X,H,Ae.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:X,to:W,toHandle:null,toPosition:ZD[H.position],toNode:null};function ae(){L=!0,k(ce),x?.(e,{nodeId:i,handleId:r,handleType:B})}D===0&&ae();function he(Oe){if(!L){const{x:Ne,y:nt}=hi(Oe),Te=Ne-z,bt=nt-Y;if(!(Te*Te+bt*bt>D*D))return;ae()}if(!A()||!H){be(Oe);return}const we=T();W=hi(Oe,F),V=Nse(Md(W,we,!1,[1,1]),n,u,H),ee||(le(),ee=!0);const Se=Zz(Oe,{handle:V,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:E,doc:P,lib:d,flowId:p,nodeLookup:u});se=Se.handleDomNode,I=Se.connection,G=Tse(!!V,Se.isValid);const Ce={...ce,isValid:G,to:Se.toHandle&&G?Ip({x:Se.toHandle.x,y:Se.toHandle.y},we):W,toHandle:Se.toHandle,toPosition:G&&Se.toHandle?Se.toHandle.position:ZD[H.position],toNode:Se.toHandle?u.get(Se.toHandle.nodeId):null};G&&V&&ce.toHandle&&Ce.toHandle&&ce.toHandle.type===Ce.toHandle.type&&ce.toHandle.nodeId===Ce.toHandle.nodeId&&ce.toHandle.id===Ce.toHandle.id&&ce.to.x===Ce.to.x&&ce.to.y===Ce.to.y||(k(Ce),ce=Ce)}function be(Oe){if(L){(V||se)&&I&&G&&S?.(I);const{inProgress:we,...Se}=ce,Ce={...Se,toPosition:ce.toHandle?ce.toPosition:null};w?.(Oe,Ce),s&&N?.(Oe,Ce)}y(),cancelAnimationFrame($),ee=!1,G=!1,I=null,se=null,P.removeEventListener("mousemove",he),P.removeEventListener("mouseup",be),P.removeEventListener("touchmove",he),P.removeEventListener("touchend",be)}P.addEventListener("mousemove",he),P.addEventListener("mouseup",be),P.addEventListener("touchmove",he),P.addEventListener("touchend",be)}function Zz(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=Xz,nodeLookup:h}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:x}=hi(e),S=o.elementFromPoint(y,x),w=S?.classList.contains(`${l}-flow__handle`)?S:g,E={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const N=Wz(void 0,w),k=w.getAttribute("data-nodeid"),T=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),M=w.classList.contains("connectableend");if(!k||!N)return E;const D={source:p?k:r,sourceHandle:p?T:i,target:p?r:k,targetHandle:p?i:T};E.connection=D;const P=A&&M&&(n===ma.Strict?p&&N==="source"||!p&&N==="target":k!==r||T!==i);E.isValid=P&&d(D),E.toHandle=Yz(k,N,T,h,n,!0)}return E}const BC={onPointerDown:Ase,isValid:Zz};function Mse({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=sr(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const x=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=k.sourceEvent.ctrlKey&&ad()?10:1,M=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,D=T[2]*Math.pow(2,M*A);t.scaleTo(D)};let S=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},E=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],M=[A[0]-S[0],A[1]-S[1]];S=A;const D=r()*Math.max(T[2],Math.log(T[2]))*(y?-1:1),R={x:T[0]-M[0]*D,y:T[1]-M[1]*D},P=[[0,0],[u,d]];t.setViewportConstrained({x:R.x,y:R.y,zoom:T[2]},P,l)},N=Nz().on("start",w).on("zoom",p?E:null).on("zoom.wheel",g?x:null);i.call(N,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Fr}}const _se=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Cm=e=>({x:e.x,y:e.y,zoom:e.k}),Q0=({x:e,y:t,zoom:n})=>bm.translate(e,t).scale(n),Tl=(e,t)=>e.target.closest(`.${t}`),Qz=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Dse=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,J0=(e,t=0,n=Dse,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Jz=e=>{const t=e.ctrlKey&&ad()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Rse({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(Tl(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Fr(h),E=Jz(h),N=p*Math.pow(2,E);r.scaleTo(n,N,w,h);return}const g=h.deltaMode===1?20:1;let y=i===aa.Vertical?0:h.deltaX*g,x=i===aa.Horizontal?0:h.deltaY*g;!ad()&&h.shiftKey&&i!==aa.Vertical&&(y=h.deltaY*g,x=0),r.translateBy(n,-(y/p)*s,-(x/p)*s,{internal:!0});const S=Cm(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function Ose({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=Tl(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function jse({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Cm(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Lse({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&Qz(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Cm(s.transform))}}function Pse({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&Qz(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&_se(e.prevViewport,o.transform))){const l=Cm(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Ise({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,g=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(Tl(h,`${d}-flow__node`)||Tl(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Tl(h,l)&&h.type==="wheel"||Tl(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!g&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&y}}function Bse({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=Nz().clickDistance(!Kr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),y=sr(e).call(g);k({x:s.x,y:s.y,zoom:Ul(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const x=y.on("wheel.zoom"),S=y.on("dblclick.zoom");g.wheelDelta(Jz);function w(z,Y){return y?new Promise(B=>{g?.interpolate(Y?.interpolate==="linear"?Ou:Nh).transform(J0(y,Y?.duration,Y?.ease,()=>B(!0)),z)}):Promise.resolve(!1)}function E({noWheelClassName:z,noPanClassName:Y,onPaneContextMenu:B,userSelectionActive:F,panOnScroll:L,panOnDrag:q,panOnScrollMode:W,panOnScrollSpeed:ee,preventScrolling:I,zoomOnPinch:G,zoomOnScroll:se,zoomOnDoubleClick:le,zoomActivationKeyPressed:H,lib:X,onTransformChange:Q}){F&&!h.isZoomingOrPanning&&N();const ae=L&&!H&&!F?Rse({zoomPanValues:h,noWheelClassName:z,d3Selection:y,d3Zoom:g,panOnScrollMode:W,panOnScrollSpeed:ee,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):Ose({noWheelClassName:z,preventScrolling:I,d3ZoomHandler:x});if(y.on("wheel.zoom",ae,{passive:!1}),!F){const be=jse({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});g.on("start",be);const Oe=Lse({zoomPanValues:h,panOnDrag:q,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:Q});g.on("zoom",Oe);const we=Pse({zoomPanValues:h,panOnDrag:q,panOnScroll:L,onPaneContextMenu:B,onPanZoomEnd:u,onDraggingChange:d});g.on("end",we)}const he=Ise({zoomActivationKeyPressed:H,panOnDrag:q,zoomOnScroll:se,panOnScroll:L,zoomOnDoubleClick:le,zoomOnPinch:G,userSelectionActive:F,noPanClassName:Y,noWheelClassName:z,lib:X});g.filter(he),le?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function N(){g.on("zoom",null)}async function k(z,Y,B){const F=Q0(z),L=g?.constrain()(F,Y,B);return L&&await w(L),new Promise(q=>q(L))}async function T(z,Y){const B=Q0(z);return await w(B,Y),new Promise(F=>F(B))}function A(z){if(y){const Y=Q0(z),B=y.property("__zoom");(B.k!==z.zoom||B.x!==z.x||B.y!==z.y)&&g?.transform(y,Y,null,{sync:!0})}}function M(){const z=y?kz(y.node()):{x:0,y:0,k:1};return{x:z.x,y:z.y,zoom:z.k}}function D(z,Y){return y?new Promise(B=>{g?.interpolate(Y?.interpolate==="linear"?Ou:Nh).scaleTo(J0(y,Y?.duration,Y?.ease,()=>B(!0)),z)}):Promise.resolve(!1)}function R(z,Y){return y?new Promise(B=>{g?.interpolate(Y?.interpolate==="linear"?Ou:Nh).scaleBy(J0(y,Y?.duration,Y?.ease,()=>B(!0)),z)}):Promise.resolve(!1)}function P(z){g?.scaleExtent(z)}function $(z){g?.translateExtent(z)}function V(z){const Y=!Kr(z)||z<0?0:z;g?.clickDistance(Y)}return{update:E,destroy:N,setViewport:T,setViewportConstrained:k,getViewport:M,scaleTo:D,scaleBy:R,setScaleExtent:P,setTranslateExtent:$,syncViewport:A,setClickDistance:V}}var ya;(function(e){e.Line="line",e.Handle="handle"})(ya||(ya={}));const zse=["top-left","top-right","bottom-left","bottom-right"],qse=["top","right","bottom","left"];function Vse({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Hse(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Is(e,t){return Math.max(0,t-e)}function Bs(e,t){return Math.max(0,e-t)}function dh(e,t,n){return Math.max(0,t-e,e-n)}function uR(e,t){return e?!t:t}function Fse(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,g=h&&p,{xSnapped:y,ySnapped:x}=n,{minWidth:S,maxWidth:w,minHeight:E,maxHeight:N}=r,{x:k,y:T,width:A,height:M,aspectRatio:D}=e;let R=Math.floor(h?y-e.pointerX:0),P=Math.floor(p?x-e.pointerY:0);const $=A+(u?-R:R),V=M+(d?-P:P),z=-s[0]*A,Y=-s[1]*M;let B=dh($,S,w),F=dh(V,E,N);if(o){let W=0,ee=0;u&&R<0?W=Is(k+R+z,o[0][0]):!u&&R>0&&(W=Bs(k+$+z,o[1][0])),d&&P<0?ee=Is(T+P+Y,o[0][1]):!d&&P>0&&(ee=Bs(T+V+Y,o[1][1])),B=Math.max(B,W),F=Math.max(F,ee)}if(l){let W=0,ee=0;u&&R>0?W=Bs(k+R,l[0][0]):!u&&R<0&&(W=Is(k+$,l[1][0])),d&&P>0?ee=Bs(T+P,l[0][1]):!d&&P<0&&(ee=Is(T+V,l[1][1])),B=Math.max(B,W),F=Math.max(F,ee)}if(i){if(h){const W=dh($/D,E,N)*D;if(B=Math.max(B,W),o){let ee=0;!u&&!d||u&&!d&&g?ee=Bs(T+Y+$/D,o[1][1])*D:ee=Is(T+Y+(u?R:-R)/D,o[0][1])*D,B=Math.max(B,ee)}if(l){let ee=0;!u&&!d||u&&!d&&g?ee=Is(T+$/D,l[1][1])*D:ee=Bs(T+(u?R:-R)/D,l[0][1])*D,B=Math.max(B,ee)}}if(p){const W=dh(V*D,S,w)/D;if(F=Math.max(F,W),o){let ee=0;!u&&!d||d&&!u&&g?ee=Bs(k+V*D+z,o[1][0])/D:ee=Is(k+(d?P:-P)*D+z,o[0][0])/D,F=Math.max(F,ee)}if(l){let ee=0;!u&&!d||d&&!u&&g?ee=Is(k+V*D,l[1][0])/D:ee=Bs(k+(d?P:-P)*D,l[0][0])/D,F=Math.max(F,ee)}}}P=P+(P<0?F:-F),R=R+(R<0?B:-B),i&&(g?$>V*D?P=(uR(u,d)?-R:R)/D:R=(uR(u,d)?-P:P)*D:h?(P=R/D,d=u):(R=P*D,u=d));const L=u?k+R:k,q=d?T+P:T;return{width:A+(u?-R:R),height:M+(d?-P:P),x:s[0]*R*(u?-1:1)+L,y:s[1]*P*(d?-1:1)+q}}const eq={width:0,height:0,x:0,y:0},Use={...eq,pointerX:0,pointerY:0,aspectRatio:1};function $se(e){return[[0,0],[e.measured.width,e.measured.height]]}function Gse(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Kse({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=sr(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:g,onResize:y,onResizeEnd:x,shouldResize:S}){let w={...eq},E={...Use};const N=Hse(u);let k,T=null,A=[],M,D,R;const P=dz().on("start",$=>{const{nodeLookup:V,transform:z,snapGrid:Y,snapToGrid:B,nodeOrigin:F,paneDomNode:L}=n();if(k=V.get(t),!k)return;T=L?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:W}=ju($.sourceEvent,{transform:z,snapGrid:Y,snapToGrid:B,containerBounds:T});w={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},E={...w,pointerX:q,pointerY:W,aspectRatio:w.width/w.height},M=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(M=V.get(k.parentId),D=M&&k.extent==="parent"?$se(M):void 0),A=[],R=void 0;for(const[ee,I]of V)if(I.parentId===t&&(A.push({id:ee,position:{...I.position},extent:I.extent}),I.extent==="parent"||I.expandParent)){const G=Gse(I,k,I.origin??F);R?R=[[Math.min(G[0][0],R[0][0]),Math.min(G[0][1],R[0][1])],[Math.max(G[1][0],R[1][0]),Math.max(G[1][1],R[1][1])]]:R=G}g?.($,{...w})}).on("drag",$=>{const{transform:V,snapGrid:z,snapToGrid:Y,nodeOrigin:B}=n(),F=ju($.sourceEvent,{transform:V,snapGrid:z,snapToGrid:Y,containerBounds:T}),L=[];if(!k)return;const{x:q,y:W,width:ee,height:I}=w,G={},se=k.origin??B,{width:le,height:H,x:X,y:Q}=Fse(E,N,F,d,h,se,D,R),ce=le!==ee,ae=H!==I,he=X!==q&&ce,be=Q!==W&&ae;if(!he&&!be&&!ce&&!ae)return;if((he||be||se[0]===1||se[1]===1)&&(G.x=he?X:w.x,G.y=be?Q:w.y,w.x=G.x,w.y=G.y,A.length>0)){const Ce=X-q,Ne=Q-W;for(const nt of A)nt.position={x:nt.position.x-Ce+se[0]*(le-ee),y:nt.position.y-Ne+se[1]*(H-I)},L.push(nt)}if((ce||ae)&&(G.width=ce&&(!p||p==="horizontal")?le:w.width,G.height=ae&&(!p||p==="vertical")?H:w.height,w.width=G.width,w.height=G.height),M&&k.expandParent){const Ce=se[0]*(G.width??0);G.x&&G.x<Ce&&(w.x=Ce,E.x=E.x-(G.x-Ce));const Ne=se[1]*(G.height??0);G.y&&G.y<Ne&&(w.y=Ne,E.y=E.y-(G.y-Ne))}const Oe=Vse({width:w.width,prevWidth:ee,height:w.height,prevHeight:I,affectsX:N.affectsX,affectsY:N.affectsY}),we={...w,direction:Oe};S?.($,we)!==!1&&(y?.($,we),r(G,L))}).on("end",$=>{x?.($,{...w}),i?.({...w})});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Yse={},dR=e=>{let t;const n=new Set,r=(h,p)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(x=>x(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Yse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},Wse=e=>e?dR(e):dR,{useDebugValue:Xse}=Le,{useSyncExternalStoreWithSelector:Zse}=dJ,Qse=e=>e;function tq(e,t=Qse,n){const r=Zse(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Xse(r),r}const fR=(e,t)=>{const n=Wse(e),r=(i,s=t)=>tq(n,i,s);return Object.assign(r,n),r},Jse=(e,t)=>e?fR(e,t):fR;function Et(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Em=O.createContext(null),eoe=Em.Provider,nq=bi.error001();function Ze(e,t){const n=O.useContext(Em);if(n===null)throw new Error(nq);return tq(n,e,t)}function yt(){const e=O.useContext(Em);if(e===null)throw new Error(nq);return O.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const hR={display:"none"},toe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rq="react-flow__node-desc",iq="react-flow__edge-desc",noe="react-flow__aria-live",roe=e=>e.ariaLiveMessage,ioe=e=>e.ariaLabelConfig;function soe({rfId:e}){const t=Ze(roe);return v.jsx("div",{id:`${noe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:toe,children:t})}function ooe({rfId:e,disableKeyboardA11y:t}){const n=Ze(ioe);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${rq}-${e}`,style:hR,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${iq}-${e}`,style:hR,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(soe,{rfId:e})]})}const km=O.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return v.jsx("div",{className:Yt(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});km.displayName="Panel";function aoe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx(km,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const loe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},fh=e=>e.id;function coe(e,t){return Et(e.selectedNodes.map(fh),t.selectedNodes.map(fh))&&Et(e.selectedEdges.map(fh),t.selectedEdges.map(fh))}function uoe({onSelectionChange:e}){const t=yt(),{selectedNodes:n,selectedEdges:r}=Ze(loe,coe);return O.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const doe=e=>!!e.onSelectionChangeHandlers;function foe({onSelectionChange:e}){const t=Ze(doe);return e||t?v.jsx(uoe,{onSelectionChange:e}):null}const sq=[0,0],hoe={x:0,y:0,zoom:1},poe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],pR=[...poe,"rfId"],moe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),mR={translateExtent:id,nodeOrigin:sq,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function goe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=Ze(moe,Et),h=yt();O.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=mR,l()}),[]);const p=O.useRef(mR);return O.useEffect(()=>{for(const g of pR){const y=e[g],x=p.current[g];y!==x&&(typeof e[g]>"u"||(g==="nodes"?t(y):g==="edges"?n(y):g==="minZoom"?r(y):g==="maxZoom"?i(y):g==="translateExtent"?s(y):g==="nodeExtent"?o(y):g==="paneClickDistance"?d(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:ise(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=e},pR.map(g=>e[g])),null}function gR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function yoe(e){const[t,n]=O.useState(e==="system"?null:e);return O.useEffect(()=>{if(e!=="system"){n(e);return}const r=gR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:gR()?.matches?"dark":"light"}const yR=typeof document<"u"?document:null;function cd(e=null,t={target:yR,actInsideInputWithModifier:!0}){const[n,r]=O.useState(!1),i=O.useRef(!1),s=O.useRef(new Set([])),[o,l]=O.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,g)=>p.concat(...g),[]);return[d,h]}return[[],[]]},[e]);return O.useEffect(()=>{const u=t?.target??yR,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!i.current||i.current&&!d)&&qz(y))return!1;const S=bR(y.code,l);if(s.current.add(y[S]),vR(o,s.current,!1)){const w=y.composedPath?.()?.[0]||y.target,E=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!E)&&y.preventDefault(),r(!0)}},p=y=>{const x=bR(y.code,l);vR(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[x]),y.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function vR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function bR(e,t){return t.includes(e)?"code":"key"}const voe=()=>{const e=yt();return O.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=Sm(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return Md(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Ip(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function oq(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)boe(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function boe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function aq(e,t){return oq(e,t)}function lq(e,t){return oq(e,t)}function Ho(e,t){return{id:e,type:"select",selected:t}}function Al(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ho(s.id,o)))}return r}function xR({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function wR(e){return{id:e.id,type:"remove"}}const SR=e=>Wie(e),xoe=e=>Dz(e);function cq(e){return O.forwardRef(e)}const woe=typeof window<"u"?O.useLayoutEffect:O.useEffect;function CR(e){const[t,n]=O.useState(BigInt(0)),[r]=O.useState(()=>Soe(()=>n(i=>i+BigInt(1))));return woe(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Soe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const uq=O.createContext(null);function Coe({children:e}){const t=yt(),n=O.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:g,fitViewQueued:y}=t.getState();let x=u;for(const w of l)x=typeof w=="function"?w(x):w;const S=xR({items:x,lookup:g});h&&d(x),S.length>0?p?.(S):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:E,setNodes:N}=t.getState();w&&N(E)})},[]),r=CR(n),i=O.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:g}=t.getState();let y=u;for(const x of l)y=typeof x=="function"?x(y):x;h?d(y):p&&p(xR({items:y,lookup:g}))},[]),s=CR(i),o=O.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return v.jsx(uq.Provider,{value:o,children:e})}function Eoe(){const e=O.useContext(uq);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const koe=e=>!!e.panZoom;function ud(){const e=voe(),t=yt(),n=Eoe(),r=Ze(koe),i=O.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),x=SR(p)?p:g.get(p.id),S=x.parentId?Bz(x.position,x.measured,x.parentId,g,y):x.position,w={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return $l(w)},d=(p,g,y={replace:!1})=>{o(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&SR(w)?w:{...S,...w}}return S}))},h=(p,g,y={replace:!1})=>{l(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&xoe(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[x,S,w]=y;return{nodes:p.map(E=>({...E})),edges:g.map(E=>({...E})),viewport:{x,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:x,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:E,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:T}=t.getState(),{nodes:A,edges:M}=await Jie({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:x,onBeforeDelete:T}),D=M.length>0,R=A.length>0;if(D){const P=M.map(wR);w?.(M),N(P)}if(R){const P=A.map(wR);S?.(A),E(P)}return(R||D)&&k?.({nodes:A,edges:M}),{deletedNodes:A,deletedEdges:M}},getIntersectingNodes:(p,g=!0,y)=>{const x=JD(p),S=x?p:u(p),w=y!==void 0;return S?(y||t.getState().nodes).filter(E=>{const N=t.getState().nodeLookup.get(E.id);if(N&&!x&&(E.id===p.id||!N.internals.positionAbsolute))return!1;const k=$l(w?E:N),T=od(k,S);return g&&T>0||T>=k.width*k.height||T>=S.width*S.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const S=JD(p)?p:u(p);if(!S)return!1;const w=od(S,g);return y&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,g,y={replace:!1})=>{d(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},updateEdge:h,updateEdgeData:(p,g,y={replace:!1})=>{h(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return Rz(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??rse();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return O.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const ER=e=>e.selected,Noe=typeof window<"u"?window:void 0;function Toe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=yt(),{deleteElements:r}=ud(),i=cd(e,{actInsideInputWithModifier:!1}),s=cd(t,{target:Noe});O.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(ER),edges:o.filter(ER)}),n.setState({nodesSelectionActive:!1})}},[i]),O.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function Aoe(e){const t=yt();O.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=x2(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",bi.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Nm={position:"absolute",width:"100%",height:"100%",top:0,left:0},Moe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function _oe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=aa.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:x,noWheelClassName:S,noPanClassName:w,onViewportChange:E,isControlledViewport:N,paneClickDistance:k}){const T=yt(),A=O.useRef(null),{userSelectionActive:M,lib:D}=Ze(Moe,Et),R=cd(g),P=O.useRef();Aoe(A);const $=O.useCallback(V=>{E?.({x:V[0],y:V[1],zoom:V[2]}),N||T.setState({transform:V})},[E,N]);return O.useEffect(()=>{if(A.current){P.current=Bse({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:k,onDraggingChange:B=>T.setState({paneDragging:B}),onPanZoomStart:(B,F)=>{const{onViewportChangeStart:L,onMoveStart:q}=T.getState();q?.(B,F),L?.(F)},onPanZoom:(B,F)=>{const{onViewportChange:L,onMove:q}=T.getState();q?.(B,F),L?.(F)},onPanZoomEnd:(B,F)=>{const{onViewportChangeEnd:L,onMoveEnd:q}=T.getState();q?.(B,F),L?.(F)}});const{x:V,y:z,zoom:Y}=P.current.getViewport();return T.setState({panZoom:P.current,transform:[V,z,Y],domNode:A.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),O.useEffect(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:y,noPanClassName:w,userSelectionActive:M,noWheelClassName:S,lib:D,onTransformChange:$})},[e,t,n,r,i,s,o,l,R,y,w,M,S,D,$]),v.jsx("div",{className:"react-flow__renderer",ref:A,style:Nm,children:x})}const Doe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Roe(){const{userSelectionActive:e,userSelectionRect:t}=Ze(Doe,Et);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const ev=(e,t)=>n=>{n.target===t.current&&e?.(n)},Ooe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function joe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=sd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:y}){const x=yt(),{userSelectionActive:S,elementsSelectable:w,dragging:E,connectionInProgress:N}=Ze(Ooe,Et),k=w&&(e||S),T=O.useRef(null),A=O.useRef(),M=O.useRef(new Set),D=O.useRef(new Set),R=O.useRef(!1),P=O.useRef(!1),$=q=>{if(R.current||N){R.current=!1;return}l?.(q),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},V=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}u?.(q)},z=d?q=>d(q):void 0,Y=q=>{const{resetSelectedElements:W,domNode:ee}=x.getState();if(A.current=ee?.getBoundingClientRect(),!w||!e||q.button!==0||q.target!==T.current||!A.current)return;q.target?.setPointerCapture?.(q.pointerId),P.current=!0,R.current=!1;const{x:I,y:G}=hi(q.nativeEvent,A.current);W(),x.setState({userSelectionRect:{width:0,height:0,startX:I,startY:G,x:I,y:G}}),s?.(q)},B=q=>{const{userSelectionRect:W,transform:ee,nodeLookup:I,edgeLookup:G,connectionLookup:se,triggerNodeChanges:le,triggerEdgeChanges:H,defaultEdgeOptions:X}=x.getState();if(!A.current||!W)return;R.current=!0;const{x:Q,y:ce}=hi(q.nativeEvent,A.current),{startX:ae,startY:he}=W,be={startX:ae,startY:he,x:Q<ae?Q:ae,y:ce<he?ce:he,width:Math.abs(Q-ae),height:Math.abs(ce-he)},Oe=M.current,we=D.current;M.current=new Set(b2(I,be,ee,n===sd.Partial,!0).map(Ce=>Ce.id)),D.current=new Set;const Se=X?.selectable??!0;for(const Ce of M.current){const Ne=se.get(Ce);if(Ne)for(const{edgeId:nt}of Ne.values()){const Te=G.get(nt);Te&&(Te.selectable??Se)&&D.current.add(nt)}}if(!eR(Oe,M.current)){const Ce=Al(I,M.current,!0);le(Ce)}if(!eR(we,D.current)){const Ce=Al(G,D.current);H(Ce)}x.setState({userSelectionRect:be,userSelectionActive:!0,nodesSelectionActive:!1})},F=q=>{if(q.button!==0||!P.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:W}=x.getState();!S&&W&&q.target===T.current&&$?.(q),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),o?.(q),(t||i)&&(R.current=!1),P.current=!1},L=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:Yt(["react-flow__pane",{draggable:L,dragging:E,selection:e}]),onClick:k?void 0:ev($,T),onContextMenu:ev(V,T),onWheel:ev(z,T),onPointerEnter:k?void 0:h,onPointerDown:k?Y:p,onPointerMove:k?B:p,onPointerUp:k?F:void 0,onPointerLeave:g,ref:T,style:Nm,children:[y,v.jsx(Roe,{})]})}function zC({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",bi.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function dq({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=yt(),[u,d]=O.useState(!1),h=O.useRef();return O.useEffect(()=>{h.current=Cse({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{zC({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),O.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const Loe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function fq(){const e=yt();return O.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,g=Loe(o),y=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*y*n.factor,w=n.direction.y*x*n.factor;for(const[,E]of d){if(!g(E))continue;let N={x:E.internals.positionAbsolute.x+S,y:E.internals.positionAbsolute.y+w};i&&(N=Ad(N,s));const{position:k,positionAbsolute:T}=Oz({nodeId:E.id,nextPosition:N,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});E.position=k,E.internals.positionAbsolute=T,p.set(E.id,E)}u(p)},[])}const T2=O.createContext(null),Poe=T2.Provider;T2.Consumer;const hq=()=>O.useContext(T2),Ioe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Boe=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===ma.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function zoe({type:e="source",position:t=Ae.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...g},y){const x=o||null,S=e==="target",w=yt(),E=hq(),{connectOnClick:N,noPanClassName:k,rfId:T}=Ze(Ioe,Et),{connectingFrom:A,connectingTo:M,clickConnecting:D,isPossibleEndHandle:R,connectionInProcess:P,clickConnectionInProcess:$,valid:V}=Ze(Boe(E,x,e),Et);E||w.getState().onError?.("010",bi.error010());const z=F=>{const{defaultEdgeOptions:L,onConnect:q,hasDefaultEdges:W}=w.getState(),ee={...L,...F};if(W){const{edges:I,setEdges:G}=w.getState();G(Fz(ee,I))}q?.(ee),l?.(ee)},Y=F=>{if(!E)return;const L=Vz(F.nativeEvent);if(i&&(L&&F.button===0||!L)){const q=w.getState();BC.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:x,nodeId:E,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:z,isValidConnection:n||q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}L?h?.(F):p?.(F)},B=F=>{const{onClickConnectStart:L,onClickConnectEnd:q,connectionClickStartHandle:W,connectionMode:ee,isValidConnection:I,lib:G,rfId:se,nodeLookup:le,connection:H}=w.getState();if(!E||!W&&!i)return;if(!W){L?.(F.nativeEvent,{nodeId:E,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:E,type:e,id:x}});return}const X=zz(F.target),Q=n||I,{connection:ce,isValid:ae}=BC.isValid(F.nativeEvent,{handle:{nodeId:E,id:x,type:e},connectionMode:ee,fromNodeId:W.nodeId,fromHandleId:W.id||null,fromType:W.type,isValidConnection:Q,flowId:se,doc:X,lib:G,nodeLookup:le});ae&&ce&&z(ce);const he=structuredClone(H);delete he.inProgress,he.toPosition=he.toHandle?he.toHandle.position:null,q?.(F,he),w.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":E,"data-handlepos":t,"data-id":`${T}-${E}-${x}-${e}`,className:Yt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:D,connectingfrom:A,connectingto:M,valid:V,connectionindicator:r&&(!P||R)&&(P||$?s:i)}]),onMouseDown:Y,onTouchStart:Y,onClick:N?B:void 0,ref:y,...g,children:u})}const Nr=O.memo(cq(zoe));function qoe({data:e,isConnectable:t,sourcePosition:n=Ae.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(Nr,{type:"source",position:n,isConnectable:t})]})}function Voe({data:e,isConnectable:t,targetPosition:n=Ae.Top,sourcePosition:r=Ae.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Nr,{type:"target",position:n,isConnectable:t}),e?.label,v.jsx(Nr,{type:"source",position:r,isConnectable:t})]})}function Hoe(){return null}function Foe({data:e,isConnectable:t,targetPosition:n=Ae.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Nr,{type:"target",position:n,isConnectable:t}),e?.label]})}const Bp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},kR={input:qoe,default:Voe,output:Foe,group:Hoe};function Uoe(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const $oe=e=>{const{width:t,height:n,x:r,y:i}=Td(e.nodeLookup,{filter:s=>!!s.selected});return{width:Kr(t)?t:null,height:Kr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Goe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=yt(),{width:i,height:s,transformString:o,userSelectionActive:l}=Ze($oe,Et),u=fq(),d=O.useRef(null);if(O.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),dq({nodeRef:d}),l||!i||!s)return null;const h=e?g=>{const y=r.getState().nodes.filter(x=>x.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Bp,g.key)&&(g.preventDefault(),u({direction:Bp[g.key],factor:g.shiftKey?4:1}))};return v.jsx("div",{className:Yt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:v.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const NR=typeof window<"u"?window:void 0,Koe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function pq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:M,zoomOnDoubleClick:D,panOnDrag:R,defaultViewport:P,translateExtent:$,minZoom:V,maxZoom:z,preventScrolling:Y,onSelectionContextMenu:B,noWheelClassName:F,noPanClassName:L,disableKeyboardA11y:q,onViewportChange:W,isControlledViewport:ee}){const{nodesSelectionActive:I,userSelectionActive:G}=Ze(Koe),se=cd(d,{target:NR}),le=cd(S,{target:NR}),H=le||R,X=le||T,Q=h&&H!==!0,ce=se||G||Q;return Toe({deleteKeyCode:u,multiSelectionKeyCode:x}),v.jsx(_oe,{onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:X,panOnScrollSpeed:A,panOnScrollMode:M,zoomOnDoubleClick:D,panOnDrag:!se&&H,defaultViewport:P,translateExtent:$,minZoom:V,maxZoom:z,zoomActivationKeyCode:w,preventScrolling:Y,noWheelClassName:F,noPanClassName:L,onViewportChange:W,isControlledViewport:ee,paneClickDistance:l,children:v.jsxs(joe,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:H,isSelecting:!!ce,selectionMode:p,selectionKeyPressed:se,selectionOnDrag:Q,children:[e,I&&v.jsx(Goe,{onSelectionContextMenu:B,noPanClassName:L,disableKeyboardA11y:q})]})})}pq.displayName="FlowRenderer";const Yoe=O.memo(pq),Woe=e=>t=>e?b2(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Xoe(e){return Ze(O.useCallback(Woe(e),[e]),Et)}const Zoe=e=>e.updateNodeInternals;function Qoe(){const e=Ze(Zoe),[t]=O.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return O.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Joe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=yt(),s=O.useRef(null),o=O.useRef(null),l=O.useRef(e.sourcePosition),u=O.useRef(e.targetPosition),d=O.useRef(t),h=n&&!!e.internals.handleBounds;return O.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),O.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),O.useEffect(()=>{if(s.current){const p=d.current!==t,g=l.current!==e.sourcePosition,y=u.current!==e.targetPosition;(p||g||y)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function eae({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:x,rfId:S,nodeTypes:w,nodeClickDistance:E,onError:N}){const{node:k,internals:T,isParent:A}=Ze(ae=>{const he=ae.nodeLookup.get(e),be=ae.parentLookup.has(e);return{node:he,internals:he.internals,isParent:be}},Et);let M=k.type||"default",D=w?.[M]||kR[M];D===void 0&&(N?.("003",bi.error003(M)),M="default",D=w?.default||kR.default);const R=!!(k.draggable||l&&typeof k.draggable>"u"),P=!!(k.selectable||u&&typeof k.selectable>"u"),$=!!(k.connectable||d&&typeof k.connectable>"u"),V=!!(k.focusable||h&&typeof k.focusable>"u"),z=yt(),Y=Iz(k),B=Joe({node:k,nodeType:M,hasDimensions:Y,resizeObserver:p}),F=dq({nodeRef:B,disabled:k.hidden||!R,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:E}),L=fq();if(k.hidden)return null;const q=ns(k),W=Uoe(k),ee=P||R||t||n||r||i,I=n?ae=>n(ae,{...T.userNode}):void 0,G=r?ae=>r(ae,{...T.userNode}):void 0,se=i?ae=>i(ae,{...T.userNode}):void 0,le=s?ae=>s(ae,{...T.userNode}):void 0,H=o?ae=>o(ae,{...T.userNode}):void 0,X=ae=>{const{selectNodesOnDrag:he,nodeDragThreshold:be}=z.getState();P&&(!he||!R||be>0)&&zC({id:e,store:z,nodeRef:B}),t&&t(ae,{...T.userNode})},Q=ae=>{if(!(qz(ae.nativeEvent)||x)){if(Tz.includes(ae.key)&&P){const he=ae.key==="Escape";zC({id:e,store:z,unselect:he,nodeRef:B})}else if(R&&k.selected&&Object.prototype.hasOwnProperty.call(Bp,ae.key)){ae.preventDefault();const{ariaLabelConfig:he}=z.getState();z.setState({ariaLiveMessage:he["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),L({direction:Bp[ae.key],factor:ae.shiftKey?4:1})}}},ce=()=>{if(x||!B.current?.matches(":focus-visible"))return;const{transform:ae,width:he,height:be,autoPanOnNodeFocus:Oe,setCenter:we}=z.getState();if(!Oe)return;b2(new Map([[e,k]]),{x:0,y:0,width:he,height:be},ae,!0).length>0||we(k.position.x+q.width/2,k.position.y+q.height/2,{zoom:ae[2]})};return v.jsx("div",{className:Yt(["react-flow__node",`react-flow__node-${M}`,{[y]:R},k.className,{selected:k.selected,selectable:P,parent:A,draggable:R,dragging:F}]),ref:B,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:ee?"all":"none",visibility:Y?"visible":"hidden",...k.style,...W},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:I,onMouseMove:G,onMouseLeave:se,onContextMenu:le,onClick:X,onDoubleClick:H,onKeyDown:V?Q:void 0,tabIndex:V?0:void 0,onFocus:V?ce:void 0,role:k.ariaRole??(V?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${rq}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:v.jsx(Poe,{value:e,children:v.jsx(D,{id:e,data:k.data,type:M,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:P,draggable:R,deletable:k.deletable??!0,isConnectable:$,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:F,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...q})})})}const tae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function mq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Ze(tae,Et),o=Xoe(e.onlyRenderVisibleElements),l=Qoe();return v.jsx("div",{className:"react-flow__nodes",style:Nm,children:o.map(u=>v.jsx(eae,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}mq.displayName="NodeRenderer";const nae=O.memo(mq);function rae(e){return Ze(O.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&ase({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Et)}const iae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return v.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},sae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return v.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},TR={[Lp.Arrow]:iae,[Lp.ArrowClosed]:sae};function oae(e){const t=yt();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(TR,e)?TR[e]:(t.getState().onError?.("009",bi.error009(e)),null),[e])}const aae=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=oae(t);return u?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:v.jsx(u,{color:n,strokeWidth:o})}):null},gq=({defaultColor:e,rfId:t})=>{const n=Ze(s=>s.edges),r=Ze(s=>s.defaultEdgeOptions),i=O.useMemo(()=>pse(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:i.map(s=>v.jsx(aae,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};gq.displayName="MarkerDefinitions";var lae=O.memo(gq);function yq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,g]=O.useState({x:1,y:0,width:0,height:0}),y=Yt(["react-flow__edge-textwrapper",d]),x=O.useRef(null);return O.useEffect(()=>{if(x.current){const S=x.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...h,children:[i&&v.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),v.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}yq.displayName="EdgeText";const cae=O.memo(yq);function Tm({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...h,d:e,fill:"none",className:Yt(["react-flow__edge-path",h.className])}),d?v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&Kr(t)&&Kr(n)?v.jsx(cae,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function AR({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ae.Left||e===Ae.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function vq({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top}){const[o,l]=AR({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=AR({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,g,y]=Hz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,g,y]}function bq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})=>{const[N,k,T]=vq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return v.jsx(Tm,{id:A,path:N,labelX:k,labelY:T,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})})}const uae=bq({isInternal:!1}),xq=bq({isInternal:!0});uae.displayName="SimpleBezierEdge";xq.displayName="SimpleBezierEdgeInternal";function wq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:y=Ae.Bottom,targetPosition:x=Ae.Top,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=LC({sourceX:n,sourceY:r,sourcePosition:y,targetX:i,targetY:s,targetPosition:x,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),M=e.isInternal?void 0:t;return v.jsx(Tm,{id:M,path:k,labelX:T,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:w,interactionWidth:N})})}const Sq=wq({isInternal:!1}),Cq=wq({isInternal:!0});Sq.displayName="SmoothStepEdge";Cq.displayName="SmoothStepEdgeInternal";function Eq(e){return O.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return v.jsx(Sq,{...n,id:r,pathOptions:O.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const dae=Eq({isInternal:!1}),kq=Eq({isInternal:!0});dae.displayName="StepEdge";kq.displayName="StepEdgeInternal";function Nq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})=>{const[w,E,N]=Uz({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return v.jsx(Tm,{id:k,path:w,labelX:E,labelY:N,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})})}const fae=Nq({isInternal:!1}),Tq=Nq({isInternal:!0});fae.displayName="StraightEdge";Tq.displayName="StraightEdgeInternal";function Aq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ae.Bottom,targetPosition:l=Ae.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=w2({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:E?.curvature}),M=e.isInternal?void 0:t;return v.jsx(Tm,{id:M,path:k,labelX:T,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:N})})}const hae=Aq({isInternal:!1}),Mq=Aq({isInternal:!0});hae.displayName="BezierEdge";Mq.displayName="BezierEdgeInternal";const MR={default:Mq,straight:Tq,step:kq,smoothstep:Cq,simplebezier:xq},_R={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},pae=(e,t,n)=>n===Ae.Left?e-t:n===Ae.Right?e+t:e,mae=(e,t,n)=>n===Ae.Top?e-t:n===Ae.Bottom?e+t:e,DR="react-flow__edgeupdater";function RR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Yt([DR,`${DR}-${l}`]),cx:pae(t,r,e),cy:mae(n,r,e),r,stroke:"transparent",fill:"transparent"})}function gae({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const x=yt(),S=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:M,domNode:D,isValidConnection:R,connectionMode:P,connectionRadius:$,lib:V,onConnectStart:z,onConnectEnd:Y,cancelConnection:B,nodeLookup:F,rfId:L,panBy:q,updateConnection:W}=x.getState(),ee=A.type==="target",I=(le,H)=>{g(!1),p?.(le,n,A.type,H)},G=le=>d?.(n,le),se=(le,H)=>{g(!0),h?.(T,n,A.type),z?.(le,H)};BC.onPointerDown(T.nativeEvent,{autoPanOnConnect:M,connectionMode:P,connectionRadius:$,domNode:D,handleId:A.id,nodeId:A.nodeId,nodeLookup:F,isTarget:ee,edgeUpdaterType:A.type,lib:V,flowId:L,cancelConnection:B,panBy:q,isValidConnection:R,onConnect:G,onConnectStart:se,onConnectEnd:Y,onReconnectEnd:I,updateConnection:W,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},w=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),E=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>y(!0),k=()=>y(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(RR,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:N,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&v.jsx(RR,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:E,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function yae({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:x,edgeTypes:S,noPanClassName:w,onError:E,disableKeyboardA11y:N}){let k=Ze(we=>we.edgeLookup.get(e));const T=Ze(we=>we.defaultEdgeOptions);k=T?{...T,...k}:k;let A=k.type||"default",M=S?.[A]||MR[A];M===void 0&&(E?.("011",bi.error011(A)),A="default",M=S?.default||MR.default);const D=!!(k.focusable||t&&typeof k.focusable>"u"),R=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),P=!!(k.selectable||r&&typeof k.selectable>"u"),$=O.useRef(null),[V,z]=O.useState(!1),[Y,B]=O.useState(!1),F=yt(),{zIndex:L,sourceX:q,sourceY:W,targetX:ee,targetY:I,sourcePosition:G,targetPosition:se}=Ze(O.useCallback(we=>{const Se=we.nodeLookup.get(k.source),Ce=we.nodeLookup.get(k.target);if(!Se||!Ce)return{zIndex:k.zIndex,..._R};const Ne=hse({id:e,sourceNode:Se,targetNode:Ce,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:we.connectionMode,onError:E});return{zIndex:ose({selected:k.selected,zIndex:k.zIndex,sourceNode:Se,targetNode:Ce,elevateOnSelect:we.elevateEdgesOnSelect}),...Ne||_R}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Et),le=O.useMemo(()=>k.markerStart?`url('#${PC(k.markerStart,x)}')`:void 0,[k.markerStart,x]),H=O.useMemo(()=>k.markerEnd?`url('#${PC(k.markerEnd,x)}')`:void 0,[k.markerEnd,x]);if(k.hidden||q===null||W===null||ee===null||I===null)return null;const X=we=>{const{addSelectedEdges:Se,unselectNodesAndEdges:Ce,multiSelectionActive:Ne}=F.getState();P&&(F.setState({nodesSelectionActive:!1}),k.selected&&Ne?(Ce({nodes:[],edges:[k]}),$.current?.blur()):Se([e])),i&&i(we,k)},Q=s?we=>{s(we,{...k})}:void 0,ce=o?we=>{o(we,{...k})}:void 0,ae=l?we=>{l(we,{...k})}:void 0,he=u?we=>{u(we,{...k})}:void 0,be=d?we=>{d(we,{...k})}:void 0,Oe=we=>{if(!N&&Tz.includes(we.key)&&P){const{unselectNodesAndEdges:Se,addSelectedEdges:Ce}=F.getState();we.key==="Escape"?($.current?.blur(),Se({edges:[k]})):Ce([e])}};return v.jsx("svg",{style:{zIndex:L},children:v.jsxs("g",{className:Yt(["react-flow__edge",`react-flow__edge-${A}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!P&&!i,updating:V,selectable:P}]),onClick:X,onDoubleClick:Q,onContextMenu:ce,onMouseEnter:ae,onMouseMove:he,onMouseLeave:be,onKeyDown:D?Oe:void 0,tabIndex:D?0:void 0,role:k.ariaRole??(D?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":D?`${iq}-${x}`:void 0,ref:$,...k.domAttributes,children:[!Y&&v.jsx(M,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:P,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:q,sourceY:W,targetX:ee,targetY:I,sourcePosition:G,targetPosition:se,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:le,markerEnd:H,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),R&&v.jsx(gae,{edge:k,isReconnectable:R,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:q,sourceY:W,targetX:ee,targetY:I,sourcePosition:G,targetPosition:se,setUpdateHover:z,setReconnecting:B})]})})}const vae=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function _q({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,onError:k}=Ze(vae,Et),T=rae(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(lae,{defaultColor:e,rfId:n}),T.map(A=>v.jsx(yae,{id:A,edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},A))]})}_q.displayName="EdgeRenderer";const bae=O.memo(_q),xae=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function wae({children:e}){const t=Ze(xae);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Sae(e){const t=ud(),n=O.useRef(!1);O.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Cae=e=>e.panZoom?.syncViewport;function Eae(e){const t=Ze(Cae),n=yt();return O.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function kae(e){return e.connection.inProgress?{...e.connection,to:Md(e.connection.to,e.transform)}:{...e.connection}}function Nae(e){return kae}function Tae(e){const t=Nae();return Ze(t,Et)}const Aae=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Mae({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Ze(Aae,Et);return!(s&&i&&u)?null:v.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:Yt(["react-flow__connection",_z(l)]),children:v.jsx(Dq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const Dq=({style:e,type:t=Gs.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:g}=Tae();if(!i)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:_z(r),toNode:h,toHandle:p});let y="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(t){case Gs.Bezier:[y]=w2(x);break;case Gs.SimpleBezier:[y]=vq(x);break;case Gs.Step:[y]=LC({...x,borderRadius:0});break;case Gs.SmoothStep:[y]=LC(x);break;default:[y]=Uz(x)}return v.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};Dq.displayName="ConnectionLine";const _ae={};function OR(e=_ae){O.useRef(e),yt(),O.useEffect(()=>{},[e])}function Dae(){yt(),O.useRef(!1),O.useEffect(()=>{},[])}function Rq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:E,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:M,zoomActivationKeyCode:D,deleteKeyCode:R,onlyRenderVisibleElements:P,elementsSelectable:$,defaultViewport:V,translateExtent:z,minZoom:Y,maxZoom:B,preventScrolling:F,defaultMarkerColor:L,zoomOnScroll:q,zoomOnPinch:W,panOnScroll:ee,panOnScrollSpeed:I,panOnScrollMode:G,zoomOnDoubleClick:se,panOnDrag:le,onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:Q,onPaneMouseLeave:ce,onPaneScroll:ae,onPaneContextMenu:he,paneClickDistance:be,nodeClickDistance:Oe,onEdgeContextMenu:we,onEdgeMouseEnter:Se,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ne,reconnectRadius:nt,onReconnect:Te,onReconnectStart:bt,onReconnectEnd:Bt,noDragClassName:jn,noWheelClassName:Xt,noPanClassName:tn,disableKeyboardA11y:ft,nodeExtent:cr,rfId:xn,viewport:nn,onViewportChange:ht}){return OR(e),OR(t),Dae(),Sae(n),Eae(nn),v.jsx(Yoe,{onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:Q,onPaneMouseLeave:ce,onPaneContextMenu:he,onPaneScroll:ae,paneClickDistance:be,deleteKeyCode:R,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:M,zoomActivationKeyCode:D,elementsSelectable:$,zoomOnScroll:q,zoomOnPinch:W,zoomOnDoubleClick:se,panOnScroll:ee,panOnScrollSpeed:I,panOnScrollMode:G,panOnDrag:le,defaultViewport:V,translateExtent:z,minZoom:Y,maxZoom:B,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:jn,noWheelClassName:Xt,noPanClassName:tn,disableKeyboardA11y:ft,onViewportChange:ht,isControlledViewport:!!nn,children:v.jsxs(wae,{children:[v.jsx(bae,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Te,onReconnectStart:bt,onReconnectEnd:Bt,onlyRenderVisibleElements:P,onEdgeContextMenu:we,onEdgeMouseEnter:Se,onEdgeMouseMove:Ce,onEdgeMouseLeave:Ne,reconnectRadius:nt,defaultMarkerColor:L,noPanClassName:tn,disableKeyboardA11y:ft,rfId:xn}),v.jsx(Mae,{style:S,type:x,component:w,containerStyle:E}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(nae,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Oe,onlyRenderVisibleElements:P,noPanClassName:tn,noDragClassName:jn,disableKeyboardA11y:ft,nodeExtent:cr,rfId:xn}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Rq.displayName="GraphView";const Rae=O.memo(Rq),jR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const g=new Map,y=new Map,x=new Map,S=new Map,w=r??t??[],E=n??e??[],N=h??[0,0],k=p??id;Gz(x,S,w);const T=IC(E,g,y,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const M=Td(g,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:D,y:R,zoom:P}=Sm(M,i,s,u,d,l?.padding??.1);A=[D,R,P]}return{rfId:"1",width:0,height:0,transform:A,nodes:E,nodesInitialized:T,nodeLookup:g,parentLookup:y,edges:w,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:id,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ma.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Mz},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:ese,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Az}},Oae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>Jse((g,y)=>{async function x(){const{nodeLookup:S,panZoom:w,fitViewOptions:E,fitViewResolver:N,width:k,height:T,minZoom:A,maxZoom:M}=y();w&&(await Qie({nodes:S,width:k,height:T,panZoom:w,minZoom:A,maxZoom:M},E),N?.resolve(!0),g({fitViewResolver:null}))}return{...jR({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:E,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:T}=y(),A=IC(S,w,E,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});T&&A?(x(),g({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:E}=y();Gz(w,E,S),g({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:E}=y();E(S),g({hasDefaultNodes:!0})}if(w){const{setEdges:E}=y();E(w),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:E,parentLookup:N,domNode:k,nodeOrigin:T,nodeExtent:A,debug:M,fitViewQueued:D}=y(),{changes:R,updatedInternals:P}=bse(S,E,N,k,T,A);P&&(gse(E,N,{nodeOrigin:T,nodeExtent:A}),D?(x(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),R?.length>0&&(M&&console.log("React Flow: trigger node changes",R),w?.(R)))},updateNodePositions:(S,w=!1)=>{const E=[],N=[],{nodeLookup:k,triggerNodeChanges:T}=y();for(const[A,M]of S){const D=k.get(A),R=!!(D?.expandParent&&D?.parentId&&M?.position),P={id:A,type:"position",position:R?{x:Math.max(0,M.position.x),y:Math.max(0,M.position.y)}:M.position,dragging:w};R&&D.parentId&&E.push({id:A,parentId:D.parentId,rect:{...M.internals.positionAbsolute,width:M.measured.width??0,height:M.measured.height??0}}),N.push(P)}if(E.length>0){const{parentLookup:A,nodeOrigin:M}=y(),D=N2(E,k,A,M);N.push(...D)}T(N)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:E,nodes:N,hasDefaultNodes:k,debug:T}=y();if(S?.length){if(k){const A=aq(S,N);E(A)}T&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:E,edges:N,hasDefaultEdges:k,debug:T}=y();if(S?.length){if(k){const A=lq(S,N);E(A)}T&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(M=>Ho(M,!0));k(A);return}k(Al(N,new Set([...S]),!0)),T(Al(E))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(M=>Ho(M,!0));T(A);return}T(Al(E,new Set([...S]))),k(Al(N,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:E,nodes:N,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:A}=y(),M=S||N,D=w||E,R=M.map($=>{const V=k.get($.id);return V&&(V.selected=!1),Ho($.id,!1)}),P=D.map($=>Ho($.id,!1));T(R),A(P)},setMinZoom:S=>{const{panZoom:w,maxZoom:E}=y();w?.setScaleExtent([S,E]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:E}=y();w?.setScaleExtent([E,S]),g({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{y().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:E,triggerEdgeChanges:N,elementsSelectable:k}=y();if(!k)return;const T=w.reduce((M,D)=>D.selected?[...M,Ho(D.id,!1)]:M,[]),A=S.reduce((M,D)=>D.selected?[...M,Ho(D.id,!1)]:M,[]);E(T),N(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:E,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:T,nodeExtent:A}=y();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(IC(w,E,N,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:T,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:w,width:E,height:N,panZoom:k,translateExtent:T}=y();return xse({delta:S,panZoom:k,transform:w,translateExtent:T,width:E,height:N})},setCenter:async(S,w,E)=>{const{width:N,height:k,maxZoom:T,panZoom:A}=y();if(!A)return Promise.resolve(!1);const M=typeof E?.zoom<"u"?E.zoom:T;return await A.setViewport({x:N/2-S*M,y:k/2-w*M,zoom:M},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...Mz}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...jR()})}},Object.is);function Oq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:g}){const[y]=O.useState(()=>Oae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return v.jsx(eoe,{value:y,children:v.jsx(Coe,{children:g})})}function jae({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:g}){return O.useContext(Em)?v.jsx(v.Fragment,{children:e}):v.jsx(Oq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:e})}const Lae={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Pae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:M,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:P,onNodesDelete:$,onEdgesDelete:V,onDelete:z,onSelectionChange:Y,onSelectionDragStart:B,onSelectionDrag:F,onSelectionDragStop:L,onSelectionContextMenu:q,onSelectionStart:W,onSelectionEnd:ee,onBeforeDelete:I,connectionMode:G,connectionLineType:se=Gs.Bezier,connectionLineStyle:le,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:Q="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:ae=!1,selectionMode:he=sd.Full,panActivationKeyCode:be="Space",multiSelectionKeyCode:Oe=ad()?"Meta":"Control",zoomActivationKeyCode:we=ad()?"Meta":"Control",snapToGrid:Se,snapGrid:Ce,onlyRenderVisibleElements:Ne=!1,selectNodesOnDrag:nt,nodesDraggable:Te,autoPanOnNodeFocus:bt,nodesConnectable:Bt,nodesFocusable:jn,nodeOrigin:Xt=sq,edgesFocusable:tn,edgesReconnectable:ft,elementsSelectable:cr=!0,defaultViewport:xn=hoe,minZoom:nn=.5,maxZoom:ht=2,translateExtent:zt=id,preventScrolling:Rt=!0,nodeExtent:Zr,defaultMarkerColor:ho="#b1b1b7",zoomOnScroll:ss=!0,zoomOnPinch:fn=!0,panOnScroll:Re=!1,panOnScrollSpeed:Ln=.5,panOnScrollMode:Qr=aa.Free,zoomOnDoubleClick:Jr=!0,panOnDrag:po=!0,onPaneClick:Si,onPaneMouseEnter:Aa,onPaneMouseMove:Rr,onPaneMouseLeave:Ci,onPaneScroll:mo,onPaneContextMenu:as,paneClickDistance:ls=0,nodeClickDistance:cs=0,children:go,onReconnect:yo,onReconnectStart:us,onReconnectEnd:ur,onEdgeContextMenu:qt,onEdgeDoubleClick:Zt,onEdgeMouseEnter:ei,onEdgeMouseMove:vo,onEdgeMouseLeave:nc,reconnectRadius:rc=10,onNodesChange:Ma,onEdgesChange:dr,noDragClassName:Ei="nodrag",noWheelClassName:Or="nowheel",noPanClassName:jr="nopan",fitView:ti,fitViewOptions:Lr,connectOnClick:kt,attributionPosition:_a,proOptions:ds,defaultEdgeOptions:Pr,elevateNodesOnSelect:ni,elevateEdgesOnSelect:ic,disableKeyboardA11y:bo=!1,autoPanOnConnect:Da,autoPanOnNodeDrag:sc,autoPanSpeed:fs,connectionRadius:hs,isValidConnection:Pn,onError:xo,style:Ra,id:Ir,nodeDragThreshold:te,connectionDragThreshold:J,viewport:ue,onViewportChange:ve,width:ye,height:Ee,colorMode:Ve="light",debug:He,onScroll:Ot,ariaLabelConfig:wn,...Br},xt){const Ye=Ir||"1",Vt=yoe(Ve),wo=O.useCallback(ki=>{ki.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ot?.(ki)},[Ot]);return v.jsx("div",{"data-testid":"rf__wrapper",...Br,onScroll:wo,style:{...Ra,...Lae},ref:xt,className:Yt(["react-flow",i,Vt]),id:Ir,role:"application",children:v.jsxs(jae,{nodes:e,edges:t,width:ye,height:Ee,fitView:ti,fitViewOptions:Lr,minZoom:nn,maxZoom:ht,nodeOrigin:Xt,nodeExtent:Zr,children:[v.jsx(Rae,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:se,connectionLineStyle:le,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:ce,selectionOnDrag:ae,selectionMode:he,deleteKeyCode:Q,multiSelectionKeyCode:Oe,panActivationKeyCode:be,zoomActivationKeyCode:we,onlyRenderVisibleElements:Ne,defaultViewport:xn,translateExtent:zt,minZoom:nn,maxZoom:ht,preventScrolling:Rt,zoomOnScroll:ss,zoomOnPinch:fn,zoomOnDoubleClick:Jr,panOnScroll:Re,panOnScrollSpeed:Ln,panOnScrollMode:Qr,panOnDrag:po,onPaneClick:Si,onPaneMouseEnter:Aa,onPaneMouseMove:Rr,onPaneMouseLeave:Ci,onPaneScroll:mo,onPaneContextMenu:as,paneClickDistance:ls,nodeClickDistance:cs,onSelectionContextMenu:q,onSelectionStart:W,onSelectionEnd:ee,onReconnect:yo,onReconnectStart:us,onReconnectEnd:ur,onEdgeContextMenu:qt,onEdgeDoubleClick:Zt,onEdgeMouseEnter:ei,onEdgeMouseMove:vo,onEdgeMouseLeave:nc,reconnectRadius:rc,defaultMarkerColor:ho,noDragClassName:Ei,noWheelClassName:Or,noPanClassName:jr,rfId:Ye,disableKeyboardA11y:bo,nodeExtent:Zr,viewport:ue,onViewportChange:ve}),v.jsx(goe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,nodesDraggable:Te,autoPanOnNodeFocus:bt,nodesConnectable:Bt,nodesFocusable:jn,edgesFocusable:tn,edgesReconnectable:ft,elementsSelectable:cr,elevateNodesOnSelect:ni,elevateEdgesOnSelect:ic,minZoom:nn,maxZoom:ht,nodeExtent:Zr,onNodesChange:Ma,onEdgesChange:dr,snapToGrid:Se,snapGrid:Ce,connectionMode:G,translateExtent:zt,connectOnClick:kt,defaultEdgeOptions:Pr,fitView:ti,fitViewOptions:Lr,onNodesDelete:$,onEdgesDelete:V,onDelete:z,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:P,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:L,onMove:h,onMoveStart:p,onMoveEnd:g,noPanClassName:jr,nodeOrigin:Xt,rfId:Ye,autoPanOnConnect:Da,autoPanOnNodeDrag:sc,autoPanSpeed:fs,onError:xo,connectionRadius:hs,isValidConnection:Pn,selectNodesOnDrag:nt,nodeDragThreshold:te,connectionDragThreshold:J,onBeforeDelete:I,paneClickDistance:ls,debug:He,ariaLabelConfig:wn}),v.jsx(foe,{onSelectionChange:Y}),go,v.jsx(aoe,{proOptions:ds,position:_a}),v.jsx(ooe,{rfId:Ye,disableKeyboardA11y:bo})]})})}var Iae=cq(Pae);function Bae(e){const[t,n]=O.useState(e),r=O.useCallback(i=>n(s=>aq(i,s)),[]);return[t,n,r]}function zae(e){const[t,n]=O.useState(e),r=O.useCallback(i=>n(s=>lq(i,s)),[]);return[t,n,r]}function qae({dimensions:e,lineWidth:t,variant:n,className:r}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Yt(["react-flow__background-pattern",n,r])})}function Vae({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:Yt(["react-flow__background-pattern","dots",t])})}var to;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(to||(to={}));const Hae={[to.Dots]:1,[to.Lines]:1,[to.Cross]:6},Fae=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jq({id:e,variant:t=to.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=O.useRef(null),{transform:g,patternId:y}=Ze(Fae,Et),x=r||Hae[t],S=t===to.Dots,w=t===to.Cross,E=Array.isArray(n)?n:[n,n],N=[E[0]*g[2]||1,E[1]*g[2]||1],k=x*g[2],T=Array.isArray(s)?s:[s,s],A=w?[k,k]:N,M=[T[0]*g[2]||1+A[0]/2,T[1]*g[2]||1+A[1]/2],D=`${y}${e||""}`;return v.jsxs("svg",{className:Yt(["react-flow__background",d]),style:{...u,...Nm,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[v.jsx("pattern",{id:D,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:S?v.jsx(Vae,{radius:k/2,className:h}):v.jsx(qae,{dimensions:A,lineWidth:i,variant:t,className:h})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${D})`})]})}jq.displayName="Background";const Uae=O.memo(jq);function $ae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Gae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Kae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Yae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Wae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function hh({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:Yt(["react-flow__controls-button",t]),...n,children:e})}const Xae=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Lq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const x=yt(),{isInteractive:S,minZoomReached:w,maxZoomReached:E,ariaLabelConfig:N}=Ze(Xae,Et),{zoomIn:k,zoomOut:T,fitView:A}=ud(),M=()=>{k(),s?.()},D=()=>{T(),o?.()},R=()=>{A(i),l?.()},P=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},$=g==="horizontal"?"horizontal":"vertical";return v.jsxs(km,{className:Yt(["react-flow__controls",$,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??N["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(hh,{onClick:M,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:E,children:v.jsx($ae,{})}),v.jsx(hh,{onClick:D,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:w,children:v.jsx(Gae,{})})]}),n&&v.jsx(hh,{className:"react-flow__controls-fitview",onClick:R,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:v.jsx(Kae,{})}),r&&v.jsx(hh,{className:"react-flow__controls-interactive",onClick:P,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?v.jsx(Wae,{}):v.jsx(Yae,{})}),h]})}Lq.displayName="Controls";const Zae=O.memo(Lq);function Qae({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:g,onClick:y}){const{background:x,backgroundColor:S}=s||{},w=o||x||S;return v.jsx("rect",{className:Yt(["react-flow__minimap-node",{selected:g},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:y?E=>y(E,e):void 0})}const Jae=O.memo(Qae),ele=e=>e.nodes.map(t=>t.id),tv=e=>e instanceof Function?e:()=>e;function tle({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Jae,onClick:o}){const l=Ze(ele,Et),u=tv(t),d=tv(e),h=tv(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:l.map(g=>v.jsx(rle,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function nle({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:g,height:y}=Ze(x=>{const{internals:S}=x.nodeLookup.get(e),w=S.userNode,{x:E,y:N}=S.positionAbsolute,{width:k,height:T}=ns(w);return{node:w,x:E,y:N,width:k,height:T}},Et);return!d||d.hidden||!Iz(d)?null:v.jsx(l,{x:h,y:p,width:g,height:y,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const rle=O.memo(nle);var ile=O.memo(tle);const sle=200,ole=150,ale=e=>!e.hidden,lle=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Pz(Td(e.nodeLookup,{filter:ale}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},cle="react-flow__minimap-desc";function Pq({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:x,pannable:S=!1,zoomable:w=!1,ariaLabel:E,inversePan:N,zoomStep:k=1,offsetScale:T=5}){const A=yt(),M=O.useRef(null),{boundingRect:D,viewBB:R,rfId:P,panZoom:$,translateExtent:V,flowWidth:z,flowHeight:Y,ariaLabelConfig:B}=Ze(lle,Et),F=e?.width??sle,L=e?.height??ole,q=D.width/F,W=D.height/L,ee=Math.max(q,W),I=ee*F,G=ee*L,se=T*ee,le=D.x-(I-D.width)/2-se,H=D.y-(G-D.height)/2-se,X=I+se*2,Q=G+se*2,ce=`${cle}-${P}`,ae=O.useRef(0),he=O.useRef();ae.current=ee,O.useEffect(()=>{if(M.current&&$)return he.current=Mse({domNode:M.current,panZoom:$,getTransform:()=>A.getState().transform,getViewScale:()=>ae.current}),()=>{he.current?.destroy()}},[$]),O.useEffect(()=>{he.current?.update({translateExtent:V,width:z,height:Y,inversePan:N,pannable:S,zoomStep:k,zoomable:w})},[S,w,N,k,V,z,Y]);const be=y?Se=>{const[Ce,Ne]=he.current?.pointer(Se)||[0,0];y(Se,{x:Ce,y:Ne})}:void 0,Oe=x?O.useCallback((Se,Ce)=>{const Ne=A.getState().nodeLookup.get(Ce).internals.userNode;x(Se,Ne)},[]):void 0,we=E??B["minimap.ariaLabel"];return v.jsx(km,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*ee:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Yt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:F,height:L,viewBox:`${le} ${H} ${X} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:M,onClick:be,children:[we&&v.jsx("title",{id:ce,children:we}),v.jsx(ile,{onClick:Oe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${le-se},${H-se}h${X+se*2}v${Q+se*2}h${-X-se*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Pq.displayName="MiniMap";const ule=O.memo(Pq),dle=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,fle={[ya.Line]:"right",[ya.Handle]:"bottom-right"};function hle({nodeId:e,position:t,variant:n=ya.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:x,onResizeStart:S,onResize:w,onResizeEnd:E}){const N=hq(),k=typeof e=="string"?e:N,T=yt(),A=O.useRef(null),M=n===ya.Handle,D=Ze(O.useCallback(dle(M&&y),[M,y]),Et),R=O.useRef(null),P=t??fle[n];O.useEffect(()=>{if(!(!A.current||!k))return R.current||(R.current=Kse({domNode:A.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:V,transform:z,snapGrid:Y,snapToGrid:B,nodeOrigin:F,domNode:L}=T.getState();return{nodeLookup:V,transform:z,snapGrid:Y,snapToGrid:B,nodeOrigin:F,paneDomNode:L}},onChange:(V,z)=>{const{triggerNodeChanges:Y,nodeLookup:B,parentLookup:F,nodeOrigin:L}=T.getState(),q=[],W={x:V.x,y:V.y},ee=B.get(k);if(ee&&ee.expandParent&&ee.parentId){const I=ee.origin??L,G=V.width??ee.measured.width??0,se=V.height??ee.measured.height??0,le={id:ee.id,parentId:ee.parentId,rect:{width:G,height:se,...Bz({x:V.x??ee.position.x,y:V.y??ee.position.y},{width:G,height:se},ee.parentId,B,I)}},H=N2([le],B,F,L);q.push(...H),W.x=V.x?Math.max(I[0]*G,V.x):void 0,W.y=V.y?Math.max(I[1]*se,V.y):void 0}if(W.x!==void 0&&W.y!==void 0){const I={id:k,type:"position",position:{...W}};q.push(I)}if(V.width!==void 0&&V.height!==void 0){const G={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:V.width,height:V.height}};q.push(G)}for(const I of z){const G={...I,type:"position"};q.push(G)}Y(q)},onEnd:({width:V,height:z})=>{const Y={id:k,type:"dimensions",resizing:!1,dimensions:{width:V,height:z}};T.getState().triggerNodeChanges([Y])}})),R.current.update({controlPosition:P,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:E,shouldResize:x}),()=>{R.current?.destroy()}},[P,l,u,d,h,p,S,w,E,x]);const $=P.split("-");return v.jsx("div",{className:Yt(["react-flow__resize-control","nodrag",...$,n,r]),ref:A,style:{...i,scale:D,...o&&{[M?"backgroundColor":"borderColor"]:o}},children:s})}const LR=O.memo(hle);function ple({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:y,onResizeStart:x,onResize:S,onResizeEnd:w}){return t?v.jsxs(v.Fragment,{children:[qse.map(E=>v.jsx(LR,{className:i,style:s,nodeId:e,position:E,variant:ya.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},E)),zse.map(E=>v.jsx(LR,{className:n,style:r,nodeId:e,position:E,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},E))]}):null}function mle(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const gle=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function no(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let ml=null;function Iq(e={}){return ml||(e.includeStyleProperties?(ml=e.includeStyleProperties,ml):(ml=no(window.getComputedStyle(document.documentElement)),ml))}function zp(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function yle(e){const t=zp(e,"border-left-width"),n=zp(e,"border-right-width");return e.clientWidth+t+n}function vle(e){const t=zp(e,"border-top-width"),n=zp(e,"border-bottom-width");return e.clientHeight+t+n}function Bq(e,t={}){const n=t.width||yle(e),r=t.height||vle(e);return{width:n,height:r}}function ble(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const tr=16384;function xle(e){(e.width>tr||e.height>tr)&&(e.width>tr&&e.height>tr?e.width>e.height?(e.height*=tr/e.width,e.width=tr):(e.width*=tr/e.height,e.height=tr):e.width>tr?(e.height*=tr/e.width,e.width=tr):(e.width*=tr/e.height,e.height=tr))}function qp(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function wle(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Sle(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),wle(i)}const $n=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||$n(n,t)};function Cle(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Ele(e,t){return Iq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function kle(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?Cle(n):Ele(n,r);return document.createTextNode(`${i}{${s}}`)}function PR(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=gle();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(kle(o,n,i,r)),t.appendChild(l)}function Nle(e,t,n){PR(e,t,":before",n),PR(e,t,":after",n)}const IR="application/font-woff",BR="image/jpeg",Tle={woff:IR,woff2:IR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:BR,jpeg:BR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Ale(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function A2(e){const t=Ale(e).toLowerCase();return Tle[t]||""}function Mle(e){return e.split(/,/)[1]}function qC(e){return e.search(/^(data:)/)!==-1}function _le(e,t){return`data:${t};base64,${e}`}async function zq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const nv={};function Dle(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function M2(e,t,n){const r=Dle(e,t,n.includeQueryParams);if(nv[r]!=null)return nv[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await zq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),Mle(l)));i=_le(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return nv[r]=i,i}async function Rle(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):qp(t)}async function Ole(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return qp(l)}const n=e.poster,r=A2(n),i=await M2(n,r,t);return qp(i)}async function jle(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await Am(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Lle(e,t){return $n(e,HTMLCanvasElement)?Rle(e):$n(e,HTMLVideoElement)?Ole(e,t):$n(e,HTMLIFrameElement)?jle(e,t):e.cloneNode(qq(e))}const Ple=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",qq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Ile(e,t,n){var r,i;if(qq(t))return t;let s=[];return Ple(e)&&e.assignedNodes?s=no(e.assignedNodes()):$n(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=no(e.contentDocument.body.childNodes):s=no(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||$n(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>Am(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Ble(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Iq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),$n(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function zle(e,t){$n(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),$n(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function qle(e,t){if($n(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Vle(e,t,n){return $n(t,Element)&&(Ble(e,t,n),Nle(e,t,n),zle(e,t),qle(e,t)),t}async function Hle(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await Am(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function Am(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Lle(r,t)).then(r=>Ile(e,r,t)).then(r=>Vle(e,r,t)).then(r=>Hle(r,t))}const Vq=/url\((['"]?)([^'"]+?)\1\)/g,Fle=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ule=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function $le(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Gle(e){const t=[];return e.replace(Vq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!qC(n))}async function Kle(e,t,n,r,i){try{const s=n?mle(t,n):t,o=A2(t);let l;return i||(l=await M2(s,o,r)),e.replace($le(t),`$1${l}$3`)}catch{}return e}function Yle(e,{preferredFontFormat:t}){return t?e.replace(Ule,n=>{for(;;){const[r,,i]=Fle.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Hq(e){return e.search(Vq)!==-1}async function Fq(e,t,n){if(!Hq(e))return e;const r=Yle(e,n);return Gle(r).reduce((s,o)=>s.then(l=>Kle(l,o,t,n)),Promise.resolve(r))}async function gl(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Fq(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Wle(e,t){await gl("background",e,t)||await gl("background-image",e,t),await gl("mask",e,t)||await gl("-webkit-mask",e,t)||await gl("mask-image",e,t)||await gl("-webkit-mask-image",e,t)}async function Xle(e,t){const n=$n(e,HTMLImageElement);if(!(n&&!qC(e.src))&&!($n(e,SVGImageElement)&&!qC(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await M2(r,A2(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Zle(e,t){const r=no(e.childNodes).map(i=>Uq(i,t));await Promise.all(r).then(()=>e)}async function Uq(e,t){$n(e,Element)&&(await Wle(e,t),await Xle(e,t),await Zle(e,t))}function Qle(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const zR={};async function qR(e){let t=zR[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},zR[e]=t,t}async function VR(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),zq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function HR(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function Jle(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{no(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=qR(u).then(h=>VR(h,t)).then(h=>HR(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(qR(i.href).then(l=>VR(l,t)).then(l=>HR(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{no(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function ece(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Hq(t.style.getPropertyValue("src")))}async function tce(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=no(e.ownerDocument.styleSheets),r=await Jle(n,t);return ece(r)}function $q(e){return e.trim().replace(/["']/g,"")}function nce(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add($q(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function rce(e,t){const n=await tce(e,t),r=nce(e);return(await Promise.all(n.filter(s=>r.has($q(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Fq(s.cssText,o,t)}))).join(`
`)}async function ice(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await rce(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Gq(e,t={}){const{width:n,height:r}=Bq(e,t),i=await Am(e,t,!0);return await ice(i,t),await Uq(i,t),Qle(i,t),await Sle(i,n,r)}async function Kq(e,t={}){const{width:n,height:r}=Bq(e,t),i=await Gq(e,t),s=await qp(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||ble(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||xle(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function sce(e,t={}){return(await Kq(e,t)).toDataURL()}async function oce(e,t={}){return(await Kq(e,t)).toDataURL("image/jpeg",t.quality||1)}function _2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rv,FR;function ace(){if(FR)return rv;FR=1;function e(){this.__data__=[],this.size=0}return rv=e,rv}var iv,UR;function Zl(){if(UR)return iv;UR=1;function e(t,n){return t===n||t!==t&&n!==n}return iv=e,iv}var sv,$R;function Mm(){if($R)return sv;$R=1;var e=Zl();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return sv=t,sv}var ov,GR;function lce(){if(GR)return ov;GR=1;var e=Mm(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return ov=r,ov}var av,KR;function cce(){if(KR)return av;KR=1;var e=Mm();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return av=t,av}var lv,YR;function uce(){if(YR)return lv;YR=1;var e=Mm();function t(n){return e(this.__data__,n)>-1}return lv=t,lv}var cv,WR;function dce(){if(WR)return cv;WR=1;var e=Mm();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return cv=t,cv}var uv,XR;function _m(){if(XR)return uv;XR=1;var e=ace(),t=lce(),n=cce(),r=uce(),i=dce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,uv=s,uv}var dv,ZR;function fce(){if(ZR)return dv;ZR=1;var e=_m();function t(){this.__data__=new e,this.size=0}return dv=t,dv}var fv,QR;function hce(){if(QR)return fv;QR=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return fv=e,fv}var hv,JR;function pce(){if(JR)return hv;JR=1;function e(t){return this.__data__.get(t)}return hv=e,hv}var pv,eO;function mce(){if(eO)return pv;eO=1;function e(t){return this.__data__.has(t)}return pv=e,pv}var mv,tO;function Yq(){if(tO)return mv;tO=1;var e=typeof Hf=="object"&&Hf&&Hf.Object===Object&&Hf;return mv=e,mv}var gv,nO;function Xr(){if(nO)return gv;nO=1;var e=Yq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return gv=n,gv}var yv,rO;function Ql(){if(rO)return yv;rO=1;var e=Xr(),t=e.Symbol;return yv=t,yv}var vv,iO;function gce(){if(iO)return vv;iO=1;var e=Ql(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return vv=s,vv}var bv,sO;function yce(){if(sO)return bv;sO=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return bv=n,bv}var xv,oO;function Ea(){if(oO)return xv;oO=1;var e=Ql(),t=gce(),n=yce(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return xv=o,xv}var wv,aO;function _r(){if(aO)return wv;aO=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return wv=e,wv}var Sv,lO;function _d(){if(lO)return Sv;lO=1;var e=Ea(),t=_r(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return Sv=o,Sv}var Cv,cO;function vce(){if(cO)return Cv;cO=1;var e=Xr(),t=e["__core-js_shared__"];return Cv=t,Cv}var Ev,uO;function bce(){if(uO)return Ev;uO=1;var e=vce(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return Ev=n,Ev}var kv,dO;function Wq(){if(dO)return kv;dO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return kv=n,kv}var Nv,fO;function xce(){if(fO)return Nv;fO=1;var e=_d(),t=bce(),n=_r(),r=Wq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var y=e(g)?h:s;return y.test(r(g))}return Nv=p,Nv}var Tv,hO;function wce(){if(hO)return Tv;hO=1;function e(t,n){return t?.[n]}return Tv=e,Tv}var Av,pO;function ka(){if(pO)return Av;pO=1;var e=xce(),t=wce();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return Av=n,Av}var Mv,mO;function D2(){if(mO)return Mv;mO=1;var e=ka(),t=Xr(),n=e(t,"Map");return Mv=n,Mv}var _v,gO;function Dm(){if(gO)return _v;gO=1;var e=ka(),t=e(Object,"create");return _v=t,_v}var Dv,yO;function Sce(){if(yO)return Dv;yO=1;var e=Dm();function t(){this.__data__=e?e(null):{},this.size=0}return Dv=t,Dv}var Rv,vO;function Cce(){if(vO)return Rv;vO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Rv=e,Rv}var Ov,bO;function Ece(){if(bO)return Ov;bO=1;var e=Dm(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return Ov=i,Ov}var jv,xO;function kce(){if(xO)return jv;xO=1;var e=Dm(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return jv=r,jv}var Lv,wO;function Nce(){if(wO)return Lv;wO=1;var e=Dm(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Lv=n,Lv}var Pv,SO;function Tce(){if(SO)return Pv;SO=1;var e=Sce(),t=Cce(),n=Ece(),r=kce(),i=Nce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Pv=s,Pv}var Iv,CO;function Ace(){if(CO)return Iv;CO=1;var e=Tce(),t=_m(),n=D2();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Iv=r,Iv}var Bv,EO;function Mce(){if(EO)return Bv;EO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Bv=e,Bv}var zv,kO;function Rm(){if(kO)return zv;kO=1;var e=Mce();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return zv=t,zv}var qv,NO;function _ce(){if(NO)return qv;NO=1;var e=Rm();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return qv=t,qv}var Vv,TO;function Dce(){if(TO)return Vv;TO=1;var e=Rm();function t(n){return e(this,n).get(n)}return Vv=t,Vv}var Hv,AO;function Rce(){if(AO)return Hv;AO=1;var e=Rm();function t(n){return e(this,n).has(n)}return Hv=t,Hv}var Fv,MO;function Oce(){if(MO)return Fv;MO=1;var e=Rm();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Fv=t,Fv}var Uv,_O;function R2(){if(_O)return Uv;_O=1;var e=Ace(),t=_ce(),n=Dce(),r=Rce(),i=Oce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Uv=s,Uv}var $v,DO;function jce(){if(DO)return $v;DO=1;var e=_m(),t=D2(),n=R2(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return $v=i,$v}var Gv,RO;function Om(){if(RO)return Gv;RO=1;var e=_m(),t=fce(),n=hce(),r=pce(),i=mce(),s=jce();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Gv=o,Gv}var Kv,OO;function O2(){if(OO)return Kv;OO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Kv=e,Kv}var Yv,jO;function Xq(){if(jO)return Yv;jO=1;var e=ka(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Yv=t,Yv}var Wv,LO;function jm(){if(LO)return Wv;LO=1;var e=Xq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Wv=t,Wv}var Xv,PO;function Lm(){if(PO)return Xv;PO=1;var e=jm(),t=Zl(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Xv=i,Xv}var Zv,IO;function Dd(){if(IO)return Zv;IO=1;var e=Lm(),t=jm();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return Zv=n,Zv}var Qv,BO;function Lce(){if(BO)return Qv;BO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Qv=e,Qv}var Jv,zO;function wi(){if(zO)return Jv;zO=1;function e(t){return t!=null&&typeof t=="object"}return Jv=e,Jv}var eb,qO;function Pce(){if(qO)return eb;qO=1;var e=Ea(),t=wi(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return eb=r,eb}var tb,VO;function Rd(){if(VO)return tb;VO=1;var e=Pce(),t=wi(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return tb=s,tb}var nb,HO;function Wt(){if(HO)return nb;HO=1;var e=Array.isArray;return nb=e,nb}var pu={exports:{}},rb,FO;function Ice(){if(FO)return rb;FO=1;function e(){return!1}return rb=e,rb}pu.exports;var UO;function Jl(){return UO||(UO=1,(function(e,t){var n=Xr(),r=Ice(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(pu,pu.exports)),pu.exports}var ib,$O;function Pm(){if($O)return ib;$O=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return ib=n,ib}var sb,GO;function j2(){if(GO)return sb;GO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return sb=t,sb}var ob,KO;function Bce(){if(KO)return ob;KO=1;var e=Ea(),t=j2(),n=wi(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",x="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",M="[object Int32Array]",D="[object Uint8Array]",R="[object Uint8ClampedArray]",P="[object Uint16Array]",$="[object Uint32Array]",V={};V[N]=V[k]=V[T]=V[A]=V[M]=V[D]=V[R]=V[P]=V[$]=!0,V[r]=V[i]=V[w]=V[s]=V[E]=V[o]=V[l]=V[u]=V[d]=V[h]=V[p]=V[g]=V[y]=V[x]=V[S]=!1;function z(Y){return n(Y)&&t(Y.length)&&!!V[e(Y)]}return ob=z,ob}var ab,YO;function Im(){if(YO)return ab;YO=1;function e(t){return function(n){return t(n)}}return ab=e,ab}var mu={exports:{}};mu.exports;var WO;function L2(){return WO||(WO=1,(function(e,t){var n=Yq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(mu,mu.exports)),mu.exports}var lb,XO;function Od(){if(XO)return lb;XO=1;var e=Bce(),t=Im(),n=L2(),r=n&&n.isTypedArray,i=r?t(r):e;return lb=i,lb}var cb,ZO;function Zq(){if(ZO)return cb;ZO=1;var e=Lce(),t=Rd(),n=Wt(),r=Jl(),i=Pm(),s=Od(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),g=!p&&t(d),y=!p&&!g&&r(d),x=!p&&!g&&!y&&s(d),S=p||g||y||x,w=S?e(d.length,String):[],E=w.length;for(var N in d)(h||l.call(d,N))&&!(S&&(N=="length"||y&&(N=="offset"||N=="parent")||x&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,E)))&&w.push(N);return w}return cb=u,cb}var ub,QO;function Bm(){if(QO)return ub;QO=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ub=t,ub}var db,JO;function Qq(){if(JO)return db;JO=1;function e(t,n){return function(r){return t(n(r))}}return db=e,db}var fb,ej;function zce(){if(ej)return fb;ej=1;var e=Qq(),t=e(Object.keys,Object);return fb=t,fb}var hb,tj;function P2(){if(tj)return hb;tj=1;var e=Bm(),t=zce(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return hb=i,hb}var pb,nj;function rs(){if(nj)return pb;nj=1;var e=_d(),t=j2();function n(r){return r!=null&&t(r.length)&&!e(r)}return pb=n,pb}var mb,rj;function fo(){if(rj)return mb;rj=1;var e=Zq(),t=P2(),n=rs();function r(i){return n(i)?e(i):t(i)}return mb=r,mb}var gb,ij;function qce(){if(ij)return gb;ij=1;var e=Dd(),t=fo();function n(r,i){return r&&e(i,t(i),r)}return gb=n,gb}var yb,sj;function Vce(){if(sj)return yb;sj=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return yb=e,yb}var vb,oj;function Hce(){if(oj)return vb;oj=1;var e=_r(),t=Bm(),n=Vce(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return vb=s,vb}var bb,aj;function Na(){if(aj)return bb;aj=1;var e=Zq(),t=Hce(),n=rs();function r(i){return n(i)?e(i,!0):t(i)}return bb=r,bb}var xb,lj;function Fce(){if(lj)return xb;lj=1;var e=Dd(),t=Na();function n(r,i){return r&&e(i,t(i),r)}return xb=n,xb}var gu={exports:{}};gu.exports;var cj;function Jq(){return cj||(cj=1,(function(e,t){var n=Xr(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(gu,gu.exports)),gu.exports}var wb,uj;function eV(){if(uj)return wb;uj=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return wb=e,wb}var Sb,dj;function tV(){if(dj)return Sb;dj=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return Sb=e,Sb}var Cb,fj;function nV(){if(fj)return Cb;fj=1;function e(){return[]}return Cb=e,Cb}var Eb,hj;function I2(){if(hj)return Eb;hj=1;var e=tV(),t=nV(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return Eb=s,Eb}var kb,pj;function Uce(){if(pj)return kb;pj=1;var e=Dd(),t=I2();function n(r,i){return e(r,t(r),i)}return kb=n,kb}var Nb,mj;function B2(){if(mj)return Nb;mj=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return Nb=e,Nb}var Tb,gj;function zm(){if(gj)return Tb;gj=1;var e=Qq(),t=e(Object.getPrototypeOf,Object);return Tb=t,Tb}var Ab,yj;function rV(){if(yj)return Ab;yj=1;var e=B2(),t=zm(),n=I2(),r=nV(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return Ab=s,Ab}var Mb,vj;function $ce(){if(vj)return Mb;vj=1;var e=Dd(),t=rV();function n(r,i){return e(r,t(r),i)}return Mb=n,Mb}var _b,bj;function iV(){if(bj)return _b;bj=1;var e=B2(),t=Wt();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return _b=n,_b}var Db,xj;function sV(){if(xj)return Db;xj=1;var e=iV(),t=I2(),n=fo();function r(i){return e(i,n,t)}return Db=r,Db}var Rb,wj;function Gce(){if(wj)return Rb;wj=1;var e=iV(),t=rV(),n=Na();function r(i){return e(i,n,t)}return Rb=r,Rb}var Ob,Sj;function Kce(){if(Sj)return Ob;Sj=1;var e=ka(),t=Xr(),n=e(t,"DataView");return Ob=n,Ob}var jb,Cj;function Yce(){if(Cj)return jb;Cj=1;var e=ka(),t=Xr(),n=e(t,"Promise");return jb=n,jb}var Lb,Ej;function oV(){if(Ej)return Lb;Ej=1;var e=ka(),t=Xr(),n=e(t,"Set");return Lb=n,Lb}var Pb,kj;function Wce(){if(kj)return Pb;kj=1;var e=ka(),t=Xr(),n=e(t,"WeakMap");return Pb=n,Pb}var Ib,Nj;function ec(){if(Nj)return Ib;Nj=1;var e=Kce(),t=D2(),n=Yce(),r=oV(),i=Wce(),s=Ea(),o=Wq(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",y=o(e),x=o(t),S=o(n),w=o(r),E=o(i),N=s;return(e&&N(new e(new ArrayBuffer(1)))!=g||t&&N(new t)!=l||n&&N(n.resolve())!=d||r&&N(new r)!=h||i&&N(new i)!=p)&&(N=function(k){var T=s(k),A=T==u?k.constructor:void 0,M=A?o(A):"";if(M)switch(M){case y:return g;case x:return l;case S:return d;case w:return h;case E:return p}return T}),Ib=N,Ib}var Bb,Tj;function Xce(){if(Tj)return Bb;Tj=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Bb=n,Bb}var zb,Aj;function aV(){if(Aj)return zb;Aj=1;var e=Xr(),t=e.Uint8Array;return zb=t,zb}var qb,Mj;function z2(){if(Mj)return qb;Mj=1;var e=aV();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return qb=t,qb}var Vb,_j;function Zce(){if(_j)return Vb;_j=1;var e=z2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Vb=t,Vb}var Hb,Dj;function Qce(){if(Dj)return Hb;Dj=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Hb=t,Hb}var Fb,Rj;function Jce(){if(Rj)return Fb;Rj=1;var e=Ql(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Fb=r,Fb}var Ub,Oj;function lV(){if(Oj)return Ub;Oj=1;var e=z2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ub=t,Ub}var $b,jj;function eue(){if(jj)return $b;jj=1;var e=z2(),t=Zce(),n=Qce(),r=Jce(),i=lV(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]";function R(P,$,V){var z=P.constructor;switch($){case y:return e(P);case s:case o:return new z(+P);case x:return t(P,V);case S:case w:case E:case N:case k:case T:case A:case M:case D:return i(P,V);case l:return new z;case u:case p:return new z(P);case d:return n(P);case h:return new z;case g:return r(P)}}return $b=R,$b}var Gb,Lj;function cV(){if(Lj)return Gb;Lj=1;var e=_r(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return Gb=n,Gb}var Kb,Pj;function uV(){if(Pj)return Kb;Pj=1;var e=cV(),t=zm(),n=Bm();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Kb=r,Kb}var Yb,Ij;function tue(){if(Ij)return Yb;Ij=1;var e=ec(),t=wi(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Yb=r,Yb}var Wb,Bj;function nue(){if(Bj)return Wb;Bj=1;var e=tue(),t=Im(),n=L2(),r=n&&n.isMap,i=r?t(r):e;return Wb=i,Wb}var Xb,zj;function rue(){if(zj)return Xb;zj=1;var e=ec(),t=wi(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Xb=r,Xb}var Zb,qj;function iue(){if(qj)return Zb;qj=1;var e=rue(),t=Im(),n=L2(),r=n&&n.isSet,i=r?t(r):e;return Zb=i,Zb}var Qb,Vj;function dV(){if(Vj)return Qb;Vj=1;var e=Om(),t=O2(),n=Lm(),r=qce(),i=Fce(),s=Jq(),o=eV(),l=Uce(),u=$ce(),d=sV(),h=Gce(),p=ec(),g=Xce(),y=eue(),x=uV(),S=Wt(),w=Jl(),E=nue(),N=_r(),k=iue(),T=fo(),A=Na(),M=1,D=2,R=4,P="[object Arguments]",$="[object Array]",V="[object Boolean]",z="[object Date]",Y="[object Error]",B="[object Function]",F="[object GeneratorFunction]",L="[object Map]",q="[object Number]",W="[object Object]",ee="[object RegExp]",I="[object Set]",G="[object String]",se="[object Symbol]",le="[object WeakMap]",H="[object ArrayBuffer]",X="[object DataView]",Q="[object Float32Array]",ce="[object Float64Array]",ae="[object Int8Array]",he="[object Int16Array]",be="[object Int32Array]",Oe="[object Uint8Array]",we="[object Uint8ClampedArray]",Se="[object Uint16Array]",Ce="[object Uint32Array]",Ne={};Ne[P]=Ne[$]=Ne[H]=Ne[X]=Ne[V]=Ne[z]=Ne[Q]=Ne[ce]=Ne[ae]=Ne[he]=Ne[be]=Ne[L]=Ne[q]=Ne[W]=Ne[ee]=Ne[I]=Ne[G]=Ne[se]=Ne[Oe]=Ne[we]=Ne[Se]=Ne[Ce]=!0,Ne[Y]=Ne[B]=Ne[le]=!1;function nt(Te,bt,Bt,jn,Xt,tn){var ft,cr=bt&M,xn=bt&D,nn=bt&R;if(Bt&&(ft=Xt?Bt(Te,jn,Xt,tn):Bt(Te)),ft!==void 0)return ft;if(!N(Te))return Te;var ht=S(Te);if(ht){if(ft=g(Te),!cr)return o(Te,ft)}else{var zt=p(Te),Rt=zt==B||zt==F;if(w(Te))return s(Te,cr);if(zt==W||zt==P||Rt&&!Xt){if(ft=xn||Rt?{}:x(Te),!cr)return xn?u(Te,i(ft,Te)):l(Te,r(ft,Te))}else{if(!Ne[zt])return Xt?Te:{};ft=y(Te,zt,cr)}}tn||(tn=new e);var Zr=tn.get(Te);if(Zr)return Zr;tn.set(Te,ft),k(Te)?Te.forEach(function(fn){ft.add(nt(fn,bt,Bt,fn,Te,tn))}):E(Te)&&Te.forEach(function(fn,Re){ft.set(Re,nt(fn,bt,Bt,Re,Te,tn))});var ho=nn?xn?h:d:xn?A:T,ss=ht?void 0:ho(Te);return t(ss||Te,function(fn,Re){ss&&(Re=fn,fn=Te[Re]),n(ft,Re,nt(fn,bt,Bt,Re,Te,tn))}),ft}return Qb=nt,Qb}var Jb,Hj;function sue(){if(Hj)return Jb;Hj=1;var e=dV(),t=4;function n(r){return e(r,t)}return Jb=n,Jb}var ex,Fj;function q2(){if(Fj)return ex;Fj=1;function e(t){return function(){return t}}return ex=e,ex}var tx,Uj;function oue(){if(Uj)return tx;Uj=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return tx=e,tx}var nx,$j;function V2(){if($j)return nx;$j=1;var e=oue(),t=e();return nx=t,nx}var rx,Gj;function H2(){if(Gj)return rx;Gj=1;var e=V2(),t=fo();function n(r,i){return r&&e(r,i,t)}return rx=n,rx}var ix,Kj;function aue(){if(Kj)return ix;Kj=1;var e=rs();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return ix=t,ix}var sx,Yj;function qm(){if(Yj)return sx;Yj=1;var e=H2(),t=aue(),n=t(e);return sx=n,sx}var ox,Wj;function Ta(){if(Wj)return ox;Wj=1;function e(t){return t}return ox=e,ox}var ax,Xj;function fV(){if(Xj)return ax;Xj=1;var e=Ta();function t(n){return typeof n=="function"?n:e}return ax=t,ax}var lx,Zj;function hV(){if(Zj)return lx;Zj=1;var e=O2(),t=qm(),n=fV(),r=Wt();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return lx=i,lx}var cx,Qj;function pV(){return Qj||(Qj=1,cx=hV()),cx}var ux,Jj;function lue(){if(Jj)return ux;Jj=1;var e=qm();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return ux=t,ux}var dx,e3;function cue(){if(e3)return dx;e3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return dx=t,dx}var fx,t3;function uue(){if(t3)return fx;t3=1;function e(t){return this.__data__.has(t)}return fx=e,fx}var hx,n3;function mV(){if(n3)return hx;n3=1;var e=R2(),t=cue(),n=uue();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,hx=r,hx}var px,r3;function due(){if(r3)return px;r3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return px=e,px}var mx,i3;function gV(){if(i3)return mx;i3=1;function e(t,n){return t.has(n)}return mx=e,mx}var gx,s3;function yV(){if(s3)return gx;s3=1;var e=mV(),t=due(),n=gV(),r=1,i=2;function s(o,l,u,d,h,p){var g=u&r,y=o.length,x=l.length;if(y!=x&&!(g&&x>y))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var E=-1,N=!0,k=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++E<y;){var T=o[E],A=l[E];if(d)var M=g?d(A,T,E,l,o,p):d(T,A,E,o,l,p);if(M!==void 0){if(M)continue;N=!1;break}if(k){if(!t(l,function(D,R){if(!n(k,R)&&(T===D||h(T,D,u,d,p)))return k.push(R)})){N=!1;break}}else if(!(T===A||h(T,A,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return gx=s,gx}var yx,o3;function fue(){if(o3)return yx;o3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return yx=e,yx}var vx,a3;function F2(){if(a3)return vx;a3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return vx=e,vx}var bx,l3;function hue(){if(l3)return bx;l3=1;var e=Ql(),t=aV(),n=Zl(),r=yV(),i=fue(),s=F2(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",y="[object RegExp]",x="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",N="[object DataView]",k=e?e.prototype:void 0,T=k?k.valueOf:void 0;function A(M,D,R,P,$,V,z){switch(R){case N:if(M.byteLength!=D.byteLength||M.byteOffset!=D.byteOffset)return!1;M=M.buffer,D=D.buffer;case E:return!(M.byteLength!=D.byteLength||!V(new t(M),new t(D)));case u:case d:case g:return n(+M,+D);case h:return M.name==D.name&&M.message==D.message;case y:case S:return M==D+"";case p:var Y=i;case x:var B=P&o;if(Y||(Y=s),M.size!=D.size&&!B)return!1;var F=z.get(M);if(F)return F==D;P|=l,z.set(M,D);var L=r(Y(M),Y(D),P,$,V,z);return z.delete(M),L;case w:if(T)return T.call(M)==T.call(D)}return!1}return bx=A,bx}var xx,c3;function pue(){if(c3)return xx;c3=1;var e=sV(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,g=e(s),y=g.length,x=e(o),S=x.length;if(y!=S&&!p)return!1;for(var w=y;w--;){var E=g[w];if(!(p?E in o:r.call(o,E)))return!1}var N=h.get(s),k=h.get(o);if(N&&k)return N==o&&k==s;var T=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<y;){E=g[w];var M=s[E],D=o[E];if(u)var R=p?u(D,M,E,o,s,h):u(M,D,E,s,o,h);if(!(R===void 0?M===D||d(M,D,l,u,h):R)){T=!1;break}A||(A=E=="constructor")}if(T&&!A){var P=s.constructor,$=o.constructor;P!=$&&"constructor"in s&&"constructor"in o&&!(typeof P=="function"&&P instanceof P&&typeof $=="function"&&$ instanceof $)&&(T=!1)}return h.delete(s),h.delete(o),T}return xx=i,xx}var wx,u3;function mue(){if(u3)return wx;u3=1;var e=Om(),t=yV(),n=hue(),r=pue(),i=ec(),s=Wt(),o=Jl(),l=Od(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function x(S,w,E,N,k,T){var A=s(S),M=s(w),D=A?h:i(S),R=M?h:i(w);D=D==d?p:D,R=R==d?p:R;var P=D==p,$=R==p,V=D==R;if(V&&o(S)){if(!o(w))return!1;A=!0,P=!1}if(V&&!P)return T||(T=new e),A||l(S)?t(S,w,E,N,k,T):n(S,w,D,E,N,k,T);if(!(E&u)){var z=P&&y.call(S,"__wrapped__"),Y=$&&y.call(w,"__wrapped__");if(z||Y){var B=z?S.value():S,F=Y?w.value():w;return T||(T=new e),k(B,F,E,N,T)}}return V?(T||(T=new e),r(S,w,E,N,k,T)):!1}return wx=x,wx}var Sx,d3;function vV(){if(d3)return Sx;d3=1;var e=mue(),t=wi();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return Sx=n,Sx}var Cx,f3;function gue(){if(f3)return Cx;f3=1;var e=Om(),t=vV(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<h;){g=l[d];var y=g[0],x=s[y],S=g[1];if(p&&g[2]){if(x===void 0&&!(y in s))return!1}else{var w=new e;if(u)var E=u(x,S,y,s,o,w);if(!(E===void 0?t(S,x,n|r,u,w):E))return!1}}return!0}return Cx=i,Cx}var Ex,h3;function bV(){if(h3)return Ex;h3=1;var e=_r();function t(n){return n===n&&!e(n)}return Ex=t,Ex}var kx,p3;function yue(){if(p3)return kx;p3=1;var e=bV(),t=fo();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return kx=n,kx}var Nx,m3;function xV(){if(m3)return Nx;m3=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Nx=e,Nx}var Tx,g3;function vue(){if(g3)return Tx;g3=1;var e=gue(),t=yue(),n=xV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return Tx=r,Tx}var Ax,y3;function tc(){if(y3)return Ax;y3=1;var e=Ea(),t=wi(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ax=r,Ax}var Mx,v3;function U2(){if(v3)return Mx;v3=1;var e=Wt(),t=tc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Mx=i,Mx}var _x,b3;function bue(){if(b3)return _x;b3=1;var e=R2(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,_x=n,_x}var Dx,x3;function xue(){if(x3)return Dx;x3=1;var e=bue(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return Dx=n,Dx}var Rx,w3;function wue(){if(w3)return Rx;w3=1;var e=xue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return Rx=r,Rx}var Ox,S3;function Vm(){if(S3)return Ox;S3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Ox=e,Ox}var jx,C3;function Sue(){if(C3)return jx;C3=1;var e=Ql(),t=Vm(),n=Wt(),r=tc(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return jx=o,jx}var Lx,E3;function wV(){if(E3)return Lx;E3=1;var e=Sue();function t(n){return n==null?"":e(n)}return Lx=t,Lx}var Px,k3;function Hm(){if(k3)return Px;k3=1;var e=Wt(),t=U2(),n=wue(),r=wV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return Px=i,Px}var Ix,N3;function jd(){if(N3)return Ix;N3=1;var e=tc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Ix=t,Ix}var Bx,T3;function Fm(){if(T3)return Bx;T3=1;var e=Hm(),t=jd();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return Bx=n,Bx}var zx,A3;function Cue(){if(A3)return zx;A3=1;var e=Fm();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return zx=t,zx}var qx,M3;function Eue(){if(M3)return qx;M3=1;function e(t,n){return t!=null&&n in Object(t)}return qx=e,qx}var Vx,_3;function SV(){if(_3)return Vx;_3=1;var e=Hm(),t=Rd(),n=Wt(),r=Pm(),i=j2(),s=jd();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,g=!1;++h<p;){var y=s(u[h]);if(!(g=l!=null&&d(l,y)))break;l=l[y]}return g||++h!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(y,p)&&(n(l)||t(l)))}return Vx=o,Vx}var Hx,D3;function CV(){if(D3)return Hx;D3=1;var e=Eue(),t=SV();function n(r,i){return r!=null&&t(r,i,e)}return Hx=n,Hx}var Fx,R3;function kue(){if(R3)return Fx;R3=1;var e=vV(),t=Cue(),n=CV(),r=U2(),i=bV(),s=xV(),o=jd(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(g){var y=t(g,h);return y===void 0&&y===p?n(g,h):e(p,y,l|u)}}return Fx=d,Fx}var Ux,O3;function EV(){if(O3)return Ux;O3=1;function e(t){return function(n){return n?.[t]}}return Ux=e,Ux}var $x,j3;function Nue(){if(j3)return $x;j3=1;var e=Fm();function t(n){return function(r){return e(r,n)}}return $x=t,$x}var Gx,L3;function Tue(){if(L3)return Gx;L3=1;var e=EV(),t=Nue(),n=U2(),r=jd();function i(s){return n(s)?e(r(s)):t(s)}return Gx=i,Gx}var Kx,P3;function is(){if(P3)return Kx;P3=1;var e=vue(),t=kue(),n=Ta(),r=Wt(),i=Tue();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return Kx=s,Kx}var Yx,I3;function kV(){if(I3)return Yx;I3=1;var e=tV(),t=lue(),n=is(),r=Wt();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return Yx=i,Yx}var Wx,B3;function Aue(){if(B3)return Wx;B3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Wx=n,Wx}var Xx,z3;function NV(){if(z3)return Xx;z3=1;var e=Aue(),t=SV();function n(r,i){return r!=null&&t(r,i,e)}return Xx=n,Xx}var Zx,q3;function Mue(){if(q3)return Zx;q3=1;var e=P2(),t=ec(),n=Rd(),r=Wt(),i=rs(),s=Jl(),o=Bm(),l=Od(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||l(y)||n(y)))return!y.length;var x=t(y);if(x==u||x==d)return!y.size;if(o(y))return!e(y).length;for(var S in y)if(p.call(y,S))return!1;return!0}return Zx=g,Zx}var Qx,V3;function TV(){if(V3)return Qx;V3=1;function e(t){return t===void 0}return Qx=e,Qx}var Jx,H3;function AV(){if(H3)return Jx;H3=1;var e=qm(),t=rs();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return Jx=n,Jx}var e1,F3;function MV(){if(F3)return e1;F3=1;var e=Vm(),t=is(),n=AV(),r=Wt();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return e1=i,e1}var t1,U3;function _ue(){if(U3)return t1;U3=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return t1=e,t1}var n1,$3;function Due(){if($3)return n1;$3=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return n1=e,n1}var r1,G3;function _V(){if(G3)return r1;G3=1;var e=_ue(),t=qm(),n=is(),r=Due(),i=Wt();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return r1=s,r1}var i1,K3;function Rue(){if(K3)return i1;K3=1;var e=Ea(),t=Wt(),n=wi(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return i1=i,i1}var s1,Y3;function Oue(){if(Y3)return s1;Y3=1;var e=EV(),t=e("length");return s1=t,s1}var o1,W3;function jue(){if(W3)return o1;W3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return o1=u,o1}var a1,X3;function Lue(){if(X3)return a1;X3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=d+"?",S="["+s+"]?",w="(?:"+y+"(?:"+[h,p,g].join("|")+")"+S+x+")*",E=S+x+w,N="(?:"+[h+l+"?",l,p,g,o].join("|")+")",k=RegExp(u+"(?="+u+")|"+N+E,"g");function T(A){for(var M=k.lastIndex=0;k.test(A);)++M;return M}return a1=T,a1}var l1,Z3;function Pue(){if(Z3)return l1;Z3=1;var e=Oue(),t=jue(),n=Lue();function r(i){return t(i)?n(i):e(i)}return l1=r,l1}var c1,Q3;function Iue(){if(Q3)return c1;Q3=1;var e=P2(),t=ec(),n=rs(),r=Rue(),i=Pue(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return c1=l,c1}var u1,J3;function Bue(){if(J3)return u1;J3=1;var e=O2(),t=cV(),n=H2(),r=is(),i=zm(),s=Wt(),o=Jl(),l=_d(),u=_r(),d=Od();function h(p,g,y){var x=s(p),S=x||o(p)||d(p);if(g=r(g,4),y==null){var w=p&&p.constructor;S?y=x?new w:[]:u(p)?y=l(w)?t(i(p)):{}:y={}}return(S?e:n)(p,function(E,N,k){return g(y,E,N,k)}),y}return u1=h,u1}var d1,eL;function zue(){if(eL)return d1;eL=1;var e=Ql(),t=Rd(),n=Wt(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return d1=i,d1}var f1,tL;function $2(){if(tL)return f1;tL=1;var e=B2(),t=zue();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return f1=n,f1}var h1,nL;function que(){if(nL)return h1;nL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return h1=e,h1}var p1,rL;function DV(){if(rL)return p1;rL=1;var e=que(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return p1=n,p1}var m1,iL;function Vue(){if(iL)return m1;iL=1;var e=q2(),t=Xq(),n=Ta(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return m1=r,m1}var g1,sL;function Hue(){if(sL)return g1;sL=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return g1=r,g1}var y1,oL;function RV(){if(oL)return y1;oL=1;var e=Vue(),t=Hue(),n=t(e);return y1=n,y1}var v1,aL;function Um(){if(aL)return v1;aL=1;var e=Ta(),t=DV(),n=RV();function r(i,s){return n(t(i,s,e),i+"")}return v1=r,v1}var b1,lL;function OV(){if(lL)return b1;lL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return b1=e,b1}var x1,cL;function Fue(){if(cL)return x1;cL=1;function e(t){return t!==t}return x1=e,x1}var w1,uL;function Uue(){if(uL)return w1;uL=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return w1=e,w1}var S1,dL;function $ue(){if(dL)return S1;dL=1;var e=OV(),t=Fue(),n=Uue();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return S1=r,S1}var C1,fL;function Gue(){if(fL)return C1;fL=1;var e=$ue();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return C1=t,C1}var E1,hL;function Kue(){if(hL)return E1;hL=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return E1=e,E1}var k1,pL;function Yue(){if(pL)return k1;pL=1;function e(){}return k1=e,k1}var N1,mL;function Wue(){if(mL)return N1;mL=1;var e=oV(),t=Yue(),n=F2(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return N1=i,N1}var T1,gL;function Xue(){if(gL)return T1;gL=1;var e=mV(),t=Gue(),n=Kue(),r=gV(),i=Wue(),s=F2(),o=200;function l(u,d,h){var p=-1,g=t,y=u.length,x=!0,S=[],w=S;if(h)x=!1,g=n;else if(y>=o){var E=d?null:i(u);if(E)return s(E);x=!1,g=r,w=new e}else w=d?[]:S;e:for(;++p<y;){var N=u[p],k=d?d(N):N;if(N=h||N!==0?N:0,x&&k===k){for(var T=w.length;T--;)if(w[T]===k)continue e;d&&w.push(k),S.push(N)}else g(w,k,h)||(w!==S&&w.push(k),S.push(N))}return S}return T1=l,T1}var A1,yL;function jV(){if(yL)return A1;yL=1;var e=rs(),t=wi();function n(r){return t(r)&&e(r)}return A1=n,A1}var M1,vL;function Zue(){if(vL)return M1;vL=1;var e=$2(),t=Um(),n=Xue(),r=jV(),i=t(function(s){return n(e(s,1,r,!0))});return M1=i,M1}var _1,bL;function Que(){if(bL)return _1;bL=1;var e=Vm();function t(n,r){return e(r,function(i){return n[i]})}return _1=t,_1}var D1,xL;function LV(){if(xL)return D1;xL=1;var e=Que(),t=fo();function n(r){return r==null?[]:e(r,t(r))}return D1=n,D1}var R1,wL;function Dr(){if(wL)return R1;wL=1;var e;if(typeof _2=="function")try{e={clone:sue(),constant:q2(),each:pV(),filter:kV(),has:NV(),isArray:Wt(),isEmpty:Mue(),isFunction:_d(),isUndefined:TV(),keys:fo(),map:MV(),reduce:_V(),size:Iue(),transform:Bue(),union:Zue(),values:LV()}}catch{}return e||(e=window._),R1=e,R1}var O1,SL;function G2(){if(SL)return O1;SL=1;var e=Dr();O1=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var g=arguments,y=this;return e.each(h,function(x){g.length>1?y.setNode(x,p):y.setNode(x)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var g=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(y){p.setParent(y)}),delete this._children[h]),e.each(e.keys(this._in[h]),g),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),g),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var y={};function x(S){var w=g.parent(S);return w===void 0||p.hasNode(w)?(y[S]=w,w):w in y?y[w]:x(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,x(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var g=this,y=arguments;return e.reduce(h,function(x,S){return y.length>1?g.setEdge(x,S,p):g.setEdge(x,S),S}),this},i.prototype.setEdge=function(){var h,p,g,y,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,g=S.name,arguments.length===2&&(y=arguments[1],x=!0)):(h=S,p=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],x=!0)),h=""+h,p=""+p,e.isUndefined(g)||(g=""+g);var w=l(this._isDirected,h,p,g);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=x?y:this._defaultEdgeLabelFn(h,p,g);var E=u(this._isDirected,h,p,g);return h=E.v,p=E.w,Object.freeze(E),this._edgeObjs[w]=E,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=E,this._out[h][w]=E,this._edgeCount++,this},i.prototype.edge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g),x=this._edgeObjs[y];return x&&(h=x.v,p=x.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][y],delete this._out[h][y],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var g=this._in[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.v===p}):y}},i.prototype.outEdges=function(h,p){var g=this._out[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.w===p}):y}},i.prototype.nodeEdges=function(h,p){var g=this.inEdges(h,p);if(g)return g.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}return x+r+S+r+(e.isUndefined(y)?t:y)}function u(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}var E={v:x,w:S};return y&&(E.name=y),E}function d(h,p){return l(h,p.v,p.w,p.name)}return O1}var j1,CL;function Jue(){return CL||(CL=1,j1="2.1.8"),j1}var L1,EL;function ede(){return EL||(EL=1,L1={Graph:G2(),version:Jue()}),L1}var P1,kL;function tde(){if(kL)return P1;kL=1;var e=Dr(),t=G2();P1={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return P1}var I1,NL;function nde(){if(NL)return I1;NL=1;var e=Dr();I1=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return I1}var B1,TL;function PV(){if(TL)return B1;TL=1;var e=Dr();B1=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},B1}var z1,AL;function IV(){if(AL)return z1;AL=1;var e=Dr(),t=PV();z1=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,g,y=function(x){var S=x.v!==p?x.v:x.w,w=d[S],E=l(x),N=g.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+E);N<w.distance&&(w.distance=N,w.predecessor=p,h.decrease(S,N))};for(s.nodes().forEach(function(x){var S=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:S},h.add(x,S)});h.size()>0&&(p=h.removeMin(),g=d[p],g.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(y);return d}return z1}var q1,ML;function rde(){if(ML)return q1;ML=1;var e=IV(),t=Dr();q1=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return q1}var V1,_L;function BV(){if(_L)return V1;_L=1;var e=Dr();V1=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(d.lowlink=Math.min(d.lowlink,s[g].index)):(l(g),d.lowlink=Math.min(d.lowlink,s[g].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return V1}var H1,DL;function ide(){if(DL)return H1;DL=1;var e=Dr(),t=BV();H1=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return H1}var F1,RL;function sde(){if(RL)return F1;RL=1;var e=Dr();F1=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,g=s(h);l[d][p]={distance:g,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var g=l[p];u.forEach(function(y){var x=g[d],S=h[y],w=g[y],E=x.distance+S.distance;E<w.distance&&(w.distance=E,w.predecessor=S.predecessor)})})}),l}return F1}var U1,OL;function zV(){if(OL)return U1;OL=1;var e=Dr();U1=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,U1}var $1,jL;function ode(){if(jL)return $1;jL=1;var e=zV();$1=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return $1}var G1,LL;function qV(){if(LL)return G1;LL=1;var e=Dr();G1=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return G1}var K1,PL;function ade(){if(PL)return K1;PL=1;var e=qV();K1=t;function t(n,r){return e(n,r,"post")}return K1}var Y1,IL;function lde(){if(IL)return Y1;IL=1;var e=qV();Y1=t;function t(n,r){return e(n,r,"pre")}return Y1}var W1,BL;function cde(){if(BL)return W1;BL=1;var e=Dr(),t=G2(),n=PV();W1=r;function r(i,s){var o=new t,l={},u=new n,d;function h(g){var y=g.v===d?g.w:g.v,x=u.priority(y);if(x!==void 0){var S=s(g);S<x&&(l[y]=d,u.decrease(y,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return W1}var X1,zL;function ude(){return zL||(zL=1,X1={components:nde(),dijkstra:IV(),dijkstraAll:rde(),findCycles:ide(),floydWarshall:sde(),isAcyclic:ode(),postorder:ade(),preorder:lde(),prim:cde(),tarjan:BV(),topsort:zV()}),X1}var Z1,qL;function dde(){if(qL)return Z1;qL=1;var e=ede();return Z1={Graph:e.Graph,json:tde(),alg:ude(),version:e.version},Z1}var Q1,VL;function Yr(){if(VL)return Q1;VL=1;var e;if(typeof _2=="function")try{e=dde()}catch{}return e||(e=window.graphlib),Q1=e,Q1}var J1,HL;function fde(){if(HL)return J1;HL=1;var e=dV(),t=1,n=4;function r(i){return e(i,t|n)}return J1=r,J1}var ew,FL;function $m(){if(FL)return ew;FL=1;var e=Zl(),t=rs(),n=Pm(),r=_r();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return ew=i,ew}var tw,UL;function hde(){if(UL)return tw;UL=1;var e=Um(),t=Zl(),n=$m(),r=Na(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var g=u[d],y=r(g),x=-1,S=y.length;++x<S;){var w=y[x],E=l[w];(E===void 0||t(E,i[w])&&!s.call(l,w))&&(l[w]=g[w])}return l});return tw=o,tw}var nw,$L;function pde(){if($L)return nw;$L=1;var e=is(),t=rs(),n=fo();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return nw=r,nw}var rw,GL;function mde(){if(GL)return rw;GL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return rw=t,rw}var iw,KL;function gde(){if(KL)return iw;KL=1;var e=mde(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return iw=n,iw}var sw,YL;function yde(){if(YL)return sw;YL=1;var e=gde(),t=_r(),n=tc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return sw=u,sw}var ow,WL;function VV(){if(WL)return ow;WL=1;var e=yde(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return ow=r,ow}var aw,XL;function vde(){if(XL)return aw;XL=1;var e=VV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return aw=t,aw}var lw,ZL;function bde(){if(ZL)return lw;ZL=1;var e=OV(),t=is(),n=vde(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return lw=i,lw}var cw,QL;function xde(){if(QL)return cw;QL=1;var e=pde(),t=bde(),n=e(t);return cw=n,cw}var uw,JL;function HV(){if(JL)return uw;JL=1;var e=$2();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return uw=t,uw}var dw,e4;function wde(){if(e4)return dw;e4=1;var e=V2(),t=fV(),n=Na();function r(i,s){return i==null?i:e(i,t(s),n)}return dw=r,dw}var fw,t4;function Sde(){if(t4)return fw;t4=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return fw=e,fw}var hw,n4;function Cde(){if(n4)return hw;n4=1;var e=jm(),t=H2(),n=is();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return hw=r,hw}var pw,r4;function K2(){if(r4)return pw;r4=1;var e=tc();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return pw=t,pw}var mw,i4;function Ede(){if(i4)return mw;i4=1;function e(t,n){return t>n}return mw=e,mw}var gw,s4;function kde(){if(s4)return gw;s4=1;var e=K2(),t=Ede(),n=Ta();function r(i){return i&&i.length?e(i,n,t):void 0}return gw=r,gw}var yw,o4;function FV(){if(o4)return yw;o4=1;var e=jm(),t=Zl();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return yw=n,yw}var vw,a4;function Nde(){if(a4)return vw;a4=1;var e=Ea(),t=zm(),n=wi(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return vw=d,vw}var bw,l4;function UV(){if(l4)return bw;l4=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return bw=e,bw}var xw,c4;function Tde(){if(c4)return xw;c4=1;var e=Dd(),t=Na();function n(r){return e(r,t(r))}return xw=n,xw}var ww,u4;function Ade(){if(u4)return ww;u4=1;var e=FV(),t=Jq(),n=lV(),r=eV(),i=uV(),s=Rd(),o=Wt(),l=jV(),u=Jl(),d=_d(),h=_r(),p=Nde(),g=Od(),y=UV(),x=Tde();function S(w,E,N,k,T,A,M){var D=y(w,N),R=y(E,N),P=M.get(R);if(P){e(w,N,P);return}var $=A?A(D,R,N+"",w,E,M):void 0,V=$===void 0;if(V){var z=o(R),Y=!z&&u(R),B=!z&&!Y&&g(R);$=R,z||Y||B?o(D)?$=D:l(D)?$=r(D):Y?(V=!1,$=t(R,!0)):B?(V=!1,$=n(R,!0)):$=[]:p(R)||s(R)?($=D,s(D)?$=x(D):(!h(D)||d(D))&&($=i(R))):V=!1}V&&(M.set(R,$),T($,R,k,A,M),M.delete(R)),e(w,N,$)}return ww=S,ww}var Sw,d4;function Mde(){if(d4)return Sw;d4=1;var e=Om(),t=FV(),n=V2(),r=Ade(),i=_r(),s=Na(),o=UV();function l(u,d,h,p,g){u!==d&&n(d,function(y,x){if(g||(g=new e),i(y))r(u,d,x,h,l,p,g);else{var S=p?p(o(u,x),y,x+"",u,d,g):void 0;S===void 0&&(S=y),t(u,x,S)}},s)}return Sw=l,Sw}var Cw,f4;function _de(){if(f4)return Cw;f4=1;var e=Um(),t=$m();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return Cw=n,Cw}var Ew,h4;function Dde(){if(h4)return Ew;h4=1;var e=Mde(),t=_de(),n=t(function(r,i,s){e(r,i,s)});return Ew=n,Ew}var kw,p4;function $V(){if(p4)return kw;p4=1;function e(t,n){return t<n}return kw=e,kw}var Nw,m4;function Rde(){if(m4)return Nw;m4=1;var e=K2(),t=$V(),n=Ta();function r(i){return i&&i.length?e(i,n,t):void 0}return Nw=r,Nw}var Tw,g4;function Ode(){if(g4)return Tw;g4=1;var e=K2(),t=is(),n=$V();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return Tw=r,Tw}var Aw,y4;function jde(){if(y4)return Aw;y4=1;var e=Xr(),t=function(){return e.Date.now()};return Aw=t,Aw}var Mw,v4;function Lde(){if(v4)return Mw;v4=1;var e=Lm(),t=Hm(),n=Pm(),r=_r(),i=jd();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,g=p-1,y=o;y!=null&&++h<p;){var x=i(l[h]),S=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(h!=g){var w=y[x];S=d?d(w,x,y):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(y,x,S),y=y[x]}return o}return Mw=s,Mw}var _w,b4;function Pde(){if(b4)return _w;b4=1;var e=Fm(),t=Lde(),n=Hm();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return _w=r,_w}var Dw,x4;function Ide(){if(x4)return Dw;x4=1;var e=Pde(),t=CV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return Dw=n,Dw}var Rw,w4;function Bde(){if(w4)return Rw;w4=1;var e=HV(),t=DV(),n=RV();function r(i){return n(t(i,void 0,e),i+"")}return Rw=r,Rw}var Ow,S4;function zde(){if(S4)return Ow;S4=1;var e=Ide(),t=Bde(),n=t(function(r,i){return r==null?{}:e(r,i)});return Ow=n,Ow}var jw,C4;function qde(){if(C4)return jw;C4=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return jw=n,jw}var Lw,E4;function Vde(){if(E4)return Lw;E4=1;var e=qde(),t=$m(),n=VV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return Lw=r,Lw}var Pw,k4;function Hde(){if(k4)return Pw;k4=1;var e=Vde(),t=e();return Pw=t,Pw}var Iw,N4;function Fde(){if(N4)return Iw;N4=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Iw=e,Iw}var Bw,T4;function Ude(){if(T4)return Bw;T4=1;var e=tc();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return Bw=t,Bw}var zw,A4;function $de(){if(A4)return zw;A4=1;var e=Ude();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return zw=t,zw}var qw,M4;function Gde(){if(M4)return qw;M4=1;var e=Vm(),t=Fm(),n=is(),r=AV(),i=Fde(),s=Im(),o=$de(),l=Ta(),u=Wt();function d(h,p,g){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var y=-1;p=e(p,s(n));var x=r(h,function(S,w,E){var N=e(p,function(k){return k(S)});return{criteria:N,index:++y,value:S}});return i(x,function(S,w){return o(S,w,g)})}return qw=d,qw}var Vw,_4;function Kde(){if(_4)return Vw;_4=1;var e=$2(),t=Gde(),n=Um(),r=$m(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Vw=i,Vw}var Hw,D4;function Yde(){if(D4)return Hw;D4=1;var e=wV(),t=0;function n(r){var i=++t;return e(r)+i}return Hw=n,Hw}var Fw,R4;function Wde(){if(R4)return Fw;R4=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return Fw=e,Fw}var Uw,O4;function Xde(){if(O4)return Uw;O4=1;var e=Lm(),t=Wde();function n(r,i){return t(r||[],i||[],e)}return Uw=n,Uw}var $w,j4;function vt(){if(j4)return $w;j4=1;var e;if(typeof _2=="function")try{e={cloneDeep:fde(),constant:q2(),defaults:hde(),each:pV(),filter:kV(),find:xde(),flatten:HV(),forEach:hV(),forIn:wde(),has:NV(),isUndefined:TV(),last:Sde(),map:MV(),mapValues:Cde(),max:kde(),merge:Dde(),min:Rde(),minBy:Ode(),now:jde(),pick:zde(),range:Hde(),reduce:_V(),sortBy:Kde(),uniqueId:Yde(),values:LV(),zipObject:Xde()}}catch{}return e||(e=window._),$w=e,$w}var Gw,L4;function Zde(){if(L4)return Gw;L4=1,Gw=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Gw}var Kw,P4;function Qde(){if(P4)return Kw;P4=1;var e=vt(),t=Yr().Graph,n=Zde();Kw=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(y){return d.outEdges(y.v,y.w)}),!0)}function s(d,h,p){for(var g=[],y=h[h.length-1],x=h[0],S;d.nodeCount();){for(;S=x.dequeue();)o(d,h,p,S);for(;S=y.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){g=g.concat(o(d,h,p,S,!0));break}}}return g}function o(d,h,p,g,y){var x=y?[]:void 0;return e.forEach(d.inEdges(g.v),function(S){var w=d.edge(S),E=d.node(S.v);y&&x.push({v:S.v,w:S.w}),E.out-=w,u(h,p,E)}),e.forEach(d.outEdges(g.v),function(S){var w=d.edge(S),E=S.w,N=d.node(E);N.in-=w,u(h,p,N)}),d.removeNode(g.v),x}function l(d,h){var p=new t,g=0,y=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var E=p.edge(w.v,w.w)||0,N=h(w),k=E+N;p.setEdge(w.v,w.w,k),y=Math.max(y,p.node(w.v).out+=N),g=Math.max(g,p.node(w.w).in+=N)});var x=e.range(y+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(w){u(x,S,p.node(w))}),{graph:p,buckets:x,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return Kw}var Yw,I4;function Jde(){if(I4)return Yw;I4=1;var e=vt(),t=Qde();Yw={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return Yw}var Ww,B4;function Gn(){if(B4)return Ww;B4=1;var e=vt(),t=Yr().Graph;Ww={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:g,partition:y,time:x,notime:S};function n(w,E,N,k){var T;do T=e.uniqueId(k);while(w.hasNode(T));return N.dummy=E,w.setNode(T,N),T}function r(w){var E=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(N){E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){var k=E.edge(N.v,N.w)||{weight:0,minlen:1},T=w.edge(N);E.setEdge(N.v,N.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),E}function i(w){var E=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(N){w.children(N).length||E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){E.setEdge(N,w.edge(N))}),E}function s(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.outEdges(N),function(T){k[T.w]=(k[T.w]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function o(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.inEdges(N),function(T){k[T.v]=(k[T.v]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function l(w,E){var N=w.x,k=w.y,T=E.x-N,A=E.y-k,M=w.width/2,D=w.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,P;return Math.abs(A)*M>Math.abs(T)*D?(A<0&&(D=-D),R=D*T/A,P=D):(T<0&&(M=-M),R=M,P=M*A/T),{x:N+R,y:k+P}}function u(w){var E=e.map(e.range(g(w)+1),function(){return[]});return e.forEach(w.nodes(),function(N){var k=w.node(N),T=k.rank;e.isUndefined(T)||(E[T][k.order]=N)}),E}function d(w){var E=e.min(e.map(w.nodes(),function(N){return w.node(N).rank}));e.forEach(w.nodes(),function(N){var k=w.node(N);e.has(k,"rank")&&(k.rank-=E)})}function h(w){var E=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),N=[];e.forEach(w.nodes(),function(A){var M=w.node(A).rank-E;N[M]||(N[M]=[]),N[M].push(A)});var k=0,T=w.graph().nodeRankFactor;e.forEach(N,function(A,M){e.isUndefined(A)&&M%T!==0?--k:k&&e.forEach(A,function(D){w.node(D).rank+=k})})}function p(w,E,N,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=N,T.order=k),n(w,"border",T,E)}function g(w){return e.max(e.map(w.nodes(),function(E){var N=w.node(E).rank;if(!e.isUndefined(N))return N}))}function y(w,E){var N={lhs:[],rhs:[]};return e.forEach(w,function(k){E(k)?N.lhs.push(k):N.rhs.push(k)}),N}function x(w,E){var N=e.now();try{return E()}finally{console.log(w+" time: "+(e.now()-N)+"ms")}}function S(w,E){return E()}return Ww}var Xw,z4;function efe(){if(z4)return Xw;z4=1;var e=vt(),t=Gn();Xw={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,g=s.edge(o),y=g.labelRank;if(h!==u+1){s.removeEdge(o);var x,S,w;for(w=0,++u;u<h;++w,++u)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},x=t.addDummyNode(s,"edge",S,"_d"),u===y&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,x,{weight:g.weight},p),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return Xw}var Zw,q4;function Vp(){if(q4)return Zw;q4=1;var e=vt();Zw={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Zw}var Qw,V4;function GV(){if(V4)return Qw;V4=1;var e=vt(),t=Yr().Graph,n=Vp().slack;Qw=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,g;i(u,l)<h;)p=s(u,l),g=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,g);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var g=p.v,y=h===g?p.w:g;!l.hasNode(y)&&!n(u,p)&&(l.setNode(y,{}),l.setEdge(h,y,{}),d(y))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return Qw}var Jw,H4;function tfe(){if(H4)return Jw;H4=1;var e=vt(),t=GV(),n=Vp().slack,r=Vp().longestPath,i=Yr().alg.preorder,s=Yr().alg.postorder,o=Gn().simplify;Jw=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=y,l.enterEdge=x,l.exchangeEdges=S;function l(k){k=o(k),r(k);var T=t(k);p(T),u(T,k);for(var A,M;A=y(T);)M=x(T,k,A),S(T,k,A,M)}function u(k,T){var A=s(k,k.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(M){d(k,T,M)})}function d(k,T,A){var M=k.node(A),D=M.parent;k.edge(A,D).cutvalue=h(k,T,A)}function h(k,T,A){var M=k.node(A),D=M.parent,R=!0,P=T.edge(A,D),$=0;return P||(R=!1,P=T.edge(D,A)),$=P.weight,e.forEach(T.nodeEdges(A),function(V){var z=V.v===A,Y=z?V.w:V.v;if(Y!==D){var B=z===R,F=T.edge(V).weight;if($+=B?F:-F,E(k,A,Y)){var L=k.edge(A,Y).cutvalue;$+=B?-L:L}}}),$}function p(k,T){arguments.length<2&&(T=k.nodes()[0]),g(k,{},1,T)}function g(k,T,A,M,D){var R=A,P=k.node(M);return T[M]=!0,e.forEach(k.neighbors(M),function($){e.has(T,$)||(A=g(k,T,A,$,M))}),P.low=R,P.lim=A++,D?P.parent=D:delete P.parent,A}function y(k){return e.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function x(k,T,A){var M=A.v,D=A.w;T.hasEdge(M,D)||(M=A.w,D=A.v);var R=k.node(M),P=k.node(D),$=R,V=!1;R.lim>P.lim&&($=P,V=!0);var z=e.filter(T.edges(),function(Y){return V===N(k,k.node(Y.v),$)&&V!==N(k,k.node(Y.w),$)});return e.minBy(z,function(Y){return n(T,Y)})}function S(k,T,A,M){var D=A.v,R=A.w;k.removeEdge(D,R),k.setEdge(M.v,M.w,{}),p(k),u(k,T),w(k,T)}function w(k,T){var A=e.find(k.nodes(),function(D){return!T.node(D).parent}),M=i(k,A);M=M.slice(1),e.forEach(M,function(D){var R=k.node(D).parent,P=T.edge(D,R),$=!1;P||(P=T.edge(R,D),$=!0),T.node(D).rank=T.node(R).rank+($?P.minlen:-P.minlen)})}function E(k,T,A){return k.hasEdge(T,A)}function N(k,T,A){return A.low<=T.lim&&T.lim<=A.lim}return Jw}var eS,F4;function nfe(){if(F4)return eS;F4=1;var e=Vp(),t=e.longestPath,n=GV(),r=tfe();eS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return eS}var tS,U4;function rfe(){if(U4)return tS;U4=1;var e=vt();tS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,g=0,y=h[g],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(y=h[g])!==p&&i.node(y).maxRank<l.rank;)g++;y===p&&(x=!1)}if(!x){for(;g<h.length-1&&i.node(y=h[g+1]).minRank<=l.rank;)g++;y=h[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,y;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>h||p>s[g].lim));for(y=g,g=l;(g=i.parent(g))!==y;)d.push(g);return{path:u.concat(d.reverse()),lca:y}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return tS}var nS,$4;function ife(){if($4)return nS;$4=1;var e=vt(),t=Gn();nS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(y){l.edge(y).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(y){r(l,u,p,g,h,d,y)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,g,y){var x=l.children(y);if(!x.length){y!==u&&l.setEdge(u,y,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),E=l.node(y);l.setParent(S,y),E.borderTop=S,l.setParent(w,y),E.borderBottom=w,e.forEach(x,function(N){r(l,u,d,h,p,g,N);var k=l.node(N),T=k.borderTop?k.borderTop:N,A=k.borderBottom?k.borderBottom:N,M=k.borderTop?h:2*h,D=T!==A?1:p-g[y]+1;l.setEdge(S,T,{weight:M,minlen:D,nestingEdge:!0}),l.setEdge(A,w,{weight:M,minlen:D,nestingEdge:!0})}),l.parent(y)||l.setEdge(u,S,{weight:0,minlen:p+g[y]})}function i(l){var u={};function d(h,p){var g=l.children(h);g&&g.length&&e.forEach(g,function(y){d(y,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return nS}var rS,G4;function sfe(){if(G4)return rS;G4=1;var e=vt(),t=Gn();rS=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],g=t.addDummyNode(i,"border",h,o);u[s][d]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return rS}var iS,K4;function ofe(){if(K4)return iS;K4=1;var e=vt();iS={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return iS}var sS,Y4;function afe(){if(Y4)return sS;Y4=1;var e=vt();sS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return sS}var oS,W4;function lfe(){if(W4)return oS;W4=1;var e=vt();oS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var y=g.pos+u;h[y]+=g.weight;for(var x=0;y>0;)y%2&&(x+=h[y+1]),y=y-1>>1,h[y]+=g.weight;p+=g.weight*x})),p}return oS}var aS,X4;function cfe(){if(X4)return aS;X4=1;var e=vt();aS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return aS}var lS,Z4;function ufe(){if(Z4)return lS;Z4=1;var e=vt();lS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return lS}var cS,Q4;function dfe(){if(Q4)return cS;Q4=1;var e=vt(),t=Gn();cS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,g=0,y=0;u.sort(i(!!o)),y=r(h,d,y),e.forEach(u,function(S){y+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,y=r(h,d,y)});var x={vs:e.flatten(h,!0)};return g&&(x.barycenter=p/g,x.weight=g),x}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return cS}var uS,J4;function ffe(){if(J4)return uS;J4=1;var e=vt(),t=cfe(),n=ufe(),r=dfe();uS=i;function i(l,u,d,h){var p=l.children(u),g=l.node(u),y=g?g.borderLeft:void 0,x=g?g.borderRight:void 0,S={};y&&(p=e.filter(p,function(A){return A!==y&&A!==x}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var M=i(l,A.v,d,h);S[A.v]=M,e.has(M,"barycenter")&&o(A,M)}});var E=n(w,d);s(E,S);var N=r(E,h);if(y&&(N.vs=e.flatten([y,N.vs,x],!0),l.predecessors(y).length)){var k=l.node(l.predecessors(y)[0]),T=l.node(l.predecessors(x)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+k.order+T.order)/(N.weight+2),N.weight+=2}return N}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return uS}var dS,e5;function hfe(){if(e5)return dS;e5=1;var e=vt(),t=Yr().Graph;dS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(g){var y=g.v===d?g.w:g.v,x=u.edge(y,d),S=e.isUndefined(x)?0:x.weight;u.setEdge(y,d,{weight:i.edge(g).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return dS}var fS,t5;function pfe(){if(t5)return fS;t5=1;var e=vt();fS=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return fS}var hS,n5;function mfe(){if(n5)return hS;n5=1;var e=vt(),t=afe(),n=lfe(),r=ffe(),i=hfe(),s=pfe(),o=Yr().Graph,l=Gn();hS=u;function u(g){var y=l.maxRank(g),x=d(g,e.range(1,y+1),"inEdges"),S=d(g,e.range(y-1,-1,-1),"outEdges"),w=t(g);p(g,w);for(var E=Number.POSITIVE_INFINITY,N,k=0,T=0;T<4;++k,++T){h(k%2?x:S,k%4>=2),w=l.buildLayerMatrix(g);var A=n(g,w);A<E&&(T=0,N=e.cloneDeep(w),E=A)}p(g,N)}function d(g,y,x){return e.map(y,function(S){return i(g,S,x)})}function h(g,y){var x=new o;e.forEach(g,function(S){var w=S.graph().root,E=r(S,w,x,y);e.forEach(E.vs,function(N,k){S.node(N).order=k}),s(S,x,E.vs)})}function p(g,y){e.forEach(y,function(x){e.forEach(x,function(S,w){g.node(S).order=w})})}return hS}var pS,r5;function gfe(){if(r5)return pS;r5=1;var e=vt(),t=Yr().Graph,n=Gn();pS={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:y};function r(E,N){var k={};function T(A,M){var D=0,R=0,P=A.length,$=e.last(M);return e.forEach(M,function(V,z){var Y=s(E,V),B=Y?E.node(Y).order:P;(Y||V===$)&&(e.forEach(M.slice(R,z+1),function(F){e.forEach(E.predecessors(F),function(L){var q=E.node(L),W=q.order;(W<D||B<W)&&!(q.dummy&&E.node(F).dummy)&&o(k,L,F)})}),R=z+1,D=B)}),M}return e.reduce(N,T),k}function i(E,N){var k={};function T(M,D,R,P,$){var V;e.forEach(e.range(D,R),function(z){V=M[z],E.node(V).dummy&&e.forEach(E.predecessors(V),function(Y){var B=E.node(Y);B.dummy&&(B.order<P||B.order>$)&&o(k,Y,V)})})}function A(M,D){var R=-1,P,$=0;return e.forEach(D,function(V,z){if(E.node(V).dummy==="border"){var Y=E.predecessors(V);Y.length&&(P=E.node(Y[0]).order,T(D,$,z,R,P),$=z,R=P)}T(D,$,D.length,P,M.length)}),D}return e.reduce(N,A),k}function s(E,N){if(E.node(N).dummy)return e.find(E.predecessors(N),function(k){return E.node(k).dummy})}function o(E,N,k){if(N>k){var T=N;N=k,k=T}var A=E[N];A||(E[N]=A={}),A[k]=!0}function l(E,N,k){if(N>k){var T=N;N=k,k=T}return e.has(E[N],k)}function u(E,N,k,T){var A={},M={},D={};return e.forEach(N,function(R){e.forEach(R,function(P,$){A[P]=P,M[P]=P,D[P]=$})}),e.forEach(N,function(R){var P=-1;e.forEach(R,function($){var V=T($);if(V.length){V=e.sortBy(V,function(L){return D[L]});for(var z=(V.length-1)/2,Y=Math.floor(z),B=Math.ceil(z);Y<=B;++Y){var F=V[Y];M[$]===$&&P<D[F]&&!l(k,$,F)&&(M[F]=$,M[$]=A[$]=A[F],P=D[F])}}})}),{root:A,align:M}}function d(E,N,k,T,A){var M={},D=h(E,N,k,A),R=A?"borderLeft":"borderRight";function P(z,Y){for(var B=D.nodes(),F=B.pop(),L={};F;)L[F]?z(F):(L[F]=!0,B.push(F),B=B.concat(Y(F))),F=B.pop()}function $(z){M[z]=D.inEdges(z).reduce(function(Y,B){return Math.max(Y,M[B.v]+D.edge(B))},0)}function V(z){var Y=D.outEdges(z).reduce(function(F,L){return Math.min(F,M[L.w]-D.edge(L))},Number.POSITIVE_INFINITY),B=E.node(z);Y!==Number.POSITIVE_INFINITY&&B.borderType!==R&&(M[z]=Math.max(M[z],Y))}return P($,D.predecessors.bind(D)),P(V,D.successors.bind(D)),e.forEach(T,function(z){M[z]=M[k[z]]}),M}function h(E,N,k,T){var A=new t,M=E.graph(),D=S(M.nodesep,M.edgesep,T);return e.forEach(N,function(R){var P;e.forEach(R,function($){var V=k[$];if(A.setNode(V),P){var z=k[P],Y=A.edge(z,V);A.setEdge(z,V,Math.max(D(E,$,P),Y||0))}P=$})}),A}function p(E,N){return e.minBy(e.values(N),function(k){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(k,function(M,D){var R=w(E,D)/2;T=Math.max(M+R,T),A=Math.min(M-R,A)}),T-A})}function g(E,N){var k=e.values(N),T=e.min(k),A=e.max(k);e.forEach(["u","d"],function(M){e.forEach(["l","r"],function(D){var R=M+D,P=E[R],$;if(P!==N){var V=e.values(P);$=D==="l"?T-e.min(V):A-e.max(V),$&&(E[R]=e.mapValues(P,function(z){return z+$}))}})})}function y(E,N){return e.mapValues(E.ul,function(k,T){if(N)return E[N.toLowerCase()][T];var A=e.sortBy(e.map(E,T));return(A[1]+A[2])/2})}function x(E){var N=n.buildLayerMatrix(E),k=e.merge(r(E,N),i(E,N)),T={},A;e.forEach(["u","d"],function(D){A=D==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(A=e.map(A,function(z){return e.values(z).reverse()}));var P=(D==="u"?E.predecessors:E.successors).bind(E),$=u(E,A,k,P),V=d(E,A,$.root,$.align,R==="r");R==="r"&&(V=e.mapValues(V,function(z){return-z})),T[D+R]=V})});var M=p(E,T);return g(T,M),y(T,E.graph().align)}function S(E,N,k){return function(T,A,M){var D=T.node(A),R=T.node(M),P=0,$;if(P+=D.width/2,e.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":$=-D.width/2;break;case"r":$=D.width/2;break}if($&&(P+=k?$:-$),$=0,P+=(D.dummy?N:E)/2,P+=(R.dummy?N:E)/2,P+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":$=R.width/2;break;case"r":$=-R.width/2;break}return $&&(P+=k?$:-$),$=0,P}}function w(E,N){return E.node(N).width}return pS}var mS,i5;function yfe(){if(i5)return mS;i5=1;var e=vt(),t=Gn(),n=gfe().positionX;mS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return mS}var gS,s5;function vfe(){if(s5)return gS;s5=1;var e=vt(),t=Jde(),n=efe(),r=nfe(),i=Gn().normalizeRanks,s=rfe(),o=Gn().removeEmptyRanks,l=ife(),u=sfe(),d=ofe(),h=mfe(),p=yfe(),g=Gn(),y=Yr().Graph;gS=x;function x(H,X){var Q=X&&X.debugTiming?g.time:g.notime;Q("layout",function(){var ce=Q("  buildLayoutGraph",function(){return P(H)});Q("  runLayout",function(){S(ce,Q)}),Q("  updateInputGraph",function(){w(H,ce)})})}function S(H,X){X("    makeSpaceForEdgeLabels",function(){$(H)}),X("    removeSelfEdges",function(){ee(H)}),X("    acyclic",function(){t.run(H)}),X("    nestingGraph.run",function(){l.run(H)}),X("    rank",function(){r(g.asNonCompoundGraph(H))}),X("    injectEdgeLabelProxies",function(){V(H)}),X("    removeEmptyRanks",function(){o(H)}),X("    nestingGraph.cleanup",function(){l.cleanup(H)}),X("    normalizeRanks",function(){i(H)}),X("    assignRankMinMax",function(){z(H)}),X("    removeEdgeLabelProxies",function(){Y(H)}),X("    normalize.run",function(){n.run(H)}),X("    parentDummyChains",function(){s(H)}),X("    addBorderSegments",function(){u(H)}),X("    order",function(){h(H)}),X("    insertSelfEdges",function(){I(H)}),X("    adjustCoordinateSystem",function(){d.adjust(H)}),X("    position",function(){p(H)}),X("    positionSelfEdges",function(){G(H)}),X("    removeBorderNodes",function(){W(H)}),X("    normalize.undo",function(){n.undo(H)}),X("    fixupEdgeLabelCoords",function(){L(H)}),X("    undoCoordinateSystem",function(){d.undo(H)}),X("    translateGraph",function(){B(H)}),X("    assignNodeIntersects",function(){F(H)}),X("    reversePoints",function(){q(H)}),X("    acyclic.undo",function(){t.undo(H)})}function w(H,X){e.forEach(H.nodes(),function(Q){var ce=H.node(Q),ae=X.node(Q);ce&&(ce.x=ae.x,ce.y=ae.y,X.children(Q).length&&(ce.width=ae.width,ce.height=ae.height))}),e.forEach(H.edges(),function(Q){var ce=H.edge(Q),ae=X.edge(Q);ce.points=ae.points,e.has(ae,"x")&&(ce.x=ae.x,ce.y=ae.y)}),H.graph().width=X.graph().width,H.graph().height=X.graph().height}var E=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],D={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function P(H){var X=new y({multigraph:!0,compound:!0}),Q=le(H.graph());return X.setGraph(e.merge({},N,se(Q,E),e.pick(Q,k))),e.forEach(H.nodes(),function(ce){var ae=le(H.node(ce));X.setNode(ce,e.defaults(se(ae,T),A)),X.setParent(ce,H.parent(ce))}),e.forEach(H.edges(),function(ce){var ae=le(H.edge(ce));X.setEdge(ce,e.merge({},D,se(ae,M),e.pick(ae,R)))}),X}function $(H){var X=H.graph();X.ranksep/=2,e.forEach(H.edges(),function(Q){var ce=H.edge(Q);ce.minlen*=2,ce.labelpos.toLowerCase()!=="c"&&(X.rankdir==="TB"||X.rankdir==="BT"?ce.width+=ce.labeloffset:ce.height+=ce.labeloffset)})}function V(H){e.forEach(H.edges(),function(X){var Q=H.edge(X);if(Q.width&&Q.height){var ce=H.node(X.v),ae=H.node(X.w),he={rank:(ae.rank-ce.rank)/2+ce.rank,e:X};g.addDummyNode(H,"edge-proxy",he,"_ep")}})}function z(H){var X=0;e.forEach(H.nodes(),function(Q){var ce=H.node(Q);ce.borderTop&&(ce.minRank=H.node(ce.borderTop).rank,ce.maxRank=H.node(ce.borderBottom).rank,X=e.max(X,ce.maxRank))}),H.graph().maxRank=X}function Y(H){e.forEach(H.nodes(),function(X){var Q=H.node(X);Q.dummy==="edge-proxy"&&(H.edge(Q.e).labelRank=Q.rank,H.removeNode(X))})}function B(H){var X=Number.POSITIVE_INFINITY,Q=0,ce=Number.POSITIVE_INFINITY,ae=0,he=H.graph(),be=he.marginx||0,Oe=he.marginy||0;function we(Se){var Ce=Se.x,Ne=Se.y,nt=Se.width,Te=Se.height;X=Math.min(X,Ce-nt/2),Q=Math.max(Q,Ce+nt/2),ce=Math.min(ce,Ne-Te/2),ae=Math.max(ae,Ne+Te/2)}e.forEach(H.nodes(),function(Se){we(H.node(Se))}),e.forEach(H.edges(),function(Se){var Ce=H.edge(Se);e.has(Ce,"x")&&we(Ce)}),X-=be,ce-=Oe,e.forEach(H.nodes(),function(Se){var Ce=H.node(Se);Ce.x-=X,Ce.y-=ce}),e.forEach(H.edges(),function(Se){var Ce=H.edge(Se);e.forEach(Ce.points,function(Ne){Ne.x-=X,Ne.y-=ce}),e.has(Ce,"x")&&(Ce.x-=X),e.has(Ce,"y")&&(Ce.y-=ce)}),he.width=Q-X+be,he.height=ae-ce+Oe}function F(H){e.forEach(H.edges(),function(X){var Q=H.edge(X),ce=H.node(X.v),ae=H.node(X.w),he,be;Q.points?(he=Q.points[0],be=Q.points[Q.points.length-1]):(Q.points=[],he=ae,be=ce),Q.points.unshift(g.intersectRect(ce,he)),Q.points.push(g.intersectRect(ae,be))})}function L(H){e.forEach(H.edges(),function(X){var Q=H.edge(X);if(e.has(Q,"x"))switch((Q.labelpos==="l"||Q.labelpos==="r")&&(Q.width-=Q.labeloffset),Q.labelpos){case"l":Q.x-=Q.width/2+Q.labeloffset;break;case"r":Q.x+=Q.width/2+Q.labeloffset;break}})}function q(H){e.forEach(H.edges(),function(X){var Q=H.edge(X);Q.reversed&&Q.points.reverse()})}function W(H){e.forEach(H.nodes(),function(X){if(H.children(X).length){var Q=H.node(X),ce=H.node(Q.borderTop),ae=H.node(Q.borderBottom),he=H.node(e.last(Q.borderLeft)),be=H.node(e.last(Q.borderRight));Q.width=Math.abs(be.x-he.x),Q.height=Math.abs(ae.y-ce.y),Q.x=he.x+Q.width/2,Q.y=ce.y+Q.height/2}}),e.forEach(H.nodes(),function(X){H.node(X).dummy==="border"&&H.removeNode(X)})}function ee(H){e.forEach(H.edges(),function(X){if(X.v===X.w){var Q=H.node(X.v);Q.selfEdges||(Q.selfEdges=[]),Q.selfEdges.push({e:X,label:H.edge(X)}),H.removeEdge(X)}})}function I(H){var X=g.buildLayerMatrix(H);e.forEach(X,function(Q){var ce=0;e.forEach(Q,function(ae,he){var be=H.node(ae);be.order=he+ce,e.forEach(be.selfEdges,function(Oe){g.addDummyNode(H,"selfedge",{width:Oe.label.width,height:Oe.label.height,rank:be.rank,order:he+ ++ce,e:Oe.e,label:Oe.label},"_se")}),delete be.selfEdges})})}function G(H){e.forEach(H.nodes(),function(X){var Q=H.node(X);if(Q.dummy==="selfedge"){var ce=H.node(Q.e.v),ae=ce.x+ce.width/2,he=ce.y,be=Q.x-ae,Oe=ce.height/2;H.setEdge(Q.e,Q.label),H.removeNode(X),Q.label.points=[{x:ae+2*be/3,y:he-Oe},{x:ae+5*be/6,y:he-Oe},{x:ae+be,y:he},{x:ae+5*be/6,y:he+Oe},{x:ae+2*be/3,y:he+Oe}],Q.label.x=Q.x,Q.label.y=Q.y}})}function se(H,X){return e.mapValues(e.pick(H,X),Number)}function le(H){var X={};return e.forEach(H,function(Q,ce){X[ce.toLowerCase()]=Q}),X}return gS}var yS,o5;function bfe(){if(o5)return yS;o5=1;var e=vt(),t=Gn(),n=Yr().Graph;yS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return yS}var vS,a5;function xfe(){return a5||(a5=1,vS="0.8.5"),vS}var bS,l5;function wfe(){return l5||(l5=1,bS={graphlib:Yr(),layout:vfe(),debug:bfe(),util:{time:Gn().time,notime:Gn().notime},version:xfe()}),bS}var Sfe=wfe();const ph=dd(Sfe),su=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]}];function KV(e){return Je({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function YV(e){return Je({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function WV(e){return Je({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function Cfe(e){return Je({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function Efe({components:e,onAdd:t}){const[n,r]=Le.useState(!0),[i,s]=Le.useState(new Set),[o,l]=Le.useState(null),[u,d]=Le.useState(""),h=Le.useMemo(()=>new wa(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Le.useMemo(()=>{const x=u.trim();if(!x)return Array.from(e);const w=h.search(x).map(k=>k.item),E=e.find(k=>k.id==="custom-component"),N=w.some(k=>k.id==="custom-component");return E&&!N&&w.push(E),w},[e,h,u]),g=Le.useMemo(()=>{const x=new Map;for(const S of p){const w=S.group??"Other";x.has(w)||x.set(w,[]),x.get(w).push(S)}return Array.from(x.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);Le.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([x])=>x)))},[g,i.size]);const y=x=>{s(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?v.jsx(YV,{size:16}):v.jsx(WV,{size:16})}),v.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),v.jsx("div",{className:"mr-3 mb-3",children:v.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),v.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?v.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([x,S])=>{const w=i.has(x);return v.jsxs("div",{children:[v.jsxs("button",{type:"button",onClick:()=>y(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${x}`,children:[v.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),v.jsx(KV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&v.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:v.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(E=>v.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${E.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();l({label:E.label,description:E.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:N=>{l(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:E.id})),N.dataTransfer?.setData("text/plain",E.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),t(E.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[v.jsx("div",{className:"text-center mb-1",children:v.jsx("span",{className:"text-2xl",children:E.icon})}),v.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:E.label})]},E.id))})})]},x)}),v.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[v.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),v.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:v.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&h5.createPortal(v.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[v.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),v.jsx("div",{className:"text-muted",children:o.description}),v.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const kfe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h})=>v.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:v.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:v.jsxs(Iae,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,connectionMode:ma.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[v.jsx(ule,{nodeStrokeWidth:3}),v.jsx(Zae,{}),v.jsx(Uae,{gap:16})]})})}),Nfe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[g,y]=Le.useState(320),x=260,S=640,w=Le.useRef(!1),E=Le.useRef(null),[N,k]=Le.useState(!1),[T,A]=Le.useState(!0),M=Le.useCallback(z=>{if(!w.current)return;const Y=Math.min(Math.max(window.innerWidth-z.clientX,x),S);y(Y)},[]),D=Le.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),R=z=>{z.preventDefault(),w.current=!0,document.body.style.userSelect="none"};Le.useEffect(()=>(globalThis.addEventListener("mousemove",M),globalThis.addEventListener("mouseup",D),()=>{globalThis.removeEventListener("mousemove",M),globalThis.removeEventListener("mouseup",D)}),[M,D]),Le.useEffect(()=>{E.current&&(E.current.style.width=g+"px")},[g]);const P=e?.id==="free";if(Le.useEffect(()=>{P&&!r&&A(!1)},[P,r]),Le.useEffect(()=>{P&&r&&(n("inspector"),A(!0))},[P,r,n]),!e)return null;const $=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const z=document.createElement("textarea");z.value=JSON.stringify(d,null,2),document.body.appendChild(z),z.select(),document.execCommand("copy"),z.remove()}},V=()=>{if(!d)return;const z=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),Y=URL.createObjectURL(z),B=document.createElement("a");B.href=Y,B.download=`assessment-${Date.now()}.json`,document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(Y)};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>A(z=>!z),"aria-label":T?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:T?v.jsx(WV,{size:16}):v.jsx(YV,{size:16})}),v.jsx("aside",{ref:E,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${T?"p-4":"w-6 p-1"}`,"data-width":g,style:{width:T?`${g}px`:"24px"},children:T&&v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onMouseDown:R,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[v.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),v.jsx(Cfe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),v.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!P&&v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),v.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),v.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&v.jsxs("div",{children:[d&&v.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),v.jsxs("div",{className:"text-sm font-semibold text-theme",children:[d.score,"%"]})]}),v.jsx("div",{className:"text-xs text-muted mb-2",children:d.isValid?"Pass":"Needs work"}),v.jsx("div",{className:"space-y-1 text-xs",children:d.feedback.slice(0,3).map(z=>v.jsx("div",{className:"text-sm text-theme",children:z.message},`${z.category}-${z.type}`))}),v.jsxs("div",{className:"mt-3 flex gap-2",children:[v.jsx("button",{type:"button",onClick:$,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),v.jsx("button",{type:"button",onClick:V,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),v.jsxs("div",{className:"mt-3 text-xs",children:[v.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),d.architectureStrengths.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.architectureStrengths.map(z=>v.jsx("li",{children:z},`strength-${z}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),d.improvements.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.improvements.map(z=>v.jsx("li",{children:z},`imp-${z}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),v.jsx("div",{className:"space-y-1",children:d.feedback.map(z=>v.jsxs("div",{className:"text-xs",children:[v.jsx("div",{className:"font-medium",children:z.category.toUpperCase()}),v.jsx("div",{className:"text-muted",children:z.message})]},`${z.category}-${z.type}`))})]})]}),v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),v.jsx("ul",{className:"space-y-1",children:e.requirements.map(z=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:z})]},z))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),v.jsx("ul",{className:"space-y-1",children:e.constraints.map(z=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:z})]},z))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("button",{type:"button",onClick:()=>k(!N),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),v.jsx(KV,{size:14,className:`text-muted transition-transform duration-150 ${N?"rotate-0":"-rotate-90"}`})]}),N&&v.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(z=>v.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:v.jsx("div",{className:"text-xs text-white",children:z})},z))})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(z=>v.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:z},z))})]})]}),t==="inspector"&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&v.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),v.jsx("div",{className:"space-y-2",children:s})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),v.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[v.jsx(sK,{size:14}),v.jsx("span",{children:"Add"})]})]}),v.jsx("div",{className:"space-y-2",children:o})]}),v.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&v.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[v.jsx("span",{children:""}),v.jsx("span",{children:"Detach from Group"})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),v.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})})]})};async function Tfe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),Afe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function Afe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}const XV=Le.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const i=t.componentName||t.label,s=Le.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),o=Le.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),l=Le.useCallback(d=>{d.stopPropagation(),n?.(e,t)},[e,t,n]),u=Le.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]);return v.jsxs(ln.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",children:[v.jsx("legend",{className:"sr-only",children:i}),v.jsxs("div",{className:"absolute -top-5 right-1 flex items-center z-10 bg-[var(--surface)]/80 border border-theme rounded-full shadow-sm",children:[v.jsx(ln.button,{type:"button","aria-label":"Settings",onClick:o,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(oI,{className:"w-2 h-2"})}),r&&v.jsx(ln.button,{type:"button","aria-label":"Detach from Group",onClick:u,className:"p-1 text-orange-500 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Detach from Group",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(y9,{className:"w-2 h-2"})}),v.jsx(ln.button,{type:"button","aria-label":"Copy Node",onClick:l,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Copy Node",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(oK,{className:"w-2 h-2"})}),v.jsx(ln.button,{type:"button","aria-label":"Delete",onClick:s,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(CE,{className:"w-2 h-2"})})]}),v.jsx(Nr,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Nr,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Nr,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Nr,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[v.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),v.jsxs("div",{className:"min-w-0 w-full text-center",children:[v.jsx("div",{className:"truncate font-medium text-sm",children:i}),t.subtitle&&v.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]})});XV.displayName="Node";const Mfe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},_fe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=Mfe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,y=p,x=g+d/2;return{edgePath:h,centerX:y,centerY:x}}const[o]=w2(e),[l,u]=S2({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Dfe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:g}=e,[y,x]=O.useState(!1),[S,w]=O.useState(h?.label??""),[E,N]=O.useState(h?.hasLabel??!1),k=O.useRef(null),T=Ze(Y=>{const B=Y.edges.some(F=>F.id!==t&&F.source===r&&F.target===n);return B&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),B}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:M,centerX:D,centerY:R}=_fe(A,T),P=Y=>{Y.stopPropagation(),x(!0),setTimeout(()=>k.current?.focus(),0)},$=Y=>{Y.stopPropagation(),N(!0),x(!0),setTimeout(()=>k.current?.focus(),0)},V=Y=>{Y.stopPropagation(),N(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},z=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:E||S.trim().length>0}}))};return v.jsxs("g",{className:"react-flow__edge",children:[v.jsx("defs",{children:v.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:v.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),v.jsx("path",{id:t,d:M,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),v.jsx("foreignObject",{x:D-75,y:R-12,width:150,height:24,className:"overflow-visible",children:v.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:E?v.jsx("div",{className:"flex items-center gap-1",children:y?v.jsx("input",{ref:k,value:S,onChange:Y=>w(Y.target.value),onBlur:z,onKeyDown:Y=>{Y.key==="Enter"&&z(),Y.key==="Escape"&&(x(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onDoubleClick:P,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&v.jsx("button",{onClick:V,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&v.jsx("button",{onClick:$,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},Rfe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Le.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Le.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return v.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[v.jsx(ple,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),v.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[v.jsx(ln.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(oI,{className:"w-3 h-3"})}),v.jsx(ln.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(CE,{className:"w-3 h-3"})})]}),v.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&v.jsx("span",{children:t.icon}),v.jsx("span",{children:t.label})]}),t.subtitle&&v.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),v.jsx(Nr,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Nr,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Nr,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Nr,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Ofe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=O.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return v.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[v.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?v.jsx(CK,{size:18}):v.jsx(lI,{size:18}),v.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),v.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:v.jsx(CE,{size:16})})]}),i&&v.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(Eh,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),v.jsx(Eh,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),v.jsx(X6,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),v.jsxs("div",{className:"border-t border-theme pt-3",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&v.jsx(Eh,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&v.jsx(Tp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&v.jsx(W6,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&v.jsx("div",{className:"pt-1",children:v.jsx(Y6,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},jfe=({isOpen:e,onClose:t,diagrams:n,onLoad:r,onDelete:i,isLoading:s})=>{const[o,l]=O.useState(null),u=async(h,p)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this diagram?")){l(h);try{await i(h)}finally{l(null)}}},d=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?v.jsx(Kp,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(ln.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-3xl w-full max-h-[80vh] flex flex-col border border-theme/10",onClick:h=>h.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:"My Diagrams"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:s?v.jsx("div",{className:"flex items-center justify-center h-64",children:v.jsx("div",{className:"text-muted",children:"Loading diagrams..."})}):n.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-muted mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),v.jsx("p",{className:"text-muted text-lg mb-2",children:"No diagrams yet"}),v.jsx("p",{className:"text-muted text-sm",children:"Create your first diagram and save it to see it here"})]}):v.jsx("div",{className:"grid gap-3",children:n.map(h=>v.jsx("div",{onClick:()=>{r(h),t()},className:"p-4 bg-theme/5 hover:bg-theme/10 border border-theme/10 rounded-lg cursor-pointer transition-all group",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h3",{className:"font-semibold text-theme truncate group-hover:text-[var(--brand)] transition-colors",children:h.title}),h.description&&v.jsx("p",{className:"text-sm text-muted mt-1 line-clamp-2",children:h.description}),v.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted",children:[v.jsxs("span",{children:[h.nodes.length," node",h.nodes.length!==1?"s":""]}),v.jsxs("span",{children:[h.edges.length," connection",h.edges.length!==1?"s":""]}),v.jsxs("span",{children:["Updated ",d(h.updatedAt)]})]})]}),v.jsx("button",{type:"button",onClick:p=>u(h.id,p),disabled:o===h.id,className:"ml-4 p-2 text-muted hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors disabled:opacity-50","aria-label":"Delete diagram",children:o===h.id?v.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},h.id))})})]})})}):null},Lfe=()=>{const[e,t]=O.useState([]),n=O.useCallback((u,d="info",h)=>{const g={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:h};t(y=>[...y,g])},[]),r=O.useCallback(u=>{t(d=>d.filter(h=>h.id!==u))},[]),i=O.useCallback((u,d)=>{n(u,"success",d)},[n]),s=O.useCallback((u,d)=>{n(u,"error",d)},[n]),o=O.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=O.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Pfe=({toast:e,onClose:t})=>{O.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return v.jsxs(ln.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[v.jsx("div",{className:"flex-shrink-0",children:r()}),v.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),v.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Ife=({toasts:e,onClose:t})=>v.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:v.jsx(Kp,{children:e.map(n=>v.jsx("div",{className:"pointer-events-auto",children:v.jsx(Pfe,{toast:n,onClose:t})},n.id))})}),Bfe=({isOpen:e,onClose:t,onConfirm:n,title:r,label:i,placeholder:s,defaultValue:o="",type:l="text",required:u=!1})=>{const[d,h]=O.useState(o),p=O.useRef(null);O.useEffect(()=>{e&&(h(o),setTimeout(()=>p.current?.focus(),100))},[e,o]);const g=x=>{x.preventDefault(),!(u&&!d.trim())&&n(d)},y=x=>{x.key==="Escape"&&t()};return e?v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",role:"dialog","aria-labelledby":"dialog-title","aria-modal":"true",children:v.jsxs("form",{onSubmit:g,children:[v.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:v.jsx("h2",{id:"dialog-title",className:"text-lg font-semibold text-theme",children:r})}),v.jsxs("div",{className:"px-6 py-4",children:[v.jsxs("label",{htmlFor:"dialog-input",className:"block text-sm font-medium text-theme mb-2",children:[i,u&&v.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l==="textarea"?v.jsx("textarea",{ref:p,id:"dialog-input",value:d,onChange:x=>h(x.target.value),onKeyDown:y,placeholder:s,className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:4,required:u}):v.jsx("input",{ref:p,id:"dialog-input",type:"text",value:d,onChange:x=>h(x.target.value),onKeyDown:y,placeholder:s,className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:u})]}),v.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:u&&!d.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm"})]})]})})}):null},zfe=(e,t,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:e,edges:t};return JSON.stringify(i,null,2)},qfe=(e,t,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<e.length;l++){const u=e[l],d=`node-${l+2}`,h=u.data?.label||u.id,p=u.position?.x||0,g=u.position?.y||0,y=u.style?.width||u.width||200,x=u.style?.height||u.height||80,S=s();o+=`        <mxCell id="${d}" value="${i(String(h))}" `,o+=`style="${S}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${g}" width="${y}" height="${x}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<t.length;l++){const u=t[l],d=`edge-${l}`,h=e.findIndex(y=>y.id===u.source),p=e.findIndex(y=>y.id===u.target),g=u.label||u.data?.label||"";h!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(g))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${h+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},c5=e=>{try{const t=JSON.parse(e);if(!t.nodes||!Array.isArray(t.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!t.edges||!Array.isArray(t.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:t.nodes,edges:t.edges}}catch(t){throw new Error(t instanceof Error?`Failed to import JSON: ${t.message}`:"Failed to import JSON: Invalid format")}},u5=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const g=p.getAttribute("id")||`cell-${u}`,y=p.getAttribute("value")||`Node ${u+1}`,x=p.querySelector("mxGeometry"),S=Number.parseFloat(x?.getAttribute("x")||"0"),w=Number.parseFloat(x?.getAttribute("y")||"0"),E=Number.parseFloat(x?.getAttribute("width")||"200"),N=Number.parseFloat(x?.getAttribute("height")||"80"),k=`imported-node-${Date.now()}-${u}`;o.set(g,k);const T={label:y},A=p.querySelector("mxData");if(A){const M=A.querySelectorAll("property");for(const D of M){const R=D.getAttribute("name"),P=D.getAttribute("value");if(R&&P)try{T[R]=JSON.parse(P)}catch{T[R]=P}}}i.push({id:k,type:"custom",position:{x:S,y:w},data:T,...E&&N?{style:{width:E,height:N}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let h=0;for(const p of d){const g=p.getAttribute("source"),y=p.getAttribute("target"),x=p.getAttribute("value")||"";if(g&&y){const S=o.get(g),w=o.get(y);if(S&&w){const E={};x&&(E.label=x,E.hasLabel=!0);const N=p.querySelector("mxData");if(N){const k=N.querySelectorAll("property");for(const T of k){const A=T.getAttribute("name"),M=T.getAttribute("value");if(A&&M)try{E[A]=JSON.parse(M)}catch{E[A]=M}}}s.push({id:`imported-edge-${Date.now()}-${h}`,source:S,target:w,type:"customEdge",data:E,...x?{label:x}:{}})}}h++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(t){throw new Error(t instanceof Error?`Failed to import XML: ${t.message}`:"Failed to import XML: Invalid format")}},d5=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},Vfe=async e=>e.text(),Hfe={customEdge:Dfe},Ffe=Le.memo(e=>{const t=e.data;return v.jsx(XV,{id:e.id,data:t,onCopy:e.onCopy,isInGroup:e.isInGroup})}),Ufe=(e,t)=>n=>{const r=t.find(i=>i.id===n.id)?.parentId!==void 0;return v.jsx(Ffe,{...n,onCopy:e,isInGroup:r})},$fe=()=>{xa();const e=hd(),n=HF()?.id,{screenToFlowPosition:r}=ud(),{user:i,isAuthenticated:s,login:o,signup:l,googleLogin:u,logout:d}=$p(),h=Lfe(),[p,g]=O.useState(!1),[y,x]=O.useState(null),w=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[E,N]=O.useState(null),[k,T]=O.useState(!0),[A,M]=O.useState(null),[D,R]=O.useState(!1),[P,$]=O.useState(!1),[V,z]=O.useState([]),[Y,B]=O.useState(!1),[F,L]=O.useState(null),[q,W]=O.useState(!1),[ee,I]=O.useState(0),G=O.useRef(null);O.useEffect(()=>{if(!n){T(!1),M("No problem ID provided");return}if(n==="free"){N({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),T(!1);return}if(n.startsWith("custom-")){const J=localStorage.getItem(`custom-problem-${n}`);if(J){N(JSON.parse(J)),T(!1);return}}(async()=>{try{T(!0),M(null);const ue=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!ue.ok)throw new Error(`Failed to fetch problem: ${ue.status} ${ue.statusText}`);const ve=await ue.json();N(ve)}catch(J){M(J instanceof Error?J.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",J)}finally{T(!1)}})()},[n]);const se=()=>e("/"),{state:le,setState:H,undo:X,redo:Q,canUndo:ce,canRedo:ae}=mte({nodes:[],edges:[]}),[he,be,Oe]=Bae(le.nodes),[we,Se,Ce]=zae(le.edges),{getNodes:Ne,fitView:nt}=ud(),[Te,bt]=O.useState(!1),[Bt,jn]=O.useState(!1),Xt=O.useRef(null);O.useEffect(()=>{if(!w||!s)return;(async()=>{try{const J=await rr.getDiagram(w),ue=J.nodes,ve=J.edges;be(ue),Se(ve),L(J.id),H({nodes:ue,edges:ve})}catch(J){console.error("Failed to load diagram:",J),h.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})()},[w,s]),O.useEffect(()=>{const te=setTimeout(()=>{H({nodes:he,edges:we})},300);return()=>clearTimeout(te)},[he,we,H]),O.useEffect(()=>{be(le.nodes),Se(le.edges)},[le,be,Se]),O.useEffect(()=>{const te=J=>{(J.ctrlKey||J.metaKey)&&J.key==="z"&&!J.shiftKey&&(J.preventDefault(),X()),((J.ctrlKey||J.metaKey)&&J.shiftKey&&J.key==="z"||J.ctrlKey&&J.key==="y")&&(J.preventDefault(),Q())};return globalThis.addEventListener("keydown",te),()=>globalThis.removeEventListener("keydown",te)},[X,Q]),O.useEffect(()=>{if(n!=="free")return G.current=setInterval(()=>{I(te=>te+1)},1e3),()=>{G.current&&clearInterval(G.current)}},[n]);const tn=te=>{const J=Math.floor(te/3600),ue=Math.floor(te%3600/60),ve=te%60;return J>0?`${J.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`:`${ue.toString().padStart(2,"0")}:${ve.toString().padStart(2,"0")}`};O.useEffect(()=>{const te=J=>{Te&&(J.target.closest(".relative")||bt(!1))};if(Te)return document.addEventListener("click",te),()=>document.removeEventListener("click",te)},[Te]),O.useEffect(()=>{const te=J=>{Bt&&(J.target.closest(".relative")||jn(!1))};if(Bt)return document.addEventListener("click",te),()=>document.removeEventListener("click",te)},[Bt]);const ft=te=>{const J={...te,type:"customEdge",data:{label:"",hasLabel:!1}};Se(ue=>Fz(J,ue))},[cr,xn]=Le.useState(null),[nn,ht]=O.useState(!1),zt=async()=>{if(nn)return;ht(!0),xn(null);const te={components:he.map(J=>{const ue=J.data??{},ve=ue.type;let ye;typeof ve=="string"?ye=ve:typeof J.type=="string"?ye=J.type:ye="microservice";const Ee=ue.label,Ve=typeof Ee=="string"?Ee:String(J.id),He=ue&&typeof ue=="object"?{...ue}:{},{label:Ot,icon:wn,subtitle:Br,...xt}=He;return{id:J.id,type:ye,label:Ve,position:{x:J.position?.x??0,y:J.position?.y??0},properties:{...xt,nodeData:{label:Ve,icon:ue.icon,subtitle:ue.subtitle}}}}),connections:we.map(J=>{const ue=J.data??{},ve=ue.type,ye=typeof ve=="string"?ve:"api-call",Ee=ue.label,Ve=typeof Ee=="string"?Ee:void 0;return{id:J.id??`${J.source}-${J.target}`,source:J.source,target:J.target,type:ye,label:Ve,properties:ue}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",te);const J=await Tfe(te,E);xn(J),Rr("details")}catch(J){console.error("Assessment failed:",J),xn({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{ht(!1)}},Rt=O.useRef(null),Zr=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="move")},ho=te=>{te.preventDefault();const J=te.dataTransfer?.getData("application/reactflow")||te.dataTransfer?.getData("text/plain");let ue=J;try{J&&(ue=JSON.parse(J).type||J)}catch{}const ve=r({x:te.clientX,y:te.clientY}),ye=`${ue}-${Date.now()}`,Ee=su.find(Ot=>Ot.id===ue),Ve=Ee?.group==="Grouping",He={id:ye,position:ve,type:Ve?"group":"custom",style:Ve?{width:400,height:300,zIndex:-1}:void 0,data:{label:Ee?.label??ue,componentId:Ee?.id,icon:Ee?.icon,subtitle:Ee?.description,backgroundColor:Ve?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Ve?"rgba(100, 100, 255, 0.3)":void 0}};be(Ot=>[...Ot,He])},ss=(te,J)=>{if(J.parentId)return;const ue=he.filter(ye=>ye.type==="group");let ve;for(const ye of ue){if(ye.id===J.id)continue;const Ee=ye.position.x,Ve=ye.position.y,He=ye.style?.width||400,Ot=ye.style?.height||300,wn=J.position.x,Br=J.position.y,xt=10;if(wn>Ee+xt&&wn<Ee+He-xt&&Br>Ve+xt&&Br<Ve+Ot-xt){ve=ye.id;break}}ve&&be(ye=>ye.map(Ee=>{if(Ee.id===J.id){const Ve=ye.find(Ot=>Ot.id===ve),He=Ve?{x:J.position.x-Ve.position.x,y:J.position.y-Ve.position.y}:J.position;return{...Ee,position:He,parentId:ve,extent:"parent"}}return Ee}))},fn=O.useCallback(()=>{const te=as.current;te&&be(J=>J.map(ue=>{if(ue.id===te&&ue.parentId){const ve=J.find(Ve=>Ve.id===ue.parentId);let ye=ue.position.x,Ee=ue.position.y;return ve&&(ye+=ve.position.x,Ee+=ve.position.y),{...ue,position:{x:ye,y:Ee},parentId:void 0,extent:void 0}}return ue}))},[be]),[Re,Ln]=O.useState(null),[Qr,Jr]=O.useState({}),[po,Si]=O.useState({}),[Aa,Rr]=O.useState("details"),[Ci,mo]=O.useState(!1),as=O.useRef(null);Le.useEffect(()=>{as.current=Re},[Re]);const ls=O.useRef(void 0);ls.current=te=>{const ue=te.detail.id;be(ve=>ve.filter(ye=>ye.id!==ue)),as.current===ue&&(Ln(null),Rr("details"))};const cs=O.useRef(void 0);cs.current=te=>{const ue=te.detail.id;Ln(ve=>{const ye=ve===ue?null:ue;return Rr(ye?"inspector":"details"),ye})};function go(te,J,ue,ve){return te.map(ye=>ye.id===J?{...ye,data:{...ye.data,label:ue,hasLabel:ve},label:ue}:ye)}const yo=Le.useRef(void 0);yo.current=te=>{const J=te,{id:ue,label:ve,hasLabel:ye}=J.detail;Se(Ee=>go(Ee,ue,ve,ye))},Le.useEffect(()=>{const te=J=>yo.current?.(J);return globalThis.addEventListener("diagram:edge-label-change",te),()=>globalThis.removeEventListener("diagram:edge-label-change",te)},[]),Le.useEffect(()=>{const te=ve=>ls.current?.(ve),J=ve=>cs.current?.(ve),ue=ve=>{const ye=ve;be(Ee=>Ee.map(Ve=>{if(Ve.id===ye.detail.id&&Ve.parentId){const He=Ee.find(Br=>Br.id===Ve.parentId);let Ot=Ve.position.x,wn=Ve.position.y;return He&&(Ot+=He.position.x,wn+=He.position.y),{...Ve,position:{x:Ot,y:wn},parentId:void 0,extent:void 0}}return Ve}))};return globalThis.addEventListener("diagram:node-delete",te),globalThis.addEventListener("diagram:node-toggle",J),globalThis.addEventListener("diagram:node-detach",ue),()=>{globalThis.removeEventListener("diagram:node-delete",te),globalThis.removeEventListener("diagram:node-toggle",J),globalThis.removeEventListener("diagram:node-detach",ue)}},[be]),Le.useEffect(()=>{if(!Re)return;const te=he.find(J=>J.id===Re);Jr(te?.data??{})},[Re,he]);const us=(te,J)=>{Jr(ue=>({...ue,[te]:J})),Re&&be(ue=>ue.map(ve=>ve.id===Re?{...ve,data:{...ve.data,[te]:J}}:ve))},ur=(te,J)=>us(te,J),qt=(te,J)=>us(te,J),Zt=(te,J)=>us(te,J),ei=(te,J)=>us(te,J),vo=()=>{if(!Re)return;const te={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(po[Re]?.length||0)+1}`,label:`Custom Property ${(po[Re]?.length||0)+1}`,type:"text",value:""};Si(J=>{const ue={...J,[Re]:[...J[Re]||[],te]};return be(ve=>ve.map(ye=>ye.id===Re?{...ye,data:{...ye.data,_customProperties:ue[Re]}}:ye)),ue})},nc=(te,J)=>{Re&&Si(ue=>{const ye=(ue[Re]||[]).map(Ee=>Ee.id===te?{...Ee,...J}:Ee);return be(Ee=>Ee.map(Ve=>Ve.id===Re?{...Ve,data:{...Ve.data,_customProperties:ye}}:Ve)),{...ue,[Re]:ye}})},rc=te=>{Re&&Si(J=>{const ve=(J[Re]||[]).filter(ye=>ye.id!==te);return be(ye=>ye.map(Ee=>Ee.id===Re?{...Ee,data:{...Ee.data,_customProperties:ve}}:Ee)),{...J,[Re]:ve}})};Le.useEffect(()=>{if(!Re)return;const te=he.find(J=>J.id===Re);te?.data?._customProperties&&Si(J=>({...J,[Re]:te.data._customProperties}))},[Re,he]);const Ma=te=>{const J=`${Re}-${te.key}`,ue=Qr[te.key];let ve;typeof ue=="number"?ve=ue:typeof te.default=="number"?ve=te.default:ve=void 0;let ye;typeof ue=="string"?ye=ue:te.default===null||te.default===void 0?ye="":ye=String(te.default);let Ee;typeof ue=="string"?Ee=ue:te.default===null||te.default===void 0?Ee=void 0:Ee=String(te.default);const Ve=!!ue;return v.jsxs("div",{className:"flex flex-col px-1",children:[te.type==="boolean"&&v.jsx(Y6,{id:J,checked:Ve,onChange:He=>ur(te.key,He),label:te.label}),te.type==="number"&&v.jsx(W6,{id:J,label:te.label,value:ve,onChange:He=>qt(te.key,He)}),te.type==="text"&&v.jsx(Eh,{id:J,label:te.label,value:ye,placeholder:te.placeholder,onChange:He=>Zt(te.key,He)}),te.type==="textarea"&&v.jsx(Tp,{id:J,label:te.label,value:ye,placeholder:te.placeholder,onChange:He=>Zt(te.key,He)}),te.type==="select"&&v.jsx(X6,{id:J,label:te.label,value:Ee,options:te.options||[],onChange:He=>ei(te.key,He)})]},te.key)};let dr=null;if(Re){const te=he.find(J=>J.id===Re);if(te){const J=te.data.componentId?su.find(ue=>ue.id===te.data.componentId):su.find(ue=>ue.label===te.data.label);J?.properties?dr=J.properties.map(ue=>Ma(ue)):dr=v.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else dr=v.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let Ei=null;if(Re){const te=po[Re]||[];te.length>0?Ei=te.map(J=>v.jsx(Ofe,{property:J,onUpdate:nc,onDelete:rc},J.id)):Ei=v.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const Or=O.useCallback((te,J)=>{const ue=he.find(Ee=>Ee.id===te);if(!ue)return;const ve=`${te}-copy-${Date.now()}`,ye={...ue,id:ve,position:{x:ue.position.x+200,y:ue.position.y+100},data:{...J},selected:!1};be(Ee=>[...Ee,ye])},[he,be]),jr=O.useMemo(()=>({custom:Ufe(Or,he),group:Rfe}),[Or,he]);if(k)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),v.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(A)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),v.jsx("div",{className:"text-muted mb-4",children:A}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:se,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),v.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!E)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),v.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),v.jsx("button",{onClick:se,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function ti(te){const J=su.find(He=>He.id===te),ue=Rt.current?.getBoundingClientRect();if(!ue)return;const ve=r({x:ue.left+ue.width/2,y:ue.top+ue.height/2}),ye=`${te}-${Date.now()}`,Ee=J?.group==="Grouping",Ve={id:ye,position:ve,type:Ee?"group":"custom",style:Ee?{width:400,height:300,zIndex:-1}:void 0,data:{label:J?.label??te,componentId:J?.id,icon:J?.icon,subtitle:J?.description,backgroundColor:Ee?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Ee?"rgba(100, 100, 255, 0.3)":void 0}};be(He=>[...He,Ve])}const Lr=()=>{he.length===0&&we.length===0||mo(!0)},kt=()=>{be([]),Se([]),Ln(null),xn(null),mo(!1)},_a=()=>{mo(!1)},ds=(te="png")=>{const J=Rz(Ne()),ue=Sm(J,1024,768,.5,2,.2),ve=document.querySelector(".react-flow__viewport");if(!ve){console.error("Viewport element not found");return}let ye,Ee;te==="svg"?(ye=Gq,Ee="svg"):te==="jpeg"?(ye=oce,Ee="jpg"):(ye=sce,Ee="png"),ye(ve,{backgroundColor:te==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${ue.x}px, ${ue.y}px) scale(${ue.zoom})`}}).then(Ve=>{const He=document.createElement("a");He.setAttribute("download",`system-design-${Date.now()}.${Ee}`),He.setAttribute("href",Ve),He.click()}).catch(Ve=>{console.error("Error generating image:",Ve)})},Pr=()=>{try{const te=E?.title||"System Design",J=E?.description,ue=zfe(he,we,te,J),ve=`${te.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;d5(ue,ve,"application/json"),h.success("Design exported as JSON successfully!")}catch(te){console.error("Export JSON error:",te),h.error("Failed to export as JSON")}},ni=()=>{try{const te=E?.title||"System Design",J=E?.description,ue=qfe(he,we,te,J),ve=`${te.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;d5(ue,ve,"application/xml"),h.success("Design exported as XML successfully!")}catch(te){console.error("Export XML error:",te),h.error("Failed to export as XML")}},ic=async te=>{const J=te.target.files?.[0];if(J)try{const ue=await Vfe(J);let ve;if(J.name.endsWith(".json"))ve=c5(ue),h.success("Design imported from JSON successfully!");else if(J.name.endsWith(".xml")||J.name.endsWith(".drawio"))ve=u5(ue),h.success("Design imported from XML successfully!");else{const ye=ue.trim();if(ye.startsWith("{")||ye.startsWith("["))ve=c5(ue),h.success("Design imported from JSON successfully!");else if(ye.startsWith("<?xml")||ye.startsWith("<mxfile"))ve=u5(ue),h.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}be(ve.nodes),Se(ve.edges),L(null),setTimeout(()=>{nt({padding:.2,duration:400})},100)}catch(ue){console.error("Import error:",ue),h.error(ue instanceof Error?ue.message:"Failed to import diagram")}finally{Xt.current&&(Xt.current.value="")}},bo=()=>{Xt.current?.click()},Da=async()=>{if(!s){R(!0);return}x({title:"Save Design",label:"Design Title",placeholder:"Enter a title for this diagram",defaultValue:F?"Untitled Design":"",required:!0,onConfirm:te=>{g(!1),setTimeout(()=>{x({title:"Save Design",label:"Description (Optional)",placeholder:"Enter a description for this diagram",type:"textarea",required:!1,onConfirm:J=>{g(!1),(async()=>{try{if(F)await rr.updateDiagram(F,{title:te,description:J||void 0,nodes:he,edges:we}),h.success("Design updated successfully!");else{const ue=await rr.saveDiagram({title:te,description:J||void 0,nodes:he,edges:we});L(ue.id),h.success("Design saved successfully!")}}catch(ue){console.error("Failed to Save Design:",ue),h.error(ue instanceof Error?ue.message:"Failed to Save Design")}})()}}),g(!0)},100)}}),g(!0)},sc=async()=>{if(!s){R(!0);return}B(!0);try{const te=await rr.getUserDiagrams();z(te),$(!0)}catch(te){console.error("Failed to load diagrams:",te),h.error("Failed to load diagrams")}finally{B(!1)}},fs=te=>{be(te.nodes),Se(te.edges),L(te.id)},hs=async te=>{try{await rr.deleteDiagram(te),z(J=>J.filter(ue=>ue.id!==te)),F===te&&L(null)}catch(J){throw console.error("Failed to delete diagram:",J),J}},Pn=(te="TB")=>{const J=he.filter(Ye=>Ye.type==="group"),ue=he.filter(Ye=>Ye.type!=="group"&&!Ye.parentId),ve=new ph.graphlib.Graph;ve.setDefaultEdgeLabel(()=>({})),ve.setGraph({rankdir:te,nodesep:150,ranksep:200,marginx:50,marginy:50});const ye=350,Ee=250;for(const Ye of J)ve.setNode(Ye.id,{width:ye,height:Ee});const Ve=we.filter(Ye=>J.some(Vt=>Vt.id===Ye.source)&&J.some(Vt=>Vt.id===Ye.target));for(const Ye of Ve)ve.setEdge(Ye.source,Ye.target);J.length>0&&ph.layout(ve);const He=new ph.graphlib.Graph;He.setDefaultEdgeLabel(()=>({})),He.setGraph({rankdir:te,nodesep:80,ranksep:100});const Ot=200,wn=80;for(const Ye of ue)He.setNode(Ye.id,{width:Ot,height:wn});const Br=we.filter(Ye=>ue.some(Vt=>Vt.id===Ye.source)&&ue.some(Vt=>Vt.id===Ye.target));for(const Ye of Br)He.setEdge(Ye.source,Ye.target);ue.length>0&&ph.layout(He);const xt=he.map(Ye=>{if(Ye.type==="group"){const Vt=ve.node(Ye.id);if(Vt)return{...Ye,position:{x:Vt.x-ye/2,y:Vt.y-Ee/2}}}else{if(Ye.parentId)return Ye;{const Vt=He.node(Ye.id);if(Vt){const wo=J.length>0?ye+100:0;return{...Ye,position:{x:Vt.x-Ot/2+wo,y:Vt.y-wn/2}}}}}return Ye});be(xt),globalThis.requestAnimationFrame(()=>{nt({padding:.2,duration:400})})},xo=()=>{if(be(te=>te.map(J=>J.id===Re?{...J,data:{...J.data,...Qr}}:J)),Re){const te=he.find(J=>J.id===Re);console.log("Node properties saved:",{id:Re,data:te?.data,nodeProps:Qr})}},Ra=n==="free"?"Design Studio | Diagrammatic":`${E?.title||"System Design Challenge"} | Diagrammatic`,Ir=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${E?.title||"system design"} challenge. ${E?.description?.substring(0,150)||"Practice system design skills"}...`;return v.jsxs(v.Fragment,{children:[v.jsx(md,{title:Ra,description:Ir,keywords:`system design playground, ${E?.title||"free canvas"}, architecture diagram tool, ${E?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),v.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[v.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:v.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:v.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("button",{type:"button",onClick:se,className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[v.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":E.title,children:E.title}),n!=="free"&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":E.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:E.difficulty}),E.estimated_time&&v.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[v.jsx(uK,{className:"h-3 w-3"}),E.estimated_time]})]}),n!=="free"&&v.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:v.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:tn(ee)})})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-r border-white/20 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:X,disabled:!ce,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:v.jsx(cK,{className:"h-5 w-5"})}),v.jsx("button",{type:"button",onClick:Q,disabled:!ae,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:v.jsx(aK,{className:"h-5 w-5"})})]}),v.jsx("button",{type:"button",onClick:Lr,disabled:he.length===0&&we.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:v.jsx(aI,{className:"h-5 w-5"})}),n==="free"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",onClick:bo,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:v.jsx(SK,{className:"h-5 w-5"})}),v.jsx("input",{ref:Xt,type:"file",accept:".json,.xml,.drawio",onChange:ic,className:"hidden","aria-label":"Import diagram file"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{type:"button",onClick:()=>bt(!Te),disabled:he.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:v.jsx(xK,{className:"h-5 w-5"})}),Te&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),v.jsx("button",{type:"button",onClick:()=>{ds("png"),bt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),v.jsx("button",{type:"button",onClick:()=>{ds("jpeg"),bt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),v.jsx("button",{type:"button",onClick:()=>{ds("svg"),bt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),v.jsx("div",{className:"border-t border-theme/10 my-1"}),v.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),v.jsx("button",{type:"button",onClick:()=>{Pr(),bt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),v.jsx("button",{type:"button",onClick:()=>{ni(),bt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{type:"button",onClick:()=>jn(!Bt),disabled:he.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:v.jsx(pte,{className:"h-5 w-5"})}),Bt&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[v.jsx("button",{type:"button",onClick:()=>{Pn("TB"),jn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),v.jsx("button",{type:"button",onClick:()=>{Pn("LR"),jn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&v.jsxs("div",{className:"hidden sm:flex items-center gap-2 border-r border-white/20 pr-2 mr-2",children:[v.jsxs("button",{type:"button",onClick:Da,disabled:he.length===0,className:"px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2","data-tooltip":s?"Save Design":"Sign in to Save Designs",children:[v.jsx(lK,{className:"h-4 w-4"}),F?"Update":"Save"]}),v.jsxs("button",{type:"button",onClick:sc,className:"px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors flex items-center gap-2","data-tooltip":s?"My Designs":"Sign in to view saved designs",children:[v.jsx(wK,{className:"h-4 w-4"}),"My Designs"]})]}),E?.id!=="free"&&v.jsx("button",{type:"button",onClick:zt,disabled:nn,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:nn?"Assessing...":"Run Assessment"}),v.jsx(pd,{}),v.jsx("div",{className:"relative",children:s?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>W(!q),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[i?.picture?v.jsx("img",{src:i.picture,alt:i.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:i?.name?.[0]?.toUpperCase()||i?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:i?.name||i?.email}),v.jsx(lI,{className:"h-4 w-4"})]}),q&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:i?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:i?.email})]}),v.jsx("button",{type:"button",onClick:()=>{d(),W(!1),L(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>R(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),v.jsxs("div",{className:"flex-1 flex min-h-0",children:[v.jsx(Efe,{components:su,onAdd:ti}),v.jsx(kfe,{reactFlowWrapperRef:Rt,nodes:he,edges:we,nodeTypes:jr,edgeTypes:Hfe,onNodesChange:Oe,onEdgesChange:Ce,onConnect:ft,onDragOver:Zr,onDrop:ho,onNodeDragStop:ss}),v.jsx(Nfe,{problem:E,activeTab:Aa,setActiveTab:Rr,inspectedNodeId:Re,setInspectedNodeId:Ln,propertyElements:dr,customPropertyElements:Ei,onAddCustomProperty:vo,handleSave:xo,assessmentResult:cr,onDetachFromGroup:fn,isNodeInGroup:Re?he.find(te=>te.id===Re)?.parentId!==void 0:!1})]}),Ci&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:_a,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:kt,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),v.jsx(Zp,{isOpen:D,onClose:()=>R(!1),onLogin:async(te,J)=>{await o({email:te,password:J})},onSignup:async(te,J,ue)=>{await l({email:te,password:J,name:ue})},onGoogleLogin:u}),v.jsx(jfe,{isOpen:P,onClose:()=>$(!1),diagrams:V,onLoad:fs,onDelete:hs,isLoading:Y}),v.jsx(Ife,{toasts:h.toasts,onClose:h.removeToast}),y&&v.jsx(Bfe,{isOpen:p,onClose:()=>g(!1),title:y.title,label:y.label,placeholder:y.placeholder,defaultValue:y.defaultValue,type:y.type,required:y.required,onConfirm:y.onConfirm})]})]})},Gfe=()=>v.jsx(Oq,{children:v.jsx($fe,{})}),Kfe=()=>(xa(),v.jsx(C9,{children:v.jsx(a9,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsxs(i9,{children:[v.jsx(qo,{path:"/",element:v.jsx(t_,{})}),v.jsx(qo,{path:"/problems",element:v.jsx(dY,{})}),v.jsx(qo,{path:"/create-problem",element:v.jsx(fte,{})}),v.jsx(qo,{path:"/diagrams",element:v.jsx(hte,{})}),v.jsx(qo,{path:"/playground/:id",element:v.jsx(Gfe,{})}),v.jsx(qo,{path:"*",element:v.jsx(t_,{})})]})})}));uF.createRoot(document.getElementById("root")).render(v.jsx(O.StrictMode,{children:v.jsx(Kfe,{})}));
