function GH(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Gy={exports:{}},Yc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA;function KH(){if(wA)return Yc;wA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Yc.Fragment=t,Yc.jsx=n,Yc.jsxs=n,Yc}var SA;function YH(){return SA||(SA=1,Gy.exports=KH()),Gy.exports}var v=YH(),Ky={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA;function WH(){if(EA)return Fe;EA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=p&&P[p]||P["@@iterator"],typeof P=="function"?P:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(P,G,ee){this.props=P,this.context=G,this.refs=S,this.updater=ee||y}w.prototype.isReactComponent={},w.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},w.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function C(){}C.prototype=w.prototype;function N(P,G,ee){this.props=P,this.context=G,this.refs=S,this.updater=ee||y}var k=N.prototype=new C;k.constructor=N,x(k,w.prototype),k.isPureReactComponent=!0;var T=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function D(P,G,ee,se,H,W){return ee=W.ref,{$$typeof:e,type:P,key:G,ref:ee!==void 0?ee:null,props:W}}function R(P,G){return D(P.type,G,void 0,void 0,void 0,P.props)}function B(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function U(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ee){return G[ee]})}var z=/\/+/g;function V(P,G){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):G.toString(36)}function Y(){}function I(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Y,Y):(P.status="pending",P.then(function(G){P.status==="pending"&&(P.status="fulfilled",P.value=G)},function(G){P.status==="pending"&&(P.status="rejected",P.reason=G)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function $(P,G,ee,se,H){var W=typeof P;(W==="undefined"||W==="boolean")&&(P=null);var Z=!1;if(P===null)Z=!0;else switch(W){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(P.$$typeof){case e:case t:Z=!0;break;case h:return Z=P._init,$(Z(P._payload),G,ee,se,H)}}if(Z)return H=H(P),Z=se===""?"."+V(P,0):se,T(H)?(ee="",Z!=null&&(ee=Z.replace(z,"$&/")+"/"),$(H,G,ee,"",function(ge){return ge})):H!=null&&(B(H)&&(H=R(H,ee+(H.key==null||P&&P.key===H.key?"":(""+H.key).replace(z,"$&/")+"/")+Z)),G.push(H)),1;Z=0;var ce=se===""?".":se+":";if(T(P))for(var le=0;le<P.length;le++)se=P[le],W=ce+V(se,le),Z+=$(se,G,ee,W,H);else if(le=g(P),typeof le=="function")for(P=le.call(P),le=0;!(se=P.next()).done;)se=se.value,W=ce+V(se,le++),Z+=$(se,G,ee,W,H);else if(W==="object"){if(typeof P.then=="function")return $(I(P),G,ee,se,H);throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Z}function L(P,G,ee){if(P==null)return P;var se=[],H=0;return $(P,se,"","",function(W){return G.call(ee,W,H++)}),se}function q(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(ee){(P._status===0||P._status===-1)&&(P._status=1,P._result=ee)},function(ee){(P._status===0||P._status===-1)&&(P._status=2,P._result=ee)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var X=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function J(){}return Fe.Children={map:L,forEach:function(P,G,ee){L(P,function(){G.apply(this,arguments)},ee)},count:function(P){var G=0;return L(P,function(){G++}),G},toArray:function(P){return L(P,function(G){return G})||[]},only:function(P){if(!B(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Fe.Component=w,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=N,Fe.StrictMode=r,Fe.Suspense=u,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return A.H.useMemoCache(P)}},Fe.cache=function(P){return function(){return P.apply(null,arguments)}},Fe.cloneElement=function(P,G,ee){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var se=x({},P.props),H=P.key,W=void 0;if(G!=null)for(Z in G.ref!==void 0&&(W=void 0),G.key!==void 0&&(H=""+G.key),G)!_.call(G,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&G.ref===void 0||(se[Z]=G[Z]);var Z=arguments.length-2;if(Z===1)se.children=ee;else if(1<Z){for(var ce=Array(Z),le=0;le<Z;le++)ce[le]=arguments[le+2];se.children=ce}return D(P.type,H,void 0,void 0,W,se)},Fe.createContext=function(P){return P={$$typeof:o,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Fe.createElement=function(P,G,ee){var se,H={},W=null;if(G!=null)for(se in G.key!==void 0&&(W=""+G.key),G)_.call(G,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(H[se]=G[se]);var Z=arguments.length-2;if(Z===1)H.children=ee;else if(1<Z){for(var ce=Array(Z),le=0;le<Z;le++)ce[le]=arguments[le+2];H.children=ce}if(P&&P.defaultProps)for(se in Z=P.defaultProps,Z)H[se]===void 0&&(H[se]=Z[se]);return D(P,W,void 0,void 0,null,H)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(P){return{$$typeof:l,render:P}},Fe.isValidElement=B,Fe.lazy=function(P){return{$$typeof:h,_payload:{_status:-1,_result:P},_init:q}},Fe.memo=function(P,G){return{$$typeof:d,type:P,compare:G===void 0?null:G}},Fe.startTransition=function(P){var G=A.T,ee={};A.T=ee;try{var se=P(),H=A.S;H!==null&&H(ee,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(J,X)}catch(W){X(W)}finally{A.T=G}},Fe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Fe.use=function(P){return A.H.use(P)},Fe.useActionState=function(P,G,ee){return A.H.useActionState(P,G,ee)},Fe.useCallback=function(P,G){return A.H.useCallback(P,G)},Fe.useContext=function(P){return A.H.useContext(P)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(P,G){return A.H.useDeferredValue(P,G)},Fe.useEffect=function(P,G,ee){var se=A.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(P,G)},Fe.useId=function(){return A.H.useId()},Fe.useImperativeHandle=function(P,G,ee){return A.H.useImperativeHandle(P,G,ee)},Fe.useInsertionEffect=function(P,G){return A.H.useInsertionEffect(P,G)},Fe.useLayoutEffect=function(P,G){return A.H.useLayoutEffect(P,G)},Fe.useMemo=function(P,G){return A.H.useMemo(P,G)},Fe.useOptimistic=function(P,G){return A.H.useOptimistic(P,G)},Fe.useReducer=function(P,G,ee){return A.H.useReducer(P,G,ee)},Fe.useRef=function(P){return A.H.useRef(P)},Fe.useState=function(P){return A.H.useState(P)},Fe.useSyncExternalStore=function(P,G,ee){return A.H.useSyncExternalStore(P,G,ee)},Fe.useTransition=function(){return A.H.useTransition()},Fe.version="19.1.1",Fe}var CA;function ad(){return CA||(CA=1,Ky.exports=WH()),Ky.exports}var j=ad();const Pe=od(j),XH=GH({__proto__:null,default:Pe},[j]);var Yy={exports:{}},Wc={},Wy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA;function ZH(){return kA||(kA=1,(function(e){function t(L,q){var X=L.length;L.push(q);e:for(;0<X;){var J=X-1>>>1,P=L[J];if(0<i(P,q))L[J]=q,L[X]=P,X=J;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],X=L.pop();if(X!==q){L[0]=X;e:for(var J=0,P=L.length,G=P>>>1;J<G;){var ee=2*(J+1)-1,se=L[ee],H=ee+1,W=L[H];if(0>i(se,X))H<P&&0>i(W,se)?(L[J]=W,L[H]=X,J=H):(L[J]=se,L[ee]=X,J=ee);else if(H<P&&0>i(W,X))L[J]=W,L[H]=X,J=H;else break e}}return q}function i(L,q){var X=L.sortIndex-q.sortIndex;return X!==0?X:L.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,y=!1,x=!1,S=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(L){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=L)r(d),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(d)}}function A(L){if(S=!1,T(L),!x)if(n(u)!==null)x=!0,_||(_=!0,V());else{var q=n(d);q!==null&&$(A,q.startTime-L)}}var _=!1,D=-1,R=5,B=-1;function U(){return w?!0:!(e.unstable_now()-B<R)}function z(){if(w=!1,_){var L=e.unstable_now();B=L;var q=!0;try{e:{x=!1,S&&(S=!1,N(D),D=-1),y=!0;var X=g;try{t:{for(T(L),p=n(u);p!==null&&!(p.expirationTime>L&&U());){var J=p.callback;if(typeof J=="function"){p.callback=null,g=p.priorityLevel;var P=J(p.expirationTime<=L);if(L=e.unstable_now(),typeof P=="function"){p.callback=P,T(L),q=!0;break t}p===n(u)&&r(u),T(L)}else r(u);p=n(u)}if(p!==null)q=!0;else{var G=n(d);G!==null&&$(A,G.startTime-L),q=!1}}break e}finally{p=null,g=X,y=!1}q=void 0}}finally{q?V():_=!1}}}var V;if(typeof k=="function")V=function(){k(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,I=Y.port2;Y.port1.onmessage=z,V=function(){I.postMessage(null)}}else V=function(){C(z,0)};function $(L,q){D=C(function(){L(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var X=g;g=q;try{return L()}finally{g=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var X=g;g=L;try{return q()}finally{g=X}},e.unstable_scheduleCallback=function(L,q,X){var J=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?J+X:J):X=J,L){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=X+P,L={id:h++,callback:q,priorityLevel:L,startTime:X,expirationTime:P,sortIndex:-1},X>J?(L.sortIndex=X,t(d,L),n(u)===null&&L===n(d)&&(S?(N(D),D=-1):S=!0,$(A,X-J))):(L.sortIndex=P,t(u,L),x||y||(x=!0,_||(_=!0,V()))),L},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(L){var q=g;return function(){var X=g;g=q;try{return L.apply(this,arguments)}finally{g=X}}}})(Xy)),Xy}var TA;function QH(){return TA||(TA=1,Wy.exports=ZH()),Wy.exports}var Zy={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function JH(){if(NA)return Sn;NA=1;var e=ad();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sn.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},Sn.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Sn.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Sn.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Sn.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Sn.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Sn.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Sn.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Sn.requestFormReset=function(u){r.d.r(u)},Sn.unstable_batchedUpdates=function(u,d){return u(d)},Sn.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Sn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Sn.version="19.1.1",Sn}var AA;function lP(){if(AA)return Zy.exports;AA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zy.exports=JH(),Zy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function eF(){if(MA)return Wc;MA=1;var e=QH(),t=ad(),n=lP();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,m=c;;){var b=f.return;if(b===null)break;var E=b.alternate;if(E===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===f)return l(b),a;if(E===m)return l(b),c;E=E.sibling}throw Error(r(188))}if(f.return!==m.return)f=b,m=E;else{for(var M=!1,O=b.child;O;){if(O===f){M=!0,f=b,m=E;break}if(O===m){M=!0,m=b,f=E;break}O=O.sibling}if(!M){for(O=E.child;O;){if(O===f){M=!0,f=E,m=b;break}if(O===m){M=!0,m=E,f=b;break}O=O.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}var Y=Symbol.for("react.client.reference");function I(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Y?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case k:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case D:return c=a.displayName||null,c!==null?c:I(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return I(a(c))}catch{}}return null}var $=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},J=[],P=-1;function G(a){return{current:a}}function ee(a){0>P||(a.current=J[P],J[P]=null,P--)}function se(a,c){P++,J[P]=a.current,a.current=c}var H=G(null),W=G(null),Z=G(null),ce=G(null);function le(a,c){switch(se(Z,c),se(W,a),se(H,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?WN(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=WN(c),a=XN(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ee(H),se(H,a)}function ge(){ee(H),ee(W),ee(Z)}function we(a){a.memoizedState!==null&&se(ce,a);var c=H.current,f=XN(c,a.type);c!==f&&(se(W,a),se(H,f))}function _e(a){W.current===a&&(ee(H),ee(W)),ce.current===a&&(ee(ce),Fc._currentValue=X)}var ke=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,xe=e.unstable_cancelCallback,Te=e.unstable_shouldYield,et=e.unstable_requestPaint,Ae=e.unstable_now,Zt=e.unstable_getCurrentPriorityLevel,bn=e.unstable_ImmediatePriority,dr=e.unstable_UserBlockingPriority,xn=e.unstable_NormalPriority,Qt=e.unstable_LowPriority,ht=e.unstable_IdlePriority,fr=e.log,je=e.unstable_setDisableYieldValue,Kt=null,dt=null;function Rt(a){if(typeof fr=="function"&&je(a),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Kt,a)}catch{}}var Ct=Math.clz32?Math.clz32:hr,Kn=Math.log,ro=Math.LN2;function hr(a){return a>>>=0,a===0?32:31-(Kn(a)/ro|0)|0}var un=256,Jt=4194304;function Yn(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function vi(a,c,f){var m=a.pendingLanes;if(m===0)return 0;var b=0,E=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var O=m&134217727;return O!==0?(m=O&~E,m!==0?b=Yn(m):(M&=O,M!==0?b=Yn(M):f||(f=O&~a,f!==0&&(b=Yn(f))))):(O=m&~E,O!==0?b=Yn(O):M!==0?b=Yn(M):f||(f=m&~a,f!==0&&(b=Yn(f)))),b===0?0:c!==0&&c!==b&&(c&E)===0&&(E=b&-b,f=c&-c,E>=f||E===32&&(f&4194048)!==0)?c:b}function Wr(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function Zl(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function io(){var a=un;return un<<=1,(un&4194048)===0&&(un=256),a}function bi(){var a=Jt;return Jt<<=1,(Jt&62914560)===0&&(Jt=4194304),a}function so(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function xi(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function xa(a,c,f,m,b,E){var M=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var O=a.entanglements,F=a.expirationTimes,re=a.hiddenUpdates;for(f=M&~f;0<f;){var ue=31-Ct(f),fe=1<<ue;O[ue]=0,F[ue]=-1;var oe=re[ue];if(oe!==null)for(re[ue]=null,ue=0;ue<oe.length;ue++){var ae=oe[ue];ae!==null&&(ae.lane&=-536870913)}f&=~fe}m!==0&&wa(a,m,0),E!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=E&~(M&~c))}function wa(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var m=31-Ct(c);a.entangledLanes|=c,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function oo(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var m=31-Ct(f),b=1<<m;b&c|a[m]&c&&(a[m]|=c),f&=~b}}function ao(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function lo(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Sa(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:mA(a.type))}function ns(a,c){var f=q.p;try{return q.p=a,c()}finally{q.p=f}}var jn=Math.random().toString(36).slice(2),It="__reactFiber$"+jn,en="__reactProps$"+jn,Xr="__reactContainer$"+jn,co="__reactEvents$"+jn,Ql="__reactListeners$"+jn,uo="__reactHandles$"+jn,Ea="__reactResources$"+jn,wi="__reactMarker$"+jn;function fo(a){delete a[It],delete a[en],delete a[co],delete a[Ql],delete a[uo]}function Zr(a){var c=a[It];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Xr]||f[It]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=eA(a);a!==null;){if(f=a[It])return f;a=eA(a)}return c}a=f,f=a.parentNode}return null}function pr(a){if(a=a[It]||a[Xr]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Qr(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Pr(a){var c=a[Ea];return c||(c=a[Ea]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function kt(a){a[wi]=!0}var Ca=new Set,ka={};function ie(a,c){ne(a,c),ne(a+"Capture",c)}function ne(a,c){for(ka[a]=c,a=0;a<c.length;a++)Ca.add(c[a])}var he=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ve={},ye={};function Ce(a){return ke.call(ye,a)?!0:ke.call(ve,a)?!1:he.test(a)?ye[a]=!0:(ve[a]=!0,!1)}function Be(a,c,f){if(Ce(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function He(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function lt(a,c,f,m){if(m===null)a.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+m)}}var Nn,mr;function tn(a){if(Nn===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Nn=c&&c[1]||"",mr=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nn+a+mr}var Xe=!1;function Ot(a,c){if(!a||Xe)return"";Xe=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var oe=ae}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(ae){oe=ae}a.call(fe.prototype)}}else{try{throw Error()}catch(ae){oe=ae}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&oe&&typeof ae.stack=="string")return[ae.stack,oe.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),M=E[0],O=E[1];if(M&&O){var F=M.split(`
`),re=O.split(`
`);for(b=m=0;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;for(;b<re.length&&!re[b].includes("DetermineComponentFrameRoot");)b++;if(m===F.length||b===re.length)for(m=F.length-1,b=re.length-1;1<=m&&0<=b&&F[m]!==re[b];)b--;for(;1<=m&&0<=b;m--,b--)if(F[m]!==re[b]){if(m!==1||b!==1)do if(m--,b--,0>b||F[m]!==re[b]){var ue=`
`+F[m].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=m&&0<=b);break}}}finally{Xe=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?tn(f):""}function Jl(a){switch(a.tag){case 26:case 27:case 5:return tn(a.type);case 16:return tn("Lazy");case 13:return tn("Suspense");case 19:return tn("SuspenseList");case 0:case 15:return Ot(a.type,!1);case 11:return Ot(a.type.render,!1);case 1:return Ot(a.type,!0);case 31:return tn("Activity");default:return""}}function _d(a){try{var c="";do c+=Jl(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Ln(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Dd(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Fm(a){var c=Dd(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),m=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,E=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(M){m=""+M,E.call(this,M)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ta(a){a._valueTracker||(a._valueTracker=Fm(a))}function ec(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return a&&(m=Dd(a)?a.checked?"true":"false":a.value),a=m,a!==f?(c.setValue(a),!0):!1}function Na(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Um=/[\n"\\]/g;function Pn(a){return a.replace(Um,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function ho(a,c,f,m,b,E,M,O){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),c!=null?M==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Ln(c)):a.value!==""+Ln(c)&&(a.value=""+Ln(c)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),c!=null?tc(a,M,Ln(c)):f!=null?tc(a,M,Ln(f)):m!=null&&a.removeAttribute("value"),b==null&&E!=null&&(a.defaultChecked=!!E),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+Ln(O):a.removeAttribute("name")}function Rd(a,c,f,m,b,E,M,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.type=E),c!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;f=f!=null?""+Ln(f):"",c=c!=null?""+Ln(c):f,O||c===a.value||(a.value=c),a.defaultValue=c}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=O?a.checked:!!m,a.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M)}function tc(a,c,f){c==="number"&&Na(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Si(a,c,f,m){if(a=a.options,c){c={};for(var b=0;b<f.length;b++)c["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=c.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&m&&(a[f].defaultSelected=!0)}else{for(f=""+Ln(f),c=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Kk(a,c,f){if(c!=null&&(c=""+Ln(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+Ln(f):""}function Yk(a,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(r(92));if($(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=Ln(c),a.defaultValue=f,m=a.textContent,m===f&&m!==""&&m!==null&&(a.value=m)}function Aa(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var FV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wk(a,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":m?a.setProperty(c,f):typeof f!="number"||f===0||FV.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Xk(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var b in c)m=c[b],c.hasOwnProperty(b)&&f[b]!==m&&Wk(a,b,m)}else for(var E in c)c.hasOwnProperty(E)&&Wk(a,E,c[E])}function $m(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$V=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Od(a){return $V.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Gm=null;function Km(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ma=null,_a=null;function Zk(a){var c=pr(a);if(c&&(a=c.stateNode)){var f=a[en]||null;e:switch(a=c.stateNode,c.type){case"input":if(ho(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Pn(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==a&&m.form===a.form){var b=m[en]||null;if(!b)throw Error(r(90));ho(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===a.form&&ec(m)}break e;case"textarea":Kk(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Si(a,!!f.multiple,c,!1)}}}var Ym=!1;function Qk(a,c,f){if(Ym)return a(c,f);Ym=!0;try{var m=a(c);return m}finally{if(Ym=!1,(Ma!==null||_a!==null)&&(bf(),Ma&&(c=Ma,a=_a,_a=Ma=null,Zk(c),a)))for(c=0;c<a.length;c++)Zk(a[c])}}function nc(a,c){var f=a.stateNode;if(f===null)return null;var m=f[en]||null;if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wm=!1;if(Ei)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){Wm=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{Wm=!1}var rs=null,Xm=null,jd=null;function Jk(){if(jd)return jd;var a,c=Xm,f=c.length,m,b="value"in rs?rs.value:rs.textContent,E=b.length;for(a=0;a<f&&c[a]===b[a];a++);var M=f-a;for(m=1;m<=M&&c[f-m]===b[E-m];m++);return jd=b.slice(a,1<m?1-m:void 0)}function Ld(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Pd(){return!0}function e2(){return!1}function Bn(a){function c(f,m,b,E,M){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(f=a[O],this[O]=f?f(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Pd:e2,this.isPropagationStopped=e2,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Pd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Pd)},persist:function(){},isPersistent:Pd}),c}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bd=Bn(po),ic=h({},po,{view:0,detail:0}),GV=Bn(ic),Zm,Qm,sc,Id=h({},ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==sc&&(sc&&a.type==="mousemove"?(Zm=a.screenX-sc.screenX,Qm=a.screenY-sc.screenY):Qm=Zm=0,sc=a),Zm)},movementY:function(a){return"movementY"in a?a.movementY:Qm}}),t2=Bn(Id),KV=h({},Id,{dataTransfer:0}),YV=Bn(KV),WV=h({},ic,{relatedTarget:0}),Jm=Bn(WV),XV=h({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),ZV=Bn(XV),QV=h({},po,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),JV=Bn(QV),e8=h({},po,{data:0}),n2=Bn(e8),t8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i8(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=r8[a])?!!c[a]:!1}function eg(){return i8}var s8=h({},ic,{key:function(a){if(a.key){var c=t8[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Ld(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?n8[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eg,charCode:function(a){return a.type==="keypress"?Ld(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Ld(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),o8=Bn(s8),a8=h({},Id,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r2=Bn(a8),l8=h({},ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eg}),c8=Bn(l8),u8=h({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),d8=Bn(u8),f8=h({},Id,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),h8=Bn(f8),p8=h({},po,{newState:0,oldState:0}),m8=Bn(p8),g8=[9,13,27,32],tg=Ei&&"CompositionEvent"in window,oc=null;Ei&&"documentMode"in document&&(oc=document.documentMode);var y8=Ei&&"TextEvent"in window&&!oc,i2=Ei&&(!tg||oc&&8<oc&&11>=oc),s2=" ",o2=!1;function a2(a,c){switch(a){case"keyup":return g8.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Da=!1;function v8(a,c){switch(a){case"compositionend":return l2(c);case"keypress":return c.which!==32?null:(o2=!0,s2);case"textInput":return a=c.data,a===s2&&o2?null:a;default:return null}}function b8(a,c){if(Da)return a==="compositionend"||!tg&&a2(a,c)?(a=Jk(),jd=Xm=rs=null,Da=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return i2&&c.locale!=="ko"?null:c.data;default:return null}}var x8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c2(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!x8[a.type]:c==="textarea"}function u2(a,c,f,m){Ma?_a?_a.push(m):_a=[m]:Ma=m,c=kf(c,"onChange"),0<c.length&&(f=new Bd("onChange","change",null,f,m),a.push({event:f,listeners:c}))}var ac=null,lc=null;function w8(a){UN(a,0)}function zd(a){var c=Qr(a);if(ec(c))return a}function d2(a,c){if(a==="change")return c}var f2=!1;if(Ei){var ng;if(Ei){var rg="oninput"in document;if(!rg){var h2=document.createElement("div");h2.setAttribute("oninput","return;"),rg=typeof h2.oninput=="function"}ng=rg}else ng=!1;f2=ng&&(!document.documentMode||9<document.documentMode)}function p2(){ac&&(ac.detachEvent("onpropertychange",m2),lc=ac=null)}function m2(a){if(a.propertyName==="value"&&zd(lc)){var c=[];u2(c,lc,a,Km(a)),Qk(w8,c)}}function S8(a,c,f){a==="focusin"?(p2(),ac=c,lc=f,ac.attachEvent("onpropertychange",m2)):a==="focusout"&&p2()}function E8(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return zd(lc)}function C8(a,c){if(a==="click")return zd(c)}function k8(a,c){if(a==="input"||a==="change")return zd(c)}function T8(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Wn=typeof Object.is=="function"?Object.is:T8;function cc(a,c){if(Wn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!ke.call(c,b)||!Wn(a[b],c[b]))return!1}return!0}function g2(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function y2(a,c){var f=g2(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=c&&m>=c)return{node:f,offset:c-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=g2(f)}}function v2(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?v2(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function b2(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Na(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Na(a.document)}return c}function ig(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var N8=Ei&&"documentMode"in document&&11>=document.documentMode,Ra=null,sg=null,uc=null,og=!1;function x2(a,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;og||Ra==null||Ra!==Na(m)||(m=Ra,"selectionStart"in m&&ig(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),uc&&cc(uc,m)||(uc=m,m=kf(sg,"onSelect"),0<m.length&&(c=new Bd("onSelect","select",null,c,f),a.push({event:c,listeners:m}),c.target=Ra)))}function mo(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var Oa={animationend:mo("Animation","AnimationEnd"),animationiteration:mo("Animation","AnimationIteration"),animationstart:mo("Animation","AnimationStart"),transitionrun:mo("Transition","TransitionRun"),transitionstart:mo("Transition","TransitionStart"),transitioncancel:mo("Transition","TransitionCancel"),transitionend:mo("Transition","TransitionEnd")},ag={},w2={};Ei&&(w2=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function go(a){if(ag[a])return ag[a];if(!Oa[a])return a;var c=Oa[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in w2)return ag[a]=c[f];return a}var S2=go("animationend"),E2=go("animationiteration"),C2=go("animationstart"),A8=go("transitionrun"),M8=go("transitionstart"),_8=go("transitioncancel"),k2=go("transitionend"),T2=new Map,lg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lg.push("scrollEnd");function Br(a,c){T2.set(a,c),ie(c,[a])}var N2=new WeakMap;function gr(a,c){if(typeof a=="object"&&a!==null){var f=N2.get(a);return f!==void 0?f:(c={value:a,source:c,stack:_d(c)},N2.set(a,c),c)}return{value:a,source:c,stack:_d(c)}}var yr=[],ja=0,cg=0;function qd(){for(var a=ja,c=cg=ja=0;c<a;){var f=yr[c];yr[c++]=null;var m=yr[c];yr[c++]=null;var b=yr[c];yr[c++]=null;var E=yr[c];if(yr[c++]=null,m!==null&&b!==null){var M=m.pending;M===null?b.next=b:(b.next=M.next,M.next=b),m.pending=b}E!==0&&A2(f,b,E)}}function Vd(a,c,f,m){yr[ja++]=a,yr[ja++]=c,yr[ja++]=f,yr[ja++]=m,cg|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function ug(a,c,f,m){return Vd(a,c,f,m),Hd(a)}function La(a,c){return Vd(a,null,null,c),Hd(a)}function A2(a,c,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var b=!1,E=a.return;E!==null;)E.childLanes|=f,m=E.alternate,m!==null&&(m.childLanes|=f),E.tag===22&&(a=E.stateNode,a===null||a._visibility&1||(b=!0)),a=E,E=E.return;return a.tag===3?(E=a.stateNode,b&&c!==null&&(b=31-Ct(f),a=E.hiddenUpdates,m=a[b],m===null?a[b]=[c]:m.push(c),c.lane=f|536870912),E):null}function Hd(a){if(50<Lc)throw Lc=0,gy=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Pa={};function D8(a,c,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(a,c,f,m){return new D8(a,c,f,m)}function dg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ci(a,c){var f=a.alternate;return f===null?(f=Xn(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function M2(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Fd(a,c,f,m,b,E){var M=0;if(m=a,typeof a=="function")dg(a)&&(M=1);else if(typeof a=="string")M=OH(a,f,H.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Xn(31,f,c,b),a.elementType=B,a.lanes=E,a;case x:return yo(f.children,b,E,c);case S:M=8,b|=24;break;case w:return a=Xn(12,f,c,b|2),a.elementType=w,a.lanes=E,a;case A:return a=Xn(13,f,c,b),a.elementType=A,a.lanes=E,a;case _:return a=Xn(19,f,c,b),a.elementType=_,a.lanes=E,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:case k:M=10;break e;case N:M=9;break e;case T:M=11;break e;case D:M=14;break e;case R:M=16,m=null;break e}M=29,f=Error(r(130,a===null?"null":typeof a,"")),m=null}return c=Xn(M,f,c,b),c.elementType=a,c.type=m,c.lanes=E,c}function yo(a,c,f,m){return a=Xn(7,a,m,c),a.lanes=f,a}function fg(a,c,f){return a=Xn(6,a,null,c),a.lanes=f,a}function hg(a,c,f){return c=Xn(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Ba=[],Ia=0,Ud=null,$d=0,vr=[],br=0,vo=null,ki=1,Ti="";function bo(a,c){Ba[Ia++]=$d,Ba[Ia++]=Ud,Ud=a,$d=c}function _2(a,c,f){vr[br++]=ki,vr[br++]=Ti,vr[br++]=vo,vo=a;var m=ki;a=Ti;var b=32-Ct(m)-1;m&=~(1<<b),f+=1;var E=32-Ct(c)+b;if(30<E){var M=b-b%5;E=(m&(1<<M)-1).toString(32),m>>=M,b-=M,ki=1<<32-Ct(c)+b|f<<b|m,Ti=E+a}else ki=1<<E|f<<b|m,Ti=a}function pg(a){a.return!==null&&(bo(a,1),_2(a,1,0))}function mg(a){for(;a===Ud;)Ud=Ba[--Ia],Ba[Ia]=null,$d=Ba[--Ia],Ba[Ia]=null;for(;a===vo;)vo=vr[--br],vr[br]=null,Ti=vr[--br],vr[br]=null,ki=vr[--br],vr[br]=null}var An=null,Tt=null,tt=!1,xo=null,Jr=!1,gg=Error(r(519));function wo(a){var c=Error(r(418,""));throw hc(gr(c,a)),gg}function D2(a){var c=a.stateNode,f=a.type,m=a.memoizedProps;switch(c[It]=a,c[en]=m,f){case"dialog":We("cancel",c),We("close",c);break;case"iframe":case"object":case"embed":We("load",c);break;case"video":case"audio":for(f=0;f<Bc.length;f++)We(Bc[f],c);break;case"source":We("error",c);break;case"img":case"image":case"link":We("error",c),We("load",c);break;case"details":We("toggle",c);break;case"input":We("invalid",c),Rd(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Ta(c);break;case"select":We("invalid",c);break;case"textarea":We("invalid",c),Yk(c,m.value,m.defaultValue,m.children),Ta(c)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||YN(c.textContent,f)?(m.popover!=null&&(We("beforetoggle",c),We("toggle",c)),m.onScroll!=null&&We("scroll",c),m.onScrollEnd!=null&&We("scrollend",c),m.onClick!=null&&(c.onclick=Tf),c=!0):c=!1,c||wo(a)}function R2(a){for(An=a.return;An;)switch(An.tag){case 5:case 13:Jr=!1;return;case 27:case 3:Jr=!0;return;default:An=An.return}}function dc(a){if(a!==An)return!1;if(!tt)return R2(a),tt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Ry(a.type,a.memoizedProps)),f=!f),f&&Tt&&wo(a),R2(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Tt=zr(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Tt=null}}else c===27?(c=Tt,xs(a.type)?(a=Py,Py=null,Tt=a):Tt=c):Tt=An?zr(a.stateNode.nextSibling):null;return!0}function fc(){Tt=An=null,tt=!1}function O2(){var a=xo;return a!==null&&(qn===null?qn=a:qn.push.apply(qn,a),xo=null),a}function hc(a){xo===null?xo=[a]:xo.push(a)}var yg=G(null),So=null,Ni=null;function is(a,c,f){se(yg,c._currentValue),c._currentValue=f}function Ai(a){a._currentValue=yg.current,ee(yg)}function vg(a,c,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),a===f)break;a=a.return}}function bg(a,c,f,m){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var E=b.dependencies;if(E!==null){var M=b.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=b;for(var F=0;F<c.length;F++)if(O.context===c[F]){E.lanes|=f,O=E.alternate,O!==null&&(O.lanes|=f),vg(E.return,f,a),m||(M=null);break e}E=O.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=f,E=M.alternate,E!==null&&(E.lanes|=f),vg(M,f,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function pc(a,c,f,m){a=null;for(var b=c,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var O=b.type;Wn(b.pendingProps.value,M.value)||(a!==null?a.push(O):a=[O])}}else if(b===ce.current){if(M=b.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(Fc):a=[Fc])}b=b.return}a!==null&&bg(c,a,f,m),c.flags|=262144}function Gd(a){for(a=a.firstContext;a!==null;){if(!Wn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Eo(a){So=a,Ni=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wn(a){return j2(So,a)}function Kd(a,c){return So===null&&Eo(a),j2(a,c)}function j2(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Ni===null){if(a===null)throw Error(r(308));Ni=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Ni=Ni.next=c;return f}var R8=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},O8=e.unstable_scheduleCallback,j8=e.unstable_NormalPriority,Yt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xg(){return{controller:new R8,data:new Map,refCount:0}}function mc(a){a.refCount--,a.refCount===0&&O8(j8,function(){a.controller.abort()})}var gc=null,wg=0,za=0,qa=null;function L8(a,c){if(gc===null){var f=gc=[];wg=0,za=Ey(),qa={status:"pending",value:void 0,then:function(m){f.push(m)}}}return wg++,c.then(L2,L2),c}function L2(){if(--wg===0&&gc!==null){qa!==null&&(qa.status="fulfilled");var a=gc;gc=null,za=0,qa=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function P8(a,c){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return a.then(function(){m.status="fulfilled",m.value=c;for(var b=0;b<f.length;b++)(0,f[b])(c)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var P2=L.S;L.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&L8(a,c),P2!==null&&P2(a,c)};var Co=G(null);function Sg(){var a=Co.current;return a!==null?a:ft.pooledCache}function Yd(a,c){c===null?se(Co,Co.current):se(Co,c.pool)}function B2(){var a=Sg();return a===null?null:{parent:Yt._currentValue,pool:a}}var yc=Error(r(460)),I2=Error(r(474)),Wd=Error(r(542)),Eg={then:function(){}};function z2(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Xd(){}function q2(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Xd,Xd),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,H2(a),a;default:if(typeof c.status=="string")c.then(Xd,Xd);else{if(a=ft,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(m){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=m}},function(m){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,H2(a),a}throw vc=c,yc}}var vc=null;function V2(){if(vc===null)throw Error(r(459));var a=vc;return vc=null,a}function H2(a){if(a===yc||a===Wd)throw Error(r(483))}var ss=!1;function Cg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kg(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function as(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ls(a,c,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(nt&2)!==0){var b=m.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),m.pending=c,c=Hd(a),A2(a,null,f),c}return Vd(a,m,c,f),Hd(a)}function bc(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,oo(a,f)}}function Tg(a,c){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var M={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?b=E=M:E=E.next=M,f=f.next}while(f!==null);E===null?b=E=c:E=E.next=c}else b=E=c;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var Ng=!1;function xc(){if(Ng){var a=qa;if(a!==null)throw a}}function wc(a,c,f,m){Ng=!1;var b=a.updateQueue;ss=!1;var E=b.firstBaseUpdate,M=b.lastBaseUpdate,O=b.shared.pending;if(O!==null){b.shared.pending=null;var F=O,re=F.next;F.next=null,M===null?E=re:M.next=re,M=F;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,O=ue.lastBaseUpdate,O!==M&&(O===null?ue.firstBaseUpdate=re:O.next=re,ue.lastBaseUpdate=F))}if(E!==null){var fe=b.baseState;M=0,ue=re=F=null,O=E;do{var oe=O.lane&-536870913,ae=oe!==O.lane;if(ae?(Qe&oe)===oe:(m&oe)===oe){oe!==0&&oe===za&&(Ng=!0),ue!==null&&(ue=ue.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ie=a,Oe=O;oe=c;var at=f;switch(Oe.tag){case 1:if(Ie=Oe.payload,typeof Ie=="function"){fe=Ie.call(at,fe,oe);break e}fe=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Oe.payload,oe=typeof Ie=="function"?Ie.call(at,fe,oe):Ie,oe==null)break e;fe=h({},fe,oe);break e;case 2:ss=!0}}oe=O.callback,oe!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=b.callbacks,ae===null?b.callbacks=[oe]:ae.push(oe))}else ae={lane:oe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ue===null?(re=ue=ae,F=fe):ue=ue.next=ae,M|=oe;if(O=O.next,O===null){if(O=b.shared.pending,O===null)break;ae=O,O=ae.next,ae.next=null,b.lastBaseUpdate=ae,b.shared.pending=null}}while(!0);ue===null&&(F=fe),b.baseState=F,b.firstBaseUpdate=re,b.lastBaseUpdate=ue,E===null&&(b.shared.lanes=0),gs|=M,a.lanes=M,a.memoizedState=fe}}function F2(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function U2(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)F2(f[a],c)}var Va=G(null),Zd=G(0);function $2(a,c){a=Li,se(Zd,a),se(Va,c),Li=a|c.baseLanes}function Ag(){se(Zd,Li),se(Va,Va.current)}function Mg(){Li=Zd.current,ee(Va),ee(Zd)}var cs=0,Ge=null,st=null,zt=null,Qd=!1,Ha=!1,ko=!1,Jd=0,Sc=0,Fa=null,B8=0;function jt(){throw Error(r(321))}function _g(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Wn(a[f],c[f]))return!1;return!0}function Dg(a,c,f,m,b,E){return cs=E,Ge=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,L.H=a===null||a.memoizedState===null?AT:MT,ko=!1,E=f(m,b),ko=!1,Ha&&(E=K2(c,f,m,b)),G2(a),E}function G2(a){L.H=of;var c=st!==null&&st.next!==null;if(cs=0,zt=st=Ge=null,Qd=!1,Sc=0,Fa=null,c)throw Error(r(300));a===null||nn||(a=a.dependencies,a!==null&&Gd(a)&&(nn=!0))}function K2(a,c,f,m){Ge=a;var b=0;do{if(Ha&&(Fa=null),Sc=0,Ha=!1,25<=b)throw Error(r(301));if(b+=1,zt=st=null,a.updateQueue!=null){var E=a.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}L.H=U8,E=c(f,m)}while(Ha);return E}function I8(){var a=L.H,c=a.useState()[0];return c=typeof c.then=="function"?Ec(c):c,a=a.useState()[0],(st!==null?st.memoizedState:null)!==a&&(Ge.flags|=1024),c}function Rg(){var a=Jd!==0;return Jd=0,a}function Og(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function jg(a){if(Qd){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Qd=!1}cs=0,zt=st=Ge=null,Ha=!1,Sc=Jd=0,Fa=null}function In(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ge.memoizedState=zt=a:zt=zt.next=a,zt}function qt(){if(st===null){var a=Ge.alternate;a=a!==null?a.memoizedState:null}else a=st.next;var c=zt===null?Ge.memoizedState:zt.next;if(c!==null)zt=c,st=a;else{if(a===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));st=a,a={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},zt===null?Ge.memoizedState=zt=a:zt=zt.next=a}return zt}function Lg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ec(a){var c=Sc;return Sc+=1,Fa===null&&(Fa=[]),a=q2(Fa,a,c),c=Ge,(zt===null?c.memoizedState:zt.next)===null&&(c=c.alternate,L.H=c===null||c.memoizedState===null?AT:MT),a}function ef(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ec(a);if(a.$$typeof===k)return wn(a)}throw Error(r(438,String(a)))}function Pg(a){var c=null,f=Ge.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=Ge.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Lg(),Ge.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),m=0;m<a;m++)f[m]=U;return c.index++,f}function Mi(a,c){return typeof c=="function"?c(a):c}function tf(a){var c=qt();return Bg(c,st,a)}function Bg(a,c,f){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var b=a.baseQueue,E=m.pending;if(E!==null){if(b!==null){var M=b.next;b.next=E.next,E.next=M}c.baseQueue=b=E,m.pending=null}if(E=a.baseState,b===null)a.memoizedState=E;else{c=b.next;var O=M=null,F=null,re=c,ue=!1;do{var fe=re.lane&-536870913;if(fe!==re.lane?(Qe&fe)===fe:(cs&fe)===fe){var oe=re.revertLane;if(oe===0)F!==null&&(F=F.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),fe===za&&(ue=!0);else if((cs&oe)===oe){re=re.next,oe===za&&(ue=!0);continue}else fe={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(O=F=fe,M=E):F=F.next=fe,Ge.lanes|=oe,gs|=oe;fe=re.action,ko&&f(E,fe),E=re.hasEagerState?re.eagerState:f(E,fe)}else oe={lane:fe,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(O=F=oe,M=E):F=F.next=oe,Ge.lanes|=fe,gs|=fe;re=re.next}while(re!==null&&re!==c);if(F===null?M=E:F.next=O,!Wn(E,a.memoizedState)&&(nn=!0,ue&&(f=qa,f!==null)))throw f;a.memoizedState=E,a.baseState=M,a.baseQueue=F,m.lastRenderedState=E}return b===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Ig(a){var c=qt(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var m=f.dispatch,b=f.pending,E=c.memoizedState;if(b!==null){f.pending=null;var M=b=b.next;do E=a(E,M.action),M=M.next;while(M!==b);Wn(E,c.memoizedState)||(nn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),f.lastRenderedState=E}return[E,m]}function Y2(a,c,f){var m=Ge,b=qt(),E=tt;if(E){if(f===void 0)throw Error(r(407));f=f()}else f=c();var M=!Wn((st||b).memoizedState,f);M&&(b.memoizedState=f,nn=!0),b=b.queue;var O=Z2.bind(null,m,b,a);if(Cc(2048,8,O,[a]),b.getSnapshot!==c||M||zt!==null&&zt.memoizedState.tag&1){if(m.flags|=2048,Ua(9,nf(),X2.bind(null,m,b,f,c),null),ft===null)throw Error(r(349));E||(cs&124)!==0||W2(m,c,f)}return f}function W2(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Ge.updateQueue,c===null?(c=Lg(),Ge.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function X2(a,c,f,m){c.value=f,c.getSnapshot=m,Q2(c)&&J2(a)}function Z2(a,c,f){return f(function(){Q2(c)&&J2(a)})}function Q2(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Wn(a,f)}catch{return!0}}function J2(a){var c=La(a,2);c!==null&&tr(c,a,2)}function zg(a){var c=In();if(typeof a=="function"){var f=a;if(a=f(),ko){Rt(!0);try{f()}finally{Rt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:a},c}function eT(a,c,f,m){return a.baseState=f,Bg(a,st,typeof m=="function"?m:Mi)}function z8(a,c,f,m,b){if(sf(a))throw Error(r(485));if(a=c.action,a!==null){var E={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){E.listeners.push(M)}};L.T!==null?f(!0):E.isTransition=!1,m(E),f=c.pending,f===null?(E.next=c.pending=E,tT(c,E)):(E.next=f.next,c.pending=f.next=E)}}function tT(a,c){var f=c.action,m=c.payload,b=a.state;if(c.isTransition){var E=L.T,M={};L.T=M;try{var O=f(b,m),F=L.S;F!==null&&F(M,O),nT(a,c,O)}catch(re){qg(a,c,re)}finally{L.T=E}}else try{E=f(b,m),nT(a,c,E)}catch(re){qg(a,c,re)}}function nT(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){rT(a,c,m)},function(m){return qg(a,c,m)}):rT(a,c,f)}function rT(a,c,f){c.status="fulfilled",c.value=f,iT(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,tT(a,f)))}function qg(a,c,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,iT(c),c=c.next;while(c!==m)}a.action=null}function iT(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function sT(a,c){return c}function oT(a,c){if(tt){var f=ft.formState;if(f!==null){e:{var m=Ge;if(tt){if(Tt){t:{for(var b=Tt,E=Jr;b.nodeType!==8;){if(!E){b=null;break t}if(b=zr(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){Tt=zr(b.nextSibling),m=b.data==="F!";break e}}wo(m)}m=!1}m&&(c=f[0])}}return f=In(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sT,lastRenderedState:c},f.queue=m,f=kT.bind(null,Ge,m),m.dispatch=f,m=zg(!1),E=$g.bind(null,Ge,!1,m.queue),m=In(),b={state:c,dispatch:null,action:a,pending:null},m.queue=b,f=z8.bind(null,Ge,b,E,f),b.dispatch=f,m.memoizedState=a,[c,f,!1]}function aT(a){var c=qt();return lT(c,st,a)}function lT(a,c,f){if(c=Bg(a,c,sT)[0],a=tf(Mi)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Ec(c)}catch(M){throw M===yc?Wd:M}else m=c;c=qt();var b=c.queue,E=b.dispatch;return f!==c.memoizedState&&(Ge.flags|=2048,Ua(9,nf(),q8.bind(null,b,f),null)),[m,E,a]}function q8(a,c){a.action=c}function cT(a){var c=qt(),f=st;if(f!==null)return lT(c,f,a);qt(),c=c.memoizedState,f=qt();var m=f.queue.dispatch;return f.memoizedState=a,[c,m,!1]}function Ua(a,c,f,m){return a={tag:a,create:f,deps:m,inst:c,next:null},c=Ge.updateQueue,c===null&&(c=Lg(),Ge.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,c.lastEffect=a),a}function nf(){return{destroy:void 0,resource:void 0}}function uT(){return qt().memoizedState}function rf(a,c,f,m){var b=In();m=m===void 0?null:m,Ge.flags|=a,b.memoizedState=Ua(1|c,nf(),f,m)}function Cc(a,c,f,m){var b=qt();m=m===void 0?null:m;var E=b.memoizedState.inst;st!==null&&m!==null&&_g(m,st.memoizedState.deps)?b.memoizedState=Ua(c,E,f,m):(Ge.flags|=a,b.memoizedState=Ua(1|c,E,f,m))}function dT(a,c){rf(8390656,8,a,c)}function fT(a,c){Cc(2048,8,a,c)}function hT(a,c){return Cc(4,2,a,c)}function pT(a,c){return Cc(4,4,a,c)}function mT(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function gT(a,c,f){f=f!=null?f.concat([a]):null,Cc(4,4,mT.bind(null,c,a),f)}function Vg(){}function yT(a,c){var f=qt();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&_g(c,m[1])?m[0]:(f.memoizedState=[a,c],a)}function vT(a,c){var f=qt();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&_g(c,m[1]))return m[0];if(m=a(),ko){Rt(!0);try{a()}finally{Rt(!1)}}return f.memoizedState=[m,c],m}function Hg(a,c,f){return f===void 0||(cs&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=wN(),Ge.lanes|=a,gs|=a,f)}function bT(a,c,f,m){return Wn(f,c)?f:Va.current!==null?(a=Hg(a,f,m),Wn(a,c)||(nn=!0),a):(cs&42)===0?(nn=!0,a.memoizedState=f):(a=wN(),Ge.lanes|=a,gs|=a,c)}function xT(a,c,f,m,b){var E=q.p;q.p=E!==0&&8>E?E:8;var M=L.T,O={};L.T=O,$g(a,!1,c,f);try{var F=b(),re=L.S;if(re!==null&&re(O,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ue=P8(F,m);kc(a,c,ue,er(a))}else kc(a,c,m,er(a))}catch(fe){kc(a,c,{then:function(){},status:"rejected",reason:fe},er())}finally{q.p=E,L.T=M}}function V8(){}function Fg(a,c,f,m){if(a.tag!==5)throw Error(r(476));var b=wT(a).queue;xT(a,b,c,X,f===null?V8:function(){return ST(a),f(m)})}function wT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:X},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function ST(a){var c=wT(a).next.queue;kc(a,c,{},er())}function Ug(){return wn(Fc)}function ET(){return qt().memoizedState}function CT(){return qt().memoizedState}function H8(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=er();a=as(f);var m=ls(c,a,f);m!==null&&(tr(m,c,f),bc(m,c,f)),c={cache:xg()},a.payload=c;return}c=c.return}}function F8(a,c,f){var m=er();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},sf(a)?TT(c,f):(f=ug(a,c,f,m),f!==null&&(tr(f,a,m),NT(f,c,m)))}function kT(a,c,f){var m=er();kc(a,c,f,m)}function kc(a,c,f,m){var b={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(sf(a))TT(c,b);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var M=c.lastRenderedState,O=E(M,f);if(b.hasEagerState=!0,b.eagerState=O,Wn(O,M))return Vd(a,c,b,0),ft===null&&qd(),!1}catch{}finally{}if(f=ug(a,c,b,m),f!==null)return tr(f,a,m),NT(f,c,m),!0}return!1}function $g(a,c,f,m){if(m={lane:2,revertLane:Ey(),action:m,hasEagerState:!1,eagerState:null,next:null},sf(a)){if(c)throw Error(r(479))}else c=ug(a,f,m,2),c!==null&&tr(c,a,2)}function sf(a){var c=a.alternate;return a===Ge||c!==null&&c===Ge}function TT(a,c){Ha=Qd=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function NT(a,c,f){if((f&4194048)!==0){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,oo(a,f)}}var of={readContext:wn,use:ef,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},AT={readContext:wn,use:ef,useCallback:function(a,c){return In().memoizedState=[a,c===void 0?null:c],a},useContext:wn,useEffect:dT,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,rf(4194308,4,mT.bind(null,c,a),f)},useLayoutEffect:function(a,c){return rf(4194308,4,a,c)},useInsertionEffect:function(a,c){rf(4,2,a,c)},useMemo:function(a,c){var f=In();c=c===void 0?null:c;var m=a();if(ko){Rt(!0);try{a()}finally{Rt(!1)}}return f.memoizedState=[m,c],m},useReducer:function(a,c,f){var m=In();if(f!==void 0){var b=f(c);if(ko){Rt(!0);try{f(c)}finally{Rt(!1)}}}else b=c;return m.memoizedState=m.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},m.queue=a,a=a.dispatch=F8.bind(null,Ge,a),[m.memoizedState,a]},useRef:function(a){var c=In();return a={current:a},c.memoizedState=a},useState:function(a){a=zg(a);var c=a.queue,f=kT.bind(null,Ge,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:Vg,useDeferredValue:function(a,c){var f=In();return Hg(f,a,c)},useTransition:function(){var a=zg(!1);return a=xT.bind(null,Ge,a.queue,!0,!1),In().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var m=Ge,b=In();if(tt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),ft===null)throw Error(r(349));(Qe&124)!==0||W2(m,c,f)}b.memoizedState=f;var E={value:f,getSnapshot:c};return b.queue=E,dT(Z2.bind(null,m,E,a),[a]),m.flags|=2048,Ua(9,nf(),X2.bind(null,m,E,f,c),null),f},useId:function(){var a=In(),c=ft.identifierPrefix;if(tt){var f=Ti,m=ki;f=(m&~(1<<32-Ct(m)-1)).toString(32)+f,c=""+c+"R"+f,f=Jd++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=B8++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:Ug,useFormState:oT,useActionState:oT,useOptimistic:function(a){var c=In();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=$g.bind(null,Ge,!0,f),f.dispatch=c,[a,c]},useMemoCache:Pg,useCacheRefresh:function(){return In().memoizedState=H8.bind(null,Ge)}},MT={readContext:wn,use:ef,useCallback:yT,useContext:wn,useEffect:fT,useImperativeHandle:gT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:vT,useReducer:tf,useRef:uT,useState:function(){return tf(Mi)},useDebugValue:Vg,useDeferredValue:function(a,c){var f=qt();return bT(f,st.memoizedState,a,c)},useTransition:function(){var a=tf(Mi)[0],c=qt().memoizedState;return[typeof a=="boolean"?a:Ec(a),c]},useSyncExternalStore:Y2,useId:ET,useHostTransitionStatus:Ug,useFormState:aT,useActionState:aT,useOptimistic:function(a,c){var f=qt();return eT(f,st,a,c)},useMemoCache:Pg,useCacheRefresh:CT},U8={readContext:wn,use:ef,useCallback:yT,useContext:wn,useEffect:fT,useImperativeHandle:gT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:vT,useReducer:Ig,useRef:uT,useState:function(){return Ig(Mi)},useDebugValue:Vg,useDeferredValue:function(a,c){var f=qt();return st===null?Hg(f,a,c):bT(f,st.memoizedState,a,c)},useTransition:function(){var a=Ig(Mi)[0],c=qt().memoizedState;return[typeof a=="boolean"?a:Ec(a),c]},useSyncExternalStore:Y2,useId:ET,useHostTransitionStatus:Ug,useFormState:cT,useActionState:cT,useOptimistic:function(a,c){var f=qt();return st!==null?eT(f,st,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Pg,useCacheRefresh:CT},$a=null,Tc=0;function af(a){var c=Tc;return Tc+=1,$a===null&&($a=[]),q2($a,a,c)}function Nc(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function lf(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function _T(a){var c=a._init;return c(a._payload)}function DT(a){function c(Q,K){if(a){var te=Q.deletions;te===null?(Q.deletions=[K],Q.flags|=16):te.push(K)}}function f(Q,K){if(!a)return null;for(;K!==null;)c(Q,K),K=K.sibling;return null}function m(Q){for(var K=new Map;Q!==null;)Q.key!==null?K.set(Q.key,Q):K.set(Q.index,Q),Q=Q.sibling;return K}function b(Q,K){return Q=Ci(Q,K),Q.index=0,Q.sibling=null,Q}function E(Q,K,te){return Q.index=te,a?(te=Q.alternate,te!==null?(te=te.index,te<K?(Q.flags|=67108866,K):te):(Q.flags|=67108866,K)):(Q.flags|=1048576,K)}function M(Q){return a&&Q.alternate===null&&(Q.flags|=67108866),Q}function O(Q,K,te,de){return K===null||K.tag!==6?(K=fg(te,Q.mode,de),K.return=Q,K):(K=b(K,te),K.return=Q,K)}function F(Q,K,te,de){var Se=te.type;return Se===x?ue(Q,K,te.props.children,de,te.key):K!==null&&(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&_T(Se)===K.type)?(K=b(K,te.props),Nc(K,te),K.return=Q,K):(K=Fd(te.type,te.key,te.props,null,Q.mode,de),Nc(K,te),K.return=Q,K)}function re(Q,K,te,de){return K===null||K.tag!==4||K.stateNode.containerInfo!==te.containerInfo||K.stateNode.implementation!==te.implementation?(K=hg(te,Q.mode,de),K.return=Q,K):(K=b(K,te.children||[]),K.return=Q,K)}function ue(Q,K,te,de,Se){return K===null||K.tag!==7?(K=yo(te,Q.mode,de,Se),K.return=Q,K):(K=b(K,te),K.return=Q,K)}function fe(Q,K,te){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=fg(""+K,Q.mode,te),K.return=Q,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case g:return te=Fd(K.type,K.key,K.props,null,Q.mode,te),Nc(te,K),te.return=Q,te;case y:return K=hg(K,Q.mode,te),K.return=Q,K;case R:var de=K._init;return K=de(K._payload),fe(Q,K,te)}if($(K)||V(K))return K=yo(K,Q.mode,te,null),K.return=Q,K;if(typeof K.then=="function")return fe(Q,af(K),te);if(K.$$typeof===k)return fe(Q,Kd(Q,K),te);lf(Q,K)}return null}function oe(Q,K,te,de){var Se=K!==null?K.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Se!==null?null:O(Q,K,""+te,de);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case g:return te.key===Se?F(Q,K,te,de):null;case y:return te.key===Se?re(Q,K,te,de):null;case R:return Se=te._init,te=Se(te._payload),oe(Q,K,te,de)}if($(te)||V(te))return Se!==null?null:ue(Q,K,te,de,null);if(typeof te.then=="function")return oe(Q,K,af(te),de);if(te.$$typeof===k)return oe(Q,K,Kd(Q,te),de);lf(Q,te)}return null}function ae(Q,K,te,de,Se){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Q=Q.get(te)||null,O(K,Q,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case g:return Q=Q.get(de.key===null?te:de.key)||null,F(K,Q,de,Se);case y:return Q=Q.get(de.key===null?te:de.key)||null,re(K,Q,de,Se);case R:var Ke=de._init;return de=Ke(de._payload),ae(Q,K,te,de,Se)}if($(de)||V(de))return Q=Q.get(te)||null,ue(K,Q,de,Se,null);if(typeof de.then=="function")return ae(Q,K,te,af(de),Se);if(de.$$typeof===k)return ae(Q,K,te,Kd(K,de),Se);lf(K,de)}return null}function Ie(Q,K,te,de){for(var Se=null,Ke=null,Me=K,Le=K=0,sn=null;Me!==null&&Le<te.length;Le++){Me.index>Le?(sn=Me,Me=null):sn=Me.sibling;var Je=oe(Q,Me,te[Le],de);if(Je===null){Me===null&&(Me=sn);break}a&&Me&&Je.alternate===null&&c(Q,Me),K=E(Je,K,Le),Ke===null?Se=Je:Ke.sibling=Je,Ke=Je,Me=sn}if(Le===te.length)return f(Q,Me),tt&&bo(Q,Le),Se;if(Me===null){for(;Le<te.length;Le++)Me=fe(Q,te[Le],de),Me!==null&&(K=E(Me,K,Le),Ke===null?Se=Me:Ke.sibling=Me,Ke=Me);return tt&&bo(Q,Le),Se}for(Me=m(Me);Le<te.length;Le++)sn=ae(Me,Q,Le,te[Le],de),sn!==null&&(a&&sn.alternate!==null&&Me.delete(sn.key===null?Le:sn.key),K=E(sn,K,Le),Ke===null?Se=sn:Ke.sibling=sn,Ke=sn);return a&&Me.forEach(function(ks){return c(Q,ks)}),tt&&bo(Q,Le),Se}function Oe(Q,K,te,de){if(te==null)throw Error(r(151));for(var Se=null,Ke=null,Me=K,Le=K=0,sn=null,Je=te.next();Me!==null&&!Je.done;Le++,Je=te.next()){Me.index>Le?(sn=Me,Me=null):sn=Me.sibling;var ks=oe(Q,Me,Je.value,de);if(ks===null){Me===null&&(Me=sn);break}a&&Me&&ks.alternate===null&&c(Q,Me),K=E(ks,K,Le),Ke===null?Se=ks:Ke.sibling=ks,Ke=ks,Me=sn}if(Je.done)return f(Q,Me),tt&&bo(Q,Le),Se;if(Me===null){for(;!Je.done;Le++,Je=te.next())Je=fe(Q,Je.value,de),Je!==null&&(K=E(Je,K,Le),Ke===null?Se=Je:Ke.sibling=Je,Ke=Je);return tt&&bo(Q,Le),Se}for(Me=m(Me);!Je.done;Le++,Je=te.next())Je=ae(Me,Q,Le,Je.value,de),Je!==null&&(a&&Je.alternate!==null&&Me.delete(Je.key===null?Le:Je.key),K=E(Je,K,Le),Ke===null?Se=Je:Ke.sibling=Je,Ke=Je);return a&&Me.forEach(function($H){return c(Q,$H)}),tt&&bo(Q,Le),Se}function at(Q,K,te,de){if(typeof te=="object"&&te!==null&&te.type===x&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case g:e:{for(var Se=te.key;K!==null;){if(K.key===Se){if(Se=te.type,Se===x){if(K.tag===7){f(Q,K.sibling),de=b(K,te.props.children),de.return=Q,Q=de;break e}}else if(K.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&_T(Se)===K.type){f(Q,K.sibling),de=b(K,te.props),Nc(de,te),de.return=Q,Q=de;break e}f(Q,K);break}else c(Q,K);K=K.sibling}te.type===x?(de=yo(te.props.children,Q.mode,de,te.key),de.return=Q,Q=de):(de=Fd(te.type,te.key,te.props,null,Q.mode,de),Nc(de,te),de.return=Q,Q=de)}return M(Q);case y:e:{for(Se=te.key;K!==null;){if(K.key===Se)if(K.tag===4&&K.stateNode.containerInfo===te.containerInfo&&K.stateNode.implementation===te.implementation){f(Q,K.sibling),de=b(K,te.children||[]),de.return=Q,Q=de;break e}else{f(Q,K);break}else c(Q,K);K=K.sibling}de=hg(te,Q.mode,de),de.return=Q,Q=de}return M(Q);case R:return Se=te._init,te=Se(te._payload),at(Q,K,te,de)}if($(te))return Ie(Q,K,te,de);if(V(te)){if(Se=V(te),typeof Se!="function")throw Error(r(150));return te=Se.call(te),Oe(Q,K,te,de)}if(typeof te.then=="function")return at(Q,K,af(te),de);if(te.$$typeof===k)return at(Q,K,Kd(Q,te),de);lf(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,K!==null&&K.tag===6?(f(Q,K.sibling),de=b(K,te),de.return=Q,Q=de):(f(Q,K),de=fg(te,Q.mode,de),de.return=Q,Q=de),M(Q)):f(Q,K)}return function(Q,K,te,de){try{Tc=0;var Se=at(Q,K,te,de);return $a=null,Se}catch(Me){if(Me===yc||Me===Wd)throw Me;var Ke=Xn(29,Me,null,Q.mode);return Ke.lanes=de,Ke.return=Q,Ke}finally{}}}var Ga=DT(!0),RT=DT(!1),xr=G(null),ei=null;function us(a){var c=a.alternate;se(Wt,Wt.current&1),se(xr,a),ei===null&&(c===null||Va.current!==null||c.memoizedState!==null)&&(ei=a)}function OT(a){if(a.tag===22){if(se(Wt,Wt.current),se(xr,a),ei===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(ei=a)}}else ds()}function ds(){se(Wt,Wt.current),se(xr,xr.current)}function _i(a){ee(xr),ei===a&&(ei=null),ee(Wt)}var Wt=G(0);function cf(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Ly(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Gg(a,c,f,m){c=a.memoizedState,f=f(m,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Kg={enqueueSetState:function(a,c,f){a=a._reactInternals;var m=er(),b=as(m);b.payload=c,f!=null&&(b.callback=f),c=ls(a,b,m),c!==null&&(tr(c,a,m),bc(c,a,m))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var m=er(),b=as(m);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=ls(a,b,m),c!==null&&(tr(c,a,m),bc(c,a,m))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=er(),m=as(f);m.tag=2,c!=null&&(m.callback=c),c=ls(a,m,f),c!==null&&(tr(c,a,f),bc(c,a,f))}};function jT(a,c,f,m,b,E,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,E,M):c.prototype&&c.prototype.isPureReactComponent?!cc(f,m)||!cc(b,E):!0}function LT(a,c,f,m){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==a&&Kg.enqueueReplaceState(c,c.state,null)}function To(a,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var b in a)f[b]===void 0&&(f[b]=a[b])}return f}var uf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function PT(a){uf(a)}function BT(a){console.error(a)}function IT(a){uf(a)}function df(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function zT(a,c,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Yg(a,c,f){return f=as(f),f.tag=3,f.payload={element:null},f.callback=function(){df(a,c)},f}function qT(a){return a=as(a),a.tag=3,a}function VT(a,c,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var E=m.value;a.payload=function(){return b(E)},a.callback=function(){zT(c,f,m)}}var M=f.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){zT(c,f,m),typeof b!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function $8(a,c,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&pc(c,f,b,!0),f=xr.current,f!==null){switch(f.tag){case 13:return ei===null?vy():f.alternate===null&&Nt===0&&(Nt=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===Eg?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),xy(a,m,b)),!1;case 22:return f.flags|=65536,m===Eg?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),xy(a,m,b)),!1}throw Error(r(435,f.tag))}return xy(a,m,b),vy(),!1}if(tt)return c=xr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,m!==gg&&(a=Error(r(422),{cause:m}),hc(gr(a,f)))):(m!==gg&&(c=Error(r(423),{cause:m}),hc(gr(c,f))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,m=gr(m,f),b=Yg(a.stateNode,m,b),Tg(a,b),Nt!==4&&(Nt=2)),!1;var E=Error(r(520),{cause:m});if(E=gr(E,f),jc===null?jc=[E]:jc.push(E),Nt!==4&&(Nt=2),c===null)return!0;m=gr(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=b&-b,f.lanes|=a,a=Yg(f.stateNode,m,a),Tg(f,a),!1;case 1:if(c=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ys===null||!ys.has(E))))return f.flags|=65536,b&=-b,f.lanes|=b,b=qT(b),VT(b,a,f,m),Tg(f,b),!1}f=f.return}while(f!==null);return!1}var HT=Error(r(461)),nn=!1;function dn(a,c,f,m){c.child=a===null?RT(c,null,f,m):Ga(c,a.child,f,m)}function FT(a,c,f,m,b){f=f.render;var E=c.ref;if("ref"in m){var M={};for(var O in m)O!=="ref"&&(M[O]=m[O])}else M=m;return Eo(c),m=Dg(a,c,f,M,E,b),O=Rg(),a!==null&&!nn?(Og(a,c,b),Di(a,c,b)):(tt&&O&&pg(c),c.flags|=1,dn(a,c,m,b),c.child)}function UT(a,c,f,m,b){if(a===null){var E=f.type;return typeof E=="function"&&!dg(E)&&E.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=E,$T(a,c,E,m,b)):(a=Fd(f.type,null,m,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(E=a.child,!ny(a,b)){var M=E.memoizedProps;if(f=f.compare,f=f!==null?f:cc,f(M,m)&&a.ref===c.ref)return Di(a,c,b)}return c.flags|=1,a=Ci(E,m),a.ref=c.ref,a.return=c,c.child=a}function $T(a,c,f,m,b){if(a!==null){var E=a.memoizedProps;if(cc(E,m)&&a.ref===c.ref)if(nn=!1,c.pendingProps=m=E,ny(a,b))(a.flags&131072)!==0&&(nn=!0);else return c.lanes=a.lanes,Di(a,c,b)}return Wg(a,c,f,m,b)}function GT(a,c,f){var m=c.pendingProps,b=m.children,E=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=E!==null?E.baseLanes|f:f,a!==null){for(b=c.child=a.child,E=0;b!==null;)E=E|b.lanes|b.childLanes,b=b.sibling;c.childLanes=E&~m}else c.childLanes=0,c.child=null;return KT(a,c,m,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Yd(c,E!==null?E.cachePool:null),E!==null?$2(c,E):Ag(),OT(c);else return c.lanes=c.childLanes=536870912,KT(a,c,E!==null?E.baseLanes|f:f,f)}else E!==null?(Yd(c,E.cachePool),$2(c,E),ds(),c.memoizedState=null):(a!==null&&Yd(c,null),Ag(),ds());return dn(a,c,b,f),c.child}function KT(a,c,f,m){var b=Sg();return b=b===null?null:{parent:Yt._currentValue,pool:b},c.memoizedState={baseLanes:f,cachePool:b},a!==null&&Yd(c,null),Ag(),OT(c),a!==null&&pc(a,c,m,!0),null}function ff(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function Wg(a,c,f,m,b){return Eo(c),f=Dg(a,c,f,m,void 0,b),m=Rg(),a!==null&&!nn?(Og(a,c,b),Di(a,c,b)):(tt&&m&&pg(c),c.flags|=1,dn(a,c,f,b),c.child)}function YT(a,c,f,m,b,E){return Eo(c),c.updateQueue=null,f=K2(c,m,f,b),G2(a),m=Rg(),a!==null&&!nn?(Og(a,c,E),Di(a,c,E)):(tt&&m&&pg(c),c.flags|=1,dn(a,c,f,E),c.child)}function WT(a,c,f,m,b){if(Eo(c),c.stateNode===null){var E=Pa,M=f.contextType;typeof M=="object"&&M!==null&&(E=wn(M)),E=new f(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Kg,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},Cg(c),M=f.contextType,E.context=typeof M=="object"&&M!==null?wn(M):Pa,E.state=c.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(Gg(c,f,M,m),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(M=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),M!==E.state&&Kg.enqueueReplaceState(E,E.state,null),wc(c,m,E,b),xc(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(a===null){E=c.stateNode;var O=c.memoizedProps,F=To(f,O);E.props=F;var re=E.context,ue=f.contextType;M=Pa,typeof ue=="object"&&ue!==null&&(M=wn(ue));var fe=f.getDerivedStateFromProps;ue=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=c.pendingProps!==O,ue||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||re!==M)&&LT(c,E,m,M),ss=!1;var oe=c.memoizedState;E.state=oe,wc(c,m,E,b),xc(),re=c.memoizedState,O||oe!==re||ss?(typeof fe=="function"&&(Gg(c,f,fe,m),re=c.memoizedState),(F=ss||jT(c,f,F,m,oe,re,M))?(ue||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=re),E.props=m,E.state=re,E.context=M,m=F):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,kg(a,c),M=c.memoizedProps,ue=To(f,M),E.props=ue,fe=c.pendingProps,oe=E.context,re=f.contextType,F=Pa,typeof re=="object"&&re!==null&&(F=wn(re)),O=f.getDerivedStateFromProps,(re=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(M!==fe||oe!==F)&&LT(c,E,m,F),ss=!1,oe=c.memoizedState,E.state=oe,wc(c,m,E,b),xc();var ae=c.memoizedState;M!==fe||oe!==ae||ss||a!==null&&a.dependencies!==null&&Gd(a.dependencies)?(typeof O=="function"&&(Gg(c,f,O,m),ae=c.memoizedState),(ue=ss||jT(c,f,ue,m,oe,ae,F)||a!==null&&a.dependencies!==null&&Gd(a.dependencies))?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ae,F),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ae,F)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||M===a.memoizedProps&&oe===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&oe===a.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=ae),E.props=m,E.state=ae,E.context=F,m=ue):(typeof E.componentDidUpdate!="function"||M===a.memoizedProps&&oe===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&oe===a.memoizedState||(c.flags|=1024),m=!1)}return E=m,ff(a,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,a!==null&&m?(c.child=Ga(c,a.child,null,b),c.child=Ga(c,null,f,b)):dn(a,c,f,b),c.memoizedState=E.state,a=c.child):a=Di(a,c,b),a}function XT(a,c,f,m){return fc(),c.flags|=256,dn(a,c,f,m),c.child}var Xg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zg(a){return{baseLanes:a,cachePool:B2()}}function Qg(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=wr),a}function ZT(a,c,f){var m=c.pendingProps,b=!1,E=(c.flags&128)!==0,M;if((M=E)||(M=a!==null&&a.memoizedState===null?!1:(Wt.current&2)!==0),M&&(b=!0,c.flags&=-129),M=(c.flags&32)!==0,c.flags&=-33,a===null){if(tt){if(b?us(c):ds(),tt){var O=Tt,F;if(F=O){e:{for(F=O,O=Jr;F.nodeType!==8;){if(!O){O=null;break e}if(F=zr(F.nextSibling),F===null){O=null;break e}}O=F}O!==null?(c.memoizedState={dehydrated:O,treeContext:vo!==null?{id:ki,overflow:Ti}:null,retryLane:536870912,hydrationErrors:null},F=Xn(18,null,null,0),F.stateNode=O,F.return=c,c.child=F,An=c,Tt=null,F=!0):F=!1}F||wo(c)}if(O=c.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return Ly(O)?c.lanes=32:c.lanes=536870912,null;_i(c)}return O=m.children,m=m.fallback,b?(ds(),b=c.mode,O=hf({mode:"hidden",children:O},b),m=yo(m,b,f,null),O.return=c,m.return=c,O.sibling=m,c.child=O,b=c.child,b.memoizedState=Zg(f),b.childLanes=Qg(a,M,f),c.memoizedState=Xg,m):(us(c),Jg(c,O))}if(F=a.memoizedState,F!==null&&(O=F.dehydrated,O!==null)){if(E)c.flags&256?(us(c),c.flags&=-257,c=ey(a,c,f)):c.memoizedState!==null?(ds(),c.child=a.child,c.flags|=128,c=null):(ds(),b=m.fallback,O=c.mode,m=hf({mode:"visible",children:m.children},O),b=yo(b,O,f,null),b.flags|=2,m.return=c,b.return=c,m.sibling=b,c.child=m,Ga(c,a.child,null,f),m=c.child,m.memoizedState=Zg(f),m.childLanes=Qg(a,M,f),c.memoizedState=Xg,c=b);else if(us(c),Ly(O)){if(M=O.nextSibling&&O.nextSibling.dataset,M)var re=M.dgst;M=re,m=Error(r(419)),m.stack="",m.digest=M,hc({value:m,source:null,stack:null}),c=ey(a,c,f)}else if(nn||pc(a,c,f,!1),M=(f&a.childLanes)!==0,nn||M){if(M=ft,M!==null&&(m=f&-f,m=(m&42)!==0?1:ao(m),m=(m&(M.suspendedLanes|f))!==0?0:m,m!==0&&m!==F.retryLane))throw F.retryLane=m,La(a,m),tr(M,a,m),HT;O.data==="$?"||vy(),c=ey(a,c,f)}else O.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=F.treeContext,Tt=zr(O.nextSibling),An=c,tt=!0,xo=null,Jr=!1,a!==null&&(vr[br++]=ki,vr[br++]=Ti,vr[br++]=vo,ki=a.id,Ti=a.overflow,vo=c),c=Jg(c,m.children),c.flags|=4096);return c}return b?(ds(),b=m.fallback,O=c.mode,F=a.child,re=F.sibling,m=Ci(F,{mode:"hidden",children:m.children}),m.subtreeFlags=F.subtreeFlags&65011712,re!==null?b=Ci(re,b):(b=yo(b,O,f,null),b.flags|=2),b.return=c,m.return=c,m.sibling=b,c.child=m,m=b,b=c.child,O=a.child.memoizedState,O===null?O=Zg(f):(F=O.cachePool,F!==null?(re=Yt._currentValue,F=F.parent!==re?{parent:re,pool:re}:F):F=B2(),O={baseLanes:O.baseLanes|f,cachePool:F}),b.memoizedState=O,b.childLanes=Qg(a,M,f),c.memoizedState=Xg,m):(us(c),f=a.child,a=f.sibling,f=Ci(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,a!==null&&(M=c.deletions,M===null?(c.deletions=[a],c.flags|=16):M.push(a)),c.child=f,c.memoizedState=null,f)}function Jg(a,c){return c=hf({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function hf(a,c){return a=Xn(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ey(a,c,f){return Ga(c,a.child,null,f),a=Jg(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function QT(a,c,f){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c),vg(a.return,c,f)}function ty(a,c,f,m,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=f,E.tailMode=b)}function JT(a,c,f){var m=c.pendingProps,b=m.revealOrder,E=m.tail;if(dn(a,c,m.children,f),m=Wt.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&QT(a,f,c);else if(a.tag===19)QT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(se(Wt,m),b){case"forwards":for(f=c.child,b=null;f!==null;)a=f.alternate,a!==null&&cf(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=c.child,c.child=null):(b=f.sibling,f.sibling=null),ty(c,!1,b,f,E);break;case"backwards":for(f=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&cf(a)===null){c.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}ty(c,!0,f,null,E);break;case"together":ty(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Di(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),gs|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(pc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=Ci(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Ci(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function ny(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Gd(a)))}function G8(a,c,f){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),is(c,Yt,a.memoizedState.cache),fc();break;case 27:case 5:we(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:is(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(us(c),c.flags|=128,null):(f&c.child.childLanes)!==0?ZT(a,c,f):(us(c),a=Di(a,c,f),a!==null?a.sibling:null);us(c);break;case 19:var b=(a.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(pc(a,c,f,!1),m=(f&c.childLanes)!==0),b){if(m)return JT(a,c,f);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),se(Wt,Wt.current),m)break;return null;case 22:case 23:return c.lanes=0,GT(a,c,f);case 24:is(c,Yt,a.memoizedState.cache)}return Di(a,c,f)}function eN(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)nn=!0;else{if(!ny(a,f)&&(c.flags&128)===0)return nn=!1,G8(a,c,f);nn=(a.flags&131072)!==0}else nn=!1,tt&&(c.flags&1048576)!==0&&_2(c,$d,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var m=c.elementType,b=m._init;if(m=b(m._payload),c.type=m,typeof m=="function")dg(m)?(a=To(m,a),c.tag=1,c=WT(null,c,m,a,f)):(c.tag=0,c=Wg(null,c,m,a,f));else{if(m!=null){if(b=m.$$typeof,b===T){c.tag=11,c=FT(null,c,m,a,f);break e}else if(b===D){c.tag=14,c=UT(null,c,m,a,f);break e}}throw c=I(m)||m,Error(r(306,c,""))}}return c;case 0:return Wg(a,c,c.type,c.pendingProps,f);case 1:return m=c.type,b=To(m,c.pendingProps),WT(a,c,m,b,f);case 3:e:{if(le(c,c.stateNode.containerInfo),a===null)throw Error(r(387));m=c.pendingProps;var E=c.memoizedState;b=E.element,kg(a,c),wc(c,m,null,f);var M=c.memoizedState;if(m=M.cache,is(c,Yt,m),m!==E.cache&&bg(c,[Yt],f,!0),xc(),m=M.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:M.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=XT(a,c,m,f);break e}else if(m!==b){b=gr(Error(r(424)),c),hc(b),c=XT(a,c,m,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Tt=zr(a.firstChild),An=c,tt=!0,xo=null,Jr=!0,f=RT(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(fc(),m===b){c=Di(a,c,f);break e}dn(a,c,m,f)}c=c.child}return c;case 26:return ff(a,c),a===null?(f=iA(c.type,null,c.pendingProps,null))?c.memoizedState=f:tt||(f=c.type,a=c.pendingProps,m=Nf(Z.current).createElement(f),m[It]=c,m[en]=a,hn(m,f,a),kt(m),c.stateNode=m):c.memoizedState=iA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return we(c),a===null&&tt&&(m=c.stateNode=tA(c.type,c.pendingProps,Z.current),An=c,Jr=!0,b=Tt,xs(c.type)?(Py=b,Tt=zr(m.firstChild)):Tt=b),dn(a,c,c.pendingProps.children,f),ff(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&tt&&((b=m=Tt)&&(m=xH(m,c.type,c.pendingProps,Jr),m!==null?(c.stateNode=m,An=c,Tt=zr(m.firstChild),Jr=!1,b=!0):b=!1),b||wo(c)),we(c),b=c.type,E=c.pendingProps,M=a!==null?a.memoizedProps:null,m=E.children,Ry(b,E)?m=null:M!==null&&Ry(b,M)&&(c.flags|=32),c.memoizedState!==null&&(b=Dg(a,c,I8,null,null,f),Fc._currentValue=b),ff(a,c),dn(a,c,m,f),c.child;case 6:return a===null&&tt&&((a=f=Tt)&&(f=wH(f,c.pendingProps,Jr),f!==null?(c.stateNode=f,An=c,Tt=null,a=!0):a=!1),a||wo(c)),null;case 13:return ZT(a,c,f);case 4:return le(c,c.stateNode.containerInfo),m=c.pendingProps,a===null?c.child=Ga(c,null,m,f):dn(a,c,m,f),c.child;case 11:return FT(a,c,c.type,c.pendingProps,f);case 7:return dn(a,c,c.pendingProps,f),c.child;case 8:return dn(a,c,c.pendingProps.children,f),c.child;case 12:return dn(a,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,is(c,c.type,m.value),dn(a,c,m.children,f),c.child;case 9:return b=c.type._context,m=c.pendingProps.children,Eo(c),b=wn(b),m=m(b),c.flags|=1,dn(a,c,m,f),c.child;case 14:return UT(a,c,c.type,c.pendingProps,f);case 15:return $T(a,c,c.type,c.pendingProps,f);case 19:return JT(a,c,f);case 31:return m=c.pendingProps,f=c.mode,m={mode:m.mode,children:m.children},a===null?(f=hf(m,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Ci(a.child,m),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return GT(a,c,f);case 24:return Eo(c),m=wn(Yt),a===null?(b=Sg(),b===null&&(b=ft,E=xg(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=f),b=E),c.memoizedState={parent:m,cache:b},Cg(c),is(c,Yt,b)):((a.lanes&f)!==0&&(kg(a,c),wc(c,null,null,f),xc()),b=a.memoizedState,E=c.memoizedState,b.parent!==m?(b={parent:m,cache:m},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),is(c,Yt,m)):(m=E.cache,is(c,Yt,m),m!==b.cache&&bg(c,[Yt],f,!0))),dn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ri(a){a.flags|=4}function tN(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!cA(c)){if(c=xr.current,c!==null&&((Qe&4194048)===Qe?ei!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||c!==ei))throw vc=Eg,I2;a.flags|=8192}}function pf(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?bi():536870912,a.lanes|=c,Xa|=c)}function Ac(a,c){if(!tt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function xt(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(c)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=f,c}function K8(a,c,f){var m=c.pendingProps;switch(mg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(c),null;case 1:return xt(c),null;case 3:return f=c.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Ai(Yt),ge(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(dc(c)?Ri(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,O2())),xt(c),null;case 26:return f=c.memoizedState,a===null?(Ri(c),f!==null?(xt(c),tN(c,f)):(xt(c),c.flags&=-16777217)):f?f!==a.memoizedState?(Ri(c),xt(c),tN(c,f)):(xt(c),c.flags&=-16777217):(a.memoizedProps!==m&&Ri(c),xt(c),c.flags&=-16777217),null;case 27:_e(c),f=Z.current;var b=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==m&&Ri(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return xt(c),null}a=H.current,dc(c)?D2(c):(a=tA(b,m,f),c.stateNode=a,Ri(c))}return xt(c),null;case 5:if(_e(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==m&&Ri(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return xt(c),null}if(a=H.current,dc(c))D2(c);else{switch(b=Nf(Z.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?b.createElement(f,{is:m.is}):b.createElement(f)}}a[It]=c,a[en]=m;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=a;e:switch(hn(a,f,m),f){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ri(c)}}return xt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==m&&Ri(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(a=Z.current,dc(c)){if(a=c.stateNode,f=c.memoizedProps,m=null,b=An,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}a[It]=c,a=!!(a.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||YN(a.nodeValue,f)),a||wo(c)}else a=Nf(a).createTextNode(m),a[It]=c,c.stateNode=a}return xt(c),null;case 13:if(m=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=dc(c),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[It]=c}else fc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;xt(c),b=!1}else b=O2(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(_i(c),c):(_i(c),null)}if(_i(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=c.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==b&&(m.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),pf(c,c.updateQueue),xt(c),null;case 4:return ge(),a===null&&Ny(c.stateNode.containerInfo),xt(c),null;case 10:return Ai(c.type),xt(c),null;case 19:if(ee(Wt),b=c.memoizedState,b===null)return xt(c),null;if(m=(c.flags&128)!==0,E=b.rendering,E===null)if(m)Ac(b,!1);else{if(Nt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(E=cf(a),E!==null){for(c.flags|=128,Ac(b,!1),a=E.updateQueue,c.updateQueue=a,pf(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)M2(f,a),f=f.sibling;return se(Wt,Wt.current&1|2),c.child}a=a.sibling}b.tail!==null&&Ae()>yf&&(c.flags|=128,m=!0,Ac(b,!1),c.lanes=4194304)}else{if(!m)if(a=cf(E),a!==null){if(c.flags|=128,m=!0,a=a.updateQueue,c.updateQueue=a,pf(c,a),Ac(b,!0),b.tail===null&&b.tailMode==="hidden"&&!E.alternate&&!tt)return xt(c),null}else 2*Ae()-b.renderingStartTime>yf&&f!==536870912&&(c.flags|=128,m=!0,Ac(b,!1),c.lanes=4194304);b.isBackwards?(E.sibling=c.child,c.child=E):(a=b.last,a!==null?a.sibling=E:c.child=E,b.last=E)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Ae(),c.sibling=null,a=Wt.current,se(Wt,m?a&1|2:a&1),c):(xt(c),null);case 22:case 23:return _i(c),Mg(),m=c.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&(xt(c),c.subtreeFlags&6&&(c.flags|=8192)):xt(c),f=c.updateQueue,f!==null&&pf(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),a!==null&&ee(Co),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Ai(Yt),xt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function Y8(a,c){switch(mg(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Ai(Yt),ge(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return _e(c),null;case 13:if(_i(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));fc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ee(Wt),null;case 4:return ge(),null;case 10:return Ai(c.type),null;case 22:case 23:return _i(c),Mg(),a!==null&&ee(Co),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Ai(Yt),null;case 25:return null;default:return null}}function nN(a,c){switch(mg(c),c.tag){case 3:Ai(Yt),ge();break;case 26:case 27:case 5:_e(c);break;case 4:ge();break;case 13:_i(c);break;case 19:ee(Wt);break;case 10:Ai(c.type);break;case 22:case 23:_i(c),Mg(),a!==null&&ee(Co);break;case 24:Ai(Yt)}}function Mc(a,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&a)===a){m=void 0;var E=f.create,M=f.inst;m=E(),M.destroy=m}f=f.next}while(f!==b)}}catch(O){ct(c,c.return,O)}}function fs(a,c,f){try{var m=c.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var E=b.next;m=E;do{if((m.tag&a)===a){var M=m.inst,O=M.destroy;if(O!==void 0){M.destroy=void 0,b=c;var F=f,re=O;try{re()}catch(ue){ct(b,F,ue)}}}m=m.next}while(m!==E)}}catch(ue){ct(c,c.return,ue)}}function rN(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{U2(c,f)}catch(m){ct(a,a.return,m)}}}function iN(a,c,f){f.props=To(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){ct(a,c,m)}}function _c(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(b){ct(a,c,b)}}function ti(a,c){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){ct(a,c,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){ct(a,c,b)}else f.current=null}function sN(a){var c=a.type,f=a.memoizedProps,m=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){ct(a,a.return,b)}}function ry(a,c,f){try{var m=a.stateNode;mH(m,a.type,f,c),m[en]=c}catch(b){ct(a,a.return,b)}}function oN(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&xs(a.type)||a.tag===4}function iy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||oN(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&xs(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function sy(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Tf));else if(m!==4&&(m===27&&xs(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(sy(a,c,f),a=a.sibling;a!==null;)sy(a,c,f),a=a.sibling}function mf(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(m!==4&&(m===27&&xs(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(mf(a,c,f),a=a.sibling;a!==null;)mf(a,c,f),a=a.sibling}function aN(a){var c=a.stateNode,f=a.memoizedProps;try{for(var m=a.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);hn(c,m,f),c[It]=a,c[en]=f}catch(E){ct(a,a.return,E)}}var Oi=!1,Lt=!1,oy=!1,lN=typeof WeakSet=="function"?WeakSet:Set,rn=null;function W8(a,c){if(a=a.containerInfo,_y=Of,a=b2(a),ig(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var M=0,O=-1,F=-1,re=0,ue=0,fe=a,oe=null;t:for(;;){for(var ae;fe!==f||b!==0&&fe.nodeType!==3||(O=M+b),fe!==E||m!==0&&fe.nodeType!==3||(F=M+m),fe.nodeType===3&&(M+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)oe=fe,fe=ae;for(;;){if(fe===a)break t;if(oe===f&&++re===b&&(O=M),oe===E&&++ue===m&&(F=M),(ae=fe.nextSibling)!==null)break;fe=oe,oe=fe.parentNode}fe=ae}f=O===-1||F===-1?null:{start:O,end:F}}else f=null}f=f||{start:0,end:0}}else f=null;for(Dy={focusedElem:a,selectionRange:f},Of=!1,rn=c;rn!==null;)if(c=rn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,rn=a;else for(;rn!==null;){switch(c=rn,E=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&E!==null){a=void 0,f=c,b=E.memoizedProps,E=E.memoizedState,m=f.stateNode;try{var Ie=To(f.type,b,f.elementType===f.type);a=m.getSnapshotBeforeUpdate(Ie,E),m.__reactInternalSnapshotBeforeUpdate=a}catch(Oe){ct(f,f.return,Oe)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)jy(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":jy(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,rn=a;break}rn=c.return}}function cN(a,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:hs(a,f),m&4&&Mc(5,f);break;case 1:if(hs(a,f),m&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(M){ct(f,f.return,M)}else{var b=To(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(b,c,a.__reactInternalSnapshotBeforeUpdate)}catch(M){ct(f,f.return,M)}}m&64&&rN(f),m&512&&_c(f,f.return);break;case 3:if(hs(a,f),m&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{U2(a,c)}catch(M){ct(f,f.return,M)}}break;case 27:c===null&&m&4&&aN(f);case 26:case 5:hs(a,f),c===null&&m&4&&sN(f),m&512&&_c(f,f.return);break;case 12:hs(a,f);break;case 13:hs(a,f),m&4&&fN(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=iH.bind(null,f),SH(a,f))));break;case 22:if(m=f.memoizedState!==null||Oi,!m){c=c!==null&&c.memoizedState!==null||Lt,b=Oi;var E=Lt;Oi=m,(Lt=c)&&!E?ps(a,f,(f.subtreeFlags&8772)!==0):hs(a,f),Oi=b,Lt=E}break;case 30:break;default:hs(a,f)}}function uN(a){var c=a.alternate;c!==null&&(a.alternate=null,uN(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&fo(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var gt=null,zn=!1;function ji(a,c,f){for(f=f.child;f!==null;)dN(a,c,f),f=f.sibling}function dN(a,c,f){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Kt,f)}catch{}switch(f.tag){case 26:Lt||ti(f,c),ji(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Lt||ti(f,c);var m=gt,b=zn;xs(f.type)&&(gt=f.stateNode,zn=!1),ji(a,c,f),zc(f.stateNode),gt=m,zn=b;break;case 5:Lt||ti(f,c);case 6:if(m=gt,b=zn,gt=null,ji(a,c,f),gt=m,zn=b,gt!==null)if(zn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(f.stateNode)}catch(E){ct(f,c,E)}else try{gt.removeChild(f.stateNode)}catch(E){ct(f,c,E)}break;case 18:gt!==null&&(zn?(a=gt,JN(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Kc(a)):JN(gt,f.stateNode));break;case 4:m=gt,b=zn,gt=f.stateNode.containerInfo,zn=!0,ji(a,c,f),gt=m,zn=b;break;case 0:case 11:case 14:case 15:Lt||fs(2,f,c),Lt||fs(4,f,c),ji(a,c,f);break;case 1:Lt||(ti(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&iN(f,c,m)),ji(a,c,f);break;case 21:ji(a,c,f);break;case 22:Lt=(m=Lt)||f.memoizedState!==null,ji(a,c,f),Lt=m;break;default:ji(a,c,f)}}function fN(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Kc(a)}catch(f){ct(c,c.return,f)}}function X8(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new lN),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new lN),c;default:throw Error(r(435,a.tag))}}function ay(a,c){var f=X8(a);c.forEach(function(m){var b=sH.bind(null,a,m);f.has(m)||(f.add(m),m.then(b,b))})}function Zn(a,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],E=a,M=c,O=M;e:for(;O!==null;){switch(O.tag){case 27:if(xs(O.type)){gt=O.stateNode,zn=!1;break e}break;case 5:gt=O.stateNode,zn=!1;break e;case 3:case 4:gt=O.stateNode.containerInfo,zn=!0;break e}O=O.return}if(gt===null)throw Error(r(160));dN(E,M,b),gt=null,zn=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)hN(c,a),c=c.sibling}var Ir=null;function hN(a,c){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Zn(c,a),Qn(a),m&4&&(fs(3,a,a.return),Mc(3,a),fs(5,a,a.return));break;case 1:Zn(c,a),Qn(a),m&512&&(Lt||f===null||ti(f,f.return)),m&64&&Oi&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=Ir;if(Zn(c,a),Qn(a),m&512&&(Lt||f===null||ti(f,f.return)),m&4){var E=f!==null?f.memoizedState:null;if(m=a.memoizedState,f===null)if(m===null)if(a.stateNode===null){e:{m=a.type,f=a.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":E=b.getElementsByTagName("title")[0],(!E||E[wi]||E[It]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(m),b.head.insertBefore(E,b.querySelector("head > title"))),hn(E,m,f),E[It]=a,kt(E),m=E;break e;case"link":var M=aA("link","href",b).get(m+(f.href||""));if(M){for(var O=0;O<M.length;O++)if(E=M[O],E.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){M.splice(O,1);break t}}E=b.createElement(m),hn(E,m,f),b.head.appendChild(E);break;case"meta":if(M=aA("meta","content",b).get(m+(f.content||""))){for(O=0;O<M.length;O++)if(E=M[O],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){M.splice(O,1);break t}}E=b.createElement(m),hn(E,m,f),b.head.appendChild(E);break;default:throw Error(r(468,m))}E[It]=a,kt(E),m=E}a.stateNode=m}else lA(b,a.type,a.stateNode);else a.stateNode=oA(b,m,a.memoizedProps);else E!==m?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,m===null?lA(b,a.type,a.stateNode):oA(b,m,a.memoizedProps)):m===null&&a.stateNode!==null&&ry(a,a.memoizedProps,f.memoizedProps)}break;case 27:Zn(c,a),Qn(a),m&512&&(Lt||f===null||ti(f,f.return)),f!==null&&m&4&&ry(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Zn(c,a),Qn(a),m&512&&(Lt||f===null||ti(f,f.return)),a.flags&32){b=a.stateNode;try{Aa(b,"")}catch(ae){ct(a,a.return,ae)}}m&4&&a.stateNode!=null&&(b=a.memoizedProps,ry(a,b,f!==null?f.memoizedProps:b)),m&1024&&(oy=!0);break;case 6:if(Zn(c,a),Qn(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,f=a.stateNode;try{f.nodeValue=m}catch(ae){ct(a,a.return,ae)}}break;case 3:if(_f=null,b=Ir,Ir=Af(c.containerInfo),Zn(c,a),Ir=b,Qn(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Kc(c.containerInfo)}catch(ae){ct(a,a.return,ae)}oy&&(oy=!1,pN(a));break;case 4:m=Ir,Ir=Af(a.stateNode.containerInfo),Zn(c,a),Qn(a),Ir=m;break;case 12:Zn(c,a),Qn(a);break;case 13:Zn(c,a),Qn(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(hy=Ae()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ay(a,m)));break;case 22:b=a.memoizedState!==null;var F=f!==null&&f.memoizedState!==null,re=Oi,ue=Lt;if(Oi=re||b,Lt=ue||F,Zn(c,a),Lt=ue,Oi=re,Qn(a),m&8192)e:for(c=a.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(f===null||F||Oi||Lt||No(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){F=f=c;try{if(E=F.stateNode,b)M=E.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{O=F.stateNode;var fe=F.memoizedProps.style,oe=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;O.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ae){ct(F,F.return,ae)}}}else if(c.tag===6){if(f===null){F=c;try{F.stateNode.nodeValue=b?"":F.memoizedProps}catch(ae){ct(F,F.return,ae)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,ay(a,f))));break;case 19:Zn(c,a),Qn(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ay(a,m)));break;case 30:break;case 21:break;default:Zn(c,a),Qn(a)}}function Qn(a){var c=a.flags;if(c&2){try{for(var f,m=a.return;m!==null;){if(oN(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,E=iy(a);mf(a,E,b);break;case 5:var M=f.stateNode;f.flags&32&&(Aa(M,""),f.flags&=-33);var O=iy(a);mf(a,O,M);break;case 3:case 4:var F=f.stateNode.containerInfo,re=iy(a);sy(a,re,F);break;default:throw Error(r(161))}}catch(ue){ct(a,a.return,ue)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function pN(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;pN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function hs(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)cN(a,c.alternate,c),c=c.sibling}function No(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:fs(4,c,c.return),No(c);break;case 1:ti(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&iN(c,c.return,f),No(c);break;case 27:zc(c.stateNode);case 26:case 5:ti(c,c.return),No(c);break;case 22:c.memoizedState===null&&No(c);break;case 30:No(c);break;default:No(c)}a=a.sibling}}function ps(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,b=a,E=c,M=E.flags;switch(E.tag){case 0:case 11:case 15:ps(b,E,f),Mc(4,E);break;case 1:if(ps(b,E,f),m=E,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(re){ct(m,m.return,re)}if(m=E,b=m.updateQueue,b!==null){var O=m.stateNode;try{var F=b.shared.hiddenCallbacks;if(F!==null)for(b.shared.hiddenCallbacks=null,b=0;b<F.length;b++)F2(F[b],O)}catch(re){ct(m,m.return,re)}}f&&M&64&&rN(E),_c(E,E.return);break;case 27:aN(E);case 26:case 5:ps(b,E,f),f&&m===null&&M&4&&sN(E),_c(E,E.return);break;case 12:ps(b,E,f);break;case 13:ps(b,E,f),f&&M&4&&fN(b,E);break;case 22:E.memoizedState===null&&ps(b,E,f),_c(E,E.return);break;case 30:break;default:ps(b,E,f)}c=c.sibling}}function ly(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&mc(f))}function cy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&mc(a))}function ni(a,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)mN(a,c,f,m),c=c.sibling}function mN(a,c,f,m){var b=c.flags;switch(c.tag){case 0:case 11:case 15:ni(a,c,f,m),b&2048&&Mc(9,c);break;case 1:ni(a,c,f,m);break;case 3:ni(a,c,f,m),b&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&mc(a)));break;case 12:if(b&2048){ni(a,c,f,m),a=c.stateNode;try{var E=c.memoizedProps,M=E.id,O=E.onPostCommit;typeof O=="function"&&O(M,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(F){ct(c,c.return,F)}}else ni(a,c,f,m);break;case 13:ni(a,c,f,m);break;case 23:break;case 22:E=c.stateNode,M=c.alternate,c.memoizedState!==null?E._visibility&2?ni(a,c,f,m):Dc(a,c):E._visibility&2?ni(a,c,f,m):(E._visibility|=2,Ka(a,c,f,m,(c.subtreeFlags&10256)!==0)),b&2048&&ly(M,c);break;case 24:ni(a,c,f,m),b&2048&&cy(c.alternate,c);break;default:ni(a,c,f,m)}}function Ka(a,c,f,m,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=a,M=c,O=f,F=m,re=M.flags;switch(M.tag){case 0:case 11:case 15:Ka(E,M,O,F,b),Mc(8,M);break;case 23:break;case 22:var ue=M.stateNode;M.memoizedState!==null?ue._visibility&2?Ka(E,M,O,F,b):Dc(E,M):(ue._visibility|=2,Ka(E,M,O,F,b)),b&&re&2048&&ly(M.alternate,M);break;case 24:Ka(E,M,O,F,b),b&&re&2048&&cy(M.alternate,M);break;default:Ka(E,M,O,F,b)}c=c.sibling}}function Dc(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,m=c,b=m.flags;switch(m.tag){case 22:Dc(f,m),b&2048&&ly(m.alternate,m);break;case 24:Dc(f,m),b&2048&&cy(m.alternate,m);break;default:Dc(f,m)}c=c.sibling}}var Rc=8192;function Ya(a){if(a.subtreeFlags&Rc)for(a=a.child;a!==null;)gN(a),a=a.sibling}function gN(a){switch(a.tag){case 26:Ya(a),a.flags&Rc&&a.memoizedState!==null&&LH(Ir,a.memoizedState,a.memoizedProps);break;case 5:Ya(a);break;case 3:case 4:var c=Ir;Ir=Af(a.stateNode.containerInfo),Ya(a),Ir=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Rc,Rc=16777216,Ya(a),Rc=c):Ya(a));break;default:Ya(a)}}function yN(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Oc(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];rn=m,bN(m,a)}yN(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)vN(a),a=a.sibling}function vN(a){switch(a.tag){case 0:case 11:case 15:Oc(a),a.flags&2048&&fs(9,a,a.return);break;case 3:Oc(a);break;case 12:Oc(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,gf(a)):Oc(a);break;default:Oc(a)}}function gf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];rn=m,bN(m,a)}yN(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:fs(8,c,c.return),gf(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,gf(c));break;default:gf(c)}a=a.sibling}}function bN(a,c){for(;rn!==null;){var f=rn;switch(f.tag){case 0:case 11:case 15:fs(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:mc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,rn=m;else e:for(f=a;rn!==null;){m=rn;var b=m.sibling,E=m.return;if(uN(m),m===f){rn=null;break e}if(b!==null){b.return=E,rn=b;break e}rn=E}}}var Z8={getCacheForType:function(a){var c=wn(Yt),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},Q8=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Ye=null,Qe=0,rt=0,Jn=null,ms=!1,Wa=!1,uy=!1,Li=0,Nt=0,gs=0,Ao=0,dy=0,wr=0,Xa=0,jc=null,qn=null,fy=!1,hy=0,yf=1/0,vf=null,ys=null,fn=0,vs=null,Za=null,Qa=0,py=0,my=null,xN=null,Lc=0,gy=null;function er(){if((nt&2)!==0&&Qe!==0)return Qe&-Qe;if(L.T!==null){var a=za;return a!==0?a:Ey()}return Sa()}function wN(){wr===0&&(wr=(Qe&536870912)===0||tt?io():536870912);var a=xr.current;return a!==null&&(a.flags|=32),wr}function tr(a,c,f){(a===ft&&(rt===2||rt===9)||a.cancelPendingCommit!==null)&&(Ja(a,0),bs(a,Qe,wr,!1)),xi(a,f),((nt&2)===0||a!==ft)&&(a===ft&&((nt&2)===0&&(Ao|=f),Nt===4&&bs(a,Qe,wr,!1)),ri(a))}function SN(a,c,f){if((nt&6)!==0)throw Error(r(327));var m=!f&&(c&124)===0&&(c&a.expiredLanes)===0||Wr(a,c),b=m?tH(a,c):by(a,c,!0),E=m;do{if(b===0){Wa&&!m&&bs(a,c,0,!1);break}else{if(f=a.current.alternate,E&&!J8(f)){b=by(a,c,!1),E=!1;continue}if(b===2){if(E=c,a.errorRecoveryDisabledLanes&E)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){c=M;e:{var O=a;b=jc;var F=O.current.memoizedState.isDehydrated;if(F&&(Ja(O,M).flags|=256),M=by(O,M,!1),M!==2){if(uy&&!F){O.errorRecoveryDisabledLanes|=E,Ao|=E,b=4;break e}E=qn,qn=b,E!==null&&(qn===null?qn=E:qn.push.apply(qn,E))}b=M}if(E=!1,b!==2)continue}}if(b===1){Ja(a,0),bs(a,c,0,!0);break}e:{switch(m=a,E=b,E){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:bs(m,c,wr,!ms);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=hy+300-Ae(),10<b)){if(bs(m,c,wr,!ms),vi(m,0,!0)!==0)break e;m.timeoutHandle=ZN(EN.bind(null,m,f,qn,vf,fy,c,wr,Ao,Xa,ms,E,2,-0,0),b);break e}EN(m,f,qn,vf,fy,c,wr,Ao,Xa,ms,E,0,-0,0)}}break}while(!0);ri(a)}function EN(a,c,f,m,b,E,M,O,F,re,ue,fe,oe,ae){if(a.timeoutHandle=-1,fe=c.subtreeFlags,(fe&8192||(fe&16785408)===16785408)&&(Hc={stylesheets:null,count:0,unsuspend:jH},gN(c),fe=PH(),fe!==null)){a.cancelPendingCommit=fe(_N.bind(null,a,c,E,f,m,b,M,O,F,ue,1,oe,ae)),bs(a,E,M,!re);return}_N(a,c,E,f,m,b,M,O,F)}function J8(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],E=b.getSnapshot;b=b.value;try{if(!Wn(E(),b))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function bs(a,c,f,m){c&=~dy,c&=~Ao,a.suspendedLanes|=c,a.pingedLanes&=~c,m&&(a.warmLanes|=c),m=a.expirationTimes;for(var b=c;0<b;){var E=31-Ct(b),M=1<<E;m[E]=-1,b&=~M}f!==0&&wa(a,f,c)}function bf(){return(nt&6)===0?(Pc(0),!1):!0}function yy(){if(Ye!==null){if(rt===0)var a=Ye.return;else a=Ye,Ni=So=null,jg(a),$a=null,Tc=0,a=Ye;for(;a!==null;)nN(a.alternate,a),a=a.return;Ye=null}}function Ja(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,yH(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),yy(),ft=a,Ye=f=Ci(a.current,null),Qe=c,rt=0,Jn=null,ms=!1,Wa=Wr(a,c),uy=!1,Xa=wr=dy=Ao=gs=Nt=0,qn=jc=null,fy=!1,(c&8)!==0&&(c|=c&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=c;0<m;){var b=31-Ct(m),E=1<<b;c|=a[b],m&=~E}return Li=c,qd(),f}function CN(a,c){Ge=null,L.H=of,c===yc||c===Wd?(c=V2(),rt=3):c===I2?(c=V2(),rt=4):rt=c===HT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Jn=c,Ye===null&&(Nt=1,df(a,gr(c,a.current)))}function kN(){var a=L.H;return L.H=of,a===null?of:a}function TN(){var a=L.A;return L.A=Z8,a}function vy(){Nt=4,ms||(Qe&4194048)!==Qe&&xr.current!==null||(Wa=!0),(gs&134217727)===0&&(Ao&134217727)===0||ft===null||bs(ft,Qe,wr,!1)}function by(a,c,f){var m=nt;nt|=2;var b=kN(),E=TN();(ft!==a||Qe!==c)&&(vf=null,Ja(a,c)),c=!1;var M=Nt;e:do try{if(rt!==0&&Ye!==null){var O=Ye,F=Jn;switch(rt){case 8:yy(),M=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(c=!0);var re=rt;if(rt=0,Jn=null,el(a,O,F,re),f&&Wa){M=0;break e}break;default:re=rt,rt=0,Jn=null,el(a,O,F,re)}}eH(),M=Nt;break}catch(ue){CN(a,ue)}while(!0);return c&&a.shellSuspendCounter++,Ni=So=null,nt=m,L.H=b,L.A=E,Ye===null&&(ft=null,Qe=0,qd()),M}function eH(){for(;Ye!==null;)NN(Ye)}function tH(a,c){var f=nt;nt|=2;var m=kN(),b=TN();ft!==a||Qe!==c?(vf=null,yf=Ae()+500,Ja(a,c)):Wa=Wr(a,c);e:do try{if(rt!==0&&Ye!==null){c=Ye;var E=Jn;t:switch(rt){case 1:rt=0,Jn=null,el(a,c,E,1);break;case 2:case 9:if(z2(E)){rt=0,Jn=null,AN(c);break}c=function(){rt!==2&&rt!==9||ft!==a||(rt=7),ri(a)},E.then(c,c);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:z2(E)?(rt=0,Jn=null,AN(c)):(rt=0,Jn=null,el(a,c,E,7));break;case 5:var M=null;switch(Ye.tag){case 26:M=Ye.memoizedState;case 5:case 27:var O=Ye;if(!M||cA(M)){rt=0,Jn=null;var F=O.sibling;if(F!==null)Ye=F;else{var re=O.return;re!==null?(Ye=re,xf(re)):Ye=null}break t}}rt=0,Jn=null,el(a,c,E,5);break;case 6:rt=0,Jn=null,el(a,c,E,6);break;case 8:yy(),Nt=6;break e;default:throw Error(r(462))}}nH();break}catch(ue){CN(a,ue)}while(!0);return Ni=So=null,L.H=m,L.A=b,nt=f,Ye!==null?0:(ft=null,Qe=0,qd(),Nt)}function nH(){for(;Ye!==null&&!Te();)NN(Ye)}function NN(a){var c=eN(a.alternate,a,Li);a.memoizedProps=a.pendingProps,c===null?xf(a):Ye=c}function AN(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=YT(f,c,c.pendingProps,c.type,void 0,Qe);break;case 11:c=YT(f,c,c.pendingProps,c.type.render,c.ref,Qe);break;case 5:jg(c);default:nN(f,c),c=Ye=M2(c,Li),c=eN(f,c,Li)}a.memoizedProps=a.pendingProps,c===null?xf(a):Ye=c}function el(a,c,f,m){Ni=So=null,jg(c),$a=null,Tc=0;var b=c.return;try{if($8(a,b,c,f,Qe)){Nt=1,df(a,gr(f,a.current)),Ye=null;return}}catch(E){if(b!==null)throw Ye=b,E;Nt=1,df(a,gr(f,a.current)),Ye=null;return}c.flags&32768?(tt||m===1?a=!0:Wa||(Qe&536870912)!==0?a=!1:(ms=a=!0,(m===2||m===9||m===3||m===6)&&(m=xr.current,m!==null&&m.tag===13&&(m.flags|=16384))),MN(c,a)):xf(c)}function xf(a){var c=a;do{if((c.flags&32768)!==0){MN(c,ms);return}a=c.return;var f=K8(c.alternate,c,Li);if(f!==null){Ye=f;return}if(c=c.sibling,c!==null){Ye=c;return}Ye=c=a}while(c!==null);Nt===0&&(Nt=5)}function MN(a,c){do{var f=Y8(a.alternate,a);if(f!==null){f.flags&=32767,Ye=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){Ye=a;return}Ye=a=f}while(a!==null);Nt=6,Ye=null}function _N(a,c,f,m,b,E,M,O,F){a.cancelPendingCommit=null;do wf();while(fn!==0);if((nt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(E=c.lanes|c.childLanes,E|=cg,xa(a,f,E,M,O,F),a===ft&&(Ye=ft=null,Qe=0),Za=c,vs=a,Qa=f,py=E,my=b,xN=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,oH(xn,function(){return LN(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=L.T,L.T=null,b=q.p,q.p=2,M=nt,nt|=4;try{W8(a,c,f)}finally{nt=M,q.p=b,L.T=m}}fn=1,DN(),RN(),ON()}}function DN(){if(fn===1){fn=0;var a=vs,c=Za,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=L.T,L.T=null;var m=q.p;q.p=2;var b=nt;nt|=4;try{hN(c,a);var E=Dy,M=b2(a.containerInfo),O=E.focusedElem,F=E.selectionRange;if(M!==O&&O&&O.ownerDocument&&v2(O.ownerDocument.documentElement,O)){if(F!==null&&ig(O)){var re=F.start,ue=F.end;if(ue===void 0&&(ue=re),"selectionStart"in O)O.selectionStart=re,O.selectionEnd=Math.min(ue,O.value.length);else{var fe=O.ownerDocument||document,oe=fe&&fe.defaultView||window;if(oe.getSelection){var ae=oe.getSelection(),Ie=O.textContent.length,Oe=Math.min(F.start,Ie),at=F.end===void 0?Oe:Math.min(F.end,Ie);!ae.extend&&Oe>at&&(M=at,at=Oe,Oe=M);var Q=y2(O,Oe),K=y2(O,at);if(Q&&K&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==K.node||ae.focusOffset!==K.offset)){var te=fe.createRange();te.setStart(Q.node,Q.offset),ae.removeAllRanges(),Oe>at?(ae.addRange(te),ae.extend(K.node,K.offset)):(te.setEnd(K.node,K.offset),ae.addRange(te))}}}}for(fe=[],ae=O;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<fe.length;O++){var de=fe[O];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Of=!!_y,Dy=_y=null}finally{nt=b,q.p=m,L.T=f}}a.current=c,fn=2}}function RN(){if(fn===2){fn=0;var a=vs,c=Za,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=L.T,L.T=null;var m=q.p;q.p=2;var b=nt;nt|=4;try{cN(a,c.alternate,c)}finally{nt=b,q.p=m,L.T=f}}fn=3}}function ON(){if(fn===4||fn===3){fn=0,et();var a=vs,c=Za,f=Qa,m=xN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?fn=5:(fn=0,Za=vs=null,jN(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(ys=null),lo(f),c=c.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Kt,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=L.T,b=q.p,q.p=2,L.T=null;try{for(var E=a.onRecoverableError,M=0;M<m.length;M++){var O=m[M];E(O.value,{componentStack:O.stack})}}finally{L.T=c,q.p=b}}(Qa&3)!==0&&wf(),ri(a),b=a.pendingLanes,(f&4194090)!==0&&(b&42)!==0?a===gy?Lc++:(Lc=0,gy=a):Lc=0,Pc(0)}}function jN(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,mc(c)))}function wf(a){return DN(),RN(),ON(),LN()}function LN(){if(fn!==5)return!1;var a=vs,c=py;py=0;var f=lo(Qa),m=L.T,b=q.p;try{q.p=32>f?32:f,L.T=null,f=my,my=null;var E=vs,M=Qa;if(fn=0,Za=vs=null,Qa=0,(nt&6)!==0)throw Error(r(331));var O=nt;if(nt|=4,vN(E.current),mN(E,E.current,M,f),nt=O,Pc(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Kt,E)}catch{}return!0}finally{q.p=b,L.T=m,jN(a,c)}}function PN(a,c,f){c=gr(f,c),c=Yg(a.stateNode,c,2),a=ls(a,c,2),a!==null&&(xi(a,2),ri(a))}function ct(a,c,f){if(a.tag===3)PN(a,a,f);else for(;c!==null;){if(c.tag===3){PN(c,a,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ys===null||!ys.has(m))){a=gr(f,a),f=qT(2),m=ls(c,f,2),m!==null&&(VT(f,m,c,a),xi(m,2),ri(m));break}}c=c.return}}function xy(a,c,f){var m=a.pingCache;if(m===null){m=a.pingCache=new Q8;var b=new Set;m.set(c,b)}else b=m.get(c),b===void 0&&(b=new Set,m.set(c,b));b.has(f)||(uy=!0,b.add(f),a=rH.bind(null,a,c,f),c.then(a,a))}function rH(a,c,f){var m=a.pingCache;m!==null&&m.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,ft===a&&(Qe&f)===f&&(Nt===4||Nt===3&&(Qe&62914560)===Qe&&300>Ae()-hy?(nt&2)===0&&Ja(a,0):dy|=f,Xa===Qe&&(Xa=0)),ri(a)}function BN(a,c){c===0&&(c=bi()),a=La(a,c),a!==null&&(xi(a,c),ri(a))}function iH(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),BN(a,f)}function sH(a,c){var f=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),BN(a,f)}function oH(a,c){return Ee(a,c)}var Sf=null,tl=null,wy=!1,Ef=!1,Sy=!1,Mo=0;function ri(a){a!==tl&&a.next===null&&(tl===null?Sf=tl=a:tl=tl.next=a),Ef=!0,wy||(wy=!0,lH())}function Pc(a,c){if(!Sy&&Ef){Sy=!0;do for(var f=!1,m=Sf;m!==null;){if(a!==0){var b=m.pendingLanes;if(b===0)var E=0;else{var M=m.suspendedLanes,O=m.pingedLanes;E=(1<<31-Ct(42|a)+1)-1,E&=b&~(M&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(f=!0,VN(m,E))}else E=Qe,E=vi(m,m===ft?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Wr(m,E)||(f=!0,VN(m,E));m=m.next}while(f);Sy=!1}}function aH(){IN()}function IN(){Ef=wy=!1;var a=0;Mo!==0&&(gH()&&(a=Mo),Mo=0);for(var c=Ae(),f=null,m=Sf;m!==null;){var b=m.next,E=zN(m,c);E===0?(m.next=null,f===null?Sf=b:f.next=b,b===null&&(tl=f)):(f=m,(a!==0||(E&3)!==0)&&(Ef=!0)),m=b}Pc(a)}function zN(a,c){for(var f=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,E=a.pendingLanes&-62914561;0<E;){var M=31-Ct(E),O=1<<M,F=b[M];F===-1?((O&f)===0||(O&m)!==0)&&(b[M]=Zl(O,c)):F<=c&&(a.expiredLanes|=O),E&=~O}if(c=ft,f=Qe,f=vi(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,f===0||a===c&&(rt===2||rt===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&xe(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Wr(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(m!==null&&xe(m),lo(f)){case 2:case 8:f=dr;break;case 32:f=xn;break;case 268435456:f=ht;break;default:f=xn}return m=qN.bind(null,a),f=Ee(f,m),a.callbackPriority=c,a.callbackNode=f,c}return m!==null&&m!==null&&xe(m),a.callbackPriority=2,a.callbackNode=null,2}function qN(a,c){if(fn!==0&&fn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(wf()&&a.callbackNode!==f)return null;var m=Qe;return m=vi(a,a===ft?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(SN(a,m,c),zN(a,Ae()),a.callbackNode!=null&&a.callbackNode===f?qN.bind(null,a):null)}function VN(a,c){if(wf())return null;SN(a,c,!0)}function lH(){vH(function(){(nt&6)!==0?Ee(bn,aH):IN()})}function Ey(){return Mo===0&&(Mo=io()),Mo}function HN(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Od(""+a)}function FN(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function cH(a,c,f,m,b){if(c==="submit"&&f&&f.stateNode===b){var E=HN((b[en]||null).action),M=m.submitter;M&&(c=(c=M[en]||null)?HN(c.formAction):M.getAttribute("formAction"),c!==null&&(E=c,M=null));var O=new Bd("action","action",null,m,b);a.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Mo!==0){var F=M?FN(b,M):new FormData(b);Fg(f,{pending:!0,data:F,method:b.method,action:E},null,F)}}else typeof E=="function"&&(O.preventDefault(),F=M?FN(b,M):new FormData(b),Fg(f,{pending:!0,data:F,method:b.method,action:E},E,F))},currentTarget:b}]})}}for(var Cy=0;Cy<lg.length;Cy++){var ky=lg[Cy],uH=ky.toLowerCase(),dH=ky[0].toUpperCase()+ky.slice(1);Br(uH,"on"+dH)}Br(S2,"onAnimationEnd"),Br(E2,"onAnimationIteration"),Br(C2,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(A8,"onTransitionRun"),Br(M8,"onTransitionStart"),Br(_8,"onTransitionCancel"),Br(k2,"onTransitionEnd"),ne("onMouseEnter",["mouseout","mouseover"]),ne("onMouseLeave",["mouseout","mouseover"]),ne("onPointerEnter",["pointerout","pointerover"]),ne("onPointerLeave",["pointerout","pointerover"]),ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bc));function UN(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],b=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var M=m.length-1;0<=M;M--){var O=m[M],F=O.instance,re=O.currentTarget;if(O=O.listener,F!==E&&b.isPropagationStopped())break e;E=O,b.currentTarget=re;try{E(b)}catch(ue){uf(ue)}b.currentTarget=null,E=F}else for(M=0;M<m.length;M++){if(O=m[M],F=O.instance,re=O.currentTarget,O=O.listener,F!==E&&b.isPropagationStopped())break e;E=O,b.currentTarget=re;try{E(b)}catch(ue){uf(ue)}b.currentTarget=null,E=F}}}}function We(a,c){var f=c[co];f===void 0&&(f=c[co]=new Set);var m=a+"__bubble";f.has(m)||($N(c,a,2,!1),f.add(m))}function Ty(a,c,f){var m=0;c&&(m|=4),$N(f,a,m,c)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function Ny(a){if(!a[Cf]){a[Cf]=!0,Ca.forEach(function(f){f!=="selectionchange"&&(fH.has(f)||Ty(f,!1,a),Ty(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Cf]||(c[Cf]=!0,Ty("selectionchange",!1,c))}}function $N(a,c,f,m){switch(mA(c)){case 2:var b=zH;break;case 8:b=qH;break;default:b=Vy}f=b.bind(null,c,f,a),b=void 0,!Wm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(c,f,{capture:!0,passive:b}):a.addEventListener(c,f,!0):b!==void 0?a.addEventListener(c,f,{passive:b}):a.addEventListener(c,f,!1)}function Ay(a,c,f,m,b){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var O=m.stateNode.containerInfo;if(O===b)break;if(M===4)for(M=m.return;M!==null;){var F=M.tag;if((F===3||F===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;O!==null;){if(M=Zr(O),M===null)return;if(F=M.tag,F===5||F===6||F===26||F===27){m=E=M;continue e}O=O.parentNode}}m=m.return}Qk(function(){var re=E,ue=Km(f),fe=[];e:{var oe=T2.get(a);if(oe!==void 0){var ae=Bd,Ie=a;switch(a){case"keypress":if(Ld(f)===0)break e;case"keydown":case"keyup":ae=o8;break;case"focusin":Ie="focus",ae=Jm;break;case"focusout":Ie="blur",ae=Jm;break;case"beforeblur":case"afterblur":ae=Jm;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=t2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=YV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=c8;break;case S2:case E2:case C2:ae=ZV;break;case k2:ae=d8;break;case"scroll":case"scrollend":ae=GV;break;case"wheel":ae=h8;break;case"copy":case"cut":case"paste":ae=JV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=r2;break;case"toggle":case"beforetoggle":ae=m8}var Oe=(c&4)!==0,at=!Oe&&(a==="scroll"||a==="scrollend"),Q=Oe?oe!==null?oe+"Capture":null:oe;Oe=[];for(var K=re,te;K!==null;){var de=K;if(te=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||te===null||Q===null||(de=nc(K,Q),de!=null&&Oe.push(Ic(K,de,te))),at)break;K=K.return}0<Oe.length&&(oe=new ae(oe,Ie,null,f,ue),fe.push({event:oe,listeners:Oe}))}}if((c&7)===0){e:{if(oe=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",oe&&f!==Gm&&(Ie=f.relatedTarget||f.fromElement)&&(Zr(Ie)||Ie[Xr]))break e;if((ae||oe)&&(oe=ue.window===ue?ue:(oe=ue.ownerDocument)?oe.defaultView||oe.parentWindow:window,ae?(Ie=f.relatedTarget||f.toElement,ae=re,Ie=Ie?Zr(Ie):null,Ie!==null&&(at=s(Ie),Oe=Ie.tag,Ie!==at||Oe!==5&&Oe!==27&&Oe!==6)&&(Ie=null)):(ae=null,Ie=re),ae!==Ie)){if(Oe=t2,de="onMouseLeave",Q="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&(Oe=r2,de="onPointerLeave",Q="onPointerEnter",K="pointer"),at=ae==null?oe:Qr(ae),te=Ie==null?oe:Qr(Ie),oe=new Oe(de,K+"leave",ae,f,ue),oe.target=at,oe.relatedTarget=te,de=null,Zr(ue)===re&&(Oe=new Oe(Q,K+"enter",Ie,f,ue),Oe.target=te,Oe.relatedTarget=at,de=Oe),at=de,ae&&Ie)t:{for(Oe=ae,Q=Ie,K=0,te=Oe;te;te=nl(te))K++;for(te=0,de=Q;de;de=nl(de))te++;for(;0<K-te;)Oe=nl(Oe),K--;for(;0<te-K;)Q=nl(Q),te--;for(;K--;){if(Oe===Q||Q!==null&&Oe===Q.alternate)break t;Oe=nl(Oe),Q=nl(Q)}Oe=null}else Oe=null;ae!==null&&GN(fe,oe,ae,Oe,!1),Ie!==null&&at!==null&&GN(fe,at,Ie,Oe,!0)}}e:{if(oe=re?Qr(re):window,ae=oe.nodeName&&oe.nodeName.toLowerCase(),ae==="select"||ae==="input"&&oe.type==="file")var Se=d2;else if(c2(oe))if(f2)Se=k8;else{Se=E8;var Ke=S8}else ae=oe.nodeName,!ae||ae.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?re&&$m(re.elementType)&&(Se=d2):Se=C8;if(Se&&(Se=Se(a,re))){u2(fe,Se,f,ue);break e}Ke&&Ke(a,oe,re),a==="focusout"&&re&&oe.type==="number"&&re.memoizedProps.value!=null&&tc(oe,"number",oe.value)}switch(Ke=re?Qr(re):window,a){case"focusin":(c2(Ke)||Ke.contentEditable==="true")&&(Ra=Ke,sg=re,uc=null);break;case"focusout":uc=sg=Ra=null;break;case"mousedown":og=!0;break;case"contextmenu":case"mouseup":case"dragend":og=!1,x2(fe,f,ue);break;case"selectionchange":if(N8)break;case"keydown":case"keyup":x2(fe,f,ue)}var Me;if(tg)e:{switch(a){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Da?a2(a,f)&&(Le="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Le="onCompositionStart");Le&&(i2&&f.locale!=="ko"&&(Da||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Da&&(Me=Jk()):(rs=ue,Xm="value"in rs?rs.value:rs.textContent,Da=!0)),Ke=kf(re,Le),0<Ke.length&&(Le=new n2(Le,a,null,f,ue),fe.push({event:Le,listeners:Ke}),Me?Le.data=Me:(Me=l2(f),Me!==null&&(Le.data=Me)))),(Me=y8?v8(a,f):b8(a,f))&&(Le=kf(re,"onBeforeInput"),0<Le.length&&(Ke=new n2("onBeforeInput","beforeinput",null,f,ue),fe.push({event:Ke,listeners:Le}),Ke.data=Me)),cH(fe,a,re,f,ue)}UN(fe,c)})}function Ic(a,c,f){return{instance:a,listener:c,currentTarget:f}}function kf(a,c){for(var f=c+"Capture",m=[];a!==null;){var b=a,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=nc(a,f),b!=null&&m.unshift(Ic(a,b,E)),b=nc(a,c),b!=null&&m.push(Ic(a,b,E))),a.tag===3)return m;a=a.return}return[]}function nl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function GN(a,c,f,m,b){for(var E=c._reactName,M=[];f!==null&&f!==m;){var O=f,F=O.alternate,re=O.stateNode;if(O=O.tag,F!==null&&F===m)break;O!==5&&O!==26&&O!==27||re===null||(F=re,b?(re=nc(f,E),re!=null&&M.unshift(Ic(f,re,F))):b||(re=nc(f,E),re!=null&&M.push(Ic(f,re,F)))),f=f.return}M.length!==0&&a.push({event:c,listeners:M})}var hH=/\r\n?/g,pH=/\u0000|\uFFFD/g;function KN(a){return(typeof a=="string"?a:""+a).replace(hH,`
`).replace(pH,"")}function YN(a,c){return c=KN(c),KN(a)===c}function Tf(){}function ot(a,c,f,m,b,E){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Aa(a,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Aa(a,""+m);break;case"className":He(a,"class",m);break;case"tabIndex":He(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":He(a,f,m);break;case"style":Xk(a,m,E);break;case"data":if(c!=="object"){He(a,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Od(""+m),a.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(c!=="input"&&ot(a,c,"name",b.name,b,null),ot(a,c,"formEncType",b.formEncType,b,null),ot(a,c,"formMethod",b.formMethod,b,null),ot(a,c,"formTarget",b.formTarget,b,null)):(ot(a,c,"encType",b.encType,b,null),ot(a,c,"method",b.method,b,null),ot(a,c,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Od(""+m),a.setAttribute(f,m);break;case"onClick":m!=null&&(a.onclick=Tf);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}f=Od(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""+m):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":m===!0?a.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,m):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(f,m):a.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(f):a.setAttribute(f,m);break;case"popover":We("beforetoggle",a),We("toggle",a),Be(a,"popover",m);break;case"xlinkActuate":lt(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":lt(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":lt(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":lt(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":lt(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":lt(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":lt(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":lt(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":lt(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Be(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=UV.get(f)||f,Be(a,f,m))}}function My(a,c,f,m,b,E){switch(f){case"style":Xk(a,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof m=="string"?Aa(a,m):(typeof m=="number"||typeof m=="bigint")&&Aa(a,""+m);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Tf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ka.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),c=f.slice(2,b?f.length-7:void 0),E=a[en]||null,E=E!=null?E[f]:null,typeof E=="function"&&a.removeEventListener(c,E,b),typeof m=="function")){typeof E!="function"&&E!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,m,b);break e}f in a?a[f]=m:m===!0?a.setAttribute(f,""):Be(a,f,m)}}}function hn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var m=!1,b=!1,E;for(E in f)if(f.hasOwnProperty(E)){var M=f[E];if(M!=null)switch(E){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ot(a,c,E,M,f,null)}}b&&ot(a,c,"srcSet",f.srcSet,f,null),m&&ot(a,c,"src",f.src,f,null);return;case"input":We("invalid",a);var O=E=M=b=null,F=null,re=null;for(m in f)if(f.hasOwnProperty(m)){var ue=f[m];if(ue!=null)switch(m){case"name":b=ue;break;case"type":M=ue;break;case"checked":F=ue;break;case"defaultChecked":re=ue;break;case"value":E=ue;break;case"defaultValue":O=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:ot(a,c,m,ue,f,null)}}Rd(a,E,O,F,re,M,b,!1),Ta(a);return;case"select":We("invalid",a),m=M=E=null;for(b in f)if(f.hasOwnProperty(b)&&(O=f[b],O!=null))switch(b){case"value":E=O;break;case"defaultValue":M=O;break;case"multiple":m=O;default:ot(a,c,b,O,f,null)}c=E,f=M,a.multiple=!!m,c!=null?Si(a,!!m,c,!1):f!=null&&Si(a,!!m,f,!0);return;case"textarea":We("invalid",a),E=b=m=null;for(M in f)if(f.hasOwnProperty(M)&&(O=f[M],O!=null))switch(M){case"value":m=O;break;case"defaultValue":b=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(r(91));break;default:ot(a,c,M,O,f,null)}Yk(a,m,b,E),Ta(a);return;case"option":for(F in f)if(f.hasOwnProperty(F)&&(m=f[F],m!=null))switch(F){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ot(a,c,F,m,f,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(m=0;m<Bc.length;m++)We(Bc[m],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(m=f[re],m!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ot(a,c,re,m,f,null)}return;default:if($m(c)){for(ue in f)f.hasOwnProperty(ue)&&(m=f[ue],m!==void 0&&My(a,c,ue,m,f,void 0));return}}for(O in f)f.hasOwnProperty(O)&&(m=f[O],m!=null&&ot(a,c,O,m,f,null))}function mH(a,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,M=null,O=null,F=null,re=null,ue=null;for(ae in f){var fe=f[ae];if(f.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=fe;default:m.hasOwnProperty(ae)||ot(a,c,ae,null,m,fe)}}for(var oe in m){var ae=m[oe];if(fe=f[oe],m.hasOwnProperty(oe)&&(ae!=null||fe!=null))switch(oe){case"type":E=ae;break;case"name":b=ae;break;case"checked":re=ae;break;case"defaultChecked":ue=ae;break;case"value":M=ae;break;case"defaultValue":O=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,c));break;default:ae!==fe&&ot(a,c,oe,ae,m,fe)}}ho(a,M,O,F,re,ue,E,b);return;case"select":ae=M=O=oe=null;for(E in f)if(F=f[E],f.hasOwnProperty(E)&&F!=null)switch(E){case"value":break;case"multiple":ae=F;default:m.hasOwnProperty(E)||ot(a,c,E,null,m,F)}for(b in m)if(E=m[b],F=f[b],m.hasOwnProperty(b)&&(E!=null||F!=null))switch(b){case"value":oe=E;break;case"defaultValue":O=E;break;case"multiple":M=E;default:E!==F&&ot(a,c,b,E,m,F)}c=O,f=M,m=ae,oe!=null?Si(a,!!f,oe,!1):!!m!=!!f&&(c!=null?Si(a,!!f,c,!0):Si(a,!!f,f?[]:"",!1));return;case"textarea":ae=oe=null;for(O in f)if(b=f[O],f.hasOwnProperty(O)&&b!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:ot(a,c,O,null,m,b)}for(M in m)if(b=m[M],E=f[M],m.hasOwnProperty(M)&&(b!=null||E!=null))switch(M){case"value":oe=b;break;case"defaultValue":ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==E&&ot(a,c,M,b,m,E)}Kk(a,oe,ae);return;case"option":for(var Ie in f)if(oe=f[Ie],f.hasOwnProperty(Ie)&&oe!=null&&!m.hasOwnProperty(Ie))switch(Ie){case"selected":a.selected=!1;break;default:ot(a,c,Ie,null,m,oe)}for(F in m)if(oe=m[F],ae=f[F],m.hasOwnProperty(F)&&oe!==ae&&(oe!=null||ae!=null))switch(F){case"selected":a.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:ot(a,c,F,oe,m,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in f)oe=f[Oe],f.hasOwnProperty(Oe)&&oe!=null&&!m.hasOwnProperty(Oe)&&ot(a,c,Oe,null,m,oe);for(re in m)if(oe=m[re],ae=f[re],m.hasOwnProperty(re)&&oe!==ae&&(oe!=null||ae!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,c));break;default:ot(a,c,re,oe,m,ae)}return;default:if($m(c)){for(var at in f)oe=f[at],f.hasOwnProperty(at)&&oe!==void 0&&!m.hasOwnProperty(at)&&My(a,c,at,void 0,m,oe);for(ue in m)oe=m[ue],ae=f[ue],!m.hasOwnProperty(ue)||oe===ae||oe===void 0&&ae===void 0||My(a,c,ue,oe,m,ae);return}}for(var Q in f)oe=f[Q],f.hasOwnProperty(Q)&&oe!=null&&!m.hasOwnProperty(Q)&&ot(a,c,Q,null,m,oe);for(fe in m)oe=m[fe],ae=f[fe],!m.hasOwnProperty(fe)||oe===ae||oe==null&&ae==null||ot(a,c,fe,oe,m,ae)}var _y=null,Dy=null;function Nf(a){return a.nodeType===9?a:a.ownerDocument}function WN(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XN(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function Ry(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Oy=null;function gH(){var a=window.event;return a&&a.type==="popstate"?a===Oy?!1:(Oy=a,!0):(Oy=null,!1)}var ZN=typeof setTimeout=="function"?setTimeout:void 0,yH=typeof clearTimeout=="function"?clearTimeout:void 0,QN=typeof Promise=="function"?Promise:void 0,vH=typeof queueMicrotask=="function"?queueMicrotask:typeof QN<"u"?function(a){return QN.resolve(null).then(a).catch(bH)}:ZN;function bH(a){setTimeout(function(){throw a})}function xs(a){return a==="head"}function JN(a,c){var f=c,m=0,b=0;do{var E=f.nextSibling;if(a.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(0<m&&8>m){f=m;var M=a.ownerDocument;if(f&1&&zc(M.documentElement),f&2&&zc(M.body),f&4)for(f=M.head,zc(f),M=f.firstChild;M;){var O=M.nextSibling,F=M.nodeName;M[wi]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=O}}if(b===0){a.removeChild(E),Kc(c);return}b--}else f==="$"||f==="$?"||f==="$!"?b++:m=f.charCodeAt(0)-48;else m=0;f=E}while(f);Kc(c)}function jy(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":jy(f),fo(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function xH(a,c,f,m){for(;a.nodeType===1;){var b=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[wi])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(E=a.getAttribute("rel"),E==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(E!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(E=a.getAttribute("src"),(E!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===E)return a}else return a;if(a=zr(a.nextSibling),a===null)break}return null}function wH(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=zr(a.nextSibling),a===null))return null;return a}function Ly(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function SH(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var m=function(){c(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function zr(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var Py=null;function eA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function tA(a,c,f){switch(c=Nf(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function zc(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);fo(a)}var Sr=new Map,nA=new Set;function Af(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Pi=q.d;q.d={f:EH,r:CH,D:kH,C:TH,L:NH,m:AH,X:_H,S:MH,M:DH};function EH(){var a=Pi.f(),c=bf();return a||c}function CH(a){var c=pr(a);c!==null&&c.tag===5&&c.type==="form"?ST(c):Pi.r(a)}var rl=typeof document>"u"?null:document;function rA(a,c,f){var m=rl;if(m&&typeof c=="string"&&c){var b=Pn(c);b='link[rel="'+a+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),nA.has(b)||(nA.add(b),a={rel:a,crossOrigin:f,href:c},m.querySelector(b)===null&&(c=m.createElement("link"),hn(c,"link",a),kt(c),m.head.appendChild(c)))}}function kH(a){Pi.D(a),rA("dns-prefetch",a,null)}function TH(a,c){Pi.C(a,c),rA("preconnect",a,c)}function NH(a,c,f){Pi.L(a,c,f);var m=rl;if(m&&a&&c){var b='link[rel="preload"][as="'+Pn(c)+'"]';c==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Pn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Pn(f.imageSizes)+'"]')):b+='[href="'+Pn(a)+'"]';var E=b;switch(c){case"style":E=il(a);break;case"script":E=sl(a)}Sr.has(E)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),Sr.set(E,a),m.querySelector(b)!==null||c==="style"&&m.querySelector(qc(E))||c==="script"&&m.querySelector(Vc(E))||(c=m.createElement("link"),hn(c,"link",a),kt(c),m.head.appendChild(c)))}}function AH(a,c){Pi.m(a,c);var f=rl;if(f&&a){var m=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Pn(m)+'"][href="'+Pn(a)+'"]',E=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=sl(a)}if(!Sr.has(E)&&(a=h({rel:"modulepreload",href:a},c),Sr.set(E,a),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Vc(E)))return}m=f.createElement("link"),hn(m,"link",a),kt(m),f.head.appendChild(m)}}}function MH(a,c,f){Pi.S(a,c,f);var m=rl;if(m&&a){var b=Pr(m).hoistableStyles,E=il(a);c=c||"default";var M=b.get(E);if(!M){var O={loading:0,preload:null};if(M=m.querySelector(qc(E)))O.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=Sr.get(E))&&By(a,f);var F=M=m.createElement("link");kt(F),hn(F,"link",a),F._p=new Promise(function(re,ue){F.onload=re,F.onerror=ue}),F.addEventListener("load",function(){O.loading|=1}),F.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Mf(M,c,m)}M={type:"stylesheet",instance:M,count:1,state:O},b.set(E,M)}}}function _H(a,c){Pi.X(a,c);var f=rl;if(f&&a){var m=Pr(f).hoistableScripts,b=sl(a),E=m.get(b);E||(E=f.querySelector(Vc(b)),E||(a=h({src:a,async:!0},c),(c=Sr.get(b))&&Iy(a,c),E=f.createElement("script"),kt(E),hn(E,"link",a),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function DH(a,c){Pi.M(a,c);var f=rl;if(f&&a){var m=Pr(f).hoistableScripts,b=sl(a),E=m.get(b);E||(E=f.querySelector(Vc(b)),E||(a=h({src:a,async:!0,type:"module"},c),(c=Sr.get(b))&&Iy(a,c),E=f.createElement("script"),kt(E),hn(E,"link",a),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function iA(a,c,f,m){var b=(b=Z.current)?Af(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=il(f.href),f=Pr(b).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=il(f.href);var E=Pr(b).hoistableStyles,M=E.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(a,M),(E=b.querySelector(qc(a)))&&!E._p&&(M.instance=E,M.state.loading=5),Sr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Sr.set(a,f),E||RH(b,a,f,M.state))),c&&m===null)throw Error(r(528,""));return M}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=sl(f),f=Pr(b).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function il(a){return'href="'+Pn(a)+'"'}function qc(a){return'link[rel="stylesheet"]['+a+"]"}function sA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function RH(a,c,f,m){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=a.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),hn(c,"link",f),kt(c),a.head.appendChild(c))}function sl(a){return'[src="'+Pn(a)+'"]'}function Vc(a){return"script[async]"+a}function oA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=a.querySelector('style[data-href~="'+Pn(f.href)+'"]');if(m)return c.instance=m,kt(m),m;var b=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),kt(m),hn(m,"style",b),Mf(m,f.precedence,a),c.instance=m;case"stylesheet":b=il(f.href);var E=a.querySelector(qc(b));if(E)return c.state.loading|=4,c.instance=E,kt(E),E;m=sA(f),(b=Sr.get(b))&&By(m,b),E=(a.ownerDocument||a).createElement("link"),kt(E);var M=E;return M._p=new Promise(function(O,F){M.onload=O,M.onerror=F}),hn(E,"link",m),c.state.loading|=4,Mf(E,f.precedence,a),c.instance=E;case"script":return E=sl(f.src),(b=a.querySelector(Vc(E)))?(c.instance=b,kt(b),b):(m=f,(b=Sr.get(E))&&(m=h({},f),Iy(m,b)),a=a.ownerDocument||a,b=a.createElement("script"),kt(b),hn(b,"link",m),a.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Mf(m,f.precedence,a));return c.instance}function Mf(a,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,E=b,M=0;M<m.length;M++){var O=m[M];if(O.dataset.precedence===c)E=O;else if(E!==b)break}E?E.parentNode.insertBefore(a,E.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function By(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Iy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var _f=null;function aA(a,c,f){if(_f===null){var m=new Map,b=_f=new Map;b.set(f,m)}else b=_f,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(a))return m;for(m.set(a,null),f=f.getElementsByTagName(a),b=0;b<f.length;b++){var E=f[b];if(!(E[wi]||E[It]||a==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var M=E.getAttribute(c)||"";M=a+M;var O=m.get(M);O?O.push(E):m.set(M,[E])}}return m}function lA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function OH(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function cA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Hc=null;function jH(){}function LH(a,c,f){if(Hc===null)throw Error(r(475));var m=Hc;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=il(f.href),E=a.querySelector(qc(b));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Df.bind(m),a.then(m,m)),c.state.loading|=4,c.instance=E,kt(E);return}E=a.ownerDocument||a,f=sA(f),(b=Sr.get(b))&&By(f,b),E=E.createElement("link"),kt(E);var M=E;M._p=new Promise(function(O,F){M.onload=O,M.onerror=F}),hn(E,"link",f),c.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Df.bind(m),a.addEventListener("load",c),a.addEventListener("error",c))}}function PH(){if(Hc===null)throw Error(r(475));var a=Hc;return a.stylesheets&&a.count===0&&zy(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&zy(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Df(){if(this.count--,this.count===0){if(this.stylesheets)zy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Rf=null;function zy(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Rf=new Map,c.forEach(BH,a),Rf=null,Df.call(a))}function BH(a,c){if(!(c.state.loading&4)){var f=Rf.get(a);if(f)var m=f.get(null);else{f=new Map,Rf.set(a,f);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var M=b[E];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(f.set(M.dataset.precedence,M),m=M)}m&&f.set(null,m)}b=c.instance,M=b.getAttribute("data-precedence"),E=f.get(M)||m,E===m&&f.set(null,b),f.set(M,b),this.count++,m=Df.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),E?E.parentNode.insertBefore(b,E.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),c.state.loading|=4}}var Fc={$$typeof:k,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function IH(a,c,f,m,b,E,M,O){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=so(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=so(0),this.hiddenUpdates=so(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function uA(a,c,f,m,b,E,M,O,F,re,ue,fe){return a=new IH(a,c,f,M,O,F,re,fe),c=1,E===!0&&(c|=24),E=Xn(3,null,null,c),a.current=E,E.stateNode=a,c=xg(),c.refCount++,a.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:f,cache:c},Cg(E),a}function dA(a){return a?(a=Pa,a):Pa}function fA(a,c,f,m,b,E){b=dA(b),m.context===null?m.context=b:m.pendingContext=b,m=as(c),m.payload={element:f},E=E===void 0?null:E,E!==null&&(m.callback=E),f=ls(a,m,c),f!==null&&(tr(f,a,c),bc(f,a,c))}function hA(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function qy(a,c){hA(a,c),(a=a.alternate)&&hA(a,c)}function pA(a){if(a.tag===13){var c=La(a,67108864);c!==null&&tr(c,a,67108864),qy(a,67108864)}}var Of=!0;function zH(a,c,f,m){var b=L.T;L.T=null;var E=q.p;try{q.p=2,Vy(a,c,f,m)}finally{q.p=E,L.T=b}}function qH(a,c,f,m){var b=L.T;L.T=null;var E=q.p;try{q.p=8,Vy(a,c,f,m)}finally{q.p=E,L.T=b}}function Vy(a,c,f,m){if(Of){var b=Hy(m);if(b===null)Ay(a,c,m,jf,f),gA(a,m);else if(HH(b,a,c,f,m))m.stopPropagation();else if(gA(a,m),c&4&&-1<VH.indexOf(a)){for(;b!==null;){var E=pr(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var M=Yn(E.pendingLanes);if(M!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;M;){var F=1<<31-Ct(M);O.entanglements[1]|=F,M&=~F}ri(E),(nt&6)===0&&(yf=Ae()+500,Pc(0))}}break;case 13:O=La(E,2),O!==null&&tr(O,E,2),bf(),qy(E,2)}if(E=Hy(m),E===null&&Ay(a,c,m,jf,f),E===b)break;b=E}b!==null&&m.stopPropagation()}else Ay(a,c,m,null,f)}}function Hy(a){return a=Km(a),Fy(a)}var jf=null;function Fy(a){if(jf=null,a=Zr(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return jf=a,null}function mA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case bn:return 2;case dr:return 8;case xn:case Qt:return 32;case ht:return 268435456;default:return 32}default:return 32}}var Uy=!1,ws=null,Ss=null,Es=null,Uc=new Map,$c=new Map,Cs=[],VH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gA(a,c){switch(a){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":Uc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(c.pointerId)}}function Gc(a,c,f,m,b,E){return a===null||a.nativeEvent!==E?(a={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:E,targetContainers:[b]},c!==null&&(c=pr(c),c!==null&&pA(c)),a):(a.eventSystemFlags|=m,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function HH(a,c,f,m,b){switch(c){case"focusin":return ws=Gc(ws,a,c,f,m,b),!0;case"dragenter":return Ss=Gc(Ss,a,c,f,m,b),!0;case"mouseover":return Es=Gc(Es,a,c,f,m,b),!0;case"pointerover":var E=b.pointerId;return Uc.set(E,Gc(Uc.get(E)||null,a,c,f,m,b)),!0;case"gotpointercapture":return E=b.pointerId,$c.set(E,Gc($c.get(E)||null,a,c,f,m,b)),!0}return!1}function yA(a){var c=Zr(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,ns(a.priority,function(){if(f.tag===13){var m=er();m=ao(m);var b=La(f,m);b!==null&&tr(b,f,m),qy(f,m)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Lf(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Hy(a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Gm=m,f.target.dispatchEvent(m),Gm=null}else return c=pr(f),c!==null&&pA(c),a.blockedOn=f,!1;c.shift()}return!0}function vA(a,c,f){Lf(a)&&f.delete(c)}function FH(){Uy=!1,ws!==null&&Lf(ws)&&(ws=null),Ss!==null&&Lf(Ss)&&(Ss=null),Es!==null&&Lf(Es)&&(Es=null),Uc.forEach(vA),$c.forEach(vA)}function Pf(a,c){a.blockedOn===c&&(a.blockedOn=null,Uy||(Uy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,FH)))}var Bf=null;function bA(a){Bf!==a&&(Bf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Bf===a&&(Bf=null);for(var c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],b=a[c+2];if(typeof m!="function"){if(Fy(m||f)===null)continue;break}var E=pr(f);E!==null&&(a.splice(c,3),c-=3,Fg(E,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function Kc(a){function c(F){return Pf(F,a)}ws!==null&&Pf(ws,a),Ss!==null&&Pf(Ss,a),Es!==null&&Pf(Es,a),Uc.forEach(c),$c.forEach(c);for(var f=0;f<Cs.length;f++){var m=Cs[f];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Cs.length&&(f=Cs[0],f.blockedOn===null);)yA(f),f.blockedOn===null&&Cs.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],E=f[m+1],M=b[en]||null;if(typeof E=="function")M||bA(f);else if(M){var O=null;if(E&&E.hasAttribute("formAction")){if(b=E,M=E[en]||null)O=M.formAction;else if(Fy(b)!==null)continue}else O=M.action;typeof O=="function"?f[m+1]=O:(f.splice(m,3),m-=3),bA(f)}}}function $y(a){this._internalRoot=a}If.prototype.render=$y.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,m=er();fA(f,m,a,c,null,null)},If.prototype.unmount=$y.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;fA(a.current,2,null,a,null,null),bf(),c[Xr]=null}};function If(a){this._internalRoot=a}If.prototype.unstable_scheduleHydration=function(a){if(a){var c=Sa();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Cs.length&&c!==0&&c<Cs[f].priority;f++);Cs.splice(f,0,a),f===0&&yA(a)}};var xA=t.version;if(xA!=="19.1.1")throw Error(r(527,xA,"19.1.1"));q.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var UH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zf.isDisabled&&zf.supportsFiber)try{Kt=zf.inject(UH),dt=zf}catch{}}return Wc.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,m="",b=PT,E=BT,M=IT,O=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks)),c=uA(a,1,!1,null,null,f,m,b,E,M,O,null),a[Xr]=c.current,Ny(a),new $y(c)},Wc.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var m=!1,b="",E=PT,M=BT,O=IT,F=null,re=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(O=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(F=f.unstable_transitionCallbacks),f.formState!==void 0&&(re=f.formState)),c=uA(a,1,!0,c,f??null,m,b,E,M,O,F,re),c.context=dA(null),f=c.current,m=er(),m=ao(m),b=as(m),b.callback=null,ls(f,b,m),f=m,c.current.lanes=f,xi(c,f),ri(c),a[Xr]=c.current,Ny(a),new If(c)},Wc.version="19.1.1",Wc}var _A;function tF(){if(_A)return Yy.exports;_A=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Yy.exports=eF(),Yy.exports}var nF=tF(),rF=lP();const cP=od(rF);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_u.apply(this,arguments)}var Bs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Bs||(Bs={}));const DA="popstate";function iF(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:u=""}=ua(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),bS("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:uP(s))}function r(i,s){zE(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return oF(t,n,r,e)}function Xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sF(){return Math.random().toString(36).substr(2,8)}function RA(e,t){return{usr:e.state,key:e.key,idx:t}}function bS(e,t,n,r){return n===void 0&&(n=null),_u({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ua(t):t,{state:n,key:t&&t.key||r||sF()})}function uP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ua(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oF(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Bs.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(_u({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Bs.Pop;let w=h(),C=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:C})}function g(w,C){l=Bs.Push;let N=bS(S.location,w,C);n&&n(N,w),d=h()+1;let k=RA(N,d),T=S.createHref(N);try{o.pushState(k,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&u&&u({action:l,location:S.location,delta:1})}function y(w,C){l=Bs.Replace;let N=bS(S.location,w,C);n&&n(N,w),d=h();let k=RA(N,d),T=S.createHref(N);o.replaceState(k,"",T),s&&u&&u({action:l,location:S.location,delta:0})}function x(w){let C=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof w=="string"?w:uP(w);return N=N.replace(/ $/,"%20"),Xt(C,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,C)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(DA,p),u=w,()=>{i.removeEventListener(DA,p),u=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let C=x(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:y,go(w){return o.go(w)}};return S}var OA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(OA||(OA={}));function aF(e,t,n){return n===void 0&&(n="/"),lF(e,t,n)}function lF(e,t,n,r){let i=typeof t=="string"?ua(t):t,s=hP(i.pathname||"/",n);if(s==null)return null;let o=dP(e);cF(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=wF(s);l=vF(o[u],d)}return l}function dP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Xt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Uo([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Xt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),dP(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:gF(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of fP(s.path))i(s,o,u)}),t}function fP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=fP(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function cF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uF=/^:[\w-]+$/,dF=3,fF=2,hF=1,pF=10,mF=-2,jA=e=>e==="*";function gF(e,t){let n=e.split("/"),r=n.length;return n.some(jA)&&(r+=mF),t&&(r+=fF),n.filter(i=>!jA(i)).reduce((i,s)=>i+(uF.test(s)?dF:s===""?hF:pF),r)}function yF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function vF(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=bF({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Uo([s,p.pathname]),pathnameBase:NF(Uo([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Uo([s,p.pathnameBase]))}return o}function bF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xF(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[p];return y&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function xF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),zE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function SF(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ua(e):e;return{pathname:n?n.startsWith("/")?n:EF(n,t):t,search:AF(r),hash:MF(i)}}function EF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Qy(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kF(e,t){let n=CF(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TF(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ua(e):(i=_u({},e),Xt(!i.pathname||!i.pathname.includes("?"),Qy("?","pathname","search",i)),Xt(!i.pathname||!i.pathname.includes("#"),Qy("#","pathname","hash",i)),Xt(!i.search||!i.search.includes("#"),Qy("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let u=SF(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Uo=e=>e.join("/").replace(/\/\/+/g,"/"),NF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _F(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const pP=["post","put","patch","delete"];new Set(pP);const DF=["get",...pP];new Set(DF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Du.apply(this,arguments)}const qE=j.createContext(null),RF=j.createContext(null),qp=j.createContext(null),Vp=j.createContext(null),da=j.createContext({outlet:null,matches:[],isDataRoute:!1}),mP=j.createContext(null);function Hp(){return j.useContext(Vp)!=null}function gP(){return Hp()||Xt(!1),j.useContext(Vp).location}function yP(e){j.useContext(qp).static||j.useLayoutEffect(e)}function ld(){let{isDataRoute:e}=j.useContext(da);return e?GF():OF()}function OF(){Hp()||Xt(!1);let e=j.useContext(qE),{basename:t,future:n,navigator:r}=j.useContext(qp),{matches:i}=j.useContext(da),{pathname:s}=gP(),o=JSON.stringify(kF(i,n.v7_relativeSplatPath)),l=j.useRef(!1);return yP(()=>{l.current=!0}),j.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=TF(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Uo([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function jF(){let{matches:e}=j.useContext(da),t=e[e.length-1];return t?t.params:{}}function LF(e,t){return PF(e,t)}function PF(e,t,n,r){Hp()||Xt(!1);let{navigator:i}=j.useContext(qp),{matches:s}=j.useContext(da),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=gP(),h;if(t){var p;let w=typeof t=="string"?ua(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||Xt(!1),h=w}else h=d;let g=h.pathname||"/",y=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=aF(e,{pathname:y}),S=VF(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Uo([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Uo([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?j.createElement(Vp.Provider,{value:{location:Du({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Bs.Pop}},S):S}function BF(){let e=$F(),t=_F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:i},n):null,null)}const IF=j.createElement(BF,null);class zF extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(da.Provider,{value:this.props.routeContext},j.createElement(mP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qF(e){let{routeContext:t,match:n,children:r}=e,i=j.useContext(qE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(da.Provider,{value:t},r)}function VF(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||Xt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:y}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,x=!1,S=null,w=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||IF,u&&(d<0&&g===0?(KF("route-fallback"),x=!0,w=null):d===g&&(x=!0,w=p.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,g+1)),N=()=>{let k;return y?k=S:x?k=w:p.route.Component?k=j.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,j.createElement(qF,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(zF,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}var vP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(vP||{}),bP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(bP||{});function HF(e){let t=j.useContext(qE);return t||Xt(!1),t}function FF(e){let t=j.useContext(RF);return t||Xt(!1),t}function UF(e){let t=j.useContext(da);return t||Xt(!1),t}function xP(e){let t=UF(),n=t.matches[t.matches.length-1];return n.route.id||Xt(!1),n.route.id}function $F(){var e;let t=j.useContext(mP),n=FF(),r=xP();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function GF(){let{router:e}=HF(vP.UseNavigateStable),t=xP(bP.UseNavigateStable),n=j.useRef(!1);return yP(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Du({fromRouteId:t},s)))},[e,t])}const LA={};function KF(e,t,n){LA[e]||(LA[e]=!0)}function YF(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Ro(e){Xt(!1)}function WF(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Bs.Pop,navigator:s,static:o=!1,future:l}=e;Hp()&&Xt(!1);let u=t.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:s,static:o,future:Du({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=ua(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:x="default"}=r,S=j.useMemo(()=>{let w=hP(h,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:x},navigationType:i}},[u,h,p,g,y,x,i]);return S==null?null:j.createElement(qp.Provider,{value:d},j.createElement(Vp.Provider,{children:n,value:S}))}function XF(e){let{children:t,location:n}=e;return LF(xS(t),n)}new Promise(()=>{});function xS(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,i)=>{if(!j.isValidElement(r))return;let s=[...t,i];if(r.type===j.Fragment){n.push.apply(n,xS(r.props.children,s));return}r.type!==Ro&&Xt(!1),!r.props.index||!r.props.children||Xt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ZF="6";try{window.__reactRouterVersion=ZF}catch{}const QF="startTransition",PA=XH[QF];function JF(e){let{basename:t,children:n,future:r,window:i}=e,s=j.useRef();s.current==null&&(s.current=iF({window:i,v5Compat:!0}));let o=s.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=j.useCallback(p=>{d&&PA?PA(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>YF(r),[r]),j.createElement(WF,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var BA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(BA||(BA={}));var IA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(IA||(IA={}));var wP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zA=Pe.createContext&&Pe.createContext(wP),eU=["attr","size","title"];function tU(e,t){if(e==null)return{};var n=nU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ah(){return Ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ah.apply(this,arguments)}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(r){rU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rU(e,t,n){return t=iU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iU(e){var t=sU(e,"string");return typeof t=="symbol"?t:t+""}function sU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SP(e){return e&&e.map((t,n)=>Pe.createElement(t.tag,Mh({key:n},t.attr),SP(t.child)))}function mt(e){return t=>Pe.createElement(oU,Ah({attr:Mh({},e.attr)},t),SP(e.child))}function oU(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=tU(e,eU),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),Pe.createElement("svg",Ah({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Mh(Mh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Pe.createElement("title",null,s),e.children)};return zA!==void 0?Pe.createElement(zA.Consumer,null,n=>t(n)):t(wP)}function aU(e){return mt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function lU(e){return mt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function cU(e){return mt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const uU=e=>e==="system"||e==="light"||e==="dark";function fa(){const[e,t]=j.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return uU(s)?s:"light"}),[n,r]=j.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return j.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),j.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const cd=()=>{const{theme:e,setTheme:t}=fa();return v.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?v.jsx(aU,{size:18}):v.jsx(lU,{size:18})})},nr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},ud=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(j.useEffect(()=>{document.title=e||nr.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let g=document.querySelector(`meta[${p}="${u}"]`);g?g.content=d:(g=document.createElement("meta"),g.setAttribute(p,u),g.content=d,document.head.appendChild(g))};o("description",t||nr.description),o("keywords",n||nr.keywords),o("og:title",e||nr.title,!0),o("og:description",t||nr.description,!0),o("og:image",r||nr.image,!0),o("og:url",i||nr.url,!0),o("og:type",s,!0),o("twitter:title",e||nr.title),o("twitter:description",t||nr.description),o("twitter:image",r||nr.image),o("twitter:url",i||nr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||nr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||nr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class nu extends Error{}nu.prototype.name="InvalidTokenError";function dU(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function fU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return dU(t)}catch{return atob(t)}}function hU(e,t){if(typeof e!="string")throw new nu("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new nu(`Invalid token specified: missing part #${n+1}`);let i;try{i=fU(r)}catch(s){throw new nu(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new nu(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Bi="https://diagrammatic-api.vercel.app";class pU{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${Bi}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${Bi}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${Bi}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${Bi}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${Bi}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to save diagram"}));throw new Error(r.message||"Failed to save diagram")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${Bi}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${Bi}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${Bi}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${Bi}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}}const sr=new pU,EP=j.createContext(void 0),mU=({children:e})=>{const[t,n]=j.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=j.useCallback(h=>{try{const p=hU(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=j.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);j.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(g=>({...g,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(g=>({...g,isLoading:!1}));return}try{const g=await sr.getCurrentUser();n({user:g,token:p,isAuthenticated:!0,isLoading:!1})}catch(g){console.error("Failed to fetch user:",g),localStorage.removeItem("auth_token"),n(y=>({...y,isLoading:!1}))}})()},[r]);const s=j.useCallback(async h=>{const{user:p,token:g}=await sr.login(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),o=j.useCallback(async h=>{const{user:p,token:g}=await sr.signup(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),l=j.useCallback(async h=>{const{user:p,token:g}=await sr.googleLogin(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),u=j.useCallback(async()=>{if(t.token)try{const h=await sr.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=j.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return v.jsx(EP.Provider,{value:d,children:e})},Fp=()=>{const e=j.useContext(EP);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},VE=j.createContext({});function HE(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const FE=typeof window<"u",CP=FE?j.useLayoutEffect:j.useEffect,Up=j.createContext(null);function UE(e,t){e.indexOf(t)===-1&&e.push(t)}function $E(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Yi=(e,t,n)=>n>t?t:n<e?e:n;let GE=()=>{};const Wi={},kP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function TP(e){return typeof e=="object"&&e!==null}const NP=e=>/^0[^.\s]+$/u.test(e);function KE(e){let t;return()=>(t===void 0&&(t=e()),t)}const Dr=e=>e,gU=(e,t)=>n=>t(e(n)),dd=(...e)=>e.reduce(gU),Ru=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class YE{constructor(){this.subscriptions=[]}add(t){return UE(this.subscriptions,t),()=>$E(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ui=e=>e*1e3,Mr=e=>e/1e3;function AP(e,t){return t?e*(1e3/t):0}const MP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,yU=1e-7,vU=12;function bU(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=MP(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>yU&&++l<vU);return o}function fd(e,t,n,r){if(e===t&&n===r)return Dr;const i=s=>bU(s,0,1,e,n);return s=>s===0||s===1?s:MP(i(s),t,r)}const _P=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,DP=e=>t=>1-e(1-t),RP=fd(.33,1.53,.69,.99),WE=DP(RP),OP=_P(WE),jP=e=>(e*=2)<1?.5*WE(e):.5*(2-Math.pow(2,-10*(e-1))),XE=e=>1-Math.sin(Math.acos(e)),LP=DP(XE),PP=_P(XE),xU=fd(.42,0,1,1),wU=fd(0,0,.58,1),BP=fd(.42,0,.58,1),SU=e=>Array.isArray(e)&&typeof e[0]!="number",IP=e=>Array.isArray(e)&&typeof e[0]=="number",EU={linear:Dr,easeIn:xU,easeInOut:BP,easeOut:wU,circIn:XE,circInOut:PP,circOut:LP,backIn:WE,backInOut:OP,backOut:RP,anticipate:jP},CU=e=>typeof e=="string",VA=e=>{if(IP(e)){GE(e.length===4);const[t,n,r,i]=e;return fd(t,n,r,i)}else if(CU(e))return EU[e];return e},Vf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kU(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const TU=40;function zP(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Vf.reduce((k,T)=>(k[T]=kU(s),k),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:g,render:y,postRender:x}=o,S=()=>{const k=Wi.useManualTiming?i.timestamp:performance.now();n=!1,Wi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,TU),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),y.process(i),x.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:Vf.reduce((k,T)=>{const A=o[T];return k[T]=(_,D=!1,R=!1)=>(n||w(),A.schedule(_,D,R)),k},{}),cancel:k=>{for(let T=0;T<Vf.length;T++)o[Vf[T]].cancel(k)},state:i,steps:o}}const{schedule:yt,cancel:Ys,state:mn,steps:Jy}=zP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0);let hh;function NU(){hh=void 0}const Hn={now:()=>(hh===void 0&&Hn.set(mn.isProcessing||Wi.useManualTiming?mn.timestamp:performance.now()),hh),set:e=>{hh=e,queueMicrotask(NU)}},qP=e=>t=>typeof t=="string"&&t.startsWith(e),ZE=qP("--"),AU=qP("var(--"),QE=e=>AU(e)?MU.test(e.split("/*")[0].trim()):!1,MU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ou={...Hl,transform:e=>Yi(0,1,e)},Hf={...Hl,default:1},hu=e=>Math.round(e*1e5)/1e5,JE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _U(e){return e==null}const DU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,eC=(e,t)=>n=>!!(typeof n=="string"&&DU.test(n)&&n.startsWith(e)||t&&!_U(n)&&Object.prototype.hasOwnProperty.call(n,t)),VP=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(JE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},RU=e=>Yi(0,255,e),e0={...Hl,transform:e=>Math.round(RU(e))},Bo={test:eC("rgb","red"),parse:VP("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+e0.transform(e)+", "+e0.transform(t)+", "+e0.transform(n)+", "+hu(Ou.transform(r))+")"};function OU(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const wS={test:eC("#"),parse:OU,transform:Bo.transform},hd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ms=hd("deg"),di=hd("%"),ze=hd("px"),jU=hd("vh"),LU=hd("vw"),HA={...di,parse:e=>di.parse(e)/100,transform:e=>di.transform(e*100)},gl={test:eC("hsl","hue"),parse:VP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+di.transform(hu(t))+", "+di.transform(hu(n))+", "+hu(Ou.transform(r))+")"},Vt={test:e=>Bo.test(e)||wS.test(e)||gl.test(e),parse:e=>Bo.test(e)?Bo.parse(e):gl.test(e)?gl.parse(e):wS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Bo.transform(e):gl.transform(e),getAnimatableNone:e=>{const t=Vt.parse(e);return t.alpha=0,Vt.transform(t)}},PU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BU(e){return isNaN(e)&&typeof e=="string"&&(e.match(JE)?.length||0)+(e.match(PU)?.length||0)>0}const HP="number",FP="color",IU="var",zU="var(",FA="${}",qU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ju(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(qU,u=>(Vt.test(u)?(r.color.push(s),i.push(FP),n.push(Vt.parse(u))):u.startsWith(zU)?(r.var.push(s),i.push(IU),n.push(u)):(r.number.push(s),i.push(HP),n.push(parseFloat(u))),++s,FA)).split(FA);return{values:n,split:l,indexes:r,types:i}}function UP(e){return ju(e).values}function $P(e){const{split:t,types:n}=ju(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===HP?s+=hu(i[o]):l===FP?s+=Vt.transform(i[o]):s+=i[o]}return s}}const VU=e=>typeof e=="number"?0:Vt.test(e)?Vt.getAnimatableNone(e):e;function HU(e){const t=UP(e);return $P(e)(t.map(VU))}const Ws={test:BU,parse:UP,createTransformer:$P,getAnimatableNone:HU};function t0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function FU({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=t0(u,l,e+1/3),s=t0(u,l,e),o=t0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function _h(e,t){return n=>n>0?t:e}const St=(e,t,n)=>e+(t-e)*n,n0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},UU=[wS,Bo,gl],$U=e=>UU.find(t=>t.test(e));function UA(e){const t=$U(e);if(!t)return!1;let n=t.parse(e);return t===gl&&(n=FU(n)),n}const $A=(e,t)=>{const n=UA(e),r=UA(t);if(!n||!r)return _h(e,t);const i={...n};return s=>(i.red=n0(n.red,r.red,s),i.green=n0(n.green,r.green,s),i.blue=n0(n.blue,r.blue,s),i.alpha=St(n.alpha,r.alpha,s),Bo.transform(i))},SS=new Set(["none","hidden"]);function GU(e,t){return SS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function KU(e,t){return n=>St(e,t,n)}function tC(e){return typeof e=="number"?KU:typeof e=="string"?QE(e)?_h:Vt.test(e)?$A:XU:Array.isArray(e)?GP:typeof e=="object"?Vt.test(e)?$A:YU:_h}function GP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>tC(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function YU(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=tC(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function WU(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const XU=(e,t)=>{const n=Ws.createTransformer(t),r=ju(e),i=ju(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?SS.has(e)&&!i.values.length||SS.has(t)&&!r.values.length?GU(e,t):dd(GP(WU(r,i),i.values),n):_h(e,t)};function KP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?St(e,t,n):tC(e)(e,t)}const ZU=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>yt.update(t,n),stop:()=>Ys(t),now:()=>mn.isProcessing?mn.timestamp:Hn.now()}},YP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Dh=2e4;function nC(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Dh;)t+=n,r=e.next(t);return t>=Dh?1/0:t}function QU(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(nC(r),Dh);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Mr(i)}}const JU=5;function WP(e,t,n){const r=Math.max(t-JU,0);return AP(n-e(r),t-r)}const Mt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},r0=.001;function e9({duration:e=Mt.duration,bounce:t=Mt.bounce,velocity:n=Mt.velocity,mass:r=Mt.mass}){let i,s,o=1-t;o=Yi(Mt.minDamping,Mt.maxDamping,o),e=Yi(Mt.minDuration,Mt.maxDuration,Mr(e)),o<1?(i=d=>{const h=d*o,p=h*e,g=h-n,y=ES(d,o),x=Math.exp(-p);return r0-g/y*x},s=d=>{const p=d*o*e,g=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-p),S=ES(Math.pow(d,2),o);return(-i(d)+r0>0?-1:1)*((g-y)*x)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-r0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=n9(i,s,l);if(e=ui(e),isNaN(u))return{stiffness:Mt.stiffness,damping:Mt.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const t9=12;function n9(e,t,n){let r=n;for(let i=1;i<t9;i++)r=r-e(r)/t(r);return r}function ES(e,t){return e*Math.sqrt(1-t*t)}const r9=["duration","bounce"],i9=["stiffness","damping","mass"];function GA(e,t){return t.some(n=>e[n]!==void 0)}function s9(e){let t={velocity:Mt.velocity,stiffness:Mt.stiffness,damping:Mt.damping,mass:Mt.mass,isResolvedFromDuration:!1,...e};if(!GA(e,i9)&&GA(e,r9))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Yi(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Mt.mass,stiffness:i,damping:s}}else{const n=e9(e);t={...t,...n,mass:Mt.mass},t.isResolvedFromDuration=!0}return t}function Rh(e=Mt.visualDuration,t=Mt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=s9({...n,velocity:-Mr(n.velocity||0)}),x=g||0,S=d/(2*Math.sqrt(u*h)),w=o-s,C=Mr(Math.sqrt(u/h)),N=Math.abs(w)<5;r||(r=N?Mt.restSpeed.granular:Mt.restSpeed.default),i||(i=N?Mt.restDelta.granular:Mt.restDelta.default);let k;if(S<1){const A=ES(C,S);k=_=>{const D=Math.exp(-S*C*_);return o-D*((x+S*C*w)/A*Math.sin(A*_)+w*Math.cos(A*_))}}else if(S===1)k=A=>o-Math.exp(-C*A)*(w+(x+C*w)*A);else{const A=C*Math.sqrt(S*S-1);k=_=>{const D=Math.exp(-S*C*_),R=Math.min(A*_,300);return o-D*((x+S*C*w)*Math.sinh(R)+A*w*Math.cosh(R))/A}}const T={calculatedDuration:y&&p||null,next:A=>{const _=k(A);if(y)l.done=A>=p;else{let D=A===0?x:0;S<1&&(D=A===0?ui(x):WP(k,A,_));const R=Math.abs(D)<=r,B=Math.abs(o-_)<=i;l.done=R&&B}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(nC(T),Dh),_=YP(D=>T.next(A*D).value,A,30);return A+"ms "+_},toTransition:()=>{}};return T}Rh.applyToOptions=e=>{const t=QU(e,100,Rh);return e.ease=t.ease,e.duration=ui(t.duration),e.type="keyframes",e};function CS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],g={done:!1,value:p},y=R=>l!==void 0&&R<l||u!==void 0&&R>u,x=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let S=n*t;const w=p+S,C=o===void 0?w:o(w);C!==w&&(S=C-p);const N=R=>-S*Math.exp(-R/r),k=R=>C+N(R),T=R=>{const B=N(R),U=k(R);g.done=Math.abs(B)<=d,g.value=g.done?C:U};let A,_;const D=R=>{y(g.value)&&(A=R,_=Rh({keyframes:[g.value,x(g.value)],velocity:WP(k,R,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return D(0),{calculatedDuration:null,next:R=>{let B=!1;return!_&&A===void 0&&(B=!0,T(R),D(R)),A!==void 0&&R>=A?_.next(R-A):(!B&&T(R),g)}}}function o9(e,t,n){const r=[],i=n||Wi.mix||KP,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Dr:t;l=dd(u,l)}r.push(l)}return r}function a9(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(GE(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=o9(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const g=Ru(e[p],e[p+1],h);return l[p](g)};return n?h=>d(Yi(e[0],e[s-1],h)):d}function l9(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Ru(0,t,r);e.push(St(n,1,i))}}function c9(e){const t=[0];return l9(t,e.length-1),t}function u9(e,t){return e.map(n=>n*t)}function d9(e,t){return e.map(()=>t||BP).splice(0,e.length-1)}function pu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=SU(r)?r.map(VA):VA(r),s={done:!1,value:t[0]},o=u9(n&&n.length===t.length?n:c9(t),e),l=a9(o,t,{ease:Array.isArray(i)?i:d9(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const f9=e=>e!==null;function rC(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(f9),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const h9={decay:CS,inertia:CS,tween:pu,keyframes:pu,spring:Rh};function XP(e){typeof e.type=="string"&&(e.type=h9[e.type])}class iC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const p9=e=>e/100;class sC extends iC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;XP(t);const{type:n=pu,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||pu;u!==pu&&typeof l[0]!="number"&&(this.mixKeyframes=dd(p9,KP(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=nC(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:y,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,T=r;if(p){const R=Math.min(this.currentTime,i)/l;let B=Math.floor(R),U=R%1;!U&&R>=1&&(U=1),U===1&&B--,B=Math.min(B,p+1),!!(B%2)&&(g==="reverse"?(U=1-U,y&&(U-=y/l)):g==="mirror"&&(T=o)),k=Yi(0,1,U)*l}const A=N?{done:!1,value:h[0]}:T.next(k);s&&(A.value=s(A.value));let{done:_}=A;!N&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return D&&x!==CS&&(A.value=rC(h,this.options,w,this.speed)),S&&S(A.value),D&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return Mr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Mr(t)}get time(){return Mr(this.currentTime)}set time(t){t=ui(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Hn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Mr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=ZU,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function m9(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Io=e=>e*180/Math.PI,kS=e=>{const t=Io(Math.atan2(e[1],e[0]));return TS(t)},g9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:kS,rotateZ:kS,skewX:e=>Io(Math.atan(e[1])),skewY:e=>Io(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},TS=e=>(e=e%360,e<0&&(e+=360),e),KA=kS,YA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),WA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),y9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YA,scaleY:WA,scale:e=>(YA(e)+WA(e))/2,rotateX:e=>TS(Io(Math.atan2(e[6],e[5]))),rotateY:e=>TS(Io(Math.atan2(-e[2],e[0]))),rotateZ:KA,rotate:KA,skewX:e=>Io(Math.atan(e[4])),skewY:e=>Io(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function NS(e){return e.includes("scale")?1:0}function AS(e,t){if(!e||e==="none")return NS(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=y9,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=g9,i=l}if(!i)return NS(t);const s=r[t],o=i[1].split(",").map(b9);return typeof s=="function"?s(o):o[s]}const v9=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return AS(n,t)};function b9(e){return parseFloat(e.trim())}const Fl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ul=new Set(Fl),XA=e=>e===Hl||e===ze,x9=new Set(["x","y","z"]),w9=Fl.filter(e=>!x9.has(e));function S9(e){const t=[];return w9.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const $o={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>AS(t,"x"),y:(e,{transform:t})=>AS(t,"y")};$o.translateX=$o.x;$o.translateY=$o.y;const Go=new Set;let MS=!1,_S=!1,DS=!1;function ZP(){if(_S){const e=Array.from(Go).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=S9(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_S=!1,MS=!1,Go.forEach(e=>e.complete(DS)),Go.clear()}function QP(){Go.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(_S=!0)})}function E9(){DS=!0,QP(),ZP(),DS=!1}class oC{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Go.add(this),MS||(MS=!0,yt.read(QP),yt.resolveKeyframes(ZP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}m9(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Go.delete(this)}cancel(){this.state==="scheduled"&&(Go.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C9=e=>e.startsWith("--");function k9(e,t,n){C9(t)?e.style.setProperty(t,n):e.style[t]=n}const T9=KE(()=>window.ScrollTimeline!==void 0),N9={};function A9(e,t){const n=KE(e);return()=>N9[t]??n()}const JP=A9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ru=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,ZA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ru([0,.65,.55,1]),circOut:ru([.55,0,1,.45]),backIn:ru([.31,.01,.66,-.59]),backOut:ru([.33,1.53,.69,.99])};function e5(e,t){if(e)return typeof e=="function"?JP()?YP(e,t):"ease-out":IP(e)?ru(e):Array.isArray(e)?e.map(n=>e5(n,t)||ZA.easeOut):ZA[e]}function M9(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=e5(l,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),e.animate(h,g)}function t5(e){return typeof e=="function"&&"applyToOptions"in e}function _9({type:e,...t}){return t5(e)&&JP()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class D9 extends iC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,GE(typeof t.type!="string");const d=_9(t);this.animation=M9(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=rC(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):k9(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Mr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Mr(t)}get time(){return Mr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ui(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&T9()?(this.animation.timeline=t,Dr):n(this)}}const n5={anticipate:jP,backInOut:OP,circInOut:PP};function R9(e){return e in n5}function O9(e){typeof e.ease=="string"&&R9(e.ease)&&(e.ease=n5[e.ease])}const QA=10;class j9 extends D9{constructor(t){O9(t),XP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new sC({...o,autoplay:!1}),u=ui(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-QA).value,l.sample(u).value,QA),l.stop()}}const JA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ws.test(e)||e==="0")&&!e.startsWith("url("));function L9(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function P9(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=JA(i,t),l=JA(s,t);return!o||!l?!1:L9(e)||(n==="spring"||t5(n))&&r}function RS(e){e.duration=0,e.type="keyframes"}const B9=new Set(["opacity","clipPath","filter","transform"]),I9=KE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function z9(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return I9()&&n&&B9.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const q9=40;class V9 extends iC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},y=h?.KeyframeResolver||oC;this.keyframeResolver=new y(l,(x,S,w)=>this.onKeyframesResolved(x,S,g,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Hn.now(),P9(t,s,o,l)||((Wi.instantAnimations||!u)&&h?.(rC(t,r,n)),t[0]=t[t.length-1],RS(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>q9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!d&&z9(g)?new j9({...g,element:g.motionValue.owner.current}):new sC(g);y.finished.then(()=>this.notifyFinished()).catch(Dr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),E9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const H9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F9(e){const t=H9.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function r5(e,t,n=1){const[r,i]=F9(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return kP(o)?parseFloat(o):o}return QE(i)?r5(i,t,n+1):i}function aC(e,t){return e?.[t]??e?.default??e}const i5=new Set(["width","height","top","left","right","bottom",...Fl]),U9={test:e=>e==="auto",parse:e=>e},s5=e=>t=>t.test(e),o5=[Hl,ze,di,Ms,LU,jU,U9],eM=e=>o5.find(s5(e));function $9(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||NP(e):!0}const G9=new Set(["brightness","contrast","saturate","opacity"]);function K9(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(JE)||[];if(!r)return e;const i=n.replace(r,"");let s=G9.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Y9=/\b([a-z-]*)\(.*?\)/gu,OS={...Ws,getAnimatableNone:e=>{const t=e.match(Y9);return t?t.map(K9).join(" "):e}},tM={...Hl,transform:Math.round},W9={rotate:Ms,rotateX:Ms,rotateY:Ms,rotateZ:Ms,scale:Hf,scaleX:Hf,scaleY:Hf,scaleZ:Hf,skew:Ms,skewX:Ms,skewY:Ms,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:Ou,originX:HA,originY:HA,originZ:ze},lC={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...W9,zIndex:tM,fillOpacity:Ou,strokeOpacity:Ou,numOctaves:tM},X9={...lC,color:Vt,backgroundColor:Vt,outlineColor:Vt,fill:Vt,stroke:Vt,borderColor:Vt,borderTopColor:Vt,borderRightColor:Vt,borderBottomColor:Vt,borderLeftColor:Vt,filter:OS,WebkitFilter:OS},a5=e=>X9[e];function l5(e,t){let n=a5(e);return n!==OS&&(n=Ws),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Z9=new Set(["auto","none","0"]);function Q9(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!Z9.has(s)&&ju(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=l5(n,i)}class J9 extends oC{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),QE(d))){const h=r5(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!i5.has(r)||t.length!==2)return;const[i,s]=t,o=eM(i),l=eM(s);if(o!==l)if(XA(o)&&XA(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else $o[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||$9(t[i]))&&r.push(i);r.length&&Q9(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$o[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=$o[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function e7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const c5=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function u5(e){return TP(e)&&"offsetHeight"in e}const nM=30,t7=e=>!isNaN(parseFloat(e));class n7{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Hn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=t7(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new YE);const r=this.events[t].add(n);return t==="change"?()=>{r(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>nM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,nM);return AP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ml(e,t){return new n7(e,t)}const{schedule:cC}=zP(queueMicrotask,!1),qr={x:!1,y:!1};function d5(){return qr.x||qr.y}function r7(e){return e==="x"||e==="y"?qr[e]?null:(qr[e]=!0,()=>{qr[e]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function f5(e,t){const n=e7(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function rM(e){return!(e.pointerType==="touch"||d5())}function i7(e,t,n={}){const[r,i,s]=f5(e,n),o=l=>{if(!rM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{rM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const h5=(e,t)=>t?e===t?!0:h5(e,t.parentElement):!1,uC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,s7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function o7(e){return s7.has(e.tagName)||e.tabIndex!==-1}const ph=new WeakSet;function iM(e){return t=>{t.key==="Enter"&&e(t)}}function i0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const a7=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=iM(()=>{if(ph.has(n))return;i0(n,"down");const i=iM(()=>{i0(n,"up")}),s=()=>i0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function sM(e){return uC(e)&&!d5()}function l7(e,t,n={}){const[r,i,s]=f5(e,n),o=l=>{const u=l.currentTarget;if(!sM(l))return;ph.add(u);const d=t(u,l),h=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),ph.has(u)&&ph.delete(u),sM(y)&&typeof d=="function"&&d(y,{success:x})},p=y=>{h(y,u===window||u===document||n.useGlobalTarget||h5(u,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),u5(l)&&(l.addEventListener("focus",d=>a7(d,i)),!o7(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function p5(e){return TP(e)&&"ownerSVGElement"in e}function c7(e){return p5(e)&&e.tagName==="svg"}const Cn=e=>!!(e&&e.getVelocity),u7=[...o5,Vt,Ws],d7=e=>u7.find(s5(e)),dC=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function oM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function f7(...e){return t=>{let n=!1;const r=e.map(i=>{const s=oM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oM(e[i],null)}}}}function h7(...e){return j.useCallback(f7(...e),e)}class p7 extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=u5(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m7({children:e,isPresent:t,anchorX:n,root:r}){const i=j.useId(),s=j.useRef(null),o=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=j.useContext(dC),u=h7(s,e?.ref);return j.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:g,right:y}=o.current;if(t||!s.current||!d||!h)return;const x=n==="left"?`left: ${g}`:`right: ${y}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),v.jsx(p7,{isPresent:t,childRef:s,sizeRef:o,children:j.cloneElement(e,{ref:u})})}const g7=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=HE(y7),h=j.useId();let p=!0,g=j.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const x of d.values())if(!x)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return s&&p&&(g={...g}),j.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[n]),j.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=v.jsx(m7,{isPresent:n,anchorX:l,root:u,children:e})),v.jsx(Up.Provider,{value:g,children:e})};function y7(){return new Map}function m5(e=!0){const t=j.useContext(Up);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=j.useId();j.useEffect(()=>{if(e)return i(s)},[e]);const o=j.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const Ff=e=>e.key||"";function aM(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const fC=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=m5(o),p=j.useMemo(()=>aM(e),[e]),g=o&&!d?[]:p.map(Ff),y=j.useRef(!0),x=j.useRef(p),S=HE(()=>new Map),[w,C]=j.useState(p),[N,k]=j.useState(p);CP(()=>{y.current=!1,x.current=p;for(let _=0;_<N.length;_++){const D=Ff(N[_]);g.includes(D)?S.delete(D):S.get(D)!==!0&&S.set(D,!1)}},[N,g.length,g.join("-")]);const T=[];if(p!==w){let _=[...p];for(let D=0;D<N.length;D++){const R=N[D],B=Ff(R);g.includes(B)||(_.splice(D,0,R),T.push(R))}return s==="wait"&&T.length&&(_=T),k(aM(_)),C(p),null}const{forceRender:A}=j.useContext(VE);return v.jsx(v.Fragment,{children:N.map(_=>{const D=Ff(_),R=o&&!d?!1:p===N||g.includes(D),B=()=>{if(S.has(D))S.set(D,!0);else return;let U=!0;S.forEach(z=>{z||(U=!1)}),U&&(A?.(),k(x.current),o&&h?.(),r&&r())};return v.jsx(g7,{isPresent:R,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:B,anchorX:l,children:_},D)})})},g5=j.createContext({strict:!1}),lM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_l={};for(const e in lM)_l[e]={isEnabled:t=>lM[e].some(n=>!!t[n])};function v7(e){for(const t in e)_l[t]={..._l[t],...e[t]}}const b7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Oh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||b7.has(e)}let y5=e=>!Oh(e);function x7(e){typeof e=="function"&&(y5=t=>t.startsWith("on")?!Oh(t):e(t))}try{x7(require("@emotion/is-prop-valid").default)}catch{}function w7(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(y5(i)||n===!0&&Oh(i)||!t&&!Oh(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const $p=j.createContext({});function Gp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Lu(e){return typeof e=="string"||Array.isArray(e)}const hC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pC=["initial",...hC];function Kp(e){return Gp(e.animate)||pC.some(t=>Lu(e[t]))}function v5(e){return!!(Kp(e)||e.variants)}function S7(e,t){if(Kp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Lu(n)?n:void 0,animate:Lu(r)?r:void 0}}return e.inherit!==!1?t:{}}function E7(e){const{initial:t,animate:n}=S7(e,j.useContext($p));return j.useMemo(()=>({initial:t,animate:n}),[cM(t),cM(n)])}function cM(e){return Array.isArray(e)?e.join(" "):e}const Pu={};function C7(e){for(const t in e)Pu[t]=e[t],ZE(t)&&(Pu[t].isCSSVariable=!0)}function b5(e,{layout:t,layoutId:n}){return Ul.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Pu[e]||e==="opacity")}const k7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T7=Fl.length;function N7(e,t,n){let r="",i=!0;for(let s=0;s<T7;s++){const o=Fl[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=c5(l,lC[o]);if(!u){i=!1;const h=k7[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function mC(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Ul.has(u)){o=!0;continue}else if(ZE(u)){i[u]=d;continue}else{const h=c5(d,lC[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=N7(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const gC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x5(e,t,n){for(const r in t)!Cn(t[r])&&!b5(r,n)&&(e[r]=t[r])}function A7({transformTemplate:e},t){return j.useMemo(()=>{const n=gC();return mC(n,t,e),Object.assign({},n.vars,n.style)},[t])}function M7(e,t){const n=e.style||{},r={};return x5(r,n,e),Object.assign(r,A7(e,t)),r}function _7(e,t){const n={},r=M7(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const D7={offset:"stroke-dashoffset",array:"stroke-dasharray"},R7={offset:"strokeDashoffset",array:"strokeDasharray"};function O7(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?D7:R7;e[s.offset]=ze.transform(-r);const o=ze.transform(t),l=ze.transform(n);e[s.array]=`${o} ${l}`}function w5(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(mC(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&O7(p,i,s,o,!1)}const S5=()=>({...gC(),attrs:{}}),E5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function j7(e,t,n,r){const i=j.useMemo(()=>{const s=S5();return w5(s,t,E5(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};x5(s,e.style,e),i.style={...s,...i.style}}return i}const L7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yC(e){return typeof e!="string"||e.includes("-")?!1:!!(L7.indexOf(e)>-1||/[A-Z]/u.test(e))}function P7(e,t,n,{latestValues:r},i,s=!1){const l=(yC(e)?j7:_7)(t,r,i,e),u=w7(t,typeof e=="string",s),d=e!==j.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=j.useMemo(()=>Cn(h)?h.get():h,[h]);return j.createElement(e,{...d,children:p})}function uM(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vC(e,t,n,r){if(typeof t=="function"){const[i,s]=uM(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=uM(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function mh(e){return Cn(e)?e.get():e}function B7({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:I7(n,r,i,e),renderState:t()}}function I7(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=mh(s[g]);let{initial:o,animate:l}=e;const u=Kp(e),d=v5(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Gp(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const x=vC(e,g[y]);if(x){const{transitionEnd:S,transition:w,...C}=x;for(const N in C){let k=C[N];if(Array.isArray(k)){const T=h?k.length-1:0;k=k[T]}k!==null&&(i[N]=k)}for(const N in S)i[N]=S[N]}}}return i}const C5=e=>(t,n)=>{const r=j.useContext($p),i=j.useContext(Up),s=()=>B7(e,t,r,i);return n?s():HE(s)};function bC(e,t,n){const{style:r}=e,i={};for(const s in r)(Cn(r[s])||t.style&&Cn(t.style[s])||b5(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const z7=C5({scrapeMotionValuesFromProps:bC,createRenderState:gC});function k5(e,t,n){const r=bC(e,t,n);for(const i in e)if(Cn(e[i])||Cn(t[i])){const s=Fl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const q7=C5({scrapeMotionValuesFromProps:k5,createRenderState:S5}),V7=Symbol.for("motionComponentSymbol");function yl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function H7(e,t,n){return j.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):yl(n)&&(n.current=r))},[t])}const xC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),F7="framerAppearId",T5="data-"+xC(F7),N5=j.createContext({});function U7(e,t,n,r,i){const{visualElement:s}=j.useContext($p),o=j.useContext(g5),l=j.useContext(Up),u=j.useContext(dC).reducedMotion,d=j.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=j.useContext(N5);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&$7(d.current,n,i,p);const g=j.useRef(!1);j.useInsertionEffect(()=>{h&&g.current&&h.update(n,l)});const y=n[T5],x=j.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return CP(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),h.enteringChildren=void 0)}),h}function $7(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:A5(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&yl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function A5(e){if(e)return e.options.allowProjection!==!1?e.projection:A5(e.parent)}function s0(e,{forwardMotionProps:t=!1}={},n,r){n&&v7(n);const i=yC(e)?q7:z7;function s(l,u){let d;const h={...j.useContext(dC),...l,layoutId:G7(l)},{isStatic:p}=h,g=E7(l),y=i(l,p);if(!p&&FE){K7();const x=Y7(h);d=x.MeasureLayout,g.visualElement=U7(e,y,h,r,x.ProjectionNode)}return v.jsxs($p.Provider,{value:g,children:[d&&g.visualElement?v.jsx(d,{visualElement:g.visualElement,...h}):null,P7(e,l,H7(y,g.visualElement,u),y,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=j.forwardRef(s);return o[V7]=e,o}function G7({layoutId:e}){const t=j.useContext(VE).id;return t&&e!==void 0?t+"-"+e:e}function K7(e,t){j.useContext(g5).strict}function Y7(e){const{drag:t,layout:n}=_l;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function W7(e,t){if(typeof Proxy>"u")return s0;const n=new Map,r=(s,o)=>s0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,s0(o,void 0,e,t)),n.get(o))})}function M5({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function X7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Z7(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function o0(e){return e===void 0||e===1}function jS({scale:e,scaleX:t,scaleY:n}){return!o0(e)||!o0(t)||!o0(n)}function Oo(e){return jS(e)||_5(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function _5(e){return dM(e.x)||dM(e.y)}function dM(e){return e&&e!=="0%"}function jh(e,t,n){const r=e-n,i=t*r;return n+i}function fM(e,t,n,r,i){return i!==void 0&&(e=jh(e,i,r)),jh(e,n,r)+t}function LS(e,t=0,n=1,r,i){e.min=fM(e.min,t,n,r,i),e.max=fM(e.max,t,n,r,i)}function D5(e,{x:t,y:n}){LS(e.x,t.translate,t.scale,t.originPoint),LS(e.y,n.translate,n.scale,n.originPoint)}const hM=.999999999999,pM=1.0000000000001;function Q7(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&bl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,D5(e,o)),r&&Oo(s.latestValues)&&bl(e,s.latestValues))}t.x<pM&&t.x>hM&&(t.x=1),t.y<pM&&t.y>hM&&(t.y=1)}function vl(e,t){e.min=e.min+t,e.max=e.max+t}function mM(e,t,n,r,i=.5){const s=St(e.min,e.max,i);LS(e,t,n,s,r)}function bl(e,t){mM(e.x,t.x,t.scaleX,t.scale,t.originX),mM(e.y,t.y,t.scaleY,t.scale,t.originY)}function R5(e,t){return M5(Z7(e.getBoundingClientRect(),t))}function J7(e,t,n){const r=R5(e,n),{scroll:i}=t;return i&&(vl(r.x,i.offset.x),vl(r.y,i.offset.y)),r}const gM=()=>({translate:0,scale:1,origin:0,originPoint:0}),xl=()=>({x:gM(),y:gM()}),yM=()=>({min:0,max:0}),Pt=()=>({x:yM(),y:yM()}),PS={current:null},O5={current:!1};function e$(){if(O5.current=!0,!!FE)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>PS.current=e.matches;e.addEventListener("change",t),t()}else PS.current=!1}const t$=new WeakMap;function n$(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Cn(i))e.addValue(r,i);else if(Cn(s))e.addValue(r,Ml(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Ml(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const vM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class r${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=oC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Hn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,yt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Kp(n),this.isVariantNode=v5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];u[g]!==void 0&&Cn(y)&&y.set(u[g])}}mount(t){this.current=t,t$.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),O5.current||e$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:PS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ys(this.notifyUpdate),Ys(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ul.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&yt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in _l){const n=_l[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vM.length;r++){const i=vM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=n$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ml(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(kP(r)||NP(r))?r=parseFloat(r):!d7(r)&&Ws.test(n)&&(r=l5(t,n)),this.setBaseTarget(t,Cn(r)?r.get():r)),Cn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=vC(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Cn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new YE),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){cC.render(this.render)}}class j5 extends r${constructor(){super(...arguments),this.KeyframeResolver=J9}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Cn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function L5(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function i$(e){return window.getComputedStyle(e)}class s$ extends j5{constructor(){super(...arguments),this.type="html",this.renderInstance=L5}readValueFromInstance(t,n){if(Ul.has(n))return this.projection?.isProjecting?NS(n):v9(t,n);{const r=i$(t),i=(ZE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return R5(t,n)}build(t,n,r){mC(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return bC(t,n,r)}}const P5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o$(e,t,n,r){L5(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(P5.has(i)?i:xC(i),t.attrs[i])}class a$ extends j5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ul.has(n)){const r=a5(n);return r&&r.default||0}return n=P5.has(n)?n:xC(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return k5(t,n,r)}build(t,n,r){w5(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){o$(t,n,r,i)}mount(t){this.isSVGTag=E5(t.tagName),super.mount(t)}}const l$=(e,t)=>yC(e)?new a$(t):new s$(t,{allowProjection:e!==j.Fragment});function Cl(e,t,n){const r=e.getProps();return vC(r,t,n!==void 0?n:r.custom,e)}const BS=e=>Array.isArray(e);function c$(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ml(n))}function u$(e){return BS(e)?e[e.length-1]||0:e}function d$(e,t){const n=Cl(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=u$(s[o]);c$(e,o,l)}}function f$(e){return!!(Cn(e)&&e.add)}function IS(e,t){const n=e.getValue("willChange");if(f$(n))return n.add(t);if(!n&&Wi.WillChange){const r=new Wi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function B5(e){return e.props[T5]}const h$=e=>e!==null;function p$(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(h$),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const m$={type:"spring",stiffness:500,damping:25,restSpeed:10},g$=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),y$={type:"keyframes",duration:.8},v$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},b$=(e,{keyframes:t})=>t.length>2?y$:Ul.has(e)?e.startsWith("scale")?g$(t[1]):m$:v$;function x$({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const wC=(e,t,n,r={},i,s)=>o=>{const l=aC(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ui(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};x$(l)||Object.assign(h,b$(e,h)),h.duration&&(h.duration=ui(h.duration)),h.repeatDelay&&(h.repeatDelay=ui(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(RS(h),h.delay===0&&(p=!0)),(Wi.instantAnimations||Wi.skipAnimations)&&(p=!0,RS(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=p$(h.keyframes,l);if(g!==void 0){yt.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new sC(h):new V9(h)};function w$({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function I5(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),g=l[h];if(g===void 0||d&&w$(d,h))continue;const y={delay:n,...aC(s||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===x&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=B5(e);if(C){const N=window.MotionHandoffAnimation(C,h,yt);N!==null&&(y.startTime=N,S=!0)}}IS(e,h),p.start(wC(h,p,g,e.shouldReduceMotion&&i5.has(h)?{type:!1}:y,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{yt.update(()=>{o&&d$(e,o)})}),u}function z5(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function zS(e,t,n={}){const r=Cl(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(I5(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return S$(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function S$(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(zS(u,t,{...o,delay:n+(typeof r=="function"?0:r)+z5(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function E$(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>zS(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=zS(e,t,n);else{const i=typeof t=="function"?Cl(e,t,n.custom):t;r=Promise.all(I5(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function q5(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const C$=pC.length;function V5(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?V5(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<C$;n++){const r=pC[n],i=e.props[r];(Lu(i)||i===!1)&&(t[r]=i)}return t}const k$=[...hC].reverse(),T$=hC.length;function N$(e){return t=>Promise.all(t.map(({animation:n,options:r})=>E$(e,n,r)))}function A$(e){let t=N$(e),n=bM(),r=!0;const i=u=>(d,h)=>{const p=Cl(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...x}=p;d={...d,...x,...y}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=V5(e.parent)||{},p=[],g=new Set;let y={},x=1/0;for(let w=0;w<T$;w++){const C=k$[w],N=n[C],k=d[C]!==void 0?d[C]:h[C],T=Lu(k),A=C===u?N.isActive:null;A===!1&&(x=w);let _=k===h[C]&&k!==d[C]&&T;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),N.protectedKeys={...y},!N.isActive&&A===null||!k&&!N.prevProp||Gp(k)||typeof k=="boolean")continue;const D=M$(N.prevProp,k);let R=D||C===u&&N.isActive&&!_&&T||w>x&&T,B=!1;const U=Array.isArray(k)?k:[k];let z=U.reduce(i(C),{});A===!1&&(z={});const{prevResolvedValues:V={}}=N,Y={...V,...z},I=q=>{R=!0,g.has(q)&&(B=!0,g.delete(q)),N.needsAnimating[q]=!0;const X=e.getValue(q);X&&(X.liveStyle=!1)};for(const q in Y){const X=z[q],J=V[q];if(y.hasOwnProperty(q))continue;let P=!1;BS(X)&&BS(J)?P=!q5(X,J):P=X!==J,P?X!=null?I(q):g.add(q):X!==void 0&&g.has(q)?I(q):N.protectedKeys[q]=!0}N.prevProp=k,N.prevResolvedValues=z,N.isActive&&(y={...y,...z}),r&&e.blockInitialAnimation&&(R=!1);const $=_&&D;R&&(!$||B)&&p.push(...U.map(q=>{const X={type:C};if(typeof q=="string"&&r&&!$&&e.manuallyAnimateOnMount&&e.parent){const{parent:J}=e,P=Cl(J,q);if(J.enteringChildren&&P){const{delayChildren:G}=P.transition||{};X.delay=z5(J.enteringChildren,e,G)}}return{animation:q,options:X}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const C=Cl(e,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(w.transition=C.transition)}g.forEach(C=>{const N=e.getBaseTarget(C),k=e.getValue(C);k&&(k.liveStyle=!0),w[C]=N??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=bM(),r=!0}}}function M$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!q5(t,e):!1}function _o(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bM(){return{animate:_o(!0),whileInView:_o(),whileHover:_o(),whileTap:_o(),whileDrag:_o(),whileFocus:_o(),exit:_o()}}class Qs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class _$ extends Qs{constructor(t){super(t),t.animationState||(t.animationState=A$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Gp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let D$=0;class R$ extends Qs{constructor(){super(...arguments),this.id=D$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const O$={animation:{Feature:_$},exit:{Feature:R$}};function Bu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function pd(e){return{point:{x:e.pageX,y:e.pageY}}}const j$=e=>t=>uC(t)&&e(t,pd(t));function mu(e,t,n,r){return Bu(e,t,j$(n),r)}const H5=1e-4,L$=1-H5,P$=1+H5,F5=.01,B$=0-F5,I$=0+F5;function Mn(e){return e.max-e.min}function z$(e,t,n){return Math.abs(e-t)<=n}function xM(e,t,n,r=.5){e.origin=r,e.originPoint=St(t.min,t.max,e.origin),e.scale=Mn(n)/Mn(t),e.translate=St(n.min,n.max,e.origin)-e.originPoint,(e.scale>=L$&&e.scale<=P$||isNaN(e.scale))&&(e.scale=1),(e.translate>=B$&&e.translate<=I$||isNaN(e.translate))&&(e.translate=0)}function gu(e,t,n,r){xM(e.x,t.x,n.x,r?r.originX:void 0),xM(e.y,t.y,n.y,r?r.originY:void 0)}function wM(e,t,n){e.min=n.min+t.min,e.max=e.min+Mn(t)}function q$(e,t,n){wM(e.x,t.x,n.x),wM(e.y,t.y,n.y)}function SM(e,t,n){e.min=t.min-n.min,e.max=e.min+Mn(t)}function yu(e,t,n){SM(e.x,t.x,n.x),SM(e.y,t.y,n.y)}function kr(e){return[e("x"),e("y")]}const U5=({current:e})=>e?e.ownerDocument.defaultView:null,EM=(e,t)=>Math.abs(e-t);function V$(e,t){const n=EM(e.x,t.x),r=EM(e.y,t.y);return Math.sqrt(n**2+r**2)}class $5{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=l0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=V$(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:S}=g,{timestamp:w}=mn;this.history.push({...S,timestamp:w});const{onStart:C,onMove:N}=this.handlers;y||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=a0(y,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=l0(g.type==="pointercancel"?this.lastMoveEventInfo:a0(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,C),S&&S(g,C)},!uC(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=pd(t),u=a0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=mn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,l0(u,this.history)),this.removeListeners=dd(mu(this.contextWindow,"pointermove",this.handlePointerMove),mu(this.contextWindow,"pointerup",this.handlePointerUp),mu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ys(this.updatePoint)}}function a0(e,t){return t?{point:t(e.point)}:e}function CM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function l0({point:e},t){return{point:e,delta:CM(e,G5(t)),offset:CM(e,H$(t)),velocity:F$(t,.1)}}function H$(e){return e[0]}function G5(e){return e[e.length-1]}function F$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=G5(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ui(t)));)n--;if(!r)return{x:0,y:0};const s=Mr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function U$(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?St(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?St(n,e,r.max):Math.min(e,n)),e}function kM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function $$(e,{top:t,left:n,bottom:r,right:i}){return{x:kM(e.x,n,i),y:kM(e.y,t,r)}}function TM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function G$(e,t){return{x:TM(e.x,t.x),y:TM(e.y,t.y)}}function K$(e,t){let n=.5;const r=Mn(e),i=Mn(t);return i>r?n=Ru(t.min,t.max-r,e.min):r>i&&(n=Ru(e.min,e.max-i,t.min)),Yi(0,1,n)}function Y$(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const qS=.35;function W$(e=qS){return e===!1?e=0:e===!0&&(e=qS),{x:NM(e,"left","right"),y:NM(e,"top","bottom")}}function NM(e,t,n){return{min:AM(e,t),max:AM(e,n)}}function AM(e,t){return typeof e=="number"?e:e[t]||0}const X$=new WeakMap;class Z${constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pd(p).point)},o=(p,g)=>{const{drag:y,dragPropagation:x,onDragStart:S}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=r7(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kr(C=>{let N=this.getAxisMotionValue(C).get()||0;if(di.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[C];T&&(N=Mn(T)*(parseFloat(N)/100))}}this.originPoint[C]=N}),S&&yt.postRender(()=>S(p,g)),IS(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=g;if(x&&this.currentDirection===null){this.currentDirection=Q$(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>kr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new $5(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:U5(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&yt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Uf(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=U$(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&yl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=$$(r.layoutBox,t):this.constraints=!1,this.elastic=W$(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Y$(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!yl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=J7(r,i.root,this.visualElement.getTransformPagePoint());let o=G$(i.layout.layoutBox,s);if(n){const l=n(X7(o));this.hasMutatedConstraints=!!l,l&&(o=M5(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=kr(h=>{if(!Uf(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return IS(this.visualElement,t),r.start(wC(t,r,0,n,this.visualElement,!1))}stopAnimation(){kr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){kr(n=>{const{drag:r}=this.getProps();if(!Uf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-St(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!yl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};kr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=K$({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kr(o=>{if(!Uf(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(St(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;X$.set(this.visualElement,this);const t=this.visualElement.current,n=mu(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();yl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),yt.read(r);const o=Bu(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(kr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=qS,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Uf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Q$(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class J$ extends Qs{constructor(t){super(t),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new Z$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const MM=e=>(t,n)=>{e&&yt.postRender(()=>e(t,n))};class eG extends Qs{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(t){this.session=new $5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:U5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:MM(t),onStart:MM(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&yt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=mu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _M(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Xc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ze.test(e))e=parseFloat(e);else return e;const n=_M(e,t.target.x),r=_M(e,t.target.y);return`${n}% ${r}%`}},tG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Ws.parse(e);if(i.length>5)return r;const s=Ws.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=St(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let c0=!1;class nG extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;C7(rG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),c0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,c0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||yt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),cC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;c0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function K5(e){const[t,n]=m5(),r=j.useContext(VE);return v.jsx(nG,{...e,layoutGroup:r,switchLayoutGroup:j.useContext(N5),isPresent:t,safeToRemove:n})}const rG={borderRadius:{...Xc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xc,borderTopRightRadius:Xc,borderBottomLeftRadius:Xc,borderBottomRightRadius:Xc,boxShadow:tG};function iG(e,t,n){const r=Cn(e)?e:Ml(e);return r.start(wC("",r,t,n)),r.animation}const sG=(e,t)=>e.depth-t.depth;class oG{constructor(){this.children=[],this.isDirty=!1}add(t){UE(this.children,t),this.isDirty=!0}remove(t){$E(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(sG),this.isDirty=!1,this.children.forEach(t)}}function aG(e,t){const n=Hn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(Ys(r),e(s-t))};return yt.setup(r,!0),()=>Ys(r)}const Y5=["TopLeft","TopRight","BottomLeft","BottomRight"],lG=Y5.length,DM=e=>typeof e=="string"?parseFloat(e):e,RM=e=>typeof e=="number"||ze.test(e);function cG(e,t,n,r,i,s){i?(e.opacity=St(0,n.opacity??1,uG(r)),e.opacityExit=St(t.opacity??1,0,dG(r))):s&&(e.opacity=St(t.opacity??1,n.opacity??1,r));for(let o=0;o<lG;o++){const l=`border${Y5[o]}Radius`;let u=OM(t,l),d=OM(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||RM(u)===RM(d)?(e[l]=Math.max(St(DM(u),DM(d),r),0),(di.test(d)||di.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=St(t.rotate||0,n.rotate||0,r))}function OM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const uG=W5(0,.5,LP),dG=W5(.5,.95,Dr);function W5(e,t,n){return r=>r<e?0:r>t?1:n(Ru(e,t,r))}function jM(e,t){e.min=t.min,e.max=t.max}function Er(e,t){jM(e.x,t.x),jM(e.y,t.y)}function LM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function PM(e,t,n,r,i){return e-=t,e=jh(e,1/n,r),i!==void 0&&(e=jh(e,1/i,r)),e}function fG(e,t=0,n=1,r=.5,i,s=e,o=e){if(di.test(t)&&(t=parseFloat(t),t=St(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=St(s.min,s.max,r);e===s&&(l-=t),e.min=PM(e.min,t,n,l,i),e.max=PM(e.max,t,n,l,i)}function BM(e,t,[n,r,i],s,o){fG(e,t[n],t[r],t[i],t.scale,s,o)}const hG=["x","scaleX","originX"],pG=["y","scaleY","originY"];function IM(e,t,n,r){BM(e.x,t,hG,n?n.x:void 0,r?r.x:void 0),BM(e.y,t,pG,n?n.y:void 0,r?r.y:void 0)}function zM(e){return e.translate===0&&e.scale===1}function X5(e){return zM(e.x)&&zM(e.y)}function qM(e,t){return e.min===t.min&&e.max===t.max}function mG(e,t){return qM(e.x,t.x)&&qM(e.y,t.y)}function VM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Z5(e,t){return VM(e.x,t.x)&&VM(e.y,t.y)}function HM(e){return Mn(e.x)/Mn(e.y)}function FM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class gG{constructor(){this.members=[]}add(t){UE(this.members,t),t.scheduleRender()}remove(t){if($E(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yG(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const u0=["","X","Y","Z"],vG=1e3;let bG=0;function d0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Q5(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=B5(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",yt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Q5(r)}function J5({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=bG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(SG),this.nodes.forEach(TG),this.nodes.forEach(NG),this.nodes.forEach(EG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new oG)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new YE),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=p5(o)&&!c7(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;yt.read(()=>{p=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=aG(g,250),gh.hasAnimatedSinceResize&&(gh.hasAnimatedSinceResize=!1,this.nodes.forEach(GM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||RG,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),C=!this.targetLayout||!Z5(this.targetLayout,y),N=!p&&g;if(this.options.layoutRoot||this.resumeFrom||N||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...aC(x,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,N)}else p||GM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Q5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($M);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kG),this.nodes.forEach(xG),this.nodes.forEach(wG)):this.nodes.forEach($M),this.clearAllSnapshots();const l=Hn.now();mn.delta=Yi(0,1e3/60,l-mn.timestamp),mn.timestamp=l,mn.isProcessing=!0,Jy.update.process(mn),Jy.preRender.process(mn),Jy.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CG),this.sharedNodes.forEach(MG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mn(this.snapshot.measuredBox.x)&&!Mn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!X5(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Oo(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),OG(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Pt();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(jG))){const{scroll:d}=this.root;d&&(vl(l.x,d.offset.x),vl(l.y,d.offset.y))}return l}removeElementScroll(o){const l=Pt();if(Er(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&Er(l,o),vl(l.x,h.offset.x),vl(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=Pt();Er(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&bl(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Oo(h.latestValues)&&bl(u,h.latestValues)}return Oo(this.latestValues)&&bl(u,this.latestValues),u}removeTransform(o){const l=Pt();Er(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Oo(d.latestValues))continue;jS(d.latestValues)&&d.updateSnapshot();const h=Pt(),p=d.measurePageBox();Er(h,p),IM(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Oo(this.latestValues)&&IM(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=mn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),yu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Er(this.target,this.layout.layoutBox),D5(this.target,this.targetDelta)):Er(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),yu(this.relativeTargetOrigin,this.target,g.target),Er(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jS(this.parent.latestValues)||_5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Er(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;Q7(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Pt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LM(this.prevProjectionDelta.x,this.projectionDelta.x),LM(this.prevProjectionDelta.y,this.projectionDelta.y)),gu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!FM(this.projectionDelta.x,this.prevProjectionDelta.x)||!FM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xl(),this.projectionDelta=xl(),this.projectionDeltaWithTransform=xl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=xl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Pt(),y=u?u.source:void 0,x=this.layout?this.layout.source:void 0,S=y!==x,w=this.getStack(),C=!w||w.members.length<=1,N=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(DG));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const A=T/1e3;KM(p.x,o.x,A),KM(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_G(this.relativeTarget,this.relativeTargetOrigin,g,A),k&&mG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Pt()),Er(k,this.relativeTarget)),S&&(this.animationValues=h,cG(h,d,this.latestValues,A,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{gh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ml(0)),this.currentAnimation=iG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&eB(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Pt();const p=Mn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=Mn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}Er(l,u),bl(l,h),gu(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new gG),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&d0("z",o,d,this.animationValues);for(let h=0;h<u0.length;h++)d0(`rotate${u0[h]}`,o,d,this.animationValues),d0(`skew${u0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=mh(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=mh(l?.pointerEvents)||""),this.hasProjected&&!Oo(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=yG(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:g,y}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Pu){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:C}=Pu[x],N=p==="none"?h[x]:S(h[x],d);if(w){const k=w.length;for(let T=0;T<k;T++)o[w[T]]=N}else C?this.options.visualElement.renderState.vars[x]=N:o[x]=N}this.options.layoutId&&(o.pointerEvents=d===this?mh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(UM),this.root.sharedNodes.clear()}}}function xG(e){e.updateLayout()}function wG(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?kr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Mn(p);p.min=n[h].min,p.max=p.min+g}):eB(i,t.layoutBox,n)&&kr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Mn(n[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=xl();gu(o,n,t.layoutBox);const l=xl();s?gu(l,e.applyTransform(r,!0),t.measuredBox):gu(l,n,t.layoutBox);const u=!X5(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=Pt();yu(y,t.layoutBox,p.layoutBox);const x=Pt();yu(x,n,g.layoutBox),Z5(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function SG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function EG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CG(e){e.clearSnapshot()}function UM(e){e.clearMeasurements()}function $M(e){e.isLayoutDirty=!1}function kG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function GM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function TG(e){e.resolveTargetDelta()}function NG(e){e.calcProjection()}function AG(e){e.resetSkewAndRotation()}function MG(e){e.removeLeadSnapshot()}function KM(e,t,n){e.translate=St(t.translate,0,n),e.scale=St(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function YM(e,t,n,r){e.min=St(t.min,n.min,r),e.max=St(t.max,n.max,r)}function _G(e,t,n,r){YM(e.x,t.x,n.x,r),YM(e.y,t.y,n.y,r)}function DG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const RG={duration:.45,ease:[.4,0,.1,1]},WM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XM=WM("applewebkit/")&&!WM("chrome/")?Math.round:Dr;function ZM(e){e.min=XM(e.min),e.max=XM(e.max)}function OG(e){ZM(e.x),ZM(e.y)}function eB(e,t,n){return e==="position"||e==="preserve-aspect"&&!z$(HM(t),HM(n),.2)}function jG(e){return e!==e.root&&e.scroll?.wasRoot}const LG=J5({attachResizeListener:(e,t)=>Bu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),f0={current:void 0},tB=J5({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!f0.current){const e=new LG({});e.mount(window),e.setOptions({layoutScroll:!0}),f0.current=e}return f0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),PG={pan:{Feature:eG},drag:{Feature:J$,ProjectionNode:tB,MeasureLayout:K5}};function QM(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&yt.postRender(()=>s(t,pd(t)))}class BG extends Qs{mount(){const{current:t}=this.node;t&&(this.unmount=i7(t,(n,r)=>(QM(this.node,r,"Start"),i=>QM(this.node,i,"End"))))}unmount(){}}class IG extends Qs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dd(Bu(this.node.current,"focus",()=>this.onFocus()),Bu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JM(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&yt.postRender(()=>s(t,pd(t)))}class zG extends Qs{mount(){const{current:t}=this.node;t&&(this.unmount=l7(t,(n,r)=>(JM(this.node,r,"Start"),(i,{success:s})=>JM(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const VS=new WeakMap,h0=new WeakMap,qG=e=>{const t=VS.get(e.target);t&&t(e)},VG=e=>{e.forEach(qG)};function HG({root:e,...t}){const n=e||document;h0.has(n)||h0.set(n,{});const r=h0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(VG,{root:e,...t})),r[i]}function FG(e,t,n){const r=HG(t);return VS.set(e,n),r.observe(e),()=>{VS.delete(e),r.unobserve(e)}}const UG={some:0,all:1};class $G extends Qs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UG[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return FG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(GG(t,n))&&this.startObserver()}unmount(){}}function GG({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const KG={inView:{Feature:$G},tap:{Feature:zG},focus:{Feature:IG},hover:{Feature:BG}},YG={layout:{ProjectionNode:tB,MeasureLayout:K5}},WG={...O$,...KG,...PG,...YG},vn=W7(WG,l$),Yp=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=j.useState("login"),[l,u]=j.useState(""),[d,h]=j.useState(""),[p,g]=j.useState(""),[y,x]=j.useState(""),[S,w]=j.useState(!1),C=j.useCallback(async T=>{if(i){w(!0),x("");try{await i(T.credential),t()}catch(A){x(A instanceof Error?A.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);j.useEffect(()=>{if(!e||!i)return;const T=document.createElement("script");return T.src="https://accounts.google.com/gsi/client",T.async=!0,T.defer=!0,document.body.appendChild(T),T.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:C}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with"}))},()=>{document.body.contains(T)&&document.body.removeChild(T)}},[e,s,i,C]);const N=async T=>{T.preventDefault(),x(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),g("")}catch(A){x(A instanceof Error?A.message:"Authentication failed")}finally{w(!1)}},k=()=>{o(T=>T==="login"?"signup":"login"),x("")};return e?v.jsx(fC,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(vn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:T=>T.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your diagrams":"Create an account to start saving your work"}),y&&v.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:y}),i&&v.jsxs(v.Fragment,{children:[v.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-theme/20"})}),v.jsx("div",{className:"relative flex justify-center text-sm",children:v.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),v.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s==="signup"&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),v.jsx("input",{id:"name",type:"text",value:p,onChange:T=>g(T.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:l,onChange:T=>u(T.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:d,onChange:T=>h(T.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&v.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),v.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",v.jsx("button",{type:"button",onClick:k,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),v.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:v.jsx("p",{className:"text-xs text-muted text-center",children:" Your diagrams are securely stored and only accessible to you"})})]})})}):null},e_=()=>{fa();const e=ld(),[t,n]=j.useState(!1),[r,i]=j.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Fp(),[p,g]=j.useState(!1),[y,x]=j.useState(!1),[S,w]=j.useState([]),[C,N]=j.useState(!1);j.useEffect(()=>{n(!0)},[]),j.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),j.useEffect(()=>{(async()=>{if(!o){w([]);return}N(!0);try{const B=await sr.getUserDiagrams();w(B)}catch(B){console.error("Failed to load diagrams:",B)}finally{N(!1)}})()},[o]);const k=R=>{e(`/playground/free?diagramId=${R}`)},T=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"55+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"55+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],D=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return v.jsxs(v.Fragment,{children:[v.jsx(ud,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 55+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[v.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),v.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),v.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),v.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),v.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx(cd,{}),v.jsx("div",{className:"relative",children:o?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?v.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("section",{className:"relative pt-16 pb-20",children:v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[v.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),v.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:v.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[v.jsx("div",{className:"inline-block mb-6",children:v.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 55+ Components & AI Assessment"})}),v.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[v.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),v.jsx("br",{}),v.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),v.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design  practice, learn, and create architecture diagrams with ease"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((R,B)=>v.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${B===0?"fade-in-up-delay-100":B===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[v.jsx("div",{className:"text-3xl mb-1",children:R.icon}),v.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),v.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label))}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),v.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",v.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),v.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required  Free forever  55+ components"})]})})]})}),o&&v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),C?v.jsx("div",{className:"flex items-center justify-center py-20",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?v.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),v.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(R=>v.jsxs("div",{onClick:()=>k(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),R.description&&v.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),v.jsx("div",{className:"text-3xl ml-2",children:""})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),v.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((R,B)=>v.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${B===0?"delay-0":B===1?"delay-100":"delay-200"}`,onClick:()=>e(R.route),onKeyDown:U=>U.key==="Enter"&&e(R.route),role:"button",tabIndex:0,children:[v.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),v.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,v.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,B)=>v.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${B===0?"delay-0":B===1?"delay-[50ms]":B===2?"delay-[100ms]":B===3?"delay-[150ms]":B===4?"delay-[200ms]":"delay-[250ms]"}`,children:[v.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),v.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:D.map((R,B)=>v.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[v.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),v.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold text-theme",children:R.author}),v.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`testimonial-${B}`))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),v.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),v.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),v.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),v.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),v.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&v.jsx(Yp,{isOpen:p,onClose:()=>g(!1),onLogin:async(R,B)=>{await l({email:R,password:B})},onSignup:async(R,B,U)=>{await u({email:R,password:B,name:U})},onGoogleLogin:async R=>{await d(R)}})]})]})};function Xi(e){return Array.isArray?Array.isArray(e):iB(e)==="[object Array]"}function XG(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ZG(e){return e==null?"":XG(e)}function li(e){return typeof e=="string"}function nB(e){return typeof e=="number"}function QG(e){return e===!0||e===!1||JG(e)&&iB(e)=="[object Boolean]"}function rB(e){return typeof e=="object"}function JG(e){return rB(e)&&e!==null}function ir(e){return e!=null}function p0(e){return!e.trim().length}function iB(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const eK="Incorrect 'index' type",tK=e=>`Invalid value for key ${e}`,nK=e=>`Pattern length exceeds max of ${e}.`,rK=e=>`Missing ${e} property in key`,iK=e=>`Property 'weight' in key '${e}' must be a positive integer`,t_=Object.prototype.hasOwnProperty;class sK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=sB(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function sB(e){let t=null,n=null,r=null,i=1,s=null;if(li(e)||Xi(e))r=e,t=n_(e),n=HS(e);else{if(!t_.call(e,"name"))throw new Error(rK("name"));const o=e.name;if(r=o,t_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(iK(o));t=n_(o),n=HS(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function n_(e){return Xi(e)?e:e.split(".")}function HS(e){return Xi(e)?e.join("."):e}function oK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(ir(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!ir(d))return;if(l===o.length-1&&(li(d)||nB(d)||QG(d)))n.push(ZG(d));else if(Xi(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,li(t)?t.split("."):t,0),r?n:n[0]}const aK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},lK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},cK={location:0,threshold:.6,distance:100},uK={useExtendedSearch:!1,getFn:oK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var qe={...lK,...aK,...cK,...uK};const dK=/[^ ]+/g;function fK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(dK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class SC{constructor({getFn:t=qe.getFn,fieldNormWeight:n=qe.fieldNormWeight}={}){this.norm=fK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,li(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();li(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ir(t)||p0(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(ir(o)){if(Xi(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(ir(h))if(li(h)&&!p0(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else Xi(h)&&h.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(li(o)&&!p0(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function oB(e,t,{getFn:n=qe.getFn,fieldNormWeight:r=qe.fieldNormWeight}={}){const i=new SC({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(sB)),i.setSources(t),i.create(),i}function hK(e,{getFn:t=qe.getFn,fieldNormWeight:n=qe.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new SC({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function $f(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=qe.distance,ignoreLocation:s=qe.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function pK(e=[],t=qe.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Lo=32;function mK(e,t,n,{location:r=qe.location,distance:i=qe.distance,threshold:s=qe.threshold,findAllMatches:o=qe.findAllMatches,minMatchCharLength:l=qe.minMatchCharLength,includeMatches:u=qe.includeMatches,ignoreLocation:d=qe.ignoreLocation}={}){if(t.length>Lo)throw new Error(nK(Lo));const h=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let y=s,x=g;const S=l>1||u,w=S?Array(p):[];let C;for(;(C=e.indexOf(t,x))>-1;){let D=$f(t,{currentLocation:C,expectedLocation:g,distance:i,ignoreLocation:d});if(y=Math.min(D,y),x=C+h,S){let R=0;for(;R<h;)w[C+R]=1,R+=1}}x=-1;let N=[],k=1,T=h+p;const A=1<<h-1;for(let D=0;D<h;D+=1){let R=0,B=T;for(;R<B;)$f(t,{errors:D,currentLocation:g+B,expectedLocation:g,distance:i,ignoreLocation:d})<=y?R=B:T=B,B=Math.floor((T-R)/2+R);T=B;let U=Math.max(1,g-B+1),z=o?p:Math.min(g+B,p)+h,V=Array(z+2);V[z+1]=(1<<D)-1;for(let I=z;I>=U;I-=1){let $=I-1,L=n[e.charAt($)];if(S&&(w[$]=+!!L),V[I]=(V[I+1]<<1|1)&L,D&&(V[I]|=(N[I+1]|N[I])<<1|1|N[I+1]),V[I]&A&&(k=$f(t,{errors:D,currentLocation:$,expectedLocation:g,distance:i,ignoreLocation:d}),k<=y)){if(y=k,x=$,x<=g)break;U=Math.max(1,2*g-x)}}if($f(t,{errors:D+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>y)break;N=V}const _={isMatch:x>=0,score:Math.max(.001,k)};if(S){const D=pK(w,l);D.length?u&&(_.indices=D):_.isMatch=!1}return _}function gK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Lh=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class aB{constructor(t,{location:n=qe.location,threshold:r=qe.threshold,distance:i=qe.distance,includeMatches:s=qe.includeMatches,findAllMatches:o=qe.findAllMatches,minMatchCharLength:l=qe.minMatchCharLength,isCaseSensitive:u=qe.isCaseSensitive,ignoreDiacritics:d=qe.ignoreDiacritics,ignoreLocation:h=qe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?Lh(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(y,x)=>{this.chunks.push({pattern:y,alphabet:gK(y),startIndex:x})},g=this.pattern.length;if(g>Lo){let y=0;const x=g%Lo,S=g-x;for(;y<S;)p(this.pattern.substr(y,Lo),y),y+=Lo;if(x){const w=g-Lo;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Lh(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],g=0,y=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:C})=>{const{isMatch:N,score:k,indices:T}=mK(t,S,w,{location:s+C,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});N&&(y=!0),g+=k,N&&T&&(p=[...p,...T])});let x={isMatch:y,score:y?g/this.chunks.length:1};return y&&i&&(x.indices=p),x}}class Js{constructor(t){this.pattern=t}static isMultiMatch(t){return r_(t,this.multiRegex)}static isSingleMatch(t){return r_(t,this.singleRegex)}search(){}}function r_(e,t){const n=e.match(t);return n?n[1]:null}class yK extends Js{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class vK extends Js{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class bK extends Js{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class xK extends Js{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class wK extends Js{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class SK extends Js{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class lB extends Js{constructor(t,{location:n=qe.location,threshold:r=qe.threshold,distance:i=qe.distance,includeMatches:s=qe.includeMatches,findAllMatches:o=qe.findAllMatches,minMatchCharLength:l=qe.minMatchCharLength,isCaseSensitive:u=qe.isCaseSensitive,ignoreDiacritics:d=qe.ignoreDiacritics,ignoreLocation:h=qe.ignoreLocation}={}){super(t),this._bitapSearch=new aB(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class cB extends Js{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const FS=[yK,cB,bK,xK,SK,wK,vK,lB],i_=FS.length,EK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,CK="|";function kK(e,t={}){return e.split(CK).map(n=>{let r=n.trim().split(EK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<i_;){const h=FS[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<i_;){const h=FS[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const TK=new Set([lB.type,cB.type]);class NK{constructor(t,{isCaseSensitive:n=qe.isCaseSensitive,ignoreDiacritics:r=qe.ignoreDiacritics,includeMatches:i=qe.includeMatches,minMatchCharLength:s=qe.minMatchCharLength,ignoreLocation:o=qe.ignoreLocation,findAllMatches:l=qe.findAllMatches,location:u=qe.location,threshold:d=qe.threshold,distance:h=qe.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?Lh(t):t,this.pattern=t,this.query=kK(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Lh(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,y=p.length;g<y;g+=1){const x=p[g],{isMatch:S,indices:w,score:C}=x.search(t);if(S){if(o+=1,u+=C,r){const N=x.constructor.type;TK.has(N)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const US=[];function AK(...e){US.push(...e)}function $S(e,t){for(let n=0,r=US.length;n<r;n+=1){let i=US[n];if(i.condition(e,t))return new i(e,t)}return new aB(e,t)}const Ph={AND:"$and",OR:"$or"},GS={PATH:"$path",PATTERN:"$val"},KS=e=>!!(e[Ph.AND]||e[Ph.OR]),MK=e=>!!e[GS.PATH],_K=e=>!Xi(e)&&rB(e)&&!KS(e),s_=e=>({[Ph.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function uB(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=MK(i);if(!o&&s.length>1&&!KS(i))return r(s_(i));if(_K(i)){const u=o?i[GS.PATH]:s[0],d=o?i[GS.PATTERN]:i[u];if(!li(d))throw new Error(tK(u));const h={keyId:HS(u),pattern:d};return n&&(h.searcher=$S(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];Xi(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return KS(e)||(e=s_(e)),r(e)}function DK(e,{ignoreFieldNorm:t=qe.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function RK(e,t){const n=e.matches;t.matches=[],ir(n)&&n.forEach(r=>{if(!ir(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function OK(e,t){t.score=e.score}function jK(e,t,{includeMatches:n=qe.includeMatches,includeScore:r=qe.includeScore}={}){const i=[];return n&&i.push(RK),r&&i.push(OK),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class ha{constructor(t,n={},r){this.options={...qe,...n},this.options.useExtendedSearch,this._keyStore=new sK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof SC))throw new Error(eK);this._myIndex=n||oB(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ir(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=li(t)?li(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return DK(u,{ignoreFieldNorm:l}),s&&u.sort(o),nB(n)&&n>-1&&(u=u.slice(0,n)),jK(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=$S(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!ir(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=uB(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return y&&y.length?[{idx:d,item:u,matches:y}]:[]}const h=[];for(let p=0,g=l.children.length;p<g;p+=1){const y=l.children[p],x=r(y,u,d);if(x.length)h.push(...x);else if(l.operator===Ph.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(ir(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=$S(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!ir(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!ir(n))return[];let i=[];if(Xi(n))n.forEach(({v:s,i:o,n:l})=>{if(!ir(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}ha.version="7.1.0";ha.createIndex=oB;ha.parseIndex=hK;ha.config=qe;ha.parseQuery=uB;AK(NK);const LK=()=>{fa();const e=ld(),[t,n]=j.useState("All"),[r,i]=j.useState("All"),[s,o]=j.useState(""),[l,u]=j.useState([]),[d,h]=j.useState(!0),[p,g]=j.useState(null),[y,x]=j.useState(!1),[S,w]=j.useState(!1),{user:C,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:_}=Fp();j.useEffect(()=>{(async()=>{try{h(!0),g(null);const Y=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!Y.ok)throw new Error(`Failed to fetch problems: ${Y.status} ${Y.statusText}`);const I=await Y.json();u(I)}catch(V){g(V instanceof Error?V.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",V)}finally{h(!1)}})()},[]);const D=j.useMemo(()=>{const z=s?.trim()??"";let V=l;return z.length>0&&(V=new ha(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(z).map(I=>I.item)),V.filter(Y=>{const I=t==="All"||Y.difficulty===t,$=r==="All"||Y.category===r;return I&&$})},[t,r,s,l]),R=["All",...Array.from(new Set(l.map(z=>z.category)))],B=["All","Easy","Medium","Hard"],U=z=>{switch(z){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return v.jsxs(v.Fragment,{children:[v.jsx(ud,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${D.length} problems available`}),v.jsx(cd,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[C?.picture?v.jsx("img",{src:C.picture,alt:C.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:C?.name?.[0]?.toUpperCase()||C?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:C?.name||C?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:C?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:C?.email})]}),v.jsx("button",{type:"button",onClick:()=>{_(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),v.jsx("div",{className:"text-muted text-sm mb-6",children:p}),v.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:z=>o(z.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),v.jsx("select",{id:"difficulty-select",value:t,onChange:z=>n(z.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:B.map(z=>v.jsx("option",{value:z,children:z},z))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),v.jsx("select",{id:"category-select",value:r,onChange:z=>i(z.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:R.map(z=>v.jsx("option",{value:z,children:z},z))})]})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:D.map((z,V)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${V===0?"delay-0":V===1?"delay-100":V===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:z.title}),v.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${U(z.difficulty)}`,children:z.difficulty})]}),v.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:z.description}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",z.category]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",z.estimated_time]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[z.tags.slice(0,3).map(Y=>v.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:Y},Y)),z.tags.length>3&&v.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",z.tags.length-3," more"]})]}),v.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),e(`/playground/${z.id}`)},"aria-label":`Start ${z.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem "})]})]},z.id))}),D.length===0&&!d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),v.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&v.jsx(Yp,{isOpen:S,onClose:()=>w(!1),onLogin:async(z,V)=>{await k({email:z,password:V})},onSignup:async(z,V,Y)=>{await T({email:z,password:V,name:Y})},onGoogleLogin:async z=>{await A(z)}})]})};var m0={exports:{}},g0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function PK(){if(o_)return g0;o_=1;var e=ad();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,w=x[1];return s(function(){S.value=y,S.getSnapshot=g,u(S)&&w({inst:S})},[p,y,g]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return g0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,g0}var a_;function dB(){return a_||(a_=1,m0.exports=PK()),m0.exports}var fB=dB();function pn(e){this.content=e}pn.prototype={constructor:pn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new pn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new pn(n)},addToStart:function(e,t){return new pn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new pn(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new pn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=pn.from(e),e.size?new pn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=pn.from(e),e.size?new pn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=pn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};pn.from=function(e){if(e instanceof pn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new pn(t)};function hB(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=hB(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function pB(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=pB(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class pe{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new pe(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new pe(r,i)}cutByIndex(t,n){return t==n?pe.empty:t==0&&n==this.content.length?this:new pe(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new pe(i,s)}addToStart(t){return new pe([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new pe(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return hB(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return pB(this,t,n,r)}findIndex(t){if(t==0)return Gf(0,t);if(t==this.size)return Gf(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Gf(n+1,s):Gf(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return pe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pe(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return pe.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new pe(n||t,r)}static from(t){if(!t)return pe.empty;if(t instanceof pe)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new pe([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pe.empty=new pe([],0);const y0={index:0,offset:0};function Gf(e,t){return y0.index=e,y0.offset=t,y0}function Bh(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Bh(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Bh(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let ut=class YS{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Bh(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return YS.none;if(t instanceof YS)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ut.none=[];class Ih extends Error{}class be{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=gB(this.content,t+this.openStart,n);return r&&new be(r,this.openStart,this.openEnd)}removeBetween(t,n){return new be(mB(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return be.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new be(pe.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new be(t,r,i)}}be.empty=new be(pe.empty,0,0);function mB(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(mB(s.content,t-i-1,n-i-1)))}function gB(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=gB(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function BK(e,t,n){if(n.openStart>e.depth)throw new Ih("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Ih("Inconsistent open depths");return yB(e,t,n,0)}function yB(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=yB(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return Yo(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=IK(n,e);return Yo(s,bB(e,o,l,t,r))}else return Yo(s,zh(e,t,r))}function vB(e,t){if(!t.type.compatibleContent(e.type))throw new Ih("Cannot join "+t.type.name+" onto "+e.type.name)}function WS(e,t,n){let r=e.node(n);return vB(r,t.node(n)),r}function Ko(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function vu(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Ko(e.nodeAfter,r),s++));for(let l=s;l<o;l++)Ko(i.child(l),r);t&&t.depth==n&&t.textOffset&&Ko(t.nodeBefore,r)}function Yo(e,t){return e.type.checkContent(t),e.copy(t)}function bB(e,t,n,r,i){let s=e.depth>i&&WS(e,t,i+1),o=r.depth>i&&WS(n,r,i+1),l=[];return vu(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(vB(s,o),Ko(Yo(s,bB(e,t,n,r,i+1)),l)):(s&&Ko(Yo(s,zh(e,t,i+1)),l),vu(t,n,i,l),o&&Ko(Yo(o,zh(n,r,i+1)),l)),vu(r,null,i,l),new pe(l)}function zh(e,t,n){let r=[];if(vu(null,e,n,r),e.depth>n){let i=WS(e,t,n+1);Ko(Yo(i,zh(e,t,n+1)),r)}return vu(t,null,n,r),new pe(r)}function IK(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(pe.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Iu{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return ut.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new qh(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new Iu(n,r,s)}static resolveCached(t,n){let r=l_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else l_.set(t,r=new zK);let i=r.elts[r.i]=Iu.resolve(t,n);return r.i=(r.i+1)%qK,i}}class zK{constructor(){this.elts=[],this.i=0}}const qK=12,l_=new WeakMap;class qh{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const VK=Object.create(null);let Vs=class XS{constructor(t,n,r,i=ut.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||pe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Bh(this.attrs,n||t.defaultAttrs||VK)&&ut.sameSet(this.marks,r||ut.none)}copy(t=null){return t==this.content?this:new XS(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new XS(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return be.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new be(d,i.depth-o,s.depth-o)}replace(t,n,r){return BK(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Iu.resolveCached(this,t)}resolveNoCache(t){return Iu.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),xB(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=pe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ut.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!ut.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=pe.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Vs.prototype.text=void 0;class Vh extends Vs{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):xB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Vh(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Vh(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function xB(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class ea{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new HK(t,n);if(r.next==null)return ea.empty;let i=wB(r);r.next&&r.err("Unexpected trailing text");let s=WK(YK(i));return XK(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return pe.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}ea.empty=new ea(!0);class HK{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function wB(e){let t=[];do t.push(FK(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function FK(e){let t=[];do t.push(UK(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function UK(e){let t=KK(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=$K(e,t);else break;return t}function c_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function $K(e,t){let n=c_(e),r=n;return e.eat(",")&&(e.next!="}"?r=c_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function GK(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function KK(e){if(e.eat("(")){let t=wB(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=GK(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function YK(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function SB(e,t){return t-e}function u_(e,t){let n=[];return r(t),n.sort(SB);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function WK(e){let t=Object.create(null);return n(u_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);u_(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new ea(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(SB);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function XK(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function EB(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function CB(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function kB(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function TB(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new QK(e,r,t[r]);return n}let d_=class NB{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=TB(t,r.attrs),this.defaultAttrs=EB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ea.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:CB(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Vs(this,this.computeAttrs(t),pe.from(n),ut.setFrom(r))}createChecked(t=null,n,r){return n=pe.from(n),this.checkContent(n),new Vs(this,this.computeAttrs(t),n,ut.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=pe.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(pe.empty,!0);return s?new Vs(this,t,n.append(s),ut.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){kB(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:ut.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new NB(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ZK(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class QK{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ZK(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Wp{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=TB(t,i.attrs),this.excluded=null;let s=EB(this.attrs);this.instance=s?new ut(this,s):null}create(t=null){return!t&&this.instance?this.instance:new ut(this,CB(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Wp(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){kB(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class AB{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=pn.from(t.nodes),n.marks=pn.from(t.marks||{}),this.nodes=d_.compile(this.spec.nodes,this),this.marks=Wp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ea.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?f_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:f_(this,o.split(" "))}this.nodeFromJSON=i=>Vs.fromJSON(this,i),this.markFromJSON=i=>ut.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof d_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Vh(r,r.defaultAttrs,t,ut.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function f_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function JK(e){return e.tag!=null}function eY(e){return e.style!=null}class Hs{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(JK(i))this.tags.push(i);else if(eY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new p_(this,n,!1);return r.addAll(t,ut.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new p_(this,n,!0);return r.addAll(t,ut.none,n.from,n.to),be.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(rY(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=m_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=m_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Hs(t,Hs.schemaRules(t)))}}const MB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_B={ol:!0,ul:!0},zu=1,ZS=2,bu=4;function h_(e,t,n){return t!=null?(t?zu:0)|(t==="full"?ZS:0):e&&e.whitespace=="pre"?zu|ZS:n&~bu}class Kf{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ut.none,this.match=s||(o&bu?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pe.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&zu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=pe.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(pe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!MB.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class p_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=h_(null,n.preserveWhitespace,0)|(r?bu:0);i?s=new Kf(i.type,i.attrs,ut.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Kf(null,null,ut.none,!0,null,o):s=new Kf(t.schema.topNodeType,null,ut.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&ZS?"full":this.localPreserveWS||(i.options&zu)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;_B.hasOwnProperty(o)&&this.parser.normalizeLists&&nY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:tY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(MB.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=ut.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):g_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=h_(t,s,o.options);o.options&bu&&o.content.length==0&&(l|=bu);let u=ut.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):g_(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Kf(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=zu)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function nY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&_B.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function rY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function m_(e){let t={};for(let n in e)t[n]=e[n];return t}function g_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class pa{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=v0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=yh(v0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&yh(v0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return yh(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new pa(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=y_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return y_(t.marks)}}function y_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function v0(e){return e.document||window.document}const v_=new WeakMap;function iY(e){let t=v_.get(e);return t===void 0&&v_.set(e,t=sY(e)),t}function sY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function yh(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=iY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:x}=yh(e,g,n,r);if(u.appendChild(y),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const DB=65535,RB=Math.pow(2,16);function oY(e,t){return e+t*RB}function b_(e){return e&DB}function aY(e){return(e-(e&DB))/RB}const OB=1,jB=2,vh=4,LB=8;class QS{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&LB)>0}get deletedBefore(){return(this.delInfo&(OB|vh))>0}get deletedAfter(){return(this.delInfo&(jB|vh))>0}get deletedAcross(){return(this.delInfo&vh)>0}}class or{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&or.empty)return or.empty}recover(t){let n=0,r=b_(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+aY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let g=d?t==u?-1:t==p?1:n:n,y=u+i+(g<0?0:h);if(r)return y;let x=t==(n<0?u:p)?null:oY(l/3,t-u),S=t==u?jB:t==p?OB:vh;return(n<0?t!=u:t!=p)&&(S|=LB),new QS(y,S,x)}i+=h-d}return r?t+i:new QS(t+i,0,null)}touches(t,n){let r=0,i=b_(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new or(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?or.empty:new or(t<0?[0,-t,0]:[0,0,t])}}or.empty=new or([]);class qu{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new qu(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new qu;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new QS(t,i,null)}}const b0=Object.create(null);class Tn{getMap(){return or.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=b0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in b0)throw new RangeError("Duplicate use of step JSON ID "+t);return b0[t]=n,n.prototype.jsonID=t,n}}class Ht{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Ht(t,null)}static fail(t){return new Ht(null,t)}static fromReplace(t,n,r,i){try{return Ht.ok(t.replace(n,r,i))}catch(s){if(s instanceof Ih)return Ht.fail(s.message);throw s}}}function EC(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(EC(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return pe.fromArray(r)}class Is extends Tn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new be(EC(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Ht.fromReplace(t,this.from,this.to,s)}invert(){return new Ur(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Is(n.pos,r.pos,this.mark)}merge(t){return t instanceof Is&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Is(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Is(n.from,n.to,t.markFromJSON(n.mark))}}Tn.jsonID("addMark",Is);class Ur extends Tn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new be(EC(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Ht.fromReplace(t,this.from,this.to,r)}invert(){return new Is(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ur(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ur&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ur(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ur(n.from,n.to,t.markFromJSON(n.mark))}}Tn.jsonID("removeMark",Ur);class zs extends Tn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ht.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ht.fromReplace(t,this.pos,this.pos+1,new be(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new zs(this.pos,n.marks[i]);return new zs(this.pos,this.mark)}}return new ta(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new zs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new zs(n.pos,t.markFromJSON(n.mark))}}Tn.jsonID("addNodeMark",zs);class ta extends Tn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ht.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ht.fromReplace(t,this.pos,this.pos+1,new be(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new zs(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ta(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ta(n.pos,t.markFromJSON(n.mark))}}Tn.jsonID("removeNodeMark",ta);class on extends Tn{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&JS(t,this.from,this.to)?Ht.fail("Structure replace would overwrite content"):Ht.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new or([this.from,this.to-this.from,this.slice.size])}invert(t){return new on(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new on(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof on)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?be.empty:new be(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new on(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?be.empty:new be(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new on(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new on(n.from,n.to,be.fromJSON(t,n.slice),!!n.structure)}}Tn.jsonID("replace",on);class an extends Tn{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(JS(t,this.from,this.gapFrom)||JS(t,this.gapTo,this.to)))return Ht.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ht.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ht.fromReplace(t,this.from,this.to,r):Ht.fail("Content does not fit in gap")}getMap(){return new or([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new an(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new an(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new an(n.from,n.to,n.gapFrom,n.gapTo,be.fromJSON(t,n.slice),n.insert,!!n.structure)}}Tn.jsonID("replaceAround",an);function JS(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function lY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,t),y=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(x)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=y:i.push(o=new Ur(g,y,p[S])));l&&l.to==g?l.to=y:s.push(l=new Is(g,y,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function cY(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Wp){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],g;for(let y=0;y<i.length;y++){let x=i[y];x.step==s-1&&p.eq(i[y].style)&&(g=x)}g?(g.to=d,g.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Ur(o.from,o.to,o.style)))}function CC(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new on(l,h,be.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||e.step(new Ur(l,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,y=/\r?\n|\r/g,x;for(;g=y.exec(d.text);)x||(x=new be(pe.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new on(l+g.index,l+g.index+g[0].length,x))}}l=h}if(!r.validEnd){let u=r.fillBefore(pe.empty,!0);e.replace(l,l,new be(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function uY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function $l(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!uY(i,s,o))break}return null}function dY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=pe.empty,p=0;for(let x=s,S=!1;x>n;x--)S||r.index(x)>0?(S=!0,h=pe.from(r.node(x).copy(h)),p++):u--;let g=pe.empty,y=0;for(let x=s,S=!1;x>n;x--)S||i.after(x+1)<i.end(x)?(S=!0,g=pe.from(i.node(x).copy(g)),y++):d++;e.step(new an(u,d,o,l,new be(h.append(g),p,y),h.size-p,!0))}function kC(e,t,n=null,r=e){let i=fY(e,t),s=i&&hY(r,t);return s?i.map(x_).concat({type:t,attrs:n}).concat(s.map(x_)):null}function x_(e){return{type:e,attrs:null}}function fY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function hY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function pY(e,t,n){let r=pe.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pe.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new an(i,s,i,s,new be(r,0,0),n.length,!0))}function mY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&gY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!x?d=!1:!y&&x&&(d=!0)}d===!1&&BB(e,o,l,s),CC(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return e.step(new an(p,g,p+1,g-1,new be(pe.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&PB(e,o,l,s),!1}})}function PB(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function BB(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function gY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function yY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new an(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new be(pe.from(o),0,0),1,!0))}function Gi(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),g=i.index(d);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(g,p.childCount),x=r&&r[h+1];x&&(y=y.replaceChild(0,x.type.create(x.attrs)));let S=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(y))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function vY(e,t,n=1,r){let i=e.doc.resolve(t),s=pe.empty,o=pe.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=pe.from(i.node(l).copy(s));let h=r&&r[d];o=pe.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new on(t,t,new be(s.append(o),n,n),!0))}function eo(e,t){let n=e.resolve(t),r=n.index();return IB(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function bY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function IB(e,t){return!!(e&&t&&!e.isLeaf&&bY(e,t))}function Xp(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&IB(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function xY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);BB(e,h.node(),h.before(),l)}o.inlineContent&&CC(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new on(d,u.map(t+n,-1),be.empty,!0)),r===!0){let h=e.doc.resolve(d);PB(e,h.node(),h.before(),e.steps.length)}return e}function wY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function zB(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Zp(e,t,n=t,r=be.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return qB(i,s,r)?new on(t,n,r):new SY(i,s,r).fit()}function qB(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class SY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pe.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=pe.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new be(s,o,l);return t>-1?new an(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new on(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=x0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(pe.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=x0(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new be(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=x0(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new be(iu(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new be(iu(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let y=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(VB(S.mark(g.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?y:-1)))}let x=d==l.childCount;x||(y=-1),this.placed=su(this.placed,n,pe.from(h)),this.frontier[n].match=p,x&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<y;S++){let C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=x?t==0?be.empty:new be(iu(o.content,t-1,1),t-1,y<0?o.openEnd:t-1):new be(iu(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!w0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=w0(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=w0(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=su(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=su(this.placed,this.depth,pe.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pe.empty,!0);n.childCount&&(this.placed=su(this.placed,this.frontier.length,n))}}function iu(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(iu(e.firstChild.content,t-1,n)))}function su(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(su(e.lastChild.content,t-1,n)))}function x0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function VB(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,VB(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(pe.empty,!0)))),e.copy(r)}function w0(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!EY(n,s.content,o)?l:null}function EY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function CY(e){return e.spec.defining||e.spec.definingForContent}function kY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(qB(i,s,r))return e.step(new on(t,n,r));let o=FB(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let x=i.node(g).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==y&&o.splice(1,0,-g)}let u=o.indexOf(l),d=[],h=r.openStart;for(let g=r.content,y=0;;y++){let x=g.firstChild;if(d.push(x),y==r.openStart)break;g=x.content}for(let g=h-1;g>=0;g--){let y=d[g],x=CY(y.type);if(x&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(x||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),x=d[y];if(x)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],C=!0;w<0&&(C=!1,w=-w);let N=i.node(w-1),k=i.index(w-1);if(N.canReplaceWith(k,k,x.type,x.marks))return e.replace(i.before(w),C?s.after(w):n,new be(HB(r.content,0,r.openStart,y),y,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let y=o[g];y<0||(t=i.before(y),n=s.after(y))}}function HB(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(HB(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(pe.empty,!0))}return e}function TY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=wY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new be(pe.from(r),0,0))}function NY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=FB(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function FB(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class kl extends Tn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ht.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ht.fromReplace(t,this.pos,this.pos+1,new be(pe.from(i),0,n.isLeaf?0:1))}getMap(){return or.empty}invert(t){return new kl(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new kl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new kl(n.pos,n.attr,n.value)}}Tn.jsonID("attr",kl);class Vu extends Tn{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Ht.ok(r)}getMap(){return or.empty}invert(t){return new Vu(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Vu(n.attr,n.value)}}Tn.jsonID("docAttr",Vu);let Dl=class extends Error{};Dl=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Dl.prototype=Object.create(Error.prototype);Dl.prototype.constructor=Dl;Dl.prototype.name="TransformError";let UB=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new qu}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Dl(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=be.empty){let i=Zp(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new be(pe.from(r),0,0))}delete(t,n){return this.replace(t,n,be.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return kY(this,t,n,r),this}replaceRangeWith(t,n,r){return TY(this,t,n,r),this}deleteRange(t,n){return NY(this,t,n),this}lift(t,n){return dY(this,t,n),this}join(t,n=1){return xY(this,t,n),this}wrap(t,n){return pY(this,t,n),this}setBlockType(t,n=t,r,i=null){return mY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return yY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new kl(t,n,r)),this}setDocAttribute(t,n){return this.step(new Vu(t,n)),this}addNodeMark(t,n){return this.step(new zs(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof ut)n.isInSet(r.marks)&&this.step(new ta(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ta(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return vY(this,t,n,r),this}addMark(t,n,r){return lY(this,t,n,r),this}removeMark(t,n,r){return cY(this,t,n,r),this}clearIncompatible(t,n,r){return CC(this,t,n,r),this}};const S0=Object.create(null);let Ue=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new AY(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=be.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?be.empty:n),l==0&&E_(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),E_(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ve(t):fl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?fl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):fl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new lr(t.node(0))}static atStart(t){return fl(t,t,0,0,1)||new lr(t)}static atEnd(t){return fl(t,t,t.content.size,t.childCount,-1)||new lr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=S0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in S0)throw new RangeError("Duplicate use of selection JSON ID "+t);return S0[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}};Ue.prototype.visible=!0;class AY{constructor(t,n){this.$from=t,this.$to=n}}let w_=!1;function S_(e){!w_&&!e.parent.inlineContent&&(w_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ve extends Ue{constructor(t,n=t){S_(t),S_(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ue.near(r);let i=t.resolve(n.map(this.anchor));return new Ve(i.parent.inlineContent?i:r,r)}replace(t,n=be.empty){if(super.replace(t,n),n==be.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ve&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Qp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ue.findFrom(n,r,!0)||Ue.findFrom(n,-r,!0);if(s)n=s.$head;else return Ue.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ue.findFrom(t,-r,!0)||Ue.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ve(t,n)}}Ue.jsonID("text",Ve);class Qp{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Qp(t.map(this.anchor),t.map(this.head))}resolve(t){return Ve.between(t.resolve(this.anchor),t.resolve(this.head))}}class Re extends Ue{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ue.near(s):new Re(s)}content(){return new be(pe.from(this.node),0,0)}eq(t){return t instanceof Re&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new TC(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(t.resolve(n.anchor))}static create(t,n){return new Re(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ue.jsonID("node",Re);class TC{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Qp(r,r):new TC(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Re.isSelectable(r)?new Re(n):Ue.near(n)}}class lr extends Ue{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=be.empty){if(n==be.empty){t.delete(0,t.doc.content.size);let r=Ue.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new lr(t)}map(t){return new lr(t)}eq(t){return t instanceof lr}getBookmark(){return MY}}Ue.jsonID("all",lr);const MY={map(){return this},resolve(e){return new lr(e)}};function fl(e,t,n,r,i,s=!1){if(t.inlineContent)return Ve.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Re.isSelectable(l))return Re.create(e,n-(i<0?l.nodeSize:0))}else{let u=fl(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function E_(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof on||i instanceof an))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}const C_=1,Yf=2,k_=4;class _Y extends UB{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|C_)&~Yf,this.storedMarks=null,this}get selectionSet(){return(this.updated&C_)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Yf,this}ensureMarks(t){return ut.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Yf)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Yf,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ut.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=k_,this}get scrolledIntoView(){return(this.updated&k_)>0}}function T_(e,t){return!t||!e?e:e.bind(t)}class ou{constructor(t,n,r){this.name=t,this.init=T_(n.init,r),this.apply=T_(n.apply,r)}}const DY=[new ou("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new ou("selection",{init(e,t){return e.selection||Ue.atStart(t.doc)},apply(e){return e.selection}}),new ou("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new ou("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class E0{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=DY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ou(r.key,r.spec.state,r))})}}class wl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new wl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new _Y(this)}static create(t){let n=new E0(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new wl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new E0(this.schema,t.plugins),r=n.fields,i=new wl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new E0(t.schema,t.plugins),s=new wl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Vs.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Ue.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function $B(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=$B(i,t,{})),n[r]=i}return n}class Dt{constructor(t){this.spec=t,this.props={},t.props&&$B(t.props,this,this.props),this.key=t.key?t.key.key:GB("plugin")}getState(t){return t[this.key]}}const C0=Object.create(null);function GB(e){return e in C0?e+"$"+ ++C0[e]:(C0[e]=0,e+"$")}class cn{constructor(t="key"){this.key=GB(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const gn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Rl=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let eE=null;const Fi=function(e,t,n){let r=eE||(eE=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},RY=function(){eE=null},na=function(e,t,n,r){return n&&(N_(e,t,n,r,-1)||N_(e,t,n,r,1))},OY=/^(img|br|input|textarea|hr)$/i;function N_(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Ar(e))){let o=e.parentNode;if(!o||o.nodeType!=1||md(e)||OY.test(e.nodeName)||e.contentEditable=="false")return!1;t=gn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?Ar(e):0}else return!1}}function Ar(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function jY(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Ar(e)}else if(e.parentNode&&!md(e))t=gn(e),e=e.parentNode;else return null}}function LY(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!md(e))t=gn(e)+1,e=e.parentNode;else return null}}function PY(e,t,n){for(let r=t==0,i=t==Ar(e);r||i;){if(e==n)return!0;let s=gn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Ar(e)}}function md(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Jp=function(e){return e.focusNode&&na(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Po(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function BY(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function IY(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Ar(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Ar(r.startContainer),r.startOffset)}}}const hi=typeof navigator<"u"?navigator:null,A_=typeof document<"u"?document:null,to=hi&&hi.userAgent||"",tE=/Edge\/(\d+)/.exec(to),KB=/MSIE \d/.exec(to),nE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(to),Un=!!(KB||nE||tE),Fs=KB?document.documentMode:nE?+nE[1]:tE?+tE[1]:0,Rr=!Un&&/gecko\/(\d+)/i.test(to);Rr&&+(/Firefox\/(\d+)/.exec(to)||[0,0])[1];const rE=!Un&&/Chrome\/(\d+)/.exec(to),kn=!!rE,YB=rE?+rE[1]:0,Dn=!Un&&!!hi&&/Apple Computer/.test(hi.vendor),Ol=Dn&&(/Mobile\/\w+/.test(to)||!!hi&&hi.maxTouchPoints>2),Nr=Ol||(hi?/Mac/.test(hi.platform):!1),zY=hi?/Win/.test(hi.platform):!1,Ui=/Android \d/.test(to),gd=!!A_&&"webkitFontSmoothing"in A_.documentElement.style,qY=gd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function VY(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ii(e,t){return typeof e=="number"?e:e[t]}function HY(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function M_(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Rl(o);continue}let l=o,u=l==s.body,d=u?VY(s):HY(l),h=0,p=0;if(t.top<d.top+Ii(r,"top")?p=-(d.top-t.top+Ii(i,"top")):t.bottom>d.bottom-Ii(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+Ii(i,"top")-d.top:t.bottom-d.bottom+Ii(i,"bottom")),t.left<d.left+Ii(r,"left")?h=-(d.left-t.left+Ii(i,"left")):t.right>d.right-Ii(r,"right")&&(h=t.right-d.right+Ii(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-y,w=l.scrollTop-x;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let g=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:Rl(o)}}function FY(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:WB(e.dom)}}function WB(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Rl(r));return t}function UY({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;XB(n,r==0?0:r-t)}function XB(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ol=null;function $Y(e){if(e.setActive)return e.setActive();if(ol)return e.focus(ol);let t=WB(e);e.focus(ol==null?{get preventScroll(){return ol={preventScroll:!0},!0}}:void 0),ol||(ol=!1,XB(t,0))}function ZB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=Fi(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let x=g[y];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let S=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!u&&x.left<=t.left&&x.right>=t.left&&(u=h,d={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!n&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?GY(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:ZB(n,i)}function GY(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=_s(r,1);if(s.top!=s.bottom&&NC(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function NC(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function KY(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function YY(e,t,n){let{node:r,offset:i}=ZB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function WY(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function QB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(NC(t,d))return QB(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function XY(e,t){let n=e.dom.ownerDocument,r,i=0,s=IY(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!NC(t,d)||(o=QB(e.dom,t,d),!o))return null}if(Dn)for(let d=o;r&&d;d=Rl(d))d.draggable&&(r=void 0);if(o=KY(o,t),r){if(Rr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;gd&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=WY(e,r,i,t))}l==null&&(l=YY(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function __(e){return e.top<e.bottom||e.left<e.right}function _s(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(__(r))return r}return Array.prototype.find.call(n,__)||e.getBoundingClientRect()}const ZY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function JB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=gd||Rr;if(r.nodeType==3)if(o&&(ZY.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=_s(Fi(r,i,i),n);if(Rr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=_s(Fi(r,i-1,i-1),-1);if(d.top==u.top){let h=_s(Fi(r,i,i+1),-1);if(h.top!=u.top)return Zc(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,Zc(_s(Fi(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Ar(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return k0(u.getBoundingClientRect(),!1)}if(s==null&&i<Ar(r)){let u=r.childNodes[i];if(u.nodeType==1)return k0(u.getBoundingClientRect(),!0)}return k0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Ar(r))){let u=r.childNodes[i-1],d=u.nodeType==3?Fi(u,Ar(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return Zc(_s(d,1),!1)}if(s==null&&i<Ar(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?Fi(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return Zc(_s(d,-1),!0)}return Zc(_s(r.nodeType==3?Fi(r):r,-n),n>=0)}function Zc(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function k0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function eI(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function QY(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return eI(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=JB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Fi(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const JY=/[\u0590-\u08ac]/;function eW(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!JY.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:eI(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let y=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:x,focusOffset:S}=e.domSelectionRange(),w=x&&!y.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return g!=null&&(l.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let D_=null,R_=null,O_=!1;function tW(e,t,n){return D_==t&&R_==n?O_:(D_=t,R_=n,O_=n=="up"||n=="down"?QY(e,t,n):eW(e,t,n))}const Or=0,j_=1,zo=2,pi=3;class yd{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Or,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof nI){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof tI&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?gn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?gn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=gn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=gn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let y=0,x=0;y<this.children.length;y++){let S=this.children[y],w=x+S.size;if(s>x&&o<w)return S.setSelection(t-x-S.border,n-x-S.border,r,i);x=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((Rr||Dn)&&t==n){let{node:y,offset:x}=l;if(y.nodeType==3){if(p=!!(x&&y.nodeValue[x-1]==`
`),p&&x==y.nodeValue.length)for(let S=y,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:gn(w)+1});break}let C=S.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let S=y.childNodes[x-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Rr&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&Dn)&&na(l.node,l.offset,h.anchorNode,h.anchorOffset)&&na(u.node,u.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||t==n)&&!(p&&Rr)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(t>n){let x=l;l=u,u=x}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?zo:j_,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=pi:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?zo:pi}r=o}this.dirty=zo}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?zo:j_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class tI extends yd{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Or&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class nW extends yd{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class ra extends yd{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=pa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ra(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&pi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=pi&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Or){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Or}}slice(t,n,r){let i=ra.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=sE(s,n,o,r)),t>0&&(s=sE(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Us extends yd{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=pa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=sI(h,r,n),d?u=new rW(t,n,r,i,h,p||null,g,d,s,o+1):n.isText?new em(t,n,r,i,h,g,s):new Us(t,n,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>pe.empty)}return t}matchesNode(t,n,r){return this.dirty==Or&&t.eq(this.node)&&Hh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new sW(this,o&&o.node,t);lW(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?ut.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,g)=>{u.syncToMarks(d.marks,r,t);let y;u.findNodeMatch(d,h,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(y=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,y,t)||u.updateNextNode(d,h,p,t,g,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==zo)&&(o&&this.protectLocalComposition(t,o),rI(this.contentDOM,this.children,t),Ol&&cW(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ve)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=uW(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new nW(this,s,n,i);t.input.compositionNodes.push(o),this.children=sE(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==pi||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Or}updateOuterDeco(t){if(Hh(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=iI(this.dom,this.nodeDOM,iE(this.outerDeco,this.node,n),iE(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function L_(e,t,n,r,i){sI(r,t,e);let s=new Us(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class em extends Us{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==pi||this.dirty!=Or&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Or||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Or,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new em(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=pi)}get domAtom(){return!1}isText(t){return this.node.text==t}}class nI extends yd{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Or&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class rW extends Us{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==pi)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function rI(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=P_(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof ra){let u=r?r.previousSibling:e.lastChild;rI(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=P_(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const xu=function(e){e&&(this.nodeName=e)};xu.prototype=Object.create(null);const qo=[new xu];function iE(e,t,n){if(e.length==0)return qo;let r=n?qo[0]:new xu,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new xu(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new xu(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function iI(e,t,n,r){if(n==qo&&r==qo)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=qo[0]),i=u}iW(i,l||qo[0],o)}return i}function iW(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function sI(e,t,n){return iI(e,e,qo,iE(t,n,e.nodeType!=1))}function Hh(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function P_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class sW{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=oW(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Or,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=ra.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==pi&&o.dom==o.contentDOM&&(o.dirty=zo),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof Us){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,g=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=pi&&Hh(n,u.outerDeco));if(!g&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=zo,p.updateChildren(i,o+1),p.dirty=Or),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Hh(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Us.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Us.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new tI(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof ra;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof em)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Dn||kn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new nI(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function oW(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof ra)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function aW(e,t){return e.type.side-t.type.side}function lW(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(aW);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let g,y;if(u)y=-1,g=u,u=null;else if(d<e.childCount)y=d,g=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+g.nodeSize;if(g.isText){let w=x;o<i.length&&i[o].from<w&&(w=i[o].from);for(let C=0;C<l.length;C++)l[C].to<w&&(w=l[C].to);w<x&&(u=g.cut(w-s),g=g.cut(0,w-s),x=w,y=-1)}else for(;o<i.length&&i[o].to<x;)o++;let S=g.isInline&&!g.isLeaf?l.filter(w=>!w.inline):l.slice();r(g,S,t.forChild(s,g),y),s=x}}function cW(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function uW(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function sE(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function AC(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(Jp(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Re.isSelectable(p)&&i.parent&&!(p.isInline&&PY(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new Re(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let y=0;y<n.rangeCount;y++){let x=n.getRangeAt(y);p=Math.min(p,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=MC(e,h,l,p)}return d}function oI(e){return e.editable?e.hasFocus():lI(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ki(e,t=!1){let n=e.state.selection;if(aI(e,n),!!oI(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&kn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&na(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)fW(e);else{let{anchor:r,head:i}=n,s,o;B_&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(s=I_(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=I_(e,n.to))),e.docView.setSelection(r,i,e,t),B_&&(s&&z_(s),o&&z_(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dW(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const B_=Dn||kn&&YB<63;function I_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Dn&&i&&i.contentEditable=="false")return T0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return T0(i);if(s)return T0(s)}}function T0(e){return e.contentEditable="true",Dn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function z_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function dW(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!oI(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function fW(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,gn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Un&&Fs<=11&&(n.disabled=!0,n.disabled=!1)}function aI(e,t){if(t instanceof Re){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(q_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else q_(e)}function q_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function MC(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ve.between(t,n,r)}function V_(e){return e.editable&&!e.hasFocus()?!1:lI(e)}function lI(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function hW(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return na(t.node,t.offset,n.anchorNode,n.anchorOffset)}function oE(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ue.findFrom(s,t)}function Ds(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function H_(e,t,n){let r=e.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Ds(e,new Ve(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=oE(e.state,t);return i&&i instanceof Re?Ds(e,i):!1}else if(!(Nr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Re.isSelectable(s)?Ds(e,new Re(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):gd?Ds(e,new Ve(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Re&&r.node.isInline)return Ds(e,new Ve(t>0?r.$to:r.$from));{let i=oE(e.state,t);return i?Ds(e,i):!1}}}function Fh(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function wu(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function al(e,t){return t<0?pW(e):mW(e)}function pW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(Rr&&n.nodeType==1&&r<Fh(n)&&wu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(wu(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(cI(n))break;{let l=n.previousSibling;for(;l&&wu(l,-1);)i=n.parentNode,s=gn(l),l=l.previousSibling;if(l)n=l,r=Fh(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?aE(e,n,r):i&&aE(e,i,s)}function mW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Fh(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(wu(l,1))s=n,o=++r;else break}else{if(cI(n))break;{let l=n.nextSibling;for(;l&&wu(l,1);)s=l.parentNode,o=gn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Fh(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&aE(e,s,o)}function cI(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function gW(e,t){for(;e&&t==e.childNodes.length&&!md(e);)t=gn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function yW(e,t){for(;e&&!t&&!md(e);)t=gn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function aE(e,t,n){if(t.nodeType!=3){let s,o;(o=gW(t,n))?(t=o,n=0):(s=yW(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Jp(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Ki(e)},50)}function F_(e,t){let n=e.state.doc.resolve(t);if(!(kn||zY)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function U_(e,t,n){let r=e.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||Nr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=oE(e.state,t);if(o&&o instanceof Re)return Ds(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof lr?Ue.near(o,t):Ue.findFrom(o,t);return l?Ds(e,l):!1}return!1}function $_(e,t){if(!(e.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function G_(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function vW(e){if(!Dn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;G_(e,r,"true"),setTimeout(()=>G_(e,r,"false"),20)}return!1}function bW(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function xW(e,t){let n=t.keyCode,r=bW(t);if(n==8||Nr&&n==72&&r=="c")return $_(e,-1)||al(e,-1);if(n==46&&!t.shiftKey||Nr&&n==68&&r=="c")return $_(e,1)||al(e,1);if(n==13||n==27)return!0;if(n==37||Nr&&n==66&&r=="c"){let i=n==37?F_(e,e.state.selection.from)=="ltr"?-1:1:-1;return H_(e,i,r)||al(e,i)}else if(n==39||Nr&&n==70&&r=="c"){let i=n==39?F_(e,e.state.selection.from)=="ltr"?1:-1:1;return H_(e,i,r)||al(e,i)}else{if(n==38||Nr&&n==80&&r=="c")return U_(e,-1,r)||al(e,-1);if(n==40||Nr&&n==78&&r=="c")return vW(e)||U_(e,1,r)||al(e,1);if(r==(Nr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _C(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=e.someProp("clipboardSerializer")||pa.fromSchema(e.state.schema),l=mI(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=pI[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let x=l.createElement(h[y]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:g,slice:t}}function uI(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new be(pe.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:y}=e.state,x=pa.fromSchema(y);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(x.serializeNode(y.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=CW(n),gd&&kW(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Hs.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!wW.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=TW(K_(l,+h[1],+h[2]),h[4]);else if(l=be.maxOpen(SW(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=K_(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const wW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function SW(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&fI(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=hI(o[o.length-1],s.length));let h=dI(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return pe.from(o)}return e}function dI(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,pe.from(e));return e}function fI(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=fI(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(pe.from(dI(n,e,i+1))))}}function hI(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,hI(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(pe.empty,!0);return e.copy(n.append(r))}function lE(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=lE(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(pe.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function K_(e,t,n){return t<e.openStart&&(e=new be(lE(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new be(lE(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const pI={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Y_=null;function mI(){return Y_||(Y_=document.implementation.createHTMLDocument("title"))}let N0=null;function EW(e){let t=window.trustedTypes;return t?(N0||(N0=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),N0.createHTML(e)):e}function CW(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=mI().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&pI[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=EW(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function kW(e){let t=e.querySelectorAll(kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function TW(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=pe.from(u.create(r[l+1],i)),s++,o++}return new be(i,s,o)}const Rn={},On={},NW={touchstart:!0,touchmove:!0};class AW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MW(e){for(let t in Rn){let n=Rn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{DW(e,r)&&!DC(e,r)&&(e.editable||!(r.type in On))&&n(e,r)},NW[t]?{passive:!0}:void 0)}Dn&&e.dom.addEventListener("input",()=>null),cE(e)}function qs(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function _W(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function cE(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>DC(e,r))})}function DC(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function DW(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function RW(e,t){!DC(e,t)&&Rn[t.type]&&(e.editable||!(t.type in On))&&Rn[t.type](e,t)}On.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!yI(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ui&&kn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Ol&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,Po(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||xW(e,n)?n.preventDefault():qs(e,"key")};On.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};On.keypress=(e,t)=>{let n=t;if(yI(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Nr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function tm(e){return{left:e.clientX,top:e.clientY}}function OW(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function RC(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Tl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function jW(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Re.isSelectable(r)?(Tl(e,new Re(n)),!0):!1}function LW(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Re&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Tl(e,Re.create(e.state.doc,i)),!0):!1}function PW(e,t,n,r,i){return RC(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?LW(e,n):jW(e,n))}function BW(e,t,n,r){return RC(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function IW(e,t,n,r){return RC(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||zW(e,n,r)}function zW(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Tl(e,Ve.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Tl(e,Ve.create(r,l+1,l+1+o.content.size));else if(Re.isSelectable(o))Tl(e,Re.create(r,l));else continue;return!0}}function OC(e){return Uh(e)}const gI=Nr?"metaKey":"ctrlKey";Rn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=OC(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&OW(n,e.input.lastClick)&&!n[gI]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(tm(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new qW(e,o,n,!!r)):(s=="doubleClick"?BW:IW)(e,o.pos,o.inside,n)?n.preventDefault():qs(e,"pointer"))};class qW{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[gI],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Re&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Rr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),qs(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ki(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(tm(t))),this.updateAllowDefault(t),this.allowDefault||!n?qs(this.view,"pointer"):PW(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Dn&&this.mightDrag&&!this.mightDrag.node.isAtom||kn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Tl(this.view,Ue.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):qs(this.view,"pointer")}move(t){this.updateAllowDefault(t),qs(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Rn.touchstart=e=>{e.input.lastTouch=Date.now(),OC(e),qs(e,"pointer")};Rn.touchmove=e=>{e.input.lastTouch=Date.now(),qs(e,"pointer")};Rn.contextmenu=e=>OC(e);function yI(e,t){return e.composing?!0:Dn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const VW=Ui?5e3:-1;On.compositionstart=On.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ve&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Uh(e,!0),e.markCursor=null;else if(Uh(e,!t.selection.empty),Rr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}vI(e,VW)};On.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,vI(e,20))};function vI(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Uh(e),t))}function bI(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=FW());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function HW(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=jY(t.focusNode,t.focusOffset),r=LY(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function FW(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Uh(e,t=!1){if(!(Ui&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),bI(e),t||e.docView&&e.docView.dirty){let n=AC(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function UW(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Hu=Un&&Fs<15||Ol&&qY<604;Rn.copy=On.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=Hu?null:n.clipboardData,o=r.content(),{dom:l,text:u}=_C(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):UW(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $W(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function GW(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Fu(e,r.value,null,i,t):Fu(e,r.textContent,r.innerHTML,i,t)},50)}function Fu(e,t,n,r,i){let s=uI(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||be.empty)))return!0;if(!s)return!1;let o=$W(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xI(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}On.paste=(e,t)=>{let n=t;if(e.composing&&!Ui)return;let r=Hu?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Fu(e,xI(r),r.getData("text/html"),i,n)?n.preventDefault():GW(e,n)};class wI{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const KW=Nr?"altKey":"ctrlKey";function SI(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[KW]}Rn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(tm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(r&&r.mightDrag)o=Re.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Re.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=_C(e,l);(!n.dataTransfer.files.length||!kn||YB>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Hu?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Hu||n.dataTransfer.setData("text/plain",d),e.dragging=new wI(h,SI(e,n),o)};Rn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};On.dragover=On.dragenter=(e,t)=>t.preventDefault();On.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(tm(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",x=>{o=x(o,e,!1)}):o=uI(e,xI(n.dataTransfer),Hu?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&SI(e,n));if(e.someProp("handleDrop",x=>x(e,n,o||be.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?zB(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(g))return;let y=d.doc.resolve(h);if(p&&Re.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Re(y));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,C,N)=>x=N),d.setSelection(MC(e,y,d.doc.resolve(x)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};Rn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ki(e)},20))};Rn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Rn.beforeinput=(e,t)=>{if(kn&&Ui&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Po(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in On)Rn[e]=On[e];function Uu(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class $h{constructor(t,n){this.toDOM=t,this.spec=n||Wo,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new _n(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof $h&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Uu(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class $s{constructor(t,n){this.attrs=t,this.spec=n||Wo}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new _n(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof $s&&Uu(this.attrs,t.attrs)&&Uu(this.spec,t.spec)}static is(t){return t.type instanceof $s}destroy(){}}class jC{constructor(t,n){this.attrs=t,this.spec=n||Wo}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new _n(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof jC&&Uu(this.attrs,t.attrs)&&Uu(this.spec,t.spec)}destroy(){}}class _n{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new _n(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new _n(t,t,new $h(n,r))}static inline(t,n,r,i){return new _n(t,n,new $s(r,i))}static node(t,n,r,i){return new _n(t,n,new jC(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof $s}get widget(){return this.type instanceof $h}}const hl=[],Wo={};class wt{constructor(t,n){this.local=t.length?t:hl,this.children=n.length?n:hl}static create(t,n){return n.length?Gh(n,t,0,Wo):En}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==En||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Wo)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?YW(this.children,o||[],t,n,r,i,s):o?new wt(o.sort(Xo),hl):En}add(t,n){return n.length?this==En?wt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=CI(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,Gh(h,l,d+1,Wo)),s+=3}});let o=EI(s?kI(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new wt(o.length?this.local.concat(o).sort(Xo):this.local,i||this.children)}remove(t){return t.length==0||this==En?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=En?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new wt(i,r):En}forChild(t,n){if(this==En)return this;if(n.isLeaf)return wt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof $s){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new wt(i.sort(Xo),hl);return r?new js([l,r]):l}return r||En}eq(t){if(this==t)return!0;if(!(t instanceof wt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return LC(this.localsInner(t))}localsInner(t){if(this==En)return hl;if(t.inlineContent||!this.local.some($s.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof $s||n.push(this.local[r]);return n}forEachSet(t){t(this)}}wt.empty=new wt([],[]);wt.removeOverlap=LC;const En=wt.empty;class js{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Wo));return js.from(r)}forChild(t,n){if(n.isLeaf)return wt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=En&&(s instanceof js?r=r.concat(s.members):r.push(s))}return js.from(r)}eq(t){if(!(t instanceof js)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?LC(r?n:n.sort(Xo)):hl}static from(t){switch(t.length){case 0:return En;case 1:return t[0];default:return new js(t.every(n=>n instanceof wt)?t:t.reduce((n,r)=>n.concat(r instanceof wt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function YW(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,y,x,S)=>{let w=S-x-(y-g);for(let C=0;C<l.length;C+=3){let N=l[C+1];if(N<0||g>N+h-p)continue;let k=l[C]+h-p;y>=k?l[C+1]=g<=k?-2:-1:g>=h&&w&&(l[C]+=w,l[C+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(e[d+1]+s,-1),y=g-i,{index:x,offset:S}=r.content.findIndex(p),w=r.maybeChild(x);if(w&&S==p&&S+w.nodeSize==y){let C=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);C!=En?(l[d]=p,l[d+1]=y,l[d+2]=C):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=WW(l,e,t,n,i,s,o),h=Gh(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let y=h.children[p];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new wt(t.sort(Xo),l)}function EI(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new _n(i.from+t,i.to+t,i.type))}return n}function WW(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function CI(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function kI(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Gh(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=CI(e,l,u+n);if(d){s=!0;let h=Gh(d,l,n+u+1,r);h!=En&&i.push(u,u+l.nodeSize,h)}});let o=EI(s?kI(e):e,-n).sort(Xo);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new wt(o,i):En}function Xo(e,t){return e.from-t.from||e.to-t.to}function LC(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),W_(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),W_(t,i,r.copy(s.from,r.to)));break}}}return t}function W_(e,t,n){for(;t<e.length&&Xo(n,e[t])>0;)t++;e.splice(t,0,n)}function A0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=En&&t.push(r)}),e.cursorWrapper&&t.push(wt.create(e.state.doc,[e.cursorWrapper.deco])),js.from(t)}const XW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ZW=Un&&Fs<=11;class QW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class JW{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new QW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Un&&Fs<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ZW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(V_(this.view)){if(this.suppressingSelectionUpdates)return Ki(this.view);if(Un&&Fs<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&na(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Rl(s))n.add(s);for(let s=t.anchorNode;s;s=Rl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&V_(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(Rr&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!p||nX(t,p)!=y)&&g.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Jp(r)&&(d=AC(t))&&d.eq(Ue.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Ki(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),eX(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Ki(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Un&&Fs<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?gn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?gn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let X_=new WeakMap,Z_=!1;function eX(e){if(!X_.has(e)&&(X_.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Rr,Z_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Z_=!0}}function Q_(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return na(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function tX(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return Q_(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?Q_(e,n):null}function nX(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function rX(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],Jp(u)||d.push({node:u.focusNode,offset:u.focusOffset})),kn&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let C=r.childNodes[w-1],N=C.pmViewDesc;if(C.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let p=e.state.doc,g=e.someProp("domParser")||Hs.fromSchema(e.state.schema),y=p.resolve(o),x=null,S=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:iX,context:y});if(d&&d[0].pos!=null){let w=d[0].pos,C=d[1]&&d[1].pos;C==null&&(C=w),x={anchor:w+o,head:C+o}}return{doc:S,sel:x,from:o,to:l}}function iX(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(Dn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||Dn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const sX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oX(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let R=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,B=AC(e,R);if(B&&!e.state.selection.eq(B)){if(kn&&Ui&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",z=>z(e,Po(13,"Enter"))))return;let U=e.state.tr.setSelection(B);R=="pointer"?U.setMeta("pointer",!0):R=="key"&&U.scrollIntoView(),s&&U.setMeta("composition",s),e.dispatch(U)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=rX(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),g,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,y="end"):(g=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let x=cX(p.content,d.doc.content,d.from,g,y);if(x&&e.input.domChangeCount++,(Ol&&e.input.lastIOSEnter>Date.now()-225||Ui)&&i.some(R=>R.nodeType==1&&!sX.test(R.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",R=>R(e,Po(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof Ve&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=J_(e,e.state.doc,d.sel);if(R&&!R.eq(e.state.selection)){let B=e.state.tr.setSelection(R);s&&B.setMeta("composition",s),e.dispatch(B)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ve&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Un&&Fs<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let S=d.doc.resolveNoCache(x.start-d.from),w=d.doc.resolveNoCache(x.endB-d.from),C=h.resolve(x.start),N=S.sameParent(w)&&S.parent.inlineContent&&C.end()>=x.endA,k;if((Ol&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!N&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(k=Ue.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",R=>R(e,Po(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&lX(h,x.start,x.endA,S,w)&&e.someProp("handleKeyDown",R=>R(e,Po(8,"Backspace")))){Ui&&kn&&e.domObserver.suppressSelectionUpdates();return}kn&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),Ui&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,w=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(R){return R(e,Po(13,"Enter"))})},20));let T=x.start,A=x.endA,_=R=>{let B=R||e.state.tr.replace(T,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let U=J_(e,B.doc,d.sel);U&&!(kn&&e.composing&&U.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(U.head==T||U.head==B.mapping.map(A)-1)||Un&&U.empty&&U.head==T)&&B.setSelection(U)}return s&&B.setMeta("composition",s),B.scrollIntoView()},D;if(N){if(S.pos==w.pos){Un&&Fs<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ki(e),20));let R=_(e.state.tr.delete(T,A)),B=h.resolve(x.start).marksAcross(h.resolve(x.endA));B&&R.ensureMarks(B),e.dispatch(R)}else if(x.endA==x.endB&&(D=aX(S.parent.content.cut(S.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,x.endA-C.start())))){let R=_(e.state.tr);D.type=="add"?R.addMark(T,A,D.mark):R.removeMark(T,A,D.mark),e.dispatch(R)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let R=S.parent.textBetween(S.parentOffset,w.parentOffset),B=()=>_(e.state.tr.insertText(R,T,A));e.someProp("handleTextInput",U=>U(e,T,A,R,B))||e.dispatch(B())}}else e.dispatch(_())}function J_(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:MC(e,t.resolve(n.anchor),t.resolve(n.head))}function aX(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(pe.from(d).eq(e))return{mark:l,type:o}}function lX(e,t,n,r,i){if(n-t<=i.pos-r.pos||M0(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(M0(s,!0,!0));return!o.parent.isTextblock||o.pos>n||M0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function M0(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function cX(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&eD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&eD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function eD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class TI{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new AW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(sD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=rD(this),nD(this),this.nodeViews=iD(this),this.docView=L_(this.state.doc,tD(this),A0(this),this.dom,this),this.domObserver=new JW(this,(r,i,s,o)=>oX(this,r,i,s,o)),this.domObserver.start(),MW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&cE(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(sD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(bI(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=iD(this);dX(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&cE(this),this.editable=rD(this),nD(this);let u=A0(this),d=tD(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&FY(this);if(o){this.domObserver.stop();let y=p&&(Un||kn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&uX(i.selection,t.selection);if(p){let x=kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=HW(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=L_(t.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hW(this))?Ki(this,y):(aI(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&UY(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&M_(this,n.getBoundingClientRect(),t)}else M_(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new wI(t.slice,t.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Un){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$Y(this.dom),Ki(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return XY(this,t)}coordsAtPos(t,n=1){return JB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return tW(this,n||this.state,t)}pasteHTML(t,n){return Fu(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Fu(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return _C(this,t)}destroy(){this.docView&&(_W(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],A0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,RY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return RW(this,t)}domSelectionRange(){let t=this.domSelection();return t?Dn&&this.root.nodeType===11&&BY(this.dom.ownerDocument)==this.dom&&tX(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}TI.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function tD(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[_n.node(0,e.state.doc.content.size,t)]}function nD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:_n.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function rD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function uX(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function iD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function dX(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function sD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Xs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Kh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fX=typeof navigator<"u"&&/Mac/.test(navigator.platform),hX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var yn=0;yn<10;yn++)Xs[48+yn]=Xs[96+yn]=String(yn);for(var yn=1;yn<=24;yn++)Xs[yn+111]="F"+yn;for(var yn=65;yn<=90;yn++)Xs[yn]=String.fromCharCode(yn+32),Kh[yn]=String.fromCharCode(yn);for(var _0 in Xs)Kh.hasOwnProperty(_0)||(Kh[_0]=Xs[_0]);function pX(e){var t=fX&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||hX&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Kh:Xs)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const mX=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),gX=typeof navigator<"u"&&/Win/.test(navigator.platform);function yX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))mX?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function vX(e){let t=Object.create(null);for(let n in e)t[yX(n)]=e[n];return t}function D0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function bX(e){return new Dt({props:{handleKeyDown:NI(e)}})}function NI(e){let t=vX(e);return function(n,r){let i=pX(r),s,o=t[D0(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[D0(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(gX&&r.ctrlKey&&r.altKey)&&(s=Xs[r.keyCode])&&s!=i){let l=t[D0(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const PC=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function AI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const MI=(e,t,n)=>{let r=AI(e,n);if(!r)return!1;let i=BC(r);if(!i){let o=r.blockRange(),l=o&&$l(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(II(e,i,t,-1))return!0;if(r.parent.content.size==0&&(jl(s,"end")||Re.isSelectable(s)))for(let o=r.depth;;o--){let l=Zp(e.doc,r.before(o),r.after(o),be.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(jl(s,"end")?Ue.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Re.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},xX=(e,t,n)=>{let r=AI(e,n);if(!r)return!1;let i=BC(r);return i?_I(e,i,t):!1},wX=(e,t,n)=>{let r=RI(e,n);if(!r)return!1;let i=IC(r);return i?_I(e,i,t):!1};function _I(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=Zp(e.doc,s,u,be.empty);if(!d||d.from!=s||d instanceof on&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(Ve.create(h.doc,s)),n(h.scrollIntoView())}return!0}function jl(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const DI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=BC(r)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function BC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function RI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const OI=(e,t,n)=>{let r=RI(e,n);if(!r)return!1;let i=IC(r);if(!i)return!1;let s=i.nodeAfter;if(II(e,i,t,1))return!0;if(r.parent.content.size==0&&(jl(s,"start")||Re.isSelectable(s))){let o=Zp(e.doc,r.before(),r.after(),be.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(jl(s,"start")?Ue.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Re.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},jI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=IC(r)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos)).scrollIntoView()),!0)};function IC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const SX=(e,t)=>{let n=e.selection,r=n instanceof Re,i;if(r){if(n.node.isTextblock||!eo(e.doc,n.from))return!1;i=n.from}else if(i=Xp(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Re.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},EX=(e,t)=>{let n=e.selection,r;if(n instanceof Re){if(n.node.isTextblock||!eo(e.doc,n.to))return!1;r=n.to}else if(r=Xp(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},CX=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&$l(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},LI=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function zC(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const kX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=zC(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Ue.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},PI=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof lr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=zC(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ve.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},BI=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Gi(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&$l(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function TX(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Re&&t.selection.node.isBlock)return!r.parentOffset||!Gi(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){u=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),l=zC(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),s.unshift(u&&l?{type:l}:null),o=y;break}else{if(y==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Ve||t.selection instanceof lr)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=Gi(h.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=Gi(h.doc,p,s.length,s)),!g)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let y=h.mapping.map(r.before(o)),x=h.doc.resolve(y);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const NX=TX(),AX=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Re.create(e.doc,i))),!0)};function MX(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||eo(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function II(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&MX(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let y=t.pos+s.nodeSize,x=pe.empty;for(let C=o.length-1;C>=0;C--)x=pe.from(o[C].create(null,x));x=pe.from(i.copy(x));let S=e.tr.step(new an(t.pos-1,y,t.pos,y,new be(x,1,0),o.length,!0)),w=S.doc.resolve(y+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&eo(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:Ue.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),g=p&&$l(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(d&&jl(s,"start",!0)&&jl(i,"end")){let y=i,x=[];for(;x.push(y),!y.isTextblock;)y=y.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,S.content)){if(n){let C=pe.empty;for(let k=x.length-1;k>=0;k--)C=pe.from(x[k].copy(C));let N=e.tr.step(new an(t.pos-x.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new be(C,x.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function zI(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ve.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const _X=zI(-1),DX=zI(1);function RX(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&kC(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function oD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function qC(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}qC(PC,MI,DI);qC(PC,OI,jI);qC(LI,PI,BI,NX);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OX(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return jX(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function jX(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new qh(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new qh(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=kC(s,n,r,t);return l?(e&&LX(e,t,l,i,n),!0):!1}function LX(e,t,n,r,i){let s=pe.empty;for(let h=n.length-1;h>=0;h--)s=pe.from(n[h].type.create(n[h].attrs,s));e.step(new an(t.start-(r?2:0),t.end,t.start,t.end,new be(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,g=!0;h<p;h++,g=!1)!g&&Gi(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function PX(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?BX(t,n,e,s):IX(t,n,s):!0:!1}}function BX(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new an(s-1,o,s,o,new be(pe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new qh(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=$l(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return eo(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function IX(e,t,n){let r=e.tr,i=n.parent;for(let y=n.end,x=n.endIndex-1,S=n.startIndex;x>S;x--)y-=i.child(x).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?pe.empty:pe.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new an(p-(l?1:0),g+(u?1:0),p+1,g-1,new be((l?pe.empty:pe.from(i.copy(pe.empty))).append(u?pe.empty:pe.from(i.copy(pe.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function zX(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=pe.from(d?e.create():null),p=new be(pe.from(e.create(null,pe.from(l.type.create(null,h)))),d?3:1,0),g=s.start,y=s.end;n(t.tr.step(new an(g-(d?3:1),y,g,y,p,1,!0)).scrollIntoView())}return!0}}var qX=Object.defineProperty,qI=(e,t)=>{for(var n in t)qX(e,n,{get:t[n],enumerable:!0})};function nm(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var rm=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...x)=>{const S=this.buildProps(u,t),w=g(...x)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:nm({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},VX=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function VI(e,t){const n=new UB(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var HI=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&HI(r)}return e};function Wf(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return HI(n)}function $u(e,t,n){if(e instanceof Vs||e instanceof pe)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return pe.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),$u("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new AB({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Hs.fromSchema(u).parseSlice(Wf(e),n.parseOptions):Hs.fromSchema(u).parse(Wf(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Hs.fromSchema(t);return n.slice?s.parseSlice(Wf(e),n.parseOptions).content:s.parse(Wf(e),n.parseOptions)}return $u("",t,n)}function uE(e,t,n={},r={}){return $u(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function HX(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function FX(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function UX(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function im(e){return t=>UX(t.$from,e)}function De(e,t,n){return e.config[t]===void 0&&e.parent?De(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?De(e.parent,t,n):null}):e.config[t]}function VC(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=De(t,"addExtensions",n);return r?[t,...VC(r())]:t}).flat(10)}function HC(e,t){const n=pa.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function FI(e){return typeof e=="function"}function it(e,t=void 0,...n){return FI(e)?t?e.bind(t)(...n):e(...n):e}function $X(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Gu(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function UI(e){const t=[],{nodeExtensions:n,markExtensions:r}=Gu(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=De(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,y])=>{t.push({type:p,name:g,attribute:{...s,...y}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=De(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function Ft(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Yh(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Ft(n,r),{})}function GX(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function aD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):GX(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function lD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&$X(n)?!1:n!=null))}function KX(e,t){var n;const r=UI(e),{nodeExtensions:i,markExtensions:s}=Gu(e),o=(n=i.find(d=>De(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(C=>C.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((C,N)=>{const k=De(N,"extendNodeSchema",p);return{...C,...k?k(d):{}}},{}),y=lD({...g,content:it(De(d,"content",p)),marks:it(De(d,"marks",p)),group:it(De(d,"group",p)),inline:it(De(d,"inline",p)),atom:it(De(d,"atom",p)),selectable:it(De(d,"selectable",p)),draggable:it(De(d,"draggable",p)),code:it(De(d,"code",p)),whitespace:it(De(d,"whitespace",p)),linebreakReplacement:it(De(d,"linebreakReplacement",p)),defining:it(De(d,"defining",p)),isolating:it(De(d,"isolating",p)),attrs:Object.fromEntries(h.map(C=>{var N,k;return[C.name,{default:(N=C?.attribute)==null?void 0:N.default,validate:(k=C?.attribute)==null?void 0:k.validate}]}))}),x=it(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(C=>aD(C,h)));const S=De(d,"renderHTML",p);S&&(y.toDOM=C=>S({node:C,HTMLAttributes:Yh(C,h)}));const w=De(d,"renderText",p);return w&&(y.toText=w),[d.name,y]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((w,C)=>{const N=De(C,"extendMarkSchema",p);return{...w,...N?N(d):{}}},{}),y=lD({...g,inclusive:it(De(d,"inclusive",p)),excludes:it(De(d,"excludes",p)),group:it(De(d,"group",p)),spanning:it(De(d,"spanning",p)),code:it(De(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var C,N;return[w.name,{default:(C=w?.attribute)==null?void 0:C.default,validate:(N=w?.attribute)==null?void 0:N.validate}]}))}),x=it(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(w=>aD(w,h)));const S=De(d,"renderHTML",p);return S&&(y.toDOM=w=>S({mark:w,HTMLAttributes:Yh(w,h)})),[d.name,y]}));return new AB({topNode:o,nodes:l,marks:u})}function YX(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function FC(e){return e.sort((n,r)=>{const i=De(n,"priority")||100,s=De(r,"priority")||100;return i>s?-1:i<s?1:0})}function $I(e){const t=FC(VC(e)),n=YX(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function GI(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var g;u.isBlock&&d>r&&(l+=s);const y=o?.[u.type.name];if(y)return h&&(l+=y({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(g=u?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),l}function WX(e,t){const n={from:0,to:e.content.size};return GI(e,n,t)}function KI(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function Qi(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function YI(e,t){const n=Qi(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Ut(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function XX(e,t){const n=Ut(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function sm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function WI(e,t){const n=sm(typeof t=="string"?t:t.name,e.schema);return n==="node"?XX(e,t):n==="mark"?YI(e,t):{}}function ZX(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function QX(e){const t=ZX(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function XI(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),g=t.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:h}})})}),QX(r)}function UC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Wh(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:UC(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function ZI(e,t,n={}){return e.find(r=>r.type===t&&Wh(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function cD(e,t,n={}){return!!ZI(e,t,n)}function $C(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!ZI([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&cD([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&cD([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function GC(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=$C(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var JX=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function R0(e,t){return t.nodes[e]||t.marks[e]||null}function bh(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var eZ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function dE(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Qi(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Wh(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,x=g.pos;e.doc.nodesBetween(y,x,(S,w)=>{if(!S.isText&&!S.marks.length)return;const C=Math.max(y,w),N=Math.min(x,w+S.nodeSize),k=N-C;o+=k,l.push(...S.marks.map(T=>({mark:T,from:C,to:N})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Wh(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=o}function Zs(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Ut(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),x=Math.min(i,g+p.nodeSize);l.push({node:p,from:y,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Wh(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}function tZ(e,t,n={}){if(!t)return Zs(e,null,n)||dE(e,null,n);const r=sm(t,e.schema);return r==="node"?Zs(e,t,n):r==="mark"?dE(e,t,n):!1}var nZ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=im(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},rZ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function uD(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function dD(e,t){const{nodeExtensions:n}=Gu(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=it(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function om(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(om(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function QI(e){return e instanceof Re}function JI(e){return e instanceof Ve}function Vo(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function ez(e,t=null){if(!t)return null;const n=Ue.atStart(e),r=Ue.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ve.create(e,Vo(0,i,s),Vo(e.content.size,i,s)):Ve.create(e,Vo(t,i,s),Vo(t,i,s))}function iZ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof on||i instanceof an))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}var am=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},sZ=(e,t)=>{if(UC(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Xf(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=eZ(d)+s;return o.forEach(g=>{if(h)return;const y=sZ(p,g.find);if(!y)return;const x=u.state.tr,S=nm({state:u.state,transaction:x}),w={from:r-(y[0].length-s.length),to:i},{commands:C,chain:N,can:k}=new rm({editor:n,state:S});g.handler({state:S,range:w,match:y,commands:C,chain:N,can:k})===null||!x.steps.length||(g.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),h=!0)}),h}function oZ(e){const{editor:t,rules:n}=e,r=new Dt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=HC(pe.from(h),o.schema);const{from:p}=u,g=p+h.length;Xf({editor:t,from:p,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Xf({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Xf({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Xf({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function aZ(e){return Object.prototype.toString.call(e).slice(8,-1)}function Zf(e){return aZ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function tz(e,t){const n={...e};return Zf(e)&&Zf(t)&&Object.keys(t).forEach(r=>{Zf(t[r])&&Zf(e[r])?n[r]=tz(e[r],t[r]):n[r]=t[r]}),n}var KC=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...it(De(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...it(De(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>tz(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},ma=class nz extends KC{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new nz(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function lZ(e){return typeof e=="number"}var cZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},uZ=(e,t,n)=>{if(UC(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function dZ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new rm({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,x)=>{var S,w,C,N,k;if((w=(S=y.type)==null?void 0:S.spec)!=null&&w.code||!(y.isText||y.isTextblock||y.isInline))return;const T=(k=(N=(C=y.content)==null?void 0:C.size)!=null?N:y.nodeSize)!=null?k:0,A=Math.max(r,x),_=Math.min(i,x+T);if(A>=_)return;const D=y.isText?y.text||"":y.textBetween(A-x,_-x,void 0,"");uZ(D,s.find,o).forEach(B=>{if(B.index===void 0)return;const U=A+B.index+1,z=U+B[0].length,V={from:n.tr.mapping.map(U),to:n.tr.mapping.map(z)},Y=s.handler({state:n,range:V,match:B,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(Y)})}),p.every(y=>y!==null)}var Qf=null,fZ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function hZ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:g,rule:y,pasteEvt:x})=>{const S=h.tr,w=nm({state:h,transaction:S});if(!(!dZ({editor:t,state:w,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:x,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new Dt({view(p){const g=x=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(x.target)?p.dom.parentElement:null,r&&(Qf=t)},y=()=>{Qf&&(Qf=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const y=Qf;y?.isEditable&&setTimeout(()=>{const x=y.state.selection;x&&y.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,g)=>{var y;const x=(y=g.clipboardData)==null?void 0:y.getData("text/html");return o=g,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,y)=>{const x=p[0],S=x.getMeta("uiEvent")==="paste"&&!i,w=x.getMeta("uiEvent")==="drop"&&!s,C=x.getMeta("applyPasteRules"),N=!!C;if(!S&&!w&&!N)return;if(N){let{text:A}=C;typeof A=="string"?A=A:A=HC(pe.from(A),y.schema);const{from:_}=C,D=_+A.length,R=fZ(A);return u({rule:h,state:y,from:_,to:{b:D},pasteEvt:R})}const k=g.doc.content.findDiffStart(y.doc.content),T=g.doc.content.findDiffEnd(y.doc.content);if(!(!lZ(k)||!T||k===T.b))return u({rule:h,state:y,from:k,to:T,pasteEvt:o})}}))}var lm=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=$I(e),this.schema=KX(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:R0(t.name,this.schema)},r=De(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return FC([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:R0(r.name,this.schema)},s=[],o=De(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&De(r,"exitable",i)&&(l.ArrowRight=()=>ma.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([y,x])=>[y,()=>x({editor:e})]));l={...l,...g}}const u=bX(l);s.push(u);const d=De(r,"addInputRules",i);if(uD(r,e.options.enableInputRules)&&d){const g=d();if(g&&g.length){const y=oZ({editor:e,rules:g}),x=Array.isArray(y)?y:[y];s.push(...x)}}const h=De(r,"addPasteRules",i);if(uD(r,e.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=hZ({editor:e,rules:g});s.push(...y)}}const p=De(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return UI(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Gu(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Ut(n.name,this.schema)},s=De(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const g=Yh(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Gu(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Qi(n.name,this.schema)},s=De(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=Yh(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{MQ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:R0(t.name,this.schema)};t.type==="mark"&&((n=it(De(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=De(t,"onBeforeCreate",r),s=De(t,"onCreate",r),o=De(t,"onUpdate",r),l=De(t,"onSelectionUpdate",r),u=De(t,"onTransaction",r),d=De(t,"onFocus",r),h=De(t,"onBlur",r),p=De(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};lm.resolve=$I;lm.sort=FC;lm.flatten=VC;var pZ={};qI(pZ,{ClipboardTextSerializer:()=>iz,Commands:()=>az,Delete:()=>lz,Drop:()=>cz,Editable:()=>uz,FocusEvents:()=>fz,Keymap:()=>hz,Paste:()=>pz,Tabindex:()=>mz,focusEventsPluginKey:()=>dz});var Bt=class rz extends KC{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new rz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},iz=Bt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Dt({key:new cn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=KI(n);return GI(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),sz={};qI(sz,{blur:()=>mZ,clearContent:()=>gZ,clearNodes:()=>yZ,command:()=>vZ,createParagraphNear:()=>bZ,cut:()=>xZ,deleteCurrentNode:()=>wZ,deleteNode:()=>SZ,deleteRange:()=>EZ,deleteSelection:()=>CZ,enter:()=>kZ,exitCode:()=>TZ,extendMarkRange:()=>NZ,first:()=>AZ,focus:()=>_Z,forEach:()=>DZ,insertContent:()=>RZ,insertContentAt:()=>jZ,joinBackward:()=>BZ,joinDown:()=>PZ,joinForward:()=>IZ,joinItemBackward:()=>zZ,joinItemForward:()=>qZ,joinTextblockBackward:()=>VZ,joinTextblockForward:()=>HZ,joinUp:()=>LZ,keyboardShortcut:()=>UZ,lift:()=>$Z,liftEmptyBlock:()=>GZ,liftListItem:()=>KZ,newlineInCode:()=>YZ,resetAttributes:()=>WZ,scrollIntoView:()=>XZ,selectAll:()=>ZZ,selectNodeBackward:()=>QZ,selectNodeForward:()=>JZ,selectParentNode:()=>eQ,selectTextblockEnd:()=>tQ,selectTextblockStart:()=>nQ,setContent:()=>rQ,setMark:()=>sQ,setMeta:()=>oQ,setNode:()=>aQ,setNodeSelection:()=>lQ,setTextSelection:()=>cQ,sinkListItem:()=>uQ,splitBlock:()=>dQ,splitListItem:()=>fQ,toggleList:()=>hQ,toggleMark:()=>pQ,toggleNode:()=>mQ,toggleWrap:()=>gQ,undoInputRule:()=>yQ,unsetAllMarks:()=>vQ,unsetMark:()=>bQ,updateAttributes:()=>xQ,wrapIn:()=>wQ,wrapInList:()=>SQ});var mZ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),gZ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),yZ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),g=d.resolve(h.map(u+l.nodeSize)),y=p.blockRange(g);if(!y)return;const x=$l(y);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(y.start,S)}(x||x===0)&&t.lift(y,x)})}),!0},vZ=e=>t=>e(t),bZ=()=>({state:e,dispatch:t})=>PI(e,t),xZ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ve(r.doc.resolve(Math.max(o-1,0)))),!0},wZ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},SZ=e=>({tr:t,state:n,dispatch:r})=>{const i=Ut(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},EZ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},CZ=()=>({state:e,dispatch:t})=>PC(e,t),kZ=()=>({commands:e})=>e.keyboardShortcut("Enter"),TZ=()=>({state:e,dispatch:t})=>kX(e,t),NZ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Qi(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=$C(u,s,t);if(p&&p.from<=d&&p.to>=h){const g=Ve.create(o,p.from,p.to);n.setSelection(g)}}return!0},AZ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function MZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function YC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var _Z=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(YC()||MZ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!JI(n.state.selection))return o(),!0;const l=ez(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},DZ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),RZ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),OZ=e=>!("type"in e),jZ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{$u(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=$u(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,y=!0;if((OZ(l)?l:[l]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),h===p&&y){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof pe){let w="";t.forEach(C=>{C.text&&(w+=C.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),C=w.node(),N=w.parentOffset===0,k=C.isText||C.isTextblock,T=C.content.size>0;N&&k&&T&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&iZ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},LZ=()=>({state:e,dispatch:t})=>SX(e,t),PZ=()=>({state:e,dispatch:t})=>EX(e,t),BZ=()=>({state:e,dispatch:t})=>MI(e,t),IZ=()=>({state:e,dispatch:t})=>OI(e,t),zZ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Xp(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},qZ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Xp(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},VZ=()=>({state:e,dispatch:t})=>xX(e,t),HZ=()=>({state:e,dispatch:t})=>wX(e,t);function oz(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FZ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))YC()||oz()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var UZ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=FZ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},$Z=(e,t={})=>({state:n,dispatch:r})=>{const i=Ut(e,n.schema);return Zs(n,i,t)?CX(n,r):!1},GZ=()=>({state:e,dispatch:t})=>BI(e,t),KZ=e=>({state:t,dispatch:n})=>{const r=Ut(e,t.schema);return PX(r)(t,n)},YZ=()=>({state:e,dispatch:t})=>LI(e,t);function fD(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var WZ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=sm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Ut(e,r.schema)),l==="mark"&&(o=Qi(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,fD(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(fD(p.attrs,t)))})})}),!0):!1},XZ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),ZZ=()=>({tr:e,dispatch:t})=>{if(t){const n=new lr(e.doc);e.setSelection(n)}return!0},QZ=()=>({state:e,dispatch:t})=>DI(e,t),JZ=()=>({state:e,dispatch:t})=>jI(e,t),eQ=()=>({state:e,dispatch:t})=>AX(e,t),tQ=()=>({state:e,dispatch:t})=>DX(e,t),nQ=()=>({state:e,dispatch:t})=>_X(e,t),rQ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=uE(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function iQ(e,t,n){var r;const{selection:i}=t;let s=null;if(JI(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,g)=>{if(d)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(n),x=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=y&&x}return!d}),d})}var sQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=Qi(e,r.schema);if(i)if(o){const d=YI(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(g,y)=>{const x=Math.max(y,h),S=Math.min(y+g.nodeSize,p);g.marks.find(C=>C.type===u)?g.marks.forEach(C=>{u===C.type&&n.addMark(x,S,u.create({...C.attrs,...t}))}):n.addMark(x,S,u.create(t))})});return iQ(r,n,u)},oQ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),aQ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Ut(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>oD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>oD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},lQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Vo(e,0,r.content.size),s=Re.create(r,i);t.setSelection(s)}return!0},cQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ve.atStart(r).from,l=Ve.atEnd(r).to,u=Vo(i,o,l),d=Vo(s,o,l),h=Ve.create(r,u,d);t.setSelection(h)}return!0},uQ=e=>({state:t,dispatch:n})=>{const r=Ut(e,t.schema);return zX(r)(t,n)};function hD(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var dQ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=bh(d,l.node().type.name,l.node().attrs);if(s instanceof Re&&s.node.isBlock)return!l.parentOffset||!Gi(o,l.pos)?!1:(r&&(e&&hD(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=l.depth===0?void 0:HX(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&g?[{type:g,attrs:h}]:void 0,x=Gi(t.doc,t.mapping.map(l.pos),1,y);if(!y&&!x&&Gi(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(x=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(x&&(s instanceof Ve&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,y),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&hD(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},fQ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Ut(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let C=pe.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-N;R>=u.depth-3;R-=1)C=pe.from(u.node(R).copy(C));const k=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,T={...bh(g,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(T))||void 0;C=C.append(pe.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(N-1));n.replace(_,u.after(-k),new be(C,4-N,0));let D=-1;n.doc.nodesBetween(_,n.doc.content.size,(R,B)=>{if(D>-1)return!1;R.isTextblock&&R.content.size===0&&(D=B+1)}),D>-1&&n.setSelection(Ve.near(n.doc.resolve(D))),n.scrollIntoView()}return!0}const y=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...bh(g,p.type.name,p.attrs),...t},S={...bh(g,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=y?[{type:l,attrs:x},{type:y,attrs:S}]:[{type:l,attrs:x}];if(!Gi(n.doc,u.pos,2))return!1;if(i){const{selection:C,storedMarks:N}=r,{splittableMarks:k}=s.extensionManager,T=N||C.$to.parentOffset&&C.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!T||!i)return!0;const A=T.filter(_=>k.includes(_.type.name));n.ensureMarks(A)}return!0},O0=(e,t)=>{const n=im(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&eo(e.doc,n.pos)&&e.join(n.pos),!0},j0=(e,t)=>{const n=im(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&eo(e.doc,r)&&e.join(r),!0},hQ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,y=Ut(e,o.schema),x=Ut(t,o.schema),{selection:S,storedMarks:w}=o,{$from:C,$to:N}=S,k=C.blockRange(N),T=w||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const A=im(_=>dD(_.type.name,p))(S);if(k.depth>=1&&A&&k.depth-A.depth<=1){if(A.node.type===y)return d.liftListItem(x);if(dD(A.node.type.name,p)&&y.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,y),!0)).command(()=>O0(s,y)).command(()=>j0(s,y)).run()}return!n||!T||!l?u().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>O0(s,y)).command(()=>j0(s,y)).run():u().command(()=>{const _=h().wrapInList(y,r),D=T.filter(R=>g.includes(R.type.name));return s.ensureMarks(D),_?!0:d.clearNodes()}).wrapInList(y,r).command(()=>O0(s,y)).command(()=>j0(s,y)).run()},pQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Qi(e,r.schema);return dE(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},mQ=(e,t,n={})=>({state:r,commands:i})=>{const s=Ut(e,r.schema),o=Ut(t,r.schema),l=Zs(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},gQ=(e,t={})=>({state:n,commands:r})=>{const i=Ut(e,n.schema);return Zs(n,i,t)?r.lift(i):r.wrapIn(i,t)},yQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},vQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},bQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=Qi(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:y}=l;const x=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=$C(d,u,x);S&&(g=S.from,y=S.to),n.removeMark(g,y,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},xQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=sm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Ut(e,r.schema)),l==="mark"&&(o=Qi(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,g,y,x;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(C=>{if(o===C.type){const N=Math.max(w,d),k=Math.min(w+S.nodeSize,h);n.addMark(N,k,o.create({...C.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(y,x,o.create({...S.attrs,...t}))}))}),!0):!1},wQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Ut(e,n.schema);return RX(i,t)(n,r)},SQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Ut(e,n.schema);return OX(i,t)(n,r)},az=Bt.create({name:"commands",addCommands(){return{...sz}}}),lz=Bt.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=VI(e.before,[e,...t]);XI(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(x,S)=>{const w=S+x.nodeSize-2,C=y.oldRange.from<=S&&w<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:y.oldRange,newRange:y.newRange,partial:!C,editor:this.editor,transaction:e,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,x)=>{var S,w;if(y instanceof Ur){const C=g.slice(x).map(y.from,-1),N=g.slice(x).map(y.to),k=g.invert().map(C,-1),T=g.invert().map(N),A=(S=h.doc.nodeAt(C-1))==null?void 0:S.marks.some(D=>D.eq(y.mark)),_=(w=h.doc.nodeAt(N))==null?void 0:w.marks.some(D=>D.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:k,to:T},newRange:{from:C,to:N},partial:!!(_||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),cz=Bt.create({name:"drop",addProseMirrorPlugins(){return[new Dt({key:new cn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),uz=Bt.create({name:"editable",addProseMirrorPlugins(){return[new Dt({key:new cn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),dz=new cn("focusEvents"),fz=Bt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Dt({key:dz,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),hz=Bt.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:g,parent:y}=p,x=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=x.parent.type.spec.isolating,w=p.pos-p.parentOffset,C=S&&x.parent.childCount===1?w===p.pos:Ue.atStart(d).from===g;return!h||!y.type.isTextblock||y.textContent.length||!C||C&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return YC()||oz()?s:i},addProseMirrorPlugins(){return[new Dt({key:new cn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Ue.atStart(t.doc).from,d=Ue.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!om(n.doc))return;const g=n.tr,y=nm({state:n,transaction:g}),{commands:x}=new rm({editor:this.editor,state:y});if(x.clearNodes(),!!g.steps.length)return g}})]}}),pz=Bt.create({name:"paste",addProseMirrorPlugins(){return[new Dt({key:new cn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),mz=Bt.create({name:"tabindex",addProseMirrorPlugins(){return[new Dt({key:new cn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),EQ=class pl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new pl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new pl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new pl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new pl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new pl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},CQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function kQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var TQ=class extends VX{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=ez(t,this.options.autofocus);this.editorState=wl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=kQ(CQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=FI(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[uz,iz.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),az,fz,hz,mz,cz,pz,lz].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new lm(r,this)}createCommandManager(){this.commandManager=new rm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=uE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=uE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new TI(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return WI(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return tZ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return HC(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return WX(this.state.doc,{blockSeparator:t,textSerializers:{...KI(this.schema),...n}})}get isEmpty(){return om(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new EQ(t,this)}get $doc(){return this.$pos(0)}};function Ll(e){return new am({find:e.find,handler:({state:t,range:n,match:r})=>{const i=it(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(GC(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(S=>S===e.type&&S!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const g=n.from+u+o.length;s.addMark(n.from+u,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function NQ(e){return new am({find:e.find,handler:({state:t,range:n,match:r})=>{const i=it(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function fE(e){return new am({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=it(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Pl(e){return new am({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=it(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&kC(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:y}=e.editor.extensionManager,x=g||p.$to.parentOffset&&p.$from.marks();if(x){const S=x.filter(w=>y.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&eo(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function AQ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Re){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function MQ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let g=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(g=!0)}),g){const y=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,y)}}),s.docChanged&&t.view.dispatch(s)}var ur=class gz extends KC{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new gz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function ia(e){return new cZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=it(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),g=p+l.length;if(GC(n.from,n.to,t.doc).filter(x=>x.mark.type.excluded.find(w=>w===e.type&&w!==x.mark.type)).filter(x=>x.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var L0,pD;function _Q(){return pD||(pD=1,L0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),L0}var DQ=_Q();const RQ=od(DQ);var P0={exports:{}},B0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD;function OQ(){if(mD)return B0;mD=1;var e=ad(),t=dB();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return B0.useSyncExternalStoreWithSelector=function(d,h,p,g,y){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function C(_){if(!N){if(N=!0,k=_,_=g(_),y!==void 0&&S.hasValue){var D=S.value;if(y(D,_))return T=D}return T=_}if(D=T,r(k,_))return D;var R=g(_);return y!==void 0&&y(D,R)?(k=_,D):(k=_,T=R)}var N=!1,k,T,A=p===void 0?null:p;return[function(){return C(h())},A===null?void 0:function(){return C(A())}]},[h,p,g,y]);var w=i(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},B0}var gD;function jQ(){return gD||(gD=1,P0.exports=OQ()),P0.exports}var yz=jQ();const LQ=od(yz);var PQ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},BQ=({contentComponent:e})=>{const t=fB.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(t)})};function IQ(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:cP.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var zQ=class extends Pe.Component{constructor(e){var t;super(e),this.editorContentRef=Pe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=IQ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:PQ(t,this.editorContentRef),...n}),e?.contentComponent&&v.jsx(BQ,{contentComponent:e.contentComponent})]})}},qQ=j.forwardRef((e,t)=>{const n=Pe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Pe.createElement(zQ,{key:n,innerRef:t,...e})}),yD=Pe.memo(qQ),VQ=typeof window<"u"?j.useLayoutEffect:j.useEffect,HQ=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function FQ(e){var t;const[n]=j.useState(()=>new HQ(e.editor)),r=yz.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:RQ);return VQ(()=>n.watch(e.editor),[e.editor,n]),j.useDebugValue(r),r}var UQ=!1,hE=typeof window>"u",$Q=hE||!!(typeof window<"u"&&window.next),GQ=class vz{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?hE||$Q?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new TQ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?vz.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function KQ(e={},t=[]){const n=j.useRef(e);n.current=e;const[r]=j.useState(()=>new GQ(n)),i=fB.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return j.useDebugValue(i),j.useEffect(r.onRender(t)),FQ({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var YQ=j.createContext({editor:null});YQ.Consumer;var WQ=j.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),XQ=()=>j.useContext(WQ);Pe.forwardRef((e,t)=>{const{onDragStart:n}=XQ(),r=e.as||"div";return v.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Pe.createContext({markViewContentRef:()=>{}});var Xh=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},ZQ=/^\s*>\s$/,QQ=ur.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Xh("blockquote",{...Ft(this.options.HTMLAttributes,e),children:Xh("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Pl({find:ZQ,type:this.type})]}}),JQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,eJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,tJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,nJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,rJ=ma.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Xh("strong",{...Ft(this.options.HTMLAttributes,e),children:Xh("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ll({find:JQ,type:this.type}),Ll({find:tJ,type:this.type})]},addPasteRules(){return[ia({find:eJ,type:this.type}),ia({find:nJ,type:this.type})]}}),iJ=/(^|[^`])`([^`]+)`(?!`)$/,sJ=/(^|[^`])`([^`]+)`(?!`)/g,oJ=ma.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ll({find:iJ,type:this.type})]},addPasteRules(){return[ia({find:sJ,type:this.type})]}}),aJ=/^```([a-z]+)?[\s\n]$/,lJ=/^~~~([a-z]+)?[\s\n]$/,cJ=ur.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ft(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let g=0,y=0;const x=l-u;for(let T=0;T<p.length;T+=1){if(y+p[T].length>=x){g=T;break}y+=p[T].length+1}const w=((o=p[g].match(/^ */))==null?void 0:o[0])||"",C=Math.min(w.length,this.options.tabSize);if(C===0)return!0;let N=u;for(let T=0;T<g;T+=1)N+=p[T].length+1;return s.delete(N,N+C),l-N<=C&&s.setSelection(Ve.create(s.doc,N)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const y=((g=p.match(/^ */))==null?void 0:g[0])||"",x=Math.min(y.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Ue.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[fE({find:aJ,type:this.type,getAttributes:e=>({language:e[1]})}),fE({find:lJ,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Dt({key:new cn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ve.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),uJ=ur.create({name:"doc",topNode:!0,content:"block+"}),dJ=ur.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ft(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(g=>l.includes(g.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),bz=ur.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ft(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>fE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),fJ=bz,hJ=ur.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ft(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!AQ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return QI(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ve.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Re.create(s.doc,u.pos)):s.setSelection(Ve.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(Ve.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[NQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),pJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,mJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,gJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,yJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,vJ=ma.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ll({find:pJ,type:this.type}),Ll({find:gJ,type:this.type})]},addPasteRules(){return[ia({find:mJ,type:this.type}),ia({find:yJ,type:this.type})]}});const bJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xJ="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",pE="numeric",mE="ascii",gE="alpha",Su="asciinumeric",au="alphanumeric",yE="domain",xz="emoji",wJ="scheme",SJ="slashscheme",I0="whitespace";function EJ(e,t){return e in t||(t[e]=[]),t[e]}function Ho(e,t,n){t[pE]&&(t[Su]=!0,t[au]=!0),t[mE]&&(t[Su]=!0,t[gE]=!0),t[Su]&&(t[au]=!0),t[gE]&&(t[au]=!0),t[au]&&(t[yE]=!0),t[xz]&&(t[yE]=!0);for(const r in t){const i=EJ(r,n);i.indexOf(e)<0&&i.push(e)}}function CJ(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Vn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Vn.groups={};Vn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Vn.groups;let i;return t&&t.j?i=t:(i=new Vn(t),n&&r&&Ho(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Vn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Vn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Vn,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(CJ(o.t,r),n);Ho(s,u,r)}else n&&Ho(s,n,r);o.t=s}return i.j[e]=o,o}};const $e=(e,t,n,r,i)=>e.ta(t,n,r,i),At=(e,t,n,r,i)=>e.tr(t,n,r,i),vD=(e,t,n,r,i)=>e.ts(t,n,r,i),me=(e,t,n,r,i)=>e.tt(t,n,r,i),Hi="WORD",vE="UWORD",wz="ASCIINUMERICAL",Sz="ALPHANUMERICAL",Ku="LOCALHOST",bE="TLD",xE="UTLD",xh="SCHEME",ml="SLASH_SCHEME",WC="NUM",wE="WS",XC="NL",Eu="OPENBRACE",Cu="CLOSEBRACE",Zh="OPENBRACKET",Qh="CLOSEBRACKET",Jh="OPENPAREN",ep="CLOSEPAREN",tp="OPENANGLEBRACKET",np="CLOSEANGLEBRACKET",rp="FULLWIDTHLEFTPAREN",ip="FULLWIDTHRIGHTPAREN",sp="LEFTCORNERBRACKET",op="RIGHTCORNERBRACKET",ap="LEFTWHITECORNERBRACKET",lp="RIGHTWHITECORNERBRACKET",cp="FULLWIDTHLESSTHAN",up="FULLWIDTHGREATERTHAN",dp="AMPERSAND",fp="APOSTROPHE",hp="ASTERISK",Rs="AT",pp="BACKSLASH",mp="BACKTICK",gp="CARET",Ls="COLON",ZC="COMMA",yp="DOLLAR",ii="DOT",vp="EQUALS",QC="EXCLAMATION",Tr="HYPHEN",ku="PERCENT",bp="PIPE",xp="PLUS",wp="POUND",Tu="QUERY",JC="QUOTE",Ez="FULLWIDTHMIDDLEDOT",ek="SEMI",si="SLASH",Nu="TILDE",Sp="UNDERSCORE",Cz="EMOJI",Ep="SYM";var kz=Object.freeze({__proto__:null,ALPHANUMERICAL:Sz,AMPERSAND:dp,APOSTROPHE:fp,ASCIINUMERICAL:wz,ASTERISK:hp,AT:Rs,BACKSLASH:pp,BACKTICK:mp,CARET:gp,CLOSEANGLEBRACKET:np,CLOSEBRACE:Cu,CLOSEBRACKET:Qh,CLOSEPAREN:ep,COLON:Ls,COMMA:ZC,DOLLAR:yp,DOT:ii,EMOJI:Cz,EQUALS:vp,EXCLAMATION:QC,FULLWIDTHGREATERTHAN:up,FULLWIDTHLEFTPAREN:rp,FULLWIDTHLESSTHAN:cp,FULLWIDTHMIDDLEDOT:Ez,FULLWIDTHRIGHTPAREN:ip,HYPHEN:Tr,LEFTCORNERBRACKET:sp,LEFTWHITECORNERBRACKET:ap,LOCALHOST:Ku,NL:XC,NUM:WC,OPENANGLEBRACKET:tp,OPENBRACE:Eu,OPENBRACKET:Zh,OPENPAREN:Jh,PERCENT:ku,PIPE:bp,PLUS:xp,POUND:wp,QUERY:Tu,QUOTE:JC,RIGHTCORNERBRACKET:op,RIGHTWHITECORNERBRACKET:lp,SCHEME:xh,SEMI:ek,SLASH:si,SLASH_SCHEME:ml,SYM:Ep,TILDE:Nu,TLD:bE,UNDERSCORE:Sp,UTLD:xE,UWORD:vE,WORD:Hi,WS:wE});const zi=/[a-z]/,Qc=new RegExp("\\p{L}","u"),z0=new RegExp("\\p{Emoji}","u"),qi=/\d/,q0=/\s/,bD="\r",V0=`
`,kJ="",TJ="",H0="";let Jf=null,eh=null;function NJ(e=[]){const t={};Vn.groups=t;const n=new Vn;Jf==null&&(Jf=xD(bJ)),eh==null&&(eh=xD(xJ)),me(n,"'",fp),me(n,"{",Eu),me(n,"}",Cu),me(n,"[",Zh),me(n,"]",Qh),me(n,"(",Jh),me(n,")",ep),me(n,"<",tp),me(n,">",np),me(n,"",rp),me(n,"",ip),me(n,"",sp),me(n,"",op),me(n,"",ap),me(n,"",lp),me(n,"",cp),me(n,"",up),me(n,"&",dp),me(n,"*",hp),me(n,"@",Rs),me(n,"`",mp),me(n,"^",gp),me(n,":",Ls),me(n,",",ZC),me(n,"$",yp),me(n,".",ii),me(n,"=",vp),me(n,"!",QC),me(n,"-",Tr),me(n,"%",ku),me(n,"|",bp),me(n,"+",xp),me(n,"#",wp),me(n,"?",Tu),me(n,'"',JC),me(n,"/",si),me(n,";",ek),me(n,"~",Nu),me(n,"_",Sp),me(n,"\\",pp),me(n,"",Ez);const r=At(n,qi,WC,{[pE]:!0});At(r,qi,r);const i=At(r,zi,wz,{[Su]:!0}),s=At(r,Qc,Sz,{[au]:!0}),o=At(n,zi,Hi,{[mE]:!0});At(o,qi,i),At(o,zi,o),At(i,qi,i),At(i,zi,i);const l=At(n,Qc,vE,{[gE]:!0});At(l,zi),At(l,qi,s),At(l,Qc,l),At(s,qi,s),At(s,zi),At(s,Qc,s);const u=me(n,V0,XC,{[I0]:!0}),d=me(n,bD,wE,{[I0]:!0}),h=At(n,q0,wE,{[I0]:!0});me(n,H0,h),me(d,V0,u),me(d,H0,h),At(d,q0,h),me(h,bD),me(h,V0),At(h,q0,h),me(h,H0,h);const p=At(n,z0,Cz,{[xz]:!0});me(p,"#"),At(p,z0,p),me(p,kJ,p);const g=me(p,TJ);me(g,"#"),At(g,z0,p);const y=[[zi,o],[qi,i]],x=[[zi,null],[Qc,l],[qi,s]];for(let S=0;S<Jf.length;S++)Ts(n,Jf[S],bE,Hi,y);for(let S=0;S<eh.length;S++)Ts(n,eh[S],xE,vE,x);Ho(bE,{tld:!0,ascii:!0},t),Ho(xE,{utld:!0,alpha:!0},t),Ts(n,"file",xh,Hi,y),Ts(n,"mailto",xh,Hi,y),Ts(n,"http",ml,Hi,y),Ts(n,"https",ml,Hi,y),Ts(n,"ftp",ml,Hi,y),Ts(n,"ftps",ml,Hi,y),Ho(xh,{scheme:!0,ascii:!0},t),Ho(ml,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],N=e[S][1]?{[wJ]:!0}:{[SJ]:!0};w.indexOf("-")>=0?N[yE]=!0:zi.test(w)?qi.test(w)?N[Su]=!0:N[mE]=!0:N[pE]=!0,vD(n,w,w,N)}return vD(n,"localhost",Ku,{ascii:!0}),n.jd=new Vn(Ep),{start:n,tokens:Object.assign({groups:t},kz)}}function Tz(e,t){const n=AJ(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,g=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=n[o].length,g++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function AJ(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Ts(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Vn(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Vn(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function xD(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Yu={defaultProtocol:"http",events:null,format:wD,formatHref:wD,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function tk(e,t=null){let n=Object.assign({},Yu);e&&(n=Object.assign(n,e instanceof tk?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}tk.prototype={o:Yu,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Yu[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function wD(e){return e}function Nz(e,t){this.t="token",this.v=e,this.tk=t}Nz.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Yu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function cm(e,t){class n extends Nz{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const SD=cm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ED=cm("text"),MJ=cm("nl"),th=cm("url",{isLink:!0,toHref(e=Yu.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Ku&&e[1].t===Ls}}),Cr=e=>new Vn(e);function _J({groups:e}){const t=e.domain.concat([dp,hp,Rs,pp,mp,gp,yp,vp,Tr,WC,ku,bp,xp,wp,si,Ep,Nu,Sp]),n=[fp,Ls,ZC,ii,QC,ku,Tu,JC,ek,tp,np,Eu,Cu,Qh,Zh,Jh,ep,rp,ip,sp,op,ap,lp,cp,up],r=[dp,fp,hp,pp,mp,gp,yp,vp,Tr,Eu,Cu,ku,bp,xp,wp,Tu,si,Ep,Nu,Sp],i=Cr(),s=me(i,Nu);$e(s,r,s),$e(s,e.domain,s);const o=Cr(),l=Cr(),u=Cr();$e(i,e.domain,o),$e(i,e.scheme,l),$e(i,e.slashscheme,u),$e(o,r,s),$e(o,e.domain,o);const d=me(o,Rs);me(s,Rs,d),me(l,Rs,d),me(u,Rs,d);const h=me(s,ii);$e(h,r,s),$e(h,e.domain,s);const p=Cr();$e(d,e.domain,p),$e(p,e.domain,p);const g=me(p,ii);$e(g,e.domain,p);const y=Cr(SD);$e(g,e.tld,y),$e(g,e.utld,y),me(d,Ku,y);const x=me(p,Tr);me(x,Tr,x),$e(x,e.domain,p),$e(y,e.domain,p),me(y,ii,g),me(y,Tr,x);const S=me(y,Ls);$e(S,e.numeric,SD);const w=me(o,Tr),C=me(o,ii);me(w,Tr,w),$e(w,e.domain,o),$e(C,r,s),$e(C,e.domain,o);const N=Cr(th);$e(C,e.tld,N),$e(C,e.utld,N),$e(N,e.domain,o),$e(N,r,s),me(N,ii,C),me(N,Tr,w),me(N,Rs,d);const k=me(N,Ls),T=Cr(th);$e(k,e.numeric,T);const A=Cr(th),_=Cr();$e(A,t,A),$e(A,n,_),$e(_,t,A),$e(_,n,_),me(N,si,A),me(T,si,A);const D=me(l,Ls),R=me(u,Ls),B=me(R,si),U=me(B,si);$e(l,e.domain,o),me(l,ii,C),me(l,Tr,w),$e(u,e.domain,o),me(u,ii,C),me(u,Tr,w),$e(D,e.domain,A),me(D,si,A),me(D,Tu,A),$e(U,e.domain,A),$e(U,t,A),me(U,si,A);const z=[[Eu,Cu],[Zh,Qh],[Jh,ep],[tp,np],[rp,ip],[sp,op],[ap,lp],[cp,up]];for(let V=0;V<z.length;V++){const[Y,I]=z[V],$=me(A,Y);me(_,Y,$),me($,I,A);const L=Cr(th);$e($,t,L);const q=Cr();$e($,n),$e(L,t,L),$e(L,n,q),$e(q,t,L),$e(q,n,q),me(L,I,A),me(q,I,A)}return me(i,Ku,N),me(i,XC,MJ),{start:i,tokens:kz}}function DJ(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,g=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(F0(ED,t,o)),o=[]),i-=g,h-=g;const y=p.t,x=n.slice(i-h,i);s.push(F0(y,t,x))}}return o.length>0&&s.push(F0(ED,t,o)),s}function F0(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const RJ=typeof console<"u"&&console&&console.warn||(()=>{}),OJ="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function jJ(){return Vn.groups={},pt.scanner=null,pt.parser=null,pt.tokenQueue=[],pt.pluginQueue=[],pt.customSchemes=[],pt.initialized=!1,pt}function CD(e,t=!1){if(pt.initialized&&RJ(`linkifyjs: already initialized - will not register custom scheme "${e}" ${OJ}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);pt.customSchemes.push([e,t])}function LJ(){pt.scanner=NJ(pt.customSchemes);for(let e=0;e<pt.tokenQueue.length;e++)pt.tokenQueue[e][1]({scanner:pt.scanner});pt.parser=_J(pt.scanner.tokens);for(let e=0;e<pt.pluginQueue.length;e++)pt.pluginQueue[e][1]({scanner:pt.scanner,parser:pt.parser});return pt.initialized=!0,pt}function nk(e){return pt.initialized||LJ(),DJ(pt.parser.start,e,Tz(pt.scanner.start,e))}nk.scan=Tz;function Az(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new tk(n),i=nk(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var rk="[\0- -\u2029]",PJ=new RegExp(rk),BJ=new RegExp(`${rk}$`),IJ=new RegExp(rk,"g");function zJ(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function qJ(e){return new Dt({key:new cn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=VI(n.doc,[...t]);if(XI(l).forEach(({newRange:d})=>{const h=FX(r.doc,d,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!BJ.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const y=g.split(PJ).filter(Boolean);if(y.length<=0)return!1;const x=y[y.length-1],S=p.pos+g.lastIndexOf(x);if(!x)return!1;const w=nk(x).map(C=>C.toObject(e.defaultProtocol));if(!zJ(w))return!1;w.filter(C=>C.isLink).map(C=>({...C,from:S+C.start+1,to:S+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>e.validate(C.value)).filter(C=>e.shouldAutoLink(C.value)).forEach(C=>{GC(C.from,C.to,r.doc).some(N=>N.mark.type===e.type)||o.addMark(C.from,C.to,e.type.create({href:C.href}))})}}),!!o.steps.length)return o}})}function VJ(e){return new Dt({key:new cn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=WI(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function HJ(e){return new Dt({key:new cn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=Az(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function Do(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(IJ,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Mz=ma.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){CD(e);return}CD(e.scheme,e.optionalSlashes)})},onDestroy(){jJ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Do(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Do(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Do(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ft(this.options.HTMLAttributes,e),0]:["a",Ft(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Do(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Do(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ia({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Az(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Do(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(qJ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Do(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(VJ({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(HJ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),FJ=Mz,UJ=Object.defineProperty,$J=(e,t)=>{for(var n in t)UJ(e,n,{get:t[n],enumerable:!0})},GJ="listItem",kD="textStyle",TD=/^\s*([-+*])\s$/,ik=ur.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(GJ,this.editor.getAttributes(kD)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Pl({find:TD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Pl({find:TD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kD),editor:this.editor})),[e]}}),sk=ur.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ft(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),KJ={};$J(KJ,{findListItemPos:()=>vd,getNextListDepth:()=>ok,handleBackspace:()=>SE,handleDelete:()=>EE,hasListBefore:()=>_z,hasListItemAfter:()=>YJ,hasListItemBefore:()=>Dz,listItemHasSubList:()=>Rz,nextListIsDeeper:()=>Oz,nextListIsHigher:()=>jz});var vd=(e,t)=>{const{$from:n}=t.selection,r=Ut(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},ok=(e,t)=>{const n=vd(e,t);if(!n)return!1;const[,r]=JX(t,e,n.$pos.pos+4);return r},_z=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Dz=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Rz=(e,t,n)=>{if(!n)return!1;const r=Ut(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},SE=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Zs(e.state,t)&&_z(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((g,y)=>{g.type.name===t&&d.push({node:g,pos:y})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!Zs(e.state,t)||!rZ(e.state))return!1;const r=vd(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Rz(t,e.state,s);return Dz(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Oz=(e,t)=>{const n=ok(e,t),r=vd(e,t);return!r||!n?!1:n>r.depth},jz=(e,t)=>{const n=ok(e,t),r=vd(e,t);return!r||!n?!1:n<r.depth},EE=(e,t)=>{if(!Zs(e.state,t)||!nZ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Oz(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():jz(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},YJ=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},Lz=Bt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&EE(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&EE(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&SE(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&SE(e,n,r)&&(t=!0)}),t}}}}),WJ="listItem",ND="textStyle",AD=/^(\d+)\.\s$/,ak=ur.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Ft(this.options.HTMLAttributes,n),0]:["ol",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WJ,this.editor.getAttributes(ND)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Pl({find:AD,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Pl({find:AD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(ND)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),XJ=/^\s*(\[([( |x])?\])\s$/,ZJ=ur.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ft(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const y=n();if(typeof y!="number")return!1;const x=g.doc.nodeAt(y);return g.setNodeMarkup(y,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[Pl({find:XJ,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),QJ=ur.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ft(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Bt.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(ik.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(sk.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Lz.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(ak.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(ZJ.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(QJ.configure(this.options.taskList)),e}});var JJ=ur.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),eee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,nee=ma.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ll({find:eee,type:this.type})]},addPasteRules(){return[ia({find:tee,type:this.type})]}}),ree=ur.create({name:"text",group:"inline"}),Pz=ma.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ft(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),iee=Pz;function see(e={}){return new Dt({view(t){return new oee(t,e)}})}class oee{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let x=y.getBoundingClientRect(),S=p?x.bottom:x.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:x.left,right:x.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,y=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,h=p.top-u.scrollTop*y}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=zB(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class _t extends Ue{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return _t.valid(r)?new _t(r):Ue.near(r)}content(){return be.empty}eq(t){return t instanceof _t&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(t.resolve(n.pos))}getBookmark(){return new lk(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!aee(t)||!lee(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&_t.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(_t.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(_t.valid(l))return l}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Ue.jsonID("gapcursor",_t);class lk{constructor(t){this.pos=t}map(t){return new lk(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return _t.valid(n)?new _t(n):Ue.near(n)}}function aee(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lee(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function cee(){return new Dt({props:{decorations:hee,createSelectionBetween(e,t,n){return t.pos==n.pos&&_t.valid(n)?new _t(n):null},handleClick:dee,handleKeyDown:uee,handleDOMEvents:{beforeinput:fee}}})}const uee=NI({ArrowLeft:nh("horiz",-1),ArrowRight:nh("horiz",1),ArrowUp:nh("vert",-1),ArrowDown:nh("vert",1)});function nh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ve){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=_t.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new _t(d))),!0):!1}}function dee(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!_t.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Re.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new _t(r))),!0)}function fee(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof _t))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=pe.empty;for(let o=r.length-1;o>=0;o--)i=pe.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new be(i,0,0));return s.setSelection(Ve.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function hee(e){if(!(e.selection instanceof _t))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",wt.create(e.doc,[_n.widget(e.selection.head,t,{key:"gapcursor"})])}var Cp=200,ln=function(){};ln.prototype.append=function(t){return t.length?(t=ln.from(t),!this.length&&t||t.length<Cp&&this.leafAppend(t)||this.length<Cp&&t.leafPrepend(this)||this.appendInner(t)):this};ln.prototype.prepend=function(t){return t.length?ln.from(t).append(this):this};ln.prototype.appendInner=function(t){return new pee(this,t)};ln.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?ln.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};ln.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};ln.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};ln.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};ln.from=function(t){return t instanceof ln?t:t&&t.length?new Bz(t):ln.empty};var Bz=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Cp)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Cp)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(ln);ln.empty=new Bz([]);var pee=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(ln);const mee=500;class Hr{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new oi(p.map));let y=p.step.map(i.slice(s)),x;y&&o.maybeStep(y).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new oi(x,void 0,void 0,d.length+h.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Hr(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),g=new oi(t.mapping.maps[h],p,n),y;(y=u&&u.merge(g))&&(g=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(u=g)}let d=o-r.depth;return d>yee&&(l=gee(l,d),o-=d),new Hr(l.append(s),o)}remapping(t,n){let r=new qu;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Hr(this.items.append(t.map(n=>new oi(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let u=n;this.items.forEach(g=>{let y=s.getMirror(--u);if(y==null)return;o=Math.min(o,y);let x=s.maps[y];if(g.step){let S=t.steps[y].invert(t.docs[y]),w=g.selection&&g.selection.map(s.slice(u+1,y));w&&l++,r.push(new oi(x,S,w))}else r.push(new oi(x))},i);let d=[];for(let g=n;g<o;g++)d.push(new oi(s.maps[g]));let h=this.items.slice(0,i).append(d).append(r),p=new Hr(h,l);return p.emptyItemCount()>mee&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new oi(d.invert(),u,h),g,y=i.length-1;(g=i.length&&i[y].merge(p))?i[y]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new Hr(ln.from(i.reverse()),s)}}Hr.empty=new Hr(ln.empty,0);function gee(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class oi{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new oi(n.getMap().invert(),n,this.selection)}}}class Os{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const yee=20;function vee(e,t,n,r){let i=n.getMeta(Zo),s;if(i)return i.historyState;n.getMeta(wee)&&(e=new Os(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Zo))return o.getMeta(Zo).redo?new Os(e.done.addTransform(n,void 0,r,wh(t)),e.undone,MD(n.mapping.maps),e.prevTime,e.prevComposition):new Os(e.done,e.undone.addTransform(n,void 0,r,wh(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!bee(n,e.prevRanges)),d=o?U0(e.prevRanges,n.mapping):MD(n.mapping.maps);return new Os(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,wh(t)),Hr.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Os(e.done.rebased(n,s),e.undone.rebased(n,s),U0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Os(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),U0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function bee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function MD(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function U0(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function xee(e,t,n){let r=wh(t),i=Zo.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new Os(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Zo,{redo:n,historyState:u})}let $0=!1,_D=null;function wh(e){let t=e.plugins;if(_D!=t){$0=!1,_D=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){$0=!0;break}}return $0}const Zo=new cn("history"),wee=new cn("closeHistory");function See(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Dt({key:Zo,state:{init(){return new Os(Hr.empty,Hr.empty,null,0,-1)},apply(t,n,r){return vee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?zz:r=="historyRedo"?qz:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function Iz(e,t){return(n,r)=>{let i=Zo.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=xee(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const zz=Iz(!1,!0),qz=Iz(!0,!0);Bt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Dt({key:new cn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var Eee=Bt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[see(this.options)]}});Bt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Dt({key:new cn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return wt.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(_n.node(d,d+u.nodeSize,{class:this.options.className}))}),wt.create(e,s)}}})]}});var Cee=Bt.create({name:"gapCursor",addProseMirrorPlugins(){return[cee()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=it(De(e,"allowGapCursor",n)))!=null?t:null}}}),kee=Bt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Dt({key:new cn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&om(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=_n.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),wt.create(e,i)}}})]}});Bt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Dt({key:new cn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||QI(n.selection)||e.view.dragging?null:wt.create(n.doc,[_n.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function DD({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Tee=Bt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new cn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Dt({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!DD({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!DD({node:i,types:t})}}})]}}),Nee=Bt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>zz(e,t),redo:()=>({state:e,dispatch:t})=>qz(e,t)}},addProseMirrorPlugins(){return[See(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Aee=Bt.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(rJ.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(QQ.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(ik.configure(this.options.bulletList)),this.options.code!==!1&&i.push(oJ.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(cJ.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(uJ.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Eee.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Cee.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(dJ.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(bz.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Nee.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(hJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(vJ.configure(this.options.italic)),this.options.listItem!==!1&&i.push(sk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Lz.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Mz.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(ak.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(JJ.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(nee.configure(this.options.strike)),this.options.text!==!1&&i.push(ree.configure(this.options.text)),this.options.underline!==!1&&i.push(Pz.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Tee.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Mee=Aee,_ee=Bt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Dee=_ee,Ree=kee,Oee=ik,jee=ak,Lee=sk;const um=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return v.jsxs(vn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&v.jsx(vn.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},dm=()=>{const[e,t]=Pe.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}};function Pee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function ck(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function Vz(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function Bee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function Iee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H9V4h9v12zM3 15v-2h2v2H3zm0-5.5h2v2H3v-2zM10 20h2v2h-2v-2zm-7-1.5v-2h2v2H3zM5 22c-1.1 0-2-.9-2-2h2v2zm3.5 0h-2v-2h2v2zm5 0v-2h2c0 1.1-.9 2-2 2zM5 6v2H3c0-1.1.9-2 2-2z"},child:[]}]})(e)}function zee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function qee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function Vee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function Hee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function Fee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function Uee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function $ee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function Gee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function Kee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function Yee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function Wee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function Xee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function Zee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}const ll=({onClick:e,disabled:t,active:n,title:r,children:i})=>v.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),RD=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),v.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[v.jsx("option",{value:"0",children:"P"}),v.jsx("option",{value:"1",children:"H1"}),v.jsx("option",{value:"2",children:"H2"}),v.jsx("option",{value:"3",children:"H3"})]})},kp=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=j.useState(0),[d,h]=j.useState(!1),{focused:p,onFocus:g,onBlur:y}=dm(),x=()=>u(Date.now()),S=()=>{h(!d)},w=KQ({extensions:[Mee.configure({bulletList:!1,orderedList:!1,listItem:!1}),Oee.configure({HTMLAttributes:{class:"bullet-list"}}),jee.configure({HTMLAttributes:{class:"ordered-list"}}),Lee.configure({HTMLAttributes:{class:"list-item"}}),iee,FJ.configure({openOnClick:!1}),Dee.configure({types:["heading","paragraph"]}),fJ.configure({levels:[1,2,3]}),Ree.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:T})=>{r(T.getHTML())},onFocus:g,onBlur:y,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(j.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),j.useEffect(()=>{const T=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",T),document.body.style.overflow=""}},[d]),!w)return null;const C=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:v.jsx(Hee,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:v.jsx(Fee,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:v.jsx(Kee,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:v.jsx(v.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:v.jsx(Uee,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:v.jsx($ee,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:v.jsx(Gee,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:v.jsx(Pee,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:v.jsx(qee,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:v.jsx(zee,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:v.jsx(Vee,{size:16})}],k=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?v.jsx(Xee,{size:16}):v.jsx(Zee,{size:16})}];return v.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?v.jsxs(vn.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[v.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&v.jsx("span",{className:"font-medium text-theme",children:t})}),v.jsx(RD,{editor:w,disabled:s}),C.map(T=>v.jsx(ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsx("div",{className:"h-full overflow-y-auto p-4",children:v.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:v.jsx(yD,{editor:w,className:"focus:outline-none h-full"})})})})]}):v.jsx(um,{id:e,label:t,focused:p,containerClassName:l,children:v.jsxs(vn.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[v.jsx(RD,{editor:w,disabled:s}),C.map(T=>v.jsx(ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:v.jsx(yD,{editor:w,className:"focus:outline-none"})})]})})})},Qee=()=>{fa();const e=ld(),[t,n]=j.useState(!1),r=j.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=j.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,y)=>{o(x=>({...x,[g]:y}))},u=(g,y,x)=>{const S=s[g].map(w=>w.id===y?{...w,value:x}:w);o(w=>({...w,[g]:S}))},d=g=>{o(y=>({...y,[g]:[...y[g],{id:i(),value:""}]}))},h=(g,y)=>{const x=s[g].filter(S=>S.id!==y);o(S=>({...S,[g]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(y=>y.value).filter(y=>y.trim()!==""),constraints:s.constraints.map(y=>y.value).filter(y=>y.trim()!==""),hints:s.hints.map(y=>y.value).filter(y=>y.trim()!==""),tags:s.tags.map(y=>y.value).filter(y=>y.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return v.jsxs(v.Fragment,{children:[v.jsx(ud,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsx(cd,{})})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"inline-block mb-4",children:v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),v.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsx("div",{children:v.jsx(kp,{id:"description",label:" Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),v.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"Easy",children:"Easy"}),v.jsx("option",{value:"Medium",children:"Medium"}),v.jsx("option",{value:"Hard",children:"Hard"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Category"]}),v.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),v.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Requirements"]}),v.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,y)=>v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-3 items-start",children:[v.jsx("div",{className:"flex-1",children:v.jsx(kp,{id:`requirement-${g.id}`,label:`Requirement ${y+1}`,value:g.value,onChange:x=>u("requirements",g.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&v.jsx("button",{type:"button",onClick:()=>h("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Constraints"]}),v.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("constraints",g.id,y.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),v.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("hints",g.id,y.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(g=>g.value.trim())&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>v.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[v.jsx("span",{children:g.value}),v.jsx("button",{type:"button",onClick:()=>h("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>u("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),v.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[v.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):v.jsx(v.Fragment,{children:" Create & Start Designing"})}),v.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},Jee=()=>{fa();const e=ld(),[t,n]=j.useState([]),[r,i]=j.useState(!1),[s,o]=j.useState(""),[l,u]=j.useState("updated"),[d,h]=j.useState(!1),[p,g]=j.useState(!1),{user:y,isAuthenticated:x,login:S,signup:w,googleLogin:C,logout:N}=Fp();j.useEffect(()=>{x||e("/")},[x,e]),j.useEffect(()=>{(async()=>{if(!x){n([]);return}i(!0);try{const D=await sr.getUserDiagrams();n(D)}catch(D){console.error("Failed to load diagrams:",D)}finally{i(!1)}})()},[x]);const k=_=>{e(`/playground/free?diagramId=${_}`)},T=async(_,D)=>{if(D.stopPropagation(),!!globalThis.confirm("Are you sure you want to delete this diagram?"))try{await sr.deleteDiagram(_),n(R=>R.filter(B=>B.id!==_))}catch(R){console.error("Failed to delete diagram:",R),alert("Failed to delete diagram. Please try again.")}},A=t.filter(_=>{const D=s.toLowerCase();return _.title.toLowerCase().includes(D)||_.description?.toLowerCase().includes(D)||!1}).sort((_,D)=>{switch(l){case"title":return _.title.localeCompare(D.title);case"created":return new Date(D.createdAt).getTime()-new Date(_.createdAt).getTime();case"updated":default:return new Date(D.updatedAt).getTime()-new Date(_.updatedAt).getTime()}});return v.jsxs(v.Fragment,{children:[v.jsx(ud,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[x&&v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${A.length} design${A.length===1?"":"s"}`}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),v.jsx(cd,{}),v.jsx("div",{className:"relative",children:x?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[y?.picture?v.jsx("img",{src:y.picture,alt:y.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:y?.name?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline text-sm",children:y?.name||y?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&v.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:v.jsxs("div",{className:"py-1",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:y?.name}),v.jsx("p",{className:"text-sm text-muted truncate",children:y?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(!1),N()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved system design projects"})]}),!r&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:_=>o(_.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),v.jsxs("select",{id:"sort-select",value:l,onChange:_=>u(_.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"updated",children:"Last Updated"}),v.jsx("option",{value:"created",children:"Date Created"}),v.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&A.length===0&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:s?"":""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":"No designs yet"}),v.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":"Start creating your first system design project"}),!s&&v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&A.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:A.map((_,D)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${D===0?"delay-0":D===1?"delay-100":D===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsx("button",{type:"button",onClick:R=>T(_.id,R),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{className:"cursor-pointer",onClick:()=>k(_.id),children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1 pr-8",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 mb-1",children:_.title}),_.description&&v.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:_.description})]}),v.jsx("div",{className:"text-3xl",children:""})]}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),_.nodes.length," node",_.nodes.length===1?"":"s"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),_.edges.length," connection",_.edges.length===1?"":"s"]})]}),v.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[v.jsxs("span",{children:["Updated"," ",new Date(_.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),v.jsxs("span",{children:["Created"," ",new Date(_.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),v.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),k(_.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},_.id))})]})]})})]}),p&&v.jsx(Yp,{isOpen:p,onClose:()=>g(!1),onLogin:async(_,D)=>{await S({email:_,password:D})},onSignup:async(_,D,R)=>{await w({email:_,password:D,name:R})},onGoogleLogin:async _=>{await C(_)}})]})},Hz=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>v.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[v.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[v.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),v.jsx(fC,{children:t&&v.jsx(vn.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&v.jsx("span",{className:"text-sm text-theme",children:r})]}),Fz=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:g}=dm();return v.jsx(um,{id:e,label:t,focused:h,containerClassName:d,children:v.jsx(vn.input,{id:e,type:"number",value:n??"",onChange:y=>r(Number(y.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Sh=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=dm();return v.jsx(um,{id:e,label:t,focused:u,containerClassName:l,children:v.jsx(vn.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Uz=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=dm(),p=`${e}-label`;return v.jsxs(um,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&v.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),v.jsx(vn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:v.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>v.jsx("option",{value:g,children:g},g))})})]})};function ete(e,t=50){const[n,r]=j.useState({past:[],present:e,future:[]}),i=j.useRef(!1),s=j.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const g=[...h.past,h.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=j.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=j.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=j.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function $t(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=$t(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var tte={value:()=>{}};function fm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Eh(n)}function Eh(e){this._=e}function nte(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Eh.prototype=fm.prototype={constructor:Eh,on:function(e,t){var n=this._,r=nte(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=rte(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=OD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=OD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Eh(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function rte(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function OD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tte,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var CE="http://www.w3.org/1999/xhtml";const jD={svg:"http://www.w3.org/2000/svg",xhtml:CE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function hm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),jD.hasOwnProperty(t)?{space:jD[t],local:e}:e}function ite(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===CE&&t.documentElement.namespaceURI===CE?t.createElement(e):t.createElementNS(n,e)}}function ste(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $z(e){var t=hm(e);return(t.local?ste:ite)(t)}function ote(){}function uk(e){return e==null?ote:function(){return this.querySelector(e)}}function ate(e){typeof e!="function"&&(e=uk(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new cr(r,this._parents)}function lte(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cte(){return[]}function Gz(e){return e==null?cte:function(){return this.querySelectorAll(e)}}function ute(e){return function(){return lte(e.apply(this,arguments))}}function dte(e){typeof e=="function"?e=ute(e):e=Gz(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new cr(r,i)}function Kz(e){return function(){return this.matches(e)}}function Yz(e){return function(t){return t.matches(e)}}var fte=Array.prototype.find;function hte(e){return function(){return fte.call(this.children,e)}}function pte(){return this.firstElementChild}function mte(e){return this.select(e==null?pte:hte(typeof e=="function"?e:Yz(e)))}var gte=Array.prototype.filter;function yte(){return Array.from(this.children)}function vte(e){return function(){return gte.call(this.children,e)}}function bte(e){return this.selectAll(e==null?yte:vte(typeof e=="function"?e:Yz(e)))}function xte(e){typeof e!="function"&&(e=Kz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new cr(r,this._parents)}function Wz(e){return new Array(e.length)}function wte(){return new cr(this._enter||this._groups.map(Wz),this._parents)}function Tp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Tp.prototype={constructor:Tp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ste(e){return function(){return e}}function Ete(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new Tp(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function Cte(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,g=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(g[l]=y=o.call(u,u.__data__,l,t)+"",d.has(y)?i[l]=u:d.set(y,u));for(l=0;l<p;++l)y=o.call(e,s[l],l,s)+"",(u=d.get(y))?(r[l]=u,u.__data__=s[l],d.delete(y)):n[l]=new Tp(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(g[l])===u&&(i[l]=u)}function kte(e){return e.__data__}function Tte(e,t){if(!arguments.length)return Array.from(this,kte);var n=t?Cte:Ete,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ste(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],g=p.length,y=Nte(e.call(h,h&&h.__data__,d,r)),x=y.length,S=l[d]=new Array(x),w=o[d]=new Array(x),C=u[d]=new Array(g);n(h,p,S,w,C,y,t);for(var N=0,k=0,T,A;N<x;++N)if(T=S[N]){for(N>=k&&(k=N+1);!(A=w[k])&&++k<x;);T._next=A||null}}return o=new cr(o,r),o._enter=l,o._exit=u,o}function Nte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ate(){return new cr(this._exit||this._groups.map(Wz),this._parents)}function Mte(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function _te(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,g=l[u]=new Array(p),y,x=0;x<p;++x)(y=d[x]||h[x])&&(g[x]=y);for(;u<i;++u)l[u]=n[u];return new cr(l,this._parents)}function Dte(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Rte(e){e||(e=Ote);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new cr(i,this._parents).order()}function Ote(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jte(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Lte(){return Array.from(this)}function Pte(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Bte(){let e=0;for(const t of this)++e;return e}function Ite(){return!this.node()}function zte(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function qte(e){return function(){this.removeAttribute(e)}}function Vte(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hte(e,t){return function(){this.setAttribute(e,t)}}function Fte(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ute(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $te(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gte(e,t){var n=hm(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vte:qte:typeof t=="function"?n.local?$te:Ute:n.local?Fte:Hte)(n,t))}function Xz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Kte(e){return function(){this.style.removeProperty(e)}}function Yte(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wte(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Xte(e,t,n){return arguments.length>1?this.each((t==null?Kte:typeof t=="function"?Wte:Yte)(e,t,n??"")):Bl(this.node(),e)}function Bl(e,t){return e.style.getPropertyValue(t)||Xz(e).getComputedStyle(e,null).getPropertyValue(t)}function Zte(e){return function(){delete this[e]}}function Qte(e,t){return function(){this[e]=t}}function Jte(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ene(e,t){return arguments.length>1?this.each((t==null?Zte:typeof t=="function"?Jte:Qte)(e,t)):this.node()[e]}function Zz(e){return e.trim().split(/^|\s+/)}function dk(e){return e.classList||new Qz(e)}function Qz(e){this._node=e,this._names=Zz(e.getAttribute("class")||"")}Qz.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Jz(e,t){for(var n=dk(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function e6(e,t){for(var n=dk(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tne(e){return function(){Jz(this,e)}}function nne(e){return function(){e6(this,e)}}function rne(e,t){return function(){(t.apply(this,arguments)?Jz:e6)(this,e)}}function ine(e,t){var n=Zz(e+"");if(arguments.length<2){for(var r=dk(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?rne:t?tne:nne)(n,t))}function sne(){this.textContent=""}function one(e){return function(){this.textContent=e}}function ane(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lne(e){return arguments.length?this.each(e==null?sne:(typeof e=="function"?ane:one)(e)):this.node().textContent}function cne(){this.innerHTML=""}function une(e){return function(){this.innerHTML=e}}function dne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fne(e){return arguments.length?this.each(e==null?cne:(typeof e=="function"?dne:une)(e)):this.node().innerHTML}function hne(){this.nextSibling&&this.parentNode.appendChild(this)}function pne(){return this.each(hne)}function mne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gne(){return this.each(mne)}function yne(e){var t=typeof e=="function"?e:$z(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vne(){return null}function bne(e,t){var n=typeof e=="function"?e:$z(e),r=t==null?vne:typeof t=="function"?t:uk(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xne(){var e=this.parentNode;e&&e.removeChild(this)}function wne(){return this.each(xne)}function Sne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ene(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cne(e){return this.select(e?Ene:Sne)}function kne(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tne(e){return function(t){e.call(this,t,this.__data__)}}function Nne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ane(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Mne(e,t,n){return function(){var r=this.__on,i,s=Tne(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function _ne(e,t,n){var r=Nne(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Mne:Ane,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function t6(e,t,n){var r=Xz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Dne(e,t){return function(){return t6(this,e,t)}}function Rne(e,t){return function(){return t6(this,e,t.apply(this,arguments))}}function One(e,t){return this.each((typeof t=="function"?Rne:Dne)(e,t))}function*jne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var n6=[null];function cr(e,t){this._groups=e,this._parents=t}function bd(){return new cr([[document.documentElement]],n6)}function Lne(){return this}cr.prototype=bd.prototype={constructor:cr,select:ate,selectAll:dte,selectChild:mte,selectChildren:bte,filter:xte,data:Tte,enter:wte,exit:Ate,join:Mte,merge:_te,selection:Lne,order:Dte,sort:Rte,call:jte,nodes:Lte,node:Pte,size:Bte,empty:Ite,each:zte,attr:Gte,style:Xte,property:ene,classed:ine,text:lne,html:fne,raise:pne,lower:gne,append:yne,insert:bne,remove:wne,clone:Cne,datum:kne,on:_ne,dispatch:One,[Symbol.iterator]:jne};function ar(e){return typeof e=="string"?new cr([[document.querySelector(e)]],[document.documentElement]):new cr([[e]],n6)}function Pne(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Vr(e,t){if(e=Pne(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Bne={passive:!1},Wu={capture:!0,passive:!1};function G0(e){e.stopImmediatePropagation()}function Nl(e){e.preventDefault(),e.stopImmediatePropagation()}function r6(e){var t=e.document.documentElement,n=ar(e).on("dragstart.drag",Nl,Wu);"onselectstart"in t?n.on("selectstart.drag",Nl,Wu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function i6(e,t){var n=e.document.documentElement,r=ar(e).on("dragstart.drag",null);t&&(r.on("click.drag",Nl,Wu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const rh=e=>()=>e;function kE(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}kE.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ine(e){return!e.ctrlKey&&!e.button}function zne(){return this.parentNode}function qne(e,t){return t??{x:e.x,y:e.y}}function Vne(){return navigator.maxTouchPoints||"ontouchstart"in this}function s6(){var e=Ine,t=zne,n=qne,r=Vne,i={},s=fm("start","drag","end"),o=0,l,u,d,h,p=0;function g(T){T.on("mousedown.drag",y).filter(r).on("touchstart.drag",w).on("touchmove.drag",C,Bne).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(T,A){if(!(h||!e.call(this,T,A))){var _=k(this,t.call(this,T,A),T,A,"mouse");_&&(ar(T.view).on("mousemove.drag",x,Wu).on("mouseup.drag",S,Wu),r6(T.view),G0(T),d=!1,l=T.clientX,u=T.clientY,_("start",T))}}function x(T){if(Nl(T),!d){var A=T.clientX-l,_=T.clientY-u;d=A*A+_*_>p}i.mouse("drag",T)}function S(T){ar(T.view).on("mousemove.drag mouseup.drag",null),i6(T.view,d),Nl(T),i.mouse("end",T)}function w(T,A){if(e.call(this,T,A)){var _=T.changedTouches,D=t.call(this,T,A),R=_.length,B,U;for(B=0;B<R;++B)(U=k(this,D,T,A,_[B].identifier,_[B]))&&(G0(T),U("start",T,_[B]))}}function C(T){var A=T.changedTouches,_=A.length,D,R;for(D=0;D<_;++D)(R=i[A[D].identifier])&&(Nl(T),R("drag",T,A[D]))}function N(T){var A=T.changedTouches,_=A.length,D,R;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),D=0;D<_;++D)(R=i[A[D].identifier])&&(G0(T),R("end",T,A[D]))}function k(T,A,_,D,R,B){var U=s.copy(),z=Vr(B||_,A),V,Y,I;if((I=n.call(T,new kE("beforestart",{sourceEvent:_,target:g,identifier:R,active:o,x:z[0],y:z[1],dx:0,dy:0,dispatch:U}),D))!=null)return V=I.x-z[0]||0,Y=I.y-z[1]||0,function $(L,q,X){var J=z,P;switch(L){case"start":i[R]=$,P=o++;break;case"end":delete i[R],--o;case"drag":z=Vr(X||q,A),P=o;break}U.call(L,T,new kE(L,{sourceEvent:q,subject:I,target:g,identifier:R,active:P,x:z[0]+V,y:z[1]+Y,dx:z[0]-J[0],dy:z[1]-J[1],dispatch:U}),D)}}return g.filter=function(T){return arguments.length?(e=typeof T=="function"?T:rh(!!T),g):e},g.container=function(T){return arguments.length?(t=typeof T=="function"?T:rh(T),g):t},g.subject=function(T){return arguments.length?(n=typeof T=="function"?T:rh(T),g):n},g.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:rh(!!T),g):r},g.on=function(){var T=s.on.apply(s,arguments);return T===s?g:T},g.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,g):Math.sqrt(p)},g}function fk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function o6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xd(){}var Xu=.7,Np=1/Xu,Al="\\s*([+-]?\\d+)\\s*",Zu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hne=/^#([0-9a-f]{3,8})$/,Fne=new RegExp(`^rgb\\(${Al},${Al},${Al}\\)$`),Une=new RegExp(`^rgb\\(${fi},${fi},${fi}\\)$`),$ne=new RegExp(`^rgba\\(${Al},${Al},${Al},${Zu}\\)$`),Gne=new RegExp(`^rgba\\(${fi},${fi},${fi},${Zu}\\)$`),Kne=new RegExp(`^hsl\\(${Zu},${fi},${fi}\\)$`),Yne=new RegExp(`^hsla\\(${Zu},${fi},${fi},${Zu}\\)$`),LD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fk(xd,sa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:PD,formatHex:PD,formatHex8:Wne,formatHsl:Xne,formatRgb:BD,toString:BD});function PD(){return this.rgb().formatHex()}function Wne(){return this.rgb().formatHex8()}function Xne(){return a6(this).formatHsl()}function BD(){return this.rgb().formatRgb()}function sa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hne.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ID(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?ih(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?ih(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fne.exec(e))?new Fn(t[1],t[2],t[3],1):(t=Une.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$ne.exec(e))?ih(t[1],t[2],t[3],t[4]):(t=Gne.exec(e))?ih(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kne.exec(e))?VD(t[1],t[2]/100,t[3]/100,1):(t=Yne.exec(e))?VD(t[1],t[2]/100,t[3]/100,t[4]):LD.hasOwnProperty(e)?ID(LD[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function ID(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function ih(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function Zne(e){return e instanceof xd||(e=sa(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function TE(e,t,n,r){return arguments.length===1?Zne(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}fk(Fn,TE,o6(xd,{brighter(e){return e=e==null?Np:Math.pow(Np,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xu:Math.pow(Xu,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(Qo(this.r),Qo(this.g),Qo(this.b),Ap(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zD,formatHex:zD,formatHex8:Qne,formatRgb:qD,toString:qD}));function zD(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}`}function Qne(){return`#${Fo(this.r)}${Fo(this.g)}${Fo(this.b)}${Fo((isNaN(this.opacity)?1:this.opacity)*255)}`}function qD(){const e=Ap(this.opacity);return`${e===1?"rgb(":"rgba("}${Qo(this.r)}, ${Qo(this.g)}, ${Qo(this.b)}${e===1?")":`, ${e})`}`}function Ap(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fo(e){return e=Qo(e),(e<16?"0":"")+e.toString(16)}function VD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fr(e,t,n,r)}function a6(e){if(e instanceof Fr)return new Fr(e.h,e.s,e.l,e.opacity);if(e instanceof xd||(e=sa(e)),!e)return new Fr;if(e instanceof Fr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Fr(o,l,u,e.opacity)}function Jne(e,t,n,r){return arguments.length===1?a6(e):new Fr(e,t,n,r??1)}function Fr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}fk(Fr,Jne,o6(xd,{brighter(e){return e=e==null?Np:Math.pow(Np,e),new Fr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xu:Math.pow(Xu,e),new Fr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn(K0(e>=240?e-240:e+120,i,r),K0(e,i,r),K0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fr(HD(this.h),sh(this.s),sh(this.l),Ap(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ap(this.opacity);return`${e===1?"hsl(":"hsla("}${HD(this.h)}, ${sh(this.s)*100}%, ${sh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function HD(e){return e=(e||0)%360,e<0?e+360:e}function sh(e){return Math.max(0,Math.min(1,e||0))}function K0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hk=e=>()=>e;function ere(e,t){return function(n){return e+n*t}}function tre(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nre(e){return(e=+e)==1?l6:function(t,n){return n-t?tre(t,n,e):hk(isNaN(t)?n:t)}}function l6(e,t){var n=t-e;return n?ere(e,n):hk(isNaN(e)?t:e)}const Mp=(function e(t){var n=nre(t);function r(i,s){var o=n((i=TE(i)).r,(s=TE(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=l6(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function rre(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function ire(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sre(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Au(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function ore(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ai(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function are(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Au(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var NE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y0=new RegExp(NE.source,"g");function lre(e){return function(){return e}}function cre(e){return function(t){return e(t)+""}}function c6(e,t){var n=NE.lastIndex=Y0.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=NE.exec(e))&&(i=Y0.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:ai(r,i)})),n=Y0.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?cre(u[0].x):lre(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Au(e,t){var n=typeof t,r;return t==null||n==="boolean"?hk(t):(n==="number"?ai:n==="string"?(r=sa(t))?(t=r,Mp):c6:t instanceof sa?Mp:t instanceof Date?ore:ire(t)?rre:Array.isArray(t)?sre:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?are:ai)(e,t)}var FD=180/Math.PI,AE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function u6(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*FD,skewX:Math.atan(u)*FD,scaleX:o,scaleY:l}}var oh;function ure(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?AE:u6(t.a,t.b,t.c,t.d,t.e,t.f)}function dre(e){return e==null||(oh||(oh=document.createElementNS("http://www.w3.org/2000/svg","g")),oh.setAttribute("transform",e),!(e=oh.transform.baseVal.consolidate()))?AE:(e=e.matrix,u6(e.a,e.b,e.c,e.d,e.e,e.f))}function d6(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push("translate(",null,t,null,n);x.push({i:S-4,x:ai(d,p)},{i:S-2,x:ai(h,g)})}else(p||g)&&y.push("translate("+p+t+g+n)}function o(d,h,p,g){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:ai(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,g){d!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:ai(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push(i(y)+"scale(",null,",",null,")");x.push({i:S-4,x:ai(d,p)},{i:S-2,x:ai(h,g)})}else(p!==1||g!==1)&&y.push(i(y)+"scale("+p+","+g+")")}return function(d,h){var p=[],g=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,g),o(d.rotate,h.rotate,p,g),l(d.skewX,h.skewX,p,g),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,g),d=h=null,function(y){for(var x=-1,S=g.length,w;++x<S;)p[(w=g[x]).i]=w.x(y);return p.join("")}}}var fre=d6(ure,"px, ","px)","deg)"),hre=d6(dre,", ",")",")"),pre=1e-12;function UD(e){return((e=Math.exp(e))+1/e)/2}function mre(e){return((e=Math.exp(e))-1/e)/2}function gre(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ch=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],g=o[2],y=h-l,x=p-u,S=y*y+x*x,w,C;if(S<pre)C=Math.log(g/d)/t,w=function(D){return[l+D*y,u+D*x,d*Math.exp(t*D*C)]};else{var N=Math.sqrt(S),k=(g*g-d*d+r*S)/(2*d*n*N),T=(g*g-d*d-r*S)/(2*g*n*N),A=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(T*T+1)-T);C=(_-A)/t,w=function(D){var R=D*C,B=UD(A),U=d/(n*N)*(B*gre(t*R+A)-mre(A));return[l+U*y,u+U*x,d*B/UD(t*R+A)]}}return w.duration=C*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var Il=0,lu=0,Jc=0,f6=1e3,_p,cu,Dp=0,oa=0,pm=0,Qu=typeof performance=="object"&&performance.now?performance:Date,h6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pk(){return oa||(h6(yre),oa=Qu.now()+pm)}function yre(){oa=0}function Rp(){this._call=this._time=this._next=null}Rp.prototype=p6.prototype={constructor:Rp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pk():+n)+(t==null?0:+t),!this._next&&cu!==this&&(cu?cu._next=this:_p=this,cu=this),this._call=e,this._time=n,ME()},stop:function(){this._call&&(this._call=null,this._time=1/0,ME())}};function p6(e,t,n){var r=new Rp;return r.restart(e,t,n),r}function vre(){pk(),++Il;for(var e=_p,t;e;)(t=oa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Il}function $D(){oa=(Dp=Qu.now())+pm,Il=lu=0;try{vre()}finally{Il=0,xre(),oa=0}}function bre(){var e=Qu.now(),t=e-Dp;t>f6&&(pm-=t,Dp=e)}function xre(){for(var e,t=_p,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_p=n);cu=e,ME(r)}function ME(e){if(!Il){lu&&(lu=clearTimeout(lu));var t=e-oa;t>24?(e<1/0&&(lu=setTimeout($D,e-Qu.now()-pm)),Jc&&(Jc=clearInterval(Jc))):(Jc||(Dp=Qu.now(),Jc=setInterval(bre,f6)),Il=1,h6($D))}}function GD(e,t,n){var r=new Rp;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var wre=fm("start","end","cancel","interrupt"),Sre=[],m6=0,KD=1,_E=2,kh=3,YD=4,DE=5,Th=6;function mm(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Ere(e,n,{name:t,index:r,group:i,on:wre,tween:Sre,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:m6})}function mk(e,t){var n=Kr(e,t);if(n.state>m6)throw new Error("too late; already scheduled");return n}function gi(e,t){var n=Kr(e,t);if(n.state>kh)throw new Error("too late; already running");return n}function Kr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ere(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=p6(s,0,n.time);function s(d){n.state=KD,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,g,y;if(n.state!==KD)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===kh)return GD(o);y.state===YD?(y.state=Th,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=Th,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(GD(function(){n.state===kh&&(n.state=YD,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=_E,n.on.call("start",e,e.__data__,n.index,n.group),n.state===_E){for(n.state=kh,i=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=DE,1),p=-1,g=i.length;++p<g;)i[p].call(e,h);n.state===DE&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Th,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Nh(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>_E&&r.state<DE,r.state=Th,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Cre(e){return this.each(function(){Nh(this,e)})}function kre(e,t){var n,r;return function(){var i=gi(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Tre(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=gi(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function Nre(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Kr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?kre:Tre)(n,e,t))}function gk(e,t,n){var r=e._id;return e.each(function(){var i=gi(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Kr(i,r).value[t]}}function g6(e,t){var n;return(typeof t=="number"?ai:t instanceof sa?Mp:(n=sa(t))?(t=n,Mp):c6)(e,t)}function Are(e){return function(){this.removeAttribute(e)}}function Mre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _re(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Dre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Rre(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Ore(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function jre(e,t){var n=hm(e),r=n==="transform"?hre:g6;return this.attrTween(e,typeof t=="function"?(n.local?Ore:Rre)(n,r,gk(this,"attr."+e,t)):t==null?(n.local?Mre:Are)(n):(n.local?Dre:_re)(n,r,t))}function Lre(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Pre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Bre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Pre(e,s)),n}return i._value=t,i}function Ire(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Lre(e,s)),n}return i._value=t,i}function zre(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=hm(e);return this.tween(n,(r.local?Bre:Ire)(r,t))}function qre(e,t){return function(){mk(this,e).delay=+t.apply(this,arguments)}}function Vre(e,t){return t=+t,function(){mk(this,e).delay=t}}function Hre(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qre:Vre)(t,e)):Kr(this.node(),t).delay}function Fre(e,t){return function(){gi(this,e).duration=+t.apply(this,arguments)}}function Ure(e,t){return t=+t,function(){gi(this,e).duration=t}}function $re(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Fre:Ure)(t,e)):Kr(this.node(),t).duration}function Gre(e,t){if(typeof t!="function")throw new Error;return function(){gi(this,e).ease=t}}function Kre(e){var t=this._id;return arguments.length?this.each(Gre(t,e)):Kr(this.node(),t).ease}function Yre(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;gi(this,e).ease=n}}function Wre(e){if(typeof e!="function")throw new Error;return this.each(Yre(this._id,e))}function Xre(e){typeof e!="function"&&(e=Kz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Zi(r,this._parents,this._name,this._id)}function Zre(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),g,y=0;y<h;++y)(g=u[y]||d[y])&&(p[y]=g);for(;l<r;++l)o[l]=t[l];return new Zi(o,this._parents,this._name,this._id)}function Qre(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jre(e,t,n){var r,i,s=Qre(t)?mk:gi;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function eie(e,t){var n=this._id;return arguments.length<2?Kr(this.node(),n).on.on(e):this.each(Jre(n,e,t))}function tie(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function nie(){return this.on("end.remove",tie(this._id))}function rie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uk(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,g=0;g<u;++g)(h=l[g])&&(p=e.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),d[g]=p,mm(d[g],t,n,g,d,Kr(h,n)));return new Zi(s,this._parents,t,n)}function iie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Gz(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var g=e.call(h,h.__data__,p,u),y,x=Kr(h,n),S=0,w=g.length;S<w;++S)(y=g[S])&&mm(y,t,n,S,g,x);s.push(g),o.push(h)}return new Zi(s,o,t,n)}var sie=bd.prototype.constructor;function oie(){return new sie(this._groups,this._parents)}function aie(e,t){var n,r,i;return function(){var s=Bl(this,e),o=(this.style.removeProperty(e),Bl(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function y6(e){return function(){this.style.removeProperty(e)}}function lie(e,t,n){var r,i=n+"",s;return function(){var o=Bl(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function cie(e,t,n){var r,i,s;return function(){var o=Bl(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Bl(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function uie(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=gi(this,e),d=u.on,h=u.value[s]==null?l||(l=y6(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function die(e,t,n){var r=(e+="")=="transform"?fre:g6;return t==null?this.styleTween(e,aie(e,r)).on("end.style."+e,y6(e)):typeof t=="function"?this.styleTween(e,cie(e,r,gk(this,"style."+e,t))).each(uie(this._id,e)):this.styleTween(e,lie(e,r,t),n).on("end.style."+e,null)}function fie(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function hie(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&fie(e,o,n)),r}return s._value=t,s}function pie(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,hie(e,t,n??""))}function mie(e){return function(){this.textContent=e}}function gie(e){return function(){var t=e(this);this.textContent=t??""}}function yie(e){return this.tween("text",typeof e=="function"?gie(gk(this,"text",e)):mie(e==null?"":e+""))}function vie(e){return function(t){this.textContent=e.call(this,t)}}function bie(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&vie(i)),t}return r._value=e,r}function xie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bie(e))}function wie(){for(var e=this._name,t=this._id,n=v6(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=Kr(u,t);mm(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Zi(r,this._parents,e,n)}function Sie(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=gi(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var Eie=0;function Zi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function v6(){return++Eie}var Vi=bd.prototype;Zi.prototype={constructor:Zi,select:rie,selectAll:iie,selectChild:Vi.selectChild,selectChildren:Vi.selectChildren,filter:Xre,merge:Zre,selection:oie,transition:wie,call:Vi.call,nodes:Vi.nodes,node:Vi.node,size:Vi.size,empty:Vi.empty,each:Vi.each,on:eie,attr:jre,attrTween:zre,style:die,styleTween:pie,text:yie,textTween:xie,remove:nie,tween:Nre,delay:Hre,duration:$re,ease:Kre,easeVarying:Wre,end:Sie,[Symbol.iterator]:Vi[Symbol.iterator]};function Cie(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var kie={time:null,delay:0,duration:250,ease:Cie};function Tie(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Nie(e){var t,n;e instanceof Zi?(t=e._id,e=e._name):(t=v6(),(n=kie).time=pk(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&mm(u,e,t,d,o,n||Tie(u,t));return new Zi(r,this._parents,e,t)}bd.prototype.interrupt=Cre;bd.prototype.transition=Nie;const ah=e=>()=>e;function Aie(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function $i(e,t,n){this.k=e,this.x=t,this.y=n}$i.prototype={constructor:$i,scale:function(e){return e===1?this:new $i(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $i(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gm=new $i(1,0,0);b6.prototype=$i.prototype;function b6(e){for(;!e.__zoom;)if(!(e=e.parentNode))return gm;return e.__zoom}function W0(e){e.stopImmediatePropagation()}function eu(e){e.preventDefault(),e.stopImmediatePropagation()}function Mie(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _ie(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function WD(){return this.__zoom||gm}function Die(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Rie(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oie(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function x6(){var e=Mie,t=_ie,n=Oie,r=Die,i=Rie,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Ch,d=fm("start","zoom","end"),h,p,g,y=500,x=150,S=0,w=10;function C(I){I.property("__zoom",WD).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",U).filter(i).on("touchstart.zoom",z).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(I,$,L,q){var X=I.selection?I.selection():I;X.property("__zoom",WD),I!==X?A(I,$,L,q):X.interrupt().each(function(){_(this,arguments).event(q).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},C.scaleBy=function(I,$,L,q){C.scaleTo(I,function(){var X=this.__zoom.k,J=typeof $=="function"?$.apply(this,arguments):$;return X*J},L,q)},C.scaleTo=function(I,$,L,q){C.transform(I,function(){var X=t.apply(this,arguments),J=this.__zoom,P=L==null?T(X):typeof L=="function"?L.apply(this,arguments):L,G=J.invert(P),ee=typeof $=="function"?$.apply(this,arguments):$;return n(k(N(J,ee),P,G),X,o)},L,q)},C.translateBy=function(I,$,L,q){C.transform(I,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),o)},null,q)},C.translateTo=function(I,$,L,q,X){C.transform(I,function(){var J=t.apply(this,arguments),P=this.__zoom,G=q==null?T(J):typeof q=="function"?q.apply(this,arguments):q;return n(gm.translate(G[0],G[1]).scale(P.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof L=="function"?-L.apply(this,arguments):-L),J,o)},q,X)};function N(I,$){return $=Math.max(s[0],Math.min(s[1],$)),$===I.k?I:new $i($,I.x,I.y)}function k(I,$,L){var q=$[0]-L[0]*I.k,X=$[1]-L[1]*I.k;return q===I.x&&X===I.y?I:new $i(I.k,q,X)}function T(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,$,L,q){I.on("start.zoom",function(){_(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(q).end()}).tween("zoom",function(){var X=this,J=arguments,P=_(X,J).event(q),G=t.apply(X,J),ee=L==null?T(G):typeof L=="function"?L.apply(X,J):L,se=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),H=X.__zoom,W=typeof $=="function"?$.apply(X,J):$,Z=u(H.invert(ee).concat(se/H.k),W.invert(ee).concat(se/W.k));return function(ce){if(ce===1)ce=W;else{var le=Z(ce),ge=se/le[2];ce=new $i(ge,ee[0]-le[0]*ge,ee[1]-le[1]*ge)}P.zoom(null,ce)}})}function _(I,$,L){return!L&&I.__zooming||new D(I,$)}function D(I,$){this.that=I,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,$),this.taps=0}D.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,$){return this.mouse&&I!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var $=ar(this.that).datum();d.call(I,this.that,new Aie(I,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:d}),$)}};function R(I,...$){if(!e.apply(this,arguments))return;var L=_(this,$).event(I),q=this.__zoom,X=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),J=Vr(I);if(L.wheel)(L.mouse[0][0]!==J[0]||L.mouse[0][1]!==J[1])&&(L.mouse[1]=q.invert(L.mouse[0]=J)),clearTimeout(L.wheel);else{if(q.k===X)return;L.mouse=[J,q.invert(J)],Nh(this),L.start()}eu(I),L.wheel=setTimeout(P,x),L.zoom("mouse",n(k(N(q,X),L.mouse[0],L.mouse[1]),L.extent,o));function P(){L.wheel=null,L.end()}}function B(I,...$){if(g||!e.apply(this,arguments))return;var L=I.currentTarget,q=_(this,$,!0).event(I),X=ar(I.view).on("mousemove.zoom",ee,!0).on("mouseup.zoom",se,!0),J=Vr(I,L),P=I.clientX,G=I.clientY;r6(I.view),W0(I),q.mouse=[J,this.__zoom.invert(J)],Nh(this),q.start();function ee(H){if(eu(H),!q.moved){var W=H.clientX-P,Z=H.clientY-G;q.moved=W*W+Z*Z>S}q.event(H).zoom("mouse",n(k(q.that.__zoom,q.mouse[0]=Vr(H,L),q.mouse[1]),q.extent,o))}function se(H){X.on("mousemove.zoom mouseup.zoom",null),i6(H.view,q.moved),eu(H),q.event(H).end()}}function U(I,...$){if(e.apply(this,arguments)){var L=this.__zoom,q=Vr(I.changedTouches?I.changedTouches[0]:I,this),X=L.invert(q),J=L.k*(I.shiftKey?.5:2),P=n(k(N(L,J),q,X),t.apply(this,$),o);eu(I),l>0?ar(this).transition().duration(l).call(A,P,q,I):ar(this).call(C.transform,P,q,I)}}function z(I,...$){if(e.apply(this,arguments)){var L=I.touches,q=L.length,X=_(this,$,I.changedTouches.length===q).event(I),J,P,G,ee;for(W0(I),P=0;P<q;++P)G=L[P],ee=Vr(G,this),ee=[ee,this.__zoom.invert(ee),G.identifier],X.touch0?!X.touch1&&X.touch0[2]!==ee[2]&&(X.touch1=ee,X.taps=0):(X.touch0=ee,J=!0,X.taps=1+!!h);h&&(h=clearTimeout(h)),J&&(X.taps<2&&(p=ee[0],h=setTimeout(function(){h=null},y)),Nh(this),X.start())}}function V(I,...$){if(this.__zooming){var L=_(this,$).event(I),q=I.changedTouches,X=q.length,J,P,G,ee;for(eu(I),J=0;J<X;++J)P=q[J],G=Vr(P,this),L.touch0&&L.touch0[2]===P.identifier?L.touch0[0]=G:L.touch1&&L.touch1[2]===P.identifier&&(L.touch1[0]=G);if(P=L.that.__zoom,L.touch1){var se=L.touch0[0],H=L.touch0[1],W=L.touch1[0],Z=L.touch1[1],ce=(ce=W[0]-se[0])*ce+(ce=W[1]-se[1])*ce,le=(le=Z[0]-H[0])*le+(le=Z[1]-H[1])*le;P=N(P,Math.sqrt(ce/le)),G=[(se[0]+W[0])/2,(se[1]+W[1])/2],ee=[(H[0]+Z[0])/2,(H[1]+Z[1])/2]}else if(L.touch0)G=L.touch0[0],ee=L.touch0[1];else return;L.zoom("touch",n(k(P,G,ee),L.extent,o))}}function Y(I,...$){if(this.__zooming){var L=_(this,$).event(I),q=I.changedTouches,X=q.length,J,P;for(W0(I),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),J=0;J<X;++J)P=q[J],L.touch0&&L.touch0[2]===P.identifier?delete L.touch0:L.touch1&&L.touch1[2]===P.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(P=Vr(P,this),Math.hypot(p[0]-P[0],p[1]-P[1])<w)){var G=ar(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return C.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:ah(+I),C):r},C.filter=function(I){return arguments.length?(e=typeof I=="function"?I:ah(!!I),C):e},C.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:ah(!!I),C):i},C.extent=function(I){return arguments.length?(t=typeof I=="function"?I:ah([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),C):t},C.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],C):[s[0],s[1]]},C.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(I){return arguments.length?(n=I,C):n},C.duration=function(I){return arguments.length?(l=+I,C):l},C.interpolate=function(I){return arguments.length?(u=I,C):u},C.on=function(){var I=d.on.apply(d,arguments);return I===d?C:I},C.clickDistance=function(I){return arguments.length?(S=(I=+I)*I,C):Math.sqrt(S)},C.tapDistance=function(I){return arguments.length?(w=+I,C):w},C}const mi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Ju=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],w6=["Enter"," ","Escape"],S6={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var aa;(function(e){e.Strict="strict",e.Loose="loose"})(aa||(aa={}));var Jo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Jo||(Jo={}));var ed;(function(e){e.Partial="partial",e.Full="full"})(ed||(ed={}));const E6={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ps;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ps||(Ps={}));var Op;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Op||(Op={}));var Ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ne||(Ne={}));const XD={[Ne.Left]:Ne.Right,[Ne.Right]:Ne.Left,[Ne.Top]:Ne.Bottom,[Ne.Bottom]:Ne.Top};function C6(e){return e===null?null:e?"valid":"invalid"}const k6=e=>"id"in e&&"source"in e&&"target"in e,jie=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),yk=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),wd=(e,t=[0,0])=>{const{width:n,height:r}=Ji(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},T6=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):yk(i)?i:t.nodeLookup.get(i.id));const l=o?jp(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ym(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return vm(n)},Sd=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=jp(r);n=ym(n,i)}}),vm(n)},vk=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Cd(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:g=!1}=d;if(o&&!p||g)continue;const y=h.width??d.width??d.initialWidth??null,x=h.height??d.height??d.initialHeight??null,S=td(l,ql(d)),w=(y??0)*(x??0),C=s&&S>0;(!d.internals.handleBounds||C||S>=w||d.dragging)&&u.push(d)}return u},Lie=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Pie(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Bie({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Pie(e,o),u=Sd(l),d=bm(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function N6({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",mi.error005());else{const y=l.measured.width,x=l.measured.height;y&&x&&(p=[[u,d],[u+y,d+x]])}else l&&Vl(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=Vl(p)?la(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",mi.error015()),{position:{x:g.x-u+(o.measured.width??0)*h[0],y:g.y-d+(o.measured.height??0)*h[1]},positionAbsolute:g}}async function Iie({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const y=s.has(g.id),x=!y&&g.parentId&&o.find(S=>S.id===g.parentId);(y||x)&&o.push(g)}const l=new Set(t.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),h=Lie(o,u);for(const g of u)l.has(g.id)&&!h.find(x=>x.id===g.id)&&h.push(g);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const zl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),la=(e={x:0,y:0},t,n)=>({x:zl(e.x,t[0][0],t[1][0]-(n?.width??0)),y:zl(e.y,t[0][1],t[1][1]-(n?.height??0))});function A6(e,t,n){const{width:r,height:i}=Ji(n),{x:s,y:o}=n.internals.positionAbsolute;return la(e,[[s,o],[s+r,o+i]],t)}const ZD=(e,t,n)=>e<t?zl(Math.abs(e-t),1,t)/t:e>n?-zl(Math.abs(e-n),1,t)/t:0,M6=(e,t,n=15,r=40)=>{const i=ZD(e.x,r,t.width-r)*n,s=ZD(e.y,r,t.height-r)*n;return[i,s]},ym=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),RE=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),vm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ql=(e,t=[0,0])=>{const{x:n,y:r}=yk(e)?e.internals.positionAbsolute:wd(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},jp=(e,t=[0,0])=>{const{x:n,y:r}=yk(e)?e.internals.positionAbsolute:wd(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},_6=(e,t)=>vm(ym(RE(e),RE(t))),td=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},QD=e=>$r(e.width)&&$r(e.height)&&$r(e.x)&&$r(e.y),$r=e=>!isNaN(e)&&isFinite(e),zie=(e,t)=>{},Ed=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Cd=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?Ed(l,o):l},Lp=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function cl(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function qie(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=cl(e,n),i=cl(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=cl(e.top??e.y??0,n),i=cl(e.bottom??e.y??0,n),s=cl(e.left??e.x??0,t),o=cl(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Vie(e,t,n,r,i,s){const{x:o,y:l}=Lp(e,[t,n,r]),{x:u,y:d}=Lp({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const bm=(e,t,n,r,i,s)=>{const o=qie(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=zl(d,r,i),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*h,x=n/2-g*h,S=Vie(e,y,x,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:y-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},nd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Vl(e){return e!=null&&e!=="parent"}function Ji(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function D6(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function R6(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function JD(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Hie(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Fie(e){return{...S6,...e||{}}}function Mu(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=ci(e),l=Cd({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Ed(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const bk=e=>({width:e.offsetWidth,height:e.offsetHeight}),O6=e=>e?.getRootNode?.()||window?.document,Uie=["INPUT","SELECT","TEXTAREA"];function j6(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Uie.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const L6=e=>"clientX"in e,ci=(e,t)=>{const n=L6(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},eR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...bk(o)}})};function P6({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function lh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function tR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ne.Left:return[t-lh(t-r,s),n];case Ne.Right:return[t+lh(r-t,s),n];case Ne.Top:return[t,n-lh(n-i,s)];case Ne.Bottom:return[t,n+lh(i-n,s)]}}function xk({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top,curvature:o=.25}){const[l,u]=tR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=tR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,y,x]=P6({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,g,y,x]}function wk({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function $ie({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function Gie({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=ym(jp(e),jp(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return td(o,vm(s))>0}const Kie=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Yie=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),B6=(e,t)=>{if(!e.source||!e.target)return t;let n;return k6(e)?n={...e}:n={...e,id:Kie(e)},Yie(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function I6({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=wk({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const nR={[Ne.Left]:{x:-1,y:0},[Ne.Right]:{x:1,y:0},[Ne.Top]:{x:0,y:-1},[Ne.Bottom]:{x:0,y:1}},Wie=({source:e,sourcePosition:t=Ne.Bottom,target:n})=>t===Ne.Left||t===Ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},rR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Xie({source:e,sourcePosition:t=Ne.Bottom,target:n,targetPosition:r=Ne.Top,center:i,offset:s,stepPosition:o}){const l=nR[t],u=nR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=Wie({source:d,sourcePosition:t,target:h}),g=p.x!==0?"x":"y",y=p[g];let x=[],S,w;const C={x:0,y:0},N={x:0,y:0},[,,k,T]=wk({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*u[g]===-1){g==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const _=[{x:S,y:d.y},{x:S,y:h.y}],D=[{x:d.x,y:w},{x:h.x,y:w}];l[g]===y?x=g==="x"?_:D:x=g==="x"?D:_}else{const _=[{x:d.x,y:h.y}],D=[{x:h.x,y:d.y}];if(g==="x"?x=l.x===y?D:_:x=l.y===y?_:D,t===r){const V=Math.abs(e[g]-n[g]);if(V<=s){const Y=Math.min(s-1,s-V);l[g]===y?C[g]=(d[g]>e[g]?-1:1)*Y:N[g]=(h[g]>n[g]?-1:1)*Y}}if(t!==r){const V=g==="x"?"y":"x",Y=l[g]===u[V],I=d[V]>h[V],$=d[V]<h[V];(l[g]===1&&(!Y&&I||Y&&$)||l[g]!==1&&(!Y&&$||Y&&I))&&(x=g==="x"?_:D)}const R={x:d.x+C.x,y:d.y+C.y},B={x:h.x+N.x,y:h.y+N.y},U=Math.max(Math.abs(R.x-x[0].x),Math.abs(B.x-x[0].x)),z=Math.max(Math.abs(R.y-x[0].y),Math.abs(B.y-x[0].y));U>=z?(S=(R.x+B.x)/2,w=x[0].y):(S=x[0].x,w=(R.y+B.y)/2)}return[[e,{x:d.x+C.x,y:d.y+C.y},...x,{x:h.x+N.x,y:h.y+N.y},n],S,w,k,T]}function Zie(e,t,n,r){const i=Math.min(rR(e,t)/2,rR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function OE({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,g,y,x,S]=Xie({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((C,N,k)=>{let T="";return k>0&&k<p.length-1?T=Zie(p[k-1],N,p[k+1],o):T=`${k===0?"M":"L"}${N.x} ${N.y}`,C+=T,C},""),g,y,x,S]}function iR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Qie(e){const{sourceNode:t,targetNode:n}=e;if(!iR(t)||!iR(n))return null;const r=t.internals.handleBounds||sR(t.handles),i=n.internals.handleBounds||sR(n.handles),s=oR(r?.source??[],e.sourceHandle),o=oR(e.connectionMode===aa.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",mi.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Ne.Bottom,u=o?.position||Ne.Top,d=rd(t,s,l),h=rd(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function sR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function rd(e,t,n=Ne.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??Ji(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Ne.Top:return{x:i+o/2,y:s};case Ne.Right:return{x:i+o,y:s+l/2};case Ne.Bottom:return{x:i+o/2,y:s+l};case Ne.Left:return{x:i,y:s+l/2}}}function oR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function jE(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Jie(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=jE(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const Sk={nodeOrigin:[0,0],nodeExtent:Ju,elevateNodesOnSelect:!0,defaults:{}},ese={...Sk,checkEquality:!0};function Ek(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function tse(e,t,n){const r=Ek(Sk,n);for(const i of e.values())if(i.parentId)Ck(i,e,t,r);else{const s=wd(i,r.nodeOrigin),o=Vl(i.extent)?i.extent:r.nodeExtent,l=la(s,o,Ji(i));i.internals.positionAbsolute=l}}function LE(e,t,n,r){const i=Ek(ese,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=wd(u,i.nodeOrigin),p=Vl(u.extent)?u.extent:i.nodeExtent,g=la(h,p,Ji(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:z6(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&Ck(d,t,n,r)}return s}function nse(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ck(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=Ek(Sk,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}nse(e,n);const d=i?1e3:0,{x:h,y:p,z:g}=rse(e,u,s,o,d),{positionAbsolute:y}=e.internals,x=h!==y.x||p!==y.y;(x||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:p}:y,z:g}})}function z6(e,t){return($r(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function rse(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=Ji(e),u=wd(e,n),d=Vl(e.extent)?la(u,e.extent,l):u;let h=la({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=A6(h,l,t));const p=z6(e,i),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=p?g+1:p}}function kk(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??ql(l),d=_6(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=Ji(l),p=l.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,y=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(x-h.width)*p[0],C=(S-h.height)*p[1];(g>0||y>0||w||C)&&(i.push({id:u,type:"position",position:{x:l.position.x-g+w,y:l.position.y-y+C}}),n.get(u)?.forEach(N=>{e.some(k=>k.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+g,y:N.position.y+y}})})),(h.width<o.width||h.height<o.height||g||y)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(g?p[0]*g-w:0),height:S+(y?p[1]*y-C:0)}})}),i}function ise(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const g of e.values()){const y=t.get(g.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const x=bk(g.nodeElement),S=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!y.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),N=Vl(y.extent)?y.extent:s;let{positionAbsolute:k}=y.internals;y.parentId&&y.extent==="parent"?k=A6(k,x,t.get(y.parentId)):N&&(k=la(k,N,x));const T={...y,measured:x,internals:{...y.internals,positionAbsolute:k,handleBounds:{source:eR("source",g.nodeElement,C,h,y.id),target:eR("target",g.nodeElement,C,h,y.id)}}};t.set(y.id,T),y.parentId&&Ck(T,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&p.push({id:y.id,parentId:y.parentId,rect:ql(T,i)}))}}if(p.length>0){const g=kk(p,t,n,i);u.push(...g)}return{changes:u,updatedInternals:l}}async function sse({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function aR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function q6(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;aR("source",u,h,e,i,o),aR("target",u,d,e,s,l),t.set(r.id,r)}}function V6(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:V6(n,t):!1}function lR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function ose(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!V6(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function X0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function ase({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Ed(s,t);return{x:o.x-s.x,y:o.y-s.y}}function lse({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,g=null,y=!1,x=!1,S=null;function w({noDragClassName:N,handleSelector:k,domNode:T,isSelectable:A,nodeId:_,nodeClickDistance:D=0}){g=ar(T);function R({x:V,y:Y}){const{nodeLookup:I,nodeExtent:$,snapGrid:L,snapToGrid:q,nodeOrigin:X,onNodeDrag:J,onSelectionDrag:P,onError:G,updateNodePositions:ee}=t();s={x:V,y:Y};let se=!1;const H=l.size>1,W=H&&$?RE(Sd(l)):null,Z=H&&q?ase({dragItems:l,snapGrid:L,x:V,y:Y}):null;for(const[ce,le]of l){if(!I.has(ce))continue;let ge={x:V-le.distance.x,y:Y-le.distance.y};q&&(ge=Z?{x:Math.round(ge.x+Z.x),y:Math.round(ge.y+Z.y)}:Ed(ge,L));let we=null;if(H&&$&&!le.extent&&W){const{positionAbsolute:Ee}=le.internals,xe=Ee.x-W.x+$[0][0],Te=Ee.x+le.measured.width-W.x2+$[1][0],et=Ee.y-W.y+$[0][1],Ae=Ee.y+le.measured.height-W.y2+$[1][1];we=[[xe,et],[Te,Ae]]}const{position:_e,positionAbsolute:ke}=N6({nodeId:ce,nextPosition:ge,nodeLookup:I,nodeExtent:we||$,nodeOrigin:X,onError:G});se=se||le.position.x!==_e.x||le.position.y!==_e.y,le.position=_e,le.internals.positionAbsolute=ke}if(x=x||se,!!se&&(ee(l,!0),S&&(r||J||!_&&P))){const[ce,le]=X0({nodeId:_,dragItems:l,nodeLookup:I});r?.(S,l,ce,le),J?.(S,ce,le),_||P?.(S,le)}}async function B(){if(!h)return;const{transform:V,panBy:Y,autoPanSpeed:I,autoPanOnNodeDrag:$}=t();if(!$){u=!1,cancelAnimationFrame(o);return}const[L,q]=M6(d,h,I);(L!==0||q!==0)&&(s.x=(s.x??0)-L/V[2],s.y=(s.y??0)-q/V[2],await Y({x:L,y:q})&&R(s)),o=requestAnimationFrame(B)}function U(V){const{nodeLookup:Y,multiSelectionActive:I,nodesDraggable:$,transform:L,snapGrid:q,snapToGrid:X,selectNodesOnDrag:J,onNodeDragStart:P,onSelectionDragStart:G,unselectNodesAndEdges:ee}=t();p=!0,(!J||!A)&&!I&&_&&(Y.get(_)?.selected||ee()),A&&J&&_&&e?.(_);const se=Mu(V.sourceEvent,{transform:L,snapGrid:q,snapToGrid:X,containerBounds:h});if(s=se,l=ose(Y,$,se,_),l.size>0&&(n||P||!_&&G)){const[H,W]=X0({nodeId:_,dragItems:l,nodeLookup:Y});n?.(V.sourceEvent,l,H,W),P?.(V.sourceEvent,H,W),_||G?.(V.sourceEvent,W)}}const z=s6().clickDistance(D).on("start",V=>{const{domNode:Y,nodeDragThreshold:I,transform:$,snapGrid:L,snapToGrid:q}=t();h=Y?.getBoundingClientRect()||null,y=!1,x=!1,S=V.sourceEvent,I===0&&U(V),s=Mu(V.sourceEvent,{transform:$,snapGrid:L,snapToGrid:q,containerBounds:h}),d=ci(V.sourceEvent,h)}).on("drag",V=>{const{autoPanOnNodeDrag:Y,transform:I,snapGrid:$,snapToGrid:L,nodeDragThreshold:q,nodeLookup:X}=t(),J=Mu(V.sourceEvent,{transform:I,snapGrid:$,snapToGrid:L,containerBounds:h});if(S=V.sourceEvent,(V.sourceEvent.type==="touchmove"&&V.sourceEvent.touches.length>1||_&&!X.has(_))&&(y=!0),!y){if(!u&&Y&&p&&(u=!0,B()),!p){const P=J.xSnapped-(s.x??0),G=J.ySnapped-(s.y??0);Math.sqrt(P*P+G*G)>q&&U(V)}(s.x!==J.xSnapped||s.y!==J.ySnapped)&&l&&p&&(d=ci(V.sourceEvent,h),R(J))}}).on("end",V=>{if(!(!p||y)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:Y,updateNodePositions:I,onNodeDragStop:$,onSelectionDragStop:L}=t();if(x&&(I(l,!1),x=!1),i||$||!_&&L){const[q,X]=X0({nodeId:_,dragItems:l,nodeLookup:Y,dragging:!1});i?.(V.sourceEvent,l,q,X),$?.(V.sourceEvent,q,X),_||L?.(V.sourceEvent,X)}}}).filter(V=>{const Y=V.target;return!V.button&&(!N||!lR(Y,`.${N}`,T))&&(!k||lR(Y,k,T))});g.call(z)}function C(){g?.on(".drag",null)}return{update:w,destroy:C}}function cse(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())td(i,ql(s))>0&&r.push(s);return r}const use=250;function dse(e,t,n,r){let i=[],s=1/0;const o=cse(e,n,t+use);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=rd(l,d,d.position,!0),g=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...d,x:h,y:p}],s=g):g===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function H6(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...rd(o,u,u.position,!0)}:u}function F6(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function fse(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const U6=()=>!0;function hse(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:y,onConnectStart:x,onConnect:S,onConnectEnd:w,isValidConnection:C=U6,onReconnectEnd:N,updateConnection:k,getTransform:T,getFromHandle:A,autoPanSpeed:_,dragThreshold:D=1,handleDomNode:R}){const B=O6(e.target);let U=0,z;const{x:V,y:Y}=ci(e),I=F6(s,R),$=l?.getBoundingClientRect();let L=!1;if(!$||!I)return;const q=H6(i,I,r,u,t);if(!q)return;let X=ci(e,$),J=!1,P=null,G=!1,ee=null;function se(){if(!h||!$)return;const[_e,ke]=M6(X,$,_);g({x:_e,y:ke}),U=requestAnimationFrame(se)}const H={...q,nodeId:i,type:I,position:q.position},W=u.get(i);let ce={inProgress:!0,isValid:null,from:rd(W,H,Ne.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:W,to:X,toHandle:null,toPosition:XD[H.position],toNode:null};function le(){L=!0,k(ce),x?.(e,{nodeId:i,handleId:r,handleType:I})}D===0&&le();function ge(_e){if(!L){const{x:Te,y:et}=ci(_e),Ae=Te-V,Zt=et-Y;if(!(Ae*Ae+Zt*Zt>D*D))return;le()}if(!A()||!H){we(_e);return}const ke=T();X=ci(_e,$),z=dse(Cd(X,ke,!1,[1,1]),n,u,H),J||(se(),J=!0);const Ee=$6(_e,{handle:z,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:C,doc:B,lib:d,flowId:p,nodeLookup:u});ee=Ee.handleDomNode,P=Ee.connection,G=fse(!!z,Ee.isValid);const xe={...ce,isValid:G,to:Ee.toHandle&&G?Lp({x:Ee.toHandle.x,y:Ee.toHandle.y},ke):X,toHandle:Ee.toHandle,toPosition:G&&Ee.toHandle?Ee.toHandle.position:XD[H.position],toNode:Ee.toHandle?u.get(Ee.toHandle.nodeId):null};G&&z&&ce.toHandle&&xe.toHandle&&ce.toHandle.type===xe.toHandle.type&&ce.toHandle.nodeId===xe.toHandle.nodeId&&ce.toHandle.id===xe.toHandle.id&&ce.to.x===xe.to.x&&ce.to.y===xe.to.y||(k(xe),ce=xe)}function we(_e){if(L){(z||ee)&&P&&G&&S?.(P);const{inProgress:ke,...Ee}=ce,xe={...Ee,toPosition:ce.toHandle?ce.toPosition:null};w?.(_e,xe),s&&N?.(_e,xe)}y(),cancelAnimationFrame(U),J=!1,G=!1,P=null,ee=null,B.removeEventListener("mousemove",ge),B.removeEventListener("mouseup",we),B.removeEventListener("touchmove",ge),B.removeEventListener("touchend",we)}B.addEventListener("mousemove",ge),B.addEventListener("mouseup",we),B.addEventListener("touchmove",ge),B.addEventListener("touchend",we)}function $6(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=U6,nodeLookup:h}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:x}=ci(e),S=o.elementFromPoint(y,x),w=S?.classList.contains(`${l}-flow__handle`)?S:g,C={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const N=F6(void 0,w),k=w.getAttribute("data-nodeid"),T=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!k||!N)return C;const D={source:p?k:r,sourceHandle:p?T:i,target:p?r:k,targetHandle:p?i:T};C.connection=D;const B=A&&_&&(n===aa.Strict?p&&N==="source"||!p&&N==="target":k!==r||T!==i);C.isValid=B&&d(D),C.toHandle=H6(k,N,T,h,n,!0)}return C}const PE={onPointerDown:hse,isValid:$6};function pse({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ar(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const x=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=k.sourceEvent.ctrlKey&&nd()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,D=T[2]*Math.pow(2,_*A);t.scaleTo(D)};let S=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},C=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[A[0]-S[0],A[1]-S[1]];S=A;const D=r()*Math.max(T[2],Math.log(T[2]))*(y?-1:1),R={x:T[0]-_[0]*D,y:T[1]-_[1]*D},B=[[0,0],[u,d]];t.setViewportConstrained({x:R.x,y:R.y,zoom:T[2]},B,l)},N=x6().on("start",w).on("zoom",p?C:null).on("zoom.wheel",g?x:null);i.call(N,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Vr}}const mse=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,xm=e=>({x:e.x,y:e.y,zoom:e.k}),Z0=({x:e,y:t,zoom:n})=>gm.translate(e,t).scale(n),Sl=(e,t)=>e.target.closest(`.${t}`),G6=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),gse=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Q0=(e,t=0,n=gse,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},K6=e=>{const t=e.ctrlKey&&nd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function yse({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(Sl(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Vr(h),C=K6(h),N=p*Math.pow(2,C);r.scaleTo(n,N,w,h);return}const g=h.deltaMode===1?20:1;let y=i===Jo.Vertical?0:h.deltaX*g,x=i===Jo.Horizontal?0:h.deltaY*g;!nd()&&h.shiftKey&&i!==Jo.Vertical&&(y=h.deltaY*g,x=0),r.translateBy(n,-(y/p)*s,-(x/p)*s,{internal:!0});const S=xm(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function vse({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=Sl(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function bse({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=xm(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function xse({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&G6(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,xm(s.transform))}}function wse({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&G6(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&mse(e.prevViewport,o.transform))){const l=xm(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Sse({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,g=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(Sl(h,`${d}-flow__node`)||Sl(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Sl(h,l)&&h.type==="wheel"||Sl(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!g&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&y}}function Ese({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=x6().clickDistance(!$r(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),y=ar(e).call(g);k({x:s.x,y:s.y,zoom:zl(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const x=y.on("wheel.zoom"),S=y.on("dblclick.zoom");g.wheelDelta(K6);function w(V,Y){return y?new Promise(I=>{g?.interpolate(Y?.interpolate==="linear"?Au:Ch).transform(Q0(y,Y?.duration,Y?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function C({noWheelClassName:V,noPanClassName:Y,onPaneContextMenu:I,userSelectionActive:$,panOnScroll:L,panOnDrag:q,panOnScrollMode:X,panOnScrollSpeed:J,preventScrolling:P,zoomOnPinch:G,zoomOnScroll:ee,zoomOnDoubleClick:se,zoomActivationKeyPressed:H,lib:W,onTransformChange:Z}){$&&!h.isZoomingOrPanning&&N();const le=L&&!H&&!$?yse({zoomPanValues:h,noWheelClassName:V,d3Selection:y,d3Zoom:g,panOnScrollMode:X,panOnScrollSpeed:J,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):vse({noWheelClassName:V,preventScrolling:P,d3ZoomHandler:x});if(y.on("wheel.zoom",le,{passive:!1}),!$){const we=bse({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});g.on("start",we);const _e=xse({zoomPanValues:h,panOnDrag:q,onPaneContextMenu:!!I,onPanZoom:o,onTransformChange:Z});g.on("zoom",_e);const ke=wse({zoomPanValues:h,panOnDrag:q,panOnScroll:L,onPaneContextMenu:I,onPanZoomEnd:u,onDraggingChange:d});g.on("end",ke)}const ge=Sse({zoomActivationKeyPressed:H,panOnDrag:q,zoomOnScroll:ee,panOnScroll:L,zoomOnDoubleClick:se,zoomOnPinch:G,userSelectionActive:$,noPanClassName:Y,noWheelClassName:V,lib:W});g.filter(ge),se?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function N(){g.on("zoom",null)}async function k(V,Y,I){const $=Z0(V),L=g?.constrain()($,Y,I);return L&&await w(L),new Promise(q=>q(L))}async function T(V,Y){const I=Z0(V);return await w(I,Y),new Promise($=>$(I))}function A(V){if(y){const Y=Z0(V),I=y.property("__zoom");(I.k!==V.zoom||I.x!==V.x||I.y!==V.y)&&g?.transform(y,Y,null,{sync:!0})}}function _(){const V=y?b6(y.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function D(V,Y){return y?new Promise(I=>{g?.interpolate(Y?.interpolate==="linear"?Au:Ch).scaleTo(Q0(y,Y?.duration,Y?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function R(V,Y){return y?new Promise(I=>{g?.interpolate(Y?.interpolate==="linear"?Au:Ch).scaleBy(Q0(y,Y?.duration,Y?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function B(V){g?.scaleExtent(V)}function U(V){g?.translateExtent(V)}function z(V){const Y=!$r(V)||V<0?0:V;g?.clickDistance(Y)}return{update:C,destroy:N,setViewport:T,setViewportConstrained:k,getViewport:_,scaleTo:D,scaleBy:R,setScaleExtent:B,setTranslateExtent:U,syncViewport:A,setClickDistance:z}}var ca;(function(e){e.Line="line",e.Handle="handle"})(ca||(ca={}));const Cse=["top-left","top-right","bottom-left","bottom-right"],kse=["top","right","bottom","left"];function Tse({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Nse(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Ns(e,t){return Math.max(0,t-e)}function As(e,t){return Math.max(0,e-t)}function ch(e,t,n){return Math.max(0,t-e,e-n)}function cR(e,t){return e?!t:t}function Ase(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,g=h&&p,{xSnapped:y,ySnapped:x}=n,{minWidth:S,maxWidth:w,minHeight:C,maxHeight:N}=r,{x:k,y:T,width:A,height:_,aspectRatio:D}=e;let R=Math.floor(h?y-e.pointerX:0),B=Math.floor(p?x-e.pointerY:0);const U=A+(u?-R:R),z=_+(d?-B:B),V=-s[0]*A,Y=-s[1]*_;let I=ch(U,S,w),$=ch(z,C,N);if(o){let X=0,J=0;u&&R<0?X=Ns(k+R+V,o[0][0]):!u&&R>0&&(X=As(k+U+V,o[1][0])),d&&B<0?J=Ns(T+B+Y,o[0][1]):!d&&B>0&&(J=As(T+z+Y,o[1][1])),I=Math.max(I,X),$=Math.max($,J)}if(l){let X=0,J=0;u&&R>0?X=As(k+R,l[0][0]):!u&&R<0&&(X=Ns(k+U,l[1][0])),d&&B>0?J=As(T+B,l[0][1]):!d&&B<0&&(J=Ns(T+z,l[1][1])),I=Math.max(I,X),$=Math.max($,J)}if(i){if(h){const X=ch(U/D,C,N)*D;if(I=Math.max(I,X),o){let J=0;!u&&!d||u&&!d&&g?J=As(T+Y+U/D,o[1][1])*D:J=Ns(T+Y+(u?R:-R)/D,o[0][1])*D,I=Math.max(I,J)}if(l){let J=0;!u&&!d||u&&!d&&g?J=Ns(T+U/D,l[1][1])*D:J=As(T+(u?R:-R)/D,l[0][1])*D,I=Math.max(I,J)}}if(p){const X=ch(z*D,S,w)/D;if($=Math.max($,X),o){let J=0;!u&&!d||d&&!u&&g?J=As(k+z*D+V,o[1][0])/D:J=Ns(k+(d?B:-B)*D+V,o[0][0])/D,$=Math.max($,J)}if(l){let J=0;!u&&!d||d&&!u&&g?J=Ns(k+z*D,l[1][0])/D:J=As(k+(d?B:-B)*D,l[0][0])/D,$=Math.max($,J)}}}B=B+(B<0?$:-$),R=R+(R<0?I:-I),i&&(g?U>z*D?B=(cR(u,d)?-R:R)/D:R=(cR(u,d)?-B:B)*D:h?(B=R/D,d=u):(R=B*D,u=d));const L=u?k+R:k,q=d?T+B:T;return{width:A+(u?-R:R),height:_+(d?-B:B),x:s[0]*R*(u?-1:1)+L,y:s[1]*B*(d?-1:1)+q}}const Y6={width:0,height:0,x:0,y:0},Mse={...Y6,pointerX:0,pointerY:0,aspectRatio:1};function _se(e){return[[0,0],[e.measured.width,e.measured.height]]}function Dse(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Rse({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=ar(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:g,onResize:y,onResizeEnd:x,shouldResize:S}){let w={...Y6},C={...Mse};const N=Nse(u);let k,T=null,A=[],_,D,R;const B=s6().on("start",U=>{const{nodeLookup:z,transform:V,snapGrid:Y,snapToGrid:I,nodeOrigin:$,paneDomNode:L}=n();if(k=z.get(t),!k)return;T=L?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:X}=Mu(U.sourceEvent,{transform:V,snapGrid:Y,snapToGrid:I,containerBounds:T});w={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},C={...w,pointerX:q,pointerY:X,aspectRatio:w.width/w.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=z.get(k.parentId),D=_&&k.extent==="parent"?_se(_):void 0),A=[],R=void 0;for(const[J,P]of z)if(P.parentId===t&&(A.push({id:J,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const G=Dse(P,k,P.origin??$);R?R=[[Math.min(G[0][0],R[0][0]),Math.min(G[0][1],R[0][1])],[Math.max(G[1][0],R[1][0]),Math.max(G[1][1],R[1][1])]]:R=G}g?.(U,{...w})}).on("drag",U=>{const{transform:z,snapGrid:V,snapToGrid:Y,nodeOrigin:I}=n(),$=Mu(U.sourceEvent,{transform:z,snapGrid:V,snapToGrid:Y,containerBounds:T}),L=[];if(!k)return;const{x:q,y:X,width:J,height:P}=w,G={},ee=k.origin??I,{width:se,height:H,x:W,y:Z}=Ase(C,N,$,d,h,ee,D,R),ce=se!==J,le=H!==P,ge=W!==q&&ce,we=Z!==X&&le;if(!ge&&!we&&!ce&&!le)return;if((ge||we||ee[0]===1||ee[1]===1)&&(G.x=ge?W:w.x,G.y=we?Z:w.y,w.x=G.x,w.y=G.y,A.length>0)){const xe=W-q,Te=Z-X;for(const et of A)et.position={x:et.position.x-xe+ee[0]*(se-J),y:et.position.y-Te+ee[1]*(H-P)},L.push(et)}if((ce||le)&&(G.width=ce&&(!p||p==="horizontal")?se:w.width,G.height=le&&(!p||p==="vertical")?H:w.height,w.width=G.width,w.height=G.height),_&&k.expandParent){const xe=ee[0]*(G.width??0);G.x&&G.x<xe&&(w.x=xe,C.x=C.x-(G.x-xe));const Te=ee[1]*(G.height??0);G.y&&G.y<Te&&(w.y=Te,C.y=C.y-(G.y-Te))}const _e=Tse({width:w.width,prevWidth:J,height:w.height,prevHeight:P,affectsX:N.affectsX,affectsY:N.affectsY}),ke={...w,direction:_e};S?.(U,ke)!==!1&&(y?.(U,ke),r(G,L))}).on("end",U=>{x?.(U,{...w}),i?.({...w})});s.call(B)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Ose={},uR=e=>{let t;const n=new Set,r=(h,p)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(x=>x(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Ose?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},jse=e=>e?uR(e):uR,{useDebugValue:Lse}=Pe,{useSyncExternalStoreWithSelector:Pse}=LQ,Bse=e=>e;function W6(e,t=Bse,n){const r=Pse(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lse(r),r}const dR=(e,t)=>{const n=jse(e),r=(i,s=t)=>W6(n,i,s);return Object.assign(r,n),r},Ise=(e,t)=>e?dR(e,t):dR;function Et(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const wm=j.createContext(null),zse=wm.Provider,X6=mi.error001();function Ze(e,t){const n=j.useContext(wm);if(n===null)throw new Error(X6);return W6(n,e,t)}function vt(){const e=j.useContext(wm);if(e===null)throw new Error(X6);return j.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const fR={display:"none"},qse={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Z6="react-flow__node-desc",Q6="react-flow__edge-desc",Vse="react-flow__aria-live",Hse=e=>e.ariaLiveMessage,Fse=e=>e.ariaLabelConfig;function Use({rfId:e}){const t=Ze(Hse);return v.jsx("div",{id:`${Vse}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:qse,children:t})}function $se({rfId:e,disableKeyboardA11y:t}){const n=Ze(Fse);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${Z6}-${e}`,style:fR,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${Q6}-${e}`,style:fR,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(Use,{rfId:e})]})}const Sm=j.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return v.jsx("div",{className:$t(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});Sm.displayName="Panel";function Gse({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx(Sm,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kse=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},uh=e=>e.id;function Yse(e,t){return Et(e.selectedNodes.map(uh),t.selectedNodes.map(uh))&&Et(e.selectedEdges.map(uh),t.selectedEdges.map(uh))}function Wse({onSelectionChange:e}){const t=vt(),{selectedNodes:n,selectedEdges:r}=Ze(Kse,Yse);return j.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const Xse=e=>!!e.onSelectionChangeHandlers;function Zse({onSelectionChange:e}){const t=Ze(Xse);return e||t?v.jsx(Wse,{onSelectionChange:e}):null}const J6=[0,0],Qse={x:0,y:0,zoom:1},Jse=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],hR=[...Jse,"rfId"],eoe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),pR={translateExtent:Ju,nodeOrigin:J6,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function toe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=Ze(eoe,Et),h=vt();j.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=pR,l()}),[]);const p=j.useRef(pR);return j.useEffect(()=>{for(const g of hR){const y=e[g],x=p.current[g];y!==x&&(typeof e[g]>"u"||(g==="nodes"?t(y):g==="edges"?n(y):g==="minZoom"?r(y):g==="maxZoom"?i(y):g==="translateExtent"?s(y):g==="nodeExtent"?o(y):g==="paneClickDistance"?d(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:Fie(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=e},hR.map(g=>e[g])),null}function mR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function noe(e){const[t,n]=j.useState(e==="system"?null:e);return j.useEffect(()=>{if(e!=="system"){n(e);return}const r=mR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:mR()?.matches?"dark":"light"}const gR=typeof document<"u"?document:null;function id(e=null,t={target:gR,actInsideInputWithModifier:!0}){const[n,r]=j.useState(!1),i=j.useRef(!1),s=j.useRef(new Set([])),[o,l]=j.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,g)=>p.concat(...g),[]);return[d,h]}return[[],[]]},[e]);return j.useEffect(()=>{const u=t?.target??gR,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!i.current||i.current&&!d)&&j6(y))return!1;const S=vR(y.code,l);if(s.current.add(y[S]),yR(o,s.current,!1)){const w=y.composedPath?.()?.[0]||y.target,C=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!C)&&y.preventDefault(),r(!0)}},p=y=>{const x=vR(y.code,l);yR(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[x]),y.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function yR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function vR(e,t){return t.includes(e)?"code":"key"}const roe=()=>{const e=vt();return j.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=bm(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return Cd(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Lp(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function eq(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)ioe(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function ioe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function tq(e,t){return eq(e,t)}function nq(e,t){return eq(e,t)}function jo(e,t){return{id:e,type:"select",selected:t}}function El(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(jo(s.id,o)))}return r}function bR({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function xR(e){return{id:e.id,type:"remove"}}const wR=e=>jie(e),soe=e=>k6(e);function rq(e){return j.forwardRef(e)}const ooe=typeof window<"u"?j.useLayoutEffect:j.useEffect;function SR(e){const[t,n]=j.useState(BigInt(0)),[r]=j.useState(()=>aoe(()=>n(i=>i+BigInt(1))));return ooe(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function aoe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const iq=j.createContext(null);function loe({children:e}){const t=vt(),n=j.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:g,fitViewQueued:y}=t.getState();let x=u;for(const w of l)x=typeof w=="function"?w(x):w;const S=bR({items:x,lookup:g});h&&d(x),S.length>0?p?.(S):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:C,setNodes:N}=t.getState();w&&N(C)})},[]),r=SR(n),i=j.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:g}=t.getState();let y=u;for(const x of l)y=typeof x=="function"?x(y):x;h?d(y):p&&p(bR({items:y,lookup:g}))},[]),s=SR(i),o=j.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return v.jsx(iq.Provider,{value:o,children:e})}function coe(){const e=j.useContext(iq);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const uoe=e=>!!e.panZoom;function sd(){const e=roe(),t=vt(),n=coe(),r=Ze(uoe),i=j.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),x=wR(p)?p:g.get(p.id),S=x.parentId?R6(x.position,x.measured,x.parentId,g,y):x.position,w={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return ql(w)},d=(p,g,y={replace:!1})=>{o(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&wR(w)?w:{...S,...w}}return S}))},h=(p,g,y={replace:!1})=>{l(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&soe(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[x,S,w]=y;return{nodes:p.map(C=>({...C})),edges:g.map(C=>({...C})),viewport:{x,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:x,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:C,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:T}=t.getState(),{nodes:A,edges:_}=await Iie({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:x,onBeforeDelete:T}),D=_.length>0,R=A.length>0;if(D){const B=_.map(xR);w?.(_),N(B)}if(R){const B=A.map(xR);S?.(A),C(B)}return(R||D)&&k?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,g=!0,y)=>{const x=QD(p),S=x?p:u(p),w=y!==void 0;return S?(y||t.getState().nodes).filter(C=>{const N=t.getState().nodeLookup.get(C.id);if(N&&!x&&(C.id===p.id||!N.internals.positionAbsolute))return!1;const k=ql(w?C:N),T=td(k,S);return g&&T>0||T>=k.width*k.height||T>=S.width*S.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const S=QD(p)?p:u(p);if(!S)return!1;const w=td(S,g);return y&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,g,y={replace:!1})=>{d(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},updateEdge:h,updateEdgeData:(p,g,y={replace:!1})=>{h(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return T6(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??Hie();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return j.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const ER=e=>e.selected,doe=typeof window<"u"?window:void 0;function foe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=vt(),{deleteElements:r}=sd(),i=id(e,{actInsideInputWithModifier:!1}),s=id(t,{target:doe});j.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(ER),edges:o.filter(ER)}),n.setState({nodesSelectionActive:!1})}},[i]),j.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function hoe(e){const t=vt();j.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=bk(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",mi.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Em={position:"absolute",width:"100%",height:"100%",top:0,left:0},poe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function moe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Jo.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:x,noWheelClassName:S,noPanClassName:w,onViewportChange:C,isControlledViewport:N,paneClickDistance:k}){const T=vt(),A=j.useRef(null),{userSelectionActive:_,lib:D}=Ze(poe,Et),R=id(g),B=j.useRef();hoe(A);const U=j.useCallback(z=>{C?.({x:z[0],y:z[1],zoom:z[2]}),N||T.setState({transform:z})},[C,N]);return j.useEffect(()=>{if(A.current){B.current=Ese({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:k,onDraggingChange:I=>T.setState({paneDragging:I}),onPanZoomStart:(I,$)=>{const{onViewportChangeStart:L,onMoveStart:q}=T.getState();q?.(I,$),L?.($)},onPanZoom:(I,$)=>{const{onViewportChange:L,onMove:q}=T.getState();q?.(I,$),L?.($)},onPanZoomEnd:(I,$)=>{const{onViewportChangeEnd:L,onMoveEnd:q}=T.getState();q?.(I,$),L?.($)}});const{x:z,y:V,zoom:Y}=B.current.getViewport();return T.setState({panZoom:B.current,transform:[z,V,Y],domNode:A.current.closest(".react-flow")}),()=>{B.current?.destroy()}}},[]),j.useEffect(()=>{B.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:y,noPanClassName:w,userSelectionActive:_,noWheelClassName:S,lib:D,onTransformChange:U})},[e,t,n,r,i,s,o,l,R,y,w,_,S,D,U]),v.jsx("div",{className:"react-flow__renderer",ref:A,style:Em,children:x})}const goe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function yoe(){const{userSelectionActive:e,userSelectionRect:t}=Ze(goe,Et);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const J0=(e,t)=>n=>{n.target===t.current&&e?.(n)},voe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function boe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ed.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:y}){const x=vt(),{userSelectionActive:S,elementsSelectable:w,dragging:C,connectionInProgress:N}=Ze(voe,Et),k=w&&(e||S),T=j.useRef(null),A=j.useRef(),_=j.useRef(new Set),D=j.useRef(new Set),R=j.useRef(!1),B=j.useRef(!1),U=q=>{if(R.current||N){R.current=!1;return}l?.(q),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},z=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}u?.(q)},V=d?q=>d(q):void 0,Y=q=>{const{resetSelectedElements:X,domNode:J}=x.getState();if(A.current=J?.getBoundingClientRect(),!w||!e||q.button!==0||q.target!==T.current||!A.current)return;q.target?.setPointerCapture?.(q.pointerId),B.current=!0,R.current=!1;const{x:P,y:G}=ci(q.nativeEvent,A.current);X(),x.setState({userSelectionRect:{width:0,height:0,startX:P,startY:G,x:P,y:G}}),s?.(q)},I=q=>{const{userSelectionRect:X,transform:J,nodeLookup:P,edgeLookup:G,connectionLookup:ee,triggerNodeChanges:se,triggerEdgeChanges:H,defaultEdgeOptions:W}=x.getState();if(!A.current||!X)return;R.current=!0;const{x:Z,y:ce}=ci(q.nativeEvent,A.current),{startX:le,startY:ge}=X,we={startX:le,startY:ge,x:Z<le?Z:le,y:ce<ge?ce:ge,width:Math.abs(Z-le),height:Math.abs(ce-ge)},_e=_.current,ke=D.current;_.current=new Set(vk(P,we,J,n===ed.Partial,!0).map(xe=>xe.id)),D.current=new Set;const Ee=W?.selectable??!0;for(const xe of _.current){const Te=ee.get(xe);if(Te)for(const{edgeId:et}of Te.values()){const Ae=G.get(et);Ae&&(Ae.selectable??Ee)&&D.current.add(et)}}if(!JD(_e,_.current)){const xe=El(P,_.current,!0);se(xe)}if(!JD(ke,D.current)){const xe=El(G,D.current);H(xe)}x.setState({userSelectionRect:we,userSelectionActive:!0,nodesSelectionActive:!1})},$=q=>{if(q.button!==0||!B.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:X}=x.getState();!S&&X&&q.target===T.current&&U?.(q),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(q),(t||i)&&(R.current=!1),B.current=!1},L=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:$t(["react-flow__pane",{draggable:L,dragging:C,selection:e}]),onClick:k?void 0:J0(U,T),onContextMenu:J0(z,T),onWheel:J0(V,T),onPointerEnter:k?void 0:h,onPointerDown:k?Y:p,onPointerMove:k?I:p,onPointerUp:k?$:void 0,onPointerLeave:g,ref:T,style:Em,children:[y,v.jsx(yoe,{})]})}function BE({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",mi.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function sq({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=vt(),[u,d]=j.useState(!1),h=j.useRef();return j.useEffect(()=>{h.current=lse({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{BE({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),j.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const xoe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function oq(){const e=vt();return j.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,g=xoe(o),y=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*y*n.factor,w=n.direction.y*x*n.factor;for(const[,C]of d){if(!g(C))continue;let N={x:C.internals.positionAbsolute.x+S,y:C.internals.positionAbsolute.y+w};i&&(N=Ed(N,s));const{position:k,positionAbsolute:T}=N6({nodeId:C.id,nextPosition:N,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});C.position=k,C.internals.positionAbsolute=T,p.set(C.id,C)}u(p)},[])}const Tk=j.createContext(null),woe=Tk.Provider;Tk.Consumer;const aq=()=>j.useContext(Tk),Soe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Eoe=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===aa.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function Coe({type:e="source",position:t=Ne.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...g},y){const x=o||null,S=e==="target",w=vt(),C=aq(),{connectOnClick:N,noPanClassName:k,rfId:T}=Ze(Soe,Et),{connectingFrom:A,connectingTo:_,clickConnecting:D,isPossibleEndHandle:R,connectionInProcess:B,clickConnectionInProcess:U,valid:z}=Ze(Eoe(C,x,e),Et);C||w.getState().onError?.("010",mi.error010());const V=$=>{const{defaultEdgeOptions:L,onConnect:q,hasDefaultEdges:X}=w.getState(),J={...L,...$};if(X){const{edges:P,setEdges:G}=w.getState();G(B6(J,P))}q?.(J),l?.(J)},Y=$=>{if(!C)return;const L=L6($.nativeEvent);if(i&&(L&&$.button===0||!L)){const q=w.getState();PE.onPointerDown($.nativeEvent,{handleDomNode:$.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:x,nodeId:C,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:V,isValidConnection:n||q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}L?h?.($):p?.($)},I=$=>{const{onClickConnectStart:L,onClickConnectEnd:q,connectionClickStartHandle:X,connectionMode:J,isValidConnection:P,lib:G,rfId:ee,nodeLookup:se,connection:H}=w.getState();if(!C||!X&&!i)return;if(!X){L?.($.nativeEvent,{nodeId:C,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:C,type:e,id:x}});return}const W=O6($.target),Z=n||P,{connection:ce,isValid:le}=PE.isValid($.nativeEvent,{handle:{nodeId:C,id:x,type:e},connectionMode:J,fromNodeId:X.nodeId,fromHandleId:X.id||null,fromType:X.type,isValidConnection:Z,flowId:ee,doc:W,lib:G,nodeLookup:se});le&&ce&&V(ce);const ge=structuredClone(H);delete ge.inProgress,ge.toPosition=ge.toHandle?ge.toHandle.position:null,q?.($,ge),w.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":C,"data-handlepos":t,"data-id":`${T}-${C}-${x}-${e}`,className:$t(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:D,connectingfrom:A,connectingto:_,valid:z,connectionindicator:r&&(!B||R)&&(B||U?s:i)}]),onMouseDown:Y,onTouchStart:Y,onClick:N?I:void 0,ref:y,...g,children:u})}const _r=j.memo(rq(Coe));function koe({data:e,isConnectable:t,sourcePosition:n=Ne.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(_r,{type:"source",position:n,isConnectable:t})]})}function Toe({data:e,isConnectable:t,targetPosition:n=Ne.Top,sourcePosition:r=Ne.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(_r,{type:"target",position:n,isConnectable:t}),e?.label,v.jsx(_r,{type:"source",position:r,isConnectable:t})]})}function Noe(){return null}function Aoe({data:e,isConnectable:t,targetPosition:n=Ne.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(_r,{type:"target",position:n,isConnectable:t}),e?.label]})}const Pp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},CR={input:koe,default:Toe,output:Aoe,group:Noe};function Moe(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const _oe=e=>{const{width:t,height:n,x:r,y:i}=Sd(e.nodeLookup,{filter:s=>!!s.selected});return{width:$r(t)?t:null,height:$r(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Doe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=vt(),{width:i,height:s,transformString:o,userSelectionActive:l}=Ze(_oe,Et),u=oq(),d=j.useRef(null);if(j.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),sq({nodeRef:d}),l||!i||!s)return null;const h=e?g=>{const y=r.getState().nodes.filter(x=>x.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Pp,g.key)&&(g.preventDefault(),u({direction:Pp[g.key],factor:g.shiftKey?4:1}))};return v.jsx("div",{className:$t(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:v.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const kR=typeof window<"u"?window:void 0,Roe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function lq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:D,panOnDrag:R,defaultViewport:B,translateExtent:U,minZoom:z,maxZoom:V,preventScrolling:Y,onSelectionContextMenu:I,noWheelClassName:$,noPanClassName:L,disableKeyboardA11y:q,onViewportChange:X,isControlledViewport:J}){const{nodesSelectionActive:P,userSelectionActive:G}=Ze(Roe),ee=id(d,{target:kR}),se=id(S,{target:kR}),H=se||R,W=se||T,Z=h&&H!==!0,ce=ee||G||Z;return foe({deleteKeyCode:u,multiSelectionKeyCode:x}),v.jsx(moe,{onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:W,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:D,panOnDrag:!ee&&H,defaultViewport:B,translateExtent:U,minZoom:z,maxZoom:V,zoomActivationKeyCode:w,preventScrolling:Y,noWheelClassName:$,noPanClassName:L,onViewportChange:X,isControlledViewport:J,paneClickDistance:l,children:v.jsxs(boe,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:H,isSelecting:!!ce,selectionMode:p,selectionKeyPressed:ee,selectionOnDrag:Z,children:[e,P&&v.jsx(Doe,{onSelectionContextMenu:I,noPanClassName:L,disableKeyboardA11y:q})]})})}lq.displayName="FlowRenderer";const Ooe=j.memo(lq),joe=e=>t=>e?vk(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Loe(e){return Ze(j.useCallback(joe(e),[e]),Et)}const Poe=e=>e.updateNodeInternals;function Boe(){const e=Ze(Poe),[t]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return j.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Ioe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=vt(),s=j.useRef(null),o=j.useRef(null),l=j.useRef(e.sourcePosition),u=j.useRef(e.targetPosition),d=j.useRef(t),h=n&&!!e.internals.handleBounds;return j.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),j.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),j.useEffect(()=>{if(s.current){const p=d.current!==t,g=l.current!==e.sourcePosition,y=u.current!==e.targetPosition;(p||g||y)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function zoe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:x,rfId:S,nodeTypes:w,nodeClickDistance:C,onError:N}){const{node:k,internals:T,isParent:A}=Ze(le=>{const ge=le.nodeLookup.get(e),we=le.parentLookup.has(e);return{node:ge,internals:ge.internals,isParent:we}},Et);let _=k.type||"default",D=w?.[_]||CR[_];D===void 0&&(N?.("003",mi.error003(_)),_="default",D=w?.default||CR.default);const R=!!(k.draggable||l&&typeof k.draggable>"u"),B=!!(k.selectable||u&&typeof k.selectable>"u"),U=!!(k.connectable||d&&typeof k.connectable>"u"),z=!!(k.focusable||h&&typeof k.focusable>"u"),V=vt(),Y=D6(k),I=Ioe({node:k,nodeType:_,hasDimensions:Y,resizeObserver:p}),$=sq({nodeRef:I,disabled:k.hidden||!R,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:B,nodeClickDistance:C}),L=oq();if(k.hidden)return null;const q=Ji(k),X=Moe(k),J=B||R||t||n||r||i,P=n?le=>n(le,{...T.userNode}):void 0,G=r?le=>r(le,{...T.userNode}):void 0,ee=i?le=>i(le,{...T.userNode}):void 0,se=s?le=>s(le,{...T.userNode}):void 0,H=o?le=>o(le,{...T.userNode}):void 0,W=le=>{const{selectNodesOnDrag:ge,nodeDragThreshold:we}=V.getState();B&&(!ge||!R||we>0)&&BE({id:e,store:V,nodeRef:I}),t&&t(le,{...T.userNode})},Z=le=>{if(!(j6(le.nativeEvent)||x)){if(w6.includes(le.key)&&B){const ge=le.key==="Escape";BE({id:e,store:V,unselect:ge,nodeRef:I})}else if(R&&k.selected&&Object.prototype.hasOwnProperty.call(Pp,le.key)){le.preventDefault();const{ariaLabelConfig:ge}=V.getState();V.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),L({direction:Pp[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(x||!I.current?.matches(":focus-visible"))return;const{transform:le,width:ge,height:we,autoPanOnNodeFocus:_e,setCenter:ke}=V.getState();if(!_e)return;vk(new Map([[e,k]]),{x:0,y:0,width:ge,height:we},le,!0).length>0||ke(k.position.x+q.width/2,k.position.y+q.height/2,{zoom:le[2]})};return v.jsx("div",{className:$t(["react-flow__node",`react-flow__node-${_}`,{[y]:R},k.className,{selected:k.selected,selectable:B,parent:A,draggable:R,dragging:$}]),ref:I,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:Y?"visible":"hidden",...k.style,...X},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:P,onMouseMove:G,onMouseLeave:ee,onContextMenu:se,onClick:W,onDoubleClick:H,onKeyDown:z?Z:void 0,tabIndex:z?0:void 0,onFocus:z?ce:void 0,role:k.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${Z6}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:v.jsx(woe,{value:e,children:v.jsx(D,{id:e,data:k.data,type:_,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:B,draggable:R,deletable:k.deletable??!0,isConnectable:U,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:$,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...q})})})}const qoe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function cq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Ze(qoe,Et),o=Loe(e.onlyRenderVisibleElements),l=Boe();return v.jsx("div",{className:"react-flow__nodes",style:Em,children:o.map(u=>v.jsx(zoe,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}cq.displayName="NodeRenderer";const Voe=j.memo(cq);function Hoe(e){return Ze(j.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Gie({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Et)}const Foe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return v.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Uoe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return v.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},TR={[Op.Arrow]:Foe,[Op.ArrowClosed]:Uoe};function $oe(e){const t=vt();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(TR,e)?TR[e]:(t.getState().onError?.("009",mi.error009(e)),null),[e])}const Goe=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=$oe(t);return u?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:v.jsx(u,{color:n,strokeWidth:o})}):null},uq=({defaultColor:e,rfId:t})=>{const n=Ze(s=>s.edges),r=Ze(s=>s.defaultEdgeOptions),i=j.useMemo(()=>Jie(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:i.map(s=>v.jsx(Goe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};uq.displayName="MarkerDefinitions";var Koe=j.memo(uq);function dq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,g]=j.useState({x:1,y:0,width:0,height:0}),y=$t(["react-flow__edge-textwrapper",d]),x=j.useRef(null);return j.useEffect(()=>{if(x.current){const S=x.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...h,children:[i&&v.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),v.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}dq.displayName="EdgeText";const Yoe=j.memo(dq);function Cm({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...h,d:e,fill:"none",className:$t(["react-flow__edge-path",h.className])}),d?v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&$r(t)&&$r(n)?v.jsx(Yoe,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function NR({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ne.Left||e===Ne.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function fq({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top}){const[o,l]=NR({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=NR({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,g,y]=P6({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,g,y]}function hq(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:C})=>{const[N,k,T]=fq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return v.jsx(Cm,{id:A,path:N,labelX:k,labelY:T,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:C})})}const Woe=hq({isInternal:!1}),pq=hq({isInternal:!0});Woe.displayName="SimpleBezierEdge";pq.displayName="SimpleBezierEdgeInternal";function mq(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:y=Ne.Bottom,targetPosition:x=Ne.Top,markerEnd:S,markerStart:w,pathOptions:C,interactionWidth:N})=>{const[k,T,A]=OE({sourceX:n,sourceY:r,sourcePosition:y,targetX:i,targetY:s,targetPosition:x,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),_=e.isInternal?void 0:t;return v.jsx(Cm,{id:_,path:k,labelX:T,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:w,interactionWidth:N})})}const gq=mq({isInternal:!1}),yq=mq({isInternal:!0});gq.displayName="SmoothStepEdge";yq.displayName="SmoothStepEdgeInternal";function vq(e){return j.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return v.jsx(gq,{...n,id:r,pathOptions:j.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Xoe=vq({isInternal:!1}),bq=vq({isInternal:!0});Xoe.displayName="StepEdge";bq.displayName="StepEdgeInternal";function xq(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})=>{const[w,C,N]=I6({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return v.jsx(Cm,{id:k,path:w,labelX:C,labelY:N,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})})}const Zoe=xq({isInternal:!1}),wq=xq({isInternal:!0});Zoe.displayName="StraightEdge";wq.displayName="StraightEdgeInternal";function Sq(e){return j.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ne.Bottom,targetPosition:l=Ne.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,pathOptions:C,interactionWidth:N})=>{const[k,T,A]=xk({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:C?.curvature}),_=e.isInternal?void 0:t;return v.jsx(Cm,{id:_,path:k,labelX:T,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:N})})}const Qoe=Sq({isInternal:!1}),Eq=Sq({isInternal:!0});Qoe.displayName="BezierEdge";Eq.displayName="BezierEdgeInternal";const AR={default:Eq,straight:wq,step:bq,smoothstep:yq,simplebezier:pq},MR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Joe=(e,t,n)=>n===Ne.Left?e-t:n===Ne.Right?e+t:e,eae=(e,t,n)=>n===Ne.Top?e-t:n===Ne.Bottom?e+t:e,_R="react-flow__edgeupdater";function DR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:$t([_R,`${_R}-${l}`]),cx:Joe(t,r,e),cy:eae(n,r,e),r,stroke:"transparent",fill:"transparent"})}function tae({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const x=vt(),S=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:_,domNode:D,isValidConnection:R,connectionMode:B,connectionRadius:U,lib:z,onConnectStart:V,onConnectEnd:Y,cancelConnection:I,nodeLookup:$,rfId:L,panBy:q,updateConnection:X}=x.getState(),J=A.type==="target",P=(se,H)=>{g(!1),p?.(se,n,A.type,H)},G=se=>d?.(n,se),ee=(se,H)=>{g(!0),h?.(T,n,A.type),V?.(se,H)};PE.onPointerDown(T.nativeEvent,{autoPanOnConnect:_,connectionMode:B,connectionRadius:U,domNode:D,handleId:A.id,nodeId:A.nodeId,nodeLookup:$,isTarget:J,edgeUpdaterType:A.type,lib:z,flowId:L,cancelConnection:I,panBy:q,isValidConnection:R,onConnect:G,onConnectStart:ee,onConnectEnd:Y,onReconnectEnd:P,updateConnection:X,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},w=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>y(!0),k=()=>y(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(DR,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:N,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&v.jsx(DR,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:C,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function nae({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:x,edgeTypes:S,noPanClassName:w,onError:C,disableKeyboardA11y:N}){let k=Ze(ke=>ke.edgeLookup.get(e));const T=Ze(ke=>ke.defaultEdgeOptions);k=T?{...T,...k}:k;let A=k.type||"default",_=S?.[A]||AR[A];_===void 0&&(C?.("011",mi.error011(A)),A="default",_=S?.default||AR.default);const D=!!(k.focusable||t&&typeof k.focusable>"u"),R=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),B=!!(k.selectable||r&&typeof k.selectable>"u"),U=j.useRef(null),[z,V]=j.useState(!1),[Y,I]=j.useState(!1),$=vt(),{zIndex:L,sourceX:q,sourceY:X,targetX:J,targetY:P,sourcePosition:G,targetPosition:ee}=Ze(j.useCallback(ke=>{const Ee=ke.nodeLookup.get(k.source),xe=ke.nodeLookup.get(k.target);if(!Ee||!xe)return{zIndex:k.zIndex,...MR};const Te=Qie({id:e,sourceNode:Ee,targetNode:xe,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:ke.connectionMode,onError:C});return{zIndex:$ie({selected:k.selected,zIndex:k.zIndex,sourceNode:Ee,targetNode:xe,elevateOnSelect:ke.elevateEdgesOnSelect}),...Te||MR}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Et),se=j.useMemo(()=>k.markerStart?`url('#${jE(k.markerStart,x)}')`:void 0,[k.markerStart,x]),H=j.useMemo(()=>k.markerEnd?`url('#${jE(k.markerEnd,x)}')`:void 0,[k.markerEnd,x]);if(k.hidden||q===null||X===null||J===null||P===null)return null;const W=ke=>{const{addSelectedEdges:Ee,unselectNodesAndEdges:xe,multiSelectionActive:Te}=$.getState();B&&($.setState({nodesSelectionActive:!1}),k.selected&&Te?(xe({nodes:[],edges:[k]}),U.current?.blur()):Ee([e])),i&&i(ke,k)},Z=s?ke=>{s(ke,{...k})}:void 0,ce=o?ke=>{o(ke,{...k})}:void 0,le=l?ke=>{l(ke,{...k})}:void 0,ge=u?ke=>{u(ke,{...k})}:void 0,we=d?ke=>{d(ke,{...k})}:void 0,_e=ke=>{if(!N&&w6.includes(ke.key)&&B){const{unselectNodesAndEdges:Ee,addSelectedEdges:xe}=$.getState();ke.key==="Escape"?(U.current?.blur(),Ee({edges:[k]})):xe([e])}};return v.jsx("svg",{style:{zIndex:L},children:v.jsxs("g",{className:$t(["react-flow__edge",`react-flow__edge-${A}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!B&&!i,updating:z,selectable:B}]),onClick:W,onDoubleClick:Z,onContextMenu:ce,onMouseEnter:le,onMouseMove:ge,onMouseLeave:we,onKeyDown:D?_e:void 0,tabIndex:D?0:void 0,role:k.ariaRole??(D?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":D?`${Q6}-${x}`:void 0,ref:U,...k.domAttributes,children:[!Y&&v.jsx(_,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:B,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:q,sourceY:X,targetX:J,targetY:P,sourcePosition:G,targetPosition:ee,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:se,markerEnd:H,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),R&&v.jsx(tae,{edge:k,isReconnectable:R,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:q,sourceY:X,targetX:J,targetY:P,sourcePosition:G,targetPosition:ee,setUpdateHover:V,setReconnecting:I})]})})}const rae=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Cq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:C,elementsSelectable:N,onError:k}=Ze(rae,Et),T=Hoe(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(Koe,{defaultColor:e,rfId:n}),T.map(A=>v.jsx(nae,{id:A,edgesFocusable:w,edgesReconnectable:C,elementsSelectable:N,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},A))]})}Cq.displayName="EdgeRenderer";const iae=j.memo(Cq),sae=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oae({children:e}){const t=Ze(sae);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function aae(e){const t=sd(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const lae=e=>e.panZoom?.syncViewport;function cae(e){const t=Ze(lae),n=vt();return j.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function uae(e){return e.connection.inProgress?{...e.connection,to:Cd(e.connection.to,e.transform)}:{...e.connection}}function dae(e){return uae}function fae(e){const t=dae();return Ze(t,Et)}const hae=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function pae({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Ze(hae,Et);return!(s&&i&&u)?null:v.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:$t(["react-flow__connection",C6(l)]),children:v.jsx(kq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const kq=({style:e,type:t=Ps.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:g}=fae();if(!i)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:C6(r),toNode:h,toHandle:p});let y="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(t){case Ps.Bezier:[y]=xk(x);break;case Ps.SimpleBezier:[y]=fq(x);break;case Ps.Step:[y]=OE({...x,borderRadius:0});break;case Ps.SmoothStep:[y]=OE(x);break;default:[y]=I6(x)}return v.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};kq.displayName="ConnectionLine";const mae={};function RR(e=mae){j.useRef(e),vt(),j.useEffect(()=>{},[e])}function gae(){vt(),j.useRef(!1),j.useEffect(()=>{},[])}function Tq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:C,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:D,deleteKeyCode:R,onlyRenderVisibleElements:B,elementsSelectable:U,defaultViewport:z,translateExtent:V,minZoom:Y,maxZoom:I,preventScrolling:$,defaultMarkerColor:L,zoomOnScroll:q,zoomOnPinch:X,panOnScroll:J,panOnScrollSpeed:P,panOnScrollMode:G,zoomOnDoubleClick:ee,panOnDrag:se,onPaneClick:H,onPaneMouseEnter:W,onPaneMouseMove:Z,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:ge,paneClickDistance:we,nodeClickDistance:_e,onEdgeContextMenu:ke,onEdgeMouseEnter:Ee,onEdgeMouseMove:xe,onEdgeMouseLeave:Te,reconnectRadius:et,onReconnect:Ae,onReconnectStart:Zt,onReconnectEnd:bn,noDragClassName:dr,noWheelClassName:xn,noPanClassName:Qt,disableKeyboardA11y:ht,nodeExtent:fr,rfId:je,viewport:Kt,onViewportChange:dt}){return RR(e),RR(t),gae(),aae(n),cae(Kt),v.jsx(Ooe,{onPaneClick:H,onPaneMouseEnter:W,onPaneMouseMove:Z,onPaneMouseLeave:ce,onPaneContextMenu:ge,onPaneScroll:le,paneClickDistance:we,deleteKeyCode:R,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:D,elementsSelectable:U,zoomOnScroll:q,zoomOnPinch:X,zoomOnDoubleClick:ee,panOnScroll:J,panOnScrollSpeed:P,panOnScrollMode:G,panOnDrag:se,defaultViewport:z,translateExtent:V,minZoom:Y,maxZoom:I,onSelectionContextMenu:p,preventScrolling:$,noDragClassName:dr,noWheelClassName:xn,noPanClassName:Qt,disableKeyboardA11y:ht,onViewportChange:dt,isControlledViewport:!!Kt,children:v.jsxs(oae,{children:[v.jsx(iae,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Ae,onReconnectStart:Zt,onReconnectEnd:bn,onlyRenderVisibleElements:B,onEdgeContextMenu:ke,onEdgeMouseEnter:Ee,onEdgeMouseMove:xe,onEdgeMouseLeave:Te,reconnectRadius:et,defaultMarkerColor:L,noPanClassName:Qt,disableKeyboardA11y:ht,rfId:je}),v.jsx(pae,{style:S,type:x,component:w,containerStyle:C}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(Voe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:_e,onlyRenderVisibleElements:B,noPanClassName:Qt,noDragClassName:dr,disableKeyboardA11y:ht,nodeExtent:fr,rfId:je}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Tq.displayName="GraphView";const yae=j.memo(Tq),OR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const g=new Map,y=new Map,x=new Map,S=new Map,w=r??t??[],C=n??e??[],N=h??[0,0],k=p??Ju;q6(x,S,w);const T=LE(C,g,y,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=Sd(g,{filter:U=>!!((U.width||U.initialWidth)&&(U.height||U.initialHeight))}),{x:D,y:R,zoom:B}=bm(_,i,s,u,d,l?.padding??.1);A=[D,R,B]}return{rfId:"1",width:0,height:0,transform:A,nodes:C,nodesInitialized:T,nodeLookup:g,parentLookup:y,edges:w,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:Ju,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:aa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...E6},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:zie,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:S6}},vae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>Ise((g,y)=>{async function x(){const{nodeLookup:S,panZoom:w,fitViewOptions:C,fitViewResolver:N,width:k,height:T,minZoom:A,maxZoom:_}=y();w&&(await Bie({nodes:S,width:k,height:T,panZoom:w,minZoom:A,maxZoom:_},C),N?.resolve(!0),g({fitViewResolver:null}))}return{...OR({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:C,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:T}=y(),A=LE(S,w,C,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});T&&A?(x(),g({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:C}=y();q6(w,C,S),g({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:C}=y();C(S),g({hasDefaultNodes:!0})}if(w){const{setEdges:C}=y();C(w),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:C,parentLookup:N,domNode:k,nodeOrigin:T,nodeExtent:A,debug:_,fitViewQueued:D}=y(),{changes:R,updatedInternals:B}=ise(S,C,N,k,T,A);B&&(tse(C,N,{nodeOrigin:T,nodeExtent:A}),D?(x(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),R?.length>0&&(_&&console.log("React Flow: trigger node changes",R),w?.(R)))},updateNodePositions:(S,w=!1)=>{const C=[],N=[],{nodeLookup:k,triggerNodeChanges:T}=y();for(const[A,_]of S){const D=k.get(A),R=!!(D?.expandParent&&D?.parentId&&_?.position),B={id:A,type:"position",position:R?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:w};R&&D.parentId&&C.push({id:A,parentId:D.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),N.push(B)}if(C.length>0){const{parentLookup:A,nodeOrigin:_}=y(),D=kk(C,k,A,_);N.push(...D)}T(N)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:C,nodes:N,hasDefaultNodes:k,debug:T}=y();if(S?.length){if(k){const A=tq(S,N);C(A)}T&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:C,edges:N,hasDefaultEdges:k,debug:T}=y();if(S?.length){if(k){const A=nq(S,N);C(A)}T&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:C,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>jo(_,!0));k(A);return}k(El(N,new Set([...S]),!0)),T(El(C))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:C,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>jo(_,!0));T(A);return}T(El(C,new Set([...S]))),k(El(N,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:C,nodes:N,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:A}=y(),_=S||N,D=w||C,R=_.map(U=>{const z=k.get(U.id);return z&&(z.selected=!1),jo(U.id,!1)}),B=D.map(U=>jo(U.id,!1));T(R),A(B)},setMinZoom:S=>{const{panZoom:w,maxZoom:C}=y();w?.setScaleExtent([S,C]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:C}=y();w?.setScaleExtent([C,S]),g({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{y().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:C,triggerEdgeChanges:N,elementsSelectable:k}=y();if(!k)return;const T=w.reduce((_,D)=>D.selected?[..._,jo(D.id,!1)]:_,[]),A=S.reduce((_,D)=>D.selected?[..._,jo(D.id,!1)]:_,[]);C(T),N(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:C,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:T,nodeExtent:A}=y();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(LE(w,C,N,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:T,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:w,width:C,height:N,panZoom:k,translateExtent:T}=y();return sse({delta:S,panZoom:k,transform:w,translateExtent:T,width:C,height:N})},setCenter:async(S,w,C)=>{const{width:N,height:k,maxZoom:T,panZoom:A}=y();if(!A)return Promise.resolve(!1);const _=typeof C?.zoom<"u"?C.zoom:T;return await A.setViewport({x:N/2-S*_,y:k/2-w*_,zoom:_},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...E6}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...OR()})}},Object.is);function Nq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:g}){const[y]=j.useState(()=>vae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return v.jsx(zse,{value:y,children:v.jsx(loe,{children:g})})}function bae({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:g}){return j.useContext(wm)?v.jsx(v.Fragment,{children:e}):v.jsx(Nq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:e})}const xae={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function wae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:C,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:B,onNodesDelete:U,onEdgesDelete:z,onDelete:V,onSelectionChange:Y,onSelectionDragStart:I,onSelectionDrag:$,onSelectionDragStop:L,onSelectionContextMenu:q,onSelectionStart:X,onSelectionEnd:J,onBeforeDelete:P,connectionMode:G,connectionLineType:ee=Ps.Bezier,connectionLineStyle:se,connectionLineComponent:H,connectionLineContainerStyle:W,deleteKeyCode:Z="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:ge=ed.Full,panActivationKeyCode:we="Space",multiSelectionKeyCode:_e=nd()?"Meta":"Control",zoomActivationKeyCode:ke=nd()?"Meta":"Control",snapToGrid:Ee,snapGrid:xe,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:et,nodesDraggable:Ae,autoPanOnNodeFocus:Zt,nodesConnectable:bn,nodesFocusable:dr,nodeOrigin:xn=J6,edgesFocusable:Qt,edgesReconnectable:ht,elementsSelectable:fr=!0,defaultViewport:je=Qse,minZoom:Kt=.5,maxZoom:dt=2,translateExtent:Rt=Ju,preventScrolling:Ct=!0,nodeExtent:Kn,defaultMarkerColor:ro="#b1b1b7",zoomOnScroll:hr=!0,zoomOnPinch:un=!0,panOnScroll:Jt=!1,panOnScrollSpeed:Yn=.5,panOnScrollMode:vi=Jo.Free,zoomOnDoubleClick:Wr=!0,panOnDrag:Zl=!0,onPaneClick:io,onPaneMouseEnter:bi,onPaneMouseMove:so,onPaneMouseLeave:xi,onPaneScroll:xa,onPaneContextMenu:wa,paneClickDistance:oo=0,nodeClickDistance:ao=0,children:lo,onReconnect:Sa,onReconnectStart:ns,onReconnectEnd:jn,onEdgeContextMenu:It,onEdgeDoubleClick:en,onEdgeMouseEnter:Xr,onEdgeMouseMove:co,onEdgeMouseLeave:Ql,reconnectRadius:uo=10,onNodesChange:Ea,onEdgesChange:wi,noDragClassName:fo="nodrag",noWheelClassName:Zr="nowheel",noPanClassName:pr="nopan",fitView:Qr,fitViewOptions:Pr,connectOnClick:kt,attributionPosition:Ca,proOptions:ka,defaultEdgeOptions:ie,elevateNodesOnSelect:ne,elevateEdgesOnSelect:he,disableKeyboardA11y:ve=!1,autoPanOnConnect:ye,autoPanOnNodeDrag:Ce,autoPanSpeed:Be,connectionRadius:He,isValidConnection:lt,onError:Nn,style:mr,id:tn,nodeDragThreshold:Xe,connectionDragThreshold:Ot,viewport:Jl,onViewportChange:_d,width:Ln,height:Dd,colorMode:Fm="light",debug:Ta,onScroll:ec,ariaLabelConfig:Na,...Um},Pn){const ho=tn||"1",Rd=noe(Fm),tc=j.useCallback(Si=>{Si.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ec?.(Si)},[ec]);return v.jsx("div",{"data-testid":"rf__wrapper",...Um,onScroll:tc,style:{...mr,...xae},ref:Pn,className:$t(["react-flow",i,Rd]),id:tn,role:"application",children:v.jsxs(bae,{nodes:e,edges:t,width:Ln,height:Dd,fitView:Qr,fitViewOptions:Pr,minZoom:Kt,maxZoom:dt,nodeOrigin:xn,nodeExtent:Kn,children:[v.jsx(yae,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:ee,connectionLineStyle:se,connectionLineComponent:H,connectionLineContainerStyle:W,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:ge,deleteKeyCode:Z,multiSelectionKeyCode:_e,panActivationKeyCode:we,zoomActivationKeyCode:ke,onlyRenderVisibleElements:Te,defaultViewport:je,translateExtent:Rt,minZoom:Kt,maxZoom:dt,preventScrolling:Ct,zoomOnScroll:hr,zoomOnPinch:un,zoomOnDoubleClick:Wr,panOnScroll:Jt,panOnScrollSpeed:Yn,panOnScrollMode:vi,panOnDrag:Zl,onPaneClick:io,onPaneMouseEnter:bi,onPaneMouseMove:so,onPaneMouseLeave:xi,onPaneScroll:xa,onPaneContextMenu:wa,paneClickDistance:oo,nodeClickDistance:ao,onSelectionContextMenu:q,onSelectionStart:X,onSelectionEnd:J,onReconnect:Sa,onReconnectStart:ns,onReconnectEnd:jn,onEdgeContextMenu:It,onEdgeDoubleClick:en,onEdgeMouseEnter:Xr,onEdgeMouseMove:co,onEdgeMouseLeave:Ql,reconnectRadius:uo,defaultMarkerColor:ro,noDragClassName:fo,noWheelClassName:Zr,noPanClassName:pr,rfId:ho,disableKeyboardA11y:ve,nodeExtent:Kn,viewport:Jl,onViewportChange:_d}),v.jsx(toe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:C,nodesDraggable:Ae,autoPanOnNodeFocus:Zt,nodesConnectable:bn,nodesFocusable:dr,edgesFocusable:Qt,edgesReconnectable:ht,elementsSelectable:fr,elevateNodesOnSelect:ne,elevateEdgesOnSelect:he,minZoom:Kt,maxZoom:dt,nodeExtent:Kn,onNodesChange:Ea,onEdgesChange:wi,snapToGrid:Ee,snapGrid:xe,connectionMode:G,translateExtent:Rt,connectOnClick:kt,defaultEdgeOptions:ie,fitView:Qr,fitViewOptions:Pr,onNodesDelete:U,onEdgesDelete:z,onDelete:V,onNodeDragStart:D,onNodeDrag:R,onNodeDragStop:B,onSelectionDrag:$,onSelectionDragStart:I,onSelectionDragStop:L,onMove:h,onMoveStart:p,onMoveEnd:g,noPanClassName:pr,nodeOrigin:xn,rfId:ho,autoPanOnConnect:ye,autoPanOnNodeDrag:Ce,autoPanSpeed:Be,onError:Nn,connectionRadius:He,isValidConnection:lt,selectNodesOnDrag:et,nodeDragThreshold:Xe,connectionDragThreshold:Ot,onBeforeDelete:P,paneClickDistance:oo,debug:Ta,ariaLabelConfig:Na}),v.jsx(Zse,{onSelectionChange:Y}),lo,v.jsx(Gse,{proOptions:ka,position:Ca}),v.jsx($se,{rfId:ho,disableKeyboardA11y:ve})]})})}var Sae=rq(wae);function Eae(e){const[t,n]=j.useState(e),r=j.useCallback(i=>n(s=>tq(i,s)),[]);return[t,n,r]}function Cae(e){const[t,n]=j.useState(e),r=j.useCallback(i=>n(s=>nq(i,s)),[]);return[t,n,r]}function kae({dimensions:e,lineWidth:t,variant:n,className:r}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:$t(["react-flow__background-pattern",n,r])})}function Tae({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:$t(["react-flow__background-pattern","dots",t])})}var Gs;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Gs||(Gs={}));const Nae={[Gs.Dots]:1,[Gs.Lines]:1,[Gs.Cross]:6},Aae=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Aq({id:e,variant:t=Gs.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=j.useRef(null),{transform:g,patternId:y}=Ze(Aae,Et),x=r||Nae[t],S=t===Gs.Dots,w=t===Gs.Cross,C=Array.isArray(n)?n:[n,n],N=[C[0]*g[2]||1,C[1]*g[2]||1],k=x*g[2],T=Array.isArray(s)?s:[s,s],A=w?[k,k]:N,_=[T[0]*g[2]||1+A[0]/2,T[1]*g[2]||1+A[1]/2],D=`${y}${e||""}`;return v.jsxs("svg",{className:$t(["react-flow__background",d]),style:{...u,...Em,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[v.jsx("pattern",{id:D,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?v.jsx(Tae,{radius:k/2,className:h}):v.jsx(kae,{dimensions:A,lineWidth:i,variant:t,className:h})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${D})`})]})}Aq.displayName="Background";const Mae=j.memo(Aq);function _ae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Dae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Rae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Oae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function jae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function dh({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:$t(["react-flow__controls-button",t]),...n,children:e})}const Lae=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Mq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const x=vt(),{isInteractive:S,minZoomReached:w,maxZoomReached:C,ariaLabelConfig:N}=Ze(Lae,Et),{zoomIn:k,zoomOut:T,fitView:A}=sd(),_=()=>{k(),s?.()},D=()=>{T(),o?.()},R=()=>{A(i),l?.()},B=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},U=g==="horizontal"?"horizontal":"vertical";return v.jsxs(Sm,{className:$t(["react-flow__controls",U,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??N["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(dh,{onClick:_,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:C,children:v.jsx(_ae,{})}),v.jsx(dh,{onClick:D,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:w,children:v.jsx(Dae,{})})]}),n&&v.jsx(dh,{className:"react-flow__controls-fitview",onClick:R,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:v.jsx(Rae,{})}),r&&v.jsx(dh,{className:"react-flow__controls-interactive",onClick:B,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?v.jsx(jae,{}):v.jsx(Oae,{})}),h]})}Mq.displayName="Controls";const Pae=j.memo(Mq);function Bae({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:g,onClick:y}){const{background:x,backgroundColor:S}=s||{},w=o||x||S;return v.jsx("rect",{className:$t(["react-flow__minimap-node",{selected:g},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:y?C=>y(C,e):void 0})}const Iae=j.memo(Bae),zae=e=>e.nodes.map(t=>t.id),ev=e=>e instanceof Function?e:()=>e;function qae({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Iae,onClick:o}){const l=Ze(zae,Et),u=ev(t),d=ev(e),h=ev(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:l.map(g=>v.jsx(Hae,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function Vae({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:g,height:y}=Ze(x=>{const{internals:S}=x.nodeLookup.get(e),w=S.userNode,{x:C,y:N}=S.positionAbsolute,{width:k,height:T}=Ji(w);return{node:w,x:C,y:N,width:k,height:T}},Et);return!d||d.hidden||!D6(d)?null:v.jsx(l,{x:h,y:p,width:g,height:y,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const Hae=j.memo(Vae);var Fae=j.memo(qae);const Uae=200,$ae=150,Gae=e=>!e.hidden,Kae=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?_6(Sd(e.nodeLookup,{filter:Gae}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Yae="react-flow__minimap-desc";function _q({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:x,pannable:S=!1,zoomable:w=!1,ariaLabel:C,inversePan:N,zoomStep:k=1,offsetScale:T=5}){const A=vt(),_=j.useRef(null),{boundingRect:D,viewBB:R,rfId:B,panZoom:U,translateExtent:z,flowWidth:V,flowHeight:Y,ariaLabelConfig:I}=Ze(Kae,Et),$=e?.width??Uae,L=e?.height??$ae,q=D.width/$,X=D.height/L,J=Math.max(q,X),P=J*$,G=J*L,ee=T*J,se=D.x-(P-D.width)/2-ee,H=D.y-(G-D.height)/2-ee,W=P+ee*2,Z=G+ee*2,ce=`${Yae}-${B}`,le=j.useRef(0),ge=j.useRef();le.current=J,j.useEffect(()=>{if(_.current&&U)return ge.current=pse({domNode:_.current,panZoom:U,getTransform:()=>A.getState().transform,getViewScale:()=>le.current}),()=>{ge.current?.destroy()}},[U]),j.useEffect(()=>{ge.current?.update({translateExtent:z,width:V,height:Y,inversePan:N,pannable:S,zoomStep:k,zoomable:w})},[S,w,N,k,z,V,Y]);const we=y?Ee=>{const[xe,Te]=ge.current?.pointer(Ee)||[0,0];y(Ee,{x:xe,y:Te})}:void 0,_e=x?j.useCallback((Ee,xe)=>{const Te=A.getState().nodeLookup.get(xe).internals.userNode;x(Ee,Te)},[]):void 0,ke=C??I["minimap.ariaLabel"];return v.jsx(Sm,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*J:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:$t(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:$,height:L,viewBox:`${se} ${H} ${W} ${Z}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:_,onClick:we,children:[ke&&v.jsx("title",{id:ce,children:ke}),v.jsx(Fae,{onClick:_e,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${se-ee},${H-ee}h${W+ee*2}v${Z+ee*2}h${-W-ee*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_q.displayName="MiniMap";const Wae=j.memo(_q),Xae=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Zae={[ca.Line]:"right",[ca.Handle]:"bottom-right"};function Qae({nodeId:e,position:t,variant:n=ca.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:x,onResizeStart:S,onResize:w,onResizeEnd:C}){const N=aq(),k=typeof e=="string"?e:N,T=vt(),A=j.useRef(null),_=n===ca.Handle,D=Ze(j.useCallback(Xae(_&&y),[_,y]),Et),R=j.useRef(null),B=t??Zae[n];j.useEffect(()=>{if(!(!A.current||!k))return R.current||(R.current=Rse({domNode:A.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:z,transform:V,snapGrid:Y,snapToGrid:I,nodeOrigin:$,domNode:L}=T.getState();return{nodeLookup:z,transform:V,snapGrid:Y,snapToGrid:I,nodeOrigin:$,paneDomNode:L}},onChange:(z,V)=>{const{triggerNodeChanges:Y,nodeLookup:I,parentLookup:$,nodeOrigin:L}=T.getState(),q=[],X={x:z.x,y:z.y},J=I.get(k);if(J&&J.expandParent&&J.parentId){const P=J.origin??L,G=z.width??J.measured.width??0,ee=z.height??J.measured.height??0,se={id:J.id,parentId:J.parentId,rect:{width:G,height:ee,...R6({x:z.x??J.position.x,y:z.y??J.position.y},{width:G,height:ee},J.parentId,I,P)}},H=kk([se],I,$,L);q.push(...H),X.x=z.x?Math.max(P[0]*G,z.x):void 0,X.y=z.y?Math.max(P[1]*ee,z.y):void 0}if(X.x!==void 0&&X.y!==void 0){const P={id:k,type:"position",position:{...X}};q.push(P)}if(z.width!==void 0&&z.height!==void 0){const G={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};q.push(G)}for(const P of V){const G={...P,type:"position"};q.push(G)}Y(q)},onEnd:({width:z,height:V})=>{const Y={id:k,type:"dimensions",resizing:!1,dimensions:{width:z,height:V}};T.getState().triggerNodeChanges([Y])}})),R.current.update({controlPosition:B,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:C,shouldResize:x}),()=>{R.current?.destroy()}},[B,l,u,d,h,p,S,w,C,x]);const U=B.split("-");return v.jsx("div",{className:$t(["react-flow__resize-control","nodrag",...U,n,r]),ref:A,style:{...i,scale:D,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const jR=j.memo(Qae);function Jae({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:y,onResizeStart:x,onResize:S,onResizeEnd:w}){return t?v.jsxs(v.Fragment,{children:[kse.map(C=>v.jsx(jR,{className:i,style:s,nodeId:e,position:C,variant:ca.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},C)),Cse.map(C=>v.jsx(jR,{className:n,style:r,nodeId:e,position:C,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},C))]}):null}function ele(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const tle=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Ks(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let ul=null;function Dq(e={}){return ul||(e.includeStyleProperties?(ul=e.includeStyleProperties,ul):(ul=Ks(window.getComputedStyle(document.documentElement)),ul))}function Bp(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function nle(e){const t=Bp(e,"border-left-width"),n=Bp(e,"border-right-width");return e.clientWidth+t+n}function rle(e){const t=Bp(e,"border-top-width"),n=Bp(e,"border-bottom-width");return e.clientHeight+t+n}function Rq(e,t={}){const n=t.width||nle(e),r=t.height||rle(e);return{width:n,height:r}}function ile(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const rr=16384;function sle(e){(e.width>rr||e.height>rr)&&(e.width>rr&&e.height>rr?e.width>e.height?(e.height*=rr/e.width,e.width=rr):(e.width*=rr/e.height,e.height=rr):e.width>rr?(e.height*=rr/e.width,e.width=rr):(e.width*=rr/e.height,e.height=rr))}function Ip(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function ole(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ale(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),ole(i)}const $n=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||$n(n,t)};function lle(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function cle(e,t){return Dq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function ule(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?lle(n):cle(n,r);return document.createTextNode(`${i}{${s}}`)}function LR(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=tle();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(ule(o,n,i,r)),t.appendChild(l)}function dle(e,t,n){LR(e,t,":before",n),LR(e,t,":after",n)}const PR="application/font-woff",BR="image/jpeg",fle={woff:PR,woff2:PR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:BR,jpeg:BR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function hle(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Nk(e){const t=hle(e).toLowerCase();return fle[t]||""}function ple(e){return e.split(/,/)[1]}function IE(e){return e.search(/^(data:)/)!==-1}function mle(e,t){return`data:${t};base64,${e}`}async function Oq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const tv={};function gle(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function Ak(e,t,n){const r=gle(e,t,n.includeQueryParams);if(tv[r]!=null)return tv[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await Oq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),ple(l)));i=mle(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return tv[r]=i,i}async function yle(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Ip(t)}async function vle(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return Ip(l)}const n=e.poster,r=Nk(n),i=await Ak(n,r,t);return Ip(i)}async function ble(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await km(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function xle(e,t){return $n(e,HTMLCanvasElement)?yle(e):$n(e,HTMLVideoElement)?vle(e,t):$n(e,HTMLIFrameElement)?ble(e,t):e.cloneNode(jq(e))}const wle=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",jq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Sle(e,t,n){var r,i;if(jq(t))return t;let s=[];return wle(e)&&e.assignedNodes?s=Ks(e.assignedNodes()):$n(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=Ks(e.contentDocument.body.childNodes):s=Ks(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||$n(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>km(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Ele(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Dq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),$n(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function Cle(e,t){$n(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),$n(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function kle(e,t){if($n(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Tle(e,t,n){return $n(t,Element)&&(Ele(e,t,n),dle(e,t,n),Cle(e,t),kle(e,t)),t}async function Nle(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await km(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function km(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>xle(r,t)).then(r=>Sle(e,r,t)).then(r=>Tle(e,r,t)).then(r=>Nle(r,t))}const Lq=/url\((['"]?)([^'"]+?)\1\)/g,Ale=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Mle=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function _le(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Dle(e){const t=[];return e.replace(Lq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!IE(n))}async function Rle(e,t,n,r,i){try{const s=n?ele(t,n):t,o=Nk(t);let l;return i||(l=await Ak(s,o,r)),e.replace(_le(t),`$1${l}$3`)}catch{}return e}function Ole(e,{preferredFontFormat:t}){return t?e.replace(Mle,n=>{for(;;){const[r,,i]=Ale.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Pq(e){return e.search(Lq)!==-1}async function Bq(e,t,n){if(!Pq(e))return e;const r=Ole(e,n);return Dle(r).reduce((s,o)=>s.then(l=>Rle(l,o,t,n)),Promise.resolve(r))}async function dl(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Bq(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function jle(e,t){await dl("background",e,t)||await dl("background-image",e,t),await dl("mask",e,t)||await dl("-webkit-mask",e,t)||await dl("mask-image",e,t)||await dl("-webkit-mask-image",e,t)}async function Lle(e,t){const n=$n(e,HTMLImageElement);if(!(n&&!IE(e.src))&&!($n(e,SVGImageElement)&&!IE(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await Ak(r,Nk(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Ple(e,t){const r=Ks(e.childNodes).map(i=>Iq(i,t));await Promise.all(r).then(()=>e)}async function Iq(e,t){$n(e,Element)&&(await jle(e,t),await Lle(e,t),await Ple(e,t))}function Ble(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const IR={};async function zR(e){let t=IR[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},IR[e]=t,t}async function qR(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Oq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function VR(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function Ile(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{Ks(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=zR(u).then(h=>qR(h,t)).then(h=>VR(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(zR(i.href).then(l=>qR(l,t)).then(l=>VR(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{Ks(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function zle(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Pq(t.style.getPropertyValue("src")))}async function qle(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Ks(e.ownerDocument.styleSheets),r=await Ile(n,t);return zle(r)}function zq(e){return e.trim().replace(/["']/g,"")}function Vle(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(zq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function Hle(e,t){const n=await qle(e,t),r=Vle(e);return(await Promise.all(n.filter(s=>r.has(zq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Bq(s.cssText,o,t)}))).join(`
`)}async function Fle(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Hle(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function qq(e,t={}){const{width:n,height:r}=Rq(e,t),i=await km(e,t,!0);return await Fle(i,t),await Iq(i,t),Ble(i,t),await ale(i,n,r)}async function Vq(e,t={}){const{width:n,height:r}=Rq(e,t),i=await qq(e,t),s=await Ip(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||ile(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||sle(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Ule(e,t={}){return(await Vq(e,t)).toDataURL()}async function $le(e,t={}){return(await Vq(e,t)).toDataURL("image/jpeg",t.quality||1)}function Mk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var nv,HR;function Gle(){if(HR)return nv;HR=1;function e(){this.__data__=[],this.size=0}return nv=e,nv}var rv,FR;function Gl(){if(FR)return rv;FR=1;function e(t,n){return t===n||t!==t&&n!==n}return rv=e,rv}var iv,UR;function Tm(){if(UR)return iv;UR=1;var e=Gl();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return iv=t,iv}var sv,$R;function Kle(){if($R)return sv;$R=1;var e=Tm(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return sv=r,sv}var ov,GR;function Yle(){if(GR)return ov;GR=1;var e=Tm();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return ov=t,ov}var av,KR;function Wle(){if(KR)return av;KR=1;var e=Tm();function t(n){return e(this.__data__,n)>-1}return av=t,av}var lv,YR;function Xle(){if(YR)return lv;YR=1;var e=Tm();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return lv=t,lv}var cv,WR;function Nm(){if(WR)return cv;WR=1;var e=Gle(),t=Kle(),n=Yle(),r=Wle(),i=Xle();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,cv=s,cv}var uv,XR;function Zle(){if(XR)return uv;XR=1;var e=Nm();function t(){this.__data__=new e,this.size=0}return uv=t,uv}var dv,ZR;function Qle(){if(ZR)return dv;ZR=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return dv=e,dv}var fv,QR;function Jle(){if(QR)return fv;QR=1;function e(t){return this.__data__.get(t)}return fv=e,fv}var hv,JR;function ece(){if(JR)return hv;JR=1;function e(t){return this.__data__.has(t)}return hv=e,hv}var pv,eO;function Hq(){if(eO)return pv;eO=1;var e=typeof qf=="object"&&qf&&qf.Object===Object&&qf;return pv=e,pv}var mv,tO;function Yr(){if(tO)return mv;tO=1;var e=Hq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return mv=n,mv}var gv,nO;function Kl(){if(nO)return gv;nO=1;var e=Yr(),t=e.Symbol;return gv=t,gv}var yv,rO;function tce(){if(rO)return yv;rO=1;var e=Kl(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return yv=s,yv}var vv,iO;function nce(){if(iO)return vv;iO=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return vv=n,vv}var bv,sO;function ga(){if(sO)return bv;sO=1;var e=Kl(),t=tce(),n=nce(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return bv=o,bv}var xv,oO;function jr(){if(oO)return xv;oO=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return xv=e,xv}var wv,aO;function kd(){if(aO)return wv;aO=1;var e=ga(),t=jr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return wv=o,wv}var Sv,lO;function rce(){if(lO)return Sv;lO=1;var e=Yr(),t=e["__core-js_shared__"];return Sv=t,Sv}var Ev,cO;function ice(){if(cO)return Ev;cO=1;var e=rce(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return Ev=n,Ev}var Cv,uO;function Fq(){if(uO)return Cv;uO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Cv=n,Cv}var kv,dO;function sce(){if(dO)return kv;dO=1;var e=kd(),t=ice(),n=jr(),r=Fq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var y=e(g)?h:s;return y.test(r(g))}return kv=p,kv}var Tv,fO;function oce(){if(fO)return Tv;fO=1;function e(t,n){return t?.[n]}return Tv=e,Tv}var Nv,hO;function ya(){if(hO)return Nv;hO=1;var e=sce(),t=oce();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return Nv=n,Nv}var Av,pO;function _k(){if(pO)return Av;pO=1;var e=ya(),t=Yr(),n=e(t,"Map");return Av=n,Av}var Mv,mO;function Am(){if(mO)return Mv;mO=1;var e=ya(),t=e(Object,"create");return Mv=t,Mv}var _v,gO;function ace(){if(gO)return _v;gO=1;var e=Am();function t(){this.__data__=e?e(null):{},this.size=0}return _v=t,_v}var Dv,yO;function lce(){if(yO)return Dv;yO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Dv=e,Dv}var Rv,vO;function cce(){if(vO)return Rv;vO=1;var e=Am(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return Rv=i,Rv}var Ov,bO;function uce(){if(bO)return Ov;bO=1;var e=Am(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Ov=r,Ov}var jv,xO;function dce(){if(xO)return jv;xO=1;var e=Am(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return jv=n,jv}var Lv,wO;function fce(){if(wO)return Lv;wO=1;var e=ace(),t=lce(),n=cce(),r=uce(),i=dce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Lv=s,Lv}var Pv,SO;function hce(){if(SO)return Pv;SO=1;var e=fce(),t=Nm(),n=_k();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Pv=r,Pv}var Bv,EO;function pce(){if(EO)return Bv;EO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Bv=e,Bv}var Iv,CO;function Mm(){if(CO)return Iv;CO=1;var e=pce();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Iv=t,Iv}var zv,kO;function mce(){if(kO)return zv;kO=1;var e=Mm();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return zv=t,zv}var qv,TO;function gce(){if(TO)return qv;TO=1;var e=Mm();function t(n){return e(this,n).get(n)}return qv=t,qv}var Vv,NO;function yce(){if(NO)return Vv;NO=1;var e=Mm();function t(n){return e(this,n).has(n)}return Vv=t,Vv}var Hv,AO;function vce(){if(AO)return Hv;AO=1;var e=Mm();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Hv=t,Hv}var Fv,MO;function Dk(){if(MO)return Fv;MO=1;var e=hce(),t=mce(),n=gce(),r=yce(),i=vce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Fv=s,Fv}var Uv,_O;function bce(){if(_O)return Uv;_O=1;var e=Nm(),t=_k(),n=Dk(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return Uv=i,Uv}var $v,DO;function _m(){if(DO)return $v;DO=1;var e=Nm(),t=Zle(),n=Qle(),r=Jle(),i=ece(),s=bce();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,$v=o,$v}var Gv,RO;function Rk(){if(RO)return Gv;RO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Gv=e,Gv}var Kv,OO;function Uq(){if(OO)return Kv;OO=1;var e=ya(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Kv=t,Kv}var Yv,jO;function Dm(){if(jO)return Yv;jO=1;var e=Uq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Yv=t,Yv}var Wv,LO;function Rm(){if(LO)return Wv;LO=1;var e=Dm(),t=Gl(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Wv=i,Wv}var Xv,PO;function Td(){if(PO)return Xv;PO=1;var e=Rm(),t=Dm();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return Xv=n,Xv}var Zv,BO;function xce(){if(BO)return Zv;BO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Zv=e,Zv}var Qv,IO;function yi(){if(IO)return Qv;IO=1;function e(t){return t!=null&&typeof t=="object"}return Qv=e,Qv}var Jv,zO;function wce(){if(zO)return Jv;zO=1;var e=ga(),t=yi(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Jv=r,Jv}var eb,qO;function Nd(){if(qO)return eb;qO=1;var e=wce(),t=yi(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return eb=s,eb}var tb,VO;function Gt(){if(VO)return tb;VO=1;var e=Array.isArray;return tb=e,tb}var uu={exports:{}},nb,HO;function Sce(){if(HO)return nb;HO=1;function e(){return!1}return nb=e,nb}uu.exports;var FO;function Yl(){return FO||(FO=1,(function(e,t){var n=Yr(),r=Sce(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(uu,uu.exports)),uu.exports}var rb,UO;function Om(){if(UO)return rb;UO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return rb=n,rb}var ib,$O;function Ok(){if($O)return ib;$O=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return ib=t,ib}var sb,GO;function Ece(){if(GO)return sb;GO=1;var e=ga(),t=Ok(),n=yi(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",x="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",D="[object Uint8Array]",R="[object Uint8ClampedArray]",B="[object Uint16Array]",U="[object Uint32Array]",z={};z[N]=z[k]=z[T]=z[A]=z[_]=z[D]=z[R]=z[B]=z[U]=!0,z[r]=z[i]=z[w]=z[s]=z[C]=z[o]=z[l]=z[u]=z[d]=z[h]=z[p]=z[g]=z[y]=z[x]=z[S]=!1;function V(Y){return n(Y)&&t(Y.length)&&!!z[e(Y)]}return sb=V,sb}var ob,KO;function jm(){if(KO)return ob;KO=1;function e(t){return function(n){return t(n)}}return ob=e,ob}var du={exports:{}};du.exports;var YO;function jk(){return YO||(YO=1,(function(e,t){var n=Hq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(du,du.exports)),du.exports}var ab,WO;function Ad(){if(WO)return ab;WO=1;var e=Ece(),t=jm(),n=jk(),r=n&&n.isTypedArray,i=r?t(r):e;return ab=i,ab}var lb,XO;function $q(){if(XO)return lb;XO=1;var e=xce(),t=Nd(),n=Gt(),r=Yl(),i=Om(),s=Ad(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),g=!p&&t(d),y=!p&&!g&&r(d),x=!p&&!g&&!y&&s(d),S=p||g||y||x,w=S?e(d.length,String):[],C=w.length;for(var N in d)(h||l.call(d,N))&&!(S&&(N=="length"||y&&(N=="offset"||N=="parent")||x&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,C)))&&w.push(N);return w}return lb=u,lb}var cb,ZO;function Lm(){if(ZO)return cb;ZO=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return cb=t,cb}var ub,QO;function Gq(){if(QO)return ub;QO=1;function e(t,n){return function(r){return t(n(r))}}return ub=e,ub}var db,JO;function Cce(){if(JO)return db;JO=1;var e=Gq(),t=e(Object.keys,Object);return db=t,db}var fb,ej;function Lk(){if(ej)return fb;ej=1;var e=Lm(),t=Cce(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return fb=i,fb}var hb,tj;function es(){if(tj)return hb;tj=1;var e=kd(),t=Ok();function n(r){return r!=null&&t(r.length)&&!e(r)}return hb=n,hb}var pb,nj;function no(){if(nj)return pb;nj=1;var e=$q(),t=Lk(),n=es();function r(i){return n(i)?e(i):t(i)}return pb=r,pb}var mb,rj;function kce(){if(rj)return mb;rj=1;var e=Td(),t=no();function n(r,i){return r&&e(i,t(i),r)}return mb=n,mb}var gb,ij;function Tce(){if(ij)return gb;ij=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return gb=e,gb}var yb,sj;function Nce(){if(sj)return yb;sj=1;var e=jr(),t=Lm(),n=Tce(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return yb=s,yb}var vb,oj;function va(){if(oj)return vb;oj=1;var e=$q(),t=Nce(),n=es();function r(i){return n(i)?e(i,!0):t(i)}return vb=r,vb}var bb,aj;function Ace(){if(aj)return bb;aj=1;var e=Td(),t=va();function n(r,i){return r&&e(i,t(i),r)}return bb=n,bb}var fu={exports:{}};fu.exports;var lj;function Kq(){return lj||(lj=1,(function(e,t){var n=Yr(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(fu,fu.exports)),fu.exports}var xb,cj;function Yq(){if(cj)return xb;cj=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return xb=e,xb}var wb,uj;function Wq(){if(uj)return wb;uj=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return wb=e,wb}var Sb,dj;function Xq(){if(dj)return Sb;dj=1;function e(){return[]}return Sb=e,Sb}var Eb,fj;function Pk(){if(fj)return Eb;fj=1;var e=Wq(),t=Xq(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return Eb=s,Eb}var Cb,hj;function Mce(){if(hj)return Cb;hj=1;var e=Td(),t=Pk();function n(r,i){return e(r,t(r),i)}return Cb=n,Cb}var kb,pj;function Bk(){if(pj)return kb;pj=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return kb=e,kb}var Tb,mj;function Pm(){if(mj)return Tb;mj=1;var e=Gq(),t=e(Object.getPrototypeOf,Object);return Tb=t,Tb}var Nb,gj;function Zq(){if(gj)return Nb;gj=1;var e=Bk(),t=Pm(),n=Pk(),r=Xq(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return Nb=s,Nb}var Ab,yj;function _ce(){if(yj)return Ab;yj=1;var e=Td(),t=Zq();function n(r,i){return e(r,t(r),i)}return Ab=n,Ab}var Mb,vj;function Qq(){if(vj)return Mb;vj=1;var e=Bk(),t=Gt();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return Mb=n,Mb}var _b,bj;function Jq(){if(bj)return _b;bj=1;var e=Qq(),t=Pk(),n=no();function r(i){return e(i,n,t)}return _b=r,_b}var Db,xj;function Dce(){if(xj)return Db;xj=1;var e=Qq(),t=Zq(),n=va();function r(i){return e(i,n,t)}return Db=r,Db}var Rb,wj;function Rce(){if(wj)return Rb;wj=1;var e=ya(),t=Yr(),n=e(t,"DataView");return Rb=n,Rb}var Ob,Sj;function Oce(){if(Sj)return Ob;Sj=1;var e=ya(),t=Yr(),n=e(t,"Promise");return Ob=n,Ob}var jb,Ej;function eV(){if(Ej)return jb;Ej=1;var e=ya(),t=Yr(),n=e(t,"Set");return jb=n,jb}var Lb,Cj;function jce(){if(Cj)return Lb;Cj=1;var e=ya(),t=Yr(),n=e(t,"WeakMap");return Lb=n,Lb}var Pb,kj;function Wl(){if(kj)return Pb;kj=1;var e=Rce(),t=_k(),n=Oce(),r=eV(),i=jce(),s=ga(),o=Fq(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",y=o(e),x=o(t),S=o(n),w=o(r),C=o(i),N=s;return(e&&N(new e(new ArrayBuffer(1)))!=g||t&&N(new t)!=l||n&&N(n.resolve())!=d||r&&N(new r)!=h||i&&N(new i)!=p)&&(N=function(k){var T=s(k),A=T==u?k.constructor:void 0,_=A?o(A):"";if(_)switch(_){case y:return g;case x:return l;case S:return d;case w:return h;case C:return p}return T}),Pb=N,Pb}var Bb,Tj;function Lce(){if(Tj)return Bb;Tj=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Bb=n,Bb}var Ib,Nj;function tV(){if(Nj)return Ib;Nj=1;var e=Yr(),t=e.Uint8Array;return Ib=t,Ib}var zb,Aj;function Ik(){if(Aj)return zb;Aj=1;var e=tV();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return zb=t,zb}var qb,Mj;function Pce(){if(Mj)return qb;Mj=1;var e=Ik();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return qb=t,qb}var Vb,_j;function Bce(){if(_j)return Vb;_j=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Vb=t,Vb}var Hb,Dj;function Ice(){if(Dj)return Hb;Dj=1;var e=Kl(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Hb=r,Hb}var Fb,Rj;function nV(){if(Rj)return Fb;Rj=1;var e=Ik();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Fb=t,Fb}var Ub,Oj;function zce(){if(Oj)return Ub;Oj=1;var e=Ik(),t=Pce(),n=Bce(),r=Ice(),i=nV(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",D="[object Uint32Array]";function R(B,U,z){var V=B.constructor;switch(U){case y:return e(B);case s:case o:return new V(+B);case x:return t(B,z);case S:case w:case C:case N:case k:case T:case A:case _:case D:return i(B,z);case l:return new V;case u:case p:return new V(B);case d:return n(B);case h:return new V;case g:return r(B)}}return Ub=R,Ub}var $b,jj;function rV(){if(jj)return $b;jj=1;var e=jr(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return $b=n,$b}var Gb,Lj;function iV(){if(Lj)return Gb;Lj=1;var e=rV(),t=Pm(),n=Lm();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Gb=r,Gb}var Kb,Pj;function qce(){if(Pj)return Kb;Pj=1;var e=Wl(),t=yi(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Kb=r,Kb}var Yb,Bj;function Vce(){if(Bj)return Yb;Bj=1;var e=qce(),t=jm(),n=jk(),r=n&&n.isMap,i=r?t(r):e;return Yb=i,Yb}var Wb,Ij;function Hce(){if(Ij)return Wb;Ij=1;var e=Wl(),t=yi(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Wb=r,Wb}var Xb,zj;function Fce(){if(zj)return Xb;zj=1;var e=Hce(),t=jm(),n=jk(),r=n&&n.isSet,i=r?t(r):e;return Xb=i,Xb}var Zb,qj;function sV(){if(qj)return Zb;qj=1;var e=_m(),t=Rk(),n=Rm(),r=kce(),i=Ace(),s=Kq(),o=Yq(),l=Mce(),u=_ce(),d=Jq(),h=Dce(),p=Wl(),g=Lce(),y=zce(),x=iV(),S=Gt(),w=Yl(),C=Vce(),N=jr(),k=Fce(),T=no(),A=va(),_=1,D=2,R=4,B="[object Arguments]",U="[object Array]",z="[object Boolean]",V="[object Date]",Y="[object Error]",I="[object Function]",$="[object GeneratorFunction]",L="[object Map]",q="[object Number]",X="[object Object]",J="[object RegExp]",P="[object Set]",G="[object String]",ee="[object Symbol]",se="[object WeakMap]",H="[object ArrayBuffer]",W="[object DataView]",Z="[object Float32Array]",ce="[object Float64Array]",le="[object Int8Array]",ge="[object Int16Array]",we="[object Int32Array]",_e="[object Uint8Array]",ke="[object Uint8ClampedArray]",Ee="[object Uint16Array]",xe="[object Uint32Array]",Te={};Te[B]=Te[U]=Te[H]=Te[W]=Te[z]=Te[V]=Te[Z]=Te[ce]=Te[le]=Te[ge]=Te[we]=Te[L]=Te[q]=Te[X]=Te[J]=Te[P]=Te[G]=Te[ee]=Te[_e]=Te[ke]=Te[Ee]=Te[xe]=!0,Te[Y]=Te[I]=Te[se]=!1;function et(Ae,Zt,bn,dr,xn,Qt){var ht,fr=Zt&_,je=Zt&D,Kt=Zt&R;if(bn&&(ht=xn?bn(Ae,dr,xn,Qt):bn(Ae)),ht!==void 0)return ht;if(!N(Ae))return Ae;var dt=S(Ae);if(dt){if(ht=g(Ae),!fr)return o(Ae,ht)}else{var Rt=p(Ae),Ct=Rt==I||Rt==$;if(w(Ae))return s(Ae,fr);if(Rt==X||Rt==B||Ct&&!xn){if(ht=je||Ct?{}:x(Ae),!fr)return je?u(Ae,i(ht,Ae)):l(Ae,r(ht,Ae))}else{if(!Te[Rt])return xn?Ae:{};ht=y(Ae,Rt,fr)}}Qt||(Qt=new e);var Kn=Qt.get(Ae);if(Kn)return Kn;Qt.set(Ae,ht),k(Ae)?Ae.forEach(function(un){ht.add(et(un,Zt,bn,un,Ae,Qt))}):C(Ae)&&Ae.forEach(function(un,Jt){ht.set(Jt,et(un,Zt,bn,Jt,Ae,Qt))});var ro=Kt?je?h:d:je?A:T,hr=dt?void 0:ro(Ae);return t(hr||Ae,function(un,Jt){hr&&(Jt=un,un=Ae[Jt]),n(ht,Jt,et(un,Zt,bn,Jt,Ae,Qt))}),ht}return Zb=et,Zb}var Qb,Vj;function Uce(){if(Vj)return Qb;Vj=1;var e=sV(),t=4;function n(r){return e(r,t)}return Qb=n,Qb}var Jb,Hj;function zk(){if(Hj)return Jb;Hj=1;function e(t){return function(){return t}}return Jb=e,Jb}var ex,Fj;function $ce(){if(Fj)return ex;Fj=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return ex=e,ex}var tx,Uj;function qk(){if(Uj)return tx;Uj=1;var e=$ce(),t=e();return tx=t,tx}var nx,$j;function Vk(){if($j)return nx;$j=1;var e=qk(),t=no();function n(r,i){return r&&e(r,i,t)}return nx=n,nx}var rx,Gj;function Gce(){if(Gj)return rx;Gj=1;var e=es();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return rx=t,rx}var ix,Kj;function Bm(){if(Kj)return ix;Kj=1;var e=Vk(),t=Gce(),n=t(e);return ix=n,ix}var sx,Yj;function ba(){if(Yj)return sx;Yj=1;function e(t){return t}return sx=e,sx}var ox,Wj;function oV(){if(Wj)return ox;Wj=1;var e=ba();function t(n){return typeof n=="function"?n:e}return ox=t,ox}var ax,Xj;function aV(){if(Xj)return ax;Xj=1;var e=Rk(),t=Bm(),n=oV(),r=Gt();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return ax=i,ax}var lx,Zj;function lV(){return Zj||(Zj=1,lx=aV()),lx}var cx,Qj;function Kce(){if(Qj)return cx;Qj=1;var e=Bm();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return cx=t,cx}var ux,Jj;function Yce(){if(Jj)return ux;Jj=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return ux=t,ux}var dx,e3;function Wce(){if(e3)return dx;e3=1;function e(t){return this.__data__.has(t)}return dx=e,dx}var fx,t3;function cV(){if(t3)return fx;t3=1;var e=Dk(),t=Yce(),n=Wce();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,fx=r,fx}var hx,n3;function Xce(){if(n3)return hx;n3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return hx=e,hx}var px,r3;function uV(){if(r3)return px;r3=1;function e(t,n){return t.has(n)}return px=e,px}var mx,i3;function dV(){if(i3)return mx;i3=1;var e=cV(),t=Xce(),n=uV(),r=1,i=2;function s(o,l,u,d,h,p){var g=u&r,y=o.length,x=l.length;if(y!=x&&!(g&&x>y))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var C=-1,N=!0,k=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++C<y;){var T=o[C],A=l[C];if(d)var _=g?d(A,T,C,l,o,p):d(T,A,C,o,l,p);if(_!==void 0){if(_)continue;N=!1;break}if(k){if(!t(l,function(D,R){if(!n(k,R)&&(T===D||h(T,D,u,d,p)))return k.push(R)})){N=!1;break}}else if(!(T===A||h(T,A,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return mx=s,mx}var gx,s3;function Zce(){if(s3)return gx;s3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return gx=e,gx}var yx,o3;function Hk(){if(o3)return yx;o3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return yx=e,yx}var vx,a3;function Qce(){if(a3)return vx;a3=1;var e=Kl(),t=tV(),n=Gl(),r=dV(),i=Zce(),s=Hk(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",y="[object RegExp]",x="[object Set]",S="[object String]",w="[object Symbol]",C="[object ArrayBuffer]",N="[object DataView]",k=e?e.prototype:void 0,T=k?k.valueOf:void 0;function A(_,D,R,B,U,z,V){switch(R){case N:if(_.byteLength!=D.byteLength||_.byteOffset!=D.byteOffset)return!1;_=_.buffer,D=D.buffer;case C:return!(_.byteLength!=D.byteLength||!z(new t(_),new t(D)));case u:case d:case g:return n(+_,+D);case h:return _.name==D.name&&_.message==D.message;case y:case S:return _==D+"";case p:var Y=i;case x:var I=B&o;if(Y||(Y=s),_.size!=D.size&&!I)return!1;var $=V.get(_);if($)return $==D;B|=l,V.set(_,D);var L=r(Y(_),Y(D),B,U,z,V);return V.delete(_),L;case w:if(T)return T.call(_)==T.call(D)}return!1}return vx=A,vx}var bx,l3;function Jce(){if(l3)return bx;l3=1;var e=Jq(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,g=e(s),y=g.length,x=e(o),S=x.length;if(y!=S&&!p)return!1;for(var w=y;w--;){var C=g[w];if(!(p?C in o:r.call(o,C)))return!1}var N=h.get(s),k=h.get(o);if(N&&k)return N==o&&k==s;var T=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<y;){C=g[w];var _=s[C],D=o[C];if(u)var R=p?u(D,_,C,o,s,h):u(_,D,C,s,o,h);if(!(R===void 0?_===D||d(_,D,l,u,h):R)){T=!1;break}A||(A=C=="constructor")}if(T&&!A){var B=s.constructor,U=o.constructor;B!=U&&"constructor"in s&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof U=="function"&&U instanceof U)&&(T=!1)}return h.delete(s),h.delete(o),T}return bx=i,bx}var xx,c3;function eue(){if(c3)return xx;c3=1;var e=_m(),t=dV(),n=Qce(),r=Jce(),i=Wl(),s=Gt(),o=Yl(),l=Ad(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function x(S,w,C,N,k,T){var A=s(S),_=s(w),D=A?h:i(S),R=_?h:i(w);D=D==d?p:D,R=R==d?p:R;var B=D==p,U=R==p,z=D==R;if(z&&o(S)){if(!o(w))return!1;A=!0,B=!1}if(z&&!B)return T||(T=new e),A||l(S)?t(S,w,C,N,k,T):n(S,w,D,C,N,k,T);if(!(C&u)){var V=B&&y.call(S,"__wrapped__"),Y=U&&y.call(w,"__wrapped__");if(V||Y){var I=V?S.value():S,$=Y?w.value():w;return T||(T=new e),k(I,$,C,N,T)}}return z?(T||(T=new e),r(S,w,C,N,k,T)):!1}return xx=x,xx}var wx,u3;function fV(){if(u3)return wx;u3=1;var e=eue(),t=yi();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return wx=n,wx}var Sx,d3;function tue(){if(d3)return Sx;d3=1;var e=_m(),t=fV(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<h;){g=l[d];var y=g[0],x=s[y],S=g[1];if(p&&g[2]){if(x===void 0&&!(y in s))return!1}else{var w=new e;if(u)var C=u(x,S,y,s,o,w);if(!(C===void 0?t(S,x,n|r,u,w):C))return!1}}return!0}return Sx=i,Sx}var Ex,f3;function hV(){if(f3)return Ex;f3=1;var e=jr();function t(n){return n===n&&!e(n)}return Ex=t,Ex}var Cx,h3;function nue(){if(h3)return Cx;h3=1;var e=hV(),t=no();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return Cx=n,Cx}var kx,p3;function pV(){if(p3)return kx;p3=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return kx=e,kx}var Tx,m3;function rue(){if(m3)return Tx;m3=1;var e=tue(),t=nue(),n=pV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return Tx=r,Tx}var Nx,g3;function Xl(){if(g3)return Nx;g3=1;var e=ga(),t=yi(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Nx=r,Nx}var Ax,y3;function Fk(){if(y3)return Ax;y3=1;var e=Gt(),t=Xl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Ax=i,Ax}var Mx,v3;function iue(){if(v3)return Mx;v3=1;var e=Dk(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,Mx=n,Mx}var _x,b3;function sue(){if(b3)return _x;b3=1;var e=iue(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return _x=n,_x}var Dx,x3;function oue(){if(x3)return Dx;x3=1;var e=sue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return Dx=r,Dx}var Rx,w3;function Im(){if(w3)return Rx;w3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Rx=e,Rx}var Ox,S3;function aue(){if(S3)return Ox;S3=1;var e=Kl(),t=Im(),n=Gt(),r=Xl(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return Ox=o,Ox}var jx,E3;function mV(){if(E3)return jx;E3=1;var e=aue();function t(n){return n==null?"":e(n)}return jx=t,jx}var Lx,C3;function zm(){if(C3)return Lx;C3=1;var e=Gt(),t=Fk(),n=oue(),r=mV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return Lx=i,Lx}var Px,k3;function Md(){if(k3)return Px;k3=1;var e=Xl();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Px=t,Px}var Bx,T3;function qm(){if(T3)return Bx;T3=1;var e=zm(),t=Md();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return Bx=n,Bx}var Ix,N3;function lue(){if(N3)return Ix;N3=1;var e=qm();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Ix=t,Ix}var zx,A3;function cue(){if(A3)return zx;A3=1;function e(t,n){return t!=null&&n in Object(t)}return zx=e,zx}var qx,M3;function gV(){if(M3)return qx;M3=1;var e=zm(),t=Nd(),n=Gt(),r=Om(),i=Ok(),s=Md();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,g=!1;++h<p;){var y=s(u[h]);if(!(g=l!=null&&d(l,y)))break;l=l[y]}return g||++h!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(y,p)&&(n(l)||t(l)))}return qx=o,qx}var Vx,_3;function yV(){if(_3)return Vx;_3=1;var e=cue(),t=gV();function n(r,i){return r!=null&&t(r,i,e)}return Vx=n,Vx}var Hx,D3;function uue(){if(D3)return Hx;D3=1;var e=fV(),t=lue(),n=yV(),r=Fk(),i=hV(),s=pV(),o=Md(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(g){var y=t(g,h);return y===void 0&&y===p?n(g,h):e(p,y,l|u)}}return Hx=d,Hx}var Fx,R3;function vV(){if(R3)return Fx;R3=1;function e(t){return function(n){return n?.[t]}}return Fx=e,Fx}var Ux,O3;function due(){if(O3)return Ux;O3=1;var e=qm();function t(n){return function(r){return e(r,n)}}return Ux=t,Ux}var $x,j3;function fue(){if(j3)return $x;j3=1;var e=vV(),t=due(),n=Fk(),r=Md();function i(s){return n(s)?e(r(s)):t(s)}return $x=i,$x}var Gx,L3;function ts(){if(L3)return Gx;L3=1;var e=rue(),t=uue(),n=ba(),r=Gt(),i=fue();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return Gx=s,Gx}var Kx,P3;function bV(){if(P3)return Kx;P3=1;var e=Wq(),t=Kce(),n=ts(),r=Gt();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return Kx=i,Kx}var Yx,B3;function hue(){if(B3)return Yx;B3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Yx=n,Yx}var Wx,I3;function xV(){if(I3)return Wx;I3=1;var e=hue(),t=gV();function n(r,i){return r!=null&&t(r,i,e)}return Wx=n,Wx}var Xx,z3;function pue(){if(z3)return Xx;z3=1;var e=Lk(),t=Wl(),n=Nd(),r=Gt(),i=es(),s=Yl(),o=Lm(),l=Ad(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||l(y)||n(y)))return!y.length;var x=t(y);if(x==u||x==d)return!y.size;if(o(y))return!e(y).length;for(var S in y)if(p.call(y,S))return!1;return!0}return Xx=g,Xx}var Zx,q3;function wV(){if(q3)return Zx;q3=1;function e(t){return t===void 0}return Zx=e,Zx}var Qx,V3;function SV(){if(V3)return Qx;V3=1;var e=Bm(),t=es();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return Qx=n,Qx}var Jx,H3;function EV(){if(H3)return Jx;H3=1;var e=Im(),t=ts(),n=SV(),r=Gt();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return Jx=i,Jx}var e1,F3;function mue(){if(F3)return e1;F3=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return e1=e,e1}var t1,U3;function gue(){if(U3)return t1;U3=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return t1=e,t1}var n1,$3;function CV(){if($3)return n1;$3=1;var e=mue(),t=Bm(),n=ts(),r=gue(),i=Gt();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return n1=s,n1}var r1,G3;function yue(){if(G3)return r1;G3=1;var e=ga(),t=Gt(),n=yi(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return r1=i,r1}var i1,K3;function vue(){if(K3)return i1;K3=1;var e=vV(),t=e("length");return i1=t,i1}var s1,Y3;function bue(){if(Y3)return s1;Y3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return s1=u,s1}var o1,W3;function xue(){if(W3)return o1;W3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=d+"?",S="["+s+"]?",w="(?:"+y+"(?:"+[h,p,g].join("|")+")"+S+x+")*",C=S+x+w,N="(?:"+[h+l+"?",l,p,g,o].join("|")+")",k=RegExp(u+"(?="+u+")|"+N+C,"g");function T(A){for(var _=k.lastIndex=0;k.test(A);)++_;return _}return o1=T,o1}var a1,X3;function wue(){if(X3)return a1;X3=1;var e=vue(),t=bue(),n=xue();function r(i){return t(i)?n(i):e(i)}return a1=r,a1}var l1,Z3;function Sue(){if(Z3)return l1;Z3=1;var e=Lk(),t=Wl(),n=es(),r=yue(),i=wue(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return l1=l,l1}var c1,Q3;function Eue(){if(Q3)return c1;Q3=1;var e=Rk(),t=rV(),n=Vk(),r=ts(),i=Pm(),s=Gt(),o=Yl(),l=kd(),u=jr(),d=Ad();function h(p,g,y){var x=s(p),S=x||o(p)||d(p);if(g=r(g,4),y==null){var w=p&&p.constructor;S?y=x?new w:[]:u(p)?y=l(w)?t(i(p)):{}:y={}}return(S?e:n)(p,function(C,N,k){return g(y,C,N,k)}),y}return c1=h,c1}var u1,J3;function Cue(){if(J3)return u1;J3=1;var e=Kl(),t=Nd(),n=Gt(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return u1=i,u1}var d1,eL;function Uk(){if(eL)return d1;eL=1;var e=Bk(),t=Cue();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return d1=n,d1}var f1,tL;function kue(){if(tL)return f1;tL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return f1=e,f1}var h1,nL;function kV(){if(nL)return h1;nL=1;var e=kue(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return h1=n,h1}var p1,rL;function Tue(){if(rL)return p1;rL=1;var e=zk(),t=Uq(),n=ba(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return p1=r,p1}var m1,iL;function Nue(){if(iL)return m1;iL=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return m1=r,m1}var g1,sL;function TV(){if(sL)return g1;sL=1;var e=Tue(),t=Nue(),n=t(e);return g1=n,g1}var y1,oL;function Vm(){if(oL)return y1;oL=1;var e=ba(),t=kV(),n=TV();function r(i,s){return n(t(i,s,e),i+"")}return y1=r,y1}var v1,aL;function NV(){if(aL)return v1;aL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return v1=e,v1}var b1,lL;function Aue(){if(lL)return b1;lL=1;function e(t){return t!==t}return b1=e,b1}var x1,cL;function Mue(){if(cL)return x1;cL=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return x1=e,x1}var w1,uL;function _ue(){if(uL)return w1;uL=1;var e=NV(),t=Aue(),n=Mue();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return w1=r,w1}var S1,dL;function Due(){if(dL)return S1;dL=1;var e=_ue();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return S1=t,S1}var E1,fL;function Rue(){if(fL)return E1;fL=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return E1=e,E1}var C1,hL;function Oue(){if(hL)return C1;hL=1;function e(){}return C1=e,C1}var k1,pL;function jue(){if(pL)return k1;pL=1;var e=eV(),t=Oue(),n=Hk(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return k1=i,k1}var T1,mL;function Lue(){if(mL)return T1;mL=1;var e=cV(),t=Due(),n=Rue(),r=uV(),i=jue(),s=Hk(),o=200;function l(u,d,h){var p=-1,g=t,y=u.length,x=!0,S=[],w=S;if(h)x=!1,g=n;else if(y>=o){var C=d?null:i(u);if(C)return s(C);x=!1,g=r,w=new e}else w=d?[]:S;e:for(;++p<y;){var N=u[p],k=d?d(N):N;if(N=h||N!==0?N:0,x&&k===k){for(var T=w.length;T--;)if(w[T]===k)continue e;d&&w.push(k),S.push(N)}else g(w,k,h)||(w!==S&&w.push(k),S.push(N))}return S}return T1=l,T1}var N1,gL;function AV(){if(gL)return N1;gL=1;var e=es(),t=yi();function n(r){return t(r)&&e(r)}return N1=n,N1}var A1,yL;function Pue(){if(yL)return A1;yL=1;var e=Uk(),t=Vm(),n=Lue(),r=AV(),i=t(function(s){return n(e(s,1,r,!0))});return A1=i,A1}var M1,vL;function Bue(){if(vL)return M1;vL=1;var e=Im();function t(n,r){return e(r,function(i){return n[i]})}return M1=t,M1}var _1,bL;function MV(){if(bL)return _1;bL=1;var e=Bue(),t=no();function n(r){return r==null?[]:e(r,t(r))}return _1=n,_1}var D1,xL;function Lr(){if(xL)return D1;xL=1;var e;if(typeof Mk=="function")try{e={clone:Uce(),constant:zk(),each:lV(),filter:bV(),has:xV(),isArray:Gt(),isEmpty:pue(),isFunction:kd(),isUndefined:wV(),keys:no(),map:EV(),reduce:CV(),size:Sue(),transform:Eue(),union:Pue(),values:MV()}}catch{}return e||(e=window._),D1=e,D1}var R1,wL;function $k(){if(wL)return R1;wL=1;var e=Lr();R1=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var g=arguments,y=this;return e.each(h,function(x){g.length>1?y.setNode(x,p):y.setNode(x)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var g=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(y){p.setParent(y)}),delete this._children[h]),e.each(e.keys(this._in[h]),g),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),g),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var y={};function x(S){var w=g.parent(S);return w===void 0||p.hasNode(w)?(y[S]=w,w):w in y?y[w]:x(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,x(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var g=this,y=arguments;return e.reduce(h,function(x,S){return y.length>1?g.setEdge(x,S,p):g.setEdge(x,S),S}),this},i.prototype.setEdge=function(){var h,p,g,y,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,g=S.name,arguments.length===2&&(y=arguments[1],x=!0)):(h=S,p=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],x=!0)),h=""+h,p=""+p,e.isUndefined(g)||(g=""+g);var w=l(this._isDirected,h,p,g);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=x?y:this._defaultEdgeLabelFn(h,p,g);var C=u(this._isDirected,h,p,g);return h=C.v,p=C.w,Object.freeze(C),this._edgeObjs[w]=C,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=C,this._out[h][w]=C,this._edgeCount++,this},i.prototype.edge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g),x=this._edgeObjs[y];return x&&(h=x.v,p=x.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][y],delete this._out[h][y],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var g=this._in[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.v===p}):y}},i.prototype.outEdges=function(h,p){var g=this._out[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.w===p}):y}},i.prototype.nodeEdges=function(h,p){var g=this.inEdges(h,p);if(g)return g.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}return x+r+S+r+(e.isUndefined(y)?t:y)}function u(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}var C={v:x,w:S};return y&&(C.name=y),C}function d(h,p){return l(h,p.v,p.w,p.name)}return R1}var O1,SL;function Iue(){return SL||(SL=1,O1="2.1.8"),O1}var j1,EL;function zue(){return EL||(EL=1,j1={Graph:$k(),version:Iue()}),j1}var L1,CL;function que(){if(CL)return L1;CL=1;var e=Lr(),t=$k();L1={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return L1}var P1,kL;function Vue(){if(kL)return P1;kL=1;var e=Lr();P1=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return P1}var B1,TL;function _V(){if(TL)return B1;TL=1;var e=Lr();B1=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},B1}var I1,NL;function DV(){if(NL)return I1;NL=1;var e=Lr(),t=_V();I1=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,g,y=function(x){var S=x.v!==p?x.v:x.w,w=d[S],C=l(x),N=g.distance+C;if(C<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+C);N<w.distance&&(w.distance=N,w.predecessor=p,h.decrease(S,N))};for(s.nodes().forEach(function(x){var S=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:S},h.add(x,S)});h.size()>0&&(p=h.removeMin(),g=d[p],g.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(y);return d}return I1}var z1,AL;function Hue(){if(AL)return z1;AL=1;var e=DV(),t=Lr();z1=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return z1}var q1,ML;function RV(){if(ML)return q1;ML=1;var e=Lr();q1=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(d.lowlink=Math.min(d.lowlink,s[g].index)):(l(g),d.lowlink=Math.min(d.lowlink,s[g].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return q1}var V1,_L;function Fue(){if(_L)return V1;_L=1;var e=Lr(),t=RV();V1=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return V1}var H1,DL;function Uue(){if(DL)return H1;DL=1;var e=Lr();H1=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,g=s(h);l[d][p]={distance:g,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var g=l[p];u.forEach(function(y){var x=g[d],S=h[y],w=g[y],C=x.distance+S.distance;C<w.distance&&(w.distance=C,w.predecessor=S.predecessor)})})}),l}return H1}var F1,RL;function OV(){if(RL)return F1;RL=1;var e=Lr();F1=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,F1}var U1,OL;function $ue(){if(OL)return U1;OL=1;var e=OV();U1=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return U1}var $1,jL;function jV(){if(jL)return $1;jL=1;var e=Lr();$1=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return $1}var G1,LL;function Gue(){if(LL)return G1;LL=1;var e=jV();G1=t;function t(n,r){return e(n,r,"post")}return G1}var K1,PL;function Kue(){if(PL)return K1;PL=1;var e=jV();K1=t;function t(n,r){return e(n,r,"pre")}return K1}var Y1,BL;function Yue(){if(BL)return Y1;BL=1;var e=Lr(),t=$k(),n=_V();Y1=r;function r(i,s){var o=new t,l={},u=new n,d;function h(g){var y=g.v===d?g.w:g.v,x=u.priority(y);if(x!==void 0){var S=s(g);S<x&&(l[y]=d,u.decrease(y,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return Y1}var W1,IL;function Wue(){return IL||(IL=1,W1={components:Vue(),dijkstra:DV(),dijkstraAll:Hue(),findCycles:Fue(),floydWarshall:Uue(),isAcyclic:$ue(),postorder:Gue(),preorder:Kue(),prim:Yue(),tarjan:RV(),topsort:OV()}),W1}var X1,zL;function Xue(){if(zL)return X1;zL=1;var e=zue();return X1={Graph:e.Graph,json:que(),alg:Wue(),version:e.version},X1}var Z1,qL;function Gr(){if(qL)return Z1;qL=1;var e;if(typeof Mk=="function")try{e=Xue()}catch{}return e||(e=window.graphlib),Z1=e,Z1}var Q1,VL;function Zue(){if(VL)return Q1;VL=1;var e=sV(),t=1,n=4;function r(i){return e(i,t|n)}return Q1=r,Q1}var J1,HL;function Hm(){if(HL)return J1;HL=1;var e=Gl(),t=es(),n=Om(),r=jr();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return J1=i,J1}var ew,FL;function Que(){if(FL)return ew;FL=1;var e=Vm(),t=Gl(),n=Hm(),r=va(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var g=u[d],y=r(g),x=-1,S=y.length;++x<S;){var w=y[x],C=l[w];(C===void 0||t(C,i[w])&&!s.call(l,w))&&(l[w]=g[w])}return l});return ew=o,ew}var tw,UL;function Jue(){if(UL)return tw;UL=1;var e=ts(),t=es(),n=no();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return tw=r,tw}var nw,$L;function ede(){if($L)return nw;$L=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return nw=t,nw}var rw,GL;function tde(){if(GL)return rw;GL=1;var e=ede(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return rw=n,rw}var iw,KL;function nde(){if(KL)return iw;KL=1;var e=tde(),t=jr(),n=Xl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return iw=u,iw}var sw,YL;function LV(){if(YL)return sw;YL=1;var e=nde(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return sw=r,sw}var ow,WL;function rde(){if(WL)return ow;WL=1;var e=LV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return ow=t,ow}var aw,XL;function ide(){if(XL)return aw;XL=1;var e=NV(),t=ts(),n=rde(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return aw=i,aw}var lw,ZL;function sde(){if(ZL)return lw;ZL=1;var e=Jue(),t=ide(),n=e(t);return lw=n,lw}var cw,QL;function PV(){if(QL)return cw;QL=1;var e=Uk();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return cw=t,cw}var uw,JL;function ode(){if(JL)return uw;JL=1;var e=qk(),t=oV(),n=va();function r(i,s){return i==null?i:e(i,t(s),n)}return uw=r,uw}var dw,e4;function ade(){if(e4)return dw;e4=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return dw=e,dw}var fw,t4;function lde(){if(t4)return fw;t4=1;var e=Dm(),t=Vk(),n=ts();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return fw=r,fw}var hw,n4;function Gk(){if(n4)return hw;n4=1;var e=Xl();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return hw=t,hw}var pw,r4;function cde(){if(r4)return pw;r4=1;function e(t,n){return t>n}return pw=e,pw}var mw,i4;function ude(){if(i4)return mw;i4=1;var e=Gk(),t=cde(),n=ba();function r(i){return i&&i.length?e(i,n,t):void 0}return mw=r,mw}var gw,s4;function BV(){if(s4)return gw;s4=1;var e=Dm(),t=Gl();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return gw=n,gw}var yw,o4;function dde(){if(o4)return yw;o4=1;var e=ga(),t=Pm(),n=yi(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return yw=d,yw}var vw,a4;function IV(){if(a4)return vw;a4=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return vw=e,vw}var bw,l4;function fde(){if(l4)return bw;l4=1;var e=Td(),t=va();function n(r){return e(r,t(r))}return bw=n,bw}var xw,c4;function hde(){if(c4)return xw;c4=1;var e=BV(),t=Kq(),n=nV(),r=Yq(),i=iV(),s=Nd(),o=Gt(),l=AV(),u=Yl(),d=kd(),h=jr(),p=dde(),g=Ad(),y=IV(),x=fde();function S(w,C,N,k,T,A,_){var D=y(w,N),R=y(C,N),B=_.get(R);if(B){e(w,N,B);return}var U=A?A(D,R,N+"",w,C,_):void 0,z=U===void 0;if(z){var V=o(R),Y=!V&&u(R),I=!V&&!Y&&g(R);U=R,V||Y||I?o(D)?U=D:l(D)?U=r(D):Y?(z=!1,U=t(R,!0)):I?(z=!1,U=n(R,!0)):U=[]:p(R)||s(R)?(U=D,s(D)?U=x(D):(!h(D)||d(D))&&(U=i(R))):z=!1}z&&(_.set(R,U),T(U,R,k,A,_),_.delete(R)),e(w,N,U)}return xw=S,xw}var ww,u4;function pde(){if(u4)return ww;u4=1;var e=_m(),t=BV(),n=qk(),r=hde(),i=jr(),s=va(),o=IV();function l(u,d,h,p,g){u!==d&&n(d,function(y,x){if(g||(g=new e),i(y))r(u,d,x,h,l,p,g);else{var S=p?p(o(u,x),y,x+"",u,d,g):void 0;S===void 0&&(S=y),t(u,x,S)}},s)}return ww=l,ww}var Sw,d4;function mde(){if(d4)return Sw;d4=1;var e=Vm(),t=Hm();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return Sw=n,Sw}var Ew,f4;function gde(){if(f4)return Ew;f4=1;var e=pde(),t=mde(),n=t(function(r,i,s){e(r,i,s)});return Ew=n,Ew}var Cw,h4;function zV(){if(h4)return Cw;h4=1;function e(t,n){return t<n}return Cw=e,Cw}var kw,p4;function yde(){if(p4)return kw;p4=1;var e=Gk(),t=zV(),n=ba();function r(i){return i&&i.length?e(i,n,t):void 0}return kw=r,kw}var Tw,m4;function vde(){if(m4)return Tw;m4=1;var e=Gk(),t=ts(),n=zV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return Tw=r,Tw}var Nw,g4;function bde(){if(g4)return Nw;g4=1;var e=Yr(),t=function(){return e.Date.now()};return Nw=t,Nw}var Aw,y4;function xde(){if(y4)return Aw;y4=1;var e=Rm(),t=zm(),n=Om(),r=jr(),i=Md();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,g=p-1,y=o;y!=null&&++h<p;){var x=i(l[h]),S=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(h!=g){var w=y[x];S=d?d(w,x,y):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(y,x,S),y=y[x]}return o}return Aw=s,Aw}var Mw,v4;function wde(){if(v4)return Mw;v4=1;var e=qm(),t=xde(),n=zm();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return Mw=r,Mw}var _w,b4;function Sde(){if(b4)return _w;b4=1;var e=wde(),t=yV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return _w=n,_w}var Dw,x4;function Ede(){if(x4)return Dw;x4=1;var e=PV(),t=kV(),n=TV();function r(i){return n(t(i,void 0,e),i+"")}return Dw=r,Dw}var Rw,w4;function Cde(){if(w4)return Rw;w4=1;var e=Sde(),t=Ede(),n=t(function(r,i){return r==null?{}:e(r,i)});return Rw=n,Rw}var Ow,S4;function kde(){if(S4)return Ow;S4=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return Ow=n,Ow}var jw,E4;function Tde(){if(E4)return jw;E4=1;var e=kde(),t=Hm(),n=LV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return jw=r,jw}var Lw,C4;function Nde(){if(C4)return Lw;C4=1;var e=Tde(),t=e();return Lw=t,Lw}var Pw,k4;function Ade(){if(k4)return Pw;k4=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Pw=e,Pw}var Bw,T4;function Mde(){if(T4)return Bw;T4=1;var e=Xl();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return Bw=t,Bw}var Iw,N4;function _de(){if(N4)return Iw;N4=1;var e=Mde();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return Iw=t,Iw}var zw,A4;function Dde(){if(A4)return zw;A4=1;var e=Im(),t=qm(),n=ts(),r=SV(),i=Ade(),s=jm(),o=_de(),l=ba(),u=Gt();function d(h,p,g){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var y=-1;p=e(p,s(n));var x=r(h,function(S,w,C){var N=e(p,function(k){return k(S)});return{criteria:N,index:++y,value:S}});return i(x,function(S,w){return o(S,w,g)})}return zw=d,zw}var qw,M4;function Rde(){if(M4)return qw;M4=1;var e=Uk(),t=Dde(),n=Vm(),r=Hm(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return qw=i,qw}var Vw,_4;function Ode(){if(_4)return Vw;_4=1;var e=mV(),t=0;function n(r){var i=++t;return e(r)+i}return Vw=n,Vw}var Hw,D4;function jde(){if(D4)return Hw;D4=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return Hw=e,Hw}var Fw,R4;function Lde(){if(R4)return Fw;R4=1;var e=Rm(),t=jde();function n(r,i){return t(r||[],i||[],e)}return Fw=n,Fw}var Uw,O4;function bt(){if(O4)return Uw;O4=1;var e;if(typeof Mk=="function")try{e={cloneDeep:Zue(),constant:zk(),defaults:Que(),each:lV(),filter:bV(),find:sde(),flatten:PV(),forEach:aV(),forIn:ode(),has:xV(),isUndefined:wV(),last:ade(),map:EV(),mapValues:lde(),max:ude(),merge:gde(),min:yde(),minBy:vde(),now:bde(),pick:Cde(),range:Nde(),reduce:CV(),sortBy:Rde(),uniqueId:Ode(),values:MV(),zipObject:Lde()}}catch{}return e||(e=window._),Uw=e,Uw}var $w,j4;function Pde(){if(j4)return $w;j4=1,$w=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return $w}var Gw,L4;function Bde(){if(L4)return Gw;L4=1;var e=bt(),t=Gr().Graph,n=Pde();Gw=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(y){return d.outEdges(y.v,y.w)}),!0)}function s(d,h,p){for(var g=[],y=h[h.length-1],x=h[0],S;d.nodeCount();){for(;S=x.dequeue();)o(d,h,p,S);for(;S=y.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){g=g.concat(o(d,h,p,S,!0));break}}}return g}function o(d,h,p,g,y){var x=y?[]:void 0;return e.forEach(d.inEdges(g.v),function(S){var w=d.edge(S),C=d.node(S.v);y&&x.push({v:S.v,w:S.w}),C.out-=w,u(h,p,C)}),e.forEach(d.outEdges(g.v),function(S){var w=d.edge(S),C=S.w,N=d.node(C);N.in-=w,u(h,p,N)}),d.removeNode(g.v),x}function l(d,h){var p=new t,g=0,y=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var C=p.edge(w.v,w.w)||0,N=h(w),k=C+N;p.setEdge(w.v,w.w,k),y=Math.max(y,p.node(w.v).out+=N),g=Math.max(g,p.node(w.w).in+=N)});var x=e.range(y+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(w){u(x,S,p.node(w))}),{graph:p,buckets:x,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return Gw}var Kw,P4;function Ide(){if(P4)return Kw;P4=1;var e=bt(),t=Bde();Kw={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return Kw}var Yw,B4;function Gn(){if(B4)return Yw;B4=1;var e=bt(),t=Gr().Graph;Yw={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:g,partition:y,time:x,notime:S};function n(w,C,N,k){var T;do T=e.uniqueId(k);while(w.hasNode(T));return N.dummy=C,w.setNode(T,N),T}function r(w){var C=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(N){C.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){var k=C.edge(N.v,N.w)||{weight:0,minlen:1},T=w.edge(N);C.setEdge(N.v,N.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),C}function i(w){var C=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(N){w.children(N).length||C.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){C.setEdge(N,w.edge(N))}),C}function s(w){var C=e.map(w.nodes(),function(N){var k={};return e.forEach(w.outEdges(N),function(T){k[T.w]=(k[T.w]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),C)}function o(w){var C=e.map(w.nodes(),function(N){var k={};return e.forEach(w.inEdges(N),function(T){k[T.v]=(k[T.v]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),C)}function l(w,C){var N=w.x,k=w.y,T=C.x-N,A=C.y-k,_=w.width/2,D=w.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,B;return Math.abs(A)*_>Math.abs(T)*D?(A<0&&(D=-D),R=D*T/A,B=D):(T<0&&(_=-_),R=_,B=_*A/T),{x:N+R,y:k+B}}function u(w){var C=e.map(e.range(g(w)+1),function(){return[]});return e.forEach(w.nodes(),function(N){var k=w.node(N),T=k.rank;e.isUndefined(T)||(C[T][k.order]=N)}),C}function d(w){var C=e.min(e.map(w.nodes(),function(N){return w.node(N).rank}));e.forEach(w.nodes(),function(N){var k=w.node(N);e.has(k,"rank")&&(k.rank-=C)})}function h(w){var C=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),N=[];e.forEach(w.nodes(),function(A){var _=w.node(A).rank-C;N[_]||(N[_]=[]),N[_].push(A)});var k=0,T=w.graph().nodeRankFactor;e.forEach(N,function(A,_){e.isUndefined(A)&&_%T!==0?--k:k&&e.forEach(A,function(D){w.node(D).rank+=k})})}function p(w,C,N,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=N,T.order=k),n(w,"border",T,C)}function g(w){return e.max(e.map(w.nodes(),function(C){var N=w.node(C).rank;if(!e.isUndefined(N))return N}))}function y(w,C){var N={lhs:[],rhs:[]};return e.forEach(w,function(k){C(k)?N.lhs.push(k):N.rhs.push(k)}),N}function x(w,C){var N=e.now();try{return C()}finally{console.log(w+" time: "+(e.now()-N)+"ms")}}function S(w,C){return C()}return Yw}var Ww,I4;function zde(){if(I4)return Ww;I4=1;var e=bt(),t=Gn();Ww={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,g=s.edge(o),y=g.labelRank;if(h!==u+1){s.removeEdge(o);var x,S,w;for(w=0,++u;u<h;++w,++u)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},x=t.addDummyNode(s,"edge",S,"_d"),u===y&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,x,{weight:g.weight},p),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return Ww}var Xw,z4;function zp(){if(z4)return Xw;z4=1;var e=bt();Xw={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Xw}var Zw,q4;function qV(){if(q4)return Zw;q4=1;var e=bt(),t=Gr().Graph,n=zp().slack;Zw=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,g;i(u,l)<h;)p=s(u,l),g=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,g);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var g=p.v,y=h===g?p.w:g;!l.hasNode(y)&&!n(u,p)&&(l.setNode(y,{}),l.setEdge(h,y,{}),d(y))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return Zw}var Qw,V4;function qde(){if(V4)return Qw;V4=1;var e=bt(),t=qV(),n=zp().slack,r=zp().longestPath,i=Gr().alg.preorder,s=Gr().alg.postorder,o=Gn().simplify;Qw=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=y,l.enterEdge=x,l.exchangeEdges=S;function l(k){k=o(k),r(k);var T=t(k);p(T),u(T,k);for(var A,_;A=y(T);)_=x(T,k,A),S(T,k,A,_)}function u(k,T){var A=s(k,k.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(_){d(k,T,_)})}function d(k,T,A){var _=k.node(A),D=_.parent;k.edge(A,D).cutvalue=h(k,T,A)}function h(k,T,A){var _=k.node(A),D=_.parent,R=!0,B=T.edge(A,D),U=0;return B||(R=!1,B=T.edge(D,A)),U=B.weight,e.forEach(T.nodeEdges(A),function(z){var V=z.v===A,Y=V?z.w:z.v;if(Y!==D){var I=V===R,$=T.edge(z).weight;if(U+=I?$:-$,C(k,A,Y)){var L=k.edge(A,Y).cutvalue;U+=I?-L:L}}}),U}function p(k,T){arguments.length<2&&(T=k.nodes()[0]),g(k,{},1,T)}function g(k,T,A,_,D){var R=A,B=k.node(_);return T[_]=!0,e.forEach(k.neighbors(_),function(U){e.has(T,U)||(A=g(k,T,A,U,_))}),B.low=R,B.lim=A++,D?B.parent=D:delete B.parent,A}function y(k){return e.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function x(k,T,A){var _=A.v,D=A.w;T.hasEdge(_,D)||(_=A.w,D=A.v);var R=k.node(_),B=k.node(D),U=R,z=!1;R.lim>B.lim&&(U=B,z=!0);var V=e.filter(T.edges(),function(Y){return z===N(k,k.node(Y.v),U)&&z!==N(k,k.node(Y.w),U)});return e.minBy(V,function(Y){return n(T,Y)})}function S(k,T,A,_){var D=A.v,R=A.w;k.removeEdge(D,R),k.setEdge(_.v,_.w,{}),p(k),u(k,T),w(k,T)}function w(k,T){var A=e.find(k.nodes(),function(D){return!T.node(D).parent}),_=i(k,A);_=_.slice(1),e.forEach(_,function(D){var R=k.node(D).parent,B=T.edge(D,R),U=!1;B||(B=T.edge(R,D),U=!0),T.node(D).rank=T.node(R).rank+(U?B.minlen:-B.minlen)})}function C(k,T,A){return k.hasEdge(T,A)}function N(k,T,A){return A.low<=T.lim&&T.lim<=A.lim}return Qw}var Jw,H4;function Vde(){if(H4)return Jw;H4=1;var e=zp(),t=e.longestPath,n=qV(),r=qde();Jw=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return Jw}var eS,F4;function Hde(){if(F4)return eS;F4=1;var e=bt();eS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,g=0,y=h[g],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(y=h[g])!==p&&i.node(y).maxRank<l.rank;)g++;y===p&&(x=!1)}if(!x){for(;g<h.length-1&&i.node(y=h[g+1]).minRank<=l.rank;)g++;y=h[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,y;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>h||p>s[g].lim));for(y=g,g=l;(g=i.parent(g))!==y;)d.push(g);return{path:u.concat(d.reverse()),lca:y}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return eS}var tS,U4;function Fde(){if(U4)return tS;U4=1;var e=bt(),t=Gn();tS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(y){l.edge(y).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(y){r(l,u,p,g,h,d,y)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,g,y){var x=l.children(y);if(!x.length){y!==u&&l.setEdge(u,y,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),C=l.node(y);l.setParent(S,y),C.borderTop=S,l.setParent(w,y),C.borderBottom=w,e.forEach(x,function(N){r(l,u,d,h,p,g,N);var k=l.node(N),T=k.borderTop?k.borderTop:N,A=k.borderBottom?k.borderBottom:N,_=k.borderTop?h:2*h,D=T!==A?1:p-g[y]+1;l.setEdge(S,T,{weight:_,minlen:D,nestingEdge:!0}),l.setEdge(A,w,{weight:_,minlen:D,nestingEdge:!0})}),l.parent(y)||l.setEdge(u,S,{weight:0,minlen:p+g[y]})}function i(l){var u={};function d(h,p){var g=l.children(h);g&&g.length&&e.forEach(g,function(y){d(y,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return tS}var nS,$4;function Ude(){if($4)return nS;$4=1;var e=bt(),t=Gn();nS=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],g=t.addDummyNode(i,"border",h,o);u[s][d]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return nS}var rS,G4;function $de(){if(G4)return rS;G4=1;var e=bt();rS={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return rS}var iS,K4;function Gde(){if(K4)return iS;K4=1;var e=bt();iS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return iS}var sS,Y4;function Kde(){if(Y4)return sS;Y4=1;var e=bt();sS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var y=g.pos+u;h[y]+=g.weight;for(var x=0;y>0;)y%2&&(x+=h[y+1]),y=y-1>>1,h[y]+=g.weight;p+=g.weight*x})),p}return sS}var oS,W4;function Yde(){if(W4)return oS;W4=1;var e=bt();oS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return oS}var aS,X4;function Wde(){if(X4)return aS;X4=1;var e=bt();aS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return aS}var lS,Z4;function Xde(){if(Z4)return lS;Z4=1;var e=bt(),t=Gn();lS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,g=0,y=0;u.sort(i(!!o)),y=r(h,d,y),e.forEach(u,function(S){y+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,y=r(h,d,y)});var x={vs:e.flatten(h,!0)};return g&&(x.barycenter=p/g,x.weight=g),x}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return lS}var cS,Q4;function Zde(){if(Q4)return cS;Q4=1;var e=bt(),t=Yde(),n=Wde(),r=Xde();cS=i;function i(l,u,d,h){var p=l.children(u),g=l.node(u),y=g?g.borderLeft:void 0,x=g?g.borderRight:void 0,S={};y&&(p=e.filter(p,function(A){return A!==y&&A!==x}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,h);S[A.v]=_,e.has(_,"barycenter")&&o(A,_)}});var C=n(w,d);s(C,S);var N=r(C,h);if(y&&(N.vs=e.flatten([y,N.vs,x],!0),l.predecessors(y).length)){var k=l.node(l.predecessors(y)[0]),T=l.node(l.predecessors(x)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+k.order+T.order)/(N.weight+2),N.weight+=2}return N}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return cS}var uS,J4;function Qde(){if(J4)return uS;J4=1;var e=bt(),t=Gr().Graph;uS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(g){var y=g.v===d?g.w:g.v,x=u.edge(y,d),S=e.isUndefined(x)?0:x.weight;u.setEdge(y,d,{weight:i.edge(g).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return uS}var dS,eP;function Jde(){if(eP)return dS;eP=1;var e=bt();dS=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return dS}var fS,tP;function efe(){if(tP)return fS;tP=1;var e=bt(),t=Gde(),n=Kde(),r=Zde(),i=Qde(),s=Jde(),o=Gr().Graph,l=Gn();fS=u;function u(g){var y=l.maxRank(g),x=d(g,e.range(1,y+1),"inEdges"),S=d(g,e.range(y-1,-1,-1),"outEdges"),w=t(g);p(g,w);for(var C=Number.POSITIVE_INFINITY,N,k=0,T=0;T<4;++k,++T){h(k%2?x:S,k%4>=2),w=l.buildLayerMatrix(g);var A=n(g,w);A<C&&(T=0,N=e.cloneDeep(w),C=A)}p(g,N)}function d(g,y,x){return e.map(y,function(S){return i(g,S,x)})}function h(g,y){var x=new o;e.forEach(g,function(S){var w=S.graph().root,C=r(S,w,x,y);e.forEach(C.vs,function(N,k){S.node(N).order=k}),s(S,x,C.vs)})}function p(g,y){e.forEach(y,function(x){e.forEach(x,function(S,w){g.node(S).order=w})})}return fS}var hS,nP;function tfe(){if(nP)return hS;nP=1;var e=bt(),t=Gr().Graph,n=Gn();hS={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:y};function r(C,N){var k={};function T(A,_){var D=0,R=0,B=A.length,U=e.last(_);return e.forEach(_,function(z,V){var Y=s(C,z),I=Y?C.node(Y).order:B;(Y||z===U)&&(e.forEach(_.slice(R,V+1),function($){e.forEach(C.predecessors($),function(L){var q=C.node(L),X=q.order;(X<D||I<X)&&!(q.dummy&&C.node($).dummy)&&o(k,L,$)})}),R=V+1,D=I)}),_}return e.reduce(N,T),k}function i(C,N){var k={};function T(_,D,R,B,U){var z;e.forEach(e.range(D,R),function(V){z=_[V],C.node(z).dummy&&e.forEach(C.predecessors(z),function(Y){var I=C.node(Y);I.dummy&&(I.order<B||I.order>U)&&o(k,Y,z)})})}function A(_,D){var R=-1,B,U=0;return e.forEach(D,function(z,V){if(C.node(z).dummy==="border"){var Y=C.predecessors(z);Y.length&&(B=C.node(Y[0]).order,T(D,U,V,R,B),U=V,R=B)}T(D,U,D.length,B,_.length)}),D}return e.reduce(N,A),k}function s(C,N){if(C.node(N).dummy)return e.find(C.predecessors(N),function(k){return C.node(k).dummy})}function o(C,N,k){if(N>k){var T=N;N=k,k=T}var A=C[N];A||(C[N]=A={}),A[k]=!0}function l(C,N,k){if(N>k){var T=N;N=k,k=T}return e.has(C[N],k)}function u(C,N,k,T){var A={},_={},D={};return e.forEach(N,function(R){e.forEach(R,function(B,U){A[B]=B,_[B]=B,D[B]=U})}),e.forEach(N,function(R){var B=-1;e.forEach(R,function(U){var z=T(U);if(z.length){z=e.sortBy(z,function(L){return D[L]});for(var V=(z.length-1)/2,Y=Math.floor(V),I=Math.ceil(V);Y<=I;++Y){var $=z[Y];_[U]===U&&B<D[$]&&!l(k,U,$)&&(_[$]=U,_[U]=A[U]=A[$],B=D[$])}}})}),{root:A,align:_}}function d(C,N,k,T,A){var _={},D=h(C,N,k,A),R=A?"borderLeft":"borderRight";function B(V,Y){for(var I=D.nodes(),$=I.pop(),L={};$;)L[$]?V($):(L[$]=!0,I.push($),I=I.concat(Y($))),$=I.pop()}function U(V){_[V]=D.inEdges(V).reduce(function(Y,I){return Math.max(Y,_[I.v]+D.edge(I))},0)}function z(V){var Y=D.outEdges(V).reduce(function($,L){return Math.min($,_[L.w]-D.edge(L))},Number.POSITIVE_INFINITY),I=C.node(V);Y!==Number.POSITIVE_INFINITY&&I.borderType!==R&&(_[V]=Math.max(_[V],Y))}return B(U,D.predecessors.bind(D)),B(z,D.successors.bind(D)),e.forEach(T,function(V){_[V]=_[k[V]]}),_}function h(C,N,k,T){var A=new t,_=C.graph(),D=S(_.nodesep,_.edgesep,T);return e.forEach(N,function(R){var B;e.forEach(R,function(U){var z=k[U];if(A.setNode(z),B){var V=k[B],Y=A.edge(V,z);A.setEdge(V,z,Math.max(D(C,U,B),Y||0))}B=U})}),A}function p(C,N){return e.minBy(e.values(N),function(k){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(k,function(_,D){var R=w(C,D)/2;T=Math.max(_+R,T),A=Math.min(_-R,A)}),T-A})}function g(C,N){var k=e.values(N),T=e.min(k),A=e.max(k);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(D){var R=_+D,B=C[R],U;if(B!==N){var z=e.values(B);U=D==="l"?T-e.min(z):A-e.max(z),U&&(C[R]=e.mapValues(B,function(V){return V+U}))}})})}function y(C,N){return e.mapValues(C.ul,function(k,T){if(N)return C[N.toLowerCase()][T];var A=e.sortBy(e.map(C,T));return(A[1]+A[2])/2})}function x(C){var N=n.buildLayerMatrix(C),k=e.merge(r(C,N),i(C,N)),T={},A;e.forEach(["u","d"],function(D){A=D==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(A=e.map(A,function(V){return e.values(V).reverse()}));var B=(D==="u"?C.predecessors:C.successors).bind(C),U=u(C,A,k,B),z=d(C,A,U.root,U.align,R==="r");R==="r"&&(z=e.mapValues(z,function(V){return-V})),T[D+R]=z})});var _=p(C,T);return g(T,_),y(T,C.graph().align)}function S(C,N,k){return function(T,A,_){var D=T.node(A),R=T.node(_),B=0,U;if(B+=D.width/2,e.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":U=-D.width/2;break;case"r":U=D.width/2;break}if(U&&(B+=k?U:-U),U=0,B+=(D.dummy?N:C)/2,B+=(R.dummy?N:C)/2,B+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":U=R.width/2;break;case"r":U=-R.width/2;break}return U&&(B+=k?U:-U),U=0,B}}function w(C,N){return C.node(N).width}return hS}var pS,rP;function nfe(){if(rP)return pS;rP=1;var e=bt(),t=Gn(),n=tfe().positionX;pS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return pS}var mS,iP;function rfe(){if(iP)return mS;iP=1;var e=bt(),t=Ide(),n=zde(),r=Vde(),i=Gn().normalizeRanks,s=Hde(),o=Gn().removeEmptyRanks,l=Fde(),u=Ude(),d=$de(),h=efe(),p=nfe(),g=Gn(),y=Gr().Graph;mS=x;function x(H,W){var Z=W&&W.debugTiming?g.time:g.notime;Z("layout",function(){var ce=Z("  buildLayoutGraph",function(){return B(H)});Z("  runLayout",function(){S(ce,Z)}),Z("  updateInputGraph",function(){w(H,ce)})})}function S(H,W){W("    makeSpaceForEdgeLabels",function(){U(H)}),W("    removeSelfEdges",function(){J(H)}),W("    acyclic",function(){t.run(H)}),W("    nestingGraph.run",function(){l.run(H)}),W("    rank",function(){r(g.asNonCompoundGraph(H))}),W("    injectEdgeLabelProxies",function(){z(H)}),W("    removeEmptyRanks",function(){o(H)}),W("    nestingGraph.cleanup",function(){l.cleanup(H)}),W("    normalizeRanks",function(){i(H)}),W("    assignRankMinMax",function(){V(H)}),W("    removeEdgeLabelProxies",function(){Y(H)}),W("    normalize.run",function(){n.run(H)}),W("    parentDummyChains",function(){s(H)}),W("    addBorderSegments",function(){u(H)}),W("    order",function(){h(H)}),W("    insertSelfEdges",function(){P(H)}),W("    adjustCoordinateSystem",function(){d.adjust(H)}),W("    position",function(){p(H)}),W("    positionSelfEdges",function(){G(H)}),W("    removeBorderNodes",function(){X(H)}),W("    normalize.undo",function(){n.undo(H)}),W("    fixupEdgeLabelCoords",function(){L(H)}),W("    undoCoordinateSystem",function(){d.undo(H)}),W("    translateGraph",function(){I(H)}),W("    assignNodeIntersects",function(){$(H)}),W("    reversePoints",function(){q(H)}),W("    acyclic.undo",function(){t.undo(H)})}function w(H,W){e.forEach(H.nodes(),function(Z){var ce=H.node(Z),le=W.node(Z);ce&&(ce.x=le.x,ce.y=le.y,W.children(Z).length&&(ce.width=le.width,ce.height=le.height))}),e.forEach(H.edges(),function(Z){var ce=H.edge(Z),le=W.edge(Z);ce.points=le.points,e.has(le,"x")&&(ce.x=le.x,ce.y=le.y)}),H.graph().width=W.graph().width,H.graph().height=W.graph().height}var C=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],D={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function B(H){var W=new y({multigraph:!0,compound:!0}),Z=se(H.graph());return W.setGraph(e.merge({},N,ee(Z,C),e.pick(Z,k))),e.forEach(H.nodes(),function(ce){var le=se(H.node(ce));W.setNode(ce,e.defaults(ee(le,T),A)),W.setParent(ce,H.parent(ce))}),e.forEach(H.edges(),function(ce){var le=se(H.edge(ce));W.setEdge(ce,e.merge({},D,ee(le,_),e.pick(le,R)))}),W}function U(H){var W=H.graph();W.ranksep/=2,e.forEach(H.edges(),function(Z){var ce=H.edge(Z);ce.minlen*=2,ce.labelpos.toLowerCase()!=="c"&&(W.rankdir==="TB"||W.rankdir==="BT"?ce.width+=ce.labeloffset:ce.height+=ce.labeloffset)})}function z(H){e.forEach(H.edges(),function(W){var Z=H.edge(W);if(Z.width&&Z.height){var ce=H.node(W.v),le=H.node(W.w),ge={rank:(le.rank-ce.rank)/2+ce.rank,e:W};g.addDummyNode(H,"edge-proxy",ge,"_ep")}})}function V(H){var W=0;e.forEach(H.nodes(),function(Z){var ce=H.node(Z);ce.borderTop&&(ce.minRank=H.node(ce.borderTop).rank,ce.maxRank=H.node(ce.borderBottom).rank,W=e.max(W,ce.maxRank))}),H.graph().maxRank=W}function Y(H){e.forEach(H.nodes(),function(W){var Z=H.node(W);Z.dummy==="edge-proxy"&&(H.edge(Z.e).labelRank=Z.rank,H.removeNode(W))})}function I(H){var W=Number.POSITIVE_INFINITY,Z=0,ce=Number.POSITIVE_INFINITY,le=0,ge=H.graph(),we=ge.marginx||0,_e=ge.marginy||0;function ke(Ee){var xe=Ee.x,Te=Ee.y,et=Ee.width,Ae=Ee.height;W=Math.min(W,xe-et/2),Z=Math.max(Z,xe+et/2),ce=Math.min(ce,Te-Ae/2),le=Math.max(le,Te+Ae/2)}e.forEach(H.nodes(),function(Ee){ke(H.node(Ee))}),e.forEach(H.edges(),function(Ee){var xe=H.edge(Ee);e.has(xe,"x")&&ke(xe)}),W-=we,ce-=_e,e.forEach(H.nodes(),function(Ee){var xe=H.node(Ee);xe.x-=W,xe.y-=ce}),e.forEach(H.edges(),function(Ee){var xe=H.edge(Ee);e.forEach(xe.points,function(Te){Te.x-=W,Te.y-=ce}),e.has(xe,"x")&&(xe.x-=W),e.has(xe,"y")&&(xe.y-=ce)}),ge.width=Z-W+we,ge.height=le-ce+_e}function $(H){e.forEach(H.edges(),function(W){var Z=H.edge(W),ce=H.node(W.v),le=H.node(W.w),ge,we;Z.points?(ge=Z.points[0],we=Z.points[Z.points.length-1]):(Z.points=[],ge=le,we=ce),Z.points.unshift(g.intersectRect(ce,ge)),Z.points.push(g.intersectRect(le,we))})}function L(H){e.forEach(H.edges(),function(W){var Z=H.edge(W);if(e.has(Z,"x"))switch((Z.labelpos==="l"||Z.labelpos==="r")&&(Z.width-=Z.labeloffset),Z.labelpos){case"l":Z.x-=Z.width/2+Z.labeloffset;break;case"r":Z.x+=Z.width/2+Z.labeloffset;break}})}function q(H){e.forEach(H.edges(),function(W){var Z=H.edge(W);Z.reversed&&Z.points.reverse()})}function X(H){e.forEach(H.nodes(),function(W){if(H.children(W).length){var Z=H.node(W),ce=H.node(Z.borderTop),le=H.node(Z.borderBottom),ge=H.node(e.last(Z.borderLeft)),we=H.node(e.last(Z.borderRight));Z.width=Math.abs(we.x-ge.x),Z.height=Math.abs(le.y-ce.y),Z.x=ge.x+Z.width/2,Z.y=ce.y+Z.height/2}}),e.forEach(H.nodes(),function(W){H.node(W).dummy==="border"&&H.removeNode(W)})}function J(H){e.forEach(H.edges(),function(W){if(W.v===W.w){var Z=H.node(W.v);Z.selfEdges||(Z.selfEdges=[]),Z.selfEdges.push({e:W,label:H.edge(W)}),H.removeEdge(W)}})}function P(H){var W=g.buildLayerMatrix(H);e.forEach(W,function(Z){var ce=0;e.forEach(Z,function(le,ge){var we=H.node(le);we.order=ge+ce,e.forEach(we.selfEdges,function(_e){g.addDummyNode(H,"selfedge",{width:_e.label.width,height:_e.label.height,rank:we.rank,order:ge+ ++ce,e:_e.e,label:_e.label},"_se")}),delete we.selfEdges})})}function G(H){e.forEach(H.nodes(),function(W){var Z=H.node(W);if(Z.dummy==="selfedge"){var ce=H.node(Z.e.v),le=ce.x+ce.width/2,ge=ce.y,we=Z.x-le,_e=ce.height/2;H.setEdge(Z.e,Z.label),H.removeNode(W),Z.label.points=[{x:le+2*we/3,y:ge-_e},{x:le+5*we/6,y:ge-_e},{x:le+we,y:ge},{x:le+5*we/6,y:ge+_e},{x:le+2*we/3,y:ge+_e}],Z.label.x=Z.x,Z.label.y=Z.y}})}function ee(H,W){return e.mapValues(e.pick(H,W),Number)}function se(H){var W={};return e.forEach(H,function(Z,ce){W[ce.toLowerCase()]=Z}),W}return mS}var gS,sP;function ife(){if(sP)return gS;sP=1;var e=bt(),t=Gn(),n=Gr().Graph;gS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return gS}var yS,oP;function sfe(){return oP||(oP=1,yS="0.8.5"),yS}var vS,aP;function ofe(){return aP||(aP=1,vS={graphlib:Gr(),layout:rfe(),debug:ife(),util:{time:Gn().time,notime:Gn().notime},version:sfe()}),vS}var afe=ofe();const fh=od(afe),tu=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]}];function VV(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function lfe(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function cfe(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function ufe(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function dfe({components:e,onAdd:t}){const[n,r]=Pe.useState(!0),[i,s]=Pe.useState(new Set),[o,l]=Pe.useState(null),[u,d]=Pe.useState(""),h=Pe.useMemo(()=>new ha(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Pe.useMemo(()=>{const x=u.trim();if(!x)return Array.from(e);const w=h.search(x).map(k=>k.item),C=e.find(k=>k.id==="custom-component"),N=w.some(k=>k.id==="custom-component");return C&&!N&&w.push(C),w},[e,h,u]),g=Pe.useMemo(()=>{const x=new Map;for(const S of p){const w=S.group??"Other";x.has(w)||x.set(w,[]),x.get(w).push(S)}return Array.from(x.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);Pe.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([x])=>x)))},[g,i.size]);const y=x=>{s(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?v.jsx(lfe,{size:16}):v.jsx(cfe,{size:16})}),v.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),v.jsx("div",{className:"mr-3 mb-3",children:v.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),v.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?v.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([x,S])=>{const w=i.has(x);return v.jsxs("div",{children:[v.jsxs("button",{type:"button",onClick:()=>y(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${x}`,children:[v.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),v.jsx(VV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&v.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:v.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(C=>v.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${C.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();l({label:C.label,description:C.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:N=>{l(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:C.id})),N.dataTransfer?.setData("text/plain",C.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),t(C.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[v.jsx("div",{className:"text-center mb-1",children:v.jsx("span",{className:"text-2xl",children:C.icon})}),v.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:C.label})]},C.id))})})]},x)}),v.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[v.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),v.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:v.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&cP.createPortal(v.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[v.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),v.jsx("div",{className:"text-muted",children:o.description}),v.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const ffe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h})=>v.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:v.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:v.jsxs(Sae,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,connectionMode:aa.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[v.jsx(Wae,{nodeStrokeWidth:3}),v.jsx(Pae,{}),v.jsx(Mae,{gap:16})]})})}),hfe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[g,y]=Pe.useState(320),x=260,S=640,w=Pe.useRef(!1),C=Pe.useRef(null),[N,k]=Pe.useState(!1),T=Pe.useCallback(z=>{if(!w.current)return;const V=Math.min(Math.max(window.innerWidth-z.clientX,x),S);y(V)},[]),A=Pe.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),_=z=>{z.preventDefault(),w.current=!0,document.body.style.userSelect="none"};Pe.useEffect(()=>(globalThis.addEventListener("mousemove",T),globalThis.addEventListener("mouseup",A),()=>{globalThis.removeEventListener("mousemove",T),globalThis.removeEventListener("mouseup",A)}),[T,A]),Pe.useEffect(()=>{C.current&&(C.current.style.width=g+"px")},[g]);const D=e?.id==="free",R=D&&!r;if(Pe.useEffect(()=>{D&&r&&t==="details"&&n("inspector")},[D,r,t,n]),!e||R)return null;const B=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const z=document.createElement("textarea");z.value=JSON.stringify(d,null,2),document.body.appendChild(z),z.select(),document.execCommand("copy"),z.remove()}},U=()=>{if(!d)return;const z=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),V=URL.createObjectURL(z),Y=document.createElement("a");Y.href=V,Y.download=`assessment-${Date.now()}.json`,document.body.appendChild(Y),Y.click(),Y.remove(),URL.revokeObjectURL(V)};return v.jsxs("aside",{ref:C,className:"bg-surface border-l border-theme p-4 flex flex-col h-full relative inspector-resizable","data-width":g,children:[v.jsxs("button",{type:"button",onMouseDown:_,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[v.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),v.jsx(ufe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),v.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!D&&v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),v.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),v.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&v.jsxs("div",{children:[d&&v.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),v.jsxs("div",{className:"text-sm font-semibold text-theme",children:[d.score,"%"]})]}),v.jsx("div",{className:"text-xs text-muted mb-2",children:d.isValid?"Pass":"Needs work"}),v.jsx("div",{className:"space-y-1 text-xs",children:d.feedback.slice(0,3).map(z=>v.jsx("div",{className:"text-sm text-theme",children:z.message},`${z.category}-${z.type}`))}),v.jsxs("div",{className:"mt-3 flex gap-2",children:[v.jsx("button",{type:"button",onClick:B,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),v.jsx("button",{type:"button",onClick:U,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),v.jsxs("div",{className:"mt-3 text-xs",children:[v.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),d.architectureStrengths.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.architectureStrengths.map(z=>v.jsx("li",{children:z},`strength-${z}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),d.improvements.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.improvements.map(z=>v.jsx("li",{children:z},`imp-${z}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),v.jsx("div",{className:"space-y-1",children:d.feedback.map(z=>v.jsxs("div",{className:"text-xs",children:[v.jsx("div",{className:"font-medium",children:z.category.toUpperCase()}),v.jsx("div",{className:"text-muted",children:z.message})]},`${z.category}-${z.type}`))})]})]}),v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),v.jsx("ul",{className:"space-y-1",children:e.requirements.map(z=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:z})]},z))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),v.jsx("ul",{className:"space-y-1",children:e.constraints.map(z=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:z})]},z))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("button",{type:"button",onClick:()=>k(!N),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),v.jsx(VV,{size:14,className:`text-muted transition-transform duration-150 ${N?"rotate-0":"-rotate-90"}`})]}),N&&v.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(z=>v.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:v.jsx("div",{className:"text-xs text-white",children:z})},z))})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(z=>v.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:z},z))})]})]}),t==="inspector"&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&v.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),v.jsx("div",{className:"space-y-2",children:s})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),v.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[v.jsx(Bee,{size:14}),v.jsx("span",{children:"Add"})]})]}),v.jsx("div",{className:"space-y-2",children:o})]}),v.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&v.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[v.jsx("span",{children:""}),v.jsx("span",{children:"Detach from Group"})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),v.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})};async function pfe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),mfe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function mfe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}const HV=Pe.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const i=t.componentName||t.label,s=Pe.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),o=Pe.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),l=Pe.useCallback(d=>{d.stopPropagation(),n?.(e,t)},[e,t,n]),u=Pe.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]);return v.jsxs(vn.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",children:[v.jsx("legend",{className:"sr-only",children:i}),v.jsxs("div",{className:"absolute -top-5 right-1 flex items-center z-10 bg-[var(--surface)]/80 border border-theme rounded-full shadow-sm",children:[v.jsx(vn.button,{type:"button","aria-label":"Settings",onClick:o,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(Vz,{className:"w-2 h-2"})}),r&&v.jsx(vn.button,{type:"button","aria-label":"Detach from Group",onClick:u,className:"p-1 text-orange-500 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Detach from Group",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(cU,{className:"w-2 h-2"})}),v.jsx(vn.button,{type:"button","aria-label":"Copy Node",onClick:l,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Copy Node",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(Iee,{className:"w-2 h-2"})}),v.jsx(vn.button,{type:"button","aria-label":"Delete",onClick:s,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(ck,{className:"w-2 h-2"})})]}),v.jsx(_r,{id:"top",type:"source",position:Ne.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(_r,{id:"right",type:"source",position:Ne.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(_r,{id:"bottom",type:"source",position:Ne.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(_r,{id:"left",type:"source",position:Ne.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[v.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),v.jsxs("div",{className:"min-w-0 w-full text-center",children:[v.jsx("div",{className:"truncate font-medium text-sm",children:i}),t.subtitle&&v.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]})});HV.displayName="Node";const gfe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},yfe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=gfe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,y=p,x=g+d/2;return{edgePath:h,centerX:y,centerY:x}}const[o]=xk(e),[l,u]=wk({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},vfe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:g}=e,[y,x]=j.useState(!1),[S,w]=j.useState(h?.label??""),[C,N]=j.useState(h?.hasLabel??!1),k=j.useRef(null),T=Ze(Y=>{const I=Y.edges.some($=>$.id!==t&&$.source===r&&$.target===n);return I&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),I}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:D,centerY:R}=yfe(A,T),B=Y=>{Y.stopPropagation(),x(!0),setTimeout(()=>k.current?.focus(),0)},U=Y=>{Y.stopPropagation(),N(!0),x(!0),setTimeout(()=>k.current?.focus(),0)},z=Y=>{Y.stopPropagation(),N(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},V=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:C||S.trim().length>0}}))};return v.jsxs("g",{className:"react-flow__edge",children:[v.jsx("defs",{children:v.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:v.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),v.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),v.jsx("foreignObject",{x:D-75,y:R-12,width:150,height:24,className:"overflow-visible",children:v.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:C?v.jsx("div",{className:"flex items-center gap-1",children:y?v.jsx("input",{ref:k,value:S,onChange:Y=>w(Y.target.value),onBlur:V,onKeyDown:Y=>{Y.key==="Enter"&&V(),Y.key==="Escape"&&(x(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onDoubleClick:B,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&v.jsx("button",{onClick:z,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&v.jsx("button",{onClick:U,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},bfe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Pe.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Pe.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return v.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[v.jsx(Jae,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),v.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[v.jsx(vn.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(Vz,{className:"w-3 h-3"})}),v.jsx(vn.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(ck,{className:"w-3 h-3"})})]}),v.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&v.jsx("span",{children:t.icon}),v.jsx("span",{children:t.label})]}),t.subtitle&&v.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),v.jsx(_r,{id:"top",type:"source",position:Ne.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(_r,{id:"right",type:"source",position:Ne.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(_r,{id:"bottom",type:"source",position:Ne.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(_r,{id:"left",type:"source",position:Ne.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},xfe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=j.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return v.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[v.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?v.jsx(Yee,{size:18}):v.jsx(Wee,{size:18}),v.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),v.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:v.jsx(ck,{size:16})})]}),i&&v.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(Sh,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),v.jsx(Sh,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),v.jsx(Uz,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),v.jsxs("div",{className:"border-t border-theme pt-3",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&v.jsx(Sh,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&v.jsx(kp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&v.jsx(Fz,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&v.jsx("div",{className:"pt-1",children:v.jsx(Hz,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},wfe=({isOpen:e,onClose:t,diagrams:n,onLoad:r,onDelete:i,isLoading:s})=>{const[o,l]=j.useState(null),u=async(h,p)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this diagram?")){l(h);try{await i(h)}finally{l(null)}}},d=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?v.jsx(fC,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(vn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-3xl w-full max-h-[80vh] flex flex-col border border-theme/10",onClick:h=>h.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:"My Diagrams"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:s?v.jsx("div",{className:"flex items-center justify-center h-64",children:v.jsx("div",{className:"text-muted",children:"Loading diagrams..."})}):n.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-muted mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),v.jsx("p",{className:"text-muted text-lg mb-2",children:"No diagrams yet"}),v.jsx("p",{className:"text-muted text-sm",children:"Create your first diagram and save it to see it here"})]}):v.jsx("div",{className:"grid gap-3",children:n.map(h=>v.jsx("div",{onClick:()=>{r(h),t()},className:"p-4 bg-theme/5 hover:bg-theme/10 border border-theme/10 rounded-lg cursor-pointer transition-all group",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h3",{className:"font-semibold text-theme truncate group-hover:text-[var(--brand)] transition-colors",children:h.title}),h.description&&v.jsx("p",{className:"text-sm text-muted mt-1 line-clamp-2",children:h.description}),v.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted",children:[v.jsxs("span",{children:[h.nodes.length," node",h.nodes.length!==1?"s":""]}),v.jsxs("span",{children:[h.edges.length," connection",h.edges.length!==1?"s":""]}),v.jsxs("span",{children:["Updated ",d(h.updatedAt)]})]})]}),v.jsx("button",{type:"button",onClick:p=>u(h.id,p),disabled:o===h.id,className:"ml-4 p-2 text-muted hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors disabled:opacity-50","aria-label":"Delete diagram",children:o===h.id?v.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},h.id))})})]})})}):null},Sfe=Pe.memo(e=>{const t=e.data;return v.jsx(HV,{id:e.id,data:t,onCopy:e.onCopy,isInGroup:e.isInGroup})}),Efe=(e,t)=>n=>{const r=t.find(i=>i.id===n.id)?.parentId!==void 0;return v.jsx(Sfe,{...n,onCopy:e,isInGroup:r})},Cfe=()=>{fa();const e=ld(),n=jF()?.id,{screenToFlowPosition:r}=sd(),{user:i,isAuthenticated:s,login:o,signup:l,googleLogin:u,logout:d}=Fp(),p=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[g,y]=j.useState(null),[x,S]=j.useState(!0),[w,C]=j.useState(null),[N,k]=j.useState(!1),[T,A]=j.useState(!1),[_,D]=j.useState([]),[R,B]=j.useState(!1),[U,z]=j.useState(null),[V,Y]=j.useState(!1);j.useEffect(()=>{if(!n){S(!1),C("No problem ID provided");return}if(n==="free"){y({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),S(!1);return}if(n.startsWith("custom-")){const ne=localStorage.getItem(`custom-problem-${n}`);if(ne){y(JSON.parse(ne)),S(!1);return}}(async()=>{try{S(!0),C(null);const he=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!he.ok)throw new Error(`Failed to fetch problem: ${he.status} ${he.statusText}`);const ve=await he.json();y(ve)}catch(ne){C(ne instanceof Error?ne.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",ne)}finally{S(!1)}})()},[n]);const I=()=>e("/"),$=(()=>{if(!g)return"";const ie=g.difficulty;return ie==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ie==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"})(),{state:L,setState:q,undo:X,redo:J,canUndo:P,canRedo:G}=ete({nodes:[],edges:[]}),[ee,se,H]=Eae(L.nodes),[W,Z,ce]=Cae(L.edges),{getNodes:le,fitView:ge}=sd(),[we,_e]=j.useState(!1),[ke,Ee]=j.useState(!1);j.useEffect(()=>{if(!p||!s)return;(async()=>{try{const ne=await sr.getDiagram(p),he=ne.nodes,ve=ne.edges;se(he),Z(ve),z(ne.id),q({nodes:he,edges:ve})}catch(ne){console.error("Failed to load diagram:",ne),alert("Failed to load diagram. It may have been deleted or you don't have access to it.")}})()},[p,s,se,Z,q]),j.useEffect(()=>{const ie=setTimeout(()=>{q({nodes:ee,edges:W})},300);return()=>clearTimeout(ie)},[ee,W,q]),j.useEffect(()=>{se(L.nodes),Z(L.edges)},[L,se,Z]),j.useEffect(()=>{const ie=ne=>{(ne.ctrlKey||ne.metaKey)&&ne.key==="z"&&!ne.shiftKey&&(ne.preventDefault(),X()),((ne.ctrlKey||ne.metaKey)&&ne.shiftKey&&ne.key==="z"||ne.ctrlKey&&ne.key==="y")&&(ne.preventDefault(),J())};return globalThis.addEventListener("keydown",ie),()=>globalThis.removeEventListener("keydown",ie)},[X,J]),j.useEffect(()=>{const ie=ne=>{we&&(ne.target.closest(".relative")||_e(!1))};if(we)return document.addEventListener("click",ie),()=>document.removeEventListener("click",ie)},[we]),j.useEffect(()=>{const ie=ne=>{ke&&(ne.target.closest(".relative")||Ee(!1))};if(ke)return document.addEventListener("click",ie),()=>document.removeEventListener("click",ie)},[ke]);const xe=ie=>{const ne={...ie,type:"customEdge",data:{label:"",hasLabel:!1}};Z(he=>B6(ne,he))},[Te,et]=Pe.useState(null),[Ae,Zt]=j.useState(!1),bn=async()=>{if(Ae)return;Zt(!0),et(null);const ie={components:ee.map(ne=>{const he=ne.data??{},ve=he.type;let ye;typeof ve=="string"?ye=ve:typeof ne.type=="string"?ye=ne.type:ye="microservice";const Ce=he.label,Be=typeof Ce=="string"?Ce:String(ne.id),He=he&&typeof he=="object"?{...he}:{},{label:lt,icon:Nn,subtitle:mr,...tn}=He;return{id:ne.id,type:ye,label:Be,position:{x:ne.position?.x??0,y:ne.position?.y??0},properties:{...tn,nodeData:{label:Be,icon:he.icon,subtitle:he.subtitle}}}}),connections:W.map(ne=>{const he=ne.data??{},ve=he.type,ye=typeof ve=="string"?ve:"api-call",Ce=he.label,Be=typeof Ce=="string"?Ce:void 0;return{id:ne.id??`${ne.source}-${ne.target}`,source:ne.source,target:ne.target,type:ye,label:Be,properties:he}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",ie);const ne=await pfe(ie,g);et(ne),hr("details")}catch(ne){console.error("Assessment failed:",ne),et({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{Zt(!1)}},dr=j.useRef(null),xn=ie=>{ie.preventDefault(),ie.dataTransfer&&(ie.dataTransfer.dropEffect="move")},Qt=ie=>{ie.preventDefault();const ne=ie.dataTransfer?.getData("application/reactflow")||ie.dataTransfer?.getData("text/plain");let he=ne;try{ne&&(he=JSON.parse(ne).type||ne)}catch{}const ve=r({x:ie.clientX,y:ie.clientY}),ye=`${he}-${Date.now()}`,Ce=tu.find(lt=>lt.id===he),Be=Ce?.group==="Grouping",He={id:ye,position:ve,type:Be?"group":"custom",style:Be?{width:400,height:300,zIndex:-1}:void 0,data:{label:Ce?.label??he,componentId:Ce?.id,icon:Ce?.icon,subtitle:Ce?.description,backgroundColor:Be?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Be?"rgba(100, 100, 255, 0.3)":void 0}};se(lt=>[...lt,He])},ht=(ie,ne)=>{if(ne.parentId)return;const he=ee.filter(ye=>ye.type==="group");let ve;for(const ye of he){if(ye.id===ne.id)continue;const Ce=ye.position.x,Be=ye.position.y,He=ye.style?.width||400,lt=ye.style?.height||300,Nn=ne.position.x,mr=ne.position.y,tn=10;if(Nn>Ce+tn&&Nn<Ce+He-tn&&mr>Be+tn&&mr<Be+lt-tn){ve=ye.id;break}}ve&&se(ye=>ye.map(Ce=>{if(Ce.id===ne.id){const Be=ye.find(lt=>lt.id===ve),He=Be?{x:ne.position.x-Be.position.x,y:ne.position.y-Be.position.y}:ne.position;return{...Ce,position:He,parentId:ve,extent:"parent"}}return Ce}))},fr=j.useCallback(()=>{const ie=Yn.current;ie&&se(ne=>ne.map(he=>{if(he.id===ie&&he.parentId){const ve=ne.find(Be=>Be.id===he.parentId);let ye=he.position.x,Ce=he.position.y;return ve&&(ye+=ve.position.x,Ce+=ve.position.y),{...he,position:{x:ye,y:Ce},parentId:void 0,extent:void 0}}return he}))},[se]),[je,Kt]=j.useState(null),[dt,Rt]=j.useState({}),[Ct,Kn]=j.useState({}),[ro,hr]=j.useState("details"),[un,Jt]=j.useState(!1),Yn=j.useRef(null);Pe.useEffect(()=>{Yn.current=je},[je]);const vi=j.useRef(void 0);vi.current=ie=>{const he=ie.detail.id;se(ve=>ve.filter(ye=>ye.id!==he)),Yn.current===he&&(Kt(null),hr("details"))};const Wr=j.useRef(void 0);Wr.current=ie=>{const he=ie.detail.id;Kt(ve=>{const ye=ve===he?null:he;return hr(ye?"inspector":"details"),ye})};function Zl(ie,ne,he,ve){return ie.map(ye=>ye.id===ne?{...ye,data:{...ye.data,label:he,hasLabel:ve},label:he}:ye)}const io=Pe.useRef(void 0);io.current=ie=>{const ne=ie,{id:he,label:ve,hasLabel:ye}=ne.detail;Z(Ce=>Zl(Ce,he,ve,ye))},Pe.useEffect(()=>{const ie=ne=>io.current?.(ne);return globalThis.addEventListener("diagram:edge-label-change",ie),()=>globalThis.removeEventListener("diagram:edge-label-change",ie)},[]),Pe.useEffect(()=>{const ie=ve=>vi.current?.(ve),ne=ve=>Wr.current?.(ve),he=ve=>{const ye=ve;se(Ce=>Ce.map(Be=>{if(Be.id===ye.detail.id&&Be.parentId){const He=Ce.find(mr=>mr.id===Be.parentId);let lt=Be.position.x,Nn=Be.position.y;return He&&(lt+=He.position.x,Nn+=He.position.y),{...Be,position:{x:lt,y:Nn},parentId:void 0,extent:void 0}}return Be}))};return globalThis.addEventListener("diagram:node-delete",ie),globalThis.addEventListener("diagram:node-toggle",ne),globalThis.addEventListener("diagram:node-detach",he),()=>{globalThis.removeEventListener("diagram:node-delete",ie),globalThis.removeEventListener("diagram:node-toggle",ne),globalThis.removeEventListener("diagram:node-detach",he)}},[se]),Pe.useEffect(()=>{if(!je)return;const ie=ee.find(ne=>ne.id===je);Rt(ie?.data??{})},[je,ee]);const bi=(ie,ne)=>{Rt(he=>({...he,[ie]:ne})),je&&se(he=>he.map(ve=>ve.id===je?{...ve,data:{...ve.data,[ie]:ne}}:ve))},so=(ie,ne)=>bi(ie,ne),xi=(ie,ne)=>bi(ie,ne),xa=(ie,ne)=>bi(ie,ne),wa=(ie,ne)=>bi(ie,ne),oo=()=>{if(!je)return;const ie={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(Ct[je]?.length||0)+1}`,label:`Custom Property ${(Ct[je]?.length||0)+1}`,type:"text",value:""};Kn(ne=>{const he={...ne,[je]:[...ne[je]||[],ie]};return se(ve=>ve.map(ye=>ye.id===je?{...ye,data:{...ye.data,_customProperties:he[je]}}:ye)),he})},ao=(ie,ne)=>{je&&Kn(he=>{const ye=(he[je]||[]).map(Ce=>Ce.id===ie?{...Ce,...ne}:Ce);return se(Ce=>Ce.map(Be=>Be.id===je?{...Be,data:{...Be.data,_customProperties:ye}}:Be)),{...he,[je]:ye}})},lo=ie=>{je&&Kn(ne=>{const ve=(ne[je]||[]).filter(ye=>ye.id!==ie);return se(ye=>ye.map(Ce=>Ce.id===je?{...Ce,data:{...Ce.data,_customProperties:ve}}:Ce)),{...ne,[je]:ve}})};Pe.useEffect(()=>{if(!je)return;const ie=ee.find(ne=>ne.id===je);ie?.data?._customProperties&&Kn(ne=>({...ne,[je]:ie.data._customProperties}))},[je,ee]);const Sa=ie=>{const ne=`${je}-${ie.key}`,he=dt[ie.key];let ve;typeof he=="number"?ve=he:typeof ie.default=="number"?ve=ie.default:ve=void 0;let ye;typeof he=="string"?ye=he:ie.default===null||ie.default===void 0?ye="":ye=String(ie.default);let Ce;typeof he=="string"?Ce=he:ie.default===null||ie.default===void 0?Ce=void 0:Ce=String(ie.default);const Be=!!he;return v.jsxs("div",{className:"flex flex-col px-1",children:[ie.type==="boolean"&&v.jsx(Hz,{id:ne,checked:Be,onChange:He=>so(ie.key,He),label:ie.label}),ie.type==="number"&&v.jsx(Fz,{id:ne,label:ie.label,value:ve,onChange:He=>xi(ie.key,He)}),ie.type==="text"&&v.jsx(Sh,{id:ne,label:ie.label,value:ye,placeholder:ie.placeholder,onChange:He=>xa(ie.key,He)}),ie.type==="textarea"&&v.jsx(kp,{id:ne,label:ie.label,value:ye,placeholder:ie.placeholder,onChange:He=>xa(ie.key,He)}),ie.type==="select"&&v.jsx(Uz,{id:ne,label:ie.label,value:Ce,options:ie.options||[],onChange:He=>wa(ie.key,He)})]},ie.key)};let ns=null;if(je){const ie=ee.find(ne=>ne.id===je);if(ie){const ne=ie.data.componentId?tu.find(he=>he.id===ie.data.componentId):tu.find(he=>he.label===ie.data.label);ne?.properties?ns=ne.properties.map(he=>Sa(he)):ns=v.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else ns=v.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let jn=null;if(je){const ie=Ct[je]||[];ie.length>0?jn=ie.map(ne=>v.jsx(xfe,{property:ne,onUpdate:ao,onDelete:lo},ne.id)):jn=v.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}if(x)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),v.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(w)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),v.jsx("div",{className:"text-muted mb-4",children:w}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:I,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),v.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!g)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),v.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),v.jsx("button",{onClick:I,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function It(ie){const ne=tu.find(He=>He.id===ie),he=dr.current?.getBoundingClientRect();if(!he)return;const ve=r({x:he.left+he.width/2,y:he.top+he.height/2}),ye=`${ie}-${Date.now()}`,Ce=ne?.group==="Grouping",Be={id:ye,position:ve,type:Ce?"group":"custom",style:Ce?{width:400,height:300,zIndex:-1}:void 0,data:{label:ne?.label??ie,componentId:ne?.id,icon:ne?.icon,subtitle:ne?.description,backgroundColor:Ce?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Ce?"rgba(100, 100, 255, 0.3)":void 0}};se(He=>[...He,Be])}const en=(ie,ne)=>{const he=ee.find(Ce=>Ce.id===ie);if(!he)return;const ve=`${ie}-copy-${Date.now()}`,ye={...he,id:ve,position:{x:he.position.x+200,y:he.position.y+100},data:{...ne},selected:!1};se(Ce=>[...Ce,ye])},Xr=()=>{ee.length===0&&W.length===0||Jt(!0)},co=()=>{se([]),Z([]),Kt(null),et(null),Jt(!1)},Ql=()=>{Jt(!1)},uo=(ie="png")=>{const ne=T6(le()),he=bm(ne,1024,768,.5,2,.2),ve=document.querySelector(".react-flow__viewport");if(!ve){console.error("Viewport element not found");return}let ye,Ce;ie==="svg"?(ye=qq,Ce="svg"):ie==="jpeg"?(ye=$le,Ce="jpg"):(ye=Ule,Ce="png"),ye(ve,{backgroundColor:ie==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${he.x}px, ${he.y}px) scale(${he.zoom})`}}).then(Be=>{const He=document.createElement("a");He.setAttribute("download",`system-design-${Date.now()}.${Ce}`),He.setAttribute("href",Be),He.click()}).catch(Be=>{console.error("Error generating image:",Be)})},Ea=async()=>{if(!s){k(!0);return}const ie=prompt("Enter a title for this diagram:",U?"Untitled Diagram (updating)":"Untitled Diagram");if(!ie)return;const ne=prompt("Enter a description (optional):");try{if(U)await sr.updateDiagram(U,{title:ie,description:ne||void 0,nodes:ee,edges:W}),alert("Diagram updated successfully!");else{const he=await sr.saveDiagram({title:ie,description:ne||void 0,nodes:ee,edges:W});z(he.id),alert("Diagram saved successfully!")}}catch(he){console.error("Failed to save diagram:",he),alert(he instanceof Error?he.message:"Failed to save diagram")}},wi=async()=>{if(!s){k(!0);return}B(!0);try{const ie=await sr.getUserDiagrams();D(ie),A(!0)}catch(ie){console.error("Failed to load diagrams:",ie),alert("Failed to load diagrams")}finally{B(!1)}},fo=ie=>{se(ie.nodes),Z(ie.edges),z(ie.id)},Zr=async ie=>{try{await sr.deleteDiagram(ie),D(ne=>ne.filter(he=>he.id!==ie)),U===ie&&z(null)}catch(ne){throw console.error("Failed to delete diagram:",ne),ne}},pr=(ie="TB")=>{const ne=ee.filter(Xe=>Xe.type==="group"),he=ee.filter(Xe=>Xe.type!=="group"&&!Xe.parentId),ve=new fh.graphlib.Graph;ve.setDefaultEdgeLabel(()=>({})),ve.setGraph({rankdir:ie,nodesep:150,ranksep:200,marginx:50,marginy:50});const ye=350,Ce=250;for(const Xe of ne)ve.setNode(Xe.id,{width:ye,height:Ce});const Be=W.filter(Xe=>ne.some(Ot=>Ot.id===Xe.source)&&ne.some(Ot=>Ot.id===Xe.target));for(const Xe of Be)ve.setEdge(Xe.source,Xe.target);ne.length>0&&fh.layout(ve);const He=new fh.graphlib.Graph;He.setDefaultEdgeLabel(()=>({})),He.setGraph({rankdir:ie,nodesep:80,ranksep:100});const lt=200,Nn=80;for(const Xe of he)He.setNode(Xe.id,{width:lt,height:Nn});const mr=W.filter(Xe=>he.some(Ot=>Ot.id===Xe.source)&&he.some(Ot=>Ot.id===Xe.target));for(const Xe of mr)He.setEdge(Xe.source,Xe.target);he.length>0&&fh.layout(He);const tn=ee.map(Xe=>{if(Xe.type==="group"){const Ot=ve.node(Xe.id);if(Ot)return{...Xe,position:{x:Ot.x-ye/2,y:Ot.y-Ce/2}}}else{if(Xe.parentId)return Xe;{const Ot=He.node(Xe.id);if(Ot){const Jl=ne.length>0?ye+100:0;return{...Xe,position:{x:Ot.x-lt/2+Jl,y:Ot.y-Nn/2}}}}}return Xe});se(tn),globalThis.requestAnimationFrame(()=>{ge({padding:.2,duration:400})})},Qr={custom:Efe(en,ee),group:bfe},Pr={customEdge:vfe},kt=()=>{if(se(ie=>ie.map(ne=>ne.id===je?{...ne,data:{...ne.data,...dt}}:ne)),je){const ie=ee.find(ne=>ne.id===je);console.log("Node properties saved:",{id:je,data:ie?.data,nodeProps:dt})}},Ca=n==="free"?"Design Studio | Diagrammatic":`${g?.title||"System Design Challenge"} | Diagrammatic`,ka=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${g?.title||"system design"} challenge. ${g?.description?.substring(0,150)||"Practice system design skills"}...`;return v.jsxs(v.Fragment,{children:[v.jsx(ud,{title:Ca,description:ka,keywords:`system design playground, ${g?.title||"free canvas"}, architecture diagram tool, ${g?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),v.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[v.jsx("div",{className:"bg-surface shadow-sm border-b border-theme px-4 py-1",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("button",{onClick:I,className:"px-3 py-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors cursor-pointer",children:" Back to Dashboard"}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("h1",{className:"text-lg font-semibold text-theme",children:g.title}),v.jsx("span",{className:`px-2 py-1 rounded text-xs ${$}`,children:g.difficulty}),v.jsx("span",{className:"text-sm text-muted",children:g.estimated_time}),v.jsx("span",{className:"text-sm text-muted",children:""}),v.jsx("span",{className:"text-sm text-muted",children:g.category})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs("div",{className:"flex items-center border-r border-theme/10 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:X,disabled:!P,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Undo (Ctrl+Z)",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),v.jsx("button",{type:"button",onClick:J,disabled:!G,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})})})]}),v.jsx("button",{type:"button",onClick:Xr,disabled:ee.length===0&&W.length===0,className:"p-2 text-muted hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer border-r border-theme/10 pr-2 mr-2",title:"Clear Canvas",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),v.jsxs("div",{className:"relative border-r border-theme/10 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:()=>_e(!we),disabled:ee.length===0,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Download as Image",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),we&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[120px]",children:[v.jsx("button",{type:"button",onClick:()=>{uo("png"),_e(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG"}),v.jsx("button",{type:"button",onClick:()=>{uo("jpeg"),_e(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG"}),v.jsx("button",{type:"button",onClick:()=>{uo("svg"),_e(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG"})]})]}),v.jsxs("div",{className:"relative border-r border-theme/10 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:()=>Ee(!ke),disabled:ee.length===0,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Auto Layout",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})})}),ke&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[v.jsx("button",{type:"button",onClick:()=>{pr("TB"),Ee(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),v.jsx("button",{type:"button",onClick:()=>{pr("LR"),Ee(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&v.jsxs("div",{className:"flex items-center gap-2 border-r border-theme/10 pr-2 mr-2",children:[v.jsxs("button",{type:"button",onClick:Ea,disabled:ee.length===0,className:"px-3 py-2 text-sm font-medium text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2",title:s?"Save diagram":"Sign in to save diagrams",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),U?"Update":"Save"]}),v.jsxs("button",{type:"button",onClick:wi,className:"px-3 py-2 text-sm font-medium text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors flex items-center gap-2",title:s?"My Designs":"Sign in to view saved designs",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"My Designs"]})]}),g?.id!=="free"&&v.jsx("button",{type:"button",onClick:bn,disabled:Ae,className:"px-6 py-1 bg-[var(--brand)] text-white font-bold rounded-md hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Run assessment on current design",children:Ae?"Assessing...":"Run Assessment"}),v.jsx(cd,{}),v.jsx("div",{className:"relative",children:s?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>Y(!V),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:[i?.picture?v.jsx("img",{src:i.picture,alt:i.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-[var(--brand)]"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--brand)] text-white flex items-center justify-center font-bold",children:i?.name?.[0]?.toUpperCase()||i?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:i?.name||i?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),V&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:i?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:i?.email})]}),v.jsx("button",{type:"button",onClick:()=>{d(),Y(!1),z(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>k(!0),className:"px-4 py-2 text-sm font-medium bg-[var(--brand)] text-white rounded-md hover:brightness-95 transition-all",children:"Sign In"})})]})]})}),v.jsxs("div",{className:"flex-1 flex min-h-0",children:[v.jsx(dfe,{components:tu,onAdd:It}),v.jsx(ffe,{reactFlowWrapperRef:dr,nodes:ee,edges:W,nodeTypes:Qr,edgeTypes:Pr,onNodesChange:H,onEdgesChange:ce,onConnect:xe,onDragOver:xn,onDrop:Qt,onNodeDragStop:ht}),v.jsx(hfe,{problem:g,activeTab:ro,setActiveTab:hr,inspectedNodeId:je,setInspectedNodeId:Kt,propertyElements:ns,customPropertyElements:jn,onAddCustomProperty:oo,handleSave:kt,assessmentResult:Te,onDetachFromGroup:fr,isNodeInGroup:je?ee.find(ie=>ie.id===je)?.parentId!==void 0:!1})]}),un&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:Ql,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:co,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),v.jsx(Yp,{isOpen:N,onClose:()=>k(!1),onLogin:async(ie,ne)=>{await o({email:ie,password:ne})},onSignup:async(ie,ne,he)=>{await l({email:ie,password:ne,name:he})},onGoogleLogin:u}),v.jsx(wfe,{isOpen:T,onClose:()=>A(!1),diagrams:_,onLoad:fo,onDelete:Zr,isLoading:R})]})]})},kfe=()=>v.jsx(Nq,{children:v.jsx(Cfe,{})}),Tfe=()=>(fa(),v.jsx(mU,{children:v.jsx(JF,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsxs(XF,{children:[v.jsx(Ro,{path:"/",element:v.jsx(e_,{})}),v.jsx(Ro,{path:"/problems",element:v.jsx(LK,{})}),v.jsx(Ro,{path:"/create-problem",element:v.jsx(Qee,{})}),v.jsx(Ro,{path:"/diagrams",element:v.jsx(Jee,{})}),v.jsx(Ro,{path:"/playground/:id",element:v.jsx(kfe,{})}),v.jsx(Ro,{path:"*",element:v.jsx(e_,{})})]})})}));nF.createRoot(document.getElementById("root")).render(v.jsx(j.StrictMode,{children:v.jsx(Tfe,{})}));
