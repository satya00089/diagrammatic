function tF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var s0={exports:{}},fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA;function nF(){if(AA)return fu;AA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return fu.Fragment=t,fu.jsx=n,fu.jsxs=n,fu}var MA;function rF(){return MA||(MA=1,s0.exports=nF()),s0.exports}var v=rF(),o0={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function iF(){if(_A)return $e;_A=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(z,K,ie){this.props=z,this.context=K,this.refs=S,this.updater=ie||y}w.prototype.isReactComponent={},w.prototype.setState=function(z,K){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,K,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function E(){}E.prototype=w.prototype;function N(z,K,ie){this.props=z,this.context=K,this.refs=S,this.updater=ie||y}var k=N.prototype=new E;k.constructor=N,x(k,w.prototype),k.isPureReactComponent=!0;var T=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function O(z,K,ie,ue,$,J){return ie=J.ref,{$$typeof:e,type:z,key:K,ref:ie!==void 0?ie:null,props:J}}function D(z,K){return O(z.type,K,void 0,void 0,void 0,z.props)}function P(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function H(z){var K={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ie){return K[ie]})}var V=/\/+/g;function L(z,K){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):K.toString(36)}function G(){}function B(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(G,G):(z.status="pending",z.then(function(K){z.status==="pending"&&(z.status="fulfilled",z.value=K)},function(K){z.status==="pending"&&(z.status="rejected",z.reason=K)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function F(z,K,ie,ue,$){var J=typeof z;(J==="undefined"||J==="boolean")&&(z=null);var ee=!1;if(z===null)ee=!0;else switch(J){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(z.$$typeof){case e:case t:ee=!0;break;case h:return ee=z._init,F(ee(z._payload),K,ie,ue,$)}}if(ee)return $=$(z),ee=ue===""?"."+L(z,0):ue,T($)?(ie="",ee!=null&&(ie=ee.replace(V,"$&/")+"/"),F($,K,ie,"",function(ye){return ye})):$!=null&&(P($)&&($=D($,ie+($.key==null||z&&z.key===$.key?"":(""+$.key).replace(V,"$&/")+"/")+ee)),K.push($)),1;ee=0;var ce=ue===""?".":ue+":";if(T(z))for(var le=0;le<z.length;le++)ue=z[le],J=ce+L(ue,le),ee+=F(ue,K,ie,J,$);else if(le=m(z),typeof le=="function")for(z=le.call(z),le=0;!(ue=z.next()).done;)ue=ue.value,J=ce+L(ue,le++),ee+=F(ue,K,ie,J,$);else if(J==="object"){if(typeof z.then=="function")return F(B(z),K,ie,ue,$);throw K=String(z),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ee}function I(z,K,ie){if(z==null)return z;var ue=[],$=0;return F(z,ue,"","",function(J){return K.call(ie,J,$++)}),ue}function q(z){if(z._status===-1){var K=z._result;K=K(),K.then(function(ie){(z._status===0||z._status===-1)&&(z._status=1,z._result=ie)},function(ie){(z._status===0||z._status===-1)&&(z._status=2,z._result=ie)}),z._status===-1&&(z._status=0,z._result=K)}if(z._status===1)return z._result.default;throw z._result}var X=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function te(){}return $e.Children={map:I,forEach:function(z,K,ie){I(z,function(){K.apply(this,arguments)},ie)},count:function(z){var K=0;return I(z,function(){K++}),K},toArray:function(z){return I(z,function(K){return K})||[]},only:function(z){if(!P(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},$e.Component=w,$e.Fragment=n,$e.Profiler=i,$e.PureComponent=N,$e.StrictMode=r,$e.Suspense=u,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,$e.__COMPILER_RUNTIME={__proto__:null,c:function(z){return A.H.useMemoCache(z)}},$e.cache=function(z){return function(){return z.apply(null,arguments)}},$e.cloneElement=function(z,K,ie){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ue=x({},z.props),$=z.key,J=void 0;if(K!=null)for(ee in K.ref!==void 0&&(J=void 0),K.key!==void 0&&($=""+K.key),K)!_.call(K,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&K.ref===void 0||(ue[ee]=K[ee]);var ee=arguments.length-2;if(ee===1)ue.children=ie;else if(1<ee){for(var ce=Array(ee),le=0;le<ee;le++)ce[le]=arguments[le+2];ue.children=ce}return O(z.type,$,void 0,void 0,J,ue)},$e.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},$e.createElement=function(z,K,ie){var ue,$={},J=null;if(K!=null)for(ue in K.key!==void 0&&(J=""+K.key),K)_.call(K,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&($[ue]=K[ue]);var ee=arguments.length-2;if(ee===1)$.children=ie;else if(1<ee){for(var ce=Array(ee),le=0;le<ee;le++)ce[le]=arguments[le+2];$.children=ce}if(z&&z.defaultProps)for(ue in ee=z.defaultProps,ee)$[ue]===void 0&&($[ue]=ee[ue]);return O(z,J,void 0,void 0,null,$)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(z){return{$$typeof:l,render:z}},$e.isValidElement=P,$e.lazy=function(z){return{$$typeof:h,_payload:{_status:-1,_result:z},_init:q}},$e.memo=function(z,K){return{$$typeof:d,type:z,compare:K===void 0?null:K}},$e.startTransition=function(z){var K=A.T,ie={};A.T=ie;try{var ue=z(),$=A.S;$!==null&&$(ie,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(te,X)}catch(J){X(J)}finally{A.T=K}},$e.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},$e.use=function(z){return A.H.use(z)},$e.useActionState=function(z,K,ie){return A.H.useActionState(z,K,ie)},$e.useCallback=function(z,K){return A.H.useCallback(z,K)},$e.useContext=function(z){return A.H.useContext(z)},$e.useDebugValue=function(){},$e.useDeferredValue=function(z,K){return A.H.useDeferredValue(z,K)},$e.useEffect=function(z,K,ie){var ue=A.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(z,K)},$e.useId=function(){return A.H.useId()},$e.useImperativeHandle=function(z,K,ie){return A.H.useImperativeHandle(z,K,ie)},$e.useInsertionEffect=function(z,K){return A.H.useInsertionEffect(z,K)},$e.useLayoutEffect=function(z,K){return A.H.useLayoutEffect(z,K)},$e.useMemo=function(z,K){return A.H.useMemo(z,K)},$e.useOptimistic=function(z,K){return A.H.useOptimistic(z,K)},$e.useReducer=function(z,K,ie){return A.H.useReducer(z,K,ie)},$e.useRef=function(z){return A.H.useRef(z)},$e.useState=function(z){return A.H.useState(z)},$e.useSyncExternalStore=function(z,K,ie){return A.H.useSyncExternalStore(z,K,ie)},$e.useTransition=function(){return A.H.useTransition()},$e.version="19.1.1",$e}var DA;function Nd(){return DA||(DA=1,o0.exports=iF()),o0.exports}var R=Nd();const _e=kd(R),sF=tF({__proto__:null,default:_e},[R]);var a0={exports:{}},hu={},l0={exports:{}},c0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function oF(){return RA||(RA=1,(function(e){function t(I,q){var X=I.length;I.push(q);e:for(;0<X;){var te=X-1>>>1,z=I[te];if(0<i(z,q))I[te]=q,I[X]=z,X=te;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var q=I[0],X=I.pop();if(X!==q){I[0]=X;e:for(var te=0,z=I.length,K=z>>>1;te<K;){var ie=2*(te+1)-1,ue=I[ie],$=ie+1,J=I[$];if(0>i(ue,X))$<z&&0>i(J,ue)?(I[te]=J,I[$]=X,te=$):(I[te]=ue,I[ie]=X,te=ie);else if($<z&&0>i(J,X))I[te]=J,I[$]=X,te=$;else break e}}return q}function i(I,q){var X=I.sortIndex-q.sortIndex;return X!==0?X:I.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,m=3,y=!1,x=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(I){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=I)r(d),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(d)}}function A(I){if(S=!1,T(I),!x)if(n(u)!==null)x=!0,_||(_=!0,L());else{var q=n(d);q!==null&&F(A,q.startTime-I)}}var _=!1,O=-1,D=5,P=-1;function H(){return w?!0:!(e.unstable_now()-P<D)}function V(){if(w=!1,_){var I=e.unstable_now();P=I;var q=!0;try{e:{x=!1,S&&(S=!1,N(O),O=-1),y=!0;var X=m;try{t:{for(T(I),p=n(u);p!==null&&!(p.expirationTime>I&&H());){var te=p.callback;if(typeof te=="function"){p.callback=null,m=p.priorityLevel;var z=te(p.expirationTime<=I);if(I=e.unstable_now(),typeof z=="function"){p.callback=z,T(I),q=!0;break t}p===n(u)&&r(u),T(I)}else r(u);p=n(u)}if(p!==null)q=!0;else{var K=n(d);K!==null&&F(A,K.startTime-I),q=!1}}break e}finally{p=null,m=X,y=!1}q=void 0}}finally{q?L():_=!1}}}var L;if(typeof k=="function")L=function(){k(V)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,B=G.port2;G.port1.onmessage=V,L=function(){B.postMessage(null)}}else L=function(){E(V,0)};function F(I,q){O=E(function(){I(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(I){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var X=m;m=q;try{return I()}finally{m=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(I,q){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var X=m;m=I;try{return q()}finally{m=X}},e.unstable_scheduleCallback=function(I,q,X){var te=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?te+X:te):X=te,I){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,I={id:h++,callback:q,priorityLevel:I,startTime:X,expirationTime:z,sortIndex:-1},X>te?(I.sortIndex=X,t(d,I),n(u)===null&&I===n(d)&&(S?(N(O),O=-1):S=!0,F(A,X-te))):(I.sortIndex=z,t(u,I),x||y||(x=!0,_||(_=!0,L()))),I},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(I){var q=m;return function(){var X=m;m=q;try{return I.apply(this,arguments)}finally{m=X}}}})(c0)),c0}var OA;function aF(){return OA||(OA=1,l0.exports=oF()),l0.exports}var u0={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jA;function lF(){if(jA)return kn;jA=1;var e=Nd();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,kn.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},kn.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},kn.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},kn.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},kn.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},kn.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},kn.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},kn.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},kn.requestFormReset=function(u){r.d.r(u)},kn.unstable_batchedUpdates=function(u,d){return u(d)},kn.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},kn.useFormStatus=function(){return o.H.useHostTransitionStatus()},kn.version="19.1.1",kn}var LA;function v5(){if(LA)return u0.exports;LA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),u0.exports=lF(),u0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function cF(){if(PA)return hu;PA=1;var e=aF(),t=Nd(),n=v5();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,g=c;;){var b=f.return;if(b===null)break;var C=b.alternate;if(C===null){if(g=b.return,g!==null){f=g;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===f)return l(b),a;if(C===g)return l(b),c;C=C.sibling}throw Error(r(188))}if(f.return!==g.return)f=b,g=C;else{for(var M=!1,j=b.child;j;){if(j===f){M=!0,f=b,g=C;break}if(j===g){M=!0,g=b,f=C;break}j=j.sibling}if(!M){for(j=C.child;j;){if(j===f){M=!0,f=C,g=b;break}if(j===g){M=!0,g=C,f=b;break}j=j.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),H=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function L(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function B(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case P:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case k:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case O:return c=a.displayName||null,c!==null?c:B(a.type)||"Memo";case D:c=a._payload,a=a._init;try{return B(a(c))}catch{}}return null}var F=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},te=[],z=-1;function K(a){return{current:a}}function ie(a){0>z||(a.current=te[z],te[z]=null,z--)}function ue(a,c){z++,te[z]=a.current,a.current=c}var $=K(null),J=K(null),ee=K(null),ce=K(null);function le(a,c){switch(ue(ee,c),ue(J,a),ue($,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?nA(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=nA(c),a=rA(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ie($),ue($,a)}function ye(){ie($),ie(J),ie(ee)}function Ne(a){a.memoizedState!==null&&ue(ce,a);var c=$.current,f=rA(c,a.type);c!==f&&(ue(J,a),ue($,f))}function Oe(a){J.current===a&&(ie($),ie(J)),ce.current===a&&(ie(ce),au._currentValue=X)}var Ce=Object.prototype.hasOwnProperty,we=e.unstable_scheduleCallback,be=e.unstable_cancelCallback,ke=e.unstable_shouldYield,rt=e.unstable_requestPaint,Ae=e.unstable_now,Jt=e.unstable_getCurrentPriorityLevel,un=e.unstable_ImmediatePriority,Jn=e.unstable_UserBlockingPriority,Qt=e.unstable_NormalPriority,Tt=e.unstable_LowPriority,ft=e.unstable_IdlePriority,qn=e.log,Dn=e.unstable_setDisableYieldValue,xn=null,yt=null;function qe(a){if(typeof qn=="function"&&Dn(a),yt&&typeof yt.setStrictMode=="function")try{yt.setStrictMode(xn,a)}catch{}}var He=Math.clz32?Math.clz32:en,oi=Math.log,Bt=Math.LN2;function en(a){return a>>>=0,a===0?32:31-(oi(a)/Bt|0)|0}var dn=256,wn=4194304;function yr(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function vr(a,c,f){var g=a.pendingLanes;if(g===0)return 0;var b=0,C=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var j=g&134217727;return j!==0?(g=j&~C,g!==0?b=yr(g):(M&=j,M!==0?b=yr(M):f||(f=j&~a,f!==0&&(b=yr(f))))):(j=g&~C,j!==0?b=yr(j):M!==0?b=yr(M):f||(f=g&~a,f!==0&&(b=yr(f)))),b===0?0:c!==0&&c!==b&&(c&C)===0&&(C=b&-b,f=c&-c,C>=f||C===32&&(f&4194048)!==0)?c:b}function Rn(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function Ri(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oi(){var a=dn;return dn<<=1,(dn&4194048)===0&&(dn=256),a}function ji(){var a=wn;return wn<<=1,(wn&62914560)===0&&(wn=4194304),a}function ko(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function br(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function yc(a,c,f,g,b,C){var M=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var j=a.entanglements,U=a.expirationTimes,re=a.hiddenUpdates;for(f=M&~f;0<f;){var de=31-He(f),he=1<<de;j[de]=0,U[de]=-1;var se=re[de];if(se!==null)for(re[de]=null,de=0;de<se.length;de++){var ae=se[de];ae!==null&&(ae.lane&=-536870913)}f&=~he}g!==0&&Va(a,g,0),C!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=C&~(M&~c))}function Va(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var g=31-He(c);a.entangledLanes|=c,a.entanglements[g]=a.entanglements[g]|1073741824|f&4194090}function ai(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var g=31-He(f),b=1<<g;b&c|a[g]&c&&(a[g]|=c),f&=~b}}function Li(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ys(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ha(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:SA(a.type))}function No(a,c){var f=q.p;try{return q.p=a,c()}finally{q.p=f}}var xr=Math.random().toString(36).slice(2),zt="__reactFiber$"+xr,tn="__reactProps$"+xr,li="__reactContainer$"+xr,Fe="__reactEvents$"+xr,vs="__reactListeners$"+xr,To="__reactHandles$"+xr,Ao="__reactResources$"+xr,Fr="__reactMarker$"+xr;function ci(a){delete a[zt],delete a[tn],delete a[Fe],delete a[vs],delete a[To]}function ui(a){var c=a[zt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[li]||f[zt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=aA(a);a!==null;){if(f=a[zt])return f;a=aA(a)}return c}a=f,f=a.parentNode}return null}function On(a){if(a=a[zt]||a[li]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function di(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Qn(a){var c=a[Ao];return c||(c=a[Ao]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function vt(a){a[Fr]=!0}var Mo=new Set,_o={};function $r(a,c){Ur(a,c),Ur(a+"Capture",c)}function Ur(a,c){for(_o[a]=c,a=0;a<c.length;a++)Mo.add(c[a])}var bs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Do={},Fa={};function $a(a){return Ce.call(Fa,a)?!0:Ce.call(Do,a)?!1:bs.test(a)?Fa[a]=!0:(Do[a]=!0,!1)}function xs(a,c,f){if($a(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function ws(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function er(a,c,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+g)}}var Ro,Ua;function Vn(a){if(Ro===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Ro=c&&c[1]||"",Ua=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ro+a+Ua}var Pi=!1;function Ss(a,c){if(!a||Pi)return"";Pi=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ae){var se=ae}Reflect.construct(a,[],he)}else{try{he.call()}catch(ae){se=ae}a.call(he.prototype)}}else{try{throw Error()}catch(ae){se=ae}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ae){if(ae&&se&&typeof ae.stack=="string")return[ae.stack,se.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),M=C[0],j=C[1];if(M&&j){var U=M.split(`
`),re=j.split(`
`);for(b=g=0;g<U.length&&!U[g].includes("DetermineComponentFrameRoot");)g++;for(;b<re.length&&!re[b].includes("DetermineComponentFrameRoot");)b++;if(g===U.length||b===re.length)for(g=U.length-1,b=re.length-1;1<=g&&0<=b&&U[g]!==re[b];)b--;for(;1<=g&&0<=b;g--,b--)if(U[g]!==re[b]){if(g!==1||b!==1)do if(g--,b--,0>b||U[g]!==re[b]){var de=`
`+U[g].replace(" at new "," at ");return a.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",a.displayName)),de}while(1<=g&&0<=b);break}}}finally{Pi=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Vn(f):""}function vc(a){switch(a.tag){case 26:case 27:case 5:return Vn(a.type);case 16:return Vn("Lazy");case 13:return Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 15:return Ss(a.type,!1);case 11:return Ss(a.type.render,!1);case 1:return Ss(a.type,!0);case 31:return Vn("Activity");default:return""}}function fi(a){try{var c="";do c+=vc(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Sn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Oo(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ga(a){var c=Oo(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,C=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(M){g=""+M,C.call(this,M)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Cs(a){a._valueTracker||(a._valueTracker=Ga(a))}function jo(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return a&&(g=Oo(a)?a.checked?"true":"false":a.value),a=g,a!==f?(c.setValue(a),!0):!1}function wr(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var bc=/[\n"\\]/g;function Cn(a){return a.replace(bc,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Ii(a,c,f,g,b,C,M,j){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),c!=null?M==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Sn(c)):a.value!==""+Sn(c)&&(a.value=""+Sn(c)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),c!=null?Lo(a,M,Sn(c)):f!=null?Lo(a,M,Sn(f)):g!=null&&a.removeAttribute("value"),b==null&&C!=null&&(a.defaultChecked=!!C),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.name=""+Sn(j):a.removeAttribute("name")}function Ka(a,c,f,g,b,C,M,j){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+Sn(f):"",c=c!=null?""+Sn(c):f,j||c===a.value||(a.value=c),a.defaultValue=c}g=g??b,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=j?a.checked:!!g,a.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M)}function Lo(a,c,f){c==="number"&&wr(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Gr(a,c,f,g){if(a=a.options,c){c={};for(var b=0;b<f.length;b++)c["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=c.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&g&&(a[f].defaultSelected=!0)}else{for(f=""+Sn(f),c=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,g&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Yd(a,c,f){if(c!=null&&(c=""+Sn(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+Sn(f):""}function Wa(a,c,f,g){if(c==null){if(g!=null){if(f!=null)throw Error(r(92));if(F(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),c=f}f=Sn(c),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g)}function Es(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var ag=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xd(a,c,f){var g=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":g?a.setProperty(c,f):typeof f!="number"||f===0||ag.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Zd(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var b in c)g=c[b],c.hasOwnProperty(b)&&f[b]!==g&&Xd(a,b,g)}else for(var C in c)c.hasOwnProperty(C)&&Xd(a,C,c[C])}function xc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(a){return cg.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var wc=null;function Xa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ks=null,Ns=null;function Jd(a){var c=On(a);if(c&&(a=c.stateNode)){var f=a[tn]||null;e:switch(a=c.stateNode,c.type){case"input":if(Ii(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Cn(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==a&&g.form===a.form){var b=g[tn]||null;if(!b)throw Error(r(90));Ii(g,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<f.length;c++)g=f[c],g.form===a.form&&jo(g)}break e;case"textarea":Yd(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Gr(a,!!f.multiple,c,!1)}}}var W=!1;function Z(a,c,f){if(W)return a(c,f);W=!0;try{var g=a(c);return g}finally{if(W=!1,(ks!==null||Ns!==null)&&(Lf(),ks&&(c=ks,a=Ns,Ns=ks=null,Jd(c),a)))for(c=0;c<a.length;c++)Jd(a[c])}}function oe(a,c){var f=a.stateNode;if(f===null)return null;var g=f[tn]||null;if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var pe=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ve=!1;if(pe)try{var Se={};Object.defineProperty(Se,"passive",{get:function(){ve=!0}}),window.addEventListener("test",Se,Se),window.removeEventListener("test",Se,Se)}catch{ve=!1}var Le=null,Ge=null,qt=null;function Sr(){if(qt)return qt;var a,c=Ge,f=c.length,g,b="value"in Le?Le.value:Le.textContent,C=b.length;for(a=0;a<f&&c[a]===b[a];a++);var M=f-a;for(g=1;g<=M&&c[f-g]===b[C-g];g++);return qt=b.slice(a,1<g?1-g:void 0)}function tr(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Kr(){return!0}function tt(){return!1}function st(a){function c(f,g,b,C,M){this._reactName=f,this._targetInst=b,this.type=g,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(f=a[j],this[j]=f?f(C):C[j]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Kr:tt,this.isPropagationStopped=tt,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),c}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qd=st(Bi),Sc=h({},Bi,{view:0,detail:0}),t8=st(Sc),ug,dg,Cc,ef=h({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Cc&&(Cc&&a.type==="mousemove"?(ug=a.screenX-Cc.screenX,dg=a.screenY-Cc.screenY):dg=ug=0,Cc=a),ug)},movementY:function(a){return"movementY"in a?a.movementY:dg}}),l2=st(ef),n8=h({},ef,{dataTransfer:0}),r8=st(n8),i8=h({},Sc,{relatedTarget:0}),fg=st(i8),s8=h({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),o8=st(s8),a8=h({},Bi,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),l8=st(a8),c8=h({},Bi,{data:0}),c2=st(c8),u8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h8(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=f8[a])?!!c[a]:!1}function hg(){return h8}var p8=h({},Sc,{key:function(a){if(a.key){var c=u8[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=tr(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?d8[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hg,charCode:function(a){return a.type==="keypress"?tr(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?tr(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),m8=st(p8),g8=h({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u2=st(g8),y8=h({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hg}),v8=st(y8),b8=h({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),x8=st(b8),w8=h({},ef,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),S8=st(w8),C8=h({},Bi,{newState:0,oldState:0}),E8=st(C8),k8=[9,13,27,32],pg=pe&&"CompositionEvent"in window,Ec=null;pe&&"documentMode"in document&&(Ec=document.documentMode);var N8=pe&&"TextEvent"in window&&!Ec,d2=pe&&(!pg||Ec&&8<Ec&&11>=Ec),f2=" ",h2=!1;function p2(a,c){switch(a){case"keyup":return k8.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Za=!1;function T8(a,c){switch(a){case"compositionend":return m2(c);case"keypress":return c.which!==32?null:(h2=!0,f2);case"textInput":return a=c.data,a===f2&&h2?null:a;default:return null}}function A8(a,c){if(Za)return a==="compositionend"||!pg&&p2(a,c)?(a=Sr(),qt=Ge=Le=null,Za=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return d2&&c.locale!=="ko"?null:c.data;default:return null}}var M8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g2(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!M8[a.type]:c==="textarea"}function y2(a,c,f,g){ks?Ns?Ns.push(g):Ns=[g]:ks=g,c=Vf(c,"onChange"),0<c.length&&(f=new Qd("onChange","change",null,f,g),a.push({event:f,listeners:c}))}var kc=null,Nc=null;function _8(a){ZT(a,0)}function tf(a){var c=di(a);if(jo(c))return a}function v2(a,c){if(a==="change")return c}var b2=!1;if(pe){var mg;if(pe){var gg="oninput"in document;if(!gg){var x2=document.createElement("div");x2.setAttribute("oninput","return;"),gg=typeof x2.oninput=="function"}mg=gg}else mg=!1;b2=mg&&(!document.documentMode||9<document.documentMode)}function w2(){kc&&(kc.detachEvent("onpropertychange",S2),Nc=kc=null)}function S2(a){if(a.propertyName==="value"&&tf(Nc)){var c=[];y2(c,Nc,a,Xa(a)),Z(_8,c)}}function D8(a,c,f){a==="focusin"?(w2(),kc=c,Nc=f,kc.attachEvent("onpropertychange",S2)):a==="focusout"&&w2()}function R8(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return tf(Nc)}function O8(a,c){if(a==="click")return tf(c)}function j8(a,c){if(a==="input"||a==="change")return tf(c)}function L8(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var nr=typeof Object.is=="function"?Object.is:L8;function Tc(a,c){if(nr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var b=f[g];if(!Ce.call(c,b)||!nr(a[b],c[b]))return!1}return!0}function C2(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function E2(a,c){var f=C2(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=c&&g>=c)return{node:f,offset:c-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=C2(f)}}function k2(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?k2(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function N2(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=wr(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=wr(a.document)}return c}function yg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var P8=pe&&"documentMode"in document&&11>=document.documentMode,Ja=null,vg=null,Ac=null,bg=!1;function T2(a,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;bg||Ja==null||Ja!==wr(g)||(g=Ja,"selectionStart"in g&&yg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Ac&&Tc(Ac,g)||(Ac=g,g=Vf(vg,"onSelect"),0<g.length&&(c=new Qd("onSelect","select",null,c,f),a.push({event:c,listeners:g}),c.target=Ja)))}function Po(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var Qa={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},xg={},A2={};pe&&(A2=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Io(a){if(xg[a])return xg[a];if(!Qa[a])return a;var c=Qa[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in A2)return xg[a]=c[f];return a}var M2=Io("animationend"),_2=Io("animationiteration"),D2=Io("animationstart"),I8=Io("transitionrun"),B8=Io("transitionstart"),z8=Io("transitioncancel"),R2=Io("transitionend"),O2=new Map,wg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wg.push("scrollEnd");function Wr(a,c){O2.set(a,c),$r(c,[a])}var j2=new WeakMap;function Cr(a,c){if(typeof a=="object"&&a!==null){var f=j2.get(a);return f!==void 0?f:(c={value:a,source:c,stack:fi(c)},j2.set(a,c),c)}return{value:a,source:c,stack:fi(c)}}var Er=[],el=0,Sg=0;function nf(){for(var a=el,c=Sg=el=0;c<a;){var f=Er[c];Er[c++]=null;var g=Er[c];Er[c++]=null;var b=Er[c];Er[c++]=null;var C=Er[c];if(Er[c++]=null,g!==null&&b!==null){var M=g.pending;M===null?b.next=b:(b.next=M.next,M.next=b),g.pending=b}C!==0&&L2(f,b,C)}}function rf(a,c,f,g){Er[el++]=a,Er[el++]=c,Er[el++]=f,Er[el++]=g,Sg|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function Cg(a,c,f,g){return rf(a,c,f,g),sf(a)}function tl(a,c){return rf(a,null,null,c),sf(a)}function L2(a,c,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var b=!1,C=a.return;C!==null;)C.childLanes|=f,g=C.alternate,g!==null&&(g.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(b=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,b&&c!==null&&(b=31-He(f),a=C.hiddenUpdates,g=a[b],g===null?a[b]=[c]:g.push(c),c.lane=f|536870912),C):null}function sf(a){if(50<Qc)throw Qc=0,My=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var nl={};function q8(a,c,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(a,c,f,g){return new q8(a,c,f,g)}function Eg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function zi(a,c){var f=a.alternate;return f===null?(f=rr(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function P2(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function of(a,c,f,g,b,C){var M=0;if(g=a,typeof a=="function")Eg(a)&&(M=1);else if(typeof a=="string")M=HH(a,f,$.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case P:return a=rr(31,f,c,b),a.elementType=P,a.lanes=C,a;case x:return Bo(f.children,b,C,c);case S:M=8,b|=24;break;case w:return a=rr(12,f,c,b|2),a.elementType=w,a.lanes=C,a;case A:return a=rr(13,f,c,b),a.elementType=A,a.lanes=C,a;case _:return a=rr(19,f,c,b),a.elementType=_,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case k:M=10;break e;case N:M=9;break e;case T:M=11;break e;case O:M=14;break e;case D:M=16,g=null;break e}M=29,f=Error(r(130,a===null?"null":typeof a,"")),g=null}return c=rr(M,f,c,b),c.elementType=a,c.type=g,c.lanes=C,c}function Bo(a,c,f,g){return a=rr(7,a,g,c),a.lanes=f,a}function kg(a,c,f){return a=rr(6,a,null,c),a.lanes=f,a}function Ng(a,c,f){return c=rr(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var rl=[],il=0,af=null,lf=0,kr=[],Nr=0,zo=null,qi=1,Vi="";function qo(a,c){rl[il++]=lf,rl[il++]=af,af=a,lf=c}function I2(a,c,f){kr[Nr++]=qi,kr[Nr++]=Vi,kr[Nr++]=zo,zo=a;var g=qi;a=Vi;var b=32-He(g)-1;g&=~(1<<b),f+=1;var C=32-He(c)+b;if(30<C){var M=b-b%5;C=(g&(1<<M)-1).toString(32),g>>=M,b-=M,qi=1<<32-He(c)+b|f<<b|g,Vi=C+a}else qi=1<<C|f<<b|g,Vi=a}function Tg(a){a.return!==null&&(qo(a,1),I2(a,1,0))}function Ag(a){for(;a===af;)af=rl[--il],rl[il]=null,lf=rl[--il],rl[il]=null;for(;a===zo;)zo=kr[--Nr],kr[Nr]=null,Vi=kr[--Nr],kr[Nr]=null,qi=kr[--Nr],kr[Nr]=null}var jn=null,At=null,it=!1,Vo=null,hi=!1,Mg=Error(r(519));function Ho(a){var c=Error(r(418,""));throw Dc(Cr(c,a)),Mg}function B2(a){var c=a.stateNode,f=a.type,g=a.memoizedProps;switch(c[zt]=a,c[tn]=g,f){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(f=0;f<tu.length;f++)Ze(tu[f],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Ze("invalid",c),Ka(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Cs(c);break;case"select":Ze("invalid",c);break;case"textarea":Ze("invalid",c),Wa(c,g.value,g.defaultValue,g.children),Cs(c)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||g.suppressHydrationWarning===!0||tA(c.textContent,f)?(g.popover!=null&&(Ze("beforetoggle",c),Ze("toggle",c)),g.onScroll!=null&&Ze("scroll",c),g.onScrollEnd!=null&&Ze("scrollend",c),g.onClick!=null&&(c.onclick=Hf),c=!0):c=!1,c||Ho(a)}function z2(a){for(jn=a.return;jn;)switch(jn.tag){case 5:case 13:hi=!1;return;case 27:case 3:hi=!0;return;default:jn=jn.return}}function Mc(a){if(a!==jn)return!1;if(!it)return z2(a),it=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Uy(a.type,a.memoizedProps)),f=!f),f&&At&&Ho(a),z2(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){At=Xr(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}At=null}}else c===27?(c=At,Hs(a.type)?(a=Yy,Yy=null,At=a):At=c):At=jn?Xr(a.stateNode.nextSibling):null;return!0}function _c(){At=jn=null,it=!1}function q2(){var a=Vo;return a!==null&&($n===null?$n=a:$n.push.apply($n,a),Vo=null),a}function Dc(a){Vo===null?Vo=[a]:Vo.push(a)}var _g=K(null),Fo=null,Hi=null;function Ts(a,c,f){ue(_g,c._currentValue),c._currentValue=f}function Fi(a){a._currentValue=_g.current,ie(_g)}function Dg(a,c,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===f)break;a=a.return}}function Rg(a,c,f,g){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var C=b.dependencies;if(C!==null){var M=b.child;C=C.firstContext;e:for(;C!==null;){var j=C;C=b;for(var U=0;U<c.length;U++)if(j.context===c[U]){C.lanes|=f,j=C.alternate,j!==null&&(j.lanes|=f),Dg(C.return,f,a),g||(M=null);break e}C=j.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=f,C=M.alternate,C!==null&&(C.lanes|=f),Dg(M,f,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function Rc(a,c,f,g){a=null;for(var b=c,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var j=b.type;nr(b.pendingProps.value,M.value)||(a!==null?a.push(j):a=[j])}}else if(b===ce.current){if(M=b.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(au):a=[au])}b=b.return}a!==null&&Rg(c,a,f,g),c.flags|=262144}function cf(a){for(a=a.firstContext;a!==null;){if(!nr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function $o(a){Fo=a,Hi=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function En(a){return V2(Fo,a)}function uf(a,c){return Fo===null&&$o(a),V2(a,c)}function V2(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Hi===null){if(a===null)throw Error(r(308));Hi=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Hi=Hi.next=c;return f}var V8=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},H8=e.unstable_scheduleCallback,F8=e.unstable_NormalPriority,Yt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Og(){return{controller:new V8,data:new Map,refCount:0}}function Oc(a){a.refCount--,a.refCount===0&&H8(F8,function(){a.controller.abort()})}var jc=null,jg=0,sl=0,ol=null;function $8(a,c){if(jc===null){var f=jc=[];jg=0,sl=Py(),ol={status:"pending",value:void 0,then:function(g){f.push(g)}}}return jg++,c.then(H2,H2),c}function H2(){if(--jg===0&&jc!==null){ol!==null&&(ol.status="fulfilled");var a=jc;jc=null,sl=0,ol=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function U8(a,c){var f=[],g={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return a.then(function(){g.status="fulfilled",g.value=c;for(var b=0;b<f.length;b++)(0,f[b])(c)},function(b){for(g.status="rejected",g.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),g}var F2=I.S;I.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&$8(a,c),F2!==null&&F2(a,c)};var Uo=K(null);function Lg(){var a=Uo.current;return a!==null?a:mt.pooledCache}function df(a,c){c===null?ue(Uo,Uo.current):ue(Uo,c.pool)}function $2(){var a=Lg();return a===null?null:{parent:Yt._currentValue,pool:a}}var Lc=Error(r(460)),U2=Error(r(474)),ff=Error(r(542)),Pg={then:function(){}};function G2(a){return a=a.status,a==="fulfilled"||a==="rejected"}function hf(){}function K2(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(hf,hf),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,Y2(a),a;default:if(typeof c.status=="string")c.then(hf,hf);else{if(a=mt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(g){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=g}},function(g){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,Y2(a),a}throw Pc=c,Lc}}var Pc=null;function W2(){if(Pc===null)throw Error(r(459));var a=Pc;return Pc=null,a}function Y2(a){if(a===Lc||a===ff)throw Error(r(483))}var As=!1;function Ig(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bg(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ms(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function _s(a,c,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(ot&2)!==0){var b=g.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),g.pending=c,c=sf(a),L2(a,null,f),c}return rf(a,g,c,f),sf(a)}function Ic(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,ai(a,f)}}function zg(a,c){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var b=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var M={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?b=C=M:C=C.next=M,f=f.next}while(f!==null);C===null?b=C=c:C=C.next=c}else b=C=c;f={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var qg=!1;function Bc(){if(qg){var a=ol;if(a!==null)throw a}}function zc(a,c,f,g){qg=!1;var b=a.updateQueue;As=!1;var C=b.firstBaseUpdate,M=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var U=j,re=U.next;U.next=null,M===null?C=re:M.next=re,M=U;var de=a.alternate;de!==null&&(de=de.updateQueue,j=de.lastBaseUpdate,j!==M&&(j===null?de.firstBaseUpdate=re:j.next=re,de.lastBaseUpdate=U))}if(C!==null){var he=b.baseState;M=0,de=re=U=null,j=C;do{var se=j.lane&-536870913,ae=se!==j.lane;if(ae?(et&se)===se:(g&se)===se){se!==0&&se===sl&&(qg=!0),de!==null&&(de=de.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Ie=a,je=j;se=c;var dt=f;switch(je.tag){case 1:if(Ie=je.payload,typeof Ie=="function"){he=Ie.call(dt,he,se);break e}he=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=je.payload,se=typeof Ie=="function"?Ie.call(dt,he,se):Ie,se==null)break e;he=h({},he,se);break e;case 2:As=!0}}se=j.callback,se!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=b.callbacks,ae===null?b.callbacks=[se]:ae.push(se))}else ae={lane:se,tag:j.tag,payload:j.payload,callback:j.callback,next:null},de===null?(re=de=ae,U=he):de=de.next=ae,M|=se;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;ae=j,j=ae.next,ae.next=null,b.lastBaseUpdate=ae,b.shared.pending=null}}while(!0);de===null&&(U=he),b.baseState=U,b.firstBaseUpdate=re,b.lastBaseUpdate=de,C===null&&(b.shared.lanes=0),Bs|=M,a.lanes=M,a.memoizedState=he}}function X2(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function Z2(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)X2(f[a],c)}var al=K(null),pf=K(0);function J2(a,c){a=Xi,ue(pf,a),ue(al,c),Xi=a|c.baseLanes}function Vg(){ue(pf,Xi),ue(al,al.current)}function Hg(){Xi=pf.current,ie(al),ie(pf)}var Ds=0,We=null,ct=null,Vt=null,mf=!1,ll=!1,Go=!1,gf=0,qc=0,cl=null,G8=0;function jt(){throw Error(r(321))}function Fg(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!nr(a[f],c[f]))return!1;return!0}function $g(a,c,f,g,b,C){return Ds=C,We=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,I.H=a===null||a.memoizedState===null?LN:PN,Go=!1,C=f(g,b),Go=!1,ll&&(C=eN(c,f,g,b)),Q2(a),C}function Q2(a){I.H=Sf;var c=ct!==null&&ct.next!==null;if(Ds=0,Vt=ct=We=null,mf=!1,qc=0,cl=null,c)throw Error(r(300));a===null||nn||(a=a.dependencies,a!==null&&cf(a)&&(nn=!0))}function eN(a,c,f,g){We=a;var b=0;do{if(ll&&(cl=null),qc=0,ll=!1,25<=b)throw Error(r(301));if(b+=1,Vt=ct=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}I.H=Q8,C=c(f,g)}while(ll);return C}function K8(){var a=I.H,c=a.useState()[0];return c=typeof c.then=="function"?Vc(c):c,a=a.useState()[0],(ct!==null?ct.memoizedState:null)!==a&&(We.flags|=1024),c}function Ug(){var a=gf!==0;return gf=0,a}function Gg(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Kg(a){if(mf){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}mf=!1}Ds=0,Vt=ct=We=null,ll=!1,qc=gf=0,cl=null}function Hn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?We.memoizedState=Vt=a:Vt=Vt.next=a,Vt}function Ht(){if(ct===null){var a=We.alternate;a=a!==null?a.memoizedState:null}else a=ct.next;var c=Vt===null?We.memoizedState:Vt.next;if(c!==null)Vt=c,ct=a;else{if(a===null)throw We.alternate===null?Error(r(467)):Error(r(310));ct=a,a={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Vt===null?We.memoizedState=Vt=a:Vt=Vt.next=a}return Vt}function Wg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Vc(a){var c=qc;return qc+=1,cl===null&&(cl=[]),a=K2(cl,a,c),c=We,(Vt===null?c.memoizedState:Vt.next)===null&&(c=c.alternate,I.H=c===null||c.memoizedState===null?LN:PN),a}function yf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Vc(a);if(a.$$typeof===k)return En(a)}throw Error(r(438,String(a)))}function Yg(a){var c=null,f=We.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var g=We.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Wg(),We.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),g=0;g<a;g++)f[g]=H;return c.index++,f}function $i(a,c){return typeof c=="function"?c(a):c}function vf(a){var c=Ht();return Xg(c,ct,a)}function Xg(a,c,f){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var b=a.baseQueue,C=g.pending;if(C!==null){if(b!==null){var M=b.next;b.next=C.next,C.next=M}c.baseQueue=b=C,g.pending=null}if(C=a.baseState,b===null)a.memoizedState=C;else{c=b.next;var j=M=null,U=null,re=c,de=!1;do{var he=re.lane&-536870913;if(he!==re.lane?(et&he)===he:(Ds&he)===he){var se=re.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),he===sl&&(de=!0);else if((Ds&se)===se){re=re.next,se===sl&&(de=!0);continue}else he={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=he,M=C):U=U.next=he,We.lanes|=se,Bs|=se;he=re.action,Go&&f(C,he),C=re.hasEagerState?re.eagerState:f(C,he)}else se={lane:he,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=se,M=C):U=U.next=se,We.lanes|=he,Bs|=he;re=re.next}while(re!==null&&re!==c);if(U===null?M=C:U.next=j,!nr(C,a.memoizedState)&&(nn=!0,de&&(f=ol,f!==null)))throw f;a.memoizedState=C,a.baseState=M,a.baseQueue=U,g.lastRenderedState=C}return b===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function Zg(a){var c=Ht(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var g=f.dispatch,b=f.pending,C=c.memoizedState;if(b!==null){f.pending=null;var M=b=b.next;do C=a(C,M.action),M=M.next;while(M!==b);nr(C,c.memoizedState)||(nn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,g]}function tN(a,c,f){var g=We,b=Ht(),C=it;if(C){if(f===void 0)throw Error(r(407));f=f()}else f=c();var M=!nr((ct||b).memoizedState,f);M&&(b.memoizedState=f,nn=!0),b=b.queue;var j=iN.bind(null,g,b,a);if(Hc(2048,8,j,[a]),b.getSnapshot!==c||M||Vt!==null&&Vt.memoizedState.tag&1){if(g.flags|=2048,ul(9,bf(),rN.bind(null,g,b,f,c),null),mt===null)throw Error(r(349));C||(Ds&124)!==0||nN(g,c,f)}return f}function nN(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=We.updateQueue,c===null?(c=Wg(),We.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function rN(a,c,f,g){c.value=f,c.getSnapshot=g,sN(c)&&oN(a)}function iN(a,c,f){return f(function(){sN(c)&&oN(a)})}function sN(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!nr(a,f)}catch{return!0}}function oN(a){var c=tl(a,2);c!==null&&lr(c,a,2)}function Jg(a){var c=Hn();if(typeof a=="function"){var f=a;if(a=f(),Go){qe(!0);try{f()}finally{qe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},c}function aN(a,c,f,g){return a.baseState=f,Xg(a,ct,typeof g=="function"?g:$i)}function W8(a,c,f,g,b){if(wf(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};I.T!==null?f(!0):C.isTransition=!1,g(C),f=c.pending,f===null?(C.next=c.pending=C,lN(c,C)):(C.next=f.next,c.pending=f.next=C)}}function lN(a,c){var f=c.action,g=c.payload,b=a.state;if(c.isTransition){var C=I.T,M={};I.T=M;try{var j=f(b,g),U=I.S;U!==null&&U(M,j),cN(a,c,j)}catch(re){Qg(a,c,re)}finally{I.T=C}}else try{C=f(b,g),cN(a,c,C)}catch(re){Qg(a,c,re)}}function cN(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){uN(a,c,g)},function(g){return Qg(a,c,g)}):uN(a,c,f)}function uN(a,c,f){c.status="fulfilled",c.value=f,dN(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,lN(a,f)))}function Qg(a,c,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=f,dN(c),c=c.next;while(c!==g)}a.action=null}function dN(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function fN(a,c){return c}function hN(a,c){if(it){var f=mt.formState;if(f!==null){e:{var g=We;if(it){if(At){t:{for(var b=At,C=hi;b.nodeType!==8;){if(!C){b=null;break t}if(b=Xr(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){At=Xr(b.nextSibling),g=b.data==="F!";break e}}Ho(g)}g=!1}g&&(c=f[0])}}return f=Hn(),f.memoizedState=f.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fN,lastRenderedState:c},f.queue=g,f=RN.bind(null,We,g),g.dispatch=f,g=Jg(!1),C=iy.bind(null,We,!1,g.queue),g=Hn(),b={state:c,dispatch:null,action:a,pending:null},g.queue=b,f=W8.bind(null,We,b,C,f),b.dispatch=f,g.memoizedState=a,[c,f,!1]}function pN(a){var c=Ht();return mN(c,ct,a)}function mN(a,c,f){if(c=Xg(a,c,fN)[0],a=vf($i)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Vc(c)}catch(M){throw M===Lc?ff:M}else g=c;c=Ht();var b=c.queue,C=b.dispatch;return f!==c.memoizedState&&(We.flags|=2048,ul(9,bf(),Y8.bind(null,b,f),null)),[g,C,a]}function Y8(a,c){a.action=c}function gN(a){var c=Ht(),f=ct;if(f!==null)return mN(c,f,a);Ht(),c=c.memoizedState,f=Ht();var g=f.queue.dispatch;return f.memoizedState=a,[c,g,!1]}function ul(a,c,f,g){return a={tag:a,create:f,deps:g,inst:c,next:null},c=We.updateQueue,c===null&&(c=Wg(),We.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,c.lastEffect=a),a}function bf(){return{destroy:void 0,resource:void 0}}function yN(){return Ht().memoizedState}function xf(a,c,f,g){var b=Hn();g=g===void 0?null:g,We.flags|=a,b.memoizedState=ul(1|c,bf(),f,g)}function Hc(a,c,f,g){var b=Ht();g=g===void 0?null:g;var C=b.memoizedState.inst;ct!==null&&g!==null&&Fg(g,ct.memoizedState.deps)?b.memoizedState=ul(c,C,f,g):(We.flags|=a,b.memoizedState=ul(1|c,C,f,g))}function vN(a,c){xf(8390656,8,a,c)}function bN(a,c){Hc(2048,8,a,c)}function xN(a,c){return Hc(4,2,a,c)}function wN(a,c){return Hc(4,4,a,c)}function SN(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function CN(a,c,f){f=f!=null?f.concat([a]):null,Hc(4,4,SN.bind(null,c,a),f)}function ey(){}function EN(a,c){var f=Ht();c=c===void 0?null:c;var g=f.memoizedState;return c!==null&&Fg(c,g[1])?g[0]:(f.memoizedState=[a,c],a)}function kN(a,c){var f=Ht();c=c===void 0?null:c;var g=f.memoizedState;if(c!==null&&Fg(c,g[1]))return g[0];if(g=a(),Go){qe(!0);try{a()}finally{qe(!1)}}return f.memoizedState=[g,c],g}function ty(a,c,f){return f===void 0||(Ds&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=AT(),We.lanes|=a,Bs|=a,f)}function NN(a,c,f,g){return nr(f,c)?f:al.current!==null?(a=ty(a,f,g),nr(a,c)||(nn=!0),a):(Ds&42)===0?(nn=!0,a.memoizedState=f):(a=AT(),We.lanes|=a,Bs|=a,c)}function TN(a,c,f,g,b){var C=q.p;q.p=C!==0&&8>C?C:8;var M=I.T,j={};I.T=j,iy(a,!1,c,f);try{var U=b(),re=I.S;if(re!==null&&re(j,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var de=U8(U,g);Fc(a,c,de,ar(a))}else Fc(a,c,g,ar(a))}catch(he){Fc(a,c,{then:function(){},status:"rejected",reason:he},ar())}finally{q.p=C,I.T=M}}function X8(){}function ny(a,c,f,g){if(a.tag!==5)throw Error(r(476));var b=AN(a).queue;TN(a,b,c,X,f===null?X8:function(){return MN(a),f(g)})}function AN(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:X},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function MN(a){var c=AN(a).next.queue;Fc(a,c,{},ar())}function ry(){return En(au)}function _N(){return Ht().memoizedState}function DN(){return Ht().memoizedState}function Z8(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=ar();a=Ms(f);var g=_s(c,a,f);g!==null&&(lr(g,c,f),Ic(g,c,f)),c={cache:Og()},a.payload=c;return}c=c.return}}function J8(a,c,f){var g=ar();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},wf(a)?ON(c,f):(f=Cg(a,c,f,g),f!==null&&(lr(f,a,g),jN(f,c,g)))}function RN(a,c,f){var g=ar();Fc(a,c,f,g)}function Fc(a,c,f,g){var b={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(wf(a))ON(c,b);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var M=c.lastRenderedState,j=C(M,f);if(b.hasEagerState=!0,b.eagerState=j,nr(j,M))return rf(a,c,b,0),mt===null&&nf(),!1}catch{}finally{}if(f=Cg(a,c,b,g),f!==null)return lr(f,a,g),jN(f,c,g),!0}return!1}function iy(a,c,f,g){if(g={lane:2,revertLane:Py(),action:g,hasEagerState:!1,eagerState:null,next:null},wf(a)){if(c)throw Error(r(479))}else c=Cg(a,f,g,2),c!==null&&lr(c,a,2)}function wf(a){var c=a.alternate;return a===We||c!==null&&c===We}function ON(a,c){ll=mf=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function jN(a,c,f){if((f&4194048)!==0){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,ai(a,f)}}var Sf={readContext:En,use:yf,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},LN={readContext:En,use:yf,useCallback:function(a,c){return Hn().memoizedState=[a,c===void 0?null:c],a},useContext:En,useEffect:vN,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,xf(4194308,4,SN.bind(null,c,a),f)},useLayoutEffect:function(a,c){return xf(4194308,4,a,c)},useInsertionEffect:function(a,c){xf(4,2,a,c)},useMemo:function(a,c){var f=Hn();c=c===void 0?null:c;var g=a();if(Go){qe(!0);try{a()}finally{qe(!1)}}return f.memoizedState=[g,c],g},useReducer:function(a,c,f){var g=Hn();if(f!==void 0){var b=f(c);if(Go){qe(!0);try{f(c)}finally{qe(!1)}}}else b=c;return g.memoizedState=g.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},g.queue=a,a=a.dispatch=J8.bind(null,We,a),[g.memoizedState,a]},useRef:function(a){var c=Hn();return a={current:a},c.memoizedState=a},useState:function(a){a=Jg(a);var c=a.queue,f=RN.bind(null,We,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:ey,useDeferredValue:function(a,c){var f=Hn();return ty(f,a,c)},useTransition:function(){var a=Jg(!1);return a=TN.bind(null,We,a.queue,!0,!1),Hn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var g=We,b=Hn();if(it){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),mt===null)throw Error(r(349));(et&124)!==0||nN(g,c,f)}b.memoizedState=f;var C={value:f,getSnapshot:c};return b.queue=C,vN(iN.bind(null,g,C,a),[a]),g.flags|=2048,ul(9,bf(),rN.bind(null,g,C,f,c),null),f},useId:function(){var a=Hn(),c=mt.identifierPrefix;if(it){var f=Vi,g=qi;f=(g&~(1<<32-He(g)-1)).toString(32)+f,c=""+c+"R"+f,f=gf++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=G8++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:ry,useFormState:hN,useActionState:hN,useOptimistic:function(a){var c=Hn();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=iy.bind(null,We,!0,f),f.dispatch=c,[a,c]},useMemoCache:Yg,useCacheRefresh:function(){return Hn().memoizedState=Z8.bind(null,We)}},PN={readContext:En,use:yf,useCallback:EN,useContext:En,useEffect:bN,useImperativeHandle:CN,useInsertionEffect:xN,useLayoutEffect:wN,useMemo:kN,useReducer:vf,useRef:yN,useState:function(){return vf($i)},useDebugValue:ey,useDeferredValue:function(a,c){var f=Ht();return NN(f,ct.memoizedState,a,c)},useTransition:function(){var a=vf($i)[0],c=Ht().memoizedState;return[typeof a=="boolean"?a:Vc(a),c]},useSyncExternalStore:tN,useId:_N,useHostTransitionStatus:ry,useFormState:pN,useActionState:pN,useOptimistic:function(a,c){var f=Ht();return aN(f,ct,a,c)},useMemoCache:Yg,useCacheRefresh:DN},Q8={readContext:En,use:yf,useCallback:EN,useContext:En,useEffect:bN,useImperativeHandle:CN,useInsertionEffect:xN,useLayoutEffect:wN,useMemo:kN,useReducer:Zg,useRef:yN,useState:function(){return Zg($i)},useDebugValue:ey,useDeferredValue:function(a,c){var f=Ht();return ct===null?ty(f,a,c):NN(f,ct.memoizedState,a,c)},useTransition:function(){var a=Zg($i)[0],c=Ht().memoizedState;return[typeof a=="boolean"?a:Vc(a),c]},useSyncExternalStore:tN,useId:_N,useHostTransitionStatus:ry,useFormState:gN,useActionState:gN,useOptimistic:function(a,c){var f=Ht();return ct!==null?aN(f,ct,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Yg,useCacheRefresh:DN},dl=null,$c=0;function Cf(a){var c=$c;return $c+=1,dl===null&&(dl=[]),K2(dl,a,c)}function Uc(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Ef(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function IN(a){var c=a._init;return c(a._payload)}function BN(a){function c(Q,Y){if(a){var ne=Q.deletions;ne===null?(Q.deletions=[Y],Q.flags|=16):ne.push(Y)}}function f(Q,Y){if(!a)return null;for(;Y!==null;)c(Q,Y),Y=Y.sibling;return null}function g(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function b(Q,Y){return Q=zi(Q,Y),Q.index=0,Q.sibling=null,Q}function C(Q,Y,ne){return Q.index=ne,a?(ne=Q.alternate,ne!==null?(ne=ne.index,ne<Y?(Q.flags|=67108866,Y):ne):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function M(Q){return a&&Q.alternate===null&&(Q.flags|=67108866),Q}function j(Q,Y,ne,fe){return Y===null||Y.tag!==6?(Y=kg(ne,Q.mode,fe),Y.return=Q,Y):(Y=b(Y,ne),Y.return=Q,Y)}function U(Q,Y,ne,fe){var Ee=ne.type;return Ee===x?de(Q,Y,ne.props.children,fe,ne.key):Y!==null&&(Y.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&IN(Ee)===Y.type)?(Y=b(Y,ne.props),Uc(Y,ne),Y.return=Q,Y):(Y=of(ne.type,ne.key,ne.props,null,Q.mode,fe),Uc(Y,ne),Y.return=Q,Y)}function re(Q,Y,ne,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=Ng(ne,Q.mode,fe),Y.return=Q,Y):(Y=b(Y,ne.children||[]),Y.return=Q,Y)}function de(Q,Y,ne,fe,Ee){return Y===null||Y.tag!==7?(Y=Bo(ne,Q.mode,fe,Ee),Y.return=Q,Y):(Y=b(Y,ne),Y.return=Q,Y)}function he(Q,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=kg(""+Y,Q.mode,ne),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case m:return ne=of(Y.type,Y.key,Y.props,null,Q.mode,ne),Uc(ne,Y),ne.return=Q,ne;case y:return Y=Ng(Y,Q.mode,ne),Y.return=Q,Y;case D:var fe=Y._init;return Y=fe(Y._payload),he(Q,Y,ne)}if(F(Y)||L(Y))return Y=Bo(Y,Q.mode,ne,null),Y.return=Q,Y;if(typeof Y.then=="function")return he(Q,Cf(Y),ne);if(Y.$$typeof===k)return he(Q,uf(Q,Y),ne);Ef(Q,Y)}return null}function se(Q,Y,ne,fe){var Ee=Y!==null?Y.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ee!==null?null:j(Q,Y,""+ne,fe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case m:return ne.key===Ee?U(Q,Y,ne,fe):null;case y:return ne.key===Ee?re(Q,Y,ne,fe):null;case D:return Ee=ne._init,ne=Ee(ne._payload),se(Q,Y,ne,fe)}if(F(ne)||L(ne))return Ee!==null?null:de(Q,Y,ne,fe,null);if(typeof ne.then=="function")return se(Q,Y,Cf(ne),fe);if(ne.$$typeof===k)return se(Q,Y,uf(Q,ne),fe);Ef(Q,ne)}return null}function ae(Q,Y,ne,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(ne)||null,j(Y,Q,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case m:return Q=Q.get(fe.key===null?ne:fe.key)||null,U(Y,Q,fe,Ee);case y:return Q=Q.get(fe.key===null?ne:fe.key)||null,re(Y,Q,fe,Ee);case D:var Ye=fe._init;return fe=Ye(fe._payload),ae(Q,Y,ne,fe,Ee)}if(F(fe)||L(fe))return Q=Q.get(ne)||null,de(Y,Q,fe,Ee,null);if(typeof fe.then=="function")return ae(Q,Y,ne,Cf(fe),Ee);if(fe.$$typeof===k)return ae(Q,Y,ne,uf(Y,fe),Ee);Ef(Y,fe)}return null}function Ie(Q,Y,ne,fe){for(var Ee=null,Ye=null,Me=Y,Pe=Y=0,sn=null;Me!==null&&Pe<ne.length;Pe++){Me.index>Pe?(sn=Me,Me=null):sn=Me.sibling;var nt=se(Q,Me,ne[Pe],fe);if(nt===null){Me===null&&(Me=sn);break}a&&Me&&nt.alternate===null&&c(Q,Me),Y=C(nt,Y,Pe),Ye===null?Ee=nt:Ye.sibling=nt,Ye=nt,Me=sn}if(Pe===ne.length)return f(Q,Me),it&&qo(Q,Pe),Ee;if(Me===null){for(;Pe<ne.length;Pe++)Me=he(Q,ne[Pe],fe),Me!==null&&(Y=C(Me,Y,Pe),Ye===null?Ee=Me:Ye.sibling=Me,Ye=Me);return it&&qo(Q,Pe),Ee}for(Me=g(Me);Pe<ne.length;Pe++)sn=ae(Me,Q,Pe,ne[Pe],fe),sn!==null&&(a&&sn.alternate!==null&&Me.delete(sn.key===null?Pe:sn.key),Y=C(sn,Y,Pe),Ye===null?Ee=sn:Ye.sibling=sn,Ye=sn);return a&&Me.forEach(function(Ks){return c(Q,Ks)}),it&&qo(Q,Pe),Ee}function je(Q,Y,ne,fe){if(ne==null)throw Error(r(151));for(var Ee=null,Ye=null,Me=Y,Pe=Y=0,sn=null,nt=ne.next();Me!==null&&!nt.done;Pe++,nt=ne.next()){Me.index>Pe?(sn=Me,Me=null):sn=Me.sibling;var Ks=se(Q,Me,nt.value,fe);if(Ks===null){Me===null&&(Me=sn);break}a&&Me&&Ks.alternate===null&&c(Q,Me),Y=C(Ks,Y,Pe),Ye===null?Ee=Ks:Ye.sibling=Ks,Ye=Ks,Me=sn}if(nt.done)return f(Q,Me),it&&qo(Q,Pe),Ee;if(Me===null){for(;!nt.done;Pe++,nt=ne.next())nt=he(Q,nt.value,fe),nt!==null&&(Y=C(nt,Y,Pe),Ye===null?Ee=nt:Ye.sibling=nt,Ye=nt);return it&&qo(Q,Pe),Ee}for(Me=g(Me);!nt.done;Pe++,nt=ne.next())nt=ae(Me,Q,Pe,nt.value,fe),nt!==null&&(a&&nt.alternate!==null&&Me.delete(nt.key===null?Pe:nt.key),Y=C(nt,Y,Pe),Ye===null?Ee=nt:Ye.sibling=nt,Ye=nt);return a&&Me.forEach(function(eF){return c(Q,eF)}),it&&qo(Q,Pe),Ee}function dt(Q,Y,ne,fe){if(typeof ne=="object"&&ne!==null&&ne.type===x&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case m:e:{for(var Ee=ne.key;Y!==null;){if(Y.key===Ee){if(Ee=ne.type,Ee===x){if(Y.tag===7){f(Q,Y.sibling),fe=b(Y,ne.props.children),fe.return=Q,Q=fe;break e}}else if(Y.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&IN(Ee)===Y.type){f(Q,Y.sibling),fe=b(Y,ne.props),Uc(fe,ne),fe.return=Q,Q=fe;break e}f(Q,Y);break}else c(Q,Y);Y=Y.sibling}ne.type===x?(fe=Bo(ne.props.children,Q.mode,fe,ne.key),fe.return=Q,Q=fe):(fe=of(ne.type,ne.key,ne.props,null,Q.mode,fe),Uc(fe,ne),fe.return=Q,Q=fe)}return M(Q);case y:e:{for(Ee=ne.key;Y!==null;){if(Y.key===Ee)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){f(Q,Y.sibling),fe=b(Y,ne.children||[]),fe.return=Q,Q=fe;break e}else{f(Q,Y);break}else c(Q,Y);Y=Y.sibling}fe=Ng(ne,Q.mode,fe),fe.return=Q,Q=fe}return M(Q);case D:return Ee=ne._init,ne=Ee(ne._payload),dt(Q,Y,ne,fe)}if(F(ne))return Ie(Q,Y,ne,fe);if(L(ne)){if(Ee=L(ne),typeof Ee!="function")throw Error(r(150));return ne=Ee.call(ne),je(Q,Y,ne,fe)}if(typeof ne.then=="function")return dt(Q,Y,Cf(ne),fe);if(ne.$$typeof===k)return dt(Q,Y,uf(Q,ne),fe);Ef(Q,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Y!==null&&Y.tag===6?(f(Q,Y.sibling),fe=b(Y,ne),fe.return=Q,Q=fe):(f(Q,Y),fe=kg(ne,Q.mode,fe),fe.return=Q,Q=fe),M(Q)):f(Q,Y)}return function(Q,Y,ne,fe){try{$c=0;var Ee=dt(Q,Y,ne,fe);return dl=null,Ee}catch(Me){if(Me===Lc||Me===ff)throw Me;var Ye=rr(29,Me,null,Q.mode);return Ye.lanes=fe,Ye.return=Q,Ye}finally{}}}var fl=BN(!0),zN=BN(!1),Tr=K(null),pi=null;function Rs(a){var c=a.alternate;ue(Xt,Xt.current&1),ue(Tr,a),pi===null&&(c===null||al.current!==null||c.memoizedState!==null)&&(pi=a)}function qN(a){if(a.tag===22){if(ue(Xt,Xt.current),ue(Tr,a),pi===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(pi=a)}}else Os()}function Os(){ue(Xt,Xt.current),ue(Tr,Tr.current)}function Ui(a){ie(Tr),pi===a&&(pi=null),ie(Xt)}var Xt=K(0);function kf(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Wy(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function sy(a,c,f,g){c=a.memoizedState,f=f(g,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var oy={enqueueSetState:function(a,c,f){a=a._reactInternals;var g=ar(),b=Ms(g);b.payload=c,f!=null&&(b.callback=f),c=_s(a,b,g),c!==null&&(lr(c,a,g),Ic(c,a,g))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var g=ar(),b=Ms(g);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=_s(a,b,g),c!==null&&(lr(c,a,g),Ic(c,a,g))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=ar(),g=Ms(f);g.tag=2,c!=null&&(g.callback=c),c=_s(a,g,f),c!==null&&(lr(c,a,f),Ic(c,a,f))}};function VN(a,c,f,g,b,C,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,C,M):c.prototype&&c.prototype.isPureReactComponent?!Tc(f,g)||!Tc(b,C):!0}function HN(a,c,f,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==a&&oy.enqueueReplaceState(c,c.state,null)}function Ko(a,c){var f=c;if("ref"in c){f={};for(var g in c)g!=="ref"&&(f[g]=c[g])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var b in a)f[b]===void 0&&(f[b]=a[b])}return f}var Nf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function FN(a){Nf(a)}function $N(a){console.error(a)}function UN(a){Nf(a)}function Tf(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function GN(a,c,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function ay(a,c,f){return f=Ms(f),f.tag=3,f.payload={element:null},f.callback=function(){Tf(a,c)},f}function KN(a){return a=Ms(a),a.tag=3,a}function WN(a,c,f,g){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var C=g.value;a.payload=function(){return b(C)},a.callback=function(){GN(c,f,g)}}var M=f.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){GN(c,f,g),typeof b!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var j=g.stack;this.componentDidCatch(g.value,{componentStack:j!==null?j:""})})}function eH(a,c,f,g,b){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=f.alternate,c!==null&&Rc(c,f,b,!0),f=Tr.current,f!==null){switch(f.tag){case 13:return pi===null?Dy():f.alternate===null&&Mt===0&&(Mt=3),f.flags&=-257,f.flags|=65536,f.lanes=b,g===Pg?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([g]):c.add(g),Oy(a,g,b)),!1;case 22:return f.flags|=65536,g===Pg?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([g]):f.add(g)),Oy(a,g,b)),!1}throw Error(r(435,f.tag))}return Oy(a,g,b),Dy(),!1}if(it)return c=Tr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,g!==Mg&&(a=Error(r(422),{cause:g}),Dc(Cr(a,f)))):(g!==Mg&&(c=Error(r(423),{cause:g}),Dc(Cr(c,f))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,g=Cr(g,f),b=ay(a.stateNode,g,b),zg(a,b),Mt!==4&&(Mt=2)),!1;var C=Error(r(520),{cause:g});if(C=Cr(C,f),Jc===null?Jc=[C]:Jc.push(C),Mt!==4&&(Mt=2),c===null)return!0;g=Cr(g,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=b&-b,f.lanes|=a,a=ay(f.stateNode,g,a),zg(f,a),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(zs===null||!zs.has(C))))return f.flags|=65536,b&=-b,f.lanes|=b,b=KN(b),WN(b,a,f,g),zg(f,b),!1}f=f.return}while(f!==null);return!1}var YN=Error(r(461)),nn=!1;function fn(a,c,f,g){c.child=a===null?zN(c,null,f,g):fl(c,a.child,f,g)}function XN(a,c,f,g,b){f=f.render;var C=c.ref;if("ref"in g){var M={};for(var j in g)j!=="ref"&&(M[j]=g[j])}else M=g;return $o(c),g=$g(a,c,f,M,C,b),j=Ug(),a!==null&&!nn?(Gg(a,c,b),Gi(a,c,b)):(it&&j&&Tg(c),c.flags|=1,fn(a,c,g,b),c.child)}function ZN(a,c,f,g,b){if(a===null){var C=f.type;return typeof C=="function"&&!Eg(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,JN(a,c,C,g,b)):(a=of(f.type,null,g,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!my(a,b)){var M=C.memoizedProps;if(f=f.compare,f=f!==null?f:Tc,f(M,g)&&a.ref===c.ref)return Gi(a,c,b)}return c.flags|=1,a=zi(C,g),a.ref=c.ref,a.return=c,c.child=a}function JN(a,c,f,g,b){if(a!==null){var C=a.memoizedProps;if(Tc(C,g)&&a.ref===c.ref)if(nn=!1,c.pendingProps=g=C,my(a,b))(a.flags&131072)!==0&&(nn=!0);else return c.lanes=a.lanes,Gi(a,c,b)}return ly(a,c,f,g,b)}function QN(a,c,f){var g=c.pendingProps,b=g.children,C=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=C!==null?C.baseLanes|f:f,a!==null){for(b=c.child=a.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;c.childLanes=C&~g}else c.childLanes=0,c.child=null;return eT(a,c,g,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&df(c,C!==null?C.cachePool:null),C!==null?J2(c,C):Vg(),qN(c);else return c.lanes=c.childLanes=536870912,eT(a,c,C!==null?C.baseLanes|f:f,f)}else C!==null?(df(c,C.cachePool),J2(c,C),Os(),c.memoizedState=null):(a!==null&&df(c,null),Vg(),Os());return fn(a,c,b,f),c.child}function eT(a,c,f,g){var b=Lg();return b=b===null?null:{parent:Yt._currentValue,pool:b},c.memoizedState={baseLanes:f,cachePool:b},a!==null&&df(c,null),Vg(),qN(c),a!==null&&Rc(a,c,g,!0),null}function Af(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function ly(a,c,f,g,b){return $o(c),f=$g(a,c,f,g,void 0,b),g=Ug(),a!==null&&!nn?(Gg(a,c,b),Gi(a,c,b)):(it&&g&&Tg(c),c.flags|=1,fn(a,c,f,b),c.child)}function tT(a,c,f,g,b,C){return $o(c),c.updateQueue=null,f=eN(c,g,f,b),Q2(a),g=Ug(),a!==null&&!nn?(Gg(a,c,C),Gi(a,c,C)):(it&&g&&Tg(c),c.flags|=1,fn(a,c,f,C),c.child)}function nT(a,c,f,g,b){if($o(c),c.stateNode===null){var C=nl,M=f.contextType;typeof M=="object"&&M!==null&&(C=En(M)),C=new f(g,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=oy,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=g,C.state=c.memoizedState,C.refs={},Ig(c),M=f.contextType,C.context=typeof M=="object"&&M!==null?En(M):nl,C.state=c.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(sy(c,f,M,g),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&oy.enqueueReplaceState(C,C.state,null),zc(c,g,C,b),Bc(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(a===null){C=c.stateNode;var j=c.memoizedProps,U=Ko(f,j);C.props=U;var re=C.context,de=f.contextType;M=nl,typeof de=="object"&&de!==null&&(M=En(de));var he=f.getDerivedStateFromProps;de=typeof he=="function"||typeof C.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j||re!==M)&&HN(c,C,g,M),As=!1;var se=c.memoizedState;C.state=se,zc(c,g,C,b),Bc(),re=c.memoizedState,j||se!==re||As?(typeof he=="function"&&(sy(c,f,he,g),re=c.memoizedState),(U=As||VN(c,f,U,g,se,re,M))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=re),C.props=g,C.state=re,C.context=M,g=U):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{C=c.stateNode,Bg(a,c),M=c.memoizedProps,de=Ko(f,M),C.props=de,he=c.pendingProps,se=C.context,re=f.contextType,U=nl,typeof re=="object"&&re!==null&&(U=En(re)),j=f.getDerivedStateFromProps,(re=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==he||se!==U)&&HN(c,C,g,U),As=!1,se=c.memoizedState,C.state=se,zc(c,g,C,b),Bc();var ae=c.memoizedState;M!==he||se!==ae||As||a!==null&&a.dependencies!==null&&cf(a.dependencies)?(typeof j=="function"&&(sy(c,f,j,g),ae=c.memoizedState),(de=As||VN(c,f,de,g,se,ae,U)||a!==null&&a.dependencies!==null&&cf(a.dependencies))?(re||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,ae,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,ae,U)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=ae),C.props=g,C.state=ae,C.context=U,g=de):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=1024),g=!1)}return C=g,Af(a,c),g=(c.flags&128)!==0,C||g?(C=c.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&g?(c.child=fl(c,a.child,null,b),c.child=fl(c,null,f,b)):fn(a,c,f,b),c.memoizedState=C.state,a=c.child):a=Gi(a,c,b),a}function rT(a,c,f,g){return _c(),c.flags|=256,fn(a,c,f,g),c.child}var cy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uy(a){return{baseLanes:a,cachePool:$2()}}function dy(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=Ar),a}function iT(a,c,f){var g=c.pendingProps,b=!1,C=(c.flags&128)!==0,M;if((M=C)||(M=a!==null&&a.memoizedState===null?!1:(Xt.current&2)!==0),M&&(b=!0,c.flags&=-129),M=(c.flags&32)!==0,c.flags&=-33,a===null){if(it){if(b?Rs(c):Os(),it){var j=At,U;if(U=j){e:{for(U=j,j=hi;U.nodeType!==8;){if(!j){j=null;break e}if(U=Xr(U.nextSibling),U===null){j=null;break e}}j=U}j!==null?(c.memoizedState={dehydrated:j,treeContext:zo!==null?{id:qi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},U=rr(18,null,null,0),U.stateNode=j,U.return=c,c.child=U,jn=c,At=null,U=!0):U=!1}U||Ho(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return Wy(j)?c.lanes=32:c.lanes=536870912,null;Ui(c)}return j=g.children,g=g.fallback,b?(Os(),b=c.mode,j=Mf({mode:"hidden",children:j},b),g=Bo(g,b,f,null),j.return=c,g.return=c,j.sibling=g,c.child=j,b=c.child,b.memoizedState=uy(f),b.childLanes=dy(a,M,f),c.memoizedState=cy,g):(Rs(c),fy(c,j))}if(U=a.memoizedState,U!==null&&(j=U.dehydrated,j!==null)){if(C)c.flags&256?(Rs(c),c.flags&=-257,c=hy(a,c,f)):c.memoizedState!==null?(Os(),c.child=a.child,c.flags|=128,c=null):(Os(),b=g.fallback,j=c.mode,g=Mf({mode:"visible",children:g.children},j),b=Bo(b,j,f,null),b.flags|=2,g.return=c,b.return=c,g.sibling=b,c.child=g,fl(c,a.child,null,f),g=c.child,g.memoizedState=uy(f),g.childLanes=dy(a,M,f),c.memoizedState=cy,c=b);else if(Rs(c),Wy(j)){if(M=j.nextSibling&&j.nextSibling.dataset,M)var re=M.dgst;M=re,g=Error(r(419)),g.stack="",g.digest=M,Dc({value:g,source:null,stack:null}),c=hy(a,c,f)}else if(nn||Rc(a,c,f,!1),M=(f&a.childLanes)!==0,nn||M){if(M=mt,M!==null&&(g=f&-f,g=(g&42)!==0?1:Li(g),g=(g&(M.suspendedLanes|f))!==0?0:g,g!==0&&g!==U.retryLane))throw U.retryLane=g,tl(a,g),lr(M,a,g),YN;j.data==="$?"||Dy(),c=hy(a,c,f)}else j.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=U.treeContext,At=Xr(j.nextSibling),jn=c,it=!0,Vo=null,hi=!1,a!==null&&(kr[Nr++]=qi,kr[Nr++]=Vi,kr[Nr++]=zo,qi=a.id,Vi=a.overflow,zo=c),c=fy(c,g.children),c.flags|=4096);return c}return b?(Os(),b=g.fallback,j=c.mode,U=a.child,re=U.sibling,g=zi(U,{mode:"hidden",children:g.children}),g.subtreeFlags=U.subtreeFlags&65011712,re!==null?b=zi(re,b):(b=Bo(b,j,f,null),b.flags|=2),b.return=c,g.return=c,g.sibling=b,c.child=g,g=b,b=c.child,j=a.child.memoizedState,j===null?j=uy(f):(U=j.cachePool,U!==null?(re=Yt._currentValue,U=U.parent!==re?{parent:re,pool:re}:U):U=$2(),j={baseLanes:j.baseLanes|f,cachePool:U}),b.memoizedState=j,b.childLanes=dy(a,M,f),c.memoizedState=cy,g):(Rs(c),f=a.child,a=f.sibling,f=zi(f,{mode:"visible",children:g.children}),f.return=c,f.sibling=null,a!==null&&(M=c.deletions,M===null?(c.deletions=[a],c.flags|=16):M.push(a)),c.child=f,c.memoizedState=null,f)}function fy(a,c){return c=Mf({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Mf(a,c){return a=rr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function hy(a,c,f){return fl(c,a.child,null,f),a=fy(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function sT(a,c,f){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),Dg(a.return,c,f)}function py(a,c,f,g,b){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:b}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=f,C.tailMode=b)}function oT(a,c,f){var g=c.pendingProps,b=g.revealOrder,C=g.tail;if(fn(a,c,g.children,f),g=Xt.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&sT(a,f,c);else if(a.tag===19)sT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(ue(Xt,g),b){case"forwards":for(f=c.child,b=null;f!==null;)a=f.alternate,a!==null&&kf(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=c.child,c.child=null):(b=f.sibling,f.sibling=null),py(c,!1,b,f,C);break;case"backwards":for(f=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&kf(a)===null){c.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}py(c,!0,f,null,C);break;case"together":py(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Gi(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Bs|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(Rc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=zi(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=zi(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function my(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&cf(a)))}function tH(a,c,f){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),Ts(c,Yt,a.memoizedState.cache),_c();break;case 27:case 5:Ne(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:Ts(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(Rs(c),c.flags|=128,null):(f&c.child.childLanes)!==0?iT(a,c,f):(Rs(c),a=Gi(a,c,f),a!==null?a.sibling:null);Rs(c);break;case 19:var b=(a.flags&128)!==0;if(g=(f&c.childLanes)!==0,g||(Rc(a,c,f,!1),g=(f&c.childLanes)!==0),b){if(g)return oT(a,c,f);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ue(Xt,Xt.current),g)break;return null;case 22:case 23:return c.lanes=0,QN(a,c,f);case 24:Ts(c,Yt,a.memoizedState.cache)}return Gi(a,c,f)}function aT(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)nn=!0;else{if(!my(a,f)&&(c.flags&128)===0)return nn=!1,tH(a,c,f);nn=(a.flags&131072)!==0}else nn=!1,it&&(c.flags&1048576)!==0&&I2(c,lf,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var g=c.elementType,b=g._init;if(g=b(g._payload),c.type=g,typeof g=="function")Eg(g)?(a=Ko(g,a),c.tag=1,c=nT(null,c,g,a,f)):(c.tag=0,c=ly(null,c,g,a,f));else{if(g!=null){if(b=g.$$typeof,b===T){c.tag=11,c=XN(null,c,g,a,f);break e}else if(b===O){c.tag=14,c=ZN(null,c,g,a,f);break e}}throw c=B(g)||g,Error(r(306,c,""))}}return c;case 0:return ly(a,c,c.type,c.pendingProps,f);case 1:return g=c.type,b=Ko(g,c.pendingProps),nT(a,c,g,b,f);case 3:e:{if(le(c,c.stateNode.containerInfo),a===null)throw Error(r(387));g=c.pendingProps;var C=c.memoizedState;b=C.element,Bg(a,c),zc(c,g,null,f);var M=c.memoizedState;if(g=M.cache,Ts(c,Yt,g),g!==C.cache&&Rg(c,[Yt],f,!0),Bc(),g=M.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:M.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=rT(a,c,g,f);break e}else if(g!==b){b=Cr(Error(r(424)),c),Dc(b),c=rT(a,c,g,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(At=Xr(a.firstChild),jn=c,it=!0,Vo=null,hi=!0,f=zN(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(_c(),g===b){c=Gi(a,c,f);break e}fn(a,c,g,f)}c=c.child}return c;case 26:return Af(a,c),a===null?(f=dA(c.type,null,c.pendingProps,null))?c.memoizedState=f:it||(f=c.type,a=c.pendingProps,g=Ff(ee.current).createElement(f),g[zt]=c,g[tn]=a,pn(g,f,a),vt(g),c.stateNode=g):c.memoizedState=dA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Ne(c),a===null&&it&&(g=c.stateNode=lA(c.type,c.pendingProps,ee.current),jn=c,hi=!0,b=At,Hs(c.type)?(Yy=b,At=Xr(g.firstChild)):At=b),fn(a,c,c.pendingProps.children,f),Af(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&it&&((b=g=At)&&(g=MH(g,c.type,c.pendingProps,hi),g!==null?(c.stateNode=g,jn=c,At=Xr(g.firstChild),hi=!1,b=!0):b=!1),b||Ho(c)),Ne(c),b=c.type,C=c.pendingProps,M=a!==null?a.memoizedProps:null,g=C.children,Uy(b,C)?g=null:M!==null&&Uy(b,M)&&(c.flags|=32),c.memoizedState!==null&&(b=$g(a,c,K8,null,null,f),au._currentValue=b),Af(a,c),fn(a,c,g,f),c.child;case 6:return a===null&&it&&((a=f=At)&&(f=_H(f,c.pendingProps,hi),f!==null?(c.stateNode=f,jn=c,At=null,a=!0):a=!1),a||Ho(c)),null;case 13:return iT(a,c,f);case 4:return le(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=fl(c,null,g,f):fn(a,c,g,f),c.child;case 11:return XN(a,c,c.type,c.pendingProps,f);case 7:return fn(a,c,c.pendingProps,f),c.child;case 8:return fn(a,c,c.pendingProps.children,f),c.child;case 12:return fn(a,c,c.pendingProps.children,f),c.child;case 10:return g=c.pendingProps,Ts(c,c.type,g.value),fn(a,c,g.children,f),c.child;case 9:return b=c.type._context,g=c.pendingProps.children,$o(c),b=En(b),g=g(b),c.flags|=1,fn(a,c,g,f),c.child;case 14:return ZN(a,c,c.type,c.pendingProps,f);case 15:return JN(a,c,c.type,c.pendingProps,f);case 19:return oT(a,c,f);case 31:return g=c.pendingProps,f=c.mode,g={mode:g.mode,children:g.children},a===null?(f=Mf(g,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=zi(a.child,g),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return QN(a,c,f);case 24:return $o(c),g=En(Yt),a===null?(b=Lg(),b===null&&(b=mt,C=Og(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=f),b=C),c.memoizedState={parent:g,cache:b},Ig(c),Ts(c,Yt,b)):((a.lanes&f)!==0&&(Bg(a,c),zc(c,null,null,f),Bc()),b=a.memoizedState,C=c.memoizedState,b.parent!==g?(b={parent:g,cache:g},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),Ts(c,Yt,g)):(g=C.cache,Ts(c,Yt,g),g!==b.cache&&Rg(c,[Yt],f,!0))),fn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Ki(a){a.flags|=4}function lT(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!gA(c)){if(c=Tr.current,c!==null&&((et&4194048)===et?pi!==null:(et&62914560)!==et&&(et&536870912)===0||c!==pi))throw Pc=Pg,U2;a.flags|=8192}}function _f(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?ji():536870912,a.lanes|=c,gl|=c)}function Gc(a,c){if(!it)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ct(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(c)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags&65011712,g|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=g,a.childLanes=f,c}function nH(a,c,f){var g=c.pendingProps;switch(Ag(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(c),null;case 1:return Ct(c),null;case 3:return f=c.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Fi(Yt),ye(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Mc(c)?Ki(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,q2())),Ct(c),null;case 26:return f=c.memoizedState,a===null?(Ki(c),f!==null?(Ct(c),lT(c,f)):(Ct(c),c.flags&=-16777217)):f?f!==a.memoizedState?(Ki(c),Ct(c),lT(c,f)):(Ct(c),c.flags&=-16777217):(a.memoizedProps!==g&&Ki(c),Ct(c),c.flags&=-16777217),null;case 27:Oe(c),f=ee.current;var b=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==g&&Ki(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ct(c),null}a=$.current,Mc(c)?B2(c):(a=lA(b,g,f),c.stateNode=a,Ki(c))}return Ct(c),null;case 5:if(Oe(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&Ki(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ct(c),null}if(a=$.current,Mc(c))B2(c);else{switch(b=Ff(ee.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?b.createElement("select",{is:g.is}):b.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?b.createElement(f,{is:g.is}):b.createElement(f)}}a[zt]=c,a[tn]=g;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=a;e:switch(pn(a,f,g),f){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ki(c)}}return Ct(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==g&&Ki(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(a=ee.current,Mc(c)){if(a=c.stateNode,f=c.memoizedProps,g=null,b=jn,b!==null)switch(b.tag){case 27:case 5:g=b.memoizedProps}a[zt]=c,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||tA(a.nodeValue,f)),a||Ho(c)}else a=Ff(a).createTextNode(g),a[zt]=c,c.stateNode=a}return Ct(c),null;case 13:if(g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=Mc(c),g!==null&&g.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[zt]=c}else _c(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ct(c),b=!1}else b=q2(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Ui(c),c):(Ui(c),null)}if(Ui(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=g!==null,a=a!==null&&a.memoizedState!==null,f){g=c.child,b=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(b=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==b&&(g.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),_f(c,c.updateQueue),Ct(c),null;case 4:return ye(),a===null&&qy(c.stateNode.containerInfo),Ct(c),null;case 10:return Fi(c.type),Ct(c),null;case 19:if(ie(Xt),b=c.memoizedState,b===null)return Ct(c),null;if(g=(c.flags&128)!==0,C=b.rendering,C===null)if(g)Gc(b,!1);else{if(Mt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=kf(a),C!==null){for(c.flags|=128,Gc(b,!1),a=C.updateQueue,c.updateQueue=a,_f(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)P2(f,a),f=f.sibling;return ue(Xt,Xt.current&1|2),c.child}a=a.sibling}b.tail!==null&&Ae()>Of&&(c.flags|=128,g=!0,Gc(b,!1),c.lanes=4194304)}else{if(!g)if(a=kf(C),a!==null){if(c.flags|=128,g=!0,a=a.updateQueue,c.updateQueue=a,_f(c,a),Gc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!it)return Ct(c),null}else 2*Ae()-b.renderingStartTime>Of&&f!==536870912&&(c.flags|=128,g=!0,Gc(b,!1),c.lanes=4194304);b.isBackwards?(C.sibling=c.child,c.child=C):(a=b.last,a!==null?a.sibling=C:c.child=C,b.last=C)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Ae(),c.sibling=null,a=Xt.current,ue(Xt,g?a&1|2:a&1),c):(Ct(c),null);case 22:case 23:return Ui(c),Hg(),g=c.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(f&536870912)!==0&&(c.flags&128)===0&&(Ct(c),c.subtreeFlags&6&&(c.flags|=8192)):Ct(c),f=c.updateQueue,f!==null&&_f(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048),a!==null&&ie(Uo),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Fi(Yt),Ct(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function rH(a,c){switch(Ag(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Fi(Yt),ye(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Oe(c),null;case 13:if(Ui(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));_c()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ie(Xt),null;case 4:return ye(),null;case 10:return Fi(c.type),null;case 22:case 23:return Ui(c),Hg(),a!==null&&ie(Uo),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Fi(Yt),null;case 25:return null;default:return null}}function cT(a,c){switch(Ag(c),c.tag){case 3:Fi(Yt),ye();break;case 26:case 27:case 5:Oe(c);break;case 4:ye();break;case 13:Ui(c);break;case 19:ie(Xt);break;case 10:Fi(c.type);break;case 22:case 23:Ui(c),Hg(),a!==null&&ie(Uo);break;case 24:Fi(Yt)}}function Kc(a,c){try{var f=c.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var b=g.next;f=b;do{if((f.tag&a)===a){g=void 0;var C=f.create,M=f.inst;g=C(),M.destroy=g}f=f.next}while(f!==b)}}catch(j){ht(c,c.return,j)}}function js(a,c,f){try{var g=c.updateQueue,b=g!==null?g.lastEffect:null;if(b!==null){var C=b.next;g=C;do{if((g.tag&a)===a){var M=g.inst,j=M.destroy;if(j!==void 0){M.destroy=void 0,b=c;var U=f,re=j;try{re()}catch(de){ht(b,U,de)}}}g=g.next}while(g!==C)}}catch(de){ht(c,c.return,de)}}function uT(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{Z2(c,f)}catch(g){ht(a,a.return,g)}}}function dT(a,c,f){f.props=Ko(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){ht(a,c,g)}}function Wc(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(b){ht(a,c,b)}}function mi(a,c){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(b){ht(a,c,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){ht(a,c,b)}else f.current=null}function fT(a){var c=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(b){ht(a,a.return,b)}}function gy(a,c,f){try{var g=a.stateNode;EH(g,a.type,f,c),g[tn]=c}catch(b){ht(a,a.return,b)}}function hT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Hs(a.type)||a.tag===4}function yy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||hT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Hs(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function vy(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Hf));else if(g!==4&&(g===27&&Hs(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(vy(a,c,f),a=a.sibling;a!==null;)vy(a,c,f),a=a.sibling}function Df(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(g!==4&&(g===27&&Hs(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Df(a,c,f),a=a.sibling;a!==null;)Df(a,c,f),a=a.sibling}function pT(a){var c=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);pn(c,g,f),c[zt]=a,c[tn]=f}catch(C){ht(a,a.return,C)}}var Wi=!1,Lt=!1,by=!1,mT=typeof WeakSet=="function"?WeakSet:Set,rn=null;function iH(a,c){if(a=a.containerInfo,Fy=Yf,a=N2(a),yg(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var b=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var M=0,j=-1,U=-1,re=0,de=0,he=a,se=null;t:for(;;){for(var ae;he!==f||b!==0&&he.nodeType!==3||(j=M+b),he!==C||g!==0&&he.nodeType!==3||(U=M+g),he.nodeType===3&&(M+=he.nodeValue.length),(ae=he.firstChild)!==null;)se=he,he=ae;for(;;){if(he===a)break t;if(se===f&&++re===b&&(j=M),se===C&&++de===g&&(U=M),(ae=he.nextSibling)!==null)break;he=se,se=he.parentNode}he=ae}f=j===-1||U===-1?null:{start:j,end:U}}else f=null}f=f||{start:0,end:0}}else f=null;for($y={focusedElem:a,selectionRange:f},Yf=!1,rn=c;rn!==null;)if(c=rn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,rn=a;else for(;rn!==null;){switch(c=rn,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=c,b=C.memoizedProps,C=C.memoizedState,g=f.stateNode;try{var Ie=Ko(f.type,b,f.elementType===f.type);a=g.getSnapshotBeforeUpdate(Ie,C),g.__reactInternalSnapshotBeforeUpdate=a}catch(je){ht(f,f.return,je)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)Ky(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Ky(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,rn=a;break}rn=c.return}}function gT(a,c,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Ls(a,f),g&4&&Kc(5,f);break;case 1:if(Ls(a,f),g&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(M){ht(f,f.return,M)}else{var b=Ko(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(b,c,a.__reactInternalSnapshotBeforeUpdate)}catch(M){ht(f,f.return,M)}}g&64&&uT(f),g&512&&Wc(f,f.return);break;case 3:if(Ls(a,f),g&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{Z2(a,c)}catch(M){ht(f,f.return,M)}}break;case 27:c===null&&g&4&&pT(f);case 26:case 5:Ls(a,f),c===null&&g&4&&fT(f),g&512&&Wc(f,f.return);break;case 12:Ls(a,f);break;case 13:Ls(a,f),g&4&&bT(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=hH.bind(null,f),DH(a,f))));break;case 22:if(g=f.memoizedState!==null||Wi,!g){c=c!==null&&c.memoizedState!==null||Lt,b=Wi;var C=Lt;Wi=g,(Lt=c)&&!C?Ps(a,f,(f.subtreeFlags&8772)!==0):Ls(a,f),Wi=b,Lt=C}break;case 30:break;default:Ls(a,f)}}function yT(a){var c=a.alternate;c!==null&&(a.alternate=null,yT(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&ci(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var bt=null,Fn=!1;function Yi(a,c,f){for(f=f.child;f!==null;)vT(a,c,f),f=f.sibling}function vT(a,c,f){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(xn,f)}catch{}switch(f.tag){case 26:Lt||mi(f,c),Yi(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Lt||mi(f,c);var g=bt,b=Fn;Hs(f.type)&&(bt=f.stateNode,Fn=!1),Yi(a,c,f),ru(f.stateNode),bt=g,Fn=b;break;case 5:Lt||mi(f,c);case 6:if(g=bt,b=Fn,bt=null,Yi(a,c,f),bt=g,Fn=b,bt!==null)if(Fn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(f.stateNode)}catch(C){ht(f,c,C)}else try{bt.removeChild(f.stateNode)}catch(C){ht(f,c,C)}break;case 18:bt!==null&&(Fn?(a=bt,oA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),du(a)):oA(bt,f.stateNode));break;case 4:g=bt,b=Fn,bt=f.stateNode.containerInfo,Fn=!0,Yi(a,c,f),bt=g,Fn=b;break;case 0:case 11:case 14:case 15:Lt||js(2,f,c),Lt||js(4,f,c),Yi(a,c,f);break;case 1:Lt||(mi(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"&&dT(f,c,g)),Yi(a,c,f);break;case 21:Yi(a,c,f);break;case 22:Lt=(g=Lt)||f.memoizedState!==null,Yi(a,c,f),Lt=g;break;default:Yi(a,c,f)}}function bT(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{du(a)}catch(f){ht(c,c.return,f)}}function sH(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new mT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new mT),c;default:throw Error(r(435,a.tag))}}function xy(a,c){var f=sH(a);c.forEach(function(g){var b=pH.bind(null,a,g);f.has(g)||(f.add(g),g.then(b,b))})}function ir(a,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var b=f[g],C=a,M=c,j=M;e:for(;j!==null;){switch(j.tag){case 27:if(Hs(j.type)){bt=j.stateNode,Fn=!1;break e}break;case 5:bt=j.stateNode,Fn=!1;break e;case 3:case 4:bt=j.stateNode.containerInfo,Fn=!0;break e}j=j.return}if(bt===null)throw Error(r(160));vT(C,M,b),bt=null,Fn=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)xT(c,a),c=c.sibling}var Yr=null;function xT(a,c){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ir(c,a),sr(a),g&4&&(js(3,a,a.return),Kc(3,a),js(5,a,a.return));break;case 1:ir(c,a),sr(a),g&512&&(Lt||f===null||mi(f,f.return)),g&64&&Wi&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var b=Yr;if(ir(c,a),sr(a),g&512&&(Lt||f===null||mi(f,f.return)),g&4){var C=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,b=b.ownerDocument||b;t:switch(g){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Fr]||C[zt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(g),b.head.insertBefore(C,b.querySelector("head > title"))),pn(C,g,f),C[zt]=a,vt(C),g=C;break e;case"link":var M=pA("link","href",b).get(g+(f.href||""));if(M){for(var j=0;j<M.length;j++)if(C=M[j],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){M.splice(j,1);break t}}C=b.createElement(g),pn(C,g,f),b.head.appendChild(C);break;case"meta":if(M=pA("meta","content",b).get(g+(f.content||""))){for(j=0;j<M.length;j++)if(C=M[j],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){M.splice(j,1);break t}}C=b.createElement(g),pn(C,g,f),b.head.appendChild(C);break;default:throw Error(r(468,g))}C[zt]=a,vt(C),g=C}a.stateNode=g}else mA(b,a.type,a.stateNode);else a.stateNode=hA(b,g,a.memoizedProps);else C!==g?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,g===null?mA(b,a.type,a.stateNode):hA(b,g,a.memoizedProps)):g===null&&a.stateNode!==null&&gy(a,a.memoizedProps,f.memoizedProps)}break;case 27:ir(c,a),sr(a),g&512&&(Lt||f===null||mi(f,f.return)),f!==null&&g&4&&gy(a,a.memoizedProps,f.memoizedProps);break;case 5:if(ir(c,a),sr(a),g&512&&(Lt||f===null||mi(f,f.return)),a.flags&32){b=a.stateNode;try{Es(b,"")}catch(ae){ht(a,a.return,ae)}}g&4&&a.stateNode!=null&&(b=a.memoizedProps,gy(a,b,f!==null?f.memoizedProps:b)),g&1024&&(by=!0);break;case 6:if(ir(c,a),sr(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(ae){ht(a,a.return,ae)}}break;case 3:if(Gf=null,b=Yr,Yr=$f(c.containerInfo),ir(c,a),Yr=b,sr(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{du(c.containerInfo)}catch(ae){ht(a,a.return,ae)}by&&(by=!1,wT(a));break;case 4:g=Yr,Yr=$f(a.stateNode.containerInfo),ir(c,a),sr(a),Yr=g;break;case 12:ir(c,a),sr(a);break;case 13:ir(c,a),sr(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Ny=Ae()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,xy(a,g)));break;case 22:b=a.memoizedState!==null;var U=f!==null&&f.memoizedState!==null,re=Wi,de=Lt;if(Wi=re||b,Lt=de||U,ir(c,a),Lt=de,Wi=re,sr(a),g&8192)e:for(c=a.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(f===null||U||Wi||Lt||Wo(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){U=f=c;try{if(C=U.stateNode,b)M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{j=U.stateNode;var he=U.memoizedProps.style,se=he!=null&&he.hasOwnProperty("display")?he.display:null;j.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ae){ht(U,U.return,ae)}}}else if(c.tag===6){if(f===null){U=c;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(ae){ht(U,U.return,ae)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,xy(a,f))));break;case 19:ir(c,a),sr(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,xy(a,g)));break;case 30:break;case 21:break;default:ir(c,a),sr(a)}}function sr(a){var c=a.flags;if(c&2){try{for(var f,g=a.return;g!==null;){if(hT(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,C=yy(a);Df(a,C,b);break;case 5:var M=f.stateNode;f.flags&32&&(Es(M,""),f.flags&=-33);var j=yy(a);Df(a,j,M);break;case 3:case 4:var U=f.stateNode.containerInfo,re=yy(a);vy(a,re,U);break;default:throw Error(r(161))}}catch(de){ht(a,a.return,de)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function wT(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;wT(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Ls(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)gT(a,c.alternate,c),c=c.sibling}function Wo(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:js(4,c,c.return),Wo(c);break;case 1:mi(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&dT(c,c.return,f),Wo(c);break;case 27:ru(c.stateNode);case 26:case 5:mi(c,c.return),Wo(c);break;case 22:c.memoizedState===null&&Wo(c);break;case 30:Wo(c);break;default:Wo(c)}a=a.sibling}}function Ps(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,b=a,C=c,M=C.flags;switch(C.tag){case 0:case 11:case 15:Ps(b,C,f),Kc(4,C);break;case 1:if(Ps(b,C,f),g=C,b=g.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(re){ht(g,g.return,re)}if(g=C,b=g.updateQueue,b!==null){var j=g.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)X2(U[b],j)}catch(re){ht(g,g.return,re)}}f&&M&64&&uT(C),Wc(C,C.return);break;case 27:pT(C);case 26:case 5:Ps(b,C,f),f&&g===null&&M&4&&fT(C),Wc(C,C.return);break;case 12:Ps(b,C,f);break;case 13:Ps(b,C,f),f&&M&4&&bT(b,C);break;case 22:C.memoizedState===null&&Ps(b,C,f),Wc(C,C.return);break;case 30:break;default:Ps(b,C,f)}c=c.sibling}}function wy(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Oc(f))}function Sy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Oc(a))}function gi(a,c,f,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)ST(a,c,f,g),c=c.sibling}function ST(a,c,f,g){var b=c.flags;switch(c.tag){case 0:case 11:case 15:gi(a,c,f,g),b&2048&&Kc(9,c);break;case 1:gi(a,c,f,g);break;case 3:gi(a,c,f,g),b&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Oc(a)));break;case 12:if(b&2048){gi(a,c,f,g),a=c.stateNode;try{var C=c.memoizedProps,M=C.id,j=C.onPostCommit;typeof j=="function"&&j(M,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(U){ht(c,c.return,U)}}else gi(a,c,f,g);break;case 13:gi(a,c,f,g);break;case 23:break;case 22:C=c.stateNode,M=c.alternate,c.memoizedState!==null?C._visibility&2?gi(a,c,f,g):Yc(a,c):C._visibility&2?gi(a,c,f,g):(C._visibility|=2,hl(a,c,f,g,(c.subtreeFlags&10256)!==0)),b&2048&&wy(M,c);break;case 24:gi(a,c,f,g),b&2048&&Sy(c.alternate,c);break;default:gi(a,c,f,g)}}function hl(a,c,f,g,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,M=c,j=f,U=g,re=M.flags;switch(M.tag){case 0:case 11:case 15:hl(C,M,j,U,b),Kc(8,M);break;case 23:break;case 22:var de=M.stateNode;M.memoizedState!==null?de._visibility&2?hl(C,M,j,U,b):Yc(C,M):(de._visibility|=2,hl(C,M,j,U,b)),b&&re&2048&&wy(M.alternate,M);break;case 24:hl(C,M,j,U,b),b&&re&2048&&Sy(M.alternate,M);break;default:hl(C,M,j,U,b)}c=c.sibling}}function Yc(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,g=c,b=g.flags;switch(g.tag){case 22:Yc(f,g),b&2048&&wy(g.alternate,g);break;case 24:Yc(f,g),b&2048&&Sy(g.alternate,g);break;default:Yc(f,g)}c=c.sibling}}var Xc=8192;function pl(a){if(a.subtreeFlags&Xc)for(a=a.child;a!==null;)CT(a),a=a.sibling}function CT(a){switch(a.tag){case 26:pl(a),a.flags&Xc&&a.memoizedState!==null&&$H(Yr,a.memoizedState,a.memoizedProps);break;case 5:pl(a);break;case 3:case 4:var c=Yr;Yr=$f(a.stateNode.containerInfo),pl(a),Yr=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Xc,Xc=16777216,pl(a),Xc=c):pl(a));break;default:pl(a)}}function ET(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Zc(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];rn=g,NT(g,a)}ET(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)kT(a),a=a.sibling}function kT(a){switch(a.tag){case 0:case 11:case 15:Zc(a),a.flags&2048&&js(9,a,a.return);break;case 3:Zc(a);break;case 12:Zc(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Rf(a)):Zc(a);break;default:Zc(a)}}function Rf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];rn=g,NT(g,a)}ET(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:js(8,c,c.return),Rf(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,Rf(c));break;default:Rf(c)}a=a.sibling}}function NT(a,c){for(;rn!==null;){var f=rn;switch(f.tag){case 0:case 11:case 15:js(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Oc(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,rn=g;else e:for(f=a;rn!==null;){g=rn;var b=g.sibling,C=g.return;if(yT(g),g===f){rn=null;break e}if(b!==null){b.return=C,rn=b;break e}rn=C}}}var oH={getCacheForType:function(a){var c=En(Yt),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},aH=typeof WeakMap=="function"?WeakMap:Map,ot=0,mt=null,Xe=null,et=0,at=0,or=null,Is=!1,ml=!1,Cy=!1,Xi=0,Mt=0,Bs=0,Yo=0,Ey=0,Ar=0,gl=0,Jc=null,$n=null,ky=!1,Ny=0,Of=1/0,jf=null,zs=null,hn=0,qs=null,yl=null,vl=0,Ty=0,Ay=null,TT=null,Qc=0,My=null;function ar(){if((ot&2)!==0&&et!==0)return et&-et;if(I.T!==null){var a=sl;return a!==0?a:Py()}return Ha()}function AT(){Ar===0&&(Ar=(et&536870912)===0||it?Oi():536870912);var a=Tr.current;return a!==null&&(a.flags|=32),Ar}function lr(a,c,f){(a===mt&&(at===2||at===9)||a.cancelPendingCommit!==null)&&(bl(a,0),Vs(a,et,Ar,!1)),br(a,f),((ot&2)===0||a!==mt)&&(a===mt&&((ot&2)===0&&(Yo|=f),Mt===4&&Vs(a,et,Ar,!1)),yi(a))}function MT(a,c,f){if((ot&6)!==0)throw Error(r(327));var g=!f&&(c&124)===0&&(c&a.expiredLanes)===0||Rn(a,c),b=g?uH(a,c):Ry(a,c,!0),C=g;do{if(b===0){ml&&!g&&Vs(a,c,0,!1);break}else{if(f=a.current.alternate,C&&!lH(f)){b=Ry(a,c,!1),C=!1;continue}if(b===2){if(C=c,a.errorRecoveryDisabledLanes&C)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){c=M;e:{var j=a;b=Jc;var U=j.current.memoizedState.isDehydrated;if(U&&(bl(j,M).flags|=256),M=Ry(j,M,!1),M!==2){if(Cy&&!U){j.errorRecoveryDisabledLanes|=C,Yo|=C,b=4;break e}C=$n,$n=b,C!==null&&($n===null?$n=C:$n.push.apply($n,C))}b=M}if(C=!1,b!==2)continue}}if(b===1){bl(a,0),Vs(a,c,0,!0);break}e:{switch(g=a,C=b,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:Vs(g,c,Ar,!Is);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=Ny+300-Ae(),10<b)){if(Vs(g,c,Ar,!Is),vr(g,0,!0)!==0)break e;g.timeoutHandle=iA(_T.bind(null,g,f,$n,jf,ky,c,Ar,Yo,gl,Is,C,2,-0,0),b);break e}_T(g,f,$n,jf,ky,c,Ar,Yo,gl,Is,C,0,-0,0)}}break}while(!0);yi(a)}function _T(a,c,f,g,b,C,M,j,U,re,de,he,se,ae){if(a.timeoutHandle=-1,he=c.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(ou={stylesheets:null,count:0,unsuspend:FH},CT(c),he=UH(),he!==null)){a.cancelPendingCommit=he(IT.bind(null,a,c,C,f,g,b,M,j,U,de,1,se,ae)),Vs(a,C,M,!re);return}IT(a,c,C,f,g,b,M,j,U)}function lH(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var b=f[g],C=b.getSnapshot;b=b.value;try{if(!nr(C(),b))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Vs(a,c,f,g){c&=~Ey,c&=~Yo,a.suspendedLanes|=c,a.pingedLanes&=~c,g&&(a.warmLanes|=c),g=a.expirationTimes;for(var b=c;0<b;){var C=31-He(b),M=1<<C;g[C]=-1,b&=~M}f!==0&&Va(a,f,c)}function Lf(){return(ot&6)===0?(eu(0),!1):!0}function _y(){if(Xe!==null){if(at===0)var a=Xe.return;else a=Xe,Hi=Fo=null,Kg(a),dl=null,$c=0,a=Xe;for(;a!==null;)cT(a.alternate,a),a=a.return;Xe=null}}function bl(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,NH(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),_y(),mt=a,Xe=f=zi(a.current,null),et=c,at=0,or=null,Is=!1,ml=Rn(a,c),Cy=!1,gl=Ar=Ey=Yo=Bs=Mt=0,$n=Jc=null,ky=!1,(c&8)!==0&&(c|=c&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=c;0<g;){var b=31-He(g),C=1<<b;c|=a[b],g&=~C}return Xi=c,nf(),f}function DT(a,c){We=null,I.H=Sf,c===Lc||c===ff?(c=W2(),at=3):c===U2?(c=W2(),at=4):at=c===YN?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,or=c,Xe===null&&(Mt=1,Tf(a,Cr(c,a.current)))}function RT(){var a=I.H;return I.H=Sf,a===null?Sf:a}function OT(){var a=I.A;return I.A=oH,a}function Dy(){Mt=4,Is||(et&4194048)!==et&&Tr.current!==null||(ml=!0),(Bs&134217727)===0&&(Yo&134217727)===0||mt===null||Vs(mt,et,Ar,!1)}function Ry(a,c,f){var g=ot;ot|=2;var b=RT(),C=OT();(mt!==a||et!==c)&&(jf=null,bl(a,c)),c=!1;var M=Mt;e:do try{if(at!==0&&Xe!==null){var j=Xe,U=or;switch(at){case 8:_y(),M=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(c=!0);var re=at;if(at=0,or=null,xl(a,j,U,re),f&&ml){M=0;break e}break;default:re=at,at=0,or=null,xl(a,j,U,re)}}cH(),M=Mt;break}catch(de){DT(a,de)}while(!0);return c&&a.shellSuspendCounter++,Hi=Fo=null,ot=g,I.H=b,I.A=C,Xe===null&&(mt=null,et=0,nf()),M}function cH(){for(;Xe!==null;)jT(Xe)}function uH(a,c){var f=ot;ot|=2;var g=RT(),b=OT();mt!==a||et!==c?(jf=null,Of=Ae()+500,bl(a,c)):ml=Rn(a,c);e:do try{if(at!==0&&Xe!==null){c=Xe;var C=or;t:switch(at){case 1:at=0,or=null,xl(a,c,C,1);break;case 2:case 9:if(G2(C)){at=0,or=null,LT(c);break}c=function(){at!==2&&at!==9||mt!==a||(at=7),yi(a)},C.then(c,c);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:G2(C)?(at=0,or=null,LT(c)):(at=0,or=null,xl(a,c,C,7));break;case 5:var M=null;switch(Xe.tag){case 26:M=Xe.memoizedState;case 5:case 27:var j=Xe;if(!M||gA(M)){at=0,or=null;var U=j.sibling;if(U!==null)Xe=U;else{var re=j.return;re!==null?(Xe=re,Pf(re)):Xe=null}break t}}at=0,or=null,xl(a,c,C,5);break;case 6:at=0,or=null,xl(a,c,C,6);break;case 8:_y(),Mt=6;break e;default:throw Error(r(462))}}dH();break}catch(de){DT(a,de)}while(!0);return Hi=Fo=null,I.H=g,I.A=b,ot=f,Xe!==null?0:(mt=null,et=0,nf(),Mt)}function dH(){for(;Xe!==null&&!ke();)jT(Xe)}function jT(a){var c=aT(a.alternate,a,Xi);a.memoizedProps=a.pendingProps,c===null?Pf(a):Xe=c}function LT(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=tT(f,c,c.pendingProps,c.type,void 0,et);break;case 11:c=tT(f,c,c.pendingProps,c.type.render,c.ref,et);break;case 5:Kg(c);default:cT(f,c),c=Xe=P2(c,Xi),c=aT(f,c,Xi)}a.memoizedProps=a.pendingProps,c===null?Pf(a):Xe=c}function xl(a,c,f,g){Hi=Fo=null,Kg(c),dl=null,$c=0;var b=c.return;try{if(eH(a,b,c,f,et)){Mt=1,Tf(a,Cr(f,a.current)),Xe=null;return}}catch(C){if(b!==null)throw Xe=b,C;Mt=1,Tf(a,Cr(f,a.current)),Xe=null;return}c.flags&32768?(it||g===1?a=!0:ml||(et&536870912)!==0?a=!1:(Is=a=!0,(g===2||g===9||g===3||g===6)&&(g=Tr.current,g!==null&&g.tag===13&&(g.flags|=16384))),PT(c,a)):Pf(c)}function Pf(a){var c=a;do{if((c.flags&32768)!==0){PT(c,Is);return}a=c.return;var f=nH(c.alternate,c,Xi);if(f!==null){Xe=f;return}if(c=c.sibling,c!==null){Xe=c;return}Xe=c=a}while(c!==null);Mt===0&&(Mt=5)}function PT(a,c){do{var f=rH(a.alternate,a);if(f!==null){f.flags&=32767,Xe=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){Xe=a;return}Xe=a=f}while(a!==null);Mt=6,Xe=null}function IT(a,c,f,g,b,C,M,j,U){a.cancelPendingCommit=null;do If();while(hn!==0);if((ot&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=Sg,yc(a,f,C,M,j,U),a===mt&&(Xe=mt=null,et=0),yl=c,qs=a,vl=f,Ty=C,Ay=b,TT=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,mH(Qt,function(){return HT(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=I.T,I.T=null,b=q.p,q.p=2,M=ot,ot|=4;try{iH(a,c,f)}finally{ot=M,q.p=b,I.T=g}}hn=1,BT(),zT(),qT()}}function BT(){if(hn===1){hn=0;var a=qs,c=yl,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=I.T,I.T=null;var g=q.p;q.p=2;var b=ot;ot|=4;try{xT(c,a);var C=$y,M=N2(a.containerInfo),j=C.focusedElem,U=C.selectionRange;if(M!==j&&j&&j.ownerDocument&&k2(j.ownerDocument.documentElement,j)){if(U!==null&&yg(j)){var re=U.start,de=U.end;if(de===void 0&&(de=re),"selectionStart"in j)j.selectionStart=re,j.selectionEnd=Math.min(de,j.value.length);else{var he=j.ownerDocument||document,se=he&&he.defaultView||window;if(se.getSelection){var ae=se.getSelection(),Ie=j.textContent.length,je=Math.min(U.start,Ie),dt=U.end===void 0?je:Math.min(U.end,Ie);!ae.extend&&je>dt&&(M=dt,dt=je,je=M);var Q=E2(j,je),Y=E2(j,dt);if(Q&&Y&&(ae.rangeCount!==1||ae.anchorNode!==Q.node||ae.anchorOffset!==Q.offset||ae.focusNode!==Y.node||ae.focusOffset!==Y.offset)){var ne=he.createRange();ne.setStart(Q.node,Q.offset),ae.removeAllRanges(),je>dt?(ae.addRange(ne),ae.extend(Y.node,Y.offset)):(ne.setEnd(Y.node,Y.offset),ae.addRange(ne))}}}}for(he=[],ae=j;ae=ae.parentNode;)ae.nodeType===1&&he.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<he.length;j++){var fe=he[j];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Yf=!!Fy,$y=Fy=null}finally{ot=b,q.p=g,I.T=f}}a.current=c,hn=2}}function zT(){if(hn===2){hn=0;var a=qs,c=yl,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=I.T,I.T=null;var g=q.p;q.p=2;var b=ot;ot|=4;try{gT(a,c.alternate,c)}finally{ot=b,q.p=g,I.T=f}}hn=3}}function qT(){if(hn===4||hn===3){hn=0,rt();var a=qs,c=yl,f=vl,g=TT;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?hn=5:(hn=0,yl=qs=null,VT(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(zs=null),ys(f),c=c.stateNode,yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(xn,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=I.T,b=q.p,q.p=2,I.T=null;try{for(var C=a.onRecoverableError,M=0;M<g.length;M++){var j=g[M];C(j.value,{componentStack:j.stack})}}finally{I.T=c,q.p=b}}(vl&3)!==0&&If(),yi(a),b=a.pendingLanes,(f&4194090)!==0&&(b&42)!==0?a===My?Qc++:(Qc=0,My=a):Qc=0,eu(0)}}function VT(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Oc(c)))}function If(a){return BT(),zT(),qT(),HT()}function HT(){if(hn!==5)return!1;var a=qs,c=Ty;Ty=0;var f=ys(vl),g=I.T,b=q.p;try{q.p=32>f?32:f,I.T=null,f=Ay,Ay=null;var C=qs,M=vl;if(hn=0,yl=qs=null,vl=0,(ot&6)!==0)throw Error(r(331));var j=ot;if(ot|=4,kT(C.current),ST(C,C.current,M,f),ot=j,eu(0,!1),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(xn,C)}catch{}return!0}finally{q.p=b,I.T=g,VT(a,c)}}function FT(a,c,f){c=Cr(f,c),c=ay(a.stateNode,c,2),a=_s(a,c,2),a!==null&&(br(a,2),yi(a))}function ht(a,c,f){if(a.tag===3)FT(a,a,f);else for(;c!==null;){if(c.tag===3){FT(c,a,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(zs===null||!zs.has(g))){a=Cr(f,a),f=KN(2),g=_s(c,f,2),g!==null&&(WN(f,g,c,a),br(g,2),yi(g));break}}c=c.return}}function Oy(a,c,f){var g=a.pingCache;if(g===null){g=a.pingCache=new aH;var b=new Set;g.set(c,b)}else b=g.get(c),b===void 0&&(b=new Set,g.set(c,b));b.has(f)||(Cy=!0,b.add(f),a=fH.bind(null,a,c,f),c.then(a,a))}function fH(a,c,f){var g=a.pingCache;g!==null&&g.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,mt===a&&(et&f)===f&&(Mt===4||Mt===3&&(et&62914560)===et&&300>Ae()-Ny?(ot&2)===0&&bl(a,0):Ey|=f,gl===et&&(gl=0)),yi(a)}function $T(a,c){c===0&&(c=ji()),a=tl(a,c),a!==null&&(br(a,c),yi(a))}function hH(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),$T(a,f)}function pH(a,c){var f=0;switch(a.tag){case 13:var g=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(c),$T(a,f)}function mH(a,c){return we(a,c)}var Bf=null,wl=null,jy=!1,zf=!1,Ly=!1,Xo=0;function yi(a){a!==wl&&a.next===null&&(wl===null?Bf=wl=a:wl=wl.next=a),zf=!0,jy||(jy=!0,yH())}function eu(a,c){if(!Ly&&zf){Ly=!0;do for(var f=!1,g=Bf;g!==null;){if(a!==0){var b=g.pendingLanes;if(b===0)var C=0;else{var M=g.suspendedLanes,j=g.pingedLanes;C=(1<<31-He(42|a)+1)-1,C&=b&~(M&~j),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,WT(g,C))}else C=et,C=vr(g,g===mt?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||Rn(g,C)||(f=!0,WT(g,C));g=g.next}while(f);Ly=!1}}function gH(){UT()}function UT(){zf=jy=!1;var a=0;Xo!==0&&(kH()&&(a=Xo),Xo=0);for(var c=Ae(),f=null,g=Bf;g!==null;){var b=g.next,C=GT(g,c);C===0?(g.next=null,f===null?Bf=b:f.next=b,b===null&&(wl=f)):(f=g,(a!==0||(C&3)!==0)&&(zf=!0)),g=b}eu(a)}function GT(a,c){for(var f=a.suspendedLanes,g=a.pingedLanes,b=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var M=31-He(C),j=1<<M,U=b[M];U===-1?((j&f)===0||(j&g)!==0)&&(b[M]=Ri(j,c)):U<=c&&(a.expiredLanes|=j),C&=~j}if(c=mt,f=et,f=vr(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===c&&(at===2||at===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&be(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Rn(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(g!==null&&be(g),ys(f)){case 2:case 8:f=Jn;break;case 32:f=Qt;break;case 268435456:f=ft;break;default:f=Qt}return g=KT.bind(null,a),f=we(f,g),a.callbackPriority=c,a.callbackNode=f,c}return g!==null&&g!==null&&be(g),a.callbackPriority=2,a.callbackNode=null,2}function KT(a,c){if(hn!==0&&hn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(If()&&a.callbackNode!==f)return null;var g=et;return g=vr(a,a===mt?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(MT(a,g,c),GT(a,Ae()),a.callbackNode!=null&&a.callbackNode===f?KT.bind(null,a):null)}function WT(a,c){if(If())return null;MT(a,c,!0)}function yH(){TH(function(){(ot&6)!==0?we(un,gH):UT()})}function Py(){return Xo===0&&(Xo=Oi()),Xo}function YT(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Ya(""+a)}function XT(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function vH(a,c,f,g,b){if(c==="submit"&&f&&f.stateNode===b){var C=YT((b[tn]||null).action),M=g.submitter;M&&(c=(c=M[tn]||null)?YT(c.formAction):M.getAttribute("formAction"),c!==null&&(C=c,M=null));var j=new Qd("action","action",null,g,b);a.push({event:j,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Xo!==0){var U=M?XT(b,M):new FormData(b);ny(f,{pending:!0,data:U,method:b.method,action:C},null,U)}}else typeof C=="function"&&(j.preventDefault(),U=M?XT(b,M):new FormData(b),ny(f,{pending:!0,data:U,method:b.method,action:C},C,U))},currentTarget:b}]})}}for(var Iy=0;Iy<wg.length;Iy++){var By=wg[Iy],bH=By.toLowerCase(),xH=By[0].toUpperCase()+By.slice(1);Wr(bH,"on"+xH)}Wr(M2,"onAnimationEnd"),Wr(_2,"onAnimationIteration"),Wr(D2,"onAnimationStart"),Wr("dblclick","onDoubleClick"),Wr("focusin","onFocus"),Wr("focusout","onBlur"),Wr(I8,"onTransitionRun"),Wr(B8,"onTransitionStart"),Wr(z8,"onTransitionCancel"),Wr(R2,"onTransitionEnd"),Ur("onMouseEnter",["mouseout","mouseover"]),Ur("onMouseLeave",["mouseout","mouseover"]),Ur("onPointerEnter",["pointerout","pointerover"]),Ur("onPointerLeave",["pointerout","pointerover"]),$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$r("onBeforeInput",["compositionend","keypress","textInput","paste"]),$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function ZT(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],b=g.event;g=g.listeners;e:{var C=void 0;if(c)for(var M=g.length-1;0<=M;M--){var j=g[M],U=j.instance,re=j.currentTarget;if(j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(de){Nf(de)}b.currentTarget=null,C=U}else for(M=0;M<g.length;M++){if(j=g[M],U=j.instance,re=j.currentTarget,j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(de){Nf(de)}b.currentTarget=null,C=U}}}}function Ze(a,c){var f=c[Fe];f===void 0&&(f=c[Fe]=new Set);var g=a+"__bubble";f.has(g)||(JT(c,a,2,!1),f.add(g))}function zy(a,c,f){var g=0;c&&(g|=4),JT(f,a,g,c)}var qf="_reactListening"+Math.random().toString(36).slice(2);function qy(a){if(!a[qf]){a[qf]=!0,Mo.forEach(function(f){f!=="selectionchange"&&(wH.has(f)||zy(f,!1,a),zy(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[qf]||(c[qf]=!0,zy("selectionchange",!1,c))}}function JT(a,c,f,g){switch(SA(c)){case 2:var b=WH;break;case 8:b=YH;break;default:b=e0}f=b.bind(null,c,f,a),b=void 0,!ve||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),g?b!==void 0?a.addEventListener(c,f,{capture:!0,passive:b}):a.addEventListener(c,f,!0):b!==void 0?a.addEventListener(c,f,{passive:b}):a.addEventListener(c,f,!1)}function Vy(a,c,f,g,b){var C=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var j=g.stateNode.containerInfo;if(j===b)break;if(M===4)for(M=g.return;M!==null;){var U=M.tag;if((U===3||U===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;j!==null;){if(M=ui(j),M===null)return;if(U=M.tag,U===5||U===6||U===26||U===27){g=C=M;continue e}j=j.parentNode}}g=g.return}Z(function(){var re=C,de=Xa(f),he=[];e:{var se=O2.get(a);if(se!==void 0){var ae=Qd,Ie=a;switch(a){case"keypress":if(tr(f)===0)break e;case"keydown":case"keyup":ae=m8;break;case"focusin":Ie="focus",ae=fg;break;case"focusout":Ie="blur",ae=fg;break;case"beforeblur":case"afterblur":ae=fg;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=l2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=r8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=v8;break;case M2:case _2:case D2:ae=o8;break;case R2:ae=x8;break;case"scroll":case"scrollend":ae=t8;break;case"wheel":ae=S8;break;case"copy":case"cut":case"paste":ae=l8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=u2;break;case"toggle":case"beforetoggle":ae=E8}var je=(c&4)!==0,dt=!je&&(a==="scroll"||a==="scrollend"),Q=je?se!==null?se+"Capture":null:se;je=[];for(var Y=re,ne;Y!==null;){var fe=Y;if(ne=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ne===null||Q===null||(fe=oe(Y,Q),fe!=null&&je.push(nu(Y,fe,ne))),dt)break;Y=Y.return}0<je.length&&(se=new ae(se,Ie,null,f,de),he.push({event:se,listeners:je}))}}if((c&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",se&&f!==wc&&(Ie=f.relatedTarget||f.fromElement)&&(ui(Ie)||Ie[li]))break e;if((ae||se)&&(se=de.window===de?de:(se=de.ownerDocument)?se.defaultView||se.parentWindow:window,ae?(Ie=f.relatedTarget||f.toElement,ae=re,Ie=Ie?ui(Ie):null,Ie!==null&&(dt=s(Ie),je=Ie.tag,Ie!==dt||je!==5&&je!==27&&je!==6)&&(Ie=null)):(ae=null,Ie=re),ae!==Ie)){if(je=l2,fe="onMouseLeave",Q="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(je=u2,fe="onPointerLeave",Q="onPointerEnter",Y="pointer"),dt=ae==null?se:di(ae),ne=Ie==null?se:di(Ie),se=new je(fe,Y+"leave",ae,f,de),se.target=dt,se.relatedTarget=ne,fe=null,ui(de)===re&&(je=new je(Q,Y+"enter",Ie,f,de),je.target=ne,je.relatedTarget=dt,fe=je),dt=fe,ae&&Ie)t:{for(je=ae,Q=Ie,Y=0,ne=je;ne;ne=Sl(ne))Y++;for(ne=0,fe=Q;fe;fe=Sl(fe))ne++;for(;0<Y-ne;)je=Sl(je),Y--;for(;0<ne-Y;)Q=Sl(Q),ne--;for(;Y--;){if(je===Q||Q!==null&&je===Q.alternate)break t;je=Sl(je),Q=Sl(Q)}je=null}else je=null;ae!==null&&QT(he,se,ae,je,!1),Ie!==null&&dt!==null&&QT(he,dt,Ie,je,!0)}}e:{if(se=re?di(re):window,ae=se.nodeName&&se.nodeName.toLowerCase(),ae==="select"||ae==="input"&&se.type==="file")var Ee=v2;else if(g2(se))if(b2)Ee=j8;else{Ee=R8;var Ye=D8}else ae=se.nodeName,!ae||ae.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&xc(re.elementType)&&(Ee=v2):Ee=O8;if(Ee&&(Ee=Ee(a,re))){y2(he,Ee,f,de);break e}Ye&&Ye(a,se,re),a==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&Lo(se,"number",se.value)}switch(Ye=re?di(re):window,a){case"focusin":(g2(Ye)||Ye.contentEditable==="true")&&(Ja=Ye,vg=re,Ac=null);break;case"focusout":Ac=vg=Ja=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,T2(he,f,de);break;case"selectionchange":if(P8)break;case"keydown":case"keyup":T2(he,f,de)}var Me;if(pg)e:{switch(a){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Za?p2(a,f)&&(Pe="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Pe="onCompositionStart");Pe&&(d2&&f.locale!=="ko"&&(Za||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Za&&(Me=Sr()):(Le=de,Ge="value"in Le?Le.value:Le.textContent,Za=!0)),Ye=Vf(re,Pe),0<Ye.length&&(Pe=new c2(Pe,a,null,f,de),he.push({event:Pe,listeners:Ye}),Me?Pe.data=Me:(Me=m2(f),Me!==null&&(Pe.data=Me)))),(Me=N8?T8(a,f):A8(a,f))&&(Pe=Vf(re,"onBeforeInput"),0<Pe.length&&(Ye=new c2("onBeforeInput","beforeinput",null,f,de),he.push({event:Ye,listeners:Pe}),Ye.data=Me)),vH(he,a,re,f,de)}ZT(he,c)})}function nu(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Vf(a,c){for(var f=c+"Capture",g=[];a!==null;){var b=a,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=oe(a,f),b!=null&&g.unshift(nu(a,b,C)),b=oe(a,c),b!=null&&g.push(nu(a,b,C))),a.tag===3)return g;a=a.return}return[]}function Sl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function QT(a,c,f,g,b){for(var C=c._reactName,M=[];f!==null&&f!==g;){var j=f,U=j.alternate,re=j.stateNode;if(j=j.tag,U!==null&&U===g)break;j!==5&&j!==26&&j!==27||re===null||(U=re,b?(re=oe(f,C),re!=null&&M.unshift(nu(f,re,U))):b||(re=oe(f,C),re!=null&&M.push(nu(f,re,U)))),f=f.return}M.length!==0&&a.push({event:c,listeners:M})}var SH=/\r\n?/g,CH=/\u0000|\uFFFD/g;function eA(a){return(typeof a=="string"?a:""+a).replace(SH,`
`).replace(CH,"")}function tA(a,c){return c=eA(c),eA(a)===c}function Hf(){}function ut(a,c,f,g,b,C){switch(f){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||Es(a,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&Es(a,""+g);break;case"className":ws(a,"class",g);break;case"tabIndex":ws(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(a,f,g);break;case"style":Zd(a,g,C);break;case"data":if(c!=="object"){ws(a,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=Ya(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&ut(a,c,"name",b.name,b,null),ut(a,c,"formEncType",b.formEncType,b,null),ut(a,c,"formMethod",b.formMethod,b,null),ut(a,c,"formTarget",b.formTarget,b,null)):(ut(a,c,"encType",b.encType,b,null),ut(a,c,"method",b.method,b,null),ut(a,c,"target",b.target,b,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=Ya(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=Hf);break;case"onScroll":g!=null&&Ze("scroll",a);break;case"onScrollEnd":g!=null&&Ze("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=Ya(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":Ze("beforetoggle",a),Ze("toggle",a),xs(a,"popover",g);break;case"xlinkActuate":er(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":er(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":er(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":er(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":er(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":er(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":er(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":er(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":er(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":xs(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=lg.get(f)||f,xs(a,f,g))}}function Hy(a,c,f,g,b,C){switch(f){case"style":Zd(a,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof g=="string"?Es(a,g):(typeof g=="number"||typeof g=="bigint")&&Es(a,""+g);break;case"onScroll":g!=null&&Ze("scroll",a);break;case"onScrollEnd":g!=null&&Ze("scrollend",a);break;case"onClick":g!=null&&(a.onclick=Hf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_o.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),c=f.slice(2,b?f.length-7:void 0),C=a[tn]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(c,C,b),typeof g=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,g,b);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):xs(a,f,g)}}}function pn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",a),Ze("load",a);var g=!1,b=!1,C;for(C in f)if(f.hasOwnProperty(C)){var M=f[C];if(M!=null)switch(C){case"src":g=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ut(a,c,C,M,f,null)}}b&&ut(a,c,"srcSet",f.srcSet,f,null),g&&ut(a,c,"src",f.src,f,null);return;case"input":Ze("invalid",a);var j=C=M=b=null,U=null,re=null;for(g in f)if(f.hasOwnProperty(g)){var de=f[g];if(de!=null)switch(g){case"name":b=de;break;case"type":M=de;break;case"checked":U=de;break;case"defaultChecked":re=de;break;case"value":C=de;break;case"defaultValue":j=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:ut(a,c,g,de,f,null)}}Ka(a,C,j,U,re,M,b,!1),Cs(a);return;case"select":Ze("invalid",a),g=M=C=null;for(b in f)if(f.hasOwnProperty(b)&&(j=f[b],j!=null))switch(b){case"value":C=j;break;case"defaultValue":M=j;break;case"multiple":g=j;default:ut(a,c,b,j,f,null)}c=C,f=M,a.multiple=!!g,c!=null?Gr(a,!!g,c,!1):f!=null&&Gr(a,!!g,f,!0);return;case"textarea":Ze("invalid",a),C=b=g=null;for(M in f)if(f.hasOwnProperty(M)&&(j=f[M],j!=null))switch(M){case"value":g=j;break;case"defaultValue":b=j;break;case"children":C=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:ut(a,c,M,j,f,null)}Wa(a,g,b,C),Cs(a);return;case"option":for(U in f)if(f.hasOwnProperty(U)&&(g=f[U],g!=null))switch(U){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:ut(a,c,U,g,f,null)}return;case"dialog":Ze("beforetoggle",a),Ze("toggle",a),Ze("cancel",a),Ze("close",a);break;case"iframe":case"object":Ze("load",a);break;case"video":case"audio":for(g=0;g<tu.length;g++)Ze(tu[g],a);break;case"image":Ze("error",a),Ze("load",a);break;case"details":Ze("toggle",a);break;case"embed":case"source":case"link":Ze("error",a),Ze("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(g=f[re],g!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ut(a,c,re,g,f,null)}return;default:if(xc(c)){for(de in f)f.hasOwnProperty(de)&&(g=f[de],g!==void 0&&Hy(a,c,de,g,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(g=f[j],g!=null&&ut(a,c,j,g,f,null))}function EH(a,c,f,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,M=null,j=null,U=null,re=null,de=null;for(ae in f){var he=f[ae];if(f.hasOwnProperty(ae)&&he!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":U=he;default:g.hasOwnProperty(ae)||ut(a,c,ae,null,g,he)}}for(var se in g){var ae=g[se];if(he=f[se],g.hasOwnProperty(se)&&(ae!=null||he!=null))switch(se){case"type":C=ae;break;case"name":b=ae;break;case"checked":re=ae;break;case"defaultChecked":de=ae;break;case"value":M=ae;break;case"defaultValue":j=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(r(137,c));break;default:ae!==he&&ut(a,c,se,ae,g,he)}}Ii(a,M,j,U,re,de,C,b);return;case"select":ae=M=j=se=null;for(C in f)if(U=f[C],f.hasOwnProperty(C)&&U!=null)switch(C){case"value":break;case"multiple":ae=U;default:g.hasOwnProperty(C)||ut(a,c,C,null,g,U)}for(b in g)if(C=g[b],U=f[b],g.hasOwnProperty(b)&&(C!=null||U!=null))switch(b){case"value":se=C;break;case"defaultValue":j=C;break;case"multiple":M=C;default:C!==U&&ut(a,c,b,C,g,U)}c=j,f=M,g=ae,se!=null?Gr(a,!!f,se,!1):!!g!=!!f&&(c!=null?Gr(a,!!f,c,!0):Gr(a,!!f,f?[]:"",!1));return;case"textarea":ae=se=null;for(j in f)if(b=f[j],f.hasOwnProperty(j)&&b!=null&&!g.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:ut(a,c,j,null,g,b)}for(M in g)if(b=g[M],C=f[M],g.hasOwnProperty(M)&&(b!=null||C!=null))switch(M){case"value":se=b;break;case"defaultValue":ae=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==C&&ut(a,c,M,b,g,C)}Yd(a,se,ae);return;case"option":for(var Ie in f)if(se=f[Ie],f.hasOwnProperty(Ie)&&se!=null&&!g.hasOwnProperty(Ie))switch(Ie){case"selected":a.selected=!1;break;default:ut(a,c,Ie,null,g,se)}for(U in g)if(se=g[U],ae=f[U],g.hasOwnProperty(U)&&se!==ae&&(se!=null||ae!=null))switch(U){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:ut(a,c,U,se,g,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in f)se=f[je],f.hasOwnProperty(je)&&se!=null&&!g.hasOwnProperty(je)&&ut(a,c,je,null,g,se);for(re in g)if(se=g[re],ae=f[re],g.hasOwnProperty(re)&&se!==ae&&(se!=null||ae!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,c));break;default:ut(a,c,re,se,g,ae)}return;default:if(xc(c)){for(var dt in f)se=f[dt],f.hasOwnProperty(dt)&&se!==void 0&&!g.hasOwnProperty(dt)&&Hy(a,c,dt,void 0,g,se);for(de in g)se=g[de],ae=f[de],!g.hasOwnProperty(de)||se===ae||se===void 0&&ae===void 0||Hy(a,c,de,se,g,ae);return}}for(var Q in f)se=f[Q],f.hasOwnProperty(Q)&&se!=null&&!g.hasOwnProperty(Q)&&ut(a,c,Q,null,g,se);for(he in g)se=g[he],ae=f[he],!g.hasOwnProperty(he)||se===ae||se==null&&ae==null||ut(a,c,he,se,g,ae)}var Fy=null,$y=null;function Ff(a){return a.nodeType===9?a:a.ownerDocument}function nA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rA(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function Uy(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Gy=null;function kH(){var a=window.event;return a&&a.type==="popstate"?a===Gy?!1:(Gy=a,!0):(Gy=null,!1)}var iA=typeof setTimeout=="function"?setTimeout:void 0,NH=typeof clearTimeout=="function"?clearTimeout:void 0,sA=typeof Promise=="function"?Promise:void 0,TH=typeof queueMicrotask=="function"?queueMicrotask:typeof sA<"u"?function(a){return sA.resolve(null).then(a).catch(AH)}:iA;function AH(a){setTimeout(function(){throw a})}function Hs(a){return a==="head"}function oA(a,c){var f=c,g=0,b=0;do{var C=f.nextSibling;if(a.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<g&&8>g){f=g;var M=a.ownerDocument;if(f&1&&ru(M.documentElement),f&2&&ru(M.body),f&4)for(f=M.head,ru(f),M=f.firstChild;M;){var j=M.nextSibling,U=M.nodeName;M[Fr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=j}}if(b===0){a.removeChild(C),du(c);return}b--}else f==="$"||f==="$?"||f==="$!"?b++:g=f.charCodeAt(0)-48;else g=0;f=C}while(f);du(c)}function Ky(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Ky(f),ci(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function MH(a,c,f,g){for(;a.nodeType===1;){var b=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[Fr])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Xr(a.nextSibling),a===null)break}return null}function _H(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Xr(a.nextSibling),a===null))return null;return a}function Wy(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function DH(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var g=function(){c(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function Xr(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var Yy=null;function aA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function lA(a,c,f){switch(c=Ff(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function ru(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);ci(a)}var Mr=new Map,cA=new Set;function $f(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Zi=q.d;q.d={f:RH,r:OH,D:jH,C:LH,L:PH,m:IH,X:zH,S:BH,M:qH};function RH(){var a=Zi.f(),c=Lf();return a||c}function OH(a){var c=On(a);c!==null&&c.tag===5&&c.type==="form"?MN(c):Zi.r(a)}var Cl=typeof document>"u"?null:document;function uA(a,c,f){var g=Cl;if(g&&typeof c=="string"&&c){var b=Cn(c);b='link[rel="'+a+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),cA.has(b)||(cA.add(b),a={rel:a,crossOrigin:f,href:c},g.querySelector(b)===null&&(c=g.createElement("link"),pn(c,"link",a),vt(c),g.head.appendChild(c)))}}function jH(a){Zi.D(a),uA("dns-prefetch",a,null)}function LH(a,c){Zi.C(a,c),uA("preconnect",a,c)}function PH(a,c,f){Zi.L(a,c,f);var g=Cl;if(g&&a&&c){var b='link[rel="preload"][as="'+Cn(c)+'"]';c==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Cn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Cn(f.imageSizes)+'"]')):b+='[href="'+Cn(a)+'"]';var C=b;switch(c){case"style":C=El(a);break;case"script":C=kl(a)}Mr.has(C)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),Mr.set(C,a),g.querySelector(b)!==null||c==="style"&&g.querySelector(iu(C))||c==="script"&&g.querySelector(su(C))||(c=g.createElement("link"),pn(c,"link",a),vt(c),g.head.appendChild(c)))}}function IH(a,c){Zi.m(a,c);var f=Cl;if(f&&a){var g=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Cn(g)+'"][href="'+Cn(a)+'"]',C=b;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=kl(a)}if(!Mr.has(C)&&(a=h({rel:"modulepreload",href:a},c),Mr.set(C,a),f.querySelector(b)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(su(C)))return}g=f.createElement("link"),pn(g,"link",a),vt(g),f.head.appendChild(g)}}}function BH(a,c,f){Zi.S(a,c,f);var g=Cl;if(g&&a){var b=Qn(g).hoistableStyles,C=El(a);c=c||"default";var M=b.get(C);if(!M){var j={loading:0,preload:null};if(M=g.querySelector(iu(C)))j.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=Mr.get(C))&&Xy(a,f);var U=M=g.createElement("link");vt(U),pn(U,"link",a),U._p=new Promise(function(re,de){U.onload=re,U.onerror=de}),U.addEventListener("load",function(){j.loading|=1}),U.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Uf(M,c,g)}M={type:"stylesheet",instance:M,count:1,state:j},b.set(C,M)}}}function zH(a,c){Zi.X(a,c);var f=Cl;if(f&&a){var g=Qn(f).hoistableScripts,b=kl(a),C=g.get(b);C||(C=f.querySelector(su(b)),C||(a=h({src:a,async:!0},c),(c=Mr.get(b))&&Zy(a,c),C=f.createElement("script"),vt(C),pn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(b,C))}}function qH(a,c){Zi.M(a,c);var f=Cl;if(f&&a){var g=Qn(f).hoistableScripts,b=kl(a),C=g.get(b);C||(C=f.querySelector(su(b)),C||(a=h({src:a,async:!0,type:"module"},c),(c=Mr.get(b))&&Zy(a,c),C=f.createElement("script"),vt(C),pn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(b,C))}}function dA(a,c,f,g){var b=(b=ee.current)?$f(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=El(f.href),f=Qn(b).hoistableStyles,g=f.get(c),g||(g={type:"style",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=El(f.href);var C=Qn(b).hoistableStyles,M=C.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,M),(C=b.querySelector(iu(a)))&&!C._p&&(M.instance=C,M.state.loading=5),Mr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},Mr.set(a,f),C||VH(b,a,f,M.state))),c&&g===null)throw Error(r(528,""));return M}if(c&&g!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=kl(f),f=Qn(b).hoistableScripts,g=f.get(c),g||(g={type:"script",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function El(a){return'href="'+Cn(a)+'"'}function iu(a){return'link[rel="stylesheet"]['+a+"]"}function fA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function VH(a,c,f,g){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=a.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),pn(c,"link",f),vt(c),a.head.appendChild(c))}function kl(a){return'[src="'+Cn(a)+'"]'}function su(a){return"script[async]"+a}function hA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var g=a.querySelector('style[data-href~="'+Cn(f.href)+'"]');if(g)return c.instance=g,vt(g),g;var b=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),vt(g),pn(g,"style",b),Uf(g,f.precedence,a),c.instance=g;case"stylesheet":b=El(f.href);var C=a.querySelector(iu(b));if(C)return c.state.loading|=4,c.instance=C,vt(C),C;g=fA(f),(b=Mr.get(b))&&Xy(g,b),C=(a.ownerDocument||a).createElement("link"),vt(C);var M=C;return M._p=new Promise(function(j,U){M.onload=j,M.onerror=U}),pn(C,"link",g),c.state.loading|=4,Uf(C,f.precedence,a),c.instance=C;case"script":return C=kl(f.src),(b=a.querySelector(su(C)))?(c.instance=b,vt(b),b):(g=f,(b=Mr.get(C))&&(g=h({},f),Zy(g,b)),a=a.ownerDocument||a,b=a.createElement("script"),vt(b),pn(b,"link",g),a.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,Uf(g,f.precedence,a));return c.instance}function Uf(a,c,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=g.length?g[g.length-1]:null,C=b,M=0;M<g.length;M++){var j=g[M];if(j.dataset.precedence===c)C=j;else if(C!==b)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function Xy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Zy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Gf=null;function pA(a,c,f){if(Gf===null){var g=new Map,b=Gf=new Map;b.set(f,g)}else b=Gf,g=b.get(f),g||(g=new Map,b.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),b=0;b<f.length;b++){var C=f[b];if(!(C[Fr]||C[zt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(c)||"";M=a+M;var j=g.get(M);j?j.push(C):g.set(M,[C])}}return g}function mA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function HH(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function gA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var ou=null;function FH(){}function $H(a,c,f){if(ou===null)throw Error(r(475));var g=ou;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=El(f.href),C=a.querySelector(iu(b));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=Kf.bind(g),a.then(g,g)),c.state.loading|=4,c.instance=C,vt(C);return}C=a.ownerDocument||a,f=fA(f),(b=Mr.get(b))&&Xy(f,b),C=C.createElement("link"),vt(C);var M=C;M._p=new Promise(function(j,U){M.onload=j,M.onerror=U}),pn(C,"link",f),c.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=Kf.bind(g),a.addEventListener("load",c),a.addEventListener("error",c))}}function UH(){if(ou===null)throw Error(r(475));var a=ou;return a.stylesheets&&a.count===0&&Jy(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&Jy(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Kf(){if(this.count--,this.count===0){if(this.stylesheets)Jy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Wf=null;function Jy(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Wf=new Map,c.forEach(GH,a),Wf=null,Kf.call(a))}function GH(a,c){if(!(c.state.loading&4)){var f=Wf.get(a);if(f)var g=f.get(null);else{f=new Map,Wf.set(a,f);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var M=b[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(f.set(M.dataset.precedence,M),g=M)}g&&f.set(null,g)}b=c.instance,M=b.getAttribute("data-precedence"),C=f.get(M)||g,C===g&&f.set(null,b),f.set(M,b),this.count++,g=Kf.bind(this),b.addEventListener("load",g),b.addEventListener("error",g),C?C.parentNode.insertBefore(b,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),c.state.loading|=4}}var au={$$typeof:k,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function KH(a,c,f,g,b,C,M,j){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ko(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ko(0),this.hiddenUpdates=ko(null),this.identifierPrefix=g,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function yA(a,c,f,g,b,C,M,j,U,re,de,he){return a=new KH(a,c,f,M,j,U,re,he),c=1,C===!0&&(c|=24),C=rr(3,null,null,c),a.current=C,C.stateNode=a,c=Og(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:g,isDehydrated:f,cache:c},Ig(C),a}function vA(a){return a?(a=nl,a):nl}function bA(a,c,f,g,b,C){b=vA(b),g.context===null?g.context=b:g.pendingContext=b,g=Ms(c),g.payload={element:f},C=C===void 0?null:C,C!==null&&(g.callback=C),f=_s(a,g,c),f!==null&&(lr(f,a,c),Ic(f,a,c))}function xA(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function Qy(a,c){xA(a,c),(a=a.alternate)&&xA(a,c)}function wA(a){if(a.tag===13){var c=tl(a,67108864);c!==null&&lr(c,a,67108864),Qy(a,67108864)}}var Yf=!0;function WH(a,c,f,g){var b=I.T;I.T=null;var C=q.p;try{q.p=2,e0(a,c,f,g)}finally{q.p=C,I.T=b}}function YH(a,c,f,g){var b=I.T;I.T=null;var C=q.p;try{q.p=8,e0(a,c,f,g)}finally{q.p=C,I.T=b}}function e0(a,c,f,g){if(Yf){var b=t0(g);if(b===null)Vy(a,c,g,Xf,f),CA(a,g);else if(ZH(b,a,c,f,g))g.stopPropagation();else if(CA(a,g),c&4&&-1<XH.indexOf(a)){for(;b!==null;){var C=On(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=yr(C.pendingLanes);if(M!==0){var j=C;for(j.pendingLanes|=2,j.entangledLanes|=2;M;){var U=1<<31-He(M);j.entanglements[1]|=U,M&=~U}yi(C),(ot&6)===0&&(Of=Ae()+500,eu(0))}}break;case 13:j=tl(C,2),j!==null&&lr(j,C,2),Lf(),Qy(C,2)}if(C=t0(g),C===null&&Vy(a,c,g,Xf,f),C===b)break;b=C}b!==null&&g.stopPropagation()}else Vy(a,c,g,null,f)}}function t0(a){return a=Xa(a),n0(a)}var Xf=null;function n0(a){if(Xf=null,a=ui(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Xf=a,null}function SA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jt()){case un:return 2;case Jn:return 8;case Qt:case Tt:return 32;case ft:return 268435456;default:return 32}default:return 32}}var r0=!1,Fs=null,$s=null,Us=null,lu=new Map,cu=new Map,Gs=[],XH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CA(a,c){switch(a){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Us=null;break;case"pointerover":case"pointerout":lu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":cu.delete(c.pointerId)}}function uu(a,c,f,g,b,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:C,targetContainers:[b]},c!==null&&(c=On(c),c!==null&&wA(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function ZH(a,c,f,g,b){switch(c){case"focusin":return Fs=uu(Fs,a,c,f,g,b),!0;case"dragenter":return $s=uu($s,a,c,f,g,b),!0;case"mouseover":return Us=uu(Us,a,c,f,g,b),!0;case"pointerover":var C=b.pointerId;return lu.set(C,uu(lu.get(C)||null,a,c,f,g,b)),!0;case"gotpointercapture":return C=b.pointerId,cu.set(C,uu(cu.get(C)||null,a,c,f,g,b)),!0}return!1}function EA(a){var c=ui(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,No(a.priority,function(){if(f.tag===13){var g=ar();g=Li(g);var b=tl(f,g);b!==null&&lr(b,f,g),Qy(f,g)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Zf(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=t0(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);wc=g,f.target.dispatchEvent(g),wc=null}else return c=On(f),c!==null&&wA(c),a.blockedOn=f,!1;c.shift()}return!0}function kA(a,c,f){Zf(a)&&f.delete(c)}function JH(){r0=!1,Fs!==null&&Zf(Fs)&&(Fs=null),$s!==null&&Zf($s)&&($s=null),Us!==null&&Zf(Us)&&(Us=null),lu.forEach(kA),cu.forEach(kA)}function Jf(a,c){a.blockedOn===c&&(a.blockedOn=null,r0||(r0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,JH)))}var Qf=null;function NA(a){Qf!==a&&(Qf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qf===a&&(Qf=null);for(var c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],b=a[c+2];if(typeof g!="function"){if(n0(g||f)===null)continue;break}var C=On(f);C!==null&&(a.splice(c,3),c-=3,ny(C,{pending:!0,data:b,method:f.method,action:g},g,b))}}))}function du(a){function c(U){return Jf(U,a)}Fs!==null&&Jf(Fs,a),$s!==null&&Jf($s,a),Us!==null&&Jf(Us,a),lu.forEach(c),cu.forEach(c);for(var f=0;f<Gs.length;f++){var g=Gs[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<Gs.length&&(f=Gs[0],f.blockedOn===null);)EA(f),f.blockedOn===null&&Gs.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var b=f[g],C=f[g+1],M=b[tn]||null;if(typeof C=="function")M||NA(f);else if(M){var j=null;if(C&&C.hasAttribute("formAction")){if(b=C,M=C[tn]||null)j=M.formAction;else if(n0(b)!==null)continue}else j=M.action;typeof j=="function"?f[g+1]=j:(f.splice(g,3),g-=3),NA(f)}}}function i0(a){this._internalRoot=a}eh.prototype.render=i0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,g=ar();bA(f,g,a,c,null,null)},eh.prototype.unmount=i0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;bA(a.current,2,null,a,null,null),Lf(),c[li]=null}};function eh(a){this._internalRoot=a}eh.prototype.unstable_scheduleHydration=function(a){if(a){var c=Ha();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Gs.length&&c!==0&&c<Gs[f].priority;f++);Gs.splice(f,0,a),f===0&&EA(a)}};var TA=t.version;if(TA!=="19.1.1")throw Error(r(527,TA,"19.1.1"));q.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var QH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{xn=th.inject(QH),yt=th}catch{}}return hu.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,g="",b=FN,C=$N,M=UN,j=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=yA(a,1,!1,null,null,f,g,b,C,M,j,null),a[li]=c.current,qy(a),new i0(c)},hu.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var g=!1,b="",C=FN,M=$N,j=UN,U=null,re=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks),f.formState!==void 0&&(re=f.formState)),c=yA(a,1,!0,c,f??null,g,b,C,M,j,U,re),c.context=vA(null),f=c.current,g=ar(),g=Li(g),b=Ms(g),b.callback=null,_s(f,b,g),f=g,c.current.lanes=f,br(c,f),yi(c),a[li]=c.current,qy(a),new eh(c)},hu.version="19.1.1",hu}var IA;function uF(){if(IA)return a0.exports;IA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),a0.exports=cF(),a0.exports}var dF=uF(),fF=v5();const eE=kd(fF);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yu.apply(this,arguments)}var so;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(so||(so={}));const BA="popstate";function hF(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:u=""}=Da(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),RS("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:b5(s))}function r(i,s){tE(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return mF(t,n,r,e)}function Zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function tE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pF(){return Math.random().toString(36).substr(2,8)}function zA(e,t){return{usr:e.state,key:e.key,idx:t}}function RS(e,t,n,r){return n===void 0&&(n=null),Yu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Da(t):t,{state:n,key:t&&t.key||r||pF()})}function b5(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Da(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function mF(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=so.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Yu({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=so.Pop;let w=h(),E=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:E})}function m(w,E){l=so.Push;let N=RS(S.location,w,E);n&&n(N,w),d=h()+1;let k=zA(N,d),T=S.createHref(N);try{o.pushState(k,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&u&&u({action:l,location:S.location,delta:1})}function y(w,E){l=so.Replace;let N=RS(S.location,w,E);n&&n(N,w),d=h();let k=zA(N,d),T=S.createHref(N);o.replaceState(k,"",T),s&&u&&u({action:l,location:S.location,delta:0})}function x(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof w=="string"?w:b5(w);return N=N.replace(/ $/,"%20"),Zt(E,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,E)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(BA,p),u=w,()=>{i.removeEventListener(BA,p),u=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let E=x(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:y,go(w){return o.go(w)}};return S}var qA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qA||(qA={}));function gF(e,t,n){return n===void 0&&(n="/"),yF(e,t,n)}function yF(e,t,n,r){let i=typeof t=="string"?Da(t):t,s=S5(i.pathname||"/",n);if(s==null)return null;let o=x5(e);vF(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=_F(s);l=TF(o[u],d)}return l}function x5(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Zt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=da([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Zt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),x5(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:kF(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of w5(s.path))i(s,o,u)}),t}function w5(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=w5(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function vF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:NF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bF=/^:[\w-]+$/,xF=3,wF=2,SF=1,CF=10,EF=-2,VA=e=>e==="*";function kF(e,t){let n=e.split("/"),r=n.length;return n.some(VA)&&(r+=EF),t&&(r+=wF),n.filter(i=>!VA(i)).reduce((i,s)=>i+(bF.test(s)?xF:s===""?SF:CF),r)}function NF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function TF(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=AF({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:da([s,p.pathname]),pathnameBase:PF(da([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=da([s,p.pathnameBase]))}return o}function AF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=MF(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[p];return y&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function MF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),tE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function _F(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return tE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function S5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function DF(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Da(e):e;return{pathname:n?n.startsWith("/")?n:RF(n,t):t,search:IF(r),hash:BF(i)}}function RF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function d0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function OF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jF(e,t){let n=OF(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function LF(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Da(e):(i=Yu({},e),Zt(!i.pathname||!i.pathname.includes("?"),d0("?","pathname","search",i)),Zt(!i.pathname||!i.pathname.includes("#"),d0("#","pathname","hash",i)),Zt(!i.search||!i.search.includes("#"),d0("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?t[p]:"/"}let u=DF(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const da=e=>e.join("/").replace(/\/\/+/g,"/"),PF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),IF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function zF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const C5=["post","put","patch","delete"];new Set(C5);const qF=["get",...C5];new Set(qF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xu(){return Xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xu.apply(this,arguments)}const nE=R.createContext(null),VF=R.createContext(null),rm=R.createContext(null),im=R.createContext(null),Ra=R.createContext({outlet:null,matches:[],isDataRoute:!1}),E5=R.createContext(null);function sm(){return R.useContext(im)!=null}function k5(){return sm()||Zt(!1),R.useContext(im).location}function N5(e){R.useContext(rm).static||R.useLayoutEffect(e)}function Td(){let{isDataRoute:e}=R.useContext(Ra);return e?t9():HF()}function HF(){sm()||Zt(!1);let e=R.useContext(nE),{basename:t,future:n,navigator:r}=R.useContext(rm),{matches:i}=R.useContext(Ra),{pathname:s}=k5(),o=JSON.stringify(jF(i,n.v7_relativeSplatPath)),l=R.useRef(!1);return N5(()=>{l.current=!0}),R.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=LF(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:da([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function FF(){let{matches:e}=R.useContext(Ra),t=e[e.length-1];return t?t.params:{}}function $F(e,t){return UF(e,t)}function UF(e,t,n,r){sm()||Zt(!1);let{navigator:i}=R.useContext(rm),{matches:s}=R.useContext(Ra),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=k5(),h;if(t){var p;let w=typeof t=="string"?Da(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||Zt(!1),h=w}else h=d;let m=h.pathname||"/",y=m;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=gF(e,{pathname:y}),S=XF(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:da([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:da([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?R.createElement(im.Provider,{value:{location:Xu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:so.Pop}},S):S}function GF(){let e=e9(),t=zF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:i},n):null,null)}const KF=R.createElement(GF,null);class WF extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?R.createElement(Ra.Provider,{value:this.props.routeContext},R.createElement(E5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YF(e){let{routeContext:t,match:n,children:r}=e,i=R.useContext(nE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(Ra.Provider,{value:t},r)}function XF(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||Zt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:y}=n,x=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let y,x=!1,S=null,w=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||KF,u&&(d<0&&m===0?(n9("route-fallback"),x=!0,w=null):d===m&&(x=!0,w=p.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,m+1)),N=()=>{let k;return y?k=S:x?k=w:p.route.Component?k=R.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,R.createElement(YF,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?R.createElement(WF,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:N(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):N()},null)}var T5=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(T5||{}),A5=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(A5||{});function ZF(e){let t=R.useContext(nE);return t||Zt(!1),t}function JF(e){let t=R.useContext(VF);return t||Zt(!1),t}function QF(e){let t=R.useContext(Ra);return t||Zt(!1),t}function M5(e){let t=QF(),n=t.matches[t.matches.length-1];return n.route.id||Zt(!1),n.route.id}function e9(){var e;let t=R.useContext(E5),n=JF(),r=M5();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function t9(){let{router:e}=ZF(T5.UseNavigateStable),t=M5(A5.UseNavigateStable),n=R.useRef(!1);return N5(()=>{n.current=!0}),R.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Xu({fromRouteId:t},s)))},[e,t])}const HA={};function n9(e,t,n){HA[e]||(HA[e]=!0)}function r9(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Qo(e){Zt(!1)}function i9(e){let{basename:t="/",children:n=null,location:r,navigationType:i=so.Pop,navigator:s,static:o=!1,future:l}=e;sm()&&Zt(!1);let u=t.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:u,navigator:s,static:o,future:Xu({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Da(r));let{pathname:h="/",search:p="",hash:m="",state:y=null,key:x="default"}=r,S=R.useMemo(()=>{let w=S5(h,u);return w==null?null:{location:{pathname:w,search:p,hash:m,state:y,key:x},navigationType:i}},[u,h,p,m,y,x,i]);return S==null?null:R.createElement(rm.Provider,{value:d},R.createElement(im.Provider,{children:n,value:S}))}function s9(e){let{children:t,location:n}=e;return $F(OS(t),n)}new Promise(()=>{});function OS(e,t){t===void 0&&(t=[]);let n=[];return R.Children.forEach(e,(r,i)=>{if(!R.isValidElement(r))return;let s=[...t,i];if(r.type===R.Fragment){n.push.apply(n,OS(r.props.children,s));return}r.type!==Qo&&Zt(!1),!r.props.index||!r.props.children||Zt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=OS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const o9="6";try{window.__reactRouterVersion=o9}catch{}const a9="startTransition",FA=sF[a9];function l9(e){let{basename:t,children:n,future:r,window:i}=e,s=R.useRef();s.current==null&&(s.current=hF({window:i,v5Compat:!0}));let o=s.current,[l,u]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=R.useCallback(p=>{d&&FA?FA(()=>u(p)):u(p)},[u,d]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>r9(r),[r]),R.createElement(i9,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var $A;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})($A||($A={}));var UA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(UA||(UA={}));var _5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},GA=_e.createContext&&_e.createContext(_5),c9=["attr","size","title"];function u9(e,t){if(e==null)return{};var n=d9(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function d9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uh.apply(this,arguments)}function KA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(n),!0).forEach(function(r){f9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f9(e,t,n){return t=h9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=p9(e,"string");return typeof t=="symbol"?t:t+""}function p9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D5(e){return e&&e.map((t,n)=>_e.createElement(t.tag,Gh({key:n},t.attr),D5(t.child)))}function Qe(e){return t=>_e.createElement(m9,Uh({attr:Gh({},e.attr)},t),D5(e.child))}function m9(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=u9(e,c9),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),_e.createElement("svg",Uh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Gh(Gh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&_e.createElement("title",null,s),e.children)};return GA!==void 0?_e.createElement(GA.Consumer,null,n=>t(n)):t(_5)}function g9(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function y9(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function v9(e){return Qe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const b9=e=>e==="system"||e==="light"||e==="dark";function Oa(){const[e,t]=R.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return b9(s)?s:"light"}),[n,r]=R.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return R.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),R.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const Ad=()=>{const{theme:e,setTheme:t}=Oa();return v.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?v.jsx(g9,{size:18}):v.jsx(y9,{size:18})})},cr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},Md=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(R.useEffect(()=>{document.title=e||cr.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let m=document.querySelector(`meta[${p}="${u}"]`);m?m.content=d:(m=document.createElement("meta"),m.setAttribute(p,u),m.content=d,document.head.appendChild(m))};o("description",t||cr.description),o("keywords",n||cr.keywords),o("og:title",e||cr.title,!0),o("og:description",t||cr.description,!0),o("og:image",r||cr.image,!0),o("og:url",i||cr.url,!0),o("og:type",s,!0),o("twitter:title",e||cr.title),o("twitter:description",t||cr.description),o("twitter:image",r||cr.image),o("twitter:url",i||cr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||cr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||cr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class xu extends Error{}xu.prototype.name="InvalidTokenError";function x9(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function w9(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return x9(t)}catch{return atob(t)}}function S9(e,t){if(typeof e!="string")throw new xu("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new xu(`Invalid token specified: missing part #${n+1}`);let i;try{i=w9(r)}catch(s){throw new xu(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new xu(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Un="https://diagrammatic-api-production.up.railway.app";class C9{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${Un}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${Un}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${Un}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${Un}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${Un}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${Un}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${Un}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${Un}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async getPublicDiagram(t){const n=await fetch(`${Un}/api/v1/diagrams/${t}/public`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${Un}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}async addCollaborator(t,n,r){const i=await fetch(`${Un}/api/v1/diagrams/${t}/share`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({email:n,permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to add collaborator"}));throw new Error(s.message||"Failed to add collaborator")}}async getCollaborators(t){const n=await fetch(`${Un}/api/v1/diagrams/${t}/collaborators`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch collaborators");return n.json()}async updateCollaborator(t,n,r){const i=await fetch(`${Un}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to update collaborator"}));throw new Error(s.message||"Failed to update collaborator")}}async removeCollaborator(t,n){if(!(await fetch(`${Un}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to remove collaborator")}}const yn=new C9,R5=R.createContext(void 0),E9=({children:e})=>{const[t,n]=R.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=R.useCallback(h=>{try{const p=S9(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=R.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);R.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(m=>({...m,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(m=>({...m,isLoading:!1}));return}try{const m=await yn.getCurrentUser();n({user:m,token:p,isAuthenticated:!0,isLoading:!1})}catch(m){console.error("Failed to fetch user:",m),localStorage.removeItem("auth_token"),n(y=>({...y,isLoading:!1}))}})()},[r]);const s=R.useCallback(async h=>{const{user:p,token:m}=await yn.login(h);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),o=R.useCallback(async h=>{const{user:p,token:m}=await yn.signup(h);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),l=R.useCallback(async h=>{const{user:p,token:m}=await yn.googleLogin(h);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),u=R.useCallback(async()=>{if(t.token)try{const h=await yn.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=R.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return v.jsx(R5.Provider,{value:d,children:e})},om=()=>{const e=R.useContext(R5);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},rE=R.createContext({});function iE(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const sE=typeof window<"u",O5=sE?R.useLayoutEffect:R.useEffect,am=R.createContext(null);function oE(e,t){e.indexOf(t)===-1&&e.push(t)}function aE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const cs=(e,t,n)=>n>t?t:n<e?e:n;let lE=()=>{};const us={},j5=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function L5(e){return typeof e=="object"&&e!==null}const P5=e=>/^0[^.\s]+$/u.test(e);function cE(e){let t;return()=>(t===void 0&&(t=e()),t)}const Br=e=>e,k9=(e,t)=>n=>t(e(n)),_d=(...e)=>e.reduce(k9),Zu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class uE{constructor(){this.subscriptions=[]}add(t){return oE(this.subscriptions,t),()=>aE(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ei=e=>e*1e3,Pr=e=>e/1e3;function I5(e,t){return t?e*(1e3/t):0}const B5=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,N9=1e-7,T9=12;function A9(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=B5(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>N9&&++l<T9);return o}function Dd(e,t,n,r){if(e===t&&n===r)return Br;const i=s=>A9(s,0,1,e,n);return s=>s===0||s===1?s:B5(i(s),t,r)}const z5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,q5=e=>t=>1-e(1-t),V5=Dd(.33,1.53,.69,.99),dE=q5(V5),H5=z5(dE),F5=e=>(e*=2)<1?.5*dE(e):.5*(2-Math.pow(2,-10*(e-1))),fE=e=>1-Math.sin(Math.acos(e)),$5=q5(fE),U5=z5(fE),M9=Dd(.42,0,1,1),_9=Dd(0,0,.58,1),G5=Dd(.42,0,.58,1),D9=e=>Array.isArray(e)&&typeof e[0]!="number",K5=e=>Array.isArray(e)&&typeof e[0]=="number",R9={linear:Br,easeIn:M9,easeInOut:G5,easeOut:_9,circIn:fE,circInOut:U5,circOut:$5,backIn:dE,backInOut:H5,backOut:V5,anticipate:F5},O9=e=>typeof e=="string",WA=e=>{if(K5(e)){lE(e.length===4);const[t,n,r,i]=e;return Dd(t,n,r,i)}else if(O9(e))return R9[e];return e},rh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function j9(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,m=!1)=>{const x=m&&i?n:r;return p&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const L9=40;function W5(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=rh.reduce((k,T)=>(k[T]=j9(s),k),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:y,postRender:x}=o,S=()=>{const k=us.useManualTiming?i.timestamp:performance.now();n=!1,us.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,L9),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),y.process(i),x.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:rh.reduce((k,T)=>{const A=o[T];return k[T]=(_,O=!1,D=!1)=>(n||w(),A.schedule(_,O,D)),k},{}),cancel:k=>{for(let T=0;T<rh.length;T++)o[rh[T]].cancel(k)},state:i,steps:o}}const{schedule:xt,cancel:go,state:gn,steps:f0}=W5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Br,!0);let Mh;function P9(){Mh=void 0}const Kn={now:()=>(Mh===void 0&&Kn.set(gn.isProcessing||us.useManualTiming?gn.timestamp:performance.now()),Mh),set:e=>{Mh=e,queueMicrotask(P9)}},Y5=e=>t=>typeof t=="string"&&t.startsWith(e),hE=Y5("--"),I9=Y5("var(--"),pE=e=>I9(e)?B9.test(e.split("/*")[0].trim()):!1,B9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ju={...lc,transform:e=>cs(0,1,e)},ih={...lc,default:1},Du=e=>Math.round(e*1e5)/1e5,mE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function z9(e){return e==null}const q9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,gE=(e,t)=>n=>!!(typeof n=="string"&&q9.test(n)&&n.startsWith(e)||t&&!z9(n)&&Object.prototype.hasOwnProperty.call(n,t)),X5=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(mE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},V9=e=>cs(0,255,e),h0={...lc,transform:e=>Math.round(V9(e))},ia={test:gE("rgb","red"),parse:X5("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+h0.transform(e)+", "+h0.transform(t)+", "+h0.transform(n)+", "+Du(Ju.transform(r))+")"};function H9(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jS={test:gE("#"),parse:H9,transform:ia.transform},Rd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Zs=Rd("deg"),ki=Rd("%"),Be=Rd("px"),F9=Rd("vh"),$9=Rd("vw"),YA={...ki,parse:e=>ki.parse(e)/100,transform:e=>ki.transform(e*100)},Pl={test:gE("hsl","hue"),parse:X5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ki.transform(Du(t))+", "+ki.transform(Du(n))+", "+Du(Ju.transform(r))+")"},Ft={test:e=>ia.test(e)||jS.test(e)||Pl.test(e),parse:e=>ia.test(e)?ia.parse(e):Pl.test(e)?Pl.parse(e):jS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ia.transform(e):Pl.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},U9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function G9(e){return isNaN(e)&&typeof e=="string"&&(e.match(mE)?.length||0)+(e.match(U9)?.length||0)>0}const Z5="number",J5="color",K9="var",W9="var(",XA="${}",Y9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(Y9,u=>(Ft.test(u)?(r.color.push(s),i.push(J5),n.push(Ft.parse(u))):u.startsWith(W9)?(r.var.push(s),i.push(K9),n.push(u)):(r.number.push(s),i.push(Z5),n.push(parseFloat(u))),++s,XA)).split(XA);return{values:n,split:l,indexes:r,types:i}}function Q5(e){return Qu(e).values}function eP(e){const{split:t,types:n}=Qu(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===Z5?s+=Du(i[o]):l===J5?s+=Ft.transform(i[o]):s+=i[o]}return s}}const X9=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function Z9(e){const t=Q5(e);return eP(e)(t.map(X9))}const yo={test:G9,parse:Q5,createTransformer:eP,getAnimatableNone:Z9};function p0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function J9({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=p0(u,l,e+1/3),s=p0(u,l,e),o=p0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Kh(e,t){return n=>n>0?t:e}const kt=(e,t,n)=>e+(t-e)*n,m0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},Q9=[jS,ia,Pl],e7=e=>Q9.find(t=>t.test(e));function ZA(e){const t=e7(e);if(!t)return!1;let n=t.parse(e);return t===Pl&&(n=J9(n)),n}const JA=(e,t)=>{const n=ZA(e),r=ZA(t);if(!n||!r)return Kh(e,t);const i={...n};return s=>(i.red=m0(n.red,r.red,s),i.green=m0(n.green,r.green,s),i.blue=m0(n.blue,r.blue,s),i.alpha=kt(n.alpha,r.alpha,s),ia.transform(i))},LS=new Set(["none","hidden"]);function t7(e,t){return LS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function n7(e,t){return n=>kt(e,t,n)}function yE(e){return typeof e=="number"?n7:typeof e=="string"?pE(e)?Kh:Ft.test(e)?JA:s7:Array.isArray(e)?tP:typeof e=="object"?Ft.test(e)?JA:r7:Kh}function tP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>yE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function r7(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=yE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function i7(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const s7=(e,t)=>{const n=yo.createTransformer(t),r=Qu(e),i=Qu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?LS.has(e)&&!i.values.length||LS.has(t)&&!r.values.length?t7(e,t):_d(tP(i7(r,i),i.values),n):Kh(e,t)};function nP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?kt(e,t,n):yE(e)(e,t)}const o7=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>xt.update(t,n),stop:()=>go(t),now:()=>gn.isProcessing?gn.timestamp:Kn.now()}},rP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Wh=2e4;function vE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Wh;)t+=n,r=e.next(t);return t>=Wh?1/0:t}function a7(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(vE(r),Wh);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Pr(i)}}const l7=5;function iP(e,t,n){const r=Math.max(t-l7,0);return I5(n-e(r),t-r)}const Dt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},g0=.001;function c7({duration:e=Dt.duration,bounce:t=Dt.bounce,velocity:n=Dt.velocity,mass:r=Dt.mass}){let i,s,o=1-t;o=cs(Dt.minDamping,Dt.maxDamping,o),e=cs(Dt.minDuration,Dt.maxDuration,Pr(e)),o<1?(i=d=>{const h=d*o,p=h*e,m=h-n,y=PS(d,o),x=Math.exp(-p);return g0-m/y*x},s=d=>{const p=d*o*e,m=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-p),S=PS(Math.pow(d,2),o);return(-i(d)+g0>0?-1:1)*((m-y)*x)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-g0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=d7(i,s,l);if(e=Ei(e),isNaN(u))return{stiffness:Dt.stiffness,damping:Dt.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const u7=12;function d7(e,t,n){let r=n;for(let i=1;i<u7;i++)r=r-e(r)/t(r);return r}function PS(e,t){return e*Math.sqrt(1-t*t)}const f7=["duration","bounce"],h7=["stiffness","damping","mass"];function QA(e,t){return t.some(n=>e[n]!==void 0)}function p7(e){let t={velocity:Dt.velocity,stiffness:Dt.stiffness,damping:Dt.damping,mass:Dt.mass,isResolvedFromDuration:!1,...e};if(!QA(e,h7)&&QA(e,f7))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*cs(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Dt.mass,stiffness:i,damping:s}}else{const n=c7(e);t={...t,...n,mass:Dt.mass},t.isResolvedFromDuration=!0}return t}function Yh(e=Dt.visualDuration,t=Dt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=p7({...n,velocity:-Pr(n.velocity||0)}),x=m||0,S=d/(2*Math.sqrt(u*h)),w=o-s,E=Pr(Math.sqrt(u/h)),N=Math.abs(w)<5;r||(r=N?Dt.restSpeed.granular:Dt.restSpeed.default),i||(i=N?Dt.restDelta.granular:Dt.restDelta.default);let k;if(S<1){const A=PS(E,S);k=_=>{const O=Math.exp(-S*E*_);return o-O*((x+S*E*w)/A*Math.sin(A*_)+w*Math.cos(A*_))}}else if(S===1)k=A=>o-Math.exp(-E*A)*(w+(x+E*w)*A);else{const A=E*Math.sqrt(S*S-1);k=_=>{const O=Math.exp(-S*E*_),D=Math.min(A*_,300);return o-O*((x+S*E*w)*Math.sinh(D)+A*w*Math.cosh(D))/A}}const T={calculatedDuration:y&&p||null,next:A=>{const _=k(A);if(y)l.done=A>=p;else{let O=A===0?x:0;S<1&&(O=A===0?Ei(x):iP(k,A,_));const D=Math.abs(O)<=r,P=Math.abs(o-_)<=i;l.done=D&&P}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(vE(T),Wh),_=rP(O=>T.next(A*O).value,A,30);return A+"ms "+_},toTransition:()=>{}};return T}Yh.applyToOptions=e=>{const t=a7(e,100,Yh);return e.ease=t.ease,e.duration=Ei(t.duration),e.type="keyframes",e};function IS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],m={done:!1,value:p},y=D=>l!==void 0&&D<l||u!==void 0&&D>u,x=D=>l===void 0?u:u===void 0||Math.abs(l-D)<Math.abs(u-D)?l:u;let S=n*t;const w=p+S,E=o===void 0?w:o(w);E!==w&&(S=E-p);const N=D=>-S*Math.exp(-D/r),k=D=>E+N(D),T=D=>{const P=N(D),H=k(D);m.done=Math.abs(P)<=d,m.value=m.done?E:H};let A,_;const O=D=>{y(m.value)&&(A=D,_=Yh({keyframes:[m.value,x(m.value)],velocity:iP(k,D,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return O(0),{calculatedDuration:null,next:D=>{let P=!1;return!_&&A===void 0&&(P=!0,T(D),O(D)),A!==void 0&&D>=A?_.next(D-A):(!P&&T(D),m)}}}function m7(e,t,n){const r=[],i=n||us.mix||nP,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Br:t;l=_d(u,l)}r.push(l)}return r}function g7(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(lE(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=m7(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const m=Zu(e[p],e[p+1],h);return l[p](m)};return n?h=>d(cs(e[0],e[s-1],h)):d}function y7(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Zu(0,t,r);e.push(kt(n,1,i))}}function v7(e){const t=[0];return y7(t,e.length-1),t}function b7(e,t){return e.map(n=>n*t)}function x7(e,t){return e.map(()=>t||G5).splice(0,e.length-1)}function Ru({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=D9(r)?r.map(WA):WA(r),s={done:!1,value:t[0]},o=b7(n&&n.length===t.length?n:v7(t),e),l=g7(o,t,{ease:Array.isArray(i)?i:x7(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const w7=e=>e!==null;function bE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(w7),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const S7={decay:IS,inertia:IS,tween:Ru,keyframes:Ru,spring:Yh};function sP(e){typeof e.type=="string"&&(e.type=S7[e.type])}class xE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const C7=e=>e/100;class wE extends xE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Kn.now()&&this.tick(Kn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;sP(t);const{type:n=Ru,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||Ru;u!==Ru&&typeof l[0]!="number"&&(this.mixKeyframes=_d(C7,nP(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=vE(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:y,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,T=r;if(p){const D=Math.min(this.currentTime,i)/l;let P=Math.floor(D),H=D%1;!H&&D>=1&&(H=1),H===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(m==="reverse"?(H=1-H,y&&(H-=y/l)):m==="mirror"&&(T=o)),k=cs(0,1,H)*l}const A=N?{done:!1,value:h[0]}:T.next(k);s&&(A.value=s(A.value));let{done:_}=A;!N&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return O&&x!==IS&&(A.value=bE(h,this.options,w,this.speed)),S&&S(A.value),O&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return Pr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pr(t)}get time(){return Pr(this.currentTime)}set time(t){t=Ei(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Kn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Pr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=o7,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function E7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const sa=e=>e*180/Math.PI,BS=e=>{const t=sa(Math.atan2(e[1],e[0]));return zS(t)},k7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:BS,rotateZ:BS,skewX:e=>sa(Math.atan(e[1])),skewY:e=>sa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},zS=e=>(e=e%360,e<0&&(e+=360),e),eM=BS,tM=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),nM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),N7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:tM,scaleY:nM,scale:e=>(tM(e)+nM(e))/2,rotateX:e=>zS(sa(Math.atan2(e[6],e[5]))),rotateY:e=>zS(sa(Math.atan2(-e[2],e[0]))),rotateZ:eM,rotate:eM,skewX:e=>sa(Math.atan(e[4])),skewY:e=>sa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function qS(e){return e.includes("scale")?1:0}function VS(e,t){if(!e||e==="none")return qS(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=N7,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=k7,i=l}if(!i)return qS(t);const s=r[t],o=i[1].split(",").map(A7);return typeof s=="function"?s(o):o[s]}const T7=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return VS(n,t)};function A7(e){return parseFloat(e.trim())}const cc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],uc=new Set(cc),rM=e=>e===lc||e===Be,M7=new Set(["x","y","z"]),_7=cc.filter(e=>!M7.has(e));function D7(e){const t=[];return _7.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const fa={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>VS(t,"x"),y:(e,{transform:t})=>VS(t,"y")};fa.translateX=fa.x;fa.translateY=fa.y;const ha=new Set;let HS=!1,FS=!1,$S=!1;function oP(){if(FS){const e=Array.from(ha).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=D7(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}FS=!1,HS=!1,ha.forEach(e=>e.complete($S)),ha.clear()}function aP(){ha.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(FS=!0)})}function R7(){$S=!0,aP(),oP(),$S=!1}class SE{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ha.add(this),HS||(HS=!0,xt.read(aP),xt.resolveKeyframes(oP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}E7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ha.delete(this)}cancel(){this.state==="scheduled"&&(ha.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const O7=e=>e.startsWith("--");function j7(e,t,n){O7(t)?e.style.setProperty(t,n):e.style[t]=n}const L7=cE(()=>window.ScrollTimeline!==void 0),P7={};function I7(e,t){const n=cE(e);return()=>P7[t]??n()}const lP=I7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,iM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wu([0,.65,.55,1]),circOut:wu([.55,0,1,.45]),backIn:wu([.31,.01,.66,-.59]),backOut:wu([.33,1.53,.69,.99])};function cP(e,t){if(e)return typeof e=="function"?lP()?rP(e,t):"ease-out":K5(e)?wu(e):Array.isArray(e)?e.map(n=>cP(n,t)||iM.easeOut):iM[e]}function B7(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=cP(l,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(h,m)}function uP(e){return typeof e=="function"&&"applyToOptions"in e}function z7({type:e,...t}){return uP(e)&&lP()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class q7 extends xE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,lE(typeof t.type!="string");const d=z7(t);this.animation=B7(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=bE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):j7(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Pr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Pr(t)}get time(){return Pr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ei(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&L7()?(this.animation.timeline=t,Br):n(this)}}const dP={anticipate:F5,backInOut:H5,circInOut:U5};function V7(e){return e in dP}function H7(e){typeof e.ease=="string"&&V7(e.ease)&&(e.ease=dP[e.ease])}const sM=10;class F7 extends q7{constructor(t){H7(t),sP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new wE({...o,autoplay:!1}),u=Ei(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-sM).value,l.sample(u).value,sM),l.stop()}}const oM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(yo.test(e)||e==="0")&&!e.startsWith("url("));function $7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function U7(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=oM(i,t),l=oM(s,t);return!o||!l?!1:$7(e)||(n==="spring"||uP(n))&&r}function US(e){e.duration=0,e.type="keyframes"}const G7=new Set(["opacity","clipPath","filter","transform"]),K7=cE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function W7(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return K7()&&n&&G7.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Y7=40;class X7 extends xE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Kn.now();const m={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},y=h?.KeyframeResolver||SE;this.keyframeResolver=new y(l,(x,S,w)=>this.onKeyframesResolved(x,S,m,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Kn.now(),U7(t,s,o,l)||((us.instantAnimations||!u)&&h?.(bE(t,r,n)),t[0]=t[t.length-1],US(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Y7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!d&&W7(m)?new F7({...m,element:m.motionValue.owner.current}):new wE(m);y.finished.then(()=>this.notifyFinished()).catch(Br),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),R7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Z7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function J7(e){const t=Z7.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function fP(e,t,n=1){const[r,i]=J7(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return j5(o)?parseFloat(o):o}return pE(i)?fP(i,t,n+1):i}function CE(e,t){return e?.[t]??e?.default??e}const hP=new Set(["width","height","top","left","right","bottom",...cc]),Q7={test:e=>e==="auto",parse:e=>e},pP=e=>t=>t.test(e),mP=[lc,Be,ki,Zs,$9,F9,Q7],aM=e=>mP.find(pP(e));function e$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||P5(e):!0}const t$=new Set(["brightness","contrast","saturate","opacity"]);function n$(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(mE)||[];if(!r)return e;const i=n.replace(r,"");let s=t$.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const r$=/\b([a-z-]*)\(.*?\)/gu,GS={...yo,getAnimatableNone:e=>{const t=e.match(r$);return t?t.map(n$).join(" "):e}},lM={...lc,transform:Math.round},i$={rotate:Zs,rotateX:Zs,rotateY:Zs,rotateZ:Zs,scale:ih,scaleX:ih,scaleY:ih,scaleZ:ih,skew:Zs,skewX:Zs,skewY:Zs,distance:Be,translateX:Be,translateY:Be,translateZ:Be,x:Be,y:Be,z:Be,perspective:Be,transformPerspective:Be,opacity:Ju,originX:YA,originY:YA,originZ:Be},EE={borderWidth:Be,borderTopWidth:Be,borderRightWidth:Be,borderBottomWidth:Be,borderLeftWidth:Be,borderRadius:Be,radius:Be,borderTopLeftRadius:Be,borderTopRightRadius:Be,borderBottomRightRadius:Be,borderBottomLeftRadius:Be,width:Be,maxWidth:Be,height:Be,maxHeight:Be,top:Be,right:Be,bottom:Be,left:Be,padding:Be,paddingTop:Be,paddingRight:Be,paddingBottom:Be,paddingLeft:Be,margin:Be,marginTop:Be,marginRight:Be,marginBottom:Be,marginLeft:Be,backgroundPositionX:Be,backgroundPositionY:Be,...i$,zIndex:lM,fillOpacity:Ju,strokeOpacity:Ju,numOctaves:lM},s$={...EE,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:GS,WebkitFilter:GS},gP=e=>s$[e];function yP(e,t){let n=gP(e);return n!==GS&&(n=yo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const o$=new Set(["auto","none","0"]);function a$(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!o$.has(s)&&Qu(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=yP(n,i)}class l$ extends SE{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),pE(d))){const h=fP(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!hP.has(r)||t.length!==2)return;const[i,s]=t,o=aM(i),l=aM(s);if(o!==l)if(rM(o)&&rM(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else fa[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||e$(t[i]))&&r.push(i);r.length&&a$(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fa[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=fa[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function c$(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const vP=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function bP(e){return L5(e)&&"offsetHeight"in e}const cM=30,u$=e=>!isNaN(parseFloat(e));class d${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Kn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Kn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=u$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new uE);const r=this.events[t].add(n);return t==="change"?()=>{r(),xt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Kn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>cM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,cM);return I5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yl(e,t){return new d$(e,t)}const{schedule:kE}=W5(queueMicrotask,!1),Zr={x:!1,y:!1};function xP(){return Zr.x||Zr.y}function f$(e){return e==="x"||e==="y"?Zr[e]?null:(Zr[e]=!0,()=>{Zr[e]=!1}):Zr.x||Zr.y?null:(Zr.x=Zr.y=!0,()=>{Zr.x=Zr.y=!1})}function wP(e,t){const n=c$(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function uM(e){return!(e.pointerType==="touch"||xP())}function h$(e,t,n={}){const[r,i,s]=wP(e,n),o=l=>{if(!uM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{uM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const SP=(e,t)=>t?e===t?!0:SP(e,t.parentElement):!1,NE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,p$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function m$(e){return p$.has(e.tagName)||e.tabIndex!==-1}const _h=new WeakSet;function dM(e){return t=>{t.key==="Enter"&&e(t)}}function y0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const g$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=dM(()=>{if(_h.has(n))return;y0(n,"down");const i=dM(()=>{y0(n,"up")}),s=()=>y0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function fM(e){return NE(e)&&!xP()}function y$(e,t,n={}){const[r,i,s]=wP(e,n),o=l=>{const u=l.currentTarget;if(!fM(l))return;_h.add(u);const d=t(u,l),h=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),_h.has(u)&&_h.delete(u),fM(y)&&typeof d=="function"&&d(y,{success:x})},p=y=>{h(y,u===window||u===document||n.useGlobalTarget||SP(u,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),bP(l)&&(l.addEventListener("focus",d=>g$(d,i)),!m$(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function CP(e){return L5(e)&&"ownerSVGElement"in e}function v$(e){return CP(e)&&e.tagName==="svg"}const Tn=e=>!!(e&&e.getVelocity),b$=[...mP,Ft,yo],x$=e=>b$.find(pP(e)),TE=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function hM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function w$(...e){return t=>{let n=!1;const r=e.map(i=>{const s=hM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():hM(e[i],null)}}}}function S$(...e){return R.useCallback(w$(...e),e)}class C$ extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=bP(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function E$({children:e,isPresent:t,anchorX:n,root:r}){const i=R.useId(),s=R.useRef(null),o=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=R.useContext(TE),u=S$(s,e?.ref);return R.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:y}=o.current;if(t||!s.current||!d||!h)return;const x=n==="left"?`left: ${m}`:`right: ${y}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),v.jsx(C$,{isPresent:t,childRef:s,sizeRef:o,children:R.cloneElement(e,{ref:u})})}const k$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=iE(N$),h=R.useId();let p=!0,m=R.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const x of d.values())if(!x)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return s&&p&&(m={...m}),R.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[n]),R.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=v.jsx(E$,{isPresent:n,anchorX:l,root:u,children:e})),v.jsx(am.Provider,{value:m,children:e})};function N$(){return new Map}function EP(e=!0){const t=R.useContext(am);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=R.useId();R.useEffect(()=>{if(e)return i(s)},[e]);const o=R.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const sh=e=>e.key||"";function pM(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const lm=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=EP(o),p=R.useMemo(()=>pM(e),[e]),m=o&&!d?[]:p.map(sh),y=R.useRef(!0),x=R.useRef(p),S=iE(()=>new Map),[w,E]=R.useState(p),[N,k]=R.useState(p);O5(()=>{y.current=!1,x.current=p;for(let _=0;_<N.length;_++){const O=sh(N[_]);m.includes(O)?S.delete(O):S.get(O)!==!0&&S.set(O,!1)}},[N,m.length,m.join("-")]);const T=[];if(p!==w){let _=[...p];for(let O=0;O<N.length;O++){const D=N[O],P=sh(D);m.includes(P)||(_.splice(O,0,D),T.push(D))}return s==="wait"&&T.length&&(_=T),k(pM(_)),E(p),null}const{forceRender:A}=R.useContext(rE);return v.jsx(v.Fragment,{children:N.map(_=>{const O=sh(_),D=o&&!d?!1:p===N||m.includes(O),P=()=>{if(S.has(O))S.set(O,!0);else return;let H=!0;S.forEach(V=>{V||(H=!1)}),H&&(A?.(),k(x.current),o&&h?.(),r&&r())};return v.jsx(k$,{isPresent:D,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:D?void 0:P,anchorX:l,children:_},O)})})},kP=R.createContext({strict:!1}),mM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xl={};for(const e in mM)Xl[e]={isEnabled:t=>mM[e].some(n=>!!t[n])};function T$(e){for(const t in e)Xl[t]={...Xl[t],...e[t]}}const A$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||A$.has(e)}let NP=e=>!Xh(e);function M$(e){typeof e=="function"&&(NP=t=>t.startsWith("on")?!Xh(t):e(t))}try{M$(require("@emotion/is-prop-valid").default)}catch{}function _$(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(NP(i)||n===!0&&Xh(i)||!t&&!Xh(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const cm=R.createContext({});function um(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ed(e){return typeof e=="string"||Array.isArray(e)}const AE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ME=["initial",...AE];function dm(e){return um(e.animate)||ME.some(t=>ed(e[t]))}function TP(e){return!!(dm(e)||e.variants)}function D$(e,t){if(dm(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ed(n)?n:void 0,animate:ed(r)?r:void 0}}return e.inherit!==!1?t:{}}function R$(e){const{initial:t,animate:n}=D$(e,R.useContext(cm));return R.useMemo(()=>({initial:t,animate:n}),[gM(t),gM(n)])}function gM(e){return Array.isArray(e)?e.join(" "):e}const td={};function O$(e){for(const t in e)td[t]=e[t],hE(t)&&(td[t].isCSSVariable=!0)}function AP(e,{layout:t,layoutId:n}){return uc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!td[e]||e==="opacity")}const j$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L$=cc.length;function P$(e,t,n){let r="",i=!0;for(let s=0;s<L$;s++){const o=cc[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=vP(l,EE[o]);if(!u){i=!1;const h=j$[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function _E(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(uc.has(u)){o=!0;continue}else if(hE(u)){i[u]=d;continue}else{const h=vP(d,EE[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=P$(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const DE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MP(e,t,n){for(const r in t)!Tn(t[r])&&!AP(r,n)&&(e[r]=t[r])}function I$({transformTemplate:e},t){return R.useMemo(()=>{const n=DE();return _E(n,t,e),Object.assign({},n.vars,n.style)},[t])}function B$(e,t){const n=e.style||{},r={};return MP(r,n,e),Object.assign(r,I$(e,t)),r}function z$(e,t){const n={},r=B$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const q$={offset:"stroke-dashoffset",array:"stroke-dasharray"},V$={offset:"strokeDashoffset",array:"strokeDasharray"};function H$(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?q$:V$;e[s.offset]=Be.transform(-r);const o=Be.transform(t),l=Be.transform(n);e[s.array]=`${o} ${l}`}function _P(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(_E(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:m}=e;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&H$(p,i,s,o,!1)}const DP=()=>({...DE(),attrs:{}}),RP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function F$(e,t,n,r){const i=R.useMemo(()=>{const s=DP();return _P(s,t,RP(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};MP(s,e.style,e),i.style={...s,...i.style}}return i}const $$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RE(e){return typeof e!="string"||e.includes("-")?!1:!!($$.indexOf(e)>-1||/[A-Z]/u.test(e))}function U$(e,t,n,{latestValues:r},i,s=!1){const l=(RE(e)?F$:z$)(t,r,i,e),u=_$(t,typeof e=="string",s),d=e!==R.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=R.useMemo(()=>Tn(h)?h.get():h,[h]);return R.createElement(e,{...d,children:p})}function yM(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function OE(e,t,n,r){if(typeof t=="function"){const[i,s]=yM(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=yM(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function Dh(e){return Tn(e)?e.get():e}function G$({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:K$(n,r,i,e),renderState:t()}}function K$(e,t,n,r){const i={},s=r(e,{});for(const m in s)i[m]=Dh(s[m]);let{initial:o,animate:l}=e;const u=dm(e),d=TP(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!um(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const x=OE(e,m[y]);if(x){const{transitionEnd:S,transition:w,...E}=x;for(const N in E){let k=E[N];if(Array.isArray(k)){const T=h?k.length-1:0;k=k[T]}k!==null&&(i[N]=k)}for(const N in S)i[N]=S[N]}}}return i}const OP=e=>(t,n)=>{const r=R.useContext(cm),i=R.useContext(am),s=()=>G$(e,t,r,i);return n?s():iE(s)};function jE(e,t,n){const{style:r}=e,i={};for(const s in r)(Tn(r[s])||t.style&&Tn(t.style[s])||AP(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const W$=OP({scrapeMotionValuesFromProps:jE,createRenderState:DE});function jP(e,t,n){const r=jE(e,t,n);for(const i in e)if(Tn(e[i])||Tn(t[i])){const s=cc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const Y$=OP({scrapeMotionValuesFromProps:jP,createRenderState:DP}),X$=Symbol.for("motionComponentSymbol");function Il(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Z$(e,t,n){return R.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Il(n)&&(n.current=r))},[t])}const LE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),J$="framerAppearId",LP="data-"+LE(J$),PP=R.createContext({});function Q$(e,t,n,r,i){const{visualElement:s}=R.useContext(cm),o=R.useContext(kP),l=R.useContext(am),u=R.useContext(TE).reducedMotion,d=R.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=R.useContext(PP);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&eU(d.current,n,i,p);const m=R.useRef(!1);R.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[LP],x=R.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return O5(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),R.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),h.enteringChildren=void 0)}),h}function eU(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:IP(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Il(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function IP(e){if(e)return e.options.allowProjection!==!1?e.projection:IP(e.parent)}function v0(e,{forwardMotionProps:t=!1}={},n,r){n&&T$(n);const i=RE(e)?Y$:W$;function s(l,u){let d;const h={...R.useContext(TE),...l,layoutId:tU(l)},{isStatic:p}=h,m=R$(l),y=i(l,p);if(!p&&sE){nU();const x=rU(h);d=x.MeasureLayout,m.visualElement=Q$(e,y,h,r,x.ProjectionNode)}return v.jsxs(cm.Provider,{value:m,children:[d&&m.visualElement?v.jsx(d,{visualElement:m.visualElement,...h}):null,U$(e,l,Z$(y,m.visualElement,u),y,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=R.forwardRef(s);return o[X$]=e,o}function tU({layoutId:e}){const t=R.useContext(rE).id;return t&&e!==void 0?t+"-"+e:e}function nU(e,t){R.useContext(kP).strict}function rU(e){const{drag:t,layout:n}=Xl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function iU(e,t){if(typeof Proxy>"u")return v0;const n=new Map,r=(s,o)=>v0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,v0(o,void 0,e,t)),n.get(o))})}function BP({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function sU({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function oU(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function b0(e){return e===void 0||e===1}function KS({scale:e,scaleX:t,scaleY:n}){return!b0(e)||!b0(t)||!b0(n)}function ea(e){return KS(e)||zP(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function zP(e){return vM(e.x)||vM(e.y)}function vM(e){return e&&e!=="0%"}function Zh(e,t,n){const r=e-n,i=t*r;return n+i}function bM(e,t,n,r,i){return i!==void 0&&(e=Zh(e,i,r)),Zh(e,n,r)+t}function WS(e,t=0,n=1,r,i){e.min=bM(e.min,t,n,r,i),e.max=bM(e.max,t,n,r,i)}function qP(e,{x:t,y:n}){WS(e.x,t.translate,t.scale,t.originPoint),WS(e.y,n.translate,n.scale,n.originPoint)}const xM=.999999999999,wM=1.0000000000001;function aU(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&zl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,qP(e,o)),r&&ea(s.latestValues)&&zl(e,s.latestValues))}t.x<wM&&t.x>xM&&(t.x=1),t.y<wM&&t.y>xM&&(t.y=1)}function Bl(e,t){e.min=e.min+t,e.max=e.max+t}function SM(e,t,n,r,i=.5){const s=kt(e.min,e.max,i);WS(e,t,n,s,r)}function zl(e,t){SM(e.x,t.x,t.scaleX,t.scale,t.originX),SM(e.y,t.y,t.scaleY,t.scale,t.originY)}function VP(e,t){return BP(oU(e.getBoundingClientRect(),t))}function lU(e,t,n){const r=VP(e,n),{scroll:i}=t;return i&&(Bl(r.x,i.offset.x),Bl(r.y,i.offset.y)),r}const CM=()=>({translate:0,scale:1,origin:0,originPoint:0}),ql=()=>({x:CM(),y:CM()}),EM=()=>({min:0,max:0}),Pt=()=>({x:EM(),y:EM()}),YS={current:null},HP={current:!1};function cU(){if(HP.current=!0,!!sE)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>YS.current=e.matches;e.addEventListener("change",t),t()}else YS.current=!1}const uU=new WeakMap;function dU(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Tn(i))e.addValue(r,i);else if(Tn(s))e.addValue(r,Yl(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Yl(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const kM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fU{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=SE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Kn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,xt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=dm(n),this.isVariantNode=TP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];u[m]!==void 0&&Tn(y)&&y.set(u[m])}}mount(t){this.current=t,uU.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),HP.current||cU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:YS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),go(this.notifyUpdate),go(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=uc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&xt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Xl){const n=Xl[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<kM.length;r++){const i=kM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=dU(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Yl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(j5(r)||P5(r))?r=parseFloat(r):!x$(r)&&yo.test(n)&&(r=yP(t,n)),this.setBaseTarget(t,Tn(r)?r.get():r)),Tn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=OE(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Tn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new uE),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){kE.render(this.render)}}class FP extends fU{constructor(){super(...arguments),this.KeyframeResolver=l$}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Tn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function $P(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function hU(e){return window.getComputedStyle(e)}class pU extends FP{constructor(){super(...arguments),this.type="html",this.renderInstance=$P}readValueFromInstance(t,n){if(uc.has(n))return this.projection?.isProjecting?qS(n):T7(t,n);{const r=hU(t),i=(hE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return VP(t,n)}build(t,n,r){_E(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return jE(t,n,r)}}const UP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mU(e,t,n,r){$P(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(UP.has(i)?i:LE(i),t.attrs[i])}class gU extends FP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(uc.has(n)){const r=gP(n);return r&&r.default||0}return n=UP.has(n)?n:LE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return jP(t,n,r)}build(t,n,r){_P(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){mU(t,n,r,i)}mount(t){this.isSVGTag=RP(t.tagName),super.mount(t)}}const yU=(e,t)=>RE(e)?new gU(t):new pU(t,{allowProjection:e!==R.Fragment});function $l(e,t,n){const r=e.getProps();return OE(r,t,n!==void 0?n:r.custom,e)}const XS=e=>Array.isArray(e);function vU(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Yl(n))}function bU(e){return XS(e)?e[e.length-1]||0:e}function xU(e,t){const n=$l(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=bU(s[o]);vU(e,o,l)}}function wU(e){return!!(Tn(e)&&e.add)}function ZS(e,t){const n=e.getValue("willChange");if(wU(n))return n.add(t);if(!n&&us.WillChange){const r=new us.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function GP(e){return e.props[LP]}const SU=e=>e!==null;function CU(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(SU),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const EU={type:"spring",stiffness:500,damping:25,restSpeed:10},kU=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),NU={type:"keyframes",duration:.8},TU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AU=(e,{keyframes:t})=>t.length>2?NU:uc.has(e)?e.startsWith("scale")?kU(t[1]):EU:TU;function MU({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const PE=(e,t,n,r={},i,s)=>o=>{const l=CE(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ei(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};MU(l)||Object.assign(h,AU(e,h)),h.duration&&(h.duration=Ei(h.duration)),h.repeatDelay&&(h.repeatDelay=Ei(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(US(h),h.delay===0&&(p=!0)),(us.instantAnimations||us.skipAnimations)&&(p=!0,US(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const m=CU(h.keyframes,l);if(m!==void 0){xt.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new wE(h):new X7(h)};function _U({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function KP(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),m=l[h];if(m===void 0||d&&_U(d,h))continue;const y={delay:n,...CE(s||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===x&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=GP(e);if(E){const N=window.MotionHandoffAnimation(E,h,xt);N!==null&&(y.startTime=N,S=!0)}}ZS(e,h),p.start(PE(h,p,m,e.shouldReduceMotion&&hP.has(h)?{type:!1}:y,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{xt.update(()=>{o&&xU(e,o)})}),u}function WP(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function JS(e,t,n={}){const r=$l(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(KP(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return DU(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function DU(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(JS(u,t,{...o,delay:n+(typeof r=="function"?0:r)+WP(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function RU(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>JS(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=JS(e,t,n);else{const i=typeof t=="function"?$l(e,t,n.custom):t;r=Promise.all(KP(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function YP(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const OU=ME.length;function XP(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?XP(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<OU;n++){const r=ME[n],i=e.props[r];(ed(i)||i===!1)&&(t[r]=i)}return t}const jU=[...AE].reverse(),LU=AE.length;function PU(e){return t=>Promise.all(t.map(({animation:n,options:r})=>RU(e,n,r)))}function IU(e){let t=PU(e),n=NM(),r=!0;const i=u=>(d,h)=>{const p=$l(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:y,...x}=p;d={...d,...x,...y}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=XP(e.parent)||{},p=[],m=new Set;let y={},x=1/0;for(let w=0;w<LU;w++){const E=jU[w],N=n[E],k=d[E]!==void 0?d[E]:h[E],T=ed(k),A=E===u?N.isActive:null;A===!1&&(x=w);let _=k===h[E]&&k!==d[E]&&T;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),N.protectedKeys={...y},!N.isActive&&A===null||!k&&!N.prevProp||um(k)||typeof k=="boolean")continue;const O=BU(N.prevProp,k);let D=O||E===u&&N.isActive&&!_&&T||w>x&&T,P=!1;const H=Array.isArray(k)?k:[k];let V=H.reduce(i(E),{});A===!1&&(V={});const{prevResolvedValues:L={}}=N,G={...L,...V},B=q=>{D=!0,m.has(q)&&(P=!0,m.delete(q)),N.needsAnimating[q]=!0;const X=e.getValue(q);X&&(X.liveStyle=!1)};for(const q in G){const X=V[q],te=L[q];if(y.hasOwnProperty(q))continue;let z=!1;XS(X)&&XS(te)?z=!YP(X,te):z=X!==te,z?X!=null?B(q):m.add(q):X!==void 0&&m.has(q)?B(q):N.protectedKeys[q]=!0}N.prevProp=k,N.prevResolvedValues=V,N.isActive&&(y={...y,...V}),r&&e.blockInitialAnimation&&(D=!1);const F=_&&O;D&&(!F||P)&&p.push(...H.map(q=>{const X={type:E};if(typeof q=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:te}=e,z=$l(te,q);if(te.enteringChildren&&z){const{delayChildren:K}=z.transition||{};X.delay=WP(te.enteringChildren,e,K)}}return{animation:q,options:X}}))}if(m.size){const w={};if(typeof d.initial!="boolean"){const E=$l(e,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(w.transition=E.transition)}m.forEach(E=>{const N=e.getBaseTarget(E),k=e.getValue(E);k&&(k.liveStyle=!0),w[E]=N??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=NM(),r=!0}}}function BU(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!YP(t,e):!1}function Zo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function NM(){return{animate:Zo(!0),whileInView:Zo(),whileHover:Zo(),whileTap:Zo(),whileDrag:Zo(),whileFocus:Zo(),exit:Zo()}}class xo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class zU extends xo{constructor(t){super(t),t.animationState||(t.animationState=IU(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();um(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let qU=0;class VU extends xo{constructor(){super(...arguments),this.id=qU++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const HU={animation:{Feature:zU},exit:{Feature:VU}};function nd(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Od(e){return{point:{x:e.pageX,y:e.pageY}}}const FU=e=>t=>NE(t)&&e(t,Od(t));function Ou(e,t,n,r){return nd(e,t,FU(n),r)}const ZP=1e-4,$U=1-ZP,UU=1+ZP,JP=.01,GU=0-JP,KU=0+JP;function Ln(e){return e.max-e.min}function WU(e,t,n){return Math.abs(e-t)<=n}function TM(e,t,n,r=.5){e.origin=r,e.originPoint=kt(t.min,t.max,e.origin),e.scale=Ln(n)/Ln(t),e.translate=kt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=$U&&e.scale<=UU||isNaN(e.scale))&&(e.scale=1),(e.translate>=GU&&e.translate<=KU||isNaN(e.translate))&&(e.translate=0)}function ju(e,t,n,r){TM(e.x,t.x,n.x,r?r.originX:void 0),TM(e.y,t.y,n.y,r?r.originY:void 0)}function AM(e,t,n){e.min=n.min+t.min,e.max=e.min+Ln(t)}function YU(e,t,n){AM(e.x,t.x,n.x),AM(e.y,t.y,n.y)}function MM(e,t,n){e.min=t.min-n.min,e.max=e.min+Ln(t)}function Lu(e,t,n){MM(e.x,t.x,n.x),MM(e.y,t.y,n.y)}function Rr(e){return[e("x"),e("y")]}const QP=({current:e})=>e?e.ownerDocument.defaultView:null,_M=(e,t)=>Math.abs(e-t);function XU(e,t){const n=_M(e.x,t.x),r=_M(e.y,t.y);return Math.sqrt(n**2+r**2)}class eI{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=w0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=XU(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:S}=m,{timestamp:w}=gn;this.history.push({...S,timestamp:w});const{onStart:E,onMove:N}=this.handlers;y||(E&&E(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=x0(y,this.transformPagePoint),xt.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=w0(m.type==="pointercancel"?this.lastMoveEventInfo:x0(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,E),S&&S(m,E)},!NE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Od(t),u=x0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=gn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,w0(u,this.history)),this.removeListeners=_d(Ou(this.contextWindow,"pointermove",this.handlePointerMove),Ou(this.contextWindow,"pointerup",this.handlePointerUp),Ou(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),go(this.updatePoint)}}function x0(e,t){return t?{point:t(e.point)}:e}function DM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function w0({point:e},t){return{point:e,delta:DM(e,tI(t)),offset:DM(e,ZU(t)),velocity:JU(t,.1)}}function ZU(e){return e[0]}function tI(e){return e[e.length-1]}function JU(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=tI(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Ei(t)));)n--;if(!r)return{x:0,y:0};const s=Pr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function QU(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?kt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?kt(n,e,r.max):Math.min(e,n)),e}function RM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function eG(e,{top:t,left:n,bottom:r,right:i}){return{x:RM(e.x,n,i),y:RM(e.y,t,r)}}function OM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function tG(e,t){return{x:OM(e.x,t.x),y:OM(e.y,t.y)}}function nG(e,t){let n=.5;const r=Ln(e),i=Ln(t);return i>r?n=Zu(t.min,t.max-r,e.min):r>i&&(n=Zu(e.min,e.max-i,t.min)),cs(0,1,n)}function rG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const QS=.35;function iG(e=QS){return e===!1?e=0:e===!0&&(e=QS),{x:jM(e,"left","right"),y:jM(e,"top","bottom")}}function jM(e,t,n){return{min:LM(e,t),max:LM(e,n)}}function LM(e,t){return typeof e=="number"?e:e[t]||0}const sG=new WeakMap;class oG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Od(p).point)},o=(p,m)=>{const{drag:y,dragPropagation:x,onDragStart:S}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=f$(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Rr(E=>{let N=this.getAxisMotionValue(E).get()||0;if(ki.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[E];T&&(N=Ln(T)*(parseFloat(N)/100))}}this.originPoint[E]=N}),S&&xt.postRender(()=>S(p,m)),ZS(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=m;if(x&&this.currentDirection===null){this.currentDirection=aG(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,E),this.updateAxis("y",m.point,E),this.visualElement.render(),w&&w(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Rr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new eI(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:QP(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&xt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!oh(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=QU(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Il(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=eG(r.layoutBox,t):this.constraints=!1,this.elastic=iG(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Rr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=rG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Il(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=lU(r,i.root,this.visualElement.getTransformPagePoint());let o=tG(i.layout.layoutBox,s);if(n){const l=n(sU(o));this.hasMutatedConstraints=!!l,l&&(o=BP(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Rr(h=>{if(!oh(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return ZS(this.visualElement,t),r.start(PE(t,r,0,n,this.visualElement,!1))}stopAnimation(){Rr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Rr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Rr(n=>{const{drag:r}=this.getProps();if(!oh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-kt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Il(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Rr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=nG({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Rr(o=>{if(!oh(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(kt(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;sG.set(this.visualElement,this);const t=this.visualElement.current,n=Ou(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Il(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),xt.read(r);const o=nd(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Rr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=QS,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function oh(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function aG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class lG extends xo{constructor(t){super(t),this.removeGroupControls=Br,this.removeListeners=Br,this.controls=new oG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Br}unmount(){this.removeGroupControls(),this.removeListeners()}}const PM=e=>(t,n)=>{e&&xt.postRender(()=>e(t,n))};class cG extends xo{constructor(){super(...arguments),this.removePointerDownListener=Br}onPointerDown(t){this.session=new eI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:QP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:PM(t),onStart:PM(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&xt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ou(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const pu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Be.test(e))e=parseFloat(e);else return e;const n=IM(e,t.target.x),r=IM(e,t.target.y);return`${n}% ${r}%`}},uG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=yo.parse(e);if(i.length>5)return r;const s=yo.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=kt(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let S0=!1;class dG extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;O$(fG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),S0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Rh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,S0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||xt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),kE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;S0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function nI(e){const[t,n]=EP(),r=R.useContext(rE);return v.jsx(dG,{...e,layoutGroup:r,switchLayoutGroup:R.useContext(PP),isPresent:t,safeToRemove:n})}const fG={borderRadius:{...pu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:pu,borderTopRightRadius:pu,borderBottomLeftRadius:pu,borderBottomRightRadius:pu,boxShadow:uG};function hG(e,t,n){const r=Tn(e)?e:Yl(e);return r.start(PE("",r,t,n)),r.animation}const pG=(e,t)=>e.depth-t.depth;class mG{constructor(){this.children=[],this.isDirty=!1}add(t){oE(this.children,t),this.isDirty=!0}remove(t){aE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(pG),this.isDirty=!1,this.children.forEach(t)}}function gG(e,t){const n=Kn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(go(r),e(s-t))};return xt.setup(r,!0),()=>go(r)}const rI=["TopLeft","TopRight","BottomLeft","BottomRight"],yG=rI.length,BM=e=>typeof e=="string"?parseFloat(e):e,zM=e=>typeof e=="number"||Be.test(e);function vG(e,t,n,r,i,s){i?(e.opacity=kt(0,n.opacity??1,bG(r)),e.opacityExit=kt(t.opacity??1,0,xG(r))):s&&(e.opacity=kt(t.opacity??1,n.opacity??1,r));for(let o=0;o<yG;o++){const l=`border${rI[o]}Radius`;let u=qM(t,l),d=qM(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||zM(u)===zM(d)?(e[l]=Math.max(kt(BM(u),BM(d),r),0),(ki.test(d)||ki.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=kt(t.rotate||0,n.rotate||0,r))}function qM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const bG=iI(0,.5,$5),xG=iI(.5,.95,Br);function iI(e,t,n){return r=>r<e?0:r>t?1:n(Zu(e,t,r))}function VM(e,t){e.min=t.min,e.max=t.max}function _r(e,t){VM(e.x,t.x),VM(e.y,t.y)}function HM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function FM(e,t,n,r,i){return e-=t,e=Zh(e,1/n,r),i!==void 0&&(e=Zh(e,1/i,r)),e}function wG(e,t=0,n=1,r=.5,i,s=e,o=e){if(ki.test(t)&&(t=parseFloat(t),t=kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=kt(s.min,s.max,r);e===s&&(l-=t),e.min=FM(e.min,t,n,l,i),e.max=FM(e.max,t,n,l,i)}function $M(e,t,[n,r,i],s,o){wG(e,t[n],t[r],t[i],t.scale,s,o)}const SG=["x","scaleX","originX"],CG=["y","scaleY","originY"];function UM(e,t,n,r){$M(e.x,t,SG,n?n.x:void 0,r?r.x:void 0),$M(e.y,t,CG,n?n.y:void 0,r?r.y:void 0)}function GM(e){return e.translate===0&&e.scale===1}function sI(e){return GM(e.x)&&GM(e.y)}function KM(e,t){return e.min===t.min&&e.max===t.max}function EG(e,t){return KM(e.x,t.x)&&KM(e.y,t.y)}function WM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function oI(e,t){return WM(e.x,t.x)&&WM(e.y,t.y)}function YM(e){return Ln(e.x)/Ln(e.y)}function XM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class kG{constructor(){this.members=[]}add(t){oE(this.members,t),t.scheduleRender()}remove(t){if(aE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function NG(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const C0=["","X","Y","Z"],TG=1e3;let AG=0;function E0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function aI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",xt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&aI(r)}function lI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=AG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(DG),this.nodes.forEach(LG),this.nodes.forEach(PG),this.nodes.forEach(RG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new mG)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new uE),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=CP(o)&&!v$(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;xt.read(()=>{p=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=gG(m,250),Rh.hasAnimatedSinceResize&&(Rh.hasAnimatedSinceResize=!1,this.nodes.forEach(QM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||VG,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),E=!this.targetLayout||!oI(this.targetLayout,y),N=!p&&m;if(this.options.layoutRoot||this.resumeFrom||N||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...CE(x,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,N)}else p||QM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),go(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ZM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(JM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jG),this.nodes.forEach(MG),this.nodes.forEach(_G)):this.nodes.forEach(JM),this.clearAllSnapshots();const l=Kn.now();gn.delta=cs(0,1e3/60,l-gn.timestamp),gn.timestamp=l,gn.isProcessing=!0,f0.update.process(gn),f0.preRender.process(gn),f0.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OG),this.sharedNodes.forEach(BG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!sI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ea(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),HG(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Pt();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(FG))){const{scroll:d}=this.root;d&&(Bl(l.x,d.offset.x),Bl(l.y,d.offset.y))}return l}removeElementScroll(o){const l=Pt();if(_r(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&_r(l,o),Bl(l.x,h.offset.x),Bl(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=Pt();_r(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&zl(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ea(h.latestValues)&&zl(u,h.latestValues)}return ea(this.latestValues)&&zl(u,this.latestValues),u}removeTransform(o){const l=Pt();_r(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!ea(d.latestValues))continue;KS(d.latestValues)&&d.updateSnapshot();const h=Pt(),p=d.measurePageBox();_r(h,p),UM(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ea(this.latestValues)&&UM(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=gn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),Lu(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),YU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_r(this.target,this.layout.layoutBox),qP(this.target,this.targetDelta)):_r(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),Lu(this.relativeTargetOrigin,this.target,m.target),_r(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||KS(this.parent.latestValues)||zP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;_r(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;aU(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Pt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HM(this.prevProjectionDelta.x,this.projectionDelta.x),HM(this.prevProjectionDelta.y,this.projectionDelta.y)),ju(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!XM(this.projectionDelta.x,this.prevProjectionDelta.x)||!XM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ql(),this.projectionDelta=ql(),this.projectionDeltaWithTransform=ql()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=ql();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Pt(),y=u?u.source:void 0,x=this.layout?this.layout.source:void 0,S=y!==x,w=this.getStack(),E=!w||w.members.length<=1,N=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(qG));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const A=T/1e3;e_(p.x,o.x,A),e_(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zG(this.relativeTarget,this.relativeTargetOrigin,m,A),k&&EG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Pt()),_r(k,this.relativeTarget)),S&&(this.animationValues=h,vG(h,d,this.latestValues,A,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(go(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xt.update(()=>{Rh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yl(0)),this.currentAnimation=hG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&cI(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||Pt();const p=Ln(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=Ln(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}_r(l,u),zl(l,h),ju(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new kG),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&E0("z",o,d,this.animationValues);for(let h=0;h<C0.length;h++)E0(`rotate${C0[h]}`,o,d,this.animationValues),E0(`skew${C0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Dh(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Dh(l?.pointerEvents)||""),this.hasProjected&&!ea(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=NG(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in td){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:E}=td[x],N=p==="none"?h[x]:S(h[x],d);if(w){const k=w.length;for(let T=0;T<k;T++)o[w[T]]=N}else E?this.options.visualElement.renderState.vars[x]=N:o[x]=N}this.options.layoutId&&(o.pointerEvents=d===this?Dh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(ZM),this.root.sharedNodes.clear()}}}function MG(e){e.updateLayout()}function _G(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?Rr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],m=Ln(p);p.min=n[h].min,p.max=p.min+m}):cI(i,t.layoutBox,n)&&Rr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],m=Ln(n[h]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const o=ql();ju(o,n,t.layoutBox);const l=ql();s?ju(l,e.applyTransform(r,!0),t.measuredBox):ju(l,n,t.layoutBox);const u=!sI(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const y=Pt();Lu(y,t.layoutBox,p.layoutBox);const x=Pt();Lu(x,n,m.layoutBox),oI(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function DG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function RG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function OG(e){e.clearSnapshot()}function ZM(e){e.clearMeasurements()}function JM(e){e.isLayoutDirty=!1}function jG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function QM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function LG(e){e.resolveTargetDelta()}function PG(e){e.calcProjection()}function IG(e){e.resetSkewAndRotation()}function BG(e){e.removeLeadSnapshot()}function e_(e,t,n){e.translate=kt(t.translate,0,n),e.scale=kt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function t_(e,t,n,r){e.min=kt(t.min,n.min,r),e.max=kt(t.max,n.max,r)}function zG(e,t,n,r){t_(e.x,t.x,n.x,r),t_(e.y,t.y,n.y,r)}function qG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const VG={duration:.45,ease:[.4,0,.1,1]},n_=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),r_=n_("applewebkit/")&&!n_("chrome/")?Math.round:Br;function i_(e){e.min=r_(e.min),e.max=r_(e.max)}function HG(e){i_(e.x),i_(e.y)}function cI(e,t,n){return e==="position"||e==="preserve-aspect"&&!WU(YM(t),YM(n),.2)}function FG(e){return e!==e.root&&e.scroll?.wasRoot}const $G=lI({attachResizeListener:(e,t)=>nd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),k0={current:void 0},uI=lI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!k0.current){const e=new $G({});e.mount(window),e.setOptions({layoutScroll:!0}),k0.current=e}return k0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),UG={pan:{Feature:cG},drag:{Feature:lG,ProjectionNode:uI,MeasureLayout:nI}};function s_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&xt.postRender(()=>s(t,Od(t)))}class GG extends xo{mount(){const{current:t}=this.node;t&&(this.unmount=h$(t,(n,r)=>(s_(this.node,r,"Start"),i=>s_(this.node,i,"End"))))}unmount(){}}class KG extends xo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_d(nd(this.node.current,"focus",()=>this.onFocus()),nd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function o_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&xt.postRender(()=>s(t,Od(t)))}class WG extends xo{mount(){const{current:t}=this.node;t&&(this.unmount=y$(t,(n,r)=>(o_(this.node,r,"Start"),(i,{success:s})=>o_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const eC=new WeakMap,N0=new WeakMap,YG=e=>{const t=eC.get(e.target);t&&t(e)},XG=e=>{e.forEach(YG)};function ZG({root:e,...t}){const n=e||document;N0.has(n)||N0.set(n,{});const r=N0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(XG,{root:e,...t})),r[i]}function JG(e,t,n){const r=ZG(t);return eC.set(e,n),r.observe(e),()=>{eC.delete(e),r.unobserve(e)}}const QG={some:0,all:1};class eK extends xo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:QG[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(u)};return JG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(tK(t,n))&&this.startObserver()}unmount(){}}function tK({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const nK={inView:{Feature:eK},tap:{Feature:WG},focus:{Feature:KG},hover:{Feature:GG}},rK={layout:{ProjectionNode:uI,MeasureLayout:nI}},iK={...HU,...nK,...UG,...rK},Mn=iU(iK,yU);function sK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function IE(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function dI(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function oK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function aK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)}function lK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)}function cK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function uK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function dK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function fK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function hK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function pK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function mK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function gK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function yK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function vK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function bK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function xK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)}function Oh(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function wK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function fI(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function SK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function CK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}function EK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(e)}function kK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 .01c0-.01 0-.01 0 0L0 0v24h24V.01zM0 0h24v24H0V0zm0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4a9.793 9.793 0 0 0-4.49-2.56l3.53 3.53.96-.97zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24A9.684 9.684 0 0 0 5 13v.01L6.99 15a7.042 7.042 0 0 1 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3a4.237 4.237 0 0 0-6 0z"},child:[]}]})(e)}function NK(e){return Qe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(e)}const fm=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=R.useState("login"),[l,u]=R.useState(""),[d,h]=R.useState(""),[p,m]=R.useState(""),[y,x]=R.useState(""),[S,w]=R.useState(!1),[E,N]=R.useState(!1);R.useEffect(()=>{const _=()=>{const P=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");N(P)};_();const O=window.matchMedia("(prefers-color-scheme: dark)"),D=new MutationObserver(_);return O.addEventListener("change",_),D.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{O.removeEventListener("change",_),D.disconnect()}},[]);const k=R.useCallback(async _=>{if(i){w(!0),x("");try{await i(_.credential),t()}catch(O){x(O instanceof Error?O.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);R.useEffect(()=>{if(!e||!i)return;const _=document.createElement("script");return _.src="https://accounts.google.com/gsi/client",_.async=!0,_.defer=!0,document.body.appendChild(_),_.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:k}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:E?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(_)&&document.body.removeChild(_)}},[e,s,i,k,E]);const T=async _=>{_.preventDefault(),x(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),m("")}catch(O){x(O instanceof Error?O.message:"Authentication failed")}finally{w(!1)}},A=()=>{o(_=>_==="login"?"signup":"login"),x("")};return e?v.jsx(lm,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(Mn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:_=>_.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx(Oh,{className:"h-5 w-5"})})]}),v.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),y&&v.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:y}),i&&v.jsxs(v.Fragment,{children:[v.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-theme/20"})}),v.jsx("div",{className:"relative flex justify-center text-sm",children:v.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),v.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s==="signup"&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),v.jsx("input",{id:"name",type:"text",value:p,onChange:_=>m(_.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:d,onChange:_=>h(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&v.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),v.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",v.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),v.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:v.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},a_=()=>{Oa();const e=Td(),[t,n]=R.useState(!1),[r,i]=R.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=om(),[p,m]=R.useState(!1),[y,x]=R.useState(!1),[S,w]=R.useState([]),[E,N]=R.useState(!1);R.useEffect(()=>{n(!0)},[]),R.useEffect(()=>{const D=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[]),R.useEffect(()=>{(async()=>{if(!o){w([]);return}N(!0);try{const P=await yn.getUserDiagrams();w(P)}catch(P){console.error("Failed to load diagrams:",P)}finally{N(!1)}})()},[o]);const k=D=>{e(`/playground/free?diagramId=${D}`)},T=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"55+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"55+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],O=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return v.jsxs(v.Fragment,{children:[v.jsx(Md,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 55+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[v.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),v.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),v.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),v.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),v.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx(Ad,{}),v.jsx("div",{className:"relative",children:o?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?v.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("section",{className:"relative pt-16 pb-20",children:v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[v.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),v.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:v.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[v.jsx("div",{className:"inline-block mb-6",children:v.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 55+ Components & AI Assessment"})}),v.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[v.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),v.jsx("br",{}),v.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),v.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design  practice, learn, and create architecture diagrams with ease"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((D,P)=>v.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${P===0?"fade-in-up-delay-100":P===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[v.jsx("div",{className:"text-3xl mb-1",children:D.icon}),v.jsx("div",{className:"text-3xl font-bold text-white",children:D.value}),v.jsx("div",{className:"text-sm text-white/80",children:D.label})]},D.label))}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),v.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",v.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),v.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required  Free forever  55+ components"})]})})]})}),o&&v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),E?v.jsx("div",{className:"flex items-center justify-center py-20",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?v.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),v.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(D=>v.jsxs("div",{onClick:()=>k(D.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:D.title}),D.description&&v.jsx("p",{className:"text-sm text-muted line-clamp-2",children:D.description})]}),v.jsx("div",{className:"text-3xl ml-2",children:""})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),D.nodes.length," node",D.nodes.length!==1?"s":""]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),D.edges.length," connection",D.edges.length!==1?"s":""]})]}),v.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(D.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},D.id))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((D,P)=>v.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${P===0?"delay-0":P===1?"delay-100":"delay-200"}`,onClick:()=>e(D.route),onKeyDown:H=>H.key==="Enter"&&e(D.route),role:"button",tabIndex:0,children:[v.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${D.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:D.icon}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:D.title}),v.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:D.description}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[D.action,v.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},D.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((D,P)=>v.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${P===0?"delay-0":P===1?"delay-[50ms]":P===2?"delay-[100ms]":P===3?"delay-[150ms]":P===4?"delay-[200ms]":"delay-[250ms]"}`,children:[v.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:D.icon}),v.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:D.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed",children:D.description})]},D.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:O.map((D,P)=>v.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[v.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),v.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:D.quote}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:D.author.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold text-theme",children:D.author}),v.jsx("div",{className:"text-muted text-sm",children:D.role})]})]})]})]},`testimonial-${P}`))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),v.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),v.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),v.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),v.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),v.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&v.jsx(fm,{isOpen:p,onClose:()=>m(!1),onLogin:async(D,P)=>{await l({email:D,password:P})},onSignup:async(D,P,H)=>{await u({email:D,password:P,name:H})},onGoogleLogin:async D=>{await d(D)}})]})]})};function ds(e){return Array.isArray?Array.isArray(e):mI(e)==="[object Array]"}function TK(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function AK(e){return e==null?"":TK(e)}function Si(e){return typeof e=="string"}function hI(e){return typeof e=="number"}function MK(e){return e===!0||e===!1||_K(e)&&mI(e)=="[object Boolean]"}function pI(e){return typeof e=="object"}function _K(e){return pI(e)&&e!==null}function dr(e){return e!=null}function T0(e){return!e.trim().length}function mI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const DK="Incorrect 'index' type",RK=e=>`Invalid value for key ${e}`,OK=e=>`Pattern length exceeds max of ${e}.`,jK=e=>`Missing ${e} property in key`,LK=e=>`Property 'weight' in key '${e}' must be a positive integer`,l_=Object.prototype.hasOwnProperty;class PK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=gI(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function gI(e){let t=null,n=null,r=null,i=1,s=null;if(Si(e)||ds(e))r=e,t=c_(e),n=tC(e);else{if(!l_.call(e,"name"))throw new Error(jK("name"));const o=e.name;if(r=o,l_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(LK(o));t=c_(o),n=tC(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function c_(e){return ds(e)?e:e.split(".")}function tC(e){return ds(e)?e.join("."):e}function IK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(dr(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!dr(d))return;if(l===o.length-1&&(Si(d)||hI(d)||MK(d)))n.push(AK(d));else if(ds(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,Si(t)?t.split("."):t,0),r?n:n[0]}const BK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},zK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},qK={location:0,threshold:.6,distance:100},VK={useExtendedSearch:!1,getFn:IK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ze={...zK,...BK,...qK,...VK};const HK=/[^ ]+/g;function FK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(HK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class BE{constructor({getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){this.norm=FK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Si(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Si(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!dr(t)||T0(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(dr(o)){if(ds(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(dr(h))if(Si(h)&&!T0(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else ds(h)&&h.forEach((p,m)=>{u.push({nestedArrIndex:m,value:p})})}r.$[s]=l}else if(Si(o)&&!T0(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function yI(e,t,{getFn:n=ze.getFn,fieldNormWeight:r=ze.fieldNormWeight}={}){const i=new BE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(gI)),i.setSources(t),i.create(),i}function $K(e,{getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new BE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function ah(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=ze.distance,ignoreLocation:s=ze.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function UK(e=[],t=ze.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const na=32;function GK(e,t,n,{location:r=ze.location,distance:i=ze.distance,threshold:s=ze.threshold,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,includeMatches:u=ze.includeMatches,ignoreLocation:d=ze.ignoreLocation}={}){if(t.length>na)throw new Error(OK(na));const h=t.length,p=e.length,m=Math.max(0,Math.min(r,p));let y=s,x=m;const S=l>1||u,w=S?Array(p):[];let E;for(;(E=e.indexOf(t,x))>-1;){let O=ah(t,{currentLocation:E,expectedLocation:m,distance:i,ignoreLocation:d});if(y=Math.min(O,y),x=E+h,S){let D=0;for(;D<h;)w[E+D]=1,D+=1}}x=-1;let N=[],k=1,T=h+p;const A=1<<h-1;for(let O=0;O<h;O+=1){let D=0,P=T;for(;D<P;)ah(t,{errors:O,currentLocation:m+P,expectedLocation:m,distance:i,ignoreLocation:d})<=y?D=P:T=P,P=Math.floor((T-D)/2+D);T=P;let H=Math.max(1,m-P+1),V=o?p:Math.min(m+P,p)+h,L=Array(V+2);L[V+1]=(1<<O)-1;for(let B=V;B>=H;B-=1){let F=B-1,I=n[e.charAt(F)];if(S&&(w[F]=+!!I),L[B]=(L[B+1]<<1|1)&I,O&&(L[B]|=(N[B+1]|N[B])<<1|1|N[B+1]),L[B]&A&&(k=ah(t,{errors:O,currentLocation:F,expectedLocation:m,distance:i,ignoreLocation:d}),k<=y)){if(y=k,x=F,x<=m)break;H=Math.max(1,2*m-x)}}if(ah(t,{errors:O+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:d})>y)break;N=L}const _={isMatch:x>=0,score:Math.max(.001,k)};if(S){const O=UK(w,l);O.length?u&&(_.indices=O):_.isMatch=!1}return _}function KK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Jh=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class vI{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:u=ze.isCaseSensitive,ignoreDiacritics:d=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?Jh(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(y,x)=>{this.chunks.push({pattern:y,alphabet:KK(y),startIndex:x})},m=this.pattern.length;if(m>na){let y=0;const x=m%na,S=m-x;for(;y<S;)p(this.pattern.substr(y,na),y),y+=na;if(x){const w=m-na;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Jh(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],m=0,y=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:E})=>{const{isMatch:N,score:k,indices:T}=GK(t,S,w,{location:s+E,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});N&&(y=!0),m+=k,N&&T&&(p=[...p,...T])});let x={isMatch:y,score:y?m/this.chunks.length:1};return y&&i&&(x.indices=p),x}}class wo{constructor(t){this.pattern=t}static isMultiMatch(t){return u_(t,this.multiRegex)}static isSingleMatch(t){return u_(t,this.singleRegex)}search(){}}function u_(e,t){const n=e.match(t);return n?n[1]:null}class WK extends wo{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class YK extends wo{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class XK extends wo{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ZK extends wo{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class JK extends wo{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class QK extends wo{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class bI extends wo{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:u=ze.isCaseSensitive,ignoreDiacritics:d=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){super(t),this._bitapSearch=new vI(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class xI extends wo{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const nC=[WK,xI,XK,ZK,QK,JK,YK,bI],d_=nC.length,eW=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,tW="|";function nW(e,t={}){return e.split(tW).map(n=>{let r=n.trim().split(eW).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<d_;){const h=nC[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<d_;){const h=nC[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const rW=new Set([bI.type,xI.type]);class iW{constructor(t,{isCaseSensitive:n=ze.isCaseSensitive,ignoreDiacritics:r=ze.ignoreDiacritics,includeMatches:i=ze.includeMatches,minMatchCharLength:s=ze.minMatchCharLength,ignoreLocation:o=ze.ignoreLocation,findAllMatches:l=ze.findAllMatches,location:u=ze.location,threshold:d=ze.threshold,distance:h=ze.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?Jh(t):t,this.pattern=t,this.query=nW(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Jh(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let m=0,y=p.length;m<y;m+=1){const x=p[m],{isMatch:S,indices:w,score:E}=x.search(t);if(S){if(o+=1,u+=E,r){const N=x.constructor.type;rW.has(N)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:u/o};return r&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const rC=[];function sW(...e){rC.push(...e)}function iC(e,t){for(let n=0,r=rC.length;n<r;n+=1){let i=rC[n];if(i.condition(e,t))return new i(e,t)}return new vI(e,t)}const Qh={AND:"$and",OR:"$or"},sC={PATH:"$path",PATTERN:"$val"},oC=e=>!!(e[Qh.AND]||e[Qh.OR]),oW=e=>!!e[sC.PATH],aW=e=>!ds(e)&&pI(e)&&!oC(e),f_=e=>({[Qh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function wI(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=oW(i);if(!o&&s.length>1&&!oC(i))return r(f_(i));if(aW(i)){const u=o?i[sC.PATH]:s[0],d=o?i[sC.PATTERN]:i[u];if(!Si(d))throw new Error(RK(u));const h={keyId:tC(u),pattern:d};return n&&(h.searcher=iC(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];ds(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return oC(e)||(e=f_(e)),r(e)}function lW(e,{ignoreFieldNorm:t=ze.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function cW(e,t){const n=e.matches;t.matches=[],dr(n)&&n.forEach(r=>{if(!dr(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function uW(e,t){t.score=e.score}function dW(e,t,{includeMatches:n=ze.includeMatches,includeScore:r=ze.includeScore}={}){const i=[];return n&&i.push(cW),r&&i.push(uW),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class ja{constructor(t,n={},r){this.options={...ze,...n},this.options.useExtendedSearch,this._keyStore=new PK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof BE))throw new Error(DK);this._myIndex=n||yI(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){dr(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=Si(t)?Si(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return lW(u,{ignoreFieldNorm:l}),s&&u.sort(o),hI(n)&&n>-1&&(u=u.slice(0,n)),dW(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=iC(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!dr(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=wI(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:m}=l,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:m});return y&&y.length?[{idx:d,item:u,matches:y}]:[]}const h=[];for(let p=0,m=l.children.length;p<m;p+=1){const y=l.children[p],x=r(y,u,d);if(x.length)h.push(...x);else if(l.operator===Qh.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(dr(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=iC(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!dr(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!dr(n))return[];let i=[];if(ds(n))n.forEach(({v:s,i:o,n:l})=>{if(!dr(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}ja.version="7.1.0";ja.createIndex=yI;ja.parseIndex=$K;ja.config=ze;ja.parseQuery=wI;sW(iW);const fW=()=>{Oa();const e=Td(),[t,n]=R.useState("All"),[r,i]=R.useState("All"),[s,o]=R.useState(""),[l,u]=R.useState([]),[d,h]=R.useState(!0),[p,m]=R.useState(null),[y,x]=R.useState(!1),[S,w]=R.useState(!1),{user:E,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:_}=om();R.useEffect(()=>{(async()=>{try{h(!0),m(null);const G=await fetch("https://diagrammatic-api-production.up.railway.app/api/v1/all-problems");if(!G.ok)throw new Error(`Failed to fetch problems: ${G.status} ${G.statusText}`);const B=await G.json();u(B)}catch(L){m(L instanceof Error?L.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",L)}finally{h(!1)}})()},[]);const O=R.useMemo(()=>{const V=s?.trim()??"";let L=l;return V.length>0&&(L=new ja(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(V).map(B=>B.item)),L.filter(G=>{const B=t==="All"||G.difficulty===t,F=r==="All"||G.category===r;return B&&F})},[t,r,s,l]),D=["All",...Array.from(new Set(l.map(V=>V.category)))],P=["All","Easy","Medium","Hard","Very Hard"],H=V=>{switch(V){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return v.jsxs(v.Fragment,{children:[v.jsx(Md,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${O.length} problems available`}),v.jsx(Ad,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?v.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),v.jsx("button",{type:"button",onClick:()=>{_(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),v.jsx("div",{className:"text-muted text-sm mb-6",children:p}),v.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:V=>o(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),v.jsx("select",{id:"difficulty-select",value:t,onChange:V=>n(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:P.map(V=>v.jsx("option",{value:V,children:V},V))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),v.jsx("select",{id:"category-select",value:r,onChange:V=>i(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:D.map(V=>v.jsx("option",{value:V,children:V},V))})]})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:O.map((V,L)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${L===0?"delay-0":L===1?"delay-100":L===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:V.title}),v.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${H(V.difficulty)}`,children:V.difficulty})]}),v.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:V.description}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",V.category]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",V.estimated_time]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[V.tags.slice(0,3).map(G=>v.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:G},G)),V.tags.length>3&&v.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",V.tags.length-3," more"]})]}),v.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),e(`/playground/${V.id}`)},"aria-label":`Start ${V.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem "})]})]},V.id))}),O.length===0&&!d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),v.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&v.jsx(fm,{isOpen:S,onClose:()=>w(!1),onLogin:async(V,L)=>{await k({email:V,password:L})},onSignup:async(V,L,G)=>{await T({email:V,password:L,name:G})},onGoogleLogin:async V=>{await A(V)}})]})};var A0={exports:{}},M0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function hW(){if(h_)return M0;h_=1;var e=Nd();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,m){var y=m(),x=r({inst:{value:y,getSnapshot:m}}),S=x[0].inst,w=x[1];return s(function(){S.value=y,S.getSnapshot=m,u(S)&&w({inst:S})},[p,y,m]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(y),y}function u(p){var m=p.getSnapshot;p=p.value;try{var y=m();return!n(p,y)}catch{return!0}}function d(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return M0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,M0}var p_;function SI(){return p_||(p_=1,A0.exports=hW()),A0.exports}var CI=SI();function mn(e){this.content=e}mn.prototype={constructor:mn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new mn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new mn(n)},addToStart:function(e,t){return new mn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new mn(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new mn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=mn.from(e),e.size?new mn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=mn.from(e),e.size?new mn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=mn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};mn.from=function(e){if(e instanceof mn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new mn(t)};function EI(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=EI(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function kI(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=kI(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class me{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new me(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new me(r,i)}cutByIndex(t,n){return t==n?me.empty:t==0&&n==this.content.length?this:new me(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new me(i,s)}addToStart(t){return new me([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new me(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return EI(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return kI(this,t,n,r)}findIndex(t){if(t==0)return lh(0,t);if(t==this.size)return lh(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?lh(n+1,s):lh(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return me.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new me(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return me.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new me(n||t,r)}static from(t){if(!t)return me.empty;if(t instanceof me)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new me([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}me.empty=new me([],0);const _0={index:0,offset:0};function lh(e,t){return _0.index=e,_0.offset=t,_0}function ep(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!ep(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!ep(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let pt=class aC{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ep(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return aC.none;if(t instanceof aC)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};pt.none=[];class tp extends Error{}class xe{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=TI(this.content,t+this.openStart,n);return r&&new xe(r,this.openStart,this.openEnd)}removeBetween(t,n){return new xe(NI(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return xe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(me.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new xe(t,r,i)}}xe.empty=new xe(me.empty,0,0);function NI(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(NI(s.content,t-i-1,n-i-1)))}function TI(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=TI(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function pW(e,t,n){if(n.openStart>e.depth)throw new tp("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new tp("Inconsistent open depths");return AI(e,t,n,0)}function AI(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=AI(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return ma(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=mW(n,e);return ma(s,_I(e,o,l,t,r))}else return ma(s,np(e,t,r))}function MI(e,t){if(!t.type.compatibleContent(e.type))throw new tp("Cannot join "+t.type.name+" onto "+e.type.name)}function lC(e,t,n){let r=e.node(n);return MI(r,t.node(n)),r}function pa(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Pu(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(pa(e.nodeAfter,r),s++));for(let l=s;l<o;l++)pa(i.child(l),r);t&&t.depth==n&&t.textOffset&&pa(t.nodeBefore,r)}function ma(e,t){return e.type.checkContent(t),e.copy(t)}function _I(e,t,n,r,i){let s=e.depth>i&&lC(e,t,i+1),o=r.depth>i&&lC(n,r,i+1),l=[];return Pu(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(MI(s,o),pa(ma(s,_I(e,t,n,r,i+1)),l)):(s&&pa(ma(s,np(e,t,i+1)),l),Pu(t,n,i,l),o&&pa(ma(o,np(n,r,i+1)),l)),Pu(r,null,i,l),new me(l)}function np(e,t,n){let r=[];if(Pu(null,e,n,r),e.depth>n){let i=lC(e,t,n+1);pa(ma(i,np(e,t,n+1)),r)}return Pu(t,null,n,r),new me(r)}function mW(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(me.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class rd{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return pt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new rp(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new rd(n,r,s)}static resolveCached(t,n){let r=m_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else m_.set(t,r=new gW);let i=r.elts[r.i]=rd.resolve(t,n);return r.i=(r.i+1)%yW,i}}class gW{constructor(){this.elts=[],this.i=0}}const yW=12,m_=new WeakMap;class rp{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const vW=Object.create(null);let co=class cC{constructor(t,n,r,i=pt.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&ep(this.attrs,n||t.defaultAttrs||vW)&&pt.sameSet(this.marks,r||pt.none)}copy(t=null){return t==this.content?this:new cC(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new cC(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return xe.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new xe(d,i.depth-o,s.depth-o)}replace(t,n,r){return pW(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return rd.resolveCached(this,t)}resolveNoCache(t){return rd.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),DI(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=me.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=pt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!pt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=me.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};co.prototype.text=void 0;class ip extends co{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):DI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new ip(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new ip(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function DI(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class wa{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new bW(t,n);if(r.next==null)return wa.empty;let i=RI(r);r.next&&r.err("Unexpected trailing text");let s=NW(kW(i));return TW(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return me.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=s(p,l.concat(h));if(m)return m}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}wa.empty=new wa(!0);class bW{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function RI(e){let t=[];do t.push(xW(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function xW(e){let t=[];do t.push(wW(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function wW(e){let t=EW(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=SW(e,t);else break;return t}function g_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function SW(e,t){let n=g_(e),r=n;return e.eat(",")&&(e.next!="}"?r=g_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function CW(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function EW(e){if(e.eat("(")){let t=RI(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=CW(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function kW(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function OI(e,t){return t-e}function y_(e,t){let n=[];return r(t),n.sort(OI);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function NW(e){let t=Object.create(null);return n(y_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);y_(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new wa(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(OI);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function TW(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function jI(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function LI(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function PI(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function II(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new MW(e,r,t[r]);return n}let v_=class BI{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=II(t,r.attrs),this.defaultAttrs=jI(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==wa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:LI(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new co(this,this.computeAttrs(t),me.from(n),pt.setFrom(r))}createChecked(t=null,n,r){return n=me.from(n),this.checkContent(n),new co(this,this.computeAttrs(t),n,pt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=me.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(me.empty,!0);return s?new co(this,t,n.append(s),pt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){PI(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:pt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new BI(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function AW(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class MW{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?AW(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hm{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=II(t,i.attrs),this.excluded=null;let s=jI(this.attrs);this.instance=s?new pt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new pt(this,LI(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new hm(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){PI(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class zI{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=mn.from(t.nodes),n.marks=mn.from(t.marks||{}),this.nodes=v_.compile(this.spec.nodes,this),this.marks=hm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=wa.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?b_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:b_(this,o.split(" "))}this.nodeFromJSON=i=>co.fromJSON(this,i),this.markFromJSON=i=>pt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof v_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new ip(r,r.defaultAttrs,t,pt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function b_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function _W(e){return e.tag!=null}function DW(e){return e.style!=null}let Iu=class uC{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(_W(i))this.tags.push(i);else if(DW(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new w_(this,n,!1);return r.addAll(t,pt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new w_(this,n,!0);return r.addAll(t,pt.none,n.from,n.to),xe.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(jW(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=S_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=S_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new uC(t,uC.schemaRules(t)))}};const qI={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},RW={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},VI={ol:!0,ul:!0},id=1,dC=2,Bu=4;function x_(e,t,n){return t!=null?(t?id:0)|(t==="full"?dC:0):e&&e.whitespace=="pre"?id|dC:n&~Bu}class ch{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=pt.none,this.match=s||(o&Bu?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(me.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&id)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=me.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(me.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!qI.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class w_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=x_(null,n.preserveWhitespace,0)|(r?Bu:0);i?s=new ch(i.type,i.attrs,pt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new ch(null,null,pt.none,!0,null,o):s=new ch(t.schema.topNodeType,null,pt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&dC?"full":this.localPreserveWS||(i.options&id)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;VI.hasOwnProperty(o)&&this.parser.normalizeLists&&OW(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:RW.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(qI.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=pt.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):C_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=x_(t,s,o.options);o.options&Bu&&o.content.length==0&&(l|=Bu);let u=pt.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):C_(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new ch(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=id)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function OW(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&VI.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function jW(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function S_(e){let t={};for(let n in e)t[n]=e[n];return t}function C_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class La{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=D0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=jh(D0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&jh(D0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return jh(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new La(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=E_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return E_(t.marks)}}function E_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function D0(e){return e.document||window.document}const k_=new WeakMap;function LW(e){let t=k_.get(e);return t===void 0&&k_.set(e,t=PW(e)),t}function PW(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function jh(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=LW(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let m=p.indexOf(" ");m>0?u.setAttributeNS(p.slice(0,m),p.slice(m+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let m=t[p];if(m===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:x}=jh(e,m,n,r);if(u.appendChild(y),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const HI=65535,FI=Math.pow(2,16);function IW(e,t){return e+t*FI}function N_(e){return e&HI}function BW(e){return(e-(e&HI))/FI}const $I=1,UI=2,Lh=4,GI=8;class fC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&GI)>0}get deletedBefore(){return(this.delInfo&($I|Lh))>0}get deletedAfter(){return(this.delInfo&(UI|Lh))>0}get deletedAcross(){return(this.delInfo&Lh)>0}}class fr{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&fr.empty)return fr.empty}recover(t){let n=0,r=N_(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+BW(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let m=d?t==u?-1:t==p?1:n:n,y=u+i+(m<0?0:h);if(r)return y;let x=t==(n<0?u:p)?null:IW(l/3,t-u),S=t==u?UI:t==p?$I:Lh;return(n<0?t!=u:t!=p)&&(S|=GI),new fC(y,S,x)}i+=h-d}return r?t+i:new fC(t+i,0,null)}touches(t,n){let r=0,i=N_(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new fr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?fr.empty:new fr(t<0?[0,-t,0]:[0,0,t])}}fr.empty=new fr([]);class sd{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new sd(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new sd;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new fC(t,i,null)}}const R0=Object.create(null);class _n{getMap(){return fr.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=R0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in R0)throw new RangeError("Duplicate use of step JSON ID "+t);return R0[t]=n,n.prototype.jsonID=t,n}}class $t{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new $t(t,null)}static fail(t){return new $t(null,t)}static fromReplace(t,n,r,i){try{return $t.ok(t.replace(n,r,i))}catch(s){if(s instanceof tp)return $t.fail(s.message);throw s}}}function zE(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(zE(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return me.fromArray(r)}class oo extends _n{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new xe(zE(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return $t.fromReplace(t,this.from,this.to,s)}invert(){return new ti(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new oo(n.pos,r.pos,this.mark)}merge(t){return t instanceof oo&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new oo(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new oo(n.from,n.to,t.markFromJSON(n.mark))}}_n.jsonID("addMark",oo);class ti extends _n{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new xe(zE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return $t.fromReplace(t,this.from,this.to,r)}invert(){return new oo(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ti(n.pos,r.pos,this.mark)}merge(t){return t instanceof ti&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new ti(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ti(n.from,n.to,t.markFromJSON(n.mark))}}_n.jsonID("removeMark",ti);class ao extends _n{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return $t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return $t.fromReplace(t,this.pos,this.pos+1,new xe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new ao(this.pos,n.marks[i]);return new ao(this.pos,this.mark)}}return new Sa(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ao(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ao(n.pos,t.markFromJSON(n.mark))}}_n.jsonID("addNodeMark",ao);class Sa extends _n{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return $t.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return $t.fromReplace(t,this.pos,this.pos+1,new xe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ao(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Sa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Sa(n.pos,t.markFromJSON(n.mark))}}_n.jsonID("removeNodeMark",Sa);class on extends _n{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&hC(t,this.from,this.to)?$t.fail("Structure replace would overwrite content"):$t.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new fr([this.from,this.to-this.from,this.slice.size])}invert(t){return new on(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new on(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof on)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?xe.empty:new xe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new on(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?xe.empty:new xe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new on(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new on(n.from,n.to,xe.fromJSON(t,n.slice),!!n.structure)}}_n.jsonID("replace",on);class an extends _n{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(hC(t,this.from,this.gapFrom)||hC(t,this.gapTo,this.to)))return $t.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return $t.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?$t.fromReplace(t,this.from,this.to,r):$t.fail("Content does not fit in gap")}getMap(){return new fr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new an(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new an(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new an(n.from,n.to,n.gapFrom,n.gapTo,xe.fromJSON(t,n.slice),n.insert,!!n.structure)}}_n.jsonID("replaceAround",an);function hC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function zW(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let m=Math.max(d,t),y=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(x)||(o&&o.to==m&&o.mark.eq(p[S])?o.to=y:i.push(o=new ti(m,y,p[S])));l&&l.to==m?l.to=y:s.push(l=new oo(m,y,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function qW(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof hm){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],m;for(let y=0;y<i.length;y++){let x=i[y];x.step==s-1&&p.eq(i[y].style)&&(m=x)}m?(m.to=d,m.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new ti(o.from,o.to,o.style)))}function qE(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new on(l,h,xe.empty));else{r=p;for(let m=0;m<d.marks.length;m++)n.allowsMarkType(d.marks[m].type)||e.step(new ti(l,h,d.marks[m]));if(i&&d.isText&&n.whitespace!="pre"){let m,y=/\r?\n|\r/g,x;for(;m=y.exec(d.text);)x||(x=new xe(me.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new on(l+m.index,l+m.index+m[0].length,x))}}l=h}if(!r.validEnd){let u=r.fillBefore(me.empty,!0);e.replace(l,l,new xe(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function VW(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function dc(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!VW(i,s,o))break}return null}function HW(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=me.empty,p=0;for(let x=s,S=!1;x>n;x--)S||r.index(x)>0?(S=!0,h=me.from(r.node(x).copy(h)),p++):u--;let m=me.empty,y=0;for(let x=s,S=!1;x>n;x--)S||i.after(x+1)<i.end(x)?(S=!0,m=me.from(i.node(x).copy(m)),y++):d++;e.step(new an(u,d,o,l,new xe(h.append(m),p,y),h.size-p,!0))}function VE(e,t,n=null,r=e){let i=FW(e,t),s=i&&$W(r,t);return s?i.map(T_).concat({type:t,attrs:n}).concat(s.map(T_)):null}function T_(e){return{type:e,attrs:null}}function FW(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function $W(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function UW(e,t,n){let r=me.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=me.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new an(i,s,i,s,new xe(r,0,0),n.length,!0))}function GW(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&KW(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!x?d=!1:!y&&x&&(d=!0)}d===!1&&WI(e,o,l,s),qE(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),m=h.map(l+o.nodeSize,1);return e.step(new an(p,m,p+1,m-1,new xe(me.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&KI(e,o,l,s),!1}})}function KI(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function WI(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function KW(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function WW(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new an(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new xe(me.from(o),0,0),1,!0))}function as(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),m=i.index(d);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(m,p.childCount),x=r&&r[h+1];x&&(y=y.replaceChild(0,x.type.create(x.attrs)));let S=r&&r[h]||p;if(!p.canReplace(m+1,p.childCount)||!S.type.validContent(y))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function YW(e,t,n=1,r){let i=e.doc.resolve(t),s=me.empty,o=me.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=me.from(i.node(l).copy(s));let h=r&&r[d];o=me.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new on(t,t,new xe(s.append(o),n,n),!0))}function So(e,t){let n=e.resolve(t),r=n.index();return YI(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function XW(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function YI(e,t){return!!(e&&t&&!e.isLeaf&&XW(e,t))}function pm(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&YI(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function ZW(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);WI(e,h.node(),h.before(),l)}o.inlineContent&&qE(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new on(d,u.map(t+n,-1),xe.empty,!0)),r===!0){let h=e.doc.resolve(d);KI(e,h.node(),h.before(),e.steps.length)}return e}function JW(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function XI(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function mm(e,t,n=t,r=xe.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return ZI(i,s,r)?new on(t,n,r):new QW(i,s,r).fit()}function ZI(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class QW{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=me.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=me.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new xe(s,o,l);return t>-1?new an(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new on(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=O0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(me.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=O0(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new xe(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=O0(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new xe(Su(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new xe(Su(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:m}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let y=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(JI(S.mark(m.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?y:-1)))}let x=d==l.childCount;x||(y=-1),this.placed=Cu(this.placed,n,me.from(h)),this.frontier[n].match=p,x&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<y;S++){let E=w.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),w=E.content}this.unplaced=x?t==0?xe.empty:new xe(Su(o.content,t-1,1),t-1,y<0?o.openEnd:t-1):new xe(Su(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!j0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=j0(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=j0(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Cu(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Cu(this.placed,this.depth,me.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(me.empty,!0);n.childCount&&(this.placed=Cu(this.placed,this.frontier.length,n))}}function Su(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Su(e.firstChild.content,t-1,n)))}function Cu(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Cu(e.lastChild.content,t-1,n)))}function O0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function JI(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,JI(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(me.empty,!0)))),e.copy(r)}function j0(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!eY(n,s.content,o)?l:null}function eY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function tY(e){return e.spec.defining||e.spec.definingForContent}function nY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(ZI(i,s,r))return e.step(new on(t,n,r));let o=e6(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let m=i.depth,y=i.pos-1;m>0;m--,y--){let x=i.node(m).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(m)>-1?l=m:i.before(m)==y&&o.splice(1,0,-m)}let u=o.indexOf(l),d=[],h=r.openStart;for(let m=r.content,y=0;;y++){let x=m.firstChild;if(d.push(x),y==r.openStart)break;m=x.content}for(let m=h-1;m>=0;m--){let y=d[m],x=tY(y.type);if(x&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=m;else if(x||!y.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let y=(m+h+1)%(r.openStart+1),x=d[y];if(x)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],E=!0;w<0&&(E=!1,w=-w);let N=i.node(w-1),k=i.index(w-1);if(N.canReplaceWith(k,k,x.type,x.marks))return e.replace(i.before(w),E?s.after(w):n,new xe(QI(r.content,0,r.openStart,y),y,r.openEnd))}}let p=e.steps.length;for(let m=o.length-1;m>=0&&(e.replace(t,n,r),!(e.steps.length>p));m--){let y=o[m];y<0||(t=i.before(y),n=s.after(y))}}function QI(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(QI(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(me.empty,!0))}return e}function rY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=JW(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new xe(me.from(r),0,0))}function iY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=e6(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function e6(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Ul extends _n{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return $t.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return $t.fromReplace(t,this.pos,this.pos+1,new xe(me.from(i),0,n.isLeaf?0:1))}getMap(){return fr.empty}invert(t){return new Ul(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ul(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ul(n.pos,n.attr,n.value)}}_n.jsonID("attr",Ul);class od extends _n{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return $t.ok(r)}getMap(){return fr.empty}invert(t){return new od(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new od(n.attr,n.value)}}_n.jsonID("docAttr",od);let Zl=class extends Error{};Zl=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Zl.prototype=Object.create(Error.prototype);Zl.prototype.constructor=Zl;Zl.prototype.name="TransformError";let t6=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new sd}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Zl(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=xe.empty){let i=mm(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new xe(me.from(r),0,0))}delete(t,n){return this.replace(t,n,xe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return nY(this,t,n,r),this}replaceRangeWith(t,n,r){return rY(this,t,n,r),this}deleteRange(t,n){return iY(this,t,n),this}lift(t,n){return HW(this,t,n),this}join(t,n=1){return ZW(this,t,n),this}wrap(t,n){return UW(this,t,n),this}setBlockType(t,n=t,r,i=null){return GW(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return WW(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Ul(t,n,r)),this}setDocAttribute(t,n){return this.step(new od(t,n)),this}addNodeMark(t,n){return this.step(new ao(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof pt)n.isInSet(r.marks)&&this.step(new Sa(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Sa(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return YW(this,t,n,r),this}addMark(t,n,r){return zW(this,t,n,r),this}removeMark(t,n,r){return qW(this,t,n,r),this}clearIncompatible(t,n,r){return qE(this,t,n,r),this}};const L0=Object.create(null);let Ue=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new sY(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=xe.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?xe.empty:n),l==0&&__(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),__(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ve(t):Rl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?Rl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Rl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new pr(t.node(0))}static atStart(t){return Rl(t,t,0,0,1)||new pr(t)}static atEnd(t){return Rl(t,t,t.content.size,t.childCount,-1)||new pr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=L0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in L0)throw new RangeError("Duplicate use of selection JSON ID "+t);return L0[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}};Ue.prototype.visible=!0;class sY{constructor(t,n){this.$from=t,this.$to=n}}let A_=!1;function M_(e){!A_&&!e.parent.inlineContent&&(A_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ve extends Ue{constructor(t,n=t){M_(t),M_(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ue.near(r);let i=t.resolve(n.map(this.anchor));return new Ve(i.parent.inlineContent?i:r,r)}replace(t,n=xe.empty){if(super.replace(t,n),n==xe.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ve&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new gm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ue.findFrom(n,r,!0)||Ue.findFrom(n,-r,!0);if(s)n=s.$head;else return Ue.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ue.findFrom(t,-r,!0)||Ue.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ve(t,n)}}Ue.jsonID("text",Ve);class gm{constructor(t,n){this.anchor=t,this.head=n}map(t){return new gm(t.map(this.anchor),t.map(this.head))}resolve(t){return Ve.between(t.resolve(this.anchor),t.resolve(this.head))}}class Re extends Ue{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ue.near(s):new Re(s)}content(){return new xe(me.from(this.node),0,0)}eq(t){return t instanceof Re&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new HE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(t.resolve(n.anchor))}static create(t,n){return new Re(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ue.jsonID("node",Re);class HE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new gm(r,r):new HE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Re.isSelectable(r)?new Re(n):Ue.near(n)}}class pr extends Ue{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=xe.empty){if(n==xe.empty){t.delete(0,t.doc.content.size);let r=Ue.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new pr(t)}map(t){return new pr(t)}eq(t){return t instanceof pr}getBookmark(){return oY}}Ue.jsonID("all",pr);const oY={map(){return this},resolve(e){return new pr(e)}};function Rl(e,t,n,r,i,s=!1){if(t.inlineContent)return Ve.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Re.isSelectable(l))return Re.create(e,n-(i<0?l.nodeSize:0))}else{let u=Rl(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function __(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof on||i instanceof an))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}const D_=1,uh=2,R_=4;class aY extends t6{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|D_)&~uh,this.storedMarks=null,this}get selectionSet(){return(this.updated&D_)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=uh,this}ensureMarks(t){return pt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&uh)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~uh,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||pt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=R_,this}get scrolledIntoView(){return(this.updated&R_)>0}}function O_(e,t){return!t||!e?e:e.bind(t)}class Eu{constructor(t,n,r){this.name=t,this.init=O_(n.init,r),this.apply=O_(n.apply,r)}}const lY=[new Eu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Eu("selection",{init(e,t){return e.selection||Ue.atStart(t.doc)},apply(e){return e.selection}}),new Eu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Eu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class P0{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=lY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Eu(r.key,r.spec.state,r))})}}class Vl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Vl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new aY(this)}static create(t){let n=new P0(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Vl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new P0(this.schema,t.plugins),r=n.fields,i=new Vl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new P0(t.schema,t.plugins),s=new Vl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=co.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Ue.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function n6(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=n6(i,t,{})),n[r]=i}return n}class Ot{constructor(t){this.spec=t,this.props={},t.props&&n6(t.props,this,this.props),this.key=t.key?t.key.key:r6("plugin")}getState(t){return t[this.key]}}const I0=Object.create(null);function r6(e){return e in I0?e+"$"+ ++I0[e]:(I0[e]=0,e+"$")}class cn{constructor(t="key"){this.key=r6(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const vn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Jl=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let pC=null;const rs=function(e,t,n){let r=pC||(pC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},cY=function(){pC=null},Ca=function(e,t,n,r){return n&&(j_(e,t,n,r,-1)||j_(e,t,n,r,1))},uY=/^(img|br|input|textarea|hr)$/i;function j_(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Lr(e))){let o=e.parentNode;if(!o||o.nodeType!=1||jd(e)||uY.test(e.nodeName)||e.contentEditable=="false")return!1;t=vn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?Lr(e):0}else return!1}}function Lr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function dY(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Lr(e)}else if(e.parentNode&&!jd(e))t=vn(e),e=e.parentNode;else return null}}function fY(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!jd(e))t=vn(e)+1,e=e.parentNode;else return null}}function hY(e,t,n){for(let r=t==0,i=t==Lr(e);r||i;){if(e==n)return!0;let s=vn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Lr(e)}}function jd(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const ym=function(e){return e.focusNode&&Ca(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ra(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function pY(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function mY(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Lr(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Lr(r.startContainer),r.startOffset)}}}const Ti=typeof navigator<"u"?navigator:null,L_=typeof document<"u"?document:null,Co=Ti&&Ti.userAgent||"",mC=/Edge\/(\d+)/.exec(Co),i6=/MSIE \d/.exec(Co),gC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Co),Yn=!!(i6||gC||mC),uo=i6?document.documentMode:gC?+gC[1]:mC?+mC[1]:0,zr=!Yn&&/gecko\/(\d+)/i.test(Co);zr&&+(/Firefox\/(\d+)/.exec(Co)||[0,0])[1];const yC=!Yn&&/Chrome\/(\d+)/.exec(Co),An=!!yC,s6=yC?+yC[1]:0,In=!Yn&&!!Ti&&/Apple Computer/.test(Ti.vendor),Ql=In&&(/Mobile\/\w+/.test(Co)||!!Ti&&Ti.maxTouchPoints>2),jr=Ql||(Ti?/Mac/.test(Ti.platform):!1),gY=Ti?/Win/.test(Ti.platform):!1,is=/Android \d/.test(Co),Ld=!!L_&&"webkitFontSmoothing"in L_.documentElement.style,yY=Ld?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function vY(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ji(e,t){return typeof e=="number"?e:e[t]}function bY(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function P_(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Jl(o);continue}let l=o,u=l==s.body,d=u?vY(s):bY(l),h=0,p=0;if(t.top<d.top+Ji(r,"top")?p=-(d.top-t.top+Ji(i,"top")):t.bottom>d.bottom-Ji(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+Ji(i,"top")-d.top:t.bottom-d.bottom+Ji(i,"bottom")),t.left<d.left+Ji(r,"left")?h=-(d.left-t.left+Ji(i,"left")):t.right>d.right-Ji(r,"right")&&(h=t.right-d.right+Ji(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-y,w=l.scrollTop-x;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let m=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(m))break;o=m=="absolute"?o.offsetParent:Jl(o)}}function xY(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:o6(e.dom)}}function o6(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Jl(r));return t}function wY({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;a6(n,r==0?0:r-t)}function a6(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Nl=null;function SY(e){if(e.setActive)return e.setActive();if(Nl)return e.focus(Nl);let t=o6(e);e.focus(Nl==null?{get preventScroll(){return Nl={preventScroll:!0},!0}}:void 0),Nl||(Nl=!1,a6(t,0))}function l6(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let m;if(h.nodeType==1)m=h.getClientRects();else if(h.nodeType==3)m=rs(h).getClientRects();else continue;for(let y=0;y<m.length;y++){let x=m[y];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let S=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!u&&x.left<=t.left&&x.right>=t.left&&(u=h,d={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!n&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?CY(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:l6(n,i)}function CY(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=Js(r,1);if(s.top!=s.bottom&&FE(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function FE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function EY(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function kY(e,t,n){let{node:r,offset:i}=l6(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function NY(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function c6(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(FE(t,d))return c6(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function TY(e,t){let n=e.dom.ownerDocument,r,i=0,s=mY(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!FE(t,d)||(o=c6(e.dom,t,d),!o))return null}if(In)for(let d=o;r&&d;d=Jl(d))d.draggable&&(r=void 0);if(o=EY(o,t),r){if(zr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;Ld&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=NY(e,r,i,t))}l==null&&(l=kY(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function I_(e){return e.top<e.bottom||e.left<e.right}function Js(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(I_(r))return r}return Array.prototype.find.call(n,I_)||e.getBoundingClientRect()}const AY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function u6(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=Ld||zr;if(r.nodeType==3)if(o&&(AY.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=Js(rs(r,i,i),n);if(zr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Js(rs(r,i-1,i-1),-1);if(d.top==u.top){let h=Js(rs(r,i,i+1),-1);if(h.top!=u.top)return mu(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,mu(Js(rs(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Lr(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return B0(u.getBoundingClientRect(),!1)}if(s==null&&i<Lr(r)){let u=r.childNodes[i];if(u.nodeType==1)return B0(u.getBoundingClientRect(),!0)}return B0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Lr(r))){let u=r.childNodes[i-1],d=u.nodeType==3?rs(u,Lr(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return mu(Js(d,1),!1)}if(s==null&&i<Lr(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?rs(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return mu(Js(d,-1),!0)}return mu(Js(r.nodeType==3?rs(r):r,-n),n>=0)}function mu(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function B0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function d6(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function MY(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return d6(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=u6(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=rs(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const _Y=/[\u0590-\u08ac]/;function DY(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!_Y.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:d6(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),m=l.caretBidiLevel;l.modify("move",n,"character");let y=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:x,focusOffset:S}=e.domSelectionRange(),w=x&&!y.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return m!=null&&(l.caretBidiLevel=m),w}):r.pos==r.start()||r.pos==r.end()}let B_=null,z_=null,q_=!1;function RY(e,t,n){return B_==t&&z_==n?q_:(B_=t,z_=n,q_=n=="up"||n=="down"?MY(e,t,n):DY(e,t,n))}const qr=0,V_=1,oa=2,Ai=3;class Pd{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=qr,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>vn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof h6){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof f6&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?vn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?vn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=vn(m.dom)+1;break}t-=m.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=vn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let y=0,x=0;y<this.children.length;y++){let S=this.children[y],w=x+S.size;if(s>x&&o<w)return S.setSelection(t-x-S.border,n-x-S.border,r,i);x=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((zr||In)&&t==n){let{node:y,offset:x}=l;if(y.nodeType==3){if(p=!!(x&&y.nodeValue[x-1]==`
`),p&&x==y.nodeValue.length)for(let S=y,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:vn(w)+1});break}let E=S.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let S=y.childNodes[x-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(zr&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&In)&&Ca(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Ca(u.node,u.offset,h.focusNode,h.focusOffset))return;let m=!1;if((d.extend||t==n)&&!(p&&zr)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),m=!0}catch{}}if(!m){if(t>n){let x=l;l=u,u=x}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?oa:V_,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ai:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?oa:Ai}r=o}this.dirty=oa}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?oa:V_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class f6 extends Pd{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==qr&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class OY extends Pd{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Ea extends Pd{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=La.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Ea(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ai||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Ai&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=qr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=qr}}slice(t,n,r){let i=Ea.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=bC(s,n,o,r)),t>0&&(s=bC(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class fo extends Pd{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=La.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let m=h;return h=g6(h,r,n),d?u=new jY(t,n,r,i,h,p||null,m,d,s,o+1):n.isText?new vm(t,n,r,i,h,m,s):new fo(t,n,r,i,h,p||null,m,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>me.empty)}return t}matchesNode(t,n,r){return this.dirty==qr&&t.eq(this.node)&&sp(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new PY(this,o&&o.node,t);zY(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?pt.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,m)=>{u.syncToMarks(d.marks,r,t);let y;u.findNodeMatch(d,h,p,m)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(y=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,y,t)||u.updateNextNode(d,h,p,t,m,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==oa)&&(o&&this.protectLocalComposition(t,o),p6(this.contentDOM,this.children,t),Ql&&qY(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ve)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=VY(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new OY(this,s,n,i);t.input.compositionNodes.push(o),this.children=bC(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==Ai||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=qr}updateOuterDeco(t){if(sp(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=m6(this.dom,this.nodeDOM,vC(this.outerDeco,this.node,n),vC(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function H_(e,t,n,r,i){g6(r,t,e);let s=new fo(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class vm extends fo{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==Ai||this.dirty!=qr&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=qr||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=qr,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new vm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ai)}get domAtom(){return!1}isText(t){return this.node.text==t}}class h6 extends Pd{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==qr&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class jY extends fo{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==Ai)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function p6(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=F_(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof Ea){let u=r?r.previousSibling:e.lastChild;p6(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=F_(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const zu=function(e){e&&(this.nodeName=e)};zu.prototype=Object.create(null);const aa=[new zu];function vC(e,t,n){if(e.length==0)return aa;let r=n?aa[0]:new zu,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new zu(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new zu(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function m6(e,t,n,r){if(n==aa&&r==aa)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=aa[0]),i=u}LY(i,l||aa[0],o)}return i}function LY(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function g6(e,t,n){return m6(e,e,aa,vC(t,n,e.nodeType!=1))}function sp(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function F_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class PY{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=IY(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=qr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Ea.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==Ai&&o.dom==o.contentDOM&&(o.dirty=oa),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof fo){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,m=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=Ai&&sp(n,u.outerDeco));if(!m&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=oa,p.updateChildren(i,o+1),p.dirty=qr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!sp(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=fo.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=fo.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new f6(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Ea;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof vm)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((In||An)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new h6(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function IY(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Ea)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function BY(e,t){return e.type.side-t.type.side}function zY(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(BY);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let m,y;if(u)y=-1,m=u,u=null;else if(d<e.childCount)y=d,m=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+m.nodeSize;if(m.isText){let w=x;o<i.length&&i[o].from<w&&(w=i[o].from);for(let E=0;E<l.length;E++)l[E].to<w&&(w=l[E].to);w<x&&(u=m.cut(w-s),m=m.cut(0,w-s),x=w,y=-1)}else for(;o<i.length&&i[o].to<x;)o++;let S=m.isInline&&!m.isLeaf?l.filter(w=>!w.inline):l.slice();r(m,S,t.forChild(s,m),y),s=x}}function qY(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function VY(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function bC(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function $E(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(ym(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Re.isSelectable(p)&&i.parent&&!(p.isInline&&hY(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;d=new Re(o==m?l:r.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,m=o;for(let y=0;y<n.rangeCount;y++){let x=n.getRangeAt(y);p=Math.min(p,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=m==e.state.selection.anchor?[m,p]:[p,m],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=UE(e,h,l,p)}return d}function y6(e){return e.editable?e.hasFocus():b6(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function ls(e,t=!1){let n=e.state.selection;if(v6(e,n),!!y6(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&An){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ca(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)FY(e);else{let{anchor:r,head:i}=n,s,o;$_&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(s=U_(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=U_(e,n.to))),e.docView.setSelection(r,i,e,t),$_&&(s&&G_(s),o&&G_(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&HY(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const $_=In||An&&s6<63;function U_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(In&&i&&i.contentEditable=="false")return z0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return z0(i);if(s)return z0(s)}}function z0(e){return e.contentEditable="true",In&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function G_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function HY(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!y6(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function FY(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,vn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Yn&&uo<=11&&(n.disabled=!0,n.disabled=!1)}function v6(e,t){if(t instanceof Re){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(K_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else K_(e)}function K_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function UE(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ve.between(t,n,r)}function W_(e){return e.editable&&!e.hasFocus()?!1:b6(e)}function b6(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function $Y(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Ca(t.node,t.offset,n.anchorNode,n.anchorOffset)}function xC(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ue.findFrom(s,t)}function Qs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Y_(e,t,n){let r=e.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Qs(e,new Ve(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=xC(e.state,t);return i&&i instanceof Re?Qs(e,i):!1}else if(!(jr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Re.isSelectable(s)?Qs(e,new Re(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Ld?Qs(e,new Ve(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Re&&r.node.isInline)return Qs(e,new Ve(t>0?r.$to:r.$from));{let i=xC(e.state,t);return i?Qs(e,i):!1}}}function op(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function qu(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Tl(e,t){return t<0?UY(e):GY(e)}function UY(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(zr&&n.nodeType==1&&r<op(n)&&qu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(qu(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(x6(n))break;{let l=n.previousSibling;for(;l&&qu(l,-1);)i=n.parentNode,s=vn(l),l=l.previousSibling;if(l)n=l,r=op(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?wC(e,n,r):i&&wC(e,i,s)}function GY(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=op(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(qu(l,1))s=n,o=++r;else break}else{if(x6(n))break;{let l=n.nextSibling;for(;l&&qu(l,1);)s=l.parentNode,o=vn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=op(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&wC(e,s,o)}function x6(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function KY(e,t){for(;e&&t==e.childNodes.length&&!jd(e);)t=vn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function WY(e,t){for(;e&&!t&&!jd(e);)t=vn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function wC(e,t,n){if(t.nodeType!=3){let s,o;(o=KY(t,n))?(t=o,n=0):(s=WY(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(ym(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&ls(e)},50)}function X_(e,t){let n=e.state.doc.resolve(t);if(!(An||gY)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function Z_(e,t,n){let r=e.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||jr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=xC(e.state,t);if(o&&o instanceof Re)return Qs(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof pr?Ue.near(o,t):Ue.findFrom(o,t);return l?Qs(e,l):!1}return!1}function J_(e,t){if(!(e.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function Q_(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function YY(e){if(!In||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;Q_(e,r,"true"),setTimeout(()=>Q_(e,r,"false"),20)}return!1}function XY(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function ZY(e,t){let n=t.keyCode,r=XY(t);if(n==8||jr&&n==72&&r=="c")return J_(e,-1)||Tl(e,-1);if(n==46&&!t.shiftKey||jr&&n==68&&r=="c")return J_(e,1)||Tl(e,1);if(n==13||n==27)return!0;if(n==37||jr&&n==66&&r=="c"){let i=n==37?X_(e,e.state.selection.from)=="ltr"?-1:1:-1;return Y_(e,i,r)||Tl(e,i)}else if(n==39||jr&&n==70&&r=="c"){let i=n==39?X_(e,e.state.selection.from)=="ltr"?1:-1:1;return Y_(e,i,r)||Tl(e,i)}else{if(n==38||jr&&n==80&&r=="c")return Z_(e,-1,r)||Tl(e,-1);if(n==40||jr&&n==78&&r=="c")return YY(e)||Z_(e,1,r)||Tl(e,1);if(r==(jr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function GE(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=e.someProp("clipboardSerializer")||La.fromSchema(e.state.schema),l=N6(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=k6[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let x=l.createElement(h[y]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:m,slice:t}}function w6(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",m=>{t=m(t,s||r,e)}),s)return l=new xe(me.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",m=>{l=m(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",m=>m(t,i,r,e));if(p)l=p;else{let m=i.marks(),{schema:y}=e.state,x=La.fromSchema(y);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(x.serializeNode(y.text(S,m)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=tX(n),Ld&&nX(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let m=o.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;o=m}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Iu.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!JY.test(m.parentNode.nodeName)?{ignore:!0}:null}})),h)l=rX(eD(l,+h[1],+h[2]),h[4]);else if(l=xe.maxOpen(QY(l.content,i),!0),l.openStart||l.openEnd){let p=0,m=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;m<l.openEnd&&!y.type.spec.isolating;m++,y=y.lastChild);l=eD(l,p,m)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const JY=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function QY(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&C6(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=E6(o[o.length-1],s.length));let h=S6(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return me.from(o)}return e}function S6(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,me.from(e));return e}function C6(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=C6(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(me.from(S6(n,e,i+1))))}}function E6(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,E6(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(me.empty,!0);return e.copy(n.append(r))}function SC(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=SC(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(me.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function eD(e,t,n){return t<e.openStart&&(e=new xe(SC(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new xe(SC(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const k6={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let tD=null;function N6(){return tD||(tD=document.implementation.createHTMLDocument("title"))}let q0=null;function eX(e){let t=window.trustedTypes;return t?(q0||(q0=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),q0.createHTML(e)):e}function tX(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=N6().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&k6[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=eX(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function nX(e){let t=e.querySelectorAll(An?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function rX(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=me.from(u.create(r[l+1],i)),s++,o++}return new xe(i,s,o)}const Bn={},zn={},iX={touchstart:!0,touchmove:!0};class sX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function oX(e){for(let t in Bn){let n=Bn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{lX(e,r)&&!KE(e,r)&&(e.editable||!(r.type in zn))&&n(e,r)},iX[t]?{passive:!0}:void 0)}In&&e.dom.addEventListener("input",()=>null),CC(e)}function lo(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function aX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function CC(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>KE(e,r))})}function KE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function lX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function cX(e,t){!KE(e,t)&&Bn[t.type]&&(e.editable||!(t.type in zn))&&Bn[t.type](e,t)}zn.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!A6(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(is&&An&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),Ql&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,ra(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||ZY(e,n)?n.preventDefault():lo(e,"key")};zn.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};zn.keypress=(e,t)=>{let n=t;if(A6(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||jr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function bm(e){return{left:e.clientX,top:e.clientY}}function uX(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function WE(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Gl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function dX(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Re.isSelectable(r)?(Gl(e,new Re(n)),!0):!1}function fX(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Re&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Gl(e,Re.create(e.state.doc,i)),!0):!1}function hX(e,t,n,r,i){return WE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?fX(e,n):dX(e,n))}function pX(e,t,n,r){return WE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function mX(e,t,n,r){return WE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||gX(e,n,r)}function gX(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Gl(e,Ve.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Gl(e,Ve.create(r,l+1,l+1+o.content.size));else if(Re.isSelectable(o))Gl(e,Re.create(r,l));else continue;return!0}}function YE(e){return ap(e)}const T6=jr?"metaKey":"ctrlKey";Bn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=YE(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&uX(n,e.input.lastClick)&&!n[T6]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(bm(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new yX(e,o,n,!!r)):(s=="doubleClick"?pX:mX)(e,o.pos,o.inside,n)?n.preventDefault():lo(e,"pointer"))};class yX{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[T6],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Re&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),lo(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ls(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(bm(t))),this.updateAllowDefault(t),this.allowDefault||!n?lo(this.view,"pointer"):hX(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||In&&this.mightDrag&&!this.mightDrag.node.isAtom||An&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Gl(this.view,Ue.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):lo(this.view,"pointer")}move(t){this.updateAllowDefault(t),lo(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Bn.touchstart=e=>{e.input.lastTouch=Date.now(),YE(e),lo(e,"pointer")};Bn.touchmove=e=>{e.input.lastTouch=Date.now(),lo(e,"pointer")};Bn.contextmenu=e=>YE(e);function A6(e,t){return e.composing?!0:In&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const vX=is?5e3:-1;zn.compositionstart=zn.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ve&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),ap(e,!0),e.markCursor=null;else if(ap(e,!t.selection.empty),zr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}M6(e,vX)};zn.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,M6(e,20))};function M6(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>ap(e),t))}function _6(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=xX());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function bX(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=dY(t.focusNode,t.focusOffset),r=fY(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function xX(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function ap(e,t=!1){if(!(is&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),_6(e),t||e.docView&&e.docView.dirty){let n=$E(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function wX(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const ad=Yn&&uo<15||Ql&&yY<604;Bn.copy=zn.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=ad?null:n.clipboardData,o=r.content(),{dom:l,text:u}=GE(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):wX(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function SX(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function CX(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ld(e,r.value,null,i,t):ld(e,r.textContent,r.innerHTML,i,t)},50)}function ld(e,t,n,r,i){let s=w6(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||xe.empty)))return!0;if(!s)return!1;let o=SX(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function D6(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}zn.paste=(e,t)=>{let n=t;if(e.composing&&!is)return;let r=ad?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&ld(e,D6(r),r.getData("text/html"),i,n)?n.preventDefault():CX(e,n)};class R6{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const EX=jr?"altKey":"ctrlKey";function O6(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[EX]}Bn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(bm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(r&&r.mightDrag)o=Re.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Re.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=GE(e,l);(!n.dataTransfer.files.length||!An||s6>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(ad?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",ad||n.dataTransfer.setData("text/plain",d),e.dragging=new R6(h,O6(e,n),o)};Bn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};zn.dragover=zn.dragenter=(e,t)=>t.preventDefault();zn.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(bm(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",x=>{o=x(o,e,!1)}):o=w6(e,D6(n.dataTransfer),ad?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&O6(e,n));if(e.someProp("handleDrop",x=>x(e,n,o||xe.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?XI(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(m))return;let y=d.doc.resolve(h);if(p&&Re.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Re(y));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,E,N)=>x=N),d.setSelection(UE(e,y,d.doc.resolve(x)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};Bn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&ls(e)},20))};Bn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Bn.beforeinput=(e,t)=>{if(An&&is&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,ra(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in zn)Bn[e]=zn[e];function cd(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class lp{constructor(t,n){this.toDOM=t,this.spec=n||ga,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Pn(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof lp&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&cd(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class ho{constructor(t,n){this.attrs=t,this.spec=n||ga}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Pn(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof ho&&cd(this.attrs,t.attrs)&&cd(this.spec,t.spec)}static is(t){return t.type instanceof ho}destroy(){}}class XE{constructor(t,n){this.attrs=t,this.spec=n||ga}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Pn(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof XE&&cd(this.attrs,t.attrs)&&cd(this.spec,t.spec)}destroy(){}}class Pn{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Pn(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Pn(t,t,new lp(n,r))}static inline(t,n,r,i){return new Pn(t,n,new ho(r,i))}static node(t,n,r,i){return new Pn(t,n,new XE(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ho}get widget(){return this.type instanceof lp}}const Ol=[],ga={};class Et{constructor(t,n){this.local=t.length?t:Ol,this.children=n.length?n:Ol}static create(t,n){return n.length?cp(n,t,0,ga):Nn}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==Nn||t.maps.length==0?this:this.mapInner(t,n,0,0,r||ga)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?kX(this.children,o||[],t,n,r,i,s):o?new Et(o.sort(ya),Ol):Nn}add(t,n){return n.length?this==Nn?Et.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=L6(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,cp(h,l,d+1,ga)),s+=3}});let o=j6(s?P6(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Et(o.length?this.local.concat(o).sort(ya):this.local,i||this.children)}remove(t){return t.length==0||this==Nn?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=Nn?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Et(i,r):Nn}forChild(t,n){if(this==Nn)return this;if(n.isLeaf)return Et.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof ho){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new Et(i.sort(ya),Ol);return r?new no([l,r]):l}return r||Nn}eq(t){if(this==t)return!0;if(!(t instanceof Et)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return ZE(this.localsInner(t))}localsInner(t){if(this==Nn)return Ol;if(t.inlineContent||!this.local.some(ho.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ho||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Et.empty=new Et([],[]);Et.removeOverlap=ZE;const Nn=Et.empty;class no{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,ga));return no.from(r)}forChild(t,n){if(n.isLeaf)return Et.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=Nn&&(s instanceof no?r=r.concat(s.members):r.push(s))}return no.from(r)}eq(t){if(!(t instanceof no)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?ZE(r?n:n.sort(ya)):Ol}static from(t){switch(t.length){case 0:return Nn;case 1:return t[0];default:return new no(t.every(n=>n instanceof Et)?t:t.reduce((n,r)=>n.concat(r instanceof Et?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function kX(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((m,y,x,S)=>{let w=S-x-(y-m);for(let E=0;E<l.length;E+=3){let N=l[E+1];if(N<0||m>N+h-p)continue;let k=l[E]+h-p;y>=k?l[E+1]=m<=k?-2:-1:m>=h&&w&&(l[E]+=w,l[E+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let m=n.map(e[d+1]+s,-1),y=m-i,{index:x,offset:S}=r.content.findIndex(p),w=r.maybeChild(x);if(w&&S==p&&S+w.nodeSize==y){let E=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);E!=Nn?(l[d]=p,l[d+1]=y,l[d+2]=E):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=NX(l,e,t,n,i,s,o),h=cp(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,m=0;p<h.children.length;p+=3){let y=h.children[p];for(;m<l.length&&l[m]<y;)m+=3;l.splice(m,0,h.children[p],h.children[p+1],h.children[p+2])}}return new Et(t.sort(ya),l)}function j6(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Pn(i.from+t,i.to+t,i.type))}return n}function NX(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function L6(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function P6(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function cp(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=L6(e,l,u+n);if(d){s=!0;let h=cp(d,l,n+u+1,r);h!=Nn&&i.push(u,u+l.nodeSize,h)}});let o=j6(s?P6(e):e,-n).sort(ya);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Et(o,i):Nn}function ya(e,t){return e.from-t.from||e.to-t.to}function ZE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),nD(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),nD(t,i,r.copy(s.from,r.to)));break}}}return t}function nD(e,t,n){for(;t<e.length&&ya(n,e[t])>0;)t++;e.splice(t,0,n)}function V0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Nn&&t.push(r)}),e.cursorWrapper&&t.push(Et.create(e.state.doc,[e.cursorWrapper.deco])),no.from(t)}const TX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},AX=Yn&&uo<=11;class MX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class _X{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new MX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Yn&&uo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),AX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,TX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(W_(this.view)){if(this.suppressingSelectionUpdates)return ls(this.view);if(Yn&&uo<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Ca(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Jl(s))n.add(s);for(let s=t.anchorNode;s;s=Jl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&W_(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(zr&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,m]=h;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of h){let y=m.parentNode;y&&y.nodeName=="LI"&&(!p||OX(t,p)!=y)&&m.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&ym(r)&&(d=$E(t))&&d.eq(Ue.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,ls(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),DX(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||ls(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Yn&&uo<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:m}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(s=m)}let o=i&&i.parentNode==t.target?vn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?vn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let rD=new WeakMap,iD=!1;function DX(e){if(!rD.has(e)&&(rD.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=zr,iD)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iD=!0}}function sD(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return Ca(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function RX(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return sD(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?sD(e,n):null}function OX(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function jX(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],ym(u)||d.push({node:u.focusNode,offset:u.focusOffset})),An&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let E=r.childNodes[w-1],N=E.pmViewDesc;if(E.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let p=e.state.doc,m=e.someProp("domParser")||Iu.fromSchema(e.state.schema),y=p.resolve(o),x=null,S=m.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:LX,context:y});if(d&&d[0].pos!=null){let w=d[0].pos,E=d[1]&&d[1].pos;E==null&&(E=w),x={anchor:w+o,head:E+o}}return{doc:S,sel:x,from:o,to:l}}function LX(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(In&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||In&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const PX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function IX(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let D=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,P=$E(e,D);if(P&&!e.state.selection.eq(P)){if(An&&is&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",V=>V(e,ra(13,"Enter"))))return;let H=e.state.tr.setSelection(P);D=="pointer"?H.setMeta("pointer",!0):D=="key"&&H.scrollIntoView(),s&&H.setMeta("composition",s),e.dispatch(H)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=jX(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),m,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,y="end"):(m=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let x=qX(p.content,d.doc.content,d.from,m,y);if(x&&e.input.domChangeCount++,(Ql&&e.input.lastIOSEnter>Date.now()-225||is)&&i.some(D=>D.nodeType==1&&!PX.test(D.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",D=>D(e,ra(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof Ve&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let D=oD(e,e.state.doc,d.sel);if(D&&!D.eq(e.state.selection)){let P=e.state.tr.setSelection(D);s&&P.setMeta("composition",s),e.dispatch(P)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ve&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Yn&&uo<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let S=d.doc.resolveNoCache(x.start-d.from),w=d.doc.resolveNoCache(x.endB-d.from),E=h.resolve(x.start),N=S.sameParent(w)&&S.parent.inlineContent&&E.end()>=x.endA,k;if((Ql&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!N&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(k=Ue.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",D=>D(e,ra(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&zX(h,x.start,x.endA,S,w)&&e.someProp("handleKeyDown",D=>D(e,ra(8,"Backspace")))){is&&An&&e.domObserver.suppressSelectionUpdates();return}An&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),is&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,w=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(D){return D(e,ra(13,"Enter"))})},20));let T=x.start,A=x.endA,_=D=>{let P=D||e.state.tr.replace(T,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let H=oD(e,P.doc,d.sel);H&&!(An&&e.composing&&H.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(H.head==T||H.head==P.mapping.map(A)-1)||Yn&&H.empty&&H.head==T)&&P.setSelection(H)}return s&&P.setMeta("composition",s),P.scrollIntoView()},O;if(N){if(S.pos==w.pos){Yn&&uo<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>ls(e),20));let D=_(e.state.tr.delete(T,A)),P=h.resolve(x.start).marksAcross(h.resolve(x.endA));P&&D.ensureMarks(P),e.dispatch(D)}else if(x.endA==x.endB&&(O=BX(S.parent.content.cut(S.parentOffset,w.parentOffset),E.parent.content.cut(E.parentOffset,x.endA-E.start())))){let D=_(e.state.tr);O.type=="add"?D.addMark(T,A,O.mark):D.removeMark(T,A,O.mark),e.dispatch(D)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let D=S.parent.textBetween(S.parentOffset,w.parentOffset),P=()=>_(e.state.tr.insertText(D,T,A));e.someProp("handleTextInput",H=>H(e,T,A,D,P))||e.dispatch(P())}}else e.dispatch(_())}function oD(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:UE(e,t.resolve(n.anchor),t.resolve(n.head))}function BX(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(me.from(d).eq(e))return{mark:l,type:o}}function zX(e,t,n,r,i){if(n-t<=i.pos-r.pos||H0(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(H0(s,!0,!0));return!o.parent.isTextblock||o.pos>n||H0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function H0(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function qX(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&aD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&aD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function aD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class I6{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new sX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=uD(this),cD(this),this.nodeViews=dD(this),this.docView=H_(this.state.doc,lD(this),V0(this),this.dom,this),this.domObserver=new _X(this,(r,i,s,o)=>IX(this,r,i,s,o)),this.domObserver.start(),oX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&CC(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(fD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(_6(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=dD(this);HX(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&CC(this),this.editable=uD(this),cD(this);let u=V0(this),d=lD(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let m=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&xY(this);if(o){this.domObserver.stop();let y=p&&(Yn||An)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&VX(i.selection,t.selection);if(p){let x=An?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=bX(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=H_(t.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$Y(this))?ls(this,y):(v6(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():m&&wY(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&P_(this,n.getBoundingClientRect(),t)}else P_(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new R6(t.slice,t.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Yn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&SY(this.dom),ls(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return TY(this,t)}coordsAtPos(t,n=1){return u6(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return RY(this,n||this.state,t)}pasteHTML(t,n){return ld(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return ld(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return GE(this,t)}destroy(){this.docView&&(aX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],V0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,cY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return cX(this,t)}domSelectionRange(){let t=this.domSelection();return t?In&&this.root.nodeType===11&&pY(this.dom.ownerDocument)==this.dom&&RX(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}I6.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function lD(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Pn.node(0,e.state.doc.content.size,t)]}function cD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Pn.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function uD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function VX(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function dD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function HX(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function fD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var vo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},up={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},FX=typeof navigator<"u"&&/Mac/.test(navigator.platform),$X=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var bn=0;bn<10;bn++)vo[48+bn]=vo[96+bn]=String(bn);for(var bn=1;bn<=24;bn++)vo[bn+111]="F"+bn;for(var bn=65;bn<=90;bn++)vo[bn]=String.fromCharCode(bn+32),up[bn]=String.fromCharCode(bn);for(var F0 in vo)up.hasOwnProperty(F0)||(up[F0]=vo[F0]);function UX(e){var t=FX&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||$X&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?up:vo)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const GX=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),KX=typeof navigator<"u"&&/Win/.test(navigator.platform);function WX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))GX?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function YX(e){let t=Object.create(null);for(let n in e)t[WX(n)]=e[n];return t}function $0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function XX(e){return new Ot({props:{handleKeyDown:B6(e)}})}function B6(e){let t=YX(e);return function(n,r){let i=UX(r),s,o=t[$0(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[$0(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(KX&&r.ctrlKey&&r.altKey)&&(s=vo[r.keyCode])&&s!=i){let l=t[$0(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const JE=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function z6(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const q6=(e,t,n)=>{let r=z6(e,n);if(!r)return!1;let i=QE(r);if(!i){let o=r.blockRange(),l=o&&dc(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(Y6(e,i,t,-1))return!0;if(r.parent.content.size==0&&(ec(s,"end")||Re.isSelectable(s)))for(let o=r.depth;;o--){let l=mm(e.doc,r.before(o),r.after(o),xe.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(ec(s,"end")?Ue.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Re.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},ZX=(e,t,n)=>{let r=z6(e,n);if(!r)return!1;let i=QE(r);return i?V6(e,i,t):!1},JX=(e,t,n)=>{let r=F6(e,n);if(!r)return!1;let i=ek(r);return i?V6(e,i,t):!1};function V6(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=mm(e.doc,s,u,xe.empty);if(!d||d.from!=s||d instanceof on&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(Ve.create(h.doc,s)),n(h.scrollIntoView())}return!0}function ec(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const H6=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=QE(r)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function QE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function F6(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const $6=(e,t,n)=>{let r=F6(e,n);if(!r)return!1;let i=ek(r);if(!i)return!1;let s=i.nodeAfter;if(Y6(e,i,t,1))return!0;if(r.parent.content.size==0&&(ec(s,"start")||Re.isSelectable(s))){let o=mm(e.doc,r.before(),r.after(),xe.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(ec(s,"start")?Ue.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Re.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},U6=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=ek(r)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos)).scrollIntoView()),!0)};function ek(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const QX=(e,t)=>{let n=e.selection,r=n instanceof Re,i;if(r){if(n.node.isTextblock||!So(e.doc,n.from))return!1;i=n.from}else if(i=pm(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Re.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},eZ=(e,t)=>{let n=e.selection,r;if(n instanceof Re){if(n.node.isTextblock||!So(e.doc,n.to))return!1;r=n.to}else if(r=pm(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},tZ=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&dc(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},G6=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function tk(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const nZ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=tk(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Ue.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},K6=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof pr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=tk(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ve.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},W6=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(as(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&dc(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function rZ(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Re&&t.selection.node.isBlock)return!r.parentOffset||!as(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){u=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),l=tk(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),s.unshift(u&&l?{type:l}:null),o=y;break}else{if(y==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Ve||t.selection instanceof pr)&&h.deleteSelection();let p=h.mapping.map(r.pos),m=as(h.doc,p,s.length,s);if(m||(s[0]=l?{type:l}:null,m=as(h.doc,p,s.length,s)),!m)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let y=h.mapping.map(r.before(o)),x=h.doc.resolve(y);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const iZ=rZ(),sZ=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Re.create(e.doc,i))),!0)};function oZ(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||So(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function Y6(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&oZ(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let y=t.pos+s.nodeSize,x=me.empty;for(let E=o.length-1;E>=0;E--)x=me.from(o[E].create(null,x));x=me.from(i.copy(x));let S=e.tr.step(new an(t.pos-1,y,t.pos,y,new xe(x,1,0),o.length,!0)),w=S.doc.resolve(y+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&So(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:Ue.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),m=p&&dc(p);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(p,m).scrollIntoView()),!0;if(d&&ec(s,"start",!0)&&ec(i,"end")){let y=i,x=[];for(;x.push(y),!y.isTextblock;)y=y.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,S.content)){if(n){let E=me.empty;for(let k=x.length-1;k>=0;k--)E=me.from(x[k].copy(E));let N=e.tr.step(new an(t.pos-x.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new xe(E,x.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function X6(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ve.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const aZ=X6(-1),lZ=X6(1);function cZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&VE(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function hD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function nk(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}nk(JE,q6,H6);nk(JE,$6,U6);nk(G6,K6,W6,iZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function uZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return dZ(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function dZ(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new rp(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new rp(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=VE(s,n,r,t);return l?(e&&fZ(e,t,l,i,n),!0):!1}function fZ(e,t,n,r,i){let s=me.empty;for(let h=n.length-1;h>=0;h--)s=me.from(n[h].type.create(n[h].attrs,s));e.step(new an(t.start-(r?2:0),t.end,t.start,t.end,new xe(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,m=!0;h<p;h++,m=!1)!m&&as(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function hZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?pZ(t,n,e,s):mZ(t,n,s):!0:!1}}function pZ(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new an(s-1,o,s,o,new xe(me.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new rp(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=dc(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return So(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function mZ(e,t,n){let r=e.tr,i=n.parent;for(let y=n.end,x=n.endIndex-1,S=n.startIndex;x>S;x--)y-=i.child(x).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?me.empty:me.from(i))))return!1;let p=s.pos,m=p+o.nodeSize;return r.step(new an(p-(l?1:0),m+(u?1:0),p+1,m-1,new xe((l?me.empty:me.from(i.copy(me.empty))).append(u?me.empty:me.from(i.copy(me.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function gZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=me.from(d?e.create():null),p=new xe(me.from(e.create(null,me.from(l.type.create(null,h)))),d?3:1,0),m=s.start,y=s.end;n(t.tr.step(new an(m-(d?3:1),y,m,y,p,1,!0)).scrollIntoView())}return!0}}var yZ=Object.defineProperty,Z6=(e,t)=>{for(var n in t)yZ(e,n,{get:t[n],enumerable:!0})};function xm(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var wm=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...x)=>{const S=this.buildProps(u,t),w=m(...x)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:xm({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},vZ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function J6(e,t){const n=new t6(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var Q6=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&Q6(r)}return e};function dh(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return Q6(n)}function ud(e,t,n){if(e instanceof co||e instanceof me)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return me.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),ud("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new zI({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Iu.fromSchema(u).parseSlice(dh(e),n.parseOptions):Iu.fromSchema(u).parse(dh(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Iu.fromSchema(t);return n.slice?s.parseSlice(dh(e),n.parseOptions).content:s.parse(dh(e),n.parseOptions)}return ud("",t,n)}function EC(e,t,n={},r={}){return ud(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function bZ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function xZ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function wZ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Sm(e){return t=>wZ(t.$from,e)}function De(e,t,n){return e.config[t]===void 0&&e.parent?De(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?De(e.parent,t,n):null}):e.config[t]}function rk(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=De(t,"addExtensions",n);return r?[t,...rk(r())]:t}).flat(10)}function ik(e,t){const n=La.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function eB(e){return typeof e=="function"}function lt(e,t=void 0,...n){return eB(e)?t?e.bind(t)(...n):e(...n):e}function SZ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function dd(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function tB(e){const t=[],{nodeExtensions:n,markExtensions:r}=dd(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=De(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([m,y])=>{t.push({type:p,name:m,attribute:{...s,...y}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=De(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const m={...s,...p};typeof m?.default=="function"&&(m.default=m.default()),m?.isRequired&&m?.default===void 0&&delete m.default,t.push({type:o.name,name:h,attribute:m})})}),t}function Ut(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,m]=h.split(":").map(y=>y.trim());d.set(p,m)}),l.forEach(h=>{const[p,m]=h.split(":").map(y=>y.trim());d.set(p,m)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function dp(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Ut(n,r),{})}function CZ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function pD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):CZ(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function mD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&SZ(n)?!1:n!=null))}function EZ(e,t){var n;const r=tB(e),{nodeExtensions:i,markExtensions:s}=dd(e),o=(n=i.find(d=>De(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(E=>E.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},m=e.reduce((E,N)=>{const k=De(N,"extendNodeSchema",p);return{...E,...k?k(d):{}}},{}),y=mD({...m,content:lt(De(d,"content",p)),marks:lt(De(d,"marks",p)),group:lt(De(d,"group",p)),inline:lt(De(d,"inline",p)),atom:lt(De(d,"atom",p)),selectable:lt(De(d,"selectable",p)),draggable:lt(De(d,"draggable",p)),code:lt(De(d,"code",p)),whitespace:lt(De(d,"whitespace",p)),linebreakReplacement:lt(De(d,"linebreakReplacement",p)),defining:lt(De(d,"defining",p)),isolating:lt(De(d,"isolating",p)),attrs:Object.fromEntries(h.map(E=>{var N,k;return[E.name,{default:(N=E?.attribute)==null?void 0:N.default,validate:(k=E?.attribute)==null?void 0:k.validate}]}))}),x=lt(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(E=>pD(E,h)));const S=De(d,"renderHTML",p);S&&(y.toDOM=E=>S({node:E,HTMLAttributes:dp(E,h)}));const w=De(d,"renderText",p);return w&&(y.toText=w),[d.name,y]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},m=e.reduce((w,E)=>{const N=De(E,"extendMarkSchema",p);return{...w,...N?N(d):{}}},{}),y=mD({...m,inclusive:lt(De(d,"inclusive",p)),excludes:lt(De(d,"excludes",p)),group:lt(De(d,"group",p)),spanning:lt(De(d,"spanning",p)),code:lt(De(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var E,N;return[w.name,{default:(E=w?.attribute)==null?void 0:E.default,validate:(N=w?.attribute)==null?void 0:N.validate}]}))}),x=lt(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(w=>pD(w,h)));const S=De(d,"renderHTML",p);return S&&(y.toDOM=w=>S({mark:w,HTMLAttributes:dp(w,h)})),[d.name,y]}));return new zI({topNode:o,nodes:l,marks:u})}function kZ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function sk(e){return e.sort((n,r)=>{const i=De(n,"priority")||100,s=De(r,"priority")||100;return i>s?-1:i<s?1:0})}function nB(e){const t=sk(rk(e)),n=kZ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function rB(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var m;u.isBlock&&d>r&&(l+=s);const y=o?.[u.type.name];if(y)return h&&(l+=y({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(m=u?.text)==null?void 0:m.slice(Math.max(r,d)-d,i-d))}),l}function NZ(e,t){const n={from:0,to:e.content.size};return rB(e,n,t)}function iB(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function hs(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function sB(e,t){const n=hs(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Gt(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function TZ(e,t){const n=Gt(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Cm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function oB(e,t){const n=Cm(typeof t=="string"?t:t.name,e.schema);return n==="node"?TZ(e,t):n==="mark"?sB(e,t):{}}function AZ(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function MZ(e){const t=AZ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function aB(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),m=t.invert().map(h);r.push({oldRange:{from:p,to:m},newRange:{from:d,to:h}})})}),MZ(r)}function ok(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function fp(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:ok(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function lB(e,t,n={}){return e.find(r=>r.type===t&&fp(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function gD(e,t,n={}){return!!lB(e,t,n)}function ak(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!lB([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&gD([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&gD([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function lk(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=ak(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var _Z=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function U0(e,t){return t.nodes[e]||t.marks[e]||null}function Ph(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var DZ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function kC(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?hs(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>fp(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:m})=>{const y=p.pos,x=m.pos;e.doc.nodesBetween(y,x,(S,w)=>{if(!S.isText&&!S.marks.length)return;const E=Math.max(y,w),N=Math.min(x,w+S.nodeSize),k=N-E;o+=k,l.push(...S.marks.map(T=>({mark:T,from:E,to:N})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>fp(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,m)=>p+m.to-m.from,0);return(u>0?u+d:u)>=o}function bo(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Gt(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const y=Math.max(r,m),x=Math.min(i,m+p.nodeSize);l.push({node:p,from:y,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>fp(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,m)=>p+m.to-m.from,0)>=u}function RZ(e,t,n={}){if(!t)return bo(e,null,n)||kC(e,null,n);const r=Cm(t,e.schema);return r==="node"?bo(e,t,n):r==="mark"?kC(e,t,n):!1}var OZ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=Sm(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},jZ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function yD(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function vD(e,t){const{nodeExtensions:n}=dd(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=lt(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Em(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(Em(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function cB(e){return e instanceof Re}function uB(e){return e instanceof Ve}function la(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function dB(e,t=null){if(!t)return null;const n=Ue.atStart(e),r=Ue.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ve.create(e,la(0,i,s),la(e.content.size,i,s)):Ve.create(e,la(t,i,s),la(t,i,s))}function LZ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof on||i instanceof an))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}var km=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},PZ=(e,t)=>{if(ok(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function fh(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(m=>m.type.spec.code))return!1;let h=!1;const p=DZ(d)+s;return o.forEach(m=>{if(h)return;const y=PZ(p,m.find);if(!y)return;const x=u.state.tr,S=xm({state:u.state,transaction:x}),w={from:r-(y[0].length-s.length),to:i},{commands:E,chain:N,can:k}=new wm({editor:n,state:S});m.handler({state:S,range:w,match:y,commands:E,chain:N,can:k})===null||!x.steps.length||(m.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),h=!0)}),h}function IZ(e){const{editor:t,rules:n}=e,r=new Ot({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=ik(me.from(h),o.schema);const{from:p}=u,m=p+h.length;fh({editor:t,from:p,to:m,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return fh({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&fh({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?fh({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function BZ(e){return Object.prototype.toString.call(e).slice(8,-1)}function hh(e){return BZ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function fB(e,t){const n={...e};return hh(e)&&hh(t)&&Object.keys(t).forEach(r=>{hh(t[r])&&hh(e[r])?n[r]=fB(e[r],t[r]):n[r]=t[r]}),n}var ck=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...lt(De(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...lt(De(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>fB(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Pa=class hB extends ck{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new hB(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function zZ(e){return typeof e=="number"}var qZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},VZ=(e,t,n)=>{if(ok(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function HZ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new wm({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,x)=>{var S,w,E,N,k;if((w=(S=y.type)==null?void 0:S.spec)!=null&&w.code||!(y.isText||y.isTextblock||y.isInline))return;const T=(k=(N=(E=y.content)==null?void 0:E.size)!=null?N:y.nodeSize)!=null?k:0,A=Math.max(r,x),_=Math.min(i,x+T);if(A>=_)return;const O=y.isText?y.text||"":y.textBetween(A-x,_-x,void 0,"");VZ(O,s.find,o).forEach(P=>{if(P.index===void 0)return;const H=A+P.index+1,V=H+P[0].length,L={from:n.tr.mapping.map(H),to:n.tr.mapping.map(V)},G=s.handler({state:n,range:L,match:P,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(G)})}),p.every(y=>y!==null)}var ph=null,FZ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function $Z(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:m,rule:y,pasteEvt:x})=>{const S=h.tr,w=xm({state:h,transaction:S});if(!(!HZ({editor:t,state:w,from:Math.max(p-1,0),to:m.b-1,rule:y,pasteEvent:x,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new Ot({view(p){const m=x=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(x.target)?p.dom.parentElement:null,r&&(ph=t)},y=()=>{ph&&(ph=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(s=r===p.dom.parentElement,l=m,!s){const y=ph;y?.isEditable&&setTimeout(()=>{const x=y.state.selection;x&&y.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,m)=>{var y;const x=(y=m.clipboardData)==null?void 0:y.getData("text/html");return o=m,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,m,y)=>{const x=p[0],S=x.getMeta("uiEvent")==="paste"&&!i,w=x.getMeta("uiEvent")==="drop"&&!s,E=x.getMeta("applyPasteRules"),N=!!E;if(!S&&!w&&!N)return;if(N){let{text:A}=E;typeof A=="string"?A=A:A=ik(me.from(A),y.schema);const{from:_}=E,O=_+A.length,D=FZ(A);return u({rule:h,state:y,from:_,to:{b:O},pasteEvt:D})}const k=m.doc.content.findDiffStart(y.doc.content),T=m.doc.content.findDiffEnd(y.doc.content);if(!(!zZ(k)||!T||k===T.b))return u({rule:h,state:y,from:k,to:T,pasteEvt:o})}}))}var Nm=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=nB(e),this.schema=EZ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:U0(t.name,this.schema)},r=De(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return sk([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:U0(r.name,this.schema)},s=[],o=De(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&De(r,"exitable",i)&&(l.ArrowRight=()=>Pa.handleExit({editor:e,mark:r})),o){const m=Object.fromEntries(Object.entries(o()).map(([y,x])=>[y,()=>x({editor:e})]));l={...l,...m}}const u=XX(l);s.push(u);const d=De(r,"addInputRules",i);if(yD(r,e.options.enableInputRules)&&d){const m=d();if(m&&m.length){const y=IZ({editor:e,rules:m}),x=Array.isArray(y)?y:[y];s.push(...x)}}const h=De(r,"addPasteRules",i);if(yD(r,e.options.enablePasteRules)&&h){const m=h();if(m&&m.length){const y=$Z({editor:e,rules:m});s.push(...y)}}const p=De(r,"addProseMirrorPlugins",i);if(p){const m=p();s.push(...m)}return s})}get attributes(){return tB(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=dd(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Gt(n.name,this.schema)},s=De(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const m=dp(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:m})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=dd(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:hs(n.name,this.schema)},s=De(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=dp(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{oQ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:U0(t.name,this.schema)};t.type==="mark"&&((n=lt(De(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=De(t,"onBeforeCreate",r),s=De(t,"onCreate",r),o=De(t,"onUpdate",r),l=De(t,"onSelectionUpdate",r),u=De(t,"onTransaction",r),d=De(t,"onFocus",r),h=De(t,"onBlur",r),p=De(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};Nm.resolve=nB;Nm.sort=sk;Nm.flatten=rk;var UZ={};Z6(UZ,{ClipboardTextSerializer:()=>mB,Commands:()=>vB,Delete:()=>bB,Drop:()=>xB,Editable:()=>wB,FocusEvents:()=>CB,Keymap:()=>EB,Paste:()=>kB,Tabindex:()=>NB,focusEventsPluginKey:()=>SB});var It=class pB extends ck{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new pB(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},mB=It.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ot({key:new cn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=iB(n);return rB(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),gB={};Z6(gB,{blur:()=>GZ,clearContent:()=>KZ,clearNodes:()=>WZ,command:()=>YZ,createParagraphNear:()=>XZ,cut:()=>ZZ,deleteCurrentNode:()=>JZ,deleteNode:()=>QZ,deleteRange:()=>eJ,deleteSelection:()=>tJ,enter:()=>nJ,exitCode:()=>rJ,extendMarkRange:()=>iJ,first:()=>sJ,focus:()=>aJ,forEach:()=>lJ,insertContent:()=>cJ,insertContentAt:()=>dJ,joinBackward:()=>pJ,joinDown:()=>hJ,joinForward:()=>mJ,joinItemBackward:()=>gJ,joinItemForward:()=>yJ,joinTextblockBackward:()=>vJ,joinTextblockForward:()=>bJ,joinUp:()=>fJ,keyboardShortcut:()=>wJ,lift:()=>SJ,liftEmptyBlock:()=>CJ,liftListItem:()=>EJ,newlineInCode:()=>kJ,resetAttributes:()=>NJ,scrollIntoView:()=>TJ,selectAll:()=>AJ,selectNodeBackward:()=>MJ,selectNodeForward:()=>_J,selectParentNode:()=>DJ,selectTextblockEnd:()=>RJ,selectTextblockStart:()=>OJ,setContent:()=>jJ,setMark:()=>PJ,setMeta:()=>IJ,setNode:()=>BJ,setNodeSelection:()=>zJ,setTextSelection:()=>qJ,sinkListItem:()=>VJ,splitBlock:()=>HJ,splitListItem:()=>FJ,toggleList:()=>$J,toggleMark:()=>UJ,toggleNode:()=>GJ,toggleWrap:()=>KJ,undoInputRule:()=>WJ,unsetAllMarks:()=>YJ,unsetMark:()=>XJ,updateAttributes:()=>ZJ,wrapIn:()=>JJ,wrapInList:()=>QJ});var GZ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),KZ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),WZ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),m=d.resolve(h.map(u+l.nodeSize)),y=p.blockRange(m);if(!y)return;const x=dc(y);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(y.start,S)}(x||x===0)&&t.lift(y,x)})}),!0},YZ=e=>t=>e(t),XZ=()=>({state:e,dispatch:t})=>K6(e,t),ZZ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ve(r.doc.resolve(Math.max(o-1,0)))),!0},JZ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},QZ=e=>({tr:t,state:n,dispatch:r})=>{const i=Gt(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},eJ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},tJ=()=>({state:e,dispatch:t})=>JE(e,t),nJ=()=>({commands:e})=>e.keyboardShortcut("Enter"),rJ=()=>({state:e,dispatch:t})=>nZ(e,t),iJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=hs(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=ak(u,s,t);if(p&&p.from<=d&&p.to>=h){const m=Ve.create(o,p.from,p.to);n.setSelection(m)}}return!0},sJ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function oJ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function uk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var aJ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(uk()||oJ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!uB(n.state.selection))return o(),!0;const l=dB(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},lJ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),cJ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),uJ=e=>!("type"in e),dJ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{ud(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=ud(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,y=!0;if((uJ(l)?l:[l]).forEach(w=>{w.check(),m=m?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),h===p&&y){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(m){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof me){let w="";t.forEach(E=>{E.text&&(w+=E.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),E=w.node(),N=w.parentOffset===0,k=E.isText||E.isTextblock,T=E.content.size>0;N&&k&&T&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&LZ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},fJ=()=>({state:e,dispatch:t})=>QX(e,t),hJ=()=>({state:e,dispatch:t})=>eZ(e,t),pJ=()=>({state:e,dispatch:t})=>q6(e,t),mJ=()=>({state:e,dispatch:t})=>$6(e,t),gJ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=pm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},yJ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=pm(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},vJ=()=>({state:e,dispatch:t})=>ZX(e,t),bJ=()=>({state:e,dispatch:t})=>JX(e,t);function yB(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function xJ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))uk()||yB()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var wJ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=xJ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},SJ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return bo(n,i,t)?tZ(n,r):!1},CJ=()=>({state:e,dispatch:t})=>W6(e,t),EJ=e=>({state:t,dispatch:n})=>{const r=Gt(e,t.schema);return hZ(r)(t,n)},kJ=()=>({state:e,dispatch:t})=>G6(e,t);function bD(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var NJ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Cm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Gt(e,r.schema)),l==="mark"&&(o=hs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,bD(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(bD(p.attrs,t)))})})}),!0):!1},TJ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),AJ=()=>({tr:e,dispatch:t})=>{if(t){const n=new pr(e.doc);e.setSelection(n)}return!0},MJ=()=>({state:e,dispatch:t})=>H6(e,t),_J=()=>({state:e,dispatch:t})=>U6(e,t),DJ=()=>({state:e,dispatch:t})=>sZ(e,t),RJ=()=>({state:e,dispatch:t})=>lZ(e,t),OJ=()=>({state:e,dispatch:t})=>aZ(e,t),jJ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=EC(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function LJ(e,t,n){var r;const{selection:i}=t;let s=null;if(uB(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,m)=>{if(d)return!1;if(h.isInline){const y=!m||m.type.allowsMarkType(n),x=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=y&&x}return!d}),d})}var PJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=hs(e,r.schema);if(i)if(o){const d=sB(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(m,y)=>{const x=Math.max(y,h),S=Math.min(y+m.nodeSize,p);m.marks.find(E=>E.type===u)?m.marks.forEach(E=>{u===E.type&&n.addMark(x,S,u.create({...E.attrs,...t}))}):n.addMark(x,S,u.create(t))})});return LJ(r,n,u)},IJ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),BJ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Gt(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>hD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>hD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},zJ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=la(e,0,r.content.size),s=Re.create(r,i);t.setSelection(s)}return!0},qJ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ve.atStart(r).from,l=Ve.atEnd(r).to,u=la(i,o,l),d=la(s,o,l),h=Ve.create(r,u,d);t.setSelection(h)}return!0},VJ=e=>({state:t,dispatch:n})=>{const r=Gt(e,t.schema);return gZ(r)(t,n)};function xD(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var HJ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=Ph(d,l.node().type.name,l.node().attrs);if(s instanceof Re&&s.node.isBlock)return!l.parentOffset||!as(o,l.pos)?!1:(r&&(e&&xD(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,m=l.depth===0?void 0:bZ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&m?[{type:m,attrs:h}]:void 0,x=as(t.doc,t.mapping.map(l.pos),1,y);if(!y&&!x&&as(t.doc,t.mapping.map(l.pos),1,m?[{type:m}]:void 0)&&(x=!0,y=m?[{type:m,attrs:h}]:void 0),r){if(x&&(s instanceof Ve&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,y),m&&!p&&!l.parentOffset&&l.parent.type!==m)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,m)&&t.setNodeMarkup(t.mapping.map(l.before()),m)}e&&xD(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},FJ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Gt(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const m=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let E=me.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let D=u.depth-N;D>=u.depth-3;D-=1)E=me.from(u.node(D).copy(E));const k=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,T={...Ph(m,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(T))||void 0;E=E.append(me.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(N-1));n.replace(_,u.after(-k),new xe(E,4-N,0));let O=-1;n.doc.nodesBetween(_,n.doc.content.size,(D,P)=>{if(O>-1)return!1;D.isTextblock&&D.content.size===0&&(O=P+1)}),O>-1&&n.setSelection(Ve.near(n.doc.resolve(O))),n.scrollIntoView()}return!0}const y=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...Ph(m,p.type.name,p.attrs),...t},S={...Ph(m,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=y?[{type:l,attrs:x},{type:y,attrs:S}]:[{type:l,attrs:x}];if(!as(n.doc,u.pos,2))return!1;if(i){const{selection:E,storedMarks:N}=r,{splittableMarks:k}=s.extensionManager,T=N||E.$to.parentOffset&&E.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!T||!i)return!0;const A=T.filter(_=>k.includes(_.type.name));n.ensureMarks(A)}return!0},G0=(e,t)=>{const n=Sm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&So(e.doc,n.pos)&&e.join(n.pos),!0},K0=(e,t)=>{const n=Sm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&So(e.doc,r)&&e.join(r),!0},$J=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,y=Gt(e,o.schema),x=Gt(t,o.schema),{selection:S,storedMarks:w}=o,{$from:E,$to:N}=S,k=E.blockRange(N),T=w||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const A=Sm(_=>vD(_.type.name,p))(S);if(k.depth>=1&&A&&k.depth-A.depth<=1){if(A.node.type===y)return d.liftListItem(x);if(vD(A.node.type.name,p)&&y.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,y),!0)).command(()=>G0(s,y)).command(()=>K0(s,y)).run()}return!n||!T||!l?u().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>G0(s,y)).command(()=>K0(s,y)).run():u().command(()=>{const _=h().wrapInList(y,r),O=T.filter(D=>m.includes(D.type.name));return s.ensureMarks(O),_?!0:d.clearNodes()}).wrapInList(y,r).command(()=>G0(s,y)).command(()=>K0(s,y)).run()},UJ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=hs(e,r.schema);return kC(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},GJ=(e,t,n={})=>({state:r,commands:i})=>{const s=Gt(e,r.schema),o=Gt(t,r.schema),l=bo(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},KJ=(e,t={})=>({state:n,commands:r})=>{const i=Gt(e,n.schema);return bo(n,i,t)?r.lift(i):r.wrapIn(i,t)},WJ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},YJ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},XJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=hs(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:m,to:y}=l;const x=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=ak(d,u,x);S&&(m=S.from,y=S.to),n.removeMark(m,y,u)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,u)});return n.removeStoredMark(u),!0},ZJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Cm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Gt(e,r.schema)),l==="mark"&&(o=hs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,m,y,x;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,m=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,m=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(E=>{if(o===E.type){const N=Math.max(w,d),k=Math.min(w+S.nodeSize,h);n.addMark(N,k,o.create({...E.attrs,...t}))}}))}),m&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...m.attrs,...t}),o&&m.marks.length&&m.marks.forEach(S=>{o===S.type&&n.addMark(y,x,o.create({...S.attrs,...t}))}))}),!0):!1},JJ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return cZ(i,t)(n,r)},QJ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return uZ(i,t)(n,r)},vB=It.create({name:"commands",addCommands(){return{...gB}}}),bB=It.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=J6(e.before,[e,...t]);aB(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(x,S)=>{const w=S+x.nodeSize-2,E=y.oldRange.from<=S&&w<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:y.oldRange,newRange:y.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:h})})});const m=h.mapping;h.steps.forEach((y,x)=>{var S,w;if(y instanceof ti){const E=m.slice(x).map(y.from,-1),N=m.slice(x).map(y.to),k=m.invert().map(E,-1),T=m.invert().map(N),A=(S=h.doc.nodeAt(E-1))==null?void 0:S.marks.some(O=>O.eq(y.mark)),_=(w=h.doc.nodeAt(N))==null?void 0:w.marks.some(O=>O.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:k,to:T},newRange:{from:E,to:N},partial:!!(_||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),xB=It.create({name:"drop",addProseMirrorPlugins(){return[new Ot({key:new cn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),wB=It.create({name:"editable",addProseMirrorPlugins(){return[new Ot({key:new cn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),SB=new cn("focusEvents"),CB=It.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Ot({key:SB,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),EB=It.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:m,parent:y}=p,x=p.parent.isTextblock&&m>0?l.doc.resolve(m-1):p,S=x.parent.type.spec.isolating,w=p.pos-p.parentOffset,E=S&&x.parent.childCount===1?w===p.pos:Ue.atStart(d).from===m;return!h||!y.type.isTextblock||y.textContent.length||!E||E&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return uk()||yB()?s:i},addProseMirrorPlugins(){return[new Ot({key:new cn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Ue.atStart(t.doc).from,d=Ue.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!Em(n.doc))return;const m=n.tr,y=xm({state:n,transaction:m}),{commands:x}=new wm({editor:this.editor,state:y});if(x.clearNodes(),!!m.steps.length)return m}})]}}),kB=It.create({name:"paste",addProseMirrorPlugins(){return[new Ot({key:new cn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),NB=It.create({name:"tabindex",addProseMirrorPlugins(){return[new Ot({key:new cn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),eQ=class jl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new jl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new jl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new jl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new jl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new jl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},tQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function nQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var rQ=class extends vZ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=dB(t,this.options.autofocus);this.editorState=Vl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=nQ(tQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=eB(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[wB,mB.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),vB,CB,EB,NB,xB,kB,bB].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Nm(r,this)}createCommandManager(){this.commandManager=new wm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=EC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=EC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new I6(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return oB(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return RZ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return ik(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return NZ(this.state.doc,{blockSeparator:t,textSerializers:{...iB(this.schema),...n}})}get isEmpty(){return Em(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new eQ(t,this)}get $doc(){return this.$pos(0)}};function tc(e){return new km({find:e.find,handler:({state:t,range:n,match:r})=>{const i=lt(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(lk(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(S=>S===e.type&&S!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const m=n.from+u+o.length;s.addMark(n.from+u,m,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function iQ(e){return new km({find:e.find,handler:({state:t,range:n,match:r})=>{const i=lt(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function NC(e){return new km({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=lt(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function nc(e){return new km({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=lt(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&VE(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:m}=t,{splittableMarks:y}=e.editor.extensionManager,x=m||p.$to.parentOffset&&p.$from.marks();if(x){const S=x.filter(w=>y.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&So(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function sQ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Re){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function oQ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let m=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(m=!0)}),m){const y=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,y)}}),s.docChanged&&t.view.dispatch(s)}var gr=class TB extends ck{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new TB(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function ka(e){return new qZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=lt(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),m=p+l.length;if(lk(n.from,n.to,t.doc).filter(x=>x.mark.type.excluded.find(w=>w===e.type&&w!==x.mark.type)).filter(x=>x.to>p).length)return null;m<n.to&&o.delete(m,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var W0,wD;function aQ(){return wD||(wD=1,W0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),W0}var lQ=aQ();const cQ=kd(lQ);var Y0={exports:{}},X0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SD;function uQ(){if(SD)return X0;SD=1;var e=Nd(),t=SI();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return X0.useSyncExternalStoreWithSelector=function(d,h,p,m,y){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function E(_){if(!N){if(N=!0,k=_,_=m(_),y!==void 0&&S.hasValue){var O=S.value;if(y(O,_))return T=O}return T=_}if(O=T,r(k,_))return O;var D=m(_);return y!==void 0&&y(O,D)?(k=_,O):(k=_,T=D)}var N=!1,k,T,A=p===void 0?null:p;return[function(){return E(h())},A===null?void 0:function(){return E(A())}]},[h,p,m,y]);var w=i(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},X0}var CD;function dQ(){return CD||(CD=1,Y0.exports=uQ()),Y0.exports}var AB=dQ();const fQ=kd(AB);var hQ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},pQ=({contentComponent:e})=>{const t=CI.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(t)})};function mQ(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:eE.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var gQ=class extends _e.Component{constructor(e){var t;super(e),this.editorContentRef=_e.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=mQ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:hQ(t,this.editorContentRef),...n}),e?.contentComponent&&v.jsx(pQ,{contentComponent:e.contentComponent})]})}},yQ=R.forwardRef((e,t)=>{const n=_e.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return _e.createElement(gQ,{key:n,innerRef:t,...e})}),ED=_e.memo(yQ),vQ=typeof window<"u"?R.useLayoutEffect:R.useEffect,bQ=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function xQ(e){var t;const[n]=R.useState(()=>new bQ(e.editor)),r=AB.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:cQ);return vQ(()=>n.watch(e.editor),[e.editor,n]),R.useDebugValue(r),r}var wQ=!1,TC=typeof window>"u",SQ=TC||!!(typeof window<"u"&&window.next),CQ=class MB{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?TC||SQ?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new rQ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?MB.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function EQ(e={},t=[]){const n=R.useRef(e);n.current=e;const[r]=R.useState(()=>new CQ(n)),i=CI.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return R.useDebugValue(i),R.useEffect(r.onRender(t)),xQ({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var kQ=R.createContext({editor:null});kQ.Consumer;var NQ=R.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),TQ=()=>R.useContext(NQ);_e.forwardRef((e,t)=>{const{onDragStart:n}=TQ(),r=e.as||"div";return v.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});_e.createContext({markViewContentRef:()=>{}});var hp=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},AQ=/^\s*>\s$/,MQ=gr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return hp("blockquote",{...Ut(this.options.HTMLAttributes,e),children:hp("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[nc({find:AQ,type:this.type})]}}),_Q=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,DQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,RQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,OQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,jQ=Pa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return hp("strong",{...Ut(this.options.HTMLAttributes,e),children:hp("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[tc({find:_Q,type:this.type}),tc({find:RQ,type:this.type})]},addPasteRules(){return[ka({find:DQ,type:this.type}),ka({find:OQ,type:this.type})]}}),LQ=/(^|[^`])`([^`]+)`(?!`)$/,PQ=/(^|[^`])`([^`]+)`(?!`)/g,IQ=Pa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[tc({find:LQ,type:this.type})]},addPasteRules(){return[ka({find:PQ,type:this.type})]}}),BQ=/^```([a-z]+)?[\s\n]$/,zQ=/^~~~([a-z]+)?[\s\n]$/,qQ=gr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ut(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(m=>s+m).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,y=0;const x=l-u;for(let T=0;T<p.length;T+=1){if(y+p[T].length>=x){m=T;break}y+=p[T].length+1}const w=((o=p[m].match(/^ */))==null?void 0:o[0])||"",E=Math.min(w.length,this.options.tabSize);if(E===0)return!0;let N=u;for(let T=0;T<m;T+=1)N+=p[T].length+1;return s.delete(N,N+E),l-N<=E&&s.setSelection(Ve.create(s.doc,N)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var m;const y=((m=p.match(/^ */))==null?void 0:m[0])||"",x=Math.min(y.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Ue.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[NC({find:BQ,type:this.type,getAttributes:e=>({language:e[1]})}),NC({find:zQ,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ot({key:new cn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ve.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),VQ=gr.create({name:"doc",topNode:!0,content:"block+"}),HQ=gr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ut(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(m=>l.includes(m.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),_B=gr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ut(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>NC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),FQ=_B,$Q=gr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ut(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!sQ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return cB(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ve.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Re.create(s.doc,u.pos)):s.setSelection(Ve.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(Ve.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[iQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),UQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,GQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,KQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,WQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YQ=Pa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[tc({find:UQ,type:this.type}),tc({find:KQ,type:this.type})]},addPasteRules(){return[ka({find:GQ,type:this.type}),ka({find:WQ,type:this.type})]}});const XQ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",ZQ="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",AC="numeric",MC="ascii",_C="alpha",Vu="asciinumeric",ku="alphanumeric",DC="domain",DB="emoji",JQ="scheme",QQ="slashscheme",Z0="whitespace";function eee(e,t){return e in t||(t[e]=[]),t[e]}function ca(e,t,n){t[AC]&&(t[Vu]=!0,t[ku]=!0),t[MC]&&(t[Vu]=!0,t[_C]=!0),t[Vu]&&(t[ku]=!0),t[_C]&&(t[ku]=!0),t[ku]&&(t[DC]=!0),t[DB]&&(t[DC]=!0);for(const r in t){const i=eee(r,n);i.indexOf(e)<0&&i.push(e)}}function tee(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Gn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Gn.groups={};Gn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Gn.groups;let i;return t&&t.j?i=t:(i=new Gn(t),n&&r&&ca(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Gn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Gn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Gn,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(tee(o.t,r),n);ca(s,u,r)}else n&&ca(s,n,r);o.t=s}return i.j[e]=o,o}};const Ke=(e,t,n,r,i)=>e.ta(t,n,r,i),_t=(e,t,n,r,i)=>e.tr(t,n,r,i),kD=(e,t,n,r,i)=>e.ts(t,n,r,i),ge=(e,t,n,r,i)=>e.tt(t,n,r,i),ns="WORD",RC="UWORD",RB="ASCIINUMERICAL",OB="ALPHANUMERICAL",fd="LOCALHOST",OC="TLD",jC="UTLD",Ih="SCHEME",Ll="SLASH_SCHEME",dk="NUM",LC="WS",fk="NL",Hu="OPENBRACE",Fu="CLOSEBRACE",pp="OPENBRACKET",mp="CLOSEBRACKET",gp="OPENPAREN",yp="CLOSEPAREN",vp="OPENANGLEBRACKET",bp="CLOSEANGLEBRACKET",xp="FULLWIDTHLEFTPAREN",wp="FULLWIDTHRIGHTPAREN",Sp="LEFTCORNERBRACKET",Cp="RIGHTCORNERBRACKET",Ep="LEFTWHITECORNERBRACKET",kp="RIGHTWHITECORNERBRACKET",Np="FULLWIDTHLESSTHAN",Tp="FULLWIDTHGREATERTHAN",Ap="AMPERSAND",Mp="APOSTROPHE",_p="ASTERISK",eo="AT",Dp="BACKSLASH",Rp="BACKTICK",Op="CARET",ro="COLON",hk="COMMA",jp="DOLLAR",vi="DOT",Lp="EQUALS",pk="EXCLAMATION",Or="HYPHEN",$u="PERCENT",Pp="PIPE",Ip="PLUS",Bp="POUND",Uu="QUERY",mk="QUOTE",jB="FULLWIDTHMIDDLEDOT",gk="SEMI",bi="SLASH",Gu="TILDE",zp="UNDERSCORE",LB="EMOJI",qp="SYM";var PB=Object.freeze({__proto__:null,ALPHANUMERICAL:OB,AMPERSAND:Ap,APOSTROPHE:Mp,ASCIINUMERICAL:RB,ASTERISK:_p,AT:eo,BACKSLASH:Dp,BACKTICK:Rp,CARET:Op,CLOSEANGLEBRACKET:bp,CLOSEBRACE:Fu,CLOSEBRACKET:mp,CLOSEPAREN:yp,COLON:ro,COMMA:hk,DOLLAR:jp,DOT:vi,EMOJI:LB,EQUALS:Lp,EXCLAMATION:pk,FULLWIDTHGREATERTHAN:Tp,FULLWIDTHLEFTPAREN:xp,FULLWIDTHLESSTHAN:Np,FULLWIDTHMIDDLEDOT:jB,FULLWIDTHRIGHTPAREN:wp,HYPHEN:Or,LEFTCORNERBRACKET:Sp,LEFTWHITECORNERBRACKET:Ep,LOCALHOST:fd,NL:fk,NUM:dk,OPENANGLEBRACKET:vp,OPENBRACE:Hu,OPENBRACKET:pp,OPENPAREN:gp,PERCENT:$u,PIPE:Pp,PLUS:Ip,POUND:Bp,QUERY:Uu,QUOTE:mk,RIGHTCORNERBRACKET:Cp,RIGHTWHITECORNERBRACKET:kp,SCHEME:Ih,SEMI:gk,SLASH:bi,SLASH_SCHEME:Ll,SYM:qp,TILDE:Gu,TLD:OC,UNDERSCORE:zp,UTLD:jC,UWORD:RC,WORD:ns,WS:LC});const Qi=/[a-z]/,gu=new RegExp("\\p{L}","u"),J0=new RegExp("\\p{Emoji}","u"),es=/\d/,Q0=/\s/,ND="\r",ev=`
`,nee="",ree="",tv="";let mh=null,gh=null;function iee(e=[]){const t={};Gn.groups=t;const n=new Gn;mh==null&&(mh=TD(XQ)),gh==null&&(gh=TD(ZQ)),ge(n,"'",Mp),ge(n,"{",Hu),ge(n,"}",Fu),ge(n,"[",pp),ge(n,"]",mp),ge(n,"(",gp),ge(n,")",yp),ge(n,"<",vp),ge(n,">",bp),ge(n,"",xp),ge(n,"",wp),ge(n,"",Sp),ge(n,"",Cp),ge(n,"",Ep),ge(n,"",kp),ge(n,"",Np),ge(n,"",Tp),ge(n,"&",Ap),ge(n,"*",_p),ge(n,"@",eo),ge(n,"`",Rp),ge(n,"^",Op),ge(n,":",ro),ge(n,",",hk),ge(n,"$",jp),ge(n,".",vi),ge(n,"=",Lp),ge(n,"!",pk),ge(n,"-",Or),ge(n,"%",$u),ge(n,"|",Pp),ge(n,"+",Ip),ge(n,"#",Bp),ge(n,"?",Uu),ge(n,'"',mk),ge(n,"/",bi),ge(n,";",gk),ge(n,"~",Gu),ge(n,"_",zp),ge(n,"\\",Dp),ge(n,"",jB);const r=_t(n,es,dk,{[AC]:!0});_t(r,es,r);const i=_t(r,Qi,RB,{[Vu]:!0}),s=_t(r,gu,OB,{[ku]:!0}),o=_t(n,Qi,ns,{[MC]:!0});_t(o,es,i),_t(o,Qi,o),_t(i,es,i),_t(i,Qi,i);const l=_t(n,gu,RC,{[_C]:!0});_t(l,Qi),_t(l,es,s),_t(l,gu,l),_t(s,es,s),_t(s,Qi),_t(s,gu,s);const u=ge(n,ev,fk,{[Z0]:!0}),d=ge(n,ND,LC,{[Z0]:!0}),h=_t(n,Q0,LC,{[Z0]:!0});ge(n,tv,h),ge(d,ev,u),ge(d,tv,h),_t(d,Q0,h),ge(h,ND),ge(h,ev),_t(h,Q0,h),ge(h,tv,h);const p=_t(n,J0,LB,{[DB]:!0});ge(p,"#"),_t(p,J0,p),ge(p,nee,p);const m=ge(p,ree);ge(m,"#"),_t(m,J0,p);const y=[[Qi,o],[es,i]],x=[[Qi,null],[gu,l],[es,s]];for(let S=0;S<mh.length;S++)Ws(n,mh[S],OC,ns,y);for(let S=0;S<gh.length;S++)Ws(n,gh[S],jC,RC,x);ca(OC,{tld:!0,ascii:!0},t),ca(jC,{utld:!0,alpha:!0},t),Ws(n,"file",Ih,ns,y),Ws(n,"mailto",Ih,ns,y),Ws(n,"http",Ll,ns,y),Ws(n,"https",Ll,ns,y),Ws(n,"ftp",Ll,ns,y),Ws(n,"ftps",Ll,ns,y),ca(Ih,{scheme:!0,ascii:!0},t),ca(Ll,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],N=e[S][1]?{[JQ]:!0}:{[QQ]:!0};w.indexOf("-")>=0?N[DC]=!0:Qi.test(w)?es.test(w)?N[Vu]=!0:N[MC]=!0:N[AC]=!0,kD(n,w,w,N)}return kD(n,"localhost",fd,{ascii:!0}),n.jd=new Gn(qp),{start:n,tokens:Object.assign({groups:t},PB)}}function IB(e,t){const n=see(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,m=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,m=0,h=l):p>=0&&(p+=n[o].length,m++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=m,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function see(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Ws(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Gn(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Gn(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function TD(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const hd={defaultProtocol:"http",events:null,format:AD,formatHref:AD,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function yk(e,t=null){let n=Object.assign({},hd);e&&(n=Object.assign(n,e instanceof yk?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}yk.prototype={o:hd,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:hd[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function AD(e){return e}function BB(e,t){this.t="token",this.v=e,this.tk=t}BB.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=hd.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function Tm(e,t){class n extends BB{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const MD=Tm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),_D=Tm("text"),oee=Tm("nl"),yh=Tm("url",{isLink:!0,toHref(e=hd.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==fd&&e[1].t===ro}}),Dr=e=>new Gn(e);function aee({groups:e}){const t=e.domain.concat([Ap,_p,eo,Dp,Rp,Op,jp,Lp,Or,dk,$u,Pp,Ip,Bp,bi,qp,Gu,zp]),n=[Mp,ro,hk,vi,pk,$u,Uu,mk,gk,vp,bp,Hu,Fu,mp,pp,gp,yp,xp,wp,Sp,Cp,Ep,kp,Np,Tp],r=[Ap,Mp,_p,Dp,Rp,Op,jp,Lp,Or,Hu,Fu,$u,Pp,Ip,Bp,Uu,bi,qp,Gu,zp],i=Dr(),s=ge(i,Gu);Ke(s,r,s),Ke(s,e.domain,s);const o=Dr(),l=Dr(),u=Dr();Ke(i,e.domain,o),Ke(i,e.scheme,l),Ke(i,e.slashscheme,u),Ke(o,r,s),Ke(o,e.domain,o);const d=ge(o,eo);ge(s,eo,d),ge(l,eo,d),ge(u,eo,d);const h=ge(s,vi);Ke(h,r,s),Ke(h,e.domain,s);const p=Dr();Ke(d,e.domain,p),Ke(p,e.domain,p);const m=ge(p,vi);Ke(m,e.domain,p);const y=Dr(MD);Ke(m,e.tld,y),Ke(m,e.utld,y),ge(d,fd,y);const x=ge(p,Or);ge(x,Or,x),Ke(x,e.domain,p),Ke(y,e.domain,p),ge(y,vi,m),ge(y,Or,x);const S=ge(y,ro);Ke(S,e.numeric,MD);const w=ge(o,Or),E=ge(o,vi);ge(w,Or,w),Ke(w,e.domain,o),Ke(E,r,s),Ke(E,e.domain,o);const N=Dr(yh);Ke(E,e.tld,N),Ke(E,e.utld,N),Ke(N,e.domain,o),Ke(N,r,s),ge(N,vi,E),ge(N,Or,w),ge(N,eo,d);const k=ge(N,ro),T=Dr(yh);Ke(k,e.numeric,T);const A=Dr(yh),_=Dr();Ke(A,t,A),Ke(A,n,_),Ke(_,t,A),Ke(_,n,_),ge(N,bi,A),ge(T,bi,A);const O=ge(l,ro),D=ge(u,ro),P=ge(D,bi),H=ge(P,bi);Ke(l,e.domain,o),ge(l,vi,E),ge(l,Or,w),Ke(u,e.domain,o),ge(u,vi,E),ge(u,Or,w),Ke(O,e.domain,A),ge(O,bi,A),ge(O,Uu,A),Ke(H,e.domain,A),Ke(H,t,A),ge(H,bi,A);const V=[[Hu,Fu],[pp,mp],[gp,yp],[vp,bp],[xp,wp],[Sp,Cp],[Ep,kp],[Np,Tp]];for(let L=0;L<V.length;L++){const[G,B]=V[L],F=ge(A,G);ge(_,G,F),ge(F,B,A);const I=Dr(yh);Ke(F,t,I);const q=Dr();Ke(F,n),Ke(I,t,I),Ke(I,n,q),Ke(q,t,I),Ke(q,n,q),ge(I,B,A),ge(q,B,A)}return ge(i,fd,N),ge(i,fk,oee),{start:i,tokens:PB}}function lee(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,m=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(m=0,p=l):m>=0&&m++,i++,h++;if(m<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(nv(_D,t,o)),o=[]),i-=m,h-=m;const y=p.t,x=n.slice(i-h,i);s.push(nv(y,t,x))}}return o.length>0&&s.push(nv(_D,t,o)),s}function nv(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const cee=typeof console<"u"&&console&&console.warn||(()=>{}),uee="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",gt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function dee(){return Gn.groups={},gt.scanner=null,gt.parser=null,gt.tokenQueue=[],gt.pluginQueue=[],gt.customSchemes=[],gt.initialized=!1,gt}function DD(e,t=!1){if(gt.initialized&&cee(`linkifyjs: already initialized - will not register custom scheme "${e}" ${uee}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);gt.customSchemes.push([e,t])}function fee(){gt.scanner=iee(gt.customSchemes);for(let e=0;e<gt.tokenQueue.length;e++)gt.tokenQueue[e][1]({scanner:gt.scanner});gt.parser=aee(gt.scanner.tokens);for(let e=0;e<gt.pluginQueue.length;e++)gt.pluginQueue[e][1]({scanner:gt.scanner,parser:gt.parser});return gt.initialized=!0,gt}function vk(e){return gt.initialized||fee(),lee(gt.parser.start,e,IB(gt.scanner.start,e))}vk.scan=IB;function zB(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new yk(n),i=vk(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var bk="[\0- -\u2029]",hee=new RegExp(bk),pee=new RegExp(`${bk}$`),mee=new RegExp(bk,"g");function gee(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function yee(e){return new Ot({key:new cn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=J6(n.doc,[...t]);if(aB(l).forEach(({newRange:d})=>{const h=xZ(r.doc,d,y=>y.isTextblock);let p,m;if(h.length>1)p=h[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!pee.test(y))return;p=h[0],m=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&m){const y=m.split(hee).filter(Boolean);if(y.length<=0)return!1;const x=y[y.length-1],S=p.pos+m.lastIndexOf(x);if(!x)return!1;const w=vk(x).map(E=>E.toObject(e.defaultProtocol));if(!gee(w))return!1;w.filter(E=>E.isLink).map(E=>({...E,from:S+E.start+1,to:S+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{lk(E.from,E.to,r.doc).some(N=>N.mark.type===e.type)||o.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!o.steps.length)return o}})}function vee(e){return new Ot({key:new cn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return!1;const l=oB(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function bee(e){return new Ot({key:new cn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=zB(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function Jo(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(mee,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var qB=Pa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){DD(e);return}DD(e.scheme,e.optionalSlashes)})},onDestroy(){dee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Jo(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Jo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Jo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ut(this.options.HTMLAttributes,e),0]:["a",Ut(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Jo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Jo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ka({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=zB(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Jo(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(yee({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Jo(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(vee({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(bee({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),xee=qB,wee=Object.defineProperty,See=(e,t)=>{for(var n in t)wee(e,n,{get:t[n],enumerable:!0})},Cee="listItem",RD="textStyle",OD=/^\s*([-+*])\s$/,xk=gr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Cee,this.editor.getAttributes(RD)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=nc({find:OD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=nc({find:OD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(RD),editor:this.editor})),[e]}}),wk=gr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ut(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Eee={};See(Eee,{findListItemPos:()=>Id,getNextListDepth:()=>Sk,handleBackspace:()=>PC,handleDelete:()=>IC,hasListBefore:()=>VB,hasListItemAfter:()=>kee,hasListItemBefore:()=>HB,listItemHasSubList:()=>FB,nextListIsDeeper:()=>$B,nextListIsHigher:()=>UB});var Id=(e,t)=>{const{$from:n}=t.selection,r=Gt(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},Sk=(e,t)=>{const n=Id(e,t);if(!n)return!1;const[,r]=_Z(t,e,n.$pos.pos+4);return r},VB=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},HB=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},FB=(e,t,n)=>{if(!n)return!1;const r=Gt(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},PC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!bo(e.state,t)&&VB(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((m,y)=>{m.type.name===t&&d.push({node:m,pos:y})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!bo(e.state,t)||!jZ(e.state))return!1;const r=Id(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=FB(t,e.state,s);return HB(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},$B=(e,t)=>{const n=Sk(e,t),r=Id(e,t);return!r||!n?!1:n>r.depth},UB=(e,t)=>{const n=Sk(e,t),r=Id(e,t);return!r||!n?!1:n<r.depth},IC=(e,t)=>{if(!bo(e.state,t)||!OZ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:$B(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():UB(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},kee=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},GB=It.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&IC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&IC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&PC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&PC(e,n,r)&&(t=!0)}),t}}}}),Nee="listItem",jD="textStyle",LD=/^(\d+)\.\s$/,Ck=gr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Ut(this.options.HTMLAttributes,n),0]:["ol",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Nee,this.editor.getAttributes(jD)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=nc({find:LD,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=nc({find:LD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(jD)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Tee=/^\s*(\[([( |x])?\])\s$/,Aee=gr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ut(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,m;l.ariaLabel=((m=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:m.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const y=n();if(typeof y!="number")return!1;const x=m.doc.nodeAt(y);return m.setNodeMarkup(y,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[nc({find:Tee,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Mee=gr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ut(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});It.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(xk.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(wk.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(GB.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Ck.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Aee.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Mee.configure(this.options.taskList)),e}});var _ee=gr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Dee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ree=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Oee=Pa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[tc({find:Dee,type:this.type})]},addPasteRules(){return[ka({find:Ree,type:this.type})]}}),jee=gr.create({name:"text",group:"inline"}),KB=Pa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ut(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Lee=KB;function Pee(e={}){return new Ot({view(t){return new Iee(t,e)}})}class Iee{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,m=t.nodeAfter;if(p||m){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let x=y.getBoundingClientRect(),S=p?x.bottom:x.top;p&&m&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:x.left,right:x.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*o;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),m=p.width/u.offsetWidth,y=p.height/u.offsetHeight;d=p.left-u.scrollLeft*m,h=p.top-u.scrollTop*y}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=XI(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Rt extends Ue{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Rt.valid(r)?new Rt(r):Ue.near(r)}content(){return xe.empty}eq(t){return t instanceof Rt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Rt(t.resolve(n.pos))}getBookmark(){return new Ek(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Bee(t)||!zee(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Rt.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(Rt.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(Rt.valid(l))return l}return null}}}Rt.prototype.visible=!1;Rt.findFrom=Rt.findGapCursorFrom;Ue.jsonID("gapcursor",Rt);class Ek{constructor(t){this.pos=t}map(t){return new Ek(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Rt.valid(n)?new Rt(n):Ue.near(n)}}function Bee(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function zee(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function qee(){return new Ot({props:{decorations:$ee,createSelectionBetween(e,t,n){return t.pos==n.pos&&Rt.valid(n)?new Rt(n):null},handleClick:Hee,handleKeyDown:Vee,handleDOMEvents:{beforeinput:Fee}}})}const Vee=B6({ArrowLeft:vh("horiz",-1),ArrowRight:vh("horiz",1),ArrowUp:vh("vert",-1),ArrowDown:vh("vert",1)});function vh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ve){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=Rt.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new Rt(d))),!0):!1}}function Hee(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Rt.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Re.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Rt(r))),!0)}function Fee(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Rt))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=me.empty;for(let o=r.length-1;o>=0;o--)i=me.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new xe(i,0,0));return s.setSelection(Ve.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function $ee(e){if(!(e.selection instanceof Rt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Et.create(e.doc,[Pn.widget(e.selection.head,t,{key:"gapcursor"})])}var Vp=200,ln=function(){};ln.prototype.append=function(t){return t.length?(t=ln.from(t),!this.length&&t||t.length<Vp&&this.leafAppend(t)||this.length<Vp&&t.leafPrepend(this)||this.appendInner(t)):this};ln.prototype.prepend=function(t){return t.length?ln.from(t).append(this):this};ln.prototype.appendInner=function(t){return new Uee(this,t)};ln.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?ln.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};ln.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};ln.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};ln.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};ln.from=function(t){return t instanceof ln?t:t&&t.length?new WB(t):ln.empty};var WB=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Vp)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Vp)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(ln);ln.empty=new WB([]);var Uee=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(ln);const Gee=500;class Qr{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new xi(p.map));let y=p.step.map(i.slice(s)),x;y&&o.maybeStep(y).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new xi(x,void 0,void 0,d.length+h.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Qr(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),m=new xi(t.mapping.maps[h],p,n),y;(y=u&&u.merge(m))&&(m=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(m),n&&(o++,n=void 0),i||(u=m)}let d=o-r.depth;return d>Wee&&(l=Kee(l,d),o-=d),new Qr(l.append(s),o)}remapping(t,n){let r=new sd;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Qr(this.items.append(t.map(n=>new xi(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(m=>{m.selection&&l--},i);let u=n;this.items.forEach(m=>{let y=s.getMirror(--u);if(y==null)return;o=Math.min(o,y);let x=s.maps[y];if(m.step){let S=t.steps[y].invert(t.docs[y]),w=m.selection&&m.selection.map(s.slice(u+1,y));w&&l++,r.push(new xi(x,S,w))}else r.push(new xi(x))},i);let d=[];for(let m=n;m<o;m++)d.push(new xi(s.maps[m]));let h=this.items.slice(0,i).append(d).append(r),p=new Qr(h,l);return p.emptyItemCount()>Gee&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new xi(d.invert(),u,h),m,y=i.length-1;(m=i.length&&i[y].merge(p))?i[y]=m:i.push(p)}}else o.map&&r--},this.items.length,0),new Qr(ln.from(i.reverse()),s)}}Qr.empty=new Qr(ln.empty,0);function Kee(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class xi{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new xi(n.getMap().invert(),n,this.selection)}}}class to{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Wee=20;function Yee(e,t,n,r){let i=n.getMeta(va),s;if(i)return i.historyState;n.getMeta(Jee)&&(e=new to(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(va))return o.getMeta(va).redo?new to(e.done.addTransform(n,void 0,r,Bh(t)),e.undone,PD(n.mapping.maps),e.prevTime,e.prevComposition):new to(e.done,e.undone.addTransform(n,void 0,r,Bh(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Xee(n,e.prevRanges)),d=o?rv(e.prevRanges,n.mapping):PD(n.mapping.maps);return new to(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,Bh(t)),Qr.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new to(e.done.rebased(n,s),e.undone.rebased(n,s),rv(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new to(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),rv(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Xee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function PD(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function rv(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function Zee(e,t,n){let r=Bh(t),i=va.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new to(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(va,{redo:n,historyState:u})}let iv=!1,ID=null;function Bh(e){let t=e.plugins;if(ID!=t){iv=!1,ID=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){iv=!0;break}}return iv}const va=new cn("history"),Jee=new cn("closeHistory");function Qee(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Ot({key:va,state:{init(){return new to(Qr.empty,Qr.empty,null,0,-1)},apply(t,n,r){return Yee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?XB:r=="historyRedo"?ZB:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function YB(e,t){return(n,r)=>{let i=va.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=Zee(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const XB=YB(!1,!0),ZB=YB(!0,!0);It.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Ot({key:new cn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var ete=It.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Pee(this.options)]}});It.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ot({key:new cn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Et.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Pn.node(d,d+u.nodeSize,{class:this.options.className}))}),Et.create(e,s)}}})]}});var tte=It.create({name:"gapCursor",addProseMirrorPlugins(){return[qee()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=lt(De(e,"allowGapCursor",n)))!=null?t:null}}}),nte=It.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ot({key:new cn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&Em(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=Pn.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),Et.create(e,i)}}})]}});It.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Ot({key:new cn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||cB(n.selection)||e.view.dragging?null:Et.create(n.doc,[Pn.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function BD({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var rte=It.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new cn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Ot({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!BD({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!BD({node:i,types:t})}}})]}}),ite=It.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>XB(e,t),redo:()=>({state:e,dispatch:t})=>ZB(e,t)}},addProseMirrorPlugins(){return[Qee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),ste=It.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(jQ.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(MQ.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(xk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(IQ.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(qQ.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(VQ.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(ete.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(tte.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(HQ.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(_B.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(ite.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push($Q.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(YQ.configure(this.options.italic)),this.options.listItem!==!1&&i.push(wk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(GB.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(qB.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(Ck.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(_ee.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Oee.configure(this.options.strike)),this.options.text!==!1&&i.push(jee.configure(this.options.text)),this.options.underline!==!1&&i.push(KB.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(rte.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),ote=ste,ate=It.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),lte=ate,cte=nte,ute=xk,dte=Ck,fte=wk;const Am=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return v.jsxs(Mn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&v.jsx(Mn.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},Mm=()=>{const[e,t]=_e.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}},Al=({onClick:e,disabled:t,active:n,title:r,children:i})=>v.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),zD=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),v.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[v.jsx("option",{value:"0",children:"P"}),v.jsx("option",{value:"1",children:"H1"}),v.jsx("option",{value:"2",children:"H2"}),v.jsx("option",{value:"3",children:"H3"})]})},Hp=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=R.useState(0),[d,h]=R.useState(!1),{focused:p,onFocus:m,onBlur:y}=Mm(),x=()=>u(Date.now()),S=()=>{h(!d)},w=EQ({extensions:[ote.configure({bulletList:!1,orderedList:!1,listItem:!1}),ute.configure({HTMLAttributes:{class:"bullet-list"}}),dte.configure({HTMLAttributes:{class:"ordered-list"}}),fte.configure({HTMLAttributes:{class:"list-item"}}),Lee,xee.configure({openOnClick:!1}),lte.configure({types:["heading","paragraph"]}),FQ.configure({levels:[1,2,3]}),cte.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:T})=>{r(T.getHTML())},onFocus:m,onBlur:y,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(R.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),R.useEffect(()=>{const T=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",T),document.body.style.overflow=""}},[d]),!w)return null;const E=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:v.jsx(hK,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:v.jsx(pK,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:v.jsx(vK,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:v.jsx(v.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:v.jsx(mK,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:v.jsx(gK,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:v.jsx(yK,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:v.jsx(sK,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:v.jsx(dK,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:v.jsx(uK,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:v.jsx(fK,{size:16})}],k=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?v.jsx(SK,{size:16}):v.jsx(CK,{size:16})}];return v.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?v.jsxs(Mn.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[v.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&v.jsx("span",{className:"font-medium text-theme",children:t})}),v.jsx(zD,{editor:w,disabled:s}),E.map(T=>v.jsx(Al,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(Al,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(Al,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsx("div",{className:"h-full overflow-y-auto p-4",children:v.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:v.jsx(ED,{editor:w,className:"focus:outline-none h-full"})})})})]}):v.jsx(Am,{id:e,label:t,focused:p,containerClassName:l,children:v.jsxs(Mn.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[v.jsx(zD,{editor:w,disabled:s}),E.map(T=>v.jsx(Al,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(Al,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(Al,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:v.jsx(ED,{editor:w,className:"focus:outline-none"})})]})})})},hte=()=>{Oa();const e=Td(),[t,n]=R.useState(!1),r=R.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=R.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(m,y)=>{o(x=>({...x,[m]:y}))},u=(m,y,x)=>{const S=s[m].map(w=>w.id===y?{...w,value:x}:w);o(w=>({...w,[m]:S}))},d=m=>{o(y=>({...y,[m]:[...y[m],{id:i(),value:""}]}))},h=(m,y)=>{const x=s[m].filter(S=>S.id!==y);o(S=>({...S,[m]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const m={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(y=>y.value).filter(y=>y.trim()!==""),constraints:s.constraints.map(y=>y.value).filter(y=>y.trim()!==""),hints:s.hints.map(y=>y.value).filter(y=>y.trim()!==""),tags:s.tags.map(y=>y.value).filter(y=>y.trim()!=="")};localStorage.setItem(`custom-problem-${m.id}`,JSON.stringify(m)),setTimeout(()=>{e(`/playground/${m.id}`)},300)};return v.jsxs(v.Fragment,{children:[v.jsx(Md,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsx(Ad,{})})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"inline-block mb-4",children:v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),v.jsx("input",{id:"title",type:"text",value:s.title,onChange:m=>l("title",m.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsx("div",{children:v.jsx(Hp,{id:"description",label:" Description *",value:s.description,onChange:m=>l("description",m),placeholder:"Describe the problem in detail..."})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),v.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:m=>l("difficulty",m.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"Easy",children:"Easy"}),v.jsx("option",{value:"Medium",children:"Medium"}),v.jsx("option",{value:"Hard",children:"Hard"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Category"]}),v.jsx("input",{id:"category",type:"text",value:s.category,onChange:m=>l("category",m.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),v.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:m=>l("estimatedTime",m.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Requirements"]}),v.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((m,y)=>v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-3 items-start",children:[v.jsx("div",{className:"flex-1",children:v.jsx(Hp,{id:`requirement-${m.id}`,label:`Requirement ${y+1}`,value:m.value,onChange:x=>u("requirements",m.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&v.jsx("button",{type:"button",onClick:()=>h("requirements",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},m.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Constraints"]}),v.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(m=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:m.value,onChange:y=>u("constraints",m.id,y.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("constraints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),v.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(m=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:m.value,onChange:y=>u("hints",m.id,y.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("hints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(m=>m.value.trim())&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(m=>m.value.trim()).map(m=>v.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[v.jsx("span",{children:m.value}),v.jsx("button",{type:"button",onClick:()=>h("tags",m.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},m.id))}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:m=>u("tags",s.tags.at(-1)?.id||"",m.target.value),onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.value.trim()&&(m.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),v.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[v.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):v.jsx(v.Fragment,{children:" Create & Start Designing"})}),v.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},pte=()=>{Oa();const e=Td(),[t,n]=R.useState([]),[r,i]=R.useState(!1),[s,o]=R.useState(""),[l,u]=R.useState("updated"),[d,h]=R.useState(!1),[p,m]=R.useState(!1),[y,x]=R.useState(!1),[S,w]=R.useState(null),{user:E,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:_}=om();R.useEffect(()=>{N||e("/")},[N,e]),R.useEffect(()=>{(async()=>{if(!N){n([]);return}i(!0);try{const G=await yn.getUserDiagrams();n(G)}catch(G){console.error("Failed to load diagrams:",G)}finally{i(!1)}})()},[N]);const O=L=>{e(`/playground/free?diagramId=${L}`)},D=async(L,G)=>{G.stopPropagation();const B=t.find(F=>F.id===L);B&&(w(B),x(!0))},P=async()=>{if(S)try{await yn.deleteDiagram(S.id),n(L=>L.filter(G=>G.id!==S.id)),x(!1),w(null)}catch(L){console.error("Failed to delete diagram:",L),alert("Failed to delete diagram. Please try again.")}},H=()=>{x(!1),w(null)},V=t.filter(L=>{const G=s.toLowerCase();return L.title.toLowerCase().includes(G)||L.description?.toLowerCase().includes(G)||!1}).sort((L,G)=>{switch(l){case"title":return L.title.localeCompare(G.title);case"created":return new Date(G.createdAt).getTime()-new Date(L.createdAt).getTime();case"updated":default:return new Date(G.updatedAt).getTime()-new Date(L.updatedAt).getTime()}});return v.jsxs(v.Fragment,{children:[v.jsx(Md,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${V.length} design${V.length===1?"":"s"}`}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),v.jsx(Ad,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[E?.picture?v.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:E?.name?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline text-sm",children:E?.name||E?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&v.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:v.jsxs("div",{className:"py-1",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name}),v.jsx("p",{className:"text-sm text-muted truncate",children:E?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(!1),_()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):v.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved system design projects"})]}),!r&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:L=>o(L.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),v.jsxs("select",{id:"sort-select",value:l,onChange:L=>u(L.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"updated",children:"Last Updated"}),v.jsx("option",{value:"created",children:"Date Created"}),v.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&V.length===0&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:s?"":""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":"No designs yet"}),v.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":"Start creating your first system design project"}),!s&&v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&V.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:V.map((L,G)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${G===0?"delay-0":G===1?"delay-100":G===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsx("button",{type:"button",onClick:B=>D(L.id,B),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{className:"cursor-pointer",onClick:()=>O(L.id),children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1 pr-8",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 mb-1",children:L.title}),L.description&&v.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:L.description})]}),v.jsx("div",{className:"text-3xl",children:""})]}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),L.nodes.length," node",L.nodes.length===1?"":"s"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),L.edges.length," connection",L.edges.length===1?"":"s"]})]}),v.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[v.jsxs("span",{children:["Updated"," ",new Date(L.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),v.jsxs("span",{children:["Created"," ",new Date(L.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),v.jsx("button",{type:"button",onClick:B=>{B.stopPropagation(),O(L.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},L.id))})]})]})})]}),p&&v.jsx(fm,{isOpen:p,onClose:()=>m(!1),onLogin:async(L,G)=>{await k({email:L,password:G})},onSignup:async(L,G,B)=>{await T({email:L,password:G,name:B})},onGoogleLogin:async L=>{await A(L)}}),y&&S&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",v.jsxs("strong",{children:['"',S.title,'"']}),"? This will permanently remove the design and all its data."]}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:H,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:P,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function mte(e){return Qe({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(e)}const JB=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>v.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[v.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[v.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),v.jsx(lm,{children:t&&v.jsx(Mn.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&v.jsx("span",{className:"text-sm text-theme",children:r})]}),QB=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:m}=Mm();return v.jsx(Am,{id:e,label:t,focused:h,containerClassName:d,children:v.jsx(Mn.input,{id:e,type:"number",value:n??"",onChange:y=>r(Number(y.target.value)),onFocus:p,onBlur:m,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},zh=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=Mm();return v.jsx(Am,{id:e,label:t,focused:u,containerClassName:l,children:v.jsx(Mn.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},ez=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=Mm(),p=`${e}-label`;return v.jsxs(Am,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&v.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),v.jsx(Mn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:v.jsx("select",{id:e,value:n??"",onChange:m=>r(m.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(m=>v.jsx("option",{value:m,children:m},m))})})]})};function gte(e,t=50){const[n,r]=R.useState({past:[],present:e,future:[]}),i=R.useRef(!1),s=R.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const m=[...h.past,h.present];return m.length>t&&m.shift(),{past:m,present:p,future:[]}})},[t]),o=R.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=R.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=R.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Kt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Kt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var yte={value:()=>{}};function _m(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qh(n)}function qh(e){this._=e}function vte(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qh.prototype=_m.prototype={constructor:qh,on:function(e,t){var n=this._,r=vte(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=bte(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=qD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=qD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qh(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function bte(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function qD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=yte,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var BC="http://www.w3.org/1999/xhtml";const VD={svg:"http://www.w3.org/2000/svg",xhtml:BC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),VD.hasOwnProperty(t)?{space:VD[t],local:e}:e}function xte(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===BC&&t.documentElement.namespaceURI===BC?t.createElement(e):t.createElementNS(n,e)}}function wte(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tz(e){var t=Dm(e);return(t.local?wte:xte)(t)}function Ste(){}function kk(e){return e==null?Ste:function(){return this.querySelector(e)}}function Cte(e){typeof e!="function"&&(e=kk(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new mr(r,this._parents)}function Ete(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kte(){return[]}function nz(e){return e==null?kte:function(){return this.querySelectorAll(e)}}function Nte(e){return function(){return Ete(e.apply(this,arguments))}}function Tte(e){typeof e=="function"?e=Nte(e):e=nz(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new mr(r,i)}function rz(e){return function(){return this.matches(e)}}function iz(e){return function(t){return t.matches(e)}}var Ate=Array.prototype.find;function Mte(e){return function(){return Ate.call(this.children,e)}}function _te(){return this.firstElementChild}function Dte(e){return this.select(e==null?_te:Mte(typeof e=="function"?e:iz(e)))}var Rte=Array.prototype.filter;function Ote(){return Array.from(this.children)}function jte(e){return function(){return Rte.call(this.children,e)}}function Lte(e){return this.selectAll(e==null?Ote:jte(typeof e=="function"?e:iz(e)))}function Pte(e){typeof e!="function"&&(e=rz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new mr(r,this._parents)}function sz(e){return new Array(e.length)}function Ite(){return new mr(this._enter||this._groups.map(sz),this._parents)}function Fp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fp.prototype={constructor:Fp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Bte(e){return function(){return e}}function zte(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new Fp(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function qte(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,m=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(m[l]=y=o.call(u,u.__data__,l,t)+"",d.has(y)?i[l]=u:d.set(y,u));for(l=0;l<p;++l)y=o.call(e,s[l],l,s)+"",(u=d.get(y))?(r[l]=u,u.__data__=s[l],d.delete(y)):n[l]=new Fp(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(m[l])===u&&(i[l]=u)}function Vte(e){return e.__data__}function Hte(e,t){if(!arguments.length)return Array.from(this,Vte);var n=t?qte:zte,r=this._parents,i=this._groups;typeof e!="function"&&(e=Bte(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],m=p.length,y=Fte(e.call(h,h&&h.__data__,d,r)),x=y.length,S=l[d]=new Array(x),w=o[d]=new Array(x),E=u[d]=new Array(m);n(h,p,S,w,E,y,t);for(var N=0,k=0,T,A;N<x;++N)if(T=S[N]){for(N>=k&&(k=N+1);!(A=w[k])&&++k<x;);T._next=A||null}}return o=new mr(o,r),o._enter=l,o._exit=u,o}function Fte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $te(){return new mr(this._exit||this._groups.map(sz),this._parents)}function Ute(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Gte(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,m=l[u]=new Array(p),y,x=0;x<p;++x)(y=d[x]||h[x])&&(m[x]=y);for(;u<i;++u)l[u]=n[u];return new mr(l,this._parents)}function Kte(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Wte(e){e||(e=Yte);function t(p,m){return p&&m?e(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new mr(i,this._parents).order()}function Yte(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xte(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zte(){return Array.from(this)}function Jte(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Qte(){let e=0;for(const t of this)++e;return e}function ene(){return!this.node()}function tne(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function nne(e){return function(){this.removeAttribute(e)}}function rne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ine(e,t){return function(){this.setAttribute(e,t)}}function sne(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function one(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ane(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function lne(e,t){var n=Dm(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rne:nne:typeof t=="function"?n.local?ane:one:n.local?sne:ine)(n,t))}function oz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cne(e){return function(){this.style.removeProperty(e)}}function une(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dne(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function fne(e,t,n){return arguments.length>1?this.each((t==null?cne:typeof t=="function"?dne:une)(e,t,n??"")):rc(this.node(),e)}function rc(e,t){return e.style.getPropertyValue(t)||oz(e).getComputedStyle(e,null).getPropertyValue(t)}function hne(e){return function(){delete this[e]}}function pne(e,t){return function(){this[e]=t}}function mne(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gne(e,t){return arguments.length>1?this.each((t==null?hne:typeof t=="function"?mne:pne)(e,t)):this.node()[e]}function az(e){return e.trim().split(/^|\s+/)}function Nk(e){return e.classList||new lz(e)}function lz(e){this._node=e,this._names=az(e.getAttribute("class")||"")}lz.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cz(e,t){for(var n=Nk(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function uz(e,t){for(var n=Nk(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function yne(e){return function(){cz(this,e)}}function vne(e){return function(){uz(this,e)}}function bne(e,t){return function(){(t.apply(this,arguments)?cz:uz)(this,e)}}function xne(e,t){var n=az(e+"");if(arguments.length<2){for(var r=Nk(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?bne:t?yne:vne)(n,t))}function wne(){this.textContent=""}function Sne(e){return function(){this.textContent=e}}function Cne(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ene(e){return arguments.length?this.each(e==null?wne:(typeof e=="function"?Cne:Sne)(e)):this.node().textContent}function kne(){this.innerHTML=""}function Nne(e){return function(){this.innerHTML=e}}function Tne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ane(e){return arguments.length?this.each(e==null?kne:(typeof e=="function"?Tne:Nne)(e)):this.node().innerHTML}function Mne(){this.nextSibling&&this.parentNode.appendChild(this)}function _ne(){return this.each(Mne)}function Dne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rne(){return this.each(Dne)}function One(e){var t=typeof e=="function"?e:tz(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function jne(){return null}function Lne(e,t){var n=typeof e=="function"?e:tz(e),r=t==null?jne:typeof t=="function"?t:kk(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Pne(){var e=this.parentNode;e&&e.removeChild(this)}function Ine(){return this.each(Pne)}function Bne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qne(e){return this.select(e?zne:Bne)}function Vne(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hne(e){return function(t){e.call(this,t,this.__data__)}}function Fne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function $ne(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Une(e,t,n){return function(){var r=this.__on,i,s=Hne(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Gne(e,t,n){var r=Fne(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Une:$ne,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function dz(e,t,n){var r=oz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kne(e,t){return function(){return dz(this,e,t)}}function Wne(e,t){return function(){return dz(this,e,t.apply(this,arguments))}}function Yne(e,t){return this.each((typeof t=="function"?Wne:Kne)(e,t))}function*Xne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var fz=[null];function mr(e,t){this._groups=e,this._parents=t}function Bd(){return new mr([[document.documentElement]],fz)}function Zne(){return this}mr.prototype=Bd.prototype={constructor:mr,select:Cte,selectAll:Tte,selectChild:Dte,selectChildren:Lte,filter:Pte,data:Hte,enter:Ite,exit:$te,join:Ute,merge:Gte,selection:Zne,order:Kte,sort:Wte,call:Xte,nodes:Zte,node:Jte,size:Qte,empty:ene,each:tne,attr:lne,style:fne,property:gne,classed:xne,text:Ene,html:Ane,raise:_ne,lower:Rne,append:One,insert:Lne,remove:Ine,clone:qne,datum:Vne,on:Gne,dispatch:Yne,[Symbol.iterator]:Xne};function hr(e){return typeof e=="string"?new mr([[document.querySelector(e)]],[document.documentElement]):new mr([[e]],fz)}function Jne(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Jr(e,t){if(e=Jne(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Qne={passive:!1},pd={capture:!0,passive:!1};function sv(e){e.stopImmediatePropagation()}function Kl(e){e.preventDefault(),e.stopImmediatePropagation()}function hz(e){var t=e.document.documentElement,n=hr(e).on("dragstart.drag",Kl,pd);"onselectstart"in t?n.on("selectstart.drag",Kl,pd):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pz(e,t){var n=e.document.documentElement,r=hr(e).on("dragstart.drag",null);t&&(r.on("click.drag",Kl,pd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const bh=e=>()=>e;function zC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}zC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function ere(e){return!e.ctrlKey&&!e.button}function tre(){return this.parentNode}function nre(e,t){return t??{x:e.x,y:e.y}}function rre(){return navigator.maxTouchPoints||"ontouchstart"in this}function mz(){var e=ere,t=tre,n=nre,r=rre,i={},s=_m("start","drag","end"),o=0,l,u,d,h,p=0;function m(T){T.on("mousedown.drag",y).filter(r).on("touchstart.drag",w).on("touchmove.drag",E,Qne).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(T,A){if(!(h||!e.call(this,T,A))){var _=k(this,t.call(this,T,A),T,A,"mouse");_&&(hr(T.view).on("mousemove.drag",x,pd).on("mouseup.drag",S,pd),hz(T.view),sv(T),d=!1,l=T.clientX,u=T.clientY,_("start",T))}}function x(T){if(Kl(T),!d){var A=T.clientX-l,_=T.clientY-u;d=A*A+_*_>p}i.mouse("drag",T)}function S(T){hr(T.view).on("mousemove.drag mouseup.drag",null),pz(T.view,d),Kl(T),i.mouse("end",T)}function w(T,A){if(e.call(this,T,A)){var _=T.changedTouches,O=t.call(this,T,A),D=_.length,P,H;for(P=0;P<D;++P)(H=k(this,O,T,A,_[P].identifier,_[P]))&&(sv(T),H("start",T,_[P]))}}function E(T){var A=T.changedTouches,_=A.length,O,D;for(O=0;O<_;++O)(D=i[A[O].identifier])&&(Kl(T),D("drag",T,A[O]))}function N(T){var A=T.changedTouches,_=A.length,O,D;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),O=0;O<_;++O)(D=i[A[O].identifier])&&(sv(T),D("end",T,A[O]))}function k(T,A,_,O,D,P){var H=s.copy(),V=Jr(P||_,A),L,G,B;if((B=n.call(T,new zC("beforestart",{sourceEvent:_,target:m,identifier:D,active:o,x:V[0],y:V[1],dx:0,dy:0,dispatch:H}),O))!=null)return L=B.x-V[0]||0,G=B.y-V[1]||0,function F(I,q,X){var te=V,z;switch(I){case"start":i[D]=F,z=o++;break;case"end":delete i[D],--o;case"drag":V=Jr(X||q,A),z=o;break}H.call(I,T,new zC(I,{sourceEvent:q,subject:B,target:m,identifier:D,active:z,x:V[0]+L,y:V[1]+G,dx:V[0]-te[0],dy:V[1]-te[1],dispatch:H}),O)}}return m.filter=function(T){return arguments.length?(e=typeof T=="function"?T:bh(!!T),m):e},m.container=function(T){return arguments.length?(t=typeof T=="function"?T:bh(T),m):t},m.subject=function(T){return arguments.length?(n=typeof T=="function"?T:bh(T),m):n},m.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:bh(!!T),m):r},m.on=function(){var T=s.on.apply(s,arguments);return T===s?m:T},m.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,m):Math.sqrt(p)},m}function Tk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zd(){}var md=.7,$p=1/md,Wl="\\s*([+-]?\\d+)\\s*",gd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ire=/^#([0-9a-f]{3,8})$/,sre=new RegExp(`^rgb\\(${Wl},${Wl},${Wl}\\)$`),ore=new RegExp(`^rgb\\(${Ni},${Ni},${Ni}\\)$`),are=new RegExp(`^rgba\\(${Wl},${Wl},${Wl},${gd}\\)$`),lre=new RegExp(`^rgba\\(${Ni},${Ni},${Ni},${gd}\\)$`),cre=new RegExp(`^hsl\\(${gd},${Ni},${Ni}\\)$`),ure=new RegExp(`^hsla\\(${gd},${Ni},${Ni},${gd}\\)$`),HD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tk(zd,Na,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:FD,formatHex:FD,formatHex8:dre,formatHsl:fre,formatRgb:$D,toString:$D});function FD(){return this.rgb().formatHex()}function dre(){return this.rgb().formatHex8()}function fre(){return yz(this).formatHsl()}function $D(){return this.rgb().formatRgb()}function Na(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ire.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?UD(t):n===3?new Wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?xh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?xh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sre.exec(e))?new Wn(t[1],t[2],t[3],1):(t=ore.exec(e))?new Wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=are.exec(e))?xh(t[1],t[2],t[3],t[4]):(t=lre.exec(e))?xh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cre.exec(e))?WD(t[1],t[2]/100,t[3]/100,1):(t=ure.exec(e))?WD(t[1],t[2]/100,t[3]/100,t[4]):HD.hasOwnProperty(e)?UD(HD[e]):e==="transparent"?new Wn(NaN,NaN,NaN,0):null}function UD(e){return new Wn(e>>16&255,e>>8&255,e&255,1)}function xh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Wn(e,t,n,r)}function hre(e){return e instanceof zd||(e=Na(e)),e?(e=e.rgb(),new Wn(e.r,e.g,e.b,e.opacity)):new Wn}function qC(e,t,n,r){return arguments.length===1?hre(e):new Wn(e,t,n,r??1)}function Wn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Tk(Wn,qC,gz(zd,{brighter(e){return e=e==null?$p:Math.pow($p,e),new Wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?md:Math.pow(md,e),new Wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wn(ba(this.r),ba(this.g),ba(this.b),Up(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GD,formatHex:GD,formatHex8:pre,formatRgb:KD,toString:KD}));function GD(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}`}function pre(){return`#${ua(this.r)}${ua(this.g)}${ua(this.b)}${ua((isNaN(this.opacity)?1:this.opacity)*255)}`}function KD(){const e=Up(this.opacity);return`${e===1?"rgb(":"rgba("}${ba(this.r)}, ${ba(this.g)}, ${ba(this.b)}${e===1?")":`, ${e})`}`}function Up(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ba(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ua(e){return e=ba(e),(e<16?"0":"")+e.toString(16)}function WD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ei(e,t,n,r)}function yz(e){if(e instanceof ei)return new ei(e.h,e.s,e.l,e.opacity);if(e instanceof zd||(e=Na(e)),!e)return new ei;if(e instanceof ei)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new ei(o,l,u,e.opacity)}function mre(e,t,n,r){return arguments.length===1?yz(e):new ei(e,t,n,r??1)}function ei(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Tk(ei,mre,gz(zd,{brighter(e){return e=e==null?$p:Math.pow($p,e),new ei(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?md:Math.pow(md,e),new ei(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Wn(ov(e>=240?e-240:e+120,i,r),ov(e,i,r),ov(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ei(YD(this.h),wh(this.s),wh(this.l),Up(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Up(this.opacity);return`${e===1?"hsl(":"hsla("}${YD(this.h)}, ${wh(this.s)*100}%, ${wh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function YD(e){return e=(e||0)%360,e<0?e+360:e}function wh(e){return Math.max(0,Math.min(1,e||0))}function ov(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ak=e=>()=>e;function gre(e,t){return function(n){return e+n*t}}function yre(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function vre(e){return(e=+e)==1?vz:function(t,n){return n-t?yre(t,n,e):Ak(isNaN(t)?n:t)}}function vz(e,t){var n=t-e;return n?gre(e,n):Ak(isNaN(e)?t:e)}const Gp=(function e(t){var n=vre(t);function r(i,s){var o=n((i=qC(i)).r,(s=qC(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=vz(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function bre(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function xre(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wre(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ku(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function Sre(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Cre(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Ku(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var VC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,av=new RegExp(VC.source,"g");function Ere(e){return function(){return e}}function kre(e){return function(t){return e(t)+""}}function bz(e,t){var n=VC.lastIndex=av.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=VC.exec(e))&&(i=av.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:wi(r,i)})),n=av.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?kre(u[0].x):Ere(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Ku(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ak(t):(n==="number"?wi:n==="string"?(r=Na(t))?(t=r,Gp):bz:t instanceof Na?Gp:t instanceof Date?Sre:xre(t)?bre:Array.isArray(t)?wre:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cre:wi)(e,t)}var XD=180/Math.PI,HC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xz(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*XD,skewX:Math.atan(u)*XD,scaleX:o,scaleY:l}}var Sh;function Nre(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?HC:xz(t.a,t.b,t.c,t.d,t.e,t.f)}function Tre(e){return e==null||(Sh||(Sh=document.createElementNS("http://www.w3.org/2000/svg","g")),Sh.setAttribute("transform",e),!(e=Sh.transform.baseVal.consolidate()))?HC:(e=e.matrix,xz(e.a,e.b,e.c,e.d,e.e,e.f))}function wz(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,m,y,x){if(d!==p||h!==m){var S=y.push("translate(",null,t,null,n);x.push({i:S-4,x:wi(d,p)},{i:S-2,x:wi(h,m)})}else(p||m)&&y.push("translate("+p+t+m+n)}function o(d,h,p,m){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:wi(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,m){d!==h?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:wi(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,m,y,x){if(d!==p||h!==m){var S=y.push(i(y)+"scale(",null,",",null,")");x.push({i:S-4,x:wi(d,p)},{i:S-2,x:wi(h,m)})}else(p!==1||m!==1)&&y.push(i(y)+"scale("+p+","+m+")")}return function(d,h){var p=[],m=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,m),o(d.rotate,h.rotate,p,m),l(d.skewX,h.skewX,p,m),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,m),d=h=null,function(y){for(var x=-1,S=m.length,w;++x<S;)p[(w=m[x]).i]=w.x(y);return p.join("")}}}var Are=wz(Nre,"px, ","px)","deg)"),Mre=wz(Tre,", ",")",")"),_re=1e-12;function ZD(e){return((e=Math.exp(e))+1/e)/2}function Dre(e){return((e=Math.exp(e))-1/e)/2}function Rre(e){return((e=Math.exp(2*e))-1)/(e+1)}const Vh=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],m=o[2],y=h-l,x=p-u,S=y*y+x*x,w,E;if(S<_re)E=Math.log(m/d)/t,w=function(O){return[l+O*y,u+O*x,d*Math.exp(t*O*E)]};else{var N=Math.sqrt(S),k=(m*m-d*d+r*S)/(2*d*n*N),T=(m*m-d*d-r*S)/(2*m*n*N),A=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(T*T+1)-T);E=(_-A)/t,w=function(O){var D=O*E,P=ZD(A),H=d/(n*N)*(P*Rre(t*D+A)-Dre(A));return[l+H*y,u+H*x,d*P/ZD(t*D+A)]}}return w.duration=E*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var ic=0,Nu=0,yu=0,Sz=1e3,Kp,Tu,Wp=0,Ta=0,Rm=0,yd=typeof performance=="object"&&performance.now?performance:Date,Cz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Mk(){return Ta||(Cz(Ore),Ta=yd.now()+Rm)}function Ore(){Ta=0}function Yp(){this._call=this._time=this._next=null}Yp.prototype=Ez.prototype={constructor:Yp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Mk():+n)+(t==null?0:+t),!this._next&&Tu!==this&&(Tu?Tu._next=this:Kp=this,Tu=this),this._call=e,this._time=n,FC()},stop:function(){this._call&&(this._call=null,this._time=1/0,FC())}};function Ez(e,t,n){var r=new Yp;return r.restart(e,t,n),r}function jre(){Mk(),++ic;for(var e=Kp,t;e;)(t=Ta-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ic}function JD(){Ta=(Wp=yd.now())+Rm,ic=Nu=0;try{jre()}finally{ic=0,Pre(),Ta=0}}function Lre(){var e=yd.now(),t=e-Wp;t>Sz&&(Rm-=t,Wp=e)}function Pre(){for(var e,t=Kp,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Kp=n);Tu=e,FC(r)}function FC(e){if(!ic){Nu&&(Nu=clearTimeout(Nu));var t=e-Ta;t>24?(e<1/0&&(Nu=setTimeout(JD,e-yd.now()-Rm)),yu&&(yu=clearInterval(yu))):(yu||(Wp=yd.now(),yu=setInterval(Lre,Sz)),ic=1,Cz(JD))}}function QD(e,t,n){var r=new Yp;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ire=_m("start","end","cancel","interrupt"),Bre=[],kz=0,eR=1,$C=2,Hh=3,tR=4,UC=5,Fh=6;function Om(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;zre(e,n,{name:t,index:r,group:i,on:Ire,tween:Bre,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:kz})}function _k(e,t){var n=ii(e,t);if(n.state>kz)throw new Error("too late; already scheduled");return n}function _i(e,t){var n=ii(e,t);if(n.state>Hh)throw new Error("too late; already running");return n}function ii(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function zre(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ez(s,0,n.time);function s(d){n.state=eR,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,m,y;if(n.state!==eR)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===Hh)return QD(o);y.state===tR?(y.state=Fh,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=Fh,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(QD(function(){n.state===Hh&&(n.state=tR,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=$C,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$C){for(n.state=Hh,i=new Array(m=n.tween.length),h=0,p=-1;h<m;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=UC,1),p=-1,m=i.length;++p<m;)i[p].call(e,h);n.state===UC&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Fh,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function $h(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>$C&&r.state<UC,r.state=Fh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function qre(e){return this.each(function(){$h(this,e)})}function Vre(e,t){var n,r;return function(){var i=_i(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Hre(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=_i(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function Fre(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ii(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Vre:Hre)(n,e,t))}function Dk(e,t,n){var r=e._id;return e.each(function(){var i=_i(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return ii(i,r).value[t]}}function Nz(e,t){var n;return(typeof t=="number"?wi:t instanceof Na?Gp:(n=Na(t))?(t=n,Gp):bz)(e,t)}function $re(e){return function(){this.removeAttribute(e)}}function Ure(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Kre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Wre(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Yre(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Xre(e,t){var n=Dm(e),r=n==="transform"?Mre:Nz;return this.attrTween(e,typeof t=="function"?(n.local?Yre:Wre)(n,r,Dk(this,"attr."+e,t)):t==null?(n.local?Ure:$re)(n):(n.local?Kre:Gre)(n,r,t))}function Zre(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Jre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Qre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Jre(e,s)),n}return i._value=t,i}function eie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Zre(e,s)),n}return i._value=t,i}function tie(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Dm(e);return this.tween(n,(r.local?Qre:eie)(r,t))}function nie(e,t){return function(){_k(this,e).delay=+t.apply(this,arguments)}}function rie(e,t){return t=+t,function(){_k(this,e).delay=t}}function iie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nie:rie)(t,e)):ii(this.node(),t).delay}function sie(e,t){return function(){_i(this,e).duration=+t.apply(this,arguments)}}function oie(e,t){return t=+t,function(){_i(this,e).duration=t}}function aie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sie:oie)(t,e)):ii(this.node(),t).duration}function lie(e,t){if(typeof t!="function")throw new Error;return function(){_i(this,e).ease=t}}function cie(e){var t=this._id;return arguments.length?this.each(lie(t,e)):ii(this.node(),t).ease}function uie(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_i(this,e).ease=n}}function die(e){if(typeof e!="function")throw new Error;return this.each(uie(this._id,e))}function fie(e){typeof e!="function"&&(e=rz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new fs(r,this._parents,this._name,this._id)}function hie(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),m,y=0;y<h;++y)(m=u[y]||d[y])&&(p[y]=m);for(;l<r;++l)o[l]=t[l];return new fs(o,this._parents,this._name,this._id)}function pie(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function mie(e,t,n){var r,i,s=pie(t)?_k:_i;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function gie(e,t){var n=this._id;return arguments.length<2?ii(this.node(),n).on.on(e):this.each(mie(n,e,t))}function yie(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function vie(){return this.on("end.remove",yie(this._id))}function bie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kk(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,m=0;m<u;++m)(h=l[m])&&(p=e.call(h,h.__data__,m,l))&&("__data__"in h&&(p.__data__=h.__data__),d[m]=p,Om(d[m],t,n,m,d,ii(h,n)));return new fs(s,this._parents,t,n)}function xie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nz(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var m=e.call(h,h.__data__,p,u),y,x=ii(h,n),S=0,w=m.length;S<w;++S)(y=m[S])&&Om(y,t,n,S,m,x);s.push(m),o.push(h)}return new fs(s,o,t,n)}var wie=Bd.prototype.constructor;function Sie(){return new wie(this._groups,this._parents)}function Cie(e,t){var n,r,i;return function(){var s=rc(this,e),o=(this.style.removeProperty(e),rc(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Tz(e){return function(){this.style.removeProperty(e)}}function Eie(e,t,n){var r,i=n+"",s;return function(){var o=rc(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function kie(e,t,n){var r,i,s;return function(){var o=rc(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),rc(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function Nie(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=_i(this,e),d=u.on,h=u.value[s]==null?l||(l=Tz(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function Tie(e,t,n){var r=(e+="")=="transform"?Are:Nz;return t==null?this.styleTween(e,Cie(e,r)).on("end.style."+e,Tz(e)):typeof t=="function"?this.styleTween(e,kie(e,r,Dk(this,"style."+e,t))).each(Nie(this._id,e)):this.styleTween(e,Eie(e,r,t),n).on("end.style."+e,null)}function Aie(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Mie(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Aie(e,o,n)),r}return s._value=t,s}function _ie(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Mie(e,t,n??""))}function Die(e){return function(){this.textContent=e}}function Rie(e){return function(){var t=e(this);this.textContent=t??""}}function Oie(e){return this.tween("text",typeof e=="function"?Rie(Dk(this,"text",e)):Die(e==null?"":e+""))}function jie(e){return function(t){this.textContent=e.call(this,t)}}function Lie(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&jie(i)),t}return r._value=e,r}function Pie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Lie(e))}function Iie(){for(var e=this._name,t=this._id,n=Az(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=ii(u,t);Om(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new fs(r,this._parents,e,n)}function Bie(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=_i(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var zie=0;function fs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Az(){return++zie}var ts=Bd.prototype;fs.prototype={constructor:fs,select:bie,selectAll:xie,selectChild:ts.selectChild,selectChildren:ts.selectChildren,filter:fie,merge:hie,selection:Sie,transition:Iie,call:ts.call,nodes:ts.nodes,node:ts.node,size:ts.size,empty:ts.empty,each:ts.each,on:gie,attr:Xre,attrTween:tie,style:Tie,styleTween:_ie,text:Oie,textTween:Pie,remove:vie,tween:Fre,delay:iie,duration:aie,ease:cie,easeVarying:die,end:Bie,[Symbol.iterator]:ts[Symbol.iterator]};function qie(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Vie={time:null,delay:0,duration:250,ease:qie};function Hie(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Fie(e){var t,n;e instanceof fs?(t=e._id,e=e._name):(t=Az(),(n=Vie).time=Mk(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&Om(u,e,t,d,o,n||Hie(u,t));return new fs(r,this._parents,e,t)}Bd.prototype.interrupt=qre;Bd.prototype.transition=Fie;const Ch=e=>()=>e;function $ie(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ss(e,t,n){this.k=e,this.x=t,this.y=n}ss.prototype={constructor:ss,scale:function(e){return e===1?this:new ss(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ss(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jm=new ss(1,0,0);Mz.prototype=ss.prototype;function Mz(e){for(;!e.__zoom;)if(!(e=e.parentNode))return jm;return e.__zoom}function lv(e){e.stopImmediatePropagation()}function vu(e){e.preventDefault(),e.stopImmediatePropagation()}function Uie(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Gie(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function nR(){return this.__zoom||jm}function Kie(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Wie(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yie(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function _z(){var e=Uie,t=Gie,n=Yie,r=Kie,i=Wie,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Vh,d=_m("start","zoom","end"),h,p,m,y=500,x=150,S=0,w=10;function E(B){B.property("__zoom",nR).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",H).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(B,F,I,q){var X=B.selection?B.selection():B;X.property("__zoom",nR),B!==X?A(B,F,I,q):X.interrupt().each(function(){_(this,arguments).event(q).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},E.scaleBy=function(B,F,I,q){E.scaleTo(B,function(){var X=this.__zoom.k,te=typeof F=="function"?F.apply(this,arguments):F;return X*te},I,q)},E.scaleTo=function(B,F,I,q){E.transform(B,function(){var X=t.apply(this,arguments),te=this.__zoom,z=I==null?T(X):typeof I=="function"?I.apply(this,arguments):I,K=te.invert(z),ie=typeof F=="function"?F.apply(this,arguments):F;return n(k(N(te,ie),z,K),X,o)},I,q)},E.translateBy=function(B,F,I,q){E.transform(B,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),o)},null,q)},E.translateTo=function(B,F,I,q,X){E.transform(B,function(){var te=t.apply(this,arguments),z=this.__zoom,K=q==null?T(te):typeof q=="function"?q.apply(this,arguments):q;return n(jm.translate(K[0],K[1]).scale(z.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof I=="function"?-I.apply(this,arguments):-I),te,o)},q,X)};function N(B,F){return F=Math.max(s[0],Math.min(s[1],F)),F===B.k?B:new ss(F,B.x,B.y)}function k(B,F,I){var q=F[0]-I[0]*B.k,X=F[1]-I[1]*B.k;return q===B.x&&X===B.y?B:new ss(B.k,q,X)}function T(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function A(B,F,I,q){B.on("start.zoom",function(){_(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(q).end()}).tween("zoom",function(){var X=this,te=arguments,z=_(X,te).event(q),K=t.apply(X,te),ie=I==null?T(K):typeof I=="function"?I.apply(X,te):I,ue=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),$=X.__zoom,J=typeof F=="function"?F.apply(X,te):F,ee=u($.invert(ie).concat(ue/$.k),J.invert(ie).concat(ue/J.k));return function(ce){if(ce===1)ce=J;else{var le=ee(ce),ye=ue/le[2];ce=new ss(ye,ie[0]-le[0]*ye,ie[1]-le[1]*ye)}z.zoom(null,ce)}})}function _(B,F,I){return!I&&B.__zooming||new O(B,F)}function O(B,F){this.that=B,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,F),this.taps=0}O.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,F){return this.mouse&&B!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var F=hr(this.that).datum();d.call(B,this.that,new $ie(B,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),F)}};function D(B,...F){if(!e.apply(this,arguments))return;var I=_(this,F).event(B),q=this.__zoom,X=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),te=Jr(B);if(I.wheel)(I.mouse[0][0]!==te[0]||I.mouse[0][1]!==te[1])&&(I.mouse[1]=q.invert(I.mouse[0]=te)),clearTimeout(I.wheel);else{if(q.k===X)return;I.mouse=[te,q.invert(te)],$h(this),I.start()}vu(B),I.wheel=setTimeout(z,x),I.zoom("mouse",n(k(N(q,X),I.mouse[0],I.mouse[1]),I.extent,o));function z(){I.wheel=null,I.end()}}function P(B,...F){if(m||!e.apply(this,arguments))return;var I=B.currentTarget,q=_(this,F,!0).event(B),X=hr(B.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",ue,!0),te=Jr(B,I),z=B.clientX,K=B.clientY;hz(B.view),lv(B),q.mouse=[te,this.__zoom.invert(te)],$h(this),q.start();function ie($){if(vu($),!q.moved){var J=$.clientX-z,ee=$.clientY-K;q.moved=J*J+ee*ee>S}q.event($).zoom("mouse",n(k(q.that.__zoom,q.mouse[0]=Jr($,I),q.mouse[1]),q.extent,o))}function ue($){X.on("mousemove.zoom mouseup.zoom",null),pz($.view,q.moved),vu($),q.event($).end()}}function H(B,...F){if(e.apply(this,arguments)){var I=this.__zoom,q=Jr(B.changedTouches?B.changedTouches[0]:B,this),X=I.invert(q),te=I.k*(B.shiftKey?.5:2),z=n(k(N(I,te),q,X),t.apply(this,F),o);vu(B),l>0?hr(this).transition().duration(l).call(A,z,q,B):hr(this).call(E.transform,z,q,B)}}function V(B,...F){if(e.apply(this,arguments)){var I=B.touches,q=I.length,X=_(this,F,B.changedTouches.length===q).event(B),te,z,K,ie;for(lv(B),z=0;z<q;++z)K=I[z],ie=Jr(K,this),ie=[ie,this.__zoom.invert(ie),K.identifier],X.touch0?!X.touch1&&X.touch0[2]!==ie[2]&&(X.touch1=ie,X.taps=0):(X.touch0=ie,te=!0,X.taps=1+!!h);h&&(h=clearTimeout(h)),te&&(X.taps<2&&(p=ie[0],h=setTimeout(function(){h=null},y)),$h(this),X.start())}}function L(B,...F){if(this.__zooming){var I=_(this,F).event(B),q=B.changedTouches,X=q.length,te,z,K,ie;for(vu(B),te=0;te<X;++te)z=q[te],K=Jr(z,this),I.touch0&&I.touch0[2]===z.identifier?I.touch0[0]=K:I.touch1&&I.touch1[2]===z.identifier&&(I.touch1[0]=K);if(z=I.that.__zoom,I.touch1){var ue=I.touch0[0],$=I.touch0[1],J=I.touch1[0],ee=I.touch1[1],ce=(ce=J[0]-ue[0])*ce+(ce=J[1]-ue[1])*ce,le=(le=ee[0]-$[0])*le+(le=ee[1]-$[1])*le;z=N(z,Math.sqrt(ce/le)),K=[(ue[0]+J[0])/2,(ue[1]+J[1])/2],ie=[($[0]+ee[0])/2,($[1]+ee[1])/2]}else if(I.touch0)K=I.touch0[0],ie=I.touch0[1];else return;I.zoom("touch",n(k(z,K,ie),I.extent,o))}}function G(B,...F){if(this.__zooming){var I=_(this,F).event(B),q=B.changedTouches,X=q.length,te,z;for(lv(B),m&&clearTimeout(m),m=setTimeout(function(){m=null},y),te=0;te<X;++te)z=q[te],I.touch0&&I.touch0[2]===z.identifier?delete I.touch0:I.touch1&&I.touch1[2]===z.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(z=Jr(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<w)){var K=hr(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return E.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:Ch(+B),E):r},E.filter=function(B){return arguments.length?(e=typeof B=="function"?B:Ch(!!B),E):e},E.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:Ch(!!B),E):i},E.extent=function(B){return arguments.length?(t=typeof B=="function"?B:Ch([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),E):t},E.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],E):[s[0],s[1]]},E.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(B){return arguments.length?(n=B,E):n},E.duration=function(B){return arguments.length?(l=+B,E):l},E.interpolate=function(B){return arguments.length?(u=B,E):u},E.on=function(){var B=d.on.apply(d,arguments);return B===d?E:B},E.clickDistance=function(B){return arguments.length?(S=(B=+B)*B,E):Math.sqrt(S)},E.tapDistance=function(B){return arguments.length?(w=+B,E):w},E}const Mi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},vd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Dz=["Enter"," ","Escape"],Rz={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Aa;(function(e){e.Strict="strict",e.Loose="loose"})(Aa||(Aa={}));var xa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xa||(xa={}));var bd;(function(e){e.Partial="partial",e.Full="full"})(bd||(bd={}));const Oz={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var io;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(io||(io={}));var Xp;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Xp||(Xp={}));var Te;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Te||(Te={}));const rR={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top};function jz(e){return e===null?null:e?"valid":"invalid"}const Lz=e=>"id"in e&&"source"in e&&"target"in e,Xie=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Rk=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),qd=(e,t=[0,0])=>{const{width:n,height:r}=ps(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},Pz=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):Rk(i)?i:t.nodeLookup.get(i.id));const l=o?Zp(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Lm(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Pm(n)},Vd=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Zp(r);n=Lm(n,i)}}),Pm(n)},Ok=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Fd(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:m=!1}=d;if(o&&!p||m)continue;const y=h.width??d.width??d.initialWidth??null,x=h.height??d.height??d.initialHeight??null,S=xd(l,oc(d)),w=(y??0)*(x??0),E=s&&S>0;(!d.internals.handleBounds||E||S>=w||d.dragging)&&u.push(d)}return u},Zie=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Jie(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Qie({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Jie(e,o),u=Vd(l),d=Im(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function Iz({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",Mi.error005());else{const y=l.measured.width,x=l.measured.height;y&&x&&(p=[[u,d],[u+y,d+x]])}else l&&ac(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const m=ac(p)?Ma(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",Mi.error015()),{position:{x:m.x-u+(o.measured.width??0)*h[0],y:m.y-d+(o.measured.height??0)*h[1]},positionAbsolute:m}}async function ese({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(m=>m.id)),o=[];for(const m of n){if(m.deletable===!1)continue;const y=s.has(m.id),x=!y&&m.parentId&&o.find(S=>S.id===m.parentId);(y||x)&&o.push(m)}const l=new Set(t.map(m=>m.id)),u=r.filter(m=>m.deletable!==!1),h=Zie(o,u);for(const m of u)l.has(m.id)&&!h.find(x=>x.id===m.id)&&h.push(m);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const sc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ma=(e={x:0,y:0},t,n)=>({x:sc(e.x,t[0][0],t[1][0]-(n?.width??0)),y:sc(e.y,t[0][1],t[1][1]-(n?.height??0))});function Bz(e,t,n){const{width:r,height:i}=ps(n),{x:s,y:o}=n.internals.positionAbsolute;return Ma(e,[[s,o],[s+r,o+i]],t)}const iR=(e,t,n)=>e<t?sc(Math.abs(e-t),1,t)/t:e>n?-sc(Math.abs(e-n),1,t)/t:0,zz=(e,t,n=15,r=40)=>{const i=iR(e.x,r,t.width-r)*n,s=iR(e.y,r,t.height-r)*n;return[i,s]},Lm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),GC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Pm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),oc=(e,t=[0,0])=>{const{x:n,y:r}=Rk(e)?e.internals.positionAbsolute:qd(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Zp=(e,t=[0,0])=>{const{x:n,y:r}=Rk(e)?e.internals.positionAbsolute:qd(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},qz=(e,t)=>Pm(Lm(GC(e),GC(t))),xd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},sR=e=>ni(e.width)&&ni(e.height)&&ni(e.x)&&ni(e.y),ni=e=>!isNaN(e)&&isFinite(e),tse=(e,t)=>{},Hd=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Fd=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?Hd(l,o):l},Jp=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Ml(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nse(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Ml(e,n),i=Ml(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Ml(e.top??e.y??0,n),i=Ml(e.bottom??e.y??0,n),s=Ml(e.left??e.x??0,t),o=Ml(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function rse(e,t,n,r,i,s){const{x:o,y:l}=Jp(e,[t,n,r]),{x:u,y:d}=Jp({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const Im=(e,t,n,r,i,s)=>{const o=nse(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=sc(d,r,i),p=e.x+e.width/2,m=e.y+e.height/2,y=t/2-p*h,x=n/2-m*h,S=rse(e,y,x,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:y-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},wd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ac(e){return e!=null&&e!=="parent"}function ps(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Vz(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Hz(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function oR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ise(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function sse(e){return{...Rz,...e||{}}}function Wu(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Ci(e),l=Fd({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Hd(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const jk=e=>({width:e.offsetWidth,height:e.offsetHeight}),Fz=e=>e?.getRootNode?.()||window?.document,ose=["INPUT","SELECT","TEXTAREA"];function $z(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:ose.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Uz=e=>"clientX"in e,Ci=(e,t)=>{const n=Uz(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},aR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...jk(o)}})};function Gz({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function Eh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function lR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Te.Left:return[t-Eh(t-r,s),n];case Te.Right:return[t+Eh(r-t,s),n];case Te.Top:return[t,n-Eh(n-i,s)];case Te.Bottom:return[t,n+Eh(i-n,s)]}}function Lk({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top,curvature:o=.25}){const[l,u]=lR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=lR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,m,y,x]=Gz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,m,y,x]}function Pk({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function ase({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function lse({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=Lm(Zp(e),Zp(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return xd(o,Pm(s))>0}const cse=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,use=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Kz=(e,t)=>{if(!e.source||!e.target)return t;let n;return Lz(e)?n={...e}:n={...e,id:cse(e)},use(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Wz({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=Pk({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const cR={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},dse=({source:e,sourcePosition:t=Te.Bottom,target:n})=>t===Te.Left||t===Te.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},uR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function fse({source:e,sourcePosition:t=Te.Bottom,target:n,targetPosition:r=Te.Top,center:i,offset:s,stepPosition:o}){const l=cR[t],u=cR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=dse({source:d,sourcePosition:t,target:h}),m=p.x!==0?"x":"y",y=p[m];let x=[],S,w;const E={x:0,y:0},N={x:0,y:0},[,,k,T]=Pk({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[m]*u[m]===-1){m==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const _=[{x:S,y:d.y},{x:S,y:h.y}],O=[{x:d.x,y:w},{x:h.x,y:w}];l[m]===y?x=m==="x"?_:O:x=m==="x"?O:_}else{const _=[{x:d.x,y:h.y}],O=[{x:h.x,y:d.y}];if(m==="x"?x=l.x===y?O:_:x=l.y===y?_:O,t===r){const L=Math.abs(e[m]-n[m]);if(L<=s){const G=Math.min(s-1,s-L);l[m]===y?E[m]=(d[m]>e[m]?-1:1)*G:N[m]=(h[m]>n[m]?-1:1)*G}}if(t!==r){const L=m==="x"?"y":"x",G=l[m]===u[L],B=d[L]>h[L],F=d[L]<h[L];(l[m]===1&&(!G&&B||G&&F)||l[m]!==1&&(!G&&F||G&&B))&&(x=m==="x"?_:O)}const D={x:d.x+E.x,y:d.y+E.y},P={x:h.x+N.x,y:h.y+N.y},H=Math.max(Math.abs(D.x-x[0].x),Math.abs(P.x-x[0].x)),V=Math.max(Math.abs(D.y-x[0].y),Math.abs(P.y-x[0].y));H>=V?(S=(D.x+P.x)/2,w=x[0].y):(S=x[0].x,w=(D.y+P.y)/2)}return[[e,{x:d.x+E.x,y:d.y+E.y},...x,{x:h.x+N.x,y:h.y+N.y},n],S,w,k,T]}function hse(e,t,n,r){const i=Math.min(uR(e,t)/2,uR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function KC({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,m,y,x,S]=fse({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((E,N,k)=>{let T="";return k>0&&k<p.length-1?T=hse(p[k-1],N,p[k+1],o):T=`${k===0?"M":"L"}${N.x} ${N.y}`,E+=T,E},""),m,y,x,S]}function dR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function pse(e){const{sourceNode:t,targetNode:n}=e;if(!dR(t)||!dR(n))return null;const r=t.internals.handleBounds||fR(t.handles),i=n.internals.handleBounds||fR(n.handles),s=hR(r?.source??[],e.sourceHandle),o=hR(e.connectionMode===Aa.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",Mi.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Te.Bottom,u=o?.position||Te.Top,d=Sd(t,s,l),h=Sd(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function fR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Sd(e,t,n=Te.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??ps(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Te.Top:return{x:i+o/2,y:s};case Te.Right:return{x:i+o,y:s+l/2};case Te.Bottom:return{x:i+o/2,y:s+l};case Te.Left:return{x:i,y:s+l/2}}}function hR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function WC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function mse(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=WC(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const Ik={nodeOrigin:[0,0],nodeExtent:vd,elevateNodesOnSelect:!0,defaults:{}},gse={...Ik,checkEquality:!0};function Bk(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function yse(e,t,n){const r=Bk(Ik,n);for(const i of e.values())if(i.parentId)zk(i,e,t,r);else{const s=qd(i,r.nodeOrigin),o=ac(i.extent)?i.extent:r.nodeExtent,l=Ma(s,o,ps(i));i.internals.positionAbsolute=l}}function YC(e,t,n,r){const i=Bk(gse,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=qd(u,i.nodeOrigin),p=ac(u.extent)?u.extent:i.nodeExtent,m=Ma(h,p,ps(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:m,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:Yz(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&zk(d,t,n,r)}return s}function vse(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function zk(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=Bk(Ik,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}vse(e,n);const d=i?1e3:0,{x:h,y:p,z:m}=bse(e,u,s,o,d),{positionAbsolute:y}=e.internals,x=h!==y.x||p!==y.y;(x||m!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:p}:y,z:m}})}function Yz(e,t){return(ni(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function bse(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=ps(e),u=qd(e,n),d=ac(e.extent)?Ma(u,e.extent,l):u;let h=Ma({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=Bz(h,l,t));const p=Yz(e,i),m=t.internals.z??0;return{x:h.x,y:h.y,z:m>=p?m+1:p}}function qk(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??oc(l),d=qz(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=ps(l),p=l.origin??r,m=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,y=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(x-h.width)*p[0],E=(S-h.height)*p[1];(m>0||y>0||w||E)&&(i.push({id:u,type:"position",position:{x:l.position.x-m+w,y:l.position.y-y+E}}),n.get(u)?.forEach(N=>{e.some(k=>k.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+m,y:N.position.y+y}})})),(h.width<o.width||h.height<o.height||m||y)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(m?p[0]*m-w:0),height:S+(y?p[1]*y-E:0)}})}),i}function xse(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const m of e.values()){const y=t.get(m.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const x=jk(m.nodeElement),S=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!y.internals.handleBounds||m.force))){const E=m.nodeElement.getBoundingClientRect(),N=ac(y.extent)?y.extent:s;let{positionAbsolute:k}=y.internals;y.parentId&&y.extent==="parent"?k=Bz(k,x,t.get(y.parentId)):N&&(k=Ma(k,N,x));const T={...y,measured:x,internals:{...y.internals,positionAbsolute:k,handleBounds:{source:aR("source",m.nodeElement,E,h,y.id),target:aR("target",m.nodeElement,E,h,y.id)}}};t.set(y.id,T),y.parentId&&zk(T,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&p.push({id:y.id,parentId:y.parentId,rect:oc(T,i)}))}}if(p.length>0){const m=qk(p,t,n,i);u.push(...m)}return{changes:u,updatedInternals:l}}async function wse({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function pR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function Xz(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;pR("source",u,h,e,i,o),pR("target",u,d,e,s,l),t.set(r.id,r)}}function Zz(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Zz(n,t):!1}function mR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Sse(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!Zz(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function cv({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function Cse({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Hd(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Ese({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,m=null,y=!1,x=!1,S=null;function w({noDragClassName:N,handleSelector:k,domNode:T,isSelectable:A,nodeId:_,nodeClickDistance:O=0}){m=hr(T);function D({x:L,y:G}){const{nodeLookup:B,nodeExtent:F,snapGrid:I,snapToGrid:q,nodeOrigin:X,onNodeDrag:te,onSelectionDrag:z,onError:K,updateNodePositions:ie}=t();s={x:L,y:G};let ue=!1;const $=l.size>1,J=$&&F?GC(Vd(l)):null,ee=$&&q?Cse({dragItems:l,snapGrid:I,x:L,y:G}):null;for(const[ce,le]of l){if(!B.has(ce))continue;let ye={x:L-le.distance.x,y:G-le.distance.y};q&&(ye=ee?{x:Math.round(ye.x+ee.x),y:Math.round(ye.y+ee.y)}:Hd(ye,I));let Ne=null;if($&&F&&!le.extent&&J){const{positionAbsolute:we}=le.internals,be=we.x-J.x+F[0][0],ke=we.x+le.measured.width-J.x2+F[1][0],rt=we.y-J.y+F[0][1],Ae=we.y+le.measured.height-J.y2+F[1][1];Ne=[[be,rt],[ke,Ae]]}const{position:Oe,positionAbsolute:Ce}=Iz({nodeId:ce,nextPosition:ye,nodeLookup:B,nodeExtent:Ne||F,nodeOrigin:X,onError:K});ue=ue||le.position.x!==Oe.x||le.position.y!==Oe.y,le.position=Oe,le.internals.positionAbsolute=Ce}if(x=x||ue,!!ue&&(ie(l,!0),S&&(r||te||!_&&z))){const[ce,le]=cv({nodeId:_,dragItems:l,nodeLookup:B});r?.(S,l,ce,le),te?.(S,ce,le),_||z?.(S,le)}}async function P(){if(!h)return;const{transform:L,panBy:G,autoPanSpeed:B,autoPanOnNodeDrag:F}=t();if(!F){u=!1,cancelAnimationFrame(o);return}const[I,q]=zz(d,h,B);(I!==0||q!==0)&&(s.x=(s.x??0)-I/L[2],s.y=(s.y??0)-q/L[2],await G({x:I,y:q})&&D(s)),o=requestAnimationFrame(P)}function H(L){const{nodeLookup:G,multiSelectionActive:B,nodesDraggable:F,transform:I,snapGrid:q,snapToGrid:X,selectNodesOnDrag:te,onNodeDragStart:z,onSelectionDragStart:K,unselectNodesAndEdges:ie}=t();p=!0,(!te||!A)&&!B&&_&&(G.get(_)?.selected||ie()),A&&te&&_&&e?.(_);const ue=Wu(L.sourceEvent,{transform:I,snapGrid:q,snapToGrid:X,containerBounds:h});if(s=ue,l=Sse(G,F,ue,_),l.size>0&&(n||z||!_&&K)){const[$,J]=cv({nodeId:_,dragItems:l,nodeLookup:G});n?.(L.sourceEvent,l,$,J),z?.(L.sourceEvent,$,J),_||K?.(L.sourceEvent,J)}}const V=mz().clickDistance(O).on("start",L=>{const{domNode:G,nodeDragThreshold:B,transform:F,snapGrid:I,snapToGrid:q}=t();h=G?.getBoundingClientRect()||null,y=!1,x=!1,S=L.sourceEvent,B===0&&H(L),s=Wu(L.sourceEvent,{transform:F,snapGrid:I,snapToGrid:q,containerBounds:h}),d=Ci(L.sourceEvent,h)}).on("drag",L=>{const{autoPanOnNodeDrag:G,transform:B,snapGrid:F,snapToGrid:I,nodeDragThreshold:q,nodeLookup:X}=t(),te=Wu(L.sourceEvent,{transform:B,snapGrid:F,snapToGrid:I,containerBounds:h});if(S=L.sourceEvent,(L.sourceEvent.type==="touchmove"&&L.sourceEvent.touches.length>1||_&&!X.has(_))&&(y=!0),!y){if(!u&&G&&p&&(u=!0,P()),!p){const z=te.xSnapped-(s.x??0),K=te.ySnapped-(s.y??0);Math.sqrt(z*z+K*K)>q&&H(L)}(s.x!==te.xSnapped||s.y!==te.ySnapped)&&l&&p&&(d=Ci(L.sourceEvent,h),D(te))}}).on("end",L=>{if(!(!p||y)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:G,updateNodePositions:B,onNodeDragStop:F,onSelectionDragStop:I}=t();if(x&&(B(l,!1),x=!1),i||F||!_&&I){const[q,X]=cv({nodeId:_,dragItems:l,nodeLookup:G,dragging:!1});i?.(L.sourceEvent,l,q,X),F?.(L.sourceEvent,q,X),_||I?.(L.sourceEvent,X)}}}).filter(L=>{const G=L.target;return!L.button&&(!N||!mR(G,`.${N}`,T))&&(!k||mR(G,k,T))});m.call(V)}function E(){m?.on(".drag",null)}return{update:w,destroy:E}}function kse(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())xd(i,oc(s))>0&&r.push(s);return r}const Nse=250;function Tse(e,t,n,r){let i=[],s=1/0;const o=kse(e,n,t+Nse);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=Sd(l,d,d.position,!0),m=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));m>t||(m<s?(i=[{...d,x:h,y:p}],s=m):m===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function Jz(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...Sd(o,u,u.position,!0)}:u}function Qz(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Ase(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const eq=()=>!0;function Mse(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:m,cancelConnection:y,onConnectStart:x,onConnect:S,onConnectEnd:w,isValidConnection:E=eq,onReconnectEnd:N,updateConnection:k,getTransform:T,getFromHandle:A,autoPanSpeed:_,dragThreshold:O=1,handleDomNode:D}){const P=Fz(e.target);let H=0,V;const{x:L,y:G}=Ci(e),B=Qz(s,D),F=l?.getBoundingClientRect();let I=!1;if(!F||!B)return;const q=Jz(i,B,r,u,t);if(!q)return;let X=Ci(e,F),te=!1,z=null,K=!1,ie=null;function ue(){if(!h||!F)return;const[Oe,Ce]=zz(X,F,_);m({x:Oe,y:Ce}),H=requestAnimationFrame(ue)}const $={...q,nodeId:i,type:B,position:q.position},J=u.get(i);let ce={inProgress:!0,isValid:null,from:Sd(J,$,Te.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:J,to:X,toHandle:null,toPosition:rR[$.position],toNode:null};function le(){I=!0,k(ce),x?.(e,{nodeId:i,handleId:r,handleType:B})}O===0&&le();function ye(Oe){if(!I){const{x:ke,y:rt}=Ci(Oe),Ae=ke-L,Jt=rt-G;if(!(Ae*Ae+Jt*Jt>O*O))return;le()}if(!A()||!$){Ne(Oe);return}const Ce=T();X=Ci(Oe,F),V=Tse(Fd(X,Ce,!1,[1,1]),n,u,$),te||(ue(),te=!0);const we=tq(Oe,{handle:V,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:E,doc:P,lib:d,flowId:p,nodeLookup:u});ie=we.handleDomNode,z=we.connection,K=Ase(!!V,we.isValid);const be={...ce,isValid:K,to:we.toHandle&&K?Jp({x:we.toHandle.x,y:we.toHandle.y},Ce):X,toHandle:we.toHandle,toPosition:K&&we.toHandle?we.toHandle.position:rR[$.position],toNode:we.toHandle?u.get(we.toHandle.nodeId):null};K&&V&&ce.toHandle&&be.toHandle&&ce.toHandle.type===be.toHandle.type&&ce.toHandle.nodeId===be.toHandle.nodeId&&ce.toHandle.id===be.toHandle.id&&ce.to.x===be.to.x&&ce.to.y===be.to.y||(k(be),ce=be)}function Ne(Oe){if(I){(V||ie)&&z&&K&&S?.(z);const{inProgress:Ce,...we}=ce,be={...we,toPosition:ce.toHandle?ce.toPosition:null};w?.(Oe,be),s&&N?.(Oe,be)}y(),cancelAnimationFrame(H),te=!1,K=!1,z=null,ie=null,P.removeEventListener("mousemove",ye),P.removeEventListener("mouseup",Ne),P.removeEventListener("touchmove",ye),P.removeEventListener("touchend",Ne)}P.addEventListener("mousemove",ye),P.addEventListener("mouseup",Ne),P.addEventListener("touchmove",ye),P.addEventListener("touchend",Ne)}function tq(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=eq,nodeLookup:h}){const p=s==="target",m=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:x}=Ci(e),S=o.elementFromPoint(y,x),w=S?.classList.contains(`${l}-flow__handle`)?S:m,E={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const N=Qz(void 0,w),k=w.getAttribute("data-nodeid"),T=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!k||!N)return E;const O={source:p?k:r,sourceHandle:p?T:i,target:p?r:k,targetHandle:p?i:T};E.connection=O;const P=A&&_&&(n===Aa.Strict?p&&N==="source"||!p&&N==="target":k!==r||T!==i);E.isValid=P&&d(O),E.toHandle=Jz(k,N,T,h,n,!0)}return E}const XC={onPointerDown:Mse,isValid:tq};function _se({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=hr(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:m=!0,inversePan:y=!1}){const x=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=k.sourceEvent.ctrlKey&&wd()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,O=T[2]*Math.pow(2,_*A);t.scaleTo(O)};let S=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},E=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[A[0]-S[0],A[1]-S[1]];S=A;const O=r()*Math.max(T[2],Math.log(T[2]))*(y?-1:1),D={x:T[0]-_[0]*O,y:T[1]-_[1]*O},P=[[0,0],[u,d]];t.setViewportConstrained({x:D.x,y:D.y,zoom:T[2]},P,l)},N=_z().on("start",w).on("zoom",p?E:null).on("zoom.wheel",m?x:null);i.call(N,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Jr}}const Dse=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Bm=e=>({x:e.x,y:e.y,zoom:e.k}),uv=({x:e,y:t,zoom:n})=>jm.translate(e,t).scale(n),Hl=(e,t)=>e.target.closest(`.${t}`),nq=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Rse=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,dv=(e,t=0,n=Rse,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},rq=e=>{const t=e.ctrlKey&&wd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Ose({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(Hl(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Jr(h),E=rq(h),N=p*Math.pow(2,E);r.scaleTo(n,N,w,h);return}const m=h.deltaMode===1?20:1;let y=i===xa.Vertical?0:h.deltaX*m,x=i===xa.Horizontal?0:h.deltaY*m;!wd()&&h.shiftKey&&i!==xa.Vertical&&(y=h.deltaY*m,x=0),r.translateBy(n,-(y/p)*s,-(x/p)*s,{internal:!0});const S=Bm(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function jse({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=Hl(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function Lse({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Bm(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Pse({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&nq(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Bm(s.transform))}}function Ise({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&nq(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&Dse(e.prevViewport,o.transform))){const l=Bm(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Bse({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,m=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(Hl(h,`${d}-flow__node`)||Hl(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Hl(h,l)&&h.type==="wheel"||Hl(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!m&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&y}}function zse({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),m=_z().clickDistance(!ni(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),y=hr(e).call(m);k({x:s.x,y:s.y,zoom:sc(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const x=y.on("wheel.zoom"),S=y.on("dblclick.zoom");m.wheelDelta(rq);function w(L,G){return y?new Promise(B=>{m?.interpolate(G?.interpolate==="linear"?Ku:Vh).transform(dv(y,G?.duration,G?.ease,()=>B(!0)),L)}):Promise.resolve(!1)}function E({noWheelClassName:L,noPanClassName:G,onPaneContextMenu:B,userSelectionActive:F,panOnScroll:I,panOnDrag:q,panOnScrollMode:X,panOnScrollSpeed:te,preventScrolling:z,zoomOnPinch:K,zoomOnScroll:ie,zoomOnDoubleClick:ue,zoomActivationKeyPressed:$,lib:J,onTransformChange:ee}){F&&!h.isZoomingOrPanning&&N();const le=I&&!$&&!F?Ose({zoomPanValues:h,noWheelClassName:L,d3Selection:y,d3Zoom:m,panOnScrollMode:X,panOnScrollSpeed:te,zoomOnPinch:K,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):jse({noWheelClassName:L,preventScrolling:z,d3ZoomHandler:x});if(y.on("wheel.zoom",le,{passive:!1}),!F){const Ne=Lse({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});m.on("start",Ne);const Oe=Pse({zoomPanValues:h,panOnDrag:q,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:ee});m.on("zoom",Oe);const Ce=Ise({zoomPanValues:h,panOnDrag:q,panOnScroll:I,onPaneContextMenu:B,onPanZoomEnd:u,onDraggingChange:d});m.on("end",Ce)}const ye=Bse({zoomActivationKeyPressed:$,panOnDrag:q,zoomOnScroll:ie,panOnScroll:I,zoomOnDoubleClick:ue,zoomOnPinch:K,userSelectionActive:F,noPanClassName:G,noWheelClassName:L,lib:J});m.filter(ye),ue?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function N(){m.on("zoom",null)}async function k(L,G,B){const F=uv(L),I=m?.constrain()(F,G,B);return I&&await w(I),new Promise(q=>q(I))}async function T(L,G){const B=uv(L);return await w(B,G),new Promise(F=>F(B))}function A(L){if(y){const G=uv(L),B=y.property("__zoom");(B.k!==L.zoom||B.x!==L.x||B.y!==L.y)&&m?.transform(y,G,null,{sync:!0})}}function _(){const L=y?Mz(y.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function O(L,G){return y?new Promise(B=>{m?.interpolate(G?.interpolate==="linear"?Ku:Vh).scaleTo(dv(y,G?.duration,G?.ease,()=>B(!0)),L)}):Promise.resolve(!1)}function D(L,G){return y?new Promise(B=>{m?.interpolate(G?.interpolate==="linear"?Ku:Vh).scaleBy(dv(y,G?.duration,G?.ease,()=>B(!0)),L)}):Promise.resolve(!1)}function P(L){m?.scaleExtent(L)}function H(L){m?.translateExtent(L)}function V(L){const G=!ni(L)||L<0?0:L;m?.clickDistance(G)}return{update:E,destroy:N,setViewport:T,setViewportConstrained:k,getViewport:_,scaleTo:O,scaleBy:D,setScaleExtent:P,setTranslateExtent:H,syncViewport:A,setClickDistance:V}}var _a;(function(e){e.Line="line",e.Handle="handle"})(_a||(_a={}));const qse=["top-left","top-right","bottom-left","bottom-right"],Vse=["top","right","bottom","left"];function Hse({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Fse(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Ys(e,t){return Math.max(0,t-e)}function Xs(e,t){return Math.max(0,e-t)}function kh(e,t,n){return Math.max(0,t-e,e-n)}function gR(e,t){return e?!t:t}function $se(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,m=h&&p,{xSnapped:y,ySnapped:x}=n,{minWidth:S,maxWidth:w,minHeight:E,maxHeight:N}=r,{x:k,y:T,width:A,height:_,aspectRatio:O}=e;let D=Math.floor(h?y-e.pointerX:0),P=Math.floor(p?x-e.pointerY:0);const H=A+(u?-D:D),V=_+(d?-P:P),L=-s[0]*A,G=-s[1]*_;let B=kh(H,S,w),F=kh(V,E,N);if(o){let X=0,te=0;u&&D<0?X=Ys(k+D+L,o[0][0]):!u&&D>0&&(X=Xs(k+H+L,o[1][0])),d&&P<0?te=Ys(T+P+G,o[0][1]):!d&&P>0&&(te=Xs(T+V+G,o[1][1])),B=Math.max(B,X),F=Math.max(F,te)}if(l){let X=0,te=0;u&&D>0?X=Xs(k+D,l[0][0]):!u&&D<0&&(X=Ys(k+H,l[1][0])),d&&P>0?te=Xs(T+P,l[0][1]):!d&&P<0&&(te=Ys(T+V,l[1][1])),B=Math.max(B,X),F=Math.max(F,te)}if(i){if(h){const X=kh(H/O,E,N)*O;if(B=Math.max(B,X),o){let te=0;!u&&!d||u&&!d&&m?te=Xs(T+G+H/O,o[1][1])*O:te=Ys(T+G+(u?D:-D)/O,o[0][1])*O,B=Math.max(B,te)}if(l){let te=0;!u&&!d||u&&!d&&m?te=Ys(T+H/O,l[1][1])*O:te=Xs(T+(u?D:-D)/O,l[0][1])*O,B=Math.max(B,te)}}if(p){const X=kh(V*O,S,w)/O;if(F=Math.max(F,X),o){let te=0;!u&&!d||d&&!u&&m?te=Xs(k+V*O+L,o[1][0])/O:te=Ys(k+(d?P:-P)*O+L,o[0][0])/O,F=Math.max(F,te)}if(l){let te=0;!u&&!d||d&&!u&&m?te=Ys(k+V*O,l[1][0])/O:te=Xs(k+(d?P:-P)*O,l[0][0])/O,F=Math.max(F,te)}}}P=P+(P<0?F:-F),D=D+(D<0?B:-B),i&&(m?H>V*O?P=(gR(u,d)?-D:D)/O:D=(gR(u,d)?-P:P)*O:h?(P=D/O,d=u):(D=P*O,u=d));const I=u?k+D:k,q=d?T+P:T;return{width:A+(u?-D:D),height:_+(d?-P:P),x:s[0]*D*(u?-1:1)+I,y:s[1]*P*(d?-1:1)+q}}const iq={width:0,height:0,x:0,y:0},Use={...iq,pointerX:0,pointerY:0,aspectRatio:1};function Gse(e){return[[0,0],[e.measured.width,e.measured.height]]}function Kse(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Wse({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=hr(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:m,onResize:y,onResizeEnd:x,shouldResize:S}){let w={...iq},E={...Use};const N=Fse(u);let k,T=null,A=[],_,O,D;const P=mz().on("start",H=>{const{nodeLookup:V,transform:L,snapGrid:G,snapToGrid:B,nodeOrigin:F,paneDomNode:I}=n();if(k=V.get(t),!k)return;T=I?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:X}=Wu(H.sourceEvent,{transform:L,snapGrid:G,snapToGrid:B,containerBounds:T});w={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},E={...w,pointerX:q,pointerY:X,aspectRatio:w.width/w.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=V.get(k.parentId),O=_&&k.extent==="parent"?Gse(_):void 0),A=[],D=void 0;for(const[te,z]of V)if(z.parentId===t&&(A.push({id:te,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const K=Kse(z,k,z.origin??F);D?D=[[Math.min(K[0][0],D[0][0]),Math.min(K[0][1],D[0][1])],[Math.max(K[1][0],D[1][0]),Math.max(K[1][1],D[1][1])]]:D=K}m?.(H,{...w})}).on("drag",H=>{const{transform:V,snapGrid:L,snapToGrid:G,nodeOrigin:B}=n(),F=Wu(H.sourceEvent,{transform:V,snapGrid:L,snapToGrid:G,containerBounds:T}),I=[];if(!k)return;const{x:q,y:X,width:te,height:z}=w,K={},ie=k.origin??B,{width:ue,height:$,x:J,y:ee}=$se(E,N,F,d,h,ie,O,D),ce=ue!==te,le=$!==z,ye=J!==q&&ce,Ne=ee!==X&&le;if(!ye&&!Ne&&!ce&&!le)return;if((ye||Ne||ie[0]===1||ie[1]===1)&&(K.x=ye?J:w.x,K.y=Ne?ee:w.y,w.x=K.x,w.y=K.y,A.length>0)){const be=J-q,ke=ee-X;for(const rt of A)rt.position={x:rt.position.x-be+ie[0]*(ue-te),y:rt.position.y-ke+ie[1]*($-z)},I.push(rt)}if((ce||le)&&(K.width=ce&&(!p||p==="horizontal")?ue:w.width,K.height=le&&(!p||p==="vertical")?$:w.height,w.width=K.width,w.height=K.height),_&&k.expandParent){const be=ie[0]*(K.width??0);K.x&&K.x<be&&(w.x=be,E.x=E.x-(K.x-be));const ke=ie[1]*(K.height??0);K.y&&K.y<ke&&(w.y=ke,E.y=E.y-(K.y-ke))}const Oe=Hse({width:w.width,prevWidth:te,height:w.height,prevHeight:z,affectsX:N.affectsX,affectsY:N.affectsY}),Ce={...w,direction:Oe};S?.(H,Ce)!==!1&&(y?.(H,Ce),r(K,I))}).on("end",H=>{x?.(H,{...w}),i?.({...w})});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Yse={},yR=e=>{let t;const n=new Set,r=(h,p)=>{const m=typeof h=="function"?h(t):h;if(!Object.is(m,t)){const y=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(x=>x(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Yse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},Xse=e=>e?yR(e):yR,{useDebugValue:Zse}=_e,{useSyncExternalStoreWithSelector:Jse}=fQ,Qse=e=>e;function sq(e,t=Qse,n){const r=Jse(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Zse(r),r}const vR=(e,t)=>{const n=Xse(e),r=(i,s=t)=>sq(n,i,s);return Object.assign(r,n),r},eoe=(e,t)=>e?vR(e,t):vR;function Nt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const zm=R.createContext(null),toe=zm.Provider,oq=Mi.error001();function Je(e,t){const n=R.useContext(zm);if(n===null)throw new Error(oq);return sq(n,e,t)}function wt(){const e=R.useContext(zm);if(e===null)throw new Error(oq);return R.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const bR={display:"none"},noe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},aq="react-flow__node-desc",lq="react-flow__edge-desc",roe="react-flow__aria-live",ioe=e=>e.ariaLiveMessage,soe=e=>e.ariaLabelConfig;function ooe({rfId:e}){const t=Je(ioe);return v.jsx("div",{id:`${roe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:noe,children:t})}function aoe({rfId:e,disableKeyboardA11y:t}){const n=Je(soe);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${aq}-${e}`,style:bR,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${lq}-${e}`,style:bR,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(ooe,{rfId:e})]})}const qm=R.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return v.jsx("div",{className:Kt(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});qm.displayName="Panel";function loe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx(qm,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const coe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Nh=e=>e.id;function uoe(e,t){return Nt(e.selectedNodes.map(Nh),t.selectedNodes.map(Nh))&&Nt(e.selectedEdges.map(Nh),t.selectedEdges.map(Nh))}function doe({onSelectionChange:e}){const t=wt(),{selectedNodes:n,selectedEdges:r}=Je(coe,uoe);return R.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const foe=e=>!!e.onSelectionChangeHandlers;function hoe({onSelectionChange:e}){const t=Je(foe);return e||t?v.jsx(doe,{onSelectionChange:e}):null}const cq=[0,0],poe={x:0,y:0,zoom:1},moe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],xR=[...moe,"rfId"],goe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),wR={translateExtent:vd,nodeOrigin:cq,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function yoe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=Je(goe,Nt),h=wt();R.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=wR,l()}),[]);const p=R.useRef(wR);return R.useEffect(()=>{for(const m of xR){const y=e[m],x=p.current[m];y!==x&&(typeof e[m]>"u"||(m==="nodes"?t(y):m==="edges"?n(y):m==="minZoom"?r(y):m==="maxZoom"?i(y):m==="translateExtent"?s(y):m==="nodeExtent"?o(y):m==="paneClickDistance"?d(y):m==="ariaLabelConfig"?h.setState({ariaLabelConfig:sse(y)}):m==="fitView"?h.setState({fitViewQueued:y}):m==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[m]:y})))}p.current=e},xR.map(m=>e[m])),null}function SR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function voe(e){const[t,n]=R.useState(e==="system"?null:e);return R.useEffect(()=>{if(e!=="system"){n(e);return}const r=SR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:SR()?.matches?"dark":"light"}const CR=typeof document<"u"?document:null;function Cd(e=null,t={target:CR,actInsideInputWithModifier:!0}){const[n,r]=R.useState(!1),i=R.useRef(!1),s=R.useRef(new Set([])),[o,l]=R.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,m)=>p.concat(...m),[]);return[d,h]}return[[],[]]},[e]);return R.useEffect(()=>{const u=t?.target??CR,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!i.current||i.current&&!d)&&$z(y))return!1;const S=kR(y.code,l);if(s.current.add(y[S]),ER(o,s.current,!1)){const w=y.composedPath?.()?.[0]||y.target,E=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!E)&&y.preventDefault(),r(!0)}},p=y=>{const x=kR(y.code,l);ER(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[x]),y.key==="Meta"&&s.current.clear(),i.current=!1},m=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[e,r]),n}function ER(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function kR(e,t){return t.includes(e)?"code":"key"}const boe=()=>{const e=wt();return R.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=Im(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return Fd(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Jp(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function uq(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)xoe(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function xoe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function dq(e,t){return uq(e,t)}function fq(e,t){return uq(e,t)}function ta(e,t){return{id:e,type:"select",selected:t}}function Fl(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(ta(s.id,o)))}return r}function NR({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function TR(e){return{id:e.id,type:"remove"}}const AR=e=>Xie(e),woe=e=>Lz(e);function hq(e){return R.forwardRef(e)}const Soe=typeof window<"u"?R.useLayoutEffect:R.useEffect;function MR(e){const[t,n]=R.useState(BigInt(0)),[r]=R.useState(()=>Coe(()=>n(i=>i+BigInt(1))));return Soe(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Coe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const pq=R.createContext(null);function Eoe({children:e}){const t=wt(),n=R.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:m,fitViewQueued:y}=t.getState();let x=u;for(const w of l)x=typeof w=="function"?w(x):w;const S=NR({items:x,lookup:m});h&&d(x),S.length>0?p?.(S):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:E,setNodes:N}=t.getState();w&&N(E)})},[]),r=MR(n),i=R.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:m}=t.getState();let y=u;for(const x of l)y=typeof x=="function"?x(y):x;h?d(y):p&&p(NR({items:y,lookup:m}))},[]),s=MR(i),o=R.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return v.jsx(pq.Provider,{value:o,children:e})}function koe(){const e=R.useContext(pq);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Noe=e=>!!e.panZoom;function Ed(){const e=boe(),t=wt(),n=koe(),r=Je(Noe),i=R.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:m,nodeOrigin:y}=t.getState(),x=AR(p)?p:m.get(p.id),S=x.parentId?Hz(x.position,x.measured,x.parentId,m,y):x.position,w={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return oc(w)},d=(p,m,y={replace:!1})=>{o(x=>x.map(S=>{if(S.id===p){const w=typeof m=="function"?m(S):m;return y.replace&&AR(w)?w:{...S,...w}}return S}))},h=(p,m,y={replace:!1})=>{l(x=>x.map(S=>{if(S.id===p){const w=typeof m=="function"?m(S):m;return y.replace&&woe(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(m=>({...m}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const m=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...m])},addEdges:p=>{const m=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...m])},toObject:()=>{const{nodes:p=[],edges:m=[],transform:y}=t.getState(),[x,S,w]=y;return{nodes:p.map(E=>({...E})),edges:m.map(E=>({...E})),viewport:{x,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:m=[]})=>{const{nodes:y,edges:x,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:E,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:T}=t.getState(),{nodes:A,edges:_}=await ese({nodesToRemove:p,edgesToRemove:m,nodes:y,edges:x,onBeforeDelete:T}),O=_.length>0,D=A.length>0;if(O){const P=_.map(TR);w?.(_),N(P)}if(D){const P=A.map(TR);S?.(A),E(P)}return(D||O)&&k?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,m=!0,y)=>{const x=sR(p),S=x?p:u(p),w=y!==void 0;return S?(y||t.getState().nodes).filter(E=>{const N=t.getState().nodeLookup.get(E.id);if(N&&!x&&(E.id===p.id||!N.internals.positionAbsolute))return!1;const k=oc(w?E:N),T=xd(k,S);return m&&T>0||T>=k.width*k.height||T>=S.width*S.height}):[]},isNodeIntersecting:(p,m,y=!0)=>{const S=sR(p)?p:u(p);if(!S)return!1;const w=xd(S,m);return y&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,m,y={replace:!1})=>{d(p,x=>{const S=typeof m=="function"?m(x):m;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},updateEdge:h,updateEdgeData:(p,m,y={replace:!1})=>{h(p,x=>{const S=typeof m=="function"?m(x):m;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:m,nodeOrigin:y}=t.getState();return Pz(p,{nodeLookup:m,nodeOrigin:y})},getHandleConnections:({type:p,id:m,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:m,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?m?`-${p}-${m}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const m=t.getState().fitViewResolver??ise();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:m}),n.nodeQueue.push(y=>[...y]),m.promise}}},[]);return R.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const _R=e=>e.selected,Toe=typeof window<"u"?window:void 0;function Aoe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=wt(),{deleteElements:r}=Ed(),i=Cd(e,{actInsideInputWithModifier:!1}),s=Cd(t,{target:Toe});R.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(_R),edges:o.filter(_R)}),n.setState({nodesSelectionActive:!1})}},[i]),R.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function Moe(e){const t=wt();R.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=jk(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",Mi.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Vm={position:"absolute",width:"100%",height:"100%",top:0,left:0},_oe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Doe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=xa.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:y=!0,children:x,noWheelClassName:S,noPanClassName:w,onViewportChange:E,isControlledViewport:N,paneClickDistance:k}){const T=wt(),A=R.useRef(null),{userSelectionActive:_,lib:O}=Je(_oe,Nt),D=Cd(m),P=R.useRef();Moe(A);const H=R.useCallback(V=>{E?.({x:V[0],y:V[1],zoom:V[2]}),N||T.setState({transform:V})},[E,N]);return R.useEffect(()=>{if(A.current){P.current=zse({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:k,onDraggingChange:B=>T.setState({paneDragging:B}),onPanZoomStart:(B,F)=>{const{onViewportChangeStart:I,onMoveStart:q}=T.getState();q?.(B,F),I?.(F)},onPanZoom:(B,F)=>{const{onViewportChange:I,onMove:q}=T.getState();q?.(B,F),I?.(F)},onPanZoomEnd:(B,F)=>{const{onViewportChangeEnd:I,onMoveEnd:q}=T.getState();q?.(B,F),I?.(F)}});const{x:V,y:L,zoom:G}=P.current.getViewport();return T.setState({panZoom:P.current,transform:[V,L,G],domNode:A.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),R.useEffect(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:y,noPanClassName:w,userSelectionActive:_,noWheelClassName:S,lib:O,onTransformChange:H})},[e,t,n,r,i,s,o,l,D,y,w,_,S,O,H]),v.jsx("div",{className:"react-flow__renderer",ref:A,style:Vm,children:x})}const Roe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Ooe(){const{userSelectionActive:e,userSelectionRect:t}=Je(Roe,Nt);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const fv=(e,t)=>n=>{n.target===t.current&&e?.(n)},joe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Loe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=bd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:m,children:y}){const x=wt(),{userSelectionActive:S,elementsSelectable:w,dragging:E,connectionInProgress:N}=Je(joe,Nt),k=w&&(e||S),T=R.useRef(null),A=R.useRef(),_=R.useRef(new Set),O=R.useRef(new Set),D=R.useRef(!1),P=R.useRef(!1),H=q=>{if(D.current||N){D.current=!1;return}l?.(q),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},V=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}u?.(q)},L=d?q=>d(q):void 0,G=q=>{const{resetSelectedElements:X,domNode:te}=x.getState();if(A.current=te?.getBoundingClientRect(),!w||!e||q.button!==0||q.target!==T.current||!A.current)return;q.target?.setPointerCapture?.(q.pointerId),P.current=!0,D.current=!1;const{x:z,y:K}=Ci(q.nativeEvent,A.current);X(),x.setState({userSelectionRect:{width:0,height:0,startX:z,startY:K,x:z,y:K}}),s?.(q)},B=q=>{const{userSelectionRect:X,transform:te,nodeLookup:z,edgeLookup:K,connectionLookup:ie,triggerNodeChanges:ue,triggerEdgeChanges:$,defaultEdgeOptions:J}=x.getState();if(!A.current||!X)return;D.current=!0;const{x:ee,y:ce}=Ci(q.nativeEvent,A.current),{startX:le,startY:ye}=X,Ne={startX:le,startY:ye,x:ee<le?ee:le,y:ce<ye?ce:ye,width:Math.abs(ee-le),height:Math.abs(ce-ye)},Oe=_.current,Ce=O.current;_.current=new Set(Ok(z,Ne,te,n===bd.Partial,!0).map(be=>be.id)),O.current=new Set;const we=J?.selectable??!0;for(const be of _.current){const ke=ie.get(be);if(ke)for(const{edgeId:rt}of ke.values()){const Ae=K.get(rt);Ae&&(Ae.selectable??we)&&O.current.add(rt)}}if(!oR(Oe,_.current)){const be=Fl(z,_.current,!0);ue(be)}if(!oR(Ce,O.current)){const be=Fl(K,O.current);$(be)}x.setState({userSelectionRect:Ne,userSelectionActive:!0,nodesSelectionActive:!1})},F=q=>{if(q.button!==0||!P.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:X}=x.getState();!S&&X&&q.target===T.current&&H?.(q),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(q),(t||i)&&(D.current=!1),P.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:Kt(["react-flow__pane",{draggable:I,dragging:E,selection:e}]),onClick:k?void 0:fv(H,T),onContextMenu:fv(V,T),onWheel:fv(L,T),onPointerEnter:k?void 0:h,onPointerDown:k?G:p,onPointerMove:k?B:p,onPointerUp:k?F:void 0,onPointerLeave:m,ref:T,style:Vm,children:[y,v.jsx(Ooe,{})]})}function ZC({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",Mi.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function mq({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=wt(),[u,d]=R.useState(!1),h=R.useRef();return R.useEffect(()=>{h.current=Ese({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{ZC({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),R.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const Poe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function gq(){const e=wt();return R.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,m=Poe(o),y=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*y*n.factor,w=n.direction.y*x*n.factor;for(const[,E]of d){if(!m(E))continue;let N={x:E.internals.positionAbsolute.x+S,y:E.internals.positionAbsolute.y+w};i&&(N=Hd(N,s));const{position:k,positionAbsolute:T}=Iz({nodeId:E.id,nextPosition:N,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});E.position=k,E.internals.positionAbsolute=T,p.set(E.id,E)}u(p)},[])}const Vk=R.createContext(null),Ioe=Vk.Provider;Vk.Consumer;const yq=()=>R.useContext(Vk),Boe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),zoe=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===Aa.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function qoe({type:e="source",position:t=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...m},y){const x=o||null,S=e==="target",w=wt(),E=yq(),{connectOnClick:N,noPanClassName:k,rfId:T}=Je(Boe,Nt),{connectingFrom:A,connectingTo:_,clickConnecting:O,isPossibleEndHandle:D,connectionInProcess:P,clickConnectionInProcess:H,valid:V}=Je(zoe(E,x,e),Nt);E||w.getState().onError?.("010",Mi.error010());const L=F=>{const{defaultEdgeOptions:I,onConnect:q,hasDefaultEdges:X}=w.getState(),te={...I,...F};if(X){const{edges:z,setEdges:K}=w.getState();K(Kz(te,z))}q?.(te),l?.(te)},G=F=>{if(!E)return;const I=Uz(F.nativeEvent);if(i&&(I&&F.button===0||!I)){const q=w.getState();XC.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:x,nodeId:E,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:L,isValidConnection:n||q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}I?h?.(F):p?.(F)},B=F=>{const{onClickConnectStart:I,onClickConnectEnd:q,connectionClickStartHandle:X,connectionMode:te,isValidConnection:z,lib:K,rfId:ie,nodeLookup:ue,connection:$}=w.getState();if(!E||!X&&!i)return;if(!X){I?.(F.nativeEvent,{nodeId:E,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:E,type:e,id:x}});return}const J=Fz(F.target),ee=n||z,{connection:ce,isValid:le}=XC.isValid(F.nativeEvent,{handle:{nodeId:E,id:x,type:e},connectionMode:te,fromNodeId:X.nodeId,fromHandleId:X.id||null,fromType:X.type,isValidConnection:ee,flowId:ie,doc:J,lib:K,nodeLookup:ue});le&&ce&&L(ce);const ye=structuredClone($);delete ye.inProgress,ye.toPosition=ye.toHandle?ye.toHandle.position:null,q?.(F,ye),w.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":E,"data-handlepos":t,"data-id":`${T}-${E}-${x}-${e}`,className:Kt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:O,connectingfrom:A,connectingto:_,valid:V,connectionindicator:r&&(!P||D)&&(P||H?s:i)}]),onMouseDown:G,onTouchStart:G,onClick:N?B:void 0,ref:y,...m,children:u})}const Ir=R.memo(hq(qoe));function Voe({data:e,isConnectable:t,sourcePosition:n=Te.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(Ir,{type:"source",position:n,isConnectable:t})]})}function Hoe({data:e,isConnectable:t,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Ir,{type:"target",position:n,isConnectable:t}),e?.label,v.jsx(Ir,{type:"source",position:r,isConnectable:t})]})}function Foe(){return null}function $oe({data:e,isConnectable:t,targetPosition:n=Te.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Ir,{type:"target",position:n,isConnectable:t}),e?.label]})}const Qp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},DR={input:Voe,default:Hoe,output:$oe,group:Foe};function Uoe(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Goe=e=>{const{width:t,height:n,x:r,y:i}=Vd(e.nodeLookup,{filter:s=>!!s.selected});return{width:ni(t)?t:null,height:ni(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Koe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=wt(),{width:i,height:s,transformString:o,userSelectionActive:l}=Je(Goe,Nt),u=gq(),d=R.useRef(null);if(R.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),mq({nodeRef:d}),l||!i||!s)return null;const h=e?m=>{const y=r.getState().nodes.filter(x=>x.selected);e(m,y)}:void 0,p=m=>{Object.prototype.hasOwnProperty.call(Qp,m.key)&&(m.preventDefault(),u({direction:Qp[m.key],factor:m.shiftKey?4:1}))};return v.jsx("div",{className:Kt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:v.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const RR=typeof window<"u"?window:void 0,Woe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function vq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:O,panOnDrag:D,defaultViewport:P,translateExtent:H,minZoom:V,maxZoom:L,preventScrolling:G,onSelectionContextMenu:B,noWheelClassName:F,noPanClassName:I,disableKeyboardA11y:q,onViewportChange:X,isControlledViewport:te}){const{nodesSelectionActive:z,userSelectionActive:K}=Je(Woe),ie=Cd(d,{target:RR}),ue=Cd(S,{target:RR}),$=ue||D,J=ue||T,ee=h&&$!==!0,ce=ie||K||ee;return Aoe({deleteKeyCode:u,multiSelectionKeyCode:x}),v.jsx(Doe,{onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:J,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:O,panOnDrag:!ie&&$,defaultViewport:P,translateExtent:H,minZoom:V,maxZoom:L,zoomActivationKeyCode:w,preventScrolling:G,noWheelClassName:F,noPanClassName:I,onViewportChange:X,isControlledViewport:te,paneClickDistance:l,children:v.jsxs(Loe,{onSelectionStart:m,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:$,isSelecting:!!ce,selectionMode:p,selectionKeyPressed:ie,selectionOnDrag:ee,children:[e,z&&v.jsx(Koe,{onSelectionContextMenu:B,noPanClassName:I,disableKeyboardA11y:q})]})})}vq.displayName="FlowRenderer";const Yoe=R.memo(vq),Xoe=e=>t=>e?Ok(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Zoe(e){return Je(R.useCallback(Xoe(e),[e]),Nt)}const Joe=e=>e.updateNodeInternals;function Qoe(){const e=Je(Joe),[t]=R.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return R.useEffect(()=>()=>{t?.disconnect()},[t]),t}function eae({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=wt(),s=R.useRef(null),o=R.useRef(null),l=R.useRef(e.sourcePosition),u=R.useRef(e.targetPosition),d=R.useRef(t),h=n&&!!e.internals.handleBounds;return R.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),R.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),R.useEffect(()=>{if(s.current){const p=d.current!==t,m=l.current!==e.sourcePosition,y=u.current!==e.targetPosition;(p||m||y)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function tae({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:m,noPanClassName:y,disableKeyboardA11y:x,rfId:S,nodeTypes:w,nodeClickDistance:E,onError:N}){const{node:k,internals:T,isParent:A}=Je(le=>{const ye=le.nodeLookup.get(e),Ne=le.parentLookup.has(e);return{node:ye,internals:ye.internals,isParent:Ne}},Nt);let _=k.type||"default",O=w?.[_]||DR[_];O===void 0&&(N?.("003",Mi.error003(_)),_="default",O=w?.default||DR.default);const D=!!(k.draggable||l&&typeof k.draggable>"u"),P=!!(k.selectable||u&&typeof k.selectable>"u"),H=!!(k.connectable||d&&typeof k.connectable>"u"),V=!!(k.focusable||h&&typeof k.focusable>"u"),L=wt(),G=Vz(k),B=eae({node:k,nodeType:_,hasDimensions:G,resizeObserver:p}),F=mq({nodeRef:B,disabled:k.hidden||!D,noDragClassName:m,handleSelector:k.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:E}),I=gq();if(k.hidden)return null;const q=ps(k),X=Uoe(k),te=P||D||t||n||r||i,z=n?le=>n(le,{...T.userNode}):void 0,K=r?le=>r(le,{...T.userNode}):void 0,ie=i?le=>i(le,{...T.userNode}):void 0,ue=s?le=>s(le,{...T.userNode}):void 0,$=o?le=>o(le,{...T.userNode}):void 0,J=le=>{const{selectNodesOnDrag:ye,nodeDragThreshold:Ne}=L.getState();P&&(!ye||!D||Ne>0)&&ZC({id:e,store:L,nodeRef:B}),t&&t(le,{...T.userNode})},ee=le=>{if(!($z(le.nativeEvent)||x)){if(Dz.includes(le.key)&&P){const ye=le.key==="Escape";ZC({id:e,store:L,unselect:ye,nodeRef:B})}else if(D&&k.selected&&Object.prototype.hasOwnProperty.call(Qp,le.key)){le.preventDefault();const{ariaLabelConfig:ye}=L.getState();L.setState({ariaLiveMessage:ye["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),I({direction:Qp[le.key],factor:le.shiftKey?4:1})}}},ce=()=>{if(x||!B.current?.matches(":focus-visible"))return;const{transform:le,width:ye,height:Ne,autoPanOnNodeFocus:Oe,setCenter:Ce}=L.getState();if(!Oe)return;Ok(new Map([[e,k]]),{x:0,y:0,width:ye,height:Ne},le,!0).length>0||Ce(k.position.x+q.width/2,k.position.y+q.height/2,{zoom:le[2]})};return v.jsx("div",{className:Kt(["react-flow__node",`react-flow__node-${_}`,{[y]:D},k.className,{selected:k.selected,selectable:P,parent:A,draggable:D,dragging:F}]),ref:B,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:te?"all":"none",visibility:G?"visible":"hidden",...k.style,...X},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:K,onMouseLeave:ie,onContextMenu:ue,onClick:J,onDoubleClick:$,onKeyDown:V?ee:void 0,tabIndex:V?0:void 0,onFocus:V?ce:void 0,role:k.ariaRole??(V?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${aq}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:v.jsx(Ioe,{value:e,children:v.jsx(O,{id:e,data:k.data,type:_,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:P,draggable:D,deletable:k.deletable??!0,isConnectable:H,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:F,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...q})})})}const nae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function bq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Je(nae,Nt),o=Zoe(e.onlyRenderVisibleElements),l=Qoe();return v.jsx("div",{className:"react-flow__nodes",style:Vm,children:o.map(u=>v.jsx(tae,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}bq.displayName="NodeRenderer";const rae=R.memo(bq);function iae(e){return Je(R.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&lse({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Nt)}const sae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return v.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},oae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return v.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},OR={[Xp.Arrow]:sae,[Xp.ArrowClosed]:oae};function aae(e){const t=wt();return R.useMemo(()=>Object.prototype.hasOwnProperty.call(OR,e)?OR[e]:(t.getState().onError?.("009",Mi.error009(e)),null),[e])}const lae=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=aae(t);return u?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:v.jsx(u,{color:n,strokeWidth:o})}):null},xq=({defaultColor:e,rfId:t})=>{const n=Je(s=>s.edges),r=Je(s=>s.defaultEdgeOptions),i=R.useMemo(()=>mse(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:i.map(s=>v.jsx(lae,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};xq.displayName="MarkerDefinitions";var cae=R.memo(xq);function wq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,m]=R.useState({x:1,y:0,width:0,height:0}),y=Kt(["react-flow__edge-textwrapper",d]),x=R.useRef(null);return R.useEffect(()=>{if(x.current){const S=x.current.getBBox();m({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...h,children:[i&&v.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),v.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}wq.displayName="EdgeText";const uae=R.memo(wq);function Hm({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...h,d:e,fill:"none",className:Kt(["react-flow__edge-path",h.className])}),d?v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&ni(t)&&ni(n)?v.jsx(uae,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function jR({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Te.Left||e===Te.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function Sq({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top}){const[o,l]=jR({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=jR({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,m,y]=Gz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,m,y]}function Cq(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})=>{const[N,k,T]=Sq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return v.jsx(Hm,{id:A,path:N,labelX:k,labelY:T,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})})}const dae=Cq({isInternal:!1}),Eq=Cq({isInternal:!0});dae.displayName="SimpleBezierEdge";Eq.displayName="SimpleBezierEdgeInternal";function kq(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,sourcePosition:y=Te.Bottom,targetPosition:x=Te.Top,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=KC({sourceX:n,sourceY:r,sourcePosition:y,targetX:i,targetY:s,targetPosition:x,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),_=e.isInternal?void 0:t;return v.jsx(Hm,{id:_,path:k,labelX:T,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:S,markerStart:w,interactionWidth:N})})}const Nq=kq({isInternal:!1}),Tq=kq({isInternal:!0});Nq.displayName="SmoothStepEdge";Tq.displayName="SmoothStepEdgeInternal";function Aq(e){return R.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return v.jsx(Nq,{...n,id:r,pathOptions:R.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const fae=Aq({isInternal:!1}),Mq=Aq({isInternal:!0});fae.displayName="StepEdge";Mq.displayName="StepEdgeInternal";function _q(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:S})=>{const[w,E,N]=Wz({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return v.jsx(Hm,{id:k,path:w,labelX:E,labelY:N,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:y,markerStart:x,interactionWidth:S})})}const hae=_q({isInternal:!1}),Dq=_q({isInternal:!0});hae.displayName="StraightEdge";Dq.displayName="StraightEdgeInternal";function Rq(e){return R.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Te.Bottom,targetPosition:l=Te.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=Lk({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:E?.curvature}),_=e.isInternal?void 0:t;return v.jsx(Hm,{id:_,path:k,labelX:T,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:N})})}const pae=Rq({isInternal:!1}),Oq=Rq({isInternal:!0});pae.displayName="BezierEdge";Oq.displayName="BezierEdgeInternal";const LR={default:Oq,straight:Dq,step:Mq,smoothstep:Tq,simplebezier:Eq},PR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},mae=(e,t,n)=>n===Te.Left?e-t:n===Te.Right?e+t:e,gae=(e,t,n)=>n===Te.Top?e-t:n===Te.Bottom?e+t:e,IR="react-flow__edgeupdater";function BR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Kt([IR,`${IR}-${l}`]),cx:mae(t,r,e),cy:gae(n,r,e),r,stroke:"transparent",fill:"transparent"})}function yae({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:m,setUpdateHover:y}){const x=wt(),S=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:_,domNode:O,isValidConnection:D,connectionMode:P,connectionRadius:H,lib:V,onConnectStart:L,onConnectEnd:G,cancelConnection:B,nodeLookup:F,rfId:I,panBy:q,updateConnection:X}=x.getState(),te=A.type==="target",z=(ue,$)=>{m(!1),p?.(ue,n,A.type,$)},K=ue=>d?.(n,ue),ie=(ue,$)=>{m(!0),h?.(T,n,A.type),L?.(ue,$)};XC.onPointerDown(T.nativeEvent,{autoPanOnConnect:_,connectionMode:P,connectionRadius:H,domNode:O,handleId:A.id,nodeId:A.nodeId,nodeLookup:F,isTarget:te,edgeUpdaterType:A.type,lib:V,flowId:I,cancelConnection:B,panBy:q,isValidConnection:D,onConnect:K,onConnectStart:ie,onConnectEnd:G,onReconnectEnd:z,updateConnection:X,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},w=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),E=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>y(!0),k=()=>y(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(BR,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:N,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&v.jsx(BR,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:E,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function vae({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:y,rfId:x,edgeTypes:S,noPanClassName:w,onError:E,disableKeyboardA11y:N}){let k=Je(Ce=>Ce.edgeLookup.get(e));const T=Je(Ce=>Ce.defaultEdgeOptions);k=T?{...T,...k}:k;let A=k.type||"default",_=S?.[A]||LR[A];_===void 0&&(E?.("011",Mi.error011(A)),A="default",_=S?.default||LR.default);const O=!!(k.focusable||t&&typeof k.focusable>"u"),D=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),P=!!(k.selectable||r&&typeof k.selectable>"u"),H=R.useRef(null),[V,L]=R.useState(!1),[G,B]=R.useState(!1),F=wt(),{zIndex:I,sourceX:q,sourceY:X,targetX:te,targetY:z,sourcePosition:K,targetPosition:ie}=Je(R.useCallback(Ce=>{const we=Ce.nodeLookup.get(k.source),be=Ce.nodeLookup.get(k.target);if(!we||!be)return{zIndex:k.zIndex,...PR};const ke=pse({id:e,sourceNode:we,targetNode:be,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:Ce.connectionMode,onError:E});return{zIndex:ase({selected:k.selected,zIndex:k.zIndex,sourceNode:we,targetNode:be,elevateOnSelect:Ce.elevateEdgesOnSelect}),...ke||PR}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Nt),ue=R.useMemo(()=>k.markerStart?`url('#${WC(k.markerStart,x)}')`:void 0,[k.markerStart,x]),$=R.useMemo(()=>k.markerEnd?`url('#${WC(k.markerEnd,x)}')`:void 0,[k.markerEnd,x]);if(k.hidden||q===null||X===null||te===null||z===null)return null;const J=Ce=>{const{addSelectedEdges:we,unselectNodesAndEdges:be,multiSelectionActive:ke}=F.getState();P&&(F.setState({nodesSelectionActive:!1}),k.selected&&ke?(be({nodes:[],edges:[k]}),H.current?.blur()):we([e])),i&&i(Ce,k)},ee=s?Ce=>{s(Ce,{...k})}:void 0,ce=o?Ce=>{o(Ce,{...k})}:void 0,le=l?Ce=>{l(Ce,{...k})}:void 0,ye=u?Ce=>{u(Ce,{...k})}:void 0,Ne=d?Ce=>{d(Ce,{...k})}:void 0,Oe=Ce=>{if(!N&&Dz.includes(Ce.key)&&P){const{unselectNodesAndEdges:we,addSelectedEdges:be}=F.getState();Ce.key==="Escape"?(H.current?.blur(),we({edges:[k]})):be([e])}};return v.jsx("svg",{style:{zIndex:I},children:v.jsxs("g",{className:Kt(["react-flow__edge",`react-flow__edge-${A}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!P&&!i,updating:V,selectable:P}]),onClick:J,onDoubleClick:ee,onContextMenu:ce,onMouseEnter:le,onMouseMove:ye,onMouseLeave:Ne,onKeyDown:O?Oe:void 0,tabIndex:O?0:void 0,role:k.ariaRole??(O?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":O?`${lq}-${x}`:void 0,ref:H,...k.domAttributes,children:[!G&&v.jsx(_,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:P,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:q,sourceY:X,targetX:te,targetY:z,sourcePosition:K,targetPosition:ie,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:ue,markerEnd:$,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),D&&v.jsx(yae,{edge:k,isReconnectable:D,reconnectRadius:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:y,sourceX:q,sourceY:X,targetX:te,targetY:z,sourcePosition:K,targetPosition:ie,setUpdateHover:L,setReconnecting:B})]})})}const bae=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function jq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:y,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,onError:k}=Je(bae,Nt),T=iae(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(cae,{defaultColor:e,rfId:n}),T.map(A=>v.jsx(vae,{id:A,edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:m,onReconnectStart:y,onReconnectEnd:x,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},A))]})}jq.displayName="EdgeRenderer";const xae=R.memo(jq),wae=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Sae({children:e}){const t=Je(wae);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Cae(e){const t=Ed(),n=R.useRef(!1);R.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Eae=e=>e.panZoom?.syncViewport;function kae(e){const t=Je(Eae),n=wt();return R.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Nae(e){return e.connection.inProgress?{...e.connection,to:Fd(e.connection.to,e.transform)}:{...e.connection}}function Tae(e){return Nae}function Aae(e){const t=Tae();return Je(t,Nt)}const Mae=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function _ae({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Je(Mae,Nt);return!(s&&i&&u)?null:v.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:Kt(["react-flow__connection",jz(l)]),children:v.jsx(Lq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const Lq=({style:e,type:t=io.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:m}=Aae();if(!i)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:m,connectionStatus:jz(r),toNode:h,toHandle:p});let y="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:m};switch(t){case io.Bezier:[y]=Lk(x);break;case io.SimpleBezier:[y]=Sq(x);break;case io.Step:[y]=KC({...x,borderRadius:0});break;case io.SmoothStep:[y]=KC(x);break;default:[y]=Wz(x)}return v.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};Lq.displayName="ConnectionLine";const Dae={};function zR(e=Dae){R.useRef(e),wt(),R.useEffect(()=>{},[e])}function Rae(){wt(),R.useRef(!1),R.useEffect(()=>{},[])}function Pq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:E,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:O,deleteKeyCode:D,onlyRenderVisibleElements:P,elementsSelectable:H,defaultViewport:V,translateExtent:L,minZoom:G,maxZoom:B,preventScrolling:F,defaultMarkerColor:I,zoomOnScroll:q,zoomOnPinch:X,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:K,zoomOnDoubleClick:ie,panOnDrag:ue,onPaneClick:$,onPaneMouseEnter:J,onPaneMouseMove:ee,onPaneMouseLeave:ce,onPaneScroll:le,onPaneContextMenu:ye,paneClickDistance:Ne,nodeClickDistance:Oe,onEdgeContextMenu:Ce,onEdgeMouseEnter:we,onEdgeMouseMove:be,onEdgeMouseLeave:ke,reconnectRadius:rt,onReconnect:Ae,onReconnectStart:Jt,onReconnectEnd:un,noDragClassName:Jn,noWheelClassName:Qt,noPanClassName:Tt,disableKeyboardA11y:ft,nodeExtent:qn,rfId:Dn,viewport:xn,onViewportChange:yt}){return zR(e),zR(t),Rae(),Cae(n),kae(xn),v.jsx(Yoe,{onPaneClick:$,onPaneMouseEnter:J,onPaneMouseMove:ee,onPaneMouseLeave:ce,onPaneContextMenu:ye,onPaneScroll:le,paneClickDistance:Ne,deleteKeyCode:D,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,onSelectionStart:m,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:O,elementsSelectable:H,zoomOnScroll:q,zoomOnPinch:X,zoomOnDoubleClick:ie,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:K,panOnDrag:ue,defaultViewport:V,translateExtent:L,minZoom:G,maxZoom:B,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:Jn,noWheelClassName:Qt,noPanClassName:Tt,disableKeyboardA11y:ft,onViewportChange:yt,isControlledViewport:!!xn,children:v.jsxs(Sae,{children:[v.jsx(xae,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Ae,onReconnectStart:Jt,onReconnectEnd:un,onlyRenderVisibleElements:P,onEdgeContextMenu:Ce,onEdgeMouseEnter:we,onEdgeMouseMove:be,onEdgeMouseLeave:ke,reconnectRadius:rt,defaultMarkerColor:I,noPanClassName:Tt,disableKeyboardA11y:ft,rfId:Dn}),v.jsx(_ae,{style:S,type:x,component:w,containerStyle:E}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(rae,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Oe,onlyRenderVisibleElements:P,noPanClassName:Tt,noDragClassName:Jn,disableKeyboardA11y:ft,nodeExtent:qn,rfId:Dn}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Pq.displayName="GraphView";const Oae=R.memo(Pq),qR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const m=new Map,y=new Map,x=new Map,S=new Map,w=r??t??[],E=n??e??[],N=h??[0,0],k=p??vd;Xz(x,S,w);const T=YC(E,m,y,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=Vd(m,{filter:H=>!!((H.width||H.initialWidth)&&(H.height||H.initialHeight))}),{x:O,y:D,zoom:P}=Im(_,i,s,u,d,l?.padding??.1);A=[O,D,P]}return{rfId:"1",width:0,height:0,transform:A,nodes:E,nodesInitialized:T,nodeLookup:m,parentLookup:y,edges:w,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:vd,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Aa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Oz},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:tse,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Rz}},jae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>eoe((m,y)=>{async function x(){const{nodeLookup:S,panZoom:w,fitViewOptions:E,fitViewResolver:N,width:k,height:T,minZoom:A,maxZoom:_}=y();w&&(await Qie({nodes:S,width:k,height:T,panZoom:w,minZoom:A,maxZoom:_},E),N?.resolve(!0),m({fitViewResolver:null}))}return{...qR({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:E,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:T}=y(),A=YC(S,w,E,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});T&&A?(x(),m({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):m({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:E}=y();Xz(w,E,S),m({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:E}=y();E(S),m({hasDefaultNodes:!0})}if(w){const{setEdges:E}=y();E(w),m({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:E,parentLookup:N,domNode:k,nodeOrigin:T,nodeExtent:A,debug:_,fitViewQueued:O}=y(),{changes:D,updatedInternals:P}=xse(S,E,N,k,T,A);P&&(yse(E,N,{nodeOrigin:T,nodeExtent:A}),O?(x(),m({fitViewQueued:!1,fitViewOptions:void 0})):m({}),D?.length>0&&(_&&console.log("React Flow: trigger node changes",D),w?.(D)))},updateNodePositions:(S,w=!1)=>{const E=[],N=[],{nodeLookup:k,triggerNodeChanges:T}=y();for(const[A,_]of S){const O=k.get(A),D=!!(O?.expandParent&&O?.parentId&&_?.position),P={id:A,type:"position",position:D?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:w};D&&O.parentId&&E.push({id:A,parentId:O.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),N.push(P)}if(E.length>0){const{parentLookup:A,nodeOrigin:_}=y(),O=qk(E,k,A,_);N.push(...O)}T(N)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:E,nodes:N,hasDefaultNodes:k,debug:T}=y();if(S?.length){if(k){const A=dq(S,N);E(A)}T&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:E,edges:N,hasDefaultEdges:k,debug:T}=y();if(S?.length){if(k){const A=fq(S,N);E(A)}T&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>ta(_,!0));k(A);return}k(Fl(N,new Set([...S]),!0)),T(Fl(E))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>ta(_,!0));T(A);return}T(Fl(E,new Set([...S]))),k(Fl(N,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:E,nodes:N,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:A}=y(),_=S||N,O=w||E,D=_.map(H=>{const V=k.get(H.id);return V&&(V.selected=!1),ta(H.id,!1)}),P=O.map(H=>ta(H.id,!1));T(D),A(P)},setMinZoom:S=>{const{panZoom:w,maxZoom:E}=y();w?.setScaleExtent([S,E]),m({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:E}=y();w?.setScaleExtent([E,S]),m({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),m({translateExtent:S})},setPaneClickDistance:S=>{y().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:E,triggerEdgeChanges:N,elementsSelectable:k}=y();if(!k)return;const T=w.reduce((_,O)=>O.selected?[..._,ta(O.id,!1)]:_,[]),A=S.reduce((_,O)=>O.selected?[..._,ta(O.id,!1)]:_,[]);E(T),N(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:E,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:T,nodeExtent:A}=y();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(YC(w,E,N,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:T,checkEquality:!1}),m({nodeExtent:S}))},panBy:S=>{const{transform:w,width:E,height:N,panZoom:k,translateExtent:T}=y();return wse({delta:S,panZoom:k,transform:w,translateExtent:T,width:E,height:N})},setCenter:async(S,w,E)=>{const{width:N,height:k,maxZoom:T,panZoom:A}=y();if(!A)return Promise.resolve(!1);const _=typeof E?.zoom<"u"?E.zoom:T;return await A.setViewport({x:N/2-S*_,y:k/2-w*_,zoom:_},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{m({connection:{...Oz}})},updateConnection:S=>{m({connection:S})},reset:()=>m({...qR()})}},Object.is);function Iq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:m}){const[y]=R.useState(()=>jae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return v.jsx(toe,{value:y,children:v.jsx(Eoe,{children:m})})}function Lae({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:m}){return R.useContext(zm)?v.jsx(v.Fragment,{children:e}):v.jsx(Iq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:m,children:e})}const Pae={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Iae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:m,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:O,onNodeDrag:D,onNodeDragStop:P,onNodesDelete:H,onEdgesDelete:V,onDelete:L,onSelectionChange:G,onSelectionDragStart:B,onSelectionDrag:F,onSelectionDragStop:I,onSelectionContextMenu:q,onSelectionStart:X,onSelectionEnd:te,onBeforeDelete:z,connectionMode:K,connectionLineType:ie=io.Bezier,connectionLineStyle:ue,connectionLineComponent:$,connectionLineContainerStyle:J,deleteKeyCode:ee="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:le=!1,selectionMode:ye=bd.Full,panActivationKeyCode:Ne="Space",multiSelectionKeyCode:Oe=wd()?"Meta":"Control",zoomActivationKeyCode:Ce=wd()?"Meta":"Control",snapToGrid:we,snapGrid:be,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:rt,nodesDraggable:Ae,autoPanOnNodeFocus:Jt,nodesConnectable:un,nodesFocusable:Jn,nodeOrigin:Qt=cq,edgesFocusable:Tt,edgesReconnectable:ft,elementsSelectable:qn=!0,defaultViewport:Dn=poe,minZoom:xn=.5,maxZoom:yt=2,translateExtent:qe=vd,preventScrolling:He=!0,nodeExtent:oi,defaultMarkerColor:Bt="#b1b1b7",zoomOnScroll:en=!0,zoomOnPinch:dn=!0,panOnScroll:wn=!1,panOnScrollSpeed:yr=.5,panOnScrollMode:vr=xa.Free,zoomOnDoubleClick:Rn=!0,panOnDrag:Ri=!0,onPaneClick:Oi,onPaneMouseEnter:ji,onPaneMouseMove:ko,onPaneMouseLeave:br,onPaneScroll:yc,onPaneContextMenu:Va,paneClickDistance:ai=0,nodeClickDistance:Li=0,children:ys,onReconnect:Ha,onReconnectStart:No,onReconnectEnd:xr,onEdgeContextMenu:zt,onEdgeDoubleClick:tn,onEdgeMouseEnter:li,onEdgeMouseMove:Fe,onEdgeMouseLeave:vs,reconnectRadius:To=10,onNodesChange:Ao,onEdgesChange:Fr,noDragClassName:ci="nodrag",noWheelClassName:ui="nowheel",noPanClassName:On="nopan",fitView:di,fitViewOptions:Qn,connectOnClick:vt,attributionPosition:Mo,proOptions:_o,defaultEdgeOptions:$r,elevateNodesOnSelect:Ur,elevateEdgesOnSelect:bs,disableKeyboardA11y:Do=!1,autoPanOnConnect:Fa,autoPanOnNodeDrag:$a,autoPanSpeed:xs,connectionRadius:ws,isValidConnection:er,onError:Ro,style:Ua,id:Vn,nodeDragThreshold:Pi,connectionDragThreshold:Ss,viewport:vc,onViewportChange:fi,width:Sn,height:Oo,colorMode:Ga="light",debug:Cs,onScroll:jo,ariaLabelConfig:wr,...bc},Cn){const Ii=Vn||"1",Ka=voe(Ga),Lo=R.useCallback(Gr=>{Gr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),jo?.(Gr)},[jo]);return v.jsx("div",{"data-testid":"rf__wrapper",...bc,onScroll:Lo,style:{...Ua,...Pae},ref:Cn,className:Kt(["react-flow",i,Ka]),id:Vn,role:"application",children:v.jsxs(Lae,{nodes:e,edges:t,width:Sn,height:Oo,fitView:di,fitViewOptions:Qn,minZoom:xn,maxZoom:yt,nodeOrigin:Qt,nodeExtent:oi,children:[v.jsx(Oae,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:ie,connectionLineStyle:ue,connectionLineComponent:$,connectionLineContainerStyle:J,selectionKeyCode:ce,selectionOnDrag:le,selectionMode:ye,deleteKeyCode:ee,multiSelectionKeyCode:Oe,panActivationKeyCode:Ne,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:ke,defaultViewport:Dn,translateExtent:qe,minZoom:xn,maxZoom:yt,preventScrolling:He,zoomOnScroll:en,zoomOnPinch:dn,zoomOnDoubleClick:Rn,panOnScroll:wn,panOnScrollSpeed:yr,panOnScrollMode:vr,panOnDrag:Ri,onPaneClick:Oi,onPaneMouseEnter:ji,onPaneMouseMove:ko,onPaneMouseLeave:br,onPaneScroll:yc,onPaneContextMenu:Va,paneClickDistance:ai,nodeClickDistance:Li,onSelectionContextMenu:q,onSelectionStart:X,onSelectionEnd:te,onReconnect:Ha,onReconnectStart:No,onReconnectEnd:xr,onEdgeContextMenu:zt,onEdgeDoubleClick:tn,onEdgeMouseEnter:li,onEdgeMouseMove:Fe,onEdgeMouseLeave:vs,reconnectRadius:To,defaultMarkerColor:Bt,noDragClassName:ci,noWheelClassName:ui,noPanClassName:On,rfId:Ii,disableKeyboardA11y:Do,nodeExtent:oi,viewport:vc,onViewportChange:fi}),v.jsx(yoe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,nodesDraggable:Ae,autoPanOnNodeFocus:Jt,nodesConnectable:un,nodesFocusable:Jn,edgesFocusable:Tt,edgesReconnectable:ft,elementsSelectable:qn,elevateNodesOnSelect:Ur,elevateEdgesOnSelect:bs,minZoom:xn,maxZoom:yt,nodeExtent:oi,onNodesChange:Ao,onEdgesChange:Fr,snapToGrid:we,snapGrid:be,connectionMode:K,translateExtent:qe,connectOnClick:vt,defaultEdgeOptions:$r,fitView:di,fitViewOptions:Qn,onNodesDelete:H,onEdgesDelete:V,onDelete:L,onNodeDragStart:O,onNodeDrag:D,onNodeDragStop:P,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:I,onMove:h,onMoveStart:p,onMoveEnd:m,noPanClassName:On,nodeOrigin:Qt,rfId:Ii,autoPanOnConnect:Fa,autoPanOnNodeDrag:$a,autoPanSpeed:xs,onError:Ro,connectionRadius:ws,isValidConnection:er,selectNodesOnDrag:rt,nodeDragThreshold:Pi,connectionDragThreshold:Ss,onBeforeDelete:z,paneClickDistance:ai,debug:Cs,ariaLabelConfig:wr}),v.jsx(hoe,{onSelectionChange:G}),ys,v.jsx(loe,{proOptions:_o,position:Mo}),v.jsx(aoe,{rfId:Ii,disableKeyboardA11y:Do})]})})}var Bae=hq(Iae);function zae(e){const[t,n]=R.useState(e),r=R.useCallback(i=>n(s=>dq(i,s)),[]);return[t,n,r]}function qae(e){const[t,n]=R.useState(e),r=R.useCallback(i=>n(s=>fq(i,s)),[]);return[t,n,r]}function Vae({dimensions:e,lineWidth:t,variant:n,className:r}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Kt(["react-flow__background-pattern",n,r])})}function Hae({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:Kt(["react-flow__background-pattern","dots",t])})}var po;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(po||(po={}));const Fae={[po.Dots]:1,[po.Lines]:1,[po.Cross]:6},$ae=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Bq({id:e,variant:t=po.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=R.useRef(null),{transform:m,patternId:y}=Je($ae,Nt),x=r||Fae[t],S=t===po.Dots,w=t===po.Cross,E=Array.isArray(n)?n:[n,n],N=[E[0]*m[2]||1,E[1]*m[2]||1],k=x*m[2],T=Array.isArray(s)?s:[s,s],A=w?[k,k]:N,_=[T[0]*m[2]||1+A[0]/2,T[1]*m[2]||1+A[1]/2],O=`${y}${e||""}`;return v.jsxs("svg",{className:Kt(["react-flow__background",d]),style:{...u,...Vm,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[v.jsx("pattern",{id:O,x:m[0]%N[0],y:m[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?v.jsx(Hae,{radius:k/2,className:h}):v.jsx(Vae,{dimensions:A,lineWidth:i,variant:t,className:h})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${O})`})]})}Bq.displayName="Background";const Uae=R.memo(Bq);function Gae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Kae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Wae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Yae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Xae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Th({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:Kt(["react-flow__controls-button",t]),...n,children:e})}const Zae=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function zq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:m="vertical","aria-label":y}){const x=wt(),{isInteractive:S,minZoomReached:w,maxZoomReached:E,ariaLabelConfig:N}=Je(Zae,Nt),{zoomIn:k,zoomOut:T,fitView:A}=Ed(),_=()=>{k(),s?.()},O=()=>{T(),o?.()},D=()=>{A(i),l?.()},P=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},H=m==="horizontal"?"horizontal":"vertical";return v.jsxs(qm,{className:Kt(["react-flow__controls",H,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??N["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(Th,{onClick:_,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:E,children:v.jsx(Gae,{})}),v.jsx(Th,{onClick:O,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:w,children:v.jsx(Kae,{})})]}),n&&v.jsx(Th,{className:"react-flow__controls-fitview",onClick:D,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:v.jsx(Wae,{})}),r&&v.jsx(Th,{className:"react-flow__controls-interactive",onClick:P,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?v.jsx(Xae,{}):v.jsx(Yae,{})}),h]})}zq.displayName="Controls";const Jae=R.memo(zq);function Qae({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:m,onClick:y}){const{background:x,backgroundColor:S}=s||{},w=o||x||S;return v.jsx("rect",{className:Kt(["react-flow__minimap-node",{selected:m},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:y?E=>y(E,e):void 0})}const ele=R.memo(Qae),tle=e=>e.nodes.map(t=>t.id),hv=e=>e instanceof Function?e:()=>e;function nle({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=ele,onClick:o}){const l=Je(tle,Nt),u=hv(t),d=hv(e),h=hv(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:l.map(m=>v.jsx(ile,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function rle({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:m,height:y}=Je(x=>{const{internals:S}=x.nodeLookup.get(e),w=S.userNode,{x:E,y:N}=S.positionAbsolute,{width:k,height:T}=ps(w);return{node:w,x:E,y:N,width:k,height:T}},Nt);return!d||d.hidden||!Vz(d)?null:v.jsx(l,{x:h,y:p,width:m,height:y,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const ile=R.memo(rle);var sle=R.memo(nle);const ole=200,ale=150,lle=e=>!e.hidden,cle=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?qz(Vd(e.nodeLookup,{filter:lle}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},ule="react-flow__minimap-desc";function qq({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:m="bottom-right",onClick:y,onNodeClick:x,pannable:S=!1,zoomable:w=!1,ariaLabel:E,inversePan:N,zoomStep:k=1,offsetScale:T=5}){const A=wt(),_=R.useRef(null),{boundingRect:O,viewBB:D,rfId:P,panZoom:H,translateExtent:V,flowWidth:L,flowHeight:G,ariaLabelConfig:B}=Je(cle,Nt),F=e?.width??ole,I=e?.height??ale,q=O.width/F,X=O.height/I,te=Math.max(q,X),z=te*F,K=te*I,ie=T*te,ue=O.x-(z-O.width)/2-ie,$=O.y-(K-O.height)/2-ie,J=z+ie*2,ee=K+ie*2,ce=`${ule}-${P}`,le=R.useRef(0),ye=R.useRef();le.current=te,R.useEffect(()=>{if(_.current&&H)return ye.current=_se({domNode:_.current,panZoom:H,getTransform:()=>A.getState().transform,getViewScale:()=>le.current}),()=>{ye.current?.destroy()}},[H]),R.useEffect(()=>{ye.current?.update({translateExtent:V,width:L,height:G,inversePan:N,pannable:S,zoomStep:k,zoomable:w})},[S,w,N,k,V,L,G]);const Ne=y?we=>{const[be,ke]=ye.current?.pointer(we)||[0,0];y(we,{x:be,y:ke})}:void 0,Oe=x?R.useCallback((we,be)=>{const ke=A.getState().nodeLookup.get(be).internals.userNode;x(we,ke)},[]):void 0,Ce=E??B["minimap.ariaLabel"];return v.jsx(qm,{position:m,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*te:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Kt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:F,height:I,viewBox:`${ue} ${$} ${J} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:_,onClick:Ne,children:[Ce&&v.jsx("title",{id:ce,children:Ce}),v.jsx(sle,{onClick:Oe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${ue-ie},${$-ie}h${J+ie*2}v${ee+ie*2}h${-J-ie*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}qq.displayName="MiniMap";const dle=R.memo(qq),fle=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,hle={[_a.Line]:"right",[_a.Handle]:"bottom-right"};function ple({nodeId:e,position:t,variant:n=_a.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:m,autoScale:y=!0,shouldResize:x,onResizeStart:S,onResize:w,onResizeEnd:E}){const N=yq(),k=typeof e=="string"?e:N,T=wt(),A=R.useRef(null),_=n===_a.Handle,O=Je(R.useCallback(fle(_&&y),[_,y]),Nt),D=R.useRef(null),P=t??hle[n];R.useEffect(()=>{if(!(!A.current||!k))return D.current||(D.current=Wse({domNode:A.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:V,transform:L,snapGrid:G,snapToGrid:B,nodeOrigin:F,domNode:I}=T.getState();return{nodeLookup:V,transform:L,snapGrid:G,snapToGrid:B,nodeOrigin:F,paneDomNode:I}},onChange:(V,L)=>{const{triggerNodeChanges:G,nodeLookup:B,parentLookup:F,nodeOrigin:I}=T.getState(),q=[],X={x:V.x,y:V.y},te=B.get(k);if(te&&te.expandParent&&te.parentId){const z=te.origin??I,K=V.width??te.measured.width??0,ie=V.height??te.measured.height??0,ue={id:te.id,parentId:te.parentId,rect:{width:K,height:ie,...Hz({x:V.x??te.position.x,y:V.y??te.position.y},{width:K,height:ie},te.parentId,B,z)}},$=qk([ue],B,F,I);q.push(...$),X.x=V.x?Math.max(z[0]*K,V.x):void 0,X.y=V.y?Math.max(z[1]*ie,V.y):void 0}if(X.x!==void 0&&X.y!==void 0){const z={id:k,type:"position",position:{...X}};q.push(z)}if(V.width!==void 0&&V.height!==void 0){const K={id:k,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:V.width,height:V.height}};q.push(K)}for(const z of L){const K={...z,type:"position"};q.push(K)}G(q)},onEnd:({width:V,height:L})=>{const G={id:k,type:"dimensions",resizing:!1,dimensions:{width:V,height:L}};T.getState().triggerNodeChanges([G])}})),D.current.update({controlPosition:P,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:m,onResizeStart:S,onResize:w,onResizeEnd:E,shouldResize:x}),()=>{D.current?.destroy()}},[P,l,u,d,h,p,S,w,E,x]);const H=P.split("-");return v.jsx("div",{className:Kt(["react-flow__resize-control","nodrag",...H,n,r]),ref:A,style:{...i,scale:O,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const VR=R.memo(ple);function mle({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:m=!0,shouldResize:y,onResizeStart:x,onResize:S,onResizeEnd:w}){return t?v.jsxs(v.Fragment,{children:[Vse.map(E=>v.jsx(VR,{className:i,style:s,nodeId:e,position:E,variant:_a.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:m,shouldResize:y,onResize:S,onResizeEnd:w},E)),qse.map(E=>v.jsx(VR,{className:n,style:r,nodeId:e,position:E,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:m,shouldResize:y,onResize:S,onResizeEnd:w},E))]}):null}function gle(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const yle=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function mo(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let _l=null;function Vq(e={}){return _l||(e.includeStyleProperties?(_l=e.includeStyleProperties,_l):(_l=mo(window.getComputedStyle(document.documentElement)),_l))}function em(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function vle(e){const t=em(e,"border-left-width"),n=em(e,"border-right-width");return e.clientWidth+t+n}function ble(e){const t=em(e,"border-top-width"),n=em(e,"border-bottom-width");return e.clientHeight+t+n}function Hq(e,t={}){const n=t.width||vle(e),r=t.height||ble(e);return{width:n,height:r}}function xle(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const ur=16384;function wle(e){(e.width>ur||e.height>ur)&&(e.width>ur&&e.height>ur?e.width>e.height?(e.height*=ur/e.width,e.width=ur):(e.width*=ur/e.height,e.height=ur):e.width>ur?(e.height*=ur/e.width,e.width=ur):(e.width*=ur/e.height,e.height=ur))}function tm(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function Sle(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Cle(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),Sle(i)}const Xn=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Xn(n,t)};function Ele(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function kle(e,t){return Vq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Nle(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?Ele(n):kle(n,r);return document.createTextNode(`${i}{${s}}`)}function HR(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=yle();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(Nle(o,n,i,r)),t.appendChild(l)}function Tle(e,t,n){HR(e,t,":before",n),HR(e,t,":after",n)}const FR="application/font-woff",$R="image/jpeg",Ale={woff:FR,woff2:FR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:$R,jpeg:$R,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Mle(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Hk(e){const t=Mle(e).toLowerCase();return Ale[t]||""}function _le(e){return e.split(/,/)[1]}function JC(e){return e.search(/^(data:)/)!==-1}function Dle(e,t){return`data:${t};base64,${e}`}async function Fq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const pv={};function Rle(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function Fk(e,t,n){const r=Rle(e,t,n.includeQueryParams);if(pv[r]!=null)return pv[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await Fq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),_le(l)));i=Dle(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return pv[r]=i,i}async function Ole(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):tm(t)}async function jle(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return tm(l)}const n=e.poster,r=Hk(n),i=await Fk(n,r,t);return tm(i)}async function Lle(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await Fm(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Ple(e,t){return Xn(e,HTMLCanvasElement)?Ole(e):Xn(e,HTMLVideoElement)?jle(e,t):Xn(e,HTMLIFrameElement)?Lle(e,t):e.cloneNode($q(e))}const Ile=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",$q=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Ble(e,t,n){var r,i;if($q(t))return t;let s=[];return Ile(e)&&e.assignedNodes?s=mo(e.assignedNodes()):Xn(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=mo(e.contentDocument.body.childNodes):s=mo(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||Xn(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>Fm(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function zle(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Vq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Xn(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function qle(e,t){Xn(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Xn(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Vle(e,t){if(Xn(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Hle(e,t,n){return Xn(t,Element)&&(zle(e,t,n),Tle(e,t,n),qle(e,t),Vle(e,t)),t}async function Fle(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await Fm(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function Fm(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Ple(r,t)).then(r=>Ble(e,r,t)).then(r=>Hle(e,r,t)).then(r=>Fle(r,t))}const Uq=/url\((['"]?)([^'"]+?)\1\)/g,$le=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ule=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Gle(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Kle(e){const t=[];return e.replace(Uq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!JC(n))}async function Wle(e,t,n,r,i){try{const s=n?gle(t,n):t,o=Hk(t);let l;return i||(l=await Fk(s,o,r)),e.replace(Gle(t),`$1${l}$3`)}catch{}return e}function Yle(e,{preferredFontFormat:t}){return t?e.replace(Ule,n=>{for(;;){const[r,,i]=$le.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Gq(e){return e.search(Uq)!==-1}async function Kq(e,t,n){if(!Gq(e))return e;const r=Yle(e,n);return Kle(r).reduce((s,o)=>s.then(l=>Wle(l,o,t,n)),Promise.resolve(r))}async function Dl(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Kq(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Xle(e,t){await Dl("background",e,t)||await Dl("background-image",e,t),await Dl("mask",e,t)||await Dl("-webkit-mask",e,t)||await Dl("mask-image",e,t)||await Dl("-webkit-mask-image",e,t)}async function Zle(e,t){const n=Xn(e,HTMLImageElement);if(!(n&&!JC(e.src))&&!(Xn(e,SVGImageElement)&&!JC(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await Fk(r,Hk(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Jle(e,t){const r=mo(e.childNodes).map(i=>Wq(i,t));await Promise.all(r).then(()=>e)}async function Wq(e,t){Xn(e,Element)&&(await Xle(e,t),await Zle(e,t),await Jle(e,t))}function Qle(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const UR={};async function GR(e){let t=UR[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},UR[e]=t,t}async function KR(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Fq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function WR(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function ece(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{mo(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=GR(u).then(h=>KR(h,t)).then(h=>WR(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:p,error:m})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(GR(i.href).then(l=>KR(l,t)).then(l=>WR(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{mo(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function tce(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Gq(t.style.getPropertyValue("src")))}async function nce(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=mo(e.ownerDocument.styleSheets),r=await ece(n,t);return tce(r)}function Yq(e){return e.trim().replace(/["']/g,"")}function rce(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(Yq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function ice(e,t){const n=await nce(e,t),r=rce(e);return(await Promise.all(n.filter(s=>r.has(Yq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Kq(s.cssText,o,t)}))).join(`
`)}async function sce(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await ice(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Xq(e,t={}){const{width:n,height:r}=Hq(e,t),i=await Fm(e,t,!0);return await sce(i,t),await Wq(i,t),Qle(i,t),await Cle(i,n,r)}async function Zq(e,t={}){const{width:n,height:r}=Hq(e,t),i=await Xq(e,t),s=await tm(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||xle(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||wle(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function oce(e,t={}){return(await Zq(e,t)).toDataURL()}async function ace(e,t={}){return(await Zq(e,t)).toDataURL("image/jpeg",t.quality||1)}function $k(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var mv,YR;function lce(){if(YR)return mv;YR=1;function e(){this.__data__=[],this.size=0}return mv=e,mv}var gv,XR;function fc(){if(XR)return gv;XR=1;function e(t,n){return t===n||t!==t&&n!==n}return gv=e,gv}var yv,ZR;function $m(){if(ZR)return yv;ZR=1;var e=fc();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return yv=t,yv}var vv,JR;function cce(){if(JR)return vv;JR=1;var e=$m(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return vv=r,vv}var bv,QR;function uce(){if(QR)return bv;QR=1;var e=$m();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return bv=t,bv}var xv,eO;function dce(){if(eO)return xv;eO=1;var e=$m();function t(n){return e(this.__data__,n)>-1}return xv=t,xv}var wv,tO;function fce(){if(tO)return wv;tO=1;var e=$m();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return wv=t,wv}var Sv,nO;function Um(){if(nO)return Sv;nO=1;var e=lce(),t=cce(),n=uce(),r=dce(),i=fce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Sv=s,Sv}var Cv,rO;function hce(){if(rO)return Cv;rO=1;var e=Um();function t(){this.__data__=new e,this.size=0}return Cv=t,Cv}var Ev,iO;function pce(){if(iO)return Ev;iO=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Ev=e,Ev}var kv,sO;function mce(){if(sO)return kv;sO=1;function e(t){return this.__data__.get(t)}return kv=e,kv}var Nv,oO;function gce(){if(oO)return Nv;oO=1;function e(t){return this.__data__.has(t)}return Nv=e,Nv}var Tv,aO;function Jq(){if(aO)return Tv;aO=1;var e=typeof nh=="object"&&nh&&nh.Object===Object&&nh;return Tv=e,Tv}var Av,lO;function si(){if(lO)return Av;lO=1;var e=Jq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Av=n,Av}var Mv,cO;function hc(){if(cO)return Mv;cO=1;var e=si(),t=e.Symbol;return Mv=t,Mv}var _v,uO;function yce(){if(uO)return _v;uO=1;var e=hc(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return _v=s,_v}var Dv,dO;function vce(){if(dO)return Dv;dO=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Dv=n,Dv}var Rv,fO;function Ia(){if(fO)return Rv;fO=1;var e=hc(),t=yce(),n=vce(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return Rv=o,Rv}var Ov,hO;function Vr(){if(hO)return Ov;hO=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Ov=e,Ov}var jv,pO;function $d(){if(pO)return jv;pO=1;var e=Ia(),t=Vr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return jv=o,jv}var Lv,mO;function bce(){if(mO)return Lv;mO=1;var e=si(),t=e["__core-js_shared__"];return Lv=t,Lv}var Pv,gO;function xce(){if(gO)return Pv;gO=1;var e=bce(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return Pv=n,Pv}var Iv,yO;function Qq(){if(yO)return Iv;yO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Iv=n,Iv}var Bv,vO;function wce(){if(vO)return Bv;vO=1;var e=$d(),t=xce(),n=Vr(),r=Qq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||t(m))return!1;var y=e(m)?h:s;return y.test(r(m))}return Bv=p,Bv}var zv,bO;function Sce(){if(bO)return zv;bO=1;function e(t,n){return t?.[n]}return zv=e,zv}var qv,xO;function Ba(){if(xO)return qv;xO=1;var e=wce(),t=Sce();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return qv=n,qv}var Vv,wO;function Uk(){if(wO)return Vv;wO=1;var e=Ba(),t=si(),n=e(t,"Map");return Vv=n,Vv}var Hv,SO;function Gm(){if(SO)return Hv;SO=1;var e=Ba(),t=e(Object,"create");return Hv=t,Hv}var Fv,CO;function Cce(){if(CO)return Fv;CO=1;var e=Gm();function t(){this.__data__=e?e(null):{},this.size=0}return Fv=t,Fv}var $v,EO;function Ece(){if(EO)return $v;EO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return $v=e,$v}var Uv,kO;function kce(){if(kO)return Uv;kO=1;var e=Gm(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return Uv=i,Uv}var Gv,NO;function Nce(){if(NO)return Gv;NO=1;var e=Gm(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Gv=r,Gv}var Kv,TO;function Tce(){if(TO)return Kv;TO=1;var e=Gm(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Kv=n,Kv}var Wv,AO;function Ace(){if(AO)return Wv;AO=1;var e=Cce(),t=Ece(),n=kce(),r=Nce(),i=Tce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Wv=s,Wv}var Yv,MO;function Mce(){if(MO)return Yv;MO=1;var e=Ace(),t=Um(),n=Uk();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Yv=r,Yv}var Xv,_O;function _ce(){if(_O)return Xv;_O=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Xv=e,Xv}var Zv,DO;function Km(){if(DO)return Zv;DO=1;var e=_ce();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Zv=t,Zv}var Jv,RO;function Dce(){if(RO)return Jv;RO=1;var e=Km();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Jv=t,Jv}var Qv,OO;function Rce(){if(OO)return Qv;OO=1;var e=Km();function t(n){return e(this,n).get(n)}return Qv=t,Qv}var eb,jO;function Oce(){if(jO)return eb;jO=1;var e=Km();function t(n){return e(this,n).has(n)}return eb=t,eb}var tb,LO;function jce(){if(LO)return tb;LO=1;var e=Km();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return tb=t,tb}var nb,PO;function Gk(){if(PO)return nb;PO=1;var e=Mce(),t=Dce(),n=Rce(),r=Oce(),i=jce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,nb=s,nb}var rb,IO;function Lce(){if(IO)return rb;IO=1;var e=Um(),t=Uk(),n=Gk(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return rb=i,rb}var ib,BO;function Wm(){if(BO)return ib;BO=1;var e=Um(),t=hce(),n=pce(),r=mce(),i=gce(),s=Lce();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,ib=o,ib}var sb,zO;function Kk(){if(zO)return sb;zO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return sb=e,sb}var ob,qO;function eV(){if(qO)return ob;qO=1;var e=Ba(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return ob=t,ob}var ab,VO;function Ym(){if(VO)return ab;VO=1;var e=eV();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return ab=t,ab}var lb,HO;function Xm(){if(HO)return lb;HO=1;var e=Ym(),t=fc(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return lb=i,lb}var cb,FO;function Ud(){if(FO)return cb;FO=1;var e=Xm(),t=Ym();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return cb=n,cb}var ub,$O;function Pce(){if($O)return ub;$O=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return ub=e,ub}var db,UO;function Di(){if(UO)return db;UO=1;function e(t){return t!=null&&typeof t=="object"}return db=e,db}var fb,GO;function Ice(){if(GO)return fb;GO=1;var e=Ia(),t=Di(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return fb=r,fb}var hb,KO;function Gd(){if(KO)return hb;KO=1;var e=Ice(),t=Di(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return hb=s,hb}var pb,WO;function Wt(){if(WO)return pb;WO=1;var e=Array.isArray;return pb=e,pb}var Au={exports:{}},mb,YO;function Bce(){if(YO)return mb;YO=1;function e(){return!1}return mb=e,mb}Au.exports;var XO;function pc(){return XO||(XO=1,(function(e,t){var n=si(),r=Bce(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(Au,Au.exports)),Au.exports}var gb,ZO;function Zm(){if(ZO)return gb;ZO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return gb=n,gb}var yb,JO;function Wk(){if(JO)return yb;JO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return yb=t,yb}var vb,QO;function zce(){if(QO)return vb;QO=1;var e=Ia(),t=Wk(),n=Di(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",m="[object RegExp]",y="[object Set]",x="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",O="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",H="[object Uint32Array]",V={};V[N]=V[k]=V[T]=V[A]=V[_]=V[O]=V[D]=V[P]=V[H]=!0,V[r]=V[i]=V[w]=V[s]=V[E]=V[o]=V[l]=V[u]=V[d]=V[h]=V[p]=V[m]=V[y]=V[x]=V[S]=!1;function L(G){return n(G)&&t(G.length)&&!!V[e(G)]}return vb=L,vb}var bb,ej;function Jm(){if(ej)return bb;ej=1;function e(t){return function(n){return t(n)}}return bb=e,bb}var Mu={exports:{}};Mu.exports;var tj;function Yk(){return tj||(tj=1,(function(e,t){var n=Jq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Mu,Mu.exports)),Mu.exports}var xb,nj;function Kd(){if(nj)return xb;nj=1;var e=zce(),t=Jm(),n=Yk(),r=n&&n.isTypedArray,i=r?t(r):e;return xb=i,xb}var wb,rj;function tV(){if(rj)return wb;rj=1;var e=Pce(),t=Gd(),n=Wt(),r=pc(),i=Zm(),s=Kd(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),m=!p&&t(d),y=!p&&!m&&r(d),x=!p&&!m&&!y&&s(d),S=p||m||y||x,w=S?e(d.length,String):[],E=w.length;for(var N in d)(h||l.call(d,N))&&!(S&&(N=="length"||y&&(N=="offset"||N=="parent")||x&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,E)))&&w.push(N);return w}return wb=u,wb}var Sb,ij;function Qm(){if(ij)return Sb;ij=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Sb=t,Sb}var Cb,sj;function nV(){if(sj)return Cb;sj=1;function e(t,n){return function(r){return t(n(r))}}return Cb=e,Cb}var Eb,oj;function qce(){if(oj)return Eb;oj=1;var e=nV(),t=e(Object.keys,Object);return Eb=t,Eb}var kb,aj;function Xk(){if(aj)return kb;aj=1;var e=Qm(),t=qce(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return kb=i,kb}var Nb,lj;function ms(){if(lj)return Nb;lj=1;var e=$d(),t=Wk();function n(r){return r!=null&&t(r.length)&&!e(r)}return Nb=n,Nb}var Tb,cj;function Eo(){if(cj)return Tb;cj=1;var e=tV(),t=Xk(),n=ms();function r(i){return n(i)?e(i):t(i)}return Tb=r,Tb}var Ab,uj;function Vce(){if(uj)return Ab;uj=1;var e=Ud(),t=Eo();function n(r,i){return r&&e(i,t(i),r)}return Ab=n,Ab}var Mb,dj;function Hce(){if(dj)return Mb;dj=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Mb=e,Mb}var _b,fj;function Fce(){if(fj)return _b;fj=1;var e=Vr(),t=Qm(),n=Hce(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return _b=s,_b}var Db,hj;function za(){if(hj)return Db;hj=1;var e=tV(),t=Fce(),n=ms();function r(i){return n(i)?e(i,!0):t(i)}return Db=r,Db}var Rb,pj;function $ce(){if(pj)return Rb;pj=1;var e=Ud(),t=za();function n(r,i){return r&&e(i,t(i),r)}return Rb=n,Rb}var _u={exports:{}};_u.exports;var mj;function rV(){return mj||(mj=1,(function(e,t){var n=si(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,m=l?l(p):new d.constructor(p);return d.copy(m),m}e.exports=u})(_u,_u.exports)),_u.exports}var Ob,gj;function iV(){if(gj)return Ob;gj=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return Ob=e,Ob}var jb,yj;function sV(){if(yj)return jb;yj=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return jb=e,jb}var Lb,vj;function oV(){if(vj)return Lb;vj=1;function e(){return[]}return Lb=e,Lb}var Pb,bj;function Zk(){if(bj)return Pb;bj=1;var e=sV(),t=oV(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return Pb=s,Pb}var Ib,xj;function Uce(){if(xj)return Ib;xj=1;var e=Ud(),t=Zk();function n(r,i){return e(r,t(r),i)}return Ib=n,Ib}var Bb,wj;function Jk(){if(wj)return Bb;wj=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return Bb=e,Bb}var zb,Sj;function eg(){if(Sj)return zb;Sj=1;var e=nV(),t=e(Object.getPrototypeOf,Object);return zb=t,zb}var qb,Cj;function aV(){if(Cj)return qb;Cj=1;var e=Jk(),t=eg(),n=Zk(),r=oV(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return qb=s,qb}var Vb,Ej;function Gce(){if(Ej)return Vb;Ej=1;var e=Ud(),t=aV();function n(r,i){return e(r,t(r),i)}return Vb=n,Vb}var Hb,kj;function lV(){if(kj)return Hb;kj=1;var e=Jk(),t=Wt();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return Hb=n,Hb}var Fb,Nj;function cV(){if(Nj)return Fb;Nj=1;var e=lV(),t=Zk(),n=Eo();function r(i){return e(i,n,t)}return Fb=r,Fb}var $b,Tj;function Kce(){if(Tj)return $b;Tj=1;var e=lV(),t=aV(),n=za();function r(i){return e(i,n,t)}return $b=r,$b}var Ub,Aj;function Wce(){if(Aj)return Ub;Aj=1;var e=Ba(),t=si(),n=e(t,"DataView");return Ub=n,Ub}var Gb,Mj;function Yce(){if(Mj)return Gb;Mj=1;var e=Ba(),t=si(),n=e(t,"Promise");return Gb=n,Gb}var Kb,_j;function uV(){if(_j)return Kb;_j=1;var e=Ba(),t=si(),n=e(t,"Set");return Kb=n,Kb}var Wb,Dj;function Xce(){if(Dj)return Wb;Dj=1;var e=Ba(),t=si(),n=e(t,"WeakMap");return Wb=n,Wb}var Yb,Rj;function mc(){if(Rj)return Yb;Rj=1;var e=Wce(),t=Uk(),n=Yce(),r=uV(),i=Xce(),s=Ia(),o=Qq(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",y=o(e),x=o(t),S=o(n),w=o(r),E=o(i),N=s;return(e&&N(new e(new ArrayBuffer(1)))!=m||t&&N(new t)!=l||n&&N(n.resolve())!=d||r&&N(new r)!=h||i&&N(new i)!=p)&&(N=function(k){var T=s(k),A=T==u?k.constructor:void 0,_=A?o(A):"";if(_)switch(_){case y:return m;case x:return l;case S:return d;case w:return h;case E:return p}return T}),Yb=N,Yb}var Xb,Oj;function Zce(){if(Oj)return Xb;Oj=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Xb=n,Xb}var Zb,jj;function dV(){if(jj)return Zb;jj=1;var e=si(),t=e.Uint8Array;return Zb=t,Zb}var Jb,Lj;function Qk(){if(Lj)return Jb;Lj=1;var e=dV();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Jb=t,Jb}var Qb,Pj;function Jce(){if(Pj)return Qb;Pj=1;var e=Qk();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Qb=t,Qb}var ex,Ij;function Qce(){if(Ij)return ex;Ij=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return ex=t,ex}var tx,Bj;function eue(){if(Bj)return tx;Bj=1;var e=hc(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return tx=r,tx}var nx,zj;function fV(){if(zj)return nx;zj=1;var e=Qk();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return nx=t,nx}var rx,qj;function tue(){if(qj)return rx;qj=1;var e=Qk(),t=Jce(),n=Qce(),r=eue(),i=fV(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",O="[object Uint32Array]";function D(P,H,V){var L=P.constructor;switch(H){case y:return e(P);case s:case o:return new L(+P);case x:return t(P,V);case S:case w:case E:case N:case k:case T:case A:case _:case O:return i(P,V);case l:return new L;case u:case p:return new L(P);case d:return n(P);case h:return new L;case m:return r(P)}}return rx=D,rx}var ix,Vj;function hV(){if(Vj)return ix;Vj=1;var e=Vr(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return ix=n,ix}var sx,Hj;function pV(){if(Hj)return sx;Hj=1;var e=hV(),t=eg(),n=Qm();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return sx=r,sx}var ox,Fj;function nue(){if(Fj)return ox;Fj=1;var e=mc(),t=Di(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return ox=r,ox}var ax,$j;function rue(){if($j)return ax;$j=1;var e=nue(),t=Jm(),n=Yk(),r=n&&n.isMap,i=r?t(r):e;return ax=i,ax}var lx,Uj;function iue(){if(Uj)return lx;Uj=1;var e=mc(),t=Di(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return lx=r,lx}var cx,Gj;function sue(){if(Gj)return cx;Gj=1;var e=iue(),t=Jm(),n=Yk(),r=n&&n.isSet,i=r?t(r):e;return cx=i,cx}var ux,Kj;function mV(){if(Kj)return ux;Kj=1;var e=Wm(),t=Kk(),n=Xm(),r=Vce(),i=$ce(),s=rV(),o=iV(),l=Uce(),u=Gce(),d=cV(),h=Kce(),p=mc(),m=Zce(),y=tue(),x=pV(),S=Wt(),w=pc(),E=rue(),N=Vr(),k=sue(),T=Eo(),A=za(),_=1,O=2,D=4,P="[object Arguments]",H="[object Array]",V="[object Boolean]",L="[object Date]",G="[object Error]",B="[object Function]",F="[object GeneratorFunction]",I="[object Map]",q="[object Number]",X="[object Object]",te="[object RegExp]",z="[object Set]",K="[object String]",ie="[object Symbol]",ue="[object WeakMap]",$="[object ArrayBuffer]",J="[object DataView]",ee="[object Float32Array]",ce="[object Float64Array]",le="[object Int8Array]",ye="[object Int16Array]",Ne="[object Int32Array]",Oe="[object Uint8Array]",Ce="[object Uint8ClampedArray]",we="[object Uint16Array]",be="[object Uint32Array]",ke={};ke[P]=ke[H]=ke[$]=ke[J]=ke[V]=ke[L]=ke[ee]=ke[ce]=ke[le]=ke[ye]=ke[Ne]=ke[I]=ke[q]=ke[X]=ke[te]=ke[z]=ke[K]=ke[ie]=ke[Oe]=ke[Ce]=ke[we]=ke[be]=!0,ke[G]=ke[B]=ke[ue]=!1;function rt(Ae,Jt,un,Jn,Qt,Tt){var ft,qn=Jt&_,Dn=Jt&O,xn=Jt&D;if(un&&(ft=Qt?un(Ae,Jn,Qt,Tt):un(Ae)),ft!==void 0)return ft;if(!N(Ae))return Ae;var yt=S(Ae);if(yt){if(ft=m(Ae),!qn)return o(Ae,ft)}else{var qe=p(Ae),He=qe==B||qe==F;if(w(Ae))return s(Ae,qn);if(qe==X||qe==P||He&&!Qt){if(ft=Dn||He?{}:x(Ae),!qn)return Dn?u(Ae,i(ft,Ae)):l(Ae,r(ft,Ae))}else{if(!ke[qe])return Qt?Ae:{};ft=y(Ae,qe,qn)}}Tt||(Tt=new e);var oi=Tt.get(Ae);if(oi)return oi;Tt.set(Ae,ft),k(Ae)?Ae.forEach(function(dn){ft.add(rt(dn,Jt,un,dn,Ae,Tt))}):E(Ae)&&Ae.forEach(function(dn,wn){ft.set(wn,rt(dn,Jt,un,wn,Ae,Tt))});var Bt=xn?Dn?h:d:Dn?A:T,en=yt?void 0:Bt(Ae);return t(en||Ae,function(dn,wn){en&&(wn=dn,dn=Ae[wn]),n(ft,wn,rt(dn,Jt,un,wn,Ae,Tt))}),ft}return ux=rt,ux}var dx,Wj;function oue(){if(Wj)return dx;Wj=1;var e=mV(),t=4;function n(r){return e(r,t)}return dx=n,dx}var fx,Yj;function e2(){if(Yj)return fx;Yj=1;function e(t){return function(){return t}}return fx=e,fx}var hx,Xj;function aue(){if(Xj)return hx;Xj=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return hx=e,hx}var px,Zj;function t2(){if(Zj)return px;Zj=1;var e=aue(),t=e();return px=t,px}var mx,Jj;function n2(){if(Jj)return mx;Jj=1;var e=t2(),t=Eo();function n(r,i){return r&&e(r,i,t)}return mx=n,mx}var gx,Qj;function lue(){if(Qj)return gx;Qj=1;var e=ms();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return gx=t,gx}var yx,e3;function tg(){if(e3)return yx;e3=1;var e=n2(),t=lue(),n=t(e);return yx=n,yx}var vx,t3;function qa(){if(t3)return vx;t3=1;function e(t){return t}return vx=e,vx}var bx,n3;function gV(){if(n3)return bx;n3=1;var e=qa();function t(n){return typeof n=="function"?n:e}return bx=t,bx}var xx,r3;function yV(){if(r3)return xx;r3=1;var e=Kk(),t=tg(),n=gV(),r=Wt();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return xx=i,xx}var wx,i3;function vV(){return i3||(i3=1,wx=yV()),wx}var Sx,s3;function cue(){if(s3)return Sx;s3=1;var e=tg();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return Sx=t,Sx}var Cx,o3;function uue(){if(o3)return Cx;o3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Cx=t,Cx}var Ex,a3;function due(){if(a3)return Ex;a3=1;function e(t){return this.__data__.has(t)}return Ex=e,Ex}var kx,l3;function bV(){if(l3)return kx;l3=1;var e=Gk(),t=uue(),n=due();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,kx=r,kx}var Nx,c3;function fue(){if(c3)return Nx;c3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return Nx=e,Nx}var Tx,u3;function xV(){if(u3)return Tx;u3=1;function e(t,n){return t.has(n)}return Tx=e,Tx}var Ax,d3;function wV(){if(d3)return Ax;d3=1;var e=bV(),t=fue(),n=xV(),r=1,i=2;function s(o,l,u,d,h,p){var m=u&r,y=o.length,x=l.length;if(y!=x&&!(m&&x>y))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var E=-1,N=!0,k=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++E<y;){var T=o[E],A=l[E];if(d)var _=m?d(A,T,E,l,o,p):d(T,A,E,o,l,p);if(_!==void 0){if(_)continue;N=!1;break}if(k){if(!t(l,function(O,D){if(!n(k,D)&&(T===O||h(T,O,u,d,p)))return k.push(D)})){N=!1;break}}else if(!(T===A||h(T,A,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return Ax=s,Ax}var Mx,f3;function hue(){if(f3)return Mx;f3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return Mx=e,Mx}var _x,h3;function r2(){if(h3)return _x;h3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return _x=e,_x}var Dx,p3;function pue(){if(p3)return Dx;p3=1;var e=hc(),t=dV(),n=fc(),r=wV(),i=hue(),s=r2(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",y="[object RegExp]",x="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",N="[object DataView]",k=e?e.prototype:void 0,T=k?k.valueOf:void 0;function A(_,O,D,P,H,V,L){switch(D){case N:if(_.byteLength!=O.byteLength||_.byteOffset!=O.byteOffset)return!1;_=_.buffer,O=O.buffer;case E:return!(_.byteLength!=O.byteLength||!V(new t(_),new t(O)));case u:case d:case m:return n(+_,+O);case h:return _.name==O.name&&_.message==O.message;case y:case S:return _==O+"";case p:var G=i;case x:var B=P&o;if(G||(G=s),_.size!=O.size&&!B)return!1;var F=L.get(_);if(F)return F==O;P|=l,L.set(_,O);var I=r(G(_),G(O),P,H,V,L);return L.delete(_),I;case w:if(T)return T.call(_)==T.call(O)}return!1}return Dx=A,Dx}var Rx,m3;function mue(){if(m3)return Rx;m3=1;var e=cV(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,m=e(s),y=m.length,x=e(o),S=x.length;if(y!=S&&!p)return!1;for(var w=y;w--;){var E=m[w];if(!(p?E in o:r.call(o,E)))return!1}var N=h.get(s),k=h.get(o);if(N&&k)return N==o&&k==s;var T=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<y;){E=m[w];var _=s[E],O=o[E];if(u)var D=p?u(O,_,E,o,s,h):u(_,O,E,s,o,h);if(!(D===void 0?_===O||d(_,O,l,u,h):D)){T=!1;break}A||(A=E=="constructor")}if(T&&!A){var P=s.constructor,H=o.constructor;P!=H&&"constructor"in s&&"constructor"in o&&!(typeof P=="function"&&P instanceof P&&typeof H=="function"&&H instanceof H)&&(T=!1)}return h.delete(s),h.delete(o),T}return Rx=i,Rx}var Ox,g3;function gue(){if(g3)return Ox;g3=1;var e=Wm(),t=wV(),n=pue(),r=mue(),i=mc(),s=Wt(),o=pc(),l=Kd(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype,y=m.hasOwnProperty;function x(S,w,E,N,k,T){var A=s(S),_=s(w),O=A?h:i(S),D=_?h:i(w);O=O==d?p:O,D=D==d?p:D;var P=O==p,H=D==p,V=O==D;if(V&&o(S)){if(!o(w))return!1;A=!0,P=!1}if(V&&!P)return T||(T=new e),A||l(S)?t(S,w,E,N,k,T):n(S,w,O,E,N,k,T);if(!(E&u)){var L=P&&y.call(S,"__wrapped__"),G=H&&y.call(w,"__wrapped__");if(L||G){var B=L?S.value():S,F=G?w.value():w;return T||(T=new e),k(B,F,E,N,T)}}return V?(T||(T=new e),r(S,w,E,N,k,T)):!1}return Ox=x,Ox}var jx,y3;function SV(){if(y3)return jx;y3=1;var e=gue(),t=Di();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return jx=n,jx}var Lx,v3;function yue(){if(v3)return Lx;v3=1;var e=Wm(),t=SV(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var m=l[d];if(p&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++d<h;){m=l[d];var y=m[0],x=s[y],S=m[1];if(p&&m[2]){if(x===void 0&&!(y in s))return!1}else{var w=new e;if(u)var E=u(x,S,y,s,o,w);if(!(E===void 0?t(S,x,n|r,u,w):E))return!1}}return!0}return Lx=i,Lx}var Px,b3;function CV(){if(b3)return Px;b3=1;var e=Vr();function t(n){return n===n&&!e(n)}return Px=t,Px}var Ix,x3;function vue(){if(x3)return Ix;x3=1;var e=CV(),t=Eo();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return Ix=n,Ix}var Bx,w3;function EV(){if(w3)return Bx;w3=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Bx=e,Bx}var zx,S3;function bue(){if(S3)return zx;S3=1;var e=yue(),t=vue(),n=EV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return zx=r,zx}var qx,C3;function gc(){if(C3)return qx;C3=1;var e=Ia(),t=Di(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return qx=r,qx}var Vx,E3;function i2(){if(E3)return Vx;E3=1;var e=Wt(),t=gc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Vx=i,Vx}var Hx,k3;function xue(){if(k3)return Hx;k3=1;var e=Gk(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,Hx=n,Hx}var Fx,N3;function wue(){if(N3)return Fx;N3=1;var e=xue(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return Fx=n,Fx}var $x,T3;function Sue(){if(T3)return $x;T3=1;var e=wue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return $x=r,$x}var Ux,A3;function ng(){if(A3)return Ux;A3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Ux=e,Ux}var Gx,M3;function Cue(){if(M3)return Gx;M3=1;var e=hc(),t=ng(),n=Wt(),r=gc(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return Gx=o,Gx}var Kx,_3;function kV(){if(_3)return Kx;_3=1;var e=Cue();function t(n){return n==null?"":e(n)}return Kx=t,Kx}var Wx,D3;function rg(){if(D3)return Wx;D3=1;var e=Wt(),t=i2(),n=Sue(),r=kV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return Wx=i,Wx}var Yx,R3;function Wd(){if(R3)return Yx;R3=1;var e=gc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Yx=t,Yx}var Xx,O3;function ig(){if(O3)return Xx;O3=1;var e=rg(),t=Wd();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return Xx=n,Xx}var Zx,j3;function Eue(){if(j3)return Zx;j3=1;var e=ig();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Zx=t,Zx}var Jx,L3;function kue(){if(L3)return Jx;L3=1;function e(t,n){return t!=null&&n in Object(t)}return Jx=e,Jx}var Qx,P3;function NV(){if(P3)return Qx;P3=1;var e=rg(),t=Gd(),n=Wt(),r=Zm(),i=Wk(),s=Wd();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,m=!1;++h<p;){var y=s(u[h]);if(!(m=l!=null&&d(l,y)))break;l=l[y]}return m||++h!=p?m:(p=l==null?0:l.length,!!p&&i(p)&&r(y,p)&&(n(l)||t(l)))}return Qx=o,Qx}var e1,I3;function TV(){if(I3)return e1;I3=1;var e=kue(),t=NV();function n(r,i){return r!=null&&t(r,i,e)}return e1=n,e1}var t1,B3;function Nue(){if(B3)return t1;B3=1;var e=SV(),t=Eue(),n=TV(),r=i2(),i=CV(),s=EV(),o=Wd(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(m){var y=t(m,h);return y===void 0&&y===p?n(m,h):e(p,y,l|u)}}return t1=d,t1}var n1,z3;function AV(){if(z3)return n1;z3=1;function e(t){return function(n){return n?.[t]}}return n1=e,n1}var r1,q3;function Tue(){if(q3)return r1;q3=1;var e=ig();function t(n){return function(r){return e(r,n)}}return r1=t,r1}var i1,V3;function Aue(){if(V3)return i1;V3=1;var e=AV(),t=Tue(),n=i2(),r=Wd();function i(s){return n(s)?e(r(s)):t(s)}return i1=i,i1}var s1,H3;function gs(){if(H3)return s1;H3=1;var e=bue(),t=Nue(),n=qa(),r=Wt(),i=Aue();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return s1=s,s1}var o1,F3;function MV(){if(F3)return o1;F3=1;var e=sV(),t=cue(),n=gs(),r=Wt();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return o1=i,o1}var a1,$3;function Mue(){if($3)return a1;$3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return a1=n,a1}var l1,U3;function _V(){if(U3)return l1;U3=1;var e=Mue(),t=NV();function n(r,i){return r!=null&&t(r,i,e)}return l1=n,l1}var c1,G3;function _ue(){if(G3)return c1;G3=1;var e=Xk(),t=mc(),n=Gd(),r=Wt(),i=ms(),s=pc(),o=Qm(),l=Kd(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function m(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||l(y)||n(y)))return!y.length;var x=t(y);if(x==u||x==d)return!y.size;if(o(y))return!e(y).length;for(var S in y)if(p.call(y,S))return!1;return!0}return c1=m,c1}var u1,K3;function DV(){if(K3)return u1;K3=1;function e(t){return t===void 0}return u1=e,u1}var d1,W3;function RV(){if(W3)return d1;W3=1;var e=tg(),t=ms();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return d1=n,d1}var f1,Y3;function OV(){if(Y3)return f1;Y3=1;var e=ng(),t=gs(),n=RV(),r=Wt();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return f1=i,f1}var h1,X3;function Due(){if(X3)return h1;X3=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return h1=e,h1}var p1,Z3;function Rue(){if(Z3)return p1;Z3=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return p1=e,p1}var m1,J3;function jV(){if(J3)return m1;J3=1;var e=Due(),t=tg(),n=gs(),r=Rue(),i=Wt();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return m1=s,m1}var g1,Q3;function Oue(){if(Q3)return g1;Q3=1;var e=Ia(),t=Wt(),n=Di(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return g1=i,g1}var y1,e4;function jue(){if(e4)return y1;e4=1;var e=AV(),t=e("length");return y1=t,y1}var v1,t4;function Lue(){if(t4)return v1;t4=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return v1=u,v1}var b1,n4;function Pue(){if(n4)return b1;n4=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=d+"?",S="["+s+"]?",w="(?:"+y+"(?:"+[h,p,m].join("|")+")"+S+x+")*",E=S+x+w,N="(?:"+[h+l+"?",l,p,m,o].join("|")+")",k=RegExp(u+"(?="+u+")|"+N+E,"g");function T(A){for(var _=k.lastIndex=0;k.test(A);)++_;return _}return b1=T,b1}var x1,r4;function Iue(){if(r4)return x1;r4=1;var e=jue(),t=Lue(),n=Pue();function r(i){return t(i)?n(i):e(i)}return x1=r,x1}var w1,i4;function Bue(){if(i4)return w1;i4=1;var e=Xk(),t=mc(),n=ms(),r=Oue(),i=Iue(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return w1=l,w1}var S1,s4;function zue(){if(s4)return S1;s4=1;var e=Kk(),t=hV(),n=n2(),r=gs(),i=eg(),s=Wt(),o=pc(),l=$d(),u=Vr(),d=Kd();function h(p,m,y){var x=s(p),S=x||o(p)||d(p);if(m=r(m,4),y==null){var w=p&&p.constructor;S?y=x?new w:[]:u(p)?y=l(w)?t(i(p)):{}:y={}}return(S?e:n)(p,function(E,N,k){return m(y,E,N,k)}),y}return S1=h,S1}var C1,o4;function que(){if(o4)return C1;o4=1;var e=hc(),t=Gd(),n=Wt(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return C1=i,C1}var E1,a4;function s2(){if(a4)return E1;a4=1;var e=Jk(),t=que();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return E1=n,E1}var k1,l4;function Vue(){if(l4)return k1;l4=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return k1=e,k1}var N1,c4;function LV(){if(c4)return N1;c4=1;var e=Vue(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return N1=n,N1}var T1,u4;function Hue(){if(u4)return T1;u4=1;var e=e2(),t=eV(),n=qa(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return T1=r,T1}var A1,d4;function Fue(){if(d4)return A1;d4=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return A1=r,A1}var M1,f4;function PV(){if(f4)return M1;f4=1;var e=Hue(),t=Fue(),n=t(e);return M1=n,M1}var _1,h4;function sg(){if(h4)return _1;h4=1;var e=qa(),t=LV(),n=PV();function r(i,s){return n(t(i,s,e),i+"")}return _1=r,_1}var D1,p4;function IV(){if(p4)return D1;p4=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return D1=e,D1}var R1,m4;function $ue(){if(m4)return R1;m4=1;function e(t){return t!==t}return R1=e,R1}var O1,g4;function Uue(){if(g4)return O1;g4=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return O1=e,O1}var j1,y4;function Gue(){if(y4)return j1;y4=1;var e=IV(),t=$ue(),n=Uue();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return j1=r,j1}var L1,v4;function Kue(){if(v4)return L1;v4=1;var e=Gue();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return L1=t,L1}var P1,b4;function Wue(){if(b4)return P1;b4=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return P1=e,P1}var I1,x4;function Yue(){if(x4)return I1;x4=1;function e(){}return I1=e,I1}var B1,w4;function Xue(){if(w4)return B1;w4=1;var e=uV(),t=Yue(),n=r2(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return B1=i,B1}var z1,S4;function Zue(){if(S4)return z1;S4=1;var e=bV(),t=Kue(),n=Wue(),r=xV(),i=Xue(),s=r2(),o=200;function l(u,d,h){var p=-1,m=t,y=u.length,x=!0,S=[],w=S;if(h)x=!1,m=n;else if(y>=o){var E=d?null:i(u);if(E)return s(E);x=!1,m=r,w=new e}else w=d?[]:S;e:for(;++p<y;){var N=u[p],k=d?d(N):N;if(N=h||N!==0?N:0,x&&k===k){for(var T=w.length;T--;)if(w[T]===k)continue e;d&&w.push(k),S.push(N)}else m(w,k,h)||(w!==S&&w.push(k),S.push(N))}return S}return z1=l,z1}var q1,C4;function BV(){if(C4)return q1;C4=1;var e=ms(),t=Di();function n(r){return t(r)&&e(r)}return q1=n,q1}var V1,E4;function Jue(){if(E4)return V1;E4=1;var e=s2(),t=sg(),n=Zue(),r=BV(),i=t(function(s){return n(e(s,1,r,!0))});return V1=i,V1}var H1,k4;function Que(){if(k4)return H1;k4=1;var e=ng();function t(n,r){return e(r,function(i){return n[i]})}return H1=t,H1}var F1,N4;function zV(){if(N4)return F1;N4=1;var e=Que(),t=Eo();function n(r){return r==null?[]:e(r,t(r))}return F1=n,F1}var $1,T4;function Hr(){if(T4)return $1;T4=1;var e;if(typeof $k=="function")try{e={clone:oue(),constant:e2(),each:vV(),filter:MV(),has:_V(),isArray:Wt(),isEmpty:_ue(),isFunction:$d(),isUndefined:DV(),keys:Eo(),map:OV(),reduce:jV(),size:Bue(),transform:zue(),union:Jue(),values:zV()}}catch{}return e||(e=window._),$1=e,$1}var U1,A4;function o2(){if(A4)return U1;A4=1;var e=Hr();U1=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var m=arguments,y=this;return e.each(h,function(x){m.length>1?y.setNode(x,p):y.setNode(x)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var m=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(y){p.setParent(y)}),delete this._children[h]),e.each(e.keys(this._in[h]),m),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),m),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var m=p;!e.isUndefined(m);m=this.parent(m))if(m===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,m.edge(S))});var y={};function x(S){var w=m.parent(S);return w===void 0||p.hasNode(w)?(y[S]=w,w):w in y?y[w]:x(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,x(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var m=this,y=arguments;return e.reduce(h,function(x,S){return y.length>1?m.setEdge(x,S,p):m.setEdge(x,S),S}),this},i.prototype.setEdge=function(){var h,p,m,y,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,m=S.name,arguments.length===2&&(y=arguments[1],x=!0)):(h=S,p=arguments[1],m=arguments[3],arguments.length>2&&(y=arguments[2],x=!0)),h=""+h,p=""+p,e.isUndefined(m)||(m=""+m);var w=l(this._isDirected,h,p,m);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=y),this;if(!e.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=x?y:this._defaultEdgeLabelFn(h,p,m);var E=u(this._isDirected,h,p,m);return h=E.v,p=E.w,Object.freeze(E),this._edgeObjs[w]=E,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=E,this._out[h][w]=E,this._edgeCount++,this},i.prototype.edge=function(h,p,m){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,m);return this._edgeLabels[y]},i.prototype.hasEdge=function(h,p,m){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,m);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(h,p,m){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,m),x=this._edgeObjs[y];return x&&(h=x.v,p=x.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][y],delete this._out[h][y],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var m=this._in[h];if(m){var y=e.values(m);return p?e.filter(y,function(x){return x.v===p}):y}},i.prototype.outEdges=function(h,p){var m=this._out[h];if(m){var y=e.values(m);return p?e.filter(y,function(x){return x.w===p}):y}},i.prototype.nodeEdges=function(h,p){var m=this.inEdges(h,p);if(m)return m.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,m,y){var x=""+p,S=""+m;if(!h&&x>S){var w=x;x=S,S=w}return x+r+S+r+(e.isUndefined(y)?t:y)}function u(h,p,m,y){var x=""+p,S=""+m;if(!h&&x>S){var w=x;x=S,S=w}var E={v:x,w:S};return y&&(E.name=y),E}function d(h,p){return l(h,p.v,p.w,p.name)}return U1}var G1,M4;function ede(){return M4||(M4=1,G1="2.1.8"),G1}var K1,_4;function tde(){return _4||(_4=1,K1={Graph:o2(),version:ede()}),K1}var W1,D4;function nde(){if(D4)return W1;D4=1;var e=Hr(),t=o2();W1={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return W1}var Y1,R4;function rde(){if(R4)return Y1;R4=1;var e=Hr();Y1=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return Y1}var X1,O4;function qV(){if(O4)return X1;O4=1;var e=Hr();X1=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},X1}var Z1,j4;function VV(){if(j4)return Z1;j4=1;var e=Hr(),t=qV();Z1=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,m,y=function(x){var S=x.v!==p?x.v:x.w,w=d[S],E=l(x),N=m.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+E);N<w.distance&&(w.distance=N,w.predecessor=p,h.decrease(S,N))};for(s.nodes().forEach(function(x){var S=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:S},h.add(x,S)});h.size()>0&&(p=h.removeMin(),m=d[p],m.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(y);return d}return Z1}var J1,L4;function ide(){if(L4)return J1;L4=1;var e=VV(),t=Hr();J1=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return J1}var Q1,P4;function HV(){if(P4)return Q1;P4=1;var e=Hr();Q1=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(m){e.has(s,m)?s[m].onStack&&(d.lowlink=Math.min(d.lowlink,s[m].index)):(l(m),d.lowlink=Math.min(d.lowlink,s[m].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return Q1}var ew,I4;function sde(){if(I4)return ew;I4=1;var e=Hr(),t=HV();ew=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return ew}var tw,B4;function ode(){if(B4)return tw;B4=1;var e=Hr();tw=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,m=s(h);l[d][p]={distance:m,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var m=l[p];u.forEach(function(y){var x=m[d],S=h[y],w=m[y],E=x.distance+S.distance;E<w.distance&&(w.distance=E,w.predecessor=S.predecessor)})})}),l}return tw}var nw,z4;function FV(){if(z4)return nw;z4=1;var e=Hr();nw=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,nw}var rw,q4;function ade(){if(q4)return rw;q4=1;var e=FV();rw=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return rw}var iw,V4;function $V(){if(V4)return iw;V4=1;var e=Hr();iw=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return iw}var sw,H4;function lde(){if(H4)return sw;H4=1;var e=$V();sw=t;function t(n,r){return e(n,r,"post")}return sw}var ow,F4;function cde(){if(F4)return ow;F4=1;var e=$V();ow=t;function t(n,r){return e(n,r,"pre")}return ow}var aw,$4;function ude(){if($4)return aw;$4=1;var e=Hr(),t=o2(),n=qV();aw=r;function r(i,s){var o=new t,l={},u=new n,d;function h(m){var y=m.v===d?m.w:m.v,x=u.priority(y);if(x!==void 0){var S=s(m);S<x&&(l[y]=d,u.decrease(y,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(m){u.add(m,Number.POSITIVE_INFINITY),o.setNode(m)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return aw}var lw,U4;function dde(){return U4||(U4=1,lw={components:rde(),dijkstra:VV(),dijkstraAll:ide(),findCycles:sde(),floydWarshall:ode(),isAcyclic:ade(),postorder:lde(),preorder:cde(),prim:ude(),tarjan:HV(),topsort:FV()}),lw}var cw,G4;function fde(){if(G4)return cw;G4=1;var e=tde();return cw={Graph:e.Graph,json:nde(),alg:dde(),version:e.version},cw}var uw,K4;function ri(){if(K4)return uw;K4=1;var e;if(typeof $k=="function")try{e=fde()}catch{}return e||(e=window.graphlib),uw=e,uw}var dw,W4;function hde(){if(W4)return dw;W4=1;var e=mV(),t=1,n=4;function r(i){return e(i,t|n)}return dw=r,dw}var fw,Y4;function og(){if(Y4)return fw;Y4=1;var e=fc(),t=ms(),n=Zm(),r=Vr();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return fw=i,fw}var hw,X4;function pde(){if(X4)return hw;X4=1;var e=sg(),t=fc(),n=og(),r=za(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var m=u[d],y=r(m),x=-1,S=y.length;++x<S;){var w=y[x],E=l[w];(E===void 0||t(E,i[w])&&!s.call(l,w))&&(l[w]=m[w])}return l});return hw=o,hw}var pw,Z4;function mde(){if(Z4)return pw;Z4=1;var e=gs(),t=ms(),n=Eo();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return pw=r,pw}var mw,J4;function gde(){if(J4)return mw;J4=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return mw=t,mw}var gw,Q4;function yde(){if(Q4)return gw;Q4=1;var e=gde(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return gw=n,gw}var yw,eL;function vde(){if(eL)return yw;eL=1;var e=yde(),t=Vr(),n=gc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return yw=u,yw}var vw,tL;function UV(){if(tL)return vw;tL=1;var e=vde(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return vw=r,vw}var bw,nL;function bde(){if(nL)return bw;nL=1;var e=UV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return bw=t,bw}var xw,rL;function xde(){if(rL)return xw;rL=1;var e=IV(),t=gs(),n=bde(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return xw=i,xw}var ww,iL;function wde(){if(iL)return ww;iL=1;var e=mde(),t=xde(),n=e(t);return ww=n,ww}var Sw,sL;function GV(){if(sL)return Sw;sL=1;var e=s2();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Sw=t,Sw}var Cw,oL;function Sde(){if(oL)return Cw;oL=1;var e=t2(),t=gV(),n=za();function r(i,s){return i==null?i:e(i,t(s),n)}return Cw=r,Cw}var Ew,aL;function Cde(){if(aL)return Ew;aL=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Ew=e,Ew}var kw,lL;function Ede(){if(lL)return kw;lL=1;var e=Ym(),t=n2(),n=gs();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return kw=r,kw}var Nw,cL;function a2(){if(cL)return Nw;cL=1;var e=gc();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return Nw=t,Nw}var Tw,uL;function kde(){if(uL)return Tw;uL=1;function e(t,n){return t>n}return Tw=e,Tw}var Aw,dL;function Nde(){if(dL)return Aw;dL=1;var e=a2(),t=kde(),n=qa();function r(i){return i&&i.length?e(i,n,t):void 0}return Aw=r,Aw}var Mw,fL;function KV(){if(fL)return Mw;fL=1;var e=Ym(),t=fc();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return Mw=n,Mw}var _w,hL;function Tde(){if(hL)return _w;hL=1;var e=Ia(),t=eg(),n=Di(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return _w=d,_w}var Dw,pL;function WV(){if(pL)return Dw;pL=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Dw=e,Dw}var Rw,mL;function Ade(){if(mL)return Rw;mL=1;var e=Ud(),t=za();function n(r){return e(r,t(r))}return Rw=n,Rw}var Ow,gL;function Mde(){if(gL)return Ow;gL=1;var e=KV(),t=rV(),n=fV(),r=iV(),i=pV(),s=Gd(),o=Wt(),l=BV(),u=pc(),d=$d(),h=Vr(),p=Tde(),m=Kd(),y=WV(),x=Ade();function S(w,E,N,k,T,A,_){var O=y(w,N),D=y(E,N),P=_.get(D);if(P){e(w,N,P);return}var H=A?A(O,D,N+"",w,E,_):void 0,V=H===void 0;if(V){var L=o(D),G=!L&&u(D),B=!L&&!G&&m(D);H=D,L||G||B?o(O)?H=O:l(O)?H=r(O):G?(V=!1,H=t(D,!0)):B?(V=!1,H=n(D,!0)):H=[]:p(D)||s(D)?(H=O,s(O)?H=x(O):(!h(O)||d(O))&&(H=i(D))):V=!1}V&&(_.set(D,H),T(H,D,k,A,_),_.delete(D)),e(w,N,H)}return Ow=S,Ow}var jw,yL;function _de(){if(yL)return jw;yL=1;var e=Wm(),t=KV(),n=t2(),r=Mde(),i=Vr(),s=za(),o=WV();function l(u,d,h,p,m){u!==d&&n(d,function(y,x){if(m||(m=new e),i(y))r(u,d,x,h,l,p,m);else{var S=p?p(o(u,x),y,x+"",u,d,m):void 0;S===void 0&&(S=y),t(u,x,S)}},s)}return jw=l,jw}var Lw,vL;function Dde(){if(vL)return Lw;vL=1;var e=sg(),t=og();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return Lw=n,Lw}var Pw,bL;function Rde(){if(bL)return Pw;bL=1;var e=_de(),t=Dde(),n=t(function(r,i,s){e(r,i,s)});return Pw=n,Pw}var Iw,xL;function YV(){if(xL)return Iw;xL=1;function e(t,n){return t<n}return Iw=e,Iw}var Bw,wL;function Ode(){if(wL)return Bw;wL=1;var e=a2(),t=YV(),n=qa();function r(i){return i&&i.length?e(i,n,t):void 0}return Bw=r,Bw}var zw,SL;function jde(){if(SL)return zw;SL=1;var e=a2(),t=gs(),n=YV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return zw=r,zw}var qw,CL;function Lde(){if(CL)return qw;CL=1;var e=si(),t=function(){return e.Date.now()};return qw=t,qw}var Vw,EL;function Pde(){if(EL)return Vw;EL=1;var e=Xm(),t=rg(),n=Zm(),r=Vr(),i=Wd();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,m=p-1,y=o;y!=null&&++h<p;){var x=i(l[h]),S=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(h!=m){var w=y[x];S=d?d(w,x,y):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(y,x,S),y=y[x]}return o}return Vw=s,Vw}var Hw,kL;function Ide(){if(kL)return Hw;kL=1;var e=ig(),t=Pde(),n=rg();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return Hw=r,Hw}var Fw,NL;function Bde(){if(NL)return Fw;NL=1;var e=Ide(),t=TV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return Fw=n,Fw}var $w,TL;function zde(){if(TL)return $w;TL=1;var e=GV(),t=LV(),n=PV();function r(i){return n(t(i,void 0,e),i+"")}return $w=r,$w}var Uw,AL;function qde(){if(AL)return Uw;AL=1;var e=Bde(),t=zde(),n=t(function(r,i){return r==null?{}:e(r,i)});return Uw=n,Uw}var Gw,ML;function Vde(){if(ML)return Gw;ML=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return Gw=n,Gw}var Kw,_L;function Hde(){if(_L)return Kw;_L=1;var e=Vde(),t=og(),n=UV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return Kw=r,Kw}var Ww,DL;function Fde(){if(DL)return Ww;DL=1;var e=Hde(),t=e();return Ww=t,Ww}var Yw,RL;function $de(){if(RL)return Yw;RL=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Yw=e,Yw}var Xw,OL;function Ude(){if(OL)return Xw;OL=1;var e=gc();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return Xw=t,Xw}var Zw,jL;function Gde(){if(jL)return Zw;jL=1;var e=Ude();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return Zw=t,Zw}var Jw,LL;function Kde(){if(LL)return Jw;LL=1;var e=ng(),t=ig(),n=gs(),r=RV(),i=$de(),s=Jm(),o=Gde(),l=qa(),u=Wt();function d(h,p,m){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var y=-1;p=e(p,s(n));var x=r(h,function(S,w,E){var N=e(p,function(k){return k(S)});return{criteria:N,index:++y,value:S}});return i(x,function(S,w){return o(S,w,m)})}return Jw=d,Jw}var Qw,PL;function Wde(){if(PL)return Qw;PL=1;var e=s2(),t=Kde(),n=sg(),r=og(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Qw=i,Qw}var eS,IL;function Yde(){if(IL)return eS;IL=1;var e=kV(),t=0;function n(r){var i=++t;return e(r)+i}return eS=n,eS}var tS,BL;function Xde(){if(BL)return tS;BL=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return tS=e,tS}var nS,zL;function Zde(){if(zL)return nS;zL=1;var e=Xm(),t=Xde();function n(r,i){return t(r||[],i||[],e)}return nS=n,nS}var rS,qL;function St(){if(qL)return rS;qL=1;var e;if(typeof $k=="function")try{e={cloneDeep:hde(),constant:e2(),defaults:pde(),each:vV(),filter:MV(),find:wde(),flatten:GV(),forEach:yV(),forIn:Sde(),has:_V(),isUndefined:DV(),last:Cde(),map:OV(),mapValues:Ede(),max:Nde(),merge:Rde(),min:Ode(),minBy:jde(),now:Lde(),pick:qde(),range:Fde(),reduce:jV(),sortBy:Wde(),uniqueId:Yde(),values:zV(),zipObject:Zde()}}catch{}return e||(e=window._),rS=e,rS}var iS,VL;function Jde(){if(VL)return iS;VL=1,iS=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return iS}var sS,HL;function Qde(){if(HL)return sS;HL=1;var e=St(),t=ri().Graph,n=Jde();sS=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),m=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(m,function(y){return d.outEdges(y.v,y.w)}),!0)}function s(d,h,p){for(var m=[],y=h[h.length-1],x=h[0],S;d.nodeCount();){for(;S=x.dequeue();)o(d,h,p,S);for(;S=y.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){m=m.concat(o(d,h,p,S,!0));break}}}return m}function o(d,h,p,m,y){var x=y?[]:void 0;return e.forEach(d.inEdges(m.v),function(S){var w=d.edge(S),E=d.node(S.v);y&&x.push({v:S.v,w:S.w}),E.out-=w,u(h,p,E)}),e.forEach(d.outEdges(m.v),function(S){var w=d.edge(S),E=S.w,N=d.node(E);N.in-=w,u(h,p,N)}),d.removeNode(m.v),x}function l(d,h){var p=new t,m=0,y=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var E=p.edge(w.v,w.w)||0,N=h(w),k=E+N;p.setEdge(w.v,w.w,k),y=Math.max(y,p.node(w.v).out+=N),m=Math.max(m,p.node(w.w).in+=N)});var x=e.range(y+m+3).map(function(){return new n}),S=m+1;return e.forEach(p.nodes(),function(w){u(x,S,p.node(w))}),{graph:p,buckets:x,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return sS}var oS,FL;function efe(){if(FL)return oS;FL=1;var e=St(),t=Qde();oS={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return oS}var aS,$L;function Zn(){if($L)return aS;$L=1;var e=St(),t=ri().Graph;aS={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:m,partition:y,time:x,notime:S};function n(w,E,N,k){var T;do T=e.uniqueId(k);while(w.hasNode(T));return N.dummy=E,w.setNode(T,N),T}function r(w){var E=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(N){E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){var k=E.edge(N.v,N.w)||{weight:0,minlen:1},T=w.edge(N);E.setEdge(N.v,N.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),E}function i(w){var E=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(N){w.children(N).length||E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){E.setEdge(N,w.edge(N))}),E}function s(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.outEdges(N),function(T){k[T.w]=(k[T.w]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function o(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.inEdges(N),function(T){k[T.v]=(k[T.v]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function l(w,E){var N=w.x,k=w.y,T=E.x-N,A=E.y-k,_=w.width/2,O=w.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var D,P;return Math.abs(A)*_>Math.abs(T)*O?(A<0&&(O=-O),D=O*T/A,P=O):(T<0&&(_=-_),D=_,P=_*A/T),{x:N+D,y:k+P}}function u(w){var E=e.map(e.range(m(w)+1),function(){return[]});return e.forEach(w.nodes(),function(N){var k=w.node(N),T=k.rank;e.isUndefined(T)||(E[T][k.order]=N)}),E}function d(w){var E=e.min(e.map(w.nodes(),function(N){return w.node(N).rank}));e.forEach(w.nodes(),function(N){var k=w.node(N);e.has(k,"rank")&&(k.rank-=E)})}function h(w){var E=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),N=[];e.forEach(w.nodes(),function(A){var _=w.node(A).rank-E;N[_]||(N[_]=[]),N[_].push(A)});var k=0,T=w.graph().nodeRankFactor;e.forEach(N,function(A,_){e.isUndefined(A)&&_%T!==0?--k:k&&e.forEach(A,function(O){w.node(O).rank+=k})})}function p(w,E,N,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=N,T.order=k),n(w,"border",T,E)}function m(w){return e.max(e.map(w.nodes(),function(E){var N=w.node(E).rank;if(!e.isUndefined(N))return N}))}function y(w,E){var N={lhs:[],rhs:[]};return e.forEach(w,function(k){E(k)?N.lhs.push(k):N.rhs.push(k)}),N}function x(w,E){var N=e.now();try{return E()}finally{console.log(w+" time: "+(e.now()-N)+"ms")}}function S(w,E){return E()}return aS}var lS,UL;function tfe(){if(UL)return lS;UL=1;var e=St(),t=Zn();lS={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,m=s.edge(o),y=m.labelRank;if(h!==u+1){s.removeEdge(o);var x,S,w;for(w=0,++u;u<h;++w,++u)m.points=[],S={width:0,height:0,edgeLabel:m,edgeObj:o,rank:u},x=t.addDummyNode(s,"edge",S,"_d"),u===y&&(S.width=m.width,S.height=m.height,S.dummy="edge-label",S.labelpos=m.labelpos),s.setEdge(l,x,{weight:m.weight},p),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:m.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return lS}var cS,GL;function nm(){if(GL)return cS;GL=1;var e=St();cS={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return cS}var uS,KL;function XV(){if(KL)return uS;KL=1;var e=St(),t=ri().Graph,n=nm().slack;uS=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,m;i(u,l)<h;)p=s(u,l),m=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,m);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var m=p.v,y=h===m?p.w:m;!l.hasNode(y)&&!n(u,p)&&(l.setNode(y,{}),l.setEdge(h,y,{}),d(y))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return uS}var dS,WL;function nfe(){if(WL)return dS;WL=1;var e=St(),t=XV(),n=nm().slack,r=nm().longestPath,i=ri().alg.preorder,s=ri().alg.postorder,o=Zn().simplify;dS=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=y,l.enterEdge=x,l.exchangeEdges=S;function l(k){k=o(k),r(k);var T=t(k);p(T),u(T,k);for(var A,_;A=y(T);)_=x(T,k,A),S(T,k,A,_)}function u(k,T){var A=s(k,k.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(_){d(k,T,_)})}function d(k,T,A){var _=k.node(A),O=_.parent;k.edge(A,O).cutvalue=h(k,T,A)}function h(k,T,A){var _=k.node(A),O=_.parent,D=!0,P=T.edge(A,O),H=0;return P||(D=!1,P=T.edge(O,A)),H=P.weight,e.forEach(T.nodeEdges(A),function(V){var L=V.v===A,G=L?V.w:V.v;if(G!==O){var B=L===D,F=T.edge(V).weight;if(H+=B?F:-F,E(k,A,G)){var I=k.edge(A,G).cutvalue;H+=B?-I:I}}}),H}function p(k,T){arguments.length<2&&(T=k.nodes()[0]),m(k,{},1,T)}function m(k,T,A,_,O){var D=A,P=k.node(_);return T[_]=!0,e.forEach(k.neighbors(_),function(H){e.has(T,H)||(A=m(k,T,A,H,_))}),P.low=D,P.lim=A++,O?P.parent=O:delete P.parent,A}function y(k){return e.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function x(k,T,A){var _=A.v,O=A.w;T.hasEdge(_,O)||(_=A.w,O=A.v);var D=k.node(_),P=k.node(O),H=D,V=!1;D.lim>P.lim&&(H=P,V=!0);var L=e.filter(T.edges(),function(G){return V===N(k,k.node(G.v),H)&&V!==N(k,k.node(G.w),H)});return e.minBy(L,function(G){return n(T,G)})}function S(k,T,A,_){var O=A.v,D=A.w;k.removeEdge(O,D),k.setEdge(_.v,_.w,{}),p(k),u(k,T),w(k,T)}function w(k,T){var A=e.find(k.nodes(),function(O){return!T.node(O).parent}),_=i(k,A);_=_.slice(1),e.forEach(_,function(O){var D=k.node(O).parent,P=T.edge(O,D),H=!1;P||(P=T.edge(D,O),H=!0),T.node(O).rank=T.node(D).rank+(H?P.minlen:-P.minlen)})}function E(k,T,A){return k.hasEdge(T,A)}function N(k,T,A){return A.low<=T.lim&&T.lim<=A.lim}return dS}var fS,YL;function rfe(){if(YL)return fS;YL=1;var e=nm(),t=e.longestPath,n=XV(),r=nfe();fS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return fS}var hS,XL;function ife(){if(XL)return hS;XL=1;var e=St();hS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,m=0,y=h[m],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(y=h[m])!==p&&i.node(y).maxRank<l.rank;)m++;y===p&&(x=!1)}if(!x){for(;m<h.length-1&&i.node(y=h[m+1]).minRank<=l.rank;)m++;y=h[m]}i.setParent(o,y),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),m,y;m=o;do m=i.parent(m),u.push(m);while(m&&(s[m].low>h||p>s[m].lim));for(y=m,m=l;(m=i.parent(m))!==y;)d.push(m);return{path:u.concat(d.reverse()),lca:y}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return hS}var pS,ZL;function sfe(){if(ZL)return pS;ZL=1;var e=St(),t=Zn();pS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(y){l.edge(y).minlen*=p});var m=s(l)+1;e.forEach(l.children(),function(y){r(l,u,p,m,h,d,y)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,m,y){var x=l.children(y);if(!x.length){y!==u&&l.setEdge(u,y,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),E=l.node(y);l.setParent(S,y),E.borderTop=S,l.setParent(w,y),E.borderBottom=w,e.forEach(x,function(N){r(l,u,d,h,p,m,N);var k=l.node(N),T=k.borderTop?k.borderTop:N,A=k.borderBottom?k.borderBottom:N,_=k.borderTop?h:2*h,O=T!==A?1:p-m[y]+1;l.setEdge(S,T,{weight:_,minlen:O,nestingEdge:!0}),l.setEdge(A,w,{weight:_,minlen:O,nestingEdge:!0})}),l.parent(y)||l.setEdge(u,S,{weight:0,minlen:p+m[y]})}function i(l){var u={};function d(h,p){var m=l.children(h);m&&m.length&&e.forEach(m,function(y){d(y,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return pS}var mS,JL;function ofe(){if(JL)return mS;JL=1;var e=St(),t=Zn();mS=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],m=t.addDummyNode(i,"border",h,o);u[s][d]=m,i.setParent(m,l),p&&i.setEdge(p,m,{weight:1})}return mS}var gS,QL;function afe(){if(QL)return gS;QL=1;var e=St();gS={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return gS}var yS,e5;function lfe(){if(e5)return yS;e5=1;var e=St();yS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return yS}var vS,t5;function cfe(){if(t5)return vS;t5=1;var e=St();vS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(m,y){return y})),l=e.flatten(e.map(i,function(m){return e.sortBy(e.map(r.outEdges(m),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(m){var y=m.pos+u;h[y]+=m.weight;for(var x=0;y>0;)y%2&&(x+=h[y+1]),y=y-1>>1,h[y]+=m.weight;p+=m.weight*x})),p}return vS}var bS,n5;function ufe(){if(n5)return bS;n5=1;var e=St();bS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return bS}var xS,r5;function dfe(){if(r5)return xS;r5=1;var e=St();xS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return xS}var wS,i5;function ffe(){if(i5)return wS;i5=1;var e=St(),t=Zn();wS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,m=0,y=0;u.sort(i(!!o)),y=r(h,d,y),e.forEach(u,function(S){y+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,m+=S.weight,y=r(h,d,y)});var x={vs:e.flatten(h,!0)};return m&&(x.barycenter=p/m,x.weight=m),x}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return wS}var SS,s5;function hfe(){if(s5)return SS;s5=1;var e=St(),t=ufe(),n=dfe(),r=ffe();SS=i;function i(l,u,d,h){var p=l.children(u),m=l.node(u),y=m?m.borderLeft:void 0,x=m?m.borderRight:void 0,S={};y&&(p=e.filter(p,function(A){return A!==y&&A!==x}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,h);S[A.v]=_,e.has(_,"barycenter")&&o(A,_)}});var E=n(w,d);s(E,S);var N=r(E,h);if(y&&(N.vs=e.flatten([y,N.vs,x],!0),l.predecessors(y).length)){var k=l.node(l.predecessors(y)[0]),T=l.node(l.predecessors(x)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+k.order+T.order)/(N.weight+2),N.weight+=2}return N}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return SS}var CS,o5;function pfe(){if(o5)return CS;o5=1;var e=St(),t=ri().Graph;CS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(m){var y=m.v===d?m.w:m.v,x=u.edge(y,d),S=e.isUndefined(x)?0:x.weight;u.setEdge(y,d,{weight:i.edge(m).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return CS}var ES,a5;function mfe(){if(a5)return ES;a5=1;var e=St();ES=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return ES}var kS,l5;function gfe(){if(l5)return kS;l5=1;var e=St(),t=lfe(),n=cfe(),r=hfe(),i=pfe(),s=mfe(),o=ri().Graph,l=Zn();kS=u;function u(m){var y=l.maxRank(m),x=d(m,e.range(1,y+1),"inEdges"),S=d(m,e.range(y-1,-1,-1),"outEdges"),w=t(m);p(m,w);for(var E=Number.POSITIVE_INFINITY,N,k=0,T=0;T<4;++k,++T){h(k%2?x:S,k%4>=2),w=l.buildLayerMatrix(m);var A=n(m,w);A<E&&(T=0,N=e.cloneDeep(w),E=A)}p(m,N)}function d(m,y,x){return e.map(y,function(S){return i(m,S,x)})}function h(m,y){var x=new o;e.forEach(m,function(S){var w=S.graph().root,E=r(S,w,x,y);e.forEach(E.vs,function(N,k){S.node(N).order=k}),s(S,x,E.vs)})}function p(m,y){e.forEach(y,function(x){e.forEach(x,function(S,w){m.node(S).order=w})})}return kS}var NS,c5;function yfe(){if(c5)return NS;c5=1;var e=St(),t=ri().Graph,n=Zn();NS={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:m,findSmallestWidthAlignment:p,balance:y};function r(E,N){var k={};function T(A,_){var O=0,D=0,P=A.length,H=e.last(_);return e.forEach(_,function(V,L){var G=s(E,V),B=G?E.node(G).order:P;(G||V===H)&&(e.forEach(_.slice(D,L+1),function(F){e.forEach(E.predecessors(F),function(I){var q=E.node(I),X=q.order;(X<O||B<X)&&!(q.dummy&&E.node(F).dummy)&&o(k,I,F)})}),D=L+1,O=B)}),_}return e.reduce(N,T),k}function i(E,N){var k={};function T(_,O,D,P,H){var V;e.forEach(e.range(O,D),function(L){V=_[L],E.node(V).dummy&&e.forEach(E.predecessors(V),function(G){var B=E.node(G);B.dummy&&(B.order<P||B.order>H)&&o(k,G,V)})})}function A(_,O){var D=-1,P,H=0;return e.forEach(O,function(V,L){if(E.node(V).dummy==="border"){var G=E.predecessors(V);G.length&&(P=E.node(G[0]).order,T(O,H,L,D,P),H=L,D=P)}T(O,H,O.length,P,_.length)}),O}return e.reduce(N,A),k}function s(E,N){if(E.node(N).dummy)return e.find(E.predecessors(N),function(k){return E.node(k).dummy})}function o(E,N,k){if(N>k){var T=N;N=k,k=T}var A=E[N];A||(E[N]=A={}),A[k]=!0}function l(E,N,k){if(N>k){var T=N;N=k,k=T}return e.has(E[N],k)}function u(E,N,k,T){var A={},_={},O={};return e.forEach(N,function(D){e.forEach(D,function(P,H){A[P]=P,_[P]=P,O[P]=H})}),e.forEach(N,function(D){var P=-1;e.forEach(D,function(H){var V=T(H);if(V.length){V=e.sortBy(V,function(I){return O[I]});for(var L=(V.length-1)/2,G=Math.floor(L),B=Math.ceil(L);G<=B;++G){var F=V[G];_[H]===H&&P<O[F]&&!l(k,H,F)&&(_[F]=H,_[H]=A[H]=A[F],P=O[F])}}})}),{root:A,align:_}}function d(E,N,k,T,A){var _={},O=h(E,N,k,A),D=A?"borderLeft":"borderRight";function P(L,G){for(var B=O.nodes(),F=B.pop(),I={};F;)I[F]?L(F):(I[F]=!0,B.push(F),B=B.concat(G(F))),F=B.pop()}function H(L){_[L]=O.inEdges(L).reduce(function(G,B){return Math.max(G,_[B.v]+O.edge(B))},0)}function V(L){var G=O.outEdges(L).reduce(function(F,I){return Math.min(F,_[I.w]-O.edge(I))},Number.POSITIVE_INFINITY),B=E.node(L);G!==Number.POSITIVE_INFINITY&&B.borderType!==D&&(_[L]=Math.max(_[L],G))}return P(H,O.predecessors.bind(O)),P(V,O.successors.bind(O)),e.forEach(T,function(L){_[L]=_[k[L]]}),_}function h(E,N,k,T){var A=new t,_=E.graph(),O=S(_.nodesep,_.edgesep,T);return e.forEach(N,function(D){var P;e.forEach(D,function(H){var V=k[H];if(A.setNode(V),P){var L=k[P],G=A.edge(L,V);A.setEdge(L,V,Math.max(O(E,H,P),G||0))}P=H})}),A}function p(E,N){return e.minBy(e.values(N),function(k){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(k,function(_,O){var D=w(E,O)/2;T=Math.max(_+D,T),A=Math.min(_-D,A)}),T-A})}function m(E,N){var k=e.values(N),T=e.min(k),A=e.max(k);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(O){var D=_+O,P=E[D],H;if(P!==N){var V=e.values(P);H=O==="l"?T-e.min(V):A-e.max(V),H&&(E[D]=e.mapValues(P,function(L){return L+H}))}})})}function y(E,N){return e.mapValues(E.ul,function(k,T){if(N)return E[N.toLowerCase()][T];var A=e.sortBy(e.map(E,T));return(A[1]+A[2])/2})}function x(E){var N=n.buildLayerMatrix(E),k=e.merge(r(E,N),i(E,N)),T={},A;e.forEach(["u","d"],function(O){A=O==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(D){D==="r"&&(A=e.map(A,function(L){return e.values(L).reverse()}));var P=(O==="u"?E.predecessors:E.successors).bind(E),H=u(E,A,k,P),V=d(E,A,H.root,H.align,D==="r");D==="r"&&(V=e.mapValues(V,function(L){return-L})),T[O+D]=V})});var _=p(E,T);return m(T,_),y(T,E.graph().align)}function S(E,N,k){return function(T,A,_){var O=T.node(A),D=T.node(_),P=0,H;if(P+=O.width/2,e.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":H=-O.width/2;break;case"r":H=O.width/2;break}if(H&&(P+=k?H:-H),H=0,P+=(O.dummy?N:E)/2,P+=(D.dummy?N:E)/2,P+=D.width/2,e.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":H=D.width/2;break;case"r":H=-D.width/2;break}return H&&(P+=k?H:-H),H=0,P}}function w(E,N){return E.node(N).width}return NS}var TS,u5;function vfe(){if(u5)return TS;u5=1;var e=St(),t=Zn(),n=yfe().positionX;TS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return TS}var AS,d5;function bfe(){if(d5)return AS;d5=1;var e=St(),t=efe(),n=tfe(),r=rfe(),i=Zn().normalizeRanks,s=ife(),o=Zn().removeEmptyRanks,l=sfe(),u=ofe(),d=afe(),h=gfe(),p=vfe(),m=Zn(),y=ri().Graph;AS=x;function x($,J){var ee=J&&J.debugTiming?m.time:m.notime;ee("layout",function(){var ce=ee("  buildLayoutGraph",function(){return P($)});ee("  runLayout",function(){S(ce,ee)}),ee("  updateInputGraph",function(){w($,ce)})})}function S($,J){J("    makeSpaceForEdgeLabels",function(){H($)}),J("    removeSelfEdges",function(){te($)}),J("    acyclic",function(){t.run($)}),J("    nestingGraph.run",function(){l.run($)}),J("    rank",function(){r(m.asNonCompoundGraph($))}),J("    injectEdgeLabelProxies",function(){V($)}),J("    removeEmptyRanks",function(){o($)}),J("    nestingGraph.cleanup",function(){l.cleanup($)}),J("    normalizeRanks",function(){i($)}),J("    assignRankMinMax",function(){L($)}),J("    removeEdgeLabelProxies",function(){G($)}),J("    normalize.run",function(){n.run($)}),J("    parentDummyChains",function(){s($)}),J("    addBorderSegments",function(){u($)}),J("    order",function(){h($)}),J("    insertSelfEdges",function(){z($)}),J("    adjustCoordinateSystem",function(){d.adjust($)}),J("    position",function(){p($)}),J("    positionSelfEdges",function(){K($)}),J("    removeBorderNodes",function(){X($)}),J("    normalize.undo",function(){n.undo($)}),J("    fixupEdgeLabelCoords",function(){I($)}),J("    undoCoordinateSystem",function(){d.undo($)}),J("    translateGraph",function(){B($)}),J("    assignNodeIntersects",function(){F($)}),J("    reversePoints",function(){q($)}),J("    acyclic.undo",function(){t.undo($)})}function w($,J){e.forEach($.nodes(),function(ee){var ce=$.node(ee),le=J.node(ee);ce&&(ce.x=le.x,ce.y=le.y,J.children(ee).length&&(ce.width=le.width,ce.height=le.height))}),e.forEach($.edges(),function(ee){var ce=$.edge(ee),le=J.edge(ee);ce.points=le.points,e.has(le,"x")&&(ce.x=le.x,ce.y=le.y)}),$.graph().width=J.graph().width,$.graph().height=J.graph().height}var E=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},D=["labelpos"];function P($){var J=new y({multigraph:!0,compound:!0}),ee=ue($.graph());return J.setGraph(e.merge({},N,ie(ee,E),e.pick(ee,k))),e.forEach($.nodes(),function(ce){var le=ue($.node(ce));J.setNode(ce,e.defaults(ie(le,T),A)),J.setParent(ce,$.parent(ce))}),e.forEach($.edges(),function(ce){var le=ue($.edge(ce));J.setEdge(ce,e.merge({},O,ie(le,_),e.pick(le,D)))}),J}function H($){var J=$.graph();J.ranksep/=2,e.forEach($.edges(),function(ee){var ce=$.edge(ee);ce.minlen*=2,ce.labelpos.toLowerCase()!=="c"&&(J.rankdir==="TB"||J.rankdir==="BT"?ce.width+=ce.labeloffset:ce.height+=ce.labeloffset)})}function V($){e.forEach($.edges(),function(J){var ee=$.edge(J);if(ee.width&&ee.height){var ce=$.node(J.v),le=$.node(J.w),ye={rank:(le.rank-ce.rank)/2+ce.rank,e:J};m.addDummyNode($,"edge-proxy",ye,"_ep")}})}function L($){var J=0;e.forEach($.nodes(),function(ee){var ce=$.node(ee);ce.borderTop&&(ce.minRank=$.node(ce.borderTop).rank,ce.maxRank=$.node(ce.borderBottom).rank,J=e.max(J,ce.maxRank))}),$.graph().maxRank=J}function G($){e.forEach($.nodes(),function(J){var ee=$.node(J);ee.dummy==="edge-proxy"&&($.edge(ee.e).labelRank=ee.rank,$.removeNode(J))})}function B($){var J=Number.POSITIVE_INFINITY,ee=0,ce=Number.POSITIVE_INFINITY,le=0,ye=$.graph(),Ne=ye.marginx||0,Oe=ye.marginy||0;function Ce(we){var be=we.x,ke=we.y,rt=we.width,Ae=we.height;J=Math.min(J,be-rt/2),ee=Math.max(ee,be+rt/2),ce=Math.min(ce,ke-Ae/2),le=Math.max(le,ke+Ae/2)}e.forEach($.nodes(),function(we){Ce($.node(we))}),e.forEach($.edges(),function(we){var be=$.edge(we);e.has(be,"x")&&Ce(be)}),J-=Ne,ce-=Oe,e.forEach($.nodes(),function(we){var be=$.node(we);be.x-=J,be.y-=ce}),e.forEach($.edges(),function(we){var be=$.edge(we);e.forEach(be.points,function(ke){ke.x-=J,ke.y-=ce}),e.has(be,"x")&&(be.x-=J),e.has(be,"y")&&(be.y-=ce)}),ye.width=ee-J+Ne,ye.height=le-ce+Oe}function F($){e.forEach($.edges(),function(J){var ee=$.edge(J),ce=$.node(J.v),le=$.node(J.w),ye,Ne;ee.points?(ye=ee.points[0],Ne=ee.points[ee.points.length-1]):(ee.points=[],ye=le,Ne=ce),ee.points.unshift(m.intersectRect(ce,ye)),ee.points.push(m.intersectRect(le,Ne))})}function I($){e.forEach($.edges(),function(J){var ee=$.edge(J);if(e.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function q($){e.forEach($.edges(),function(J){var ee=$.edge(J);ee.reversed&&ee.points.reverse()})}function X($){e.forEach($.nodes(),function(J){if($.children(J).length){var ee=$.node(J),ce=$.node(ee.borderTop),le=$.node(ee.borderBottom),ye=$.node(e.last(ee.borderLeft)),Ne=$.node(e.last(ee.borderRight));ee.width=Math.abs(Ne.x-ye.x),ee.height=Math.abs(le.y-ce.y),ee.x=ye.x+ee.width/2,ee.y=ce.y+ee.height/2}}),e.forEach($.nodes(),function(J){$.node(J).dummy==="border"&&$.removeNode(J)})}function te($){e.forEach($.edges(),function(J){if(J.v===J.w){var ee=$.node(J.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:J,label:$.edge(J)}),$.removeEdge(J)}})}function z($){var J=m.buildLayerMatrix($);e.forEach(J,function(ee){var ce=0;e.forEach(ee,function(le,ye){var Ne=$.node(le);Ne.order=ye+ce,e.forEach(Ne.selfEdges,function(Oe){m.addDummyNode($,"selfedge",{width:Oe.label.width,height:Oe.label.height,rank:Ne.rank,order:ye+ ++ce,e:Oe.e,label:Oe.label},"_se")}),delete Ne.selfEdges})})}function K($){e.forEach($.nodes(),function(J){var ee=$.node(J);if(ee.dummy==="selfedge"){var ce=$.node(ee.e.v),le=ce.x+ce.width/2,ye=ce.y,Ne=ee.x-le,Oe=ce.height/2;$.setEdge(ee.e,ee.label),$.removeNode(J),ee.label.points=[{x:le+2*Ne/3,y:ye-Oe},{x:le+5*Ne/6,y:ye-Oe},{x:le+Ne,y:ye},{x:le+5*Ne/6,y:ye+Oe},{x:le+2*Ne/3,y:ye+Oe}],ee.label.x=ee.x,ee.label.y=ee.y}})}function ie($,J){return e.mapValues(e.pick($,J),Number)}function ue($){var J={};return e.forEach($,function(ee,ce){J[ce.toLowerCase()]=ee}),J}return AS}var MS,f5;function xfe(){if(f5)return MS;f5=1;var e=St(),t=Zn(),n=ri().Graph;MS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return MS}var _S,h5;function wfe(){return h5||(h5=1,_S="0.8.5"),_S}var DS,p5;function Sfe(){return p5||(p5=1,DS={graphlib:ri(),layout:bfe(),debug:xfe(),util:{time:Zn().time,notime:Zn().notime},version:wfe()}),DS}var Cfe=Sfe();const Ah=kd(Cfe),bu=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]}];function ZV(e){return Qe({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function JV(e){return Qe({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function QV(e){return Qe({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function Efe(e){return Qe({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function kfe({components:e,onAdd:t}){const[n,r]=_e.useState(!0),[i,s]=_e.useState(new Set),[o,l]=_e.useState(null),[u,d]=_e.useState(""),h=_e.useMemo(()=>new ja(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=_e.useMemo(()=>{const x=u.trim();if(!x)return Array.from(e);const w=h.search(x).map(k=>k.item),E=e.find(k=>k.id==="custom-component"),N=w.some(k=>k.id==="custom-component");return E&&!N&&w.push(E),w},[e,h,u]),m=_e.useMemo(()=>{const x=new Map;for(const S of p){const w=S.group??"Other";x.has(w)||x.set(w,[]),x.get(w).push(S)}return Array.from(x.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);_e.useEffect(()=>{m.length>0&&i.size===0&&s(new Set(m.map(([x])=>x)))},[m,i.size]);const y=x=>{s(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?v.jsx(JV,{size:16}):v.jsx(QV,{size:16})}),v.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),v.jsx("div",{className:"mr-3 mb-3",children:v.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),v.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[m.length===0?v.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):m.map(([x,S])=>{const w=i.has(x);return v.jsxs("div",{children:[v.jsxs("button",{type:"button",onClick:()=>y(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${x}`,children:[v.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),v.jsx(ZV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&v.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:v.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(E=>v.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${E.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();l({label:E.label,description:E.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:N=>{l(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:E.id})),N.dataTransfer?.setData("text/plain",E.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),t(E.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[v.jsx("div",{className:"text-center mb-1",children:v.jsx("span",{className:"text-2xl",children:E.icon})}),v.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:E.label})]},E.id))})})]},x)}),v.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[v.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),v.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:v.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&eE.createPortal(v.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[v.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),v.jsx("div",{className:"text-muted",children:o.description}),v.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const Nfe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h,onMouseMove:p,children:m})=>v.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:v.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:v.jsxs(Bae,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,onMouseMove:p,connectionMode:Aa.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[v.jsx(dle,{nodeStrokeWidth:3}),v.jsx(Jae,{}),v.jsx(Uae,{gap:16}),m]})})}),Tfe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[m,y]=_e.useState(320),x=260,S=640,w=_e.useRef(!1),E=_e.useRef(null),[N,k]=_e.useState(!1),[T,A]=_e.useState(!0),_=_e.useCallback(L=>{if(!w.current)return;const G=Math.min(Math.max(window.innerWidth-L.clientX,x),S);y(G)},[]),O=_e.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),D=L=>{L.preventDefault(),w.current=!0,document.body.style.userSelect="none"};_e.useEffect(()=>(globalThis.addEventListener("mousemove",_),globalThis.addEventListener("mouseup",O),()=>{globalThis.removeEventListener("mousemove",_),globalThis.removeEventListener("mouseup",O)}),[_,O]),_e.useEffect(()=>{E.current&&(E.current.style.width=m+"px")},[m]);const P=e?.id==="free";if(_e.useEffect(()=>{P&&!r&&A(!1)},[P,r]),_e.useEffect(()=>{P&&r&&(n("inspector"),A(!0))},[P,r,n]),!e)return null;const H=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const L=document.createElement("textarea");L.value=JSON.stringify(d,null,2),document.body.appendChild(L),L.select(),document.execCommand("copy"),L.remove()}},V=()=>{if(!d)return;const L=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),G=URL.createObjectURL(L),B=document.createElement("a");B.href=G,B.download=`assessment-${Date.now()}.json`,document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(G)};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>A(L=>!L),"aria-label":T?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:T?v.jsx(QV,{size:16}):v.jsx(JV,{size:16})}),v.jsx("aside",{ref:E,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${T?"p-4":"w-6 p-1"}`,"data-width":m,style:{width:T?`${m}px`:"24px"},children:T&&v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onMouseDown:D,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[v.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),v.jsx(Efe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),v.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!P&&v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),v.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),v.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&v.jsxs("div",{children:[d&&v.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),v.jsxs("div",{className:"text-sm font-semibold text-theme",children:[d.score,"%"]})]}),v.jsx("div",{className:"text-xs text-muted mb-2",children:d.isValid?"Pass":"Needs work"}),v.jsx("div",{className:"space-y-1 text-xs",children:d.feedback.slice(0,3).map(L=>v.jsx("div",{className:"text-sm text-theme",children:L.message},`${L.category}-${L.type}`))}),v.jsxs("div",{className:"mt-3 flex gap-2",children:[v.jsx("button",{type:"button",onClick:H,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),v.jsx("button",{type:"button",onClick:V,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),v.jsxs("div",{className:"mt-3 text-xs",children:[v.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),d.architectureStrengths.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.architectureStrengths.map(L=>v.jsx("li",{children:L},`strength-${L}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),d.improvements.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.improvements.map(L=>v.jsx("li",{children:L},`imp-${L}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),v.jsx("div",{className:"space-y-1",children:d.feedback.map(L=>v.jsxs("div",{className:"text-xs",children:[v.jsx("div",{className:"font-medium",children:L.category.toUpperCase()}),v.jsx("div",{className:"text-muted",children:L.message})]},`${L.category}-${L.type}`))})]})]}),v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),v.jsx("ul",{className:"space-y-1",children:e.requirements.map(L=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:L})]},L))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),v.jsx("ul",{className:"space-y-1",children:e.constraints.map(L=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:L})]},L))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("button",{type:"button",onClick:()=>k(!N),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),v.jsx(ZV,{size:14,className:`text-muted transition-transform duration-150 ${N?"rotate-0":"-rotate-90"}`})]}),N&&v.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(L=>v.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:v.jsx("div",{className:"text-xs text-white",children:L})},L))})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(L=>v.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:L},L))})]})]}),t==="inspector"&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&v.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),v.jsx("div",{className:"space-y-2",children:s})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),v.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[v.jsx(oK,{size:14}),v.jsx("span",{children:"Add"})]})]}),v.jsx("div",{className:"space-y-2",children:o})]}),v.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&v.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[v.jsx("span",{children:""}),v.jsx("span",{children:"Detach from Group"})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),v.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})})]})};async function Afe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api-production.up.railway.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),Mfe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function Mfe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}function _fe(e){return Qe({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(e)}const e8=_e.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=_e.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=_e.useCallback(y=>{y.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),u=_e.useCallback(y=>{y.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),d=_e.useCallback(y=>{y.stopPropagation(),n?.(e,t)},[e,t,n]),h=_e.useCallback(y=>{y.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),p=_e.useCallback(y=>{y.preventDefault(),y.stopPropagation(),s({visible:!0,x:y.clientX,y:y.clientY})},[]),m=_e.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return _e.useEffect(()=>{if(i.visible){const y=x=>{const S=document.querySelector("[data-context-menu]");S&&!S.contains(x.target)&&m()};return document.addEventListener("click",y),document.addEventListener("contextmenu",y),()=>{document.removeEventListener("click",y),document.removeEventListener("contextmenu",y)}}},[i.visible,m]),v.jsxs(v.Fragment,{children:[v.jsxs(Mn.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",onContextMenu:p,children:[v.jsx("legend",{className:"sr-only",children:o}),v.jsx(Ir,{id:"top",type:"source",position:Te.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ir,{id:"right",type:"source",position:Te.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ir,{id:"bottom",type:"source",position:Te.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ir,{id:"left",type:"source",position:Te.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[v.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),v.jsxs("div",{className:"min-w-0 w-full text-center",children:[v.jsx("div",{className:"truncate font-medium text-sm",children:o}),t.subtitle&&v.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]}),i.visible&&eE.createPortal(v.jsxs(Mn.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),u(y),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[v.jsx(dI,{className:"w-4 h-4"}),"Settings"]}),r&&v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),h(y),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[v.jsx(v9,{className:"w-4 h-4"}),"Detach from Group"]}),v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),d(y),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[v.jsx(_fe,{className:"w-4 h-4"}),"Duplicate"]}),v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),l(y),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[v.jsx(IE,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});e8.displayName="Node";const Dfe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Rfe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=Dfe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,y=p,x=m+d/2;return{edgePath:h,centerX:y,centerY:x}}const[o]=Lk(e),[l,u]=Pk({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Ofe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:m}=e,[y,x]=R.useState(!1),[S,w]=R.useState(h?.label??""),[E,N]=R.useState(h?.hasLabel??!1),k=R.useRef(null),T=Je(G=>{const B=G.edges.some(F=>F.id!==t&&F.source===r&&F.target===n);return B&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),B}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:O,centerY:D}=Rfe(A,T),P=G=>{G.stopPropagation(),x(!0),setTimeout(()=>k.current?.focus(),0)},H=G=>{G.stopPropagation(),N(!0),x(!0),setTimeout(()=>k.current?.focus(),0)},V=G=>{G.stopPropagation(),N(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},L=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:E||S.trim().length>0}}))};return v.jsxs("g",{className:"react-flow__edge",children:[v.jsx("defs",{children:v.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:v.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),v.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:m||`url(#arrow-${t})`,className:"transition-colors"}),v.jsx("foreignObject",{x:O-75,y:D-12,width:150,height:24,className:"overflow-visible",children:v.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:E?v.jsx("div",{className:"flex items-center gap-1",children:y?v.jsx("input",{ref:k,value:S,onChange:G=>w(G.target.value),onBlur:L,onKeyDown:G=>{G.key==="Enter"&&L(),G.key==="Escape"&&(x(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onDoubleClick:P,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&v.jsx("button",{onClick:V,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&v.jsx("button",{onClick:H,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},jfe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=_e.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=_e.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return v.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[v.jsx(mle,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),v.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[v.jsx(Mn.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(dI,{className:"w-3 h-3"})}),v.jsx(Mn.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(IE,{className:"w-3 h-3"})})]}),v.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&v.jsx("span",{children:t.icon}),v.jsx("span",{children:t.label})]}),t.subtitle&&v.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),v.jsx(Ir,{id:"top",type:"source",position:Te.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ir,{id:"right",type:"source",position:Te.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ir,{id:"bottom",type:"source",position:Te.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ir,{id:"left",type:"source",position:Te.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Lfe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=R.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return v.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[v.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?v.jsx(wK,{size:18}):v.jsx(fI,{size:18}),v.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),v.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:v.jsx(IE,{size:16})})]}),i&&v.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(zh,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),v.jsx(zh,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),v.jsx(ez,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),v.jsxs("div",{className:"border-t border-theme pt-3",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&v.jsx(zh,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&v.jsx(Hp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&v.jsx(QB,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&v.jsx("div",{className:"pt-1",children:v.jsx(JB,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},Pfe=()=>{const[e,t]=R.useState([]),n=R.useCallback((u,d="info",h)=>{const m={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:h};t(y=>[...y,m])},[]),r=R.useCallback(u=>{t(d=>d.filter(h=>h.id!==u))},[]),i=R.useCallback((u,d)=>{n(u,"success",d)},[n]),s=R.useCallback((u,d)=>{n(u,"error",d)},[n]),o=R.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=R.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Ife=({toast:e,onClose:t})=>{R.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return v.jsxs(Mn.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[v.jsx("div",{className:"flex-shrink-0",children:r()}),v.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),v.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Bfe=({toasts:e,onClose:t})=>v.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:v.jsx(lm,{children:e.map(n=>v.jsx("div",{className:"pointer-events-auto",children:v.jsx(Ife,{toast:n,onClose:t})},n.id))})}),zfe=({url:e,onMessage:t,onOpen:n,onClose:r,onError:i,reconnect:s=!0,reconnectInterval:o=1e3,maxReconnectAttempts:l=5})=>{const u=R.useRef(null),d=R.useRef(null),h=R.useRef(0),p=R.useRef(!0),m=R.useRef(null),[y,x]=R.useState(!1),[S,w]=R.useState(!1),[E,N]=R.useState(0),k=R.useCallback(()=>{d.current&&(clearTimeout(d.current),d.current=null)},[]),T=R.useCallback(()=>{p.current=!1,k(),u.current&&(u.current.close(),u.current=null),x(!1),w(!1),h.current=0,N(0)},[k]),A=R.useCallback(()=>{if(!(u.current?.readyState===WebSocket.OPEN||u.current?.readyState===WebSocket.CONNECTING))try{w(!0),u.current=new WebSocket(e),u.current.onopen=()=>{console.log("WebSocket connected"),x(!0),w(!1),h.current=0,N(0),n?.()},u.current.onmessage=D=>{try{const P=JSON.parse(D.data);t?.(P)}catch(P){console.error("Failed to parse WebSocket message:",P)}},u.current.onclose=D=>{console.log("WebSocket disconnected",D.code,D.reason),x(!1),w(!1),u.current=null,r?.(),p.current&&s&&m.current&&m.current()},u.current.onerror=D=>{console.error("WebSocket error:",D),i?.(D)}}catch(D){console.error("Failed to create WebSocket connection:",D),w(!1),p.current&&s&&m.current&&m.current()}},[e,t,n,r,i,s]),_=R.useCallback(()=>{if(!s||!p.current)return;if(h.current>=l){console.error("Max reconnection attempts reached"),w(!1);return}k();const D=o*Math.pow(2,h.current),P=Math.random()*1e3,H=Math.min(D+P,3e4);console.log(`Reconnecting in ${Math.round(H/1e3)}s... (attempt ${h.current+1}/${l})`),d.current=setTimeout(()=>{h.current++,N(h.current),A()},H)},[s,o,l,k,A]);R.useEffect(()=>{m.current=_},[_]);const O=R.useCallback(D=>{if(u.current?.readyState===WebSocket.OPEN)try{u.current.send(JSON.stringify(D))}catch(P){console.error("Failed to send WebSocket message:",P)}else console.warn("WebSocket is not connected. Message not sent:",D)},[]);return R.useEffect(()=>(p.current=!0,A(),()=>{p.current=!1,T()}),[A,T]),{sendMessage:O,disconnect:T,connect:A,isConnected:y,isConnecting:S,reconnectAttempts:E}},qfe=e=>e.startsWith("https://")?e.replace("https://","wss://"):e.startsWith("http://")?e.replace("http://","ws://"):`ws://${e}`,Vfe=qfe("https://diagrammatic-api-production.up.railway.app"),Hfe=({diagramId:e,token:t,enabled:n,onDiagramUpdate:r,onUserJoined:i,onUserLeft:s,onError:o})=>{const[l,u]=R.useState([]),[d,h]=R.useState([]),p=R.useRef(null),m=R.useRef(0),y=R.useRef(null),x=`${Vfe}/api/v1/diagrams/${e}/collaborate?token=${t}`,S=R.useCallback(H=>{const V=H.type?.trim();switch(V){case"welcome":{const L=H.user;p.current=L.id,console.log("Welcome message received:",L.name);break}case"user_joined":{const L=H.user;u(G=>G.some(B=>B.id===L.id)?G:[...G,L]),i?.(L);break}case"user_left":{const L=H.user;u(G=>G.filter(B=>B.id!==L.id)),h(G=>G.filter(B=>B.userId!==L.id)),s?.(L);break}case"diagram_update":{const L=H.user,G=H.data;if(L.id===p.current)return;const B=Date.now();if(B-m.current<100)return;m.current=B,r?.(G,L.id);break}case"cursor_move":case"cursor_update":{const L=H.user,G=H.position,B=H.timestamp;if(L.id===p.current)return;h(F=>{const I=F.findIndex(X=>X.userId===L.id),q={userId:L.id,user:L,position:G,timestamp:B};if(I>=0){const X=[...F];return X[I]=q,X}return[...F,q]});break}case"pong":break;case"error":{const L=H.message||"Unknown error";console.error("WebSocket error:",L),o?.(L);break}default:console.warn("Unknown WebSocket message type:",V)}},[r,i,s,o]),w=R.useCallback(()=>{console.log("Collaboration WebSocket connected")},[]),E=R.useCallback(()=>{console.log("Collaboration WebSocket disconnected"),u([]),h([])},[]),N=R.useCallback(H=>{console.error("Collaboration WebSocket error:",H),o?.("Connection error. Retrying...")},[o]),{sendMessage:k,disconnect:T,isConnected:A,isConnecting:_,reconnectAttempts:O}=zfe({url:x,onMessage:S,onOpen:w,onClose:E,onError:N,reconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5}),D=R.useCallback(H=>{!n||!A||(y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{k({type:"diagram_update",data:H,timestamp:new Date().toISOString()})},300))},[n,A,k]),P=R.useCallback(H=>{!n||!A||k({type:"cursor_move",position:H,timestamp:new Date().toISOString()})},[n,A,k]);return R.useEffect(()=>()=>{y.current&&clearTimeout(y.current)},[]),R.useEffect(()=>{if(!A||!n)return;const H=setInterval(()=>{k({type:"ping",timestamp:new Date().toISOString()})},3e4);return()=>clearInterval(H)},[A,n,k]),{sendDiagramUpdate:D,sendCursorPosition:P,collaborators:l,cursors:d,isConnected:A,isConnecting:_,reconnectAttempts:O,disconnect:T}},QC=e=>{const t=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899","#06b6d4","#6366f1"];let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return t[Math.abs(n)%t.length]},Ffe=({isConnected:e,isConnecting:t,reconnectAttempts:n,collaborators:r,showCollaborators:i=!0})=>{const[s,o]=_e.useState(!1),l=t||!e,u=i&&r.length>0;if(!l&&!u)return null;const d=()=>t?n>0?`Reconnecting... (${n})`:"Connecting...":"Connection lost",h=()=>t?v.jsx(EK,{className:"h-4 w-4 animate-spin"}):v.jsx(kK,{className:"h-4 w-4"}),p=()=>t?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return v.jsxs("div",{className:"flex items-center gap-2",children:[l&&v.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[v.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg bg-surface border border-theme/10 ${p()} transition-colors`,children:[h(),v.jsx("span",{className:"text-xs font-medium",children:d()})]}),v.jsx(lm,{children:s&&v.jsx(Mn.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full left-0 mt-2 p-2 bg-surface border border-theme/10 rounded-lg shadow-lg z-50 min-w-[200px]",children:v.jsxs("div",{className:"text-xs text-theme",children:[v.jsx("div",{className:"font-semibold mb-1",children:"Connection Status"}),v.jsx("div",{className:"text-muted",children:t?"Establishing connection...":"Collaboration unavailable"})]})})})]}),u&&v.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-surface border border-theme/10",children:[v.jsx(NK,{className:"h-4 w-4 text-theme"}),v.jsxs("div",{className:"flex -space-x-2",children:[r.slice(0,3).map(m=>v.jsx("div",{className:"relative group","data-tooltip":m.name,children:m.pictureUrl?v.jsx("img",{src:m.pictureUrl,alt:m.name,className:"w-6 h-6 rounded-full border-2 border-surface",style:{borderColor:QC(m.id)}}):v.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-surface flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:QC(m.id)},children:m.name.charAt(0).toUpperCase()})},m.id)),r.length>3&&v.jsxs("div",{className:"w-6 h-6 rounded-full bg-theme/10 border-2 border-surface flex items-center justify-center text-xs font-bold text-theme",children:["+",r.length-3]})]})]})]})},$fe=({name:e,color:t,position:n,pictureUrl:r})=>v.jsxs(Mn.div,{className:"pointer-events-none absolute z-50",style:{left:n.x,top:n.y},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:[v.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:v.jsx("path",{d:"M5.5 3.21V20.79L10.29 16L14 21.5L15.5 20.5L11.79 15L18.5 14L5.5 3.21Z",fill:t,stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})}),v.jsxs("div",{className:"ml-6 -mt-2 px-2 py-1 rounded-md text-xs font-medium text-white whitespace-nowrap shadow-lg flex items-center gap-1.5",style:{backgroundColor:t},children:[r&&v.jsx("img",{src:r,alt:e,className:"w-4 h-4 rounded-full border border-white/50"}),v.jsx("span",{children:e})]})]}),Ufe=(e,t,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:e,edges:t};return JSON.stringify(i,null,2)},Gfe=(e,t,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<e.length;l++){const u=e[l],d=`node-${l+2}`,h=u.data?.label||u.id,p=u.position?.x||0,m=u.position?.y||0,y=u.style?.width||u.width||200,x=u.style?.height||u.height||80,S=s();o+=`        <mxCell id="${d}" value="${i(String(h))}" `,o+=`style="${S}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${m}" width="${y}" height="${x}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<t.length;l++){const u=t[l],d=`edge-${l}`,h=e.findIndex(y=>y.id===u.source),p=e.findIndex(y=>y.id===u.target),m=u.label||u.data?.label||"";h!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(m))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${h+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},m5=e=>{try{const t=JSON.parse(e);if(!t.nodes||!Array.isArray(t.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!t.edges||!Array.isArray(t.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:t.nodes,edges:t.edges}}catch(t){throw new Error(t instanceof Error?`Failed to import JSON: ${t.message}`:"Failed to import JSON: Invalid format")}},g5=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const m=p.getAttribute("id")||`cell-${u}`,y=p.getAttribute("value")||`Node ${u+1}`,x=p.querySelector("mxGeometry"),S=Number.parseFloat(x?.getAttribute("x")||"0"),w=Number.parseFloat(x?.getAttribute("y")||"0"),E=Number.parseFloat(x?.getAttribute("width")||"200"),N=Number.parseFloat(x?.getAttribute("height")||"80"),k=`imported-node-${Date.now()}-${u}`;o.set(m,k);const T={label:y},A=p.querySelector("mxData");if(A){const _=A.querySelectorAll("property");for(const O of _){const D=O.getAttribute("name"),P=O.getAttribute("value");if(D&&P)try{T[D]=JSON.parse(P)}catch{T[D]=P}}}i.push({id:k,type:"custom",position:{x:S,y:w},data:T,...E&&N?{style:{width:E,height:N}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let h=0;for(const p of d){const m=p.getAttribute("source"),y=p.getAttribute("target"),x=p.getAttribute("value")||"";if(m&&y){const S=o.get(m),w=o.get(y);if(S&&w){const E={};x&&(E.label=x,E.hasLabel=!0);const N=p.querySelector("mxData");if(N){const k=N.querySelectorAll("property");for(const T of k){const A=T.getAttribute("name"),_=T.getAttribute("value");if(A&&_)try{E[A]=JSON.parse(_)}catch{E[A]=_}}}s.push({id:`imported-edge-${Date.now()}-${h}`,source:S,target:w,type:"customEdge",data:E,...x?{label:x}:{}})}}h++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(t){throw new Error(t instanceof Error?`Failed to import XML: ${t.message}`:"Failed to import XML: Invalid format")}},y5=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},Kfe=async e=>e.text(),Wfe={customEdge:Ofe},Yfe=_e.memo(e=>{const t=e.data;return v.jsx(e8,{id:e.id,data:t,onCopy:e.onCopy,isInGroup:e.isInGroup})}),Xfe=(e,t)=>n=>{const r=t.current.find(i=>i.id===n.id)?.parentId!==void 0;return v.jsx(Yfe,{...n,onCopy:e,isInGroup:r})},Zfe=()=>{Oa();const e=Td(),n=FF()?.id,{screenToFlowPosition:r,flowToScreenPosition:i}=Ed(),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=om(),p=Pfe(),m=R.useRef(p);m.current=p;const y=R.useRef([]),S=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[w,E]=R.useState(null),[N,k]=R.useState(!0),[T,A]=R.useState(null),[_,O]=R.useState(!1),[D,P]=R.useState(null),[H,V]=R.useState(null),[L,G]=R.useState(!1),[B,F]=R.useState(!1),[I,q]=R.useState(""),[X,te]=R.useState(""),[z,K]=R.useState(!1),[ie,ue]=R.useState(""),[$,J]=R.useState("read"),[ee,ce]=R.useState([]),[le,ye]=R.useState(!1),[Ne,Oe]=R.useState(!1),[Ce,we]=R.useState("idle"),[be,ke]=R.useState(null),[rt,Ae]=R.useState(!1),[Jt,un]=R.useState(0),Jn=R.useRef(null);R.useEffect(()=>{if(!n){k(!1),A("No problem ID provided");return}if(n==="free"){E({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),k(!1);return}if(n.startsWith("custom-")){const Z=localStorage.getItem(`custom-problem-${n}`);if(Z){E(JSON.parse(Z)),k(!1);return}}(async()=>{try{k(!0),A(null);const oe=await fetch(`https://diagrammatic-api-production.up.railway.app/api/v1/problem/${n}`);if(!oe.ok)throw new Error(`Failed to fetch problem: ${oe.status} ${oe.statusText}`);const pe=await oe.json();E(pe)}catch(Z){A(Z instanceof Error?Z.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",Z)}finally{k(!1)}})()},[n]);const Qt=()=>e("/"),{state:Tt,setState:ft,undo:qn,redo:Dn,canUndo:xn,canRedo:yt}=gte({nodes:[],edges:[]}),[qe,He,oi]=zae(Tt.nodes),[Bt,en,dn]=qae(Tt.edges),{getNodes:wn,fitView:yr}=Ed();R.useEffect(()=>{y.current=qe},[qe]);const[vr,Rn]=R.useState(!1),[Ri,Oi]=R.useState(!1),ji=R.useRef(null);R.useEffect(()=>{if(S)(async()=>{try{const Z=o?await yn.getDiagram(S):await yn.getPublicDiagram(S),oe=Z.nodes,pe=Z.edges;He(oe),en(pe),P(Z.id),V(Z),ft({nodes:oe,edges:pe})}catch(Z){console.error("Failed to load diagram:",Z),p.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&o){const W=`last-diagram-${s?.id||"anonymous"}`,Z=localStorage.getItem(W);Z&&(async()=>{try{const pe=await yn.getDiagram(Z),ve=pe.nodes,Se=pe.edges;He(ve),en(Se),P(pe.id),V(pe),ft({nodes:ve,edges:Se}),p.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(W),p.error("Failed to restore previous design. Starting fresh.")}})()}else if(n&&n!=="free"&&o){const W=`problem-progress-${s?.id||"anonymous"}-${n}`,Z=localStorage.getItem(W);if(Z)try{const oe=JSON.parse(Z),pe=oe.nodes,ve=oe.edges;He(pe),en(ve),oe.elapsedTime&&un(oe.elapsedTime),ft({nodes:pe,edges:ve}),p.success("Progress restored from previous session")}catch(oe){console.error("Failed to load saved progress:",oe)}}},[S,o,n,s?.id]),R.useEffect(()=>{Ae(o&&n!==void 0)},[o,n]),R.useEffect(()=>{if(!rt||qe.length===0)return;const Z=setTimeout(async()=>{try{if(we("saving"),n==="free")if(D){await yn.updateDiagram(D,{title:H?.title||"Auto-saved Design",description:H?.description||"Auto-saved design",nodes:qe,edges:Bt});const oe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(oe,D)}else{F(!0),we("idle");return}else{const oe=`problem-progress-${s?.id||"anonymous"}-${n}`,pe={problemId:n,nodes:qe,edges:Bt,lastSaved:new Date().toISOString(),elapsedTime:Jt};localStorage.setItem(oe,JSON.stringify(pe))}we("saved"),ke(new Date),p.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),setTimeout(()=>we("idle"),3e3)}catch(oe){console.error("Auto-save failed:",oe),we("error"),setTimeout(()=>we("idle"),5e3)}},3e3);return()=>clearTimeout(Z)},[qe,Bt,rt,n,D,s?.id]),R.useEffect(()=>{He(Tt.nodes),en(Tt.edges)},[Tt,He,en]),R.useEffect(()=>{const W=Z=>{(Z.ctrlKey||Z.metaKey)&&Z.key==="z"&&!Z.shiftKey&&(Z.preventDefault(),qn()),((Z.ctrlKey||Z.metaKey)&&Z.shiftKey&&Z.key==="z"||Z.ctrlKey&&Z.key==="y")&&(Z.preventDefault(),Dn())};return globalThis.addEventListener("keydown",W),()=>globalThis.removeEventListener("keydown",W)},[qn,Dn]),R.useEffect(()=>{if(n!=="free")return Jn.current=setInterval(()=>{un(W=>W+1)},1e3),()=>{Jn.current&&clearInterval(Jn.current)}},[n]),R.useEffect(()=>()=>{const W=`last-diagram-${s?.id||"anonymous"}`;if(localStorage.removeItem(W),n&&n!=="free"){const Z=`problem-progress-${s?.id||"anonymous"}-${n}`;localStorage.removeItem(Z)}},[s?.id,n]);const ko=W=>{const Z=Math.floor(W/3600),oe=Math.floor(W%3600/60),pe=W%60;return Z>0?`${Z.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${oe.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},br=W=>{const oe=Math.floor((new Date().getTime()-W.getTime())/1e3);if(oe<60)return"a moment ago";if(oe<1800)return`${Math.floor(oe/60)} min ago`;if(oe<3600)return"about an hour ago";if(oe<86400){const pe=Math.floor(oe/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${W.toLocaleTimeString()}`};R.useEffect(()=>{const W=Z=>{vr&&(Z.target.closest(".relative")||Rn(!1))};if(vr)return document.addEventListener("click",W),()=>document.removeEventListener("click",W)},[vr]),R.useEffect(()=>{const W=Z=>{Ri&&(Z.target.closest(".relative")||Oi(!1))};if(Ri)return document.addEventListener("click",W),()=>document.removeEventListener("click",W)},[Ri]);const yc=W=>{const Z={...W,type:"customEdge",data:{label:"",hasLabel:!1}};en(oe=>Kz(Z,oe))},[Va,ai]=_e.useState(null),[Li,ys]=R.useState(!1),Ha=async()=>{if(Li)return;ys(!0),ai(null);const W={components:qe.map(Z=>{const oe=Z.data??{},pe=oe.type;let ve;typeof pe=="string"?ve=pe:typeof Z.type=="string"?ve=Z.type:ve="microservice";const Se=oe.label,Le=typeof Se=="string"?Se:String(Z.id),Ge=oe&&typeof oe=="object"?{...oe}:{},{icon:qt,subtitle:Sr,...tr}=Ge;return{id:Z.id,type:ve,label:Le,position:{x:Z.position?.x??0,y:Z.position?.y??0},properties:{...tr,nodeData:{label:Le,icon:oe.icon,subtitle:oe.subtitle}}}}),connections:Bt.map(Z=>{const oe=Z.data??{},pe=oe.type,ve=typeof pe=="string"?pe:"api-call",Se=oe.label,Le=typeof Se=="string"?Se:void 0;return{id:Z.id??`${Z.source}-${Z.target}`,source:Z.source,target:Z.target,type:ve,label:Le,properties:oe}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",W);const Z=await Afe(W,w);ai(Z),On("details")}catch(Z){console.error("Assessment failed:",Z),ai({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{ys(!1)}},No=R.useRef(null),xr=W=>{W.preventDefault(),W.dataTransfer&&(W.dataTransfer.dropEffect="move")},zt=W=>{W.preventDefault();const Z=W.dataTransfer?.getData("application/reactflow")||W.dataTransfer?.getData("text/plain");let oe=Z;try{Z&&(oe=JSON.parse(Z).type||Z)}catch{}const pe=r({x:W.clientX,y:W.clientY}),ve=`${oe}-${Date.now()}`,Se=bu.find(qt=>qt.id===oe),Le=Se?.group==="Grouping",Ge={id:ve,position:pe,type:Le?"group":"custom",style:Le?{width:400,height:300,zIndex:-1}:void 0,data:{label:Se?.label??oe,componentId:Se?.id,icon:Se?.icon,subtitle:Se?.description,backgroundColor:Le?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Le?"rgba(100, 100, 255, 0.3)":void 0}};He(qt=>[...qt,Ge])},tn=(W,Z)=>{if(Z.parentId)return;const oe=qe.filter(ve=>ve.type==="group");let pe;for(const ve of oe){if(ve.id===Z.id)continue;const Se=ve.position.x,Le=ve.position.y,Ge=ve.style?.width||400,qt=ve.style?.height||300,Sr=Z.position.x,tr=Z.position.y,Kr=10;if(Sr>Se+Kr&&Sr<Se+Ge-Kr&&tr>Le+Kr&&tr<Le+qt-Kr){pe=ve.id;break}}pe&&He(ve=>ve.map(Se=>{if(Se.id===Z.id){const Le=ve.find(qt=>qt.id===pe),Ge=Le?{x:Z.position.x-Le.position.x,y:Z.position.y-Le.position.y}:Z.position;return{...Se,position:Ge,parentId:pe,extent:"parent"}}return Se}))},li=R.useCallback(()=>{const W=vt.current;W&&He(Z=>Z.map(oe=>{if(oe.id===W&&oe.parentId){const pe=Z.find(Le=>Le.id===oe.parentId);let ve=oe.position.x,Se=oe.position.y;return pe&&(ve+=pe.position.x,Se+=pe.position.y),{...oe,position:{x:ve,y:Se},parentId:void 0,extent:void 0}}return oe}))},[He]),[Fe,vs]=R.useState(null),[To,Ao]=R.useState({}),[Fr,ci]=R.useState({}),[ui,On]=R.useState("details"),[di,Qn]=R.useState(!1),vt=R.useRef(null);_e.useEffect(()=>{vt.current=Fe},[Fe]);const Mo=R.useRef(void 0);Mo.current=W=>{const oe=W.detail.id;He(pe=>pe.filter(ve=>ve.id!==oe)),vt.current===oe&&(vs(null),On("details"))};const _o=R.useRef(void 0);_o.current=W=>{const oe=W.detail.id;vs(pe=>{const ve=pe===oe?null:oe;return On(ve?"inspector":"details"),ve})};function $r(W,Z,oe,pe){return W.map(ve=>ve.id===Z?{...ve,data:{...ve.data,label:oe,hasLabel:pe},label:oe}:ve)}const Ur=_e.useRef(void 0);Ur.current=W=>{const Z=W,{id:oe,label:pe,hasLabel:ve}=Z.detail;en(Se=>$r(Se,oe,pe,ve))},_e.useEffect(()=>{const W=Z=>Ur.current?.(Z);return globalThis.addEventListener("diagram:edge-label-change",W),()=>globalThis.removeEventListener("diagram:edge-label-change",W)},[]),_e.useEffect(()=>{const W=pe=>Mo.current?.(pe),Z=pe=>_o.current?.(pe),oe=pe=>{const ve=pe;He(Se=>Se.map(Le=>{if(Le.id===ve.detail.id&&Le.parentId){const Ge=Se.find(tr=>tr.id===Le.parentId);let qt=Le.position.x,Sr=Le.position.y;return Ge&&(qt+=Ge.position.x,Sr+=Ge.position.y),{...Le,position:{x:qt,y:Sr},parentId:void 0,extent:void 0}}return Le}))};return globalThis.addEventListener("diagram:node-delete",W),globalThis.addEventListener("diagram:node-toggle",Z),globalThis.addEventListener("diagram:node-detach",oe),()=>{globalThis.removeEventListener("diagram:node-delete",W),globalThis.removeEventListener("diagram:node-toggle",Z),globalThis.removeEventListener("diagram:node-detach",oe)}},[He]),_e.useEffect(()=>{if(!Fe)return;const W=qe.find(Z=>Z.id===Fe);Ao(W?.data??{})},[Fe,qe]);const bs=(W,Z)=>{Ao(oe=>({...oe,[W]:Z})),Fe&&He(oe=>oe.map(pe=>pe.id===Fe?{...pe,data:{...pe.data,[W]:Z}}:pe))},Do=(W,Z)=>bs(W,Z),Fa=(W,Z)=>bs(W,Z),$a=(W,Z)=>bs(W,Z),xs=(W,Z)=>bs(W,Z),ws=()=>{if(!Fe)return;const W={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(Fr[Fe]?.length||0)+1}`,label:`Custom Property ${(Fr[Fe]?.length||0)+1}`,type:"text",value:""};ci(Z=>{const oe={...Z,[Fe]:[...Z[Fe]||[],W]};return He(pe=>pe.map(ve=>ve.id===Fe?{...ve,data:{...ve.data,_customProperties:oe[Fe]}}:ve)),oe})},er=(W,Z)=>{Fe&&ci(oe=>{const ve=(oe[Fe]||[]).map(Se=>Se.id===W?{...Se,...Z}:Se);return He(Se=>Se.map(Le=>Le.id===Fe?{...Le,data:{...Le.data,_customProperties:ve}}:Le)),{...oe,[Fe]:ve}})},Ro=W=>{Fe&&ci(Z=>{const pe=(Z[Fe]||[]).filter(ve=>ve.id!==W);return He(ve=>ve.map(Se=>Se.id===Fe?{...Se,data:{...Se.data,_customProperties:pe}}:Se)),{...Z,[Fe]:pe}})};_e.useEffect(()=>{if(!Fe)return;const W=qe.find(Z=>Z.id===Fe);W?.data?._customProperties&&ci(Z=>({...Z,[Fe]:W.data._customProperties}))},[Fe,qe]);const Ua=W=>{const Z=`${Fe}-${W.key}`,oe=To[W.key];let pe;typeof oe=="number"?pe=oe:typeof W.default=="number"?pe=W.default:pe=void 0;let ve;typeof oe=="string"?ve=oe:W.default===null||W.default===void 0?ve="":ve=String(W.default);let Se;typeof oe=="string"?Se=oe:W.default===null||W.default===void 0?Se=void 0:Se=String(W.default);const Le=!!oe;return v.jsxs("div",{className:"flex flex-col px-1",children:[W.type==="boolean"&&v.jsx(JB,{id:Z,checked:Le,onChange:Ge=>Do(W.key,Ge),label:W.label}),W.type==="number"&&v.jsx(QB,{id:Z,label:W.label,value:pe,onChange:Ge=>Fa(W.key,Ge)}),W.type==="text"&&v.jsx(zh,{id:Z,label:W.label,value:ve,placeholder:W.placeholder,onChange:Ge=>$a(W.key,Ge)}),W.type==="textarea"&&v.jsx(Hp,{id:Z,label:W.label,value:ve,placeholder:W.placeholder,onChange:Ge=>$a(W.key,Ge)}),W.type==="select"&&v.jsx(ez,{id:Z,label:W.label,value:Se,options:W.options||[],onChange:Ge=>xs(W.key,Ge)})]},W.key)};let Vn=null;if(Fe){const W=qe.find(Z=>Z.id===Fe);if(W){const Z=W.data.componentId?bu.find(oe=>oe.id===W.data.componentId):bu.find(oe=>oe.label===W.data.label);Z?.properties?Vn=Z.properties.map(oe=>Ua(oe)):Vn=v.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else Vn=v.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let Pi=null;if(Fe){const W=Fr[Fe]||[];W.length>0?Pi=W.map(Z=>v.jsx(Lfe,{property:Z,onUpdate:er,onDelete:Ro},Z.id)):Pi=v.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const Ss=R.useCallback((W,Z)=>{const oe=y.current.find(Se=>Se.id===W);if(!oe)return;const pe=`${W}-copy-${Date.now()}`,ve={...oe,id:pe,position:{x:oe.position.x+200,y:oe.position.y+100},data:{...Z},selected:!1};He(Se=>[...Se,ve])},[He]),vc=R.useMemo(()=>({custom:Xfe(Ss,y),group:jfe}),[Ss]),fi=R.useCallback(async()=>{if(!(!D||!z))try{Oe(!0);const W=await yn.getCollaborators(D);ce(W)}catch(W){console.error("Failed to load collaborators:",W),m.current.error("Failed to load collaborators.")}finally{Oe(!1)}},[D,z]);R.useEffect(()=>{z&&D?fi():z||ce([])},[z,D,fi]);const Sn=localStorage.getItem("auth_token")||"",{sendDiagramUpdate:Oo,sendCursorPosition:Ga,collaborators:Cs,cursors:jo,isConnected:wr,isConnecting:bc,reconnectAttempts:Cn}=Hfe({diagramId:D||"",token:Sn,enabled:!!D&&o,onDiagramUpdate:R.useCallback((W,Z)=>{console.log("Received diagram update from user:",Z),W.nodes&&He(W.nodes),W.edges&&en(W.edges),W.title&&H&&V({...H,title:W.title}),m.current.success("Diagram updated by collaborator")},[He,en,H]),onUserJoined:R.useCallback(W=>{m.current.success(`${W.name} joined the collaboration`)},[]),onUserLeft:R.useCallback(W=>{m.current.success(`${W.name} left the collaboration`)},[]),onError:R.useCallback(W=>{m.current.error(W)},[])});R.useEffect(()=>{if(!wr)return;const W=setTimeout(()=>{Oo({nodes:qe,edges:Bt,title:H?.title})},500);return()=>clearTimeout(W)},[qe,Bt,H?.title,wr,Oo]);const Ii=R.useCallback(W=>{if(!wr||!No.current?.getBoundingClientRect())return;const oe=r({x:W.clientX,y:W.clientY});Ga(oe)},[wr,Ga,r]);if(N)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),v.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(T)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),v.jsx("div",{className:"text-muted mb-4",children:T}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:Qt,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),v.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!w)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),v.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),v.jsx("button",{onClick:Qt,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function Ka(W){const Z=bu.find(Ge=>Ge.id===W),oe=No.current?.getBoundingClientRect();if(!oe)return;const pe=r({x:oe.left+oe.width/2,y:oe.top+oe.height/2}),ve=`${W}-${Date.now()}`,Se=Z?.group==="Grouping",Le={id:ve,position:pe,type:Se?"group":"custom",style:Se?{width:400,height:300,zIndex:-1}:void 0,data:{label:Z?.label??W,componentId:Z?.id,icon:Z?.icon,subtitle:Z?.description,backgroundColor:Se?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Se?"rgba(100, 100, 255, 0.3)":void 0}};He(Ge=>[...Ge,Le])}const Lo=()=>{qe.length===0&&Bt.length===0||Qn(!0)},Gr=()=>{He([]),en([]),vs(null),ai(null),Qn(!1)},Yd=()=>{Qn(!1)},Wa=(W="png")=>{const Z=Pz(wn()),oe=Im(Z,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let ve,Se;W==="svg"?(ve=Xq,Se="svg"):W==="jpeg"?(ve=ace,Se="jpg"):(ve=oce,Se="png"),ve(pe,{backgroundColor:W==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${oe.x}px, ${oe.y}px) scale(${oe.zoom})`}}).then(Le=>{const Ge=document.createElement("a");Ge.setAttribute("download",`system-design-${Date.now()}.${Se}`),Ge.setAttribute("href",Le),Ge.click()}).catch(Le=>{console.error("Error generating image:",Le)})},Es=()=>{try{const W=w?.title||"System Design",Z=w?.description,oe=Ufe(qe,Bt,W,Z),pe=`${W.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;y5(oe,pe,"application/json"),m.current.success("Design exported as JSON successfully!")}catch(W){console.error("Export JSON error:",W),m.current.error("Failed to export as JSON")}},ag=()=>{try{const W=w?.title||"System Design",Z=w?.description,oe=Gfe(qe,Bt,W,Z),pe=`${W.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;y5(oe,pe,"application/xml"),p.success("Design exported as XML successfully!")}catch(W){console.error("Export XML error:",W),p.error("Failed to export as XML")}},Xd=async W=>{const Z=W.target.files?.[0];if(Z)try{const oe=await Kfe(Z);let pe;if(Z.name.endsWith(".json"))pe=m5(oe),p.success("Design imported from JSON successfully!");else if(Z.name.endsWith(".xml")||Z.name.endsWith(".drawio"))pe=g5(oe),p.success("Design imported from XML successfully!");else{const ve=oe.trim();if(ve.startsWith("{")||ve.startsWith("["))pe=m5(oe),p.success("Design imported from JSON successfully!");else if(ve.startsWith("<?xml")||ve.startsWith("<mxfile"))pe=g5(oe),p.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}He(pe.nodes),en(pe.edges),P(null),setTimeout(()=>{yr({padding:.2,duration:400})},100)}catch(oe){console.error("Import error:",oe),p.error(oe instanceof Error?oe.message:"Failed to import diagram")}finally{ji.current&&(ji.current.value="")}},Zd=()=>{ji.current?.click()},xc=async()=>{if(!(!ie.trim()||!D))try{ye(!0),await yn.addCollaborator(D,ie.trim(),$),m.current.success(`Diagram shared with ${ie} successfully!`),ue(""),J("read"),fi()}catch(W){console.error("Failed to Share Design:",W),m.current.error("Failed to Share Design. Please try again.")}finally{ye(!1)}},lg=async(W,Z)=>{if(D)try{await yn.updateCollaborator(D,W,Z),m.current.success("Permission updated successfully!"),fi()}catch(oe){console.error("Failed to update permission:",oe),m.current.error("Failed to update permission.")}},cg=async W=>{if(D)try{await yn.removeCollaborator(D,W),m.current.success("Collaborator removed successfully!"),fi()}catch(Z){console.error("Failed to remove collaborator:",Z),m.current.error("Failed to remove collaborator.")}},Ya=async W=>{if(W.preventDefault(),!!I.trim())try{we("saving");const Z={title:I.trim(),description:X.trim()||void 0,nodes:qe,edges:Bt},oe=await yn.saveDiagram(Z);P(oe.id),V(oe);const pe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(pe,oe.id),we("saved"),ke(new Date),F(!1),q(""),te(""),p.success("Design saved successfully!")}catch(Z){console.error("Failed to save diagram:",Z),we("error"),p.error("Failed to save design. Please try again.")}},wc=()=>{F(!1),we("idle"),q(""),te("")},Xa=(W="TB")=>{const Z=qe.filter(tt=>tt.type==="group"),oe=qe.filter(tt=>tt.type!=="group"&&!tt.parentId),pe=new Ah.graphlib.Graph;pe.setDefaultEdgeLabel(()=>({})),pe.setGraph({rankdir:W,nodesep:150,ranksep:200,marginx:50,marginy:50});const ve=350,Se=250;for(const tt of Z)pe.setNode(tt.id,{width:ve,height:Se});const Le=Bt.filter(tt=>Z.some(st=>st.id===tt.source)&&Z.some(st=>st.id===tt.target));for(const tt of Le)pe.setEdge(tt.source,tt.target);Z.length>0&&Ah.layout(pe);const Ge=new Ah.graphlib.Graph;Ge.setDefaultEdgeLabel(()=>({})),Ge.setGraph({rankdir:W,nodesep:80,ranksep:100});const qt=200,Sr=80;for(const tt of oe)Ge.setNode(tt.id,{width:qt,height:Sr});const tr=Bt.filter(tt=>oe.some(st=>st.id===tt.source)&&oe.some(st=>st.id===tt.target));for(const tt of tr)Ge.setEdge(tt.source,tt.target);oe.length>0&&Ah.layout(Ge);const Kr=qe.map(tt=>{if(tt.type==="group"){const st=pe.node(tt.id);if(st)return{...tt,position:{x:st.x-ve/2,y:st.y-Se/2}}}else{if(tt.parentId)return tt;{const st=Ge.node(tt.id);if(st){const Bi=Z.length>0?ve+100:0;return{...tt,position:{x:st.x-qt/2+Bi,y:st.y-Sr/2}}}}}return tt});He(Kr),globalThis.requestAnimationFrame(()=>{yr({padding:.2,duration:400})})},ks=()=>{if(He(W=>W.map(Z=>Z.id===Fe?{...Z,data:{...Z.data,...To}}:Z)),Fe){const W=qe.find(Z=>Z.id===Fe);console.log("Node properties saved:",{id:Fe,data:W?.data,nodeProps:To})}},Ns=n==="free"?"Design Studio | Diagrammatic":`${w?.title||"System Design Challenge"} | Diagrammatic`,Jd=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${w?.title||"system design"} challenge. ${w?.description?.substring(0,150)||"Practice system design skills"}...`;return v.jsxs(v.Fragment,{children:[v.jsx(Md,{title:Ns,description:Jd,keywords:`system design playground, ${w?.title||"free canvas"}, architecture diagram tool, ${w?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),v.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[v.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:v.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:v.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("button",{type:"button",onClick:Qt,className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[v.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":w.title,children:w.title}),n!=="free"&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":w.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:w.difficulty}),w.estimated_time&&v.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[v.jsx(cK,{className:"h-3 w-3"}),w.estimated_time]})]}),n!=="free"&&v.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:v.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:ko(Jt)})})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&v.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:rt&&v.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[Ce==="saving"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),v.jsx("span",{children:"Saving..."})]}),Ce==="saved"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),v.jsxs("span",{children:["Saved"," ",be&&br(be)]})]}),Ce==="error"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),v.jsx("span",{children:"Save failed"})]}),Ce==="idle"&&be&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),v.jsxs("span",{children:["Saved ",br(be)]})]})]})}),n&&n!=="free"&&rt&&v.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:v.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[Ce==="saving"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),v.jsx("span",{children:"Saving progress..."})]}),Ce==="saved"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),v.jsxs("span",{children:["Progress saved"," ",be&&br(be)]})]}),Ce==="error"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),v.jsx("span",{children:"Save failed"})]}),Ce==="idle"&&be&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),v.jsxs("span",{children:["Progress saved ",br(be)]})]})]})}),v.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[v.jsx("button",{type:"button",onClick:qn,disabled:!xn,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:v.jsx(lK,{className:"h-5 w-5"})}),v.jsx("button",{type:"button",onClick:Dn,disabled:!yt,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:v.jsx(aK,{className:"h-5 w-5"})}),v.jsx("button",{type:"button",onClick:Lo,disabled:qe.length===0&&Bt.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:v.jsx(Oh,{className:"h-5 w-5"})})]}),n==="free"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",onClick:Zd,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:v.jsx(xK,{className:"h-5 w-5"})}),v.jsx("input",{ref:ji,type:"file",accept:".json,.xml,.drawio",onChange:Xd,className:"hidden","aria-label":"Import diagram file"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{type:"button",onClick:()=>Rn(!vr),disabled:qe.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:v.jsx(bK,{className:"h-5 w-5"})}),vr&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),v.jsx("button",{type:"button",onClick:()=>{Wa("png"),Rn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),v.jsx("button",{type:"button",onClick:()=>{Wa("jpeg"),Rn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),v.jsx("button",{type:"button",onClick:()=>{Wa("svg"),Rn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),v.jsx("div",{className:"border-t border-theme/10 my-1"}),v.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),v.jsx("button",{type:"button",onClick:()=>{Es(),Rn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),v.jsx("button",{type:"button",onClick:()=>{ag(),Rn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{type:"button",onClick:()=>Oi(!Ri),disabled:qe.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:v.jsx(mte,{className:"h-5 w-5"})}),Ri&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[v.jsx("button",{type:"button",onClick:()=>{Xa("TB"),Oi(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),v.jsx("button",{type:"button",onClick:()=>{Xa("LR"),Oi(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&o&&D&&v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",onClick:()=>K(!0),className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Share Diagram",children:v.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),v.jsx(Ffe,{isConnected:wr,isConnecting:bc,reconnectAttempts:Cn,collaborators:Cs,showCollaborators:!0})]}),w?.id!=="free"&&v.jsx("button",{type:"button",onClick:Ha,disabled:Li,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:Li?"Assessing...":"Run Assessment"}),v.jsx(Ad,{}),v.jsx("div",{className:"relative",children:o?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>G(!L),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?v.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),v.jsx(fI,{className:"h-4 w-4"})]}),L&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(),G(!1),P(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>O(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),v.jsxs("div",{className:"flex-1 flex min-h-0",children:[v.jsx(kfe,{components:bu,onAdd:Ka}),v.jsx(Nfe,{reactFlowWrapperRef:No,nodes:qe,edges:Bt,nodeTypes:vc,edgeTypes:Wfe,onNodesChange:oi,onEdgesChange:dn,onConnect:yc,onDragOver:xr,onDrop:zt,onNodeDragStop:tn,onMouseMove:Ii,children:jo.map(W=>{const Z=i(W.position);return v.jsx($fe,{name:W.user.name,color:QC(W.userId),position:Z,pictureUrl:W.user.pictureUrl},W.userId)})}),v.jsx(Tfe,{problem:w,activeTab:ui,setActiveTab:On,inspectedNodeId:Fe,setInspectedNodeId:vs,propertyElements:Vn,customPropertyElements:Pi,onAddCustomProperty:ws,handleSave:ks,assessmentResult:Va,onDetachFromGroup:li,isNodeInGroup:Fe?qe.find(W=>W.id===Fe)?.parentId!==void 0:!1})]}),di&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:Yd,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:Gr,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),v.jsx(fm,{isOpen:_,onClose:()=>O(!1),onLogin:async(W,Z)=>{await l({email:W,password:Z})},onSignup:async(W,Z,oe)=>{await u({email:W,password:Z,name:oe})},onGoogleLogin:d}),B&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:v.jsxs("form",{onSubmit:Ya,children:[v.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:v.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),v.jsxs("div",{className:"px-6 py-4 space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{id:"title-input",type:"text",value:I,onChange:W=>q(W.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),v.jsx("textarea",{id:"description-input",value:X,onChange:W=>te(W.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),v.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:wc,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!I.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),z&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Share Design"}),v.jsx("button",{type:"button",onClick:()=>K(!1),className:"p-1 text-muted hover:text-theme rounded-md transition-colors",children:v.jsx(Oh,{className:"h-5 w-5"})})]}),v.jsxs("p",{className:"text-sm text-muted mt-1",children:['Share "',H?.title||"Untitled Design",'" with others']})]}),v.jsxs("div",{className:"px-6 py-4 space-y-6",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-sm font-medium text-theme",children:"Add Collaborator"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"share-email",className:"block text-sm font-medium text-theme mb-2",children:"Email Address"}),v.jsx("input",{id:"share-email",type:"email",value:ie,onChange:W=>ue(W.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"share-permission",className:"block text-sm font-medium text-theme mb-2",children:"Permission Level"}),v.jsxs("select",{id:"share-permission",value:$,onChange:W=>J(W.target.value),className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",children:[v.jsx("option",{value:"read",children:"Read Only - Can view the diagram"}),v.jsx("option",{value:"edit",children:"Read & Edit - Can view and modify the diagram"})]})]}),v.jsx("button",{type:"button",onClick:xc,disabled:!ie.trim()||le,className:"w-full px-4 py-2 bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:le?"Sharing...":"Share Design"})]})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-sm font-medium text-theme",children:"Current Collaborators"}),Ne?v.jsxs("div",{className:"text-center py-4",children:[v.jsx("div",{className:"inline-block w-4 h-4 border border-accent/30 border-t-accent rounded-full animate-spin"}),v.jsx("p",{className:"text-sm text-muted mt-2",children:"Loading collaborators..."})]}):ee.length===0?v.jsxs("div",{className:"text-center py-4 text-muted",children:[v.jsx("p",{className:"text-sm",children:"No collaborators yet"}),v.jsx("p",{className:"text-xs mt-1",children:"Share this diagram to start collaborating"})]}):v.jsx("div",{className:"space-y-2",children:ee.map(W=>v.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme/5 rounded-md",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:v.jsx("span",{className:"text-sm font-medium text-accent",children:W.email[0].toUpperCase()})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:W.email}),v.jsxs("p",{className:"text-xs text-muted capitalize",children:[W.permission," access"]})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs("select",{value:W.permission,onChange:Z=>lg(W.id,Z.target.value),className:"text-xs px-2 py-1 border border-theme/20 rounded bg-theme text-theme",children:[v.jsx("option",{value:"read",children:"Read"}),v.jsx("option",{value:"edit",children:"Edit"})]}),v.jsx("button",{type:"button",onClick:()=>cg(W.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove collaborator",children:v.jsx(Oh,{className:"h-4 w-4"})})]})]},W.id))})]}),v.jsxs("div",{className:"space-y-3",children:[v.jsx("h3",{className:"text-sm font-medium text-theme",children:"Share Link"}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("input",{type:"text",value:`${window.location.origin}/#/playground/free?diagramId=${D}`,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-theme/20 rounded-md bg-theme/50 text-theme"}),v.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/#/playground/free?diagramId=${D}`),p.success("Link copied to clipboard!")},className:"px-3 py-2 bg-theme/10 hover:bg-theme/20 text-theme rounded-md transition-colors",children:"Copy"})]}),v.jsx("p",{className:"text-xs text-muted",children:"Anyone with this link can access the diagram according to their permission level"})]})]})]})}),v.jsx(Bfe,{toasts:p.toasts,onClose:p.removeToast})]})]})},Jfe=()=>v.jsx(Iq,{children:v.jsx(Zfe,{})}),Qfe=()=>(Oa(),v.jsx(E9,{children:v.jsx(l9,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsxs(s9,{children:[v.jsx(Qo,{path:"/",element:v.jsx(a_,{})}),v.jsx(Qo,{path:"/problems",element:v.jsx(fW,{})}),v.jsx(Qo,{path:"/create-problem",element:v.jsx(hte,{})}),v.jsx(Qo,{path:"/diagrams",element:v.jsx(pte,{})}),v.jsx(Qo,{path:"/playground/:id",element:v.jsx(Jfe,{})}),v.jsx(Qo,{path:"*",element:v.jsx(a_,{})})]})})}));dF.createRoot(document.getElementById("root")).render(v.jsx(R.StrictMode,{children:v.jsx(Qfe,{})}));
