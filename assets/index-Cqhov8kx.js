function GF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L0={exports:{}},Du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fM;function WF(){if(fM)return Du;fM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Du.Fragment=t,Du.jsx=n,Du.jsxs=n,Du}var hM;function KF(){return hM||(hM=1,L0.exports=WF()),L0.exports}var m=KF(),P0={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM;function YF(){if(pM)return Ze;pM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function g(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function w(z,W,oe){this.props=z,this.context=W,this.refs=S,this.updater=oe||b}w.prototype.isReactComponent={},w.prototype.setState=function(z,W){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,W,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=w.prototype;function T(z,W,oe){this.props=z,this.context=W,this.refs=S,this.updater=oe||b}var E=T.prototype=new k;E.constructor=T,v(E,w.prototype),E.isPureReactComponent=!0;var N=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function j(z,W,oe,ae,$,Q){return oe=Q.ref,{$$typeof:e,type:z,key:W,ref:oe!==void 0?oe:null,props:Q}}function R(z,W){return j(z.type,W,void 0,void 0,void 0,z.props)}function I(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function B(z){var W={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(oe){return W[oe]})}var U=/\/+/g;function q(z,W){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):W.toString(36)}function F(){}function L(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(F,F):(z.status="pending",z.then(function(W){z.status==="pending"&&(z.status="fulfilled",z.value=W)},function(W){z.status==="pending"&&(z.status="rejected",z.reason=W)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function H(z,W,oe,ae,$){var Q=typeof z;(Q==="undefined"||Q==="boolean")&&(z=null);var ee=!1;if(z===null)ee=!0;else switch(Q){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(z.$$typeof){case e:case t:ee=!0;break;case f:return ee=z._init,H(ee(z._payload),W,oe,ae,$)}}if(ee)return $=$(z),ee=ae===""?"."+q(z,0):ae,N($)?(oe="",ee!=null&&(oe=ee.replace(U,"$&/")+"/"),H($,W,oe,"",function(xe){return xe})):$!=null&&(I($)&&($=R($,oe+($.key==null||z&&z.key===$.key?"":(""+$.key).replace(U,"$&/")+"/")+ee)),W.push($)),1;ee=0;var de=ae===""?".":ae+":";if(N(z))for(var le=0;le<z.length;le++)ae=z[le],Q=de+q(ae,le),ee+=H(ae,W,oe,Q,$);else if(le=g(z),typeof le=="function")for(z=le.call(z),le=0;!(ae=z.next()).done;)ae=ae.value,Q=de+q(ae,le++),ee+=H(ae,W,oe,Q,$);else if(Q==="object"){if(typeof z.then=="function")return H(L(z),W,oe,ae,$);throw W=String(z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ee}function O(z,W,oe){if(z==null)return z;var ae=[],$=0;return H(z,ae,"","",function(Q){return W.call(oe,Q,$++)}),ae}function V(z){if(z._status===-1){var W=z._result;W=W(),W.then(function(oe){(z._status===0||z._status===-1)&&(z._status=1,z._result=oe)},function(oe){(z._status===0||z._status===-1)&&(z._status=2,z._result=oe)}),z._status===-1&&(z._status=0,z._result=W)}if(z._status===1)return z._result.default;throw z._result}var Y=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function te(){}return Ze.Children={map:O,forEach:function(z,W,oe){O(z,function(){W.apply(this,arguments)},oe)},count:function(z){var W=0;return O(z,function(){W++}),W},toArray:function(z){return O(z,function(W){return W})||[]},only:function(z){if(!I(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Ze.Component=w,Ze.Fragment=n,Ze.Profiler=i,Ze.PureComponent=T,Ze.StrictMode=r,Ze.Suspense=u,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(z){return A.H.useMemoCache(z)}},Ze.cache=function(z){return function(){return z.apply(null,arguments)}},Ze.cloneElement=function(z,W,oe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ae=v({},z.props),$=z.key,Q=void 0;if(W!=null)for(ee in W.ref!==void 0&&(Q=void 0),W.key!==void 0&&($=""+W.key),W)!_.call(W,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&W.ref===void 0||(ae[ee]=W[ee]);var ee=arguments.length-2;if(ee===1)ae.children=oe;else if(1<ee){for(var de=Array(ee),le=0;le<ee;le++)de[le]=arguments[le+2];ae.children=de}return j(z.type,$,void 0,void 0,Q,ae)},Ze.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},Ze.createElement=function(z,W,oe){var ae,$={},Q=null;if(W!=null)for(ae in W.key!==void 0&&(Q=""+W.key),W)_.call(W,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&($[ae]=W[ae]);var ee=arguments.length-2;if(ee===1)$.children=oe;else if(1<ee){for(var de=Array(ee),le=0;le<ee;le++)de[le]=arguments[le+2];$.children=de}if(z&&z.defaultProps)for(ae in ee=z.defaultProps,ee)$[ae]===void 0&&($[ae]=ee[ae]);return j(z,Q,void 0,void 0,null,$)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(z){return{$$typeof:l,render:z}},Ze.isValidElement=I,Ze.lazy=function(z){return{$$typeof:f,_payload:{_status:-1,_result:z},_init:V}},Ze.memo=function(z,W){return{$$typeof:d,type:z,compare:W===void 0?null:W}},Ze.startTransition=function(z){var W=A.T,oe={};A.T=oe;try{var ae=z(),$=A.S;$!==null&&$(oe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(te,Y)}catch(Q){Y(Q)}finally{A.T=W}},Ze.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ze.use=function(z){return A.H.use(z)},Ze.useActionState=function(z,W,oe){return A.H.useActionState(z,W,oe)},Ze.useCallback=function(z,W){return A.H.useCallback(z,W)},Ze.useContext=function(z){return A.H.useContext(z)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(z,W){return A.H.useDeferredValue(z,W)},Ze.useEffect=function(z,W,oe){var ae=A.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(z,W)},Ze.useId=function(){return A.H.useId()},Ze.useImperativeHandle=function(z,W,oe){return A.H.useImperativeHandle(z,W,oe)},Ze.useInsertionEffect=function(z,W){return A.H.useInsertionEffect(z,W)},Ze.useLayoutEffect=function(z,W){return A.H.useLayoutEffect(z,W)},Ze.useMemo=function(z,W){return A.H.useMemo(z,W)},Ze.useOptimistic=function(z,W){return A.H.useOptimistic(z,W)},Ze.useReducer=function(z,W,oe){return A.H.useReducer(z,W,oe)},Ze.useRef=function(z){return A.H.useRef(z)},Ze.useState=function(z){return A.H.useState(z)},Ze.useSyncExternalStore=function(z,W,oe){return A.H.useSyncExternalStore(z,W,oe)},Ze.useTransition=function(){return A.H.useTransition()},Ze.version="19.1.1",Ze}var mM;function Yd(){return mM||(mM=1,P0.exports=YF()),P0.exports}var M=Yd();const Ce=Kd(M),XF=GF({__proto__:null,default:Ce},[M]);var I0={exports:{}},Ru={},B0={exports:{}},z0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gM;function ZF(){return gM||(gM=1,(function(e){function t(O,V){var Y=O.length;O.push(V);e:for(;0<Y;){var te=Y-1>>>1,z=O[te];if(0<i(z,V))O[te]=V,O[Y]=z,Y=te;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var V=O[0],Y=O.pop();if(Y!==V){O[0]=Y;e:for(var te=0,z=O.length,W=z>>>1;te<W;){var oe=2*(te+1)-1,ae=O[oe],$=oe+1,Q=O[$];if(0>i(ae,Y))$<z&&0>i(Q,ae)?(O[te]=Q,O[$]=Y,te=$):(O[te]=ae,O[oe]=Y,te=oe);else if($<z&&0>i(Q,Y))O[te]=Q,O[$]=Y,te=$;else break e}}return V}function i(O,V){var Y=O.sortIndex-V.sortIndex;return Y!==0?Y:O.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,b=!1,v=!1,S=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(O){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=O)r(d),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(d)}}function A(O){if(S=!1,N(O),!v)if(n(u)!==null)v=!0,_||(_=!0,q());else{var V=n(d);V!==null&&H(A,V.startTime-O)}}var _=!1,j=-1,R=5,I=-1;function B(){return w?!0:!(e.unstable_now()-I<R)}function U(){if(w=!1,_){var O=e.unstable_now();I=O;var V=!0;try{e:{v=!1,S&&(S=!1,T(j),j=-1),b=!0;var Y=g;try{t:{for(N(O),p=n(u);p!==null&&!(p.expirationTime>O&&B());){var te=p.callback;if(typeof te=="function"){p.callback=null,g=p.priorityLevel;var z=te(p.expirationTime<=O);if(O=e.unstable_now(),typeof z=="function"){p.callback=z,N(O),V=!0;break t}p===n(u)&&r(u),N(O)}else r(u);p=n(u)}if(p!==null)V=!0;else{var W=n(d);W!==null&&H(A,W.startTime-O),V=!1}}break e}finally{p=null,g=Y,b=!1}V=void 0}}finally{V?q():_=!1}}}var q;if(typeof E=="function")q=function(){E(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,L=F.port2;F.port1.onmessage=U,q=function(){L.postMessage(null)}}else q=function(){k(U,0)};function H(O,V){j=k(function(){O(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(O){switch(g){case 1:case 2:case 3:var V=3;break;default:V=g}var Y=g;g=V;try{return O()}finally{g=Y}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=g;g=O;try{return V()}finally{g=Y}},e.unstable_scheduleCallback=function(O,V,Y){var te=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?te+Y:te):Y=te,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=Y+z,O={id:f++,callback:V,priorityLevel:O,startTime:Y,expirationTime:z,sortIndex:-1},Y>te?(O.sortIndex=Y,t(d,O),n(u)===null&&O===n(d)&&(S?(T(j),j=-1):S=!0,H(A,Y-te))):(O.sortIndex=z,t(u,O),v||b||(v=!0,_||(_=!0,q()))),O},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(O){var V=g;return function(){var Y=g;g=V;try{return O.apply(this,arguments)}finally{g=Y}}}})(z0)),z0}var yM;function QF(){return yM||(yM=1,B0.exports=ZF()),B0.exports}var q0={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM;function JF(){if(bM)return er;bM=1;var e=Yd();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,er.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,f)},er.flushSync=function(u){var d=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=f,r.d.f()}},er.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},er.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},er.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:b}):f==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},er.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},er.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);r.d.L(u,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},er.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},er.requestFormReset=function(u){r.d.r(u)},er.unstable_batchedUpdates=function(u,d){return u(d)},er.useFormState=function(u,d,f){return o.H.useFormState(u,d,f)},er.useFormStatus=function(){return o.H.useHostTransitionStatus()},er.version="19.1.1",er}var xM;function dP(){if(xM)return q0.exports;xM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),q0.exports=JF(),q0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM;function eU(){if(vM)return Ru;vM=1;var e=QF(),t=Yd(),n=dP();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,y=c;;){var x=h.return;if(x===null)break;var C=x.alternate;if(C===null){if(y=x.return,y!==null){h=y;continue}break}if(x.child===C.child){for(C=x.child;C;){if(C===h)return l(x),a;if(C===y)return l(x),c;C=C.sibling}throw Error(r(188))}if(h.return!==y.return)h=x,y=C;else{for(var D=!1,P=x.child;P;){if(P===h){D=!0,h=x,y=C;break}if(P===y){D=!0,y=x,h=C;break}P=P.sibling}if(!D){for(P=C.child;P;){if(P===h){D=!0,h=C,y=x;break}if(P===y){D=!0,y=C,h=x;break}P=P.sibling}if(!D)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var F=Symbol.for("react.client.reference");function L(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===F?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case E:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case N:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return c=a.displayName||null,c!==null?c:L(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return L(a(c))}catch{}}return null}var H=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},te=[],z=-1;function W(a){return{current:a}}function oe(a){0>z||(a.current=te[z],te[z]=null,z--)}function ae(a,c){z++,te[z]=a.current,a.current=c}var $=W(null),Q=W(null),ee=W(null),de=W(null);function le(a,c){switch(ae(ee,c),ae(Q,a),ae($,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?qA(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=qA(c),a=VA(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}oe($),ae($,a)}function xe(){oe($),oe(Q),oe(ee)}function _e(a){a.memoizedState!==null&&ae(de,a);var c=$.current,h=VA(c,a.type);c!==h&&(ae(Q,a),ae($,h))}function ze(a){Q.current===a&&(oe($),oe(Q)),de.current===a&&(oe(de),Nu._currentValue=Y)}var Pe=Object.prototype.hasOwnProperty,Te=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,pt=e.unstable_requestPaint,Le=e.unstable_now,gt=e.unstable_getCurrentPriorityLevel,bt=e.unstable_ImmediatePriority,$t=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,zt=e.unstable_LowPriority,Nt=e.unstable_IdlePriority,En=e.log,dn=e.unstable_setDisableYieldValue,Ot=null,dt=null;function Tt(a){if(typeof En=="function"&&dn(a),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Ot,a)}catch{}}var At=Math.clz32?Math.clz32:vi,sr=Math.log,Ar=Math.LN2;function vi(a){return a>>>=0,a===0?32:31-(sr(a)/Ar|0)|0}var Qt=256,Oe=4194304;function Ue(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function or(a,c,h){var y=a.pendingLanes;if(y===0)return 0;var x=0,C=a.suspendedLanes,D=a.pingedLanes;a=a.warmLanes;var P=y&134217727;return P!==0?(y=P&~C,y!==0?x=Ue(y):(D&=P,D!==0?x=Ue(D):h||(h=P&~a,h!==0&&(x=Ue(h))))):(P=y&~C,P!==0?x=Ue(P):D!==0?x=Ue(D):h||(h=y&~a,h!==0&&(x=Ue(h)))),x===0?0:c!==0&&c!==x&&(c&C)===0&&(C=x&-x,h=c&-c,C>=h||C===32&&(h&4194048)!==0)?c:x}function lt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function fn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $s(){var a=Qt;return Qt<<=1,(Qt&4194048)===0&&(Qt=256),a}function wi(){var a=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),a}function Mr(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function _r(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ar(a,c,h,y,x,C){var D=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var P=a.entanglements,K=a.expirationTimes,se=a.hiddenUpdates;for(h=D&~h;0<h;){var fe=31-At(h),me=1<<fe;P[fe]=0,K[fe]=-1;var ce=se[fe];if(ce!==null)for(se[fe]=null,fe=0;fe<ce.length;fe++){var ue=ce[fe];ue!==null&&(ue.lane&=-536870913)}h&=~me}y!==0&&yr(a,y,0),C!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=C&~(D&~c))}function yr(a,c,h){a.pendingLanes|=c,a.suspendedLanes&=~c;var y=31-At(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|h&4194090}function Dr(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var y=31-At(h),x=1<<y;x&c|a[y]&c&&(a[y]|=c),h&=~x}}function xt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Bn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Gs(){var a=V.p;return a!==0?a:(a=window.event,a===void 0?32:oM(a.type))}function Si(a,c){var h=V.p;try{return V.p=a,c()}finally{V.p=h}}var Kn=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Kn,Lt="__reactProps$"+Kn,br="__reactContainer$"+Kn,Nn="__reactEvents$"+Kn,Rr="__reactListeners$"+Kn,Ii="__reactHandles$"+Kn,fs="__reactResources$"+Kn,jr="__reactMarker$"+Kn;function Bi(a){delete a[Gt],delete a[Lt],delete a[Nn],delete a[Rr],delete a[Ii]}function hn(a){var c=a[Gt];if(c)return c;for(var h=a.parentNode;h;){if(c=h[br]||h[Gt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=$A(a);a!==null;){if(h=a[Gt])return h;a=$A(a)}return c}a=h,h=a.parentNode}return null}function He(a){if(a=a[Gt]||a[br]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Yn(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Xn(a){var c=a[fs];return c||(c=a[fs]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Rt(a){a[jr]=!0}var zi=new Set,De={};function Z(a,c){ge(a,c),ge(a+"Capture",c)}function ge(a,c){for(De[a]=c,a=0;a<c.length;a++)zi.add(c[a])}var Me=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ct={},Pt={};function Mt(a){return Pe.call(Pt,a)?!0:Pe.call(ct,a)?!1:Me.test(a)?Pt[a]=!0:(ct[a]=!0,!1)}function qt(a,c,h){if(Mt(c))if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+h)}}function _n(a,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+h)}}function pn(a,c,h,y){if(y===null)a.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(c,h,""+y)}}var Xr,It;function zn(a){if(Xr===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);Xr=c&&c[1]||"",It=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+a+It}var qi=!1;function Yo(a,c){if(!a||qi)return"";qi=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ue){var ce=ue}Reflect.construct(a,[],me)}else{try{me.call()}catch(ue){ce=ue}a.call(me.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),D=C[0],P=C[1];if(D&&P){var K=D.split(`
`),se=P.split(`
`);for(x=y=0;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;for(;x<se.length&&!se[x].includes("DetermineComponentFrameRoot");)x++;if(y===K.length||x===se.length)for(y=K.length-1,x=se.length-1;1<=y&&0<=x&&K[y]!==se[x];)x--;for(;1<=y&&0<=x;y--,x--)if(K[y]!==se[x]){if(y!==1||x!==1)do if(y--,x--,0>x||K[y]!==se[x]){var fe=`
`+K[y].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=y&&0<=x);break}}}finally{qi=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?zn(h):""}function rl(a){switch(a.tag){case 26:case 27:case 5:return zn(a.type);case 16:return zn("Lazy");case 13:return zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return Yo(a.type,!1);case 11:return Yo(a.type.render,!1);case 1:return Yo(a.type,!0);case 31:return zn("Activity");default:return""}}function il(a){try{var c="";do c+=rl(a),a=a.return;while(a);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function Zn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function sl(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Oc(a){var c=sl(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,C=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return x.call(this)},set:function(D){y=""+D,C.call(this,D)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ws(a){a._valueTracker||(a._valueTracker=Oc(a))}function Vi(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return a&&(y=sl(a)?a.checked?"true":"false":a.value),a=y,a!==h?(c.setValue(a),!0):!1}function Hi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ks=/[\n"\\]/g;function Qn(a){return a.replace(Ks,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Or(a,c,h,y,x,C,D,P){a.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.type=D:a.removeAttribute("type"),c!=null?D==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Zn(c)):a.value!==""+Zn(c)&&(a.value=""+Zn(c)):D!=="submit"&&D!=="reset"||a.removeAttribute("value"),c!=null?Ys(a,D,Zn(c)):h!=null?Ys(a,D,Zn(h)):y!=null&&a.removeAttribute("value"),x==null&&C!=null&&(a.defaultChecked=!!C),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.name=""+Zn(P):a.removeAttribute("name")}function Xo(a,c,h,y,x,C,D,P){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||h!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;h=h!=null?""+Zn(h):"",c=c!=null?""+Zn(c):h,P||c===a.value||(a.value=c),a.defaultValue=c}y=y??x,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=P?a.checked:!!y,a.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.name=D)}function Ys(a,c,h){c==="number"&&Hi(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Zr(a,c,h,y){if(a=a.options,c){c={};for(var x=0;x<h.length;x++)c["$"+h[x]]=!0;for(h=0;h<a.length;h++)x=c.hasOwnProperty("$"+a[h].value),a[h].selected!==x&&(a[h].selected=x),x&&y&&(a[h].defaultSelected=!0)}else{for(h=""+Zn(h),c=null,x=0;x<a.length;x++){if(a[x].value===h){a[x].selected=!0,y&&(a[x].defaultSelected=!0);return}c!==null||a[x].disabled||(c=a[x])}c!==null&&(c.selected=!0)}}function vf(a,c,h){if(c!=null&&(c=""+Zn(c),c!==a.value&&(a.value=c),h==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=h!=null?""+Zn(h):""}function wf(a,c,h,y){if(c==null){if(y!=null){if(h!=null)throw Error(r(92));if(H(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),c=h}h=Zn(c),a.defaultValue=h,y=a.textContent,y===h&&y!==""&&y!==null&&(a.value=y)}function Qr(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var zg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sf(a,c,h){var y=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":y?a.setProperty(c,h):typeof h!="number"||h===0||zg.has(c)?c==="float"?a.cssFloat=h:a[c]=(""+h).trim():a[c]=h+"px"}function Cf(a,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var x in c)y=c[x],c.hasOwnProperty(x)&&h[x]!==y&&Sf(a,x,y)}else for(var C in c)c.hasOwnProperty(C)&&Sf(a,C,c[C])}function Lc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ol(a){return kf.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Pc=null;function Ic(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Fi=null,Xs=null;function Ef(a){var c=He(a);if(c&&(a=c.stateNode)){var h=a[Lt]||null;e:switch(a=c.stateNode,c.type){case"input":if(Or(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Qn(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==a&&y.form===a.form){var x=y[Lt]||null;if(!x)throw Error(r(90));Or(y,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<h.length;c++)y=h[c],y.form===a.form&&Vi(y)}break e;case"textarea":vf(a,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Zr(a,!!h.multiple,c,!1)}}}var Bc=!1;function Nf(a,c,h){if(Bc)return a(c,h);Bc=!0;try{var y=a(c);return y}finally{if(Bc=!1,(Fi!==null||Xs!==null)&&(ch(),Fi&&(c=Fi,a=Xs,Xs=Fi=null,Ef(c),a)))for(c=0;c<a.length;c++)Ef(a[c])}}function Zo(a,c){var h=a.stateNode;if(h===null)return null;var y=h[Lt]||null;if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=!1;if(Ci)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){zc=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{zc=!1}var Ui=null,qc=null,al=null;function Vc(){if(al)return al;var a,c=qc,h=c.length,y,x="value"in Ui?Ui.value:Ui.textContent,C=x.length;for(a=0;a<h&&c[a]===x[a];a++);var D=h-a;for(y=1;y<=D&&c[h-y]===x[C-y];y++);return al=x.slice(a,1<y?1-y:void 0)}function ll(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function cl(){return!0}function Tf(){return!1}function G(a){function c(h,y,x,C,D){this._reactName=h,this._targetInst=x,this.type=y,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var P in a)a.hasOwnProperty(P)&&(h=a[P],this[P]=h?h(C):C[P]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?cl:Tf,this.isPropagationStopped=Tf,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),c}var X={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},re=G(X),pe=f({},X,{view:0,detail:0}),be=G(pe),we,Se,Ie,Je=f({},pe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ie&&(Ie&&a.type==="mousemove"?(we=a.screenX-Ie.screenX,Se=a.screenY-Ie.screenY):Se=we=0,Ie=a),we)},movementY:function(a){return"movementY"in a?a.movementY:Se}}),Re=G(Je),Xe=f({},Je,{dataTransfer:0}),ft=G(Xe),Vg=f({},pe,{relatedTarget:0}),Hc=G(Vg),Hg=f({},X,{animationName:0,elapsedTime:0,pseudoElement:0}),Af=G(Hg),qn=f({},X,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jr=G(qn),Mf=f({},X,{data:0}),W2=G(Mf),tH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iH(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=rH[a])?!!c[a]:!1}function Fg(){return iH}var sH=f({},pe,{key:function(a){if(a.key){var c=tH[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=ll(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?nH[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fg,charCode:function(a){return a.type==="keypress"?ll(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ll(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),oH=G(sH),aH=f({},Je,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K2=G(aH),lH=f({},pe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fg}),cH=G(lH),uH=f({},X,{propertyName:0,elapsedTime:0,pseudoElement:0}),dH=G(uH),fH=f({},Je,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),hH=G(fH),pH=f({},X,{newState:0,oldState:0}),mH=G(pH),gH=[9,13,27,32],Ug=Ci&&"CompositionEvent"in window,Fc=null;Ci&&"documentMode"in document&&(Fc=document.documentMode);var yH=Ci&&"TextEvent"in window&&!Fc,Y2=Ci&&(!Ug||Fc&&8<Fc&&11>=Fc),X2=" ",Z2=!1;function Q2(a,c){switch(a){case"keyup":return gH.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ul=!1;function bH(a,c){switch(a){case"compositionend":return J2(c);case"keypress":return c.which!==32?null:(Z2=!0,X2);case"textInput":return a=c.data,a===X2&&Z2?null:a;default:return null}}function xH(a,c){if(ul)return a==="compositionend"||!Ug&&Q2(a,c)?(a=Vc(),al=qc=Ui=null,ul=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Y2&&c.locale!=="ko"?null:c.data;default:return null}}var vH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eN(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!vH[a.type]:c==="textarea"}function tN(a,c,h,y){Fi?Xs?Xs.push(y):Xs=[y]:Fi=y,c=mh(c,"onChange"),0<c.length&&(h=new re("onChange","change",null,h,y),a.push({event:h,listeners:c}))}var Uc=null,$c=null;function wH(a){LA(a,0)}function _f(a){var c=Yn(a);if(Vi(c))return a}function nN(a,c){if(a==="change")return c}var rN=!1;if(Ci){var $g;if(Ci){var Gg="oninput"in document;if(!Gg){var iN=document.createElement("div");iN.setAttribute("oninput","return;"),Gg=typeof iN.oninput=="function"}$g=Gg}else $g=!1;rN=$g&&(!document.documentMode||9<document.documentMode)}function sN(){Uc&&(Uc.detachEvent("onpropertychange",oN),$c=Uc=null)}function oN(a){if(a.propertyName==="value"&&_f($c)){var c=[];tN(c,$c,a,Ic(a)),Nf(wH,c)}}function SH(a,c,h){a==="focusin"?(sN(),Uc=c,$c=h,Uc.attachEvent("onpropertychange",oN)):a==="focusout"&&sN()}function CH(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _f($c)}function kH(a,c){if(a==="click")return _f(c)}function EH(a,c){if(a==="input"||a==="change")return _f(c)}function NH(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Lr=typeof Object.is=="function"?Object.is:NH;function Gc(a,c){if(Lr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var x=h[y];if(!Pe.call(c,x)||!Lr(a[x],c[x]))return!1}return!0}function aN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function lN(a,c){var h=aN(a);a=0;for(var y;h;){if(h.nodeType===3){if(y=a+h.textContent.length,a<=c&&y>=c)return{node:h,offset:c-a};a=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=aN(h)}}function cN(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?cN(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function uN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Hi(a.document);c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=Hi(a.document)}return c}function Wg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var TH=Ci&&"documentMode"in document&&11>=document.documentMode,dl=null,Kg=null,Wc=null,Yg=!1;function dN(a,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Yg||dl==null||dl!==Hi(y)||(y=dl,"selectionStart"in y&&Wg(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Wc&&Gc(Wc,y)||(Wc=y,y=mh(Kg,"onSelect"),0<y.length&&(c=new re("onSelect","select",null,c,h),a.push({event:c,listeners:y}),c.target=dl)))}function Jo(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var fl={animationend:Jo("Animation","AnimationEnd"),animationiteration:Jo("Animation","AnimationIteration"),animationstart:Jo("Animation","AnimationStart"),transitionrun:Jo("Transition","TransitionRun"),transitionstart:Jo("Transition","TransitionStart"),transitioncancel:Jo("Transition","TransitionCancel"),transitionend:Jo("Transition","TransitionEnd")},Xg={},fN={};Ci&&(fN=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function ea(a){if(Xg[a])return Xg[a];if(!fl[a])return a;var c=fl[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in fN)return Xg[a]=c[h];return a}var hN=ea("animationend"),pN=ea("animationiteration"),mN=ea("animationstart"),AH=ea("transitionrun"),MH=ea("transitionstart"),_H=ea("transitioncancel"),gN=ea("transitionend"),yN=new Map,Zg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zg.push("scrollEnd");function ki(a,c){yN.set(a,c),Z(c,[a])}var bN=new WeakMap;function ei(a,c){if(typeof a=="object"&&a!==null){var h=bN.get(a);return h!==void 0?h:(c={value:a,source:c,stack:il(c)},bN.set(a,c),c)}return{value:a,source:c,stack:il(c)}}var ti=[],hl=0,Qg=0;function Df(){for(var a=hl,c=Qg=hl=0;c<a;){var h=ti[c];ti[c++]=null;var y=ti[c];ti[c++]=null;var x=ti[c];ti[c++]=null;var C=ti[c];if(ti[c++]=null,y!==null&&x!==null){var D=y.pending;D===null?x.next=x:(x.next=D.next,D.next=x),y.pending=x}C!==0&&xN(h,x,C)}}function Rf(a,c,h,y){ti[hl++]=a,ti[hl++]=c,ti[hl++]=h,ti[hl++]=y,Qg|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function Jg(a,c,h,y){return Rf(a,c,h,y),jf(a)}function pl(a,c){return Rf(a,null,null,c),jf(a)}function xN(a,c,h){a.lanes|=h;var y=a.alternate;y!==null&&(y.lanes|=h);for(var x=!1,C=a.return;C!==null;)C.childLanes|=h,y=C.alternate,y!==null&&(y.childLanes|=h),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(x=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,x&&c!==null&&(x=31-At(h),a=C.hiddenUpdates,y=a[x],y===null?a[x]=[c]:y.push(c),c.lane=h|536870912),C):null}function jf(a){if(50<bu)throw bu=0,s0=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var ml={};function DH(a,c,h,y){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(a,c,h,y){return new DH(a,c,h,y)}function ey(a){return a=a.prototype,!(!a||!a.isReactComponent)}function hs(a,c){var h=a.alternate;return h===null?(h=Pr(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function vN(a,c){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,c=h.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Of(a,c,h,y,x,C){var D=0;if(y=a,typeof a=="function")ey(a)&&(D=1);else if(typeof a=="string")D=jF(a,h,$.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case I:return a=Pr(31,h,c,x),a.elementType=I,a.lanes=C,a;case v:return ta(h.children,x,C,c);case S:D=8,x|=24;break;case w:return a=Pr(12,h,c,x|2),a.elementType=w,a.lanes=C,a;case A:return a=Pr(13,h,c,x),a.elementType=A,a.lanes=C,a;case _:return a=Pr(19,h,c,x),a.elementType=_,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:case E:D=10;break e;case T:D=9;break e;case N:D=11;break e;case j:D=14;break e;case R:D=16,y=null;break e}D=29,h=Error(r(130,a===null?"null":typeof a,"")),y=null}return c=Pr(D,h,c,x),c.elementType=a,c.type=y,c.lanes=C,c}function ta(a,c,h,y){return a=Pr(7,a,y,c),a.lanes=h,a}function ty(a,c,h){return a=Pr(6,a,null,c),a.lanes=h,a}function ny(a,c,h){return c=Pr(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var gl=[],yl=0,Lf=null,Pf=0,ni=[],ri=0,na=null,ps=1,ms="";function ra(a,c){gl[yl++]=Pf,gl[yl++]=Lf,Lf=a,Pf=c}function wN(a,c,h){ni[ri++]=ps,ni[ri++]=ms,ni[ri++]=na,na=a;var y=ps;a=ms;var x=32-At(y)-1;y&=~(1<<x),h+=1;var C=32-At(c)+x;if(30<C){var D=x-x%5;C=(y&(1<<D)-1).toString(32),y>>=D,x-=D,ps=1<<32-At(c)+x|h<<x|y,ms=C+a}else ps=1<<C|h<<x|y,ms=a}function ry(a){a.return!==null&&(ra(a,1),wN(a,1,0))}function iy(a){for(;a===Lf;)Lf=gl[--yl],gl[yl]=null,Pf=gl[--yl],gl[yl]=null;for(;a===na;)na=ni[--ri],ni[ri]=null,ms=ni[--ri],ni[ri]=null,ps=ni[--ri],ni[ri]=null}var lr=null,Jt=null,yt=!1,ia=null,$i=!1,sy=Error(r(519));function sa(a){var c=Error(r(418,""));throw Xc(ei(c,a)),sy}function SN(a){var c=a.stateNode,h=a.type,y=a.memoizedProps;switch(c[Gt]=a,c[Lt]=y,h){case"dialog":it("cancel",c),it("close",c);break;case"iframe":case"object":case"embed":it("load",c);break;case"video":case"audio":for(h=0;h<vu.length;h++)it(vu[h],c);break;case"source":it("error",c);break;case"img":case"image":case"link":it("error",c),it("load",c);break;case"details":it("toggle",c);break;case"input":it("invalid",c),Xo(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Ws(c);break;case"select":it("invalid",c);break;case"textarea":it("invalid",c),wf(c,y.value,y.defaultValue,y.children),Ws(c)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||y.suppressHydrationWarning===!0||zA(c.textContent,h)?(y.popover!=null&&(it("beforetoggle",c),it("toggle",c)),y.onScroll!=null&&it("scroll",c),y.onScrollEnd!=null&&it("scrollend",c),y.onClick!=null&&(c.onclick=gh),c=!0):c=!1,c||sa(a)}function CN(a){for(lr=a.return;lr;)switch(lr.tag){case 5:case 13:$i=!1;return;case 27:case 3:$i=!0;return;default:lr=lr.return}}function Kc(a){if(a!==lr)return!1;if(!yt)return CN(a),yt=!0,!1;var c=a.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||w0(a.type,a.memoizedProps)),h=!h),h&&Jt&&sa(a),CN(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(h=a.data,h==="/$"){if(c===0){Jt=Ni(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;a=a.nextSibling}Jt=null}}else c===27?(c=Jt,ho(a.type)?(a=E0,E0=null,Jt=a):Jt=c):Jt=lr?Ni(a.stateNode.nextSibling):null;return!0}function Yc(){Jt=lr=null,yt=!1}function kN(){var a=ia;return a!==null&&(wr===null?wr=a:wr.push.apply(wr,a),ia=null),a}function Xc(a){ia===null?ia=[a]:ia.push(a)}var oy=W(null),oa=null,gs=null;function Zs(a,c,h){ae(oy,c._currentValue),c._currentValue=h}function ys(a){a._currentValue=oy.current,oe(oy)}function ay(a,c,h){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===h)break;a=a.return}}function ly(a,c,h,y){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var C=x.dependencies;if(C!==null){var D=x.child;C=C.firstContext;e:for(;C!==null;){var P=C;C=x;for(var K=0;K<c.length;K++)if(P.context===c[K]){C.lanes|=h,P=C.alternate,P!==null&&(P.lanes|=h),ay(C.return,h,a),y||(D=null);break e}C=P.next}}else if(x.tag===18){if(D=x.return,D===null)throw Error(r(341));D.lanes|=h,C=D.alternate,C!==null&&(C.lanes|=h),ay(D,h,a),D=null}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===a){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}}function Zc(a,c,h,y){a=null;for(var x=c,C=!1;x!==null;){if(!C){if((x.flags&524288)!==0)C=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var D=x.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var P=x.type;Lr(x.pendingProps.value,D.value)||(a!==null?a.push(P):a=[P])}}else if(x===de.current){if(D=x.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(Nu):a=[Nu])}x=x.return}a!==null&&ly(c,a,h,y),c.flags|=262144}function If(a){for(a=a.firstContext;a!==null;){if(!Lr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function aa(a){oa=a,gs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Jn(a){return EN(oa,a)}function Bf(a,c){return oa===null&&aa(a),EN(a,c)}function EN(a,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},gs===null){if(a===null)throw Error(r(308));gs=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else gs=gs.next=c;return h}var RH=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(h,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(h){return h()})}},jH=e.unstable_scheduleCallback,OH=e.unstable_NormalPriority,Tn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cy(){return{controller:new RH,data:new Map,refCount:0}}function Qc(a){a.refCount--,a.refCount===0&&jH(OH,function(){a.controller.abort()})}var Jc=null,uy=0,bl=0,xl=null;function LH(a,c){if(Jc===null){var h=Jc=[];uy=0,bl=f0(),xl={status:"pending",value:void 0,then:function(y){h.push(y)}}}return uy++,c.then(NN,NN),c}function NN(){if(--uy===0&&Jc!==null){xl!==null&&(xl.status="fulfilled");var a=Jc;Jc=null,bl=0,xl=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function PH(a,c){var h=[],y={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return a.then(function(){y.status="fulfilled",y.value=c;for(var x=0;x<h.length;x++)(0,h[x])(c)},function(x){for(y.status="rejected",y.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),y}var TN=O.S;O.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&LH(a,c),TN!==null&&TN(a,c)};var la=W(null);function dy(){var a=la.current;return a!==null?a:jt.pooledCache}function zf(a,c){c===null?ae(la,la.current):ae(la,c.pool)}function AN(){var a=dy();return a===null?null:{parent:Tn._currentValue,pool:a}}var eu=Error(r(460)),MN=Error(r(474)),qf=Error(r(542)),fy={then:function(){}};function _N(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vf(){}function DN(a,c,h){switch(h=a[h],h===void 0?a.push(c):h!==c&&(c.then(Vf,Vf),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,jN(a),a;default:if(typeof c.status=="string")c.then(Vf,Vf);else{if(a=jt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(y){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=y}},function(y){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,jN(a),a}throw tu=c,eu}}var tu=null;function RN(){if(tu===null)throw Error(r(459));var a=tu;return tu=null,a}function jN(a){if(a===eu||a===qf)throw Error(r(483))}var Qs=!1;function hy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function py(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Js(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function eo(a,c,h){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(vt&2)!==0){var x=y.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),y.pending=c,c=jf(a),xN(a,null,h),c}return Rf(a,y,c,h),jf(a)}function nu(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Dr(a,h)}}function my(a,c){var h=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var x=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};C===null?x=C=D:C=C.next=D,h=h.next}while(h!==null);C===null?x=C=c:C=C.next=c}else x=C=c;h={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}var gy=!1;function ru(){if(gy){var a=xl;if(a!==null)throw a}}function iu(a,c,h,y){gy=!1;var x=a.updateQueue;Qs=!1;var C=x.firstBaseUpdate,D=x.lastBaseUpdate,P=x.shared.pending;if(P!==null){x.shared.pending=null;var K=P,se=K.next;K.next=null,D===null?C=se:D.next=se,D=K;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,P=fe.lastBaseUpdate,P!==D&&(P===null?fe.firstBaseUpdate=se:P.next=se,fe.lastBaseUpdate=K))}if(C!==null){var me=x.baseState;D=0,fe=se=K=null,P=C;do{var ce=P.lane&-536870913,ue=ce!==P.lane;if(ue?(ut&ce)===ce:(y&ce)===ce){ce!==0&&ce===bl&&(gy=!0),fe!==null&&(fe=fe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Ge=a,Fe=P;ce=c;var Et=h;switch(Fe.tag){case 1:if(Ge=Fe.payload,typeof Ge=="function"){me=Ge.call(Et,me,ce);break e}me=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Fe.payload,ce=typeof Ge=="function"?Ge.call(Et,me,ce):Ge,ce==null)break e;me=f({},me,ce);break e;case 2:Qs=!0}}ce=P.callback,ce!==null&&(a.flags|=64,ue&&(a.flags|=8192),ue=x.callbacks,ue===null?x.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:P.tag,payload:P.payload,callback:P.callback,next:null},fe===null?(se=fe=ue,K=me):fe=fe.next=ue,D|=ce;if(P=P.next,P===null){if(P=x.shared.pending,P===null)break;ue=P,P=ue.next,ue.next=null,x.lastBaseUpdate=ue,x.shared.pending=null}}while(!0);fe===null&&(K=me),x.baseState=K,x.firstBaseUpdate=se,x.lastBaseUpdate=fe,C===null&&(x.shared.lanes=0),lo|=D,a.lanes=D,a.memoizedState=me}}function ON(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function LN(a,c){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)ON(h[a],c)}var vl=W(null),Hf=W(0);function PN(a,c){a=ks,ae(Hf,a),ae(vl,c),ks=a|c.baseLanes}function yy(){ae(Hf,ks),ae(vl,vl.current)}function by(){ks=Hf.current,oe(vl),oe(Hf)}var to=0,tt=null,Ct=null,mn=null,Ff=!1,wl=!1,ca=!1,Uf=0,su=0,Sl=null,IH=0;function on(){throw Error(r(321))}function xy(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Lr(a[h],c[h]))return!1;return!0}function vy(a,c,h,y,x,C){return to=C,tt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,O.H=a===null||a.memoizedState===null?xT:vT,ca=!1,C=h(y,x),ca=!1,wl&&(C=BN(c,h,y,x)),IN(a),C}function IN(a){O.H=Xf;var c=Ct!==null&&Ct.next!==null;if(to=0,mn=Ct=tt=null,Ff=!1,su=0,Sl=null,c)throw Error(r(300));a===null||Dn||(a=a.dependencies,a!==null&&If(a)&&(Dn=!0))}function BN(a,c,h,y){tt=a;var x=0;do{if(wl&&(Sl=null),su=0,wl=!1,25<=x)throw Error(r(301));if(x+=1,mn=Ct=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}O.H=UH,C=c(h,y)}while(wl);return C}function BH(){var a=O.H,c=a.useState()[0];return c=typeof c.then=="function"?ou(c):c,a=a.useState()[0],(Ct!==null?Ct.memoizedState:null)!==a&&(tt.flags|=1024),c}function wy(){var a=Uf!==0;return Uf=0,a}function Sy(a,c,h){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~h}function Cy(a){if(Ff){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Ff=!1}to=0,mn=Ct=tt=null,wl=!1,su=Uf=0,Sl=null}function xr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?tt.memoizedState=mn=a:mn=mn.next=a,mn}function gn(){if(Ct===null){var a=tt.alternate;a=a!==null?a.memoizedState:null}else a=Ct.next;var c=mn===null?tt.memoizedState:mn.next;if(c!==null)mn=c,Ct=a;else{if(a===null)throw tt.alternate===null?Error(r(467)):Error(r(310));Ct=a,a={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},mn===null?tt.memoizedState=mn=a:mn=mn.next=a}return mn}function ky(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ou(a){var c=su;return su+=1,Sl===null&&(Sl=[]),a=DN(Sl,a,c),c=tt,(mn===null?c.memoizedState:mn.next)===null&&(c=c.alternate,O.H=c===null||c.memoizedState===null?xT:vT),a}function $f(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return ou(a);if(a.$$typeof===E)return Jn(a)}throw Error(r(438,String(a)))}function Ey(a){var c=null,h=tt.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=tt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=ky(),tt.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(a),y=0;y<a;y++)h[y]=B;return c.index++,h}function bs(a,c){return typeof c=="function"?c(a):c}function Gf(a){var c=gn();return Ny(c,Ct,a)}function Ny(a,c,h){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var x=a.baseQueue,C=y.pending;if(C!==null){if(x!==null){var D=x.next;x.next=C.next,C.next=D}c.baseQueue=x=C,y.pending=null}if(C=a.baseState,x===null)a.memoizedState=C;else{c=x.next;var P=D=null,K=null,se=c,fe=!1;do{var me=se.lane&-536870913;if(me!==se.lane?(ut&me)===me:(to&me)===me){var ce=se.revertLane;if(ce===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),me===bl&&(fe=!0);else if((to&ce)===ce){se=se.next,ce===bl&&(fe=!0);continue}else me={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},K===null?(P=K=me,D=C):K=K.next=me,tt.lanes|=ce,lo|=ce;me=se.action,ca&&h(C,me),C=se.hasEagerState?se.eagerState:h(C,me)}else ce={lane:me,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},K===null?(P=K=ce,D=C):K=K.next=ce,tt.lanes|=me,lo|=me;se=se.next}while(se!==null&&se!==c);if(K===null?D=C:K.next=P,!Lr(C,a.memoizedState)&&(Dn=!0,fe&&(h=xl,h!==null)))throw h;a.memoizedState=C,a.baseState=D,a.baseQueue=K,y.lastRenderedState=C}return x===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function Ty(a){var c=gn(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var y=h.dispatch,x=h.pending,C=c.memoizedState;if(x!==null){h.pending=null;var D=x=x.next;do C=a(C,D.action),D=D.next;while(D!==x);Lr(C,c.memoizedState)||(Dn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),h.lastRenderedState=C}return[C,y]}function zN(a,c,h){var y=tt,x=gn(),C=yt;if(C){if(h===void 0)throw Error(r(407));h=h()}else h=c();var D=!Lr((Ct||x).memoizedState,h);D&&(x.memoizedState=h,Dn=!0),x=x.queue;var P=HN.bind(null,y,x,a);if(au(2048,8,P,[a]),x.getSnapshot!==c||D||mn!==null&&mn.memoizedState.tag&1){if(y.flags|=2048,Cl(9,Wf(),VN.bind(null,y,x,h,c),null),jt===null)throw Error(r(349));C||(to&124)!==0||qN(y,c,h)}return h}function qN(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=tt.updateQueue,c===null?(c=ky(),tt.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function VN(a,c,h,y){c.value=h,c.getSnapshot=y,FN(c)&&UN(a)}function HN(a,c,h){return h(function(){FN(c)&&UN(a)})}function FN(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Lr(a,h)}catch{return!0}}function UN(a){var c=pl(a,2);c!==null&&Vr(c,a,2)}function Ay(a){var c=xr();if(typeof a=="function"){var h=a;if(a=h(),ca){Tt(!0);try{h()}finally{Tt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:a},c}function $N(a,c,h,y){return a.baseState=h,Ny(a,Ct,typeof y=="function"?y:bs)}function zH(a,c,h,y,x){if(Yf(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){C.listeners.push(D)}};O.T!==null?h(!0):C.isTransition=!1,y(C),h=c.pending,h===null?(C.next=c.pending=C,GN(c,C)):(C.next=h.next,c.pending=h.next=C)}}function GN(a,c){var h=c.action,y=c.payload,x=a.state;if(c.isTransition){var C=O.T,D={};O.T=D;try{var P=h(x,y),K=O.S;K!==null&&K(D,P),WN(a,c,P)}catch(se){My(a,c,se)}finally{O.T=C}}else try{C=h(x,y),WN(a,c,C)}catch(se){My(a,c,se)}}function WN(a,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){KN(a,c,y)},function(y){return My(a,c,y)}):KN(a,c,h)}function KN(a,c,h){c.status="fulfilled",c.value=h,YN(c),a.state=h,c=a.pending,c!==null&&(h=c.next,h===c?a.pending=null:(h=h.next,c.next=h,GN(a,h)))}function My(a,c,h){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,YN(c),c=c.next;while(c!==y)}a.action=null}function YN(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function XN(a,c){return c}function ZN(a,c){if(yt){var h=jt.formState;if(h!==null){e:{var y=tt;if(yt){if(Jt){t:{for(var x=Jt,C=$i;x.nodeType!==8;){if(!C){x=null;break t}if(x=Ni(x.nextSibling),x===null){x=null;break t}}C=x.data,x=C==="F!"||C==="F"?x:null}if(x){Jt=Ni(x.nextSibling),y=x.data==="F!";break e}}sa(y)}y=!1}y&&(c=h[0])}}return h=xr(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:XN,lastRenderedState:c},h.queue=y,h=gT.bind(null,tt,y),y.dispatch=h,y=Ay(!1),C=Oy.bind(null,tt,!1,y.queue),y=xr(),x={state:c,dispatch:null,action:a,pending:null},y.queue=x,h=zH.bind(null,tt,x,C,h),x.dispatch=h,y.memoizedState=a,[c,h,!1]}function QN(a){var c=gn();return JN(c,Ct,a)}function JN(a,c,h){if(c=Ny(a,c,XN)[0],a=Gf(bs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=ou(c)}catch(D){throw D===eu?qf:D}else y=c;c=gn();var x=c.queue,C=x.dispatch;return h!==c.memoizedState&&(tt.flags|=2048,Cl(9,Wf(),qH.bind(null,x,h),null)),[y,C,a]}function qH(a,c){a.action=c}function eT(a){var c=gn(),h=Ct;if(h!==null)return JN(c,h,a);gn(),c=c.memoizedState,h=gn();var y=h.queue.dispatch;return h.memoizedState=a,[c,y,!1]}function Cl(a,c,h,y){return a={tag:a,create:h,deps:y,inst:c,next:null},c=tt.updateQueue,c===null&&(c=ky(),tt.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=a.next=a:(y=h.next,h.next=a,a.next=y,c.lastEffect=a),a}function Wf(){return{destroy:void 0,resource:void 0}}function tT(){return gn().memoizedState}function Kf(a,c,h,y){var x=xr();y=y===void 0?null:y,tt.flags|=a,x.memoizedState=Cl(1|c,Wf(),h,y)}function au(a,c,h,y){var x=gn();y=y===void 0?null:y;var C=x.memoizedState.inst;Ct!==null&&y!==null&&xy(y,Ct.memoizedState.deps)?x.memoizedState=Cl(c,C,h,y):(tt.flags|=a,x.memoizedState=Cl(1|c,C,h,y))}function nT(a,c){Kf(8390656,8,a,c)}function rT(a,c){au(2048,8,a,c)}function iT(a,c){return au(4,2,a,c)}function sT(a,c){return au(4,4,a,c)}function oT(a,c){if(typeof c=="function"){a=a();var h=c(a);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function aT(a,c,h){h=h!=null?h.concat([a]):null,au(4,4,oT.bind(null,c,a),h)}function _y(){}function lT(a,c){var h=gn();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&xy(c,y[1])?y[0]:(h.memoizedState=[a,c],a)}function cT(a,c){var h=gn();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&xy(c,y[1]))return y[0];if(y=a(),ca){Tt(!0);try{a()}finally{Tt(!1)}}return h.memoizedState=[y,c],y}function Dy(a,c,h){return h===void 0||(to&1073741824)!==0?a.memoizedState=c:(a.memoizedState=h,a=fA(),tt.lanes|=a,lo|=a,h)}function uT(a,c,h,y){return Lr(h,c)?h:vl.current!==null?(a=Dy(a,h,y),Lr(a,c)||(Dn=!0),a):(to&42)===0?(Dn=!0,a.memoizedState=h):(a=fA(),tt.lanes|=a,lo|=a,c)}function dT(a,c,h,y,x){var C=V.p;V.p=C!==0&&8>C?C:8;var D=O.T,P={};O.T=P,Oy(a,!1,c,h);try{var K=x(),se=O.S;if(se!==null&&se(P,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=PH(K,y);lu(a,c,fe,qr(a))}else lu(a,c,y,qr(a))}catch(me){lu(a,c,{then:function(){},status:"rejected",reason:me},qr())}finally{V.p=C,O.T=D}}function VH(){}function Ry(a,c,h,y){if(a.tag!==5)throw Error(r(476));var x=fT(a).queue;dT(a,x,c,Y,h===null?VH:function(){return hT(a),h(y)})}function fT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:Y},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:h},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function hT(a){var c=fT(a).next.queue;lu(a,c,{},qr())}function jy(){return Jn(Nu)}function pT(){return gn().memoizedState}function mT(){return gn().memoizedState}function HH(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var h=qr();a=Js(h);var y=eo(c,a,h);y!==null&&(Vr(y,c,h),nu(y,c,h)),c={cache:cy()},a.payload=c;return}c=c.return}}function FH(a,c,h){var y=qr();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Yf(a)?yT(c,h):(h=Jg(a,c,h,y),h!==null&&(Vr(h,a,y),bT(h,c,y)))}function gT(a,c,h){var y=qr();lu(a,c,h,y)}function lu(a,c,h,y){var x={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Yf(a))yT(c,x);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var D=c.lastRenderedState,P=C(D,h);if(x.hasEagerState=!0,x.eagerState=P,Lr(P,D))return Rf(a,c,x,0),jt===null&&Df(),!1}catch{}finally{}if(h=Jg(a,c,x,y),h!==null)return Vr(h,a,y),bT(h,c,y),!0}return!1}function Oy(a,c,h,y){if(y={lane:2,revertLane:f0(),action:y,hasEagerState:!1,eagerState:null,next:null},Yf(a)){if(c)throw Error(r(479))}else c=Jg(a,h,y,2),c!==null&&Vr(c,a,2)}function Yf(a){var c=a.alternate;return a===tt||c!==null&&c===tt}function yT(a,c){wl=Ff=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function bT(a,c,h){if((h&4194048)!==0){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Dr(a,h)}}var Xf={readContext:Jn,use:$f,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on},xT={readContext:Jn,use:$f,useCallback:function(a,c){return xr().memoizedState=[a,c===void 0?null:c],a},useContext:Jn,useEffect:nT,useImperativeHandle:function(a,c,h){h=h!=null?h.concat([a]):null,Kf(4194308,4,oT.bind(null,c,a),h)},useLayoutEffect:function(a,c){return Kf(4194308,4,a,c)},useInsertionEffect:function(a,c){Kf(4,2,a,c)},useMemo:function(a,c){var h=xr();c=c===void 0?null:c;var y=a();if(ca){Tt(!0);try{a()}finally{Tt(!1)}}return h.memoizedState=[y,c],y},useReducer:function(a,c,h){var y=xr();if(h!==void 0){var x=h(c);if(ca){Tt(!0);try{h(c)}finally{Tt(!1)}}}else x=c;return y.memoizedState=y.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},y.queue=a,a=a.dispatch=FH.bind(null,tt,a),[y.memoizedState,a]},useRef:function(a){var c=xr();return a={current:a},c.memoizedState=a},useState:function(a){a=Ay(a);var c=a.queue,h=gT.bind(null,tt,c);return c.dispatch=h,[a.memoizedState,h]},useDebugValue:_y,useDeferredValue:function(a,c){var h=xr();return Dy(h,a,c)},useTransition:function(){var a=Ay(!1);return a=dT.bind(null,tt,a.queue,!0,!1),xr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,h){var y=tt,x=xr();if(yt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),jt===null)throw Error(r(349));(ut&124)!==0||qN(y,c,h)}x.memoizedState=h;var C={value:h,getSnapshot:c};return x.queue=C,nT(HN.bind(null,y,C,a),[a]),y.flags|=2048,Cl(9,Wf(),VN.bind(null,y,C,h,c),null),h},useId:function(){var a=xr(),c=jt.identifierPrefix;if(yt){var h=ms,y=ps;h=(y&~(1<<32-At(y)-1)).toString(32)+h,c=""+c+"R"+h,h=Uf++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=IH++,c=""+c+"r"+h.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:jy,useFormState:ZN,useActionState:ZN,useOptimistic:function(a){var c=xr();c.memoizedState=c.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Oy.bind(null,tt,!0,h),h.dispatch=c,[a,c]},useMemoCache:Ey,useCacheRefresh:function(){return xr().memoizedState=HH.bind(null,tt)}},vT={readContext:Jn,use:$f,useCallback:lT,useContext:Jn,useEffect:rT,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:sT,useMemo:cT,useReducer:Gf,useRef:tT,useState:function(){return Gf(bs)},useDebugValue:_y,useDeferredValue:function(a,c){var h=gn();return uT(h,Ct.memoizedState,a,c)},useTransition:function(){var a=Gf(bs)[0],c=gn().memoizedState;return[typeof a=="boolean"?a:ou(a),c]},useSyncExternalStore:zN,useId:pT,useHostTransitionStatus:jy,useFormState:QN,useActionState:QN,useOptimistic:function(a,c){var h=gn();return $N(h,Ct,a,c)},useMemoCache:Ey,useCacheRefresh:mT},UH={readContext:Jn,use:$f,useCallback:lT,useContext:Jn,useEffect:rT,useImperativeHandle:aT,useInsertionEffect:iT,useLayoutEffect:sT,useMemo:cT,useReducer:Ty,useRef:tT,useState:function(){return Ty(bs)},useDebugValue:_y,useDeferredValue:function(a,c){var h=gn();return Ct===null?Dy(h,a,c):uT(h,Ct.memoizedState,a,c)},useTransition:function(){var a=Ty(bs)[0],c=gn().memoizedState;return[typeof a=="boolean"?a:ou(a),c]},useSyncExternalStore:zN,useId:pT,useHostTransitionStatus:jy,useFormState:eT,useActionState:eT,useOptimistic:function(a,c){var h=gn();return Ct!==null?$N(h,Ct,a,c):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:Ey,useCacheRefresh:mT},kl=null,cu=0;function Zf(a){var c=cu;return cu+=1,kl===null&&(kl=[]),DN(kl,a,c)}function uu(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Qf(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function wT(a){var c=a._init;return c(a._payload)}function ST(a){function c(ne,J){if(a){var ie=ne.deletions;ie===null?(ne.deletions=[J],ne.flags|=16):ie.push(J)}}function h(ne,J){if(!a)return null;for(;J!==null;)c(ne,J),J=J.sibling;return null}function y(ne){for(var J=new Map;ne!==null;)ne.key!==null?J.set(ne.key,ne):J.set(ne.index,ne),ne=ne.sibling;return J}function x(ne,J){return ne=hs(ne,J),ne.index=0,ne.sibling=null,ne}function C(ne,J,ie){return ne.index=ie,a?(ie=ne.alternate,ie!==null?(ie=ie.index,ie<J?(ne.flags|=67108866,J):ie):(ne.flags|=67108866,J)):(ne.flags|=1048576,J)}function D(ne){return a&&ne.alternate===null&&(ne.flags|=67108866),ne}function P(ne,J,ie,he){return J===null||J.tag!==6?(J=ty(ie,ne.mode,he),J.return=ne,J):(J=x(J,ie),J.return=ne,J)}function K(ne,J,ie,he){var je=ie.type;return je===v?fe(ne,J,ie.props.children,he,ie.key):J!==null&&(J.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===R&&wT(je)===J.type)?(J=x(J,ie.props),uu(J,ie),J.return=ne,J):(J=Of(ie.type,ie.key,ie.props,null,ne.mode,he),uu(J,ie),J.return=ne,J)}function se(ne,J,ie,he){return J===null||J.tag!==4||J.stateNode.containerInfo!==ie.containerInfo||J.stateNode.implementation!==ie.implementation?(J=ny(ie,ne.mode,he),J.return=ne,J):(J=x(J,ie.children||[]),J.return=ne,J)}function fe(ne,J,ie,he,je){return J===null||J.tag!==7?(J=ta(ie,ne.mode,he,je),J.return=ne,J):(J=x(J,ie),J.return=ne,J)}function me(ne,J,ie){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=ty(""+J,ne.mode,ie),J.return=ne,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return ie=Of(J.type,J.key,J.props,null,ne.mode,ie),uu(ie,J),ie.return=ne,ie;case b:return J=ny(J,ne.mode,ie),J.return=ne,J;case R:var he=J._init;return J=he(J._payload),me(ne,J,ie)}if(H(J)||q(J))return J=ta(J,ne.mode,ie,null),J.return=ne,J;if(typeof J.then=="function")return me(ne,Zf(J),ie);if(J.$$typeof===E)return me(ne,Bf(ne,J),ie);Qf(ne,J)}return null}function ce(ne,J,ie,he){var je=J!==null?J.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return je!==null?null:P(ne,J,""+ie,he);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:return ie.key===je?K(ne,J,ie,he):null;case b:return ie.key===je?se(ne,J,ie,he):null;case R:return je=ie._init,ie=je(ie._payload),ce(ne,J,ie,he)}if(H(ie)||q(ie))return je!==null?null:fe(ne,J,ie,he,null);if(typeof ie.then=="function")return ce(ne,J,Zf(ie),he);if(ie.$$typeof===E)return ce(ne,J,Bf(ne,ie),he);Qf(ne,ie)}return null}function ue(ne,J,ie,he,je){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ne=ne.get(ie)||null,P(J,ne,""+he,je);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case g:return ne=ne.get(he.key===null?ie:he.key)||null,K(J,ne,he,je);case b:return ne=ne.get(he.key===null?ie:he.key)||null,se(J,ne,he,je);case R:var nt=he._init;return he=nt(he._payload),ue(ne,J,ie,he,je)}if(H(he)||q(he))return ne=ne.get(ie)||null,fe(J,ne,he,je,null);if(typeof he.then=="function")return ue(ne,J,ie,Zf(he),je);if(he.$$typeof===E)return ue(ne,J,ie,Bf(J,he),je);Qf(J,he)}return null}function Ge(ne,J,ie,he){for(var je=null,nt=null,Be=J,$e=J=0,jn=null;Be!==null&&$e<ie.length;$e++){Be.index>$e?(jn=Be,Be=null):jn=Be.sibling;var mt=ce(ne,Be,ie[$e],he);if(mt===null){Be===null&&(Be=jn);break}a&&Be&&mt.alternate===null&&c(ne,Be),J=C(mt,J,$e),nt===null?je=mt:nt.sibling=mt,nt=mt,Be=jn}if($e===ie.length)return h(ne,Be),yt&&ra(ne,$e),je;if(Be===null){for(;$e<ie.length;$e++)Be=me(ne,ie[$e],he),Be!==null&&(J=C(Be,J,$e),nt===null?je=Be:nt.sibling=Be,nt=Be);return yt&&ra(ne,$e),je}for(Be=y(Be);$e<ie.length;$e++)jn=ue(Be,ne,$e,ie[$e],he),jn!==null&&(a&&jn.alternate!==null&&Be.delete(jn.key===null?$e:jn.key),J=C(jn,J,$e),nt===null?je=jn:nt.sibling=jn,nt=jn);return a&&Be.forEach(function(bo){return c(ne,bo)}),yt&&ra(ne,$e),je}function Fe(ne,J,ie,he){if(ie==null)throw Error(r(151));for(var je=null,nt=null,Be=J,$e=J=0,jn=null,mt=ie.next();Be!==null&&!mt.done;$e++,mt=ie.next()){Be.index>$e?(jn=Be,Be=null):jn=Be.sibling;var bo=ce(ne,Be,mt.value,he);if(bo===null){Be===null&&(Be=jn);break}a&&Be&&bo.alternate===null&&c(ne,Be),J=C(bo,J,$e),nt===null?je=bo:nt.sibling=bo,nt=bo,Be=jn}if(mt.done)return h(ne,Be),yt&&ra(ne,$e),je;if(Be===null){for(;!mt.done;$e++,mt=ie.next())mt=me(ne,mt.value,he),mt!==null&&(J=C(mt,J,$e),nt===null?je=mt:nt.sibling=mt,nt=mt);return yt&&ra(ne,$e),je}for(Be=y(Be);!mt.done;$e++,mt=ie.next())mt=ue(Be,ne,$e,mt.value,he),mt!==null&&(a&&mt.alternate!==null&&Be.delete(mt.key===null?$e:mt.key),J=C(mt,J,$e),nt===null?je=mt:nt.sibling=mt,nt=mt);return a&&Be.forEach(function($F){return c(ne,$F)}),yt&&ra(ne,$e),je}function Et(ne,J,ie,he){if(typeof ie=="object"&&ie!==null&&ie.type===v&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case g:e:{for(var je=ie.key;J!==null;){if(J.key===je){if(je=ie.type,je===v){if(J.tag===7){h(ne,J.sibling),he=x(J,ie.props.children),he.return=ne,ne=he;break e}}else if(J.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===R&&wT(je)===J.type){h(ne,J.sibling),he=x(J,ie.props),uu(he,ie),he.return=ne,ne=he;break e}h(ne,J);break}else c(ne,J);J=J.sibling}ie.type===v?(he=ta(ie.props.children,ne.mode,he,ie.key),he.return=ne,ne=he):(he=Of(ie.type,ie.key,ie.props,null,ne.mode,he),uu(he,ie),he.return=ne,ne=he)}return D(ne);case b:e:{for(je=ie.key;J!==null;){if(J.key===je)if(J.tag===4&&J.stateNode.containerInfo===ie.containerInfo&&J.stateNode.implementation===ie.implementation){h(ne,J.sibling),he=x(J,ie.children||[]),he.return=ne,ne=he;break e}else{h(ne,J);break}else c(ne,J);J=J.sibling}he=ny(ie,ne.mode,he),he.return=ne,ne=he}return D(ne);case R:return je=ie._init,ie=je(ie._payload),Et(ne,J,ie,he)}if(H(ie))return Ge(ne,J,ie,he);if(q(ie)){if(je=q(ie),typeof je!="function")throw Error(r(150));return ie=je.call(ie),Fe(ne,J,ie,he)}if(typeof ie.then=="function")return Et(ne,J,Zf(ie),he);if(ie.$$typeof===E)return Et(ne,J,Bf(ne,ie),he);Qf(ne,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,J!==null&&J.tag===6?(h(ne,J.sibling),he=x(J,ie),he.return=ne,ne=he):(h(ne,J),he=ty(ie,ne.mode,he),he.return=ne,ne=he),D(ne)):h(ne,J)}return function(ne,J,ie,he){try{cu=0;var je=Et(ne,J,ie,he);return kl=null,je}catch(Be){if(Be===eu||Be===qf)throw Be;var nt=Pr(29,Be,null,ne.mode);return nt.lanes=he,nt.return=ne,nt}finally{}}}var El=ST(!0),CT=ST(!1),ii=W(null),Gi=null;function no(a){var c=a.alternate;ae(An,An.current&1),ae(ii,a),Gi===null&&(c===null||vl.current!==null||c.memoizedState!==null)&&(Gi=a)}function kT(a){if(a.tag===22){if(ae(An,An.current),ae(ii,a),Gi===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(Gi=a)}}else ro()}function ro(){ae(An,An.current),ae(ii,ii.current)}function xs(a){oe(ii),Gi===a&&(Gi=null),oe(An)}var An=W(0);function Jf(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||k0(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Ly(a,c,h,y){c=a.memoizedState,h=h(y,c),h=h==null?c:f({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Py={enqueueSetState:function(a,c,h){a=a._reactInternals;var y=qr(),x=Js(y);x.payload=c,h!=null&&(x.callback=h),c=eo(a,x,y),c!==null&&(Vr(c,a,y),nu(c,a,y))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var y=qr(),x=Js(y);x.tag=1,x.payload=c,h!=null&&(x.callback=h),c=eo(a,x,y),c!==null&&(Vr(c,a,y),nu(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=qr(),y=Js(h);y.tag=2,c!=null&&(y.callback=c),c=eo(a,y,h),c!==null&&(Vr(c,a,h),nu(c,a,h))}};function ET(a,c,h,y,x,C,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,C,D):c.prototype&&c.prototype.isPureReactComponent?!Gc(h,y)||!Gc(x,C):!0}function NT(a,c,h,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==a&&Py.enqueueReplaceState(c,c.state,null)}function ua(a,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(a=a.defaultProps){h===c&&(h=f({},h));for(var x in a)h[x]===void 0&&(h[x]=a[x])}return h}var eh=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function TT(a){eh(a)}function AT(a){console.error(a)}function MT(a){eh(a)}function th(a,c){try{var h=a.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function _T(a,c,h){try{var y=a.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Iy(a,c,h){return h=Js(h),h.tag=3,h.payload={element:null},h.callback=function(){th(a,c)},h}function DT(a){return a=Js(a),a.tag=3,a}function RT(a,c,h,y){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var C=y.value;a.payload=function(){return x(C)},a.callback=function(){_T(c,h,y)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(a.callback=function(){_T(c,h,y),typeof x!="function"&&(co===null?co=new Set([this]):co.add(this));var P=y.stack;this.componentDidCatch(y.value,{componentStack:P!==null?P:""})})}function $H(a,c,h,y,x){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&Zc(c,h,x,!0),h=ii.current,h!==null){switch(h.tag){case 13:return Gi===null?a0():h.alternate===null&&en===0&&(en=3),h.flags&=-257,h.flags|=65536,h.lanes=x,y===fy?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),c0(a,y,x)),!1;case 22:return h.flags|=65536,y===fy?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),c0(a,y,x)),!1}throw Error(r(435,h.tag))}return c0(a,y,x),a0(),!1}if(yt)return c=ii.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,y!==sy&&(a=Error(r(422),{cause:y}),Xc(ei(a,h)))):(y!==sy&&(c=Error(r(423),{cause:y}),Xc(ei(c,h))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,y=ei(y,h),x=Iy(a.stateNode,y,x),my(a,x),en!==4&&(en=2)),!1;var C=Error(r(520),{cause:y});if(C=ei(C,h),yu===null?yu=[C]:yu.push(C),en!==4&&(en=2),c===null)return!0;y=ei(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,a=x&-x,h.lanes|=a,a=Iy(h.stateNode,y,a),my(h,a),!1;case 1:if(c=h.type,C=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(co===null||!co.has(C))))return h.flags|=65536,x&=-x,h.lanes|=x,x=DT(x),RT(x,a,h,y),my(h,x),!1}h=h.return}while(h!==null);return!1}var jT=Error(r(461)),Dn=!1;function Vn(a,c,h,y){c.child=a===null?CT(c,null,h,y):El(c,a.child,h,y)}function OT(a,c,h,y,x){h=h.render;var C=c.ref;if("ref"in y){var D={};for(var P in y)P!=="ref"&&(D[P]=y[P])}else D=y;return aa(c),y=vy(a,c,h,D,C,x),P=wy(),a!==null&&!Dn?(Sy(a,c,x),vs(a,c,x)):(yt&&P&&ry(c),c.flags|=1,Vn(a,c,y,x),c.child)}function LT(a,c,h,y,x){if(a===null){var C=h.type;return typeof C=="function"&&!ey(C)&&C.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=C,PT(a,c,C,y,x)):(a=Of(h.type,null,y,c,c.mode,x),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!$y(a,x)){var D=C.memoizedProps;if(h=h.compare,h=h!==null?h:Gc,h(D,y)&&a.ref===c.ref)return vs(a,c,x)}return c.flags|=1,a=hs(C,y),a.ref=c.ref,a.return=c,c.child=a}function PT(a,c,h,y,x){if(a!==null){var C=a.memoizedProps;if(Gc(C,y)&&a.ref===c.ref)if(Dn=!1,c.pendingProps=y=C,$y(a,x))(a.flags&131072)!==0&&(Dn=!0);else return c.lanes=a.lanes,vs(a,c,x)}return By(a,c,h,y,x)}function IT(a,c,h){var y=c.pendingProps,x=y.children,C=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=C!==null?C.baseLanes|h:h,a!==null){for(x=c.child=a.child,C=0;x!==null;)C=C|x.lanes|x.childLanes,x=x.sibling;c.childLanes=C&~y}else c.childLanes=0,c.child=null;return BT(a,c,y,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&zf(c,C!==null?C.cachePool:null),C!==null?PN(c,C):yy(),kT(c);else return c.lanes=c.childLanes=536870912,BT(a,c,C!==null?C.baseLanes|h:h,h)}else C!==null?(zf(c,C.cachePool),PN(c,C),ro(),c.memoizedState=null):(a!==null&&zf(c,null),yy(),ro());return Vn(a,c,x,h),c.child}function BT(a,c,h,y){var x=dy();return x=x===null?null:{parent:Tn._currentValue,pool:x},c.memoizedState={baseLanes:h,cachePool:x},a!==null&&zf(c,null),yy(),kT(c),a!==null&&Zc(a,c,y,!0),null}function nh(a,c){var h=c.ref;if(h===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(a===null||a.ref!==h)&&(c.flags|=4194816)}}function By(a,c,h,y,x){return aa(c),h=vy(a,c,h,y,void 0,x),y=wy(),a!==null&&!Dn?(Sy(a,c,x),vs(a,c,x)):(yt&&y&&ry(c),c.flags|=1,Vn(a,c,h,x),c.child)}function zT(a,c,h,y,x,C){return aa(c),c.updateQueue=null,h=BN(c,y,h,x),IN(a),y=wy(),a!==null&&!Dn?(Sy(a,c,C),vs(a,c,C)):(yt&&y&&ry(c),c.flags|=1,Vn(a,c,h,C),c.child)}function qT(a,c,h,y,x){if(aa(c),c.stateNode===null){var C=ml,D=h.contextType;typeof D=="object"&&D!==null&&(C=Jn(D)),C=new h(y,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Py,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=y,C.state=c.memoizedState,C.refs={},hy(c),D=h.contextType,C.context=typeof D=="object"&&D!==null?Jn(D):ml,C.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Ly(c,h,D,y),C.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(D=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),D!==C.state&&Py.enqueueReplaceState(C,C.state,null),iu(c,y,C,x),ru(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(a===null){C=c.stateNode;var P=c.memoizedProps,K=ua(h,P);C.props=K;var se=C.context,fe=h.contextType;D=ml,typeof fe=="object"&&fe!==null&&(D=Jn(fe));var me=h.getDerivedStateFromProps;fe=typeof me=="function"||typeof C.getSnapshotBeforeUpdate=="function",P=c.pendingProps!==P,fe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(P||se!==D)&&NT(c,C,y,D),Qs=!1;var ce=c.memoizedState;C.state=ce,iu(c,y,C,x),ru(),se=c.memoizedState,P||ce!==se||Qs?(typeof me=="function"&&(Ly(c,h,me,y),se=c.memoizedState),(K=Qs||ET(c,h,K,y,ce,se,D))?(fe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=se),C.props=y,C.state=se,C.context=D,y=K):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{C=c.stateNode,py(a,c),D=c.memoizedProps,fe=ua(h,D),C.props=fe,me=c.pendingProps,ce=C.context,se=h.contextType,K=ml,typeof se=="object"&&se!==null&&(K=Jn(se)),P=h.getDerivedStateFromProps,(se=typeof P=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==me||ce!==K)&&NT(c,C,y,K),Qs=!1,ce=c.memoizedState,C.state=ce,iu(c,y,C,x),ru();var ue=c.memoizedState;D!==me||ce!==ue||Qs||a!==null&&a.dependencies!==null&&If(a.dependencies)?(typeof P=="function"&&(Ly(c,h,P,y),ue=c.memoizedState),(fe=Qs||ET(c,h,fe,y,ce,ue,K)||a!==null&&a.dependencies!==null&&If(a.dependencies))?(se||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,ue,K),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,ue,K)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=ue),C.props=y,C.state=ue,C.context=K,y=fe):(typeof C.componentDidUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=1024),y=!1)}return C=y,nh(a,c),y=(c.flags&128)!==0,C||y?(C=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&y?(c.child=El(c,a.child,null,x),c.child=El(c,null,h,x)):Vn(a,c,h,x),c.memoizedState=C.state,a=c.child):a=vs(a,c,x),a}function VT(a,c,h,y){return Yc(),c.flags|=256,Vn(a,c,h,y),c.child}var zy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qy(a){return{baseLanes:a,cachePool:AN()}}function Vy(a,c,h){return a=a!==null?a.childLanes&~h:0,c&&(a|=si),a}function HT(a,c,h){var y=c.pendingProps,x=!1,C=(c.flags&128)!==0,D;if((D=C)||(D=a!==null&&a.memoizedState===null?!1:(An.current&2)!==0),D&&(x=!0,c.flags&=-129),D=(c.flags&32)!==0,c.flags&=-33,a===null){if(yt){if(x?no(c):ro(),yt){var P=Jt,K;if(K=P){e:{for(K=P,P=$i;K.nodeType!==8;){if(!P){P=null;break e}if(K=Ni(K.nextSibling),K===null){P=null;break e}}P=K}P!==null?(c.memoizedState={dehydrated:P,treeContext:na!==null?{id:ps,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},K=Pr(18,null,null,0),K.stateNode=P,K.return=c,c.child=K,lr=c,Jt=null,K=!0):K=!1}K||sa(c)}if(P=c.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return k0(P)?c.lanes=32:c.lanes=536870912,null;xs(c)}return P=y.children,y=y.fallback,x?(ro(),x=c.mode,P=rh({mode:"hidden",children:P},x),y=ta(y,x,h,null),P.return=c,y.return=c,P.sibling=y,c.child=P,x=c.child,x.memoizedState=qy(h),x.childLanes=Vy(a,D,h),c.memoizedState=zy,y):(no(c),Hy(c,P))}if(K=a.memoizedState,K!==null&&(P=K.dehydrated,P!==null)){if(C)c.flags&256?(no(c),c.flags&=-257,c=Fy(a,c,h)):c.memoizedState!==null?(ro(),c.child=a.child,c.flags|=128,c=null):(ro(),x=y.fallback,P=c.mode,y=rh({mode:"visible",children:y.children},P),x=ta(x,P,h,null),x.flags|=2,y.return=c,x.return=c,y.sibling=x,c.child=y,El(c,a.child,null,h),y=c.child,y.memoizedState=qy(h),y.childLanes=Vy(a,D,h),c.memoizedState=zy,c=x);else if(no(c),k0(P)){if(D=P.nextSibling&&P.nextSibling.dataset,D)var se=D.dgst;D=se,y=Error(r(419)),y.stack="",y.digest=D,Xc({value:y,source:null,stack:null}),c=Fy(a,c,h)}else if(Dn||Zc(a,c,h,!1),D=(h&a.childLanes)!==0,Dn||D){if(D=jt,D!==null&&(y=h&-h,y=(y&42)!==0?1:xt(y),y=(y&(D.suspendedLanes|h))!==0?0:y,y!==0&&y!==K.retryLane))throw K.retryLane=y,pl(a,y),Vr(D,a,y),jT;P.data==="$?"||a0(),c=Fy(a,c,h)}else P.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=K.treeContext,Jt=Ni(P.nextSibling),lr=c,yt=!0,ia=null,$i=!1,a!==null&&(ni[ri++]=ps,ni[ri++]=ms,ni[ri++]=na,ps=a.id,ms=a.overflow,na=c),c=Hy(c,y.children),c.flags|=4096);return c}return x?(ro(),x=y.fallback,P=c.mode,K=a.child,se=K.sibling,y=hs(K,{mode:"hidden",children:y.children}),y.subtreeFlags=K.subtreeFlags&65011712,se!==null?x=hs(se,x):(x=ta(x,P,h,null),x.flags|=2),x.return=c,y.return=c,y.sibling=x,c.child=y,y=x,x=c.child,P=a.child.memoizedState,P===null?P=qy(h):(K=P.cachePool,K!==null?(se=Tn._currentValue,K=K.parent!==se?{parent:se,pool:se}:K):K=AN(),P={baseLanes:P.baseLanes|h,cachePool:K}),x.memoizedState=P,x.childLanes=Vy(a,D,h),c.memoizedState=zy,y):(no(c),h=a.child,a=h.sibling,h=hs(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,a!==null&&(D=c.deletions,D===null?(c.deletions=[a],c.flags|=16):D.push(a)),c.child=h,c.memoizedState=null,h)}function Hy(a,c){return c=rh({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function rh(a,c){return a=Pr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Fy(a,c,h){return El(c,a.child,null,h),a=Hy(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function FT(a,c,h){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),ay(a.return,c,h)}function Uy(a,c,h,y,x){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:x}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=h,C.tailMode=x)}function UT(a,c,h){var y=c.pendingProps,x=y.revealOrder,C=y.tail;if(Vn(a,c,y.children,h),y=An.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&FT(a,h,c);else if(a.tag===19)FT(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(ae(An,y),x){case"forwards":for(h=c.child,x=null;h!==null;)a=h.alternate,a!==null&&Jf(a)===null&&(x=h),h=h.sibling;h=x,h===null?(x=c.child,c.child=null):(x=h.sibling,h.sibling=null),Uy(c,!1,x,h,C);break;case"backwards":for(h=null,x=c.child,c.child=null;x!==null;){if(a=x.alternate,a!==null&&Jf(a)===null){c.child=x;break}a=x.sibling,x.sibling=h,h=x,x=a}Uy(c,!0,h,null,C);break;case"together":Uy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function vs(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),lo|=c.lanes,(h&c.childLanes)===0)if(a!==null){if(Zc(a,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=hs(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=hs(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function $y(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&If(a)))}function GH(a,c,h){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),Zs(c,Tn,a.memoizedState.cache),Yc();break;case 27:case 5:_e(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:Zs(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(no(c),c.flags|=128,null):(h&c.child.childLanes)!==0?HT(a,c,h):(no(c),a=vs(a,c,h),a!==null?a.sibling:null);no(c);break;case 19:var x=(a.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(Zc(a,c,h,!1),y=(h&c.childLanes)!==0),x){if(y)return UT(a,c,h);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ae(An,An.current),y)break;return null;case 22:case 23:return c.lanes=0,IT(a,c,h);case 24:Zs(c,Tn,a.memoizedState.cache)}return vs(a,c,h)}function $T(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps)Dn=!0;else{if(!$y(a,h)&&(c.flags&128)===0)return Dn=!1,GH(a,c,h);Dn=(a.flags&131072)!==0}else Dn=!1,yt&&(c.flags&1048576)!==0&&wN(c,Pf,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,x=y._init;if(y=x(y._payload),c.type=y,typeof y=="function")ey(y)?(a=ua(y,a),c.tag=1,c=qT(null,c,y,a,h)):(c.tag=0,c=By(null,c,y,a,h));else{if(y!=null){if(x=y.$$typeof,x===N){c.tag=11,c=OT(null,c,y,a,h);break e}else if(x===j){c.tag=14,c=LT(null,c,y,a,h);break e}}throw c=L(y)||y,Error(r(306,c,""))}}return c;case 0:return By(a,c,c.type,c.pendingProps,h);case 1:return y=c.type,x=ua(y,c.pendingProps),qT(a,c,y,x,h);case 3:e:{if(le(c,c.stateNode.containerInfo),a===null)throw Error(r(387));y=c.pendingProps;var C=c.memoizedState;x=C.element,py(a,c),iu(c,y,null,h);var D=c.memoizedState;if(y=D.cache,Zs(c,Tn,y),y!==C.cache&&ly(c,[Tn],h,!0),ru(),y=D.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:D.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=VT(a,c,y,h);break e}else if(y!==x){x=ei(Error(r(424)),c),Xc(x),c=VT(a,c,y,h);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Jt=Ni(a.firstChild),lr=c,yt=!0,ia=null,$i=!0,h=CT(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(Yc(),y===x){c=vs(a,c,h);break e}Vn(a,c,y,h)}c=c.child}return c;case 26:return nh(a,c),a===null?(h=YA(c.type,null,c.pendingProps,null))?c.memoizedState=h:yt||(h=c.type,a=c.pendingProps,y=yh(ee.current).createElement(h),y[Gt]=c,y[Lt]=a,Fn(y,h,a),Rt(y),c.stateNode=y):c.memoizedState=YA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return _e(c),a===null&&yt&&(y=c.stateNode=GA(c.type,c.pendingProps,ee.current),lr=c,$i=!0,x=Jt,ho(c.type)?(E0=x,Jt=Ni(y.firstChild)):Jt=x),Vn(a,c,c.pendingProps.children,h),nh(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&yt&&((x=y=Jt)&&(y=vF(y,c.type,c.pendingProps,$i),y!==null?(c.stateNode=y,lr=c,Jt=Ni(y.firstChild),$i=!1,x=!0):x=!1),x||sa(c)),_e(c),x=c.type,C=c.pendingProps,D=a!==null?a.memoizedProps:null,y=C.children,w0(x,C)?y=null:D!==null&&w0(x,D)&&(c.flags|=32),c.memoizedState!==null&&(x=vy(a,c,BH,null,null,h),Nu._currentValue=x),nh(a,c),Vn(a,c,y,h),c.child;case 6:return a===null&&yt&&((a=h=Jt)&&(h=wF(h,c.pendingProps,$i),h!==null?(c.stateNode=h,lr=c,Jt=null,a=!0):a=!1),a||sa(c)),null;case 13:return HT(a,c,h);case 4:return le(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=El(c,null,y,h):Vn(a,c,y,h),c.child;case 11:return OT(a,c,c.type,c.pendingProps,h);case 7:return Vn(a,c,c.pendingProps,h),c.child;case 8:return Vn(a,c,c.pendingProps.children,h),c.child;case 12:return Vn(a,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,Zs(c,c.type,y.value),Vn(a,c,y.children,h),c.child;case 9:return x=c.type._context,y=c.pendingProps.children,aa(c),x=Jn(x),y=y(x),c.flags|=1,Vn(a,c,y,h),c.child;case 14:return LT(a,c,c.type,c.pendingProps,h);case 15:return PT(a,c,c.type,c.pendingProps,h);case 19:return UT(a,c,h);case 31:return y=c.pendingProps,h=c.mode,y={mode:y.mode,children:y.children},a===null?(h=rh(y,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=hs(a.child,y),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return IT(a,c,h);case 24:return aa(c),y=Jn(Tn),a===null?(x=dy(),x===null&&(x=jt,C=cy(),x.pooledCache=C,C.refCount++,C!==null&&(x.pooledCacheLanes|=h),x=C),c.memoizedState={parent:y,cache:x},hy(c),Zs(c,Tn,x)):((a.lanes&h)!==0&&(py(a,c),iu(c,null,null,h),ru()),x=a.memoizedState,C=c.memoizedState,x.parent!==y?(x={parent:y,cache:y},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),Zs(c,Tn,y)):(y=C.cache,Zs(c,Tn,y),y!==x.cache&&ly(c,[Tn],h,!0))),Vn(a,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ws(a){a.flags|=4}function GT(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!eM(c)){if(c=ii.current,c!==null&&((ut&4194048)===ut?Gi!==null:(ut&62914560)!==ut&&(ut&536870912)===0||c!==Gi))throw tu=fy,MN;a.flags|=8192}}function ih(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?wi():536870912,a.lanes|=c,Ml|=c)}function du(a,c){if(!yt)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Wt(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,y=0;if(c)for(var x=a.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags&65011712,y|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=y,a.childLanes=h,c}function WH(a,c,h){var y=c.pendingProps;switch(iy(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(c),null;case 1:return Wt(c),null;case 3:return h=c.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),ys(Tn),xe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(Kc(c)?ws(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,kN())),Wt(c),null;case 26:return h=c.memoizedState,a===null?(ws(c),h!==null?(Wt(c),GT(c,h)):(Wt(c),c.flags&=-16777217)):h?h!==a.memoizedState?(ws(c),Wt(c),GT(c,h)):(Wt(c),c.flags&=-16777217):(a.memoizedProps!==y&&ws(c),Wt(c),c.flags&=-16777217),null;case 27:ze(c),h=ee.current;var x=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==y&&ws(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Wt(c),null}a=$.current,Kc(c)?SN(c):(a=GA(x,y,h),c.stateNode=a,ws(c))}return Wt(c),null;case 5:if(ze(c),h=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&ws(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Wt(c),null}if(a=$.current,Kc(c))SN(c);else{switch(x=yh(ee.current),a){case 1:a=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:a=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":a=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":a=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":a=x.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?x.createElement("select",{is:y.is}):x.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?x.createElement(h,{is:y.is}):x.createElement(h)}}a[Gt]=c,a[Lt]=y;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=a;e:switch(Fn(a,h,y),h){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ws(c)}}return Wt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==y&&ws(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(a=ee.current,Kc(c)){if(a=c.stateNode,h=c.memoizedProps,y=null,x=lr,x!==null)switch(x.tag){case 27:case 5:y=x.memoizedProps}a[Gt]=c,a=!!(a.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||zA(a.nodeValue,h)),a||sa(c)}else a=yh(a).createTextNode(y),a[Gt]=c,c.stateNode=a}return Wt(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=Kc(c),y!==null&&y.dehydrated!==null){if(a===null){if(!x)throw Error(r(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Gt]=c}else Yc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Wt(c),x=!1}else x=kN(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(xs(c),c):(xs(c),null)}if(xs(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=y!==null,a=a!==null&&a.memoizedState!==null,h){y=c.child,x=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(x=y.alternate.memoizedState.cachePool.pool);var C=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==x&&(y.flags|=2048)}return h!==a&&h&&(c.child.flags|=8192),ih(c,c.updateQueue),Wt(c),null;case 4:return xe(),a===null&&g0(c.stateNode.containerInfo),Wt(c),null;case 10:return ys(c.type),Wt(c),null;case 19:if(oe(An),x=c.memoizedState,x===null)return Wt(c),null;if(y=(c.flags&128)!==0,C=x.rendering,C===null)if(y)du(x,!1);else{if(en!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=Jf(a),C!==null){for(c.flags|=128,du(x,!1),a=C.updateQueue,c.updateQueue=a,ih(c,a),c.subtreeFlags=0,a=h,h=c.child;h!==null;)vN(h,a),h=h.sibling;return ae(An,An.current&1|2),c.child}a=a.sibling}x.tail!==null&&Le()>ah&&(c.flags|=128,y=!0,du(x,!1),c.lanes=4194304)}else{if(!y)if(a=Jf(C),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,ih(c,a),du(x,!0),x.tail===null&&x.tailMode==="hidden"&&!C.alternate&&!yt)return Wt(c),null}else 2*Le()-x.renderingStartTime>ah&&h!==536870912&&(c.flags|=128,y=!0,du(x,!1),c.lanes=4194304);x.isBackwards?(C.sibling=c.child,c.child=C):(a=x.last,a!==null?a.sibling=C:c.child=C,x.last=C)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Le(),c.sibling=null,a=An.current,ae(An,y?a&1|2:a&1),c):(Wt(c),null);case 22:case 23:return xs(c),by(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(h&536870912)!==0&&(c.flags&128)===0&&(Wt(c),c.subtreeFlags&6&&(c.flags|=8192)):Wt(c),h=c.updateQueue,h!==null&&ih(c,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),a!==null&&oe(la),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),ys(Tn),Wt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function KH(a,c){switch(iy(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return ys(Tn),xe(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return ze(c),null;case 13:if(xs(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Yc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return oe(An),null;case 4:return xe(),null;case 10:return ys(c.type),null;case 22:case 23:return xs(c),by(),a!==null&&oe(la),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return ys(Tn),null;case 25:return null;default:return null}}function WT(a,c){switch(iy(c),c.tag){case 3:ys(Tn),xe();break;case 26:case 27:case 5:ze(c);break;case 4:xe();break;case 13:xs(c);break;case 19:oe(An);break;case 10:ys(c.type);break;case 22:case 23:xs(c),by(),a!==null&&oe(la);break;case 24:ys(Tn)}}function fu(a,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var x=y.next;h=x;do{if((h.tag&a)===a){y=void 0;var C=h.create,D=h.inst;y=C(),D.destroy=y}h=h.next}while(h!==x)}}catch(P){_t(c,c.return,P)}}function io(a,c,h){try{var y=c.updateQueue,x=y!==null?y.lastEffect:null;if(x!==null){var C=x.next;y=C;do{if((y.tag&a)===a){var D=y.inst,P=D.destroy;if(P!==void 0){D.destroy=void 0,x=c;var K=h,se=P;try{se()}catch(fe){_t(x,K,fe)}}}y=y.next}while(y!==C)}}catch(fe){_t(c,c.return,fe)}}function KT(a){var c=a.updateQueue;if(c!==null){var h=a.stateNode;try{LN(c,h)}catch(y){_t(a,a.return,y)}}}function YT(a,c,h){h.props=ua(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(y){_t(a,c,y)}}function hu(a,c){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof h=="function"?a.refCleanup=h(y):h.current=y}}catch(x){_t(a,c,x)}}function Wi(a,c){var h=a.ref,y=a.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(x){_t(a,c,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){_t(a,c,x)}else h.current=null}function XT(a){var c=a.type,h=a.memoizedProps,y=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(x){_t(a,a.return,x)}}function Gy(a,c,h){try{var y=a.stateNode;mF(y,a.type,h,c),y[Lt]=c}catch(x){_t(a,a.return,x)}}function ZT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ho(a.type)||a.tag===4}function Wy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ZT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ho(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Ky(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(a),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=gh));else if(y!==4&&(y===27&&ho(a.type)&&(h=a.stateNode,c=null),a=a.child,a!==null))for(Ky(a,c,h),a=a.sibling;a!==null;)Ky(a,c,h),a=a.sibling}function sh(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(y!==4&&(y===27&&ho(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(sh(a,c,h),a=a.sibling;a!==null;)sh(a,c,h),a=a.sibling}function QT(a){var c=a.stateNode,h=a.memoizedProps;try{for(var y=a.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Fn(c,y,h),c[Gt]=a,c[Lt]=h}catch(C){_t(a,a.return,C)}}var Ss=!1,an=!1,Yy=!1,JT=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function YH(a,c){if(a=a.containerInfo,x0=Ch,a=uN(a),Wg(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var x=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var D=0,P=-1,K=-1,se=0,fe=0,me=a,ce=null;t:for(;;){for(var ue;me!==h||x!==0&&me.nodeType!==3||(P=D+x),me!==C||y!==0&&me.nodeType!==3||(K=D+y),me.nodeType===3&&(D+=me.nodeValue.length),(ue=me.firstChild)!==null;)ce=me,me=ue;for(;;){if(me===a)break t;if(ce===h&&++se===x&&(P=D),ce===C&&++fe===y&&(K=D),(ue=me.nextSibling)!==null)break;me=ce,ce=me.parentNode}me=ue}h=P===-1||K===-1?null:{start:P,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(v0={focusedElem:a,selectionRange:h},Ch=!1,Rn=c;Rn!==null;)if(c=Rn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Rn=a;else for(;Rn!==null;){switch(c=Rn,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,h=c,x=C.memoizedProps,C=C.memoizedState,y=h.stateNode;try{var Ge=ua(h.type,x,h.elementType===h.type);a=y.getSnapshotBeforeUpdate(Ge,C),y.__reactInternalSnapshotBeforeUpdate=a}catch(Fe){_t(h,h.return,Fe)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,h=a.nodeType,h===9)C0(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":C0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Rn=a;break}Rn=c.return}}function eA(a,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:so(a,h),y&4&&fu(5,h);break;case 1:if(so(a,h),y&4)if(a=h.stateNode,c===null)try{a.componentDidMount()}catch(D){_t(h,h.return,D)}else{var x=ua(h.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(x,c,a.__reactInternalSnapshotBeforeUpdate)}catch(D){_t(h,h.return,D)}}y&64&&KT(h),y&512&&hu(h,h.return);break;case 3:if(so(a,h),y&64&&(a=h.updateQueue,a!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{LN(a,c)}catch(D){_t(h,h.return,D)}}break;case 27:c===null&&y&4&&QT(h);case 26:case 5:so(a,h),c===null&&y&4&&XT(h),y&512&&hu(h,h.return);break;case 12:so(a,h);break;case 13:so(a,h),y&4&&rA(a,h),y&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=iF.bind(null,h),SF(a,h))));break;case 22:if(y=h.memoizedState!==null||Ss,!y){c=c!==null&&c.memoizedState!==null||an,x=Ss;var C=an;Ss=y,(an=c)&&!C?oo(a,h,(h.subtreeFlags&8772)!==0):so(a,h),Ss=x,an=C}break;case 30:break;default:so(a,h)}}function tA(a){var c=a.alternate;c!==null&&(a.alternate=null,tA(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Bi(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Vt=null,vr=!1;function Cs(a,c,h){for(h=h.child;h!==null;)nA(a,c,h),h=h.sibling}function nA(a,c,h){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Ot,h)}catch{}switch(h.tag){case 26:an||Wi(h,c),Cs(a,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:an||Wi(h,c);var y=Vt,x=vr;ho(h.type)&&(Vt=h.stateNode,vr=!1),Cs(a,c,h),Su(h.stateNode),Vt=y,vr=x;break;case 5:an||Wi(h,c);case 6:if(y=Vt,x=vr,Vt=null,Cs(a,c,h),Vt=y,vr=x,Vt!==null)if(vr)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(h.stateNode)}catch(C){_t(h,c,C)}else try{Vt.removeChild(h.stateNode)}catch(C){_t(h,c,C)}break;case 18:Vt!==null&&(vr?(a=Vt,UA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),_u(a)):UA(Vt,h.stateNode));break;case 4:y=Vt,x=vr,Vt=h.stateNode.containerInfo,vr=!0,Cs(a,c,h),Vt=y,vr=x;break;case 0:case 11:case 14:case 15:an||io(2,h,c),an||io(4,h,c),Cs(a,c,h);break;case 1:an||(Wi(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&YT(h,c,y)),Cs(a,c,h);break;case 21:Cs(a,c,h);break;case 22:an=(y=an)||h.memoizedState!==null,Cs(a,c,h),an=y;break;default:Cs(a,c,h)}}function rA(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{_u(a)}catch(h){_t(c,c.return,h)}}function XH(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new JT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new JT),c;default:throw Error(r(435,a.tag))}}function Xy(a,c){var h=XH(a);c.forEach(function(y){var x=sF.bind(null,a,y);h.has(y)||(h.add(y),y.then(x,x))})}function Ir(a,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var x=h[y],C=a,D=c,P=D;e:for(;P!==null;){switch(P.tag){case 27:if(ho(P.type)){Vt=P.stateNode,vr=!1;break e}break;case 5:Vt=P.stateNode,vr=!1;break e;case 3:case 4:Vt=P.stateNode.containerInfo,vr=!0;break e}P=P.return}if(Vt===null)throw Error(r(160));nA(C,D,x),Vt=null,vr=!1,C=x.alternate,C!==null&&(C.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)iA(c,a),c=c.sibling}var Ei=null;function iA(a,c){var h=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ir(c,a),Br(a),y&4&&(io(3,a,a.return),fu(3,a),io(5,a,a.return));break;case 1:Ir(c,a),Br(a),y&512&&(an||h===null||Wi(h,h.return)),y&64&&Ss&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var x=Ei;if(Ir(c,a),Br(a),y&512&&(an||h===null||Wi(h,h.return)),y&4){var C=h!==null?h.memoizedState:null;if(y=a.memoizedState,h===null)if(y===null)if(a.stateNode===null){e:{y=a.type,h=a.memoizedProps,x=x.ownerDocument||x;t:switch(y){case"title":C=x.getElementsByTagName("title")[0],(!C||C[jr]||C[Gt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=x.createElement(y),x.head.insertBefore(C,x.querySelector("head > title"))),Fn(C,y,h),C[Gt]=a,Rt(C),y=C;break e;case"link":var D=QA("link","href",x).get(y+(h.href||""));if(D){for(var P=0;P<D.length;P++)if(C=D[P],C.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&C.getAttribute("rel")===(h.rel==null?null:h.rel)&&C.getAttribute("title")===(h.title==null?null:h.title)&&C.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(P,1);break t}}C=x.createElement(y),Fn(C,y,h),x.head.appendChild(C);break;case"meta":if(D=QA("meta","content",x).get(y+(h.content||""))){for(P=0;P<D.length;P++)if(C=D[P],C.getAttribute("content")===(h.content==null?null:""+h.content)&&C.getAttribute("name")===(h.name==null?null:h.name)&&C.getAttribute("property")===(h.property==null?null:h.property)&&C.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&C.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(P,1);break t}}C=x.createElement(y),Fn(C,y,h),x.head.appendChild(C);break;default:throw Error(r(468,y))}C[Gt]=a,Rt(C),y=C}a.stateNode=y}else JA(x,a.type,a.stateNode);else a.stateNode=ZA(x,y,a.memoizedProps);else C!==y?(C===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):C.count--,y===null?JA(x,a.type,a.stateNode):ZA(x,y,a.memoizedProps)):y===null&&a.stateNode!==null&&Gy(a,a.memoizedProps,h.memoizedProps)}break;case 27:Ir(c,a),Br(a),y&512&&(an||h===null||Wi(h,h.return)),h!==null&&y&4&&Gy(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Ir(c,a),Br(a),y&512&&(an||h===null||Wi(h,h.return)),a.flags&32){x=a.stateNode;try{Qr(x,"")}catch(ue){_t(a,a.return,ue)}}y&4&&a.stateNode!=null&&(x=a.memoizedProps,Gy(a,x,h!==null?h.memoizedProps:x)),y&1024&&(Yy=!0);break;case 6:if(Ir(c,a),Br(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,h=a.stateNode;try{h.nodeValue=y}catch(ue){_t(a,a.return,ue)}}break;case 3:if(vh=null,x=Ei,Ei=bh(c.containerInfo),Ir(c,a),Ei=x,Br(a),y&4&&h!==null&&h.memoizedState.isDehydrated)try{_u(c.containerInfo)}catch(ue){_t(a,a.return,ue)}Yy&&(Yy=!1,sA(a));break;case 4:y=Ei,Ei=bh(a.stateNode.containerInfo),Ir(c,a),Br(a),Ei=y;break;case 12:Ir(c,a),Br(a);break;case 13:Ir(c,a),Br(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(n0=Le()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Xy(a,y)));break;case 22:x=a.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,se=Ss,fe=an;if(Ss=se||x,an=fe||K,Ir(c,a),an=fe,Ss=se,Br(a),y&8192)e:for(c=a.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(h===null||K||Ss||an||da(a)),h=null,c=a;;){if(c.tag===5||c.tag===26){if(h===null){K=h=c;try{if(C=K.stateNode,x)D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{P=K.stateNode;var me=K.memoizedProps.style,ce=me!=null&&me.hasOwnProperty("display")?me.display:null;P.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){_t(K,K.return,ue)}}}else if(c.tag===6){if(h===null){K=c;try{K.stateNode.nodeValue=x?"":K.memoizedProps}catch(ue){_t(K,K.return,ue)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=a.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,Xy(a,h))));break;case 19:Ir(c,a),Br(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Xy(a,y)));break;case 30:break;case 21:break;default:Ir(c,a),Br(a)}}function Br(a){var c=a.flags;if(c&2){try{for(var h,y=a.return;y!==null;){if(ZT(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var x=h.stateNode,C=Wy(a);sh(a,C,x);break;case 5:var D=h.stateNode;h.flags&32&&(Qr(D,""),h.flags&=-33);var P=Wy(a);sh(a,P,D);break;case 3:case 4:var K=h.stateNode.containerInfo,se=Wy(a);Ky(a,se,K);break;default:throw Error(r(161))}}catch(fe){_t(a,a.return,fe)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function sA(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;sA(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function so(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)eA(a,c.alternate,c),c=c.sibling}function da(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:io(4,c,c.return),da(c);break;case 1:Wi(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&YT(c,c.return,h),da(c);break;case 27:Su(c.stateNode);case 26:case 5:Wi(c,c.return),da(c);break;case 22:c.memoizedState===null&&da(c);break;case 30:da(c);break;default:da(c)}a=a.sibling}}function oo(a,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,x=a,C=c,D=C.flags;switch(C.tag){case 0:case 11:case 15:oo(x,C,h),fu(4,C);break;case 1:if(oo(x,C,h),y=C,x=y.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(se){_t(y,y.return,se)}if(y=C,x=y.updateQueue,x!==null){var P=y.stateNode;try{var K=x.shared.hiddenCallbacks;if(K!==null)for(x.shared.hiddenCallbacks=null,x=0;x<K.length;x++)ON(K[x],P)}catch(se){_t(y,y.return,se)}}h&&D&64&&KT(C),hu(C,C.return);break;case 27:QT(C);case 26:case 5:oo(x,C,h),h&&y===null&&D&4&&XT(C),hu(C,C.return);break;case 12:oo(x,C,h);break;case 13:oo(x,C,h),h&&D&4&&rA(x,C);break;case 22:C.memoizedState===null&&oo(x,C,h),hu(C,C.return);break;case 30:break;default:oo(x,C,h)}c=c.sibling}}function Zy(a,c){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&Qc(h))}function Qy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Qc(a))}function Ki(a,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)oA(a,c,h,y),c=c.sibling}function oA(a,c,h,y){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Ki(a,c,h,y),x&2048&&fu(9,c);break;case 1:Ki(a,c,h,y);break;case 3:Ki(a,c,h,y),x&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Qc(a)));break;case 12:if(x&2048){Ki(a,c,h,y),a=c.stateNode;try{var C=c.memoizedProps,D=C.id,P=C.onPostCommit;typeof P=="function"&&P(D,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(K){_t(c,c.return,K)}}else Ki(a,c,h,y);break;case 13:Ki(a,c,h,y);break;case 23:break;case 22:C=c.stateNode,D=c.alternate,c.memoizedState!==null?C._visibility&2?Ki(a,c,h,y):pu(a,c):C._visibility&2?Ki(a,c,h,y):(C._visibility|=2,Nl(a,c,h,y,(c.subtreeFlags&10256)!==0)),x&2048&&Zy(D,c);break;case 24:Ki(a,c,h,y),x&2048&&Qy(c.alternate,c);break;default:Ki(a,c,h,y)}}function Nl(a,c,h,y,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,D=c,P=h,K=y,se=D.flags;switch(D.tag){case 0:case 11:case 15:Nl(C,D,P,K,x),fu(8,D);break;case 23:break;case 22:var fe=D.stateNode;D.memoizedState!==null?fe._visibility&2?Nl(C,D,P,K,x):pu(C,D):(fe._visibility|=2,Nl(C,D,P,K,x)),x&&se&2048&&Zy(D.alternate,D);break;case 24:Nl(C,D,P,K,x),x&&se&2048&&Qy(D.alternate,D);break;default:Nl(C,D,P,K,x)}c=c.sibling}}function pu(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=a,y=c,x=y.flags;switch(y.tag){case 22:pu(h,y),x&2048&&Zy(y.alternate,y);break;case 24:pu(h,y),x&2048&&Qy(y.alternate,y);break;default:pu(h,y)}c=c.sibling}}var mu=8192;function Tl(a){if(a.subtreeFlags&mu)for(a=a.child;a!==null;)aA(a),a=a.sibling}function aA(a){switch(a.tag){case 26:Tl(a),a.flags&mu&&a.memoizedState!==null&&LF(Ei,a.memoizedState,a.memoizedProps);break;case 5:Tl(a);break;case 3:case 4:var c=Ei;Ei=bh(a.stateNode.containerInfo),Tl(a),Ei=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=mu,mu=16777216,Tl(a),mu=c):Tl(a));break;default:Tl(a)}}function lA(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function gu(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Rn=y,uA(y,a)}lA(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cA(a),a=a.sibling}function cA(a){switch(a.tag){case 0:case 11:case 15:gu(a),a.flags&2048&&io(9,a,a.return);break;case 3:gu(a);break;case 12:gu(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,oh(a)):gu(a);break;default:gu(a)}}function oh(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Rn=y,uA(y,a)}lA(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:io(8,c,c.return),oh(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,oh(c));break;default:oh(c)}a=a.sibling}}function uA(a,c){for(;Rn!==null;){var h=Rn;switch(h.tag){case 0:case 11:case 15:io(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Qc(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Rn=y;else e:for(h=a;Rn!==null;){y=Rn;var x=y.sibling,C=y.return;if(tA(y),y===h){Rn=null;break e}if(x!==null){x.return=C,Rn=x;break e}Rn=C}}}var ZH={getCacheForType:function(a){var c=Jn(Tn),h=c.data.get(a);return h===void 0&&(h=a(),c.data.set(a,h)),h}},QH=typeof WeakMap=="function"?WeakMap:Map,vt=0,jt=null,rt=null,ut=0,wt=0,zr=null,ao=!1,Al=!1,Jy=!1,ks=0,en=0,lo=0,fa=0,e0=0,si=0,Ml=0,yu=null,wr=null,t0=!1,n0=0,ah=1/0,lh=null,co=null,Hn=0,uo=null,_l=null,Dl=0,r0=0,i0=null,dA=null,bu=0,s0=null;function qr(){if((vt&2)!==0&&ut!==0)return ut&-ut;if(O.T!==null){var a=bl;return a!==0?a:f0()}return Gs()}function fA(){si===0&&(si=(ut&536870912)===0||yt?$s():536870912);var a=ii.current;return a!==null&&(a.flags|=32),si}function Vr(a,c,h){(a===jt&&(wt===2||wt===9)||a.cancelPendingCommit!==null)&&(Rl(a,0),fo(a,ut,si,!1)),_r(a,h),((vt&2)===0||a!==jt)&&(a===jt&&((vt&2)===0&&(fa|=h),en===4&&fo(a,ut,si,!1)),Yi(a))}function hA(a,c,h){if((vt&6)!==0)throw Error(r(327));var y=!h&&(c&124)===0&&(c&a.expiredLanes)===0||lt(a,c),x=y?tF(a,c):l0(a,c,!0),C=y;do{if(x===0){Al&&!y&&fo(a,c,0,!1);break}else{if(h=a.current.alternate,C&&!JH(h)){x=l0(a,c,!1),C=!1;continue}if(x===2){if(C=c,a.errorRecoveryDisabledLanes&C)var D=0;else D=a.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){c=D;e:{var P=a;x=yu;var K=P.current.memoizedState.isDehydrated;if(K&&(Rl(P,D).flags|=256),D=l0(P,D,!1),D!==2){if(Jy&&!K){P.errorRecoveryDisabledLanes|=C,fa|=C,x=4;break e}C=wr,wr=x,C!==null&&(wr===null?wr=C:wr.push.apply(wr,C))}x=D}if(C=!1,x!==2)continue}}if(x===1){Rl(a,0),fo(a,c,0,!0);break}e:{switch(y=a,C=x,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:fo(y,c,si,!ao);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(x=n0+300-Le(),10<x)){if(fo(y,c,si,!ao),or(y,0,!0)!==0)break e;y.timeoutHandle=HA(pA.bind(null,y,h,wr,lh,t0,c,si,fa,Ml,ao,C,2,-0,0),x);break e}pA(y,h,wr,lh,t0,c,si,fa,Ml,ao,C,0,-0,0)}}break}while(!0);Yi(a)}function pA(a,c,h,y,x,C,D,P,K,se,fe,me,ce,ue){if(a.timeoutHandle=-1,me=c.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(Eu={stylesheets:null,count:0,unsuspend:OF},aA(c),me=PF(),me!==null)){a.cancelPendingCommit=me(wA.bind(null,a,c,C,h,y,x,D,P,K,fe,1,ce,ue)),fo(a,C,D,!se);return}wA(a,c,C,h,y,x,D,P,K)}function JH(a){for(var c=a;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var x=h[y],C=x.getSnapshot;x=x.value;try{if(!Lr(C(),x))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fo(a,c,h,y){c&=~e0,c&=~fa,a.suspendedLanes|=c,a.pingedLanes&=~c,y&&(a.warmLanes|=c),y=a.expirationTimes;for(var x=c;0<x;){var C=31-At(x),D=1<<C;y[C]=-1,x&=~D}h!==0&&yr(a,h,c)}function ch(){return(vt&6)===0?(xu(0),!1):!0}function o0(){if(rt!==null){if(wt===0)var a=rt.return;else a=rt,gs=oa=null,Cy(a),kl=null,cu=0,a=rt;for(;a!==null;)WT(a.alternate,a),a=a.return;rt=null}}function Rl(a,c){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,yF(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),o0(),jt=a,rt=h=hs(a.current,null),ut=c,wt=0,zr=null,ao=!1,Al=lt(a,c),Jy=!1,Ml=si=e0=fa=lo=en=0,wr=yu=null,t0=!1,(c&8)!==0&&(c|=c&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=c;0<y;){var x=31-At(y),C=1<<x;c|=a[x],y&=~C}return ks=c,Df(),h}function mA(a,c){tt=null,O.H=Xf,c===eu||c===qf?(c=RN(),wt=3):c===MN?(c=RN(),wt=4):wt=c===jT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,zr=c,rt===null&&(en=1,th(a,ei(c,a.current)))}function gA(){var a=O.H;return O.H=Xf,a===null?Xf:a}function yA(){var a=O.A;return O.A=ZH,a}function a0(){en=4,ao||(ut&4194048)!==ut&&ii.current!==null||(Al=!0),(lo&134217727)===0&&(fa&134217727)===0||jt===null||fo(jt,ut,si,!1)}function l0(a,c,h){var y=vt;vt|=2;var x=gA(),C=yA();(jt!==a||ut!==c)&&(lh=null,Rl(a,c)),c=!1;var D=en;e:do try{if(wt!==0&&rt!==null){var P=rt,K=zr;switch(wt){case 8:o0(),D=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(c=!0);var se=wt;if(wt=0,zr=null,jl(a,P,K,se),h&&Al){D=0;break e}break;default:se=wt,wt=0,zr=null,jl(a,P,K,se)}}eF(),D=en;break}catch(fe){mA(a,fe)}while(!0);return c&&a.shellSuspendCounter++,gs=oa=null,vt=y,O.H=x,O.A=C,rt===null&&(jt=null,ut=0,Df()),D}function eF(){for(;rt!==null;)bA(rt)}function tF(a,c){var h=vt;vt|=2;var y=gA(),x=yA();jt!==a||ut!==c?(lh=null,ah=Le()+500,Rl(a,c)):Al=lt(a,c);e:do try{if(wt!==0&&rt!==null){c=rt;var C=zr;t:switch(wt){case 1:wt=0,zr=null,jl(a,c,C,1);break;case 2:case 9:if(_N(C)){wt=0,zr=null,xA(c);break}c=function(){wt!==2&&wt!==9||jt!==a||(wt=7),Yi(a)},C.then(c,c);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:_N(C)?(wt=0,zr=null,xA(c)):(wt=0,zr=null,jl(a,c,C,7));break;case 5:var D=null;switch(rt.tag){case 26:D=rt.memoizedState;case 5:case 27:var P=rt;if(!D||eM(D)){wt=0,zr=null;var K=P.sibling;if(K!==null)rt=K;else{var se=P.return;se!==null?(rt=se,uh(se)):rt=null}break t}}wt=0,zr=null,jl(a,c,C,5);break;case 6:wt=0,zr=null,jl(a,c,C,6);break;case 8:o0(),en=6;break e;default:throw Error(r(462))}}nF();break}catch(fe){mA(a,fe)}while(!0);return gs=oa=null,O.H=y,O.A=x,vt=h,rt!==null?0:(jt=null,ut=0,Df(),en)}function nF(){for(;rt!==null&&!Ee();)bA(rt)}function bA(a){var c=$T(a.alternate,a,ks);a.memoizedProps=a.pendingProps,c===null?uh(a):rt=c}function xA(a){var c=a,h=c.alternate;switch(c.tag){case 15:case 0:c=zT(h,c,c.pendingProps,c.type,void 0,ut);break;case 11:c=zT(h,c,c.pendingProps,c.type.render,c.ref,ut);break;case 5:Cy(c);default:WT(h,c),c=rt=vN(c,ks),c=$T(h,c,ks)}a.memoizedProps=a.pendingProps,c===null?uh(a):rt=c}function jl(a,c,h,y){gs=oa=null,Cy(c),kl=null,cu=0;var x=c.return;try{if($H(a,x,c,h,ut)){en=1,th(a,ei(h,a.current)),rt=null;return}}catch(C){if(x!==null)throw rt=x,C;en=1,th(a,ei(h,a.current)),rt=null;return}c.flags&32768?(yt||y===1?a=!0:Al||(ut&536870912)!==0?a=!1:(ao=a=!0,(y===2||y===9||y===3||y===6)&&(y=ii.current,y!==null&&y.tag===13&&(y.flags|=16384))),vA(c,a)):uh(c)}function uh(a){var c=a;do{if((c.flags&32768)!==0){vA(c,ao);return}a=c.return;var h=WH(c.alternate,c,ks);if(h!==null){rt=h;return}if(c=c.sibling,c!==null){rt=c;return}rt=c=a}while(c!==null);en===0&&(en=5)}function vA(a,c){do{var h=KH(a.alternate,a);if(h!==null){h.flags&=32767,rt=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(a=a.sibling,a!==null)){rt=a;return}rt=a=h}while(a!==null);en=6,rt=null}function wA(a,c,h,y,x,C,D,P,K){a.cancelPendingCommit=null;do dh();while(Hn!==0);if((vt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=Qg,ar(a,h,C,D,P,K),a===jt&&(rt=jt=null,ut=0),_l=c,uo=a,Dl=h,r0=C,i0=x,dA=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,oF(un,function(){return NA(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=O.T,O.T=null,x=V.p,V.p=2,D=vt,vt|=4;try{YH(a,c,h)}finally{vt=D,V.p=x,O.T=y}}Hn=1,SA(),CA(),kA()}}function SA(){if(Hn===1){Hn=0;var a=uo,c=_l,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=O.T,O.T=null;var y=V.p;V.p=2;var x=vt;vt|=4;try{iA(c,a);var C=v0,D=uN(a.containerInfo),P=C.focusedElem,K=C.selectionRange;if(D!==P&&P&&P.ownerDocument&&cN(P.ownerDocument.documentElement,P)){if(K!==null&&Wg(P)){var se=K.start,fe=K.end;if(fe===void 0&&(fe=se),"selectionStart"in P)P.selectionStart=se,P.selectionEnd=Math.min(fe,P.value.length);else{var me=P.ownerDocument||document,ce=me&&me.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),Ge=P.textContent.length,Fe=Math.min(K.start,Ge),Et=K.end===void 0?Fe:Math.min(K.end,Ge);!ue.extend&&Fe>Et&&(D=Et,Et=Fe,Fe=D);var ne=lN(P,Fe),J=lN(P,Et);if(ne&&J&&(ue.rangeCount!==1||ue.anchorNode!==ne.node||ue.anchorOffset!==ne.offset||ue.focusNode!==J.node||ue.focusOffset!==J.offset)){var ie=me.createRange();ie.setStart(ne.node,ne.offset),ue.removeAllRanges(),Fe>Et?(ue.addRange(ie),ue.extend(J.node,J.offset)):(ie.setEnd(J.node,J.offset),ue.addRange(ie))}}}}for(me=[],ue=P;ue=ue.parentNode;)ue.nodeType===1&&me.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<me.length;P++){var he=me[P];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Ch=!!x0,v0=x0=null}finally{vt=x,V.p=y,O.T=h}}a.current=c,Hn=2}}function CA(){if(Hn===2){Hn=0;var a=uo,c=_l,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=O.T,O.T=null;var y=V.p;V.p=2;var x=vt;vt|=4;try{eA(a,c.alternate,c)}finally{vt=x,V.p=y,O.T=h}}Hn=3}}function kA(){if(Hn===4||Hn===3){Hn=0,pt();var a=uo,c=_l,h=Dl,y=dA;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Hn=5:(Hn=0,_l=uo=null,EA(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(co=null),Bn(h),c=c.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Ot,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=O.T,x=V.p,V.p=2,O.T=null;try{for(var C=a.onRecoverableError,D=0;D<y.length;D++){var P=y[D];C(P.value,{componentStack:P.stack})}}finally{O.T=c,V.p=x}}(Dl&3)!==0&&dh(),Yi(a),x=a.pendingLanes,(h&4194090)!==0&&(x&42)!==0?a===s0?bu++:(bu=0,s0=a):bu=0,xu(0)}}function EA(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Qc(c)))}function dh(a){return SA(),CA(),kA(),NA()}function NA(){if(Hn!==5)return!1;var a=uo,c=r0;r0=0;var h=Bn(Dl),y=O.T,x=V.p;try{V.p=32>h?32:h,O.T=null,h=i0,i0=null;var C=uo,D=Dl;if(Hn=0,_l=uo=null,Dl=0,(vt&6)!==0)throw Error(r(331));var P=vt;if(vt|=4,cA(C.current),oA(C,C.current,D,h),vt=P,xu(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Ot,C)}catch{}return!0}finally{V.p=x,O.T=y,EA(a,c)}}function TA(a,c,h){c=ei(h,c),c=Iy(a.stateNode,c,2),a=eo(a,c,2),a!==null&&(_r(a,2),Yi(a))}function _t(a,c,h){if(a.tag===3)TA(a,a,h);else for(;c!==null;){if(c.tag===3){TA(c,a,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(co===null||!co.has(y))){a=ei(h,a),h=DT(2),y=eo(c,h,2),y!==null&&(RT(h,y,c,a),_r(y,2),Yi(y));break}}c=c.return}}function c0(a,c,h){var y=a.pingCache;if(y===null){y=a.pingCache=new QH;var x=new Set;y.set(c,x)}else x=y.get(c),x===void 0&&(x=new Set,y.set(c,x));x.has(h)||(Jy=!0,x.add(h),a=rF.bind(null,a,c,h),c.then(a,a))}function rF(a,c,h){var y=a.pingCache;y!==null&&y.delete(c),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,jt===a&&(ut&h)===h&&(en===4||en===3&&(ut&62914560)===ut&&300>Le()-n0?(vt&2)===0&&Rl(a,0):e0|=h,Ml===ut&&(Ml=0)),Yi(a)}function AA(a,c){c===0&&(c=wi()),a=pl(a,c),a!==null&&(_r(a,c),Yi(a))}function iF(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),AA(a,h)}function sF(a,c){var h=0;switch(a.tag){case 13:var y=a.stateNode,x=a.memoizedState;x!==null&&(h=x.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(c),AA(a,h)}function oF(a,c){return Te(a,c)}var fh=null,Ol=null,u0=!1,hh=!1,d0=!1,ha=0;function Yi(a){a!==Ol&&a.next===null&&(Ol===null?fh=Ol=a:Ol=Ol.next=a),hh=!0,u0||(u0=!0,lF())}function xu(a,c){if(!d0&&hh){d0=!0;do for(var h=!1,y=fh;y!==null;){if(a!==0){var x=y.pendingLanes;if(x===0)var C=0;else{var D=y.suspendedLanes,P=y.pingedLanes;C=(1<<31-At(42|a)+1)-1,C&=x&~(D&~P),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(h=!0,RA(y,C))}else C=ut,C=or(y,y===jt?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||lt(y,C)||(h=!0,RA(y,C));y=y.next}while(h);d0=!1}}function aF(){MA()}function MA(){hh=u0=!1;var a=0;ha!==0&&(gF()&&(a=ha),ha=0);for(var c=Le(),h=null,y=fh;y!==null;){var x=y.next,C=_A(y,c);C===0?(y.next=null,h===null?fh=x:h.next=x,x===null&&(Ol=h)):(h=y,(a!==0||(C&3)!==0)&&(hh=!0)),y=x}xu(a)}function _A(a,c){for(var h=a.suspendedLanes,y=a.pingedLanes,x=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var D=31-At(C),P=1<<D,K=x[D];K===-1?((P&h)===0||(P&y)!==0)&&(x[D]=fn(P,c)):K<=c&&(a.expiredLanes|=P),C&=~P}if(c=jt,h=ut,h=or(a,a===c?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,h===0||a===c&&(wt===2||wt===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&ke(y),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||lt(a,h)){if(c=h&-h,c===a.callbackPriority)return c;switch(y!==null&&ke(y),Bn(h)){case 2:case 8:h=$t;break;case 32:h=un;break;case 268435456:h=Nt;break;default:h=un}return y=DA.bind(null,a),h=Te(h,y),a.callbackPriority=c,a.callbackNode=h,c}return y!==null&&y!==null&&ke(y),a.callbackPriority=2,a.callbackNode=null,2}function DA(a,c){if(Hn!==0&&Hn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(dh()&&a.callbackNode!==h)return null;var y=ut;return y=or(a,a===jt?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(hA(a,y,c),_A(a,Le()),a.callbackNode!=null&&a.callbackNode===h?DA.bind(null,a):null)}function RA(a,c){if(dh())return null;hA(a,c,!0)}function lF(){bF(function(){(vt&6)!==0?Te(bt,aF):MA()})}function f0(){return ha===0&&(ha=$s()),ha}function jA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:ol(""+a)}function OA(a,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,a.id&&h.setAttribute("form",a.id),c.parentNode.insertBefore(h,c),a=new FormData(a),h.parentNode.removeChild(h),a}function cF(a,c,h,y,x){if(c==="submit"&&h&&h.stateNode===x){var C=jA((x[Lt]||null).action),D=y.submitter;D&&(c=(c=D[Lt]||null)?jA(c.formAction):D.getAttribute("formAction"),c!==null&&(C=c,D=null));var P=new re("action","action",null,y,x);a.push({event:P,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(ha!==0){var K=D?OA(x,D):new FormData(x);Ry(h,{pending:!0,data:K,method:x.method,action:C},null,K)}}else typeof C=="function"&&(P.preventDefault(),K=D?OA(x,D):new FormData(x),Ry(h,{pending:!0,data:K,method:x.method,action:C},C,K))},currentTarget:x}]})}}for(var h0=0;h0<Zg.length;h0++){var p0=Zg[h0],uF=p0.toLowerCase(),dF=p0[0].toUpperCase()+p0.slice(1);ki(uF,"on"+dF)}ki(hN,"onAnimationEnd"),ki(pN,"onAnimationIteration"),ki(mN,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(AH,"onTransitionRun"),ki(MH,"onTransitionStart"),ki(_H,"onTransitionCancel"),ki(gN,"onTransitionEnd"),ge("onMouseEnter",["mouseout","mouseover"]),ge("onMouseLeave",["mouseout","mouseover"]),ge("onPointerEnter",["pointerout","pointerover"]),ge("onPointerLeave",["pointerout","pointerover"]),Z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Z("onBeforeInput",["compositionend","keypress","textInput","paste"]),Z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vu));function LA(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var y=a[h],x=y.event;y=y.listeners;e:{var C=void 0;if(c)for(var D=y.length-1;0<=D;D--){var P=y[D],K=P.instance,se=P.currentTarget;if(P=P.listener,K!==C&&x.isPropagationStopped())break e;C=P,x.currentTarget=se;try{C(x)}catch(fe){eh(fe)}x.currentTarget=null,C=K}else for(D=0;D<y.length;D++){if(P=y[D],K=P.instance,se=P.currentTarget,P=P.listener,K!==C&&x.isPropagationStopped())break e;C=P,x.currentTarget=se;try{C(x)}catch(fe){eh(fe)}x.currentTarget=null,C=K}}}}function it(a,c){var h=c[Nn];h===void 0&&(h=c[Nn]=new Set);var y=a+"__bubble";h.has(y)||(PA(c,a,2,!1),h.add(y))}function m0(a,c,h){var y=0;c&&(y|=4),PA(h,a,y,c)}var ph="_reactListening"+Math.random().toString(36).slice(2);function g0(a){if(!a[ph]){a[ph]=!0,zi.forEach(function(h){h!=="selectionchange"&&(fF.has(h)||m0(h,!1,a),m0(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[ph]||(c[ph]=!0,m0("selectionchange",!1,c))}}function PA(a,c,h,y){switch(oM(c)){case 2:var x=zF;break;case 8:x=qF;break;default:x=_0}h=x.bind(null,c,h,a),x=void 0,!zc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),y?x!==void 0?a.addEventListener(c,h,{capture:!0,passive:x}):a.addEventListener(c,h,!0):x!==void 0?a.addEventListener(c,h,{passive:x}):a.addEventListener(c,h,!1)}function y0(a,c,h,y,x){var C=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var P=y.stateNode.containerInfo;if(P===x)break;if(D===4)for(D=y.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===x)return;D=D.return}for(;P!==null;){if(D=hn(P),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){y=C=D;continue e}P=P.parentNode}}y=y.return}Nf(function(){var se=C,fe=Ic(h),me=[];e:{var ce=yN.get(a);if(ce!==void 0){var ue=re,Ge=a;switch(a){case"keypress":if(ll(h)===0)break e;case"keydown":case"keyup":ue=oH;break;case"focusin":Ge="focus",ue=Hc;break;case"focusout":Ge="blur",ue=Hc;break;case"beforeblur":case"afterblur":ue=Hc;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Re;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=ft;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=cH;break;case hN:case pN:case mN:ue=Af;break;case gN:ue=dH;break;case"scroll":case"scrollend":ue=be;break;case"wheel":ue=hH;break;case"copy":case"cut":case"paste":ue=Jr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=K2;break;case"toggle":case"beforetoggle":ue=mH}var Fe=(c&4)!==0,Et=!Fe&&(a==="scroll"||a==="scrollend"),ne=Fe?ce!==null?ce+"Capture":null:ce;Fe=[];for(var J=se,ie;J!==null;){var he=J;if(ie=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ie===null||ne===null||(he=Zo(J,ne),he!=null&&Fe.push(wu(J,he,ie))),Et)break;J=J.return}0<Fe.length&&(ce=new ue(ce,Ge,null,h,fe),me.push({event:ce,listeners:Fe}))}}if((c&7)===0){e:{if(ce=a==="mouseover"||a==="pointerover",ue=a==="mouseout"||a==="pointerout",ce&&h!==Pc&&(Ge=h.relatedTarget||h.fromElement)&&(hn(Ge)||Ge[br]))break e;if((ue||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?(Ge=h.relatedTarget||h.toElement,ue=se,Ge=Ge?hn(Ge):null,Ge!==null&&(Et=s(Ge),Fe=Ge.tag,Ge!==Et||Fe!==5&&Fe!==27&&Fe!==6)&&(Ge=null)):(ue=null,Ge=se),ue!==Ge)){if(Fe=Re,he="onMouseLeave",ne="onMouseEnter",J="mouse",(a==="pointerout"||a==="pointerover")&&(Fe=K2,he="onPointerLeave",ne="onPointerEnter",J="pointer"),Et=ue==null?ce:Yn(ue),ie=Ge==null?ce:Yn(Ge),ce=new Fe(he,J+"leave",ue,h,fe),ce.target=Et,ce.relatedTarget=ie,he=null,hn(fe)===se&&(Fe=new Fe(ne,J+"enter",Ge,h,fe),Fe.target=ie,Fe.relatedTarget=Et,he=Fe),Et=he,ue&&Ge)t:{for(Fe=ue,ne=Ge,J=0,ie=Fe;ie;ie=Ll(ie))J++;for(ie=0,he=ne;he;he=Ll(he))ie++;for(;0<J-ie;)Fe=Ll(Fe),J--;for(;0<ie-J;)ne=Ll(ne),ie--;for(;J--;){if(Fe===ne||ne!==null&&Fe===ne.alternate)break t;Fe=Ll(Fe),ne=Ll(ne)}Fe=null}else Fe=null;ue!==null&&IA(me,ce,ue,Fe,!1),Ge!==null&&Et!==null&&IA(me,Et,Ge,Fe,!0)}}e:{if(ce=se?Yn(se):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var je=nN;else if(eN(ce))if(rN)je=EH;else{je=CH;var nt=SH}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?se&&Lc(se.elementType)&&(je=nN):je=kH;if(je&&(je=je(a,se))){tN(me,je,h,fe);break e}nt&&nt(a,ce,se),a==="focusout"&&se&&ce.type==="number"&&se.memoizedProps.value!=null&&Ys(ce,"number",ce.value)}switch(nt=se?Yn(se):window,a){case"focusin":(eN(nt)||nt.contentEditable==="true")&&(dl=nt,Kg=se,Wc=null);break;case"focusout":Wc=Kg=dl=null;break;case"mousedown":Yg=!0;break;case"contextmenu":case"mouseup":case"dragend":Yg=!1,dN(me,h,fe);break;case"selectionchange":if(TH)break;case"keydown":case"keyup":dN(me,h,fe)}var Be;if(Ug)e:{switch(a){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else ul?Q2(a,h)&&($e="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&($e="onCompositionStart");$e&&(Y2&&h.locale!=="ko"&&(ul||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&ul&&(Be=Vc()):(Ui=fe,qc="value"in Ui?Ui.value:Ui.textContent,ul=!0)),nt=mh(se,$e),0<nt.length&&($e=new W2($e,a,null,h,fe),me.push({event:$e,listeners:nt}),Be?$e.data=Be:(Be=J2(h),Be!==null&&($e.data=Be)))),(Be=yH?bH(a,h):xH(a,h))&&($e=mh(se,"onBeforeInput"),0<$e.length&&(nt=new W2("onBeforeInput","beforeinput",null,h,fe),me.push({event:nt,listeners:$e}),nt.data=Be)),cF(me,a,se,h,fe)}LA(me,c)})}function wu(a,c,h){return{instance:a,listener:c,currentTarget:h}}function mh(a,c){for(var h=c+"Capture",y=[];a!==null;){var x=a,C=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||C===null||(x=Zo(a,h),x!=null&&y.unshift(wu(a,x,C)),x=Zo(a,c),x!=null&&y.push(wu(a,x,C))),a.tag===3)return y;a=a.return}return[]}function Ll(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function IA(a,c,h,y,x){for(var C=c._reactName,D=[];h!==null&&h!==y;){var P=h,K=P.alternate,se=P.stateNode;if(P=P.tag,K!==null&&K===y)break;P!==5&&P!==26&&P!==27||se===null||(K=se,x?(se=Zo(h,C),se!=null&&D.unshift(wu(h,se,K))):x||(se=Zo(h,C),se!=null&&D.push(wu(h,se,K)))),h=h.return}D.length!==0&&a.push({event:c,listeners:D})}var hF=/\r\n?/g,pF=/\u0000|\uFFFD/g;function BA(a){return(typeof a=="string"?a:""+a).replace(hF,`
`).replace(pF,"")}function zA(a,c){return c=BA(c),BA(a)===c}function gh(){}function kt(a,c,h,y,x,C){switch(h){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Qr(a,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Qr(a,""+y);break;case"className":_n(a,"class",y);break;case"tabIndex":_n(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(a,h,y);break;case"style":Cf(a,y,C);break;case"data":if(c!=="object"){_n(a,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||h!=="href")){a.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=ol(""+y),a.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(h==="formAction"?(c!=="input"&&kt(a,c,"name",x.name,x,null),kt(a,c,"formEncType",x.formEncType,x,null),kt(a,c,"formMethod",x.formMethod,x,null),kt(a,c,"formTarget",x.formTarget,x,null)):(kt(a,c,"encType",x.encType,x,null),kt(a,c,"method",x.method,x,null),kt(a,c,"target",x.target,x,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=ol(""+y),a.setAttribute(h,y);break;case"onClick":y!=null&&(a.onclick=gh);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}h=ol(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""+y):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":y===!0?a.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,y):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(h,y):a.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(h):a.setAttribute(h,y);break;case"popover":it("beforetoggle",a),it("toggle",a),qt(a,"popover",y);break;case"xlinkActuate":pn(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":pn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":pn(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":pn(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":pn(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":pn(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":pn(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":pn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":pn(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":qt(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=qg.get(h)||h,qt(a,h,y))}}function b0(a,c,h,y,x,C){switch(h){case"style":Cf(a,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"children":typeof y=="string"?Qr(a,y):(typeof y=="number"||typeof y=="bigint")&&Qr(a,""+y);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"onClick":y!=null&&(a.onclick=gh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!De.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),c=h.slice(2,x?h.length-7:void 0),C=a[Lt]||null,C=C!=null?C[h]:null,typeof C=="function"&&a.removeEventListener(c,C,x),typeof y=="function")){typeof C!="function"&&C!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(c,y,x);break e}h in a?a[h]=y:y===!0?a.setAttribute(h,""):qt(a,h,y)}}}function Fn(a,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",a),it("load",a);var y=!1,x=!1,C;for(C in h)if(h.hasOwnProperty(C)){var D=h[C];if(D!=null)switch(C){case"src":y=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:kt(a,c,C,D,h,null)}}x&&kt(a,c,"srcSet",h.srcSet,h,null),y&&kt(a,c,"src",h.src,h,null);return;case"input":it("invalid",a);var P=C=D=x=null,K=null,se=null;for(y in h)if(h.hasOwnProperty(y)){var fe=h[y];if(fe!=null)switch(y){case"name":x=fe;break;case"type":D=fe;break;case"checked":K=fe;break;case"defaultChecked":se=fe;break;case"value":C=fe;break;case"defaultValue":P=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,c));break;default:kt(a,c,y,fe,h,null)}}Xo(a,C,P,K,se,D,x,!1),Ws(a);return;case"select":it("invalid",a),y=D=C=null;for(x in h)if(h.hasOwnProperty(x)&&(P=h[x],P!=null))switch(x){case"value":C=P;break;case"defaultValue":D=P;break;case"multiple":y=P;default:kt(a,c,x,P,h,null)}c=C,h=D,a.multiple=!!y,c!=null?Zr(a,!!y,c,!1):h!=null&&Zr(a,!!y,h,!0);return;case"textarea":it("invalid",a),C=x=y=null;for(D in h)if(h.hasOwnProperty(D)&&(P=h[D],P!=null))switch(D){case"value":y=P;break;case"defaultValue":x=P;break;case"children":C=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:kt(a,c,D,P,h,null)}wf(a,y,x,C),Ws(a);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(y=h[K],y!=null))switch(K){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:kt(a,c,K,y,h,null)}return;case"dialog":it("beforetoggle",a),it("toggle",a),it("cancel",a),it("close",a);break;case"iframe":case"object":it("load",a);break;case"video":case"audio":for(y=0;y<vu.length;y++)it(vu[y],a);break;case"image":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"embed":case"source":case"link":it("error",a),it("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in h)if(h.hasOwnProperty(se)&&(y=h[se],y!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:kt(a,c,se,y,h,null)}return;default:if(Lc(c)){for(fe in h)h.hasOwnProperty(fe)&&(y=h[fe],y!==void 0&&b0(a,c,fe,y,h,void 0));return}}for(P in h)h.hasOwnProperty(P)&&(y=h[P],y!=null&&kt(a,c,P,y,h,null))}function mF(a,c,h,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,C=null,D=null,P=null,K=null,se=null,fe=null;for(ue in h){var me=h[ue];if(h.hasOwnProperty(ue)&&me!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":K=me;default:y.hasOwnProperty(ue)||kt(a,c,ue,null,y,me)}}for(var ce in y){var ue=y[ce];if(me=h[ce],y.hasOwnProperty(ce)&&(ue!=null||me!=null))switch(ce){case"type":C=ue;break;case"name":x=ue;break;case"checked":se=ue;break;case"defaultChecked":fe=ue;break;case"value":D=ue;break;case"defaultValue":P=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:ue!==me&&kt(a,c,ce,ue,y,me)}}Or(a,D,P,K,se,fe,C,x);return;case"select":ue=D=P=ce=null;for(C in h)if(K=h[C],h.hasOwnProperty(C)&&K!=null)switch(C){case"value":break;case"multiple":ue=K;default:y.hasOwnProperty(C)||kt(a,c,C,null,y,K)}for(x in y)if(C=y[x],K=h[x],y.hasOwnProperty(x)&&(C!=null||K!=null))switch(x){case"value":ce=C;break;case"defaultValue":P=C;break;case"multiple":D=C;default:C!==K&&kt(a,c,x,C,y,K)}c=P,h=D,y=ue,ce!=null?Zr(a,!!h,ce,!1):!!y!=!!h&&(c!=null?Zr(a,!!h,c,!0):Zr(a,!!h,h?[]:"",!1));return;case"textarea":ue=ce=null;for(P in h)if(x=h[P],h.hasOwnProperty(P)&&x!=null&&!y.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:kt(a,c,P,null,y,x)}for(D in y)if(x=y[D],C=h[D],y.hasOwnProperty(D)&&(x!=null||C!=null))switch(D){case"value":ce=x;break;case"defaultValue":ue=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==C&&kt(a,c,D,x,y,C)}vf(a,ce,ue);return;case"option":for(var Ge in h)if(ce=h[Ge],h.hasOwnProperty(Ge)&&ce!=null&&!y.hasOwnProperty(Ge))switch(Ge){case"selected":a.selected=!1;break;default:kt(a,c,Ge,null,y,ce)}for(K in y)if(ce=y[K],ue=h[K],y.hasOwnProperty(K)&&ce!==ue&&(ce!=null||ue!=null))switch(K){case"selected":a.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:kt(a,c,K,ce,y,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in h)ce=h[Fe],h.hasOwnProperty(Fe)&&ce!=null&&!y.hasOwnProperty(Fe)&&kt(a,c,Fe,null,y,ce);for(se in y)if(ce=y[se],ue=h[se],y.hasOwnProperty(se)&&ce!==ue&&(ce!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,c));break;default:kt(a,c,se,ce,y,ue)}return;default:if(Lc(c)){for(var Et in h)ce=h[Et],h.hasOwnProperty(Et)&&ce!==void 0&&!y.hasOwnProperty(Et)&&b0(a,c,Et,void 0,y,ce);for(fe in y)ce=y[fe],ue=h[fe],!y.hasOwnProperty(fe)||ce===ue||ce===void 0&&ue===void 0||b0(a,c,fe,ce,y,ue);return}}for(var ne in h)ce=h[ne],h.hasOwnProperty(ne)&&ce!=null&&!y.hasOwnProperty(ne)&&kt(a,c,ne,null,y,ce);for(me in y)ce=y[me],ue=h[me],!y.hasOwnProperty(me)||ce===ue||ce==null&&ue==null||kt(a,c,me,ce,y,ue)}var x0=null,v0=null;function yh(a){return a.nodeType===9?a:a.ownerDocument}function qA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VA(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function w0(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var S0=null;function gF(){var a=window.event;return a&&a.type==="popstate"?a===S0?!1:(S0=a,!0):(S0=null,!1)}var HA=typeof setTimeout=="function"?setTimeout:void 0,yF=typeof clearTimeout=="function"?clearTimeout:void 0,FA=typeof Promise=="function"?Promise:void 0,bF=typeof queueMicrotask=="function"?queueMicrotask:typeof FA<"u"?function(a){return FA.resolve(null).then(a).catch(xF)}:HA;function xF(a){setTimeout(function(){throw a})}function ho(a){return a==="head"}function UA(a,c){var h=c,y=0,x=0;do{var C=h.nextSibling;if(a.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(0<y&&8>y){h=y;var D=a.ownerDocument;if(h&1&&Su(D.documentElement),h&2&&Su(D.body),h&4)for(h=D.head,Su(h),D=h.firstChild;D;){var P=D.nextSibling,K=D.nodeName;D[jr]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||h.removeChild(D),D=P}}if(x===0){a.removeChild(C),_u(c);return}x--}else h==="$"||h==="$?"||h==="$!"?x++:y=h.charCodeAt(0)-48;else y=0;h=C}while(h);_u(c)}function C0(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":C0(h),Bi(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function vF(a,c,h,y){for(;a.nodeType===1;){var x=h;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[jr])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Ni(a.nextSibling),a===null)break}return null}function wF(a,c,h){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=Ni(a.nextSibling),a===null))return null;return a}function k0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function SF(a,c){var h=a.ownerDocument;if(a.data!=="$?"||h.readyState==="complete")c();else{var y=function(){c(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function Ni(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var E0=null;function $A(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}function GA(a,c,h){switch(c=yh(h),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Su(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Bi(a)}var oi=new Map,WA=new Set;function bh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Es=V.d;V.d={f:CF,r:kF,D:EF,C:NF,L:TF,m:AF,X:_F,S:MF,M:DF};function CF(){var a=Es.f(),c=ch();return a||c}function kF(a){var c=He(a);c!==null&&c.tag===5&&c.type==="form"?hT(c):Es.r(a)}var Pl=typeof document>"u"?null:document;function KA(a,c,h){var y=Pl;if(y&&typeof c=="string"&&c){var x=Qn(c);x='link[rel="'+a+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),WA.has(x)||(WA.add(x),a={rel:a,crossOrigin:h,href:c},y.querySelector(x)===null&&(c=y.createElement("link"),Fn(c,"link",a),Rt(c),y.head.appendChild(c)))}}function EF(a){Es.D(a),KA("dns-prefetch",a,null)}function NF(a,c){Es.C(a,c),KA("preconnect",a,c)}function TF(a,c,h){Es.L(a,c,h);var y=Pl;if(y&&a&&c){var x='link[rel="preload"][as="'+Qn(c)+'"]';c==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+Qn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+Qn(h.imageSizes)+'"]')):x+='[href="'+Qn(a)+'"]';var C=x;switch(c){case"style":C=Il(a);break;case"script":C=Bl(a)}oi.has(C)||(a=f({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:a,as:c},h),oi.set(C,a),y.querySelector(x)!==null||c==="style"&&y.querySelector(Cu(C))||c==="script"&&y.querySelector(ku(C))||(c=y.createElement("link"),Fn(c,"link",a),Rt(c),y.head.appendChild(c)))}}function AF(a,c){Es.m(a,c);var h=Pl;if(h&&a){var y=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Qn(y)+'"][href="'+Qn(a)+'"]',C=x;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Bl(a)}if(!oi.has(C)&&(a=f({rel:"modulepreload",href:a},c),oi.set(C,a),h.querySelector(x)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ku(C)))return}y=h.createElement("link"),Fn(y,"link",a),Rt(y),h.head.appendChild(y)}}}function MF(a,c,h){Es.S(a,c,h);var y=Pl;if(y&&a){var x=Xn(y).hoistableStyles,C=Il(a);c=c||"default";var D=x.get(C);if(!D){var P={loading:0,preload:null};if(D=y.querySelector(Cu(C)))P.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":c},h),(h=oi.get(C))&&N0(a,h);var K=D=y.createElement("link");Rt(K),Fn(K,"link",a),K._p=new Promise(function(se,fe){K.onload=se,K.onerror=fe}),K.addEventListener("load",function(){P.loading|=1}),K.addEventListener("error",function(){P.loading|=2}),P.loading|=4,xh(D,c,y)}D={type:"stylesheet",instance:D,count:1,state:P},x.set(C,D)}}}function _F(a,c){Es.X(a,c);var h=Pl;if(h&&a){var y=Xn(h).hoistableScripts,x=Bl(a),C=y.get(x);C||(C=h.querySelector(ku(x)),C||(a=f({src:a,async:!0},c),(c=oi.get(x))&&T0(a,c),C=h.createElement("script"),Rt(C),Fn(C,"link",a),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(x,C))}}function DF(a,c){Es.M(a,c);var h=Pl;if(h&&a){var y=Xn(h).hoistableScripts,x=Bl(a),C=y.get(x);C||(C=h.querySelector(ku(x)),C||(a=f({src:a,async:!0,type:"module"},c),(c=oi.get(x))&&T0(a,c),C=h.createElement("script"),Rt(C),Fn(C,"link",a),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(x,C))}}function YA(a,c,h,y){var x=(x=ee.current)?bh(x):null;if(!x)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=Il(h.href),h=Xn(x).hoistableStyles,y=h.get(c),y||(y={type:"style",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=Il(h.href);var C=Xn(x).hoistableStyles,D=C.get(a);if(D||(x=x.ownerDocument||x,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,D),(C=x.querySelector(Cu(a)))&&!C._p&&(D.instance=C,D.state.loading=5),oi.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},oi.set(a,h),C||RF(x,a,h,D.state))),c&&y===null)throw Error(r(528,""));return D}if(c&&y!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Bl(h),h=Xn(x).hoistableScripts,y=h.get(c),y||(y={type:"script",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Il(a){return'href="'+Qn(a)+'"'}function Cu(a){return'link[rel="stylesheet"]['+a+"]"}function XA(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function RF(a,c,h,y){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=a.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Fn(c,"link",h),Rt(c),a.head.appendChild(c))}function Bl(a){return'[src="'+Qn(a)+'"]'}function ku(a){return"script[async]"+a}function ZA(a,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var y=a.querySelector('style[data-href~="'+Qn(h.href)+'"]');if(y)return c.instance=y,Rt(y),y;var x=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Rt(y),Fn(y,"style",x),xh(y,h.precedence,a),c.instance=y;case"stylesheet":x=Il(h.href);var C=a.querySelector(Cu(x));if(C)return c.state.loading|=4,c.instance=C,Rt(C),C;y=XA(h),(x=oi.get(x))&&N0(y,x),C=(a.ownerDocument||a).createElement("link"),Rt(C);var D=C;return D._p=new Promise(function(P,K){D.onload=P,D.onerror=K}),Fn(C,"link",y),c.state.loading|=4,xh(C,h.precedence,a),c.instance=C;case"script":return C=Bl(h.src),(x=a.querySelector(ku(C)))?(c.instance=x,Rt(x),x):(y=h,(x=oi.get(C))&&(y=f({},h),T0(y,x)),a=a.ownerDocument||a,x=a.createElement("script"),Rt(x),Fn(x,"link",y),a.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,xh(y,h.precedence,a));return c.instance}function xh(a,c,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=y.length?y[y.length-1]:null,C=x,D=0;D<y.length;D++){var P=y[D];if(P.dataset.precedence===c)C=P;else if(C!==x)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(a,c.firstChild))}function N0(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function T0(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var vh=null;function QA(a,c,h){if(vh===null){var y=new Map,x=vh=new Map;x.set(h,y)}else x=vh,y=x.get(h),y||(y=new Map,x.set(h,y));if(y.has(a))return y;for(y.set(a,null),h=h.getElementsByTagName(a),x=0;x<h.length;x++){var C=h[x];if(!(C[jr]||C[Gt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var D=C.getAttribute(c)||"";D=a+D;var P=y.get(D);P?P.push(C):y.set(D,[C])}}return y}function JA(a,c,h){a=a.ownerDocument||a,a.head.insertBefore(h,c==="title"?a.querySelector("head > title"):null)}function jF(a,c,h){if(h===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function eM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Eu=null;function OF(){}function LF(a,c,h){if(Eu===null)throw Error(r(475));var y=Eu;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Il(h.href),C=a.querySelector(Cu(x));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=wh.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=C,Rt(C);return}C=a.ownerDocument||a,h=XA(h),(x=oi.get(x))&&N0(h,x),C=C.createElement("link"),Rt(C);var D=C;D._p=new Promise(function(P,K){D.onload=P,D.onerror=K}),Fn(C,"link",h),c.instance=C}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=wh.bind(y),a.addEventListener("load",c),a.addEventListener("error",c))}}function PF(){if(Eu===null)throw Error(r(475));var a=Eu;return a.stylesheets&&a.count===0&&A0(a,a.stylesheets),0<a.count?function(c){var h=setTimeout(function(){if(a.stylesheets&&A0(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h)}}:null}function wh(){if(this.count--,this.count===0){if(this.stylesheets)A0(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Sh=null;function A0(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Sh=new Map,c.forEach(IF,a),Sh=null,wh.call(a))}function IF(a,c){if(!(c.state.loading&4)){var h=Sh.get(a);if(h)var y=h.get(null);else{h=new Map,Sh.set(a,h);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<x.length;C++){var D=x[C];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),y=D)}y&&h.set(null,y)}x=c.instance,D=x.getAttribute("data-precedence"),C=h.get(D)||y,C===y&&h.set(null,x),h.set(D,x),this.count++,y=wh.bind(this),x.addEventListener("load",y),x.addEventListener("error",y),C?C.parentNode.insertBefore(x,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),c.state.loading|=4}}var Nu={$$typeof:E,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function BF(a,c,h,y,x,C,D,P){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=y,this.onUncaughtError=x,this.onCaughtError=C,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function tM(a,c,h,y,x,C,D,P,K,se,fe,me){return a=new BF(a,c,h,D,P,K,se,me),c=1,C===!0&&(c|=24),C=Pr(3,null,null,c),a.current=C,C.stateNode=a,c=cy(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:y,isDehydrated:h,cache:c},hy(C),a}function nM(a){return a?(a=ml,a):ml}function rM(a,c,h,y,x,C){x=nM(x),y.context===null?y.context=x:y.pendingContext=x,y=Js(c),y.payload={element:h},C=C===void 0?null:C,C!==null&&(y.callback=C),h=eo(a,y,c),h!==null&&(Vr(h,a,c),nu(h,a,c))}function iM(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function M0(a,c){iM(a,c),(a=a.alternate)&&iM(a,c)}function sM(a){if(a.tag===13){var c=pl(a,67108864);c!==null&&Vr(c,a,67108864),M0(a,67108864)}}var Ch=!0;function zF(a,c,h,y){var x=O.T;O.T=null;var C=V.p;try{V.p=2,_0(a,c,h,y)}finally{V.p=C,O.T=x}}function qF(a,c,h,y){var x=O.T;O.T=null;var C=V.p;try{V.p=8,_0(a,c,h,y)}finally{V.p=C,O.T=x}}function _0(a,c,h,y){if(Ch){var x=D0(y);if(x===null)y0(a,c,y,kh,h),aM(a,y);else if(HF(x,a,c,h,y))y.stopPropagation();else if(aM(a,y),c&4&&-1<VF.indexOf(a)){for(;x!==null;){var C=He(x);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var D=Ue(C.pendingLanes);if(D!==0){var P=C;for(P.pendingLanes|=2,P.entangledLanes|=2;D;){var K=1<<31-At(D);P.entanglements[1]|=K,D&=~K}Yi(C),(vt&6)===0&&(ah=Le()+500,xu(0))}}break;case 13:P=pl(C,2),P!==null&&Vr(P,C,2),ch(),M0(C,2)}if(C=D0(y),C===null&&y0(a,c,y,kh,h),C===x)break;x=C}x!==null&&y.stopPropagation()}else y0(a,c,y,null,h)}}function D0(a){return a=Ic(a),R0(a)}var kh=null;function R0(a){if(kh=null,a=hn(a),a!==null){var c=s(a);if(c===null)a=null;else{var h=c.tag;if(h===13){if(a=o(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return kh=a,null}function oM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gt()){case bt:return 2;case $t:return 8;case un:case zt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var j0=!1,po=null,mo=null,go=null,Tu=new Map,Au=new Map,yo=[],VF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aM(a,c){switch(a){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":mo=null;break;case"mouseover":case"mouseout":go=null;break;case"pointerover":case"pointerout":Tu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(c.pointerId)}}function Mu(a,c,h,y,x,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:C,targetContainers:[x]},c!==null&&(c=He(c),c!==null&&sM(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),a)}function HF(a,c,h,y,x){switch(c){case"focusin":return po=Mu(po,a,c,h,y,x),!0;case"dragenter":return mo=Mu(mo,a,c,h,y,x),!0;case"mouseover":return go=Mu(go,a,c,h,y,x),!0;case"pointerover":var C=x.pointerId;return Tu.set(C,Mu(Tu.get(C)||null,a,c,h,y,x)),!0;case"gotpointercapture":return C=x.pointerId,Au.set(C,Mu(Au.get(C)||null,a,c,h,y,x)),!0}return!1}function lM(a){var c=hn(a.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){a.blockedOn=c,Si(a.priority,function(){if(h.tag===13){var y=qr();y=xt(y);var x=pl(h,y);x!==null&&Vr(x,h,y),M0(h,y)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Eh(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=D0(a.nativeEvent);if(h===null){h=a.nativeEvent;var y=new h.constructor(h.type,h);Pc=y,h.target.dispatchEvent(y),Pc=null}else return c=He(h),c!==null&&sM(c),a.blockedOn=h,!1;c.shift()}return!0}function cM(a,c,h){Eh(a)&&h.delete(c)}function FF(){j0=!1,po!==null&&Eh(po)&&(po=null),mo!==null&&Eh(mo)&&(mo=null),go!==null&&Eh(go)&&(go=null),Tu.forEach(cM),Au.forEach(cM)}function Nh(a,c){a.blockedOn===c&&(a.blockedOn=null,j0||(j0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,FF)))}var Th=null;function uM(a){Th!==a&&(Th=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Th===a&&(Th=null);for(var c=0;c<a.length;c+=3){var h=a[c],y=a[c+1],x=a[c+2];if(typeof y!="function"){if(R0(y||h)===null)continue;break}var C=He(h);C!==null&&(a.splice(c,3),c-=3,Ry(C,{pending:!0,data:x,method:h.method,action:y},y,x))}}))}function _u(a){function c(K){return Nh(K,a)}po!==null&&Nh(po,a),mo!==null&&Nh(mo,a),go!==null&&Nh(go,a),Tu.forEach(c),Au.forEach(c);for(var h=0;h<yo.length;h++){var y=yo[h];y.blockedOn===a&&(y.blockedOn=null)}for(;0<yo.length&&(h=yo[0],h.blockedOn===null);)lM(h),h.blockedOn===null&&yo.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var x=h[y],C=h[y+1],D=x[Lt]||null;if(typeof C=="function")D||uM(h);else if(D){var P=null;if(C&&C.hasAttribute("formAction")){if(x=C,D=C[Lt]||null)P=D.formAction;else if(R0(x)!==null)continue}else P=D.action;typeof P=="function"?h[y+1]=P:(h.splice(y,3),y-=3),uM(h)}}}function O0(a){this._internalRoot=a}Ah.prototype.render=O0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,y=qr();rM(h,y,a,c,null,null)},Ah.prototype.unmount=O0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;rM(a.current,2,null,a,null,null),ch(),c[br]=null}};function Ah(a){this._internalRoot=a}Ah.prototype.unstable_scheduleHydration=function(a){if(a){var c=Gs();a={blockedOn:null,target:a,priority:c};for(var h=0;h<yo.length&&c!==0&&c<yo[h].priority;h++);yo.splice(h,0,a),h===0&&lM(a)}};var dM=t.version;if(dM!=="19.1.1")throw Error(r(527,dM,"19.1.1"));V.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var UF={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{Ot=Mh.inject(UF),dt=Mh}catch{}}return Ru.createRoot=function(a,c){if(!i(a))throw Error(r(299));var h=!1,y="",x=TT,C=AT,D=MT,P=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks)),c=tM(a,1,!1,null,null,h,y,x,C,D,P,null),a[br]=c.current,g0(a),new O0(c)},Ru.hydrateRoot=function(a,c,h){if(!i(a))throw Error(r(299));var y=!1,x="",C=TT,D=AT,P=MT,K=null,se=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(P=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(se=h.formState)),c=tM(a,1,!0,c,h??null,y,x,C,D,P,K,se),c.context=nM(null),h=c.current,y=qr(),y=xt(y),x=Js(y),x.callback=null,eo(h,x,y),h=y,c.current.lanes=h,_r(c,h),Yi(c),a[br]=c.current,g0(a),new Ah(c)},Ru.version="19.1.1",Ru}var wM;function tU(){if(wM)return I0.exports;wM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),I0.exports=eU(),I0.exports}var nU=tU(),rU=dP();const Xd=Kd(rU);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bd.apply(this,arguments)}var _o;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_o||(_o={}));const SM="popstate";function iU(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:l}=r.location;return mC("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hP(i)}return oU(t,n,null,e)}function Mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sU(){return Math.random().toString(36).substr(2,8)}function CM(e,t){return{usr:e.state,key:e.key,idx:t}}function mC(e,t,n,r){return n===void 0&&(n=null),bd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?kc(t):t,{state:n,key:t&&t.key||r||sU()})}function hP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function kc(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oU(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=_o.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(bd({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=_o.Pop;let w=f(),k=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:k})}function g(w,k){l=_o.Push;let T=mC(S.location,w,k);d=f()+1;let E=CM(T,d),N=S.createHref(T);try{o.pushState(E,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(N)}s&&u&&u({action:l,location:S.location,delta:1})}function b(w,k){l=_o.Replace;let T=mC(S.location,w,k);d=f();let E=CM(T,d),N=S.createHref(T);o.replaceState(E,"",N),s&&u&&u({action:l,location:S.location,delta:0})}function v(w){let k=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof w=="string"?w:hP(w);return T=T.replace(/ $/,"%20"),Mn(k,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,k)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(SM,p),u=w,()=>{i.removeEventListener(SM,p),u=null}},createHref(w){return t(i,w)},createURL:v,encodeLocation(w){let k=v(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:b,go(w){return o.go(w)}};return S}var kM;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kM||(kM={}));function aU(e,t,n){return n===void 0&&(n="/"),lU(e,t,n)}function lU(e,t,n,r){let i=typeof t=="string"?kc(t):t,s=gP(i.pathname||"/",n);if(s==null)return null;let o=pP(e);cU(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=wU(s);l=bU(o[u],d)}return l}function pP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Mn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Aa([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(Mn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),pP(s.children,t,f,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:gU(d,s.index),routesMeta:f})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of mP(s.path))i(s,o,u)}),t}function mP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=mP(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function cU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yU(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uU=/^:[\w-]+$/,dU=3,fU=2,hU=1,pU=10,mU=-2,EM=e=>e==="*";function gU(e,t){let n=e.split("/"),r=n.length;return n.some(EM)&&(r+=mU),t&&(r+=fU),n.filter(i=>!EM(i)).reduce((i,s)=>i+(uU.test(s)?dU:s===""?hU:pU),r)}function yU(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function bU(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=xU({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Aa([s,p.pathname]),pathnameBase:TU(Aa([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Aa([s,p.pathnameBase]))}return o}function xU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vU(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:b}=f;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=l[p];return b&&!v?d[g]=void 0:d[g]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function vU(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),fP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wU(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function gP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function SU(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?kc(e):e;return{pathname:n?n.startsWith("/")?n:CU(n,t):t,search:AU(r),hash:MU(i)}}function CU(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function V0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kU(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function EU(e,t){let n=kU(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NU(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=kc(e):(i=bd({},e),Mn(!i.pathname||!i.pathname.includes("?"),V0("?","pathname","search",i)),Mn(!i.pathname||!i.pathname.includes("#"),V0("#","pathname","hash",i)),Mn(!i.search||!i.search.includes("#"),V0("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let u=SU(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Aa=e=>e.join("/").replace(/\/\/+/g,"/"),TU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _U(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const yP=["post","put","patch","delete"];new Set(yP);const DU=["get",...yP];new Set(DU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xd(){return xd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xd.apply(this,arguments)}const Vk=M.createContext(null),RU=M.createContext(null),jm=M.createContext(null),Om=M.createContext(null),Ka=M.createContext({outlet:null,matches:[],isDataRoute:!1}),bP=M.createContext(null);function Lm(){return M.useContext(Om)!=null}function xP(){return Lm()||Mn(!1),M.useContext(Om).location}function vP(e){M.useContext(jm).static||M.useLayoutEffect(e)}function Zd(){let{isDataRoute:e}=M.useContext(Ka);return e?GU():jU()}function jU(){Lm()||Mn(!1);let e=M.useContext(Vk),{basename:t,future:n,navigator:r}=M.useContext(jm),{matches:i}=M.useContext(Ka),{pathname:s}=xP(),o=JSON.stringify(EU(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return vP(()=>{l.current=!0}),M.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=NU(d,JSON.parse(o),s,f.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Aa([t,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[t,r,o,s,e])}function OU(){let{matches:e}=M.useContext(Ka),t=e[e.length-1];return t?t.params:{}}function LU(e,t){return PU(e,t)}function PU(e,t,n,r){Lm()||Mn(!1);let{navigator:i}=M.useContext(jm),{matches:s}=M.useContext(Ka),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=xP(),f;if(t){var p;let w=typeof t=="string"?kc(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||Mn(!1),f=w}else f=d;let g=f.pathname||"/",b=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=aU(e,{pathname:b}),S=VU(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Aa([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Aa([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?M.createElement(Om.Provider,{value:{location:xd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_o.Pop}},S):S}function IU(){let e=$U(),t=_U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:i},n):null,null)}const BU=M.createElement(IU,null);class zU extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?M.createElement(Ka.Provider,{value:this.props.routeContext},M.createElement(bP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qU(e){let{routeContext:t,match:n,children:r}=e,i=M.useContext(Vk);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Ka.Provider,{value:t},r)}function VU(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);f>=0||Mn(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:b}=n,v=p.route.loader&&g[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||v){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let b,v=!1,S=null,w=null;n&&(b=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||BU,u&&(d<0&&g===0?(WU("route-fallback"),v=!0,w=null):d===g&&(v=!0,w=p.route.hydrateFallbackElement||null)));let k=t.concat(o.slice(0,g+1)),T=()=>{let E;return b?E=S:v?E=w:p.route.Component?E=M.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,M.createElement(qU,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(zU,{location:n.location,revalidation:n.revalidation,component:S,error:b,children:T(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):T()},null)}var wP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(wP||{}),SP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(SP||{});function HU(e){let t=M.useContext(Vk);return t||Mn(!1),t}function FU(e){let t=M.useContext(RU);return t||Mn(!1),t}function UU(e){let t=M.useContext(Ka);return t||Mn(!1),t}function CP(e){let t=UU(),n=t.matches[t.matches.length-1];return n.route.id||Mn(!1),n.route.id}function $U(){var e;let t=M.useContext(bP),n=FU(),r=CP();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function GU(){let{router:e}=HU(wP.UseNavigateStable),t=CP(SP.UseNavigateStable),n=M.useRef(!1);return vP(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,xd({fromRouteId:t},s)))},[e,t])}const NM={};function WU(e,t,n){NM[e]||(NM[e]=!0)}function KU(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function ga(e){Mn(!1)}function YU(e){let{basename:t="/",children:n=null,location:r,navigationType:i=_o.Pop,navigator:s,static:o=!1,future:l}=e;Lm()&&Mn(!1);let u=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:u,navigator:s,static:o,future:xd({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=kc(r));let{pathname:f="/",search:p="",hash:g="",state:b=null,key:v="default"}=r,S=M.useMemo(()=>{let w=gP(f,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:b,key:v},navigationType:i}},[u,f,p,g,b,v,i]);return S==null?null:M.createElement(jm.Provider,{value:d},M.createElement(Om.Provider,{children:n,value:S}))}function XU(e){let{children:t,location:n}=e;return LU(gC(t),n)}new Promise(()=>{});function gC(e,t){t===void 0&&(t=[]);let n=[];return M.Children.forEach(e,(r,i)=>{if(!M.isValidElement(r))return;let s=[...t,i];if(r.type===M.Fragment){n.push.apply(n,gC(r.props.children,s));return}r.type!==ga&&Mn(!1),!r.props.index||!r.props.children||Mn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gC(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ZU="6";try{window.__reactRouterVersion=ZU}catch{}const QU="startTransition",TM=XF[QU];function JU(e){let{basename:t,children:n,future:r,window:i}=e,s=M.useRef();s.current==null&&(s.current=iU({window:i,v5Compat:!0}));let o=s.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=M.useCallback(p=>{d&&TM?TM(()=>u(p)):u(p)},[u,d]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.useEffect(()=>KU(r),[r]),M.createElement(YU,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var AM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(AM||(AM={}));var MM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(MM||(MM={}));var kP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},_M=Ce.createContext&&Ce.createContext(kP),e9=["attr","size","title"];function t9(e,t){if(e==null)return{};var n=n9(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function n9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wp.apply(this,arguments)}function DM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DM(Object(n),!0).forEach(function(r){r9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r9(e,t,n){return t=i9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i9(e){var t=s9(e,"string");return typeof t=="symbol"?t:t+""}function s9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EP(e){return e&&e.map((t,n)=>Ce.createElement(t.tag,Sp({key:n},t.attr),EP(t.child)))}function at(e){return t=>Ce.createElement(o9,wp({attr:Sp({},e.attr)},t),EP(e.child))}function o9(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=t9(e,e9),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),Ce.createElement("svg",wp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Sp(Sp({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ce.createElement("title",null,s),e.children)};return _M!==void 0?Ce.createElement(_M.Consumer,null,n=>t(n)):t(kP)}function a9(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function l9(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function Hk(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const c9=e=>e==="system"||e==="light"||e==="dark";function Ya(){const[e,t]=M.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return c9(s)?s:"light"}),[n,r]=M.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return M.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),M.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const Qd=()=>{const{theme:e,setTheme:t}=Ya();return m.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?m.jsx(a9,{size:18}):m.jsx(l9,{size:18})})},Hr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},Jd=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(M.useEffect(()=>{document.title=e||Hr.title;const o=(u,d,f=!1)=>{const p=f?"property":"name";let g=document.querySelector(`meta[${p}="${u}"]`);g?g.content=d:(g=document.createElement("meta"),g.setAttribute(p,u),g.content=d,document.head.appendChild(g))};o("description",t||Hr.description),o("keywords",n||Hr.keywords),o("og:title",e||Hr.title,!0),o("og:description",t||Hr.description,!0),o("og:image",r||Hr.image,!0),o("og:url",i||Hr.url,!0),o("og:type",s,!0),o("twitter:title",e||Hr.title),o("twitter:description",t||Hr.description),o("twitter:image",r||Hr.image),o("twitter:url",i||Hr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||Hr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||Hr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class Fu extends Error{}Fu.prototype.name="InvalidTokenError";function u9(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function d9(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return u9(t)}catch{return atob(t)}}function f9(e,t){if(typeof e!="string")throw new Fu("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Fu(`Invalid token specified: missing part #${n+1}`);let i;try{i=d9(r)}catch(s){throw new Fu(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new Fu(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const yn="https://diagrammatic-api.vercel.app";class h9{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${yn}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${yn}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${yn}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${yn}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${yn}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${yn}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${yn}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${yn}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async getPublicDiagram(t){const n=await fetch(`${yn}/api/v1/diagrams/${t}/public`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${yn}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}async addCollaborator(t,n,r){const i=await fetch(`${yn}/api/v1/diagrams/${t}/share`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({email:n,permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to add collaborator"}));throw new Error(s.message||"Failed to add collaborator")}}async getCollaborators(t){const n=await fetch(`${yn}/api/v1/diagrams/${t}/collaborators`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch collaborators");return n.json()}async updateCollaborator(t,n,r){const i=await fetch(`${yn}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to update collaborator"}));throw new Error(s.message||"Failed to update collaborator")}}async removeCollaborator(t,n){if(!(await fetch(`${yn}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to remove collaborator")}async getAttemptedProblems(){const t=await fetch(`${yn}/api/v1/problems/attempted`,{headers:this.getAuthHeaders()});return t.ok?t.json():[]}async saveAttempt(t){const n=await fetch(`${yn}/api/v1/attempts`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to save attempt"}));throw new Error(r.message||"Failed to save attempt")}return n.json()}async getUserAttempts(){const t=await fetch(`${yn}/api/v1/attempts`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch attempts");return t.json()}async getAttemptByProblem(t){const n=await fetch(`${yn}/api/v1/attempts/problem/${t}`,{headers:this.getAuthHeaders()});if(n.status===404)return null;if(!n.ok)throw new Error("Failed to fetch attempt");return n.json()}async deleteAttempt(t){if(!(await fetch(`${yn}/api/v1/attempts/problem/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete attempt")}async getRecommendations(t){const n={user_intent:t.userIntent?{title:t.userIntent.title,description:t.userIntent.description}:null,canvas_context:{node_count:t.canvasContext.nodeCount,edge_count:t.canvasContext.edgeCount,component_types:t.canvasContext.componentTypes,is_empty:t.canvasContext.isEmpty},components:t.components.map(s=>({id:s.id,type:s.type,label:s.label,has_description:s.hasDescription,properties:s.properties||{}})),connections:t.connections.map(s=>({source:s.source,target:s.target,type:s.type,has_label:s.hasLabel})),max_suggestions:t.maxSuggestions||5},r=await fetch(`${yn}/api/v1/recommendations`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to get recommendations");const i=await r.json();return{recommendations:i.recommendations.map(s=>({id:s.id,title:s.title,description:s.description,icon:s.icon,category:s.category,priority:s.priority,confidence:s.confidence,actionType:s.action_type,componentId:s.component_id,componentIds:s.component_ids,reasoning:s.reasoning})),totalCount:i.total_count,filteredCount:i.filtered_count,minConfidenceThreshold:i.min_confidence_threshold,contextSummary:i.context_summary,processingTimeMs:i.processing_time_ms}}}const Kt=new h9,NP=M.createContext(void 0),p9=({children:e})=>{const[t,n]=M.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=M.useCallback(f=>{try{const p=f9(f);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=M.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);M.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(g=>({...g,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(g=>({...g,isLoading:!1}));return}try{const g=await Kt.getCurrentUser();n({user:g,token:p,isAuthenticated:!0,isLoading:!1})}catch(g){console.error("Failed to fetch user:",g),localStorage.removeItem("auth_token"),n(b=>({...b,isLoading:!1}))}})()},[r]);const s=M.useCallback(async f=>{const{user:p,token:g}=await Kt.login(f);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),o=M.useCallback(async f=>{const{user:p,token:g}=await Kt.signup(f);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),l=M.useCallback(async f=>{const{user:p,token:g}=await Kt.googleLogin(f);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),u=M.useCallback(async()=>{if(t.token)try{const f=await Kt.getCurrentUser();n(p=>({...p,user:f}))}catch(f){console.error("Failed to refresh user:",f),i()}},[t.token,i]),d=M.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return m.jsx(NP.Provider,{value:d,children:e})},Pm=()=>{const e=M.useContext(NP);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Fk=M.createContext({});function Uk(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const $k=typeof window<"u",TP=$k?M.useLayoutEffect:M.useEffect,Im=M.createContext(null);function Gk(e,t){e.indexOf(t)===-1&&e.push(t)}function Wk(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Is=(e,t,n)=>n>t?t:n<e?e:n;let Kk=()=>{};const Bs={},AP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function MP(e){return typeof e=="object"&&e!==null}const _P=e=>/^0[^.\s]+$/u.test(e);function Yk(e){let t;return()=>(t===void 0&&(t=e()),t)}const pi=e=>e,m9=(e,t)=>n=>t(e(n)),ef=(...e)=>e.reduce(m9),vd=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Xk{constructor(){this.subscriptions=[]}add(t){return Gk(this.subscriptions,t),()=>Wk(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const rs=e=>e*1e3,hi=e=>e/1e3;function DP(e,t){return t?e*(1e3/t):0}const RP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,g9=1e-7,y9=12;function b9(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=RP(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>g9&&++l<y9);return o}function tf(e,t,n,r){if(e===t&&n===r)return pi;const i=s=>b9(s,0,1,e,n);return s=>s===0||s===1?s:RP(i(s),t,r)}const jP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,OP=e=>t=>1-e(1-t),LP=tf(.33,1.53,.69,.99),Zk=OP(LP),PP=jP(Zk),IP=e=>(e*=2)<1?.5*Zk(e):.5*(2-Math.pow(2,-10*(e-1))),Qk=e=>1-Math.sin(Math.acos(e)),BP=OP(Qk),zP=jP(Qk),x9=tf(.42,0,1,1),v9=tf(0,0,.58,1),qP=tf(.42,0,.58,1),w9=e=>Array.isArray(e)&&typeof e[0]!="number",VP=e=>Array.isArray(e)&&typeof e[0]=="number",S9={linear:pi,easeIn:x9,easeInOut:qP,easeOut:v9,circIn:Qk,circInOut:zP,circOut:BP,backIn:Zk,backInOut:PP,backOut:LP,anticipate:IP},C9=e=>typeof e=="string",RM=e=>{if(VP(e)){Kk(e.length===4);const[t,n,r,i]=e;return tf(t,n,r,i)}else if(C9(e))return S9[e];return e},Dh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function k9(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(d.schedule(f),e()),f(l)}const d={schedule:(f,p=!1,g=!1)=>{const v=g&&i?n:r;return p&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(l=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(f))}};return d}const E9=40;function HP(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Dh.reduce((E,N)=>(E[N]=k9(s),E),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:f,update:p,preRender:g,render:b,postRender:v}=o,S=()=>{const E=Bs.useManualTiming?i.timestamp:performance.now();n=!1,Bs.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,E9),1)),i.timestamp=E,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),g.process(i),b.process(i),v.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:Dh.reduce((E,N)=>{const A=o[N];return E[N]=(_,j=!1,R=!1)=>(n||w(),A.schedule(_,j,R)),E},{}),cancel:E=>{for(let N=0;N<Dh.length;N++)o[Dh[N]].cancel(E)},state:i,steps:o}}const{schedule:Ht,cancel:qo,state:$n,steps:H0}=HP(typeof requestAnimationFrame<"u"?requestAnimationFrame:pi,!0);let sp;function N9(){sp=void 0}const Cr={now:()=>(sp===void 0&&Cr.set($n.isProcessing||Bs.useManualTiming?$n.timestamp:performance.now()),sp),set:e=>{sp=e,queueMicrotask(N9)}},FP=e=>t=>typeof t=="string"&&t.startsWith(e),Jk=FP("--"),T9=FP("var(--"),eE=e=>T9(e)?A9.test(e.split("/*")[0].trim()):!1,A9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ec={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wd={...Ec,transform:e=>Is(0,1,e)},Rh={...Ec,default:1},ed=e=>Math.round(e*1e5)/1e5,tE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function M9(e){return e==null}const _9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nE=(e,t)=>n=>!!(typeof n=="string"&&_9.test(n)&&n.startsWith(e)||t&&!M9(n)&&Object.prototype.hasOwnProperty.call(n,t)),UP=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(tE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},D9=e=>Is(0,255,e),F0={...Ec,transform:e=>Math.round(D9(e))},wa={test:nE("rgb","red"),parse:UP("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+F0.transform(e)+", "+F0.transform(t)+", "+F0.transform(n)+", "+ed(wd.transform(r))+")"};function R9(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const yC={test:nE("#"),parse:R9,transform:wa.transform},nf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),So=nf("deg"),is=nf("%"),We=nf("px"),j9=nf("vh"),O9=nf("vw"),jM={...is,parse:e=>is.parse(e)/100,transform:e=>is.transform(e*100)},Yl={test:nE("hsl","hue"),parse:UP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+is.transform(ed(t))+", "+is.transform(ed(n))+", "+ed(wd.transform(r))+")"},bn={test:e=>wa.test(e)||yC.test(e)||Yl.test(e),parse:e=>wa.test(e)?wa.parse(e):Yl.test(e)?Yl.parse(e):yC.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?wa.transform(e):Yl.transform(e),getAnimatableNone:e=>{const t=bn.parse(e);return t.alpha=0,bn.transform(t)}},L9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function P9(e){return isNaN(e)&&typeof e=="string"&&(e.match(tE)?.length||0)+(e.match(L9)?.length||0)>0}const $P="number",GP="color",I9="var",B9="var(",OM="${}",z9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sd(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(z9,u=>(bn.test(u)?(r.color.push(s),i.push(GP),n.push(bn.parse(u))):u.startsWith(B9)?(r.var.push(s),i.push(I9),n.push(u)):(r.number.push(s),i.push($P),n.push(parseFloat(u))),++s,OM)).split(OM);return{values:n,split:l,indexes:r,types:i}}function WP(e){return Sd(e).values}function KP(e){const{split:t,types:n}=Sd(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===$P?s+=ed(i[o]):l===GP?s+=bn.transform(i[o]):s+=i[o]}return s}}const q9=e=>typeof e=="number"?0:bn.test(e)?bn.getAnimatableNone(e):e;function V9(e){const t=WP(e);return KP(e)(t.map(q9))}const Vo={test:P9,parse:WP,createTransformer:KP,getAnimatableNone:V9};function U0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function H9({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=U0(u,l,e+1/3),s=U0(u,l,e),o=U0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Cp(e,t){return n=>n>0?t:e}const Xt=(e,t,n)=>e+(t-e)*n,$0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},F9=[yC,wa,Yl],U9=e=>F9.find(t=>t.test(e));function LM(e){const t=U9(e);if(!t)return!1;let n=t.parse(e);return t===Yl&&(n=H9(n)),n}const PM=(e,t)=>{const n=LM(e),r=LM(t);if(!n||!r)return Cp(e,t);const i={...n};return s=>(i.red=$0(n.red,r.red,s),i.green=$0(n.green,r.green,s),i.blue=$0(n.blue,r.blue,s),i.alpha=Xt(n.alpha,r.alpha,s),wa.transform(i))},bC=new Set(["none","hidden"]);function $9(e,t){return bC.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function G9(e,t){return n=>Xt(e,t,n)}function rE(e){return typeof e=="number"?G9:typeof e=="string"?eE(e)?Cp:bn.test(e)?PM:Y9:Array.isArray(e)?YP:typeof e=="object"?bn.test(e)?PM:W9:Cp}function YP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>rE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function W9(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=rE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function K9(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const Y9=(e,t)=>{const n=Vo.createTransformer(t),r=Sd(e),i=Sd(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?bC.has(e)&&!i.values.length||bC.has(t)&&!r.values.length?$9(e,t):ef(YP(K9(r,i),i.values),n):Cp(e,t)};function XP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Xt(e,t,n):rE(e)(e,t)}const X9=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Ht.update(t,n),stop:()=>qo(t),now:()=>$n.isProcessing?$n.timestamp:Cr.now()}},ZP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},kp=2e4;function iE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<kp;)t+=n,r=e.next(t);return t>=kp?1/0:t}function Z9(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(iE(r),kp);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:hi(i)}}const Q9=5;function QP(e,t,n){const r=Math.max(t-Q9,0);return DP(n-e(r),t-r)}const nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},G0=.001;function J9({duration:e=nn.duration,bounce:t=nn.bounce,velocity:n=nn.velocity,mass:r=nn.mass}){let i,s,o=1-t;o=Is(nn.minDamping,nn.maxDamping,o),e=Is(nn.minDuration,nn.maxDuration,hi(e)),o<1?(i=d=>{const f=d*o,p=f*e,g=f-n,b=xC(d,o),v=Math.exp(-p);return G0-g/b*v},s=d=>{const p=d*o*e,g=p*n+n,b=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-p),S=xC(Math.pow(d,2),o);return(-i(d)+G0>0?-1:1)*((g-b)*v)/S}):(i=d=>{const f=Math.exp(-d*e),p=(d-n)*e+1;return-G0+f*p},s=d=>{const f=Math.exp(-d*e),p=(n-d)*(e*e);return f*p});const l=5/e,u=t7(i,s,l);if(e=rs(e),isNaN(u))return{stiffness:nn.stiffness,damping:nn.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const e7=12;function t7(e,t,n){let r=n;for(let i=1;i<e7;i++)r=r-e(r)/t(r);return r}function xC(e,t){return e*Math.sqrt(1-t*t)}const n7=["duration","bounce"],r7=["stiffness","damping","mass"];function IM(e,t){return t.some(n=>e[n]!==void 0)}function i7(e){let t={velocity:nn.velocity,stiffness:nn.stiffness,damping:nn.damping,mass:nn.mass,isResolvedFromDuration:!1,...e};if(!IM(e,r7)&&IM(e,n7))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Is(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:nn.mass,stiffness:i,damping:s}}else{const n=J9(e);t={...t,...n,mass:nn.mass},t.isResolvedFromDuration=!0}return t}function Ep(e=nn.visualDuration,t=nn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:f,duration:p,velocity:g,isResolvedFromDuration:b}=i7({...n,velocity:-hi(n.velocity||0)}),v=g||0,S=d/(2*Math.sqrt(u*f)),w=o-s,k=hi(Math.sqrt(u/f)),T=Math.abs(w)<5;r||(r=T?nn.restSpeed.granular:nn.restSpeed.default),i||(i=T?nn.restDelta.granular:nn.restDelta.default);let E;if(S<1){const A=xC(k,S);E=_=>{const j=Math.exp(-S*k*_);return o-j*((v+S*k*w)/A*Math.sin(A*_)+w*Math.cos(A*_))}}else if(S===1)E=A=>o-Math.exp(-k*A)*(w+(v+k*w)*A);else{const A=k*Math.sqrt(S*S-1);E=_=>{const j=Math.exp(-S*k*_),R=Math.min(A*_,300);return o-j*((v+S*k*w)*Math.sinh(R)+A*w*Math.cosh(R))/A}}const N={calculatedDuration:b&&p||null,next:A=>{const _=E(A);if(b)l.done=A>=p;else{let j=A===0?v:0;S<1&&(j=A===0?rs(v):QP(E,A,_));const R=Math.abs(j)<=r,I=Math.abs(o-_)<=i;l.done=R&&I}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(iE(N),kp),_=ZP(j=>N.next(A*j).value,A,30);return A+"ms "+_},toTransition:()=>{}};return N}Ep.applyToOptions=e=>{const t=Z9(e,100,Ep);return e.ease=t.ease,e.duration=rs(t.duration),e.type="keyframes",e};function vC({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:f}){const p=e[0],g={done:!1,value:p},b=R=>l!==void 0&&R<l||u!==void 0&&R>u,v=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let S=n*t;const w=p+S,k=o===void 0?w:o(w);k!==w&&(S=k-p);const T=R=>-S*Math.exp(-R/r),E=R=>k+T(R),N=R=>{const I=T(R),B=E(R);g.done=Math.abs(I)<=d,g.value=g.done?k:B};let A,_;const j=R=>{b(g.value)&&(A=R,_=Ep({keyframes:[g.value,v(g.value)],velocity:QP(E,R,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:f}))};return j(0),{calculatedDuration:null,next:R=>{let I=!1;return!_&&A===void 0&&(I=!0,N(R),j(R)),A!==void 0&&R>=A?_.next(R-A):(!I&&N(R),g)}}}function s7(e,t,n){const r=[],i=n||Bs.mix||XP,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||pi:t;l=ef(u,l)}r.push(l)}return r}function o7(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Kk(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=s7(t,r,i),u=l.length,d=f=>{if(o&&f<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(f<e[p+1]);p++);const g=vd(e[p],e[p+1],f);return l[p](g)};return n?f=>d(Is(e[0],e[s-1],f)):d}function a7(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=vd(0,t,r);e.push(Xt(n,1,i))}}function l7(e){const t=[0];return a7(t,e.length-1),t}function c7(e,t){return e.map(n=>n*t)}function u7(e,t){return e.map(()=>t||qP).splice(0,e.length-1)}function td({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=w9(r)?r.map(RM):RM(r),s={done:!1,value:t[0]},o=c7(n&&n.length===t.length?n:l7(t),e),l=o7(o,t,{ease:Array.isArray(i)?i:u7(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const d7=e=>e!==null;function sE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(d7),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const f7={decay:vC,inertia:vC,tween:td,keyframes:td,spring:Ep};function JP(e){typeof e.type=="string"&&(e.type=f7[e.type])}class oE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const h7=e=>e/100;class aE extends oE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Cr.now()&&this.tick(Cr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;JP(t);const{type:n=td,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||td;u!==td&&typeof l[0]!="number"&&(this.mixKeyframes=ef(h7,XP(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=iE(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:p,repeatType:g,repeatDelay:b,type:v,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const k=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?k<0:k>i;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=r;if(p){const R=Math.min(this.currentTime,i)/l;let I=Math.floor(R),B=R%1;!B&&R>=1&&(B=1),B===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?(B=1-B,b&&(B-=b/l)):g==="mirror"&&(N=o)),E=Is(0,1,B)*l}const A=T?{done:!1,value:f[0]}:N.next(E);s&&(A.value=s(A.value));let{done:_}=A;!T&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return j&&v!==vC&&(A.value=sE(f,this.options,w,this.speed)),S&&S(A.value),j&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return hi(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hi(t)}get time(){return hi(this.currentTime)}set time(t){t=rs(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Cr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=X9,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function p7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Sa=e=>e*180/Math.PI,wC=e=>{const t=Sa(Math.atan2(e[1],e[0]));return SC(t)},m7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:wC,rotateZ:wC,skewX:e=>Sa(Math.atan(e[1])),skewY:e=>Sa(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},SC=e=>(e=e%360,e<0&&(e+=360),e),BM=wC,zM=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),qM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),g7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zM,scaleY:qM,scale:e=>(zM(e)+qM(e))/2,rotateX:e=>SC(Sa(Math.atan2(e[6],e[5]))),rotateY:e=>SC(Sa(Math.atan2(-e[2],e[0]))),rotateZ:BM,rotate:BM,skewX:e=>Sa(Math.atan(e[4])),skewY:e=>Sa(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function CC(e){return e.includes("scale")?1:0}function kC(e,t){if(!e||e==="none")return CC(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=g7,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=m7,i=l}if(!i)return CC(t);const s=r[t],o=i[1].split(",").map(b7);return typeof s=="function"?s(o):o[s]}const y7=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return kC(n,t)};function b7(e){return parseFloat(e.trim())}const Nc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tc=new Set(Nc),VM=e=>e===Ec||e===We,x7=new Set(["x","y","z"]),v7=Nc.filter(e=>!x7.has(e));function w7(e){const t=[];return v7.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ma={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>kC(t,"x"),y:(e,{transform:t})=>kC(t,"y")};Ma.translateX=Ma.x;Ma.translateY=Ma.y;const _a=new Set;let EC=!1,NC=!1,TC=!1;function eI(){if(NC){const e=Array.from(_a).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=w7(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}NC=!1,EC=!1,_a.forEach(e=>e.complete(TC)),_a.clear()}function tI(){_a.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(NC=!0)})}function S7(){TC=!0,tI(),eI(),TC=!1}class lE{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(_a.add(this),EC||(EC=!0,Ht.read(tI),Ht.resolveKeyframes(eI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}p7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),_a.delete(this)}cancel(){this.state==="scheduled"&&(_a.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C7=e=>e.startsWith("--");function k7(e,t,n){C7(t)?e.style.setProperty(t,n):e.style[t]=n}const E7=Yk(()=>window.ScrollTimeline!==void 0),N7={};function T7(e,t){const n=Yk(e);return()=>N7[t]??n()}const nI=T7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Uu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,HM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uu([0,.65,.55,1]),circOut:Uu([.55,0,1,.45]),backIn:Uu([.31,.01,.66,-.59]),backOut:Uu([.33,1.53,.69,.99])};function rI(e,t){if(e)return typeof e=="function"?nI()?ZP(e,t):"ease-out":VP(e)?Uu(e):Array.isArray(e)?e.map(n=>rI(n,t)||HM.easeOut):HM[e]}function A7(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const f={[t]:n};u&&(f.offset=u);const p=rI(l,i);Array.isArray(p)&&(f.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),e.animate(f,g)}function iI(e){return typeof e=="function"&&"applyToOptions"in e}function M7({type:e,...t}){return iI(e)&&nI()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _7 extends oE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,Kk(typeof t.type!="string");const d=M7(t);this.animation=A7(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=sE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):k7(n,r,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return hi(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hi(t)}get time(){return hi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=rs(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&E7()?(this.animation.timeline=t,pi):n(this)}}const sI={anticipate:IP,backInOut:PP,circInOut:zP};function D7(e){return e in sI}function R7(e){typeof e.ease=="string"&&D7(e.ease)&&(e.ease=sI[e.ease])}const FM=10;class j7 extends _7{constructor(t){R7(t),JP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new aE({...o,autoplay:!1}),u=rs(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-FM).value,l.sample(u).value,FM),l.stop()}}const UM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vo.test(e)||e==="0")&&!e.startsWith("url("));function O7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function L7(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=UM(i,t),l=UM(s,t);return!o||!l?!1:O7(e)||(n==="spring"||iI(n))&&r}function AC(e){e.duration=0,e.type="keyframes"}const P7=new Set(["opacity","clipPath","filter","transform"]),I7=Yk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function B7(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return I7()&&n&&P7.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const z7=40;class q7 extends oE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cr.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:f,...p},b=f?.KeyframeResolver||lE;this.keyframeResolver=new b(l,(v,S,w)=>this.onKeyframesResolved(v,S,g,!w),u,d,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:f}=r;this.resolvedAt=Cr.now(),L7(t,s,o,l)||((Bs.instantAnimations||!u)&&f?.(sE(t,r,n)),t[0]=t[t.length-1],AC(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>z7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},b=!d&&B7(g)?new j7({...g,element:g.motionValue.owner.current}):new aE(g);b.finished.then(()=>this.notifyFinished()).catch(pi),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),S7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const V7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function H7(e){const t=V7.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function oI(e,t,n=1){const[r,i]=H7(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return AP(o)?parseFloat(o):o}return eE(i)?oI(i,t,n+1):i}function cE(e,t){return e?.[t]??e?.default??e}const aI=new Set(["width","height","top","left","right","bottom",...Nc]),F7={test:e=>e==="auto",parse:e=>e},lI=e=>t=>t.test(e),cI=[Ec,We,is,So,O9,j9,F7],$M=e=>cI.find(lI(e));function U7(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||_P(e):!0}const $7=new Set(["brightness","contrast","saturate","opacity"]);function G7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(tE)||[];if(!r)return e;const i=n.replace(r,"");let s=$7.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const W7=/\b([a-z-]*)\(.*?\)/gu,MC={...Vo,getAnimatableNone:e=>{const t=e.match(W7);return t?t.map(G7).join(" "):e}},GM={...Ec,transform:Math.round},K7={rotate:So,rotateX:So,rotateY:So,rotateZ:So,scale:Rh,scaleX:Rh,scaleY:Rh,scaleZ:Rh,skew:So,skewX:So,skewY:So,distance:We,translateX:We,translateY:We,translateZ:We,x:We,y:We,z:We,perspective:We,transformPerspective:We,opacity:wd,originX:jM,originY:jM,originZ:We},uE={borderWidth:We,borderTopWidth:We,borderRightWidth:We,borderBottomWidth:We,borderLeftWidth:We,borderRadius:We,radius:We,borderTopLeftRadius:We,borderTopRightRadius:We,borderBottomRightRadius:We,borderBottomLeftRadius:We,width:We,maxWidth:We,height:We,maxHeight:We,top:We,right:We,bottom:We,left:We,padding:We,paddingTop:We,paddingRight:We,paddingBottom:We,paddingLeft:We,margin:We,marginTop:We,marginRight:We,marginBottom:We,marginLeft:We,backgroundPositionX:We,backgroundPositionY:We,...K7,zIndex:GM,fillOpacity:wd,strokeOpacity:wd,numOctaves:GM},Y7={...uE,color:bn,backgroundColor:bn,outlineColor:bn,fill:bn,stroke:bn,borderColor:bn,borderTopColor:bn,borderRightColor:bn,borderBottomColor:bn,borderLeftColor:bn,filter:MC,WebkitFilter:MC},uI=e=>Y7[e];function dI(e,t){let n=uI(e);return n!==MC&&(n=Vo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const X7=new Set(["auto","none","0"]);function Z7(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!X7.has(s)&&Sd(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=dI(n,i)}class Q7 extends lE{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),eE(d))){const f=oI(d,n.current);f!==void 0&&(t[u]=f),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!aI.has(r)||t.length!==2)return;const[i,s]=t,o=$M(i),l=$M(s);if(o!==l)if(VM(o)&&VM(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Ma[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||U7(t[i]))&&r.push(i);r.length&&Z7(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ma[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Ma[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function J7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const fI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function hI(e){return MP(e)&&"offsetHeight"in e}const WM=30,e$=e=>!isNaN(parseFloat(e));class t${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Cr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Cr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=e$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Xk);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>WM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,WM);return DP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lc(e,t){return new t$(e,t)}const{schedule:dE}=HP(queueMicrotask,!1),Ti={x:!1,y:!1};function pI(){return Ti.x||Ti.y}function n$(e){return e==="x"||e==="y"?Ti[e]?null:(Ti[e]=!0,()=>{Ti[e]=!1}):Ti.x||Ti.y?null:(Ti.x=Ti.y=!0,()=>{Ti.x=Ti.y=!1})}function mI(e,t){const n=J7(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function KM(e){return!(e.pointerType==="touch"||pI())}function r$(e,t,n={}){const[r,i,s]=mI(e,n),o=l=>{if(!KM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const f=p=>{KM(p)&&(d(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const gI=(e,t)=>t?e===t?!0:gI(e,t.parentElement):!1,fE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,i$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function s$(e){return i$.has(e.tagName)||e.tabIndex!==-1}const op=new WeakSet;function YM(e){return t=>{t.key==="Enter"&&e(t)}}function W0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const o$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=YM(()=>{if(op.has(n))return;W0(n,"down");const i=YM(()=>{W0(n,"up")}),s=()=>W0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function XM(e){return fE(e)&&!pI()}function a$(e,t,n={}){const[r,i,s]=mI(e,n),o=l=>{const u=l.currentTarget;if(!XM(l))return;op.add(u);const d=t(u,l),f=(b,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),op.has(u)&&op.delete(u),XM(b)&&typeof d=="function"&&d(b,{success:v})},p=b=>{f(b,u===window||u===document||n.useGlobalTarget||gI(u,b.target))},g=b=>{f(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),hI(l)&&(l.addEventListener("focus",d=>o$(d,i)),!s$(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function yI(e){return MP(e)&&"ownerSVGElement"in e}function l$(e){return yI(e)&&e.tagName==="svg"}const nr=e=>!!(e&&e.getVelocity),c$=[...cI,bn,Vo],u$=e=>c$.find(lI(e)),hE=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function ZM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function d$(...e){return t=>{let n=!1;const r=e.map(i=>{const s=ZM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():ZM(e[i],null)}}}}function f$(...e){return M.useCallback(d$(...e),e)}class h$ extends M.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=hI(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p$({children:e,isPresent:t,anchorX:n,root:r}){const i=M.useId(),s=M.useRef(null),o=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=M.useContext(hE),u=f$(s,e?.ref);return M.useInsertionEffect(()=>{const{width:d,height:f,top:p,left:g,right:b}=o.current;if(t||!s.current||!d||!f)return;const v=n==="left"?`left: ${g}`:`right: ${b}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${v}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),m.jsx(h$,{isPresent:t,childRef:s,sizeRef:o,children:M.cloneElement(e,{ref:u})})}const m$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=Uk(g$),f=M.useId();let p=!0,g=M.useMemo(()=>(p=!1,{id:f,initial:t,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const v of d.values())if(!v)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return s&&p&&(g={...g}),M.useMemo(()=>{d.forEach((b,v)=>d.set(v,!1))},[n]),M.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=m.jsx(p$,{isPresent:n,anchorX:l,root:u,children:e})),m.jsx(Im.Provider,{value:g,children:e})};function g$(){return new Map}function bI(e=!0){const t=M.useContext(Im);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=M.useId();M.useEffect(()=>{if(e)return i(s)},[e]);const o=M.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const jh=e=>e.key||"";function QM(e){const t=[];return M.Children.forEach(e,n=>{M.isValidElement(n)&&t.push(n)}),t}const cc=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,f]=bI(o),p=M.useMemo(()=>QM(e),[e]),g=o&&!d?[]:p.map(jh),b=M.useRef(!0),v=M.useRef(p),S=Uk(()=>new Map),[w,k]=M.useState(p),[T,E]=M.useState(p);TP(()=>{b.current=!1,v.current=p;for(let _=0;_<T.length;_++){const j=jh(T[_]);g.includes(j)?S.delete(j):S.get(j)!==!0&&S.set(j,!1)}},[T,g.length,g.join("-")]);const N=[];if(p!==w){let _=[...p];for(let j=0;j<T.length;j++){const R=T[j],I=jh(R);g.includes(I)||(_.splice(j,0,R),N.push(R))}return s==="wait"&&N.length&&(_=N),E(QM(_)),k(p),null}const{forceRender:A}=M.useContext(Fk);return m.jsx(m.Fragment,{children:T.map(_=>{const j=jh(_),R=o&&!d?!1:p===T||g.includes(j),I=()=>{if(S.has(j))S.set(j,!0);else return;let B=!0;S.forEach(U=>{U||(B=!1)}),B&&(A?.(),E(v.current),o&&f?.(),r&&r())};return m.jsx(m$,{isPresent:R,initial:!b.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:I,anchorX:l,children:_},j)})})},xI=M.createContext({strict:!1}),JM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uc={};for(const e in JM)uc[e]={isEnabled:t=>JM[e].some(n=>!!t[n])};function y$(e){for(const t in e)uc[t]={...uc[t],...e[t]}}const b$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Np(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||b$.has(e)}let vI=e=>!Np(e);function x$(e){typeof e=="function"&&(vI=t=>t.startsWith("on")?!Np(t):e(t))}try{x$(require("@emotion/is-prop-valid").default)}catch{}function v$(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(vI(i)||n===!0&&Np(i)||!t&&!Np(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Bm=M.createContext({});function zm(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Cd(e){return typeof e=="string"||Array.isArray(e)}const pE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mE=["initial",...pE];function qm(e){return zm(e.animate)||mE.some(t=>Cd(e[t]))}function wI(e){return!!(qm(e)||e.variants)}function w$(e,t){if(qm(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Cd(n)?n:void 0,animate:Cd(r)?r:void 0}}return e.inherit!==!1?t:{}}function S$(e){const{initial:t,animate:n}=w$(e,M.useContext(Bm));return M.useMemo(()=>({initial:t,animate:n}),[e_(t),e_(n)])}function e_(e){return Array.isArray(e)?e.join(" "):e}const kd={};function C$(e){for(const t in e)kd[t]=e[t],Jk(t)&&(kd[t].isCSSVariable=!0)}function SI(e,{layout:t,layoutId:n}){return Tc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!kd[e]||e==="opacity")}const k$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E$=Nc.length;function N$(e,t,n){let r="",i=!0;for(let s=0;s<E$;s++){const o=Nc[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=fI(l,uE[o]);if(!u){i=!1;const f=k$[o]||o;r+=`${f}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function gE(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Tc.has(u)){o=!0;continue}else if(Jk(u)){i[u]=d;continue}else{const f=fI(d,uE[u]);u.startsWith("origin")?(l=!0,s[u]=f):r[u]=f}}if(t.transform||(o||n?r.transform=N$(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${d} ${f}`}}const yE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function CI(e,t,n){for(const r in t)!nr(t[r])&&!SI(r,n)&&(e[r]=t[r])}function T$({transformTemplate:e},t){return M.useMemo(()=>{const n=yE();return gE(n,t,e),Object.assign({},n.vars,n.style)},[t])}function A$(e,t){const n=e.style||{},r={};return CI(r,n,e),Object.assign(r,T$(e,t)),r}function M$(e,t){const n={},r=A$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const _$={offset:"stroke-dashoffset",array:"stroke-dasharray"},D$={offset:"strokeDashoffset",array:"strokeDasharray"};function R$(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?_$:D$;e[s.offset]=We.transform(-r);const o=We.transform(t),l=We.transform(n);e[s.array]=`${o} ${l}`}function kI(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,f){if(gE(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=f?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&R$(p,i,s,o,!1)}const EI=()=>({...yE(),attrs:{}}),NI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function j$(e,t,n,r){const i=M.useMemo(()=>{const s=EI();return kI(s,t,NI(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};CI(s,e.style,e),i.style={...s,...i.style}}return i}const O$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bE(e){return typeof e!="string"||e.includes("-")?!1:!!(O$.indexOf(e)>-1||/[A-Z]/u.test(e))}function L$(e,t,n,{latestValues:r},i,s=!1){const l=(bE(e)?j$:M$)(t,r,i,e),u=v$(t,typeof e=="string",s),d=e!==M.Fragment?{...u,...l,ref:n}:{},{children:f}=t,p=M.useMemo(()=>nr(f)?f.get():f,[f]);return M.createElement(e,{...d,children:p})}function t_(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function xE(e,t,n,r){if(typeof t=="function"){const[i,s]=t_(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=t_(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function ap(e){return nr(e)?e.get():e}function P$({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:I$(n,r,i,e),renderState:t()}}function I$(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=ap(s[g]);let{initial:o,animate:l}=e;const u=qm(e),d=wI(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const p=f?l:o;if(p&&typeof p!="boolean"&&!zm(p)){const g=Array.isArray(p)?p:[p];for(let b=0;b<g.length;b++){const v=xE(e,g[b]);if(v){const{transitionEnd:S,transition:w,...k}=v;for(const T in k){let E=k[T];if(Array.isArray(E)){const N=f?E.length-1:0;E=E[N]}E!==null&&(i[T]=E)}for(const T in S)i[T]=S[T]}}}return i}const TI=e=>(t,n)=>{const r=M.useContext(Bm),i=M.useContext(Im),s=()=>P$(e,t,r,i);return n?s():Uk(s)};function vE(e,t,n){const{style:r}=e,i={};for(const s in r)(nr(r[s])||t.style&&nr(t.style[s])||SI(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const B$=TI({scrapeMotionValuesFromProps:vE,createRenderState:yE});function AI(e,t,n){const r=vE(e,t,n);for(const i in e)if(nr(e[i])||nr(t[i])){const s=Nc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const z$=TI({scrapeMotionValuesFromProps:AI,createRenderState:EI}),q$=Symbol.for("motionComponentSymbol");function Xl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function V$(e,t,n){return M.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xl(n)&&(n.current=r))},[t])}const wE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H$="framerAppearId",MI="data-"+wE(H$),_I=M.createContext({});function F$(e,t,n,r,i){const{visualElement:s}=M.useContext(Bm),o=M.useContext(xI),l=M.useContext(Im),u=M.useContext(hE).reducedMotion,d=M.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,p=M.useContext(_I);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&U$(d.current,n,i,p);const g=M.useRef(!1);M.useInsertionEffect(()=>{f&&g.current&&f.update(n,l)});const b=n[MI],v=M.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return TP(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),v.current&&f.animationState&&f.animationState.animateChanges())}),M.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),v.current=!1),f.enteringChildren=void 0)}),f}function U$(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:DI(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Xl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:d})}function DI(e){if(e)return e.options.allowProjection!==!1?e.projection:DI(e.parent)}function K0(e,{forwardMotionProps:t=!1}={},n,r){n&&y$(n);const i=bE(e)?z$:B$;function s(l,u){let d;const f={...M.useContext(hE),...l,layoutId:$$(l)},{isStatic:p}=f,g=S$(l),b=i(l,p);if(!p&&$k){G$();const v=W$(f);d=v.MeasureLayout,g.visualElement=F$(e,b,f,r,v.ProjectionNode)}return m.jsxs(Bm.Provider,{value:g,children:[d&&g.visualElement?m.jsx(d,{visualElement:g.visualElement,...f}):null,L$(e,l,V$(b,g.visualElement,u),b,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=M.forwardRef(s);return o[q$]=e,o}function $$({layoutId:e}){const t=M.useContext(Fk).id;return t&&e!==void 0?t+"-"+e:e}function G$(e,t){M.useContext(xI).strict}function W$(e){const{drag:t,layout:n}=uc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function K$(e,t){if(typeof Proxy>"u")return K0;const n=new Map,r=(s,o)=>K0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,K0(o,void 0,e,t)),n.get(o))})}function RI({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Y$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function X$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Y0(e){return e===void 0||e===1}function _C({scale:e,scaleX:t,scaleY:n}){return!Y0(e)||!Y0(t)||!Y0(n)}function ya(e){return _C(e)||jI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function jI(e){return n_(e.x)||n_(e.y)}function n_(e){return e&&e!=="0%"}function Tp(e,t,n){const r=e-n,i=t*r;return n+i}function r_(e,t,n,r,i){return i!==void 0&&(e=Tp(e,i,r)),Tp(e,n,r)+t}function DC(e,t=0,n=1,r,i){e.min=r_(e.min,t,n,r,i),e.max=r_(e.max,t,n,r,i)}function OI(e,{x:t,y:n}){DC(e.x,t.translate,t.scale,t.originPoint),DC(e.y,n.translate,n.scale,n.originPoint)}const i_=.999999999999,s_=1.0000000000001;function Z$(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ql(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,OI(e,o)),r&&ya(s.latestValues)&&Ql(e,s.latestValues))}t.x<s_&&t.x>i_&&(t.x=1),t.y<s_&&t.y>i_&&(t.y=1)}function Zl(e,t){e.min=e.min+t,e.max=e.max+t}function o_(e,t,n,r,i=.5){const s=Xt(e.min,e.max,i);DC(e,t,n,s,r)}function Ql(e,t){o_(e.x,t.x,t.scaleX,t.scale,t.originX),o_(e.y,t.y,t.scaleY,t.scale,t.originY)}function LI(e,t){return RI(X$(e.getBoundingClientRect(),t))}function Q$(e,t,n){const r=LI(e,n),{scroll:i}=t;return i&&(Zl(r.x,i.offset.x),Zl(r.y,i.offset.y)),r}const a_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jl=()=>({x:a_(),y:a_()}),l_=()=>({min:0,max:0}),ln=()=>({x:l_(),y:l_()}),RC={current:null},PI={current:!1};function J$(){if(PI.current=!0,!!$k)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>RC.current=e.matches;e.addEventListener("change",t),t()}else RC.current=!1}const eG=new WeakMap;function tG(e,t,n){for(const r in t){const i=t[r],s=n[r];if(nr(i))e.addValue(r,i);else if(nr(s))e.addValue(r,lc(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,lc(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const c_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nG{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Cr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Ht.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=qm(n),this.isVariantNode=wI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const b=p[g];u[g]!==void 0&&nr(b)&&b.set(u[g])}}mount(t){this.current=t,eG.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),PI.current||J$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:RC.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),qo(this.notifyUpdate),qo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Tc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in uc){const n=uc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<c_.length;r++){const i=c_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=tG(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=lc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(AP(r)||_P(r))?r=parseFloat(r):!u$(r)&&Vo.test(n)&&(r=dI(t,n)),this.setBaseTarget(t,nr(r)?r.get():r)),nr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=xE(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!nr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Xk),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){dE.render(this.render)}}class II extends nG{constructor(){super(...arguments),this.KeyframeResolver=Q7}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function BI(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function rG(e){return window.getComputedStyle(e)}class iG extends II{constructor(){super(...arguments),this.type="html",this.renderInstance=BI}readValueFromInstance(t,n){if(Tc.has(n))return this.projection?.isProjecting?CC(n):y7(t,n);{const r=rG(t),i=(Jk(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return LI(t,n)}build(t,n,r){gE(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return vE(t,n,r)}}const zI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sG(e,t,n,r){BI(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(zI.has(i)?i:wE(i),t.attrs[i])}class oG extends II{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Tc.has(n)){const r=uI(n);return r&&r.default||0}return n=zI.has(n)?n:wE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return AI(t,n,r)}build(t,n,r){kI(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){sG(t,n,r,i)}mount(t){this.isSVGTag=NI(t.tagName),super.mount(t)}}const aG=(e,t)=>bE(e)?new oG(t):new iG(t,{allowProjection:e!==M.Fragment});function rc(e,t,n){const r=e.getProps();return xE(r,t,n!==void 0?n:r.custom,e)}const jC=e=>Array.isArray(e);function lG(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,lc(n))}function cG(e){return jC(e)?e[e.length-1]||0:e}function uG(e,t){const n=rc(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=cG(s[o]);lG(e,o,l)}}function dG(e){return!!(nr(e)&&e.add)}function OC(e,t){const n=e.getValue("willChange");if(dG(n))return n.add(t);if(!n&&Bs.WillChange){const r=new Bs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function qI(e){return e.props[MI]}const fG=e=>e!==null;function hG(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(fG),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const pG={type:"spring",stiffness:500,damping:25,restSpeed:10},mG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),gG={type:"keyframes",duration:.8},yG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bG=(e,{keyframes:t})=>t.length>2?gG:Tc.has(e)?e.startsWith("scale")?mG(t[1]):pG:yG;function xG({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const SE=(e,t,n,r={},i,s)=>o=>{const l=cE(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-rs(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};xG(l)||Object.assign(f,bG(e,f)),f.duration&&(f.duration=rs(f.duration)),f.repeatDelay&&(f.repeatDelay=rs(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(AC(f),f.delay===0&&(p=!0)),(Bs.instantAnimations||Bs.skipAnimations)&&(p=!0,AC(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=hG(f.keyframes,l);if(g!==void 0){Ht.update(()=>{f.onUpdate(g),f.onComplete()});return}}return l.isSync?new aE(f):new q7(f)};function vG({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function VI(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const f in l){const p=e.getValue(f,e.latestValues[f]??null),g=l[f];if(g===void 0||d&&vG(d,f))continue;const b={delay:n,...cE(s||{},f)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===v&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const k=qI(e);if(k){const T=window.MotionHandoffAnimation(k,f,Ht);T!==null&&(b.startTime=T,S=!0)}}OC(e,f),p.start(SE(f,p,g,e.shouldReduceMotion&&aI.has(f)?{type:!1}:b,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{Ht.update(()=>{o&&uG(e,o)})}),u}function HI(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,f)=>d.sortNodePosition(f)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function LC(e,t,n={}){const r=rc(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(VI(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=i;return wG(e,t,u,d,f,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function wG(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(LC(u,t,{...o,delay:n+(typeof r=="function"?0:r)+HI(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function SG(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>LC(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=LC(e,t,n);else{const i=typeof t=="function"?rc(e,t,n.custom):t;r=Promise.all(VI(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function FI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const CG=mE.length;function UI(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?UI(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<CG;n++){const r=mE[n],i=e.props[r];(Cd(i)||i===!1)&&(t[r]=i)}return t}const kG=[...pE].reverse(),EG=pE.length;function NG(e){return t=>Promise.all(t.map(({animation:n,options:r})=>SG(e,n,r)))}function TG(e){let t=NG(e),n=u_(),r=!0;const i=u=>(d,f)=>{const p=rc(e,f,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:b,...v}=p;d={...d,...v,...b}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,f=UI(e.parent)||{},p=[],g=new Set;let b={},v=1/0;for(let w=0;w<EG;w++){const k=kG[w],T=n[k],E=d[k]!==void 0?d[k]:f[k],N=Cd(E),A=k===u?T.isActive:null;A===!1&&(v=w);let _=E===f[k]&&E!==d[k]&&N;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...b},!T.isActive&&A===null||!E&&!T.prevProp||zm(E)||typeof E=="boolean")continue;const j=AG(T.prevProp,E);let R=j||k===u&&T.isActive&&!_&&N||w>v&&N,I=!1;const B=Array.isArray(E)?E:[E];let U=B.reduce(i(k),{});A===!1&&(U={});const{prevResolvedValues:q={}}=T,F={...q,...U},L=V=>{R=!0,g.has(V)&&(I=!0,g.delete(V)),T.needsAnimating[V]=!0;const Y=e.getValue(V);Y&&(Y.liveStyle=!1)};for(const V in F){const Y=U[V],te=q[V];if(b.hasOwnProperty(V))continue;let z=!1;jC(Y)&&jC(te)?z=!FI(Y,te):z=Y!==te,z?Y!=null?L(V):g.add(V):Y!==void 0&&g.has(V)?L(V):T.protectedKeys[V]=!0}T.prevProp=E,T.prevResolvedValues=U,T.isActive&&(b={...b,...U}),r&&e.blockInitialAnimation&&(R=!1);const H=_&&j;R&&(!H||I)&&p.push(...B.map(V=>{const Y={type:k};if(typeof V=="string"&&r&&!H&&e.manuallyAnimateOnMount&&e.parent){const{parent:te}=e,z=rc(te,V);if(te.enteringChildren&&z){const{delayChildren:W}=z.transition||{};Y.delay=HI(te.enteringChildren,e,W)}}return{animation:V,options:Y}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const k=rc(e,Array.isArray(d.initial)?d.initial[0]:d.initial);k&&k.transition&&(w.transition=k.transition)}g.forEach(k=>{const T=e.getBaseTarget(k),E=e.getValue(k);E&&(E.liveStyle=!0),w[k]=T??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const f=o(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=u_(),r=!0}}}function AG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!FI(t,e):!1}function pa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function u_(){return{animate:pa(!0),whileInView:pa(),whileHover:pa(),whileTap:pa(),whileDrag:pa(),whileFocus:pa(),exit:pa()}}class Uo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class MG extends Uo{constructor(t){super(t),t.animationState||(t.animationState=TG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();zm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let _G=0;class DG extends Uo{constructor(){super(...arguments),this.id=_G++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const RG={animation:{Feature:MG},exit:{Feature:DG}};function Ed(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function rf(e){return{point:{x:e.pageX,y:e.pageY}}}const jG=e=>t=>fE(t)&&e(t,rf(t));function nd(e,t,n,r){return Ed(e,t,jG(n),r)}const $I=1e-4,OG=1-$I,LG=1+$I,GI=.01,PG=0-GI,IG=0+GI;function ur(e){return e.max-e.min}function BG(e,t,n){return Math.abs(e-t)<=n}function d_(e,t,n,r=.5){e.origin=r,e.originPoint=Xt(t.min,t.max,e.origin),e.scale=ur(n)/ur(t),e.translate=Xt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=OG&&e.scale<=LG||isNaN(e.scale))&&(e.scale=1),(e.translate>=PG&&e.translate<=IG||isNaN(e.translate))&&(e.translate=0)}function rd(e,t,n,r){d_(e.x,t.x,n.x,r?r.originX:void 0),d_(e.y,t.y,n.y,r?r.originY:void 0)}function f_(e,t,n){e.min=n.min+t.min,e.max=e.min+ur(t)}function zG(e,t,n){f_(e.x,t.x,n.x),f_(e.y,t.y,n.y)}function h_(e,t,n){e.min=t.min-n.min,e.max=e.min+ur(t)}function id(e,t,n){h_(e.x,t.x,n.x),h_(e.y,t.y,n.y)}function ci(e){return[e("x"),e("y")]}const WI=({current:e})=>e?e.ownerDocument.defaultView:null,p_=(e,t)=>Math.abs(e-t);function qG(e,t){const n=p_(e.x,t.x),r=p_(e.y,t.y);return Math.sqrt(n**2+r**2)}class KI{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Z0(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,v=qG(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!v)return;const{point:S}=g,{timestamp:w}=$n;this.history.push({...S,timestamp:w});const{onStart:k,onMove:T}=this.handlers;b||(k&&k(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=X0(b,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:v,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Z0(g.type==="pointercancel"?this.lastMoveEventInfo:X0(b,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,k),S&&S(g,k)},!fE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=rf(t),u=X0(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=$n;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(t,Z0(u,this.history)),this.removeListeners=ef(nd(this.contextWindow,"pointermove",this.handlePointerMove),nd(this.contextWindow,"pointerup",this.handlePointerUp),nd(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qo(this.updatePoint)}}function X0(e,t){return t?{point:t(e.point)}:e}function m_(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Z0({point:e},t){return{point:e,delta:m_(e,YI(t)),offset:m_(e,VG(t)),velocity:HG(t,.1)}}function VG(e){return e[0]}function YI(e){return e[e.length-1]}function HG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=YI(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>rs(t)));)n--;if(!r)return{x:0,y:0};const s=hi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function FG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Xt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Xt(n,e,r.max):Math.min(e,n)),e}function g_(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function UG(e,{top:t,left:n,bottom:r,right:i}){return{x:g_(e.x,n,i),y:g_(e.y,t,r)}}function y_(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function $G(e,t){return{x:y_(e.x,t.x),y:y_(e.y,t.y)}}function GG(e,t){let n=.5;const r=ur(e),i=ur(t);return i>r?n=vd(t.min,t.max-r,e.min):r>i&&(n=vd(e.min,e.max-i,t.min)),Is(0,1,n)}function WG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const PC=.35;function KG(e=PC){return e===!1?e=0:e===!0&&(e=PC),{x:b_(e,"left","right"),y:b_(e,"top","bottom")}}function b_(e,t,n){return{min:x_(e,t),max:x_(e,n)}}function x_(e,t){return typeof e=="number"?e:e[t]||0}const YG=new WeakMap;class XG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(rf(p).point)},o=(p,g)=>{const{drag:b,dragPropagation:v,onDragStart:S}=this.getProps();if(b&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n$(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ci(k=>{let T=this.getAxisMotionValue(k).get()||0;if(is.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[k];N&&(T=ur(N)*(parseFloat(T)/100))}}this.originPoint[k]=T}),S&&Ht.postRender(()=>S(p,g)),OC(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:b,dragDirectionLock:v,onDirectionLock:S,onDrag:w}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:k}=g;if(v&&this.currentDirection===null){this.currentDirection=ZG(k),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,k),this.updateAxis("y",g.point,k),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ci(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new KI(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:WI(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ht.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Oh(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=FG(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Xl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=UG(r.layoutBox,t):this.constraints=!1,this.elastic=KG(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ci(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=WG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Q$(r,i.root,this.visualElement.getTransformPagePoint());let o=$G(i.layout.layoutBox,s);if(n){const l=n(Y$(o));this.hasMutatedConstraints=!!l,l&&(o=RI(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=ci(f=>{if(!Oh(f,n,this.currentDirection))return;let p=u&&u[f]||{};o&&(p={min:0,max:0});const g=i?200:1e6,b=i?40:1e7,v={type:"inertia",velocity:r?t[f]:0,bounceStiffness:g,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return OC(this.visualElement,t),r.start(SE(t,r,0,n,this.visualElement,!1))}stopAnimation(){ci(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ci(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ci(n=>{const{drag:r}=this.getProps();if(!Oh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-Xt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ci(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=GG({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ci(o=>{if(!Oh(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Xt(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;YG.set(this.visualElement,this);const t=this.visualElement.current,n=nd(t,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Xl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ht.read(r);const o=Ed(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ci(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=PC,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Oh(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ZG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class QG extends Uo{constructor(t){super(t),this.removeGroupControls=pi,this.removeListeners=pi,this.controls=new XG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pi}unmount(){this.removeGroupControls(),this.removeListeners()}}const v_=e=>(t,n)=>{e&&Ht.postRender(()=>e(t,n))};class JG extends Uo{constructor(){super(...arguments),this.removePointerDownListener=pi}onPointerDown(t){this.session=new KI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:v_(t),onStart:v_(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ht.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=nd(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function w_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ju={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(We.test(e))e=parseFloat(e);else return e;const n=w_(e,t.target.x),r=w_(e,t.target.y);return`${n}% ${r}%`}},eW={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Vo.parse(e);if(i.length>5)return r;const s=Vo.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=Xt(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let Q0=!1;class tW extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;C$(nW),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Q0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),lp.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Q0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Ht.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),dE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;Q0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function XI(e){const[t,n]=bI(),r=M.useContext(Fk);return m.jsx(tW,{...e,layoutGroup:r,switchLayoutGroup:M.useContext(_I),isPresent:t,safeToRemove:n})}const nW={borderRadius:{...ju,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ju,borderTopRightRadius:ju,borderBottomLeftRadius:ju,borderBottomRightRadius:ju,boxShadow:eW};function rW(e,t,n){const r=nr(e)?e:lc(e);return r.start(SE("",r,t,n)),r.animation}const iW=(e,t)=>e.depth-t.depth;class sW{constructor(){this.children=[],this.isDirty=!1}add(t){Gk(this.children,t),this.isDirty=!0}remove(t){Wk(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iW),this.isDirty=!1,this.children.forEach(t)}}function oW(e,t){const n=Cr.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(qo(r),e(s-t))};return Ht.setup(r,!0),()=>qo(r)}const ZI=["TopLeft","TopRight","BottomLeft","BottomRight"],aW=ZI.length,S_=e=>typeof e=="string"?parseFloat(e):e,C_=e=>typeof e=="number"||We.test(e);function lW(e,t,n,r,i,s){i?(e.opacity=Xt(0,n.opacity??1,cW(r)),e.opacityExit=Xt(t.opacity??1,0,uW(r))):s&&(e.opacity=Xt(t.opacity??1,n.opacity??1,r));for(let o=0;o<aW;o++){const l=`border${ZI[o]}Radius`;let u=k_(t,l),d=k_(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||C_(u)===C_(d)?(e[l]=Math.max(Xt(S_(u),S_(d),r),0),(is.test(d)||is.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Xt(t.rotate||0,n.rotate||0,r))}function k_(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const cW=QI(0,.5,BP),uW=QI(.5,.95,pi);function QI(e,t,n){return r=>r<e?0:r>t?1:n(vd(e,t,r))}function E_(e,t){e.min=t.min,e.max=t.max}function ai(e,t){E_(e.x,t.x),E_(e.y,t.y)}function N_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function T_(e,t,n,r,i){return e-=t,e=Tp(e,1/n,r),i!==void 0&&(e=Tp(e,1/i,r)),e}function dW(e,t=0,n=1,r=.5,i,s=e,o=e){if(is.test(t)&&(t=parseFloat(t),t=Xt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Xt(s.min,s.max,r);e===s&&(l-=t),e.min=T_(e.min,t,n,l,i),e.max=T_(e.max,t,n,l,i)}function A_(e,t,[n,r,i],s,o){dW(e,t[n],t[r],t[i],t.scale,s,o)}const fW=["x","scaleX","originX"],hW=["y","scaleY","originY"];function M_(e,t,n,r){A_(e.x,t,fW,n?n.x:void 0,r?r.x:void 0),A_(e.y,t,hW,n?n.y:void 0,r?r.y:void 0)}function __(e){return e.translate===0&&e.scale===1}function JI(e){return __(e.x)&&__(e.y)}function D_(e,t){return e.min===t.min&&e.max===t.max}function pW(e,t){return D_(e.x,t.x)&&D_(e.y,t.y)}function R_(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function e6(e,t){return R_(e.x,t.x)&&R_(e.y,t.y)}function j_(e){return ur(e.x)/ur(e.y)}function O_(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mW{constructor(){this.members=[]}add(t){Gk(this.members,t),t.scheduleRender()}remove(t){if(Wk(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gW(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:p,rotateY:g,skewX:b,skewY:v}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),b&&(r+=`skewX(${b}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const J0=["","X","Y","Z"],yW=1e3;let bW=0;function eb(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function t6(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=qI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&t6(r)}function n6({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=bW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wW),this.nodes.forEach(EW),this.nodes.forEach(NW),this.nodes.forEach(SW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new sW)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xk),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=yI(o)&&!l$(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let f,p=0;const g=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{p=window.innerWidth}),e(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,f&&f(),f=oW(g,250),lp.hasAnimatedSinceResize&&(lp.hasAnimatedSinceResize=!1,this.nodes.forEach(I_)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||DW,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),k=!this.targetLayout||!e6(this.targetLayout,b),T=!p&&g;if(this.options.layoutRoot||this.resumeFrom||T||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...cE(v,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(f,T)}else p||I_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&t6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(L_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(P_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kW),this.nodes.forEach(xW),this.nodes.forEach(vW)):this.nodes.forEach(P_),this.clearAllSnapshots();const l=Cr.now();$n.delta=Is(0,1e3/60,l-$n.timestamp),$n.timestamp=l,$n.isProcessing=!0,H0.update.process($n),H0.preRender.process($n),H0.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CW),this.sharedNodes.forEach(AW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ur(this.snapshot.measuredBox.x)&&!ur(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!JI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ya(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),RW(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ln();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(jW))){const{scroll:d}=this.root;d&&(Zl(l.x,d.offset.x),Zl(l.y,d.offset.y))}return l}removeElementScroll(o){const l=ln();if(ai(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&ai(l,o),Zl(l.x,f.offset.x),Zl(l.y,f.offset.y))}return l}applyTransform(o,l=!1){const u=ln();ai(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ql(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ya(f.latestValues)&&Ql(u,f.latestValues)}return ya(this.latestValues)&&Ql(u,this.latestValues),u}removeTransform(o){const l=ln();ai(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!ya(d.latestValues))continue;_C(d.latestValues)&&d.updateSnapshot();const f=ln(),p=d.measurePageBox();ai(f,p),M_(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return ya(this.latestValues)&&M_(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),id(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ai(this.target,this.layout.layoutBox),OI(this.target,this.targetDelta)):ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),id(this.relativeTargetOrigin,this.target,g.target),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||_C(this.parent.latestValues)||jI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;ai(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;Z$(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ln());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(N_(this.prevProjectionDelta.x,this.projectionDelta.x),N_(this.prevProjectionDelta.y,this.projectionDelta.y)),rd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!O_(this.projectionDelta.x,this.prevProjectionDelta.x)||!O_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jl(),this.projectionDelta=Jl(),this.projectionDeltaWithTransform=Jl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},p=Jl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=ln(),b=u?u.source:void 0,v=this.layout?this.layout.source:void 0,S=b!==v,w=this.getStack(),k=!w||w.members.length<=1,T=!!(S&&!k&&this.options.crossfade===!0&&!this.path.some(_W));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const A=N/1e3;B_(p.x,o.x,A),B_(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(id(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MW(this.relativeTarget,this.relativeTargetOrigin,g,A),E&&pW(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ln()),ai(E,this.relativeTarget)),S&&(this.animationValues=f,lW(f,d,this.latestValues,A,T,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(qo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{lp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lc(0)),this.currentAnimation=rW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:f}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&r6(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ln();const p=ur(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=ur(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}ai(l,u),Ql(l,f),rd(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mW),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&eb("z",o,d,this.animationValues);for(let f=0;f<J0.length;f++)eb(`rotate${J0[f]}`,o,d,this.animationValues),eb(`skew${J0[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ap(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ap(l?.pointerEvents)||""),this.hasProjected&&!ya(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=gW(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),o.transform=p;const{x:g,y:b}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in kd){if(f[v]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:k}=kd[v],T=p==="none"?f[v]:S(f[v],d);if(w){const E=w.length;for(let N=0;N<E;N++)o[w[N]]=T}else k?this.options.visualElement.renderState.vars[v]=T:o[v]=T}this.options.layoutId&&(o.pointerEvents=d===this?ap(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(L_),this.root.sharedNodes.clear()}}}function xW(e){e.updateLayout()}function vW(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?ci(f=>{const p=s?t.measuredBox[f]:t.layoutBox[f],g=ur(p);p.min=n[f].min,p.max=p.min+g}):r6(i,t.layoutBox,n)&&ci(f=>{const p=s?t.measuredBox[f]:t.layoutBox[f],g=ur(n[f]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+g)});const o=Jl();rd(o,n,t.layoutBox);const l=Jl();s?rd(l,e.applyTransform(r,!0),t.measuredBox):rd(l,n,t.layoutBox);const u=!JI(o);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const b=ln();id(b,t.layoutBox,p.layoutBox);const v=ln();id(v,n,g.layoutBox),e6(b,v)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=b,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function wW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function SW(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CW(e){e.clearSnapshot()}function L_(e){e.clearMeasurements()}function P_(e){e.isLayoutDirty=!1}function kW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function I_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EW(e){e.resolveTargetDelta()}function NW(e){e.calcProjection()}function TW(e){e.resetSkewAndRotation()}function AW(e){e.removeLeadSnapshot()}function B_(e,t,n){e.translate=Xt(t.translate,0,n),e.scale=Xt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function z_(e,t,n,r){e.min=Xt(t.min,n.min,r),e.max=Xt(t.max,n.max,r)}function MW(e,t,n,r){z_(e.x,t.x,n.x,r),z_(e.y,t.y,n.y,r)}function _W(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const DW={duration:.45,ease:[.4,0,.1,1]},q_=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),V_=q_("applewebkit/")&&!q_("chrome/")?Math.round:pi;function H_(e){e.min=V_(e.min),e.max=V_(e.max)}function RW(e){H_(e.x),H_(e.y)}function r6(e,t,n){return e==="position"||e==="preserve-aspect"&&!BG(j_(t),j_(n),.2)}function jW(e){return e!==e.root&&e.scroll?.wasRoot}const OW=n6({attachResizeListener:(e,t)=>Ed(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tb={current:void 0},i6=n6({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tb.current){const e=new OW({});e.mount(window),e.setOptions({layoutScroll:!0}),tb.current=e}return tb.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),LW={pan:{Feature:JG},drag:{Feature:QG,ProjectionNode:i6,MeasureLayout:XI}};function F_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ht.postRender(()=>s(t,rf(t)))}class PW extends Uo{mount(){const{current:t}=this.node;t&&(this.unmount=r$(t,(n,r)=>(F_(this.node,r,"Start"),i=>F_(this.node,i,"End"))))}unmount(){}}class IW extends Uo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ef(Ed(this.node.current,"focus",()=>this.onFocus()),Ed(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function U_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ht.postRender(()=>s(t,rf(t)))}class BW extends Uo{mount(){const{current:t}=this.node;t&&(this.unmount=a$(t,(n,r)=>(U_(this.node,r,"Start"),(i,{success:s})=>U_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const IC=new WeakMap,nb=new WeakMap,zW=e=>{const t=IC.get(e.target);t&&t(e)},qW=e=>{e.forEach(zW)};function VW({root:e,...t}){const n=e||document;nb.has(n)||nb.set(n,{});const r=nb.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(qW,{root:e,...t})),r[i]}function HW(e,t,n){const r=VW(t);return IC.set(e,n),r.observe(e),()=>{IC.delete(e),r.unobserve(e)}}const FW={some:0,all:1};class UW extends Uo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:FW[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),g=d?f:p;g&&g(u)};return HW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some($W(t,n))&&this.startObserver()}unmount(){}}function $W({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const GW={inView:{Feature:UW},tap:{Feature:BW},focus:{Feature:IW},hover:{Feature:PW}},WW={layout:{ProjectionNode:i6,MeasureLayout:XI}},KW={...RG,...GW,...LW,...WW},ht=K$(KW,aG);function YW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function dc(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function Vm(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function XW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"},child:[]}]})(e)}function BC(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function ZW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)}function QW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)}function JW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function eK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function tK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function nK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function rK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function iK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function sK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function oK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function aK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function lK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function cK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function uK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)}function fc(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function dK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function s6(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function fK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function hK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}function pK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(e)}function mK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 .01c0-.01 0-.01 0 0L0 0v24h24V.01zM0 0h24v24H0V0zm0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4a9.793 9.793 0 0 0-4.49-2.56l3.53 3.53.96-.97zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24A9.684 9.684 0 0 0 5 13v.01L6.99 15a7.042 7.042 0 0 1 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3a4.237 4.237 0 0 0-6 0z"},child:[]}]})(e)}function gK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(e)}const Hm=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=M.useState("login"),[l,u]=M.useState(""),[d,f]=M.useState(""),[p,g]=M.useState(""),[b,v]=M.useState(""),[S,w]=M.useState(!1),[k,T]=M.useState(!1);M.useEffect(()=>{const _=()=>{const I=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");T(I)};_();const j=window.matchMedia("(prefers-color-scheme: dark)"),R=new MutationObserver(_);return j.addEventListener("change",_),R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{j.removeEventListener("change",_),R.disconnect()}},[]);const E=M.useCallback(async _=>{if(i){w(!0),v("");try{await i(_.credential),t()}catch(j){v(j instanceof Error?j.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);M.useEffect(()=>{if(!e||!i)return;const _=document.createElement("script");return _.src="https://accounts.google.com/gsi/client",_.async=!0,_.defer=!0,document.body.appendChild(_),_.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:k?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(_)&&document.body.removeChild(_)}},[e,s,i,E,k]);const N=async _=>{_.preventDefault(),v(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),f(""),g("")}catch(j){v(j instanceof Error?j.message:"Authentication failed")}finally{w(!1)}},A=()=>{o(_=>_==="login"?"signup":"login"),v("")};return e?m.jsx(cc,{children:e&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:m.jsxs(ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:_=>_.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),m.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:m.jsx(fc,{className:"h-5 w-5"})})]}),m.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),b&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:b}),i&&m.jsxs(m.Fragment,{children:[m.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),m.jsxs("div",{className:"relative my-6",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-theme/20"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),m.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s==="signup"&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),m.jsx("input",{id:"name",type:"text",value:p,onChange:_=>g(_.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),m.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),m.jsx("input",{id:"password",type:"password",value:d,onChange:_=>f(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&m.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),m.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",m.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),m.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:m.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},$_=()=>{Ya();const e=Zd(),[t,n]=M.useState(!1),[r,i]=M.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:f}=Pm(),[p,g]=M.useState(!1),[b,v]=M.useState(!1),[S,w]=M.useState([]),[k,T]=M.useState(!1);M.useEffect(()=>{n(!0)},[]),M.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),M.useEffect(()=>{(async()=>{if(!o){w([]);return}T(!0);try{const I=await Kt.getUserDiagrams();w(I)}catch(I){console.error("Failed to load diagrams:",I)}finally{T(!1)}})()},[o]);const E=R=>{e(`/playground/free?diagramId=${R}`)},N=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create system designs, ER diagrams, and UML diagrams from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"75+ Components",description:"System design, ER diagrams, UML diagrams, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"75+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],j=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return m.jsxs(m.Fragment,{children:[m.jsx(Jd,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 78+ components, AI assessment, UML & ER diagrams, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design, ER diagram, entity relationship diagram, UML diagram, class diagram, database design",url:"https://satya00089.github.io/diagrammatic/"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[m.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[m.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),m.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),m.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),m.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),m.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),m.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),m.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),m.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),m.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),m.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),m.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),m.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),m.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),m.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),m.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),m.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),m.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),m.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),m.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),m.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&m.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),m.jsx(Qd,{}),m.jsx("div",{className:"relative",children:o?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?m.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),m.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),m.jsx("button",{type:"button",onClick:()=>{f(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):m.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),m.jsx("section",{className:"relative pt-16 pb-20",children:m.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[m.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[m.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),m.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),m.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),m.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),m.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),m.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),m.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),m.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:m.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[m.jsx("div",{className:"inline-block mb-6",children:m.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 75+ Components, UML & ER Diagrams, AI Assessment"})}),m.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[m.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),m.jsx("br",{}),m.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),m.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design, ER diagrams, and UML  practice, learn, and create architecture diagrams with ease"}),m.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((R,I)=>{const B=()=>I===0?"fade-in-up-delay-100":I===1?"fade-in-up-delay-200":"fade-in-up-delay-300";return m.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${B()}`,children:[m.jsx("div",{className:"text-3xl mb-1",children:R.icon}),m.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),m.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label)})}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[m.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[m.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),m.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",m.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),m.jsx("p",{className:"mt-6 text-sm text-white/80",children:"Trusted by 1000+ developers  AI-powered feedback  Open source"})]})})]})}),o&&m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),m.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&m.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),m.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),k?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?m.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),m.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(R=>m.jsxs("div",{onClick:()=>E(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),!R.isOwner&&m.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[m.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative flex items-center gap-1.5",children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[R.owner.pictureUrl?m.jsx("img",{src:R.owner.pictureUrl,alt:R.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):m.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:R.owner.name[0]?.toUpperCase()}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),m.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:R.owner.name})]})]})]}),m.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${R.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:R.permission==="edit"?m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),m.jsx("span",{children:R.permission==="edit"?"Can Edit":"View Only"})]})]}),R.description&&m.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),m.jsx("div",{className:"text-3xl ml-2",children:""})]}),m.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),m.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),m.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:N.map((R,I)=>{const B=()=>I===0?"delay-0":I===1?"delay-100":"delay-200";return m.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${B()}`,onClick:()=>e(R.route),onKeyDown:U=>U.key==="Enter"&&e(R.route),role:"button",tabIndex:0,children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),m.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),m.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,m.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title)})})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),m.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,I)=>{const B=()=>["delay-0","delay-[50ms]","delay-[100ms]","delay-[150ms]","delay-[200ms]","delay-[250ms]"][I]||"delay-[250ms]";return m.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${B()}`,children:[m.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),m.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),m.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title)})})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),m.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:j.map(R=>m.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[m.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),m.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),m.jsxs("div",{children:[m.jsx("div",{className:"font-semibold text-theme",children:R.author}),m.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`${R.author}-${R.role}`))})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[m.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[m.jsxs("div",{className:"relative inline-block mb-6",children:[m.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),m.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),m.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),m.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[m.jsxs("div",{className:"relative inline-block mb-6",children:[m.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),m.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),m.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),m.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[m.jsxs("div",{className:"relative inline-block mb-6",children:[m.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),m.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),m.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:m.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),m.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),m.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:m.jsx("div",{className:"max-w-7xl mx-auto",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),m.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),m.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),m.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&m.jsx(Hm,{isOpen:p,onClose:()=>g(!1),onLogin:async(R,I)=>{await l({email:R,password:I})},onSignup:async(R,I,B)=>{await u({email:R,password:I,name:B})},onGoogleLogin:async R=>{await d(R)}})]})]})};function zs(e){return Array.isArray?Array.isArray(e):l6(e)==="[object Array]"}function yK(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function bK(e){return e==null?"":yK(e)}function ts(e){return typeof e=="string"}function o6(e){return typeof e=="number"}function xK(e){return e===!0||e===!1||vK(e)&&l6(e)=="[object Boolean]"}function a6(e){return typeof e=="object"}function vK(e){return a6(e)&&e!==null}function Ur(e){return e!=null}function rb(e){return!e.trim().length}function l6(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const wK="Incorrect 'index' type",SK=e=>`Invalid value for key ${e}`,CK=e=>`Pattern length exceeds max of ${e}.`,kK=e=>`Missing ${e} property in key`,EK=e=>`Property 'weight' in key '${e}' must be a positive integer`,G_=Object.prototype.hasOwnProperty;class NK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=c6(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function c6(e){let t=null,n=null,r=null,i=1,s=null;if(ts(e)||zs(e))r=e,t=W_(e),n=zC(e);else{if(!G_.call(e,"name"))throw new Error(kK("name"));const o=e.name;if(r=o,G_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(EK(o));t=W_(o),n=zC(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function W_(e){return zs(e)?e:e.split(".")}function zC(e){return zs(e)?e.join("."):e}function TK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(Ur(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!Ur(d))return;if(l===o.length-1&&(ts(d)||o6(d)||xK(d)))n.push(bK(d));else if(zs(d)){r=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,ts(t)?t.split("."):t,0),r?n:n[0]}const AK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},MK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},_K={location:0,threshold:.6,distance:100},DK={useExtendedSearch:!1,getFn:TK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ke={...MK,...AK,..._K,...DK};const RK=/[^ ]+/g;function jK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(RK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class CE{constructor({getFn:t=Ke.getFn,fieldNormWeight:n=Ke.fieldNormWeight}={}){this.norm=jK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ts(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();ts(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Ur(t)||rb(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Ur(o)){if(zs(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:f}=u.pop();if(Ur(f))if(ts(f)&&!rb(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else zs(f)&&f.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(ts(o)&&!rb(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function u6(e,t,{getFn:n=Ke.getFn,fieldNormWeight:r=Ke.fieldNormWeight}={}){const i=new CE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(c6)),i.setSources(t),i.create(),i}function OK(e,{getFn:t=Ke.getFn,fieldNormWeight:n=Ke.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new CE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Lh(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Ke.distance,ignoreLocation:s=Ke.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function LK(e=[],t=Ke.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const xa=32;function PK(e,t,n,{location:r=Ke.location,distance:i=Ke.distance,threshold:s=Ke.threshold,findAllMatches:o=Ke.findAllMatches,minMatchCharLength:l=Ke.minMatchCharLength,includeMatches:u=Ke.includeMatches,ignoreLocation:d=Ke.ignoreLocation}={}){if(t.length>xa)throw new Error(CK(xa));const f=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let b=s,v=g;const S=l>1||u,w=S?Array(p):[];let k;for(;(k=e.indexOf(t,v))>-1;){let j=Lh(t,{currentLocation:k,expectedLocation:g,distance:i,ignoreLocation:d});if(b=Math.min(j,b),v=k+f,S){let R=0;for(;R<f;)w[k+R]=1,R+=1}}v=-1;let T=[],E=1,N=f+p;const A=1<<f-1;for(let j=0;j<f;j+=1){let R=0,I=N;for(;R<I;)Lh(t,{errors:j,currentLocation:g+I,expectedLocation:g,distance:i,ignoreLocation:d})<=b?R=I:N=I,I=Math.floor((N-R)/2+R);N=I;let B=Math.max(1,g-I+1),U=o?p:Math.min(g+I,p)+f,q=Array(U+2);q[U+1]=(1<<j)-1;for(let L=U;L>=B;L-=1){let H=L-1,O=n[e.charAt(H)];if(S&&(w[H]=+!!O),q[L]=(q[L+1]<<1|1)&O,j&&(q[L]|=(T[L+1]|T[L])<<1|1|T[L+1]),q[L]&A&&(E=Lh(t,{errors:j,currentLocation:H,expectedLocation:g,distance:i,ignoreLocation:d}),E<=b)){if(b=E,v=H,v<=g)break;B=Math.max(1,2*g-v)}}if(Lh(t,{errors:j+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>b)break;T=q}const _={isMatch:v>=0,score:Math.max(.001,E)};if(S){const j=LK(w,l);j.length?u&&(_.indices=j):_.isMatch=!1}return _}function IK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Ap=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class d6{constructor(t,{location:n=Ke.location,threshold:r=Ke.threshold,distance:i=Ke.distance,includeMatches:s=Ke.includeMatches,findAllMatches:o=Ke.findAllMatches,minMatchCharLength:l=Ke.minMatchCharLength,isCaseSensitive:u=Ke.isCaseSensitive,ignoreDiacritics:d=Ke.ignoreDiacritics,ignoreLocation:f=Ke.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f},t=u?t:t.toLowerCase(),t=d?Ap(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(b,v)=>{this.chunks.push({pattern:b,alphabet:IK(b),startIndex:v})},g=this.pattern.length;if(g>xa){let b=0;const v=g%xa,S=g-v;for(;b<S;)p(this.pattern.substr(b,xa),b),b+=xa;if(v){const w=g-xa;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Ap(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],g=0,b=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:k})=>{const{isMatch:T,score:E,indices:N}=PK(t,S,w,{location:s+k,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(b=!0),g+=E,T&&N&&(p=[...p,...N])});let v={isMatch:b,score:b?g/this.chunks.length:1};return b&&i&&(v.indices=p),v}}class $o{constructor(t){this.pattern=t}static isMultiMatch(t){return K_(t,this.multiRegex)}static isSingleMatch(t){return K_(t,this.singleRegex)}search(){}}function K_(e,t){const n=e.match(t);return n?n[1]:null}class BK extends $o{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class zK extends $o{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class qK extends $o{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class VK extends $o{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class HK extends $o{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class FK extends $o{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class f6 extends $o{constructor(t,{location:n=Ke.location,threshold:r=Ke.threshold,distance:i=Ke.distance,includeMatches:s=Ke.includeMatches,findAllMatches:o=Ke.findAllMatches,minMatchCharLength:l=Ke.minMatchCharLength,isCaseSensitive:u=Ke.isCaseSensitive,ignoreDiacritics:d=Ke.ignoreDiacritics,ignoreLocation:f=Ke.ignoreLocation}={}){super(t),this._bitapSearch=new d6(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class h6 extends $o{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const qC=[BK,h6,qK,VK,FK,HK,zK,f6],Y_=qC.length,UK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$K="|";function GK(e,t={}){return e.split($K).map(n=>{let r=n.trim().split(UK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<Y_;){const f=qC[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,t)),u=!0)}if(!u)for(d=-1;++d<Y_;){const f=qC[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,t));break}}}return i})}const WK=new Set([f6.type,h6.type]);class KK{constructor(t,{isCaseSensitive:n=Ke.isCaseSensitive,ignoreDiacritics:r=Ke.ignoreDiacritics,includeMatches:i=Ke.includeMatches,minMatchCharLength:s=Ke.minMatchCharLength,ignoreLocation:o=Ke.ignoreLocation,findAllMatches:l=Ke.findAllMatches,location:u=Ke.location,threshold:d=Ke.threshold,distance:f=Ke.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:f},t=n?t:t.toLowerCase(),t=r?Ap(t):t,this.pattern=t,this.query=GK(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Ap(t):t;let o=0,l=[],u=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,b=p.length;g<b;g+=1){const v=p[g],{isMatch:S,indices:w,score:k}=v.search(t);if(S){if(o+=1,u+=k,r){const T=v.constructor.type;WK.has(T)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const VC=[];function YK(...e){VC.push(...e)}function HC(e,t){for(let n=0,r=VC.length;n<r;n+=1){let i=VC[n];if(i.condition(e,t))return new i(e,t)}return new d6(e,t)}const Mp={AND:"$and",OR:"$or"},FC={PATH:"$path",PATTERN:"$val"},UC=e=>!!(e[Mp.AND]||e[Mp.OR]),XK=e=>!!e[FC.PATH],ZK=e=>!zs(e)&&a6(e)&&!UC(e),X_=e=>({[Mp.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function p6(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=XK(i);if(!o&&s.length>1&&!UC(i))return r(X_(i));if(ZK(i)){const u=o?i[FC.PATH]:s[0],d=o?i[FC.PATTERN]:i[u];if(!ts(d))throw new Error(SK(u));const f={keyId:zC(u),pattern:d};return n&&(f.searcher=HC(d,t)),f}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];zs(d)&&d.forEach(f=>{l.children.push(r(f))})}),l};return UC(e)||(e=X_(e)),r(e)}function QK(e,{ignoreFieldNorm:t=Ke.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function JK(e,t){const n=e.matches;t.matches=[],Ur(n)&&n.forEach(r=>{if(!Ur(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function eY(e,t){t.score=e.score}function tY(e,t,{includeMatches:n=Ke.includeMatches,includeScore:r=Ke.includeScore}={}){const i=[];return n&&i.push(JK),r&&i.push(eY),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class Xa{constructor(t,n={},r){this.options={...Ke,...n},this.options.useExtendedSearch,this._keyStore=new NK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof CE))throw new Error(wK);this._myIndex=n||u6(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ur(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=ts(t)?ts(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return QK(u,{ignoreFieldNorm:l}),s&&u.sort(o),o6(n)&&n>-1&&(u=u.slice(0,n)),tY(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=HC(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!Ur(s))return;const{isMatch:u,score:d,indices:f}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(t){const n=p6(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return b&&b.length?[{idx:d,item:u,matches:b}]:[]}const f=[];for(let p=0,g=l.children.length;p<g;p+=1){const b=l.children[p],v=r(b,u,d);if(v.length)f.push(...v);else if(l.operator===Mp.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(Ur(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:f})=>{s[u].matches.push(...f)}))}}),o}_searchObjectList(t){const n=HC(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Ur(o))return;let u=[];r.forEach((d,f)=>{u.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Ur(n))return[];let i=[];if(zs(n))n.forEach(({v:s,i:o,n:l})=>{if(!Ur(s))return;const{isMatch:u,score:d,indices:f}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}Xa.version="7.1.0";Xa.createIndex=u6;Xa.parseIndex=OK;Xa.config=Ke;Xa.parseQuery=p6;YK(KK);const nY=()=>{Ya();const e=Zd(),[t,n]=M.useState("All"),[r,i]=M.useState("All"),[s,o]=M.useState(""),[l,u]=M.useState([]),[d,f]=M.useState(!0),[p,g]=M.useState(null),[b,v]=M.useState(!1),[S,w]=M.useState(!1),[k,T]=M.useState(new Set),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:j,logout:R}=Pm();M.useEffect(()=>{(async()=>{try{f(!0),g(null);const H=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!H.ok)throw new Error(`Failed to fetch problems: ${H.status} ${H.statusText}`);const O=await H.json();u(O)}catch(L){g(L instanceof Error?L.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",L)}finally{f(!1)}})()},[]),M.useEffect(()=>{(async()=>{if(!N){T(new Set);return}try{const L=await Kt.getAttemptedProblems();T(new Set(L))}catch(L){console.error("Failed to fetch attempted problems:",L)}})()},[N]);const I=M.useMemo(()=>{const F=s?.trim()??"";let L=l;return F.length>0&&(L=new Xa(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(F).map(V=>V.item)),L.filter(O=>{const V=t==="All"||O.difficulty===t,Y=r==="All"||O.category===r;return V&&Y}).sort((O,V)=>{const Y=k.has(O.id)?1:0;return(k.has(V.id)?1:0)-Y})},[t,r,s,l,k]),B=["All",...Array.from(new Set(l.map(F=>F.category)))],U=["All","Easy","Medium","Hard","Very Hard"],q=F=>{switch(F){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return m.jsxs(m.Fragment,{children:[m.jsx(Jd,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[N&&m.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),m.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${I.length} problems available`}),m.jsx(Qd,{}),m.jsx("div",{className:"relative",children:N?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?m.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),m.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),m.jsx("button",{type:"button",onClick:()=>{R(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):m.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),m.jsx("div",{className:"pt-16 relative z-10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),m.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),m.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),m.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),m.jsx("div",{className:"text-muted text-sm mb-6",children:p}),m.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),m.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:F=>o(F.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),m.jsx("select",{id:"difficulty-select",value:t,onChange:F=>n(F.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:U.map(F=>m.jsx("option",{value:F,children:F},F))})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),m.jsx("select",{id:"category-select",value:r,onChange:F=>i(F.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:B.map(F=>m.jsx("option",{value:F,children:F},F))})]})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:I.map((F,L)=>m.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${L===0?"delay-0":L===1?"delay-100":L===2?"delay-200":""}`,children:[m.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),m.jsxs("div",{className:"relative p-6",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1 pr-2",children:F.title}),m.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 flex-shrink-0 ${q(F.difficulty)}`,children:F.difficulty})]}),m.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:F.description}),m.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{children:""})," ",F.category]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{children:""})," ",F.estimated_time]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[F.tags.slice(0,3).map(H=>m.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:H},H)),F.tags.length>3&&m.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",F.tags.length-3," more"]})]}),m.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),e(`/playground/${F.id}`)},"aria-label":`Start ${F.title}`,className:`w-full px-6 py-3 font-semibold rounded-xl transition-all duration-300 cursor-pointer group-hover:shadow-xl ${N&&k.has(F.id)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:shadow-lg hover:scale-105":"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white hover:shadow-lg hover:scale-105"}`,children:m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[N&&k.has(F.id)&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),N&&k.has(F.id)?"Continue Problem":"Start Problem"," "]})})]})]},F.id))}),I.length===0&&!d&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-7xl mb-6",children:""}),m.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),m.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&m.jsx(Hm,{isOpen:S,onClose:()=>w(!1),onLogin:async(F,L)=>{await A({email:F,password:L})},onSignup:async(F,L,H)=>{await _({email:F,password:L,name:H})},onGoogleLogin:async F=>{await j(F)}})]})};var ib={exports:{}},sb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_;function rY(){if(Z_)return sb;Z_=1;var e=Yd();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var b=g(),v=r({inst:{value:b,getSnapshot:g}}),S=v[0].inst,w=v[1];return s(function(){S.value=b,S.getSnapshot=g,u(S)&&w({inst:S})},[p,b,g]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(b),b}function u(p){var g=p.getSnapshot;p=p.value;try{var b=g();return!n(p,b)}catch{return!0}}function d(p,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return sb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,sb}var Q_;function m6(){return Q_||(Q_=1,ib.exports=rY()),ib.exports}var g6=m6();function Un(e){this.content=e}Un.prototype={constructor:Un,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Un(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Un(n)},addToStart:function(e,t){return new Un([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Un(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Un(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Un.from(e),e.size?new Un(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Un.from(e),e.size?new Un(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Un.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Un.from=function(e){if(e instanceof Un)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Un(t)};function y6(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=y6(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function b6(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,f=Math.min(o.text.length,l.text.length);for(;d<f&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=b6(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class ye{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let f=l+1;u.nodesBetween(Math.max(0,t-f),Math.min(u.content.size,n-f),r,i+f)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new ye(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new ye(r,i)}cutByIndex(t,n){return t==n?ye.empty:t==0&&n==this.content.length?this:new ye(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new ye(i,s)}addToStart(t){return new ye([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ye(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return y6(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return b6(this,t,n,r)}findIndex(t){if(t==0)return Ph(0,t);if(t==this.size)return Ph(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Ph(n+1,s):Ph(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return ye.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ye(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ye.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ye(n||t,r)}static from(t){if(!t)return ye.empty;if(t instanceof ye)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ye([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ye.empty=new ye([],0);const ob={index:0,offset:0};function Ph(e,t){return ob.index=e,ob.offset=t,ob}function _p(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!_p(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!_p(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Dt=class $C{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&_p(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return $C.none;if(t instanceof $C)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Dt.none=[];class Dp extends Error{}class Ne{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=v6(this.content,t+this.openStart,n);return r&&new Ne(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Ne(x6(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Ne.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ne(ye.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Ne(t,r,i)}}Ne.empty=new Ne(ye.empty,0,0);function x6(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(x6(s.content,t-i-1,n-i-1)))}function v6(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=v6(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function iY(e,t,n){if(n.openStart>e.depth)throw new Dp("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Dp("Inconsistent open depths");return w6(e,t,n,0)}function w6(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=w6(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return Ra(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=sY(n,e);return Ra(s,C6(e,o,l,t,r))}else return Ra(s,Rp(e,t,r))}function S6(e,t){if(!t.type.compatibleContent(e.type))throw new Dp("Cannot join "+t.type.name+" onto "+e.type.name)}function GC(e,t,n){let r=e.node(n);return S6(r,t.node(n)),r}function Da(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function sd(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Da(e.nodeAfter,r),s++));for(let l=s;l<o;l++)Da(i.child(l),r);t&&t.depth==n&&t.textOffset&&Da(t.nodeBefore,r)}function Ra(e,t){return e.type.checkContent(t),e.copy(t)}function C6(e,t,n,r,i){let s=e.depth>i&&GC(e,t,i+1),o=r.depth>i&&GC(n,r,i+1),l=[];return sd(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(S6(s,o),Da(Ra(s,C6(e,t,n,r,i+1)),l)):(s&&Da(Ra(s,Rp(e,t,i+1)),l),sd(t,n,i,l),o&&Da(Ra(o,Rp(n,r,i+1)),l)),sd(r,null,i,l),new ye(l)}function Rp(e,t,n){let r=[];if(sd(null,e,n,r),e.depth>n){let i=GC(e,t,n+1);Da(Ra(i,Rp(e,t,n+1)),r)}return sd(t,null,n,r),new ye(r)}function sY(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(ye.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Nd{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Dt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new jp(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new Nd(n,r,s)}static resolveCached(t,n){let r=J_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else J_.set(t,r=new oY);let i=r.elts[r.i]=Nd.resolve(t,n);return r.i=(r.i+1)%aY,i}}class oY{constructor(){this.elts=[],this.i=0}}const aY=12,J_=new WeakMap;class jp{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const lY=Object.create(null);let Oo=class WC{constructor(t,n,r,i=Dt.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&_p(this.attrs,n||t.defaultAttrs||lY)&&Dt.sameSet(this.marks,r||Dt.none)}copy(t=null){return t==this.content?this:new WC(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new WC(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Ne.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new Ne(d,i.depth-o,s.depth-o)}replace(t,n,r){return iY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Nd.resolveCached(this,t)}resolveNoCache(t){return Nd.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),k6(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=ye.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Dt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Dt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=ye.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Oo.prototype.text=void 0;class Op extends Oo{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):k6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Op(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Op(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function k6(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Ba{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new cY(t,n);if(r.next==null)return Ba.empty;let i=E6(r);r.next&&r.err("Unexpected trailing text");let s=gY(mY(i));return yY(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return ye.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:f,next:p}=o.next[d];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(f));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}Ba.empty=new Ba(!0);class cY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function E6(e){let t=[];do t.push(uY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function uY(e){let t=[];do t.push(dY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function dY(e){let t=pY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=fY(e,t);else break;return t}function eD(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function fY(e,t){let n=eD(e),r=n;return e.eat(",")&&(e.next!="}"?r=eD(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function hY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function pY(e){if(e.eat("(")){let t=E6(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=hY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function mY(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let f=n();i(s(o.expr,u),f),u=f}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let f=n();r(u,f),i(s(o.expr,u),f),u=f}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function N6(e,t){return t-e}function tD(e,t){let n=[];return r(t),n.sort(N6);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function gY(e){let t=Object.create(null);return n(tD(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let f=0;f<i.length;f++)i[f][0]==l&&(d=i[f][1]);tD(e,u).forEach(f=>{d||i.push([l,d=[]]),d.indexOf(f)==-1&&d.push(f)})})});let s=t[r.join(",")]=new Ba(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(N6);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function yY(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function T6(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function A6(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function M6(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function _6(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new xY(e,r,t[r]);return n}let nD=class D6{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=_6(t,r.attrs),this.defaultAttrs=T6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ba.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:A6(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Oo(this,this.computeAttrs(t),ye.from(n),Dt.setFrom(r))}createChecked(t=null,n,r){return n=ye.from(n),this.checkContent(n),new Oo(this,this.computeAttrs(t),n,Dt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=ye.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ye.empty,!0);return s?new Oo(this,t,n.append(s),Dt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){M6(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Dt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new D6(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function bY(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class xY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?bY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Fm{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=_6(t,i.attrs),this.excluded=null;let s=T6(this.attrs);this.instance=s?new Dt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Dt(this,A6(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Fm(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){M6(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class R6{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Un.from(t.nodes),n.marks=Un.from(t.marks||{}),this.nodes=nD.compile(this.spec.nodes,this),this.marks=Fm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Ba.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?rD(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:rD(this,o.split(" "))}this.nodeFromJSON=i=>Oo.fromJSON(this,i),this.markFromJSON=i=>Dt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof nD){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Op(r,r.defaultAttrs,t,Dt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function rD(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function vY(e){return e.tag!=null}function wY(e){return e.style!=null}let od=class KC{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(vY(i))this.tags.push(i);else if(wY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new sD(this,n,!1);return r.addAll(t,Dt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new sD(this,n,!0);return r.addAll(t,Dt.none,n.from,n.to),Ne.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(kY(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oD(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=oD(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new KC(t,KC.schemaRules(t)))}};const j6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},SY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},O6={ol:!0,ul:!0},Td=1,YC=2,ad=4;function iD(e,t,n){return t!=null?(t?Td:0)|(t==="full"?YC:0):e&&e.whitespace=="pre"?Td|YC:n&~ad}class Ih{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Dt.none,this.match=s||(o&ad?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ye.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Td)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ye.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ye.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!j6.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class sD{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=iD(null,n.preserveWhitespace,0)|(r?ad:0);i?s=new Ih(i.type,i.attrs,Dt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Ih(null,null,Dt.none,!0,null,o):s=new Ih(t.schema.topNodeType,null,Dt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&YC?"full":this.localPreserveWS||(i.options&Td)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;O6.hasOwnProperty(o)&&this.parser.normalizeLists&&CY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:SY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,f=this.needsBlock;if(j6.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=f}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Dt.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):aD(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=iD(t,s,o.options);o.options&ad&&o.content.length==0&&(l|=ad);let u=Dt.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):aD(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Ih(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Td)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let f=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!f||f.name!=d&&!f.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function CY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&O6.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function kY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function oD(e){let t={};for(let n in e)t[n]=e[n];return t}function aD(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:f}=l.edge(u);if(d==t||s.indexOf(f)<0&&o(f))return!0}};if(o(i.contentMatch))return!0}}class Za{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=ab(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],f=this.serializeMark(d,o.isInline,n);f&&(s.push([d,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=cp(ab(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&cp(ab(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return cp(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Za(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=lD(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return lD(t.marks)}}function lD(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ab(e){return e.document||window.document}const cD=new WeakMap;function EY(e){let t=cD.get(e);return t===void 0&&cD.set(e,t=NY(e)),t}function NY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function cp(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=EY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],f=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){f=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=f;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:b,contentDOM:v}=cp(e,g,n,r);if(u.appendChild(b),v){if(l)throw new RangeError("Multiple content holes");l=v}}}return{dom:u,contentDOM:l}}const L6=65535,P6=Math.pow(2,16);function TY(e,t){return e+t*P6}function uD(e){return e&L6}function AY(e){return(e-(e&L6))/P6}const I6=1,B6=2,up=4,z6=8;class XC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&z6)>0}get deletedBefore(){return(this.delInfo&(I6|up))>0}get deletedAfter(){return(this.delInfo&(B6|up))>0}get deletedAcross(){return(this.delInfo&up)>0}}class $r{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&$r.empty)return $r.empty}recover(t){let n=0,r=uD(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+AY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],f=this.ranges[l+o],p=u+d;if(t<=p){let g=d?t==u?-1:t==p?1:n:n,b=u+i+(g<0?0:f);if(r)return b;let v=t==(n<0?u:p)?null:TY(l/3,t-u),S=t==u?B6:t==p?I6:up;return(n<0?t!=u:t!=p)&&(S|=z6),new XC(b,S,v)}i+=f-d}return r?t+i:new XC(t+i,0,null)}touches(t,n){let r=0,i=uD(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],f=u+d;if(t<=f&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],f=this.ranges[i+r];t(l,l+d,u,u+f),s+=f-d}}invert(){return new $r(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?$r.empty:new $r(t<0?[0,-t,0]:[0,0,t])}}$r.empty=new $r([]);class Ad{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Ad(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Ad;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new XC(t,i,null)}}const lb=Object.create(null);class ir{getMap(){return $r.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=lb[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in lb)throw new RangeError("Duplicate use of step JSON ID "+t);return lb[t]=n,n.prototype.jsonID=t,n}}class xn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new xn(t,null)}static fail(t){return new xn(null,t)}static fromReplace(t,n,r,i){try{return xn.ok(t.replace(n,r,i))}catch(s){if(s instanceof Dp)return xn.fail(s.message);throw s}}}function kE(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(kE(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return ye.fromArray(r)}class Do extends ir{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ne(kE(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return xn.fromReplace(t,this.from,this.to,s)}invert(){return new Ri(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Do(n.pos,r.pos,this.mark)}merge(t){return t instanceof Do&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Do(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Do(n.from,n.to,t.markFromJSON(n.mark))}}ir.jsonID("addMark",Do);class Ri extends ir{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Ne(kE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return xn.fromReplace(t,this.from,this.to,r)}invert(){return new Do(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ri(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ri&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ri(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ri(n.from,n.to,t.markFromJSON(n.mark))}}ir.jsonID("removeMark",Ri);class Ro extends ir{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return xn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ro(this.pos,n.marks[i]);return new Ro(this.pos,this.mark)}}return new za(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ro(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ro(n.pos,t.markFromJSON(n.mark))}}ir.jsonID("addNodeMark",Ro);class za extends ir{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return xn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return xn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ro(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new za(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new za(n.pos,t.markFromJSON(n.mark))}}ir.jsonID("removeNodeMark",za);class On extends ir{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&ZC(t,this.from,this.to)?xn.fail("Structure replace would overwrite content"):xn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new $r([this.from,this.to-this.from,this.slice.size])}invert(t){return new On(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new On(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof On)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Ne.empty:new Ne(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new On(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Ne.empty:new Ne(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new On(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new On(n.from,n.to,Ne.fromJSON(t,n.slice),!!n.structure)}}ir.jsonID("replace",On);class Ln extends ir{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(ZC(t,this.from,this.gapFrom)||ZC(t,this.gapTo,this.to)))return xn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return xn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?xn.fromReplace(t,this.from,this.to,r):xn.fail("Content does not fit in gap")}getMap(){return new $r([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ln(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ln(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ln(n.from,n.to,n.gapFrom,n.gapTo,Ne.fromJSON(t,n.slice),n.insert,!!n.structure)}}ir.jsonID("replaceAround",Ln);function ZC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function MY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,f)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&f.type.allowsMarkType(r.type)){let g=Math.max(d,t),b=Math.min(d+u.nodeSize,n),v=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(v)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=b:i.push(o=new Ri(g,b,p[S])));l&&l.to==g?l.to=b:s.push(l=new Do(g,b,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function _Y(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Fm){let d=o.marks,f;for(;f=r.isInSet(d);)(u||(u=[])).push(f),d=f.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let f=0;f<u.length;f++){let p=u[f],g;for(let b=0;b<i.length;b++){let v=i[b];v.step==s-1&&p.eq(i[b].style)&&(g=v)}g?(g.to=d,g.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Ri(o.from,o.to,o.style)))}function EE(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),f=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new On(l,f,Ne.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||e.step(new Ri(l,f,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,b=/\r?\n|\r/g,v;for(;g=b.exec(d.text);)v||(v=new Ne(ye.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new On(l+g.index,l+g.index+g[0].length,v))}}l=f}if(!r.validEnd){let u=r.fillBefore(ye.empty,!0);e.replace(l,l,new Ne(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function DY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Ac(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!DY(i,s,o))break}return null}function RY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,f=ye.empty,p=0;for(let v=s,S=!1;v>n;v--)S||r.index(v)>0?(S=!0,f=ye.from(r.node(v).copy(f)),p++):u--;let g=ye.empty,b=0;for(let v=s,S=!1;v>n;v--)S||i.after(v+1)<i.end(v)?(S=!0,g=ye.from(i.node(v).copy(g)),b++):d++;e.step(new Ln(u,d,o,l,new Ne(f.append(g),p,b),f.size-p,!0))}function NE(e,t,n=null,r=e){let i=jY(e,t),s=i&&OY(r,t);return s?i.map(dD).concat({type:t,attrs:n}).concat(s.map(dD)):null}function dD(e){return{type:e,attrs:null}}function jY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function OY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function LY(e,t,n){let r=ye.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ye.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new Ln(i,s,i,s,new Ne(r,0,0),n.length,!0))}function PY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&IY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!v?d=!1:!b&&v&&(d=!0)}d===!1&&V6(e,o,l,s),EE(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let f=e.mapping.slice(s),p=f.map(l,1),g=f.map(l+o.nodeSize,1);return e.step(new Ln(p,g,p+1,g-1,new Ne(ye.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&q6(e,o,l,s),!1}})}function q6(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function V6(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function IY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function BY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ln(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Ne(ye.from(o),0,0),1,!0))}function Ls(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,f=n-2;d>s;d--,f--){let p=i.node(d),g=i.index(d);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(g,p.childCount),v=r&&r[f+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let S=r&&r[f]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(b))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function zY(e,t,n=1,r){let i=e.doc.resolve(t),s=ye.empty,o=ye.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=ye.from(i.node(l).copy(s));let f=r&&r[d];o=ye.from(f?f.type.create(f.attrs,o):i.node(l).copy(o))}e.step(new On(t,t,new Ne(s.append(o),n,n),!0))}function Go(e,t){let n=e.resolve(t),r=n.index();return H6(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function qY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function H6(e,t){return!!(e&&t&&!e.isLeaf&&qY(e,t))}function Um(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&H6(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function VY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let f=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);f&&!p?r=!1:!f&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let f=e.doc.resolve(t+n);V6(e,f.node(),f.before(),l)}o.inlineContent&&EE(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new On(d,u.map(t+n,-1),Ne.empty,!0)),r===!0){let f=e.doc.resolve(d);q6(e,f.node(),f.before(),e.steps.length)}return e}function HY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function F6(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),f=!1;if(s==1)f=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);f=p&&d.canReplaceWith(u,u,p[0])}if(f)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function $m(e,t,n=t,r=Ne.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return U6(i,s,r)?new On(t,n,r):new FY(i,s,r).fit()}function U6(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class FY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ye.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=ye.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new Ne(s,o,l);return t>-1?new Ln(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new On(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=cb(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],f,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(ye.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(f=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:f};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=cb(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ne(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=cb(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new Ne($u(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Ne($u(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,f=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)f.push(i.child(S));p=p.matchFragment(i)}let b=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,f.push($6(S.mark(g.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?b:-1)))}let v=d==l.childCount;v||(b=-1),this.placed=Gu(this.placed,n,ye.from(f)),this.frontier[n].match=p,v&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<b;S++){let k=w.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),w=k.content}this.unplaced=v?t==0?Ne.empty:new Ne($u(o.content,t-1,1),t-1,b<0?o.openEnd:t-1):new Ne($u(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!ub(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=ub(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],f=ub(t,l,d,u,!0);if(!f||f.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Gu(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Gu(this.placed,this.depth,ye.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ye.empty,!0);n.childCount&&(this.placed=Gu(this.placed,this.frontier.length,n))}}function $u(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy($u(e.firstChild.content,t-1,n)))}function Gu(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Gu(e.lastChild.content,t-1,n)))}function cb(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function $6(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,$6(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ye.empty,!0)))),e.copy(r)}function ub(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!UY(n,s.content,o)?l:null}function UY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function $Y(e){return e.spec.defining||e.spec.definingForContent}function GY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(U6(i,s,r))return e.step(new On(t,n,r));let o=W6(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,b=i.pos-1;g>0;g--,b--){let v=i.node(g).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==b&&o.splice(1,0,-g)}let u=o.indexOf(l),d=[],f=r.openStart;for(let g=r.content,b=0;;b++){let v=g.firstChild;if(d.push(v),b==r.openStart)break;g=v.content}for(let g=f-1;g>=0;g--){let b=d[g],v=$Y(b.type);if(v&&!b.sameMarkup(i.node(Math.abs(l)-1)))f=g;else if(v||!b.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let b=(g+f+1)%(r.openStart+1),v=d[b];if(v)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],k=!0;w<0&&(k=!1,w=-w);let T=i.node(w-1),E=i.index(w-1);if(T.canReplaceWith(E,E,v.type,v.marks))return e.replace(i.before(w),k?s.after(w):n,new Ne(G6(r.content,0,r.openStart,b),b,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let b=o[g];b<0||(t=i.before(b),n=s.after(b))}}function G6(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(G6(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(ye.empty,!0))}return e}function WY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=HY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Ne(ye.from(r),0,0))}function KY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=W6(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function W6(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class ic extends ir{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return xn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return xn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(i),0,n.isLeaf?0:1))}getMap(){return $r.empty}invert(t){return new ic(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ic(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ic(n.pos,n.attr,n.value)}}ir.jsonID("attr",ic);class Md extends ir{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return xn.ok(r)}getMap(){return $r.empty}invert(t){return new Md(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Md(n.attr,n.value)}}ir.jsonID("docAttr",Md);let hc=class extends Error{};hc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};hc.prototype=Object.create(Error.prototype);hc.prototype.constructor=hc;hc.prototype.name="TransformError";let K6=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ad}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new hc(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Ne.empty){let i=$m(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Ne(ye.from(r),0,0))}delete(t,n){return this.replace(t,n,Ne.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return GY(this,t,n,r),this}replaceRangeWith(t,n,r){return WY(this,t,n,r),this}deleteRange(t,n){return KY(this,t,n),this}lift(t,n){return RY(this,t,n),this}join(t,n=1){return VY(this,t,n),this}wrap(t,n){return LY(this,t,n),this}setBlockType(t,n=t,r,i=null){return PY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return BY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new ic(t,n,r)),this}setDocAttribute(t,n){return this.step(new Md(t,n)),this}addNodeMark(t,n){return this.step(new Ro(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Dt)n.isInSet(r.marks)&&this.step(new za(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new za(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return zY(this,t,n,r),this}addMark(t,n,r){return MY(this,t,n,r),this}removeMark(t,n,r){return _Y(this,t,n,r),this}clearIncompatible(t,n,r){return EE(this,t,n,r),this}};const db=Object.create(null);let Qe=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new YY(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Ne.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],f=t.mapping.slice(s);t.replaceRange(f.map(u.pos),f.map(d.pos),l?Ne.empty:n),l==0&&pD(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),f=u.map(l.pos);s?t.deleteRange(d,f):(t.replaceRangeWith(d,f,n),pD(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ye(t):$l(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?$l(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):$l(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Wr(t.node(0))}static atStart(t){return $l(t,t,0,0,1)||new Wr(t)}static atEnd(t){return $l(t,t,t.content.size,t.childCount,-1)||new Wr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=db[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in db)throw new RangeError("Duplicate use of selection JSON ID "+t);return db[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ye.between(this.$anchor,this.$head).getBookmark()}};Qe.prototype.visible=!0;class YY{constructor(t,n){this.$from=t,this.$to=n}}let fD=!1;function hD(e){!fD&&!e.parent.inlineContent&&(fD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ye extends Qe{constructor(t,n=t){hD(t),hD(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Qe.near(r);let i=t.resolve(n.map(this.anchor));return new Ye(i.parent.inlineContent?i:r,r)}replace(t,n=Ne.empty){if(super.replace(t,n),n==Ne.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ye&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Gm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ye(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Qe.findFrom(n,r,!0)||Qe.findFrom(n,-r,!0);if(s)n=s.$head;else return Qe.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Qe.findFrom(t,-r,!0)||Qe.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ye(t,n)}}Qe.jsonID("text",Ye);class Gm{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Gm(t.map(this.anchor),t.map(this.head))}resolve(t){return Ye.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ve extends Qe{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Qe.near(s):new Ve(s)}content(){return new Ne(ye.from(this.node),0,0)}eq(t){return t instanceof Ve&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new TE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ve(t.resolve(n.anchor))}static create(t,n){return new Ve(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ve.prototype.visible=!1;Qe.jsonID("node",Ve);class TE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Gm(r,r):new TE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Ve.isSelectable(r)?new Ve(n):Qe.near(n)}}class Wr extends Qe{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Ne.empty){if(n==Ne.empty){t.delete(0,t.doc.content.size);let r=Qe.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Wr(t)}map(t){return new Wr(t)}eq(t){return t instanceof Wr}getBookmark(){return XY}}Qe.jsonID("all",Wr);const XY={map(){return this},resolve(e){return new Wr(e)}};function $l(e,t,n,r,i,s=!1){if(t.inlineContent)return Ye.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Ve.isSelectable(l))return Ve.create(e,n-(i<0?l.nodeSize:0))}else{let u=$l(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function pD(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof On||i instanceof Ln))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,f)=>{o==null&&(o=f)}),e.setSelection(Qe.near(e.doc.resolve(o),n))}const mD=1,Bh=2,gD=4;class ZY extends K6{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|mD)&~Bh,this.storedMarks=null,this}get selectionSet(){return(this.updated&mD)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Bh,this}ensureMarks(t){return Dt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Bh)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Bh,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Dt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Qe.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=gD,this}get scrolledIntoView(){return(this.updated&gD)>0}}function yD(e,t){return!t||!e?e:e.bind(t)}class Wu{constructor(t,n,r){this.name=t,this.init=yD(n.init,r),this.apply=yD(n.apply,r)}}const QY=[new Wu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Wu("selection",{init(e,t){return e.selection||Qe.atStart(t.doc)},apply(e){return e.selection}}),new Wu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Wu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class fb{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=QY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Wu(r.key,r.spec.state,r))})}}class ec{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,f=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(f&&r.filterTransaction(f,o)){if(f.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(f),r=r.applyInner(f),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ec(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new ZY(this)}static create(t){let n=new fb(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new ec(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new fb(this.schema,t.plugins),r=n.fields,i=new ec(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new fb(t.schema,t.plugins),s=new ec(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Oo.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Qe.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function Y6(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Y6(i,t,{})),n[r]=i}return n}class sn{constructor(t){this.spec=t,this.props={},t.props&&Y6(t.props,this,this.props),this.key=t.key?t.key.key:X6("plugin")}getState(t){return t[this.key]}}const hb=Object.create(null);function X6(e){return e in hb?e+"$"+ ++hb[e]:(hb[e]=0,e+"$")}class In{constructor(t="key"){this.key=X6(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Gn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},pc=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let QC=null;const Rs=function(e,t,n){let r=QC||(QC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},JY=function(){QC=null},qa=function(e,t,n,r){return n&&(bD(e,t,n,r,-1)||bD(e,t,n,r,1))},eX=/^(img|br|input|textarea|hr)$/i;function bD(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:fi(e))){let o=e.parentNode;if(!o||o.nodeType!=1||sf(e)||eX.test(e.nodeName)||e.contentEditable=="false")return!1;t=Gn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?fi(e):0}else return!1}}function fi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function tX(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=fi(e)}else if(e.parentNode&&!sf(e))t=Gn(e),e=e.parentNode;else return null}}function nX(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!sf(e))t=Gn(e)+1,e=e.parentNode;else return null}}function rX(e,t,n){for(let r=t==0,i=t==fi(e);r||i;){if(e==n)return!0;let s=Gn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==fi(e)}}function sf(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Wm=function(e){return e.focusNode&&qa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function va(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function iX(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function sX(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(fi(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(fi(r.startContainer),r.startOffset)}}}const as=typeof navigator<"u"?navigator:null,xD=typeof document<"u"?document:null,Wo=as&&as.userAgent||"",JC=/Edge\/(\d+)/.exec(Wo),Z6=/MSIE \d/.exec(Wo),ek=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wo),Er=!!(Z6||ek||JC),Lo=Z6?document.documentMode:ek?+ek[1]:JC?+JC[1]:0,mi=!Er&&/gecko\/(\d+)/i.test(Wo);mi&&+(/Firefox\/(\d+)/.exec(Wo)||[0,0])[1];const tk=!Er&&/Chrome\/(\d+)/.exec(Wo),rr=!!tk,Q6=tk?+tk[1]:0,fr=!Er&&!!as&&/Apple Computer/.test(as.vendor),mc=fr&&(/Mobile\/\w+/.test(Wo)||!!as&&as.maxTouchPoints>2),di=mc||(as?/Mac/.test(as.platform):!1),oX=as?/Win/.test(as.platform):!1,js=/Android \d/.test(Wo),of=!!xD&&"webkitFontSmoothing"in xD.documentElement.style,aX=of?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function lX(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ns(e,t){return typeof e=="number"?e:e[t]}function cX(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function vD(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=pc(o);continue}let l=o,u=l==s.body,d=u?lX(s):cX(l),f=0,p=0;if(t.top<d.top+Ns(r,"top")?p=-(d.top-t.top+Ns(i,"top")):t.bottom>d.bottom-Ns(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+Ns(i,"top")-d.top:t.bottom-d.bottom+Ns(i,"bottom")),t.left<d.left+Ns(r,"left")?f=-(d.left-t.left+Ns(i,"left")):t.right>d.right-Ns(r,"right")&&(f=t.right-d.right+Ns(i,"right")),f||p)if(u)s.defaultView.scrollBy(f,p);else{let b=l.scrollLeft,v=l.scrollTop;p&&(l.scrollTop+=p),f&&(l.scrollLeft+=f);let S=l.scrollLeft-b,w=l.scrollTop-v;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let g=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:pc(o)}}function uX(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:J6(e.dom)}}function J6(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=pc(r));return t}function dX({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;eB(n,r==0?0:r-t)}function eB(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let zl=null;function fX(e){if(e.setActive)return e.setActive();if(zl)return e.focus(zl);let t=J6(e);e.focus(zl==null?{get preventScroll(){return zl={preventScroll:!0},!0}}:void 0),zl||(zl=!1,eB(t,0))}function tB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let f=e.firstChild,p=0;f;f=f.nextSibling,p++){let g;if(f.nodeType==1)g=f.getClientRects();else if(f.nodeType==3)g=Rs(f).getClientRects();else continue;for(let b=0;b<g.length;b++){let v=g[b];if(v.top<=o&&v.bottom>=l){o=Math.max(v.bottom,o),l=Math.min(v.top,l);let S=v.left>t.left?v.left-t.left:v.right<t.left?t.left-v.right:0;if(S<r){n=f,r=S,i=S&&n.nodeType==3?{left:v.right<t.left?v.right:v.left,top:t.top}:t,f.nodeType==1&&S&&(s=p+(t.left>=(v.left+v.right)/2?1:0));continue}}else v.top>t.top&&!u&&v.left<=t.left&&v.right>=t.left&&(u=f,d={left:Math.max(v.left,Math.min(v.right,t.left)),top:v.top});!n&&(t.left>=v.right&&t.top>=v.top||t.left>=v.left&&t.top>=v.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?hX(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:tB(n,i)}function hX(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=Co(r,1);if(s.top!=s.bottom&&AE(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function AE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function pX(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function mX(e,t,n){let{node:r,offset:i}=tB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function gX(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function nB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(AE(t,d))return nB(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function yX(e,t){let n=e.dom.ownerDocument,r,i=0,s=sX(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!AE(t,d)||(o=nB(e.dom,t,d),!o))return null}if(fr)for(let d=o;r&&d;d=pc(d))d.draggable&&(r=void 0);if(o=pX(o,t),r){if(mi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let f=r.childNodes[i],p;f.nodeName=="IMG"&&(p=f.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;of&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=gX(e,r,i,t))}l==null&&(l=mX(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function wD(e){return e.top<e.bottom||e.left<e.right}function Co(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(wD(r))return r}return Array.prototype.find.call(n,wD)||e.getBoundingClientRect()}const bX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=of||mi;if(r.nodeType==3)if(o&&(bX.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=Co(Rs(r,i,i),n);if(mi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Co(Rs(r,i-1,i-1),-1);if(d.top==u.top){let f=Co(Rs(r,i,i+1),-1);if(f.top!=u.top)return Ou(f,f.left<d.left)}}return u}else{let u=i,d=i,f=n<0?1:-1;return n<0&&!i?(d++,f=-1):n>=0&&i==r.nodeValue.length?(u--,f=1):n<0?u--:d++,Ou(Co(Rs(r,u,d),f),f<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==fi(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return pb(u.getBoundingClientRect(),!1)}if(s==null&&i<fi(r)){let u=r.childNodes[i];if(u.nodeType==1)return pb(u.getBoundingClientRect(),!0)}return pb(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==fi(r))){let u=r.childNodes[i-1],d=u.nodeType==3?Rs(u,fi(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return Ou(Co(d,1),!1)}if(s==null&&i<fi(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?Rs(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return Ou(Co(d,-1),!0)}return Ou(Co(r.nodeType==3?Rs(r):r,-n),n>=0)}function Ou(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function pb(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function iB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function xX(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return iB(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=rB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Rs(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let f=u[d];if(f.bottom>f.top+1&&(n=="up"?o.top-f.top>(f.bottom-o.top)*2:f.bottom-o.bottom>(o.bottom-f.top)*2))return!1}}return!0})}const vX=/[\u0590-\u08ac]/;function wX(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!vX.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:iB(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:f,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let b=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:v,focusOffset:S}=e.domSelectionRange(),w=v&&!b.contains(v.nodeType==1?v:v.parentNode)||u==v&&d==S;try{l.collapse(f,p),u&&(u!=f||d!=p)&&l.extend&&l.extend(u,d)}catch{}return g!=null&&(l.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let SD=null,CD=null,kD=!1;function SX(e,t,n){return SD==t&&CD==n?kD:(SD=t,CD=n,kD=n=="up"||n=="down"?xX(e,t,n):wX(e,t,n))}const gi=0,ED=1,Ca=2,ls=3;class af{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=gi,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof oB){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof sB&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Gn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Gn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let f=o+u.border;if(t>=f&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,f);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=Gn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let f=l+1;f<this.children.length;f++){let p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=Gn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let b=0,v=0;b<this.children.length;b++){let S=this.children[b],w=v+S.size;if(s>v&&o<w)return S.setSelection(t-v-S.border,n-v-S.border,r,i);v=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),f=r.domSelectionRange(),p=!1;if((mi||fr)&&t==n){let{node:b,offset:v}=l;if(b.nodeType==3){if(p=!!(v&&b.nodeValue[v-1]==`
`),p&&v==b.nodeValue.length)for(let S=b,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:Gn(w)+1});break}let k=S.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let S=b.childNodes[v-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(mi&&f.focusNode&&f.focusNode!=u.node&&f.focusNode.nodeType==1){let b=f.focusNode.childNodes[f.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||p&&fr)&&qa(l.node,l.offset,f.anchorNode,f.anchorOffset)&&qa(u.node,u.offset,f.focusNode,f.focusOffset))return;let g=!1;if((d.extend||t==n)&&!(p&&mi)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(t>n){let v=l;l=u,u=v}let b=document.createRange();b.setEnd(u.node,u.offset),b.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?Ca:ED,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ls:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ca:ls}r=o}this.dirty=Ca}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Ca:ED;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class sB extends af{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==gi&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CX extends af{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Va extends af{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Za.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Va(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ls||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ls&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=gi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=gi}}slice(t,n,r){let i=Va.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=rk(s,n,o,r)),t>0&&(s=rk(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Po extends af{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),f=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:p}=Za.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let g=f;return f=cB(f,r,n),d?u=new kX(t,n,r,i,f,p||null,g,d,s,o+1):n.isText?new Km(t,n,r,i,f,g,s):new Po(t,n,r,i,f,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ye.empty)}return t}matchesNode(t,n,r){return this.dirty==gi&&t.eq(this.node)&&Lp(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new NX(this,o&&o.node,t);MX(this.node,this.innerDeco,(d,f,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(f==this.node.childCount?Dt.none:this.node.child(f).marks,r,t),u.placeWidget(d,t,i)},(d,f,p,g)=>{u.syncToMarks(d.marks,r,t);let b;u.findNodeMatch(d,f,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(b=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,f,p,b,t)||u.updateNextNode(d,f,p,t,g,i)||u.addNode(d,f,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Ca)&&(o&&this.protectLocalComposition(t,o),aB(this.contentDOM,this.children,t),mc&&_X(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ye)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=DX(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new CX(this,s,n,i);t.input.compositionNodes.push(o),this.children=rk(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==ls||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=gi}updateOuterDeco(t){if(Lp(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=lB(this.dom,this.nodeDOM,nk(this.outerDeco,this.node,n),nk(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ND(e,t,n,r,i){cB(r,t,e);let s=new Po(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Km extends Po{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==ls||this.dirty!=gi&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=gi||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=gi,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new Km(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ls)}get domAtom(){return!1}isText(t){return this.node.text==t}}class oB extends af{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==gi&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class kX extends Po{constructor(t,n,r,i,s,o,l,u,d,f){super(t,n,r,i,s,o,l,d,f),this.spec=u}update(t,n,r,i){if(this.dirty==ls)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function aB(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=TD(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof Va){let u=r?r.previousSibling:e.lastChild;aB(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=TD(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const ld=function(e){e&&(this.nodeName=e)};ld.prototype=Object.create(null);const ka=[new ld];function nk(e,t,n){if(e.length==0)return ka;let r=n?ka[0]:new ld,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new ld(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new ld(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function lB(e,t,n,r){if(n==ka&&r==ka)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=ka[0]),i=u}EX(i,l||ka[0],o)}return i}function EX(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function cB(e,t,n){return lB(e,e,ka,nk(t,n,e.nodeType!=1))}function Lp(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function TD(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class NX{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=TX(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=gi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Va.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==ls&&o.dom==o.contentDOM&&(o.dirty=Ca),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof Po){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let f=u.dom,p,g=this.isLocked(f)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=ls&&Lp(n,u.outerDeco));if(!g&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=f&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=Ca,p.updateChildren(i,o+1),p.dirty=gi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Lp(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Po.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Po.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new sB(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Va;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Km)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((fr||rr)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new oB(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function TX(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Va)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function AX(e,t){return e.type.side-t.type.side}function MX(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let f=e.child(d);r(f,i,t.forChild(s,f),d),s+=f.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let f,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(f?(p||(p=[f])).push(w):f=w)}if(f)if(p){p.sort(AX);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(f,d,!!u);let g,b;if(u)b=-1,g=u,u=null;else if(d<e.childCount)b=d,g=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let v=s+g.nodeSize;if(g.isText){let w=v;o<i.length&&i[o].from<w&&(w=i[o].from);for(let k=0;k<l.length;k++)l[k].to<w&&(w=l[k].to);w<v&&(u=g.cut(w-s),g=g.cut(0,w-s),v=w,b=-1)}else for(;o<i.length&&i[o].to<v;)o++;let S=g.isInline&&!g.isLeaf?l.filter(w=>!w.inline):l.slice();r(g,S,t.forChild(s,g),b),s=v}}function _X(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function DX(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function rk(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,f=l+=u.size;d>=n||f<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),f>n&&s.push(u.slice(n-d,u.size,r)))}return s}function ME(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(Wm(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Ve.isSelectable(p)&&i.parent&&!(p.isInline&&rX(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new Ve(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let b=0;b<n.rangeCount;b++){let v=n.getRangeAt(b);p=Math.min(p,e.docView.posFromDOM(v.startContainer,v.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[u,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let f=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=_E(e,f,l,p)}return d}function uB(e){return e.editable?e.hasFocus():fB(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ps(e,t=!1){let n=e.state.selection;if(dB(e,n),!!uB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&rr){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&qa(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)jX(e);else{let{anchor:r,head:i}=n,s,o;AD&&!(n instanceof Ye)&&(n.$from.parent.inlineContent||(s=MD(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=MD(e,n.to))),e.docView.setSelection(r,i,e,t),AD&&(s&&_D(s),o&&_D(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&RX(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const AD=fr||rr&&Q6<63;function MD(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(fr&&i&&i.contentEditable=="false")return mb(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return mb(i);if(s)return mb(s)}}function mb(e){return e.contentEditable="true",fr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function _D(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function RX(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!uB(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function jX(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,Gn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Er&&Lo<=11&&(n.disabled=!0,n.disabled=!1)}function dB(e,t){if(t instanceof Ve){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(DD(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else DD(e)}function DD(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function _E(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ye.between(t,n,r)}function RD(e){return e.editable&&!e.hasFocus()?!1:fB(e)}function fB(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function OX(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return qa(t.node,t.offset,n.anchorNode,n.anchorOffset)}function ik(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Qe.findFrom(s,t)}function ko(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function jD(e,t,n){let r=e.state.selection;if(r instanceof Ye)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return ko(e,new Ye(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=ik(e.state,t);return i&&i instanceof Ve?ko(e,i):!1}else if(!(di&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Ve.isSelectable(s)?ko(e,new Ve(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):of?ko(e,new Ye(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ve&&r.node.isInline)return ko(e,new Ye(t>0?r.$to:r.$from));{let i=ik(e.state,t);return i?ko(e,i):!1}}}function Pp(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function cd(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function ql(e,t){return t<0?LX(e):PX(e)}function LX(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(mi&&n.nodeType==1&&r<Pp(n)&&cd(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(cd(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(hB(n))break;{let l=n.previousSibling;for(;l&&cd(l,-1);)i=n.parentNode,s=Gn(l),l=l.previousSibling;if(l)n=l,r=Pp(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?sk(e,n,r):i&&sk(e,i,s)}function PX(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Pp(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(cd(l,1))s=n,o=++r;else break}else{if(hB(n))break;{let l=n.nextSibling;for(;l&&cd(l,1);)s=l.parentNode,o=Gn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Pp(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&sk(e,s,o)}function hB(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function IX(e,t){for(;e&&t==e.childNodes.length&&!sf(e);)t=Gn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function BX(e,t){for(;e&&!t&&!sf(e);)t=Gn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function sk(e,t,n){if(t.nodeType!=3){let s,o;(o=IX(t,n))?(t=o,n=0):(s=BX(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Wm(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Ps(e)},50)}function OD(e,t){let n=e.state.doc.resolve(t);if(!(rr||oX)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function LD(e,t,n){let r=e.state.selection;if(r instanceof Ye&&!r.empty||n.indexOf("s")>-1||di&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=ik(e.state,t);if(o&&o instanceof Ve)return ko(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof Wr?Qe.near(o,t):Qe.findFrom(o,t);return l?ko(e,l):!1}return!1}function PD(e,t){if(!(e.state.selection instanceof Ye))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function ID(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function zX(e){if(!fr||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;ID(e,r,"true"),setTimeout(()=>ID(e,r,"false"),20)}return!1}function qX(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function VX(e,t){let n=t.keyCode,r=qX(t);if(n==8||di&&n==72&&r=="c")return PD(e,-1)||ql(e,-1);if(n==46&&!t.shiftKey||di&&n==68&&r=="c")return PD(e,1)||ql(e,1);if(n==13||n==27)return!0;if(n==37||di&&n==66&&r=="c"){let i=n==37?OD(e,e.state.selection.from)=="ltr"?-1:1:-1;return jD(e,i,r)||ql(e,i)}else if(n==39||di&&n==70&&r=="c"){let i=n==39?OD(e,e.state.selection.from)=="ltr"?1:-1:1;return jD(e,i,r)||ql(e,i)}else{if(n==38||di&&n==80&&r=="c")return LD(e,-1,r)||ql(e,-1);if(n==40||di&&n==78&&r=="c")return zX(e)||LD(e,1,r)||ql(e,1);if(r==(di?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function DE(e,t){e.someProp("transformCopied",b=>{t=b(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let o=e.someProp("clipboardSerializer")||Za.fromSchema(e.state.schema),l=xB(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,f,p=0;for(;d&&d.nodeType==1&&(f=bB[d.nodeName.toLowerCase()]);){for(let b=f.length-1;b>=0;b--){let v=l.createElement(f[b]);for(;u.firstChild;)v.appendChild(u.firstChild);u.appendChild(v),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",b=>b(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:g,slice:t}}function pB(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new Ne(ye.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:b}=e.state,v=Za.fromSchema(b);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(v.serializeNode(b.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=$X(n),of&&GX(o);let d=o&&o.querySelector("[data-pm-slice]"),f=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let p=+f[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||od.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||f),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!HX.test(g.parentNode.nodeName)?{ignore:!0}:null}})),f)l=WX(BD(l,+f[1],+f[2]),f[4]);else if(l=Ne.maxOpen(FX(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let b=l.content.firstChild;p<l.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=l.content.lastChild;g<l.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);l=BD(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const HX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function FX(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&gB(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=yB(o[o.length-1],s.length));let f=mB(l,u);o.push(f),i=i.matchType(f.type),s=u}}),o)return ye.from(o)}return e}function mB(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ye.from(e));return e}function gB(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=gB(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(ye.from(mB(n,e,i+1))))}}function yB(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,yB(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ye.empty,!0);return e.copy(n.append(r))}function ok(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=ok(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(ye.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function BD(e,t,n){return t<e.openStart&&(e=new Ne(ok(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Ne(ok(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const bB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let zD=null;function xB(){return zD||(zD=document.implementation.createHTMLDocument("title"))}let gb=null;function UX(e){let t=window.trustedTypes;return t?(gb||(gb=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),gb.createHTML(e)):e}function $X(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=xB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&bB[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=UX(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function GX(e){let t=e.querySelectorAll(rr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function WX(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=ye.from(u.create(r[l+1],i)),s++,o++}return new Ne(i,s,o)}const hr={},pr={},KX={touchstart:!0,touchmove:!0};class YX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function XX(e){for(let t in hr){let n=hr[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{QX(e,r)&&!RE(e,r)&&(e.editable||!(r.type in pr))&&n(e,r)},KX[t]?{passive:!0}:void 0)}fr&&e.dom.addEventListener("input",()=>null),ak(e)}function jo(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ZX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ak(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>RE(e,r))})}function RE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function QX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function JX(e,t){!RE(e,t)&&hr[t.type]&&(e.editable||!(t.type in pr))&&hr[t.type](e,t)}pr.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!wB(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(js&&rr&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),mc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,va(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||VX(e,n)?n.preventDefault():jo(e,"key")};pr.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};pr.keypress=(e,t)=>{let n=t;if(wB(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||di&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ye)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function Ym(e){return{left:e.clientX,top:e.clientY}}function eZ(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function jE(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function sc(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function tZ(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Ve.isSelectable(r)?(sc(e,new Ve(n)),!0):!1}function nZ(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Ve&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Ve.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(sc(e,Ve.create(e.state.doc,i)),!0):!1}function rZ(e,t,n,r,i){return jE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?nZ(e,n):tZ(e,n))}function iZ(e,t,n,r){return jE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function sZ(e,t,n,r){return jE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||oZ(e,n,r)}function oZ(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(sc(e,Ye.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)sc(e,Ye.create(r,l+1,l+1+o.content.size));else if(Ve.isSelectable(o))sc(e,Ve.create(r,l));else continue;return!0}}function OE(e){return Ip(e)}const vB=di?"metaKey":"ctrlKey";hr.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=OE(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&eZ(n,e.input.lastClick)&&!n[vB]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(Ym(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new aZ(e,o,n,!!r)):(s=="doubleClick"?iZ:sZ)(e,o.pos,o.inside,n)?n.preventDefault():jo(e,"pointer"))};class aZ{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[vB],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let f=t.state.doc.resolve(n.pos);s=f.parent,o=f.depth?f.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Ve&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),jo(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ps(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Ym(t))),this.updateAllowDefault(t),this.allowDefault||!n?jo(this.view,"pointer"):rZ(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||fr&&this.mightDrag&&!this.mightDrag.node.isAtom||rr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(sc(this.view,Qe.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):jo(this.view,"pointer")}move(t){this.updateAllowDefault(t),jo(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}hr.touchstart=e=>{e.input.lastTouch=Date.now(),OE(e),jo(e,"pointer")};hr.touchmove=e=>{e.input.lastTouch=Date.now(),jo(e,"pointer")};hr.contextmenu=e=>OE(e);function wB(e,t){return e.composing?!0:fr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const lZ=js?5e3:-1;pr.compositionstart=pr.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ye&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Ip(e,!0),e.markCursor=null;else if(Ip(e,!t.selection.empty),mi&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}SB(e,lZ)};pr.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,SB(e,20))};function SB(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Ip(e),t))}function CB(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=uZ());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function cZ(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=tX(t.focusNode,t.focusOffset),r=nX(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function uZ(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Ip(e,t=!1){if(!(js&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),CB(e),t||e.docView&&e.docView.dirty){let n=ME(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function dZ(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const _d=Er&&Lo<15||mc&&aX<604;hr.copy=pr.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=_d?null:n.clipboardData,o=r.content(),{dom:l,text:u}=DE(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):dZ(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function fZ(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function hZ(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Dd(e,r.value,null,i,t):Dd(e,r.textContent,r.innerHTML,i,t)},50)}function Dd(e,t,n,r,i){let s=pB(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||Ne.empty)))return!0;if(!s)return!1;let o=fZ(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function kB(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}pr.paste=(e,t)=>{let n=t;if(e.composing&&!js)return;let r=_d?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Dd(e,kB(r),r.getData("text/html"),i,n)?n.preventDefault():hZ(e,n)};class EB{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const pZ=di?"altKey":"ctrlKey";function NB(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[pZ]}hr.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(Ym(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ve?i.to-1:i.to))){if(r&&r.mightDrag)o=Ve.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Ve.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:f}=DE(e,l);(!n.dataTransfer.files.length||!rr||Q6>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(_d?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",_d||n.dataTransfer.setData("text/plain",d),e.dragging=new EB(f,NB(e,n),o)};hr.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};pr.dragover=pr.dragenter=(e,t)=>t.preventDefault();pr.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Ym(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",v=>{o=v(o,e,!1)}):o=pB(e,kB(n.dataTransfer),_d?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&NB(e,n));if(e.someProp("handleDrop",v=>v(e,n,o||Ne.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?F6(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:v}=r;v?v.replace(d):d.deleteSelection()}let f=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(f,f,o.content.firstChild):d.replaceRange(f,f,o),d.doc.eq(g))return;let b=d.doc.resolve(f);if(p&&Ve.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Ve(b));else{let v=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,k,T)=>v=T),d.setSelection(_E(e,b,d.doc.resolve(v)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};hr.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ps(e)},20))};hr.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};hr.beforeinput=(e,t)=>{if(rr&&js&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,va(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in pr)hr[e]=pr[e];function Rd(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Bp{constructor(t,n){this.toDOM=t,this.spec=n||ja,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new dr(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Bp&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Rd(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Io{constructor(t,n){this.attrs=t,this.spec=n||ja}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new dr(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Io&&Rd(this.attrs,t.attrs)&&Rd(this.spec,t.spec)}static is(t){return t.type instanceof Io}destroy(){}}class LE{constructor(t,n){this.attrs=t,this.spec=n||ja}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new dr(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof LE&&Rd(this.attrs,t.attrs)&&Rd(this.spec,t.spec)}destroy(){}}class dr{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new dr(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new dr(t,t,new Bp(n,r))}static inline(t,n,r,i){return new dr(t,n,new Io(r,i))}static node(t,n,r,i){return new dr(t,n,new LE(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Io}get widget(){return this.type instanceof Bp}}const Gl=[],ja={};class Yt{constructor(t,n){this.local=t.length?t:Gl,this.children=n.length?n:Gl}static create(t,n){return n.length?zp(n,t,0,ja):tr}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==tr||t.maps.length==0?this:this.mapInner(t,n,0,0,r||ja)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?mZ(this.children,o||[],t,n,r,i,s):o?new Yt(o.sort(Oa),Gl):tr}add(t,n){return n.length?this==tr?Yt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,f;if(f=AB(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,f,d+1):i.splice(s,0,u,u+l.nodeSize,zp(f,l,d+1,ja)),s+=3}});let o=TB(s?MB(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Yt(o.length?this.local.concat(o).sort(Oa):this.local,i||this.children)}remove(t){return t.length==0||this==tr?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let f=0,p;f<t.length;f++)(p=t[f])&&p.from>l&&p.to<u&&(t[f]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=tr?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Yt(i,r):tr}forChild(t,n){if(this==tr)return this;if(n.isLeaf)return Yt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof Io){let d=Math.max(s,u.from)-s,f=Math.min(o,u.to)-s;d<f&&(i||(i=[])).push(u.copy(d,f))}}if(i){let l=new Yt(i.sort(Oa),Gl);return r?new To([l,r]):l}return r||tr}eq(t){if(this==t)return!0;if(!(t instanceof Yt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return PE(this.localsInner(t))}localsInner(t){if(this==tr)return Gl;if(t.inlineContent||!this.local.some(Io.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Io||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Yt.empty=new Yt([],[]);Yt.removeOverlap=PE;const tr=Yt.empty;class To{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,ja));return To.from(r)}forChild(t,n){if(n.isLeaf)return Yt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=tr&&(s instanceof To?r=r.concat(s.members):r.push(s))}return To.from(r)}eq(t){if(!(t instanceof To)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?PE(r?n:n.sort(Oa)):Gl}static from(t){switch(t.length){case 0:return tr;case 1:return t[0];default:return new To(t.every(n=>n instanceof Yt)?t:t.reduce((n,r)=>n.concat(r instanceof Yt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function mZ(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,f=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,b,v,S)=>{let w=S-v-(b-g);for(let k=0;k<l.length;k+=3){let T=l[k+1];if(T<0||g>T+f-p)continue;let E=l[k]+f-p;b>=E?l[k+1]=g<=E?-2:-1:g>=f&&w&&(l[k]+=w,l[k+1]+=w)}p+=w}),f=n.maps[d].map(f,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let f=n.map(e[d]+s),p=f-i;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(e[d+1]+s,-1),b=g-i,{index:v,offset:S}=r.content.findIndex(p),w=r.maybeChild(v);if(w&&S==p&&S+w.nodeSize==b){let k=l[d+2].mapInner(n,w,f+1,e[d]+s+1,o);k!=tr?(l[d]=p,l[d+1]=b,l[d+2]=k):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=gZ(l,e,t,n,i,s,o),f=zp(d,r,0,o);t=f.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<f.children.length;p+=3){let b=f.children[p];for(;g<l.length&&l[g]<b;)g+=3;l.splice(g,0,f.children[p],f.children[p+1],f.children[p+2])}}return new Yt(t.sort(Oa),l)}function TB(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new dr(i.from+t,i.to+t,i.type))}return n}function gZ(e,t,n,r,i,s,o){function l(u,d){for(let f=0;f<u.local.length;f++){let p=u.local[f].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[f].spec)}for(let f=0;f<u.children.length;f+=3)l(u.children[f+2],u.children[f]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function AB(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function MB(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function zp(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=AB(e,l,u+n);if(d){s=!0;let f=zp(d,l,n+u+1,r);f!=tr&&i.push(u,u+l.nodeSize,f)}});let o=TB(s?MB(e):e,-n).sort(Oa);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Yt(o,i):tr}function Oa(e,t){return e.from-t.from||e.to-t.to}function PE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),qD(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),qD(t,i,r.copy(s.from,r.to)));break}}}return t}function qD(e,t,n){for(;t<e.length&&Oa(n,e[t])>0;)t++;e.splice(t,0,n)}function yb(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=tr&&t.push(r)}),e.cursorWrapper&&t.push(Yt.create(e.state.doc,[e.cursorWrapper.deco])),To.from(t)}const yZ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bZ=Er&&Lo<=11;class xZ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class vZ{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new xZ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Er&&Lo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),bZ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yZ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(RD(this.view)){if(this.suppressingSelectionUpdates)return Ps(this.view);if(Er&&Lo<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&qa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=pc(s))n.add(s);for(let s=t.anchorNode;s;s=pc(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&RD(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let f=0;f<n.length;f++){let p=this.registerMutation(n[f],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(mi&&u.length){let f=u.filter(p=>p.nodeName=="BR");if(f.length==2){let[p,g]=f;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of f){let b=g.parentNode;b&&b.nodeName=="LI"&&(!p||CZ(t,p)!=b)&&g.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Wm(r)&&(d=ME(t))&&d.eq(Qe.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Ps(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),wZ(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Ps(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let f=0;f<t.addedNodes.length;f++){let p=t.addedNodes[f];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Er&&Lo<=11&&t.addedNodes.length)for(let f=0;f<t.addedNodes.length;f++){let{previousSibling:p,nextSibling:g}=t.addedNodes[f];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?Gn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?Gn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let VD=new WeakMap,HD=!1;function wZ(e){if(!VD.has(e)&&(VD.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=mi,HD)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),HD=!0}}function FD(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return qa(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function SZ(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return FD(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?FD(e,n):null}function CZ(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function kZ(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,f=u.anchorNode;if(f&&e.dom.contains(f.nodeType==1?f:f.parentNode)&&(d=[{node:f,offset:u.anchorOffset}],Wm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),rr&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let k=r.childNodes[w-1],T=k.pmViewDesc;if(k.nodeName=="BR"&&!T){s=w;break}if(!T||T.size)break}let p=e.state.doc,g=e.someProp("domParser")||od.fromSchema(e.state.schema),b=p.resolve(o),v=null,S=g.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:EZ,context:b});if(d&&d[0].pos!=null){let w=d[0].pos,k=d[1]&&d[1].pos;k==null&&(k=w),v={anchor:w+o,head:k+o}}return{doc:S,sel:v,from:o,to:l}}function EZ(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(fr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||fr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const NZ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function TZ(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let R=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=ME(e,R);if(I&&!e.state.selection.eq(I)){if(rr&&js&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",U=>U(e,va(13,"Enter"))))return;let B=e.state.tr.setSelection(I);R=="pointer"?B.setMeta("pointer",!0):R=="key"&&B.scrollIntoView(),s&&B.setMeta("composition",s),e.dispatch(B)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=kZ(e,t,n),f=e.state.doc,p=f.slice(d.from,d.to),g,b;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,b="end"):(g=e.state.selection.from,b="start"),e.input.lastKeyCode=null;let v=_Z(p.content,d.doc.content,d.from,g,b);if(v&&e.input.domChangeCount++,(mc&&e.input.lastIOSEnter>Date.now()-225||js)&&i.some(R=>R.nodeType==1&&!NZ.test(R.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",R=>R(e,va(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!v)if(r&&u instanceof Ye&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=UD(e,e.state.doc,d.sel);if(R&&!R.eq(e.state.selection)){let I=e.state.tr.setSelection(R);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof Ye&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),Er&&Lo<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)==" "&&(v.start--,v.endA--,v.endB--);let S=d.doc.resolveNoCache(v.start-d.from),w=d.doc.resolveNoCache(v.endB-d.from),k=f.resolve(v.start),T=S.sameParent(w)&&S.parent.inlineContent&&k.end()>=v.endA,E;if((mc&&e.input.lastIOSEnter>Date.now()-225&&(!T||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!T&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(E=Qe.findFrom(d.doc.resolve(S.pos+1),1,!0))&&E.head>S.pos)&&e.someProp("handleKeyDown",R=>R(e,va(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>v.start&&MZ(f,v.start,v.endA,S,w)&&e.someProp("handleKeyDown",R=>R(e,va(8,"Backspace")))){js&&rr&&e.domObserver.suppressSelectionUpdates();return}rr&&v.endB==v.start&&(e.input.lastChromeDelete=Date.now()),js&&!T&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,w=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(R){return R(e,va(13,"Enter"))})},20));let N=v.start,A=v.endA,_=R=>{let I=R||e.state.tr.replace(N,A,d.doc.slice(v.start-d.from,v.endB-d.from));if(d.sel){let B=UD(e,I.doc,d.sel);B&&!(rr&&e.composing&&B.empty&&(v.start!=v.endB||e.input.lastChromeDelete<Date.now()-100)&&(B.head==N||B.head==I.mapping.map(A)-1)||Er&&B.empty&&B.head==N)&&I.setSelection(B)}return s&&I.setMeta("composition",s),I.scrollIntoView()},j;if(T){if(S.pos==w.pos){Er&&Lo<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ps(e),20));let R=_(e.state.tr.delete(N,A)),I=f.resolve(v.start).marksAcross(f.resolve(v.endA));I&&R.ensureMarks(I),e.dispatch(R)}else if(v.endA==v.endB&&(j=AZ(S.parent.content.cut(S.parentOffset,w.parentOffset),k.parent.content.cut(k.parentOffset,v.endA-k.start())))){let R=_(e.state.tr);j.type=="add"?R.addMark(N,A,j.mark):R.removeMark(N,A,j.mark),e.dispatch(R)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let R=S.parent.textBetween(S.parentOffset,w.parentOffset),I=()=>_(e.state.tr.insertText(R,N,A));e.someProp("handleTextInput",B=>B(e,N,A,R,I))||e.dispatch(I())}}else e.dispatch(_())}function UD(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:_E(e,t.resolve(n.anchor),t.resolve(n.head))}function AZ(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let f=0;f<r.length;f++)i=r[f].removeFromSet(i);for(let f=0;f<n.length;f++)s=n[f].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=f=>f.mark(l.addToSet(f.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=f=>f.mark(l.removeFromSet(f.marks));else return null;let d=[];for(let f=0;f<t.childCount;f++)d.push(u(t.child(f)));if(ye.from(d).eq(e))return{mark:l,type:o}}function MZ(e,t,n,r,i){if(n-t<=i.pos-r.pos||bb(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(bb(s,!0,!0));return!o.parent.isTextblock||o.pos>n||bb(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function bb(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function _Z(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&$D(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&$D(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function $D(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class _B{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new YX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(XD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=KD(this),WD(this),this.nodeViews=YD(this),this.docView=ND(this.state.doc,GD(this),yb(this),this.dom,this),this.domObserver=new vZ(this,(r,i,s,o)=>TZ(this,r,i,s,o)),this.domObserver.start(),XX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ak(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(XD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(CB(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=YD(this);RZ(b,this.nodeViews)&&(this.nodeViews=b,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&ak(this),this.editable=KD(this),WD(this);let u=yb(this),d=GD(this),f=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let g=f=="preserve"&&o&&this.dom.style.overflowAnchor==null&&uX(this);if(o){this.domObserver.stop();let b=p&&(Er||rr)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&DZ(i.selection,t.selection);if(p){let v=rr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=cZ(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=ND(t.doc,d,u,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&OX(this))?Ps(this,b):(dB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():g&&dX(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ve){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&vD(this,n.getBoundingClientRect(),t)}else vD(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new EB(t.slice,t.move,i<0?void 0:Ve.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Er){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&fX(this.dom),Ps(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return yX(this,t)}coordsAtPos(t,n=1){return rB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return SX(this,n||this.state,t)}pasteHTML(t,n){return Dd(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Dd(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return DE(this,t)}destroy(){this.docView&&(ZX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],yb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,JY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return JX(this,t)}domSelectionRange(){let t=this.domSelection();return t?fr&&this.root.nodeType===11&&iX(this.dom.ownerDocument)==this.dom&&SZ(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}_B.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function GD(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[dr.node(0,e.state.doc.content.size,t)]}function WD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:dr.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function KD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function DZ(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function YD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function RZ(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function XD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ho={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jZ=typeof navigator<"u"&&/Mac/.test(navigator.platform),OZ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wn=0;Wn<10;Wn++)Ho[48+Wn]=Ho[96+Wn]=String(Wn);for(var Wn=1;Wn<=24;Wn++)Ho[Wn+111]="F"+Wn;for(var Wn=65;Wn<=90;Wn++)Ho[Wn]=String.fromCharCode(Wn+32),qp[Wn]=String.fromCharCode(Wn);for(var xb in Ho)qp.hasOwnProperty(xb)||(qp[xb]=Ho[xb]);function LZ(e){var t=jZ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||OZ&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?qp:Ho)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const PZ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),IZ=typeof navigator<"u"&&/Win/.test(navigator.platform);function BZ(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))PZ?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function zZ(e){let t=Object.create(null);for(let n in e)t[BZ(n)]=e[n];return t}function vb(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function qZ(e){return new sn({props:{handleKeyDown:DB(e)}})}function DB(e){let t=zZ(e);return function(n,r){let i=LZ(r),s,o=t[vb(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[vb(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(IZ&&r.ctrlKey&&r.altKey)&&(s=Ho[r.keyCode])&&s!=i){let l=t[vb(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const IE=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function RB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const jB=(e,t,n)=>{let r=RB(e,n);if(!r)return!1;let i=BE(r);if(!i){let o=r.blockRange(),l=o&&Ac(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(HB(e,i,t,-1))return!0;if(r.parent.content.size==0&&(gc(s,"end")||Ve.isSelectable(s)))for(let o=r.depth;;o--){let l=$m(e.doc,r.before(o),r.after(o),Ne.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(gc(s,"end")?Qe.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Ve.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},VZ=(e,t,n)=>{let r=RB(e,n);if(!r)return!1;let i=BE(r);return i?OB(e,i,t):!1},HZ=(e,t,n)=>{let r=PB(e,n);if(!r)return!1;let i=zE(r);return i?OB(e,i,t):!1};function OB(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let f=l.firstChild;if(!f)return!1;l=f}let d=$m(e.doc,s,u,Ne.empty);if(!d||d.from!=s||d instanceof On&&d.slice.size>=u-s)return!1;if(n){let f=e.tr.step(d);f.setSelection(Ye.create(f.doc,s)),n(f.scrollIntoView())}return!0}function gc(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const LB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=BE(r)}let o=s&&s.nodeBefore;return!o||!Ve.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Ve.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function BE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function PB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const IB=(e,t,n)=>{let r=PB(e,n);if(!r)return!1;let i=zE(r);if(!i)return!1;let s=i.nodeAfter;if(HB(e,i,t,1))return!0;if(r.parent.content.size==0&&(gc(s,"start")||Ve.isSelectable(s))){let o=$m(e.doc,r.before(),r.after(),Ne.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(gc(s,"start")?Qe.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Ve.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},BB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=zE(r)}let o=s&&s.nodeAfter;return!o||!Ve.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Ve.create(e.doc,s.pos)).scrollIntoView()),!0)};function zE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const FZ=(e,t)=>{let n=e.selection,r=n instanceof Ve,i;if(r){if(n.node.isTextblock||!Go(e.doc,n.from))return!1;i=n.from}else if(i=Um(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Ve.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},UZ=(e,t)=>{let n=e.selection,r;if(n instanceof Ve){if(n.node.isTextblock||!Go(e.doc,n.to))return!1;r=n.to}else if(r=Um(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},$Z=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Ac(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},zB=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function qE(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const GZ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=qE(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Qe.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},qB=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Wr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=qE(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ye.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},VB=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Ls(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ac(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function WZ(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Ve&&t.selection.node.isBlock)return!r.parentOffset||!Ls(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){u=r.end(b)==r.pos+(r.depth-b),d=r.start(b)==r.pos-(r.depth-b),l=qE(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),s.unshift(u&&l?{type:l}:null),o=b;break}else{if(b==1)return!1;s.unshift(null)}let f=t.tr;(t.selection instanceof Ye||t.selection instanceof Wr)&&f.deleteSelection();let p=f.mapping.map(r.pos),g=Ls(f.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=Ls(f.doc,p,s.length,s)),!g)return!1;if(f.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let b=f.mapping.map(r.before(o)),v=f.doc.resolve(b);l&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,l)&&f.setNodeMarkup(f.mapping.map(r.before(o)),l)}return n&&n(f.scrollIntoView()),!0}}const KZ=WZ(),YZ=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Ve.create(e.doc,i))),!0)};function XZ(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Go(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function HB(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&XZ(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let b=t.pos+s.nodeSize,v=ye.empty;for(let k=o.length-1;k>=0;k--)v=ye.from(o[k].create(null,v));v=ye.from(i.copy(v));let S=e.tr.step(new Ln(t.pos-1,b,t.pos,b,new Ne(v,1,0),o.length,!0)),w=S.doc.resolve(b+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&Go(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let f=s.type.spec.isolating||r>0&&u?null:Qe.findFrom(t,1),p=f&&f.$from.blockRange(f.$to),g=p&&Ac(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(d&&gc(s,"start",!0)&&gc(i,"end")){let b=i,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(b.canReplace(b.childCount,b.childCount,S.content)){if(n){let k=ye.empty;for(let E=v.length-1;E>=0;E--)k=ye.from(v[E].copy(k));let T=e.tr.step(new Ln(t.pos-v.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new Ne(k,v.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function FB(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ye.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const ZZ=FB(-1),QZ=FB(1);function JZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&NE(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function ZD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let f=n.doc.resolve(d),p=f.index();i=f.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function VE(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}VE(IE,jB,LB);VE(IE,IB,BB);VE(zB,qB,VB,KZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function eQ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return tQ(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function tQ(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new jp(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new jp(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=NE(s,n,r,t);return l?(e&&nQ(e,t,l,i,n),!0):!1}function nQ(e,t,n,r,i){let s=ye.empty;for(let f=n.length-1;f>=0;f--)s=ye.from(n[f].type.create(n[f].attrs,s));e.step(new Ln(t.start-(r?2:0),t.end,t.start,t.end,new Ne(s,0,0),n.length,!0));let o=0;for(let f=0;f<n.length;f++)n[f].type==i&&(o=f+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let f=t.startIndex,p=t.endIndex,g=!0;f<p;f++,g=!1)!g&&Ls(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(f).nodeSize;return e}function rQ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?iQ(t,n,e,s):sQ(t,n,s):!0:!1}}function iQ(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ln(s-1,o,s,o,new Ne(ye.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new jp(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Ac(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return Go(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function sQ(e,t,n){let r=e.tr,i=n.parent;for(let b=n.end,v=n.endIndex-1,S=n.startIndex;v>S;v--)b-=i.child(v).nodeSize,r.delete(b-1,b+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),f=s.index(-1);if(!d.canReplace(f+(l?0:1),f+1,o.content.append(u?ye.empty:ye.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new Ln(p-(l?1:0),g+(u?1:0),p+1,g-1,new Ne((l?ye.empty:ye.from(i.copy(ye.empty))).append(u?ye.empty:ye.from(i.copy(ye.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function oQ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,f=ye.from(d?e.create():null),p=new Ne(ye.from(e.create(null,ye.from(l.type.create(null,f)))),d?3:1,0),g=s.start,b=s.end;n(t.tr.step(new Ln(g-(d?3:1),b,g,b,p,1,!0)).scrollIntoView())}return!0}}var aQ=Object.defineProperty,UB=(e,t)=>{for(var n in t)aQ(e,n,{get:t[n],enumerable:!0})};function Xm(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Zm=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const f=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...v)=>{const S=this.buildProps(u,t),w=g(...v)(S);return o.push(w),f}])),run:d};return f}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:Xm({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},lQ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function $B(e,t){const n=new K6(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var GB=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&GB(r)}return e};function zh(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return GB(n)}function jd(e,t,n){if(e instanceof Oo||e instanceof ye)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return ye.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),jd("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new R6({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?od.fromSchema(u).parseSlice(zh(e),n.parseOptions):od.fromSchema(u).parse(zh(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=od.fromSchema(t);return n.slice?s.parseSlice(zh(e),n.parseOptions).content:s.parse(zh(e),n.parseOptions)}return jd("",t,n)}function lk(e,t,n={},r={}){return jd(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function cQ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function uQ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function dQ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Qm(e){return t=>dQ(t.$from,e)}function qe(e,t,n){return e.config[t]===void 0&&e.parent?qe(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?qe(e.parent,t,n):null}):e.config[t]}function HE(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=qe(t,"addExtensions",n);return r?[t,...HE(r())]:t}).flat(10)}function FE(e,t){const n=Za.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function WB(e){return typeof e=="function"}function St(e,t=void 0,...n){return WB(e)?t?e.bind(t)(...n):e(...n):e}function fQ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Od(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function KB(e){const t=[],{nodeExtensions:n,markExtensions:r}=Od(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=qe(o,"addGlobalAttributes",l);if(!u)return;u().forEach(f=>{f.types.forEach(p=>{Object.entries(f.attributes).forEach(([g,b])=>{t.push({type:p,name:g,attribute:{...s,...b}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=qe(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([f,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:f,attribute:g})})}),t}function wn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(f=>!u.includes(f));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(f=>f.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],d=new Map;u.forEach(f=>{const[p,g]=f.split(":").map(b=>b.trim());d.set(p,g)}),l.forEach(f=>{const[p,g]=f.split(":").map(b=>b.trim());d.set(p,g)}),r[i]=Array.from(d.entries()).map(([f,p])=>`${f}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Vp(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>wn(n,r),{})}function hQ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function QD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):hQ(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function JD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&fQ(n)?!1:n!=null))}function pQ(e,t){var n;const r=KB(e),{nodeExtensions:i,markExtensions:s}=Od(e),o=(n=i.find(d=>qe(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const f=r.filter(k=>k.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((k,T)=>{const E=qe(T,"extendNodeSchema",p);return{...k,...E?E(d):{}}},{}),b=JD({...g,content:St(qe(d,"content",p)),marks:St(qe(d,"marks",p)),group:St(qe(d,"group",p)),inline:St(qe(d,"inline",p)),atom:St(qe(d,"atom",p)),selectable:St(qe(d,"selectable",p)),draggable:St(qe(d,"draggable",p)),code:St(qe(d,"code",p)),whitespace:St(qe(d,"whitespace",p)),linebreakReplacement:St(qe(d,"linebreakReplacement",p)),defining:St(qe(d,"defining",p)),isolating:St(qe(d,"isolating",p)),attrs:Object.fromEntries(f.map(k=>{var T,E;return[k.name,{default:(T=k?.attribute)==null?void 0:T.default,validate:(E=k?.attribute)==null?void 0:E.validate}]}))}),v=St(qe(d,"parseHTML",p));v&&(b.parseDOM=v.map(k=>QD(k,f)));const S=qe(d,"renderHTML",p);S&&(b.toDOM=k=>S({node:k,HTMLAttributes:Vp(k,f)}));const w=qe(d,"renderText",p);return w&&(b.toText=w),[d.name,b]})),u=Object.fromEntries(s.map(d=>{const f=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((w,k)=>{const T=qe(k,"extendMarkSchema",p);return{...w,...T?T(d):{}}},{}),b=JD({...g,inclusive:St(qe(d,"inclusive",p)),excludes:St(qe(d,"excludes",p)),group:St(qe(d,"group",p)),spanning:St(qe(d,"spanning",p)),code:St(qe(d,"code",p)),attrs:Object.fromEntries(f.map(w=>{var k,T;return[w.name,{default:(k=w?.attribute)==null?void 0:k.default,validate:(T=w?.attribute)==null?void 0:T.validate}]}))}),v=St(qe(d,"parseHTML",p));v&&(b.parseDOM=v.map(w=>QD(w,f)));const S=qe(d,"renderHTML",p);return S&&(b.toDOM=w=>S({mark:w,HTMLAttributes:Vp(w,f)})),[d.name,b]}));return new R6({topNode:o,nodes:l,marks:u})}function mQ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function UE(e){return e.sort((n,r)=>{const i=qe(n,"priority")||100,s=qe(r,"priority")||100;return i>s?-1:i<s?1:0})}function YB(e){const t=UE(HE(e)),n=mQ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function XB(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,f,p)=>{var g;u.isBlock&&d>r&&(l+=s);const b=o?.[u.type.name];if(b)return f&&(l+=b({node:u,pos:d,parent:f,index:p,range:t})),!1;u.isText&&(l+=(g=u?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),l}function gQ(e,t){const n={from:0,to:e.content.size};return XB(e,n,t)}function ZB(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function Vs(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function QB(e,t){const n=Vs(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Sn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function yQ(e,t){const n=Sn(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Jm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function JB(e,t){const n=Jm(typeof t=="string"?t:t.name,e.schema);return n==="node"?yQ(e,t):n==="mark"?QB(e,t):{}}function bQ(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function xQ(e){const t=bQ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function ez(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),f=t.slice(s).map(u),p=t.invert().map(d,-1),g=t.invert().map(f);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:f}})})}),xQ(r)}function $E(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Hp(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:$E(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function tz(e,t,n={}){return e.find(r=>r.type===t&&Hp(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function eR(e,t,n={}){return!!tz(e,t,n)}function GE(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!tz([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&eR([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&eR([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function WE(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=GE(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var vQ=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function wb(e,t){return t.nodes[e]||t.marks[e]||null}function dp(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var wQ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const f=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?f:f.slice(0,Math.max(0,r-s))}),n};function ck(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Vs(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Hp(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const b=p.pos,v=g.pos;e.doc.nodesBetween(b,v,(S,w)=>{if(!S.isText&&!S.marks.length)return;const k=Math.max(b,w),T=Math.min(v,w+S.nodeSize),E=T-k;o+=E,l.push(...S.marks.map(N=>({mark:N,from:k,to:T})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Hp(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=o}function Fo(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Sn(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const b=Math.max(r,g),v=Math.min(i,g+p.nodeSize);l.push({node:p,from:b,to:v})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Hp(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}function SQ(e,t,n={}){if(!t)return Fo(e,null,n)||ck(e,null,n);const r=Jm(t,e.schema);return r==="node"?Fo(e,t,n):r==="mark"?ck(e,t,n):!1}var CQ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=Qm(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},kQ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function tR(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function nR(e,t){const{nodeExtensions:n}=Od(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=St(qe(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function eg(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(eg(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function nz(e){return e instanceof Ve}function rz(e){return e instanceof Ye}function Ea(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function iz(e,t=null){if(!t)return null;const n=Qe.atStart(e),r=Qe.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ye.create(e,Ea(0,i,s),Ea(e.content.size,i,s)):Ye.create(e,Ea(t,i,s),Ea(t,i,s))}function EQ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof On||i instanceof Ln))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,f)=>{o===0&&(o=f)}),e.setSelection(Qe.near(e.doc.resolve(o),n))}var tg=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},NQ=(e,t)=>{if($E(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function qh(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let f=!1;const p=wQ(d)+s;return o.forEach(g=>{if(f)return;const b=NQ(p,g.find);if(!b)return;const v=u.state.tr,S=Xm({state:u.state,transaction:v}),w={from:r-(b[0].length-s.length),to:i},{commands:k,chain:T,can:E}=new Zm({editor:n,state:S});g.handler({state:S,range:w,match:b,commands:k,chain:T,can:E})===null||!v.steps.length||(g.undoable&&v.setMeta(l,{transform:v,from:r,to:i,text:s}),u.dispatch(v),f=!0)}),f}function TQ(e){const{editor:t,rules:n}=e,r=new sn({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:f}=u;typeof f=="string"?f=f:f=FE(ye.from(f),o.schema);const{from:p}=u,g=p+f.length;qh({editor:t,from:p,to:g,text:f,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return qh({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&qh({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?qh({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function AQ(e){return Object.prototype.toString.call(e).slice(8,-1)}function Vh(e){return AQ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function sz(e,t){const n={...e};return Vh(e)&&Vh(t)&&Object.keys(t).forEach(r=>{Vh(t[r])&&Vh(e[r])?n[r]=sz(e[r],t[r]):n[r]=t[r]}),n}var KE=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...St(qe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...St(qe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>sz(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Qa=class oz extends KE{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new oz(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function MQ(e){return typeof e=="number"}var _Q=class{constructor(e){this.find=e.find,this.handler=e.handler}},DQ=(e,t,n)=>{if($E(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function RQ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:f}=new Zm({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(b,v)=>{var S,w,k,T,E;if((w=(S=b.type)==null?void 0:S.spec)!=null&&w.code||!(b.isText||b.isTextblock||b.isInline))return;const N=(E=(T=(k=b.content)==null?void 0:k.size)!=null?T:b.nodeSize)!=null?E:0,A=Math.max(r,v),_=Math.min(i,v+N);if(A>=_)return;const j=b.isText?b.text||"":b.textBetween(A-v,_-v,void 0,"");DQ(j,s.find,o).forEach(I=>{if(I.index===void 0)return;const B=A+I.index+1,U=B+I[0].length,q={from:n.tr.mapping.map(B),to:n.tr.mapping.map(U)},F=s.handler({state:n,range:q,match:I,commands:u,chain:d,can:f,pasteEvent:o,dropEvent:l});p.push(F)})}),p.every(b=>b!==null)}var Hh=null,jQ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function OQ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:f,from:p,to:g,rule:b,pasteEvt:v})=>{const S=f.tr,w=Xm({state:f,transaction:S});if(!(!RQ({editor:t,state:w,from:Math.max(p-1,0),to:g.b-1,rule:b,pasteEvent:v,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(f=>new sn({view(p){const g=v=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(v.target)?p.dom.parentElement:null,r&&(Hh=t)},b=()=>{Hh&&(Hh=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const b=Hh;b?.isEditable&&setTimeout(()=>{const v=b.state.selection;v&&b.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,g)=>{var b;const v=(b=g.clipboardData)==null?void 0:b.getData("text/html");return o=g,i=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,b)=>{const v=p[0],S=v.getMeta("uiEvent")==="paste"&&!i,w=v.getMeta("uiEvent")==="drop"&&!s,k=v.getMeta("applyPasteRules"),T=!!k;if(!S&&!w&&!T)return;if(T){let{text:A}=k;typeof A=="string"?A=A:A=FE(ye.from(A),b.schema);const{from:_}=k,j=_+A.length,R=jQ(A);return u({rule:f,state:b,from:_,to:{b:j},pasteEvt:R})}const E=g.doc.content.findDiffStart(b.doc.content),N=g.doc.content.findDiffEnd(b.doc.content);if(!(!MQ(E)||!N||E===N.b))return u({rule:f,state:b,from:E,to:N,pasteEvt:o})}}))}var ng=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=YB(e),this.schema=pQ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:wb(t.name,this.schema)},r=qe(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return UE([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:wb(r.name,this.schema)},s=[],o=qe(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&qe(r,"exitable",i)&&(l.ArrowRight=()=>Qa.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([b,v])=>[b,()=>v({editor:e})]));l={...l,...g}}const u=qZ(l);s.push(u);const d=qe(r,"addInputRules",i);if(tR(r,e.options.enableInputRules)&&d){const g=d();if(g&&g.length){const b=TQ({editor:e,rules:g}),v=Array.isArray(b)?b:[b];s.push(...v)}}const f=qe(r,"addPasteRules",i);if(tR(r,e.options.enablePasteRules)&&f){const g=f();if(g&&g.length){const b=OQ({editor:e,rules:g});s.push(...b)}}const p=qe(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return KB(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Od(this.extensions);return Object.fromEntries(t.filter(n=>!!qe(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Sn(n.name,this.schema)},s=qe(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,f,p)=>{const g=Vp(l,r);return s()({node:l,view:u,getPos:d,decorations:f,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Od(this.extensions);return Object.fromEntries(t.filter(n=>!!qe(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Vs(n.name,this.schema)},s=qe(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const f=Vp(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:f,updateAttributes:p=>{XJ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:wb(t.name,this.schema)};t.type==="mark"&&((n=St(qe(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=qe(t,"onBeforeCreate",r),s=qe(t,"onCreate",r),o=qe(t,"onUpdate",r),l=qe(t,"onSelectionUpdate",r),u=qe(t,"onTransaction",r),d=qe(t,"onFocus",r),f=qe(t,"onBlur",r),p=qe(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),f&&this.editor.on("blur",f),p&&this.editor.on("destroy",p)})}};ng.resolve=YB;ng.sort=UE;ng.flatten=HE;var LQ={};UB(LQ,{ClipboardTextSerializer:()=>lz,Commands:()=>dz,Delete:()=>fz,Drop:()=>hz,Editable:()=>pz,FocusEvents:()=>gz,Keymap:()=>yz,Paste:()=>bz,Tabindex:()=>xz,focusEventsPluginKey:()=>mz});var cn=class az extends KE{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new az(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},lz=cn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new sn({key:new In("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(f=>f.$from.pos)),l=Math.max(...s.map(f=>f.$to.pos)),u=ZB(n);return XB(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),cz={};UB(cz,{blur:()=>PQ,clearContent:()=>IQ,clearNodes:()=>BQ,command:()=>zQ,createParagraphNear:()=>qQ,cut:()=>VQ,deleteCurrentNode:()=>HQ,deleteNode:()=>FQ,deleteRange:()=>UQ,deleteSelection:()=>$Q,enter:()=>GQ,exitCode:()=>WQ,extendMarkRange:()=>KQ,first:()=>YQ,focus:()=>ZQ,forEach:()=>QQ,insertContent:()=>JQ,insertContentAt:()=>tJ,joinBackward:()=>iJ,joinDown:()=>rJ,joinForward:()=>sJ,joinItemBackward:()=>oJ,joinItemForward:()=>aJ,joinTextblockBackward:()=>lJ,joinTextblockForward:()=>cJ,joinUp:()=>nJ,keyboardShortcut:()=>dJ,lift:()=>fJ,liftEmptyBlock:()=>hJ,liftListItem:()=>pJ,newlineInCode:()=>mJ,resetAttributes:()=>gJ,scrollIntoView:()=>yJ,selectAll:()=>bJ,selectNodeBackward:()=>xJ,selectNodeForward:()=>vJ,selectParentNode:()=>wJ,selectTextblockEnd:()=>SJ,selectTextblockStart:()=>CJ,setContent:()=>kJ,setMark:()=>NJ,setMeta:()=>TJ,setNode:()=>AJ,setNodeSelection:()=>MJ,setTextSelection:()=>_J,sinkListItem:()=>DJ,splitBlock:()=>RJ,splitListItem:()=>jJ,toggleList:()=>OJ,toggleMark:()=>LJ,toggleNode:()=>PJ,toggleWrap:()=>IJ,undoInputRule:()=>BJ,unsetAllMarks:()=>zJ,unsetMark:()=>qJ,updateAttributes:()=>VJ,wrapIn:()=>HJ,wrapInList:()=>FJ});var PQ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),IQ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),BQ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:f}=t,p=d.resolve(f.map(u)),g=d.resolve(f.map(u+l.nodeSize)),b=p.blockRange(g);if(!b)return;const v=Ac(b);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(b.start,S)}(v||v===0)&&t.lift(b,v)})}),!0},zQ=e=>t=>e(t),qQ=()=>({state:e,dispatch:t})=>qB(e,t),VQ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ye(r.doc.resolve(Math.max(o-1,0)))),!0},HQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},FQ=e=>({tr:t,state:n,dispatch:r})=>{const i=Sn(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},UQ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},$Q=()=>({state:e,dispatch:t})=>IE(e,t),GQ=()=>({commands:e})=>e.keyboardShortcut("Enter"),WQ=()=>({state:e,dispatch:t})=>GZ(e,t),KQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Vs(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:f}=l;if(i){const p=GE(u,s,t);if(p&&p.from<=d&&p.to>=f){const g=Ye.create(o,p.from,p.to);n.setSelection(g)}}return!0},YQ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function XQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function YE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var ZQ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(YE()||XQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!rz(n.state.selection))return o(),!0;const l=iz(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},QQ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),JQ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),eJ=e=>!("type"in e),tJ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{jd(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=jd(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:f,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,b=!0;if((eJ(l)?l:[l]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,b=b?w.isBlock:!1}),f===p&&b){const{parent:w}=r.doc.resolve(f);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(f-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof ye){let w="";t.forEach(k=>{k.text&&(w+=k.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,f,p)}else{S=l;const w=r.doc.resolve(f),k=w.node(),T=w.parentOffset===0,E=k.isText||k.isTextblock,N=k.content.size>0;T&&E&&N&&(f=Math.max(0,f-1)),r.replaceWith(f,p,S)}n.updateSelection&&EQ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:S})}return!0},nJ=()=>({state:e,dispatch:t})=>FZ(e,t),rJ=()=>({state:e,dispatch:t})=>UZ(e,t),iJ=()=>({state:e,dispatch:t})=>jB(e,t),sJ=()=>({state:e,dispatch:t})=>IB(e,t),oJ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Um(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},aJ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Um(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},lJ=()=>({state:e,dispatch:t})=>VZ(e,t),cJ=()=>({state:e,dispatch:t})=>HZ(e,t);function uz(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function uJ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))YE()||uz()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var dJ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=uJ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const f=d.map(r.mapping);f&&i&&r.maybeStep(f)}),!0},fJ=(e,t={})=>({state:n,dispatch:r})=>{const i=Sn(e,n.schema);return Fo(n,i,t)?$Z(n,r):!1},hJ=()=>({state:e,dispatch:t})=>VB(e,t),pJ=e=>({state:t,dispatch:n})=>{const r=Sn(e,t.schema);return rQ(r)(t,n)},mJ=()=>({state:e,dispatch:t})=>zB(e,t);function rR(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var gJ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Jm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Sn(e,r.schema)),l==="mark"&&(o=Vs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,rR(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(f,f+d.nodeSize,o.create(rR(p.attrs,t)))})})}),!0):!1},yJ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),bJ=()=>({tr:e,dispatch:t})=>{if(t){const n=new Wr(e.doc);e.setSelection(n)}return!0},xJ=()=>({state:e,dispatch:t})=>LB(e,t),vJ=()=>({state:e,dispatch:t})=>BB(e,t),wJ=()=>({state:e,dispatch:t})=>YZ(e,t),SJ=()=>({state:e,dispatch:t})=>QZ(e,t),CJ=()=>({state:e,dispatch:t})=>ZZ(e,t),kJ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=lk(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function EJ(e,t,n){var r;const{selection:i}=t;let s=null;if(rz(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(f,p,g)=>{if(d)return!1;if(f.isInline){const b=!g||g.type.allowsMarkType(n),v=!!n.isInSet(f.marks)||!f.marks.some(S=>S.type.excludes(n));d=b&&v}return!d}),d})}var NJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=Vs(e,r.schema);if(i)if(o){const d=QB(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(f,p,(g,b)=>{const v=Math.max(b,f),S=Math.min(b+g.nodeSize,p);g.marks.find(k=>k.type===u)?g.marks.forEach(k=>{u===k.type&&n.addMark(v,S,u.create({...k.attrs,...t}))}):n.addMark(v,S,u.create(t))})});return EJ(r,n,u)},TJ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),AJ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Sn(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>ZD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>ZD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},MJ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Ea(e,0,r.content.size),s=Ve.create(r,i);t.setSelection(s)}return!0},_J=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ye.atStart(r).from,l=Ye.atEnd(r).to,u=Ea(i,o,l),d=Ea(s,o,l),f=Ye.create(r,u,d);t.setSelection(f)}return!0},DJ=e=>({state:t,dispatch:n})=>{const r=Sn(e,t.schema);return oQ(r)(t,n)};function iR(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var RJ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,f=dp(d,l.node().type.name,l.node().attrs);if(s instanceof Ve&&s.node.isBlock)return!l.parentOffset||!Ls(o,l.pos)?!1:(r&&(e&&iR(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=l.depth===0?void 0:cQ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let b=p&&g?[{type:g,attrs:f}]:void 0,v=Ls(t.doc,t.mapping.map(l.pos),1,b);if(!b&&!v&&Ls(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(v=!0,b=g?[{type:g,attrs:f}]:void 0),r){if(v&&(s instanceof Ye&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,b),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&iR(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return v},jJ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Sn(e,r.schema),{$from:u,$to:d}=r.selection,f=r.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let k=ye.empty;const T=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-T;R>=u.depth-3;R-=1)k=ye.from(u.node(R).copy(k));const E=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,N={...dp(g,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(N))||void 0;k=k.append(ye.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(T-1));n.replace(_,u.after(-E),new Ne(k,4-T,0));let j=-1;n.doc.nodesBetween(_,n.doc.content.size,(R,I)=>{if(j>-1)return!1;R.isTextblock&&R.content.size===0&&(j=I+1)}),j>-1&&n.setSelection(Ye.near(n.doc.resolve(j))),n.scrollIntoView()}return!0}const b=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,v={...dp(g,p.type.name,p.attrs),...t},S={...dp(g,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=b?[{type:l,attrs:v},{type:b,attrs:S}]:[{type:l,attrs:v}];if(!Ls(n.doc,u.pos,2))return!1;if(i){const{selection:k,storedMarks:T}=r,{splittableMarks:E}=s.extensionManager,N=T||k.$to.parentOffset&&k.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!N||!i)return!0;const A=N.filter(_=>E.includes(_.type.name));n.ensureMarks(A)}return!0},Sb=(e,t)=>{const n=Qm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&Go(e.doc,n.pos)&&e.join(n.pos),!0},Cb=(e,t)=>{const n=Qm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&Go(e.doc,r)&&e.join(r),!0},OJ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:f})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,b=Sn(e,o.schema),v=Sn(t,o.schema),{selection:S,storedMarks:w}=o,{$from:k,$to:T}=S,E=k.blockRange(T),N=w||S.$to.parentOffset&&S.$from.marks();if(!E)return!1;const A=Qm(_=>nR(_.type.name,p))(S);if(E.depth>=1&&A&&E.depth-A.depth<=1){if(A.node.type===b)return d.liftListItem(v);if(nR(A.node.type.name,p)&&b.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,b),!0)).command(()=>Sb(s,b)).command(()=>Cb(s,b)).run()}return!n||!N||!l?u().command(()=>f().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>Sb(s,b)).command(()=>Cb(s,b)).run():u().command(()=>{const _=f().wrapInList(b,r),j=N.filter(R=>g.includes(R.type.name));return s.ensureMarks(j),_?!0:d.clearNodes()}).wrapInList(b,r).command(()=>Sb(s,b)).command(()=>Cb(s,b)).run()},LJ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Vs(e,r.schema);return ck(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},PJ=(e,t,n={})=>({state:r,commands:i})=>{const s=Sn(e,r.schema),o=Sn(t,r.schema),l=Fo(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},IJ=(e,t={})=>({state:n,commands:r})=>{const i=Sn(e,n.schema);return Fo(n,i,t)?r.lift(i):r.wrapIn(i,t)},BJ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},zJ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},qJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=Vs(e,r.schema),{$from:d,empty:f,ranges:p}=l;if(!i)return!0;if(f&&o){let{from:g,to:b}=l;const v=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=GE(d,u,v);S&&(g=S.from,b=S.to),n.removeMark(g,b,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},VJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Jm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Sn(e,r.schema)),l==="mark"&&(o=Vs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;let p,g,b,v;n.selection.empty?r.doc.nodesBetween(d,f,(S,w)=>{s&&s===S.type&&(b=Math.max(w,d),v=Math.min(w+S.nodeSize,f),p=w,g=S)}):r.doc.nodesBetween(d,f,(S,w)=>{w<d&&s&&s===S.type&&(b=Math.max(w,d),v=Math.min(w+S.nodeSize,f),p=w,g=S),w>=d&&w<=f&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(k=>{if(o===k.type){const T=Math.max(w,d),E=Math.min(w+S.nodeSize,f);n.addMark(T,E,o.create({...k.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(b,v,o.create({...S.attrs,...t}))}))}),!0):!1},HJ=(e,t={})=>({state:n,dispatch:r})=>{const i=Sn(e,n.schema);return JZ(i,t)(n,r)},FJ=(e,t={})=>({state:n,dispatch:r})=>{const i=Sn(e,n.schema);return eQ(i,t)(n,r)},dz=cn.create({name:"commands",addCommands(){return{...cz}}}),fz=cn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const f=$B(e.before,[e,...t]);ez(f).forEach(b=>{f.mapping.mapResult(b.oldRange.from).deletedAfter&&f.mapping.mapResult(b.oldRange.to).deletedBefore&&f.before.nodesBetween(b.oldRange.from,b.oldRange.to,(v,S)=>{const w=S+v.nodeSize-2,k=b.oldRange.from<=S&&w<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:S,to:w,newFrom:f.mapping.map(S),newTo:f.mapping.map(w),deletedRange:b.oldRange,newRange:b.newRange,partial:!k,editor:this.editor,transaction:e,combinedTransform:f})})});const g=f.mapping;f.steps.forEach((b,v)=>{var S,w;if(b instanceof Ri){const k=g.slice(v).map(b.from,-1),T=g.slice(v).map(b.to),E=g.invert().map(k,-1),N=g.invert().map(T),A=(S=f.doc.nodeAt(k-1))==null?void 0:S.marks.some(j=>j.eq(b.mark)),_=(w=f.doc.nodeAt(T))==null?void 0:w.marks.some(j=>j.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:E,to:N},newRange:{from:k,to:T},partial:!!(_||A),editor:this.editor,transaction:e,combinedTransform:f})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),hz=cn.create({name:"drop",addProseMirrorPlugins(){return[new sn({key:new In("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),pz=cn.create({name:"editable",addProseMirrorPlugins(){return[new sn({key:new In("editable"),props:{editable:()=>this.editor.options.editable}})]}}),mz=new In("focusEvents"),gz=cn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new sn({key:mz,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),yz=cn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:f,$anchor:p}=u,{pos:g,parent:b}=p,v=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=v.parent.type.spec.isolating,w=p.pos-p.parentOffset,k=S&&v.parent.childCount===1?w===p.pos:Qe.atStart(d).from===g;return!f||!b.type.isTextblock||b.textContent.length||!k||k&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return YE()||uz()?s:i},addProseMirrorPlugins(){return[new sn({key:new In("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Qe.atStart(t.doc).from,d=Qe.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!eg(n.doc))return;const g=n.tr,b=Xm({state:n,transaction:g}),{commands:v}=new Zm({editor:this.editor,state:b});if(v.clearNodes(),!!g.steps.length)return g}})]}}),bz=cn.create({name:"paste",addProseMirrorPlugins(){return[new sn({key:new In("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),xz=cn.create({name:"tabindex",addProseMirrorPlugins(){return[new sn({key:new In("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),UJ=class Wl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Wl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Wl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Wl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new Wl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new Wl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},$J=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function GJ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var WJ=class extends lQ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=iz(t,this.options.autofocus);this.editorState=ec.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=GJ($J,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=WB(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[pz,lz.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),dz,gz,yz,xz,hz,bz,fz].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new ng(r,this)}createCommandManager(){this.commandManager=new Zm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=lk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=lk(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new _B(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return JB(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return SQ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return FE(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return gQ(this.state.doc,{blockSeparator:t,textSerializers:{...ZB(this.schema),...n}})}get isEmpty(){return eg(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new UJ(t,this)}get $doc(){return this.$pos(0)}};function yc(e){return new tg({find:e.find,handler:({state:t,range:n,match:r})=>{const i=St(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),f=d+o.length;if(WE(n.from,n.to,t.doc).filter(b=>b.mark.type.excluded.find(S=>S===e.type&&S!==b.mark.type)).filter(b=>b.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d);const g=n.from+u+o.length;s.addMark(n.from+u,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function KJ(e){return new tg({find:e.find,handler:({state:t,range:n,match:r})=>{const i=St(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let f=o+d;f>l?f=l:l=f+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(f,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function uk(e){return new tg({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=St(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function bc(e){return new tg({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=St(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&NE(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:b}=e.editor.extensionManager,v=g||p.$to.parentOffset&&p.$from.marks();if(v){const S=v.filter(w=>b.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const f=o.doc.resolve(n.from-1).nodeBefore;f&&f.type===e.type&&Go(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,f))&&o.join(n.from-1)},undoable:e.undoable})}function YJ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Ve){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function XJ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),f=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(b=>{if(b!==o)return!1;p=b}),!p)return;let g=!1;if(Object.keys(n).forEach(b=>{n[b]!==p.attrs[b]&&(g=!0)}),g){const b=e.type.create({...e.attrs,...n});s.removeMark(d,f,e.type),s.addMark(d,f,b)}}),s.docChanged&&t.view.dispatch(s)}var Yr=class vz extends KE{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new vz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Ha(e){return new _Q({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=St(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const f=u.search(/\S/),p=n.from+u.indexOf(l),g=p+l.length;if(WE(n.from,n.to,t.doc).filter(v=>v.mark.type.excluded.find(w=>w===e.type&&w!==v.mark.type)).filter(v=>v.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+f,p),d=n.from+f+l.length,o.addMark(n.from+f,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var kb,sR;function ZJ(){return sR||(sR=1,kb=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),kb}var QJ=ZJ();const JJ=Kd(QJ);var Eb={exports:{}},Nb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR;function eee(){if(oR)return Nb;oR=1;var e=Yd(),t=m6();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Nb.useSyncExternalStoreWithSelector=function(d,f,p,g,b){var v=s(null);if(v.current===null){var S={hasValue:!1,value:null};v.current=S}else S=v.current;v=l(function(){function k(_){if(!T){if(T=!0,E=_,_=g(_),b!==void 0&&S.hasValue){var j=S.value;if(b(j,_))return N=j}return N=_}if(j=N,r(E,_))return j;var R=g(_);return b!==void 0&&b(j,R)?(E=_,j):(E=_,N=R)}var T=!1,E,N,A=p===void 0?null:p;return[function(){return k(f())},A===null?void 0:function(){return k(A())}]},[f,p,g,b]);var w=i(d,v[0],v[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},Nb}var aR;function tee(){return aR||(aR=1,Eb.exports=eee()),Eb.exports}var wz=tee();const nee=Kd(wz);var ree=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},iee=({contentComponent:e})=>{const t=g6.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(t)})};function see(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Xd.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var oee=class extends Ce.Component{constructor(e){var t;super(e),this.editorContentRef=Ce.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=see(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:ree(t,this.editorContentRef),...n}),e?.contentComponent&&m.jsx(iee,{contentComponent:e.contentComponent})]})}},aee=M.forwardRef((e,t)=>{const n=Ce.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Ce.createElement(oee,{key:n,innerRef:t,...e})}),lR=Ce.memo(aee),lee=typeof window<"u"?M.useLayoutEffect:M.useEffect,cee=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function uee(e){var t;const[n]=M.useState(()=>new cee(e.editor)),r=wz.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:JJ);return lee(()=>n.watch(e.editor),[e.editor,n]),M.useDebugValue(r),r}var dee=!1,dk=typeof window>"u",fee=dk||!!(typeof window<"u"&&window.next),hee=class Sz{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?dk||fee?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new WJ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?Sz.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function pee(e={},t=[]){const n=M.useRef(e);n.current=e;const[r]=M.useState(()=>new hee(n)),i=g6.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(t)),uee({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var mee=M.createContext({editor:null});mee.Consumer;var gee=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),yee=()=>M.useContext(gee);Ce.forwardRef((e,t)=>{const{onDragStart:n}=yee(),r=e.as||"div";return m.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Ce.createContext({markViewContentRef:()=>{}});var Fp=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},bee=/^\s*>\s$/,xee=Yr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Fp("blockquote",{...wn(this.options.HTMLAttributes,e),children:Fp("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[bc({find:bee,type:this.type})]}}),vee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,wee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,See=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Cee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,kee=Qa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Fp("strong",{...wn(this.options.HTMLAttributes,e),children:Fp("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[yc({find:vee,type:this.type}),yc({find:See,type:this.type})]},addPasteRules(){return[Ha({find:wee,type:this.type}),Ha({find:Cee,type:this.type})]}}),Eee=/(^|[^`])`([^`]+)`(?!`)$/,Nee=/(^|[^`])`([^`]+)`(?!`)/g,Tee=Qa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[yc({find:Eee,type:this.type})]},addPasteRules(){return[Ha({find:Nee,type:this.type})]}}),Aee=/^```([a-z]+)?[\s\n]$/,Mee=/^~~~([a-z]+)?[\s\n]$/,_ee=Yr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",wn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let g=0,b=0;const v=l-u;for(let N=0;N<p.length;N+=1){if(b+p[N].length>=v){g=N;break}b+=p[N].length+1}const w=((o=p[g].match(/^ */))==null?void 0:o[0])||"",k=Math.min(w.length,this.options.tabSize);if(k===0)return!0;let T=u;for(let N=0;N<g;N+=1)T+=p[N].length+1;return s.delete(T,T+k),l-T<=k&&s.setSelection(Ye.create(s.doc,T)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,f=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const b=((g=p.match(/^ */))==null?void 0:g[0])||"",v=Math.min(b.length,this.options.tabSize);return p.slice(v)}).join(`
`);return s.replaceWith(o,l,t.schema.text(f)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Qe.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[uk({find:Aee,type:this.type,getAttributes:e=>({language:e[1]})}),uk({find:Mee,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new sn({key:new In("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ye.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),Dee=Yr.create({name:"doc",topNode:!0,content:"block+"}),Ree=Yr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",wn(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:f})=>{if(f&&u&&o){const p=u.filter(g=>l.includes(g.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Cz=Yr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>uk({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),jee=Cz,Oee=Yr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",wn(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!YJ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return nz(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ye.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Ve.create(s.doc,u.pos)):s.setSelection(Ye.create(s.doc,u.pos));else{const f=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();f&&(s.insert(d,f),s.setSelection(Ye.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[KJ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Lee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Pee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Iee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Bee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,zee=Qa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[yc({find:Lee,type:this.type}),yc({find:Iee,type:this.type})]},addPasteRules(){return[Ha({find:Pee,type:this.type}),Ha({find:Bee,type:this.type})]}});const qee="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Vee="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",fk="numeric",hk="ascii",pk="alpha",ud="asciinumeric",Ku="alphanumeric",mk="domain",kz="emoji",Hee="scheme",Fee="slashscheme",Tb="whitespace";function Uee(e,t){return e in t||(t[e]=[]),t[e]}function Na(e,t,n){t[fk]&&(t[ud]=!0,t[Ku]=!0),t[hk]&&(t[ud]=!0,t[pk]=!0),t[ud]&&(t[Ku]=!0),t[pk]&&(t[Ku]=!0),t[Ku]&&(t[mk]=!0),t[kz]&&(t[mk]=!0);for(const r in t){const i=Uee(r,n);i.indexOf(e)<0&&i.push(e)}}function $ee(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Sr(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Sr.groups={};Sr.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Sr.groups;let i;return t&&t.j?i=t:(i=new Sr(t),n&&r&&Na(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Sr.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Sr,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Sr,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign($ee(o.t,r),n);Na(s,u,r)}else n&&Na(s,n,r);o.t=s}return i.j[e]=o,o}};const et=(e,t,n,r,i)=>e.ta(t,n,r,i),tn=(e,t,n,r,i)=>e.tr(t,n,r,i),cR=(e,t,n,r,i)=>e.ts(t,n,r,i),ve=(e,t,n,r,i)=>e.tt(t,n,r,i),_s="WORD",gk="UWORD",Ez="ASCIINUMERICAL",Nz="ALPHANUMERICAL",Ld="LOCALHOST",yk="TLD",bk="UTLD",fp="SCHEME",Kl="SLASH_SCHEME",XE="NUM",xk="WS",ZE="NL",dd="OPENBRACE",fd="CLOSEBRACE",Up="OPENBRACKET",$p="CLOSEBRACKET",Gp="OPENPAREN",Wp="CLOSEPAREN",Kp="OPENANGLEBRACKET",Yp="CLOSEANGLEBRACKET",Xp="FULLWIDTHLEFTPAREN",Zp="FULLWIDTHRIGHTPAREN",Qp="LEFTCORNERBRACKET",Jp="RIGHTCORNERBRACKET",em="LEFTWHITECORNERBRACKET",tm="RIGHTWHITECORNERBRACKET",nm="FULLWIDTHLESSTHAN",rm="FULLWIDTHGREATERTHAN",im="AMPERSAND",sm="APOSTROPHE",om="ASTERISK",Eo="AT",am="BACKSLASH",lm="BACKTICK",cm="CARET",Ao="COLON",QE="COMMA",um="DOLLAR",Zi="DOT",dm="EQUALS",JE="EXCLAMATION",ui="HYPHEN",hd="PERCENT",fm="PIPE",hm="PLUS",pm="POUND",pd="QUERY",e2="QUOTE",Tz="FULLWIDTHMIDDLEDOT",t2="SEMI",Qi="SLASH",md="TILDE",mm="UNDERSCORE",Az="EMOJI",gm="SYM";var Mz=Object.freeze({__proto__:null,ALPHANUMERICAL:Nz,AMPERSAND:im,APOSTROPHE:sm,ASCIINUMERICAL:Ez,ASTERISK:om,AT:Eo,BACKSLASH:am,BACKTICK:lm,CARET:cm,CLOSEANGLEBRACKET:Yp,CLOSEBRACE:fd,CLOSEBRACKET:$p,CLOSEPAREN:Wp,COLON:Ao,COMMA:QE,DOLLAR:um,DOT:Zi,EMOJI:Az,EQUALS:dm,EXCLAMATION:JE,FULLWIDTHGREATERTHAN:rm,FULLWIDTHLEFTPAREN:Xp,FULLWIDTHLESSTHAN:nm,FULLWIDTHMIDDLEDOT:Tz,FULLWIDTHRIGHTPAREN:Zp,HYPHEN:ui,LEFTCORNERBRACKET:Qp,LEFTWHITECORNERBRACKET:em,LOCALHOST:Ld,NL:ZE,NUM:XE,OPENANGLEBRACKET:Kp,OPENBRACE:dd,OPENBRACKET:Up,OPENPAREN:Gp,PERCENT:hd,PIPE:fm,PLUS:hm,POUND:pm,QUERY:pd,QUOTE:e2,RIGHTCORNERBRACKET:Jp,RIGHTWHITECORNERBRACKET:tm,SCHEME:fp,SEMI:t2,SLASH:Qi,SLASH_SCHEME:Kl,SYM:gm,TILDE:md,TLD:yk,UNDERSCORE:mm,UTLD:bk,UWORD:gk,WORD:_s,WS:xk});const Ts=/[a-z]/,Lu=new RegExp("\\p{L}","u"),Ab=new RegExp("\\p{Emoji}","u"),As=/\d/,Mb=/\s/,uR="\r",_b=`
`,Gee="",Wee="",Db="";let Fh=null,Uh=null;function Kee(e=[]){const t={};Sr.groups=t;const n=new Sr;Fh==null&&(Fh=dR(qee)),Uh==null&&(Uh=dR(Vee)),ve(n,"'",sm),ve(n,"{",dd),ve(n,"}",fd),ve(n,"[",Up),ve(n,"]",$p),ve(n,"(",Gp),ve(n,")",Wp),ve(n,"<",Kp),ve(n,">",Yp),ve(n,"",Xp),ve(n,"",Zp),ve(n,"",Qp),ve(n,"",Jp),ve(n,"",em),ve(n,"",tm),ve(n,"",nm),ve(n,"",rm),ve(n,"&",im),ve(n,"*",om),ve(n,"@",Eo),ve(n,"`",lm),ve(n,"^",cm),ve(n,":",Ao),ve(n,",",QE),ve(n,"$",um),ve(n,".",Zi),ve(n,"=",dm),ve(n,"!",JE),ve(n,"-",ui),ve(n,"%",hd),ve(n,"|",fm),ve(n,"+",hm),ve(n,"#",pm),ve(n,"?",pd),ve(n,'"',e2),ve(n,"/",Qi),ve(n,";",t2),ve(n,"~",md),ve(n,"_",mm),ve(n,"\\",am),ve(n,"",Tz);const r=tn(n,As,XE,{[fk]:!0});tn(r,As,r);const i=tn(r,Ts,Ez,{[ud]:!0}),s=tn(r,Lu,Nz,{[Ku]:!0}),o=tn(n,Ts,_s,{[hk]:!0});tn(o,As,i),tn(o,Ts,o),tn(i,As,i),tn(i,Ts,i);const l=tn(n,Lu,gk,{[pk]:!0});tn(l,Ts),tn(l,As,s),tn(l,Lu,l),tn(s,As,s),tn(s,Ts),tn(s,Lu,s);const u=ve(n,_b,ZE,{[Tb]:!0}),d=ve(n,uR,xk,{[Tb]:!0}),f=tn(n,Mb,xk,{[Tb]:!0});ve(n,Db,f),ve(d,_b,u),ve(d,Db,f),tn(d,Mb,f),ve(f,uR),ve(f,_b),tn(f,Mb,f),ve(f,Db,f);const p=tn(n,Ab,Az,{[kz]:!0});ve(p,"#"),tn(p,Ab,p),ve(p,Gee,p);const g=ve(p,Wee);ve(g,"#"),tn(g,Ab,p);const b=[[Ts,o],[As,i]],v=[[Ts,null],[Lu,l],[As,s]];for(let S=0;S<Fh.length;S++)xo(n,Fh[S],yk,_s,b);for(let S=0;S<Uh.length;S++)xo(n,Uh[S],bk,gk,v);Na(yk,{tld:!0,ascii:!0},t),Na(bk,{utld:!0,alpha:!0},t),xo(n,"file",fp,_s,b),xo(n,"mailto",fp,_s,b),xo(n,"http",Kl,_s,b),xo(n,"https",Kl,_s,b),xo(n,"ftp",Kl,_s,b),xo(n,"ftps",Kl,_s,b),Na(fp,{scheme:!0,ascii:!0},t),Na(Kl,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],T=e[S][1]?{[Hee]:!0}:{[Fee]:!0};w.indexOf("-")>=0?T[mk]=!0:Ts.test(w)?As.test(w)?T[ud]=!0:T[hk]=!0:T[fk]=!0,cR(n,w,w,T)}return cR(n,"localhost",Ld,{ascii:!0}),n.jd=new Sr(gm),{start:n,tokens:Object.assign({groups:t},Mz)}}function _z(e,t){const n=Yee(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,f=null,p=-1,g=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,g=0,f=l):p>=0&&(p+=n[o].length,g++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,d-=p,i.push({t:f.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function Yee(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function xo(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Sr(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Sr(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function dR(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Pd={defaultProtocol:"http",events:null,format:fR,formatHref:fR,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function n2(e,t=null){let n=Object.assign({},Pd);e&&(n=Object.assign(n,e instanceof n2?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}n2.prototype={o:Pd,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Pd[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function fR(e){return e}function Dz(e,t){this.t="token",this.v=e,this.tk=t}Dz.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Pd.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),f=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),f&&Object.assign(o,f),{tagName:i,attributes:o,content:s,eventListeners:p}}};function rg(e,t){class n extends Dz{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const hR=rg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),pR=rg("text"),Xee=rg("nl"),$h=rg("url",{isLink:!0,toHref(e=Pd.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Ld&&e[1].t===Ao}}),li=e=>new Sr(e);function Zee({groups:e}){const t=e.domain.concat([im,om,Eo,am,lm,cm,um,dm,ui,XE,hd,fm,hm,pm,Qi,gm,md,mm]),n=[sm,Ao,QE,Zi,JE,hd,pd,e2,t2,Kp,Yp,dd,fd,$p,Up,Gp,Wp,Xp,Zp,Qp,Jp,em,tm,nm,rm],r=[im,sm,om,am,lm,cm,um,dm,ui,dd,fd,hd,fm,hm,pm,pd,Qi,gm,md,mm],i=li(),s=ve(i,md);et(s,r,s),et(s,e.domain,s);const o=li(),l=li(),u=li();et(i,e.domain,o),et(i,e.scheme,l),et(i,e.slashscheme,u),et(o,r,s),et(o,e.domain,o);const d=ve(o,Eo);ve(s,Eo,d),ve(l,Eo,d),ve(u,Eo,d);const f=ve(s,Zi);et(f,r,s),et(f,e.domain,s);const p=li();et(d,e.domain,p),et(p,e.domain,p);const g=ve(p,Zi);et(g,e.domain,p);const b=li(hR);et(g,e.tld,b),et(g,e.utld,b),ve(d,Ld,b);const v=ve(p,ui);ve(v,ui,v),et(v,e.domain,p),et(b,e.domain,p),ve(b,Zi,g),ve(b,ui,v);const S=ve(b,Ao);et(S,e.numeric,hR);const w=ve(o,ui),k=ve(o,Zi);ve(w,ui,w),et(w,e.domain,o),et(k,r,s),et(k,e.domain,o);const T=li($h);et(k,e.tld,T),et(k,e.utld,T),et(T,e.domain,o),et(T,r,s),ve(T,Zi,k),ve(T,ui,w),ve(T,Eo,d);const E=ve(T,Ao),N=li($h);et(E,e.numeric,N);const A=li($h),_=li();et(A,t,A),et(A,n,_),et(_,t,A),et(_,n,_),ve(T,Qi,A),ve(N,Qi,A);const j=ve(l,Ao),R=ve(u,Ao),I=ve(R,Qi),B=ve(I,Qi);et(l,e.domain,o),ve(l,Zi,k),ve(l,ui,w),et(u,e.domain,o),ve(u,Zi,k),ve(u,ui,w),et(j,e.domain,A),ve(j,Qi,A),ve(j,pd,A),et(B,e.domain,A),et(B,t,A),ve(B,Qi,A);const U=[[dd,fd],[Up,$p],[Gp,Wp],[Kp,Yp],[Xp,Zp],[Qp,Jp],[em,tm],[nm,rm]];for(let q=0;q<U.length;q++){const[F,L]=U[q],H=ve(A,F);ve(_,F,H),ve(H,L,A);const O=li($h);et(H,t,O);const V=li();et(H,n),et(O,t,O),et(O,n,V),et(V,t,O),et(V,n,V),ve(O,L,A),ve(V,L,A)}return ve(i,Ld,T),ve(i,ZE,Xee),{start:i,tokens:Mz}}function Qee(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,f=0,p=null,g=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(g=0,p=l):g>=0&&g++,i++,f++;if(g<0)i-=f,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Rb(pR,t,o)),o=[]),i-=g,f-=g;const b=p.t,v=n.slice(i-f,i);s.push(Rb(b,t,v))}}return o.length>0&&s.push(Rb(pR,t,o)),s}function Rb(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const Jee=typeof console<"u"&&console&&console.warn||(()=>{}),ete="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Bt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function tte(){return Sr.groups={},Bt.scanner=null,Bt.parser=null,Bt.tokenQueue=[],Bt.pluginQueue=[],Bt.customSchemes=[],Bt.initialized=!1,Bt}function mR(e,t=!1){if(Bt.initialized&&Jee(`linkifyjs: already initialized - will not register custom scheme "${e}" ${ete}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Bt.customSchemes.push([e,t])}function nte(){Bt.scanner=Kee(Bt.customSchemes);for(let e=0;e<Bt.tokenQueue.length;e++)Bt.tokenQueue[e][1]({scanner:Bt.scanner});Bt.parser=Zee(Bt.scanner.tokens);for(let e=0;e<Bt.pluginQueue.length;e++)Bt.pluginQueue[e][1]({scanner:Bt.scanner,parser:Bt.parser});return Bt.initialized=!0,Bt}function r2(e){return Bt.initialized||nte(),Qee(Bt.parser.start,e,_z(Bt.scanner.start,e))}r2.scan=_z;function Rz(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new n2(n),i=r2(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var i2="[\0- -\u2029]",rte=new RegExp(i2),ite=new RegExp(`${i2}$`),ste=new RegExp(i2,"g");function ote(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function ate(e){return new sn({key:new In("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=$B(n.doc,[...t]);if(ez(l).forEach(({newRange:d})=>{const f=uQ(r.doc,d,b=>b.isTextblock);let p,g;if(f.length>1)p=f[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(f.length){const b=r.doc.textBetween(d.from,d.to," "," ");if(!ite.test(b))return;p=f[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const b=g.split(rte).filter(Boolean);if(b.length<=0)return!1;const v=b[b.length-1],S=p.pos+g.lastIndexOf(v);if(!v)return!1;const w=r2(v).map(k=>k.toObject(e.defaultProtocol));if(!ote(w))return!1;w.filter(k=>k.isLink).map(k=>({...k,from:S+k.start+1,to:S+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>e.validate(k.value)).filter(k=>e.shouldAutoLink(k.value)).forEach(k=>{WE(k.from,k.to,r.doc).some(T=>T.mark.type===e.type)||o.addMark(k.from,k.to,e.type.create({href:k.href}))})}}),!!o.steps.length)return o}})}function lte(e){return new sn({key:new In("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let f=r.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=JB(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function cte(e){return new sn({key:new In("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=Rz(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function ma(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(ste,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var jz=Qa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){mR(e);return}mR(e.scheme,e.optionalSlashes)})},onDestroy(){tte()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ma(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!ma(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!ma(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",wn(this.options.HTMLAttributes,e),0]:["a",wn(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ma(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ma(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ha({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Rz(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!ma(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(ate({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ma(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(lte({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(cte({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),ute=jz,dte=Object.defineProperty,fte=(e,t)=>{for(var n in t)dte(e,n,{get:t[n],enumerable:!0})},hte="listItem",gR="textStyle",yR=/^\s*([-+*])\s$/,s2=Yr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hte,this.editor.getAttributes(gR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=bc({find:yR,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=bc({find:yR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(gR),editor:this.editor})),[e]}}),o2=Yr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",wn(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pte={};fte(pte,{findListItemPos:()=>lf,getNextListDepth:()=>a2,handleBackspace:()=>vk,handleDelete:()=>wk,hasListBefore:()=>Oz,hasListItemAfter:()=>mte,hasListItemBefore:()=>Lz,listItemHasSubList:()=>Pz,nextListIsDeeper:()=>Iz,nextListIsHigher:()=>Bz});var lf=(e,t)=>{const{$from:n}=t.selection,r=Sn(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},a2=(e,t)=>{const n=lf(e,t);if(!n)return!1;const[,r]=vQ(t,e,n.$pos.pos+4);return r},Oz=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Lz=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Pz=(e,t,n)=>{if(!n)return!1;const r=Sn(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},vk=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Fo(e.state,t)&&Oz(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((g,b)=>{g.type.name===t&&d.push({node:g,pos:b})});const f=d.at(-1);if(!f)return!1;const p=e.state.doc.resolve(u.start()+f.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!Fo(e.state,t)||!kQ(e.state))return!1;const r=lf(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Pz(t,e.state,s);return Lz(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Iz=(e,t)=>{const n=a2(e,t),r=lf(e,t);return!r||!n?!1:n>r.depth},Bz=(e,t)=>{const n=a2(e,t),r=lf(e,t);return!r||!n?!1:n<r.depth},wk=(e,t)=>{if(!Fo(e.state,t)||!CQ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Iz(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Bz(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},mte=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},zz=cn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&wk(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&wk(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&vk(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&vk(e,n,r)&&(t=!0)}),t}}}}),gte="listItem",bR="textStyle",xR=/^(\d+)\.\s$/,l2=Yr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",wn(this.options.HTMLAttributes,n),0]:["ol",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(gte,this.editor.getAttributes(bR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=bc({find:xR,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=bc({find:xR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(bR)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),yte=/^\s*(\[([( |x])?\])\s$/,bte=Yr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",wn(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=f=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,f,l.checked))||`Task item checkbox for ${f.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",f=>f.preventDefault()),l.addEventListener("change",f=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=f.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const b=n();if(typeof b!="number")return!1;const v=g.doc.nodeAt(b);return g.setNodeMarkup(b,void 0,{...v?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([f,p])=>{i.setAttribute(f,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([f,p])=>{i.setAttribute(f,p)}),{dom:i,contentDOM:u,update:f=>f.type!==this.type?!1:(i.dataset.checked=f.attrs.checked,l.checked=f.attrs.checked,d(f),!0)}}},addInputRules(){return[bc({find:yte,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),xte=Yr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",wn(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});cn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(s2.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(o2.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(zz.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(l2.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(bte.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(xte.configure(this.options.taskList)),e}});var vte=Yr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ste=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Cte=Qa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[yc({find:wte,type:this.type})]},addPasteRules(){return[Ha({find:Ste,type:this.type})]}}),kte=Yr.create({name:"text",group:"inline"}),qz=Qa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Ete=qz;function Nte(e={}){return new sn({view(t){return new Tte(t,e)}})}class Tte{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let v=b.getBoundingClientRect(),S=p?v.bottom:v.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:v.left,right:v.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,f;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,f=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,b=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,f=p.top-u.scrollTop*b}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-f)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=F6(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class rn extends Qe{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return rn.valid(r)?new rn(r):Qe.near(r)}content(){return Ne.empty}eq(t){return t instanceof rn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rn(t.resolve(n.pos))}getBookmark(){return new c2(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Ate(t)||!Mte(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&rn.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(rn.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ve.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(rn.valid(l))return l}return null}}}rn.prototype.visible=!1;rn.findFrom=rn.findGapCursorFrom;Qe.jsonID("gapcursor",rn);class c2{constructor(t){this.pos=t}map(t){return new c2(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return rn.valid(n)?new rn(n):Qe.near(n)}}function Ate(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Mte(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _te(){return new sn({props:{decorations:Ote,createSelectionBetween(e,t,n){return t.pos==n.pos&&rn.valid(n)?new rn(n):null},handleClick:Rte,handleKeyDown:Dte,handleDOMEvents:{beforeinput:jte}}})}const Dte=DB({ArrowLeft:Gh("horiz",-1),ArrowRight:Gh("horiz",1),ArrowUp:Gh("vert",-1),ArrowDown:Gh("vert",1)});function Gh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ye){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=rn.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new rn(d))),!0):!1}}function Rte(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!rn.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ve.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new rn(r))),!0)}function jte(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof rn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=ye.empty;for(let o=r.length-1;o>=0;o--)i=ye.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Ne(i,0,0));return s.setSelection(Ye.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function Ote(e){if(!(e.selection instanceof rn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Yt.create(e.doc,[dr.widget(e.selection.head,t,{key:"gapcursor"})])}var ym=200,Pn=function(){};Pn.prototype.append=function(t){return t.length?(t=Pn.from(t),!this.length&&t||t.length<ym&&this.leafAppend(t)||this.length<ym&&t.leafPrepend(this)||this.appendInner(t)):this};Pn.prototype.prepend=function(t){return t.length?Pn.from(t).append(this):this};Pn.prototype.appendInner=function(t){return new Lte(this,t)};Pn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Pn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Pn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Pn.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Pn.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};Pn.from=function(t){return t instanceof Pn?t:t&&t.length?new Vz(t):Pn.empty};var Vz=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=ym)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=ym)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Pn);Pn.empty=new Vz([]);var Lte=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Pn);const Pte=500;class _i{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],f=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,f.push(p);return}if(i){f.push(new Ji(p.map));let b=p.step.map(i.slice(s)),v;b&&o.maybeStep(b).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],d.push(new Ji(v,void 0,void 0,d.length+f.length))),s--,v&&i.appendMap(v,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new _i(this.items.slice(0,r).append(f.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let f=0;f<t.steps.length;f++){let p=t.steps[f].invert(t.docs[f]),g=new Ji(t.mapping.maps[f],p,n),b;(b=u&&u.merge(g))&&(g=b,f?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(u=g)}let d=o-r.depth;return d>Bte&&(l=Ite(l,d),o-=d),new _i(l.append(s),o)}remapping(t,n){let r=new Ad;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new _i(this.items.append(t.map(n=>new Ji(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let u=n;this.items.forEach(g=>{let b=s.getMirror(--u);if(b==null)return;o=Math.min(o,b);let v=s.maps[b];if(g.step){let S=t.steps[b].invert(t.docs[b]),w=g.selection&&g.selection.map(s.slice(u+1,b));w&&l++,r.push(new Ji(v,S,w))}else r.push(new Ji(v))},i);let d=[];for(let g=n;g<o;g++)d.push(new Ji(s.maps[g]));let f=this.items.slice(0,i).append(d).append(r),p=new _i(f,l);return p.emptyItemCount()>Pte&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let f=o.selection&&o.selection.map(n.slice(r));f&&s++;let p=new Ji(d.invert(),u,f),g,b=i.length-1;(g=i.length&&i[b].merge(p))?i[b]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new _i(Pn.from(i.reverse()),s)}}_i.empty=new _i(Pn.empty,0);function Ite(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Ji{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Ji(n.getMap().invert(),n,this.selection)}}}class No{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Bte=20;function zte(e,t,n,r){let i=n.getMeta(La),s;if(i)return i.historyState;n.getMeta(Hte)&&(e=new No(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(La))return o.getMeta(La).redo?new No(e.done.addTransform(n,void 0,r,hp(t)),e.undone,vR(n.mapping.maps),e.prevTime,e.prevComposition):new No(e.done,e.undone.addTransform(n,void 0,r,hp(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!qte(n,e.prevRanges)),d=o?jb(e.prevRanges,n.mapping):vR(n.mapping.maps);return new No(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,hp(t)),_i.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new No(e.done.rebased(n,s),e.undone.rebased(n,s),jb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new No(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),jb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function qte(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function vR(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function jb(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function Vte(e,t,n){let r=hp(t),i=La.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new No(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(La,{redo:n,historyState:u})}let Ob=!1,wR=null;function hp(e){let t=e.plugins;if(wR!=t){Ob=!1,wR=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Ob=!0;break}}return Ob}const La=new In("history"),Hte=new In("closeHistory");function Fte(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new sn({key:La,state:{init(){return new No(_i.empty,_i.empty,null,0,-1)},apply(t,n,r){return zte(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?Fz:r=="historyRedo"?Uz:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function Hz(e,t){return(n,r)=>{let i=La.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=Vte(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const Fz=Hz(!1,!0),Uz=Hz(!0,!0);cn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new sn({key:new In("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,f=l;return t.deleteRange(d,f),!(this.storage.characters({node:t.doc})>r)}})]}});var Ute=cn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Nte(this.options)]}});cn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new sn({key:new In("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Yt.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(dr.node(d,d+u.nodeSize,{class:this.options.className}))}),Yt.create(e,s)}}})]}});var $te=cn.create({name:"gapCursor",addProseMirrorPlugins(){return[_te()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=St(qe(e,"allowGapCursor",n)))!=null?t:null}}}),Gte=cn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new sn({key:new In("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&eg(o);if((u||!this.options.showOnlyCurrent)&&d){const f=[this.options.emptyNodeClass];s&&f.push(this.options.emptyEditorClass);const p=dr.node(l,l+o.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),Yt.create(e,i)}}})]}});cn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new sn({key:new In("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||nz(n.selection)||e.view.dragging?null:Yt.create(n.doc,[dr.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function SR({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Wte=cn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new In(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new sn({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,f=l.nodes[this.options.node];if(u)return o.insert(d,f.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!SR({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!SR({node:i,types:t})}}})]}}),Kte=cn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Fz(e,t),redo:()=>({state:e,dispatch:t})=>Uz(e,t)}},addProseMirrorPlugins(){return[Fte(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Yte=cn.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(kee.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(xee.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(s2.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Tee.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(_ee.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Dee.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Ute.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push($te.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Ree.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Cz.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Kte.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Oee.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(zee.configure(this.options.italic)),this.options.listItem!==!1&&i.push(o2.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(zz.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(jz.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(l2.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(vte.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Cte.configure(this.options.strike)),this.options.text!==!1&&i.push(kte.configure(this.options.text)),this.options.underline!==!1&&i.push(qz.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Wte.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Xte=Yte,Zte=cn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Qte=Zte,Jte=Gte,ene=s2,tne=l2,nne=o2;const ig=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return m.jsxs(ht.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&m.jsx(ht.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},sg=()=>{const[e,t]=Ce.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}},Vl=({onClick:e,disabled:t,active:n,title:r,children:i})=>m.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),CR=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),m.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[m.jsx("option",{value:"0",children:"P"}),m.jsx("option",{value:"1",children:"H1"}),m.jsx("option",{value:"2",children:"H2"}),m.jsx("option",{value:"3",children:"H3"})]})},bm=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=M.useState(0),[d,f]=M.useState(!1),{focused:p,onFocus:g,onBlur:b}=sg(),v=()=>u(Date.now()),S=()=>{f(!d)},w=pee({extensions:[Xte.configure({bulletList:!1,orderedList:!1,listItem:!1}),ene.configure({HTMLAttributes:{class:"bullet-list"}}),tne.configure({HTMLAttributes:{class:"ordered-list"}}),nne.configure({HTMLAttributes:{class:"list-item"}}),Ete,ute.configure({openOnClick:!1}),Qte.configure({types:["heading","paragraph"]}),jee.configure({levels:[1,2,3]}),Jte.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:N})=>{r(N.getHTML())},onFocus:g,onBlur:b,onSelectionUpdate:()=>{v()},onTransaction:()=>{v()}});if(M.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),M.useEffect(()=>{const N=A=>{A.key==="Escape"&&d&&f(!1)};return d?(document.addEventListener("keydown",N),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",N),document.body.style.overflow=""}},[d]),!w)return null;const k=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:m.jsx(rK,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:m.jsx(iK,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:m.jsx(lK,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:m.jsx(m.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:m.jsx(sK,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:m.jsx(oK,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:m.jsx(aK,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:m.jsx(YW,{size:16})}],T=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:m.jsx(tK,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:m.jsx(eK,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:m.jsx(nK,{size:16})}],E=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?m.jsx(fK,{size:16}):m.jsx(hK,{size:16})}];return m.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?m.jsxs(ht.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[m.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&m.jsx("span",{className:"font-medium text-theme",children:t})}),m.jsx(CR,{editor:w,disabled:s}),k.map(N=>m.jsx(Vl,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>m.jsx(Vl,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),m.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>m.jsx(Vl,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),m.jsx("div",{className:"flex-1 overflow-hidden",children:m.jsx("div",{className:"h-full overflow-y-auto p-4",children:m.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:m.jsx(lR,{editor:w,className:"focus:outline-none h-full"})})})})]}):m.jsx(ig,{id:e,label:t,focused:p,containerClassName:l,children:m.jsxs(ht.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[m.jsx(CR,{editor:w,disabled:s}),k.map(N=>m.jsx(Vl,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>m.jsx(Vl,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),m.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>m.jsx(Vl,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),m.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:m.jsx(lR,{editor:w,className:"focus:outline-none"})})]})})})},rne=()=>{Ya();const e=Zd(),[t,n]=M.useState(!1),r=M.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=M.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,b)=>{o(v=>({...v,[g]:b}))},u=(g,b,v)=>{const S=s[g].map(w=>w.id===b?{...w,value:v}:w);o(w=>({...w,[g]:S}))},d=g=>{o(b=>({...b,[g]:[...b[g],{id:i(),value:""}]}))},f=(g,b)=>{const v=s[g].filter(S=>S.id!==b);o(S=>({...S,[g]:v.length>0?v:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(b=>b.value).filter(b=>b.trim()!==""),constraints:s.constraints.map(b=>b.value).filter(b=>b.trim()!==""),hints:s.hints.map(b=>b.value).filter(b=>b.trim()!==""),tags:s.tags.map(b=>b.value).filter(b=>b.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return m.jsxs(m.Fragment,{children:[m.jsx(Jd,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsx("div",{className:"flex items-center gap-4",children:m.jsx(Qd,{})})]})})}),m.jsx("div",{className:"pt-16 relative z-10",children:m.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("div",{className:"inline-block mb-4",children:m.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),m.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),m.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsx("div",{children:m.jsx(bm,{id:"description",label:" Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),m.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[m.jsx("option",{value:"Easy",children:"Easy"}),m.jsx("option",{value:"Medium",children:"Medium"}),m.jsx("option",{value:"Hard",children:"Hard"})]})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Category"]}),m.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),m.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Requirements"]}),m.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,b)=>m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex gap-3 items-start",children:[m.jsx("div",{className:"flex-1",children:m.jsx(bm,{id:`requirement-${g.id}`,label:`Requirement ${b+1}`,value:g.value,onChange:v=>u("requirements",g.id,v),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&m.jsx("button",{type:"button",onClick:()=>f("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},g.id))]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Constraints"]}),m.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>m.jsxs("div",{className:"flex gap-3 mb-3",children:[m.jsx("input",{type:"text",value:g.value,onChange:b=>u("constraints",g.id,b.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&m.jsx("button",{type:"button",onClick:()=>f("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),m.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>m.jsxs("div",{className:"flex gap-3 mb-3",children:[m.jsx("input",{type:"text",value:g.value,onChange:b=>u("hints",g.id,b.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&m.jsx("button",{type:"button",onClick:()=>f("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(g=>g.value.trim())&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[m.jsx("span",{children:g.value}),m.jsx("button",{type:"button",onClick:()=>f("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>u("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),m.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[m.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):m.jsx(m.Fragment,{children:" Create & Start Designing"})}),m.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},ine=()=>{Ya();const e=Zd(),[t,n]=M.useState([]),[r,i]=M.useState(!1),[s,o]=M.useState(""),[l,u]=M.useState("updated"),[d,f]=M.useState("all"),[p,g]=M.useState(!1),[b,v]=M.useState(!1),[S,w]=M.useState(!1),[k,T]=M.useState(null),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:j,logout:R}=Pm();M.useEffect(()=>{N||e("/")},[N,e]),M.useEffect(()=>{(async()=>{if(!N){n([]);return}i(!0);try{const V=await Kt.getUserDiagrams();n(V)}catch(V){console.error("Failed to load diagrams:",V)}finally{i(!1)}})()},[N]);const I=O=>{e(`/playground/free?diagramId=${O}`)},B=async(O,V)=>{V.stopPropagation(),O.isOwner&&(T(O),w(!0))},U=async()=>{if(k)try{await Kt.deleteDiagram(k.id),n(O=>O.filter(V=>V.id!==k.id)),w(!1),T(null)}catch(O){console.error("Failed to delete diagram:",O),alert("Failed to delete diagram. Please try again.")}},q=()=>{w(!1),T(null)},F=t.filter(O=>{if(d==="owned"&&!O.isOwner||d==="shared"&&O.isOwner)return!1;const V=s.toLowerCase();return O.title.toLowerCase().includes(V)||O.description?.toLowerCase().includes(V)||O.owner.name.toLowerCase().includes(V)||O.owner.email.toLowerCase().includes(V)||!1}).sort((O,V)=>{switch(l){case"title":return O.title.localeCompare(V.title);case"created":return new Date(V.createdAt).getTime()-new Date(O.createdAt).getTime();case"updated":default:return new Date(V.updatedAt).getTime()-new Date(O.updatedAt).getTime()}}),L=t.filter(O=>O.isOwner).length,H=t.filter(O=>!O.isOwner).length;return m.jsxs(m.Fragment,{children:[m.jsx(Jd,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects and diagrams shared with you",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[N&&m.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),m.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${L} owned  ${H} shared`}),m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),m.jsx(Qd,{}),m.jsx("div",{className:"relative",children:N?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>g(!p),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[E?.picture?m.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):m.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:E?.name?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline text-sm",children:E?.name||E?.email}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&m.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:m.jsxs("div",{className:"py-1",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name}),m.jsx("p",{className:"text-sm text-muted truncate",children:E?.email})]}),m.jsx("button",{type:"button",onClick:()=>{g(!1),R()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):m.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),m.jsx("div",{className:"pt-16 relative z-10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),m.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved projects and diagrams shared with you"})]}),!r&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex gap-2 mb-6 justify-center",children:[m.jsxs("button",{type:"button",onClick:()=>f("all"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="all"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["All Designs (",t.length,")"]}),m.jsxs("button",{type:"button",onClick:()=>f("owned"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="owned"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["My Designs (",L,")"]}),m.jsxs("button",{type:"button",onClick:()=>f("shared"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="shared"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["Shared with Me (",H,")"]})]}),m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),m.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:O=>o(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),m.jsxs("select",{id:"sort-select",value:l,onChange:O=>u(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[m.jsx("option",{value:"updated",children:"Last Updated"}),m.jsx("option",{value:"created",children:"Date Created"}),m.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),m.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),m.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&F.length===0&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-7xl mb-6",children:s?"":d==="shared"?"":""}),m.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":d==="shared"?"No shared designs yet":d==="owned"?"No designs created yet":"No designs yet"}),m.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":d==="shared"?"Diagrams shared with you will appear here":"Start creating your first system design project"}),!s&&d!=="shared"&&m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&F.length>0&&m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:F.map((O,V)=>m.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${V===0?"delay-0":V===1?"delay-100":V===2?"delay-200":""}`,children:[m.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),m.jsxs("div",{className:"relative p-6",children:[O.isOwner&&m.jsx("button",{type:"button",onClick:Y=>B(O,Y),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsxs("div",{className:"cursor-pointer",onClick:()=>I(O.id),children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex-1 pr-8",children:[m.jsx("div",{className:"flex items-start gap-2 mb-2",children:m.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:O.title})}),!O.isOwner&&m.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[m.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative flex items-center gap-1.5",children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[O.owner.pictureUrl?m.jsx("img",{src:O.owner.pictureUrl,alt:O.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):m.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:O.owner.name[0]?.toUpperCase()}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),m.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:O.owner.name})]})]})]}),m.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${O.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:O.permission==="edit"?m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),m.jsx("span",{children:O.permission==="edit"?"Can Edit":"View Only"})]})]}),O.description&&m.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:O.description})]}),m.jsx("div",{className:"text-3xl",children:""})]}),m.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),O.nodes.length," node",O.nodes.length===1?"":"s"]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),O.edges.length," connection",O.edges.length===1?"":"s"]})]}),m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[m.jsxs("span",{children:["Updated"," ",new Date(O.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),m.jsxs("span",{children:["Created"," ",new Date(O.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),m.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),I(O.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},O.id))})]})]})})]}),b&&m.jsx(Hm,{isOpen:b,onClose:()=>v(!1),onLogin:async(O,V)=>{await A({email:O,password:V})},onSignup:async(O,V,Y)=>{await _({email:O,password:V,name:Y})},onGoogleLogin:async O=>{await j(O)}}),S&&k&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),m.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),m.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",m.jsxs("strong",{children:['"',k.title,'"']}),"? This will permanently remove the design and all its data."]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{type:"button",onClick:q,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),m.jsx("button",{type:"button",onClick:U,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function sne(e){return at({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(e)}const $z=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>m.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[m.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[m.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),m.jsx(cc,{children:t&&m.jsx(ht.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&m.jsx("span",{className:"text-sm text-theme",children:r})]}),Gz=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:f,onFocus:p,onBlur:g}=sg();return m.jsx(ig,{id:e,label:t,focused:f,containerClassName:d,children:m.jsx(ht.input,{id:e,type:"number",value:n??"",onChange:b=>r(Number(b.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:f?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},pp=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:f}=sg();return m.jsx(ig,{id:e,label:t,focused:u,containerClassName:l,children:m.jsx(ht.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:f,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Wz=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:f}=sg(),p=`${e}-label`;return m.jsxs(ig,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&m.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),m.jsx(ht.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:m.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:d,onBlur:f,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>m.jsx("option",{value:g,children:g},g))})})]})};function one(e,t=50){const[n,r]=M.useState({past:[],present:e,future:[]}),i=M.useRef(!1),s=M.useCallback(d=>{r(f=>{const p=typeof d=="function"?d(f.present):d;if(i.current)return i.current=!1,{...f,present:p};if(JSON.stringify(p)===JSON.stringify(f.present))return f;const g=[...f.past,f.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=M.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const f=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:f,future:[d.present,...d.future]}})},[]),l=M.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const f=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:f,future:p}})},[]),u=M.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Cn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Cn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ane={value:()=>{}};function og(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new mp(n)}function mp(e){this._=e}function lne(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}mp.prototype=og.prototype={constructor:mp,on:function(e,t){var n=this._,r=lne(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=cne(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=kR(n[i],e.name,t);else if(t==null)for(i in n)n[i]=kR(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new mp(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function cne(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function kR(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ane,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Sk="http://www.w3.org/1999/xhtml";const ER={svg:"http://www.w3.org/2000/svg",xhtml:Sk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ag(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ER.hasOwnProperty(t)?{space:ER[t],local:e}:e}function une(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Sk&&t.documentElement.namespaceURI===Sk?t.createElement(e):t.createElementNS(n,e)}}function dne(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Kz(e){var t=ag(e);return(t.local?dne:une)(t)}function fne(){}function u2(e){return e==null?fne:function(){return this.querySelector(e)}}function hne(e){typeof e!="function"&&(e=u2(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,f=0;f<o;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d);return new Kr(r,this._parents)}function pne(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mne(){return[]}function Yz(e){return e==null?mne:function(){return this.querySelectorAll(e)}}function gne(e){return function(){return pne(e.apply(this,arguments))}}function yne(e){typeof e=="function"?e=gne(e):e=Yz(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new Kr(r,i)}function Xz(e){return function(){return this.matches(e)}}function Zz(e){return function(t){return t.matches(e)}}var bne=Array.prototype.find;function xne(e){return function(){return bne.call(this.children,e)}}function vne(){return this.firstElementChild}function wne(e){return this.select(e==null?vne:xne(typeof e=="function"?e:Zz(e)))}var Sne=Array.prototype.filter;function Cne(){return Array.from(this.children)}function kne(e){return function(){return Sne.call(this.children,e)}}function Ene(e){return this.selectAll(e==null?Cne:kne(typeof e=="function"?e:Zz(e)))}function Nne(e){typeof e!="function"&&(e=Xz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Kr(r,this._parents)}function Qz(e){return new Array(e.length)}function Tne(){return new Kr(this._enter||this._groups.map(Qz),this._parents)}function xm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xm.prototype={constructor:xm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ane(e){return function(){return e}}function Mne(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new xm(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function _ne(e,t,n,r,i,s,o){var l,u,d=new Map,f=t.length,p=s.length,g=new Array(f),b;for(l=0;l<f;++l)(u=t[l])&&(g[l]=b=o.call(u,u.__data__,l,t)+"",d.has(b)?i[l]=u:d.set(b,u));for(l=0;l<p;++l)b=o.call(e,s[l],l,s)+"",(u=d.get(b))?(r[l]=u,u.__data__=s[l],d.delete(b)):n[l]=new xm(e,s[l]);for(l=0;l<f;++l)(u=t[l])&&d.get(g[l])===u&&(i[l]=u)}function Dne(e){return e.__data__}function Rne(e,t){if(!arguments.length)return Array.from(this,Dne);var n=t?_ne:Mne,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ane(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var f=r[d],p=i[d],g=p.length,b=jne(e.call(f,f&&f.__data__,d,r)),v=b.length,S=l[d]=new Array(v),w=o[d]=new Array(v),k=u[d]=new Array(g);n(f,p,S,w,k,b,t);for(var T=0,E=0,N,A;T<v;++T)if(N=S[T]){for(T>=E&&(E=T+1);!(A=w[E])&&++E<v;);N._next=A||null}}return o=new Kr(o,r),o._enter=l,o._exit=u,o}function jne(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function One(){return new Kr(this._exit||this._groups.map(Qz),this._parents)}function Lne(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Pne(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],f=r[u],p=d.length,g=l[u]=new Array(p),b,v=0;v<p;++v)(b=d[v]||f[v])&&(g[v]=b);for(;u<i;++u)l[u]=n[u];return new Kr(l,this._parents)}function Ine(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Bne(e){e||(e=zne);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,f=0;f<l;++f)(d=o[f])&&(u[f]=d);u.sort(t)}return new Kr(i,this._parents).order()}function zne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qne(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vne(){return Array.from(this)}function Hne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Fne(){let e=0;for(const t of this)++e;return e}function Une(){return!this.node()}function $ne(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function Gne(e){return function(){this.removeAttribute(e)}}function Wne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kne(e,t){return function(){this.setAttribute(e,t)}}function Yne(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Zne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qne(e,t){var n=ag(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Wne:Gne:typeof t=="function"?n.local?Zne:Xne:n.local?Yne:Kne)(n,t))}function Jz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Jne(e){return function(){this.style.removeProperty(e)}}function ere(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tre(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function nre(e,t,n){return arguments.length>1?this.each((t==null?Jne:typeof t=="function"?tre:ere)(e,t,n??"")):xc(this.node(),e)}function xc(e,t){return e.style.getPropertyValue(t)||Jz(e).getComputedStyle(e,null).getPropertyValue(t)}function rre(e){return function(){delete this[e]}}function ire(e,t){return function(){this[e]=t}}function sre(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ore(e,t){return arguments.length>1?this.each((t==null?rre:typeof t=="function"?sre:ire)(e,t)):this.node()[e]}function e8(e){return e.trim().split(/^|\s+/)}function d2(e){return e.classList||new t8(e)}function t8(e){this._node=e,this._names=e8(e.getAttribute("class")||"")}t8.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function n8(e,t){for(var n=d2(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function r8(e,t){for(var n=d2(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function are(e){return function(){n8(this,e)}}function lre(e){return function(){r8(this,e)}}function cre(e,t){return function(){(t.apply(this,arguments)?n8:r8)(this,e)}}function ure(e,t){var n=e8(e+"");if(arguments.length<2){for(var r=d2(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?cre:t?are:lre)(n,t))}function dre(){this.textContent=""}function fre(e){return function(){this.textContent=e}}function hre(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pre(e){return arguments.length?this.each(e==null?dre:(typeof e=="function"?hre:fre)(e)):this.node().textContent}function mre(){this.innerHTML=""}function gre(e){return function(){this.innerHTML=e}}function yre(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function bre(e){return arguments.length?this.each(e==null?mre:(typeof e=="function"?yre:gre)(e)):this.node().innerHTML}function xre(){this.nextSibling&&this.parentNode.appendChild(this)}function vre(){return this.each(xre)}function wre(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sre(){return this.each(wre)}function Cre(e){var t=typeof e=="function"?e:Kz(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kre(){return null}function Ere(e,t){var n=typeof e=="function"?e:Kz(e),r=t==null?kre:typeof t=="function"?t:u2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Nre(){var e=this.parentNode;e&&e.removeChild(this)}function Tre(){return this.each(Nre)}function Are(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mre(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _re(e){return this.select(e?Mre:Are)}function Dre(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Rre(e){return function(t){e.call(this,t,this.__data__)}}function jre(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ore(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Lre(e,t,n){return function(){var r=this.__on,i,s=Rre(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Pre(e,t,n){var r=jre(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,f;u<d;++u)for(i=0,f=l[u];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(l=t?Lre:Ore,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function i8(e,t,n){var r=Jz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ire(e,t){return function(){return i8(this,e,t)}}function Bre(e,t){return function(){return i8(this,e,t.apply(this,arguments))}}function zre(e,t){return this.each((typeof t=="function"?Bre:Ire)(e,t))}function*qre(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var s8=[null];function Kr(e,t){this._groups=e,this._parents=t}function cf(){return new Kr([[document.documentElement]],s8)}function Vre(){return this}Kr.prototype=cf.prototype={constructor:Kr,select:hne,selectAll:yne,selectChild:wne,selectChildren:Ene,filter:Nne,data:Rne,enter:Tne,exit:One,join:Lne,merge:Pne,selection:Vre,order:Ine,sort:Bne,call:qne,nodes:Vne,node:Hne,size:Fne,empty:Une,each:$ne,attr:Qne,style:nre,property:ore,classed:ure,text:pre,html:bre,raise:vre,lower:Sre,append:Cre,insert:Ere,remove:Tre,clone:_re,datum:Dre,on:Pre,dispatch:zre,[Symbol.iterator]:qre};function Gr(e){return typeof e=="string"?new Kr([[document.querySelector(e)]],[document.documentElement]):new Kr([[e]],s8)}function Hre(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mi(e,t){if(e=Hre(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Fre={passive:!1},Id={capture:!0,passive:!1};function Lb(e){e.stopImmediatePropagation()}function oc(e){e.preventDefault(),e.stopImmediatePropagation()}function o8(e){var t=e.document.documentElement,n=Gr(e).on("dragstart.drag",oc,Id);"onselectstart"in t?n.on("selectstart.drag",oc,Id):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function a8(e,t){var n=e.document.documentElement,r=Gr(e).on("dragstart.drag",null);t&&(r.on("click.drag",oc,Id),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Wh=e=>()=>e;function Ck(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:f}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}Ck.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ure(e){return!e.ctrlKey&&!e.button}function $re(){return this.parentNode}function Gre(e,t){return t??{x:e.x,y:e.y}}function Wre(){return navigator.maxTouchPoints||"ontouchstart"in this}function l8(){var e=Ure,t=$re,n=Gre,r=Wre,i={},s=og("start","drag","end"),o=0,l,u,d,f,p=0;function g(N){N.on("mousedown.drag",b).filter(r).on("touchstart.drag",w).on("touchmove.drag",k,Fre).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(N,A){if(!(f||!e.call(this,N,A))){var _=E(this,t.call(this,N,A),N,A,"mouse");_&&(Gr(N.view).on("mousemove.drag",v,Id).on("mouseup.drag",S,Id),o8(N.view),Lb(N),d=!1,l=N.clientX,u=N.clientY,_("start",N))}}function v(N){if(oc(N),!d){var A=N.clientX-l,_=N.clientY-u;d=A*A+_*_>p}i.mouse("drag",N)}function S(N){Gr(N.view).on("mousemove.drag mouseup.drag",null),a8(N.view,d),oc(N),i.mouse("end",N)}function w(N,A){if(e.call(this,N,A)){var _=N.changedTouches,j=t.call(this,N,A),R=_.length,I,B;for(I=0;I<R;++I)(B=E(this,j,N,A,_[I].identifier,_[I]))&&(Lb(N),B("start",N,_[I]))}}function k(N){var A=N.changedTouches,_=A.length,j,R;for(j=0;j<_;++j)(R=i[A[j].identifier])&&(oc(N),R("drag",N,A[j]))}function T(N){var A=N.changedTouches,_=A.length,j,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),j=0;j<_;++j)(R=i[A[j].identifier])&&(Lb(N),R("end",N,A[j]))}function E(N,A,_,j,R,I){var B=s.copy(),U=Mi(I||_,A),q,F,L;if((L=n.call(N,new Ck("beforestart",{sourceEvent:_,target:g,identifier:R,active:o,x:U[0],y:U[1],dx:0,dy:0,dispatch:B}),j))!=null)return q=L.x-U[0]||0,F=L.y-U[1]||0,function H(O,V,Y){var te=U,z;switch(O){case"start":i[R]=H,z=o++;break;case"end":delete i[R],--o;case"drag":U=Mi(Y||V,A),z=o;break}B.call(O,N,new Ck(O,{sourceEvent:V,subject:L,target:g,identifier:R,active:z,x:U[0]+q,y:U[1]+F,dx:U[0]-te[0],dy:U[1]-te[1],dispatch:B}),j)}}return g.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Wh(!!N),g):e},g.container=function(N){return arguments.length?(t=typeof N=="function"?N:Wh(N),g):t},g.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Wh(N),g):n},g.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:Wh(!!N),g):r},g.on=function(){var N=s.on.apply(s,arguments);return N===s?g:N},g.clickDistance=function(N){return arguments.length?(p=(N=+N)*N,g):Math.sqrt(p)},g}function f2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function c8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function uf(){}var Bd=.7,vm=1/Bd,ac="\\s*([+-]?\\d+)\\s*",zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ss="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kre=/^#([0-9a-f]{3,8})$/,Yre=new RegExp(`^rgb\\(${ac},${ac},${ac}\\)$`),Xre=new RegExp(`^rgb\\(${ss},${ss},${ss}\\)$`),Zre=new RegExp(`^rgba\\(${ac},${ac},${ac},${zd}\\)$`),Qre=new RegExp(`^rgba\\(${ss},${ss},${ss},${zd}\\)$`),Jre=new RegExp(`^hsl\\(${zd},${ss},${ss}\\)$`),eie=new RegExp(`^hsla\\(${zd},${ss},${ss},${zd}\\)$`),NR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f2(uf,Fa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:TR,formatHex:TR,formatHex8:tie,formatHsl:nie,formatRgb:AR,toString:AR});function TR(){return this.rgb().formatHex()}function tie(){return this.rgb().formatHex8()}function nie(){return u8(this).formatHsl()}function AR(){return this.rgb().formatRgb()}function Fa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Kre.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?MR(t):n===3?new kr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Kh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Kh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yre.exec(e))?new kr(t[1],t[2],t[3],1):(t=Xre.exec(e))?new kr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zre.exec(e))?Kh(t[1],t[2],t[3],t[4]):(t=Qre.exec(e))?Kh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jre.exec(e))?RR(t[1],t[2]/100,t[3]/100,1):(t=eie.exec(e))?RR(t[1],t[2]/100,t[3]/100,t[4]):NR.hasOwnProperty(e)?MR(NR[e]):e==="transparent"?new kr(NaN,NaN,NaN,0):null}function MR(e){return new kr(e>>16&255,e>>8&255,e&255,1)}function Kh(e,t,n,r){return r<=0&&(e=t=n=NaN),new kr(e,t,n,r)}function rie(e){return e instanceof uf||(e=Fa(e)),e?(e=e.rgb(),new kr(e.r,e.g,e.b,e.opacity)):new kr}function kk(e,t,n,r){return arguments.length===1?rie(e):new kr(e,t,n,r??1)}function kr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}f2(kr,kk,c8(uf,{brighter(e){return e=e==null?vm:Math.pow(vm,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Bd:Math.pow(Bd,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kr(Pa(this.r),Pa(this.g),Pa(this.b),wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_R,formatHex:_R,formatHex8:iie,formatRgb:DR,toString:DR}));function _R(){return`#${Ta(this.r)}${Ta(this.g)}${Ta(this.b)}`}function iie(){return`#${Ta(this.r)}${Ta(this.g)}${Ta(this.b)}${Ta((isNaN(this.opacity)?1:this.opacity)*255)}`}function DR(){const e=wm(this.opacity);return`${e===1?"rgb(":"rgba("}${Pa(this.r)}, ${Pa(this.g)}, ${Pa(this.b)}${e===1?")":`, ${e})`}`}function wm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ta(e){return e=Pa(e),(e<16?"0":"")+e.toString(16)}function RR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Di(e,t,n,r)}function u8(e){if(e instanceof Di)return new Di(e.h,e.s,e.l,e.opacity);if(e instanceof uf||(e=Fa(e)),!e)return new Di;if(e instanceof Di)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Di(o,l,u,e.opacity)}function sie(e,t,n,r){return arguments.length===1?u8(e):new Di(e,t,n,r??1)}function Di(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}f2(Di,sie,c8(uf,{brighter(e){return e=e==null?vm:Math.pow(vm,e),new Di(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Bd:Math.pow(Bd,e),new Di(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kr(Pb(e>=240?e-240:e+120,i,r),Pb(e,i,r),Pb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Di(jR(this.h),Yh(this.s),Yh(this.l),wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wm(this.opacity);return`${e===1?"hsl(":"hsla("}${jR(this.h)}, ${Yh(this.s)*100}%, ${Yh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jR(e){return e=(e||0)%360,e<0?e+360:e}function Yh(e){return Math.max(0,Math.min(1,e||0))}function Pb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const h2=e=>()=>e;function oie(e,t){return function(n){return e+n*t}}function aie(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function lie(e){return(e=+e)==1?d8:function(t,n){return n-t?aie(t,n,e):h2(isNaN(t)?n:t)}}function d8(e,t){var n=t-e;return n?oie(e,n):h2(isNaN(e)?t:e)}const Sm=(function e(t){var n=lie(t);function r(i,s){var o=n((i=kk(i)).r,(s=kk(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=d8(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=u(f),i.opacity=d(f),i+""}}return r.gamma=e,r})(1);function cie(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function uie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function die(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=gd(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function fie(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function es(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hie(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=gd(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Ek=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ib=new RegExp(Ek.source,"g");function pie(e){return function(){return e}}function mie(e){return function(t){return e(t)+""}}function f8(e,t){var n=Ek.lastIndex=Ib.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=Ek.exec(e))&&(i=Ib.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:es(r,i)})),n=Ib.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?mie(u[0].x):pie(t):(t=u.length,function(d){for(var f=0,p;f<t;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function gd(e,t){var n=typeof t,r;return t==null||n==="boolean"?h2(t):(n==="number"?es:n==="string"?(r=Fa(t))?(t=r,Sm):f8:t instanceof Fa?Sm:t instanceof Date?fie:uie(t)?cie:Array.isArray(t)?die:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hie:es)(e,t)}var OR=180/Math.PI,Nk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function h8(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*OR,skewX:Math.atan(u)*OR,scaleX:o,scaleY:l}}var Xh;function gie(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Nk:h8(t.a,t.b,t.c,t.d,t.e,t.f)}function yie(e){return e==null||(Xh||(Xh=document.createElementNS("http://www.w3.org/2000/svg","g")),Xh.setAttribute("transform",e),!(e=Xh.transform.baseVal.consolidate()))?Nk:(e=e.matrix,h8(e.a,e.b,e.c,e.d,e.e,e.f))}function p8(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,f,p,g,b,v){if(d!==p||f!==g){var S=b.push("translate(",null,t,null,n);v.push({i:S-4,x:es(d,p)},{i:S-2,x:es(f,g)})}else(p||g)&&b.push("translate("+p+t+g+n)}function o(d,f,p,g){d!==f?(d-f>180?f+=360:f-d>180&&(d+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:es(d,f)})):f&&p.push(i(p)+"rotate("+f+r)}function l(d,f,p,g){d!==f?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:es(d,f)}):f&&p.push(i(p)+"skewX("+f+r)}function u(d,f,p,g,b,v){if(d!==p||f!==g){var S=b.push(i(b)+"scale(",null,",",null,")");v.push({i:S-4,x:es(d,p)},{i:S-2,x:es(f,g)})}else(p!==1||g!==1)&&b.push(i(b)+"scale("+p+","+g+")")}return function(d,f){var p=[],g=[];return d=e(d),f=e(f),s(d.translateX,d.translateY,f.translateX,f.translateY,p,g),o(d.rotate,f.rotate,p,g),l(d.skewX,f.skewX,p,g),u(d.scaleX,d.scaleY,f.scaleX,f.scaleY,p,g),d=f=null,function(b){for(var v=-1,S=g.length,w;++v<S;)p[(w=g[v]).i]=w.x(b);return p.join("")}}}var bie=p8(gie,"px, ","px)","deg)"),xie=p8(yie,", ",")",")"),vie=1e-12;function LR(e){return((e=Math.exp(e))+1/e)/2}function wie(e){return((e=Math.exp(e))-1/e)/2}function Sie(e){return((e=Math.exp(2*e))-1)/(e+1)}const gp=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],f=o[0],p=o[1],g=o[2],b=f-l,v=p-u,S=b*b+v*v,w,k;if(S<vie)k=Math.log(g/d)/t,w=function(j){return[l+j*b,u+j*v,d*Math.exp(t*j*k)]};else{var T=Math.sqrt(S),E=(g*g-d*d+r*S)/(2*d*n*T),N=(g*g-d*d-r*S)/(2*g*n*T),A=Math.log(Math.sqrt(E*E+1)-E),_=Math.log(Math.sqrt(N*N+1)-N);k=(_-A)/t,w=function(j){var R=j*k,I=LR(A),B=d/(n*T)*(I*Sie(t*R+A)-wie(A));return[l+B*b,u+B*v,d*I/LR(t*R+A)]}}return w.duration=k*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var vc=0,Yu=0,Pu=0,m8=1e3,Cm,Xu,km=0,Ua=0,lg=0,qd=typeof performance=="object"&&performance.now?performance:Date,g8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function p2(){return Ua||(g8(Cie),Ua=qd.now()+lg)}function Cie(){Ua=0}function Em(){this._call=this._time=this._next=null}Em.prototype=y8.prototype={constructor:Em,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?p2():+n)+(t==null?0:+t),!this._next&&Xu!==this&&(Xu?Xu._next=this:Cm=this,Xu=this),this._call=e,this._time=n,Tk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tk())}};function y8(e,t,n){var r=new Em;return r.restart(e,t,n),r}function kie(){p2(),++vc;for(var e=Cm,t;e;)(t=Ua-e._time)>=0&&e._call.call(void 0,t),e=e._next;--vc}function PR(){Ua=(km=qd.now())+lg,vc=Yu=0;try{kie()}finally{vc=0,Nie(),Ua=0}}function Eie(){var e=qd.now(),t=e-km;t>m8&&(lg-=t,km=e)}function Nie(){for(var e,t=Cm,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Cm=n);Xu=e,Tk(r)}function Tk(e){if(!vc){Yu&&(Yu=clearTimeout(Yu));var t=e-Ua;t>24?(e<1/0&&(Yu=setTimeout(PR,e-qd.now()-lg)),Pu&&(Pu=clearInterval(Pu))):(Pu||(km=qd.now(),Pu=setInterval(Eie,m8)),vc=1,g8(PR))}}function IR(e,t,n){var r=new Em;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Tie=og("start","end","cancel","interrupt"),Aie=[],b8=0,BR=1,Ak=2,yp=3,zR=4,Mk=5,bp=6;function cg(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Mie(e,n,{name:t,index:r,group:i,on:Tie,tween:Aie,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:b8})}function m2(e,t){var n=Li(e,t);if(n.state>b8)throw new Error("too late; already scheduled");return n}function us(e,t){var n=Li(e,t);if(n.state>yp)throw new Error("too late; already running");return n}function Li(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mie(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=y8(s,0,n.time);function s(d){n.state=BR,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var f,p,g,b;if(n.state!==BR)return u();for(f in r)if(b=r[f],b.name===n.name){if(b.state===yp)return IR(o);b.state===zR?(b.state=bp,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete r[f]):+f<t&&(b.state=bp,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete r[f])}if(IR(function(){n.state===yp&&(n.state=zR,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=Ak,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ak){for(n.state=yp,i=new Array(g=n.tween.length),f=0,p=-1;f<g;++f)(b=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function l(d){for(var f=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Mk,1),p=-1,g=i.length;++p<g;)i[p].call(e,f);n.state===Mk&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=bp,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function xp(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Ak&&r.state<Mk,r.state=bp,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function _ie(e){return this.each(function(){xp(this,e)})}function Die(e,t){var n,r;return function(){var i=us(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Rie(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=us(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function jie(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Li(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Die:Rie)(n,e,t))}function g2(e,t,n){var r=e._id;return e.each(function(){var i=us(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Li(i,r).value[t]}}function x8(e,t){var n;return(typeof t=="number"?es:t instanceof Fa?Sm:(n=Fa(t))?(t=n,Sm):f8)(e,t)}function Oie(e){return function(){this.removeAttribute(e)}}function Lie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pie(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Iie(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Bie(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function zie(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function qie(e,t){var n=ag(e),r=n==="transform"?xie:x8;return this.attrTween(e,typeof t=="function"?(n.local?zie:Bie)(n,r,g2(this,"attr."+e,t)):t==null?(n.local?Lie:Oie)(n):(n.local?Iie:Pie)(n,r,t))}function Vie(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Hie(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Fie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Hie(e,s)),n}return i._value=t,i}function Uie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Vie(e,s)),n}return i._value=t,i}function $ie(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ag(e);return this.tween(n,(r.local?Fie:Uie)(r,t))}function Gie(e,t){return function(){m2(this,e).delay=+t.apply(this,arguments)}}function Wie(e,t){return t=+t,function(){m2(this,e).delay=t}}function Kie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gie:Wie)(t,e)):Li(this.node(),t).delay}function Yie(e,t){return function(){us(this,e).duration=+t.apply(this,arguments)}}function Xie(e,t){return t=+t,function(){us(this,e).duration=t}}function Zie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yie:Xie)(t,e)):Li(this.node(),t).duration}function Qie(e,t){if(typeof t!="function")throw new Error;return function(){us(this,e).ease=t}}function Jie(e){var t=this._id;return arguments.length?this.each(Qie(t,e)):Li(this.node(),t).ease}function ese(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;us(this,e).ease=n}}function tse(e){if(typeof e!="function")throw new Error;return this.each(ese(this._id,e))}function nse(e){typeof e!="function"&&(e=Xz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new qs(r,this._parents,this._name,this._id)}function rse(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],f=u.length,p=o[l]=new Array(f),g,b=0;b<f;++b)(g=u[b]||d[b])&&(p[b]=g);for(;l<r;++l)o[l]=t[l];return new qs(o,this._parents,this._name,this._id)}function ise(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sse(e,t,n){var r,i,s=ise(t)?m2:us;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function ose(e,t){var n=this._id;return arguments.length<2?Li(this.node(),n).on.on(e):this.each(sse(n,e,t))}function ase(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function lse(){return this.on("end.remove",ase(this._id))}function cse(e){var t=this._name,n=this._id;typeof e!="function"&&(e=u2(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),f,p,g=0;g<u;++g)(f=l[g])&&(p=e.call(f,f.__data__,g,l))&&("__data__"in f&&(p.__data__=f.__data__),d[g]=p,cg(d[g],t,n,g,d,Li(f,n)));return new qs(s,this._parents,t,n)}function use(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yz(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,f,p=0;p<d;++p)if(f=u[p]){for(var g=e.call(f,f.__data__,p,u),b,v=Li(f,n),S=0,w=g.length;S<w;++S)(b=g[S])&&cg(b,t,n,S,g,v);s.push(g),o.push(f)}return new qs(s,o,t,n)}var dse=cf.prototype.constructor;function fse(){return new dse(this._groups,this._parents)}function hse(e,t){var n,r,i;return function(){var s=xc(this,e),o=(this.style.removeProperty(e),xc(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function v8(e){return function(){this.style.removeProperty(e)}}function pse(e,t,n){var r,i=n+"",s;return function(){var o=xc(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function mse(e,t,n){var r,i,s;return function(){var o=xc(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),xc(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function gse(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=us(this,e),d=u.on,f=u.value[s]==null?l||(l=v8(t)):void 0;(d!==n||i!==f)&&(r=(n=d).copy()).on(o,i=f),u.on=r}}function yse(e,t,n){var r=(e+="")=="transform"?bie:x8;return t==null?this.styleTween(e,hse(e,r)).on("end.style."+e,v8(e)):typeof t=="function"?this.styleTween(e,mse(e,r,g2(this,"style."+e,t))).each(gse(this._id,e)):this.styleTween(e,pse(e,r,t),n).on("end.style."+e,null)}function bse(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xse(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&bse(e,o,n)),r}return s._value=t,s}function vse(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,xse(e,t,n??""))}function wse(e){return function(){this.textContent=e}}function Sse(e){return function(){var t=e(this);this.textContent=t??""}}function Cse(e){return this.tween("text",typeof e=="function"?Sse(g2(this,"text",e)):wse(e==null?"":e+""))}function kse(e){return function(t){this.textContent=e.call(this,t)}}function Ese(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&kse(i)),t}return r._value=e,r}function Nse(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ese(e))}function Tse(){for(var e=this._name,t=this._id,n=w8(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var f=Li(u,t);cg(u,e,n,d,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new qs(r,this._parents,e,n)}function Ase(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=us(this,r),f=d.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var Mse=0;function qs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function w8(){return++Mse}var Ms=cf.prototype;qs.prototype={constructor:qs,select:cse,selectAll:use,selectChild:Ms.selectChild,selectChildren:Ms.selectChildren,filter:nse,merge:rse,selection:fse,transition:Tse,call:Ms.call,nodes:Ms.nodes,node:Ms.node,size:Ms.size,empty:Ms.empty,each:Ms.each,on:ose,attr:qie,attrTween:$ie,style:yse,styleTween:vse,text:Cse,textTween:Nse,remove:lse,tween:jie,delay:Kie,duration:Zie,ease:Jie,easeVarying:tse,end:Ase,[Symbol.iterator]:Ms[Symbol.iterator]};function _se(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dse={time:null,delay:0,duration:250,ease:_se};function Rse(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jse(e){var t,n;e instanceof qs?(t=e._id,e=e._name):(t=w8(),(n=Dse).time=p2(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&cg(u,e,t,d,o,n||Rse(u,t));return new qs(r,this._parents,e,t)}cf.prototype.interrupt=_ie;cf.prototype.transition=jse;const Zh=e=>()=>e;function Ose(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Os(e,t,n){this.k=e,this.x=t,this.y=n}Os.prototype={constructor:Os,scale:function(e){return e===1?this:new Os(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Os(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ug=new Os(1,0,0);S8.prototype=Os.prototype;function S8(e){for(;!e.__zoom;)if(!(e=e.parentNode))return ug;return e.__zoom}function Bb(e){e.stopImmediatePropagation()}function Iu(e){e.preventDefault(),e.stopImmediatePropagation()}function Lse(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Pse(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function qR(){return this.__zoom||ug}function Ise(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Bse(){return navigator.maxTouchPoints||"ontouchstart"in this}function zse(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function C8(){var e=Lse,t=Pse,n=zse,r=Ise,i=Bse,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=gp,d=og("start","zoom","end"),f,p,g,b=500,v=150,S=0,w=10;function k(L){L.property("__zoom",qR).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(L,H,O,V){var Y=L.selection?L.selection():L;Y.property("__zoom",qR),L!==Y?A(L,H,O,V):Y.interrupt().each(function(){_(this,arguments).event(V).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},k.scaleBy=function(L,H,O,V){k.scaleTo(L,function(){var Y=this.__zoom.k,te=typeof H=="function"?H.apply(this,arguments):H;return Y*te},O,V)},k.scaleTo=function(L,H,O,V){k.transform(L,function(){var Y=t.apply(this,arguments),te=this.__zoom,z=O==null?N(Y):typeof O=="function"?O.apply(this,arguments):O,W=te.invert(z),oe=typeof H=="function"?H.apply(this,arguments):H;return n(E(T(te,oe),z,W),Y,o)},O,V)},k.translateBy=function(L,H,O,V){k.transform(L,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),o)},null,V)},k.translateTo=function(L,H,O,V,Y){k.transform(L,function(){var te=t.apply(this,arguments),z=this.__zoom,W=V==null?N(te):typeof V=="function"?V.apply(this,arguments):V;return n(ug.translate(W[0],W[1]).scale(z.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof O=="function"?-O.apply(this,arguments):-O),te,o)},V,Y)};function T(L,H){return H=Math.max(s[0],Math.min(s[1],H)),H===L.k?L:new Os(H,L.x,L.y)}function E(L,H,O){var V=H[0]-O[0]*L.k,Y=H[1]-O[1]*L.k;return V===L.x&&Y===L.y?L:new Os(L.k,V,Y)}function N(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function A(L,H,O,V){L.on("start.zoom",function(){_(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(V).end()}).tween("zoom",function(){var Y=this,te=arguments,z=_(Y,te).event(V),W=t.apply(Y,te),oe=O==null?N(W):typeof O=="function"?O.apply(Y,te):O,ae=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),$=Y.__zoom,Q=typeof H=="function"?H.apply(Y,te):H,ee=u($.invert(oe).concat(ae/$.k),Q.invert(oe).concat(ae/Q.k));return function(de){if(de===1)de=Q;else{var le=ee(de),xe=ae/le[2];de=new Os(xe,oe[0]-le[0]*xe,oe[1]-le[1]*xe)}z.zoom(null,de)}})}function _(L,H,O){return!O&&L.__zooming||new j(L,H)}function j(L,H){this.that=L,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,H),this.taps=0}j.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,H){return this.mouse&&L!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var H=Gr(this.that).datum();d.call(L,this.that,new Ose(L,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:d}),H)}};function R(L,...H){if(!e.apply(this,arguments))return;var O=_(this,H).event(L),V=this.__zoom,Y=Math.max(s[0],Math.min(s[1],V.k*Math.pow(2,r.apply(this,arguments)))),te=Mi(L);if(O.wheel)(O.mouse[0][0]!==te[0]||O.mouse[0][1]!==te[1])&&(O.mouse[1]=V.invert(O.mouse[0]=te)),clearTimeout(O.wheel);else{if(V.k===Y)return;O.mouse=[te,V.invert(te)],xp(this),O.start()}Iu(L),O.wheel=setTimeout(z,v),O.zoom("mouse",n(E(T(V,Y),O.mouse[0],O.mouse[1]),O.extent,o));function z(){O.wheel=null,O.end()}}function I(L,...H){if(g||!e.apply(this,arguments))return;var O=L.currentTarget,V=_(this,H,!0).event(L),Y=Gr(L.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",ae,!0),te=Mi(L,O),z=L.clientX,W=L.clientY;o8(L.view),Bb(L),V.mouse=[te,this.__zoom.invert(te)],xp(this),V.start();function oe($){if(Iu($),!V.moved){var Q=$.clientX-z,ee=$.clientY-W;V.moved=Q*Q+ee*ee>S}V.event($).zoom("mouse",n(E(V.that.__zoom,V.mouse[0]=Mi($,O),V.mouse[1]),V.extent,o))}function ae($){Y.on("mousemove.zoom mouseup.zoom",null),a8($.view,V.moved),Iu($),V.event($).end()}}function B(L,...H){if(e.apply(this,arguments)){var O=this.__zoom,V=Mi(L.changedTouches?L.changedTouches[0]:L,this),Y=O.invert(V),te=O.k*(L.shiftKey?.5:2),z=n(E(T(O,te),V,Y),t.apply(this,H),o);Iu(L),l>0?Gr(this).transition().duration(l).call(A,z,V,L):Gr(this).call(k.transform,z,V,L)}}function U(L,...H){if(e.apply(this,arguments)){var O=L.touches,V=O.length,Y=_(this,H,L.changedTouches.length===V).event(L),te,z,W,oe;for(Bb(L),z=0;z<V;++z)W=O[z],oe=Mi(W,this),oe=[oe,this.__zoom.invert(oe),W.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==oe[2]&&(Y.touch1=oe,Y.taps=0):(Y.touch0=oe,te=!0,Y.taps=1+!!f);f&&(f=clearTimeout(f)),te&&(Y.taps<2&&(p=oe[0],f=setTimeout(function(){f=null},b)),xp(this),Y.start())}}function q(L,...H){if(this.__zooming){var O=_(this,H).event(L),V=L.changedTouches,Y=V.length,te,z,W,oe;for(Iu(L),te=0;te<Y;++te)z=V[te],W=Mi(z,this),O.touch0&&O.touch0[2]===z.identifier?O.touch0[0]=W:O.touch1&&O.touch1[2]===z.identifier&&(O.touch1[0]=W);if(z=O.that.__zoom,O.touch1){var ae=O.touch0[0],$=O.touch0[1],Q=O.touch1[0],ee=O.touch1[1],de=(de=Q[0]-ae[0])*de+(de=Q[1]-ae[1])*de,le=(le=ee[0]-$[0])*le+(le=ee[1]-$[1])*le;z=T(z,Math.sqrt(de/le)),W=[(ae[0]+Q[0])/2,(ae[1]+Q[1])/2],oe=[($[0]+ee[0])/2,($[1]+ee[1])/2]}else if(O.touch0)W=O.touch0[0],oe=O.touch0[1];else return;O.zoom("touch",n(E(z,W,oe),O.extent,o))}}function F(L,...H){if(this.__zooming){var O=_(this,H).event(L),V=L.changedTouches,Y=V.length,te,z;for(Bb(L),g&&clearTimeout(g),g=setTimeout(function(){g=null},b),te=0;te<Y;++te)z=V[te],O.touch0&&O.touch0[2]===z.identifier?delete O.touch0:O.touch1&&O.touch1[2]===z.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(z=Mi(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<w)){var W=Gr(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return k.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:Zh(+L),k):r},k.filter=function(L){return arguments.length?(e=typeof L=="function"?L:Zh(!!L),k):e},k.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:Zh(!!L),k):i},k.extent=function(L){return arguments.length?(t=typeof L=="function"?L:Zh([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),k):t},k.scaleExtent=function(L){return arguments.length?(s[0]=+L[0],s[1]=+L[1],k):[s[0],s[1]]},k.translateExtent=function(L){return arguments.length?(o[0][0]=+L[0][0],o[1][0]=+L[1][0],o[0][1]=+L[0][1],o[1][1]=+L[1][1],k):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},k.constrain=function(L){return arguments.length?(n=L,k):n},k.duration=function(L){return arguments.length?(l=+L,k):l},k.interpolate=function(L){return arguments.length?(u=L,k):u},k.on=function(){var L=d.on.apply(d,arguments);return L===d?k:L},k.clickDistance=function(L){return arguments.length?(S=(L=+L)*L,k):Math.sqrt(S)},k.tapDistance=function(L){return arguments.length?(w=+L,k):w},k}const cs={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Vd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],k8=["Enter"," ","Escape"],E8={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var $a;(function(e){e.Strict="strict",e.Loose="loose"})($a||($a={}));var Ia;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ia||(Ia={}));var Hd;(function(e){e.Partial="partial",e.Full="full"})(Hd||(Hd={}));const N8={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Mo;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Mo||(Mo={}));var Nm;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nm||(Nm={}));var Ae;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ae||(Ae={}));const VR={[Ae.Left]:Ae.Right,[Ae.Right]:Ae.Left,[Ae.Top]:Ae.Bottom,[Ae.Bottom]:Ae.Top};function T8(e){return e===null?null:e?"valid":"invalid"}const A8=e=>"id"in e&&"source"in e&&"target"in e,qse=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),y2=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),df=(e,t=[0,0])=>{const{width:n,height:r}=Hs(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},M8=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):y2(i)?i:t.nodeLookup.get(i.id));const l=o?Tm(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return dg(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return fg(n)},ff=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Tm(r);n=dg(n,i)}}),fg(n)},b2=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...pf(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:f,selectable:p=!0,hidden:g=!1}=d;if(o&&!p||g)continue;const b=f.width??d.width??d.initialWidth??null,v=f.height??d.height??d.initialHeight??null,S=Fd(l,Sc(d)),w=(b??0)*(v??0),k=s&&S>0;(!d.internals.handleBounds||k||S>=w||d.dragging)&&u.push(d)}return u},Vse=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Hse(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Fse({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Hse(e,o),u=ff(l),d=hg(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function _8({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},f=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",cs.error005());else{const b=l.measured.width,v=l.measured.height;b&&v&&(p=[[u,d],[u+b,d+v]])}else l&&Cc(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=Cc(p)?Ga(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",cs.error015()),{position:{x:g.x-u+(o.measured.width??0)*f[0],y:g.y-d+(o.measured.height??0)*f[1]},positionAbsolute:g}}async function Use({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const b=s.has(g.id),v=!b&&g.parentId&&o.find(S=>S.id===g.parentId);(b||v)&&o.push(g)}const l=new Set(t.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),f=Vse(o,u);for(const g of u)l.has(g.id)&&!f.find(v=>v.id===g.id)&&f.push(g);if(!i)return{edges:f,nodes:o};const p=await i({nodes:o,edges:f});return typeof p=="boolean"?p?{edges:f,nodes:o}:{edges:[],nodes:[]}:p}const wc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ga=(e={x:0,y:0},t,n)=>({x:wc(e.x,t[0][0],t[1][0]-(n?.width??0)),y:wc(e.y,t[0][1],t[1][1]-(n?.height??0))});function D8(e,t,n){const{width:r,height:i}=Hs(n),{x:s,y:o}=n.internals.positionAbsolute;return Ga(e,[[s,o],[s+r,o+i]],t)}const HR=(e,t,n)=>e<t?wc(Math.abs(e-t),1,t)/t:e>n?-wc(Math.abs(e-n),1,t)/t:0,R8=(e,t,n=15,r=40)=>{const i=HR(e.x,r,t.width-r)*n,s=HR(e.y,r,t.height-r)*n;return[i,s]},dg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),_k=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),fg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Sc=(e,t=[0,0])=>{const{x:n,y:r}=y2(e)?e.internals.positionAbsolute:df(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Tm=(e,t=[0,0])=>{const{x:n,y:r}=y2(e)?e.internals.positionAbsolute:df(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},j8=(e,t)=>fg(dg(_k(e),_k(t))),Fd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},FR=e=>ji(e.width)&&ji(e.height)&&ji(e.x)&&ji(e.y),ji=e=>!isNaN(e)&&isFinite(e),$se=(e,t)=>{},hf=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),pf=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?hf(l,o):l},Am=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Hl(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Gse(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Hl(e,n),i=Hl(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Hl(e.top??e.y??0,n),i=Hl(e.bottom??e.y??0,n),s=Hl(e.left??e.x??0,t),o=Hl(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Wse(e,t,n,r,i,s){const{x:o,y:l}=Am(e,[t,n,r]),{x:u,y:d}=Am({x:e.x+e.width,y:e.y+e.height},[t,n,r]),f=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(f),bottom:Math.floor(p)}}const hg=(e,t,n,r,i,s)=>{const o=Gse(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),f=wc(d,r,i),p=e.x+e.width/2,g=e.y+e.height/2,b=t/2-p*f,v=n/2-g*f,S=Wse(e,b,v,f,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:b-w.left+w.right,y:v-w.top+w.bottom,zoom:f}},Ud=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Cc(e){return e!=null&&e!=="parent"}function Hs(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function O8(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function L8(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function UR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Kse(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Yse(e){return{...E8,...e||{}}}function yd(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=ns(e),l=pf({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?hf(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const x2=e=>({width:e.offsetWidth,height:e.offsetHeight}),P8=e=>e?.getRootNode?.()||window?.document,Xse=["INPUT","SELECT","TEXTAREA"];function I8(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Xse.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const B8=e=>"clientX"in e,ns=(e,t)=>{const n=B8(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},$R=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...x2(o)}})};function z8({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,f=Math.abs(u-e),p=Math.abs(d-t);return[u,d,f,p]}function Qh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function GR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ae.Left:return[t-Qh(t-r,s),n];case Ae.Right:return[t+Qh(r-t,s),n];case Ae.Top:return[t,n-Qh(n-i,s)];case Ae.Bottom:return[t,n+Qh(i-n,s)]}}function pg({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,curvature:o=.25}){const[l,u]=GR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,f]=GR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,b,v]=z8({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${e},${t} C${l},${u} ${d},${f} ${r},${i}`,p,g,b,v]}function mg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function Zse({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function Qse({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=dg(Tm(e),Tm(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Fd(o,fg(s))>0}const Jse=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,eoe=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),q8=(e,t)=>{if(!e.source||!e.target)return t;let n;return A8(e)?n={...e}:n={...e,id:Jse(e)},eoe(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function V8({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=mg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const WR={[Ae.Left]:{x:-1,y:0},[Ae.Right]:{x:1,y:0},[Ae.Top]:{x:0,y:-1},[Ae.Bottom]:{x:0,y:1}},toe=({source:e,sourcePosition:t=Ae.Bottom,target:n})=>t===Ae.Left||t===Ae.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},KR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function noe({source:e,sourcePosition:t=Ae.Bottom,target:n,targetPosition:r=Ae.Top,center:i,offset:s,stepPosition:o}){const l=WR[t],u=WR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},f={x:n.x+u.x*s,y:n.y+u.y*s},p=toe({source:d,sourcePosition:t,target:f}),g=p.x!==0?"x":"y",b=p[g];let v=[],S,w;const k={x:0,y:0},T={x:0,y:0},[,,E,N]=mg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*u[g]===-1){g==="x"?(S=i.x??d.x+(f.x-d.x)*o,w=i.y??(d.y+f.y)/2):(S=i.x??(d.x+f.x)/2,w=i.y??d.y+(f.y-d.y)*o);const _=[{x:S,y:d.y},{x:S,y:f.y}],j=[{x:d.x,y:w},{x:f.x,y:w}];l[g]===b?v=g==="x"?_:j:v=g==="x"?j:_}else{const _=[{x:d.x,y:f.y}],j=[{x:f.x,y:d.y}];if(g==="x"?v=l.x===b?j:_:v=l.y===b?_:j,t===r){const q=Math.abs(e[g]-n[g]);if(q<=s){const F=Math.min(s-1,s-q);l[g]===b?k[g]=(d[g]>e[g]?-1:1)*F:T[g]=(f[g]>n[g]?-1:1)*F}}if(t!==r){const q=g==="x"?"y":"x",F=l[g]===u[q],L=d[q]>f[q],H=d[q]<f[q];(l[g]===1&&(!F&&L||F&&H)||l[g]!==1&&(!F&&H||F&&L))&&(v=g==="x"?_:j)}const R={x:d.x+k.x,y:d.y+k.y},I={x:f.x+T.x,y:f.y+T.y},B=Math.max(Math.abs(R.x-v[0].x),Math.abs(I.x-v[0].x)),U=Math.max(Math.abs(R.y-v[0].y),Math.abs(I.y-v[0].y));B>=U?(S=(R.x+I.x)/2,w=v[0].y):(S=v[0].x,w=(R.y+I.y)/2)}return[[e,{x:d.x+k.x,y:d.y+k.y},...v,{x:f.x+T.x,y:f.y+T.y},n],S,w,E,N]}function roe(e,t,n,r){const i=Math.min(KR(e,t)/2,KR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,f=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*f}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function Dk({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:f=.5}){const[p,g,b,v,S]=noe({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:f});return[p.reduce((k,T,E)=>{let N="";return E>0&&E<p.length-1?N=roe(p[E-1],T,p[E+1],o):N=`${E===0?"M":"L"}${T.x} ${T.y}`,k+=N,k},""),g,b,v,S]}function YR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ioe(e){const{sourceNode:t,targetNode:n}=e;if(!YR(t)||!YR(n))return null;const r=t.internals.handleBounds||XR(t.handles),i=n.internals.handleBounds||XR(n.handles),s=ZR(r?.source??[],e.sourceHandle),o=ZR(e.connectionMode===$a.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",cs.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Ae.Bottom,u=o?.position||Ae.Top,d=$d(t,s,l),f=$d(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:u}}function XR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function $d(e,t,n=Ae.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??Hs(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Ae.Top:return{x:i+o/2,y:s};case Ae.Right:return{x:i+o,y:s+l/2};case Ae.Bottom:return{x:i+o/2,y:s+l};case Ae.Left:return{x:i,y:s+l/2}}}function ZR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Rk(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function soe(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=Rk(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const v2={nodeOrigin:[0,0],nodeExtent:Vd,elevateNodesOnSelect:!0,defaults:{}},ooe={...v2,checkEquality:!0};function w2(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function aoe(e,t,n){const r=w2(v2,n);for(const i of e.values())if(i.parentId)S2(i,e,t,r);else{const s=df(i,r.nodeOrigin),o=Cc(i.extent)?i.extent:r.nodeExtent,l=Ga(s,o,Hs(i));i.internals.positionAbsolute=l}}function jk(e,t,n,r){const i=w2(ooe,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const f=df(u,i.nodeOrigin),p=Cc(u.extent)?u.extent:i.nodeExtent,g=Ga(f,p,Hs(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:H8(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&S2(d,t,n,r)}return s}function loe(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function S2(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=w2(v2,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}loe(e,n);const d=i?1e3:0,{x:f,y:p,z:g}=coe(e,u,s,o,d),{positionAbsolute:b}=e.internals,v=f!==b.x||p!==b.y;(v||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:f,y:p}:b,z:g}})}function H8(e,t){return(ji(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function coe(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=Hs(e),u=df(e,n),d=Cc(e.extent)?Ga(u,e.extent,l):u;let f=Ga({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(f=D8(f,l,t));const p=H8(e,i),g=t.internals.z??0;return{x:f.x,y:f.y,z:g>=p?g+1:p}}function C2(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Sc(l),d=j8(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,f=Hs(l),p=l.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,b=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,v=Math.max(f.width,Math.round(o.width)),S=Math.max(f.height,Math.round(o.height)),w=(v-f.width)*p[0],k=(S-f.height)*p[1];(g>0||b>0||w||k)&&(i.push({id:u,type:"position",position:{x:l.position.x-g+w,y:l.position.y-b+k}}),n.get(u)?.forEach(T=>{e.some(E=>E.id===T.id)||i.push({id:T.id,type:"position",position:{x:T.position.x+g,y:T.position.y+b}})})),(f.width<o.width||f.height<o.height||g||b)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:v+(g?p[0]*g-w:0),height:S+(b?p[1]*b-k:0)}})}),i}function uoe(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const g of e.values()){const b=t.get(g.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),l=!0;continue}const v=x2(g.nodeElement),S=b.measured.width!==v.width||b.measured.height!==v.height;if(!!(v.width&&v.height&&(S||!b.internals.handleBounds||g.force))){const k=g.nodeElement.getBoundingClientRect(),T=Cc(b.extent)?b.extent:s;let{positionAbsolute:E}=b.internals;b.parentId&&b.extent==="parent"?E=D8(E,v,t.get(b.parentId)):T&&(E=Ga(E,T,v));const N={...b,measured:v,internals:{...b.internals,positionAbsolute:E,handleBounds:{source:$R("source",g.nodeElement,k,f,b.id),target:$R("target",g.nodeElement,k,f,b.id)}}};t.set(b.id,N),b.parentId&&S2(N,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:b.id,type:"dimensions",dimensions:v}),b.expandParent&&b.parentId&&p.push({id:b.id,parentId:b.parentId,rect:Sc(N,i)}))}}if(p.length>0){const g=C2(p,t,n,i);u.push(...g)}return{changes:u,updatedInternals:l}}async function doe({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function QR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function F8(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,f=`${s}-${l}--${i}-${o}`;QR("source",u,f,e,i,o),QR("target",u,d,e,s,l),t.set(r.id,r)}}function U8(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:U8(n,t):!1}function JR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function foe(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!U8(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function zb({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function hoe({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=hf(s,t);return{x:o.x-s.x,y:o.y-s.y}}function poe({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},f=null,p=!1,g=null,b=!1,v=!1,S=null;function w({noDragClassName:T,handleSelector:E,domNode:N,isSelectable:A,nodeId:_,nodeClickDistance:j=0}){g=Gr(N);function R({x:q,y:F}){const{nodeLookup:L,nodeExtent:H,snapGrid:O,snapToGrid:V,nodeOrigin:Y,onNodeDrag:te,onSelectionDrag:z,onError:W,updateNodePositions:oe}=t();s={x:q,y:F};let ae=!1;const $=l.size>1,Q=$&&H?_k(ff(l)):null,ee=$&&V?hoe({dragItems:l,snapGrid:O,x:q,y:F}):null;for(const[de,le]of l){if(!L.has(de))continue;let xe={x:q-le.distance.x,y:F-le.distance.y};V&&(xe=ee?{x:Math.round(xe.x+ee.x),y:Math.round(xe.y+ee.y)}:hf(xe,O));let _e=null;if($&&H&&!le.extent&&Q){const{positionAbsolute:Te}=le.internals,ke=Te.x-Q.x+H[0][0],Ee=Te.x+le.measured.width-Q.x2+H[1][0],pt=Te.y-Q.y+H[0][1],Le=Te.y+le.measured.height-Q.y2+H[1][1];_e=[[ke,pt],[Ee,Le]]}const{position:ze,positionAbsolute:Pe}=_8({nodeId:de,nextPosition:xe,nodeLookup:L,nodeExtent:_e||H,nodeOrigin:Y,onError:W});ae=ae||le.position.x!==ze.x||le.position.y!==ze.y,le.position=ze,le.internals.positionAbsolute=Pe}if(v=v||ae,!!ae&&(oe(l,!0),S&&(r||te||!_&&z))){const[de,le]=zb({nodeId:_,dragItems:l,nodeLookup:L});r?.(S,l,de,le),te?.(S,de,le),_||z?.(S,le)}}async function I(){if(!f)return;const{transform:q,panBy:F,autoPanSpeed:L,autoPanOnNodeDrag:H}=t();if(!H){u=!1,cancelAnimationFrame(o);return}const[O,V]=R8(d,f,L);(O!==0||V!==0)&&(s.x=(s.x??0)-O/q[2],s.y=(s.y??0)-V/q[2],await F({x:O,y:V})&&R(s)),o=requestAnimationFrame(I)}function B(q){const{nodeLookup:F,multiSelectionActive:L,nodesDraggable:H,transform:O,snapGrid:V,snapToGrid:Y,selectNodesOnDrag:te,onNodeDragStart:z,onSelectionDragStart:W,unselectNodesAndEdges:oe}=t();p=!0,(!te||!A)&&!L&&_&&(F.get(_)?.selected||oe()),A&&te&&_&&e?.(_);const ae=yd(q.sourceEvent,{transform:O,snapGrid:V,snapToGrid:Y,containerBounds:f});if(s=ae,l=foe(F,H,ae,_),l.size>0&&(n||z||!_&&W)){const[$,Q]=zb({nodeId:_,dragItems:l,nodeLookup:F});n?.(q.sourceEvent,l,$,Q),z?.(q.sourceEvent,$,Q),_||W?.(q.sourceEvent,Q)}}const U=l8().clickDistance(j).on("start",q=>{const{domNode:F,nodeDragThreshold:L,transform:H,snapGrid:O,snapToGrid:V}=t();f=F?.getBoundingClientRect()||null,b=!1,v=!1,S=q.sourceEvent,L===0&&B(q),s=yd(q.sourceEvent,{transform:H,snapGrid:O,snapToGrid:V,containerBounds:f}),d=ns(q.sourceEvent,f)}).on("drag",q=>{const{autoPanOnNodeDrag:F,transform:L,snapGrid:H,snapToGrid:O,nodeDragThreshold:V,nodeLookup:Y}=t(),te=yd(q.sourceEvent,{transform:L,snapGrid:H,snapToGrid:O,containerBounds:f});if(S=q.sourceEvent,(q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||_&&!Y.has(_))&&(b=!0),!b){if(!u&&F&&p&&(u=!0,I()),!p){const z=te.xSnapped-(s.x??0),W=te.ySnapped-(s.y??0);Math.sqrt(z*z+W*W)>V&&B(q)}(s.x!==te.xSnapped||s.y!==te.ySnapped)&&l&&p&&(d=ns(q.sourceEvent,f),R(te))}}).on("end",q=>{if(!(!p||b)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:L,onNodeDragStop:H,onSelectionDragStop:O}=t();if(v&&(L(l,!1),v=!1),i||H||!_&&O){const[V,Y]=zb({nodeId:_,dragItems:l,nodeLookup:F,dragging:!1});i?.(q.sourceEvent,l,V,Y),H?.(q.sourceEvent,V,Y),_||O?.(q.sourceEvent,Y)}}}).filter(q=>{const F=q.target;return!q.button&&(!T||!JR(F,`.${T}`,N))&&(!E||JR(F,E,N))});g.call(U)}function k(){g?.on(".drag",null)}return{update:w,destroy:k}}function moe(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Fd(i,Sc(s))>0&&r.push(s);return r}const goe=250;function yoe(e,t,n,r){let i=[],s=1/0;const o=moe(e,n,t+goe);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=$d(l,d,d.position,!0),g=Math.sqrt(Math.pow(f-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...d,x:f,y:p}],s=g):g===s&&i.push({...d,x:f,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function $8(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...$d(o,u,u.position,!0)}:u}function G8(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function boe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const W8=()=>!0;function xoe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:f,flowId:p,panBy:g,cancelConnection:b,onConnectStart:v,onConnect:S,onConnectEnd:w,isValidConnection:k=W8,onReconnectEnd:T,updateConnection:E,getTransform:N,getFromHandle:A,autoPanSpeed:_,dragThreshold:j=1,handleDomNode:R}){const I=P8(e.target);let B=0,U;const{x:q,y:F}=ns(e),L=G8(s,R),H=l?.getBoundingClientRect();let O=!1;if(!H||!L)return;const V=$8(i,L,r,u,t);if(!V)return;let Y=ns(e,H),te=!1,z=null,W=!1,oe=null;function ae(){if(!f||!H)return;const[ze,Pe]=R8(Y,H,_);g({x:ze,y:Pe}),B=requestAnimationFrame(ae)}const $={...V,nodeId:i,type:L,position:V.position},Q=u.get(i);let de={inProgress:!0,isValid:null,from:$d(Q,$,Ae.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:Q,to:Y,toHandle:null,toPosition:VR[$.position],toNode:null};function le(){O=!0,E(de),v?.(e,{nodeId:i,handleId:r,handleType:L})}j===0&&le();function xe(ze){if(!O){const{x:Ee,y:pt}=ns(ze),Le=Ee-q,gt=pt-F;if(!(Le*Le+gt*gt>j*j))return;le()}if(!A()||!$){_e(ze);return}const Pe=N();Y=ns(ze,H),U=yoe(pf(Y,Pe,!1,[1,1]),n,u,$),te||(ae(),te=!0);const Te=K8(ze,{handle:U,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:k,doc:I,lib:d,flowId:p,nodeLookup:u});oe=Te.handleDomNode,z=Te.connection,W=boe(!!U,Te.isValid);const ke={...de,isValid:W,to:Te.toHandle&&W?Am({x:Te.toHandle.x,y:Te.toHandle.y},Pe):Y,toHandle:Te.toHandle,toPosition:W&&Te.toHandle?Te.toHandle.position:VR[$.position],toNode:Te.toHandle?u.get(Te.toHandle.nodeId):null};W&&U&&de.toHandle&&ke.toHandle&&de.toHandle.type===ke.toHandle.type&&de.toHandle.nodeId===ke.toHandle.nodeId&&de.toHandle.id===ke.toHandle.id&&de.to.x===ke.to.x&&de.to.y===ke.to.y||(E(ke),de=ke)}function _e(ze){if(O){(U||oe)&&z&&W&&S?.(z);const{inProgress:Pe,...Te}=de,ke={...Te,toPosition:de.toHandle?de.toPosition:null};w?.(ze,ke),s&&T?.(ze,ke)}b(),cancelAnimationFrame(B),te=!1,W=!1,z=null,oe=null,I.removeEventListener("mousemove",xe),I.removeEventListener("mouseup",_e),I.removeEventListener("touchmove",xe),I.removeEventListener("touchend",_e)}I.addEventListener("mousemove",xe),I.addEventListener("mouseup",_e),I.addEventListener("touchmove",xe),I.addEventListener("touchend",_e)}function K8(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=W8,nodeLookup:f}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:v}=ns(e),S=o.elementFromPoint(b,v),w=S?.classList.contains(`${l}-flow__handle`)?S:g,k={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const T=G8(void 0,w),E=w.getAttribute("data-nodeid"),N=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!E||!T)return k;const j={source:p?E:r,sourceHandle:p?N:i,target:p?r:E,targetHandle:p?i:N};k.connection=j;const I=A&&_&&(n===$a.Strict?p&&T==="source"||!p&&T==="target":E!==r||N!==i);k.isValid=I&&d(j),k.toHandle=$8(E,T,N,f,n,!0)}return k}const Ok={onPointerDown:xoe,isValid:K8};function voe({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=Gr(e);function s({translateExtent:l,width:u,height:d,zoomStep:f=1,pannable:p=!0,zoomable:g=!0,inversePan:b=!1}){const v=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const N=n(),A=E.sourceEvent.ctrlKey&&Ud()?10:1,_=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*f,j=N[2]*Math.pow(2,_*A);t.scaleTo(j)};let S=[0,0];const w=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(S=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},k=E=>{const N=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const A=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],_=[A[0]-S[0],A[1]-S[1]];S=A;const j=r()*Math.max(N[2],Math.log(N[2]))*(b?-1:1),R={x:N[0]-_[0]*j,y:N[1]-_[1]*j},I=[[0,0],[u,d]];t.setViewportConstrained({x:R.x,y:R.y,zoom:N[2]},I,l)},T=C8().on("start",w).on("zoom",p?k:null).on("zoom.wheel",g?v:null);i.call(T,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Mi}}const woe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,gg=e=>({x:e.x,y:e.y,zoom:e.k}),qb=({x:e,y:t,zoom:n})=>ug.translate(e,t).scale(n),tc=(e,t)=>e.target.closest(`.${t}`),Y8=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Soe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Vb=(e,t=0,n=Soe,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},X8=e=>{const t=e.ctrlKey&&Ud()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Coe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return f=>{if(tc(f,t))return!1;f.preventDefault(),f.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(f.ctrlKey&&o){const w=Mi(f),k=X8(f),T=p*Math.pow(2,k);r.scaleTo(n,T,w,f);return}const g=f.deltaMode===1?20:1;let b=i===Ia.Vertical?0:f.deltaX*g,v=i===Ia.Horizontal?0:f.deltaY*g;!Ud()&&f.shiftKey&&i!==Ia.Vertical&&(b=f.deltaY*g,v=0),r.translateBy(n,-(b/p)*s,-(v/p)*s,{internal:!0});const S=gg(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(f,S)),e.isPanScrolling&&(u?.(f,S),e.panScrollTimeout=setTimeout(()=>{d?.(f,S),e.isPanScrolling=!1},150))}}function koe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=tc(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function Eoe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=gg(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Noe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&Y8(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,gg(s.transform))}}function Toe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&Y8(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&woe(e.prevViewport,o.transform))){const l=gg(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Aoe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return f=>{const p=e||t,g=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(tc(f,`${d}-flow__node`)||tc(f,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||tc(f,l)&&f.type==="wheel"||tc(f,u)&&(f.type!=="wheel"||i&&f.type==="wheel"&&!e)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!p&&!i&&!g&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&b}}function Moe({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=C8().clickDistance(!ji(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),b=Gr(e).call(g);E({x:s.x,y:s.y,zoom:wc(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const v=b.on("wheel.zoom"),S=b.on("dblclick.zoom");g.wheelDelta(X8);function w(q,F){return b?new Promise(L=>{g?.interpolate(F?.interpolate==="linear"?gd:gp).transform(Vb(b,F?.duration,F?.ease,()=>L(!0)),q)}):Promise.resolve(!1)}function k({noWheelClassName:q,noPanClassName:F,onPaneContextMenu:L,userSelectionActive:H,panOnScroll:O,panOnDrag:V,panOnScrollMode:Y,panOnScrollSpeed:te,preventScrolling:z,zoomOnPinch:W,zoomOnScroll:oe,zoomOnDoubleClick:ae,zoomActivationKeyPressed:$,lib:Q,onTransformChange:ee}){H&&!f.isZoomingOrPanning&&T();const le=O&&!$&&!H?Coe({zoomPanValues:f,noWheelClassName:q,d3Selection:b,d3Zoom:g,panOnScrollMode:Y,panOnScrollSpeed:te,zoomOnPinch:W,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):koe({noWheelClassName:q,preventScrolling:z,d3ZoomHandler:v});if(b.on("wheel.zoom",le,{passive:!1}),!H){const _e=Eoe({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:l});g.on("start",_e);const ze=Noe({zoomPanValues:f,panOnDrag:V,onPaneContextMenu:!!L,onPanZoom:o,onTransformChange:ee});g.on("zoom",ze);const Pe=Toe({zoomPanValues:f,panOnDrag:V,panOnScroll:O,onPaneContextMenu:L,onPanZoomEnd:u,onDraggingChange:d});g.on("end",Pe)}const xe=Aoe({zoomActivationKeyPressed:$,panOnDrag:V,zoomOnScroll:oe,panOnScroll:O,zoomOnDoubleClick:ae,zoomOnPinch:W,userSelectionActive:H,noPanClassName:F,noWheelClassName:q,lib:Q});g.filter(xe),ae?b.on("dblclick.zoom",S):b.on("dblclick.zoom",null)}function T(){g.on("zoom",null)}async function E(q,F,L){const H=qb(q),O=g?.constrain()(H,F,L);return O&&await w(O),new Promise(V=>V(O))}async function N(q,F){const L=qb(q);return await w(L,F),new Promise(H=>H(L))}function A(q){if(b){const F=qb(q),L=b.property("__zoom");(L.k!==q.zoom||L.x!==q.x||L.y!==q.y)&&g?.transform(b,F,null,{sync:!0})}}function _(){const q=b?S8(b.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function j(q,F){return b?new Promise(L=>{g?.interpolate(F?.interpolate==="linear"?gd:gp).scaleTo(Vb(b,F?.duration,F?.ease,()=>L(!0)),q)}):Promise.resolve(!1)}function R(q,F){return b?new Promise(L=>{g?.interpolate(F?.interpolate==="linear"?gd:gp).scaleBy(Vb(b,F?.duration,F?.ease,()=>L(!0)),q)}):Promise.resolve(!1)}function I(q){g?.scaleExtent(q)}function B(q){g?.translateExtent(q)}function U(q){const F=!ji(q)||q<0?0:q;g?.clickDistance(F)}return{update:k,destroy:T,setViewport:N,setViewportConstrained:E,getViewport:_,scaleTo:j,scaleBy:R,setScaleExtent:I,setTranslateExtent:B,syncViewport:A,setClickDistance:U}}var Wa;(function(e){e.Line="line",e.Handle="handle"})(Wa||(Wa={}));const _oe=["top-left","top-right","bottom-left","bottom-right"],Doe=["top","right","bottom","left"];function Roe({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function joe(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function vo(e,t){return Math.max(0,t-e)}function wo(e,t){return Math.max(0,e-t)}function Jh(e,t,n){return Math.max(0,t-e,e-n)}function ej(e,t){return e?!t:t}function Ooe(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:f,isVertical:p}=t,g=f&&p,{xSnapped:b,ySnapped:v}=n,{minWidth:S,maxWidth:w,minHeight:k,maxHeight:T}=r,{x:E,y:N,width:A,height:_,aspectRatio:j}=e;let R=Math.floor(f?b-e.pointerX:0),I=Math.floor(p?v-e.pointerY:0);const B=A+(u?-R:R),U=_+(d?-I:I),q=-s[0]*A,F=-s[1]*_;let L=Jh(B,S,w),H=Jh(U,k,T);if(o){let Y=0,te=0;u&&R<0?Y=vo(E+R+q,o[0][0]):!u&&R>0&&(Y=wo(E+B+q,o[1][0])),d&&I<0?te=vo(N+I+F,o[0][1]):!d&&I>0&&(te=wo(N+U+F,o[1][1])),L=Math.max(L,Y),H=Math.max(H,te)}if(l){let Y=0,te=0;u&&R>0?Y=wo(E+R,l[0][0]):!u&&R<0&&(Y=vo(E+B,l[1][0])),d&&I>0?te=wo(N+I,l[0][1]):!d&&I<0&&(te=vo(N+U,l[1][1])),L=Math.max(L,Y),H=Math.max(H,te)}if(i){if(f){const Y=Jh(B/j,k,T)*j;if(L=Math.max(L,Y),o){let te=0;!u&&!d||u&&!d&&g?te=wo(N+F+B/j,o[1][1])*j:te=vo(N+F+(u?R:-R)/j,o[0][1])*j,L=Math.max(L,te)}if(l){let te=0;!u&&!d||u&&!d&&g?te=vo(N+B/j,l[1][1])*j:te=wo(N+(u?R:-R)/j,l[0][1])*j,L=Math.max(L,te)}}if(p){const Y=Jh(U*j,S,w)/j;if(H=Math.max(H,Y),o){let te=0;!u&&!d||d&&!u&&g?te=wo(E+U*j+q,o[1][0])/j:te=vo(E+(d?I:-I)*j+q,o[0][0])/j,H=Math.max(H,te)}if(l){let te=0;!u&&!d||d&&!u&&g?te=vo(E+U*j,l[1][0])/j:te=wo(E+(d?I:-I)*j,l[0][0])/j,H=Math.max(H,te)}}}I=I+(I<0?H:-H),R=R+(R<0?L:-L),i&&(g?B>U*j?I=(ej(u,d)?-R:R)/j:R=(ej(u,d)?-I:I)*j:f?(I=R/j,d=u):(R=I*j,u=d));const O=u?E+R:E,V=d?N+I:N;return{width:A+(u?-R:R),height:_+(d?-I:I),x:s[0]*R*(u?-1:1)+O,y:s[1]*I*(d?-1:1)+V}}const Z8={width:0,height:0,x:0,y:0},Loe={...Z8,pointerX:0,pointerY:0,aspectRatio:1};function Poe(e){return[[0,0],[e.measured.width,e.measured.height]]}function Ioe(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Boe({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=Gr(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:f,resizeDirection:p,onResizeStart:g,onResize:b,onResizeEnd:v,shouldResize:S}){let w={...Z8},k={...Loe};const T=joe(u);let E,N=null,A=[],_,j,R;const I=l8().on("start",B=>{const{nodeLookup:U,transform:q,snapGrid:F,snapToGrid:L,nodeOrigin:H,paneDomNode:O}=n();if(E=U.get(t),!E)return;N=O?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:Y}=yd(B.sourceEvent,{transform:q,snapGrid:F,snapToGrid:L,containerBounds:N});w={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},k={...w,pointerX:V,pointerY:Y,aspectRatio:w.width/w.height},_=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(_=U.get(E.parentId),j=_&&E.extent==="parent"?Poe(_):void 0),A=[],R=void 0;for(const[te,z]of U)if(z.parentId===t&&(A.push({id:te,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const W=Ioe(z,E,z.origin??H);R?R=[[Math.min(W[0][0],R[0][0]),Math.min(W[0][1],R[0][1])],[Math.max(W[1][0],R[1][0]),Math.max(W[1][1],R[1][1])]]:R=W}g?.(B,{...w})}).on("drag",B=>{const{transform:U,snapGrid:q,snapToGrid:F,nodeOrigin:L}=n(),H=yd(B.sourceEvent,{transform:U,snapGrid:q,snapToGrid:F,containerBounds:N}),O=[];if(!E)return;const{x:V,y:Y,width:te,height:z}=w,W={},oe=E.origin??L,{width:ae,height:$,x:Q,y:ee}=Ooe(k,T,H,d,f,oe,j,R),de=ae!==te,le=$!==z,xe=Q!==V&&de,_e=ee!==Y&&le;if(!xe&&!_e&&!de&&!le)return;if((xe||_e||oe[0]===1||oe[1]===1)&&(W.x=xe?Q:w.x,W.y=_e?ee:w.y,w.x=W.x,w.y=W.y,A.length>0)){const ke=Q-V,Ee=ee-Y;for(const pt of A)pt.position={x:pt.position.x-ke+oe[0]*(ae-te),y:pt.position.y-Ee+oe[1]*($-z)},O.push(pt)}if((de||le)&&(W.width=de&&(!p||p==="horizontal")?ae:w.width,W.height=le&&(!p||p==="vertical")?$:w.height,w.width=W.width,w.height=W.height),_&&E.expandParent){const ke=oe[0]*(W.width??0);W.x&&W.x<ke&&(w.x=ke,k.x=k.x-(W.x-ke));const Ee=oe[1]*(W.height??0);W.y&&W.y<Ee&&(w.y=Ee,k.y=k.y-(W.y-Ee))}const ze=Roe({width:w.width,prevWidth:te,height:w.height,prevHeight:z,affectsX:T.affectsX,affectsY:T.affectsY}),Pe={...w,direction:ze};S?.(B,Pe)!==!1&&(b?.(B,Pe),r(W,O))}).on("end",B=>{v?.(B,{...w}),i?.({...w})});s.call(I)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const zoe={},tj=e=>{let t;const n=new Set,r=(f,p)=>{const g=typeof f=="function"?f(t):f;if(!Object.is(g,t)){const b=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(v=>v(t,b))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(zoe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},qoe=e=>e?tj(e):tj,{useDebugValue:Voe}=Ce,{useSyncExternalStoreWithSelector:Hoe}=nee,Foe=e=>e;function Q8(e,t=Foe,n){const r=Hoe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Voe(r),r}const nj=(e,t)=>{const n=qoe(e),r=(i,s=t)=>Q8(n,i,s);return Object.assign(r,n),r},Uoe=(e,t)=>e?nj(e,t):nj;function Zt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const yg=M.createContext(null),$oe=yg.Provider,J8=cs.error001();function ot(e,t){const n=M.useContext(yg);if(n===null)throw new Error(J8);return Q8(n,e,t)}function Ft(){const e=M.useContext(yg);if(e===null)throw new Error(J8);return M.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const rj={display:"none"},Goe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},eq="react-flow__node-desc",tq="react-flow__edge-desc",Woe="react-flow__aria-live",Koe=e=>e.ariaLiveMessage,Yoe=e=>e.ariaLabelConfig;function Xoe({rfId:e}){const t=ot(Koe);return m.jsx("div",{id:`${Woe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Goe,children:t})}function Zoe({rfId:e,disableKeyboardA11y:t}){const n=ot(Yoe);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${eq}-${e}`,style:rj,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${tq}-${e}`,style:rj,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(Xoe,{rfId:e})]})}const bg=M.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return m.jsx("div",{className:Cn(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});bg.displayName="Panel";function Qoe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:m.jsx(bg,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Joe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},ep=e=>e.id;function eae(e,t){return Zt(e.selectedNodes.map(ep),t.selectedNodes.map(ep))&&Zt(e.selectedEdges.map(ep),t.selectedEdges.map(ep))}function tae({onSelectionChange:e}){const t=Ft(),{selectedNodes:n,selectedEdges:r}=ot(Joe,eae);return M.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const nae=e=>!!e.onSelectionChangeHandlers;function rae({onSelectionChange:e}){const t=ot(nae);return e||t?m.jsx(tae,{onSelectionChange:e}):null}const nq=[0,0],iae={x:0,y:0,zoom:1},sae=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],ij=[...sae,"rfId"],oae=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),sj={translateExtent:Vd,nodeOrigin:nq,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function aae(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=ot(oae,Zt),f=Ft();M.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=sj,l()}),[]);const p=M.useRef(sj);return M.useEffect(()=>{for(const g of ij){const b=e[g],v=p.current[g];b!==v&&(typeof e[g]>"u"||(g==="nodes"?t(b):g==="edges"?n(b):g==="minZoom"?r(b):g==="maxZoom"?i(b):g==="translateExtent"?s(b):g==="nodeExtent"?o(b):g==="paneClickDistance"?d(b):g==="ariaLabelConfig"?f.setState({ariaLabelConfig:Yse(b)}):g==="fitView"?f.setState({fitViewQueued:b}):g==="fitViewOptions"?f.setState({fitViewOptions:b}):f.setState({[g]:b})))}p.current=e},ij.map(g=>e[g])),null}function oj(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function lae(e){const[t,n]=M.useState(e==="system"?null:e);return M.useEffect(()=>{if(e!=="system"){n(e);return}const r=oj(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:oj()?.matches?"dark":"light"}const aj=typeof document<"u"?document:null;function Gd(e=null,t={target:aj,actInsideInputWithModifier:!0}){const[n,r]=M.useState(!1),i=M.useRef(!1),s=M.useRef(new Set([])),[o,l]=M.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=d.reduce((p,g)=>p.concat(...g),[]);return[d,f]}return[[],[]]},[e]);return M.useEffect(()=>{const u=t?.target??aj,d=t?.actInsideInputWithModifier??!0;if(e!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!i.current||i.current&&!d)&&I8(b))return!1;const S=cj(b.code,l);if(s.current.add(b[S]),lj(o,s.current,!1)){const w=b.composedPath?.()?.[0]||b.target,k=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!k)&&b.preventDefault(),r(!0)}},p=b=>{const v=cj(b.code,l);lj(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[v]),b.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function lj(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function cj(e,t){return t.includes(e)?"code":"key"}const cae=()=>{const e=Ft();return M.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=hg(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},f=n.snapGrid??i,p=n.snapToGrid??s;return pf(d,r,p,f)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Am(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function rq(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)uae(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function uae(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function iq(e,t){return rq(e,t)}function sq(e,t){return rq(e,t)}function ba(e,t){return{id:e,type:"select",selected:t}}function nc(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(ba(s.id,o)))}return r}function uj({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function dj(e){return{id:e.id,type:"remove"}}const fj=e=>qse(e),dae=e=>A8(e);function oq(e){return M.forwardRef(e)}const fae=typeof window<"u"?M.useLayoutEffect:M.useEffect;function hj(e){const[t,n]=M.useState(BigInt(0)),[r]=M.useState(()=>hae(()=>n(i=>i+BigInt(1))));return fae(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function hae(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const aq=M.createContext(null);function pae({children:e}){const t=Ft(),n=M.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:f,onNodesChange:p,nodeLookup:g,fitViewQueued:b}=t.getState();let v=u;for(const w of l)v=typeof w=="function"?w(v):w;const S=uj({items:v,lookup:g});f&&d(v),S.length>0?p?.(S):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:k,setNodes:T}=t.getState();w&&T(k)})},[]),r=hj(n),i=M.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:f,onEdgesChange:p,edgeLookup:g}=t.getState();let b=u;for(const v of l)b=typeof v=="function"?v(b):v;f?d(b):p&&p(uj({items:b,lookup:g}))},[]),s=hj(i),o=M.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return m.jsx(aq.Provider,{value:o,children:e})}function mae(){const e=M.useContext(aq);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const gae=e=>!!e.panZoom;function Wd(){const e=cae(),t=Ft(),n=mae(),r=ot(gae),i=M.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:g,nodeOrigin:b}=t.getState(),v=fj(p)?p:g.get(p.id),S=v.parentId?L8(v.position,v.measured,v.parentId,g,b):v.position,w={...v,position:S,width:v.measured?.width??v.width,height:v.measured?.height??v.height};return Sc(w)},d=(p,g,b={replace:!1})=>{o(v=>v.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return b.replace&&fj(w)?w:{...S,...w}}return S}))},f=(p,g,b={replace:!1})=>{l(v=>v.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return b.replace&&dae(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(b=>[...b,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(b=>[...b,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:b}=t.getState(),[v,S,w]=b;return{nodes:p.map(k=>({...k})),edges:g.map(k=>({...k})),viewport:{x:v,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:b,edges:v,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:k,triggerEdgeChanges:T,onDelete:E,onBeforeDelete:N}=t.getState(),{nodes:A,edges:_}=await Use({nodesToRemove:p,edgesToRemove:g,nodes:b,edges:v,onBeforeDelete:N}),j=_.length>0,R=A.length>0;if(j){const I=_.map(dj);w?.(_),T(I)}if(R){const I=A.map(dj);S?.(A),k(I)}return(R||j)&&E?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,g=!0,b)=>{const v=FR(p),S=v?p:u(p),w=b!==void 0;return S?(b||t.getState().nodes).filter(k=>{const T=t.getState().nodeLookup.get(k.id);if(T&&!v&&(k.id===p.id||!T.internals.positionAbsolute))return!1;const E=Sc(w?k:T),N=Fd(E,S);return g&&N>0||N>=E.width*E.height||N>=S.width*S.height}):[]},isNodeIntersecting:(p,g,b=!0)=>{const S=FR(p)?p:u(p);if(!S)return!1;const w=Fd(S,g);return b&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,g,b={replace:!1})=>{d(p,v=>{const S=typeof g=="function"?g(v):g;return b.replace?{...v,data:S}:{...v,data:{...v.data,...S}}},b)},updateEdge:f,updateEdgeData:(p,g,b={replace:!1})=>{f(p,v=>{const S=typeof g=="function"?g(v):g;return b.replace?{...v,data:S}:{...v,data:{...v.data,...S}}},b)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:b}=t.getState();return M8(p,{nodeLookup:g,nodeOrigin:b})},getHandleConnections:({type:p,id:g,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??Kse();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(b=>[...b]),g.promise}}},[]);return M.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const pj=e=>e.selected,yae=typeof window<"u"?window:void 0;function bae({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Ft(),{deleteElements:r}=Wd(),i=Gd(e,{actInsideInputWithModifier:!1}),s=Gd(t,{target:yae});M.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(pj),edges:o.filter(pj)}),n.setState({nodesSelectionActive:!1})}},[i]),M.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function xae(e){const t=Ft();M.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=x2(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",cs.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const xg={position:"absolute",width:"100%",height:"100%",top:0,left:0},vae=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function wae({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Ia.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:f,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:b=!0,children:v,noWheelClassName:S,noPanClassName:w,onViewportChange:k,isControlledViewport:T,paneClickDistance:E}){const N=Ft(),A=M.useRef(null),{userSelectionActive:_,lib:j}=ot(vae,Zt),R=Gd(g),I=M.useRef();xae(A);const B=M.useCallback(U=>{k?.({x:U[0],y:U[1],zoom:U[2]}),T||N.setState({transform:U})},[k,T]);return M.useEffect(()=>{if(A.current){I.current=Moe({domNode:A.current,minZoom:f,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:E,onDraggingChange:L=>N.setState({paneDragging:L}),onPanZoomStart:(L,H)=>{const{onViewportChangeStart:O,onMoveStart:V}=N.getState();V?.(L,H),O?.(H)},onPanZoom:(L,H)=>{const{onViewportChange:O,onMove:V}=N.getState();V?.(L,H),O?.(H)},onPanZoomEnd:(L,H)=>{const{onViewportChangeEnd:O,onMoveEnd:V}=N.getState();V?.(L,H),O?.(H)}});const{x:U,y:q,zoom:F}=I.current.getViewport();return N.setState({panZoom:I.current,transform:[U,q,F],domNode:A.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),M.useEffect(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:b,noPanClassName:w,userSelectionActive:_,noWheelClassName:S,lib:j,onTransformChange:B})},[e,t,n,r,i,s,o,l,R,b,w,_,S,j,B]),m.jsx("div",{className:"react-flow__renderer",ref:A,style:xg,children:v})}const Sae=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Cae(){const{userSelectionActive:e,userSelectionRect:t}=ot(Sae,Zt);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Hb=(e,t)=>n=>{n.target===t.current&&e?.(n)},kae=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Eae({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Hd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:g,children:b}){const v=Ft(),{userSelectionActive:S,elementsSelectable:w,dragging:k,connectionInProgress:T}=ot(kae,Zt),E=w&&(e||S),N=M.useRef(null),A=M.useRef(),_=M.useRef(new Set),j=M.useRef(new Set),R=M.useRef(!1),I=M.useRef(!1),B=V=>{if(R.current||T){R.current=!1;return}l?.(V),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},U=V=>{if(Array.isArray(r)&&r?.includes(2)){V.preventDefault();return}u?.(V)},q=d?V=>d(V):void 0,F=V=>{const{resetSelectedElements:Y,domNode:te}=v.getState();if(A.current=te?.getBoundingClientRect(),!w||!e||V.button!==0||V.target!==N.current||!A.current)return;V.target?.setPointerCapture?.(V.pointerId),I.current=!0,R.current=!1;const{x:z,y:W}=ns(V.nativeEvent,A.current);Y(),v.setState({userSelectionRect:{width:0,height:0,startX:z,startY:W,x:z,y:W}}),s?.(V)},L=V=>{const{userSelectionRect:Y,transform:te,nodeLookup:z,edgeLookup:W,connectionLookup:oe,triggerNodeChanges:ae,triggerEdgeChanges:$,defaultEdgeOptions:Q}=v.getState();if(!A.current||!Y)return;R.current=!0;const{x:ee,y:de}=ns(V.nativeEvent,A.current),{startX:le,startY:xe}=Y,_e={startX:le,startY:xe,x:ee<le?ee:le,y:de<xe?de:xe,width:Math.abs(ee-le),height:Math.abs(de-xe)},ze=_.current,Pe=j.current;_.current=new Set(b2(z,_e,te,n===Hd.Partial,!0).map(ke=>ke.id)),j.current=new Set;const Te=Q?.selectable??!0;for(const ke of _.current){const Ee=oe.get(ke);if(Ee)for(const{edgeId:pt}of Ee.values()){const Le=W.get(pt);Le&&(Le.selectable??Te)&&j.current.add(pt)}}if(!UR(ze,_.current)){const ke=nc(z,_.current,!0);ae(ke)}if(!UR(Pe,j.current)){const ke=nc(W,j.current);$(ke)}v.setState({userSelectionRect:_e,userSelectionActive:!0,nodesSelectionActive:!1})},H=V=>{if(V.button!==0||!I.current)return;V.target?.releasePointerCapture?.(V.pointerId);const{userSelectionRect:Y}=v.getState();!S&&Y&&V.target===N.current&&B?.(V),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(V),(t||i)&&(R.current=!1),I.current=!1},O=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:Cn(["react-flow__pane",{draggable:O,dragging:k,selection:e}]),onClick:E?void 0:Hb(B,N),onContextMenu:Hb(U,N),onWheel:Hb(q,N),onPointerEnter:E?void 0:f,onPointerDown:E?F:p,onPointerMove:E?L:p,onPointerUp:E?H:void 0,onPointerLeave:g,ref:N,style:xg,children:[b,m.jsx(Cae,{})]})}function Lk({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",cs.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function lq({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Ft(),[u,d]=M.useState(!1),f=M.useRef();return M.useEffect(()=>{f.current=poe({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{Lk({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),M.useEffect(()=>{if(t)f.current?.destroy();else if(e.current)return f.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{f.current?.destroy()}},[n,r,t,s,e,i]),u}const Nae=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function cq(){const e=Ft();return M.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:f}=e.getState(),p=new Map,g=Nae(o),b=i?s[0]:5,v=i?s[1]:5,S=n.direction.x*b*n.factor,w=n.direction.y*v*n.factor;for(const[,k]of d){if(!g(k))continue;let T={x:k.internals.positionAbsolute.x+S,y:k.internals.positionAbsolute.y+w};i&&(T=hf(T,s));const{position:E,positionAbsolute:N}=_8({nodeId:k.id,nextPosition:T,nodeLookup:d,nodeExtent:r,nodeOrigin:f,onError:l});k.position=E,k.internals.positionAbsolute=N,p.set(k.id,k)}u(p)},[])}const k2=M.createContext(null),Tae=k2.Provider;k2.Consumer;const uq=()=>M.useContext(k2),Aae=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Mae=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,f=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:f,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===$a.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:f&&d}};function _ae({type:e="source",position:t=Ae.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:f,onTouchStart:p,...g},b){const v=o||null,S=e==="target",w=Ft(),k=uq(),{connectOnClick:T,noPanClassName:E,rfId:N}=ot(Aae,Zt),{connectingFrom:A,connectingTo:_,clickConnecting:j,isPossibleEndHandle:R,connectionInProcess:I,clickConnectionInProcess:B,valid:U}=ot(Mae(k,v,e),Zt);k||w.getState().onError?.("010",cs.error010());const q=H=>{const{defaultEdgeOptions:O,onConnect:V,hasDefaultEdges:Y}=w.getState(),te={...O,...H};if(Y){const{edges:z,setEdges:W}=w.getState();W(q8(te,z))}V?.(te),l?.(te)},F=H=>{if(!k)return;const O=B8(H.nativeEvent);if(i&&(O&&H.button===0||!O)){const V=w.getState();Ok.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:S,handleId:v,nodeId:k,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:q,isValidConnection:n||V.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}O?f?.(H):p?.(H)},L=H=>{const{onClickConnectStart:O,onClickConnectEnd:V,connectionClickStartHandle:Y,connectionMode:te,isValidConnection:z,lib:W,rfId:oe,nodeLookup:ae,connection:$}=w.getState();if(!k||!Y&&!i)return;if(!Y){O?.(H.nativeEvent,{nodeId:k,handleId:v,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:k,type:e,id:v}});return}const Q=P8(H.target),ee=n||z,{connection:de,isValid:le}=Ok.isValid(H.nativeEvent,{handle:{nodeId:k,id:v,type:e},connectionMode:te,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:ee,flowId:oe,doc:Q,lib:W,nodeLookup:ae});le&&de&&q(de);const xe=structuredClone($);delete xe.inProgress,xe.toPosition=xe.toHandle?xe.toHandle.position:null,V?.(H,xe),w.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":v,"data-nodeid":k,"data-handlepos":t,"data-id":`${N}-${k}-${v}-${e}`,className:Cn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:j,connectingfrom:A,connectingto:_,valid:U,connectionindicator:r&&(!I||R)&&(I||B?s:i)}]),onMouseDown:F,onTouchStart:F,onClick:T?L:void 0,ref:b,...g,children:u})}const vn=M.memo(oq(_ae));function Dae({data:e,isConnectable:t,sourcePosition:n=Ae.Bottom}){return m.jsxs(m.Fragment,{children:[e?.label,m.jsx(vn,{type:"source",position:n,isConnectable:t})]})}function Rae({data:e,isConnectable:t,targetPosition:n=Ae.Top,sourcePosition:r=Ae.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(vn,{type:"target",position:n,isConnectable:t}),e?.label,m.jsx(vn,{type:"source",position:r,isConnectable:t})]})}function jae(){return null}function Oae({data:e,isConnectable:t,targetPosition:n=Ae.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(vn,{type:"target",position:n,isConnectable:t}),e?.label]})}const Mm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},mj={input:Dae,default:Rae,output:Oae,group:jae};function Lae(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Pae=e=>{const{width:t,height:n,x:r,y:i}=ff(e.nodeLookup,{filter:s=>!!s.selected});return{width:ji(t)?t:null,height:ji(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Iae({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ft(),{width:i,height:s,transformString:o,userSelectionActive:l}=ot(Pae,Zt),u=cq(),d=M.useRef(null);if(M.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),lq({nodeRef:d}),l||!i||!s)return null;const f=e?g=>{const b=r.getState().nodes.filter(v=>v.selected);e(g,b)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Mm,g.key)&&(g.preventDefault(),u({direction:Mm[g.key],factor:g.shiftKey?4:1}))};return m.jsx("div",{className:Cn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const gj=typeof window<"u"?window:void 0,Bae=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function dq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:v,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:N,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:j,panOnDrag:R,defaultViewport:I,translateExtent:B,minZoom:U,maxZoom:q,preventScrolling:F,onSelectionContextMenu:L,noWheelClassName:H,noPanClassName:O,disableKeyboardA11y:V,onViewportChange:Y,isControlledViewport:te}){const{nodesSelectionActive:z,userSelectionActive:W}=ot(Bae),oe=Gd(d,{target:gj}),ae=Gd(S,{target:gj}),$=ae||R,Q=ae||N,ee=f&&$!==!0,de=oe||W||ee;return bae({deleteKeyCode:u,multiSelectionKeyCode:v}),m.jsx(wae,{onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:Q,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:j,panOnDrag:!oe&&$,defaultViewport:I,translateExtent:B,minZoom:U,maxZoom:q,zoomActivationKeyCode:w,preventScrolling:F,noWheelClassName:H,noPanClassName:O,onViewportChange:Y,isControlledViewport:te,paneClickDistance:l,children:m.jsxs(Eae,{onSelectionStart:g,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:$,isSelecting:!!de,selectionMode:p,selectionKeyPressed:oe,selectionOnDrag:ee,children:[e,z&&m.jsx(Iae,{onSelectionContextMenu:L,noPanClassName:O,disableKeyboardA11y:V})]})})}dq.displayName="FlowRenderer";const zae=M.memo(dq),qae=e=>t=>e?b2(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Vae(e){return ot(M.useCallback(qae(e),[e]),Zt)}const Hae=e=>e.updateNodeInternals;function Fae(){const e=ot(Hae),[t]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return M.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Uae({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Ft(),s=M.useRef(null),o=M.useRef(null),l=M.useRef(e.sourcePosition),u=M.useRef(e.targetPosition),d=M.useRef(t),f=n&&!!e.internals.handleBounds;return M.useEffect(()=>{s.current&&!e.hidden&&(!f||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[f,e.hidden]),M.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),M.useEffect(()=>{if(s.current){const p=d.current!==t,g=l.current!==e.sourcePosition,b=u.current!==e.targetPosition;(p||g||b)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function $ae({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:f,resizeObserver:p,noDragClassName:g,noPanClassName:b,disableKeyboardA11y:v,rfId:S,nodeTypes:w,nodeClickDistance:k,onError:T}){const{node:E,internals:N,isParent:A}=ot(le=>{const xe=le.nodeLookup.get(e),_e=le.parentLookup.has(e);return{node:xe,internals:xe.internals,isParent:_e}},Zt);let _=E.type||"default",j=w?.[_]||mj[_];j===void 0&&(T?.("003",cs.error003(_)),_="default",j=w?.default||mj.default);const R=!!(E.draggable||l&&typeof E.draggable>"u"),I=!!(E.selectable||u&&typeof E.selectable>"u"),B=!!(E.connectable||d&&typeof E.connectable>"u"),U=!!(E.focusable||f&&typeof E.focusable>"u"),q=Ft(),F=O8(E),L=Uae({node:E,nodeType:_,hasDimensions:F,resizeObserver:p}),H=lq({nodeRef:L,disabled:E.hidden||!R,noDragClassName:g,handleSelector:E.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:k}),O=cq();if(E.hidden)return null;const V=Hs(E),Y=Lae(E),te=I||R||t||n||r||i,z=n?le=>n(le,{...N.userNode}):void 0,W=r?le=>r(le,{...N.userNode}):void 0,oe=i?le=>i(le,{...N.userNode}):void 0,ae=s?le=>s(le,{...N.userNode}):void 0,$=o?le=>o(le,{...N.userNode}):void 0,Q=le=>{const{selectNodesOnDrag:xe,nodeDragThreshold:_e}=q.getState();I&&(!xe||!R||_e>0)&&Lk({id:e,store:q,nodeRef:L}),t&&t(le,{...N.userNode})},ee=le=>{if(!(I8(le.nativeEvent)||v)){if(k8.includes(le.key)&&I){const xe=le.key==="Escape";Lk({id:e,store:q,unselect:xe,nodeRef:L})}else if(R&&E.selected&&Object.prototype.hasOwnProperty.call(Mm,le.key)){le.preventDefault();const{ariaLabelConfig:xe}=q.getState();q.setState({ariaLiveMessage:xe["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),O({direction:Mm[le.key],factor:le.shiftKey?4:1})}}},de=()=>{if(v||!L.current?.matches(":focus-visible"))return;const{transform:le,width:xe,height:_e,autoPanOnNodeFocus:ze,setCenter:Pe}=q.getState();if(!ze)return;b2(new Map([[e,E]]),{x:0,y:0,width:xe,height:_e},le,!0).length>0||Pe(E.position.x+V.width/2,E.position.y+V.height/2,{zoom:le[2]})};return m.jsx("div",{className:Cn(["react-flow__node",`react-flow__node-${_}`,{[b]:R},E.className,{selected:E.selected,selectable:I,parent:A,draggable:R,dragging:H}]),ref:L,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:te?"all":"none",visibility:F?"visible":"hidden",...E.style,...Y},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:W,onMouseLeave:oe,onContextMenu:ae,onClick:Q,onDoubleClick:$,onKeyDown:U?ee:void 0,tabIndex:U?0:void 0,onFocus:U?de:void 0,role:E.ariaRole??(U?"group":void 0),"aria-roledescription":"node","aria-describedby":v?void 0:`${eq}-${S}`,"aria-label":E.ariaLabel,...E.domAttributes,children:m.jsx(Tae,{value:e,children:m.jsx(j,{id:e,data:E.data,type:_,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:E.selected??!1,selectable:I,draggable:R,deletable:E.deletable??!0,isConnectable:B,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:H,dragHandle:E.dragHandle,zIndex:N.z,parentId:E.parentId,...V})})})}const Gae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function fq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=ot(Gae,Zt),o=Vae(e.onlyRenderVisibleElements),l=Fae();return m.jsx("div",{className:"react-flow__nodes",style:xg,children:o.map(u=>m.jsx($ae,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}fq.displayName="NodeRenderer";const Wae=M.memo(fq);function Kae(e){return ot(M.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Qse({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Zt)}const Yae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Xae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},yj={[Nm.Arrow]:Yae,[Nm.ArrowClosed]:Xae};function Zae(e){const t=Ft();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(yj,e)?yj[e]:(t.getState().onError?.("009",cs.error009(e)),null),[e])}const Qae=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Zae(t);return u?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:m.jsx(u,{color:n,strokeWidth:o})}):null},hq=({defaultColor:e,rfId:t})=>{const n=ot(s=>s.edges),r=ot(s=>s.defaultEdgeOptions),i=M.useMemo(()=>soe(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:i.map(s=>m.jsx(Qae,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};hq.displayName="MarkerDefinitions";var Jae=M.memo(hq);function pq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...f}){const[p,g]=M.useState({x:1,y:0,width:0,height:0}),b=Cn(["react-flow__edge-textwrapper",d]),v=M.useRef(null);return M.useEffect(()=>{if(v.current){const S=v.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...f,children:[i&&m.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),m.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:v,style:r,children:n}),u]}):null}pq.displayName="EdgeText";const ele=M.memo(pq);function vg({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...f}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...f,d:e,fill:"none",className:Cn(["react-flow__edge-path",f.className])}),d?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&ji(t)&&ji(n)?m.jsx(ele,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function bj({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ae.Left||e===Ae.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function mq({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top}){const[o,l]=bj({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=bj({pos:s,x1:r,y1:i,x2:e,y2:t}),[f,p,g,b]=z8({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,f,p,g,b]}function gq(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,interactionWidth:k})=>{const[T,E,N]=mq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return m.jsx(vg,{id:A,path:T,labelX:E,labelY:N,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,interactionWidth:k})})}const tle=gq({isInternal:!1}),yq=gq({isInternal:!0});tle.displayName="SimpleBezierEdge";yq.displayName="SimpleBezierEdgeInternal";function bq(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:g,sourcePosition:b=Ae.Bottom,targetPosition:v=Ae.Top,markerEnd:S,markerStart:w,pathOptions:k,interactionWidth:T})=>{const[E,N,A]=Dk({sourceX:n,sourceY:r,sourcePosition:b,targetX:i,targetY:s,targetPosition:v,borderRadius:k?.borderRadius,offset:k?.offset,stepPosition:k?.stepPosition}),_=e.isInternal?void 0:t;return m.jsx(vg,{id:_,path:E,labelX:N,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:w,interactionWidth:T})})}const xq=bq({isInternal:!1}),vq=bq({isInternal:!0});xq.displayName="SmoothStepEdge";vq.displayName="SmoothStepEdgeInternal";function wq(e){return M.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return m.jsx(xq,{...n,id:r,pathOptions:M.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const nle=wq({isInternal:!1}),Sq=wq({isInternal:!0});nle.displayName="StepEdge";Sq.displayName="StepEdgeInternal";function Cq(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:v,interactionWidth:S})=>{const[w,k,T]=V8({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=e.isInternal?void 0:t;return m.jsx(vg,{id:E,path:w,labelX:k,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:v,interactionWidth:S})})}const rle=Cq({isInternal:!1}),kq=Cq({isInternal:!0});rle.displayName="StraightEdge";kq.displayName="StraightEdgeInternal";function Eq(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ae.Bottom,targetPosition:l=Ae.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,pathOptions:k,interactionWidth:T})=>{const[E,N,A]=pg({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:k?.curvature}),_=e.isInternal?void 0:t;return m.jsx(vg,{id:_,path:E,labelX:N,labelY:A,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,interactionWidth:T})})}const ile=Eq({isInternal:!1}),Nq=Eq({isInternal:!0});ile.displayName="BezierEdge";Nq.displayName="BezierEdgeInternal";const xj={default:Nq,straight:kq,step:Sq,smoothstep:vq,simplebezier:yq},vj={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},sle=(e,t,n)=>n===Ae.Left?e-t:n===Ae.Right?e+t:e,ole=(e,t,n)=>n===Ae.Top?e-t:n===Ae.Bottom?e+t:e,wj="react-flow__edgeupdater";function Sj({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return m.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Cn([wj,`${wj}-${l}`]),cx:sle(t,r,e),cy:ole(n,r,e),r,stroke:"transparent",fill:"transparent"})}function ale({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,setReconnecting:g,setUpdateHover:b}){const v=Ft(),S=(N,A)=>{if(N.button!==0)return;const{autoPanOnConnect:_,domNode:j,isValidConnection:R,connectionMode:I,connectionRadius:B,lib:U,onConnectStart:q,onConnectEnd:F,cancelConnection:L,nodeLookup:H,rfId:O,panBy:V,updateConnection:Y}=v.getState(),te=A.type==="target",z=(ae,$)=>{g(!1),p?.(ae,n,A.type,$)},W=ae=>d?.(n,ae),oe=(ae,$)=>{g(!0),f?.(N,n,A.type),q?.(ae,$)};Ok.onPointerDown(N.nativeEvent,{autoPanOnConnect:_,connectionMode:I,connectionRadius:B,domNode:j,handleId:A.id,nodeId:A.nodeId,nodeLookup:H,isTarget:te,edgeUpdaterType:A.type,lib:U,flowId:O,cancelConnection:L,panBy:V,isValidConnection:R,onConnect:W,onConnectStart:oe,onConnectEnd:F,onReconnectEnd:z,updateConnection:Y,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,dragThreshold:v.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},w=N=>S(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),k=N=>S(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>b(!0),E=()=>b(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(Sj,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:T,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&m.jsx(Sj,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:k,onMouseEnter:T,onMouseOut:E,type:"target"})]})}function lle({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:b,rfId:v,edgeTypes:S,noPanClassName:w,onError:k,disableKeyboardA11y:T}){let E=ot(Pe=>Pe.edgeLookup.get(e));const N=ot(Pe=>Pe.defaultEdgeOptions);E=N?{...N,...E}:E;let A=E.type||"default",_=S?.[A]||xj[A];_===void 0&&(k?.("011",cs.error011(A)),A="default",_=S?.default||xj.default);const j=!!(E.focusable||t&&typeof E.focusable>"u"),R=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),I=!!(E.selectable||r&&typeof E.selectable>"u"),B=M.useRef(null),[U,q]=M.useState(!1),[F,L]=M.useState(!1),H=Ft(),{zIndex:O,sourceX:V,sourceY:Y,targetX:te,targetY:z,sourcePosition:W,targetPosition:oe}=ot(M.useCallback(Pe=>{const Te=Pe.nodeLookup.get(E.source),ke=Pe.nodeLookup.get(E.target);if(!Te||!ke)return{zIndex:E.zIndex,...vj};const Ee=ioe({id:e,sourceNode:Te,targetNode:ke,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Pe.connectionMode,onError:k});return{zIndex:Zse({selected:E.selected,zIndex:E.zIndex,sourceNode:Te,targetNode:ke,elevateOnSelect:Pe.elevateEdgesOnSelect}),...Ee||vj}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),Zt),ae=M.useMemo(()=>E.markerStart?`url('#${Rk(E.markerStart,v)}')`:void 0,[E.markerStart,v]),$=M.useMemo(()=>E.markerEnd?`url('#${Rk(E.markerEnd,v)}')`:void 0,[E.markerEnd,v]);if(E.hidden||V===null||Y===null||te===null||z===null)return null;const Q=Pe=>{const{addSelectedEdges:Te,unselectNodesAndEdges:ke,multiSelectionActive:Ee}=H.getState();I&&(H.setState({nodesSelectionActive:!1}),E.selected&&Ee?(ke({nodes:[],edges:[E]}),B.current?.blur()):Te([e])),i&&i(Pe,E)},ee=s?Pe=>{s(Pe,{...E})}:void 0,de=o?Pe=>{o(Pe,{...E})}:void 0,le=l?Pe=>{l(Pe,{...E})}:void 0,xe=u?Pe=>{u(Pe,{...E})}:void 0,_e=d?Pe=>{d(Pe,{...E})}:void 0,ze=Pe=>{if(!T&&k8.includes(Pe.key)&&I){const{unselectNodesAndEdges:Te,addSelectedEdges:ke}=H.getState();Pe.key==="Escape"?(B.current?.blur(),Te({edges:[E]})):ke([e])}};return m.jsx("svg",{style:{zIndex:O},children:m.jsxs("g",{className:Cn(["react-flow__edge",`react-flow__edge-${A}`,E.className,w,{selected:E.selected,animated:E.animated,inactive:!I&&!i,updating:U,selectable:I}]),onClick:Q,onDoubleClick:ee,onContextMenu:de,onMouseEnter:le,onMouseMove:xe,onMouseLeave:_e,onKeyDown:j?ze:void 0,tabIndex:j?0:void 0,role:E.ariaRole??(j?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":j?`${tq}-${v}`:void 0,ref:B,...E.domAttributes,children:[!F&&m.jsx(_,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:I,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:V,sourceY:Y,targetX:te,targetY:z,sourcePosition:W,targetPosition:oe,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:ae,markerEnd:$,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),R&&m.jsx(ale,{edge:E,isReconnectable:R,reconnectRadius:f,onReconnect:p,onReconnectStart:g,onReconnectEnd:b,sourceX:V,sourceY:Y,targetX:te,targetY:z,sourcePosition:W,targetPosition:oe,setUpdateHover:q,setReconnecting:L})]})})}const cle=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Tq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:b,onReconnectEnd:v,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:k,elementsSelectable:T,onError:E}=ot(cle,Zt),N=Kae(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(Jae,{defaultColor:e,rfId:n}),N.map(A=>m.jsx(lle,{id:A,edgesFocusable:w,edgesReconnectable:k,elementsSelectable:T,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:f,reconnectRadius:p,onDoubleClick:g,onReconnectStart:b,onReconnectEnd:v,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:S},A))]})}Tq.displayName="EdgeRenderer";const ule=M.memo(Tq),dle=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function fle({children:e}){const t=ot(dle);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function hle(e){const t=Wd(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ple=e=>e.panZoom?.syncViewport;function mle(e){const t=ot(ple),n=Ft();return M.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function gle(e){return e.connection.inProgress?{...e.connection,to:pf(e.connection.to,e.transform)}:{...e.connection}}function yle(e){return gle}function ble(e){const t=yle();return ot(t,Zt)}const xle=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function vle({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=ot(xle,Zt);return!(s&&i&&u)?null:m.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:Cn(["react-flow__connection",T8(l)]),children:m.jsx(Aq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const Aq=({style:e,type:t=Mo.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:f,toHandle:p,toPosition:g}=ble();if(!i)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:T8(r),toNode:f,toHandle:p});let b="";const v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(t){case Mo.Bezier:[b]=pg(v);break;case Mo.SimpleBezier:[b]=mq(v);break;case Mo.Step:[b]=Dk({...v,borderRadius:0});break;case Mo.SmoothStep:[b]=Dk(v);break;default:[b]=V8(v)}return m.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};Aq.displayName="ConnectionLine";const wle={};function Cj(e=wle){M.useRef(e),Ft(),M.useEffect(()=>{},[e])}function Sle(){Ft(),M.useRef(!1),M.useEffect(()=>{},[])}function Mq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:b,connectionLineType:v,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:k,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:j,deleteKeyCode:R,onlyRenderVisibleElements:I,elementsSelectable:B,defaultViewport:U,translateExtent:q,minZoom:F,maxZoom:L,preventScrolling:H,defaultMarkerColor:O,zoomOnScroll:V,zoomOnPinch:Y,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:W,zoomOnDoubleClick:oe,panOnDrag:ae,onPaneClick:$,onPaneMouseEnter:Q,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneScroll:le,onPaneContextMenu:xe,paneClickDistance:_e,nodeClickDistance:ze,onEdgeContextMenu:Pe,onEdgeMouseEnter:Te,onEdgeMouseMove:ke,onEdgeMouseLeave:Ee,reconnectRadius:pt,onReconnect:Le,onReconnectStart:gt,onReconnectEnd:bt,noDragClassName:$t,noWheelClassName:un,noPanClassName:zt,disableKeyboardA11y:Nt,nodeExtent:En,rfId:dn,viewport:Ot,onViewportChange:dt}){return Cj(e),Cj(t),Sle(),hle(n),mle(Ot),m.jsx(zae,{onPaneClick:$,onPaneMouseEnter:Q,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneContextMenu:xe,onPaneScroll:le,paneClickDistance:_e,deleteKeyCode:R,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:j,elementsSelectable:B,zoomOnScroll:V,zoomOnPinch:Y,zoomOnDoubleClick:oe,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:W,panOnDrag:ae,defaultViewport:U,translateExtent:q,minZoom:F,maxZoom:L,onSelectionContextMenu:p,preventScrolling:H,noDragClassName:$t,noWheelClassName:un,noPanClassName:zt,disableKeyboardA11y:Nt,onViewportChange:dt,isControlledViewport:!!Ot,children:m.jsxs(fle,{children:[m.jsx(ule,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Le,onReconnectStart:gt,onReconnectEnd:bt,onlyRenderVisibleElements:I,onEdgeContextMenu:Pe,onEdgeMouseEnter:Te,onEdgeMouseMove:ke,onEdgeMouseLeave:Ee,reconnectRadius:pt,defaultMarkerColor:O,noPanClassName:zt,disableKeyboardA11y:Nt,rfId:dn}),m.jsx(vle,{style:S,type:v,component:w,containerStyle:k}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(Wae,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:ze,onlyRenderVisibleElements:I,noPanClassName:zt,noDragClassName:$t,disableKeyboardA11y:Nt,nodeExtent:En,rfId:dn}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}Mq.displayName="GraphView";const Cle=M.memo(Mq),kj=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:f,nodeExtent:p}={})=>{const g=new Map,b=new Map,v=new Map,S=new Map,w=r??t??[],k=n??e??[],T=f??[0,0],E=p??Vd;F8(v,S,w);const N=jk(k,g,b,{nodeOrigin:T,nodeExtent:E,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=ff(g,{filter:B=>!!((B.width||B.initialWidth)&&(B.height||B.initialHeight))}),{x:j,y:R,zoom:I}=hg(_,i,s,u,d,l?.padding??.1);A=[j,R,I]}return{rfId:"1",width:0,height:0,transform:A,nodes:k,nodesInitialized:N,nodeLookup:g,parentLookup:b,edges:w,edgeLookup:S,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:Vd,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:$a.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...N8},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:$se,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:E8}},kle=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:p})=>Uoe((g,b)=>{async function v(){const{nodeLookup:S,panZoom:w,fitViewOptions:k,fitViewResolver:T,width:E,height:N,minZoom:A,maxZoom:_}=b();w&&(await Fse({nodes:S,width:E,height:N,panZoom:w,minZoom:A,maxZoom:_},k),T?.resolve(!0),g({fitViewResolver:null}))}return{...kj({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:k,nodeOrigin:T,elevateNodesOnSelect:E,fitViewQueued:N}=b(),A=jk(S,w,k,{nodeOrigin:T,nodeExtent:p,elevateNodesOnSelect:E,checkEquality:!0});N&&A?(v(),g({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:k}=b();F8(w,k,S),g({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:k}=b();k(S),g({hasDefaultNodes:!0})}if(w){const{setEdges:k}=b();k(w),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:k,parentLookup:T,domNode:E,nodeOrigin:N,nodeExtent:A,debug:_,fitViewQueued:j}=b(),{changes:R,updatedInternals:I}=uoe(S,k,T,E,N,A);I&&(aoe(k,T,{nodeOrigin:N,nodeExtent:A}),j?(v(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),R?.length>0&&(_&&console.log("React Flow: trigger node changes",R),w?.(R)))},updateNodePositions:(S,w=!1)=>{const k=[],T=[],{nodeLookup:E,triggerNodeChanges:N}=b();for(const[A,_]of S){const j=E.get(A),R=!!(j?.expandParent&&j?.parentId&&_?.position),I={id:A,type:"position",position:R?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:w};R&&j.parentId&&k.push({id:A,parentId:j.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),T.push(I)}if(k.length>0){const{parentLookup:A,nodeOrigin:_}=b(),j=C2(k,E,A,_);T.push(...j)}N(T)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:k,nodes:T,hasDefaultNodes:E,debug:N}=b();if(S?.length){if(E){const A=iq(S,T);k(A)}N&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:k,edges:T,hasDefaultEdges:E,debug:N}=b();if(S?.length){if(E){const A=sq(S,T);k(A)}N&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(w){const A=S.map(_=>ba(_,!0));E(A);return}E(nc(T,new Set([...S]),!0)),N(nc(k))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(w){const A=S.map(_=>ba(_,!0));N(A);return}N(nc(k,new Set([...S]))),E(nc(T,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:k,nodes:T,nodeLookup:E,triggerNodeChanges:N,triggerEdgeChanges:A}=b(),_=S||T,j=w||k,R=_.map(B=>{const U=E.get(B.id);return U&&(U.selected=!1),ba(B.id,!1)}),I=j.map(B=>ba(B.id,!1));N(R),A(I)},setMinZoom:S=>{const{panZoom:w,maxZoom:k}=b();w?.setScaleExtent([S,k]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:k}=b();w?.setScaleExtent([k,S]),g({maxZoom:S})},setTranslateExtent:S=>{b().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{b().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:k,triggerEdgeChanges:T,elementsSelectable:E}=b();if(!E)return;const N=w.reduce((_,j)=>j.selected?[..._,ba(j.id,!1)]:_,[]),A=S.reduce((_,j)=>j.selected?[..._,ba(j.id,!1)]:_,[]);k(N),T(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:k,parentLookup:T,nodeOrigin:E,elevateNodesOnSelect:N,nodeExtent:A}=b();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(jk(w,k,T,{nodeOrigin:E,nodeExtent:S,elevateNodesOnSelect:N,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:w,width:k,height:T,panZoom:E,translateExtent:N}=b();return doe({delta:S,panZoom:E,transform:w,translateExtent:N,width:k,height:T})},setCenter:async(S,w,k)=>{const{width:T,height:E,maxZoom:N,panZoom:A}=b();if(!A)return Promise.resolve(!1);const _=typeof k?.zoom<"u"?k.zoom:N;return await A.setViewport({x:T/2-S*_,y:E/2-w*_,zoom:_},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...N8}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...kj()})}},Object.is);function _q({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:f,nodeExtent:p,children:g}){const[b]=M.useState(()=>kle({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:f,nodeExtent:p}));return m.jsx($oe,{value:b,children:m.jsx(pae,{children:g})})}function Ele({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:g}){return M.useContext(yg)?m.jsx(m.Fragment,{children:e}):m.jsx(_q,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:f,nodeOrigin:p,nodeExtent:g,children:e})}const Nle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Tle({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:f,onMoveStart:p,onMoveEnd:g,onConnect:b,onConnectStart:v,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:k,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:I,onNodesDelete:B,onEdgesDelete:U,onDelete:q,onSelectionChange:F,onSelectionDragStart:L,onSelectionDrag:H,onSelectionDragStop:O,onSelectionContextMenu:V,onSelectionStart:Y,onSelectionEnd:te,onBeforeDelete:z,connectionMode:W,connectionLineType:oe=Mo.Bezier,connectionLineStyle:ae,connectionLineComponent:$,connectionLineContainerStyle:Q,deleteKeyCode:ee="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:le=!1,selectionMode:xe=Hd.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:ze=Ud()?"Meta":"Control",zoomActivationKeyCode:Pe=Ud()?"Meta":"Control",snapToGrid:Te,snapGrid:ke,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:pt,nodesDraggable:Le,autoPanOnNodeFocus:gt,nodesConnectable:bt,nodesFocusable:$t,nodeOrigin:un=nq,edgesFocusable:zt,edgesReconnectable:Nt,elementsSelectable:En=!0,defaultViewport:dn=iae,minZoom:Ot=.5,maxZoom:dt=2,translateExtent:Tt=Vd,preventScrolling:At=!0,nodeExtent:sr,defaultMarkerColor:Ar="#b1b1b7",zoomOnScroll:vi=!0,zoomOnPinch:Qt=!0,panOnScroll:Oe=!1,panOnScrollSpeed:Ue=.5,panOnScrollMode:or=Ia.Free,zoomOnDoubleClick:lt=!0,panOnDrag:fn=!0,onPaneClick:$s,onPaneMouseEnter:wi,onPaneMouseMove:Mr,onPaneMouseLeave:_r,onPaneScroll:ar,onPaneContextMenu:yr,paneClickDistance:Dr=0,nodeClickDistance:xt=0,children:Bn,onReconnect:Gs,onReconnectStart:Si,onReconnectEnd:Kn,onEdgeContextMenu:Gt,onEdgeDoubleClick:Lt,onEdgeMouseEnter:br,onEdgeMouseMove:Nn,onEdgeMouseLeave:Rr,reconnectRadius:Ii=10,onNodesChange:fs,onEdgesChange:jr,noDragClassName:Bi="nodrag",noWheelClassName:hn="nowheel",noPanClassName:He="nopan",fitView:Yn,fitViewOptions:Xn,connectOnClick:Rt,attributionPosition:zi,proOptions:De,defaultEdgeOptions:Z,elevateNodesOnSelect:ge,elevateEdgesOnSelect:Me,disableKeyboardA11y:ct=!1,autoPanOnConnect:Pt,autoPanOnNodeDrag:Mt,autoPanSpeed:qt,connectionRadius:_n,isValidConnection:pn,onError:Xr,style:It,id:zn,nodeDragThreshold:qi,connectionDragThreshold:Yo,viewport:rl,onViewportChange:il,width:Zn,height:sl,colorMode:Oc="light",debug:Ws,onScroll:Vi,ariaLabelConfig:Hi,...Ks},Qn){const Or=zn||"1",Xo=lae(Oc),Ys=M.useCallback(Zr=>{Zr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Vi?.(Zr)},[Vi]);return m.jsx("div",{"data-testid":"rf__wrapper",...Ks,onScroll:Ys,style:{...It,...Nle},ref:Qn,className:Cn(["react-flow",i,Xo]),id:zn,role:"application",children:m.jsxs(Ele,{nodes:e,edges:t,width:Zn,height:sl,fitView:Yn,fitViewOptions:Xn,minZoom:Ot,maxZoom:dt,nodeOrigin:un,nodeExtent:sr,children:[m.jsx(Cle,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:oe,connectionLineStyle:ae,connectionLineComponent:$,connectionLineContainerStyle:Q,selectionKeyCode:de,selectionOnDrag:le,selectionMode:xe,deleteKeyCode:ee,multiSelectionKeyCode:ze,panActivationKeyCode:_e,zoomActivationKeyCode:Pe,onlyRenderVisibleElements:Ee,defaultViewport:dn,translateExtent:Tt,minZoom:Ot,maxZoom:dt,preventScrolling:At,zoomOnScroll:vi,zoomOnPinch:Qt,zoomOnDoubleClick:lt,panOnScroll:Oe,panOnScrollSpeed:Ue,panOnScrollMode:or,panOnDrag:fn,onPaneClick:$s,onPaneMouseEnter:wi,onPaneMouseMove:Mr,onPaneMouseLeave:_r,onPaneScroll:ar,onPaneContextMenu:yr,paneClickDistance:Dr,nodeClickDistance:xt,onSelectionContextMenu:V,onSelectionStart:Y,onSelectionEnd:te,onReconnect:Gs,onReconnectStart:Si,onReconnectEnd:Kn,onEdgeContextMenu:Gt,onEdgeDoubleClick:Lt,onEdgeMouseEnter:br,onEdgeMouseMove:Nn,onEdgeMouseLeave:Rr,reconnectRadius:Ii,defaultMarkerColor:Ar,noDragClassName:Bi,noWheelClassName:hn,noPanClassName:He,rfId:Or,disableKeyboardA11y:ct,nodeExtent:sr,viewport:rl,onViewportChange:il}),m.jsx(aae,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:v,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:k,nodesDraggable:Le,autoPanOnNodeFocus:gt,nodesConnectable:bt,nodesFocusable:$t,edgesFocusable:zt,edgesReconnectable:Nt,elementsSelectable:En,elevateNodesOnSelect:ge,elevateEdgesOnSelect:Me,minZoom:Ot,maxZoom:dt,nodeExtent:sr,onNodesChange:fs,onEdgesChange:jr,snapToGrid:Te,snapGrid:ke,connectionMode:W,translateExtent:Tt,connectOnClick:Rt,defaultEdgeOptions:Z,fitView:Yn,fitViewOptions:Xn,onNodesDelete:B,onEdgesDelete:U,onDelete:q,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:I,onSelectionDrag:H,onSelectionDragStart:L,onSelectionDragStop:O,onMove:f,onMoveStart:p,onMoveEnd:g,noPanClassName:He,nodeOrigin:un,rfId:Or,autoPanOnConnect:Pt,autoPanOnNodeDrag:Mt,autoPanSpeed:qt,onError:Xr,connectionRadius:_n,isValidConnection:pn,selectNodesOnDrag:pt,nodeDragThreshold:qi,connectionDragThreshold:Yo,onBeforeDelete:z,paneClickDistance:Dr,debug:Ws,ariaLabelConfig:Hi}),m.jsx(rae,{onSelectionChange:F}),Bn,m.jsx(Qoe,{proOptions:De,position:zi}),m.jsx(Zoe,{rfId:Or,disableKeyboardA11y:ct})]})})}var Ale=oq(Tle);function Mle(e){const[t,n]=M.useState(e),r=M.useCallback(i=>n(s=>iq(i,s)),[]);return[t,n,r]}function _le(e){const[t,n]=M.useState(e),r=M.useCallback(i=>n(s=>sq(i,s)),[]);return[t,n,r]}function Dle({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Cn(["react-flow__background-pattern",n,r])})}function Rle({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:Cn(["react-flow__background-pattern","dots",t])})}var Bo;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Bo||(Bo={}));const jle={[Bo.Dots]:1,[Bo.Lines]:1,[Bo.Cross]:6},Ole=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Dq({id:e,variant:t=Bo.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:f}){const p=M.useRef(null),{transform:g,patternId:b}=ot(Ole,Zt),v=r||jle[t],S=t===Bo.Dots,w=t===Bo.Cross,k=Array.isArray(n)?n:[n,n],T=[k[0]*g[2]||1,k[1]*g[2]||1],E=v*g[2],N=Array.isArray(s)?s:[s,s],A=w?[E,E]:T,_=[N[0]*g[2]||1+A[0]/2,N[1]*g[2]||1+A[1]/2],j=`${b}${e||""}`;return m.jsxs("svg",{className:Cn(["react-flow__background",d]),style:{...u,...xg,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[m.jsx("pattern",{id:j,x:g[0]%T[0],y:g[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?m.jsx(Rle,{radius:E/2,className:f}):m.jsx(Dle,{dimensions:A,lineWidth:i,variant:t,className:f})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${j})`})]})}Dq.displayName="Background";const Lle=M.memo(Dq);function Ple(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ile(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ble(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function zle(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function qle(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function tp({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:Cn(["react-flow__controls-button",t]),...n,children:e})}const Vle=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Rq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:f,position:p="bottom-left",orientation:g="vertical","aria-label":b}){const v=Ft(),{isInteractive:S,minZoomReached:w,maxZoomReached:k,ariaLabelConfig:T}=ot(Vle,Zt),{zoomIn:E,zoomOut:N,fitView:A}=Wd(),_=()=>{E(),s?.()},j=()=>{N(),o?.()},R=()=>{A(i),l?.()},I=()=>{v.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},B=g==="horizontal"?"horizontal":"vertical";return m.jsxs(bg,{className:Cn(["react-flow__controls",B,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":b??T["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(tp,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:k,children:m.jsx(Ple,{})}),m.jsx(tp,{onClick:j,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:w,children:m.jsx(Ile,{})})]}),n&&m.jsx(tp,{className:"react-flow__controls-fitview",onClick:R,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:m.jsx(Ble,{})}),r&&m.jsx(tp,{className:"react-flow__controls-interactive",onClick:I,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:S?m.jsx(qle,{}):m.jsx(zle,{})}),f]})}Rq.displayName="Controls";const Hle=M.memo(Rq);function Fle({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:f,shapeRendering:p,selected:g,onClick:b}){const{background:v,backgroundColor:S}=s||{},w=o||v||S;return m.jsx("rect",{className:Cn(["react-flow__minimap-node",{selected:g},d]),x:t,y:n,rx:f,ry:f,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:b?k=>b(k,e):void 0})}const Ule=M.memo(Fle),$le=e=>e.nodes.map(t=>t.id),Fb=e=>e instanceof Function?e:()=>e;function Gle({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Ule,onClick:o}){const l=ot($le,Zt),u=Fb(t),d=Fb(e),f=Fb(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:l.map(g=>m.jsx(Kle,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function Wle({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:f,y:p,width:g,height:b}=ot(v=>{const{internals:S}=v.nodeLookup.get(e),w=S.userNode,{x:k,y:T}=S.positionAbsolute,{width:E,height:N}=Hs(w);return{node:w,x:k,y:T,width:E,height:N}},Zt);return!d||d.hidden||!O8(d)?null:m.jsx(l,{x:f,y:p,width:g,height:b,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const Kle=M.memo(Wle);var Yle=M.memo(Gle);const Xle=200,Zle=150,Qle=e=>!e.hidden,Jle=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?j8(ff(e.nodeLookup,{filter:Qle}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},ece="react-flow__minimap-desc";function jq({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:f,maskStrokeWidth:p,position:g="bottom-right",onClick:b,onNodeClick:v,pannable:S=!1,zoomable:w=!1,ariaLabel:k,inversePan:T,zoomStep:E=1,offsetScale:N=5}){const A=Ft(),_=M.useRef(null),{boundingRect:j,viewBB:R,rfId:I,panZoom:B,translateExtent:U,flowWidth:q,flowHeight:F,ariaLabelConfig:L}=ot(Jle,Zt),H=e?.width??Xle,O=e?.height??Zle,V=j.width/H,Y=j.height/O,te=Math.max(V,Y),z=te*H,W=te*O,oe=N*te,ae=j.x-(z-j.width)/2-oe,$=j.y-(W-j.height)/2-oe,Q=z+oe*2,ee=W+oe*2,de=`${ece}-${I}`,le=M.useRef(0),xe=M.useRef();le.current=te,M.useEffect(()=>{if(_.current&&B)return xe.current=voe({domNode:_.current,panZoom:B,getTransform:()=>A.getState().transform,getViewScale:()=>le.current}),()=>{xe.current?.destroy()}},[B]),M.useEffect(()=>{xe.current?.update({translateExtent:U,width:q,height:F,inversePan:T,pannable:S,zoomStep:E,zoomable:w})},[S,w,T,E,U,q,F]);const _e=b?Te=>{const[ke,Ee]=xe.current?.pointer(Te)||[0,0];b(Te,{x:ke,y:Ee})}:void 0,ze=v?M.useCallback((Te,ke)=>{const Ee=A.getState().nodeLookup.get(ke).internals.userNode;v(Te,Ee)},[]):void 0,Pe=k??L["minimap.ariaLabel"];return m.jsx(bg,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*te:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Cn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:H,height:O,viewBox:`${ae} ${$} ${Q} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:_,onClick:_e,children:[Pe&&m.jsx("title",{id:de,children:Pe}),m.jsx(Yle,{onClick:ze,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${ae-oe},${$-oe}h${Q+oe*2}v${ee+oe*2}h${-Q-oe*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}jq.displayName="MiniMap";const tce=M.memo(jq),nce=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,rce={[Wa.Line]:"right",[Wa.Handle]:"bottom-right"};function ice({nodeId:e,position:t,variant:n=Wa.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:b=!0,shouldResize:v,onResizeStart:S,onResize:w,onResizeEnd:k}){const T=uq(),E=typeof e=="string"?e:T,N=Ft(),A=M.useRef(null),_=n===Wa.Handle,j=ot(M.useCallback(nce(_&&b),[_,b]),Zt),R=M.useRef(null),I=t??rce[n];M.useEffect(()=>{if(!(!A.current||!E))return R.current||(R.current=Boe({domNode:A.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:U,transform:q,snapGrid:F,snapToGrid:L,nodeOrigin:H,domNode:O}=N.getState();return{nodeLookup:U,transform:q,snapGrid:F,snapToGrid:L,nodeOrigin:H,paneDomNode:O}},onChange:(U,q)=>{const{triggerNodeChanges:F,nodeLookup:L,parentLookup:H,nodeOrigin:O}=N.getState(),V=[],Y={x:U.x,y:U.y},te=L.get(E);if(te&&te.expandParent&&te.parentId){const z=te.origin??O,W=U.width??te.measured.width??0,oe=U.height??te.measured.height??0,ae={id:te.id,parentId:te.parentId,rect:{width:W,height:oe,...L8({x:U.x??te.position.x,y:U.y??te.position.y},{width:W,height:oe},te.parentId,L,z)}},$=C2([ae],L,H,O);V.push(...$),Y.x=U.x?Math.max(z[0]*W,U.x):void 0,Y.y=U.y?Math.max(z[1]*oe,U.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const z={id:E,type:"position",position:{...Y}};V.push(z)}if(U.width!==void 0&&U.height!==void 0){const W={id:E,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:U.width,height:U.height}};V.push(W)}for(const z of q){const W={...z,type:"position"};V.push(W)}F(V)},onEnd:({width:U,height:q})=>{const F={id:E,type:"dimensions",resizing:!1,dimensions:{width:U,height:q}};N.getState().triggerNodeChanges([F])}})),R.current.update({controlPosition:I,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:f},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:k,shouldResize:v}),()=>{R.current?.destroy()}},[I,l,u,d,f,p,S,w,k,v]);const B=I.split("-");return m.jsx("div",{className:Cn(["react-flow__resize-control","nodrag",...B,n,r]),ref:A,style:{...i,scale:j,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const Ej=M.memo(ice);function sce({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:b,onResizeStart:v,onResize:S,onResizeEnd:w}){return t?m.jsxs(m.Fragment,{children:[Doe.map(k=>m.jsx(Ej,{className:i,style:s,nodeId:e,position:k,variant:Wa.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:f,onResizeStart:v,keepAspectRatio:p,autoScale:g,shouldResize:b,onResize:S,onResizeEnd:w},k)),_oe.map(k=>m.jsx(Ej,{className:n,style:r,nodeId:e,position:k,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:f,onResizeStart:v,keepAspectRatio:p,autoScale:g,shouldResize:b,onResize:S,onResizeEnd:w},k))]}):null}function oce(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const ace=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function zo(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Fl=null;function Oq(e={}){return Fl||(e.includeStyleProperties?(Fl=e.includeStyleProperties,Fl):(Fl=zo(window.getComputedStyle(document.documentElement)),Fl))}function _m(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function lce(e){const t=_m(e,"border-left-width"),n=_m(e,"border-right-width");return e.clientWidth+t+n}function cce(e){const t=_m(e,"border-top-width"),n=_m(e,"border-bottom-width");return e.clientHeight+t+n}function Lq(e,t={}){const n=t.width||lce(e),r=t.height||cce(e);return{width:n,height:r}}function uce(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Fr=16384;function dce(e){(e.width>Fr||e.height>Fr)&&(e.width>Fr&&e.height>Fr?e.width>e.height?(e.height*=Fr/e.width,e.width=Fr):(e.width*=Fr/e.height,e.height=Fr):e.width>Fr?(e.height*=Fr/e.width,e.width=Fr):(e.width*=Fr/e.height,e.height=Fr))}function Dm(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function fce(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function hce(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),fce(i)}const Nr=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Nr(n,t)};function pce(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function mce(e,t){return Oq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function gce(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?pce(n):mce(n,r);return document.createTextNode(`${i}{${s}}`)}function Nj(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=ace();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(gce(o,n,i,r)),t.appendChild(l)}function yce(e,t,n){Nj(e,t,":before",n),Nj(e,t,":after",n)}const Tj="application/font-woff",Aj="image/jpeg",bce={woff:Tj,woff2:Tj,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Aj,jpeg:Aj,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function xce(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function E2(e){const t=xce(e).toLowerCase();return bce[t]||""}function vce(e){return e.split(/,/)[1]}function Pk(e){return e.search(/^(data:)/)!==-1}function wce(e,t){return`data:${t};base64,${e}`}async function Pq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const Ub={};function Sce(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function N2(e,t,n){const r=Sce(e,t,n.includeQueryParams);if(Ub[r]!=null)return Ub[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await Pq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),vce(l)));i=wce(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Ub[r]=i,i}async function Cce(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Dm(t)}async function kce(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return Dm(l)}const n=e.poster,r=E2(n),i=await N2(n,r,t);return Dm(i)}async function Ece(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await wg(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Nce(e,t){return Nr(e,HTMLCanvasElement)?Cce(e):Nr(e,HTMLVideoElement)?kce(e,t):Nr(e,HTMLIFrameElement)?Ece(e,t):e.cloneNode(Iq(e))}const Tce=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Iq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Ace(e,t,n){var r,i;if(Iq(t))return t;let s=[];return Tce(e)&&e.assignedNodes?s=zo(e.assignedNodes()):Nr(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=zo(e.contentDocument.body.childNodes):s=zo(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||Nr(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>wg(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Mce(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Oq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Nr(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function _ce(e,t){Nr(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Nr(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Dce(e,t){if(Nr(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Rce(e,t,n){return Nr(t,Element)&&(Mce(e,t,n),yce(e,t,n),_ce(e,t),Dce(e,t)),t}async function jce(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await wg(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function wg(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Nce(r,t)).then(r=>Ace(e,r,t)).then(r=>Rce(e,r,t)).then(r=>jce(r,t))}const Bq=/url\((['"]?)([^'"]+?)\1\)/g,Oce=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Lce=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Pce(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ice(e){const t=[];return e.replace(Bq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!Pk(n))}async function Bce(e,t,n,r,i){try{const s=n?oce(t,n):t,o=E2(t);let l;return i||(l=await N2(s,o,r)),e.replace(Pce(t),`$1${l}$3`)}catch{}return e}function zce(e,{preferredFontFormat:t}){return t?e.replace(Lce,n=>{for(;;){const[r,,i]=Oce.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function zq(e){return e.search(Bq)!==-1}async function qq(e,t,n){if(!zq(e))return e;const r=zce(e,n);return Ice(r).reduce((s,o)=>s.then(l=>Bce(l,o,t,n)),Promise.resolve(r))}async function Ul(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await qq(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function qce(e,t){await Ul("background",e,t)||await Ul("background-image",e,t),await Ul("mask",e,t)||await Ul("-webkit-mask",e,t)||await Ul("mask-image",e,t)||await Ul("-webkit-mask-image",e,t)}async function Vce(e,t){const n=Nr(e,HTMLImageElement);if(!(n&&!Pk(e.src))&&!(Nr(e,SVGImageElement)&&!Pk(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await N2(r,E2(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Hce(e,t){const r=zo(e.childNodes).map(i=>Vq(i,t));await Promise.all(r).then(()=>e)}async function Vq(e,t){Nr(e,Element)&&(await qce(e,t),await Vce(e,t),await Hce(e,t))}function Fce(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const Mj={};async function _j(e){let t=Mj[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},Mj[e]=t,t}async function Dj(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Pq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function Rj(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function Uce(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{zo(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=_j(u).then(f=>Dj(f,t)).then(f=>Rj(f).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(f=>{console.error("Error loading remote css",f.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(_j(i.href).then(l=>Dj(l,t)).then(l=>Rj(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{zo(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function $ce(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>zq(t.style.getPropertyValue("src")))}async function Gce(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=zo(e.ownerDocument.styleSheets),r=await Uce(n,t);return $ce(r)}function Hq(e){return e.trim().replace(/["']/g,"")}function Wce(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(Hq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function Kce(e,t){const n=await Gce(e,t),r=Wce(e);return(await Promise.all(n.filter(s=>r.has(Hq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return qq(s.cssText,o,t)}))).join(`
`)}async function Yce(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Kce(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Fq(e,t={}){const{width:n,height:r}=Lq(e,t),i=await wg(e,t,!0);return await Yce(i,t),await Vq(i,t),Fce(i,t),await hce(i,n,r)}async function Uq(e,t={}){const{width:n,height:r}=Lq(e,t),i=await Fq(e,t),s=await Dm(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||uce(),d=t.canvasWidth||n,f=t.canvasHeight||r;return o.width=d*u,o.height=f*u,t.skipAutoScale||dce(o),o.style.width=`${d}`,o.style.height=`${f}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Xce(e,t={}){return(await Uq(e,t)).toDataURL()}async function Zce(e,t={}){return(await Uq(e,t)).toDataURL("image/jpeg",t.quality||1)}function T2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $b,jj;function Qce(){if(jj)return $b;jj=1;function e(){this.__data__=[],this.size=0}return $b=e,$b}var Gb,Oj;function Mc(){if(Oj)return Gb;Oj=1;function e(t,n){return t===n||t!==t&&n!==n}return Gb=e,Gb}var Wb,Lj;function Sg(){if(Lj)return Wb;Lj=1;var e=Mc();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Wb=t,Wb}var Kb,Pj;function Jce(){if(Pj)return Kb;Pj=1;var e=Sg(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return Kb=r,Kb}var Yb,Ij;function eue(){if(Ij)return Yb;Ij=1;var e=Sg();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Yb=t,Yb}var Xb,Bj;function tue(){if(Bj)return Xb;Bj=1;var e=Sg();function t(n){return e(this.__data__,n)>-1}return Xb=t,Xb}var Zb,zj;function nue(){if(zj)return Zb;zj=1;var e=Sg();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Zb=t,Zb}var Qb,qj;function Cg(){if(qj)return Qb;qj=1;var e=Qce(),t=Jce(),n=eue(),r=tue(),i=nue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Qb=s,Qb}var Jb,Vj;function rue(){if(Vj)return Jb;Vj=1;var e=Cg();function t(){this.__data__=new e,this.size=0}return Jb=t,Jb}var ex,Hj;function iue(){if(Hj)return ex;Hj=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ex=e,ex}var tx,Fj;function sue(){if(Fj)return tx;Fj=1;function e(t){return this.__data__.get(t)}return tx=e,tx}var nx,Uj;function oue(){if(Uj)return nx;Uj=1;function e(t){return this.__data__.has(t)}return nx=e,nx}var rx,$j;function $q(){if($j)return rx;$j=1;var e=typeof _h=="object"&&_h&&_h.Object===Object&&_h;return rx=e,rx}var ix,Gj;function Pi(){if(Gj)return ix;Gj=1;var e=$q(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return ix=n,ix}var sx,Wj;function _c(){if(Wj)return sx;Wj=1;var e=Pi(),t=e.Symbol;return sx=t,sx}var ox,Kj;function aue(){if(Kj)return ox;Kj=1;var e=_c(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var f=r.call(o);return d&&(l?o[i]=u:delete o[i]),f}return ox=s,ox}var ax,Yj;function lue(){if(Yj)return ax;Yj=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return ax=n,ax}var lx,Xj;function Ja(){if(Xj)return lx;Xj=1;var e=_c(),t=aue(),n=lue(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return lx=o,lx}var cx,Zj;function bi(){if(Zj)return cx;Zj=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return cx=e,cx}var ux,Qj;function mf(){if(Qj)return ux;Qj=1;var e=Ja(),t=bi(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return ux=o,ux}var dx,Jj;function cue(){if(Jj)return dx;Jj=1;var e=Pi(),t=e["__core-js_shared__"];return dx=t,dx}var fx,eO;function uue(){if(eO)return fx;eO=1;var e=cue(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return fx=n,fx}var hx,tO;function Gq(){if(tO)return hx;tO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return hx=n,hx}var px,nO;function due(){if(nO)return px;nO=1;var e=mf(),t=uue(),n=bi(),r=Gq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var b=e(g)?f:s;return b.test(r(g))}return px=p,px}var mx,rO;function fue(){if(rO)return mx;rO=1;function e(t,n){return t?.[n]}return mx=e,mx}var gx,iO;function el(){if(iO)return gx;iO=1;var e=due(),t=fue();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return gx=n,gx}var yx,sO;function A2(){if(sO)return yx;sO=1;var e=el(),t=Pi(),n=e(t,"Map");return yx=n,yx}var bx,oO;function kg(){if(oO)return bx;oO=1;var e=el(),t=e(Object,"create");return bx=t,bx}var xx,aO;function hue(){if(aO)return xx;aO=1;var e=kg();function t(){this.__data__=e?e(null):{},this.size=0}return xx=t,xx}var vx,lO;function pue(){if(lO)return vx;lO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return vx=e,vx}var wx,cO;function mue(){if(cO)return wx;cO=1;var e=kg(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return wx=i,wx}var Sx,uO;function gue(){if(uO)return Sx;uO=1;var e=kg(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Sx=r,Sx}var Cx,dO;function yue(){if(dO)return Cx;dO=1;var e=kg(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Cx=n,Cx}var kx,fO;function bue(){if(fO)return kx;fO=1;var e=hue(),t=pue(),n=mue(),r=gue(),i=yue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,kx=s,kx}var Ex,hO;function xue(){if(hO)return Ex;hO=1;var e=bue(),t=Cg(),n=A2();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Ex=r,Ex}var Nx,pO;function vue(){if(pO)return Nx;pO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Nx=e,Nx}var Tx,mO;function Eg(){if(mO)return Tx;mO=1;var e=vue();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Tx=t,Tx}var Ax,gO;function wue(){if(gO)return Ax;gO=1;var e=Eg();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Ax=t,Ax}var Mx,yO;function Sue(){if(yO)return Mx;yO=1;var e=Eg();function t(n){return e(this,n).get(n)}return Mx=t,Mx}var _x,bO;function Cue(){if(bO)return _x;bO=1;var e=Eg();function t(n){return e(this,n).has(n)}return _x=t,_x}var Dx,xO;function kue(){if(xO)return Dx;xO=1;var e=Eg();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Dx=t,Dx}var Rx,vO;function M2(){if(vO)return Rx;vO=1;var e=xue(),t=wue(),n=Sue(),r=Cue(),i=kue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Rx=s,Rx}var jx,wO;function Eue(){if(wO)return jx;wO=1;var e=Cg(),t=A2(),n=M2(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return jx=i,jx}var Ox,SO;function Ng(){if(SO)return Ox;SO=1;var e=Cg(),t=rue(),n=iue(),r=sue(),i=oue(),s=Eue();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Ox=o,Ox}var Lx,CO;function _2(){if(CO)return Lx;CO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Lx=e,Lx}var Px,kO;function Wq(){if(kO)return Px;kO=1;var e=el(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Px=t,Px}var Ix,EO;function Tg(){if(EO)return Ix;EO=1;var e=Wq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Ix=t,Ix}var Bx,NO;function Ag(){if(NO)return Bx;NO=1;var e=Tg(),t=Mc(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Bx=i,Bx}var zx,TO;function gf(){if(TO)return zx;TO=1;var e=Ag(),t=Tg();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var f=i[u],p=o?o(s[f],r[f],f,s,r):void 0;p===void 0&&(p=r[f]),l?t(s,f,p):e(s,f,p)}return s}return zx=n,zx}var qx,AO;function Nue(){if(AO)return qx;AO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return qx=e,qx}var Vx,MO;function ds(){if(MO)return Vx;MO=1;function e(t){return t!=null&&typeof t=="object"}return Vx=e,Vx}var Hx,_O;function Tue(){if(_O)return Hx;_O=1;var e=Ja(),t=ds(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Hx=r,Hx}var Fx,DO;function yf(){if(DO)return Fx;DO=1;var e=Tue(),t=ds(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Fx=s,Fx}var Ux,RO;function kn(){if(RO)return Ux;RO=1;var e=Array.isArray;return Ux=e,Ux}var Zu={exports:{}},$x,jO;function Aue(){if(jO)return $x;jO=1;function e(){return!1}return $x=e,$x}Zu.exports;var OO;function Dc(){return OO||(OO=1,(function(e,t){var n=Pi(),r=Aue(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(Zu,Zu.exports)),Zu.exports}var Gx,LO;function Mg(){if(LO)return Gx;LO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Gx=n,Gx}var Wx,PO;function D2(){if(PO)return Wx;PO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Wx=t,Wx}var Kx,IO;function Mue(){if(IO)return Kx;IO=1;var e=Ja(),t=D2(),n=ds(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",b="[object Set]",v="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",k="[object DataView]",T="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",j="[object Uint8Array]",R="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",U={};U[T]=U[E]=U[N]=U[A]=U[_]=U[j]=U[R]=U[I]=U[B]=!0,U[r]=U[i]=U[w]=U[s]=U[k]=U[o]=U[l]=U[u]=U[d]=U[f]=U[p]=U[g]=U[b]=U[v]=U[S]=!1;function q(F){return n(F)&&t(F.length)&&!!U[e(F)]}return Kx=q,Kx}var Yx,BO;function _g(){if(BO)return Yx;BO=1;function e(t){return function(n){return t(n)}}return Yx=e,Yx}var Qu={exports:{}};Qu.exports;var zO;function R2(){return zO||(zO=1,(function(e,t){var n=$q(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Qu,Qu.exports)),Qu.exports}var Xx,qO;function bf(){if(qO)return Xx;qO=1;var e=Mue(),t=_g(),n=R2(),r=n&&n.isTypedArray,i=r?t(r):e;return Xx=i,Xx}var Zx,VO;function Kq(){if(VO)return Zx;VO=1;var e=Nue(),t=yf(),n=kn(),r=Dc(),i=Mg(),s=bf(),o=Object.prototype,l=o.hasOwnProperty;function u(d,f){var p=n(d),g=!p&&t(d),b=!p&&!g&&r(d),v=!p&&!g&&!b&&s(d),S=p||g||b||v,w=S?e(d.length,String):[],k=w.length;for(var T in d)(f||l.call(d,T))&&!(S&&(T=="length"||b&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,k)))&&w.push(T);return w}return Zx=u,Zx}var Qx,HO;function Dg(){if(HO)return Qx;HO=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Qx=t,Qx}var Jx,FO;function Yq(){if(FO)return Jx;FO=1;function e(t,n){return function(r){return t(n(r))}}return Jx=e,Jx}var ev,UO;function _ue(){if(UO)return ev;UO=1;var e=Yq(),t=e(Object.keys,Object);return ev=t,ev}var tv,$O;function j2(){if($O)return tv;$O=1;var e=Dg(),t=_ue(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return tv=i,tv}var nv,GO;function Fs(){if(GO)return nv;GO=1;var e=mf(),t=D2();function n(r){return r!=null&&t(r.length)&&!e(r)}return nv=n,nv}var rv,WO;function Ko(){if(WO)return rv;WO=1;var e=Kq(),t=j2(),n=Fs();function r(i){return n(i)?e(i):t(i)}return rv=r,rv}var iv,KO;function Due(){if(KO)return iv;KO=1;var e=gf(),t=Ko();function n(r,i){return r&&e(i,t(i),r)}return iv=n,iv}var sv,YO;function Rue(){if(YO)return sv;YO=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return sv=e,sv}var ov,XO;function jue(){if(XO)return ov;XO=1;var e=bi(),t=Dg(),n=Rue(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return ov=s,ov}var av,ZO;function tl(){if(ZO)return av;ZO=1;var e=Kq(),t=jue(),n=Fs();function r(i){return n(i)?e(i,!0):t(i)}return av=r,av}var lv,QO;function Oue(){if(QO)return lv;QO=1;var e=gf(),t=tl();function n(r,i){return r&&e(i,t(i),r)}return lv=n,lv}var Ju={exports:{}};Ju.exports;var JO;function Xq(){return JO||(JO=1,(function(e,t){var n=Pi(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,f){if(f)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(Ju,Ju.exports)),Ju.exports}var cv,e3;function Zq(){if(e3)return cv;e3=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return cv=e,cv}var uv,t3;function Qq(){if(t3)return uv;t3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return uv=e,uv}var dv,n3;function Jq(){if(n3)return dv;n3=1;function e(){return[]}return dv=e,dv}var fv,r3;function O2(){if(r3)return fv;r3=1;var e=Qq(),t=Jq(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return fv=s,fv}var hv,i3;function Lue(){if(i3)return hv;i3=1;var e=gf(),t=O2();function n(r,i){return e(r,t(r),i)}return hv=n,hv}var pv,s3;function L2(){if(s3)return pv;s3=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return pv=e,pv}var mv,o3;function Rg(){if(o3)return mv;o3=1;var e=Yq(),t=e(Object.getPrototypeOf,Object);return mv=t,mv}var gv,a3;function eV(){if(a3)return gv;a3=1;var e=L2(),t=Rg(),n=O2(),r=Jq(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return gv=s,gv}var yv,l3;function Pue(){if(l3)return yv;l3=1;var e=gf(),t=eV();function n(r,i){return e(r,t(r),i)}return yv=n,yv}var bv,c3;function tV(){if(c3)return bv;c3=1;var e=L2(),t=kn();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return bv=n,bv}var xv,u3;function nV(){if(u3)return xv;u3=1;var e=tV(),t=O2(),n=Ko();function r(i){return e(i,n,t)}return xv=r,xv}var vv,d3;function Iue(){if(d3)return vv;d3=1;var e=tV(),t=eV(),n=tl();function r(i){return e(i,n,t)}return vv=r,vv}var wv,f3;function Bue(){if(f3)return wv;f3=1;var e=el(),t=Pi(),n=e(t,"DataView");return wv=n,wv}var Sv,h3;function zue(){if(h3)return Sv;h3=1;var e=el(),t=Pi(),n=e(t,"Promise");return Sv=n,Sv}var Cv,p3;function rV(){if(p3)return Cv;p3=1;var e=el(),t=Pi(),n=e(t,"Set");return Cv=n,Cv}var kv,m3;function que(){if(m3)return kv;m3=1;var e=el(),t=Pi(),n=e(t,"WeakMap");return kv=n,kv}var Ev,g3;function Rc(){if(g3)return Ev;g3=1;var e=Bue(),t=A2(),n=zue(),r=rV(),i=que(),s=Ja(),o=Gq(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",b=o(e),v=o(t),S=o(n),w=o(r),k=o(i),T=s;return(e&&T(new e(new ArrayBuffer(1)))!=g||t&&T(new t)!=l||n&&T(n.resolve())!=d||r&&T(new r)!=f||i&&T(new i)!=p)&&(T=function(E){var N=s(E),A=N==u?E.constructor:void 0,_=A?o(A):"";if(_)switch(_){case b:return g;case v:return l;case S:return d;case w:return f;case k:return p}return N}),Ev=T,Ev}var Nv,y3;function Vue(){if(y3)return Nv;y3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Nv=n,Nv}var Tv,b3;function iV(){if(b3)return Tv;b3=1;var e=Pi(),t=e.Uint8Array;return Tv=t,Tv}var Av,x3;function P2(){if(x3)return Av;x3=1;var e=iV();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Av=t,Av}var Mv,v3;function Hue(){if(v3)return Mv;v3=1;var e=P2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Mv=t,Mv}var _v,w3;function Fue(){if(w3)return _v;w3=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return _v=t,_v}var Dv,S3;function Uue(){if(S3)return Dv;S3=1;var e=_c(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Dv=r,Dv}var Rv,C3;function sV(){if(C3)return Rv;C3=1;var e=P2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Rv=t,Rv}var jv,k3;function $ue(){if(k3)return jv;k3=1;var e=P2(),t=Hue(),n=Fue(),r=Uue(),i=sV(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",f="[object Set]",p="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",v="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",k="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",j="[object Uint32Array]";function R(I,B,U){var q=I.constructor;switch(B){case b:return e(I);case s:case o:return new q(+I);case v:return t(I,U);case S:case w:case k:case T:case E:case N:case A:case _:case j:return i(I,U);case l:return new q;case u:case p:return new q(I);case d:return n(I);case f:return new q;case g:return r(I)}}return jv=R,jv}var Ov,E3;function oV(){if(E3)return Ov;E3=1;var e=bi(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return Ov=n,Ov}var Lv,N3;function aV(){if(N3)return Lv;N3=1;var e=oV(),t=Rg(),n=Dg();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Lv=r,Lv}var Pv,T3;function Gue(){if(T3)return Pv;T3=1;var e=Rc(),t=ds(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Pv=r,Pv}var Iv,A3;function Wue(){if(A3)return Iv;A3=1;var e=Gue(),t=_g(),n=R2(),r=n&&n.isMap,i=r?t(r):e;return Iv=i,Iv}var Bv,M3;function Kue(){if(M3)return Bv;M3=1;var e=Rc(),t=ds(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Bv=r,Bv}var zv,_3;function Yue(){if(_3)return zv;_3=1;var e=Kue(),t=_g(),n=R2(),r=n&&n.isSet,i=r?t(r):e;return zv=i,zv}var qv,D3;function lV(){if(D3)return qv;D3=1;var e=Ng(),t=_2(),n=Ag(),r=Due(),i=Oue(),s=Xq(),o=Zq(),l=Lue(),u=Pue(),d=nV(),f=Iue(),p=Rc(),g=Vue(),b=$ue(),v=aV(),S=kn(),w=Dc(),k=Wue(),T=bi(),E=Yue(),N=Ko(),A=tl(),_=1,j=2,R=4,I="[object Arguments]",B="[object Array]",U="[object Boolean]",q="[object Date]",F="[object Error]",L="[object Function]",H="[object GeneratorFunction]",O="[object Map]",V="[object Number]",Y="[object Object]",te="[object RegExp]",z="[object Set]",W="[object String]",oe="[object Symbol]",ae="[object WeakMap]",$="[object ArrayBuffer]",Q="[object DataView]",ee="[object Float32Array]",de="[object Float64Array]",le="[object Int8Array]",xe="[object Int16Array]",_e="[object Int32Array]",ze="[object Uint8Array]",Pe="[object Uint8ClampedArray]",Te="[object Uint16Array]",ke="[object Uint32Array]",Ee={};Ee[I]=Ee[B]=Ee[$]=Ee[Q]=Ee[U]=Ee[q]=Ee[ee]=Ee[de]=Ee[le]=Ee[xe]=Ee[_e]=Ee[O]=Ee[V]=Ee[Y]=Ee[te]=Ee[z]=Ee[W]=Ee[oe]=Ee[ze]=Ee[Pe]=Ee[Te]=Ee[ke]=!0,Ee[F]=Ee[L]=Ee[ae]=!1;function pt(Le,gt,bt,$t,un,zt){var Nt,En=gt&_,dn=gt&j,Ot=gt&R;if(bt&&(Nt=un?bt(Le,$t,un,zt):bt(Le)),Nt!==void 0)return Nt;if(!T(Le))return Le;var dt=S(Le);if(dt){if(Nt=g(Le),!En)return o(Le,Nt)}else{var Tt=p(Le),At=Tt==L||Tt==H;if(w(Le))return s(Le,En);if(Tt==Y||Tt==I||At&&!un){if(Nt=dn||At?{}:v(Le),!En)return dn?u(Le,i(Nt,Le)):l(Le,r(Nt,Le))}else{if(!Ee[Tt])return un?Le:{};Nt=b(Le,Tt,En)}}zt||(zt=new e);var sr=zt.get(Le);if(sr)return sr;zt.set(Le,Nt),E(Le)?Le.forEach(function(Qt){Nt.add(pt(Qt,gt,bt,Qt,Le,zt))}):k(Le)&&Le.forEach(function(Qt,Oe){Nt.set(Oe,pt(Qt,gt,bt,Oe,Le,zt))});var Ar=Ot?dn?f:d:dn?A:N,vi=dt?void 0:Ar(Le);return t(vi||Le,function(Qt,Oe){vi&&(Oe=Qt,Qt=Le[Oe]),n(Nt,Oe,pt(Qt,gt,bt,Oe,Le,zt))}),Nt}return qv=pt,qv}var Vv,R3;function Xue(){if(R3)return Vv;R3=1;var e=lV(),t=4;function n(r){return e(r,t)}return Vv=n,Vv}var Hv,j3;function I2(){if(j3)return Hv;j3=1;function e(t){return function(){return t}}return Hv=e,Hv}var Fv,O3;function Zue(){if(O3)return Fv;O3=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return Fv=e,Fv}var Uv,L3;function B2(){if(L3)return Uv;L3=1;var e=Zue(),t=e();return Uv=t,Uv}var $v,P3;function z2(){if(P3)return $v;P3=1;var e=B2(),t=Ko();function n(r,i){return r&&e(r,i,t)}return $v=n,$v}var Gv,I3;function Que(){if(I3)return Gv;I3=1;var e=Fs();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return Gv=t,Gv}var Wv,B3;function jg(){if(B3)return Wv;B3=1;var e=z2(),t=Que(),n=t(e);return Wv=n,Wv}var Kv,z3;function nl(){if(z3)return Kv;z3=1;function e(t){return t}return Kv=e,Kv}var Yv,q3;function cV(){if(q3)return Yv;q3=1;var e=nl();function t(n){return typeof n=="function"?n:e}return Yv=t,Yv}var Xv,V3;function uV(){if(V3)return Xv;V3=1;var e=_2(),t=jg(),n=cV(),r=kn();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return Xv=i,Xv}var Zv,H3;function dV(){return H3||(H3=1,Zv=uV()),Zv}var Qv,F3;function Jue(){if(F3)return Qv;F3=1;var e=jg();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return Qv=t,Qv}var Jv,U3;function ede(){if(U3)return Jv;U3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Jv=t,Jv}var e1,$3;function tde(){if($3)return e1;$3=1;function e(t){return this.__data__.has(t)}return e1=e,e1}var t1,G3;function fV(){if(G3)return t1;G3=1;var e=M2(),t=ede(),n=tde();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,t1=r,t1}var n1,W3;function nde(){if(W3)return n1;W3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return n1=e,n1}var r1,K3;function hV(){if(K3)return r1;K3=1;function e(t,n){return t.has(n)}return r1=e,r1}var i1,Y3;function pV(){if(Y3)return i1;Y3=1;var e=fV(),t=nde(),n=hV(),r=1,i=2;function s(o,l,u,d,f,p){var g=u&r,b=o.length,v=l.length;if(b!=v&&!(g&&v>b))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var k=-1,T=!0,E=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++k<b;){var N=o[k],A=l[k];if(d)var _=g?d(A,N,k,l,o,p):d(N,A,k,o,l,p);if(_!==void 0){if(_)continue;T=!1;break}if(E){if(!t(l,function(j,R){if(!n(E,R)&&(N===j||f(N,j,u,d,p)))return E.push(R)})){T=!1;break}}else if(!(N===A||f(N,A,u,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return i1=s,i1}var s1,X3;function rde(){if(X3)return s1;X3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return s1=e,s1}var o1,Z3;function q2(){if(Z3)return o1;Z3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return o1=e,o1}var a1,Q3;function ide(){if(Q3)return a1;Q3=1;var e=_c(),t=iV(),n=Mc(),r=pV(),i=rde(),s=q2(),o=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",b="[object RegExp]",v="[object Set]",S="[object String]",w="[object Symbol]",k="[object ArrayBuffer]",T="[object DataView]",E=e?e.prototype:void 0,N=E?E.valueOf:void 0;function A(_,j,R,I,B,U,q){switch(R){case T:if(_.byteLength!=j.byteLength||_.byteOffset!=j.byteOffset)return!1;_=_.buffer,j=j.buffer;case k:return!(_.byteLength!=j.byteLength||!U(new t(_),new t(j)));case u:case d:case g:return n(+_,+j);case f:return _.name==j.name&&_.message==j.message;case b:case S:return _==j+"";case p:var F=i;case v:var L=I&o;if(F||(F=s),_.size!=j.size&&!L)return!1;var H=q.get(_);if(H)return H==j;I|=l,q.set(_,j);var O=r(F(_),F(j),I,B,U,q);return q.delete(_),O;case w:if(N)return N.call(_)==N.call(j)}return!1}return a1=A,a1}var l1,J3;function sde(){if(J3)return l1;J3=1;var e=nV(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,f){var p=l&t,g=e(s),b=g.length,v=e(o),S=v.length;if(b!=S&&!p)return!1;for(var w=b;w--;){var k=g[w];if(!(p?k in o:r.call(o,k)))return!1}var T=f.get(s),E=f.get(o);if(T&&E)return T==o&&E==s;var N=!0;f.set(s,o),f.set(o,s);for(var A=p;++w<b;){k=g[w];var _=s[k],j=o[k];if(u)var R=p?u(j,_,k,o,s,f):u(_,j,k,s,o,f);if(!(R===void 0?_===j||d(_,j,l,u,f):R)){N=!1;break}A||(A=k=="constructor")}if(N&&!A){var I=s.constructor,B=o.constructor;I!=B&&"constructor"in s&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(N=!1)}return f.delete(s),f.delete(o),N}return l1=i,l1}var c1,eL;function ode(){if(eL)return c1;eL=1;var e=Ng(),t=pV(),n=ide(),r=sde(),i=Rc(),s=kn(),o=Dc(),l=bf(),u=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,b=g.hasOwnProperty;function v(S,w,k,T,E,N){var A=s(S),_=s(w),j=A?f:i(S),R=_?f:i(w);j=j==d?p:j,R=R==d?p:R;var I=j==p,B=R==p,U=j==R;if(U&&o(S)){if(!o(w))return!1;A=!0,I=!1}if(U&&!I)return N||(N=new e),A||l(S)?t(S,w,k,T,E,N):n(S,w,j,k,T,E,N);if(!(k&u)){var q=I&&b.call(S,"__wrapped__"),F=B&&b.call(w,"__wrapped__");if(q||F){var L=q?S.value():S,H=F?w.value():w;return N||(N=new e),E(L,H,k,T,N)}}return U?(N||(N=new e),r(S,w,k,T,E,N)):!1}return c1=v,c1}var u1,tL;function mV(){if(tL)return u1;tL=1;var e=ode(),t=ds();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return u1=n,u1}var d1,nL;function ade(){if(nL)return d1;nL=1;var e=Ng(),t=mV(),n=1,r=2;function i(s,o,l,u){var d=l.length,f=d,p=!u;if(s==null)return!f;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<f;){g=l[d];var b=g[0],v=s[b],S=g[1];if(p&&g[2]){if(v===void 0&&!(b in s))return!1}else{var w=new e;if(u)var k=u(v,S,b,s,o,w);if(!(k===void 0?t(S,v,n|r,u,w):k))return!1}}return!0}return d1=i,d1}var f1,rL;function gV(){if(rL)return f1;rL=1;var e=bi();function t(n){return n===n&&!e(n)}return f1=t,f1}var h1,iL;function lde(){if(iL)return h1;iL=1;var e=gV(),t=Ko();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return h1=n,h1}var p1,sL;function yV(){if(sL)return p1;sL=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return p1=e,p1}var m1,oL;function cde(){if(oL)return m1;oL=1;var e=ade(),t=lde(),n=yV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return m1=r,m1}var g1,aL;function jc(){if(aL)return g1;aL=1;var e=Ja(),t=ds(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return g1=r,g1}var y1,lL;function V2(){if(lL)return y1;lL=1;var e=kn(),t=jc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return y1=i,y1}var b1,cL;function ude(){if(cL)return b1;cL=1;var e=M2(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,b1=n,b1}var x1,uL;function dde(){if(uL)return x1;uL=1;var e=ude(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return x1=n,x1}var v1,dL;function fde(){if(dL)return v1;dL=1;var e=dde(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return v1=r,v1}var w1,fL;function Og(){if(fL)return w1;fL=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return w1=e,w1}var S1,hL;function hde(){if(hL)return S1;hL=1;var e=_c(),t=Og(),n=kn(),r=jc(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return S1=o,S1}var C1,pL;function bV(){if(pL)return C1;pL=1;var e=hde();function t(n){return n==null?"":e(n)}return C1=t,C1}var k1,mL;function Lg(){if(mL)return k1;mL=1;var e=kn(),t=V2(),n=fde(),r=bV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return k1=i,k1}var E1,gL;function xf(){if(gL)return E1;gL=1;var e=jc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return E1=t,E1}var N1,yL;function Pg(){if(yL)return N1;yL=1;var e=Lg(),t=xf();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return N1=n,N1}var T1,bL;function pde(){if(bL)return T1;bL=1;var e=Pg();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return T1=t,T1}var A1,xL;function mde(){if(xL)return A1;xL=1;function e(t,n){return t!=null&&n in Object(t)}return A1=e,A1}var M1,vL;function xV(){if(vL)return M1;vL=1;var e=Lg(),t=yf(),n=kn(),r=Mg(),i=D2(),s=xf();function o(l,u,d){u=e(u,l);for(var f=-1,p=u.length,g=!1;++f<p;){var b=s(u[f]);if(!(g=l!=null&&d(l,b)))break;l=l[b]}return g||++f!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(b,p)&&(n(l)||t(l)))}return M1=o,M1}var _1,wL;function vV(){if(wL)return _1;wL=1;var e=mde(),t=xV();function n(r,i){return r!=null&&t(r,i,e)}return _1=n,_1}var D1,SL;function gde(){if(SL)return D1;SL=1;var e=mV(),t=pde(),n=vV(),r=V2(),i=gV(),s=yV(),o=xf(),l=1,u=2;function d(f,p){return r(f)&&i(p)?s(o(f),p):function(g){var b=t(g,f);return b===void 0&&b===p?n(g,f):e(p,b,l|u)}}return D1=d,D1}var R1,CL;function wV(){if(CL)return R1;CL=1;function e(t){return function(n){return n?.[t]}}return R1=e,R1}var j1,kL;function yde(){if(kL)return j1;kL=1;var e=Pg();function t(n){return function(r){return e(r,n)}}return j1=t,j1}var O1,EL;function bde(){if(EL)return O1;EL=1;var e=wV(),t=yde(),n=V2(),r=xf();function i(s){return n(s)?e(r(s)):t(s)}return O1=i,O1}var L1,NL;function Us(){if(NL)return L1;NL=1;var e=cde(),t=gde(),n=nl(),r=kn(),i=bde();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return L1=s,L1}var P1,TL;function SV(){if(TL)return P1;TL=1;var e=Qq(),t=Jue(),n=Us(),r=kn();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return P1=i,P1}var I1,AL;function xde(){if(AL)return I1;AL=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return I1=n,I1}var B1,ML;function CV(){if(ML)return B1;ML=1;var e=xde(),t=xV();function n(r,i){return r!=null&&t(r,i,e)}return B1=n,B1}var z1,_L;function vde(){if(_L)return z1;_L=1;var e=j2(),t=Rc(),n=yf(),r=kn(),i=Fs(),s=Dc(),o=Dg(),l=bf(),u="[object Map]",d="[object Set]",f=Object.prototype,p=f.hasOwnProperty;function g(b){if(b==null)return!0;if(i(b)&&(r(b)||typeof b=="string"||typeof b.splice=="function"||s(b)||l(b)||n(b)))return!b.length;var v=t(b);if(v==u||v==d)return!b.size;if(o(b))return!e(b).length;for(var S in b)if(p.call(b,S))return!1;return!0}return z1=g,z1}var q1,DL;function kV(){if(DL)return q1;DL=1;function e(t){return t===void 0}return q1=e,q1}var V1,RL;function EV(){if(RL)return V1;RL=1;var e=jg(),t=Fs();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return V1=n,V1}var H1,jL;function NV(){if(jL)return H1;jL=1;var e=Og(),t=Us(),n=EV(),r=kn();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return H1=i,H1}var F1,OL;function wde(){if(OL)return F1;OL=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return F1=e,F1}var U1,LL;function Sde(){if(LL)return U1;LL=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return U1=e,U1}var $1,PL;function TV(){if(PL)return $1;PL=1;var e=wde(),t=jg(),n=Us(),r=Sde(),i=kn();function s(o,l,u){var d=i(o)?e:r,f=arguments.length<3;return d(o,n(l,4),u,f,t)}return $1=s,$1}var G1,IL;function Cde(){if(IL)return G1;IL=1;var e=Ja(),t=kn(),n=ds(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return G1=i,G1}var W1,BL;function kde(){if(BL)return W1;BL=1;var e=wV(),t=e("length");return W1=t,W1}var K1,zL;function Ede(){if(zL)return K1;zL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return K1=u,K1}var Y1,qL;function Nde(){if(qL)return Y1;qL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",v=d+"?",S="["+s+"]?",w="(?:"+b+"(?:"+[f,p,g].join("|")+")"+S+v+")*",k=S+v+w,T="(?:"+[f+l+"?",l,p,g,o].join("|")+")",E=RegExp(u+"(?="+u+")|"+T+k,"g");function N(A){for(var _=E.lastIndex=0;E.test(A);)++_;return _}return Y1=N,Y1}var X1,VL;function Tde(){if(VL)return X1;VL=1;var e=kde(),t=Ede(),n=Nde();function r(i){return t(i)?n(i):e(i)}return X1=r,X1}var Z1,HL;function Ade(){if(HL)return Z1;HL=1;var e=j2(),t=Rc(),n=Fs(),r=Cde(),i=Tde(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return Z1=l,Z1}var Q1,FL;function Mde(){if(FL)return Q1;FL=1;var e=_2(),t=oV(),n=z2(),r=Us(),i=Rg(),s=kn(),o=Dc(),l=mf(),u=bi(),d=bf();function f(p,g,b){var v=s(p),S=v||o(p)||d(p);if(g=r(g,4),b==null){var w=p&&p.constructor;S?b=v?new w:[]:u(p)?b=l(w)?t(i(p)):{}:b={}}return(S?e:n)(p,function(k,T,E){return g(b,k,T,E)}),b}return Q1=f,Q1}var J1,UL;function _de(){if(UL)return J1;UL=1;var e=_c(),t=yf(),n=kn(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return J1=i,J1}var ew,$L;function H2(){if($L)return ew;$L=1;var e=L2(),t=_de();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var f=r[u];i>0&&s(f)?i>1?n(f,i-1,s,o,l):e(l,f):o||(l[l.length]=f)}return l}return ew=n,ew}var tw,GL;function Dde(){if(GL)return tw;GL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return tw=e,tw}var nw,WL;function AV(){if(WL)return nw;WL=1;var e=Dde(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),e(r,this,f)}}return nw=n,nw}var rw,KL;function Rde(){if(KL)return rw;KL=1;var e=I2(),t=Wq(),n=nl(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return rw=r,rw}var iw,YL;function jde(){if(YL)return iw;YL=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return iw=r,iw}var sw,XL;function MV(){if(XL)return sw;XL=1;var e=Rde(),t=jde(),n=t(e);return sw=n,sw}var ow,ZL;function Ig(){if(ZL)return ow;ZL=1;var e=nl(),t=AV(),n=MV();function r(i,s){return n(t(i,s,e),i+"")}return ow=r,ow}var aw,QL;function _V(){if(QL)return aw;QL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return aw=e,aw}var lw,JL;function Ode(){if(JL)return lw;JL=1;function e(t){return t!==t}return lw=e,lw}var cw,e4;function Lde(){if(e4)return cw;e4=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return cw=e,cw}var uw,t4;function Pde(){if(t4)return uw;t4=1;var e=_V(),t=Ode(),n=Lde();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return uw=r,uw}var dw,n4;function Ide(){if(n4)return dw;n4=1;var e=Pde();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return dw=t,dw}var fw,r4;function Bde(){if(r4)return fw;r4=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return fw=e,fw}var hw,i4;function zde(){if(i4)return hw;i4=1;function e(){}return hw=e,hw}var pw,s4;function qde(){if(s4)return pw;s4=1;var e=rV(),t=zde(),n=q2(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return pw=i,pw}var mw,o4;function Vde(){if(o4)return mw;o4=1;var e=fV(),t=Ide(),n=Bde(),r=hV(),i=qde(),s=q2(),o=200;function l(u,d,f){var p=-1,g=t,b=u.length,v=!0,S=[],w=S;if(f)v=!1,g=n;else if(b>=o){var k=d?null:i(u);if(k)return s(k);v=!1,g=r,w=new e}else w=d?[]:S;e:for(;++p<b;){var T=u[p],E=d?d(T):T;if(T=f||T!==0?T:0,v&&E===E){for(var N=w.length;N--;)if(w[N]===E)continue e;d&&w.push(E),S.push(T)}else g(w,E,f)||(w!==S&&w.push(E),S.push(T))}return S}return mw=l,mw}var gw,a4;function DV(){if(a4)return gw;a4=1;var e=Fs(),t=ds();function n(r){return t(r)&&e(r)}return gw=n,gw}var yw,l4;function Hde(){if(l4)return yw;l4=1;var e=H2(),t=Ig(),n=Vde(),r=DV(),i=t(function(s){return n(e(s,1,r,!0))});return yw=i,yw}var bw,c4;function Fde(){if(c4)return bw;c4=1;var e=Og();function t(n,r){return e(r,function(i){return n[i]})}return bw=t,bw}var xw,u4;function RV(){if(u4)return xw;u4=1;var e=Fde(),t=Ko();function n(r){return r==null?[]:e(r,t(r))}return xw=n,xw}var vw,d4;function xi(){if(d4)return vw;d4=1;var e;if(typeof T2=="function")try{e={clone:Xue(),constant:I2(),each:dV(),filter:SV(),has:CV(),isArray:kn(),isEmpty:vde(),isFunction:mf(),isUndefined:kV(),keys:Ko(),map:NV(),reduce:TV(),size:Ade(),transform:Mde(),union:Hde(),values:RV()}}catch{}return e||(e=window._),vw=e,vw}var ww,f4;function F2(){if(f4)return ww;f4=1;var e=xi();ww=i;var t="\0",n="\0",r="";function i(f){this._isDirected=e.has(f,"directed")?f.directed:!0,this._isMultigraph=e.has(f,"multigraph")?f.multigraph:!1,this._isCompound=e.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var f=this;return e.filter(this.nodes(),function(p){return e.isEmpty(f._in[p])})},i.prototype.sinks=function(){var f=this;return e.filter(this.nodes(),function(p){return e.isEmpty(f._out[p])})},i.prototype.setNodes=function(f,p){var g=arguments,b=this;return e.each(f,function(v){g.length>1?b.setNode(v,p):b.setNode(v)}),this},i.prototype.setNode=function(f,p){return e.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=p),this):(this._nodes[f]=arguments.length>1?p:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return e.has(this._nodes,f)},i.prototype.removeNode=function(f){var p=this;if(e.has(this._nodes,f)){var g=function(b){p.removeEdge(p._edgeObjs[b])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],e.each(this.children(f),function(b){p.setParent(b)}),delete this._children[f]),e.each(e.keys(this._in[f]),g),delete this._in[f],delete this._preds[f],e.each(e.keys(this._out[f]),g),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===f)throw new Error("Setting "+p+" as parent of "+f+" would create a cycle");this.setNode(p)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=p,this._children[p][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var p=this._parent[f];if(p!==n)return p}},i.prototype.children=function(f){if(e.isUndefined(f)&&(f=n),this._isCompound){var p=this._children[f];if(p)return e.keys(p)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var p=this._preds[f];if(p)return e.keys(p)},i.prototype.successors=function(f){var p=this._sucs[f];if(p)return e.keys(p)},i.prototype.neighbors=function(f){var p=this.predecessors(f);if(p)return e.union(p,this.successors(f))},i.prototype.isLeaf=function(f){var p;return this.isDirected()?p=this.successors(f):p=this.neighbors(f),p.length===0},i.prototype.filterNodes=function(f){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,w){f(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var b={};function v(S){var w=g.parent(S);return w===void 0||p.hasNode(w)?(b[S]=w,w):w in b?b[w]:v(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,v(S))}),p},i.prototype.setDefaultEdgeLabel=function(f){return e.isFunction(f)||(f=e.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(f,p){var g=this,b=arguments;return e.reduce(f,function(v,S){return b.length>1?g.setEdge(v,S,p):g.setEdge(v,S),S}),this},i.prototype.setEdge=function(){var f,p,g,b,v=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(f=S.v,p=S.w,g=S.name,arguments.length===2&&(b=arguments[1],v=!0)):(f=S,p=arguments[1],g=arguments[3],arguments.length>2&&(b=arguments[2],v=!0)),f=""+f,p=""+p,e.isUndefined(g)||(g=""+g);var w=l(this._isDirected,f,p,g);if(e.has(this._edgeLabels,w))return v&&(this._edgeLabels[w]=b),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(p),this._edgeLabels[w]=v?b:this._defaultEdgeLabelFn(f,p,g);var k=u(this._isDirected,f,p,g);return f=k.v,p=k.w,Object.freeze(k),this._edgeObjs[w]=k,s(this._preds[p],f),s(this._sucs[f],p),this._in[p][w]=k,this._out[f][w]=k,this._edgeCount++,this},i.prototype.edge=function(f,p,g){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,g);return this._edgeLabels[b]},i.prototype.hasEdge=function(f,p,g){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,g);return e.has(this._edgeLabels,b)},i.prototype.removeEdge=function(f,p,g){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,g),v=this._edgeObjs[b];return v&&(f=v.v,p=v.w,delete this._edgeLabels[b],delete this._edgeObjs[b],o(this._preds[p],f),o(this._sucs[f],p),delete this._in[p][b],delete this._out[f][b],this._edgeCount--),this},i.prototype.inEdges=function(f,p){var g=this._in[f];if(g){var b=e.values(g);return p?e.filter(b,function(v){return v.v===p}):b}},i.prototype.outEdges=function(f,p){var g=this._out[f];if(g){var b=e.values(g);return p?e.filter(b,function(v){return v.w===p}):b}},i.prototype.nodeEdges=function(f,p){var g=this.inEdges(f,p);if(g)return g.concat(this.outEdges(f,p))};function s(f,p){f[p]?f[p]++:f[p]=1}function o(f,p){--f[p]||delete f[p]}function l(f,p,g,b){var v=""+p,S=""+g;if(!f&&v>S){var w=v;v=S,S=w}return v+r+S+r+(e.isUndefined(b)?t:b)}function u(f,p,g,b){var v=""+p,S=""+g;if(!f&&v>S){var w=v;v=S,S=w}var k={v,w:S};return b&&(k.name=b),k}function d(f,p){return l(f,p.v,p.w,p.name)}return ww}var Sw,h4;function Ude(){return h4||(h4=1,Sw="2.1.8"),Sw}var Cw,p4;function $de(){return p4||(p4=1,Cw={Graph:F2(),version:Ude()}),Cw}var kw,m4;function Gde(){if(m4)return kw;m4=1;var e=xi(),t=F2();kw={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),f={v:l};return e.isUndefined(u)||(f.value=u),e.isUndefined(d)||(f.parent=d),f})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return kw}var Ew,g4;function Wde(){if(g4)return Ew;g4=1;var e=xi();Ew=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return Ew}var Nw,y4;function jV(){if(y4)return Nw;y4=1;var e=xi();Nw=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},Nw}var Tw,b4;function OV(){if(b4)return Tw;b4=1;var e=xi(),t=jV();Tw=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},f=new t,p,g,b=function(v){var S=v.v!==p?v.v:v.w,w=d[S],k=l(v),T=g.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+k);T<w.distance&&(w.distance=T,w.predecessor=p,f.decrease(S,T))};for(s.nodes().forEach(function(v){var S=v===o?0:Number.POSITIVE_INFINITY;d[v]={distance:S},f.add(v,S)});f.size()>0&&(p=f.removeMin(),g=d[p],g.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(b);return d}return Tw}var Aw,x4;function Kde(){if(x4)return Aw;x4=1;var e=OV(),t=xi();Aw=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return Aw}var Mw,v4;function LV(){if(v4)return Mw;v4=1;var e=xi();Mw=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(d.lowlink=Math.min(d.lowlink,s[g].index)):(l(g),d.lowlink=Math.min(d.lowlink,s[g].lowlink))}),d.lowlink===d.index){var f=[],p;do p=i.pop(),s[p].onStack=!1,f.push(p);while(u!==p);o.push(f)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return Mw}var _w,w4;function Yde(){if(w4)return _w;w4=1;var e=xi(),t=LV();_w=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return _w}var Dw,S4;function Xde(){if(S4)return Dw;S4=1;var e=xi();Dw=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(f){d!==f&&(l[d][f]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(f){var p=f.v===d?f.w:f.v,g=s(f);l[d][p]={distance:g,predecessor:d}})}),u.forEach(function(d){var f=l[d];u.forEach(function(p){var g=l[p];u.forEach(function(b){var v=g[d],S=f[b],w=g[b],k=v.distance+S.distance;k<w.distance&&(w.distance=k,w.predecessor=S.predecessor)})})}),l}return Dw}var Rw,C4;function PV(){if(C4)return Rw;C4=1;var e=xi();Rw=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Rw}var jw,k4;function Zde(){if(k4)return jw;k4=1;var e=PV();jw=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return jw}var Ow,E4;function IV(){if(E4)return Ow;E4=1;var e=xi();Ow=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return Ow}var Lw,N4;function Qde(){if(N4)return Lw;N4=1;var e=IV();Lw=t;function t(n,r){return e(n,r,"post")}return Lw}var Pw,T4;function Jde(){if(T4)return Pw;T4=1;var e=IV();Pw=t;function t(n,r){return e(n,r,"pre")}return Pw}var Iw,A4;function efe(){if(A4)return Iw;A4=1;var e=xi(),t=F2(),n=jV();Iw=r;function r(i,s){var o=new t,l={},u=new n,d;function f(g){var b=g.v===d?g.w:g.v,v=u.priority(b);if(v!==void 0){var S=s(g);S<v&&(l[b]=d,u.decrease(b,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(f)}return o}return Iw}var Bw,M4;function tfe(){return M4||(M4=1,Bw={components:Wde(),dijkstra:OV(),dijkstraAll:Kde(),findCycles:Yde(),floydWarshall:Xde(),isAcyclic:Zde(),postorder:Qde(),preorder:Jde(),prim:efe(),tarjan:LV(),topsort:PV()}),Bw}var zw,_4;function nfe(){if(_4)return zw;_4=1;var e=$de();return zw={Graph:e.Graph,json:Gde(),alg:tfe(),version:e.version},zw}var qw,D4;function Oi(){if(D4)return qw;D4=1;var e;if(typeof T2=="function")try{e=nfe()}catch{}return e||(e=window.graphlib),qw=e,qw}var Vw,R4;function rfe(){if(R4)return Vw;R4=1;var e=lV(),t=1,n=4;function r(i){return e(i,t|n)}return Vw=r,Vw}var Hw,j4;function Bg(){if(j4)return Hw;j4=1;var e=Mc(),t=Fs(),n=Mg(),r=bi();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return Hw=i,Hw}var Fw,O4;function ife(){if(O4)return Fw;O4=1;var e=Ig(),t=Mc(),n=Bg(),r=tl(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,f=u.length,p=f>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(f=1);++d<f;)for(var g=u[d],b=r(g),v=-1,S=b.length;++v<S;){var w=b[v],k=l[w];(k===void 0||t(k,i[w])&&!s.call(l,w))&&(l[w]=g[w])}return l});return Fw=o,Fw}var Uw,L4;function sfe(){if(L4)return Uw;L4=1;var e=Us(),t=Fs(),n=Ko();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var f=i(s,o,l);return f>-1?u[d?s[f]:f]:void 0}}return Uw=r,Uw}var $w,P4;function ofe(){if(P4)return $w;P4=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return $w=t,$w}var Gw,I4;function afe(){if(I4)return Gw;I4=1;var e=ofe(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Gw=n,Gw}var Ww,B4;function lfe(){if(B4)return Ww;B4=1;var e=afe(),t=bi(),n=jc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=t(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return Ww=u,Ww}var Kw,z4;function BV(){if(z4)return Kw;z4=1;var e=lfe(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return Kw=r,Kw}var Yw,q4;function cfe(){if(q4)return Yw;q4=1;var e=BV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Yw=t,Yw}var Xw,V4;function ufe(){if(V4)return Xw;V4=1;var e=_V(),t=Us(),n=cfe(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return Xw=i,Xw}var Zw,H4;function dfe(){if(H4)return Zw;H4=1;var e=sfe(),t=ufe(),n=e(t);return Zw=n,Zw}var Qw,F4;function zV(){if(F4)return Qw;F4=1;var e=H2();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Qw=t,Qw}var Jw,U4;function ffe(){if(U4)return Jw;U4=1;var e=B2(),t=cV(),n=tl();function r(i,s){return i==null?i:e(i,t(s),n)}return Jw=r,Jw}var eS,$4;function hfe(){if($4)return eS;$4=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return eS=e,eS}var tS,G4;function pfe(){if(G4)return tS;G4=1;var e=Tg(),t=z2(),n=Us();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return tS=r,tS}var nS,W4;function U2(){if(W4)return nS;W4=1;var e=jc();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,f=l}return f}return nS=t,nS}var rS,K4;function mfe(){if(K4)return rS;K4=1;function e(t,n){return t>n}return rS=e,rS}var iS,Y4;function gfe(){if(Y4)return iS;Y4=1;var e=U2(),t=mfe(),n=nl();function r(i){return i&&i.length?e(i,n,t):void 0}return iS=r,iS}var sS,X4;function qV(){if(X4)return sS;X4=1;var e=Tg(),t=Mc();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return sS=n,sS}var oS,Z4;function yfe(){if(Z4)return oS;Z4=1;var e=Ja(),t=Rg(),n=ds(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(f){if(!n(f)||e(f)!=r)return!1;var p=t(f);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return oS=d,oS}var aS,Q4;function VV(){if(Q4)return aS;Q4=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return aS=e,aS}var lS,J4;function bfe(){if(J4)return lS;J4=1;var e=gf(),t=tl();function n(r){return e(r,t(r))}return lS=n,lS}var cS,e5;function xfe(){if(e5)return cS;e5=1;var e=qV(),t=Xq(),n=sV(),r=Zq(),i=aV(),s=yf(),o=kn(),l=DV(),u=Dc(),d=mf(),f=bi(),p=yfe(),g=bf(),b=VV(),v=bfe();function S(w,k,T,E,N,A,_){var j=b(w,T),R=b(k,T),I=_.get(R);if(I){e(w,T,I);return}var B=A?A(j,R,T+"",w,k,_):void 0,U=B===void 0;if(U){var q=o(R),F=!q&&u(R),L=!q&&!F&&g(R);B=R,q||F||L?o(j)?B=j:l(j)?B=r(j):F?(U=!1,B=t(R,!0)):L?(U=!1,B=n(R,!0)):B=[]:p(R)||s(R)?(B=j,s(j)?B=v(j):(!f(j)||d(j))&&(B=i(R))):U=!1}U&&(_.set(R,B),N(B,R,E,A,_),_.delete(R)),e(w,T,B)}return cS=S,cS}var uS,t5;function vfe(){if(t5)return uS;t5=1;var e=Ng(),t=qV(),n=B2(),r=xfe(),i=bi(),s=tl(),o=VV();function l(u,d,f,p,g){u!==d&&n(d,function(b,v){if(g||(g=new e),i(b))r(u,d,v,f,l,p,g);else{var S=p?p(o(u,v),b,v+"",u,d,g):void 0;S===void 0&&(S=b),t(u,v,S)}},s)}return uS=l,uS}var dS,n5;function wfe(){if(n5)return dS;n5=1;var e=Ig(),t=Bg();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var f=s[o];f&&r(i,f,o,u)}return i})}return dS=n,dS}var fS,r5;function Sfe(){if(r5)return fS;r5=1;var e=vfe(),t=wfe(),n=t(function(r,i,s){e(r,i,s)});return fS=n,fS}var hS,i5;function HV(){if(i5)return hS;i5=1;function e(t,n){return t<n}return hS=e,hS}var pS,s5;function Cfe(){if(s5)return pS;s5=1;var e=U2(),t=HV(),n=nl();function r(i){return i&&i.length?e(i,n,t):void 0}return pS=r,pS}var mS,o5;function kfe(){if(o5)return mS;o5=1;var e=U2(),t=Us(),n=HV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return mS=r,mS}var gS,a5;function Efe(){if(a5)return gS;a5=1;var e=Pi(),t=function(){return e.Date.now()};return gS=t,gS}var yS,l5;function Nfe(){if(l5)return yS;l5=1;var e=Ag(),t=Lg(),n=Mg(),r=bi(),i=xf();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var f=-1,p=l.length,g=p-1,b=o;b!=null&&++f<p;){var v=i(l[f]),S=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(f!=g){var w=b[v];S=d?d(w,v,b):void 0,S===void 0&&(S=r(w)?w:n(l[f+1])?[]:{})}e(b,v,S),b=b[v]}return o}return yS=s,yS}var bS,c5;function Tfe(){if(c5)return bS;c5=1;var e=Pg(),t=Nfe(),n=Lg();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var f=s[l],p=e(i,f);o(p,f)&&t(d,n(f,i),p)}return d}return bS=r,bS}var xS,u5;function Afe(){if(u5)return xS;u5=1;var e=Tfe(),t=vV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return xS=n,xS}var vS,d5;function Mfe(){if(d5)return vS;d5=1;var e=zV(),t=AV(),n=MV();function r(i){return n(t(i,void 0,e),i+"")}return vS=r,vS}var wS,f5;function _fe(){if(f5)return wS;f5=1;var e=Afe(),t=Mfe(),n=t(function(r,i){return r==null?{}:e(r,i)});return wS=n,wS}var SS,h5;function Dfe(){if(h5)return SS;h5=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return SS=n,SS}var CS,p5;function Rfe(){if(p5)return CS;p5=1;var e=Dfe(),t=Bg(),n=BV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return CS=r,CS}var kS,m5;function jfe(){if(m5)return kS;m5=1;var e=Rfe(),t=e();return kS=t,kS}var ES,g5;function Ofe(){if(g5)return ES;g5=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return ES=e,ES}var NS,y5;function Lfe(){if(y5)return NS;y5=1;var e=jc();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,f=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&f&&!d&&!p||s&&u&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!f)return-1}return 0}return NS=t,NS}var TS,b5;function Pfe(){if(b5)return TS;b5=1;var e=Lfe();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var f=e(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-r.index}return TS=t,TS}var AS,x5;function Ife(){if(x5)return AS;x5=1;var e=Og(),t=Pg(),n=Us(),r=EV(),i=Ofe(),s=_g(),o=Pfe(),l=nl(),u=kn();function d(f,p,g){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var b=-1;p=e(p,s(n));var v=r(f,function(S,w,k){var T=e(p,function(E){return E(S)});return{criteria:T,index:++b,value:S}});return i(v,function(S,w){return o(S,w,g)})}return AS=d,AS}var MS,v5;function Bfe(){if(v5)return MS;v5=1;var e=H2(),t=Ife(),n=Ig(),r=Bg(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return MS=i,MS}var _S,w5;function zfe(){if(w5)return _S;w5=1;var e=bV(),t=0;function n(r){var i=++t;return e(r)+i}return _S=n,_S}var DS,S5;function qfe(){if(S5)return DS;S5=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return DS=e,DS}var RS,C5;function Vfe(){if(C5)return RS;C5=1;var e=Ag(),t=qfe();function n(r,i){return t(r||[],i||[],e)}return RS=n,RS}var jS,k5;function Ut(){if(k5)return jS;k5=1;var e;if(typeof T2=="function")try{e={cloneDeep:rfe(),constant:I2(),defaults:ife(),each:dV(),filter:SV(),find:dfe(),flatten:zV(),forEach:uV(),forIn:ffe(),has:CV(),isUndefined:kV(),last:hfe(),map:NV(),mapValues:pfe(),max:gfe(),merge:Sfe(),min:Cfe(),minBy:kfe(),now:Efe(),pick:_fe(),range:jfe(),reduce:TV(),sortBy:Bfe(),uniqueId:zfe(),values:RV(),zipObject:Vfe()}}catch{}return e||(e=window._),jS=e,jS}var OS,E5;function Hfe(){if(E5)return OS;E5=1,OS=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return OS}var LS,N5;function Ffe(){if(N5)return LS;N5=1;var e=Ut(),t=Oi().Graph,n=Hfe();LS=i;var r=e.constant(1);function i(d,f){if(d.nodeCount()<=1)return[];var p=l(d,f||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(b){return d.outEdges(b.v,b.w)}),!0)}function s(d,f,p){for(var g=[],b=f[f.length-1],v=f[0],S;d.nodeCount();){for(;S=v.dequeue();)o(d,f,p,S);for(;S=b.dequeue();)o(d,f,p,S);if(d.nodeCount()){for(var w=f.length-2;w>0;--w)if(S=f[w].dequeue(),S){g=g.concat(o(d,f,p,S,!0));break}}}return g}function o(d,f,p,g,b){var v=b?[]:void 0;return e.forEach(d.inEdges(g.v),function(S){var w=d.edge(S),k=d.node(S.v);b&&v.push({v:S.v,w:S.w}),k.out-=w,u(f,p,k)}),e.forEach(d.outEdges(g.v),function(S){var w=d.edge(S),k=S.w,T=d.node(k);T.in-=w,u(f,p,T)}),d.removeNode(g.v),v}function l(d,f){var p=new t,g=0,b=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var k=p.edge(w.v,w.w)||0,T=f(w),E=k+T;p.setEdge(w.v,w.w,E),b=Math.max(b,p.node(w.v).out+=T),g=Math.max(g,p.node(w.w).in+=T)});var v=e.range(b+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(w){u(v,S,p.node(w))}),{graph:p,buckets:v,zeroIdx:S}}function u(d,f,p){p.out?p.in?d[p.out-p.in+f].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return LS}var PS,T5;function Ufe(){if(T5)return PS;T5=1;var e=Ut(),t=Ffe();PS={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(f){e.has(u,f)||(u[f]=!0,l[f]=!0,e.forEach(s.outEdges(f),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[f])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return PS}var IS,A5;function Tr(){if(A5)return IS;A5=1;var e=Ut(),t=Oi().Graph;IS={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:f,addBorderNode:p,maxRank:g,partition:b,time:v,notime:S};function n(w,k,T,E){var N;do N=e.uniqueId(E);while(w.hasNode(N));return T.dummy=k,w.setNode(N,T),N}function r(w){var k=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(T){k.setNode(T,w.node(T))}),e.forEach(w.edges(),function(T){var E=k.edge(T.v,T.w)||{weight:0,minlen:1},N=w.edge(T);k.setEdge(T.v,T.w,{weight:E.weight+N.weight,minlen:Math.max(E.minlen,N.minlen)})}),k}function i(w){var k=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(T){w.children(T).length||k.setNode(T,w.node(T))}),e.forEach(w.edges(),function(T){k.setEdge(T,w.edge(T))}),k}function s(w){var k=e.map(w.nodes(),function(T){var E={};return e.forEach(w.outEdges(T),function(N){E[N.w]=(E[N.w]||0)+w.edge(N).weight}),E});return e.zipObject(w.nodes(),k)}function o(w){var k=e.map(w.nodes(),function(T){var E={};return e.forEach(w.inEdges(T),function(N){E[N.v]=(E[N.v]||0)+w.edge(N).weight}),E});return e.zipObject(w.nodes(),k)}function l(w,k){var T=w.x,E=w.y,N=k.x-T,A=k.y-E,_=w.width/2,j=w.height/2;if(!N&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,I;return Math.abs(A)*_>Math.abs(N)*j?(A<0&&(j=-j),R=j*N/A,I=j):(N<0&&(_=-_),R=_,I=_*A/N),{x:T+R,y:E+I}}function u(w){var k=e.map(e.range(g(w)+1),function(){return[]});return e.forEach(w.nodes(),function(T){var E=w.node(T),N=E.rank;e.isUndefined(N)||(k[N][E.order]=T)}),k}function d(w){var k=e.min(e.map(w.nodes(),function(T){return w.node(T).rank}));e.forEach(w.nodes(),function(T){var E=w.node(T);e.has(E,"rank")&&(E.rank-=k)})}function f(w){var k=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),T=[];e.forEach(w.nodes(),function(A){var _=w.node(A).rank-k;T[_]||(T[_]=[]),T[_].push(A)});var E=0,N=w.graph().nodeRankFactor;e.forEach(T,function(A,_){e.isUndefined(A)&&_%N!==0?--E:E&&e.forEach(A,function(j){w.node(j).rank+=E})})}function p(w,k,T,E){var N={width:0,height:0};return arguments.length>=4&&(N.rank=T,N.order=E),n(w,"border",N,k)}function g(w){return e.max(e.map(w.nodes(),function(k){var T=w.node(k).rank;if(!e.isUndefined(T))return T}))}function b(w,k){var T={lhs:[],rhs:[]};return e.forEach(w,function(E){k(E)?T.lhs.push(E):T.rhs.push(E)}),T}function v(w,k){var T=e.now();try{return k()}finally{console.log(w+" time: "+(e.now()-T)+"ms")}}function S(w,k){return k()}return IS}var BS,M5;function $fe(){if(M5)return BS;M5=1;var e=Ut(),t=Tr();BS={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,f=s.node(d).rank,p=o.name,g=s.edge(o),b=g.labelRank;if(f!==u+1){s.removeEdge(o);var v,S,w;for(w=0,++u;u<f;++w,++u)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},v=t.addDummyNode(s,"edge",S,"_d"),u===b&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,v,{weight:g.weight},p),w===0&&s.graph().dummyChains.push(v),l=v;s.setEdge(l,d,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return BS}var zS,_5;function Rm(){if(_5)return zS;_5=1;var e=Ut();zS={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return zS}var qS,D5;function FV(){if(D5)return qS;D5=1;var e=Ut(),t=Oi().Graph,n=Rm().slack;qS=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],f=l.nodeCount();u.setNode(d,{});for(var p,g;i(u,l)<f;)p=s(u,l),g=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,g);return u}function i(l,u){function d(f){e.forEach(u.nodeEdges(f),function(p){var g=p.v,b=f===g?p.w:g;!l.hasNode(b)&&!n(u,p)&&(l.setNode(b,{}),l.setEdge(f,b,{}),d(b))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(f){u.node(f).rank+=d})}return qS}var VS,R5;function Gfe(){if(R5)return VS;R5=1;var e=Ut(),t=FV(),n=Rm().slack,r=Rm().longestPath,i=Oi().alg.preorder,s=Oi().alg.postorder,o=Tr().simplify;VS=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=f,l.leaveEdge=b,l.enterEdge=v,l.exchangeEdges=S;function l(E){E=o(E),r(E);var N=t(E);p(N),u(N,E);for(var A,_;A=b(N);)_=v(N,E,A),S(N,E,A,_)}function u(E,N){var A=s(E,E.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(_){d(E,N,_)})}function d(E,N,A){var _=E.node(A),j=_.parent;E.edge(A,j).cutvalue=f(E,N,A)}function f(E,N,A){var _=E.node(A),j=_.parent,R=!0,I=N.edge(A,j),B=0;return I||(R=!1,I=N.edge(j,A)),B=I.weight,e.forEach(N.nodeEdges(A),function(U){var q=U.v===A,F=q?U.w:U.v;if(F!==j){var L=q===R,H=N.edge(U).weight;if(B+=L?H:-H,k(E,A,F)){var O=E.edge(A,F).cutvalue;B+=L?-O:O}}}),B}function p(E,N){arguments.length<2&&(N=E.nodes()[0]),g(E,{},1,N)}function g(E,N,A,_,j){var R=A,I=E.node(_);return N[_]=!0,e.forEach(E.neighbors(_),function(B){e.has(N,B)||(A=g(E,N,A,B,_))}),I.low=R,I.lim=A++,j?I.parent=j:delete I.parent,A}function b(E){return e.find(E.edges(),function(N){return E.edge(N).cutvalue<0})}function v(E,N,A){var _=A.v,j=A.w;N.hasEdge(_,j)||(_=A.w,j=A.v);var R=E.node(_),I=E.node(j),B=R,U=!1;R.lim>I.lim&&(B=I,U=!0);var q=e.filter(N.edges(),function(F){return U===T(E,E.node(F.v),B)&&U!==T(E,E.node(F.w),B)});return e.minBy(q,function(F){return n(N,F)})}function S(E,N,A,_){var j=A.v,R=A.w;E.removeEdge(j,R),E.setEdge(_.v,_.w,{}),p(E),u(E,N),w(E,N)}function w(E,N){var A=e.find(E.nodes(),function(j){return!N.node(j).parent}),_=i(E,A);_=_.slice(1),e.forEach(_,function(j){var R=E.node(j).parent,I=N.edge(j,R),B=!1;I||(I=N.edge(R,j),B=!0),N.node(j).rank=N.node(R).rank+(B?I.minlen:-I.minlen)})}function k(E,N,A){return E.hasEdge(N,A)}function T(E,N,A){return A.low<=N.lim&&N.lim<=A.lim}return VS}var HS,j5;function Wfe(){if(j5)return HS;j5=1;var e=Rm(),t=e.longestPath,n=FV(),r=Gfe();HS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return HS}var FS,O5;function Kfe(){if(O5)return FS;O5=1;var e=Ut();FS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),f=d.path,p=d.lca,g=0,b=f[g],v=!0;o!==u.w;){if(l=i.node(o),v){for(;(b=f[g])!==p&&i.node(b).maxRank<l.rank;)g++;b===p&&(v=!1)}if(!v){for(;g<f.length-1&&i.node(b=f[g+1]).minRank<=l.rank;)g++;b=f[g]}i.setParent(o,b),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],f=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,b;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>f||p>s[g].lim));for(b=g,g=l;(g=i.parent(g))!==b;)d.push(g);return{path:u.concat(d.reverse()),lca:b}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return FS}var US,L5;function Yfe(){if(L5)return US;L5=1;var e=Ut(),t=Tr();US={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),f=e.max(e.values(d))-1,p=2*f+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(b){l.edge(b).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(b){r(l,u,p,g,f,d,b)}),l.graph().nodeRankFactor=p}function r(l,u,d,f,p,g,b){var v=l.children(b);if(!v.length){b!==u&&l.setEdge(u,b,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),k=l.node(b);l.setParent(S,b),k.borderTop=S,l.setParent(w,b),k.borderBottom=w,e.forEach(v,function(T){r(l,u,d,f,p,g,T);var E=l.node(T),N=E.borderTop?E.borderTop:T,A=E.borderBottom?E.borderBottom:T,_=E.borderTop?f:2*f,j=N!==A?1:p-g[b]+1;l.setEdge(S,N,{weight:_,minlen:j,nestingEdge:!0}),l.setEdge(A,w,{weight:_,minlen:j,nestingEdge:!0})}),l.parent(b)||l.setEdge(u,S,{weight:0,minlen:p+g[b]})}function i(l){var u={};function d(f,p){var g=l.children(f);g&&g.length&&e.forEach(g,function(b){d(b,p+1)}),u[f]=p}return e.forEach(l.children(),function(f){d(f,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var f=l.edge(d);f.nestingEdge&&l.removeEdge(d)})}return US}var $S,P5;function Xfe(){if(P5)return $S;P5=1;var e=Ut(),t=Tr();$S=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,f=u.maxRank+1;d<f;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var f={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],g=t.addDummyNode(i,"border",f,o);u[s][d]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return $S}var GS,I5;function Zfe(){if(I5)return GS;I5=1;var e=Ut();GS={adjust:t,undo:n};function t(d){var f=d.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&r(d)}function n(d){var f=d.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(d),(f==="lr"||f==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(f){i(d.node(f))}),e.forEach(d.edges(),function(f){i(d.edge(f))})}function i(d){var f=d.width;d.width=d.height,d.height=f}function s(d){e.forEach(d.nodes(),function(f){o(d.node(f))}),e.forEach(d.edges(),function(f){var p=d.edge(f);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(f){u(d.node(f))}),e.forEach(d.edges(),function(f){var p=d.edge(f);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var f=d.x;d.x=d.y,d.y=f}return GS}var WS,B5;function Qfe(){if(B5)return WS;B5=1;var e=Ut();WS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var f=n.node(d);o[f.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return WS}var KS,z5;function Jfe(){if(z5)return KS;z5=1;var e=Ut();KS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,b){return b})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(b){return{pos:o[b.w],weight:r.edge(b).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var f=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var b=g.pos+u;f[b]+=g.weight;for(var v=0;b>0;)b%2&&(v+=f[b+1]),b=b-1>>1,f[b]+=g.weight;p+=g.weight*v})),p}return KS}var YS,q5;function ehe(){if(q5)return YS;q5=1;var e=Ut();YS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),f=n.node(u.v);return{sum:l.sum+d.weight*f.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return YS}var XS,V5;function the(){if(V5)return XS;V5=1;var e=Ut();XS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],f=o[u.w];!e.isUndefined(d)&&!e.isUndefined(f)&&(f.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(f){f.merged||(e.isUndefined(f.barycenter)||e.isUndefined(d.barycenter)||f.barycenter>=d.barycenter)&&r(d,f)}}function l(d){return function(f){f.in.push(d),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return XS}var ZS,H5;function nhe(){if(H5)return ZS;H5=1;var e=Ut(),t=Tr();ZS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),f=[],p=0,g=0,b=0;u.sort(i(!!o)),b=r(f,d,b),e.forEach(u,function(S){b+=S.vs.length,f.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,b=r(f,d,b)});var v={vs:e.flatten(f,!0)};return g&&(v.barycenter=p/g,v.weight=g),v}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return ZS}var QS,F5;function rhe(){if(F5)return QS;F5=1;var e=Ut(),t=ehe(),n=the(),r=nhe();QS=i;function i(l,u,d,f){var p=l.children(u),g=l.node(u),b=g?g.borderLeft:void 0,v=g?g.borderRight:void 0,S={};b&&(p=e.filter(p,function(A){return A!==b&&A!==v}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,f);S[A.v]=_,e.has(_,"barycenter")&&o(A,_)}});var k=n(w,d);s(k,S);var T=r(k,f);if(b&&(T.vs=e.flatten([b,T.vs,v],!0),l.predecessors(b).length)){var E=l.node(l.predecessors(b)[0]),N=l.node(l.predecessors(v)[0]);e.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+E.order+N.order)/(T.weight+2),T.weight+=2}return T}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return QS}var JS,U5;function ihe(){if(U5)return JS;U5=1;var e=Ut(),t=Oi().Graph;JS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var f=i.node(d),p=i.parent(d);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(g){var b=g.v===d?g.w:g.v,v=u.edge(b,d),S=e.isUndefined(v)?0:v.weight;u.setEdge(b,d,{weight:i.edge(g).weight+S})}),e.has(f,"minRank")&&u.setNode(d,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return JS}var eC,$5;function she(){if($5)return eC;$5=1;var e=Ut();eC=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,f;u;){if(d=n.parent(u),d?(f=s[d],s[d]=u):(f=o,o=u),f&&f!==u){r.setEdge(f,u);return}u=d}})}return eC}var tC,G5;function ohe(){if(G5)return tC;G5=1;var e=Ut(),t=Qfe(),n=Jfe(),r=rhe(),i=ihe(),s=she(),o=Oi().Graph,l=Tr();tC=u;function u(g){var b=l.maxRank(g),v=d(g,e.range(1,b+1),"inEdges"),S=d(g,e.range(b-1,-1,-1),"outEdges"),w=t(g);p(g,w);for(var k=Number.POSITIVE_INFINITY,T,E=0,N=0;N<4;++E,++N){f(E%2?v:S,E%4>=2),w=l.buildLayerMatrix(g);var A=n(g,w);A<k&&(N=0,T=e.cloneDeep(w),k=A)}p(g,T)}function d(g,b,v){return e.map(b,function(S){return i(g,S,v)})}function f(g,b){var v=new o;e.forEach(g,function(S){var w=S.graph().root,k=r(S,w,v,b);e.forEach(k.vs,function(T,E){S.node(T).order=E}),s(S,v,k.vs)})}function p(g,b){e.forEach(b,function(v){e.forEach(v,function(S,w){g.node(S).order=w})})}return tC}var nC,W5;function ahe(){if(W5)return nC;W5=1;var e=Ut(),t=Oi().Graph,n=Tr();nC={positionX:v,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:b};function r(k,T){var E={};function N(A,_){var j=0,R=0,I=A.length,B=e.last(_);return e.forEach(_,function(U,q){var F=s(k,U),L=F?k.node(F).order:I;(F||U===B)&&(e.forEach(_.slice(R,q+1),function(H){e.forEach(k.predecessors(H),function(O){var V=k.node(O),Y=V.order;(Y<j||L<Y)&&!(V.dummy&&k.node(H).dummy)&&o(E,O,H)})}),R=q+1,j=L)}),_}return e.reduce(T,N),E}function i(k,T){var E={};function N(_,j,R,I,B){var U;e.forEach(e.range(j,R),function(q){U=_[q],k.node(U).dummy&&e.forEach(k.predecessors(U),function(F){var L=k.node(F);L.dummy&&(L.order<I||L.order>B)&&o(E,F,U)})})}function A(_,j){var R=-1,I,B=0;return e.forEach(j,function(U,q){if(k.node(U).dummy==="border"){var F=k.predecessors(U);F.length&&(I=k.node(F[0]).order,N(j,B,q,R,I),B=q,R=I)}N(j,B,j.length,I,_.length)}),j}return e.reduce(T,A),E}function s(k,T){if(k.node(T).dummy)return e.find(k.predecessors(T),function(E){return k.node(E).dummy})}function o(k,T,E){if(T>E){var N=T;T=E,E=N}var A=k[T];A||(k[T]=A={}),A[E]=!0}function l(k,T,E){if(T>E){var N=T;T=E,E=N}return e.has(k[T],E)}function u(k,T,E,N){var A={},_={},j={};return e.forEach(T,function(R){e.forEach(R,function(I,B){A[I]=I,_[I]=I,j[I]=B})}),e.forEach(T,function(R){var I=-1;e.forEach(R,function(B){var U=N(B);if(U.length){U=e.sortBy(U,function(O){return j[O]});for(var q=(U.length-1)/2,F=Math.floor(q),L=Math.ceil(q);F<=L;++F){var H=U[F];_[B]===B&&I<j[H]&&!l(E,B,H)&&(_[H]=B,_[B]=A[B]=A[H],I=j[H])}}})}),{root:A,align:_}}function d(k,T,E,N,A){var _={},j=f(k,T,E,A),R=A?"borderLeft":"borderRight";function I(q,F){for(var L=j.nodes(),H=L.pop(),O={};H;)O[H]?q(H):(O[H]=!0,L.push(H),L=L.concat(F(H))),H=L.pop()}function B(q){_[q]=j.inEdges(q).reduce(function(F,L){return Math.max(F,_[L.v]+j.edge(L))},0)}function U(q){var F=j.outEdges(q).reduce(function(H,O){return Math.min(H,_[O.w]-j.edge(O))},Number.POSITIVE_INFINITY),L=k.node(q);F!==Number.POSITIVE_INFINITY&&L.borderType!==R&&(_[q]=Math.max(_[q],F))}return I(B,j.predecessors.bind(j)),I(U,j.successors.bind(j)),e.forEach(N,function(q){_[q]=_[E[q]]}),_}function f(k,T,E,N){var A=new t,_=k.graph(),j=S(_.nodesep,_.edgesep,N);return e.forEach(T,function(R){var I;e.forEach(R,function(B){var U=E[B];if(A.setNode(U),I){var q=E[I],F=A.edge(q,U);A.setEdge(q,U,Math.max(j(k,B,I),F||0))}I=B})}),A}function p(k,T){return e.minBy(e.values(T),function(E){var N=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(E,function(_,j){var R=w(k,j)/2;N=Math.max(_+R,N),A=Math.min(_-R,A)}),N-A})}function g(k,T){var E=e.values(T),N=e.min(E),A=e.max(E);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(j){var R=_+j,I=k[R],B;if(I!==T){var U=e.values(I);B=j==="l"?N-e.min(U):A-e.max(U),B&&(k[R]=e.mapValues(I,function(q){return q+B}))}})})}function b(k,T){return e.mapValues(k.ul,function(E,N){if(T)return k[T.toLowerCase()][N];var A=e.sortBy(e.map(k,N));return(A[1]+A[2])/2})}function v(k){var T=n.buildLayerMatrix(k),E=e.merge(r(k,T),i(k,T)),N={},A;e.forEach(["u","d"],function(j){A=j==="u"?T:e.values(T).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(A=e.map(A,function(q){return e.values(q).reverse()}));var I=(j==="u"?k.predecessors:k.successors).bind(k),B=u(k,A,E,I),U=d(k,A,B.root,B.align,R==="r");R==="r"&&(U=e.mapValues(U,function(q){return-q})),N[j+R]=U})});var _=p(k,N);return g(N,_),b(N,k.graph().align)}function S(k,T,E){return function(N,A,_){var j=N.node(A),R=N.node(_),I=0,B;if(I+=j.width/2,e.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":B=-j.width/2;break;case"r":B=j.width/2;break}if(B&&(I+=E?B:-B),B=0,I+=(j.dummy?T:k)/2,I+=(R.dummy?T:k)/2,I+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":B=R.width/2;break;case"r":B=-R.width/2;break}return B&&(I+=E?B:-B),B=0,I}}function w(k,T){return k.node(T).width}return nC}var rC,K5;function lhe(){if(K5)return rC;K5=1;var e=Ut(),t=Tr(),n=ahe().positionX;rC=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var f=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+f/2}),u+=f+l})}return rC}var iC,Y5;function che(){if(Y5)return iC;Y5=1;var e=Ut(),t=Ufe(),n=$fe(),r=Wfe(),i=Tr().normalizeRanks,s=Kfe(),o=Tr().removeEmptyRanks,l=Yfe(),u=Xfe(),d=Zfe(),f=ohe(),p=lhe(),g=Tr(),b=Oi().Graph;iC=v;function v($,Q){var ee=Q&&Q.debugTiming?g.time:g.notime;ee("layout",function(){var de=ee("  buildLayoutGraph",function(){return I($)});ee("  runLayout",function(){S(de,ee)}),ee("  updateInputGraph",function(){w($,de)})})}function S($,Q){Q("    makeSpaceForEdgeLabels",function(){B($)}),Q("    removeSelfEdges",function(){te($)}),Q("    acyclic",function(){t.run($)}),Q("    nestingGraph.run",function(){l.run($)}),Q("    rank",function(){r(g.asNonCompoundGraph($))}),Q("    injectEdgeLabelProxies",function(){U($)}),Q("    removeEmptyRanks",function(){o($)}),Q("    nestingGraph.cleanup",function(){l.cleanup($)}),Q("    normalizeRanks",function(){i($)}),Q("    assignRankMinMax",function(){q($)}),Q("    removeEdgeLabelProxies",function(){F($)}),Q("    normalize.run",function(){n.run($)}),Q("    parentDummyChains",function(){s($)}),Q("    addBorderSegments",function(){u($)}),Q("    order",function(){f($)}),Q("    insertSelfEdges",function(){z($)}),Q("    adjustCoordinateSystem",function(){d.adjust($)}),Q("    position",function(){p($)}),Q("    positionSelfEdges",function(){W($)}),Q("    removeBorderNodes",function(){Y($)}),Q("    normalize.undo",function(){n.undo($)}),Q("    fixupEdgeLabelCoords",function(){O($)}),Q("    undoCoordinateSystem",function(){d.undo($)}),Q("    translateGraph",function(){L($)}),Q("    assignNodeIntersects",function(){H($)}),Q("    reversePoints",function(){V($)}),Q("    acyclic.undo",function(){t.undo($)})}function w($,Q){e.forEach($.nodes(),function(ee){var de=$.node(ee),le=Q.node(ee);de&&(de.x=le.x,de.y=le.y,Q.children(ee).length&&(de.width=le.width,de.height=le.height))}),e.forEach($.edges(),function(ee){var de=$.edge(ee),le=Q.edge(ee);de.points=le.points,e.has(le,"x")&&(de.x=le.x,de.y=le.y)}),$.graph().width=Q.graph().width,$.graph().height=Q.graph().height}var k=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],N=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function I($){var Q=new b({multigraph:!0,compound:!0}),ee=ae($.graph());return Q.setGraph(e.merge({},T,oe(ee,k),e.pick(ee,E))),e.forEach($.nodes(),function(de){var le=ae($.node(de));Q.setNode(de,e.defaults(oe(le,N),A)),Q.setParent(de,$.parent(de))}),e.forEach($.edges(),function(de){var le=ae($.edge(de));Q.setEdge(de,e.merge({},j,oe(le,_),e.pick(le,R)))}),Q}function B($){var Q=$.graph();Q.ranksep/=2,e.forEach($.edges(),function(ee){var de=$.edge(ee);de.minlen*=2,de.labelpos.toLowerCase()!=="c"&&(Q.rankdir==="TB"||Q.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})}function U($){e.forEach($.edges(),function(Q){var ee=$.edge(Q);if(ee.width&&ee.height){var de=$.node(Q.v),le=$.node(Q.w),xe={rank:(le.rank-de.rank)/2+de.rank,e:Q};g.addDummyNode($,"edge-proxy",xe,"_ep")}})}function q($){var Q=0;e.forEach($.nodes(),function(ee){var de=$.node(ee);de.borderTop&&(de.minRank=$.node(de.borderTop).rank,de.maxRank=$.node(de.borderBottom).rank,Q=e.max(Q,de.maxRank))}),$.graph().maxRank=Q}function F($){e.forEach($.nodes(),function(Q){var ee=$.node(Q);ee.dummy==="edge-proxy"&&($.edge(ee.e).labelRank=ee.rank,$.removeNode(Q))})}function L($){var Q=Number.POSITIVE_INFINITY,ee=0,de=Number.POSITIVE_INFINITY,le=0,xe=$.graph(),_e=xe.marginx||0,ze=xe.marginy||0;function Pe(Te){var ke=Te.x,Ee=Te.y,pt=Te.width,Le=Te.height;Q=Math.min(Q,ke-pt/2),ee=Math.max(ee,ke+pt/2),de=Math.min(de,Ee-Le/2),le=Math.max(le,Ee+Le/2)}e.forEach($.nodes(),function(Te){Pe($.node(Te))}),e.forEach($.edges(),function(Te){var ke=$.edge(Te);e.has(ke,"x")&&Pe(ke)}),Q-=_e,de-=ze,e.forEach($.nodes(),function(Te){var ke=$.node(Te);ke.x-=Q,ke.y-=de}),e.forEach($.edges(),function(Te){var ke=$.edge(Te);e.forEach(ke.points,function(Ee){Ee.x-=Q,Ee.y-=de}),e.has(ke,"x")&&(ke.x-=Q),e.has(ke,"y")&&(ke.y-=de)}),xe.width=ee-Q+_e,xe.height=le-de+ze}function H($){e.forEach($.edges(),function(Q){var ee=$.edge(Q),de=$.node(Q.v),le=$.node(Q.w),xe,_e;ee.points?(xe=ee.points[0],_e=ee.points[ee.points.length-1]):(ee.points=[],xe=le,_e=de),ee.points.unshift(g.intersectRect(de,xe)),ee.points.push(g.intersectRect(le,_e))})}function O($){e.forEach($.edges(),function(Q){var ee=$.edge(Q);if(e.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function V($){e.forEach($.edges(),function(Q){var ee=$.edge(Q);ee.reversed&&ee.points.reverse()})}function Y($){e.forEach($.nodes(),function(Q){if($.children(Q).length){var ee=$.node(Q),de=$.node(ee.borderTop),le=$.node(ee.borderBottom),xe=$.node(e.last(ee.borderLeft)),_e=$.node(e.last(ee.borderRight));ee.width=Math.abs(_e.x-xe.x),ee.height=Math.abs(le.y-de.y),ee.x=xe.x+ee.width/2,ee.y=de.y+ee.height/2}}),e.forEach($.nodes(),function(Q){$.node(Q).dummy==="border"&&$.removeNode(Q)})}function te($){e.forEach($.edges(),function(Q){if(Q.v===Q.w){var ee=$.node(Q.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:Q,label:$.edge(Q)}),$.removeEdge(Q)}})}function z($){var Q=g.buildLayerMatrix($);e.forEach(Q,function(ee){var de=0;e.forEach(ee,function(le,xe){var _e=$.node(le);_e.order=xe+de,e.forEach(_e.selfEdges,function(ze){g.addDummyNode($,"selfedge",{width:ze.label.width,height:ze.label.height,rank:_e.rank,order:xe+ ++de,e:ze.e,label:ze.label},"_se")}),delete _e.selfEdges})})}function W($){e.forEach($.nodes(),function(Q){var ee=$.node(Q);if(ee.dummy==="selfedge"){var de=$.node(ee.e.v),le=de.x+de.width/2,xe=de.y,_e=ee.x-le,ze=de.height/2;$.setEdge(ee.e,ee.label),$.removeNode(Q),ee.label.points=[{x:le+2*_e/3,y:xe-ze},{x:le+5*_e/6,y:xe-ze},{x:le+_e,y:xe},{x:le+5*_e/6,y:xe+ze},{x:le+2*_e/3,y:xe+ze}],ee.label.x=ee.x,ee.label.y=ee.y}})}function oe($,Q){return e.mapValues(e.pick($,Q),Number)}function ae($){var Q={};return e.forEach($,function(ee,de){Q[de.toLowerCase()]=ee}),Q}return iC}var sC,X5;function uhe(){if(X5)return sC;X5=1;var e=Ut(),t=Tr(),n=Oi().Graph;sC={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(f,p){return o.setEdge(f,p,{style:"invis"}),p})}),o}return sC}var oC,Z5;function dhe(){return Z5||(Z5=1,oC="0.8.5"),oC}var aC,Q5;function fhe(){return Q5||(Q5=1,aC={graphlib:Oi(),layout:che(),debug:uhe(),util:{time:Tr().time,notime:Tr().notime},version:dhe()}),aC}var hhe=fhe();const np=Kd(hhe),Xi=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]},{id:"entity",group:"ER Diagram",icon:"",label:"Entity",description:"Database table/entity with attributes",nodeType:"tableNode",tags:["entity","table","database","erd","relation","schema","model"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., User, Order, Product",default:"Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this entity represents",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Regular",options:["Regular","Junction","Audit","Archive","View","Materialized View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0,isNullable:!1},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"weak-entity",group:"ER Diagram",icon:"",label:"Weak Entity",description:"Entity dependent on another entity for identification",nodeType:"tableNode",tags:["weak entity","dependent","erd","relationship","partial key"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., OrderItem, Dependent, Comment",default:"Weak Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this weak entity",default:""},{key:"ownerEntity",label:"Owner Entity",type:"text",placeholder:"Parent entity that this depends on",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Weak Entity",options:["Weak Entity","Junction","Dependent"]}],data:{attributes:[{id:"attr-1",name:"owner_id",type:"UUID",isForeignKey:!0,isNullable:!1},{id:"attr-2",name:"sequence_number",type:"INT",isPrimaryKey:!0,isNullable:!1},{id:"attr-3",name:"data",type:"VARCHAR(255)",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"double",borderWidth:4}},{id:"er-trigger",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Trigger",description:"Database trigger for automated actions on events",tags:["trigger","automation","event","database","erd"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-trigger"},{key:"componentName",label:"Trigger Name",type:"text",placeholder:"e.g., update_timestamp, log_changes, validate_data",default:"update_timestamp"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this trigger does",default:"Automatically updates the updated_at timestamp when a row is modified"},{key:"targetTable",label:"Target Table",type:"text",placeholder:"Table this trigger is attached to",default:"users"},{key:"timing",label:"Timing",type:"select",default:"BEFORE",options:["BEFORE","AFTER","INSTEAD OF"]},{key:"event",label:"Event",type:"select",default:"UPDATE",options:["INSERT","UPDATE","DELETE","TRUNCATE"]},{key:"level",label:"Level",type:"select",default:"ROW",options:["ROW","STATEMENT"]},{key:"condition",label:"Condition (WHEN)",type:"textarea",placeholder:"Optional condition: e.g., NEW.status != OLD.status",default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:100}},{id:"er-note",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Note/Constraint",description:"Business rule, constraint, or annotation",tags:["note","constraint","rule","annotation","comment","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"e.g., Business Rule, Constraint, Assumption",default:"Business Rule"},{key:"description",label:"Note Content",type:"textarea",placeholder:`Describe the rule, constraint, or important note
e.g., Email must be unique across all users
Orders can only be placed by verified customers`,default:"Email addresses must be unique across all user accounts"},{key:"type",label:"Type",type:"select",default:"Business Rule",options:["Business Rule","Database Constraint","Assumption","Clarification","TODO","Warning","Best Practice"]},{key:"severity",label:"Severity",type:"select",default:"Info",options:["Critical","High","Medium","Low","Info"]},{key:"relatedEntity",label:"Related To",type:"text",placeholder:"Entity or relationship this applies to",default:""},{key:"sqlConstraint",label:"SQL Constraint",type:"textarea",placeholder:`SQL code for this constraint
e.g., CHECK (price > 0)
CHECK (start_date < end_date)`,default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:120,borderStyle:"dashed"}},{id:"er-use-case",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Use Case",description:"Use case or functional requirement for the system",tags:["use case","requirement","functionality","scenario","note","annotation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., User Registration, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case or requirement",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"relatedEntities",label:"Related Entities",type:"text",placeholder:"Entities involved (comma-separated)",default:""}]},{id:"er-view",group:"ER Diagram",nodeType:"tableNode",icon:"",label:"View",description:"Database view or materialized view",tags:["view","query","virtual table","materialized","aggregation"],properties:[{key:"componentName",label:"View Name",type:"text",placeholder:"e.g., active_users_view, order_summary_view",default:"View"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this view provides",default:""},{key:"viewType",label:"View Type",type:"select",default:"Standard View",options:["Standard View","Materialized View","Indexed View","Updateable View"]},{key:"baseTables",label:"Base Tables",type:"text",placeholder:"Tables this view depends on (comma-separated)",default:""},{key:"tableType",label:"Table Type",type:"select",default:"View",options:["View","Materialized View","Indexed View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"computed_field",type:"VARCHAR(100)",isNullable:!0},{id:"attr-3",name:"aggregate_value",type:"INT",isNullable:!0}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:1}},{id:"uml-class",group:"UML",icon:"",label:"Class",description:"UML Class with attributes and methods",nodeType:"tableNode",tags:["uml","class","object-oriented","oop","class diagram","blueprint"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., User, Product, Order",default:"Class"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this class represents",default:""},{key:"stereotype",label:"Stereotype",type:"select",default:"None",options:["None","<<abstract>>","<<interface>>","<<entity>>","<<controller>>","<<service>>","<<repository>>"]},{key:"visibility",label:"Default Visibility",type:"select",default:"public",options:["public","private","protected","package"]}],data:{attributes:[{id:"attr-1",name:"- id",type:"String",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"+ name",type:"String",isNullable:!1},{id:"attr-3",name:"# createdAt",type:"Date",isNullable:!1},{id:"attr-4",name:"+ getName()",type:"String",isNullable:!1},{id:"attr-5",name:"+ setName(name: String)",type:"void",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-interface",group:"UML",icon:"",label:"Interface",description:"UML Interface definition",nodeType:"tableNode",tags:["uml","interface","contract","abstraction","oop"],properties:[{key:"componentName",label:"Interface Name",type:"text",placeholder:"e.g., IRepository, IService, Serializable",default:"Interface"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this interface defines",default:""}],data:{attributes:[{id:"attr-1",name:"+ save()",type:"void",isNullable:!1},{id:"attr-2",name:"+ delete()",type:"void",isNullable:!1},{id:"attr-3",name:"+ findById(id: String)",type:"Object",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Method",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm italic"}},{key:"type",label:"Return Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:2}},{id:"uml-abstract-class",group:"UML",icon:"",label:"Abstract Class",description:"Abstract class with abstract methods",nodeType:"tableNode",tags:["uml","abstract","base class","inheritance","oop"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., BaseRepository, AbstractService",default:"AbstractClass"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this abstract class",default:""}],data:{attributes:[{id:"attr-1",name:"# data",type:"Object",isNullable:!1},{id:"attr-2",name:"+ process()",type:"void",isNullable:!1},{id:"attr-3",name:"+ validate()",type:"boolean",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"solid",borderWidth:2}},{id:"uml-enum",group:"UML",icon:"",label:"Enum",description:"Enumeration type",nodeType:"tableNode",tags:["uml","enum","enumeration","constants","type"],properties:[{key:"componentName",label:"Enum Name",type:"text",placeholder:"e.g., Status, Color, Role",default:"Enum"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this enumeration",default:""}],data:{attributes:[{id:"attr-1",name:"ACTIVE",type:"",isNullable:!1},{id:"attr-2",name:"INACTIVE",type:"",isNullable:!1},{id:"attr-3",name:"PENDING",type:"",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Value",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm uppercase"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-use-case",group:"UML",nodeType:"erNode",icon:"",label:"Use Case",description:"System use case or functionality",tags:["uml","use case","functionality","requirement","scenario","er diagram","note"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., Login, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"complexity",label:"Complexity",type:"select",default:"Medium",options:["Simple","Medium","Complex"]}]},{id:"uml-note",group:"UML",nodeType:"erNode",icon:"",label:"Note/Comment",description:"Annotation or comment",tags:["uml","note","comment","annotation","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"Optional title",default:"Note"},{key:"description",label:"Content",type:"textarea",placeholder:"Add your note or comment here",default:""}]}];function UV(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function $V(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function GV(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function phe(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function mhe({components:e,onAdd:t}){const[n,r]=Ce.useState(!0),[i,s]=Ce.useState(new Set),[o,l]=Ce.useState(null),[u,d]=Ce.useState(""),f=Ce.useMemo(()=>new Xa(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Ce.useMemo(()=>{const v=u.trim();if(!v)return Array.from(e);const w=f.search(v).map(E=>E.item),k=e.find(E=>E.id==="custom-component"),T=w.some(E=>E.id==="custom-component");return k&&!T&&w.push(k),w},[e,f,u]),g=Ce.useMemo(()=>{const v=new Map;for(const S of p){const w=S.group??"Other";v.has(w)||v.set(w,[]),v.get(w).push(S)}return Array.from(v.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);Ce.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([v])=>v)))},[g,i.size]);const b=v=>{s(S=>{const w=new Set(S);return w.has(v)?w.delete(v):w.add(v),w})};return m.jsxs("div",{className:"relative z-40",children:[m.jsx("button",{type:"button",onClick:()=>r(v=>!v),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?m.jsx($V,{size:16}):m.jsx(GV,{size:16})}),m.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?m.jsxs(m.Fragment,{children:[m.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),m.jsx("div",{className:"mr-3 mb-3",children:m.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),m.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?m.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([v,S])=>{const w=i.has(v);return m.jsxs("div",{children:[m.jsxs("button",{type:"button",onClick:()=>b(v),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${v}`,children:[m.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:v}),m.jsx(UV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&m.jsx("div",{id:`group-${v}`,className:"mt-1 mb-3 px-1",children:m.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(k=>m.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${k.label} to canvas`,onMouseEnter:T=>{const E=T.currentTarget.getBoundingClientRect();l({label:k.label,description:k.description||"",rect:E})},onMouseLeave:()=>l(null),onDragStart:T=>{l(null),T.dataTransfer?.setData("application/reactflow",JSON.stringify({type:k.id})),T.dataTransfer?.setData("text/plain",k.id),T.dataTransfer&&(T.dataTransfer.effectAllowed="move")},onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),t(k.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[m.jsx("div",{className:"text-center mb-1",children:m.jsx("span",{className:"text-2xl",children:k.icon})}),m.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:k.label})]},k.id))})})]},v)}),m.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[m.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),m.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):m.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:m.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&Xd.createPortal(m.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[m.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),m.jsx("div",{className:"text-muted",children:o.description}),m.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const ghe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:f,onMouseMove:p,children:g})=>m.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:m.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:m.jsxs(Ale,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:f,onMouseMove:p,connectionMode:$a.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[m.jsx(tce,{nodeStrokeWidth:3}),m.jsx(Hle,{}),m.jsx(Lle,{gap:16}),g]})})}),yhe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:f,isNodeInGroup:p})=>{const[g,b]=Ce.useState(320),v=260,S=640,w=Ce.useRef(!1),k=Ce.useRef(null),[T,E]=Ce.useState(!1),[N,A]=Ce.useState(!0),_=Ce.useCallback(q=>{if(!w.current)return;const F=Math.min(Math.max(window.innerWidth-q.clientX,v),S);b(F)},[]),j=Ce.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),R=q=>{q.preventDefault(),w.current=!0,document.body.style.userSelect="none"};Ce.useEffect(()=>(globalThis.addEventListener("mousemove",_),globalThis.addEventListener("mouseup",j),()=>{globalThis.removeEventListener("mousemove",_),globalThis.removeEventListener("mouseup",j)}),[_,j]),Ce.useEffect(()=>{k.current&&(k.current.style.width=g+"px")},[g]);const I=e?.id==="free";if(Ce.useEffect(()=>{I&&!r&&A(!1)},[I,r]),Ce.useEffect(()=>{I&&r&&(n("inspector"),A(!0))},[I,r,n]),!e)return null;const B=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const q=document.createElement("textarea");q.value=JSON.stringify(d,null,2),q.style.position="fixed",q.style.opacity="0",document.body.appendChild(q),q.select();try{document.execCommand("copy")}catch{}q.remove()}},U=()=>{if(!d)return;const q=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),F=URL.createObjectURL(q),L=document.createElement("a");L.href=F,L.download=`assessment-${Date.now()}.json`,document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(F)};return m.jsxs("div",{className:"relative z-40",children:[m.jsx("button",{type:"button",onClick:()=>A(q=>!q),"aria-label":N?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:N?m.jsx(GV,{size:16}):m.jsx($V,{size:16})}),m.jsx("aside",{ref:k,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${N?"p-4":"w-6 p-1"}`,"data-width":g,style:{width:N?`${g}px`:"24px"},children:N&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onMouseDown:R,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[m.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),m.jsx(phe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),m.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!I&&m.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[m.jsx("span",{className:"text-sm",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),!I&&m.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="assessment"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("assessment"),children:[m.jsx("span",{className:"text-sm",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Assessment"}),d&&m.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-semibold rounded-full bg-[var(--brand)] text-white",children:d.score})]}),m.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[m.jsx("span",{className:"text-sm",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),m.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),m.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),m.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),m.jsx("ul",{className:"space-y-1",children:e.requirements.map(q=>m.jsxs("li",{className:"flex items-start space-x-2",children:[m.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),m.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),m.jsx("ul",{className:"space-y-1",children:e.constraints.map(q=>m.jsxs("li",{className:"flex items-start space-x-2",children:[m.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),m.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("button",{type:"button",onClick:()=>E(!T),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[m.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),m.jsx(UV,{size:14,className:`text-muted transition-transform duration-150 ${T?"rotate-0":"-rotate-90"}`})]}),T&&m.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(q=>m.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:m.jsx("div",{className:"text-xs text-white",children:q})},q))})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(q=>m.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:q},q))})]})]}),t==="inspector"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&m.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),m.jsx("div",{className:"space-y-2",children:s})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),m.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[m.jsx(BC,{size:14}),m.jsx("span",{children:"Add"})]})]}),m.jsx("div",{className:"space-y-2",children:o})]}),m.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&f&&m.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:f,title:"Remove this node from its parent group",children:[m.jsx("span",{children:""}),m.jsx("span",{children:"Detach from Group"})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),m.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]}),t==="assessment"&&m.jsx("div",{children:d?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("div",{className:"text-lg font-semibold text-theme",children:"Assessment Score"}),m.jsxs("div",{className:"text-2xl font-bold text-[var(--brand)]",children:[d.score,"%"]})]}),m.jsx("div",{className:"text-sm text-muted",children:d.isValid?" Pass":" Needs Improvement"})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-green-500",children:""}),m.jsx("span",{children:"What Went Right"})]}),d.architectureStrengths.length>0?m.jsx("ul",{className:"space-y-2",children:d.architectureStrengths.map(q=>m.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[m.jsx("span",{className:"text-green-500 mt-0.5",children:""}),m.jsx("span",{className:"text-theme",children:q})]},q))}):m.jsx("div",{className:"text-sm text-muted",children:"No notable strengths detected."})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-orange-500",children:"!"}),m.jsx("span",{children:"What to Improve"})]}),d.improvements.length>0?m.jsx("ul",{className:"space-y-2",children:d.improvements.map(q=>m.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[m.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),m.jsx("span",{className:"text-theme",children:q})]},q))}):m.jsx("div",{className:"text-sm text-muted",children:"No specific improvements suggested."})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsx("div",{className:"font-semibold text-theme mb-3",children:"Detailed Feedback"}),m.jsx("div",{className:"space-y-3",children:d.feedback.map(q=>m.jsxs("div",{className:"border-l-2 border-[var(--brand)] pl-3 py-1",children:[m.jsx("div",{className:"font-medium text-xs text-[var(--brand)] uppercase mb-1",children:q.category}),m.jsx("div",{className:"text-sm text-theme",children:q.message})]},`${q.category}-${q.message}`))})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",onClick:B,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Copy JSON"}),m.jsx("button",{type:"button",onClick:U,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Download"})]})]}):m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("div",{className:"text-lg font-semibold text-theme mb-2",children:"No Assessment Yet"}),m.jsx("div",{className:"text-sm text-muted",children:"Run an assessment to see your design evaluation and feedback."})]})})]})]})})]})},bhe=({isLoading:e,collaborators:t,onUpdatePermission:n,onRemove:r})=>e?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"inline-block w-4 h-4 border border-accent/30 border-t-accent rounded-full animate-spin"}),m.jsx("p",{className:"text-sm text-muted mt-2",children:"Loading collaborators..."})]}):t.length===0?m.jsxs("div",{className:"text-center py-4 text-muted",children:[m.jsx("p",{className:"text-sm",children:"No collaborators yet"}),m.jsx("p",{className:"text-xs mt-1",children:"Share this diagram to start collaborating"})]}):m.jsx("div",{className:"space-y-2",children:t.map(i=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme/5 rounded-md",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:m.jsx("span",{className:"text-sm font-medium text-accent",children:i.email[0].toUpperCase()})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:i.email}),m.jsxs("p",{className:"text-xs text-muted capitalize",children:[i.permission," access"]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("select",{value:i.permission,onChange:s=>n(i.id,s.target.value),className:"text-xs px-2 py-1 border border-theme/20 rounded bg-theme text-theme",children:[m.jsx("option",{value:"read",children:"Read"}),m.jsx("option",{value:"edit",children:"Edit"})]}),m.jsx("button",{type:"button",onClick:()=>r(i.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove collaborator",children:m.jsx(fc,{className:"h-4 w-4"})})]})]},i.id))});async function xhe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),vhe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function vhe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}function $2(e){return at({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(e)}const WV=Ce.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=Ce.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=Ce.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),u=Ce.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),d=Ce.useCallback(b=>{b.stopPropagation(),n?.(e,t)},[e,t,n]),f=Ce.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),p=Ce.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s({visible:!0,x:b.clientX,y:b.clientY})},[]),g=Ce.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return Ce.useEffect(()=>{if(i.visible){const b=v=>{const S=document.querySelector("[data-context-menu]");S&&!S.contains(v.target)&&g()};return document.addEventListener("click",b),document.addEventListener("contextmenu",b),()=>{document.removeEventListener("click",b),document.removeEventListener("contextmenu",b)}}},[i.visible,g]),m.jsxs(m.Fragment,{children:[m.jsxs(ht.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",onContextMenu:p,children:[m.jsx("legend",{className:"sr-only",children:o}),m.jsx(vn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[m.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),m.jsxs("div",{className:"min-w-0 w-full text-center",children:[m.jsx("div",{className:"truncate font-medium text-sm",children:o}),t.subtitle&&m.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]}),i.visible&&Xd.createPortal(m.jsxs(ht.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),u(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(Vm,{className:"w-4 h-4"}),"Settings"]}),r&&m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),f(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[m.jsx(Hk,{className:"w-4 h-4"}),"Detach from Group"]}),m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),d(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx($2,{className:"w-4 h-4"}),"Duplicate"]}),m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),l(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[m.jsx(dc,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});WV.displayName="Node";/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:KV,setPrototypeOf:J5,isFrozen:whe,getPrototypeOf:She,getOwnPropertyDescriptor:Che}=Object;let{freeze:mr,seal:yi,create:Ik}=Object,{apply:Bk,construct:zk}=typeof Reflect<"u"&&Reflect;mr||(mr=function(t){return t});yi||(yi=function(t){return t});Bk||(Bk=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return t.apply(n,i)});zk||(zk=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new t(...r)});const rp=gr(Array.prototype.forEach),khe=gr(Array.prototype.lastIndexOf),eP=gr(Array.prototype.pop),Bu=gr(Array.prototype.push),Ehe=gr(Array.prototype.splice),vp=gr(String.prototype.toLowerCase),lC=gr(String.prototype.toString),cC=gr(String.prototype.match),zu=gr(String.prototype.replace),Nhe=gr(String.prototype.indexOf),The=gr(String.prototype.trim),Ai=gr(Object.prototype.hasOwnProperty),cr=gr(RegExp.prototype.test),qu=Ahe(TypeError);function gr(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Bk(e,t,r)}}function Ahe(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return zk(e,n)}}function st(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vp;J5&&J5(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const s=n(i);s!==i&&(whe(t)||(t[r]=s),i=s)}e[i]=!0}return e}function Mhe(e){for(let t=0;t<e.length;t++)Ai(e,t)||(e[t]=null);return e}function Ds(e){const t=Ik(null);for(const[n,r]of KV(e))Ai(e,n)&&(Array.isArray(r)?t[n]=Mhe(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Ds(r):t[n]=r);return t}function Vu(e,t){for(;e!==null;){const r=Che(e,t);if(r){if(r.get)return gr(r.get);if(typeof r.value=="function")return gr(r.value)}e=She(e)}function n(){return null}return n}const tP=mr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),uC=mr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),dC=mr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_he=mr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fC=mr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Dhe=mr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nP=mr(["#text"]),rP=mr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hC=mr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),iP=mr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ip=mr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Rhe=yi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jhe=yi(/<%[\w\W]*|[\w\W]*%>/gm),Ohe=yi(/\$\{[\w\W]*/gm),Lhe=yi(/^data-[\-\w.\u00B7-\uFFFF]+$/),Phe=yi(/^aria-[\-\w]+$/),YV=yi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ihe=yi(/^(?:\w+script|data):/i),Bhe=yi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),XV=yi(/^html$/i),zhe=yi(/^[a-z][.\w]*(-[.\w]+)+$/i);var sP=Object.freeze({__proto__:null,ARIA_ATTR:Phe,ATTR_WHITESPACE:Bhe,CUSTOM_ELEMENT:zhe,DATA_ATTR:Lhe,DOCTYPE_NAME:XV,ERB_EXPR:jhe,IS_ALLOWED_URI:YV,IS_SCRIPT_OR_DATA:Ihe,MUSTACHE_EXPR:Rhe,TMPLIT_EXPR:Ohe});const Hu={element:1,text:3,progressingInstruction:7,comment:8,document:9},qhe=function(){return typeof window>"u"?null:window},Vhe=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},oP=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ZV(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qhe();const t=De=>ZV(De);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==Hu.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:d,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:b}=e,v=u.prototype,S=Vu(v,"cloneNode"),w=Vu(v,"remove"),k=Vu(v,"nextSibling"),T=Vu(v,"childNodes"),E=Vu(v,"parentNode");if(typeof o=="function"){const De=n.createElement("template");De.content&&De.content.ownerDocument&&(n=De.content.ownerDocument)}let N,A="";const{implementation:_,createNodeIterator:j,createDocumentFragment:R,getElementsByTagName:I}=n,{importNode:B}=r;let U=oP();t.isSupported=typeof KV=="function"&&typeof E=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:F,TMPLIT_EXPR:L,DATA_ATTR:H,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:Y,CUSTOM_ELEMENT:te}=sP;let{IS_ALLOWED_URI:z}=sP,W=null;const oe=st({},[...tP,...uC,...dC,...fC,...nP]);let ae=null;const $=st({},[...rP,...hC,...iP,...ip]);let Q=Object.seal(Ik(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,de=null;const le=Object.seal(Ik(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let xe=!0,_e=!0,ze=!1,Pe=!0,Te=!1,ke=!0,Ee=!1,pt=!1,Le=!1,gt=!1,bt=!1,$t=!1,un=!0,zt=!1;const Nt="user-content-";let En=!0,dn=!1,Ot={},dt=null;const Tt=st({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let At=null;const sr=st({},["audio","video","img","source","image","track"]);let Ar=null;const vi=st({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",Oe="http://www.w3.org/2000/svg",Ue="http://www.w3.org/1999/xhtml";let or=Ue,lt=!1,fn=null;const $s=st({},[Qt,Oe,Ue],lC);let wi=st({},["mi","mo","mn","ms","mtext"]),Mr=st({},["annotation-xml"]);const _r=st({},["title","style","font","a","script"]);let ar=null;const yr=["application/xhtml+xml","text/html"],Dr="text/html";let xt=null,Bn=null;const Gs=n.createElement("form"),Si=function(Z){return Z instanceof RegExp||Z instanceof Function},Kn=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Bn&&Bn===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=Ds(Z),ar=yr.indexOf(Z.PARSER_MEDIA_TYPE)===-1?Dr:Z.PARSER_MEDIA_TYPE,xt=ar==="application/xhtml+xml"?lC:vp,W=Ai(Z,"ALLOWED_TAGS")?st({},Z.ALLOWED_TAGS,xt):oe,ae=Ai(Z,"ALLOWED_ATTR")?st({},Z.ALLOWED_ATTR,xt):$,fn=Ai(Z,"ALLOWED_NAMESPACES")?st({},Z.ALLOWED_NAMESPACES,lC):$s,Ar=Ai(Z,"ADD_URI_SAFE_ATTR")?st(Ds(vi),Z.ADD_URI_SAFE_ATTR,xt):vi,At=Ai(Z,"ADD_DATA_URI_TAGS")?st(Ds(sr),Z.ADD_DATA_URI_TAGS,xt):sr,dt=Ai(Z,"FORBID_CONTENTS")?st({},Z.FORBID_CONTENTS,xt):Tt,ee=Ai(Z,"FORBID_TAGS")?st({},Z.FORBID_TAGS,xt):Ds({}),de=Ai(Z,"FORBID_ATTR")?st({},Z.FORBID_ATTR,xt):Ds({}),Ot=Ai(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,xe=Z.ALLOW_ARIA_ATTR!==!1,_e=Z.ALLOW_DATA_ATTR!==!1,ze=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Te=Z.SAFE_FOR_TEMPLATES||!1,ke=Z.SAFE_FOR_XML!==!1,Ee=Z.WHOLE_DOCUMENT||!1,gt=Z.RETURN_DOM||!1,bt=Z.RETURN_DOM_FRAGMENT||!1,$t=Z.RETURN_TRUSTED_TYPE||!1,Le=Z.FORCE_BODY||!1,un=Z.SANITIZE_DOM!==!1,zt=Z.SANITIZE_NAMED_PROPS||!1,En=Z.KEEP_CONTENT!==!1,dn=Z.IN_PLACE||!1,z=Z.ALLOWED_URI_REGEXP||YV,or=Z.NAMESPACE||Ue,wi=Z.MATHML_TEXT_INTEGRATION_POINTS||wi,Mr=Z.HTML_INTEGRATION_POINTS||Mr,Q=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Si(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Si(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Te&&(_e=!1),bt&&(gt=!0),Ot&&(W=st({},nP),ae=[],Ot.html===!0&&(st(W,tP),st(ae,rP)),Ot.svg===!0&&(st(W,uC),st(ae,hC),st(ae,ip)),Ot.svgFilters===!0&&(st(W,dC),st(ae,hC),st(ae,ip)),Ot.mathMl===!0&&(st(W,fC),st(ae,iP),st(ae,ip))),Z.ADD_TAGS&&(typeof Z.ADD_TAGS=="function"?le.tagCheck=Z.ADD_TAGS:(W===oe&&(W=Ds(W)),st(W,Z.ADD_TAGS,xt))),Z.ADD_ATTR&&(typeof Z.ADD_ATTR=="function"?le.attributeCheck=Z.ADD_ATTR:(ae===$&&(ae=Ds(ae)),st(ae,Z.ADD_ATTR,xt))),Z.ADD_URI_SAFE_ATTR&&st(Ar,Z.ADD_URI_SAFE_ATTR,xt),Z.FORBID_CONTENTS&&(dt===Tt&&(dt=Ds(dt)),st(dt,Z.FORBID_CONTENTS,xt)),En&&(W["#text"]=!0),Ee&&st(W,["html","head","body"]),W.table&&(st(W,["tbody"]),delete ee.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw qu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Z.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else N===void 0&&(N=Vhe(b,i)),N!==null&&typeof A=="string"&&(A=N.createHTML(""));mr&&mr(Z),Bn=Z}},Gt=st({},[...uC,...dC,..._he]),Lt=st({},[...fC,...Dhe]),br=function(Z){let ge=E(Z);(!ge||!ge.tagName)&&(ge={namespaceURI:or,tagName:"template"});const Me=vp(Z.tagName),ct=vp(ge.tagName);return fn[Z.namespaceURI]?Z.namespaceURI===Oe?ge.namespaceURI===Ue?Me==="svg":ge.namespaceURI===Qt?Me==="svg"&&(ct==="annotation-xml"||wi[ct]):!!Gt[Me]:Z.namespaceURI===Qt?ge.namespaceURI===Ue?Me==="math":ge.namespaceURI===Oe?Me==="math"&&Mr[ct]:!!Lt[Me]:Z.namespaceURI===Ue?ge.namespaceURI===Oe&&!Mr[ct]||ge.namespaceURI===Qt&&!wi[ct]?!1:!Lt[Me]&&(_r[Me]||!Gt[Me]):!!(ar==="application/xhtml+xml"&&fn[Z.namespaceURI]):!1},Nn=function(Z){Bu(t.removed,{element:Z});try{E(Z).removeChild(Z)}catch{w(Z)}},Rr=function(Z,ge){try{Bu(t.removed,{attribute:ge.getAttributeNode(Z),from:ge})}catch{Bu(t.removed,{attribute:null,from:ge})}if(ge.removeAttribute(Z),Z==="is")if(gt||bt)try{Nn(ge)}catch{}else try{ge.setAttribute(Z,"")}catch{}},Ii=function(Z){let ge=null,Me=null;if(Le)Z="<remove></remove>"+Z;else{const Mt=cC(Z,/^[\r\n\t ]+/);Me=Mt&&Mt[0]}ar==="application/xhtml+xml"&&or===Ue&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const ct=N?N.createHTML(Z):Z;if(or===Ue)try{ge=new g().parseFromString(ct,ar)}catch{}if(!ge||!ge.documentElement){ge=_.createDocument(or,"template",null);try{ge.documentElement.innerHTML=lt?A:ct}catch{}}const Pt=ge.body||ge.documentElement;return Z&&Me&&Pt.insertBefore(n.createTextNode(Me),Pt.childNodes[0]||null),or===Ue?I.call(ge,Ee?"html":"body")[0]:Ee?ge.documentElement:Pt},fs=function(Z){return j.call(Z.ownerDocument||Z,Z,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},jr=function(Z){return Z instanceof p&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof f)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Bi=function(Z){return typeof l=="function"&&Z instanceof l};function hn(De,Z,ge){rp(De,Me=>{Me.call(t,Z,ge,Bn)})}const He=function(Z){let ge=null;if(hn(U.beforeSanitizeElements,Z,null),jr(Z))return Nn(Z),!0;const Me=xt(Z.nodeName);if(hn(U.uponSanitizeElement,Z,{tagName:Me,allowedTags:W}),ke&&Z.hasChildNodes()&&!Bi(Z.firstElementChild)&&cr(/<[/\w!]/g,Z.innerHTML)&&cr(/<[/\w!]/g,Z.textContent)||Z.nodeType===Hu.progressingInstruction||ke&&Z.nodeType===Hu.comment&&cr(/<[/\w]/g,Z.data))return Nn(Z),!0;if(!(le.tagCheck instanceof Function&&le.tagCheck(Me))&&(!W[Me]||ee[Me])){if(!ee[Me]&&Xn(Me)&&(Q.tagNameCheck instanceof RegExp&&cr(Q.tagNameCheck,Me)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Me)))return!1;if(En&&!dt[Me]){const ct=E(Z)||Z.parentNode,Pt=T(Z)||Z.childNodes;if(Pt&&ct){const Mt=Pt.length;for(let qt=Mt-1;qt>=0;--qt){const _n=S(Pt[qt],!0);_n.__removalCount=(Z.__removalCount||0)+1,ct.insertBefore(_n,k(Z))}}}return Nn(Z),!0}return Z instanceof u&&!br(Z)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&cr(/<\/no(script|embed|frames)/i,Z.innerHTML)?(Nn(Z),!0):(Te&&Z.nodeType===Hu.text&&(ge=Z.textContent,rp([q,F,L],ct=>{ge=zu(ge,ct," ")}),Z.textContent!==ge&&(Bu(t.removed,{element:Z.cloneNode()}),Z.textContent=ge)),hn(U.afterSanitizeElements,Z,null),!1)},Yn=function(Z,ge,Me){if(un&&(ge==="id"||ge==="name")&&(Me in n||Me in Gs))return!1;if(!(_e&&!de[ge]&&cr(H,ge))){if(!(xe&&cr(O,ge))){if(!(le.attributeCheck instanceof Function&&le.attributeCheck(ge,Z))){if(!ae[ge]||de[ge]){if(!(Xn(Z)&&(Q.tagNameCheck instanceof RegExp&&cr(Q.tagNameCheck,Z)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Z))&&(Q.attributeNameCheck instanceof RegExp&&cr(Q.attributeNameCheck,ge)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(ge,Z))||ge==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&cr(Q.tagNameCheck,Me)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Me))))return!1}else if(!Ar[ge]){if(!cr(z,zu(Me,Y,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&Z!=="script"&&Nhe(Me,"data:")===0&&At[Z])){if(!(ze&&!cr(V,zu(Me,Y,"")))){if(Me)return!1}}}}}}}return!0},Xn=function(Z){return Z!=="annotation-xml"&&cC(Z,te)},Rt=function(Z){hn(U.beforeSanitizeAttributes,Z,null);const{attributes:ge}=Z;if(!ge||jr(Z))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae,forceKeepAttr:void 0};let ct=ge.length;for(;ct--;){const Pt=ge[ct],{name:Mt,namespaceURI:qt,value:_n}=Pt,pn=xt(Mt),Xr=_n;let It=Mt==="value"?Xr:The(Xr);if(Me.attrName=pn,Me.attrValue=It,Me.keepAttr=!0,Me.forceKeepAttr=void 0,hn(U.uponSanitizeAttribute,Z,Me),It=Me.attrValue,zt&&(pn==="id"||pn==="name")&&(Rr(Mt,Z),It=Nt+It),ke&&cr(/((--!?|])>)|<\/(style|title|textarea)/i,It)){Rr(Mt,Z);continue}if(pn==="attributename"&&cC(It,"href")){Rr(Mt,Z);continue}if(Me.forceKeepAttr)continue;if(!Me.keepAttr){Rr(Mt,Z);continue}if(!Pe&&cr(/\/>/i,It)){Rr(Mt,Z);continue}Te&&rp([q,F,L],qi=>{It=zu(It,qi," ")});const zn=xt(Z.nodeName);if(!Yn(zn,pn,It)){Rr(Mt,Z);continue}if(N&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!qt)switch(b.getAttributeType(zn,pn)){case"TrustedHTML":{It=N.createHTML(It);break}case"TrustedScriptURL":{It=N.createScriptURL(It);break}}if(It!==Xr)try{qt?Z.setAttributeNS(qt,Mt,It):Z.setAttribute(Mt,It),jr(Z)?Nn(Z):eP(t.removed)}catch{Rr(Mt,Z)}}hn(U.afterSanitizeAttributes,Z,null)},zi=function De(Z){let ge=null;const Me=fs(Z);for(hn(U.beforeSanitizeShadowDOM,Z,null);ge=Me.nextNode();)hn(U.uponSanitizeShadowNode,ge,null),He(ge),Rt(ge),ge.content instanceof s&&De(ge.content);hn(U.afterSanitizeShadowDOM,Z,null)};return t.sanitize=function(De){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,Me=null,ct=null,Pt=null;if(lt=!De,lt&&(De="<!-->"),typeof De!="string"&&!Bi(De))if(typeof De.toString=="function"){if(De=De.toString(),typeof De!="string")throw qu("dirty is not a string, aborting")}else throw qu("toString is not a function");if(!t.isSupported)return De;if(pt||Kn(Z),t.removed=[],typeof De=="string"&&(dn=!1),dn){if(De.nodeName){const _n=xt(De.nodeName);if(!W[_n]||ee[_n])throw qu("root node is forbidden and cannot be sanitized in-place")}}else if(De instanceof l)ge=Ii("<!---->"),Me=ge.ownerDocument.importNode(De,!0),Me.nodeType===Hu.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?ge=Me:ge.appendChild(Me);else{if(!gt&&!Te&&!Ee&&De.indexOf("<")===-1)return N&&$t?N.createHTML(De):De;if(ge=Ii(De),!ge)return gt?null:$t?A:""}ge&&Le&&Nn(ge.firstChild);const Mt=fs(dn?De:ge);for(;ct=Mt.nextNode();)He(ct),Rt(ct),ct.content instanceof s&&zi(ct.content);if(dn)return De;if(gt){if(bt)for(Pt=R.call(ge.ownerDocument);ge.firstChild;)Pt.appendChild(ge.firstChild);else Pt=ge;return(ae.shadowroot||ae.shadowrootmode)&&(Pt=B.call(r,Pt,!0)),Pt}let qt=Ee?ge.outerHTML:ge.innerHTML;return Ee&&W["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&cr(XV,ge.ownerDocument.doctype.name)&&(qt="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+qt),Te&&rp([q,F,L],_n=>{qt=zu(qt,_n," ")}),N&&$t?N.createHTML(qt):qt},t.setConfig=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kn(De),pt=!0},t.clearConfig=function(){Bn=null,pt=!1},t.isValidAttribute=function(De,Z,ge){Bn||Kn({});const Me=xt(De),ct=xt(Z);return Yn(Me,ct,ge)},t.addHook=function(De,Z){typeof Z=="function"&&Bu(U[De],Z)},t.removeHook=function(De,Z){if(Z!==void 0){const ge=khe(U[De],Z);return ge===-1?void 0:Ehe(U[De],ge,1)[0]}return eP(U[De])},t.removeHooks=function(De){U[De]=[]},t.removeAllHooks=function(){U=oP()},t}var pC=ZV();const QV=Ce.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=Ce.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=t.nodeType||"entity",u=Ce.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),d=Ce.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),f=Ce.useCallback(N=>{N.stopPropagation(),n?.(e,t)},[e,t,n]),p=Ce.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),g=Ce.useCallback(N=>{N.preventDefault(),N.stopPropagation(),s({visible:!0,x:N.clientX,y:N.clientY})},[]),b=Ce.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);Ce.useEffect(()=>{if(i.visible){const N=A=>{const _=document.querySelector("[data-context-menu]");_&&!_.contains(A.target)&&b()};return document.addEventListener("click",N),document.addEventListener("contextmenu",N),()=>{document.removeEventListener("click",N),document.removeEventListener("contextmenu",N)}}},[i.visible,b]);const v=t.attributes?t.attributes.split(`
`).filter(N=>N.trim()):[],w=(()=>{switch(l){case"weak-entity":return{border:"3px double var(--theme-color, #333)",borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"};case"er-note":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};case"er-trigger":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--accent-bg, #fef3e7)",borderLeft:"4px solid var(--accent, #f59e0b)"};case"er-view":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px",borderStyle:"dashed",borderWidth:"2px"};case"uml-use-case":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--brand, #6366f1)"};case"uml-note":return{borderRadius:"0.25rem",minWidth:"160px",maxWidth:"450px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};default:return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"}}})(),k=l==="er-note"||l==="uml-note"||l==="uml-use-case",T=l==="er-trigger",E=["uml-use-case","uml-note"].includes(l);return m.jsxs(m.Fragment,{children:[m.jsxs(ht.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:`bg-surface border-2 border-theme text-sm shadow-sm cursor-grab relative overflow-y-auto er-node-scroll ${k?"bg-yellow-50 dark:bg-yellow-900/20 text-gray-900 dark:text-gray-100":""} ${T?"bg-orange-50 dark:bg-orange-900/20 text-gray-900 dark:text-gray-100":"text-theme"}`,style:w,onContextMenu:g,children:[m.jsx(vn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),!k&&!T&&m.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold text-center flex items-center justify-center gap-2",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{children:o})]}),k&&m.jsxs("div",{className:"px-3 py-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),t.description&&m.jsx("div",{className:"text-xs text-gray-700 mt-1",dangerouslySetInnerHTML:{__html:pC.sanitize(t.description)}})]}),T&&m.jsxs("div",{className:"px-3 py-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),m.jsxs("div",{className:"text-xs space-y-1 mt-2",children:[t.timing&&t.event&&m.jsxs("div",{className:"font-mono text-[11px] text-orange-700",children:[t.timing," ",t.event]}),t.targetTable&&m.jsxs("div",{className:"text-gray-700",children:["ON ",m.jsx("span",{className:"font-semibold text-gray-700",children:t.targetTable})]}),t.level&&m.jsxs("div",{className:"text-gray-600 text-[10px]",children:["FOR EACH ",t.level]}),t.description&&m.jsx("div",{className:"text-gray-700 mt-1 pt-1 border-t border-gray-300",dangerouslySetInnerHTML:{__html:pC.sanitize(t.description)}})]})]}),E&&!k&&m.jsx("div",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.icon&&m.jsx("span",{className:"text-3xl",children:t.icon}),m.jsx("span",{className:"font-semibold text-theme text-center",children:o}),t.description&&m.jsx("div",{className:"text-xs text-muted mt-1 text-center",dangerouslySetInnerHTML:{__html:pC.sanitize(t.description)}})]})}),(l==="entity"||l==="weak-entity")&&v.length>0&&m.jsx("div",{className:"px-3 py-2 border-t border-theme/20",children:m.jsx("div",{className:"space-y-1 text-xs",children:v.map((N,A)=>{const _=t.primaryKey&&N.includes(t.primaryKey),j=t.foreignKeys&&t.foreignKeys.split(`
`).some(R=>N.includes(R));return m.jsx("div",{className:`font-mono ${_?"font-bold text-yellow-600 dark:text-yellow-400":j?"text-blue-600 dark:text-blue-400":""}`,children:N.trim().startsWith("+")?m.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[" ",N.trim().substring(1).trim()]}):N.trim()},A)})})})]}),i.visible&&Xd.createPortal(m.jsxs(ht.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),d(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(Vm,{className:"w-4 h-4"}),"Settings"]}),r&&m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),p(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[m.jsx(Hk,{className:"w-4 h-4"}),"Detach from Group"]}),m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),f(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx($2,{className:"w-4 h-4"}),"Duplicate"]}),m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),u(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[m.jsx(dc,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});QV.displayName="ERNode";const JV=Ce.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=M.useState({visible:!1,x:0,y:0}),[o,l]=M.useState(null),[u,d]=M.useState({name:"",type:""}),f=t.componentName||t.label,p=Ce.useMemo(()=>{if(!t.attributes)return[];if(Array.isArray(t.attributes))return t.attributes;if(typeof t.attributes=="string")try{const B=JSON.parse(t.attributes);return Array.isArray(B)?B:[]}catch{return[]}return[]},[t.attributes]),g=Ce.useMemo(()=>t.renderConfig?.columns&&t.renderConfig.columns.length>0?t.renderConfig.columns:[{key:"pk",label:"PK",width:"w-6"},{key:"name",label:"Column Name",width:"flex-1"},{key:"type",label:"Data Type",width:"w-24"},{key:"actions",label:"",width:"w-8"}],[t.renderConfig]),b=M.useCallback(B=>{B.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),v=M.useCallback(B=>{B.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),S=M.useCallback(B=>{B.stopPropagation(),n?.(e,t)},[e,t,n]),w=M.useCallback(B=>{B.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),k=M.useCallback(B=>{B.preventDefault(),B.stopPropagation(),s({visible:!0,x:B.clientX,y:B.clientY})},[]),T=M.useCallback(()=>{s({visible:!1,x:0,y:0})},[]),E=M.useCallback(B=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-delete",{detail:{nodeId:e,attributeId:B}}))},[e]),N=M.useCallback(B=>{B.stopPropagation();const q=t.componentId?.startsWith("uml-")?{id:`attr-${Date.now()}`,name:"+ newMethod()",type:"void",isNullable:!1}:{id:`attr-${Date.now()}`,name:"newColumn",type:"VARCHAR(255)",isNullable:!0};globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-add",{detail:{nodeId:e,attribute:q}}))},[e,t.componentId]),A=M.useCallback((B,U)=>{U.stopPropagation(),l(B.id),d({name:B.name,type:B.type})},[]),_=M.useCallback(()=>{o&&(globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-update",{detail:{nodeId:e,attributeId:o,name:u.name,type:u.type}})),l(null))},[e,o,u]),j=M.useCallback(()=>{l(null)},[]),R=M.useCallback((B,U)=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-toggle",{detail:{nodeId:e,attributeId:B,key:U}}))},[e]),I=M.useCallback((B,U,q)=>{const F=B.width||"flex-1",L=U[B.key];if(B.type==="boolean"){const H=!!L,V=B.key==="isNullable"?!H:H,Y=V?B.icon?.active:B.icon?.inactive,te=V?B.color?.active:B.color?.inactive;return m.jsx("button",{type:"button",onClick:()=>R(U.id,B.key),className:`${F} flex items-center justify-center ${te||""}`,title:B.label,children:Y?m.jsx("span",{className:"text-xs",children:Y}):m.jsx("div",{className:"w-3 h-3 border border-theme/40 rounded"})},B.key)}if(B.type==="text"&&B.editable){if(q)return m.jsx("input",{type:"text",value:String(u[B.key]||L||""),onChange:O=>d({...u,[B.key]:O.target.value}),onKeyDown:O=>{O.key==="Enter"&&_(),O.key==="Escape"&&j()},className:`${F} px-1 py-0.5 bg-surface border border-theme/40 rounded text-xs`,autoFocus:B.key==="name",onClick:O=>O.stopPropagation()},B.key);let H="text-xs cursor-pointer";return B.key==="name"?U.isPrimaryKey?H+=" font-semibold text-yellow-600 dark:text-yellow-400":U.isForeignKey&&(H+=" text-blue-600 dark:text-blue-400"):B.key==="type"&&(H+=" text-muted"),m.jsx("span",{className:`${F} truncate ${H}`,onDoubleClick:O=>A(U,O),title:"Double-click to edit",role:"button",tabIndex:0,children:String(L||"")},B.key)}return B.type==="readonly"&&B.key==="actions"?q?m.jsx("button",{type:"button",onClick:_,className:`${F} text-green-600 hover:text-green-700 text-xs`,title:"Save",children:""},"actions"):m.jsx("button",{type:"button",onClick:()=>E(U.id),className:`${F} opacity-0 group-hover:opacity-100 text-red-600 hover:text-red-700 transition-opacity`,title:"Delete attribute",children:m.jsx(dc,{className:"w-3 h-3"})},"actions"):m.jsx("span",{className:F,children:String(L||"")},B.key)},[R,E,A,_,j,u]);return Ce.useEffect(()=>{if(i.visible){const B=U=>{const q=document.querySelector("[data-context-menu]");q&&!q.contains(U.target)&&T()};return document.addEventListener("click",B),document.addEventListener("contextmenu",B),()=>{document.removeEventListener("click",B),document.removeEventListener("contextmenu",B)}}},[i.visible,T]),m.jsxs(m.Fragment,{children:[m.jsxs(ht.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[220px] max-h-[500px] bg-surface border-2 border-theme text-theme text-sm shadow-lg cursor-grab relative rounded-lg overflow-hidden flex flex-col",onContextMenu:k,children:[m.jsx(vn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold flex items-center justify-between flex-shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{children:f})]}),m.jsx("button",{type:"button",onClick:N,className:"p-1 hover:bg-white/20 rounded transition-colors",title:"Add attribute",children:m.jsx(BC,{className:"w-4 h-4"})})]}),m.jsx("div",{className:"bg-[var(--bg-hover)] px-3 py-1 border-b border-theme/20 flex items-center gap-2 text-xs font-semibold flex-shrink-0",children:g.map(B=>m.jsx("span",{className:B.width||"flex-1",style:{textAlign:B.align||"left"},children:B.label},B.key))}),m.jsx("div",{className:"divide-y divide-theme/10 overflow-y-auto flex-1 table-node-scroll",children:p.map(B=>{const U=o===B.id;return m.jsx("div",{className:"flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] group",children:g.map(q=>I(q,B,U))},B.id)})}),p.length===0&&m.jsx("div",{className:"px-3 py-4 text-center text-xs text-muted",children:"Click + to add attributes"})]}),i.visible&&Xd.createPortal(m.jsxs(ht.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),v(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(Vm,{className:"w-4 h-4"}),"Settings"]}),m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),N(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(BC,{className:"w-4 h-4"}),"Add Attribute"]}),r&&m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),w(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[m.jsx(Hk,{className:"w-4 h-4"}),"Detach from Group"]}),m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),S(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx($2,{className:"w-4 h-4"}),"Duplicate"]}),m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),b(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[m.jsx(dc,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});JV.displayName="TableNode";const Hhe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Fhe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,f=Hhe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,b=p,v=g+d/2;return{edgePath:f,centerX:b,centerY:v}}const[o]=pg(e),[l,u]=mg({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Uhe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:f,selected:p,markerEnd:g}=e,[b,v]=M.useState(!1),[S,w]=M.useState(f?.label??""),[k,T]=M.useState(f?.hasLabel??!1),E=M.useRef(null),N=ot(F=>{const L=F.edges.some(H=>H.id!==t&&H.source===r&&H.target===n);return L&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),L}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:j,centerY:R}=Fhe(A,N),I=F=>{F.stopPropagation(),v(!0),setTimeout(()=>E.current?.focus(),0)},B=F=>{F.stopPropagation(),T(!0),v(!0),setTimeout(()=>E.current?.focus(),0)},U=F=>{F.stopPropagation(),T(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},q=()=>{v(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:k||S.trim().length>0}}))};return m.jsxs("g",{className:"react-flow__edge",children:[m.jsx("defs",{children:m.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:m.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),m.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),m.jsx("foreignObject",{x:j-75,y:R-12,width:150,height:24,className:"overflow-visible",children:m.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:k?m.jsx("div",{className:"flex items-center gap-1",children:b?m.jsx("input",{ref:E,value:S,onChange:F=>w(F.target.value),onBlur:q,onKeyDown:F=>{F.key==="Enter"&&q(),F.key==="Escape"&&(v(!1),w(f?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onDoubleClick:I,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&m.jsx("button",{onClick:U,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&m.jsx("button",{onClick:B,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},$he=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Ghe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,f=$he({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,b=p,v=g+d/2;return{edgePath:f,centerX:b,centerY:v}}const[o]=pg(e),[l,u]=mg({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Whe=e=>{switch(e){case"one-to-one":case"one-to-many":case"zero-to-one":case"one-mandatory-many-optional":case"one-or-many":return"one";case"many-to-one":case"many-to-many":case"mandatory-many-to-many":case"optional-many-to-many":return"many";case"mandatory-one-to-one":case"mandatory-one-to-many":return"mandatory-one";case"optional-zero-to-one":case"optional-zero-to-many":case"zero-to-many":return"optional-zero";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"one";case"recursive-many-to-many":return"many";default:return"one"}},Khe=e=>{switch(e){case"one-to-one":case"many-to-one":case"zero-to-one":return"one";case"one-to-many":case"many-to-many":case"zero-to-many":case"one-mandatory-many-optional":case"one-or-many":return"many";case"mandatory-one-to-one":return"mandatory-one";case"mandatory-one-to-many":case"mandatory-many-to-many":return"mandatory-many";case"optional-zero-to-one":return"optional-one";case"optional-zero-to-many":case"optional-many-to-many":return"optional-many";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"many";case"recursive-many-to-many":return"many";default:return"many"}},Yhe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:f,selected:p}=e,g=f||{},[b,v]=M.useState(!1),[S,w]=M.useState(g.label??""),[k,T]=M.useState(g.hasLabel??!1),[E,N]=M.useState(g.cardinality??"one-to-many"),A=M.useRef(null),_=ot(Y=>Y.edges.some(z=>z.id!==t&&z.source===r&&z.target===n)),j={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:R,centerX:I,centerY:B}=Ghe(j,_),U=Y=>{Y.stopPropagation(),v(!0),setTimeout(()=>A.current?.focus(),0)},q=Y=>{Y.stopPropagation(),T(!0),v(!0),setTimeout(()=>A.current?.focus(),0)},F=Y=>{Y.stopPropagation(),T(!1),w(""),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},L=()=>{v(!1),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:k||S.trim().length>0}}))},H=Y=>{N(Y),globalThis.dispatchEvent(new CustomEvent("diagram:edge-cardinality-change",{detail:{id:t,cardinality:Y}}))},O=Whe(E),V=Khe(E);return m.jsxs("g",{className:"react-flow__edge",children:[m.jsxs("defs",{children:[m.jsx("marker",{id:`er-one-${t}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:m.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),m.jsxs("marker",{id:`er-many-${t}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[m.jsx("line",{x1:"0",y1:"10",x2:"15",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-mandatory-one-${t}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[m.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"3",y1:"0",x2:"3",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-mandatory-many-${t}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[m.jsx("line",{x1:"0",y1:"10",x2:"12",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"3",y1:"8",x2:"3",y2:"12",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsx("marker",{id:`er-optional-zero-${t}`,viewBox:"0 0 12 12",refX:"10",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:m.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})}),m.jsxs("marker",{id:`er-optional-one-${t}`,viewBox:"0 0 15 12",refX:"14",refY:"6",markerWidth:"12",markerHeight:"10",orient:"auto",children:[m.jsx("circle",{cx:"4",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),m.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"12",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-optional-many-${t}`,viewBox:"0 0 25 20",refX:"23",refY:"10",markerWidth:"14",markerHeight:"12",orient:"auto",children:[m.jsx("circle",{cx:"4",cy:"10",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),m.jsx("line",{x1:"10",y1:"10",x2:"18",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsx("marker",{id:`er-one-source-${t}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:m.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),m.jsxs("marker",{id:`er-many-source-${t}`,viewBox:"0 0 20 20",refX:"2",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[m.jsx("line",{x1:"20",y1:"10",x2:"5",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-mandatory-one-source-${t}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[m.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"7",y1:"0",x2:"7",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsx("marker",{id:`er-optional-zero-source-${t}`,viewBox:"0 0 12 12",refX:"2",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:m.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})})]}),m.jsx("path",{id:t,d:R,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:`url(#er-${V}-${t})`,markerStart:`url(#er-${O}-source-${t})`,className:"transition-colors"}),m.jsx("foreignObject",{x:I-100,y:B-40,width:200,height:80,className:"overflow-visible",children:m.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pointer-events-auto gap-2",children:[k?m.jsx("div",{className:"flex items-center gap-1",children:b?m.jsx("input",{ref:A,value:S,onChange:Y=>w(Y.target.value),onBlur:L,onKeyDown:Y=>{Y.key==="Enter"&&L(),Y.key==="Escape"&&(v(!1),w(g.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onDoubleClick:U,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&m.jsx("button",{onClick:F,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",type:"button",children:""})]})}):p&&m.jsx("button",{onClick:q,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",type:"button",children:"+ Label"}),p&&m.jsx("div",{className:"flex items-center gap-1 bg-[var(--surface)] border border-[var(--brand)] rounded px-2 py-1",children:m.jsxs("select",{value:E,onChange:Y=>H(Y.target.value),className:"text-xs bg-transparent text-theme focus:outline-none cursor-pointer",onClick:Y=>Y.stopPropagation(),children:[m.jsxs("optgroup",{label:" Basic Cardinality ",children:[m.jsx("option",{value:"one-to-one",children:"1:1 (One to One)"}),m.jsx("option",{value:"one-to-many",children:"1:N (One to Many)"}),m.jsx("option",{value:"many-to-one",children:"N:1 (Many to One)"}),m.jsx("option",{value:"many-to-many",children:"N:M (Many to Many)"})]}),m.jsxs("optgroup",{label:" Mandatory (Must Participate) ",children:[m.jsx("option",{value:"mandatory-one-to-one",children:"1:1 Mandatory (Both must exist)"}),m.jsx("option",{value:"mandatory-one-to-many",children:"1:N Mandatory (Both must exist)"}),m.jsx("option",{value:"mandatory-many-to-many",children:"M:N Mandatory (Both must exist)"})]}),m.jsxs("optgroup",{label:" Optional (May Participate) ",children:[m.jsx("option",{value:"optional-zero-to-one",children:"0:1 Optional (Zero or One)"}),m.jsx("option",{value:"optional-zero-to-many",children:"0:N Optional (Zero or Many)"}),m.jsx("option",{value:"optional-many-to-many",children:"0:M to 0:N Optional (Both optional)"})]}),m.jsxs("optgroup",{label:" Mixed Participation ",children:[m.jsx("option",{value:"one-mandatory-many-optional",children:"1 to 0..N (One mandatory, many optional)"}),m.jsx("option",{value:"zero-to-one",children:"0..1 (Zero or One)"}),m.jsx("option",{value:"zero-to-many",children:"0..N (Zero or Many)"}),m.jsx("option",{value:"one-or-many",children:"1..N (One or Many - at least one)"})]}),m.jsxs("optgroup",{label:" Recursive (Self-Referencing) ",children:[m.jsx("option",{value:"recursive-one-to-one",children:"Self 1:1 (Recursive One-to-One)"}),m.jsx("option",{value:"recursive-one-to-many",children:"Self 1:N (Recursive One-to-Many)"}),m.jsx("option",{value:"recursive-many-to-many",children:"Self M:N (Recursive Many-to-Many)"})]})]})})]})})]})},Xhe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Ce.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Ce.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return m.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[m.jsx(sce,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),m.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[m.jsx(ht.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:m.jsx(Vm,{className:"w-3 h-3"})}),m.jsx(ht.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:m.jsx(dc,{className:"w-3 h-3"})})]}),m.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&m.jsx("span",{children:t.icon}),m.jsx("span",{children:t.label})]}),t.subtitle&&m.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),m.jsx(vn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(vn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Zhe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=M.useState(r),o=d=>{t(e.id,{value:d})},l=(d,f)=>{t(e.id,{[d]:f})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return m.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[m.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?m.jsx(dK,{size:18}):m.jsx(s6,{size:18}),m.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),m.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:m.jsx(dc,{size:16})})]}),i&&m.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(pp,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),m.jsx(pp,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),m.jsx(Wz,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),m.jsxs("div",{className:"border-t border-theme pt-3",children:[m.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&m.jsx(pp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&m.jsx(bm,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&m.jsx(Gz,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&m.jsx("div",{className:"pt-1",children:m.jsx($z,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},Qhe=()=>{const[e,t]=M.useState([]),n=M.useCallback((u,d="info",f)=>{const g={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:f};t(b=>[...b,g])},[]),r=M.useCallback(u=>{t(d=>d.filter(f=>f.id!==u))},[]),i=M.useCallback((u,d)=>{n(u,"success",d)},[n]),s=M.useCallback((u,d)=>{n(u,"error",d)},[n]),o=M.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=M.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Jhe=({toast:e,onClose:t})=>{M.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return m.jsxs(ht.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[m.jsx("div",{className:"flex-shrink-0",children:r()}),m.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),m.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},epe=({toasts:e,onClose:t})=>m.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:m.jsx(cc,{children:e.map(n=>m.jsx("div",{className:"pointer-events-auto",children:m.jsx(Jhe,{toast:n,onClose:t})},n.id))})}),tpe=({url:e,enabled:t=!0,onMessage:n,onOpen:r,onClose:i,onError:s,reconnect:o=!0,reconnectInterval:l=1e3,maxReconnectAttempts:u=5})=>{const d=M.useRef(null),f=M.useRef(null),p=M.useRef(0),g=M.useRef(!0),b=M.useRef(null),[v,S]=M.useState(!1),[w,k]=M.useState(!1),[T,E]=M.useState(0),N=M.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null)},[]),A=M.useCallback(()=>{g.current=!1,N(),d.current&&(d.current.close(),d.current=null),S(!1),k(!1),p.current=0,E(0)},[N]),_=M.useCallback(()=>{if(!(d.current?.readyState===WebSocket.OPEN||d.current?.readyState===WebSocket.CONNECTING))try{k(!0),d.current=new WebSocket(e),d.current.onopen=()=>{console.log("WebSocket connected"),S(!0),k(!1),p.current=0,E(0),r?.()},d.current.onmessage=I=>{try{const B=JSON.parse(I.data);n?.(B)}catch(B){console.error("Failed to parse WebSocket message:",B)}},d.current.onclose=I=>{console.log("WebSocket disconnected",I.code,I.reason),S(!1),k(!1),d.current=null,i?.(),g.current&&o&&b.current&&b.current()},d.current.onerror=I=>{console.error("WebSocket error:",I),s?.(I)}}catch(I){console.error("Failed to create WebSocket connection:",I),k(!1),g.current&&o&&b.current&&b.current()}},[e,n,r,i,s,o]),j=M.useCallback(()=>{if(!o||!g.current)return;if(p.current>=u){console.error("Max reconnection attempts reached"),k(!1);return}N();const I=l*Math.pow(2,p.current),B=Math.random()*1e3,U=Math.min(I+B,3e4);console.log(`Reconnecting in ${Math.round(U/1e3)}s... (attempt ${p.current+1}/${u})`),f.current=setTimeout(()=>{p.current++,E(p.current),_()},U)},[o,l,u,N,_]);M.useEffect(()=>{b.current=j},[j]);const R=M.useCallback(I=>{if(d.current?.readyState===WebSocket.OPEN)try{d.current.send(JSON.stringify(I))}catch(B){console.error("Failed to send WebSocket message:",B)}else console.warn("WebSocket is not connected. Message not sent:",I)},[]);return M.useEffect(()=>{if(t)return g.current=!0,_(),()=>{g.current=!1,A()}},[_,A,t]),{sendMessage:R,disconnect:A,connect:_,isConnected:v,isConnecting:w,reconnectAttempts:T}},npe=e=>e.startsWith("https://")?e.replace("https://","wss://"):e.startsWith("http://")?e.replace("http://","ws://"):`ws://${e}`,rpe=npe("https://diagrammatic-api.vercel.app"),ipe=({diagramId:e,token:t,enabled:n,onDiagramUpdate:r,onUserJoined:i,onUserLeft:s,onError:o})=>{const[l,u]=M.useState([]),[d,f]=M.useState([]),p=M.useRef(null),g=M.useRef(0),b=M.useRef(null),v=`${rpe}/api/v1/diagrams/${e}/collaborate?token=${t}`,S=M.useCallback(B=>{const U=B.type?.trim();switch(U){case"welcome":{const q=B.user;p.current=q.id,console.log("Welcome message received:",q.name);break}case"user_joined":{const q=B.user;u(F=>F.some(L=>L.id===q.id)?F:[...F,q]),i?.(q);break}case"user_left":{const q=B.user;u(F=>F.filter(L=>L.id!==q.id)),f(F=>F.filter(L=>L.userId!==q.id)),s?.(q);break}case"diagram_update":{const q=B.user,F=B.data;if(q.id===p.current)return;const L=Date.now();if(L-g.current<100)return;g.current=L,r?.(F,q.id);break}case"cursor_move":case"cursor_update":{const q=B.user,F=B.position,L=B.timestamp;if(q.id===p.current)return;f(H=>{const O=H.findIndex(Y=>Y.userId===q.id),V={userId:q.id,user:q,position:F,timestamp:L};if(O>=0){const Y=[...H];return Y[O]=V,Y}return[...H,V]});break}case"pong":break;case"error":{const q=B.message||"Unknown error";console.error("WebSocket error:",q),o?.(q);break}default:console.warn("Unknown WebSocket message type:",U)}},[r,i,s,o]),w=M.useCallback(()=>{console.log("Collaboration WebSocket connected")},[]),k=M.useCallback(()=>{console.log("Collaboration WebSocket disconnected"),u([]),f([])},[]),T=M.useCallback(B=>{console.error("Collaboration WebSocket error:",B),o?.("Connection error. Retrying...")},[o]),{sendMessage:E,disconnect:N,isConnected:A,isConnecting:_,reconnectAttempts:j}=tpe({url:v,enabled:n,onMessage:S,onOpen:w,onClose:k,onError:T,reconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5}),R=M.useCallback(B=>{!n||!A||(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{E({type:"diagram_update",data:B,timestamp:new Date().toISOString()})},300))},[n,A,E]),I=M.useCallback(B=>{!n||!A||E({type:"cursor_move",position:B,timestamp:new Date().toISOString()})},[n,A,E]);return M.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),M.useEffect(()=>{if(!A||!n)return;const B=setInterval(()=>{E({type:"ping",timestamp:new Date().toISOString()})},3e4);return()=>clearInterval(B)},[A,n,E]),{sendDiagramUpdate:R,sendCursorPosition:I,collaborators:l,cursors:d,isConnected:A,isConnecting:_,reconnectAttempts:j,disconnect:N}},qk=e=>{const t=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899","#06b6d4","#6366f1"];let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return t[Math.abs(n)%t.length]},spe=({isConnected:e,isConnecting:t,reconnectAttempts:n,collaborators:r,showCollaborators:i=!0})=>{const[s,o]=Ce.useState(!1),l=t||!e,u=i&&r.length>0;if(!l&&!u)return null;const d=()=>t?n>0?`Reconnecting... (${n})`:"Connecting...":"Connection lost",f=()=>t?m.jsx(pK,{className:"h-4 w-4 animate-spin"}):m.jsx(mK,{className:"h-4 w-4"}),p=()=>t?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return m.jsxs("div",{className:"flex items-center gap-2",children:[l&&m.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[m.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg bg-surface border border-theme/10 ${p()} transition-colors`,children:[f(),m.jsx("span",{className:"text-xs font-medium",children:d()})]}),m.jsx(cc,{children:s&&m.jsx(ht.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full left-0 mt-2 p-2 bg-surface border border-theme/10 rounded-lg shadow-lg z-50 min-w-[200px]",children:m.jsxs("div",{className:"text-xs text-theme",children:[m.jsx("div",{className:"font-semibold mb-1",children:"Connection Status"}),m.jsx("div",{className:"text-muted",children:t?"Establishing connection...":"Collaboration unavailable"})]})})})]}),u&&m.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-surface border border-theme/10",children:[m.jsx(gK,{className:"h-4 w-4 text-theme"}),m.jsxs("div",{className:"flex -space-x-2",children:[r.slice(0,3).map(g=>m.jsx("div",{className:"relative group","data-tooltip":g.name,children:g.pictureUrl?m.jsx("img",{src:g.pictureUrl,alt:g.name,className:"w-6 h-6 rounded-full border-2 border-surface",style:{borderColor:qk(g.id)}}):m.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-surface flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:qk(g.id)},children:g.name.charAt(0).toUpperCase()})},g.id)),r.length>3&&m.jsxs("div",{className:"w-6 h-6 rounded-full bg-theme/10 border-2 border-surface flex items-center justify-center text-xs font-bold text-theme",children:["+",r.length-3]})]})]})]})},ope=({name:e,color:t,position:n,pictureUrl:r})=>m.jsxs(ht.div,{className:"pointer-events-none absolute z-50",style:{left:n.x,top:n.y},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:[m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:m.jsx("path",{d:"M5.5 3.21V20.79L10.29 16L14 21.5L15.5 20.5L11.79 15L18.5 14L5.5 3.21Z",fill:t,stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})}),m.jsxs("div",{className:"ml-6 -mt-2 px-2 py-1 rounded-md text-xs font-medium text-white whitespace-nowrap shadow-lg flex items-center gap-1.5",style:{backgroundColor:t},children:[r&&m.jsx("img",{src:r,alt:e,className:"w-4 h-4 rounded-full border border-white/50"}),m.jsx("span",{children:e})]})]}),ape=(e,t,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:e,edges:t};return JSON.stringify(i,null,2)},lpe=(e,t,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<e.length;l++){const u=e[l],d=`node-${l+2}`,f=u.data?.label||u.id,p=u.position?.x||0,g=u.position?.y||0,b=u.style?.width||u.width||200,v=u.style?.height||u.height||80,S=s();o+=`        <mxCell id="${d}" value="${i(String(f))}" `,o+=`style="${S}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${g}" width="${b}" height="${v}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<t.length;l++){const u=t[l],d=`edge-${l}`,f=e.findIndex(b=>b.id===u.source),p=e.findIndex(b=>b.id===u.target),g=u.label||u.data?.label||"";f!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(g))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${f+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},aP=e=>{try{const t=JSON.parse(e);if(!t.nodes||!Array.isArray(t.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!t.edges||!Array.isArray(t.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:t.nodes,edges:t.edges}}catch(t){throw new Error(t instanceof Error?`Failed to import JSON: ${t.message}`:"Failed to import JSON: Invalid format")}},lP=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const g=p.getAttribute("id")||`cell-${u}`,b=p.getAttribute("value")||`Node ${u+1}`,v=p.querySelector("mxGeometry"),S=Number.parseFloat(v?.getAttribute("x")||"0"),w=Number.parseFloat(v?.getAttribute("y")||"0"),k=Number.parseFloat(v?.getAttribute("width")||"200"),T=Number.parseFloat(v?.getAttribute("height")||"80"),E=`imported-node-${Date.now()}-${u}`;o.set(g,E);const N={label:b},A=p.querySelector("mxData");if(A){const _=A.querySelectorAll("property");for(const j of _){const R=j.getAttribute("name"),I=j.getAttribute("value");if(R&&I)try{N[R]=JSON.parse(I)}catch{N[R]=I}}}i.push({id:E,type:"custom",position:{x:S,y:w},data:N,...k&&T?{style:{width:k,height:T}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let f=0;for(const p of d){const g=p.getAttribute("source"),b=p.getAttribute("target"),v=p.getAttribute("value")||"";if(g&&b){const S=o.get(g),w=o.get(b);if(S&&w){const k={};v&&(k.label=v,k.hasLabel=!0);const T=p.querySelector("mxData");if(T){const E=T.querySelectorAll("property");for(const N of E){const A=N.getAttribute("name"),_=N.getAttribute("value");if(A&&_)try{k[A]=JSON.parse(_)}catch{k[A]=_}}}s.push({id:`imported-edge-${Date.now()}-${f}`,source:S,target:w,type:"customEdge",data:k,...v?{label:v}:{}})}}f++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(t){throw new Error(t instanceof Error?`Failed to import XML: ${t.message}`:"Failed to import XML: Invalid format")}},cP=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},cpe=async e=>e.text(),uP={isOpen:!1,showWelcome:!0,userIntent:null,canvasContext:null,messages:[],currentSuggestions:[]},eH=M.createContext(void 0),upe=({children:e})=>{const[t,n]=M.useState(uP),r=M.useCallback(()=>{n(f=>({...f,isOpen:!f.isOpen}))},[]),i=M.useCallback(f=>{n(p=>({...p,userIntent:f,showWelcome:!1}))},[]),s=M.useCallback(f=>{n(p=>({...p,canvasContext:f}))},[]),o=M.useCallback(f=>{const p={...f,id:`msg-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,timestamp:new Date};n(g=>({...g,messages:[...g.messages,p]}))},[]),l=M.useCallback(()=>{n(f=>({...f,showWelcome:!1}))},[]),u=M.useCallback(()=>{n(uP)},[]),d=M.useMemo(()=>({...t,toggleChatBot:r,setUserIntent:i,updateCanvasContext:s,addMessage:o,dismissWelcome:l,resetChatBot:u}),[t,r,i,s,o,l,u]);return m.jsx(eH.Provider,{value:d,children:e})},G2=()=>{const e=M.useContext(eH);if(!e)throw new Error("useChatBot must be used within a ChatBotProvider");return e},dpe=(e,t,n=[],r=[])=>{const[i,s]=M.useState(null);M.useEffect(()=>{if(!t){s(null);return}const l=async()=>{try{const d=n.map(b=>{const v=b.data||{},S=!!(v.description||v.subtitle||v.properties&&Object.keys(v.properties).length>0),w={description:v.description||v.subtitle||"",componentId:v.componentId,icon:v.icon};return v.properties&&typeof v.properties=="object"&&Object.assign(w,v.properties),v._customProperties&&(w.customProperties=v._customProperties),{id:b.id,type:b.type||"custom",label:typeof v.label=="string"?v.label:b.id,hasDescription:S,properties:w}}),f=r.map(b=>{const v=b.data||{};return{source:b.source,target:b.target,type:b.type||v.type,hasLabel:!!(v.label||v.hasLabel)}}),p=await Kt.getRecommendations({userIntent:e,canvasContext:t||{nodeCount:0,edgeCount:0,componentTypes:[],isEmpty:!0},components:d,connections:f,maxSuggestions:5}),g=p.recommendations.map(b=>({id:b.id,title:b.title,description:b.description,icon:b.icon,category:b.category,priority:b.priority,componentId:b.componentId,componentIds:b.componentIds,actionType:b.actionType,confidence:b.confidence,reasoning:b.reasoning,action:()=>{}}));s(g),g.length>0&&console.log(` AI Recommendations: ${g.length} suggestions (confidence >= ${p.minConfidenceThreshold})`)}catch(d){console.log(" Falling back to rule-based suggestions:",d instanceof Error?d.message:"Unknown error"),s(null)}},u=setTimeout(()=>{l()},500);return()=>clearTimeout(u)},[e,t,n,r]);const o=M.useMemo(()=>{const l=[];if(!e&&!t)return l;const u=e?`${e.title} ${e.description}`.toLowerCase():"";if((u.includes("database")||u.includes("schema")||u.includes("er "))&&(l.push({id:"er-entity",title:"Add Entity",description:"Create a database entity with attributes",action:()=>{},icon:"",category:"component",priority:10,componentId:"er-entity",actionType:"add-component"}),l.push({id:"er-relationship",title:"Add Relationship",description:"Connect entities with relationships",action:()=>{},icon:"",category:"component",priority:9,componentId:"er-relationship",actionType:"add-component"})),(u.includes("class")||u.includes("uml")||u.includes("oop")||u.includes("object-oriented"))&&(l.push({id:"uml-class",title:"Add Class",description:"Create a UML class with methods and properties",action:()=>{},icon:"",category:"component",priority:10,componentId:"uml-class",actionType:"add-component"}),l.push({id:"uml-interface",title:"Add Interface",description:"Define an interface for your design",action:()=>{},icon:"",category:"component",priority:8,componentId:"uml-interface",actionType:"add-component"})),(u.includes("system")||u.includes("architecture")||u.includes("microservice")||u.includes("api"))&&(l.push({id:"api-gateway",title:"Add API Gateway",description:"Central entry point for your services",action:()=>{},icon:"",category:"component",priority:10,componentId:"api-gateway",actionType:"add-component"}),l.push({id:"load-balancer",title:"Add Load Balancer",description:"Distribute traffic across servers",action:()=>{},icon:"",category:"component",priority:9,componentId:"loadbalancer",actionType:"add-component"}),l.push({id:"database",title:"Add Database",description:"Add a database to store your data",action:()=>{},icon:"",category:"component",priority:8,componentId:"database",actionType:"add-component"})),(u.includes("cache")||u.includes("redis")||u.includes("performance"))&&l.push({id:"cache",title:"Add Cache Layer",description:"Improve performance with caching",action:()=>{},icon:"",category:"component",priority:9,componentId:"cache",actionType:"add-component"}),(u.includes("queue")||u.includes("async")||u.includes("message")||u.includes("event"))&&l.push({id:"message-queue",title:"Add Message Queue",description:"Enable asynchronous communication",action:()=>{},icon:"",category:"component",priority:9,componentId:"queue",actionType:"add-component"}),t){const{nodeCount:d,componentTypes:f,isEmpty:p}=t;p&&l.push({id:"tip-start",title:"Start with a Component",description:"Drag a component from the palette to begin your design",action:()=>{},icon:"",category:"tip",priority:10,actionType:"info-only"}),d>1&&f.length>1&&l.push({id:"tip-connect",title:"Connect Components",description:"Click and drag from one component to another to create connections",action:()=>{},icon:"",category:"tip",priority:8,actionType:"info-only"}),d>5&&l.push({id:"group",title:"Organize with Groups",description:"Use group containers to organize related components",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"cluster",actionType:"add-component"}),f.includes("database")&&!f.includes("cache")&&l.push({id:"pattern-cache",title:"Consider Adding Cache",description:"Reduce database load with a caching layer",action:()=>{},icon:"",category:"pattern",priority:8,componentId:"cache",actionType:"add-component"}),(f.includes("api-gateway")||f.includes("server"))&&!f.includes("load-balancer")&&l.push({id:"pattern-lb",title:"Add Load Balancing",description:"Scale your API with a load balancer",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"loadbalancer",actionType:"add-component"})}return l.length===0&&(l.push({id:"tip-palette",title:"Explore Components",description:`Browse ${Xi.length}+ components in the palette`,action:()=>{},icon:"",category:"tip",priority:5,actionType:"info-only"}),l.push({id:"tip-export",title:"Export Your Design",description:"Save your work as PNG or JSON",action:()=>{},icon:"",category:"tip",priority:4,actionType:"info-only"})),l.sort((d,f)=>f.priority-d.priority).slice(0,5)},[e,t]);return i&&i.length>0?i:o},fpe=()=>{const{dismissWelcome:e}=G2();return m.jsx(ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:""}),m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Design Assistant!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"I'm here to help you with smart suggestions based on what you're building. Start adding components to your canvas, and I'll provide contextual tips!"}),m.jsx("button",{onClick:e,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md
            transition-colors font-medium`,children:"Got it!"})]})})},hpe=({suggestion:e,wasAdded:t,onClick:n})=>{const r=e.actionType==="add-component"||e.actionType==="add-pattern",i=()=>{let o=`bg-theme/50 rounded-xl p-3.5
      transition-all duration-300 border shadow-sm`;return r?o+=` hover:shadow-md hover:scale-[1.02] hover:border-accent/40 
        hover:bg-accent/5 cursor-pointer transform`:o+=" border-theme/10",t?o+=" bg-green-500/10 border-green-500/30 shadow-green-500/20":o+=" border-theme/10",o},s=()=>r&&!t?m.jsx("span",{className:`text-xs px-2 py-1 bg-accent/10 text-accent rounded-full 
          font-medium border border-accent/20`,children:"Click to add"}):t?m.jsxs(ht.span,{initial:{scale:0},animate:{scale:1},className:`text-xs px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 
            rounded-full font-medium border border-green-500/20 flex items-center gap-1`,children:[m.jsx("span",{children:""}),m.jsx("span",{children:"Added"})]}):null;return m.jsx(ht.div,{whileHover:r?{x:4}:{},className:i(),onClick:()=>n(e),children:m.jsxs("div",{className:"flex items-start gap-3",children:[e.icon&&m.jsx("div",{className:`w-8 h-8 flex-shrink-0 bg-accent/10 rounded-lg 
            flex items-center justify-center`,children:m.jsx("span",{className:"text-lg",children:e.icon})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[m.jsx("h5",{className:"font-semibold text-sm text-theme",children:e.title}),s()]}),m.jsx("p",{className:"text-xs text-muted leading-relaxed",children:e.description})]})]})})},ppe=({canvasContext:e,nodes:t=[],edges:n=[],onAddComponent:r})=>{const{isOpen:i,showWelcome:s,userIntent:o,toggleChatBot:l,updateCanvasContext:u}=G2(),d=dpe(o,e??null,t,n),[f,p]=M.useState(null);M.useEffect(()=>{e&&u(e)},[e,u]);const g=b=>{if(b.actionType==="add-component"&&b.componentId&&r)r(b.componentId),p(b.id),setTimeout(()=>p(null),2e3);else if(b.actionType==="add-pattern"&&b.componentIds&&r){for(const v of b.componentIds)r(v);p(b.id),setTimeout(()=>p(null),2e3)}};return m.jsxs(m.Fragment,{children:[m.jsxs(ht.button,{onClick:l,className:`fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]
          text-white rounded-full shadow-xl flex items-center justify-center
          z-50 transition-all hover:shadow-2xl`,whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},"aria-label":"Toggle chat bot",children:[i?m.jsx(fc,{className:"w-8 h-8"}):m.jsx(XW,{className:"w-8 h-8"}),d.length>0&&!i&&m.jsx(ht.div,{initial:{scale:0},animate:{scale:1},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full 
              flex items-center justify-center text-xs font-bold`,children:d.length})]}),m.jsx(cc,{children:i&&m.jsxs(ht.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:`fixed bottom-24 right-6 w-96 max-h-[600px] 
              bg-[var(--surface)] rounded-2xl shadow-2xl
              border border-theme/10 backdrop-blur-sm
              flex flex-col z-50 overflow-hidden`,children:[m.jsxs("div",{className:`flex items-center justify-between px-5 py-4 
              bg-gradient-to-r from-[var(--brand)] to-[var(--accent)]`,children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:m.jsx("span",{className:"text-2xl",children:""})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white text-lg",children:"Design Assistant"}),m.jsx("p",{className:"text-xs text-white/80",children:"Smart suggestions for you"})]})]}),m.jsx("button",{onClick:l,className:`text-white/80 hover:text-white transition-colors 
                  w-8 h-8 flex items-center justify-center rounded-full
                  hover:bg-white/10`,"aria-label":"Close chat bot",children:m.jsx(fc,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-gradient-to-b from-transparent to-theme/5 chatbot-scroll",children:m.jsx(cc,{mode:"wait",children:s?m.jsx(ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:m.jsx(fpe,{})},"welcome"):m.jsxs(ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[o&&m.jsx(ht.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`bg-gradient-to-br from-accent/10 to-accent/5 
                          border border-accent/20 rounded-xl p-4 mb-4 shadow-sm`,children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"text-2xl",children:""}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-bold text-theme text-base mb-1",children:o.title||"Your Project"}),o.description&&m.jsx("p",{className:"text-sm text-muted leading-relaxed",children:o.description})]})]})}),d.length>0?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("h4",{className:"text-sm font-bold text-theme",children:"Suggestions for you"}),m.jsx("span",{className:`ml-auto text-xs px-2 py-1 bg-accent/10 
                            text-accent rounded-full font-medium`,children:d.length})]}),m.jsx("div",{className:"space-y-2",children:d.map((b,v)=>m.jsx(ht.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.05},children:m.jsx(hpe,{suggestion:b,wasAdded:f===b.id,onClick:g})},b.id))})]}):m.jsxs(ht.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[m.jsx("div",{className:`w-16 h-16 mx-auto mb-4 bg-theme/5 rounded-full 
                          flex items-center justify-center`,children:m.jsx("span",{className:"text-4xl opacity-50",children:""})}),m.jsx("p",{className:"text-muted text-sm",children:"Start adding components to your canvas!"}),m.jsx("p",{className:"text-muted text-xs mt-1",children:"I'll provide smart suggestions as you design"})]}),e&&!e.isEmpty&&m.jsxs(ht.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-5 pt-4 border-t border-theme/10",children:[m.jsxs("h5",{className:"text-xs font-bold text-muted uppercase tracking-wide mb-3 flex items-center gap-2",children:[m.jsx("span",{children:""}),m.jsx("span",{children:"Canvas Overview"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:`bg-gradient-to-br from-blue-500/10 to-blue-500/5 
                            border border-blue-500/20 rounded-lg p-3 text-center`,children:[m.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.nodeCount}),m.jsx("div",{className:"text-xs text-muted mt-1",children:"Components"})]}),m.jsxs("div",{className:`bg-gradient-to-br from-purple-500/10 to-purple-500/5 
                            border border-purple-500/20 rounded-lg p-3 text-center`,children:[m.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.edgeCount}),m.jsx("div",{className:"text-xs text-muted mt-1",children:"Connections"})]})]})]})]},"suggestions")})}),m.jsx("div",{className:"px-5 py-3 border-t border-theme/10 bg-theme/5",children:m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("p",{className:"text-xs text-muted font-medium",children:"Suggestions adapt to your design"})]})})]})})]})},mpe=({onSubmit:e,onSkip:t})=>{const[n,r]=M.useState(""),[i,s]=M.useState(""),o=l=>{if(l.preventDefault(),n.trim()||i.trim()){const u={title:n.trim(),description:i.trim(),timestamp:new Date};e(u)}};return m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:m.jsx(ht.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-[var(--surface)] rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4",children:m.jsxs("form",{onSubmit:o,children:[m.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[m.jsx("h2",{className:"text-xl font-bold text-theme",children:" What are you designing today?"}),m.jsx("p",{className:"text-sm text-muted mt-1",children:"Help us provide better suggestions by sharing what you're building"})]}),m.jsxs("div",{className:"px-6 py-4 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"project-title",className:"block text-sm font-medium text-theme mb-2",children:"Project Title"}),m.jsx("input",{id:"project-title",type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"e.g., E-commerce System, Blog Database, Microservices Architecture...",className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted`,autoFocus:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"project-description",className:"block text-sm font-medium text-theme mb-2",children:["Description ",m.jsx("span",{className:"text-muted",children:"(Optional)"})]}),m.jsx("textarea",{id:"project-description",value:i,onChange:l=>s(l.target.value),placeholder:"Briefly describe what you want to design and its key features...",rows:4,className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted
                  resize-none`})]}),m.jsx("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-3",children:m.jsxs("p",{className:"text-xs text-theme",children:[" ",m.jsx("strong",{children:"Tip:"})," This information will be used for auto-save and to provide you with smart, context-aware suggestions while you design."]})})]}),m.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[m.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 text-sm font-medium text-muted
                hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors`,children:"Skip for now"}),m.jsx("button",{type:"submit",className:`px-4 py-2 text-sm font-medium bg-accent hover:brightness-90 
                text-white rounded-md transition-all`,children:"Continue"})]})]})})})},gpe={customEdge:Uhe,erRelationship:Yhe},ype=Ce.memo(e=>{const t=e.data;return m.jsx(WV,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),bpe=Ce.memo(e=>{const t=e.data;return m.jsx(QV,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),xpe=Ce.memo(e=>{const t=e.data;return m.jsx(JV,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),vpe=(e,t)=>n=>{const r=t.current?.find(i=>i.id===n.id)?.parentId!==void 0;return m.jsx(ype,{...n,onCopy:e,isInGroup:r})},wpe=(e,t)=>n=>{const r=t.current?.find(i=>i.id===n.id)?.parentId!==void 0;return m.jsx(bpe,{...n,onCopy:e,isInGroup:r})},Spe=(e,t)=>n=>{const r=t.current.find(i=>i.id===n.id)?.parentId!==void 0;return m.jsx(xpe,{...n,onCopy:e,isInGroup:r})},Cpe=()=>{Ya();const e=Zd(),n=OU()?.id,{screenToFlowPosition:r,flowToScreenPosition:i}=Wd(),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:f}=Pm(),{userIntent:p,setUserIntent:g,resetChatBot:b}=G2(),v=Qhe(),S=M.useRef(v);S.current=v;const w=M.useRef([]),k=M.useRef(!1),E=new URLSearchParams(globalThis.location.search).get("diagramId"),[N,A]=M.useState(null),[_,j]=M.useState(!0),[R,I]=M.useState(null),[B,U]=M.useState(!1),[q,F]=M.useState(null),[L,H]=M.useState(null),[O,V]=M.useState(!1),[Y,te]=M.useState(!1),[z,W]=M.useState(!1),[oe,ae]=M.useState(""),[$,Q]=M.useState(""),[ee,de]=M.useState(!1),[le,xe]=M.useState(""),[_e,ze]=M.useState("read"),[Pe,Te]=M.useState([]),[ke,Ee]=M.useState(!1),[pt,Le]=M.useState(!1),[gt,bt]=M.useState("idle"),[$t,un]=M.useState(null),[zt,Nt]=M.useState(!1),[En,dn]=M.useState(0),Ot=M.useRef(null);M.useEffect(()=>{if(!n){j(!1),I("No problem ID provided");return}if(n==="free"){A({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),j(!1);return}if(n.startsWith("custom-")){const X=localStorage.getItem(`custom-problem-${n}`);if(X){A(JSON.parse(X)),j(!1);return}}(async()=>{try{j(!0),I(null);const re=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!re.ok)throw new Error(`Failed to fetch problem: ${re.status} ${re.statusText}`);const pe=await re.json();A(pe)}catch(X){I(X instanceof Error?X.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",X)}finally{j(!1)}})()},[n]);const dt=()=>e("/"),{state:Tt,setState:At,undo:sr,redo:Ar,canUndo:vi,canRedo:Qt}=one({nodes:[],edges:[]}),[Oe,Ue,or]=Mle(Tt.nodes),[lt,fn,$s]=_le(Tt.edges),{getNodes:wi,fitView:Mr}=Wd(),_r=M.useRef(!1);M.useEffect(()=>{w.current=Oe},[Oe]),M.useEffect(()=>{if(n==="free"&&!_){const G=!q&&!E&&Oe.length===0;if(G&&!k.current){b();const X=setTimeout(()=>{te(!0),k.current=!0},500);return()=>clearTimeout(X)}else G||(k.current=!1)}},[n,_,q,E,Oe.length,b]);const[ar,yr]=M.useState(!1),[Dr,xt]=M.useState(!1),Bn=M.useRef(null);M.useEffect(()=>{if(E)(async()=>{try{const X=o?await Kt.getDiagram(E):await Kt.getPublicDiagram(E),re=X.nodes,pe=X.edges;Ue(re),fn(pe),F(X.id),H(X),At({nodes:re,edges:pe})}catch(X){console.error("Failed to load diagram:",X),v.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&o){const G=`last-diagram-${s?.id||"anonymous"}`,X=localStorage.getItem(G);X&&(async()=>{try{const pe=await Kt.getDiagram(X),be=pe.nodes,we=pe.edges;Ue(be),fn(we),F(pe.id),H(pe),At({nodes:be,edges:we}),v.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(G),v.error("Failed to restore previous design. Starting fresh.")}})()}else n&&n!=="free"&&o&&(async()=>{try{const X=await Kt.getAttemptByProblem(n);if(console.log("Loaded attempt:",X),X){const re=X.nodes,pe=X.edges;Ue(re),fn(pe),X.elapsedTime&&dn(X.elapsedTime),X.lastAssessment&&(console.log("Restoring assessment:",X.lastAssessment),Lt(X.lastAssessment),ge("assessment")),At({nodes:re,edges:pe}),v.success("Progress restored from previous session")}}catch(X){console.error("Failed to load saved attempt:",X)}})()},[E,o,n,s?.id]),M.useEffect(()=>{Nt(o&&n!==void 0)},[o,n]),M.useEffect(()=>{if(!zt||Oe.length===0)return;const X=setTimeout(async()=>{try{if(bt("saving"),n==="free")if(q){await Kt.updateDiagram(q,{title:L?.title||"Auto-saved Design",description:L?.description||"Auto-saved design",nodes:Oe,edges:lt});const be=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(be,q)}else if(p&&(p.title||p.description)){const be=await Kt.saveDiagram({title:p.title||"Untitled Design",description:p.description||"",nodes:Oe,edges:lt});F(be.id),H(be);const we=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(we,be.id)}else{W(!0),bt("idle");return}else{if(!n)return;await Kt.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:Oe,edges:lt,elapsedTime:En})}bt("saved"),un(new Date);const re=localStorage.getItem("lastAutoSaveToast"),pe=Date.now();(!re||pe-Number.parseInt(re)>6e4)&&(v.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),localStorage.setItem("lastAutoSaveToast",pe.toString())),setTimeout(()=>bt("idle"),3e3)}catch(re){console.error("Auto-save failed:",re),bt("error"),setTimeout(()=>bt("idle"),5e3)}},3e3);return()=>clearTimeout(X)},[Oe,lt,zt,n,q,s?.id,En,N,p]),M.useEffect(()=>{_r.current=!0,Ue(Tt.nodes),fn(Tt.edges),setTimeout(()=>{_r.current=!1},0)},[Tt,Ue,fn]),M.useEffect(()=>{z&&p&&(p.title&&!oe&&ae(p.title),p.description&&!$&&Q(p.description))},[z,p,oe,$]),M.useEffect(()=>{_r.current||Oe.length===0&&lt.length===0||At({nodes:Oe,edges:lt})},[Oe,lt,At]),M.useEffect(()=>{const G=X=>{(X.ctrlKey||X.metaKey)&&X.key==="z"&&!X.shiftKey&&(X.preventDefault(),sr()),((X.ctrlKey||X.metaKey)&&X.shiftKey&&X.key==="z"||X.ctrlKey&&X.key==="y")&&(X.preventDefault(),Ar())};return globalThis.addEventListener("keydown",G),()=>globalThis.removeEventListener("keydown",G)},[sr,Ar]),M.useEffect(()=>{if(n!=="free")return Ot.current=setInterval(()=>{dn(G=>G+1)},1e3),()=>{Ot.current&&clearInterval(Ot.current)}},[n]),M.useEffect(()=>()=>{const G=`last-diagram-${s?.id||"anonymous"}`;if(localStorage.removeItem(G),n&&n!=="free"){const X=`problem-progress-${s?.id||"anonymous"}-${n}`;localStorage.removeItem(X)}},[s?.id,n]);const Gs=G=>{const X=Math.floor(G/3600),re=Math.floor(G%3600/60),pe=G%60;return X>0?`${X.toString().padStart(2,"0")}:${re.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${re.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},Si=G=>{const re=Math.floor((new Date().getTime()-G.getTime())/1e3);if(re<60)return"a moment ago";if(re<1800)return`${Math.floor(re/60)} min ago`;if(re<3600)return"about an hour ago";if(re<86400){const pe=Math.floor(re/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${G.toLocaleTimeString()}`};M.useEffect(()=>{const G=X=>{ar&&(X.target.closest(".relative")||yr(!1))};if(ar)return document.addEventListener("click",G),()=>document.removeEventListener("click",G)},[ar]),M.useEffect(()=>{const G=X=>{Dr&&(X.target.closest(".relative")||xt(!1))};if(Dr)return document.addEventListener("click",G),()=>document.removeEventListener("click",G)},[Dr]);const Kn=G=>{const X=Oe.find(Se=>Se.id===G.source),re=Oe.find(Se=>Se.id===G.target),pe=Se=>{const Ie=Se?.data?.componentId;return Ie==="entity"||Ie==="weak-entity"},be=pe(X)&&pe(re),we={...G,type:be?"erRelationship":"customEdge",data:be?{label:"",hasLabel:!1,cardinality:"one-to-many"}:{label:"",hasLabel:!1}};fn(Se=>q8(we,Se))},[Gt,Lt]=Ce.useState(null),[br,Nn]=M.useState(!1),Rr=async()=>{if(br)return;Nn(!0),Lt(null);const G={components:Oe.map(X=>{const re=X.data??{},pe=re.type;let be;typeof pe=="string"?be=pe:typeof X.type=="string"?be=X.type:be="microservice";const we=re.label,Se=typeof we=="string"?we:String(X.id),Ie=re&&typeof re=="object"?{...re}:{},{icon:Je,subtitle:Re,...Xe}=Ie;return{id:X.id,type:be,label:Se,position:{x:X.position?.x??0,y:X.position?.y??0},properties:{...Xe,nodeData:{label:Se,icon:re.icon,subtitle:re.subtitle}}}}),connections:lt.map(X=>{const re=X.data??{},pe=re.type,be=typeof pe=="string"?pe:"api-call",we=re.label,Se=typeof we=="string"?we:void 0;return{id:X.id??`${X.source}-${X.target}`,source:X.source,target:X.target,type:be,label:Se,properties:re}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",G);const X=await xhe(G,N);if(Lt(X),ge("assessment"),n&&n!=="free"&&o)try{console.log("Saving assessment to database:",X),await Kt.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:Oe,edges:lt,elapsedTime:En,lastAssessment:X}),console.log("Assessment saved successfully")}catch(re){console.error("Failed to save assessment:",re)}}catch(X){console.error("Assessment failed:",X),Lt({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{Nn(!1)}},Ii=M.useRef(null),fs=G=>{G.preventDefault(),G.dataTransfer&&(G.dataTransfer.dropEffect="move")},jr=G=>{G.preventDefault();const X=G.dataTransfer?.getData("application/reactflow")||G.dataTransfer?.getData("text/plain");let re=X;try{X&&(re=JSON.parse(X).type||X)}catch{}const pe=r({x:G.clientX,y:G.clientY}),be=`${re}-${Date.now()}`,we=Xi.find(Re=>Re.id===re),Se=we?.group==="Grouping",Ie=we?.nodeType||(Se?"group":"custom"),Je={id:be,position:pe,type:Ie,style:Se?{width:400,height:300,zIndex:-1}:void 0,data:{label:we?.label??re,componentId:we?.id,icon:we?.icon,subtitle:we?.description,backgroundColor:Se?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Se?"rgba(100, 100, 255, 0.3)":void 0,...Ie==="tableNode"?{componentName:we?.label||"Entity",attributes:we?.data?.attributes||[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}],renderConfig:we?.renderConfig}:{},...Ie==="erNode"?we?.properties?.reduce((Re,Xe)=>(Xe.default!==void 0&&Xe.default!==""&&(Re[Xe.key]=Xe.default),Re),{}):{}}};Ue(Re=>[...Re,Je])},Bi=(G,X)=>{if(X.parentId)return;const re=Oe.filter(be=>be.type==="group");let pe;for(const be of re){if(be.id===X.id)continue;const we=be.position.x,Se=be.position.y,Ie=be.style?.width||400,Je=be.style?.height||300,Re=X.position.x,Xe=X.position.y,ft=10;if(Re>we+ft&&Re<we+Ie-ft&&Xe>Se+ft&&Xe<Se+Je-ft){pe=be.id;break}}pe&&Ue(be=>be.map(we=>{if(we.id===X.id){const Se=be.find(Je=>Je.id===pe),Ie=Se?{x:X.position.x-Se.position.x,y:X.position.y-Se.position.y}:X.position;return{...we,position:Ie,parentId:pe,extent:"parent"}}return we}))},hn=M.useCallback(()=>{const G=Pt.current;G&&Ue(X=>X.map(re=>{if(re.id===G&&re.parentId){const pe=X.find(Se=>Se.id===re.parentId);let be=re.position.x,we=re.position.y;return pe&&(be+=pe.position.x,we+=pe.position.y),{...re,position:{x:be,y:we},parentId:void 0,extent:void 0}}return re}))},[Ue]),[He,Yn]=M.useState(null),[Xn,Rt]=M.useState({}),[zi,De]=M.useState({}),[Z,ge]=M.useState("details"),[Me,ct]=M.useState(!1),Pt=M.useRef(null);Ce.useEffect(()=>{Pt.current=He},[He]);const Mt=M.useRef(void 0);Mt.current=G=>{const re=G.detail.id;Ue(pe=>pe.filter(be=>be.id!==re)),Pt.current===re&&(Yn(null),ge("details"))};const qt=M.useRef(void 0);qt.current=G=>{const re=G.detail.id;Yn(pe=>{const be=pe===re?null:re;return ge(be?"inspector":"details"),be})};function _n(G,X,re,pe){return G.map(be=>be.id===X?{...be,data:{...be.data,label:re,hasLabel:pe},label:re}:be)}function pn(G,X,re){return G.map(pe=>pe.id===X?{...pe,data:{...pe.data,cardinality:re}}:pe)}const Xr=Ce.useRef(void 0);Xr.current=G=>{const X=G,{id:re,label:pe,hasLabel:be}=X.detail;fn(we=>_n(we,re,pe,be))};const It=Ce.useRef(void 0);It.current=G=>{const X=G,{id:re,cardinality:pe}=X.detail;fn(be=>pn(be,re,pe))},Ce.useEffect(()=>{const G=re=>Xr.current?.(re),X=re=>It.current?.(re);return globalThis.addEventListener("diagram:edge-label-change",G),globalThis.addEventListener("diagram:edge-cardinality-change",X),()=>{globalThis.removeEventListener("diagram:edge-label-change",G),globalThis.removeEventListener("diagram:edge-cardinality-change",X)}},[]),Ce.useEffect(()=>{const G=pe=>Mt.current?.(pe),X=pe=>qt.current?.(pe),re=pe=>{const be=pe;Ue(we=>we.map(Se=>{if(Se.id===be.detail.id&&Se.parentId){const Ie=we.find(Xe=>Xe.id===Se.parentId);let Je=Se.position.x,Re=Se.position.y;return Ie&&(Je+=Ie.position.x,Re+=Ie.position.y),{...Se,position:{x:Je,y:Re},parentId:void 0,extent:void 0}}return Se}))};return globalThis.addEventListener("diagram:node-delete",G),globalThis.addEventListener("diagram:node-toggle",X),globalThis.addEventListener("diagram:node-detach",re),()=>{globalThis.removeEventListener("diagram:node-delete",G),globalThis.removeEventListener("diagram:node-toggle",X),globalThis.removeEventListener("diagram:node-detach",re)}},[Ue]),Ce.useEffect(()=>{const G=we=>{if(!we)return[];if(Array.isArray(we))return we;if(typeof we=="string")try{const Se=JSON.parse(we);return Array.isArray(Se)?Se:[]}catch{return[]}return[]},X=we=>{const Se=we;Ue(Ie=>Ie.map(Je=>{if(Je.id===Se.detail.nodeId){const Re=Je.data,Xe=G(Re.attributes);return{...Je,data:{...Re,attributes:[...Xe,Se.detail.attribute]}}}return Je}))},re=we=>{const Se=we;Ue(Ie=>Ie.map(Je=>{if(Je.id===Se.detail.nodeId){const Re=Je.data,Xe=G(Re.attributes);return{...Je,data:{...Re,attributes:Xe.filter(ft=>ft.id!==Se.detail.attributeId)}}}return Je}))},pe=we=>{const Se=we;Ue(Ie=>Ie.map(Je=>{if(Je.id===Se.detail.nodeId){const Re=Je.data,Xe=G(Re.attributes);return{...Je,data:{...Re,attributes:Xe.map(ft=>ft.id===Se.detail.attributeId?{...ft,[Se.detail.key]:!ft[Se.detail.key]}:ft)}}}return Je}))},be=we=>{const Se=we;Ue(Ie=>Ie.map(Je=>{if(Je.id===Se.detail.nodeId){const Re=Je.data,Xe=G(Re.attributes);return{...Je,data:{...Re,attributes:Xe.map(ft=>ft.id===Se.detail.attributeId?{...ft,name:Se.detail.name,type:Se.detail.type}:ft)}}}return Je}))};return globalThis.addEventListener("diagram:table-attribute-add",X),globalThis.addEventListener("diagram:table-attribute-delete",re),globalThis.addEventListener("diagram:table-attribute-toggle",pe),globalThis.addEventListener("diagram:table-attribute-update",be),()=>{globalThis.removeEventListener("diagram:table-attribute-add",X),globalThis.removeEventListener("diagram:table-attribute-delete",re),globalThis.removeEventListener("diagram:table-attribute-toggle",pe),globalThis.removeEventListener("diagram:table-attribute-update",be)}},[Ue]),Ce.useEffect(()=>{if(!He)return;const G=Oe.find(X=>X.id===He);Rt(G?.data??{})},[He,Oe]);const zn=(G,X)=>{Rt(re=>({...re,[G]:X})),He&&Ue(re=>re.map(pe=>pe.id===He?{...pe,data:{...pe.data,[G]:X}}:pe))},qi=(G,X)=>zn(G,X),Yo=(G,X)=>zn(G,X),rl=(G,X)=>zn(G,X),il=(G,X)=>zn(G,X),Zn=()=>{if(!He)return;const G={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(zi[He]?.length||0)+1}`,label:`Custom Property ${(zi[He]?.length||0)+1}`,type:"text",value:""};De(X=>{const re={...X,[He]:[...X[He]||[],G]};return Ue(pe=>pe.map(be=>be.id===He?{...be,data:{...be.data,_customProperties:re[He]}}:be)),re})},sl=(G,X)=>{He&&De(re=>{const be=(re[He]||[]).map(we=>we.id===G?{...we,...X}:we);return Ue(we=>we.map(Se=>Se.id===He?{...Se,data:{...Se.data,_customProperties:be}}:Se)),{...re,[He]:be}})},Oc=G=>{He&&De(X=>{const pe=(X[He]||[]).filter(be=>be.id!==G);return Ue(be=>be.map(we=>we.id===He?{...we,data:{...we.data,_customProperties:pe}}:we)),{...X,[He]:pe}})};Ce.useEffect(()=>{if(!He)return;const G=Oe.find(X=>X.id===He);G?.data?._customProperties&&De(X=>({...X,[He]:G.data._customProperties}))},[He,Oe]);const Ws=G=>{const X=`${He}-${G.key}`,re=Xn[G.key];let pe;typeof re=="number"?pe=re:typeof G.default=="number"?pe=G.default:pe=void 0;let be;typeof re=="string"?be=re:G.default===null||G.default===void 0?be="":be=String(G.default);let we;typeof re=="string"?we=re:G.default===null||G.default===void 0?we=void 0:we=String(G.default);const Se=!!re;return m.jsxs("div",{className:"flex flex-col px-1",children:[G.type==="boolean"&&m.jsx($z,{id:X,checked:Se,onChange:Ie=>qi(G.key,Ie),label:G.label}),G.type==="number"&&m.jsx(Gz,{id:X,label:G.label,value:pe,onChange:Ie=>Yo(G.key,Ie)}),G.type==="text"&&m.jsx(pp,{id:X,label:G.label,value:be,placeholder:G.placeholder,onChange:Ie=>rl(G.key,Ie)}),G.type==="textarea"&&m.jsx(bm,{id:X,label:G.label,value:be,placeholder:G.placeholder,onChange:Ie=>rl(G.key,Ie)}),G.type==="select"&&m.jsx(Wz,{id:X,label:G.label,value:we,options:G.options||[],onChange:Ie=>il(G.key,Ie)})]},G.key)};let Vi=null;if(He){const G=Oe.find(X=>X.id===He);if(G){const X=G.data.componentId?Xi.find(re=>re.id===G.data.componentId):Xi.find(re=>re.label===G.data.label);X?.properties?Vi=X.properties.map(re=>Ws(re)):Vi=m.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else Vi=m.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let Hi=null;if(He){const G=zi[He]||[];G.length>0?Hi=G.map(X=>m.jsx(Zhe,{property:X,onUpdate:sl,onDelete:Oc},X.id)):Hi=m.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const Ks=M.useCallback((G,X)=>{const re=w.current.find(we=>we.id===G);if(!re)return;const pe=`${G}-copy-${Date.now()}`,be={...re,id:pe,position:{x:re.position.x+200,y:re.position.y+100},data:{...X},selected:!1};Ue(we=>[...we,be])},[Ue]),Qn=M.useMemo(()=>({custom:vpe(Ks,w),erNode:wpe(Ks,w),tableNode:Spe(Ks,w),group:Xhe}),[Ks]),Or=M.useCallback(async()=>{if(!(!q||!ee))try{Le(!0);const G=await Kt.getCollaborators(q);Te(G)}catch(G){console.error("Failed to load collaborators:",G),S.current.error("Failed to load collaborators.")}finally{Le(!1)}},[q,ee]);M.useEffect(()=>{ee&&q?Or():ee||Te([])},[ee,q,Or]);const Xo=localStorage.getItem("auth_token")||"",{sendDiagramUpdate:Ys,sendCursorPosition:Zr,collaborators:vf,cursors:wf,isConnected:Qr,isConnecting:zg,reconnectAttempts:Sf}=ipe({diagramId:q||"",token:Xo,enabled:!!q&&o&&!!Xo,onDiagramUpdate:M.useCallback((G,X)=>{console.log("Received diagram update from user:",X),G.nodes&&Ue(G.nodes),G.edges&&fn(G.edges),G.title&&L&&H({...L,title:G.title}),S.current.success("Diagram updated by collaborator")},[Ue,fn,L]),onUserJoined:M.useCallback(G=>{S.current.success(`${G.name} joined the collaboration`)},[]),onUserLeft:M.useCallback(G=>{S.current.success(`${G.name} left the collaboration`)},[]),onError:M.useCallback(G=>{S.current.error(G)},[])});M.useEffect(()=>{if(!Qr)return;const G=setTimeout(()=>{Ys({nodes:Oe,edges:lt,title:L?.title})},500);return()=>clearTimeout(G)},[Oe,lt,L?.title,Qr,Ys]);const Cf=M.useCallback(G=>{if(!Qr||!Ii.current?.getBoundingClientRect())return;const re=r({x:G.clientX,y:G.clientY});Zr(re)},[Qr,Zr,r]),Lc=M.useMemo(()=>{if(n!=="free")return;const G=Oe.map(X=>X.data?.componentId).filter(Boolean);return{nodeCount:Oe.length,edgeCount:lt.length,componentTypes:G,isEmpty:Oe.length===0}},[n,Oe,lt]);if(_)return m.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),m.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(R)return m.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),m.jsx("div",{className:"text-muted mb-4",children:R}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx("button",{onClick:dt,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),m.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!N)return m.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),m.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),m.jsx("button",{onClick:dt,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function qg(G){const X=Xi.find(Ie=>Ie.id===G);if(X)return X;const re=G.toLowerCase(),pe=Xi.find(Ie=>Ie.id.toLowerCase()===re);if(pe)return pe;const be=Xi.find(Ie=>Ie.label.toLowerCase()===re);if(be)return be;const we=Xi.find(Ie=>Ie.tags?.some(Je=>Je.toLowerCase().includes(re)));if(we)return we;const Se=Xi.find(Ie=>Ie.label.toLowerCase().includes(re)||re.includes(Ie.label.toLowerCase()));return Se||null}function kf(G){const X=qg(G),re=Ii.current?.getBoundingClientRect();if(!re)return;const pe=r({x:re.left+re.width/2,y:re.top+re.height/2}),be=`${X?.id||"custom-component"}-${Date.now()}`,we=X?.group==="Grouping",Se=X?.nodeType||(we?"group":"custom"),Ie=X?.label??G,Je=X?.icon??"",Re=X?.description??"Custom Component",Xe={id:be,position:pe,type:Se,style:we?{width:400,height:300,zIndex:-1}:void 0,data:{label:Ie,componentId:X?.id||"custom-component",icon:Je,subtitle:Re,backgroundColor:we?"rgba(100, 100, 255, 0.05)":void 0,borderColor:we?"rgba(100, 100, 255, 0.3)":void 0}};Ue(ft=>[...ft,Xe])}const ol=()=>{Oe.length===0&&lt.length===0||ct(!0)},Pc=()=>{Ue([]),fn([]),Yn(null),Lt(null),ct(!1)},Ic=()=>{ct(!1)},Fi=(G="png")=>{const X=M8(wi()),re=hg(X,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let be,we;G==="svg"?(be=Fq,we="svg"):G==="jpeg"?(be=Zce,we="jpg"):(be=Xce,we="png"),be(pe,{backgroundColor:G==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${re.x}px, ${re.y}px) scale(${re.zoom})`}}).then(Se=>{const Ie=document.createElement("a");Ie.setAttribute("download",`system-design-${Date.now()}.${we}`),Ie.setAttribute("href",Se),Ie.click()}).catch(Se=>{console.error("Error generating image:",Se)})},Xs=()=>{try{const G=N?.title||"System Design",X=N?.description,re=ape(Oe,lt,G,X),pe=`${G.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;cP(re,pe,"application/json"),S.current.success("Design exported as JSON successfully!")}catch(G){console.error("Export JSON error:",G),S.current.error("Failed to export as JSON")}},Ef=()=>{try{const G=N?.title||"System Design",X=N?.description,re=lpe(Oe,lt,G,X),pe=`${G.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;cP(re,pe,"application/xml"),v.success("Design exported as XML successfully!")}catch(G){console.error("Export XML error:",G),v.error("Failed to export as XML")}},Bc=async G=>{const X=G.target.files?.[0];if(X)try{const re=await cpe(X);let pe;if(X.name.endsWith(".json"))pe=aP(re),v.success("Design imported from JSON successfully!");else if(X.name.endsWith(".xml")||X.name.endsWith(".drawio"))pe=lP(re),v.success("Design imported from XML successfully!");else{const be=re.trim();if(be.startsWith("{")||be.startsWith("["))pe=aP(re),v.success("Design imported from JSON successfully!");else if(be.startsWith("<?xml")||be.startsWith("<mxfile"))pe=lP(re),v.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}Ue(pe.nodes),fn(pe.edges),F(null),setTimeout(()=>{Mr({padding:.2,duration:400})},100)}catch(re){console.error("Import error:",re),v.error(re instanceof Error?re.message:"Failed to import diagram")}finally{Bn.current&&(Bn.current.value="")}},Nf=()=>{Bn.current?.click()},Zo=async()=>{if(!(!le.trim()||!q))try{Ee(!0),await Kt.addCollaborator(q,le.trim(),_e),S.current.success(`Diagram shared with ${le} successfully!`),xe(""),ze("read"),Or()}catch(G){console.error("Failed to Share Design:",G),S.current.error("Failed to Share Design. Please try again.")}finally{Ee(!1)}},Ci=async(G,X)=>{if(q)try{await Kt.updateCollaborator(q,G,X),S.current.success("Permission updated successfully!"),Or()}catch(re){console.error("Failed to update permission:",re),S.current.error("Failed to update permission.")}},zc=async G=>{if(q)try{await Kt.removeCollaborator(q,G),S.current.success("Collaborator removed successfully!"),Or()}catch(X){console.error("Failed to remove collaborator:",X),S.current.error("Failed to remove collaborator.")}},Qo=G=>{g(G),te(!1),v.success("Great! I'll provide suggestions based on your project.")},Ui=()=>{te(!1)},qc=async G=>{if(G.preventDefault(),!!oe.trim())try{bt("saving");const X={title:oe.trim(),description:$.trim()||void 0,nodes:Oe,edges:lt},re=await Kt.saveDiagram(X);F(re.id),H(re);const pe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(pe,re.id),bt("saved"),un(new Date),W(!1),ae(""),Q(""),v.success("Design saved successfully!")}catch(X){console.error("Failed to save diagram:",X),bt("error"),v.error("Failed to save design. Please try again.")}},al=()=>{W(!1),bt("idle"),ae(""),Q("")},Vc=(G="TB")=>{const X=Oe.filter(Re=>Re.type==="group"),re=Oe.filter(Re=>Re.type!=="group"&&!Re.parentId),pe=Re=>Re.type==="tableNode"?{width:400,height:400}:Re.type==="erNode"?{width:400,height:300}:{width:200,height:80},be=new Map,we=new Map;for(const Re of X){const Xe=Oe.filter(qn=>qn.parentId===Re.id);if(Xe.length===0)continue;const ft=new np.graphlib.Graph;ft.setDefaultEdgeLabel(()=>({})),ft.setGraph({rankdir:G,nodesep:G==="LR"?80:60,ranksep:G==="LR"?100:80,marginx:20,marginy:20});for(const qn of Xe){const Jr=pe(qn);be.set(qn.id,Jr),ft.setNode(qn.id,Jr)}const Vg=lt.filter(qn=>Xe.some(Jr=>Jr.id===qn.source)&&Xe.some(Jr=>Jr.id===qn.target));for(const qn of Vg)ft.setEdge(qn.source,qn.target);np.layout(ft);const Hc=30,Hg=50,Af=new Map;for(const qn of Xe){const Jr=ft.node(qn.id);if(Jr){const Mf=be.get(qn.id)||{width:200,height:80};Af.set(qn.id,{x:Jr.x-Mf.width/2+Hc,y:Jr.y-Mf.height/2+Hg})}}we.set(Re.id,Af)}const Se=new np.graphlib.Graph;Se.setDefaultEdgeLabel(()=>({})),Se.setGraph({rankdir:G,nodesep:G==="LR"?150:80,ranksep:G==="LR"?200:100});for(const Re of re){const Xe=pe(Re);be.set(Re.id,Xe),Se.setNode(Re.id,Xe)}const Ie=lt.filter(Re=>re.some(Xe=>Xe.id===Re.source)&&re.some(Xe=>Xe.id===Re.target));for(const Re of Ie)Se.setEdge(Re.source,Re.target);re.length>0&&np.layout(Se);const Je=Oe.map(Re=>{if(Re.type==="group")return Re;if(Re.parentId){const Xe=we.get(Re.parentId);if(Xe){const ft=Xe.get(Re.id);if(ft)return{...Re,position:{x:ft.x,y:ft.y}}}return Re}else{const Xe=Se.node(Re.id);if(Xe){const ft=be.get(Re.id)||{width:200,height:80};return{...Re,position:{x:Xe.x-ft.width/2,y:Xe.y-ft.height/2}}}}return Re});Ue(Je),globalThis.requestAnimationFrame(()=>{Mr({padding:.2,duration:400})})},ll=()=>{if(Ue(G=>G.map(X=>X.id===He?{...X,data:{...X.data,...Xn}}:X)),He){const G=Oe.find(X=>X.id===He);console.log("Node properties saved:",{id:He,data:G?.data,nodeProps:Xn})}},cl=n==="free"?"Design Studio | Diagrammatic":`${N?.title||"System Design Challenge"} | Diagrammatic`,Tf=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${N?.title||"system design"} challenge. ${N?.description?.substring(0,150)||"Practice system design skills"}...`;return m.jsxs(m.Fragment,{children:[m.jsx(Jd,{title:cl,description:Tf,keywords:`system design playground, ${N?.title||"free canvas"}, architecture diagram tool, ${N?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),m.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[m.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:m.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:m.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("button",{type:"button",onClick:dt,className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[m.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":N.title,children:N.title}),n!=="free"&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":N.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:N.difficulty}),N.estimated_time&&m.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[m.jsx(JW,{className:"h-3 w-3"}),N.estimated_time]})]}),n!=="free"&&m.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:m.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:Gs(En)})})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&m.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:zt&&m.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[gt==="saving"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),m.jsx("span",{children:"Saving..."})]}),gt==="saved"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),m.jsxs("span",{children:["Saved"," ",$t&&Si($t)]})]}),gt==="error"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),m.jsx("span",{children:"Save failed"})]}),gt==="idle"&&$t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),m.jsxs("span",{children:["Saved ",Si($t)]})]})]})}),n&&n!=="free"&&zt&&m.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:m.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[gt==="saving"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),m.jsx("span",{children:"Saving progress..."})]}),gt==="saved"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),m.jsxs("span",{children:["Progress saved"," ",$t&&Si($t)]})]}),gt==="error"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),m.jsx("span",{children:"Save failed"})]}),gt==="idle"&&$t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),m.jsxs("span",{children:["Progress saved ",Si($t)]})]})]})}),m.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[m.jsx("button",{type:"button",onClick:sr,disabled:!vi,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:m.jsx(QW,{className:"h-5 w-5"})}),m.jsx("button",{type:"button",onClick:Ar,disabled:!Qt,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:m.jsx(ZW,{className:"h-5 w-5"})}),m.jsx("button",{type:"button",onClick:ol,disabled:Oe.length===0&&lt.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:m.jsx(fc,{className:"h-5 w-5"})})]}),n==="free"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",onClick:Nf,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:m.jsx(uK,{className:"h-5 w-5"})}),m.jsx("input",{ref:Bn,type:"file",accept:".json,.xml,.drawio",onChange:Bc,className:"hidden","aria-label":"Import diagram file"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{type:"button",onClick:()=>yr(!ar),disabled:Oe.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:m.jsx(cK,{className:"h-5 w-5"})}),ar&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),m.jsx("button",{type:"button",onClick:()=>{Fi("png"),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),m.jsx("button",{type:"button",onClick:()=>{Fi("jpeg"),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),m.jsx("button",{type:"button",onClick:()=>{Fi("svg"),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),m.jsx("div",{className:"border-t border-theme/10 my-1"}),m.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),m.jsx("button",{type:"button",onClick:()=>{Xs(),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),m.jsx("button",{type:"button",onClick:()=>{Ef(),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{type:"button",onClick:()=>xt(!Dr),disabled:Oe.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:m.jsx(sne,{className:"h-5 w-5"})}),Dr&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[m.jsx("button",{type:"button",onClick:()=>{Vc("TB"),xt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),m.jsx("button",{type:"button",onClick:()=>{Vc("LR"),xt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&o&&q&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",onClick:()=>de(!0),className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Share Diagram",children:m.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),m.jsx(spe,{isConnected:Qr,isConnecting:zg,reconnectAttempts:Sf,collaborators:vf,showCollaborators:!0})]}),N?.id!=="free"&&m.jsx("button",{type:"button",onClick:Rr,disabled:br,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:br?"Assessing...":"Run Assessment"}),m.jsx(Qd,{}),m.jsx("div",{className:"relative",children:o?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>V(!O),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?m.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),m.jsx(s6,{className:"h-4 w-4"})]}),O&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),m.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),m.jsx("button",{type:"button",onClick:()=>{f(),V(!1),F(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):m.jsx("button",{type:"button",onClick:()=>U(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),m.jsxs("div",{className:"flex-1 flex min-h-0",children:[m.jsx(mhe,{components:Xi,onAdd:kf}),m.jsx(ghe,{reactFlowWrapperRef:Ii,nodes:Oe,edges:lt,nodeTypes:Qn,edgeTypes:gpe,onNodesChange:or,onEdgesChange:$s,onConnect:Kn,onDragOver:fs,onDrop:jr,onNodeDragStop:Bi,onMouseMove:Cf,children:wf.map(G=>{const X=i(G.position);return m.jsx(ope,{name:G.user.name,color:qk(G.userId),position:X,pictureUrl:G.user.pictureUrl},G.userId)})}),m.jsx(yhe,{problem:N,activeTab:Z,setActiveTab:ge,inspectedNodeId:He,setInspectedNodeId:Yn,propertyElements:Vi,customPropertyElements:Hi,onAddCustomProperty:Zn,handleSave:ll,assessmentResult:Gt,onDetachFromGroup:hn,isNodeInGroup:He?Oe.find(G=>G.id===He)?.parentId!==void 0:!1})]}),Me&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),m.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),m.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{type:"button",onClick:Ic,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),m.jsx("button",{type:"button",onClick:Pc,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),m.jsx(Hm,{isOpen:B,onClose:()=>U(!1),onLogin:async(G,X)=>{await l({email:G,password:X})},onSignup:async(G,X,re)=>{await u({email:G,password:X,name:re})},onGoogleLogin:d}),Y&&m.jsx(mpe,{onSubmit:Qo,onSkip:Ui}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:m.jsxs("form",{onSubmit:qc,children:[m.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:m.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),m.jsxs("div",{className:"px-6 py-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{id:"title-input",type:"text",value:oe,onChange:G=>ae(G.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),m.jsx("textarea",{id:"description-input",value:$,onChange:G=>Q(G.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),m.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[m.jsx("button",{type:"button",onClick:al,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!oe.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),ee&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Share Design"}),m.jsx("button",{type:"button",onClick:()=>de(!1),className:"p-1 text-muted hover:text-theme rounded-md transition-colors",children:m.jsx(fc,{className:"h-5 w-5"})})]}),m.jsxs("p",{className:"text-sm text-muted mt-1",children:['Share "',L?.title||"Untitled Design",'" with others']})]}),m.jsxs("div",{className:"px-6 py-4 space-y-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-sm font-medium text-theme",children:"Add Collaborator"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"share-email",className:"block text-sm font-medium text-theme mb-2",children:"Email Address"}),m.jsx("input",{id:"share-email",type:"email",value:le,onChange:G=>xe(G.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"share-permission",className:"block text-sm font-medium text-theme mb-2",children:"Permission Level"}),m.jsxs("select",{id:"share-permission",value:_e,onChange:G=>ze(G.target.value),className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",children:[m.jsx("option",{value:"read",children:"Read Only - Can view the diagram"}),m.jsx("option",{value:"edit",children:"Read & Edit - Can view and modify the diagram"})]})]}),m.jsx("button",{type:"button",onClick:Zo,disabled:!le.trim()||ke,className:"w-full px-4 py-2 bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:ke?"Sharing...":"Share Design"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-sm font-medium text-theme",children:"Current Collaborators"}),m.jsx(bhe,{isLoading:pt,collaborators:Pe,onUpdatePermission:Ci,onRemove:zc})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-sm font-medium text-theme",children:"Share Link"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("input",{type:"text",value:`${globalThis.location.origin}/#/playground/free?diagramId=${q}`,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-theme/20 rounded-md bg-theme/50 text-theme"}),m.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${globalThis.location.origin}/#/playground/free?diagramId=${q}`),v.success("Link copied to clipboard!")},className:"px-3 py-2 bg-theme/10 hover:bg-theme/20 text-theme rounded-md transition-colors",children:"Copy"})]}),m.jsx("p",{className:"text-xs text-muted",children:"Anyone with this link can access the diagram according to their permission level"})]})]})]})}),m.jsx(epe,{toasts:v.toasts,onClose:v.removeToast}),n==="free"&&m.jsx(ppe,{canvasContext:Lc,nodes:Oe,edges:lt,onAddComponent:kf})]})]})},kpe=()=>m.jsx(_q,{children:m.jsx(Cpe,{})}),Epe=()=>(Ya(),m.jsx(p9,{children:m.jsx(upe,{children:m.jsx(JU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:m.jsxs(XU,{children:[m.jsx(ga,{path:"/",element:m.jsx($_,{})}),m.jsx(ga,{path:"/problems",element:m.jsx(nY,{})}),m.jsx(ga,{path:"/create-problem",element:m.jsx(rne,{})}),m.jsx(ga,{path:"/diagrams",element:m.jsx(ine,{})}),m.jsx(ga,{path:"/playground/:id",element:m.jsx(kpe,{})}),m.jsx(ga,{path:"*",element:m.jsx($_,{})})]})})})}));nU.createRoot(document.getElementById("root")).render(m.jsx(M.StrictMode,{children:m.jsx(Epe,{})}));
