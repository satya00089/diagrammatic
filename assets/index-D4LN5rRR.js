function eF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wy={exports:{}},eu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EA;function tF(){if(EA)return eu;EA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return eu.Fragment=t,eu.jsx=n,eu.jsxs=n,eu}var kA;function nF(){return kA||(kA=1,Wy.exports=tF()),Wy.exports}var v=nF(),Xy={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function rF(){if(NA)return Ue;NA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(L,K,se){this.props=L,this.context=K,this.refs=S,this.updater=se||y}w.prototype.isReactComponent={},w.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function E(){}E.prototype=w.prototype;function N(L,K,se){this.props=L,this.context=K,this.refs=S,this.updater=se||y}var k=N.prototype=new E;k.constructor=N,x(k,w.prototype),k.isPureReactComponent=!0;var T=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function R(L,K,se,ce,H,X){return se=X.ref,{$$typeof:e,type:L,key:K,ref:se!==void 0?se:null,props:X}}function D(L,K){return R(L.type,K,void 0,void 0,void 0,L.props)}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function $(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(se){return K[se]})}var V=/\/+/g;function B(L,K){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):K.toString(36)}function G(){}function z(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(G,G):(L.status="pending",L.then(function(K){L.status==="pending"&&(L.status="fulfilled",L.value=K)},function(K){L.status==="pending"&&(L.status="rejected",L.reason=K)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,K,se,ce,H){var X=typeof L;(X==="undefined"||X==="boolean")&&(L=null);var ee=!1;if(L===null)ee=!0;else switch(X){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(L.$$typeof){case e:case t:ee=!0;break;case h:return ee=L._init,F(ee(L._payload),K,se,ce,H)}}if(ee)return H=H(L),ee=ce===""?"."+B(L,0):ce,T(H)?(se="",ee!=null&&(se=ee.replace(V,"$&/")+"/"),F(H,K,se,"",function(ge){return ge})):H!=null&&(P(H)&&(H=D(H,se+(H.key==null||L&&L.key===H.key?"":(""+H.key).replace(V,"$&/")+"/")+ee)),K.push(H)),1;ee=0;var ue=ce===""?".":ce+":";if(T(L))for(var le=0;le<L.length;le++)ce=L[le],X=ue+B(ce,le),ee+=F(ce,K,se,X,H);else if(le=g(L),typeof le=="function")for(L=le.call(L),le=0;!(ce=L.next()).done;)ce=ce.value,X=ue+B(ce,le++),ee+=F(ce,K,se,X,H);else if(X==="object"){if(typeof L.then=="function")return F(z(L),K,se,ce,H);throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ee}function I(L,K,se){if(L==null)return L;var ce=[],H=0;return F(L,ce,"","",function(X){return K.call(se,X,H++)}),ce}function q(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(se){(L._status===0||L._status===-1)&&(L._status=1,L._result=se)},function(se){(L._status===0||L._status===-1)&&(L._status=2,L._result=se)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var W=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function Q(){}return Ue.Children={map:I,forEach:function(L,K,se){I(L,function(){K.apply(this,arguments)},se)},count:function(L){var K=0;return I(L,function(){K++}),K},toArray:function(L){return I(L,function(K){return K})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ue.Component=w,Ue.Fragment=n,Ue.Profiler=i,Ue.PureComponent=N,Ue.StrictMode=r,Ue.Suspense=u,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(L){return A.H.useMemoCache(L)}},Ue.cache=function(L){return function(){return L.apply(null,arguments)}},Ue.cloneElement=function(L,K,se){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var ce=x({},L.props),H=L.key,X=void 0;if(K!=null)for(ee in K.ref!==void 0&&(X=void 0),K.key!==void 0&&(H=""+K.key),K)!_.call(K,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&K.ref===void 0||(ce[ee]=K[ee]);var ee=arguments.length-2;if(ee===1)ce.children=se;else if(1<ee){for(var ue=Array(ee),le=0;le<ee;le++)ue[le]=arguments[le+2];ce.children=ue}return R(L.type,H,void 0,void 0,X,ce)},Ue.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},Ue.createElement=function(L,K,se){var ce,H={},X=null;if(K!=null)for(ce in K.key!==void 0&&(X=""+K.key),K)_.call(K,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(H[ce]=K[ce]);var ee=arguments.length-2;if(ee===1)H.children=se;else if(1<ee){for(var ue=Array(ee),le=0;le<ee;le++)ue[le]=arguments[le+2];H.children=ue}if(L&&L.defaultProps)for(ce in ee=L.defaultProps,ee)H[ce]===void 0&&(H[ce]=ee[ce]);return R(L,X,void 0,void 0,null,H)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(L){return{$$typeof:l,render:L}},Ue.isValidElement=P,Ue.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:q}},Ue.memo=function(L,K){return{$$typeof:d,type:L,compare:K===void 0?null:K}},Ue.startTransition=function(L){var K=A.T,se={};A.T=se;try{var ce=L(),H=A.S;H!==null&&H(se,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Q,W)}catch(X){W(X)}finally{A.T=K}},Ue.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ue.use=function(L){return A.H.use(L)},Ue.useActionState=function(L,K,se){return A.H.useActionState(L,K,se)},Ue.useCallback=function(L,K){return A.H.useCallback(L,K)},Ue.useContext=function(L){return A.H.useContext(L)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(L,K){return A.H.useDeferredValue(L,K)},Ue.useEffect=function(L,K,se){var ce=A.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(L,K)},Ue.useId=function(){return A.H.useId()},Ue.useImperativeHandle=function(L,K,se){return A.H.useImperativeHandle(L,K,se)},Ue.useInsertionEffect=function(L,K){return A.H.useInsertionEffect(L,K)},Ue.useLayoutEffect=function(L,K){return A.H.useLayoutEffect(L,K)},Ue.useMemo=function(L,K){return A.H.useMemo(L,K)},Ue.useOptimistic=function(L,K){return A.H.useOptimistic(L,K)},Ue.useReducer=function(L,K,se){return A.H.useReducer(L,K,se)},Ue.useRef=function(L){return A.H.useRef(L)},Ue.useState=function(L){return A.H.useState(L)},Ue.useSyncExternalStore=function(L,K,se){return A.H.useSyncExternalStore(L,K,se)},Ue.useTransition=function(){return A.H.useTransition()},Ue.version="19.1.1",Ue}var TA;function pd(){return TA||(TA=1,Xy.exports=rF()),Xy.exports}var O=pd();const Re=hd(O),iF=eF({__proto__:null,default:Re},[O]);var Zy={exports:{}},tu={},Qy={exports:{}},Jy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AA;function sF(){return AA||(AA=1,(function(e){function t(I,q){var W=I.length;I.push(q);e:for(;0<W;){var Q=W-1>>>1,L=I[Q];if(0<i(L,q))I[Q]=q,I[W]=L,W=Q;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var q=I[0],W=I.pop();if(W!==q){I[0]=W;e:for(var Q=0,L=I.length,K=L>>>1;Q<K;){var se=2*(Q+1)-1,ce=I[se],H=se+1,X=I[H];if(0>i(ce,W))H<L&&0>i(X,ce)?(I[Q]=X,I[H]=W,Q=H):(I[Q]=ce,I[se]=W,Q=se);else if(H<L&&0>i(X,W))I[Q]=X,I[H]=W,Q=H;else break e}}return q}function i(I,q){var W=I.sortIndex-q.sortIndex;return W!==0?W:I.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,y=!1,x=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(I){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=I)r(d),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(d)}}function A(I){if(S=!1,T(I),!x)if(n(u)!==null)x=!0,_||(_=!0,B());else{var q=n(d);q!==null&&F(A,q.startTime-I)}}var _=!1,R=-1,D=5,P=-1;function $(){return w?!0:!(e.unstable_now()-P<D)}function V(){if(w=!1,_){var I=e.unstable_now();P=I;var q=!0;try{e:{x=!1,S&&(S=!1,N(R),R=-1),y=!0;var W=g;try{t:{for(T(I),p=n(u);p!==null&&!(p.expirationTime>I&&$());){var Q=p.callback;if(typeof Q=="function"){p.callback=null,g=p.priorityLevel;var L=Q(p.expirationTime<=I);if(I=e.unstable_now(),typeof L=="function"){p.callback=L,T(I),q=!0;break t}p===n(u)&&r(u),T(I)}else r(u);p=n(u)}if(p!==null)q=!0;else{var K=n(d);K!==null&&F(A,K.startTime-I),q=!1}}break e}finally{p=null,g=W,y=!1}q=void 0}}finally{q?B():_=!1}}}var B;if(typeof k=="function")B=function(){k(V)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=V,B=function(){z.postMessage(null)}}else B=function(){E(V,0)};function F(I,q){R=E(function(){I(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(I){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var W=g;g=q;try{return I()}finally{g=W}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(I,q){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=g;g=I;try{return q()}finally{g=W}},e.unstable_scheduleCallback=function(I,q,W){var Q=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,I){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,I={id:h++,callback:q,priorityLevel:I,startTime:W,expirationTime:L,sortIndex:-1},W>Q?(I.sortIndex=W,t(d,I),n(u)===null&&I===n(d)&&(S?(N(R),R=-1):S=!0,F(A,W-Q))):(I.sortIndex=L,t(u,I),x||y||(x=!0,_||(_=!0,B()))),I},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(I){var q=g;return function(){var W=g;g=q;try{return I.apply(this,arguments)}finally{g=W}}}})(Jy)),Jy}var MA;function oF(){return MA||(MA=1,Qy.exports=sF()),Qy.exports}var e0={exports:{}},En={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _A;function aF(){if(_A)return En;_A=1;var e=pd();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return En.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,En.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},En.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},En.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},En.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},En.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},En.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},En.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},En.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},En.requestFormReset=function(u){r.d.r(u)},En.unstable_batchedUpdates=function(u,d){return u(d)},En.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},En.useFormStatus=function(){return o.H.useHostTransitionStatus()},En.version="19.1.1",En}var DA;function pP(){if(DA)return e0.exports;DA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),e0.exports=aF(),e0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RA;function lF(){if(RA)return tu;RA=1;var e=oF(),t=pd(),n=pP();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,m=c;;){var b=f.return;if(b===null)break;var C=b.alternate;if(C===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===f)return l(b),a;if(C===m)return l(b),c;C=C.sibling}throw Error(r(188))}if(f.return!==m.return)f=b,m=C;else{for(var M=!1,j=b.child;j;){if(j===f){M=!0,f=b,m=C;break}if(j===m){M=!0,m=b,f=C;break}j=j.sibling}if(!M){for(j=C.child;j;){if(j===f){M=!0,f=C,m=b;break}if(j===m){M=!0,m=C,f=b;break}j=j.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function B(a){return a===null||typeof a!="object"?null:(a=V&&a[V]||a["@@iterator"],typeof a=="function"?a:null)}var G=Symbol.for("react.client.reference");function z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===G?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case P:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case k:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return c=a.displayName||null,c!==null?c:z(a.type)||"Memo";case D:c=a._payload,a=a._init;try{return z(a(c))}catch{}}return null}var F=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},Q=[],L=-1;function K(a){return{current:a}}function se(a){0>L||(a.current=Q[L],Q[L]=null,L--)}function ce(a,c){L++,Q[L]=a.current,a.current=c}var H=K(null),X=K(null),ee=K(null),ue=K(null);function le(a,c){switch(ce(ee,c),ce(X,a),ce(H,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?QT(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=QT(c),a=JT(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}se(H),ce(H,a)}function ge(){se(H),se(X),se(ee)}function Ee(a){a.memoizedState!==null&&ce(ue,a);var c=H.current,f=JT(c,a.type);c!==f&&(ce(X,a),ce(H,f))}function je(a){X.current===a&&(se(H),se(X)),ue.current===a&&(se(ue),Wc._currentValue=W)}var ke=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,we=e.unstable_cancelCallback,ve=e.unstable_shouldYield,Pe=e.unstable_requestPaint,Ae=e.unstable_now,at=e.unstable_getCurrentPriorityLevel,gt=e.unstable_ImmediatePriority,Or=e.unstable_UserBlockingPriority,wn=e.unstable_NormalPriority,Wt=e.unstable_LowPriority,rt=e.unstable_IdlePriority,nn=e.log,fn=e.unstable_setDisableYieldValue,Xt=null,dt=null;function zt(a){if(typeof nn=="function"&&fn(a),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(Xt,a)}catch{}}var wt=Math.clz32?Math.clz32:jr,Qr=Math.log,po=Math.LN2;function jr(a){return a>>>=0,a===0?32:31-(Qr(a)/po|0)|0}var Zt=256,hn=4194304;function Lr(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Ei(a,c,f){var m=a.pendingLanes;if(m===0)return 0;var b=0,C=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var j=m&134217727;return j!==0?(m=j&~C,m!==0?b=Lr(m):(M&=j,M!==0?b=Lr(M):f||(f=j&~a,f!==0&&(b=Lr(f))))):(j=m&~C,j!==0?b=Lr(j):M!==0?b=Lr(M):f||(f=m&~a,f!==0&&(b=Lr(f)))),b===0?0:c!==0&&c!==b&&(c&C)===0&&(C=b&-b,f=c&-c,C>=f||C===32&&(f&4194048)!==0)?c:b}function ki(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function rc(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Aa(){var a=Zt;return Zt<<=1,(Zt&4194048)===0&&(Zt=256),a}function Ma(){var a=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),a}function He(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function ur(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function mo(a,c,f,m,b,C){var M=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var j=a.entanglements,U=a.expirationTimes,re=a.hiddenUpdates;for(f=M&~f;0<f;){var de=31-wt(f),he=1<<de;j[de]=0,U[de]=-1;var ie=re[de];if(ie!==null)for(re[de]=null,de=0;de<ie.length;de++){var oe=ie[de];oe!==null&&(oe.lane&=-536870913)}f&=~he}m!==0&&go(a,m,0),C!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=C&~(M&~c))}function go(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var m=31-wt(c);a.entangledLanes|=c,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function Ni(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var m=31-wt(f),b=1<<m;b&c|a[m]&c&&(a[m]|=c),f&=~b}}function Jr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function yo(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ei(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:vA(a.type))}function ic(a,c){var f=q.p;try{return q.p=a,c()}finally{q.p=f}}var Pn=Math.random().toString(36).slice(2),Nt="__reactFiber$"+Pn,Qt="__reactProps$"+Pn,Pr="__reactContainer$"+Pn,vo="__reactEvents$"+Pn,_a="__reactListeners$"+Pn,us="__reactHandles$"+Pn,Da="__reactResources$"+Pn,Ti="__reactMarker$"+Pn;function ds(a){delete a[Nt],delete a[Qt],delete a[vo],delete a[_a],delete a[us]}function ti(a){var c=a[Nt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Pr]||f[Nt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=rA(a);a!==null;){if(f=a[Nt])return f;a=rA(a)}return c}a=f,f=a.parentNode}return null}function Ir(a){if(a=a[Nt]||a[Pr]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function ni(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Br(a){var c=a[Da];return c||(c=a[Da]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Tt(a){a[Ti]=!0}var Ai=new Set,fs={};function dr(a,c){ri(a,c),ri(a+"Capture",c)}function ri(a,c){for(fs[a]=c,a=0;a<c.length;a++)Ai.add(c[a])}var sc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bo={},Ra={};function oc(a){return ke.call(Ra,a)?!0:ke.call(bo,a)?!1:sc.test(a)?Ra[a]=!0:(bo[a]=!0,!1)}function ii(a,c,f){if(oc(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function hs(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function Yn(a,c,f,m){if(m===null)a.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+m)}}var xo,Oa;function zr(a){if(xo===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);xo=c&&c[1]||"",Oa=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xo+a+Oa}var wo=!1;function ps(a,c){if(!a||wo)return"";wo=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(oe){var ie=oe}Reflect.construct(a,[],he)}else{try{he.call()}catch(oe){ie=oe}a.call(he.prototype)}}else{try{throw Error()}catch(oe){ie=oe}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(oe){if(oe&&ie&&typeof oe.stack=="string")return[oe.stack,ie.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),M=C[0],j=C[1];if(M&&j){var U=M.split(`
`),re=j.split(`
`);for(b=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;b<re.length&&!re[b].includes("DetermineComponentFrameRoot");)b++;if(m===U.length||b===re.length)for(m=U.length-1,b=re.length-1;1<=m&&0<=b&&U[m]!==re[b];)b--;for(;1<=m&&0<=b;m--,b--)if(U[m]!==re[b]){if(m!==1||b!==1)do if(m--,b--,0>b||U[m]!==re[b]){var de=`
`+U[m].replace(" at new "," at ");return a.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",a.displayName)),de}while(1<=m&&0<=b);break}}}finally{wo=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?zr(f):""}function ac(a){switch(a.tag){case 26:case 27:case 5:return zr(a.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 15:return ps(a.type,!1);case 11:return ps(a.type.render,!1);case 1:return ps(a.type,!0);case 31:return zr("Activity");default:return""}}function ja(a){try{var c="";do c+=ac(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Sn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function te(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Z(a){var c=te(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),m=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,C=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(M){m=""+M,C.call(this,M)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function ae(a){a._valueTracker||(a._valueTracker=Z(a))}function pe(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return a&&(m=te(a)?a.checked?"true":"false":a.value),a=m,a!==f?(c.setValue(a),!0):!1}function be(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Se=/[\n"\\]/g;function _e(a){return a.replace(Se,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Fe(a,c,f,m,b,C,M,j){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),c!=null?M==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Sn(c)):a.value!==""+Sn(c)&&(a.value=""+Sn(c)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),c!=null?Mn(a,M,Sn(c)):f!=null?Mn(a,M,Sn(f)):m!=null&&a.removeAttribute("value"),b==null&&C!=null&&(a.defaultChecked=!!C),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.name=""+Sn(j):a.removeAttribute("name")}function qt(a,c,f,m,b,C,M,j){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+Sn(f):"",c=c!=null?""+Sn(c):f,j||c===a.value||(a.value=c),a.defaultValue=c}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=j?a.checked:!!m,a.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M)}function Mn(a,c,f){c==="number"&&be(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function rn(a,c,f,m){if(a=a.options,c){c={};for(var b=0;b<f.length;b++)c["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=c.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&m&&(a[f].defaultSelected=!0)}else{for(f=""+Sn(f),c=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Mi(a,c,f){if(c!=null&&(c=""+Sn(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+Sn(f):""}function Je(a,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(r(92));if(F(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=Sn(c),a.defaultValue=f,m=a.textContent,m===f&&m!==""&&m!==null&&(a.value=m)}function At(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Km=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qk(a,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":m?a.setProperty(c,f):typeof f!="number"||f===0||Km.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Jk(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var b in c)m=c[b],c.hasOwnProperty(b)&&f[b]!==m&&Qk(a,b,m)}else for(var C in c)c.hasOwnProperty(C)&&Qk(a,C,c[C])}function Ym(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),JV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Id(a){return JV.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Wm=null;function Xm(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var La=null,Pa=null;function e2(a){var c=Ir(a);if(c&&(a=c.stateNode)){var f=a[Qt]||null;e:switch(a=c.stateNode,c.type){case"input":if(Fe(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+_e(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==a&&m.form===a.form){var b=m[Qt]||null;if(!b)throw Error(r(90));Fe(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===a.form&&pe(m)}break e;case"textarea":Mi(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&rn(a,!!f.multiple,c,!1)}}}var Zm=!1;function t2(a,c,f){if(Zm)return a(c,f);Zm=!0;try{var m=a(c);return m}finally{if(Zm=!1,(La!==null||Pa!==null)&&(Cf(),La&&(c=La,a=Pa,Pa=La=null,e2(c),a)))for(c=0;c<a.length;c++)e2(a[c])}}function lc(a,c){var f=a.stateNode;if(f===null)return null;var m=f[Qt]||null;if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var _i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qm=!1;if(_i)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Qm=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Qm=!1}var ms=null,Jm=null,Bd=null;function n2(){if(Bd)return Bd;var a,c=Jm,f=c.length,m,b="value"in ms?ms.value:ms.textContent,C=b.length;for(a=0;a<f&&c[a]===b[a];a++);var M=f-a;for(m=1;m<=M&&c[f-m]===b[C-m];m++);return Bd=b.slice(a,1<m?1-m:void 0)}function zd(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function qd(){return!0}function r2(){return!1}function In(a){function c(f,m,b,C,M){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(f=a[j],this[j]=f?f(C):C[j]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?qd:r2,this.isPropagationStopped=r2,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=qd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=qd)},persist:function(){},isPersistent:qd}),c}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vd=In(So),uc=h({},So,{view:0,detail:0}),e8=In(uc),eg,tg,dc,Hd=h({},uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==dc&&(dc&&a.type==="mousemove"?(eg=a.screenX-dc.screenX,tg=a.screenY-dc.screenY):tg=eg=0,dc=a),eg)},movementY:function(a){return"movementY"in a?a.movementY:tg}}),i2=In(Hd),t8=h({},Hd,{dataTransfer:0}),n8=In(t8),r8=h({},uc,{relatedTarget:0}),ng=In(r8),i8=h({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),s8=In(i8),o8=h({},So,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),a8=In(o8),l8=h({},So,{data:0}),s2=In(l8),c8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f8(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=d8[a])?!!c[a]:!1}function rg(){return f8}var h8=h({},uc,{key:function(a){if(a.key){var c=c8[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=zd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?u8[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(a){return a.type==="keypress"?zd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?zd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),p8=In(h8),m8=h({},Hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o2=In(m8),g8=h({},uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),y8=In(g8),v8=h({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),b8=In(v8),x8=h({},Hd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),w8=In(x8),S8=h({},So,{newState:0,oldState:0}),C8=In(S8),E8=[9,13,27,32],ig=_i&&"CompositionEvent"in window,fc=null;_i&&"documentMode"in document&&(fc=document.documentMode);var k8=_i&&"TextEvent"in window&&!fc,a2=_i&&(!ig||fc&&8<fc&&11>=fc),l2=" ",c2=!1;function u2(a,c){switch(a){case"keyup":return E8.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ia=!1;function N8(a,c){switch(a){case"compositionend":return d2(c);case"keypress":return c.which!==32?null:(c2=!0,l2);case"textInput":return a=c.data,a===l2&&c2?null:a;default:return null}}function T8(a,c){if(Ia)return a==="compositionend"||!ig&&u2(a,c)?(a=n2(),Bd=Jm=ms=null,Ia=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return a2&&c.locale!=="ko"?null:c.data;default:return null}}var A8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f2(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!A8[a.type]:c==="textarea"}function h2(a,c,f,m){La?Pa?Pa.push(m):Pa=[m]:La=m,c=Mf(c,"onChange"),0<c.length&&(f=new Vd("onChange","change",null,f,m),a.push({event:f,listeners:c}))}var hc=null,pc=null;function M8(a){KT(a,0)}function Fd(a){var c=ni(a);if(pe(c))return a}function p2(a,c){if(a==="change")return c}var m2=!1;if(_i){var sg;if(_i){var og="oninput"in document;if(!og){var g2=document.createElement("div");g2.setAttribute("oninput","return;"),og=typeof g2.oninput=="function"}sg=og}else sg=!1;m2=sg&&(!document.documentMode||9<document.documentMode)}function y2(){hc&&(hc.detachEvent("onpropertychange",v2),pc=hc=null)}function v2(a){if(a.propertyName==="value"&&Fd(pc)){var c=[];h2(c,pc,a,Xm(a)),t2(M8,c)}}function _8(a,c,f){a==="focusin"?(y2(),hc=c,pc=f,hc.attachEvent("onpropertychange",v2)):a==="focusout"&&y2()}function D8(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Fd(pc)}function R8(a,c){if(a==="click")return Fd(c)}function O8(a,c){if(a==="input"||a==="change")return Fd(c)}function j8(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Wn=typeof Object.is=="function"?Object.is:j8;function mc(a,c){if(Wn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!ke.call(c,b)||!Wn(a[b],c[b]))return!1}return!0}function b2(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function x2(a,c){var f=b2(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=c&&m>=c)return{node:f,offset:c-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=b2(f)}}function w2(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?w2(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function S2(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=be(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=be(a.document)}return c}function ag(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var L8=_i&&"documentMode"in document&&11>=document.documentMode,Ba=null,lg=null,gc=null,cg=!1;function C2(a,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;cg||Ba==null||Ba!==be(m)||(m=Ba,"selectionStart"in m&&ag(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),gc&&mc(gc,m)||(gc=m,m=Mf(lg,"onSelect"),0<m.length&&(c=new Vd("onSelect","select",null,c,f),a.push({event:c,listeners:m}),c.target=Ba)))}function Co(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var za={animationend:Co("Animation","AnimationEnd"),animationiteration:Co("Animation","AnimationIteration"),animationstart:Co("Animation","AnimationStart"),transitionrun:Co("Transition","TransitionRun"),transitionstart:Co("Transition","TransitionStart"),transitioncancel:Co("Transition","TransitionCancel"),transitionend:Co("Transition","TransitionEnd")},ug={},E2={};_i&&(E2=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Eo(a){if(ug[a])return ug[a];if(!za[a])return a;var c=za[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in E2)return ug[a]=c[f];return a}var k2=Eo("animationend"),N2=Eo("animationiteration"),T2=Eo("animationstart"),P8=Eo("transitionrun"),I8=Eo("transitionstart"),B8=Eo("transitioncancel"),A2=Eo("transitionend"),M2=new Map,dg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dg.push("scrollEnd");function qr(a,c){M2.set(a,c),dr(c,[a])}var _2=new WeakMap;function fr(a,c){if(typeof a=="object"&&a!==null){var f=_2.get(a);return f!==void 0?f:(c={value:a,source:c,stack:ja(c)},_2.set(a,c),c)}return{value:a,source:c,stack:ja(c)}}var hr=[],qa=0,fg=0;function Ud(){for(var a=qa,c=fg=qa=0;c<a;){var f=hr[c];hr[c++]=null;var m=hr[c];hr[c++]=null;var b=hr[c];hr[c++]=null;var C=hr[c];if(hr[c++]=null,m!==null&&b!==null){var M=m.pending;M===null?b.next=b:(b.next=M.next,M.next=b),m.pending=b}C!==0&&D2(f,b,C)}}function $d(a,c,f,m){hr[qa++]=a,hr[qa++]=c,hr[qa++]=f,hr[qa++]=m,fg|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function hg(a,c,f,m){return $d(a,c,f,m),Gd(a)}function Va(a,c){return $d(a,null,null,c),Gd(a)}function D2(a,c,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var b=!1,C=a.return;C!==null;)C.childLanes|=f,m=C.alternate,m!==null&&(m.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(b=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,b&&c!==null&&(b=31-wt(f),a=C.hiddenUpdates,m=a[b],m===null?a[b]=[c]:m.push(c),c.lane=f|536870912),C):null}function Gd(a){if(50<Vc)throw Vc=0,by=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Ha={};function z8(a,c,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(a,c,f,m){return new z8(a,c,f,m)}function pg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Di(a,c){var f=a.alternate;return f===null?(f=Xn(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function R2(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Kd(a,c,f,m,b,C){var M=0;if(m=a,typeof a=="function")pg(a)&&(M=1);else if(typeof a=="string")M=VH(a,f,H.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case P:return a=Xn(31,f,c,b),a.elementType=P,a.lanes=C,a;case x:return ko(f.children,b,C,c);case S:M=8,b|=24;break;case w:return a=Xn(12,f,c,b|2),a.elementType=w,a.lanes=C,a;case A:return a=Xn(13,f,c,b),a.elementType=A,a.lanes=C,a;case _:return a=Xn(19,f,c,b),a.elementType=_,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case k:M=10;break e;case N:M=9;break e;case T:M=11;break e;case R:M=14;break e;case D:M=16,m=null;break e}M=29,f=Error(r(130,a===null?"null":typeof a,"")),m=null}return c=Xn(M,f,c,b),c.elementType=a,c.type=m,c.lanes=C,c}function ko(a,c,f,m){return a=Xn(7,a,m,c),a.lanes=f,a}function mg(a,c,f){return a=Xn(6,a,null,c),a.lanes=f,a}function gg(a,c,f){return c=Xn(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Fa=[],Ua=0,Yd=null,Wd=0,pr=[],mr=0,No=null,Ri=1,Oi="";function To(a,c){Fa[Ua++]=Wd,Fa[Ua++]=Yd,Yd=a,Wd=c}function O2(a,c,f){pr[mr++]=Ri,pr[mr++]=Oi,pr[mr++]=No,No=a;var m=Ri;a=Oi;var b=32-wt(m)-1;m&=~(1<<b),f+=1;var C=32-wt(c)+b;if(30<C){var M=b-b%5;C=(m&(1<<M)-1).toString(32),m>>=M,b-=M,Ri=1<<32-wt(c)+b|f<<b|m,Oi=C+a}else Ri=1<<C|f<<b|m,Oi=a}function yg(a){a.return!==null&&(To(a,1),O2(a,1,0))}function vg(a){for(;a===Yd;)Yd=Fa[--Ua],Fa[Ua]=null,Wd=Fa[--Ua],Fa[Ua]=null;for(;a===No;)No=pr[--mr],pr[mr]=null,Oi=pr[--mr],pr[mr]=null,Ri=pr[--mr],pr[mr]=null}var _n=null,Mt=null,nt=!1,Ao=null,si=!1,bg=Error(r(519));function Mo(a){var c=Error(r(418,""));throw bc(fr(c,a)),bg}function j2(a){var c=a.stateNode,f=a.type,m=a.memoizedProps;switch(c[Nt]=a,c[Qt]=m,f){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(f=0;f<Fc.length;f++)Xe(Fc[f],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":Xe("invalid",c),qt(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),ae(c);break;case"select":Xe("invalid",c);break;case"textarea":Xe("invalid",c),Je(c,m.value,m.defaultValue,m.children),ae(c)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||ZT(c.textContent,f)?(m.popover!=null&&(Xe("beforetoggle",c),Xe("toggle",c)),m.onScroll!=null&&Xe("scroll",c),m.onScrollEnd!=null&&Xe("scrollend",c),m.onClick!=null&&(c.onclick=_f),c=!0):c=!1,c||Mo(a)}function L2(a){for(_n=a.return;_n;)switch(_n.tag){case 5:case 13:si=!1;return;case 27:case 3:si=!0;return;default:_n=_n.return}}function yc(a){if(a!==_n)return!1;if(!nt)return L2(a),nt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Ly(a.type,a.memoizedProps)),f=!f),f&&Mt&&Mo(a),L2(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Mt=Hr(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Mt=null}}else c===27?(c=Mt,Ds(a.type)?(a=zy,zy=null,Mt=a):Mt=c):Mt=_n?Hr(a.stateNode.nextSibling):null;return!0}function vc(){Mt=_n=null,nt=!1}function P2(){var a=Ao;return a!==null&&(qn===null?qn=a:qn.push.apply(qn,a),Ao=null),a}function bc(a){Ao===null?Ao=[a]:Ao.push(a)}var xg=K(null),_o=null,ji=null;function gs(a,c,f){ce(xg,c._currentValue),c._currentValue=f}function Li(a){a._currentValue=xg.current,se(xg)}function wg(a,c,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),a===f)break;a=a.return}}function Sg(a,c,f,m){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var C=b.dependencies;if(C!==null){var M=b.child;C=C.firstContext;e:for(;C!==null;){var j=C;C=b;for(var U=0;U<c.length;U++)if(j.context===c[U]){C.lanes|=f,j=C.alternate,j!==null&&(j.lanes|=f),wg(C.return,f,a),m||(M=null);break e}C=j.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=f,C=M.alternate,C!==null&&(C.lanes|=f),wg(M,f,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function xc(a,c,f,m){a=null;for(var b=c,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var j=b.type;Wn(b.pendingProps.value,M.value)||(a!==null?a.push(j):a=[j])}}else if(b===ue.current){if(M=b.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(Wc):a=[Wc])}b=b.return}a!==null&&Sg(c,a,f,m),c.flags|=262144}function Xd(a){for(a=a.firstContext;a!==null;){if(!Wn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Do(a){_o=a,ji=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Cn(a){return I2(_o,a)}function Zd(a,c){return _o===null&&Do(a),I2(a,c)}function I2(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},ji===null){if(a===null)throw Error(r(308));ji=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else ji=ji.next=c;return f}var q8=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},V8=e.unstable_scheduleCallback,H8=e.unstable_NormalPriority,Jt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cg(){return{controller:new q8,data:new Map,refCount:0}}function wc(a){a.refCount--,a.refCount===0&&V8(H8,function(){a.controller.abort()})}var Sc=null,Eg=0,$a=0,Ga=null;function F8(a,c){if(Sc===null){var f=Sc=[];Eg=0,$a=Ny(),Ga={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Eg++,c.then(B2,B2),c}function B2(){if(--Eg===0&&Sc!==null){Ga!==null&&(Ga.status="fulfilled");var a=Sc;Sc=null,$a=0,Ga=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function U8(a,c){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return a.then(function(){m.status="fulfilled",m.value=c;for(var b=0;b<f.length;b++)(0,f[b])(c)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var z2=I.S;I.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&F8(a,c),z2!==null&&z2(a,c)};var Ro=K(null);function kg(){var a=Ro.current;return a!==null?a:pt.pooledCache}function Qd(a,c){c===null?ce(Ro,Ro.current):ce(Ro,c.pool)}function q2(){var a=kg();return a===null?null:{parent:Jt._currentValue,pool:a}}var Cc=Error(r(460)),V2=Error(r(474)),Jd=Error(r(542)),Ng={then:function(){}};function H2(a){return a=a.status,a==="fulfilled"||a==="rejected"}function ef(){}function F2(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(ef,ef),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,$2(a),a;default:if(typeof c.status=="string")c.then(ef,ef);else{if(a=pt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(m){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=m}},function(m){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,$2(a),a}throw Ec=c,Cc}}var Ec=null;function U2(){if(Ec===null)throw Error(r(459));var a=Ec;return Ec=null,a}function $2(a){if(a===Cc||a===Jd)throw Error(r(483))}var ys=!1;function Tg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ag(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function vs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function bs(a,c,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(it&2)!==0){var b=m.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),m.pending=c,c=Gd(a),D2(a,null,f),c}return $d(a,m,c,f),Gd(a)}function kc(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,Ni(a,f)}}function Mg(a,c){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var M={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?b=C=M:C=C.next=M,f=f.next}while(f!==null);C===null?b=C=c:C=C.next=c}else b=C=c;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var _g=!1;function Nc(){if(_g){var a=Ga;if(a!==null)throw a}}function Tc(a,c,f,m){_g=!1;var b=a.updateQueue;ys=!1;var C=b.firstBaseUpdate,M=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var U=j,re=U.next;U.next=null,M===null?C=re:M.next=re,M=U;var de=a.alternate;de!==null&&(de=de.updateQueue,j=de.lastBaseUpdate,j!==M&&(j===null?de.firstBaseUpdate=re:j.next=re,de.lastBaseUpdate=U))}if(C!==null){var he=b.baseState;M=0,de=re=U=null,j=C;do{var ie=j.lane&-536870913,oe=ie!==j.lane;if(oe?(Qe&ie)===ie:(m&ie)===ie){ie!==0&&ie===$a&&(_g=!0),de!==null&&(de=de.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Be=a,Le=j;ie=c;var ut=f;switch(Le.tag){case 1:if(Be=Le.payload,typeof Be=="function"){he=Be.call(ut,he,ie);break e}he=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Le.payload,ie=typeof Be=="function"?Be.call(ut,he,ie):Be,ie==null)break e;he=h({},he,ie);break e;case 2:ys=!0}}ie=j.callback,ie!==null&&(a.flags|=64,oe&&(a.flags|=8192),oe=b.callbacks,oe===null?b.callbacks=[ie]:oe.push(ie))}else oe={lane:ie,tag:j.tag,payload:j.payload,callback:j.callback,next:null},de===null?(re=de=oe,U=he):de=de.next=oe,M|=ie;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;oe=j,j=oe.next,oe.next=null,b.lastBaseUpdate=oe,b.shared.pending=null}}while(!0);de===null&&(U=he),b.baseState=U,b.firstBaseUpdate=re,b.lastBaseUpdate=de,C===null&&(b.shared.lanes=0),Ts|=M,a.lanes=M,a.memoizedState=he}}function G2(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function K2(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)G2(f[a],c)}var Ka=K(null),tf=K(0);function Y2(a,c){a=Hi,ce(tf,a),ce(Ka,c),Hi=a|c.baseLanes}function Dg(){ce(tf,Hi),ce(Ka,Ka.current)}function Rg(){Hi=tf.current,se(Ka),se(tf)}var xs=0,Ke=null,lt=null,Vt=null,nf=!1,Ya=!1,Oo=!1,rf=0,Ac=0,Wa=null,$8=0;function Lt(){throw Error(r(321))}function Og(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Wn(a[f],c[f]))return!1;return!0}function jg(a,c,f,m,b,C){return xs=C,Ke=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,I.H=a===null||a.memoizedState===null?DN:RN,Oo=!1,C=f(m,b),Oo=!1,Ya&&(C=X2(c,f,m,b)),W2(a),C}function W2(a){I.H=uf;var c=lt!==null&&lt.next!==null;if(xs=0,Vt=lt=Ke=null,nf=!1,Ac=0,Wa=null,c)throw Error(r(300));a===null||sn||(a=a.dependencies,a!==null&&Xd(a)&&(sn=!0))}function X2(a,c,f,m){Ke=a;var b=0;do{if(Ya&&(Wa=null),Ac=0,Ya=!1,25<=b)throw Error(r(301));if(b+=1,Vt=lt=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}I.H=Q8,C=c(f,m)}while(Ya);return C}function G8(){var a=I.H,c=a.useState()[0];return c=typeof c.then=="function"?Mc(c):c,a=a.useState()[0],(lt!==null?lt.memoizedState:null)!==a&&(Ke.flags|=1024),c}function Lg(){var a=rf!==0;return rf=0,a}function Pg(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Ig(a){if(nf){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}nf=!1}xs=0,Vt=lt=Ke=null,Ya=!1,Ac=rf=0,Wa=null}function Bn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ke.memoizedState=Vt=a:Vt=Vt.next=a,Vt}function Ht(){if(lt===null){var a=Ke.alternate;a=a!==null?a.memoizedState:null}else a=lt.next;var c=Vt===null?Ke.memoizedState:Vt.next;if(c!==null)Vt=c,lt=a;else{if(a===null)throw Ke.alternate===null?Error(r(467)):Error(r(310));lt=a,a={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Vt===null?Ke.memoizedState=Vt=a:Vt=Vt.next=a}return Vt}function Bg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Mc(a){var c=Ac;return Ac+=1,Wa===null&&(Wa=[]),a=F2(Wa,a,c),c=Ke,(Vt===null?c.memoizedState:Vt.next)===null&&(c=c.alternate,I.H=c===null||c.memoizedState===null?DN:RN),a}function sf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Mc(a);if(a.$$typeof===k)return Cn(a)}throw Error(r(438,String(a)))}function zg(a){var c=null,f=Ke.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=Ke.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Bg(),Ke.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),m=0;m<a;m++)f[m]=$;return c.index++,f}function Pi(a,c){return typeof c=="function"?c(a):c}function of(a){var c=Ht();return qg(c,lt,a)}function qg(a,c,f){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var b=a.baseQueue,C=m.pending;if(C!==null){if(b!==null){var M=b.next;b.next=C.next,C.next=M}c.baseQueue=b=C,m.pending=null}if(C=a.baseState,b===null)a.memoizedState=C;else{c=b.next;var j=M=null,U=null,re=c,de=!1;do{var he=re.lane&-536870913;if(he!==re.lane?(Qe&he)===he:(xs&he)===he){var ie=re.revertLane;if(ie===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),he===$a&&(de=!0);else if((xs&ie)===ie){re=re.next,ie===$a&&(de=!0);continue}else he={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=he,M=C):U=U.next=he,Ke.lanes|=ie,Ts|=ie;he=re.action,Oo&&f(C,he),C=re.hasEagerState?re.eagerState:f(C,he)}else ie={lane:he,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=ie,M=C):U=U.next=ie,Ke.lanes|=he,Ts|=he;re=re.next}while(re!==null&&re!==c);if(U===null?M=C:U.next=j,!Wn(C,a.memoizedState)&&(sn=!0,de&&(f=Ga,f!==null)))throw f;a.memoizedState=C,a.baseState=M,a.baseQueue=U,m.lastRenderedState=C}return b===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Vg(a){var c=Ht(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var m=f.dispatch,b=f.pending,C=c.memoizedState;if(b!==null){f.pending=null;var M=b=b.next;do C=a(C,M.action),M=M.next;while(M!==b);Wn(C,c.memoizedState)||(sn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,m]}function Z2(a,c,f){var m=Ke,b=Ht(),C=nt;if(C){if(f===void 0)throw Error(r(407));f=f()}else f=c();var M=!Wn((lt||b).memoizedState,f);M&&(b.memoizedState=f,sn=!0),b=b.queue;var j=eN.bind(null,m,b,a);if(_c(2048,8,j,[a]),b.getSnapshot!==c||M||Vt!==null&&Vt.memoizedState.tag&1){if(m.flags|=2048,Xa(9,af(),J2.bind(null,m,b,f,c),null),pt===null)throw Error(r(349));C||(xs&124)!==0||Q2(m,c,f)}return f}function Q2(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Ke.updateQueue,c===null?(c=Bg(),Ke.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function J2(a,c,f,m){c.value=f,c.getSnapshot=m,tN(c)&&nN(a)}function eN(a,c,f){return f(function(){tN(c)&&nN(a)})}function tN(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Wn(a,f)}catch{return!0}}function nN(a){var c=Va(a,2);c!==null&&tr(c,a,2)}function Hg(a){var c=Bn();if(typeof a=="function"){var f=a;if(a=f(),Oo){zt(!0);try{f()}finally{zt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:a},c}function rN(a,c,f,m){return a.baseState=f,qg(a,lt,typeof m=="function"?m:Pi)}function K8(a,c,f,m,b){if(cf(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};I.T!==null?f(!0):C.isTransition=!1,m(C),f=c.pending,f===null?(C.next=c.pending=C,iN(c,C)):(C.next=f.next,c.pending=f.next=C)}}function iN(a,c){var f=c.action,m=c.payload,b=a.state;if(c.isTransition){var C=I.T,M={};I.T=M;try{var j=f(b,m),U=I.S;U!==null&&U(M,j),sN(a,c,j)}catch(re){Fg(a,c,re)}finally{I.T=C}}else try{C=f(b,m),sN(a,c,C)}catch(re){Fg(a,c,re)}}function sN(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){oN(a,c,m)},function(m){return Fg(a,c,m)}):oN(a,c,f)}function oN(a,c,f){c.status="fulfilled",c.value=f,aN(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,iN(a,f)))}function Fg(a,c,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,aN(c),c=c.next;while(c!==m)}a.action=null}function aN(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function lN(a,c){return c}function cN(a,c){if(nt){var f=pt.formState;if(f!==null){e:{var m=Ke;if(nt){if(Mt){t:{for(var b=Mt,C=si;b.nodeType!==8;){if(!C){b=null;break t}if(b=Hr(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){Mt=Hr(b.nextSibling),m=b.data==="F!";break e}}Mo(m)}m=!1}m&&(c=f[0])}}return f=Bn(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lN,lastRenderedState:c},f.queue=m,f=AN.bind(null,Ke,m),m.dispatch=f,m=Hg(!1),C=Yg.bind(null,Ke,!1,m.queue),m=Bn(),b={state:c,dispatch:null,action:a,pending:null},m.queue=b,f=K8.bind(null,Ke,b,C,f),b.dispatch=f,m.memoizedState=a,[c,f,!1]}function uN(a){var c=Ht();return dN(c,lt,a)}function dN(a,c,f){if(c=qg(a,c,lN)[0],a=of(Pi)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Mc(c)}catch(M){throw M===Cc?Jd:M}else m=c;c=Ht();var b=c.queue,C=b.dispatch;return f!==c.memoizedState&&(Ke.flags|=2048,Xa(9,af(),Y8.bind(null,b,f),null)),[m,C,a]}function Y8(a,c){a.action=c}function fN(a){var c=Ht(),f=lt;if(f!==null)return dN(c,f,a);Ht(),c=c.memoizedState,f=Ht();var m=f.queue.dispatch;return f.memoizedState=a,[c,m,!1]}function Xa(a,c,f,m){return a={tag:a,create:f,deps:m,inst:c,next:null},c=Ke.updateQueue,c===null&&(c=Bg(),Ke.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,c.lastEffect=a),a}function af(){return{destroy:void 0,resource:void 0}}function hN(){return Ht().memoizedState}function lf(a,c,f,m){var b=Bn();m=m===void 0?null:m,Ke.flags|=a,b.memoizedState=Xa(1|c,af(),f,m)}function _c(a,c,f,m){var b=Ht();m=m===void 0?null:m;var C=b.memoizedState.inst;lt!==null&&m!==null&&Og(m,lt.memoizedState.deps)?b.memoizedState=Xa(c,C,f,m):(Ke.flags|=a,b.memoizedState=Xa(1|c,C,f,m))}function pN(a,c){lf(8390656,8,a,c)}function mN(a,c){_c(2048,8,a,c)}function gN(a,c){return _c(4,2,a,c)}function yN(a,c){return _c(4,4,a,c)}function vN(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function bN(a,c,f){f=f!=null?f.concat([a]):null,_c(4,4,vN.bind(null,c,a),f)}function Ug(){}function xN(a,c){var f=Ht();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&Og(c,m[1])?m[0]:(f.memoizedState=[a,c],a)}function wN(a,c){var f=Ht();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&Og(c,m[1]))return m[0];if(m=a(),Oo){zt(!0);try{a()}finally{zt(!1)}}return f.memoizedState=[m,c],m}function $g(a,c,f){return f===void 0||(xs&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=ET(),Ke.lanes|=a,Ts|=a,f)}function SN(a,c,f,m){return Wn(f,c)?f:Ka.current!==null?(a=$g(a,f,m),Wn(a,c)||(sn=!0),a):(xs&42)===0?(sn=!0,a.memoizedState=f):(a=ET(),Ke.lanes|=a,Ts|=a,c)}function CN(a,c,f,m,b){var C=q.p;q.p=C!==0&&8>C?C:8;var M=I.T,j={};I.T=j,Yg(a,!1,c,f);try{var U=b(),re=I.S;if(re!==null&&re(j,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var de=U8(U,m);Dc(a,c,de,er(a))}else Dc(a,c,m,er(a))}catch(he){Dc(a,c,{then:function(){},status:"rejected",reason:he},er())}finally{q.p=C,I.T=M}}function W8(){}function Gg(a,c,f,m){if(a.tag!==5)throw Error(r(476));var b=EN(a).queue;CN(a,b,c,W,f===null?W8:function(){return kN(a),f(m)})}function EN(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:W},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function kN(a){var c=EN(a).next.queue;Dc(a,c,{},er())}function Kg(){return Cn(Wc)}function NN(){return Ht().memoizedState}function TN(){return Ht().memoizedState}function X8(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=er();a=vs(f);var m=bs(c,a,f);m!==null&&(tr(m,c,f),kc(m,c,f)),c={cache:Cg()},a.payload=c;return}c=c.return}}function Z8(a,c,f){var m=er();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},cf(a)?MN(c,f):(f=hg(a,c,f,m),f!==null&&(tr(f,a,m),_N(f,c,m)))}function AN(a,c,f){var m=er();Dc(a,c,f,m)}function Dc(a,c,f,m){var b={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(cf(a))MN(c,b);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var M=c.lastRenderedState,j=C(M,f);if(b.hasEagerState=!0,b.eagerState=j,Wn(j,M))return $d(a,c,b,0),pt===null&&Ud(),!1}catch{}finally{}if(f=hg(a,c,b,m),f!==null)return tr(f,a,m),_N(f,c,m),!0}return!1}function Yg(a,c,f,m){if(m={lane:2,revertLane:Ny(),action:m,hasEagerState:!1,eagerState:null,next:null},cf(a)){if(c)throw Error(r(479))}else c=hg(a,f,m,2),c!==null&&tr(c,a,2)}function cf(a){var c=a.alternate;return a===Ke||c!==null&&c===Ke}function MN(a,c){Ya=nf=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function _N(a,c,f){if((f&4194048)!==0){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,Ni(a,f)}}var uf={readContext:Cn,use:sf,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt},DN={readContext:Cn,use:sf,useCallback:function(a,c){return Bn().memoizedState=[a,c===void 0?null:c],a},useContext:Cn,useEffect:pN,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,lf(4194308,4,vN.bind(null,c,a),f)},useLayoutEffect:function(a,c){return lf(4194308,4,a,c)},useInsertionEffect:function(a,c){lf(4,2,a,c)},useMemo:function(a,c){var f=Bn();c=c===void 0?null:c;var m=a();if(Oo){zt(!0);try{a()}finally{zt(!1)}}return f.memoizedState=[m,c],m},useReducer:function(a,c,f){var m=Bn();if(f!==void 0){var b=f(c);if(Oo){zt(!0);try{f(c)}finally{zt(!1)}}}else b=c;return m.memoizedState=m.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},m.queue=a,a=a.dispatch=Z8.bind(null,Ke,a),[m.memoizedState,a]},useRef:function(a){var c=Bn();return a={current:a},c.memoizedState=a},useState:function(a){a=Hg(a);var c=a.queue,f=AN.bind(null,Ke,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:Ug,useDeferredValue:function(a,c){var f=Bn();return $g(f,a,c)},useTransition:function(){var a=Hg(!1);return a=CN.bind(null,Ke,a.queue,!0,!1),Bn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var m=Ke,b=Bn();if(nt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),pt===null)throw Error(r(349));(Qe&124)!==0||Q2(m,c,f)}b.memoizedState=f;var C={value:f,getSnapshot:c};return b.queue=C,pN(eN.bind(null,m,C,a),[a]),m.flags|=2048,Xa(9,af(),J2.bind(null,m,C,f,c),null),f},useId:function(){var a=Bn(),c=pt.identifierPrefix;if(nt){var f=Oi,m=Ri;f=(m&~(1<<32-wt(m)-1)).toString(32)+f,c=""+c+"R"+f,f=rf++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=$8++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:Kg,useFormState:cN,useActionState:cN,useOptimistic:function(a){var c=Bn();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Yg.bind(null,Ke,!0,f),f.dispatch=c,[a,c]},useMemoCache:zg,useCacheRefresh:function(){return Bn().memoizedState=X8.bind(null,Ke)}},RN={readContext:Cn,use:sf,useCallback:xN,useContext:Cn,useEffect:mN,useImperativeHandle:bN,useInsertionEffect:gN,useLayoutEffect:yN,useMemo:wN,useReducer:of,useRef:hN,useState:function(){return of(Pi)},useDebugValue:Ug,useDeferredValue:function(a,c){var f=Ht();return SN(f,lt.memoizedState,a,c)},useTransition:function(){var a=of(Pi)[0],c=Ht().memoizedState;return[typeof a=="boolean"?a:Mc(a),c]},useSyncExternalStore:Z2,useId:NN,useHostTransitionStatus:Kg,useFormState:uN,useActionState:uN,useOptimistic:function(a,c){var f=Ht();return rN(f,lt,a,c)},useMemoCache:zg,useCacheRefresh:TN},Q8={readContext:Cn,use:sf,useCallback:xN,useContext:Cn,useEffect:mN,useImperativeHandle:bN,useInsertionEffect:gN,useLayoutEffect:yN,useMemo:wN,useReducer:Vg,useRef:hN,useState:function(){return Vg(Pi)},useDebugValue:Ug,useDeferredValue:function(a,c){var f=Ht();return lt===null?$g(f,a,c):SN(f,lt.memoizedState,a,c)},useTransition:function(){var a=Vg(Pi)[0],c=Ht().memoizedState;return[typeof a=="boolean"?a:Mc(a),c]},useSyncExternalStore:Z2,useId:NN,useHostTransitionStatus:Kg,useFormState:fN,useActionState:fN,useOptimistic:function(a,c){var f=Ht();return lt!==null?rN(f,lt,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:zg,useCacheRefresh:TN},Za=null,Rc=0;function df(a){var c=Rc;return Rc+=1,Za===null&&(Za=[]),F2(Za,a,c)}function Oc(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function ff(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function ON(a){var c=a._init;return c(a._payload)}function jN(a){function c(J,Y){if(a){var ne=J.deletions;ne===null?(J.deletions=[Y],J.flags|=16):ne.push(Y)}}function f(J,Y){if(!a)return null;for(;Y!==null;)c(J,Y),Y=Y.sibling;return null}function m(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function b(J,Y){return J=Di(J,Y),J.index=0,J.sibling=null,J}function C(J,Y,ne){return J.index=ne,a?(ne=J.alternate,ne!==null?(ne=ne.index,ne<Y?(J.flags|=67108866,Y):ne):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function M(J){return a&&J.alternate===null&&(J.flags|=67108866),J}function j(J,Y,ne,fe){return Y===null||Y.tag!==6?(Y=mg(ne,J.mode,fe),Y.return=J,Y):(Y=b(Y,ne),Y.return=J,Y)}function U(J,Y,ne,fe){var Ce=ne.type;return Ce===x?de(J,Y,ne.props.children,fe,ne.key):Y!==null&&(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===D&&ON(Ce)===Y.type)?(Y=b(Y,ne.props),Oc(Y,ne),Y.return=J,Y):(Y=Kd(ne.type,ne.key,ne.props,null,J.mode,fe),Oc(Y,ne),Y.return=J,Y)}function re(J,Y,ne,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ne.containerInfo||Y.stateNode.implementation!==ne.implementation?(Y=gg(ne,J.mode,fe),Y.return=J,Y):(Y=b(Y,ne.children||[]),Y.return=J,Y)}function de(J,Y,ne,fe,Ce){return Y===null||Y.tag!==7?(Y=ko(ne,J.mode,fe,Ce),Y.return=J,Y):(Y=b(Y,ne),Y.return=J,Y)}function he(J,Y,ne){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=mg(""+Y,J.mode,ne),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return ne=Kd(Y.type,Y.key,Y.props,null,J.mode,ne),Oc(ne,Y),ne.return=J,ne;case y:return Y=gg(Y,J.mode,ne),Y.return=J,Y;case D:var fe=Y._init;return Y=fe(Y._payload),he(J,Y,ne)}if(F(Y)||B(Y))return Y=ko(Y,J.mode,ne,null),Y.return=J,Y;if(typeof Y.then=="function")return he(J,df(Y),ne);if(Y.$$typeof===k)return he(J,Zd(J,Y),ne);ff(J,Y)}return null}function ie(J,Y,ne,fe){var Ce=Y!==null?Y.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ce!==null?null:j(J,Y,""+ne,fe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:return ne.key===Ce?U(J,Y,ne,fe):null;case y:return ne.key===Ce?re(J,Y,ne,fe):null;case D:return Ce=ne._init,ne=Ce(ne._payload),ie(J,Y,ne,fe)}if(F(ne)||B(ne))return Ce!==null?null:de(J,Y,ne,fe,null);if(typeof ne.then=="function")return ie(J,Y,df(ne),fe);if(ne.$$typeof===k)return ie(J,Y,Zd(J,ne),fe);ff(J,ne)}return null}function oe(J,Y,ne,fe,Ce){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return J=J.get(ne)||null,j(Y,J,""+fe,Ce);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case g:return J=J.get(fe.key===null?ne:fe.key)||null,U(Y,J,fe,Ce);case y:return J=J.get(fe.key===null?ne:fe.key)||null,re(Y,J,fe,Ce);case D:var Ye=fe._init;return fe=Ye(fe._payload),oe(J,Y,ne,fe,Ce)}if(F(fe)||B(fe))return J=J.get(ne)||null,de(Y,J,fe,Ce,null);if(typeof fe.then=="function")return oe(J,Y,ne,df(fe),Ce);if(fe.$$typeof===k)return oe(J,Y,ne,Zd(Y,fe),Ce);ff(Y,fe)}return null}function Be(J,Y,ne,fe){for(var Ce=null,Ye=null,Me=Y,Ie=Y=0,an=null;Me!==null&&Ie<ne.length;Ie++){Me.index>Ie?(an=Me,Me=null):an=Me.sibling;var et=ie(J,Me,ne[Ie],fe);if(et===null){Me===null&&(Me=an);break}a&&Me&&et.alternate===null&&c(J,Me),Y=C(et,Y,Ie),Ye===null?Ce=et:Ye.sibling=et,Ye=et,Me=an}if(Ie===ne.length)return f(J,Me),nt&&To(J,Ie),Ce;if(Me===null){for(;Ie<ne.length;Ie++)Me=he(J,ne[Ie],fe),Me!==null&&(Y=C(Me,Y,Ie),Ye===null?Ce=Me:Ye.sibling=Me,Ye=Me);return nt&&To(J,Ie),Ce}for(Me=m(Me);Ie<ne.length;Ie++)an=oe(Me,J,Ie,ne[Ie],fe),an!==null&&(a&&an.alternate!==null&&Me.delete(an.key===null?Ie:an.key),Y=C(an,Y,Ie),Ye===null?Ce=an:Ye.sibling=an,Ye=an);return a&&Me.forEach(function(Ps){return c(J,Ps)}),nt&&To(J,Ie),Ce}function Le(J,Y,ne,fe){if(ne==null)throw Error(r(151));for(var Ce=null,Ye=null,Me=Y,Ie=Y=0,an=null,et=ne.next();Me!==null&&!et.done;Ie++,et=ne.next()){Me.index>Ie?(an=Me,Me=null):an=Me.sibling;var Ps=ie(J,Me,et.value,fe);if(Ps===null){Me===null&&(Me=an);break}a&&Me&&Ps.alternate===null&&c(J,Me),Y=C(Ps,Y,Ie),Ye===null?Ce=Ps:Ye.sibling=Ps,Ye=Ps,Me=an}if(et.done)return f(J,Me),nt&&To(J,Ie),Ce;if(Me===null){for(;!et.done;Ie++,et=ne.next())et=he(J,et.value,fe),et!==null&&(Y=C(et,Y,Ie),Ye===null?Ce=et:Ye.sibling=et,Ye=et);return nt&&To(J,Ie),Ce}for(Me=m(Me);!et.done;Ie++,et=ne.next())et=oe(Me,J,Ie,et.value,fe),et!==null&&(a&&et.alternate!==null&&Me.delete(et.key===null?Ie:et.key),Y=C(et,Y,Ie),Ye===null?Ce=et:Ye.sibling=et,Ye=et);return a&&Me.forEach(function(JH){return c(J,JH)}),nt&&To(J,Ie),Ce}function ut(J,Y,ne,fe){if(typeof ne=="object"&&ne!==null&&ne.type===x&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case g:e:{for(var Ce=ne.key;Y!==null;){if(Y.key===Ce){if(Ce=ne.type,Ce===x){if(Y.tag===7){f(J,Y.sibling),fe=b(Y,ne.props.children),fe.return=J,J=fe;break e}}else if(Y.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===D&&ON(Ce)===Y.type){f(J,Y.sibling),fe=b(Y,ne.props),Oc(fe,ne),fe.return=J,J=fe;break e}f(J,Y);break}else c(J,Y);Y=Y.sibling}ne.type===x?(fe=ko(ne.props.children,J.mode,fe,ne.key),fe.return=J,J=fe):(fe=Kd(ne.type,ne.key,ne.props,null,J.mode,fe),Oc(fe,ne),fe.return=J,J=fe)}return M(J);case y:e:{for(Ce=ne.key;Y!==null;){if(Y.key===Ce)if(Y.tag===4&&Y.stateNode.containerInfo===ne.containerInfo&&Y.stateNode.implementation===ne.implementation){f(J,Y.sibling),fe=b(Y,ne.children||[]),fe.return=J,J=fe;break e}else{f(J,Y);break}else c(J,Y);Y=Y.sibling}fe=gg(ne,J.mode,fe),fe.return=J,J=fe}return M(J);case D:return Ce=ne._init,ne=Ce(ne._payload),ut(J,Y,ne,fe)}if(F(ne))return Be(J,Y,ne,fe);if(B(ne)){if(Ce=B(ne),typeof Ce!="function")throw Error(r(150));return ne=Ce.call(ne),Le(J,Y,ne,fe)}if(typeof ne.then=="function")return ut(J,Y,df(ne),fe);if(ne.$$typeof===k)return ut(J,Y,Zd(J,ne),fe);ff(J,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Y!==null&&Y.tag===6?(f(J,Y.sibling),fe=b(Y,ne),fe.return=J,J=fe):(f(J,Y),fe=mg(ne,J.mode,fe),fe.return=J,J=fe),M(J)):f(J,Y)}return function(J,Y,ne,fe){try{Rc=0;var Ce=ut(J,Y,ne,fe);return Za=null,Ce}catch(Me){if(Me===Cc||Me===Jd)throw Me;var Ye=Xn(29,Me,null,J.mode);return Ye.lanes=fe,Ye.return=J,Ye}finally{}}}var Qa=jN(!0),LN=jN(!1),gr=K(null),oi=null;function ws(a){var c=a.alternate;ce(en,en.current&1),ce(gr,a),oi===null&&(c===null||Ka.current!==null||c.memoizedState!==null)&&(oi=a)}function PN(a){if(a.tag===22){if(ce(en,en.current),ce(gr,a),oi===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(oi=a)}}else Ss()}function Ss(){ce(en,en.current),ce(gr,gr.current)}function Ii(a){se(gr),oi===a&&(oi=null),se(en)}var en=K(0);function hf(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||By(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Wg(a,c,f,m){c=a.memoizedState,f=f(m,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Xg={enqueueSetState:function(a,c,f){a=a._reactInternals;var m=er(),b=vs(m);b.payload=c,f!=null&&(b.callback=f),c=bs(a,b,m),c!==null&&(tr(c,a,m),kc(c,a,m))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var m=er(),b=vs(m);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=bs(a,b,m),c!==null&&(tr(c,a,m),kc(c,a,m))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=er(),m=vs(f);m.tag=2,c!=null&&(m.callback=c),c=bs(a,m,f),c!==null&&(tr(c,a,f),kc(c,a,f))}};function IN(a,c,f,m,b,C,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,M):c.prototype&&c.prototype.isPureReactComponent?!mc(f,m)||!mc(b,C):!0}function BN(a,c,f,m){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==a&&Xg.enqueueReplaceState(c,c.state,null)}function jo(a,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var b in a)f[b]===void 0&&(f[b]=a[b])}return f}var pf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function zN(a){pf(a)}function qN(a){console.error(a)}function VN(a){pf(a)}function mf(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function HN(a,c,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Zg(a,c,f){return f=vs(f),f.tag=3,f.payload={element:null},f.callback=function(){mf(a,c)},f}function FN(a){return a=vs(a),a.tag=3,a}function UN(a,c,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var C=m.value;a.payload=function(){return b(C)},a.callback=function(){HN(c,f,m)}}var M=f.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){HN(c,f,m),typeof b!="function"&&(As===null?As=new Set([this]):As.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function J8(a,c,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&xc(c,f,b,!0),f=gr.current,f!==null){switch(f.tag){case 13:return oi===null?wy():f.alternate===null&&_t===0&&(_t=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===Ng?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),Cy(a,m,b)),!1;case 22:return f.flags|=65536,m===Ng?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),Cy(a,m,b)),!1}throw Error(r(435,f.tag))}return Cy(a,m,b),wy(),!1}if(nt)return c=gr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,m!==bg&&(a=Error(r(422),{cause:m}),bc(fr(a,f)))):(m!==bg&&(c=Error(r(423),{cause:m}),bc(fr(c,f))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,m=fr(m,f),b=Zg(a.stateNode,m,b),Mg(a,b),_t!==4&&(_t=2)),!1;var C=Error(r(520),{cause:m});if(C=fr(C,f),qc===null?qc=[C]:qc.push(C),_t!==4&&(_t=2),c===null)return!0;m=fr(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=b&-b,f.lanes|=a,a=Zg(f.stateNode,m,a),Mg(f,a),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(As===null||!As.has(C))))return f.flags|=65536,b&=-b,f.lanes|=b,b=FN(b),UN(b,a,f,m),Mg(f,b),!1}f=f.return}while(f!==null);return!1}var $N=Error(r(461)),sn=!1;function pn(a,c,f,m){c.child=a===null?LN(c,null,f,m):Qa(c,a.child,f,m)}function GN(a,c,f,m,b){f=f.render;var C=c.ref;if("ref"in m){var M={};for(var j in m)j!=="ref"&&(M[j]=m[j])}else M=m;return Do(c),m=jg(a,c,f,M,C,b),j=Lg(),a!==null&&!sn?(Pg(a,c,b),Bi(a,c,b)):(nt&&j&&yg(c),c.flags|=1,pn(a,c,m,b),c.child)}function KN(a,c,f,m,b){if(a===null){var C=f.type;return typeof C=="function"&&!pg(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,YN(a,c,C,m,b)):(a=Kd(f.type,null,m,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!sy(a,b)){var M=C.memoizedProps;if(f=f.compare,f=f!==null?f:mc,f(M,m)&&a.ref===c.ref)return Bi(a,c,b)}return c.flags|=1,a=Di(C,m),a.ref=c.ref,a.return=c,c.child=a}function YN(a,c,f,m,b){if(a!==null){var C=a.memoizedProps;if(mc(C,m)&&a.ref===c.ref)if(sn=!1,c.pendingProps=m=C,sy(a,b))(a.flags&131072)!==0&&(sn=!0);else return c.lanes=a.lanes,Bi(a,c,b)}return Qg(a,c,f,m,b)}function WN(a,c,f){var m=c.pendingProps,b=m.children,C=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=C!==null?C.baseLanes|f:f,a!==null){for(b=c.child=a.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;c.childLanes=C&~m}else c.childLanes=0,c.child=null;return XN(a,c,m,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Qd(c,C!==null?C.cachePool:null),C!==null?Y2(c,C):Dg(),PN(c);else return c.lanes=c.childLanes=536870912,XN(a,c,C!==null?C.baseLanes|f:f,f)}else C!==null?(Qd(c,C.cachePool),Y2(c,C),Ss(),c.memoizedState=null):(a!==null&&Qd(c,null),Dg(),Ss());return pn(a,c,b,f),c.child}function XN(a,c,f,m){var b=kg();return b=b===null?null:{parent:Jt._currentValue,pool:b},c.memoizedState={baseLanes:f,cachePool:b},a!==null&&Qd(c,null),Dg(),PN(c),a!==null&&xc(a,c,m,!0),null}function gf(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function Qg(a,c,f,m,b){return Do(c),f=jg(a,c,f,m,void 0,b),m=Lg(),a!==null&&!sn?(Pg(a,c,b),Bi(a,c,b)):(nt&&m&&yg(c),c.flags|=1,pn(a,c,f,b),c.child)}function ZN(a,c,f,m,b,C){return Do(c),c.updateQueue=null,f=X2(c,m,f,b),W2(a),m=Lg(),a!==null&&!sn?(Pg(a,c,C),Bi(a,c,C)):(nt&&m&&yg(c),c.flags|=1,pn(a,c,f,C),c.child)}function QN(a,c,f,m,b){if(Do(c),c.stateNode===null){var C=Ha,M=f.contextType;typeof M=="object"&&M!==null&&(C=Cn(M)),C=new f(m,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Xg,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=m,C.state=c.memoizedState,C.refs={},Tg(c),M=f.contextType,C.context=typeof M=="object"&&M!==null?Cn(M):Ha,C.state=c.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(Wg(c,f,M,m),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&Xg.enqueueReplaceState(C,C.state,null),Tc(c,m,C,b),Nc(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(a===null){C=c.stateNode;var j=c.memoizedProps,U=jo(f,j);C.props=U;var re=C.context,de=f.contextType;M=Ha,typeof de=="object"&&de!==null&&(M=Cn(de));var he=f.getDerivedStateFromProps;de=typeof he=="function"||typeof C.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j||re!==M)&&BN(c,C,m,M),ys=!1;var ie=c.memoizedState;C.state=ie,Tc(c,m,C,b),Nc(),re=c.memoizedState,j||ie!==re||ys?(typeof he=="function"&&(Wg(c,f,he,m),re=c.memoizedState),(U=ys||IN(c,f,U,m,ie,re,M))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=re),C.props=m,C.state=re,C.context=M,m=U):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{C=c.stateNode,Ag(a,c),M=c.memoizedProps,de=jo(f,M),C.props=de,he=c.pendingProps,ie=C.context,re=f.contextType,U=Ha,typeof re=="object"&&re!==null&&(U=Cn(re)),j=f.getDerivedStateFromProps,(re=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==he||ie!==U)&&BN(c,C,m,U),ys=!1,ie=c.memoizedState,C.state=ie,Tc(c,m,C,b),Nc();var oe=c.memoizedState;M!==he||ie!==oe||ys||a!==null&&a.dependencies!==null&&Xd(a.dependencies)?(typeof j=="function"&&(Wg(c,f,j,m),oe=c.memoizedState),(de=ys||IN(c,f,de,m,ie,oe,U)||a!==null&&a.dependencies!==null&&Xd(a.dependencies))?(re||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,oe,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,oe,U)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=oe),C.props=m,C.state=oe,C.context=U,m=de):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&ie===a.memoizedState||(c.flags|=1024),m=!1)}return C=m,gf(a,c),m=(c.flags&128)!==0,C||m?(C=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&m?(c.child=Qa(c,a.child,null,b),c.child=Qa(c,null,f,b)):pn(a,c,f,b),c.memoizedState=C.state,a=c.child):a=Bi(a,c,b),a}function JN(a,c,f,m){return vc(),c.flags|=256,pn(a,c,f,m),c.child}var Jg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ey(a){return{baseLanes:a,cachePool:q2()}}function ty(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=yr),a}function eT(a,c,f){var m=c.pendingProps,b=!1,C=(c.flags&128)!==0,M;if((M=C)||(M=a!==null&&a.memoizedState===null?!1:(en.current&2)!==0),M&&(b=!0,c.flags&=-129),M=(c.flags&32)!==0,c.flags&=-33,a===null){if(nt){if(b?ws(c):Ss(),nt){var j=Mt,U;if(U=j){e:{for(U=j,j=si;U.nodeType!==8;){if(!j){j=null;break e}if(U=Hr(U.nextSibling),U===null){j=null;break e}}j=U}j!==null?(c.memoizedState={dehydrated:j,treeContext:No!==null?{id:Ri,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},U=Xn(18,null,null,0),U.stateNode=j,U.return=c,c.child=U,_n=c,Mt=null,U=!0):U=!1}U||Mo(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return By(j)?c.lanes=32:c.lanes=536870912,null;Ii(c)}return j=m.children,m=m.fallback,b?(Ss(),b=c.mode,j=yf({mode:"hidden",children:j},b),m=ko(m,b,f,null),j.return=c,m.return=c,j.sibling=m,c.child=j,b=c.child,b.memoizedState=ey(f),b.childLanes=ty(a,M,f),c.memoizedState=Jg,m):(ws(c),ny(c,j))}if(U=a.memoizedState,U!==null&&(j=U.dehydrated,j!==null)){if(C)c.flags&256?(ws(c),c.flags&=-257,c=ry(a,c,f)):c.memoizedState!==null?(Ss(),c.child=a.child,c.flags|=128,c=null):(Ss(),b=m.fallback,j=c.mode,m=yf({mode:"visible",children:m.children},j),b=ko(b,j,f,null),b.flags|=2,m.return=c,b.return=c,m.sibling=b,c.child=m,Qa(c,a.child,null,f),m=c.child,m.memoizedState=ey(f),m.childLanes=ty(a,M,f),c.memoizedState=Jg,c=b);else if(ws(c),By(j)){if(M=j.nextSibling&&j.nextSibling.dataset,M)var re=M.dgst;M=re,m=Error(r(419)),m.stack="",m.digest=M,bc({value:m,source:null,stack:null}),c=ry(a,c,f)}else if(sn||xc(a,c,f,!1),M=(f&a.childLanes)!==0,sn||M){if(M=pt,M!==null&&(m=f&-f,m=(m&42)!==0?1:Jr(m),m=(m&(M.suspendedLanes|f))!==0?0:m,m!==0&&m!==U.retryLane))throw U.retryLane=m,Va(a,m),tr(M,a,m),$N;j.data==="$?"||wy(),c=ry(a,c,f)}else j.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=U.treeContext,Mt=Hr(j.nextSibling),_n=c,nt=!0,Ao=null,si=!1,a!==null&&(pr[mr++]=Ri,pr[mr++]=Oi,pr[mr++]=No,Ri=a.id,Oi=a.overflow,No=c),c=ny(c,m.children),c.flags|=4096);return c}return b?(Ss(),b=m.fallback,j=c.mode,U=a.child,re=U.sibling,m=Di(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,re!==null?b=Di(re,b):(b=ko(b,j,f,null),b.flags|=2),b.return=c,m.return=c,m.sibling=b,c.child=m,m=b,b=c.child,j=a.child.memoizedState,j===null?j=ey(f):(U=j.cachePool,U!==null?(re=Jt._currentValue,U=U.parent!==re?{parent:re,pool:re}:U):U=q2(),j={baseLanes:j.baseLanes|f,cachePool:U}),b.memoizedState=j,b.childLanes=ty(a,M,f),c.memoizedState=Jg,m):(ws(c),f=a.child,a=f.sibling,f=Di(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,a!==null&&(M=c.deletions,M===null?(c.deletions=[a],c.flags|=16):M.push(a)),c.child=f,c.memoizedState=null,f)}function ny(a,c){return c=yf({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function yf(a,c){return a=Xn(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ry(a,c,f){return Qa(c,a.child,null,f),a=ny(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function tT(a,c,f){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c),wg(a.return,c,f)}function iy(a,c,f,m,b){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=f,C.tailMode=b)}function nT(a,c,f){var m=c.pendingProps,b=m.revealOrder,C=m.tail;if(pn(a,c,m.children,f),m=en.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&tT(a,f,c);else if(a.tag===19)tT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(ce(en,m),b){case"forwards":for(f=c.child,b=null;f!==null;)a=f.alternate,a!==null&&hf(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=c.child,c.child=null):(b=f.sibling,f.sibling=null),iy(c,!1,b,f,C);break;case"backwards":for(f=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&hf(a)===null){c.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}iy(c,!0,f,null,C);break;case"together":iy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Bi(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Ts|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(xc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=Di(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Di(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function sy(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Xd(a)))}function eH(a,c,f){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),gs(c,Jt,a.memoizedState.cache),vc();break;case 27:case 5:Ee(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:gs(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(ws(c),c.flags|=128,null):(f&c.child.childLanes)!==0?eT(a,c,f):(ws(c),a=Bi(a,c,f),a!==null?a.sibling:null);ws(c);break;case 19:var b=(a.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(xc(a,c,f,!1),m=(f&c.childLanes)!==0),b){if(m)return nT(a,c,f);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ce(en,en.current),m)break;return null;case 22:case 23:return c.lanes=0,WN(a,c,f);case 24:gs(c,Jt,a.memoizedState.cache)}return Bi(a,c,f)}function rT(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)sn=!0;else{if(!sy(a,f)&&(c.flags&128)===0)return sn=!1,eH(a,c,f);sn=(a.flags&131072)!==0}else sn=!1,nt&&(c.flags&1048576)!==0&&O2(c,Wd,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var m=c.elementType,b=m._init;if(m=b(m._payload),c.type=m,typeof m=="function")pg(m)?(a=jo(m,a),c.tag=1,c=QN(null,c,m,a,f)):(c.tag=0,c=Qg(null,c,m,a,f));else{if(m!=null){if(b=m.$$typeof,b===T){c.tag=11,c=GN(null,c,m,a,f);break e}else if(b===R){c.tag=14,c=KN(null,c,m,a,f);break e}}throw c=z(m)||m,Error(r(306,c,""))}}return c;case 0:return Qg(a,c,c.type,c.pendingProps,f);case 1:return m=c.type,b=jo(m,c.pendingProps),QN(a,c,m,b,f);case 3:e:{if(le(c,c.stateNode.containerInfo),a===null)throw Error(r(387));m=c.pendingProps;var C=c.memoizedState;b=C.element,Ag(a,c),Tc(c,m,null,f);var M=c.memoizedState;if(m=M.cache,gs(c,Jt,m),m!==C.cache&&Sg(c,[Jt],f,!0),Nc(),m=M.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:M.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=JN(a,c,m,f);break e}else if(m!==b){b=fr(Error(r(424)),c),bc(b),c=JN(a,c,m,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Mt=Hr(a.firstChild),_n=c,nt=!0,Ao=null,si=!0,f=LN(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(vc(),m===b){c=Bi(a,c,f);break e}pn(a,c,m,f)}c=c.child}return c;case 26:return gf(a,c),a===null?(f=aA(c.type,null,c.pendingProps,null))?c.memoizedState=f:nt||(f=c.type,a=c.pendingProps,m=Df(ee.current).createElement(f),m[Nt]=c,m[Qt]=a,gn(m,f,a),Tt(m),c.stateNode=m):c.memoizedState=aA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Ee(c),a===null&&nt&&(m=c.stateNode=iA(c.type,c.pendingProps,ee.current),_n=c,si=!0,b=Mt,Ds(c.type)?(zy=b,Mt=Hr(m.firstChild)):Mt=b),pn(a,c,c.pendingProps.children,f),gf(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&nt&&((b=m=Mt)&&(m=AH(m,c.type,c.pendingProps,si),m!==null?(c.stateNode=m,_n=c,Mt=Hr(m.firstChild),si=!1,b=!0):b=!1),b||Mo(c)),Ee(c),b=c.type,C=c.pendingProps,M=a!==null?a.memoizedProps:null,m=C.children,Ly(b,C)?m=null:M!==null&&Ly(b,M)&&(c.flags|=32),c.memoizedState!==null&&(b=jg(a,c,G8,null,null,f),Wc._currentValue=b),gf(a,c),pn(a,c,m,f),c.child;case 6:return a===null&&nt&&((a=f=Mt)&&(f=MH(f,c.pendingProps,si),f!==null?(c.stateNode=f,_n=c,Mt=null,a=!0):a=!1),a||Mo(c)),null;case 13:return eT(a,c,f);case 4:return le(c,c.stateNode.containerInfo),m=c.pendingProps,a===null?c.child=Qa(c,null,m,f):pn(a,c,m,f),c.child;case 11:return GN(a,c,c.type,c.pendingProps,f);case 7:return pn(a,c,c.pendingProps,f),c.child;case 8:return pn(a,c,c.pendingProps.children,f),c.child;case 12:return pn(a,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,gs(c,c.type,m.value),pn(a,c,m.children,f),c.child;case 9:return b=c.type._context,m=c.pendingProps.children,Do(c),b=Cn(b),m=m(b),c.flags|=1,pn(a,c,m,f),c.child;case 14:return KN(a,c,c.type,c.pendingProps,f);case 15:return YN(a,c,c.type,c.pendingProps,f);case 19:return nT(a,c,f);case 31:return m=c.pendingProps,f=c.mode,m={mode:m.mode,children:m.children},a===null?(f=yf(m,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Di(a.child,m),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return WN(a,c,f);case 24:return Do(c),m=Cn(Jt),a===null?(b=kg(),b===null&&(b=pt,C=Cg(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=f),b=C),c.memoizedState={parent:m,cache:b},Tg(c),gs(c,Jt,b)):((a.lanes&f)!==0&&(Ag(a,c),Tc(c,null,null,f),Nc()),b=a.memoizedState,C=c.memoizedState,b.parent!==m?(b={parent:m,cache:m},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),gs(c,Jt,m)):(m=C.cache,gs(c,Jt,m),m!==b.cache&&Sg(c,[Jt],f,!0))),pn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function zi(a){a.flags|=4}function iT(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!fA(c)){if(c=gr.current,c!==null&&((Qe&4194048)===Qe?oi!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||c!==oi))throw Ec=Ng,V2;a.flags|=8192}}function vf(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Ma():536870912,a.lanes|=c,nl|=c)}function jc(a,c){if(!nt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function St(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(c)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=f,c}function tH(a,c,f){var m=c.pendingProps;switch(vg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(c),null;case 1:return St(c),null;case 3:return f=c.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Li(Jt),ge(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(yc(c)?zi(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,P2())),St(c),null;case 26:return f=c.memoizedState,a===null?(zi(c),f!==null?(St(c),iT(c,f)):(St(c),c.flags&=-16777217)):f?f!==a.memoizedState?(zi(c),St(c),iT(c,f)):(St(c),c.flags&=-16777217):(a.memoizedProps!==m&&zi(c),St(c),c.flags&=-16777217),null;case 27:je(c),f=ee.current;var b=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==m&&zi(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return St(c),null}a=H.current,yc(c)?j2(c):(a=iA(b,m,f),c.stateNode=a,zi(c))}return St(c),null;case 5:if(je(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==m&&zi(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return St(c),null}if(a=H.current,yc(c))j2(c);else{switch(b=Df(ee.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?b.createElement(f,{is:m.is}):b.createElement(f)}}a[Nt]=c,a[Qt]=m;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=a;e:switch(gn(a,f,m),f){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&zi(c)}}return St(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==m&&zi(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(a=ee.current,yc(c)){if(a=c.stateNode,f=c.memoizedProps,m=null,b=_n,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}a[Nt]=c,a=!!(a.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||ZT(a.nodeValue,f)),a||Mo(c)}else a=Df(a).createTextNode(m),a[Nt]=c,c.stateNode=a}return St(c),null;case 13:if(m=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=yc(c),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[Nt]=c}else vc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;St(c),b=!1}else b=P2(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Ii(c),c):(Ii(c),null)}if(Ii(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=c.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==b&&(m.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),vf(c,c.updateQueue),St(c),null;case 4:return ge(),a===null&&_y(c.stateNode.containerInfo),St(c),null;case 10:return Li(c.type),St(c),null;case 19:if(se(en),b=c.memoizedState,b===null)return St(c),null;if(m=(c.flags&128)!==0,C=b.rendering,C===null)if(m)jc(b,!1);else{if(_t!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=hf(a),C!==null){for(c.flags|=128,jc(b,!1),a=C.updateQueue,c.updateQueue=a,vf(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)R2(f,a),f=f.sibling;return ce(en,en.current&1|2),c.child}a=a.sibling}b.tail!==null&&Ae()>wf&&(c.flags|=128,m=!0,jc(b,!1),c.lanes=4194304)}else{if(!m)if(a=hf(C),a!==null){if(c.flags|=128,m=!0,a=a.updateQueue,c.updateQueue=a,vf(c,a),jc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!nt)return St(c),null}else 2*Ae()-b.renderingStartTime>wf&&f!==536870912&&(c.flags|=128,m=!0,jc(b,!1),c.lanes=4194304);b.isBackwards?(C.sibling=c.child,c.child=C):(a=b.last,a!==null?a.sibling=C:c.child=C,b.last=C)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=Ae(),c.sibling=null,a=en.current,ce(en,m?a&1|2:a&1),c):(St(c),null);case 22:case 23:return Ii(c),Rg(),m=c.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&(St(c),c.subtreeFlags&6&&(c.flags|=8192)):St(c),f=c.updateQueue,f!==null&&vf(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),a!==null&&se(Ro),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Li(Jt),St(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function nH(a,c){switch(vg(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Li(Jt),ge(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return je(c),null;case 13:if(Ii(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));vc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return se(en),null;case 4:return ge(),null;case 10:return Li(c.type),null;case 22:case 23:return Ii(c),Rg(),a!==null&&se(Ro),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Li(Jt),null;case 25:return null;default:return null}}function sT(a,c){switch(vg(c),c.tag){case 3:Li(Jt),ge();break;case 26:case 27:case 5:je(c);break;case 4:ge();break;case 13:Ii(c);break;case 19:se(en);break;case 10:Li(c.type);break;case 22:case 23:Ii(c),Rg(),a!==null&&se(Ro);break;case 24:Li(Jt)}}function Lc(a,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&a)===a){m=void 0;var C=f.create,M=f.inst;m=C(),M.destroy=m}f=f.next}while(f!==b)}}catch(j){ft(c,c.return,j)}}function Cs(a,c,f){try{var m=c.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var C=b.next;m=C;do{if((m.tag&a)===a){var M=m.inst,j=M.destroy;if(j!==void 0){M.destroy=void 0,b=c;var U=f,re=j;try{re()}catch(de){ft(b,U,de)}}}m=m.next}while(m!==C)}}catch(de){ft(c,c.return,de)}}function oT(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{K2(c,f)}catch(m){ft(a,a.return,m)}}}function aT(a,c,f){f.props=jo(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){ft(a,c,m)}}function Pc(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(b){ft(a,c,b)}}function ai(a,c){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){ft(a,c,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){ft(a,c,b)}else f.current=null}function lT(a){var c=a.type,f=a.memoizedProps,m=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){ft(a,a.return,b)}}function oy(a,c,f){try{var m=a.stateNode;CH(m,a.type,f,c),m[Qt]=c}catch(b){ft(a,a.return,b)}}function cT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ds(a.type)||a.tag===4}function ay(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||cT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ds(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ly(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=_f));else if(m!==4&&(m===27&&Ds(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(ly(a,c,f),a=a.sibling;a!==null;)ly(a,c,f),a=a.sibling}function bf(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(m!==4&&(m===27&&Ds(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(bf(a,c,f),a=a.sibling;a!==null;)bf(a,c,f),a=a.sibling}function uT(a){var c=a.stateNode,f=a.memoizedProps;try{for(var m=a.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);gn(c,m,f),c[Nt]=a,c[Qt]=f}catch(C){ft(a,a.return,C)}}var qi=!1,Pt=!1,cy=!1,dT=typeof WeakSet=="function"?WeakSet:Set,on=null;function rH(a,c){if(a=a.containerInfo,Oy=If,a=S2(a),ag(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var M=0,j=-1,U=-1,re=0,de=0,he=a,ie=null;t:for(;;){for(var oe;he!==f||b!==0&&he.nodeType!==3||(j=M+b),he!==C||m!==0&&he.nodeType!==3||(U=M+m),he.nodeType===3&&(M+=he.nodeValue.length),(oe=he.firstChild)!==null;)ie=he,he=oe;for(;;){if(he===a)break t;if(ie===f&&++re===b&&(j=M),ie===C&&++de===m&&(U=M),(oe=he.nextSibling)!==null)break;he=ie,ie=he.parentNode}he=oe}f=j===-1||U===-1?null:{start:j,end:U}}else f=null}f=f||{start:0,end:0}}else f=null;for(jy={focusedElem:a,selectionRange:f},If=!1,on=c;on!==null;)if(c=on,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,on=a;else for(;on!==null;){switch(c=on,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=c,b=C.memoizedProps,C=C.memoizedState,m=f.stateNode;try{var Be=jo(f.type,b,f.elementType===f.type);a=m.getSnapshotBeforeUpdate(Be,C),m.__reactInternalSnapshotBeforeUpdate=a}catch(Le){ft(f,f.return,Le)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)Iy(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Iy(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,on=a;break}on=c.return}}function fT(a,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:Es(a,f),m&4&&Lc(5,f);break;case 1:if(Es(a,f),m&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(M){ft(f,f.return,M)}else{var b=jo(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(b,c,a.__reactInternalSnapshotBeforeUpdate)}catch(M){ft(f,f.return,M)}}m&64&&oT(f),m&512&&Pc(f,f.return);break;case 3:if(Es(a,f),m&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{K2(a,c)}catch(M){ft(f,f.return,M)}}break;case 27:c===null&&m&4&&uT(f);case 26:case 5:Es(a,f),c===null&&m&4&&lT(f),m&512&&Pc(f,f.return);break;case 12:Es(a,f);break;case 13:Es(a,f),m&4&&mT(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=fH.bind(null,f),_H(a,f))));break;case 22:if(m=f.memoizedState!==null||qi,!m){c=c!==null&&c.memoizedState!==null||Pt,b=qi;var C=Pt;qi=m,(Pt=c)&&!C?ks(a,f,(f.subtreeFlags&8772)!==0):Es(a,f),qi=b,Pt=C}break;case 30:break;default:Es(a,f)}}function hT(a){var c=a.alternate;c!==null&&(a.alternate=null,hT(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&ds(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var yt=null,zn=!1;function Vi(a,c,f){for(f=f.child;f!==null;)pT(a,c,f),f=f.sibling}function pT(a,c,f){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Xt,f)}catch{}switch(f.tag){case 26:Pt||ai(f,c),Vi(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Pt||ai(f,c);var m=yt,b=zn;Ds(f.type)&&(yt=f.stateNode,zn=!1),Vi(a,c,f),$c(f.stateNode),yt=m,zn=b;break;case 5:Pt||ai(f,c);case 6:if(m=yt,b=zn,yt=null,Vi(a,c,f),yt=m,zn=b,yt!==null)if(zn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(f.stateNode)}catch(C){ft(f,c,C)}else try{yt.removeChild(f.stateNode)}catch(C){ft(f,c,C)}break;case 18:yt!==null&&(zn?(a=yt,nA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Jc(a)):nA(yt,f.stateNode));break;case 4:m=yt,b=zn,yt=f.stateNode.containerInfo,zn=!0,Vi(a,c,f),yt=m,zn=b;break;case 0:case 11:case 14:case 15:Pt||Cs(2,f,c),Pt||Cs(4,f,c),Vi(a,c,f);break;case 1:Pt||(ai(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&aT(f,c,m)),Vi(a,c,f);break;case 21:Vi(a,c,f);break;case 22:Pt=(m=Pt)||f.memoizedState!==null,Vi(a,c,f),Pt=m;break;default:Vi(a,c,f)}}function mT(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Jc(a)}catch(f){ft(c,c.return,f)}}function iH(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new dT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new dT),c;default:throw Error(r(435,a.tag))}}function uy(a,c){var f=iH(a);c.forEach(function(m){var b=hH.bind(null,a,m);f.has(m)||(f.add(m),m.then(b,b))})}function Zn(a,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],C=a,M=c,j=M;e:for(;j!==null;){switch(j.tag){case 27:if(Ds(j.type)){yt=j.stateNode,zn=!1;break e}break;case 5:yt=j.stateNode,zn=!1;break e;case 3:case 4:yt=j.stateNode.containerInfo,zn=!0;break e}j=j.return}if(yt===null)throw Error(r(160));pT(C,M,b),yt=null,zn=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)gT(c,a),c=c.sibling}var Vr=null;function gT(a,c){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Zn(c,a),Qn(a),m&4&&(Cs(3,a,a.return),Lc(3,a),Cs(5,a,a.return));break;case 1:Zn(c,a),Qn(a),m&512&&(Pt||f===null||ai(f,f.return)),m&64&&qi&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=Vr;if(Zn(c,a),Qn(a),m&512&&(Pt||f===null||ai(f,f.return)),m&4){var C=f!==null?f.memoizedState:null;if(m=a.memoizedState,f===null)if(m===null)if(a.stateNode===null){e:{m=a.type,f=a.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Ti]||C[Nt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(m),b.head.insertBefore(C,b.querySelector("head > title"))),gn(C,m,f),C[Nt]=a,Tt(C),m=C;break e;case"link":var M=uA("link","href",b).get(m+(f.href||""));if(M){for(var j=0;j<M.length;j++)if(C=M[j],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){M.splice(j,1);break t}}C=b.createElement(m),gn(C,m,f),b.head.appendChild(C);break;case"meta":if(M=uA("meta","content",b).get(m+(f.content||""))){for(j=0;j<M.length;j++)if(C=M[j],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){M.splice(j,1);break t}}C=b.createElement(m),gn(C,m,f),b.head.appendChild(C);break;default:throw Error(r(468,m))}C[Nt]=a,Tt(C),m=C}a.stateNode=m}else dA(b,a.type,a.stateNode);else a.stateNode=cA(b,m,a.memoizedProps);else C!==m?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,m===null?dA(b,a.type,a.stateNode):cA(b,m,a.memoizedProps)):m===null&&a.stateNode!==null&&oy(a,a.memoizedProps,f.memoizedProps)}break;case 27:Zn(c,a),Qn(a),m&512&&(Pt||f===null||ai(f,f.return)),f!==null&&m&4&&oy(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Zn(c,a),Qn(a),m&512&&(Pt||f===null||ai(f,f.return)),a.flags&32){b=a.stateNode;try{At(b,"")}catch(oe){ft(a,a.return,oe)}}m&4&&a.stateNode!=null&&(b=a.memoizedProps,oy(a,b,f!==null?f.memoizedProps:b)),m&1024&&(cy=!0);break;case 6:if(Zn(c,a),Qn(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,f=a.stateNode;try{f.nodeValue=m}catch(oe){ft(a,a.return,oe)}}break;case 3:if(jf=null,b=Vr,Vr=Rf(c.containerInfo),Zn(c,a),Vr=b,Qn(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Jc(c.containerInfo)}catch(oe){ft(a,a.return,oe)}cy&&(cy=!1,yT(a));break;case 4:m=Vr,Vr=Rf(a.stateNode.containerInfo),Zn(c,a),Qn(a),Vr=m;break;case 12:Zn(c,a),Qn(a);break;case 13:Zn(c,a),Qn(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(gy=Ae()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,uy(a,m)));break;case 22:b=a.memoizedState!==null;var U=f!==null&&f.memoizedState!==null,re=qi,de=Pt;if(qi=re||b,Pt=de||U,Zn(c,a),Pt=de,qi=re,Qn(a),m&8192)e:for(c=a.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(f===null||U||qi||Pt||Lo(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){U=f=c;try{if(C=U.stateNode,b)M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{j=U.stateNode;var he=U.memoizedProps.style,ie=he!=null&&he.hasOwnProperty("display")?he.display:null;j.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(oe){ft(U,U.return,oe)}}}else if(c.tag===6){if(f===null){U=c;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(oe){ft(U,U.return,oe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,uy(a,f))));break;case 19:Zn(c,a),Qn(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,uy(a,m)));break;case 30:break;case 21:break;default:Zn(c,a),Qn(a)}}function Qn(a){var c=a.flags;if(c&2){try{for(var f,m=a.return;m!==null;){if(cT(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,C=ay(a);bf(a,C,b);break;case 5:var M=f.stateNode;f.flags&32&&(At(M,""),f.flags&=-33);var j=ay(a);bf(a,j,M);break;case 3:case 4:var U=f.stateNode.containerInfo,re=ay(a);ly(a,re,U);break;default:throw Error(r(161))}}catch(de){ft(a,a.return,de)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function yT(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;yT(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Es(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)fT(a,c.alternate,c),c=c.sibling}function Lo(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Cs(4,c,c.return),Lo(c);break;case 1:ai(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&aT(c,c.return,f),Lo(c);break;case 27:$c(c.stateNode);case 26:case 5:ai(c,c.return),Lo(c);break;case 22:c.memoizedState===null&&Lo(c);break;case 30:Lo(c);break;default:Lo(c)}a=a.sibling}}function ks(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,b=a,C=c,M=C.flags;switch(C.tag){case 0:case 11:case 15:ks(b,C,f),Lc(4,C);break;case 1:if(ks(b,C,f),m=C,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(re){ft(m,m.return,re)}if(m=C,b=m.updateQueue,b!==null){var j=m.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)G2(U[b],j)}catch(re){ft(m,m.return,re)}}f&&M&64&&oT(C),Pc(C,C.return);break;case 27:uT(C);case 26:case 5:ks(b,C,f),f&&m===null&&M&4&&lT(C),Pc(C,C.return);break;case 12:ks(b,C,f);break;case 13:ks(b,C,f),f&&M&4&&mT(b,C);break;case 22:C.memoizedState===null&&ks(b,C,f),Pc(C,C.return);break;case 30:break;default:ks(b,C,f)}c=c.sibling}}function dy(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&wc(f))}function fy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&wc(a))}function li(a,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)vT(a,c,f,m),c=c.sibling}function vT(a,c,f,m){var b=c.flags;switch(c.tag){case 0:case 11:case 15:li(a,c,f,m),b&2048&&Lc(9,c);break;case 1:li(a,c,f,m);break;case 3:li(a,c,f,m),b&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&wc(a)));break;case 12:if(b&2048){li(a,c,f,m),a=c.stateNode;try{var C=c.memoizedProps,M=C.id,j=C.onPostCommit;typeof j=="function"&&j(M,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(U){ft(c,c.return,U)}}else li(a,c,f,m);break;case 13:li(a,c,f,m);break;case 23:break;case 22:C=c.stateNode,M=c.alternate,c.memoizedState!==null?C._visibility&2?li(a,c,f,m):Ic(a,c):C._visibility&2?li(a,c,f,m):(C._visibility|=2,Ja(a,c,f,m,(c.subtreeFlags&10256)!==0)),b&2048&&dy(M,c);break;case 24:li(a,c,f,m),b&2048&&fy(c.alternate,c);break;default:li(a,c,f,m)}}function Ja(a,c,f,m,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,M=c,j=f,U=m,re=M.flags;switch(M.tag){case 0:case 11:case 15:Ja(C,M,j,U,b),Lc(8,M);break;case 23:break;case 22:var de=M.stateNode;M.memoizedState!==null?de._visibility&2?Ja(C,M,j,U,b):Ic(C,M):(de._visibility|=2,Ja(C,M,j,U,b)),b&&re&2048&&dy(M.alternate,M);break;case 24:Ja(C,M,j,U,b),b&&re&2048&&fy(M.alternate,M);break;default:Ja(C,M,j,U,b)}c=c.sibling}}function Ic(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,m=c,b=m.flags;switch(m.tag){case 22:Ic(f,m),b&2048&&dy(m.alternate,m);break;case 24:Ic(f,m),b&2048&&fy(m.alternate,m);break;default:Ic(f,m)}c=c.sibling}}var Bc=8192;function el(a){if(a.subtreeFlags&Bc)for(a=a.child;a!==null;)bT(a),a=a.sibling}function bT(a){switch(a.tag){case 26:el(a),a.flags&Bc&&a.memoizedState!==null&&FH(Vr,a.memoizedState,a.memoizedProps);break;case 5:el(a);break;case 3:case 4:var c=Vr;Vr=Rf(a.stateNode.containerInfo),el(a),Vr=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Bc,Bc=16777216,el(a),Bc=c):el(a));break;default:el(a)}}function xT(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function zc(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];on=m,ST(m,a)}xT(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)wT(a),a=a.sibling}function wT(a){switch(a.tag){case 0:case 11:case 15:zc(a),a.flags&2048&&Cs(9,a,a.return);break;case 3:zc(a);break;case 12:zc(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,xf(a)):zc(a);break;default:zc(a)}}function xf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];on=m,ST(m,a)}xT(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Cs(8,c,c.return),xf(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,xf(c));break;default:xf(c)}a=a.sibling}}function ST(a,c){for(;on!==null;){var f=on;switch(f.tag){case 0:case 11:case 15:Cs(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:wc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,on=m;else e:for(f=a;on!==null;){m=on;var b=m.sibling,C=m.return;if(hT(m),m===f){on=null;break e}if(b!==null){b.return=C,on=b;break e}on=C}}}var sH={getCacheForType:function(a){var c=Cn(Jt),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},oH=typeof WeakMap=="function"?WeakMap:Map,it=0,pt=null,We=null,Qe=0,st=0,Jn=null,Ns=!1,tl=!1,hy=!1,Hi=0,_t=0,Ts=0,Po=0,py=0,yr=0,nl=0,qc=null,qn=null,my=!1,gy=0,wf=1/0,Sf=null,As=null,mn=0,Ms=null,rl=null,il=0,yy=0,vy=null,CT=null,Vc=0,by=null;function er(){if((it&2)!==0&&Qe!==0)return Qe&-Qe;if(I.T!==null){var a=$a;return a!==0?a:Ny()}return ei()}function ET(){yr===0&&(yr=(Qe&536870912)===0||nt?Aa():536870912);var a=gr.current;return a!==null&&(a.flags|=32),yr}function tr(a,c,f){(a===pt&&(st===2||st===9)||a.cancelPendingCommit!==null)&&(sl(a,0),_s(a,Qe,yr,!1)),ur(a,f),((it&2)===0||a!==pt)&&(a===pt&&((it&2)===0&&(Po|=f),_t===4&&_s(a,Qe,yr,!1)),ci(a))}function kT(a,c,f){if((it&6)!==0)throw Error(r(327));var m=!f&&(c&124)===0&&(c&a.expiredLanes)===0||ki(a,c),b=m?cH(a,c):Sy(a,c,!0),C=m;do{if(b===0){tl&&!m&&_s(a,c,0,!1);break}else{if(f=a.current.alternate,C&&!aH(f)){b=Sy(a,c,!1),C=!1;continue}if(b===2){if(C=c,a.errorRecoveryDisabledLanes&C)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){c=M;e:{var j=a;b=qc;var U=j.current.memoizedState.isDehydrated;if(U&&(sl(j,M).flags|=256),M=Sy(j,M,!1),M!==2){if(hy&&!U){j.errorRecoveryDisabledLanes|=C,Po|=C,b=4;break e}C=qn,qn=b,C!==null&&(qn===null?qn=C:qn.push.apply(qn,C))}b=M}if(C=!1,b!==2)continue}}if(b===1){sl(a,0),_s(a,c,0,!0);break}e:{switch(m=a,C=b,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:_s(m,c,yr,!Ns);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=gy+300-Ae(),10<b)){if(_s(m,c,yr,!Ns),Ei(m,0,!0)!==0)break e;m.timeoutHandle=eA(NT.bind(null,m,f,qn,Sf,my,c,yr,Po,nl,Ns,C,2,-0,0),b);break e}NT(m,f,qn,Sf,my,c,yr,Po,nl,Ns,C,0,-0,0)}}break}while(!0);ci(a)}function NT(a,c,f,m,b,C,M,j,U,re,de,he,ie,oe){if(a.timeoutHandle=-1,he=c.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Yc={stylesheets:null,count:0,unsuspend:HH},bT(c),he=UH(),he!==null)){a.cancelPendingCommit=he(OT.bind(null,a,c,C,f,m,b,M,j,U,de,1,ie,oe)),_s(a,C,M,!re);return}OT(a,c,C,f,m,b,M,j,U)}function aH(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],C=b.getSnapshot;b=b.value;try{if(!Wn(C(),b))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function _s(a,c,f,m){c&=~py,c&=~Po,a.suspendedLanes|=c,a.pingedLanes&=~c,m&&(a.warmLanes|=c),m=a.expirationTimes;for(var b=c;0<b;){var C=31-wt(b),M=1<<C;m[C]=-1,b&=~M}f!==0&&go(a,f,c)}function Cf(){return(it&6)===0?(Hc(0),!1):!0}function xy(){if(We!==null){if(st===0)var a=We.return;else a=We,ji=_o=null,Ig(a),Za=null,Rc=0,a=We;for(;a!==null;)sT(a.alternate,a),a=a.return;We=null}}function sl(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,kH(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),xy(),pt=a,We=f=Di(a.current,null),Qe=c,st=0,Jn=null,Ns=!1,tl=ki(a,c),hy=!1,nl=yr=py=Po=Ts=_t=0,qn=qc=null,my=!1,(c&8)!==0&&(c|=c&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=c;0<m;){var b=31-wt(m),C=1<<b;c|=a[b],m&=~C}return Hi=c,Ud(),f}function TT(a,c){Ke=null,I.H=uf,c===Cc||c===Jd?(c=U2(),st=3):c===V2?(c=U2(),st=4):st=c===$N?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Jn=c,We===null&&(_t=1,mf(a,fr(c,a.current)))}function AT(){var a=I.H;return I.H=uf,a===null?uf:a}function MT(){var a=I.A;return I.A=sH,a}function wy(){_t=4,Ns||(Qe&4194048)!==Qe&&gr.current!==null||(tl=!0),(Ts&134217727)===0&&(Po&134217727)===0||pt===null||_s(pt,Qe,yr,!1)}function Sy(a,c,f){var m=it;it|=2;var b=AT(),C=MT();(pt!==a||Qe!==c)&&(Sf=null,sl(a,c)),c=!1;var M=_t;e:do try{if(st!==0&&We!==null){var j=We,U=Jn;switch(st){case 8:xy(),M=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(c=!0);var re=st;if(st=0,Jn=null,ol(a,j,U,re),f&&tl){M=0;break e}break;default:re=st,st=0,Jn=null,ol(a,j,U,re)}}lH(),M=_t;break}catch(de){TT(a,de)}while(!0);return c&&a.shellSuspendCounter++,ji=_o=null,it=m,I.H=b,I.A=C,We===null&&(pt=null,Qe=0,Ud()),M}function lH(){for(;We!==null;)_T(We)}function cH(a,c){var f=it;it|=2;var m=AT(),b=MT();pt!==a||Qe!==c?(Sf=null,wf=Ae()+500,sl(a,c)):tl=ki(a,c);e:do try{if(st!==0&&We!==null){c=We;var C=Jn;t:switch(st){case 1:st=0,Jn=null,ol(a,c,C,1);break;case 2:case 9:if(H2(C)){st=0,Jn=null,DT(c);break}c=function(){st!==2&&st!==9||pt!==a||(st=7),ci(a)},C.then(c,c);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:H2(C)?(st=0,Jn=null,DT(c)):(st=0,Jn=null,ol(a,c,C,7));break;case 5:var M=null;switch(We.tag){case 26:M=We.memoizedState;case 5:case 27:var j=We;if(!M||fA(M)){st=0,Jn=null;var U=j.sibling;if(U!==null)We=U;else{var re=j.return;re!==null?(We=re,Ef(re)):We=null}break t}}st=0,Jn=null,ol(a,c,C,5);break;case 6:st=0,Jn=null,ol(a,c,C,6);break;case 8:xy(),_t=6;break e;default:throw Error(r(462))}}uH();break}catch(de){TT(a,de)}while(!0);return ji=_o=null,I.H=m,I.A=b,it=f,We!==null?0:(pt=null,Qe=0,Ud(),_t)}function uH(){for(;We!==null&&!ve();)_T(We)}function _T(a){var c=rT(a.alternate,a,Hi);a.memoizedProps=a.pendingProps,c===null?Ef(a):We=c}function DT(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=ZN(f,c,c.pendingProps,c.type,void 0,Qe);break;case 11:c=ZN(f,c,c.pendingProps,c.type.render,c.ref,Qe);break;case 5:Ig(c);default:sT(f,c),c=We=R2(c,Hi),c=rT(f,c,Hi)}a.memoizedProps=a.pendingProps,c===null?Ef(a):We=c}function ol(a,c,f,m){ji=_o=null,Ig(c),Za=null,Rc=0;var b=c.return;try{if(J8(a,b,c,f,Qe)){_t=1,mf(a,fr(f,a.current)),We=null;return}}catch(C){if(b!==null)throw We=b,C;_t=1,mf(a,fr(f,a.current)),We=null;return}c.flags&32768?(nt||m===1?a=!0:tl||(Qe&536870912)!==0?a=!1:(Ns=a=!0,(m===2||m===9||m===3||m===6)&&(m=gr.current,m!==null&&m.tag===13&&(m.flags|=16384))),RT(c,a)):Ef(c)}function Ef(a){var c=a;do{if((c.flags&32768)!==0){RT(c,Ns);return}a=c.return;var f=tH(c.alternate,c,Hi);if(f!==null){We=f;return}if(c=c.sibling,c!==null){We=c;return}We=c=a}while(c!==null);_t===0&&(_t=5)}function RT(a,c){do{var f=nH(a.alternate,a);if(f!==null){f.flags&=32767,We=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){We=a;return}We=a=f}while(a!==null);_t=6,We=null}function OT(a,c,f,m,b,C,M,j,U){a.cancelPendingCommit=null;do kf();while(mn!==0);if((it&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=fg,mo(a,f,C,M,j,U),a===pt&&(We=pt=null,Qe=0),rl=c,Ms=a,il=f,yy=C,vy=b,CT=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,pH(wn,function(){return BT(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,b=q.p,q.p=2,M=it,it|=4;try{rH(a,c,f)}finally{it=M,q.p=b,I.T=m}}mn=1,jT(),LT(),PT()}}function jT(){if(mn===1){mn=0;var a=Ms,c=rl,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=I.T,I.T=null;var m=q.p;q.p=2;var b=it;it|=4;try{gT(c,a);var C=jy,M=S2(a.containerInfo),j=C.focusedElem,U=C.selectionRange;if(M!==j&&j&&j.ownerDocument&&w2(j.ownerDocument.documentElement,j)){if(U!==null&&ag(j)){var re=U.start,de=U.end;if(de===void 0&&(de=re),"selectionStart"in j)j.selectionStart=re,j.selectionEnd=Math.min(de,j.value.length);else{var he=j.ownerDocument||document,ie=he&&he.defaultView||window;if(ie.getSelection){var oe=ie.getSelection(),Be=j.textContent.length,Le=Math.min(U.start,Be),ut=U.end===void 0?Le:Math.min(U.end,Be);!oe.extend&&Le>ut&&(M=ut,ut=Le,Le=M);var J=x2(j,Le),Y=x2(j,ut);if(J&&Y&&(oe.rangeCount!==1||oe.anchorNode!==J.node||oe.anchorOffset!==J.offset||oe.focusNode!==Y.node||oe.focusOffset!==Y.offset)){var ne=he.createRange();ne.setStart(J.node,J.offset),oe.removeAllRanges(),Le>ut?(oe.addRange(ne),oe.extend(Y.node,Y.offset)):(ne.setEnd(Y.node,Y.offset),oe.addRange(ne))}}}}for(he=[],oe=j;oe=oe.parentNode;)oe.nodeType===1&&he.push({element:oe,left:oe.scrollLeft,top:oe.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<he.length;j++){var fe=he[j];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}If=!!Oy,jy=Oy=null}finally{it=b,q.p=m,I.T=f}}a.current=c,mn=2}}function LT(){if(mn===2){mn=0;var a=Ms,c=rl,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=I.T,I.T=null;var m=q.p;q.p=2;var b=it;it|=4;try{fT(a,c.alternate,c)}finally{it=b,q.p=m,I.T=f}}mn=3}}function PT(){if(mn===4||mn===3){mn=0,Pe();var a=Ms,c=rl,f=il,m=CT;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?mn=5:(mn=0,rl=Ms=null,IT(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(As=null),yo(f),c=c.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Xt,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=I.T,b=q.p,q.p=2,I.T=null;try{for(var C=a.onRecoverableError,M=0;M<m.length;M++){var j=m[M];C(j.value,{componentStack:j.stack})}}finally{I.T=c,q.p=b}}(il&3)!==0&&kf(),ci(a),b=a.pendingLanes,(f&4194090)!==0&&(b&42)!==0?a===by?Vc++:(Vc=0,by=a):Vc=0,Hc(0)}}function IT(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,wc(c)))}function kf(a){return jT(),LT(),PT(),BT()}function BT(){if(mn!==5)return!1;var a=Ms,c=yy;yy=0;var f=yo(il),m=I.T,b=q.p;try{q.p=32>f?32:f,I.T=null,f=vy,vy=null;var C=Ms,M=il;if(mn=0,rl=Ms=null,il=0,(it&6)!==0)throw Error(r(331));var j=it;if(it|=4,wT(C.current),vT(C,C.current,M,f),it=j,Hc(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Xt,C)}catch{}return!0}finally{q.p=b,I.T=m,IT(a,c)}}function zT(a,c,f){c=fr(f,c),c=Zg(a.stateNode,c,2),a=bs(a,c,2),a!==null&&(ur(a,2),ci(a))}function ft(a,c,f){if(a.tag===3)zT(a,a,f);else for(;c!==null;){if(c.tag===3){zT(c,a,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(As===null||!As.has(m))){a=fr(f,a),f=FN(2),m=bs(c,f,2),m!==null&&(UN(f,m,c,a),ur(m,2),ci(m));break}}c=c.return}}function Cy(a,c,f){var m=a.pingCache;if(m===null){m=a.pingCache=new oH;var b=new Set;m.set(c,b)}else b=m.get(c),b===void 0&&(b=new Set,m.set(c,b));b.has(f)||(hy=!0,b.add(f),a=dH.bind(null,a,c,f),c.then(a,a))}function dH(a,c,f){var m=a.pingCache;m!==null&&m.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,pt===a&&(Qe&f)===f&&(_t===4||_t===3&&(Qe&62914560)===Qe&&300>Ae()-gy?(it&2)===0&&sl(a,0):py|=f,nl===Qe&&(nl=0)),ci(a)}function qT(a,c){c===0&&(c=Ma()),a=Va(a,c),a!==null&&(ur(a,c),ci(a))}function fH(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),qT(a,f)}function hH(a,c){var f=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),qT(a,f)}function pH(a,c){return Ne(a,c)}var Nf=null,al=null,Ey=!1,Tf=!1,ky=!1,Io=0;function ci(a){a!==al&&a.next===null&&(al===null?Nf=al=a:al=al.next=a),Tf=!0,Ey||(Ey=!0,gH())}function Hc(a,c){if(!ky&&Tf){ky=!0;do for(var f=!1,m=Nf;m!==null;){if(a!==0){var b=m.pendingLanes;if(b===0)var C=0;else{var M=m.suspendedLanes,j=m.pingedLanes;C=(1<<31-wt(42|a)+1)-1,C&=b&~(M&~j),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,UT(m,C))}else C=Qe,C=Ei(m,m===pt?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(C&3)===0||ki(m,C)||(f=!0,UT(m,C));m=m.next}while(f);ky=!1}}function mH(){VT()}function VT(){Tf=Ey=!1;var a=0;Io!==0&&(EH()&&(a=Io),Io=0);for(var c=Ae(),f=null,m=Nf;m!==null;){var b=m.next,C=HT(m,c);C===0?(m.next=null,f===null?Nf=b:f.next=b,b===null&&(al=f)):(f=m,(a!==0||(C&3)!==0)&&(Tf=!0)),m=b}Hc(a)}function HT(a,c){for(var f=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var M=31-wt(C),j=1<<M,U=b[M];U===-1?((j&f)===0||(j&m)!==0)&&(b[M]=rc(j,c)):U<=c&&(a.expiredLanes|=j),C&=~j}if(c=pt,f=Qe,f=Ei(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,f===0||a===c&&(st===2||st===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&we(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||ki(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(m!==null&&we(m),yo(f)){case 2:case 8:f=Or;break;case 32:f=wn;break;case 268435456:f=rt;break;default:f=wn}return m=FT.bind(null,a),f=Ne(f,m),a.callbackPriority=c,a.callbackNode=f,c}return m!==null&&m!==null&&we(m),a.callbackPriority=2,a.callbackNode=null,2}function FT(a,c){if(mn!==0&&mn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(kf()&&a.callbackNode!==f)return null;var m=Qe;return m=Ei(a,a===pt?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(kT(a,m,c),HT(a,Ae()),a.callbackNode!=null&&a.callbackNode===f?FT.bind(null,a):null)}function UT(a,c){if(kf())return null;kT(a,c,!0)}function gH(){NH(function(){(it&6)!==0?Ne(gt,mH):VT()})}function Ny(){return Io===0&&(Io=Aa()),Io}function $T(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Id(""+a)}function GT(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function yH(a,c,f,m,b){if(c==="submit"&&f&&f.stateNode===b){var C=$T((b[Qt]||null).action),M=m.submitter;M&&(c=(c=M[Qt]||null)?$T(c.formAction):M.getAttribute("formAction"),c!==null&&(C=c,M=null));var j=new Vd("action","action",null,m,b);a.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Io!==0){var U=M?GT(b,M):new FormData(b);Gg(f,{pending:!0,data:U,method:b.method,action:C},null,U)}}else typeof C=="function"&&(j.preventDefault(),U=M?GT(b,M):new FormData(b),Gg(f,{pending:!0,data:U,method:b.method,action:C},C,U))},currentTarget:b}]})}}for(var Ty=0;Ty<dg.length;Ty++){var Ay=dg[Ty],vH=Ay.toLowerCase(),bH=Ay[0].toUpperCase()+Ay.slice(1);qr(vH,"on"+bH)}qr(k2,"onAnimationEnd"),qr(N2,"onAnimationIteration"),qr(T2,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(P8,"onTransitionRun"),qr(I8,"onTransitionStart"),qr(B8,"onTransitionCancel"),qr(A2,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fc));function KT(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],b=m.event;m=m.listeners;e:{var C=void 0;if(c)for(var M=m.length-1;0<=M;M--){var j=m[M],U=j.instance,re=j.currentTarget;if(j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(de){pf(de)}b.currentTarget=null,C=U}else for(M=0;M<m.length;M++){if(j=m[M],U=j.instance,re=j.currentTarget,j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(de){pf(de)}b.currentTarget=null,C=U}}}}function Xe(a,c){var f=c[vo];f===void 0&&(f=c[vo]=new Set);var m=a+"__bubble";f.has(m)||(YT(c,a,2,!1),f.add(m))}function My(a,c,f){var m=0;c&&(m|=4),YT(f,a,m,c)}var Af="_reactListening"+Math.random().toString(36).slice(2);function _y(a){if(!a[Af]){a[Af]=!0,Ai.forEach(function(f){f!=="selectionchange"&&(xH.has(f)||My(f,!1,a),My(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Af]||(c[Af]=!0,My("selectionchange",!1,c))}}function YT(a,c,f,m){switch(vA(c)){case 2:var b=KH;break;case 8:b=YH;break;default:b=Uy}f=b.bind(null,c,f,a),b=void 0,!Qm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(c,f,{capture:!0,passive:b}):a.addEventListener(c,f,!0):b!==void 0?a.addEventListener(c,f,{passive:b}):a.addEventListener(c,f,!1)}function Dy(a,c,f,m,b){var C=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var j=m.stateNode.containerInfo;if(j===b)break;if(M===4)for(M=m.return;M!==null;){var U=M.tag;if((U===3||U===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;j!==null;){if(M=ti(j),M===null)return;if(U=M.tag,U===5||U===6||U===26||U===27){m=C=M;continue e}j=j.parentNode}}m=m.return}t2(function(){var re=C,de=Xm(f),he=[];e:{var ie=M2.get(a);if(ie!==void 0){var oe=Vd,Be=a;switch(a){case"keypress":if(zd(f)===0)break e;case"keydown":case"keyup":oe=p8;break;case"focusin":Be="focus",oe=ng;break;case"focusout":Be="blur",oe=ng;break;case"beforeblur":case"afterblur":oe=ng;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=i2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=n8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=y8;break;case k2:case N2:case T2:oe=s8;break;case A2:oe=b8;break;case"scroll":case"scrollend":oe=e8;break;case"wheel":oe=w8;break;case"copy":case"cut":case"paste":oe=a8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=o2;break;case"toggle":case"beforetoggle":oe=C8}var Le=(c&4)!==0,ut=!Le&&(a==="scroll"||a==="scrollend"),J=Le?ie!==null?ie+"Capture":null:ie;Le=[];for(var Y=re,ne;Y!==null;){var fe=Y;if(ne=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ne===null||J===null||(fe=lc(Y,J),fe!=null&&Le.push(Uc(Y,fe,ne))),ut)break;Y=Y.return}0<Le.length&&(ie=new oe(ie,Be,null,f,de),he.push({event:ie,listeners:Le}))}}if((c&7)===0){e:{if(ie=a==="mouseover"||a==="pointerover",oe=a==="mouseout"||a==="pointerout",ie&&f!==Wm&&(Be=f.relatedTarget||f.fromElement)&&(ti(Be)||Be[Pr]))break e;if((oe||ie)&&(ie=de.window===de?de:(ie=de.ownerDocument)?ie.defaultView||ie.parentWindow:window,oe?(Be=f.relatedTarget||f.toElement,oe=re,Be=Be?ti(Be):null,Be!==null&&(ut=s(Be),Le=Be.tag,Be!==ut||Le!==5&&Le!==27&&Le!==6)&&(Be=null)):(oe=null,Be=re),oe!==Be)){if(Le=i2,fe="onMouseLeave",J="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Le=o2,fe="onPointerLeave",J="onPointerEnter",Y="pointer"),ut=oe==null?ie:ni(oe),ne=Be==null?ie:ni(Be),ie=new Le(fe,Y+"leave",oe,f,de),ie.target=ut,ie.relatedTarget=ne,fe=null,ti(de)===re&&(Le=new Le(J,Y+"enter",Be,f,de),Le.target=ne,Le.relatedTarget=ut,fe=Le),ut=fe,oe&&Be)t:{for(Le=oe,J=Be,Y=0,ne=Le;ne;ne=ll(ne))Y++;for(ne=0,fe=J;fe;fe=ll(fe))ne++;for(;0<Y-ne;)Le=ll(Le),Y--;for(;0<ne-Y;)J=ll(J),ne--;for(;Y--;){if(Le===J||J!==null&&Le===J.alternate)break t;Le=ll(Le),J=ll(J)}Le=null}else Le=null;oe!==null&&WT(he,ie,oe,Le,!1),Be!==null&&ut!==null&&WT(he,ut,Be,Le,!0)}}e:{if(ie=re?ni(re):window,oe=ie.nodeName&&ie.nodeName.toLowerCase(),oe==="select"||oe==="input"&&ie.type==="file")var Ce=p2;else if(f2(ie))if(m2)Ce=O8;else{Ce=D8;var Ye=_8}else oe=ie.nodeName,!oe||oe.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?re&&Ym(re.elementType)&&(Ce=p2):Ce=R8;if(Ce&&(Ce=Ce(a,re))){h2(he,Ce,f,de);break e}Ye&&Ye(a,ie,re),a==="focusout"&&re&&ie.type==="number"&&re.memoizedProps.value!=null&&Mn(ie,"number",ie.value)}switch(Ye=re?ni(re):window,a){case"focusin":(f2(Ye)||Ye.contentEditable==="true")&&(Ba=Ye,lg=re,gc=null);break;case"focusout":gc=lg=Ba=null;break;case"mousedown":cg=!0;break;case"contextmenu":case"mouseup":case"dragend":cg=!1,C2(he,f,de);break;case"selectionchange":if(L8)break;case"keydown":case"keyup":C2(he,f,de)}var Me;if(ig)e:{switch(a){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ia?u2(a,f)&&(Ie="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ie="onCompositionStart");Ie&&(a2&&f.locale!=="ko"&&(Ia||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ia&&(Me=n2()):(ms=de,Jm="value"in ms?ms.value:ms.textContent,Ia=!0)),Ye=Mf(re,Ie),0<Ye.length&&(Ie=new s2(Ie,a,null,f,de),he.push({event:Ie,listeners:Ye}),Me?Ie.data=Me:(Me=d2(f),Me!==null&&(Ie.data=Me)))),(Me=k8?N8(a,f):T8(a,f))&&(Ie=Mf(re,"onBeforeInput"),0<Ie.length&&(Ye=new s2("onBeforeInput","beforeinput",null,f,de),he.push({event:Ye,listeners:Ie}),Ye.data=Me)),yH(he,a,re,f,de)}KT(he,c)})}function Uc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Mf(a,c){for(var f=c+"Capture",m=[];a!==null;){var b=a,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=lc(a,f),b!=null&&m.unshift(Uc(a,b,C)),b=lc(a,c),b!=null&&m.push(Uc(a,b,C))),a.tag===3)return m;a=a.return}return[]}function ll(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function WT(a,c,f,m,b){for(var C=c._reactName,M=[];f!==null&&f!==m;){var j=f,U=j.alternate,re=j.stateNode;if(j=j.tag,U!==null&&U===m)break;j!==5&&j!==26&&j!==27||re===null||(U=re,b?(re=lc(f,C),re!=null&&M.unshift(Uc(f,re,U))):b||(re=lc(f,C),re!=null&&M.push(Uc(f,re,U)))),f=f.return}M.length!==0&&a.push({event:c,listeners:M})}var wH=/\r\n?/g,SH=/\u0000|\uFFFD/g;function XT(a){return(typeof a=="string"?a:""+a).replace(wH,`
`).replace(SH,"")}function ZT(a,c){return c=XT(c),XT(a)===c}function _f(){}function ct(a,c,f,m,b,C){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||At(a,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&At(a,""+m);break;case"className":hs(a,"class",m);break;case"tabIndex":hs(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(a,f,m);break;case"style":Jk(a,m,C);break;case"data":if(c!=="object"){hs(a,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Id(""+m),a.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&ct(a,c,"name",b.name,b,null),ct(a,c,"formEncType",b.formEncType,b,null),ct(a,c,"formMethod",b.formMethod,b,null),ct(a,c,"formTarget",b.formTarget,b,null)):(ct(a,c,"encType",b.encType,b,null),ct(a,c,"method",b.method,b,null),ct(a,c,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=Id(""+m),a.setAttribute(f,m);break;case"onClick":m!=null&&(a.onclick=_f);break;case"onScroll":m!=null&&Xe("scroll",a);break;case"onScrollEnd":m!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}f=Id(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""+m):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":m===!0?a.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,m):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(f,m):a.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(f):a.setAttribute(f,m);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),ii(a,"popover",m);break;case"xlinkActuate":Yn(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Yn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Yn(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Yn(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Yn(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Yn(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ii(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=QV.get(f)||f,ii(a,f,m))}}function Ry(a,c,f,m,b,C){switch(f){case"style":Jk(a,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof m=="string"?At(a,m):(typeof m=="number"||typeof m=="bigint")&&At(a,""+m);break;case"onScroll":m!=null&&Xe("scroll",a);break;case"onScrollEnd":m!=null&&Xe("scrollend",a);break;case"onClick":m!=null&&(a.onclick=_f);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fs.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),c=f.slice(2,b?f.length-7:void 0),C=a[Qt]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(c,C,b),typeof m=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,m,b);break e}f in a?a[f]=m:m===!0?a.setAttribute(f,""):ii(a,f,m)}}}function gn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var m=!1,b=!1,C;for(C in f)if(f.hasOwnProperty(C)){var M=f[C];if(M!=null)switch(C){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ct(a,c,C,M,f,null)}}b&&ct(a,c,"srcSet",f.srcSet,f,null),m&&ct(a,c,"src",f.src,f,null);return;case"input":Xe("invalid",a);var j=C=M=b=null,U=null,re=null;for(m in f)if(f.hasOwnProperty(m)){var de=f[m];if(de!=null)switch(m){case"name":b=de;break;case"type":M=de;break;case"checked":U=de;break;case"defaultChecked":re=de;break;case"value":C=de;break;case"defaultValue":j=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:ct(a,c,m,de,f,null)}}qt(a,C,j,U,re,M,b,!1),ae(a);return;case"select":Xe("invalid",a),m=M=C=null;for(b in f)if(f.hasOwnProperty(b)&&(j=f[b],j!=null))switch(b){case"value":C=j;break;case"defaultValue":M=j;break;case"multiple":m=j;default:ct(a,c,b,j,f,null)}c=C,f=M,a.multiple=!!m,c!=null?rn(a,!!m,c,!1):f!=null&&rn(a,!!m,f,!0);return;case"textarea":Xe("invalid",a),C=b=m=null;for(M in f)if(f.hasOwnProperty(M)&&(j=f[M],j!=null))switch(M){case"value":m=j;break;case"defaultValue":b=j;break;case"children":C=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:ct(a,c,M,j,f,null)}Je(a,m,b,C),ae(a);return;case"option":for(U in f)if(f.hasOwnProperty(U)&&(m=f[U],m!=null))switch(U){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ct(a,c,U,m,f,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(m=0;m<Fc.length;m++)Xe(Fc[m],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(m=f[re],m!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ct(a,c,re,m,f,null)}return;default:if(Ym(c)){for(de in f)f.hasOwnProperty(de)&&(m=f[de],m!==void 0&&Ry(a,c,de,m,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(m=f[j],m!=null&&ct(a,c,j,m,f,null))}function CH(a,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,M=null,j=null,U=null,re=null,de=null;for(oe in f){var he=f[oe];if(f.hasOwnProperty(oe)&&he!=null)switch(oe){case"checked":break;case"value":break;case"defaultValue":U=he;default:m.hasOwnProperty(oe)||ct(a,c,oe,null,m,he)}}for(var ie in m){var oe=m[ie];if(he=f[ie],m.hasOwnProperty(ie)&&(oe!=null||he!=null))switch(ie){case"type":C=oe;break;case"name":b=oe;break;case"checked":re=oe;break;case"defaultChecked":de=oe;break;case"value":M=oe;break;case"defaultValue":j=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(r(137,c));break;default:oe!==he&&ct(a,c,ie,oe,m,he)}}Fe(a,M,j,U,re,de,C,b);return;case"select":oe=M=j=ie=null;for(C in f)if(U=f[C],f.hasOwnProperty(C)&&U!=null)switch(C){case"value":break;case"multiple":oe=U;default:m.hasOwnProperty(C)||ct(a,c,C,null,m,U)}for(b in m)if(C=m[b],U=f[b],m.hasOwnProperty(b)&&(C!=null||U!=null))switch(b){case"value":ie=C;break;case"defaultValue":j=C;break;case"multiple":M=C;default:C!==U&&ct(a,c,b,C,m,U)}c=j,f=M,m=oe,ie!=null?rn(a,!!f,ie,!1):!!m!=!!f&&(c!=null?rn(a,!!f,c,!0):rn(a,!!f,f?[]:"",!1));return;case"textarea":oe=ie=null;for(j in f)if(b=f[j],f.hasOwnProperty(j)&&b!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:ct(a,c,j,null,m,b)}for(M in m)if(b=m[M],C=f[M],m.hasOwnProperty(M)&&(b!=null||C!=null))switch(M){case"value":ie=b;break;case"defaultValue":oe=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==C&&ct(a,c,M,b,m,C)}Mi(a,ie,oe);return;case"option":for(var Be in f)if(ie=f[Be],f.hasOwnProperty(Be)&&ie!=null&&!m.hasOwnProperty(Be))switch(Be){case"selected":a.selected=!1;break;default:ct(a,c,Be,null,m,ie)}for(U in m)if(ie=m[U],oe=f[U],m.hasOwnProperty(U)&&ie!==oe&&(ie!=null||oe!=null))switch(U){case"selected":a.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:ct(a,c,U,ie,m,oe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in f)ie=f[Le],f.hasOwnProperty(Le)&&ie!=null&&!m.hasOwnProperty(Le)&&ct(a,c,Le,null,m,ie);for(re in m)if(ie=m[re],oe=f[re],m.hasOwnProperty(re)&&ie!==oe&&(ie!=null||oe!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,c));break;default:ct(a,c,re,ie,m,oe)}return;default:if(Ym(c)){for(var ut in f)ie=f[ut],f.hasOwnProperty(ut)&&ie!==void 0&&!m.hasOwnProperty(ut)&&Ry(a,c,ut,void 0,m,ie);for(de in m)ie=m[de],oe=f[de],!m.hasOwnProperty(de)||ie===oe||ie===void 0&&oe===void 0||Ry(a,c,de,ie,m,oe);return}}for(var J in f)ie=f[J],f.hasOwnProperty(J)&&ie!=null&&!m.hasOwnProperty(J)&&ct(a,c,J,null,m,ie);for(he in m)ie=m[he],oe=f[he],!m.hasOwnProperty(he)||ie===oe||ie==null&&oe==null||ct(a,c,he,ie,m,oe)}var Oy=null,jy=null;function Df(a){return a.nodeType===9?a:a.ownerDocument}function QT(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function JT(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function Ly(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Py=null;function EH(){var a=window.event;return a&&a.type==="popstate"?a===Py?!1:(Py=a,!0):(Py=null,!1)}var eA=typeof setTimeout=="function"?setTimeout:void 0,kH=typeof clearTimeout=="function"?clearTimeout:void 0,tA=typeof Promise=="function"?Promise:void 0,NH=typeof queueMicrotask=="function"?queueMicrotask:typeof tA<"u"?function(a){return tA.resolve(null).then(a).catch(TH)}:eA;function TH(a){setTimeout(function(){throw a})}function Ds(a){return a==="head"}function nA(a,c){var f=c,m=0,b=0;do{var C=f.nextSibling;if(a.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<m&&8>m){f=m;var M=a.ownerDocument;if(f&1&&$c(M.documentElement),f&2&&$c(M.body),f&4)for(f=M.head,$c(f),M=f.firstChild;M;){var j=M.nextSibling,U=M.nodeName;M[Ti]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=j}}if(b===0){a.removeChild(C),Jc(c);return}b--}else f==="$"||f==="$?"||f==="$!"?b++:m=f.charCodeAt(0)-48;else m=0;f=C}while(f);Jc(c)}function Iy(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Iy(f),ds(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function AH(a,c,f,m){for(;a.nodeType===1;){var b=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Ti])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Hr(a.nextSibling),a===null)break}return null}function MH(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Hr(a.nextSibling),a===null))return null;return a}function By(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function _H(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var m=function(){c(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Hr(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var zy=null;function rA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function iA(a,c,f){switch(c=Df(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function $c(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);ds(a)}var vr=new Map,sA=new Set;function Rf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Fi=q.d;q.d={f:DH,r:RH,D:OH,C:jH,L:LH,m:PH,X:BH,S:IH,M:zH};function DH(){var a=Fi.f(),c=Cf();return a||c}function RH(a){var c=Ir(a);c!==null&&c.tag===5&&c.type==="form"?kN(c):Fi.r(a)}var cl=typeof document>"u"?null:document;function oA(a,c,f){var m=cl;if(m&&typeof c=="string"&&c){var b=_e(c);b='link[rel="'+a+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),sA.has(b)||(sA.add(b),a={rel:a,crossOrigin:f,href:c},m.querySelector(b)===null&&(c=m.createElement("link"),gn(c,"link",a),Tt(c),m.head.appendChild(c)))}}function OH(a){Fi.D(a),oA("dns-prefetch",a,null)}function jH(a,c){Fi.C(a,c),oA("preconnect",a,c)}function LH(a,c,f){Fi.L(a,c,f);var m=cl;if(m&&a&&c){var b='link[rel="preload"][as="'+_e(c)+'"]';c==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+_e(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+_e(f.imageSizes)+'"]')):b+='[href="'+_e(a)+'"]';var C=b;switch(c){case"style":C=ul(a);break;case"script":C=dl(a)}vr.has(C)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),vr.set(C,a),m.querySelector(b)!==null||c==="style"&&m.querySelector(Gc(C))||c==="script"&&m.querySelector(Kc(C))||(c=m.createElement("link"),gn(c,"link",a),Tt(c),m.head.appendChild(c)))}}function PH(a,c){Fi.m(a,c);var f=cl;if(f&&a){var m=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+_e(m)+'"][href="'+_e(a)+'"]',C=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=dl(a)}if(!vr.has(C)&&(a=h({rel:"modulepreload",href:a},c),vr.set(C,a),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Kc(C)))return}m=f.createElement("link"),gn(m,"link",a),Tt(m),f.head.appendChild(m)}}}function IH(a,c,f){Fi.S(a,c,f);var m=cl;if(m&&a){var b=Br(m).hoistableStyles,C=ul(a);c=c||"default";var M=b.get(C);if(!M){var j={loading:0,preload:null};if(M=m.querySelector(Gc(C)))j.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=vr.get(C))&&qy(a,f);var U=M=m.createElement("link");Tt(U),gn(U,"link",a),U._p=new Promise(function(re,de){U.onload=re,U.onerror=de}),U.addEventListener("load",function(){j.loading|=1}),U.addEventListener("error",function(){j.loading|=2}),j.loading|=4,Of(M,c,m)}M={type:"stylesheet",instance:M,count:1,state:j},b.set(C,M)}}}function BH(a,c){Fi.X(a,c);var f=cl;if(f&&a){var m=Br(f).hoistableScripts,b=dl(a),C=m.get(b);C||(C=f.querySelector(Kc(b)),C||(a=h({src:a,async:!0},c),(c=vr.get(b))&&Vy(a,c),C=f.createElement("script"),Tt(C),gn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(b,C))}}function zH(a,c){Fi.M(a,c);var f=cl;if(f&&a){var m=Br(f).hoistableScripts,b=dl(a),C=m.get(b);C||(C=f.querySelector(Kc(b)),C||(a=h({src:a,async:!0,type:"module"},c),(c=vr.get(b))&&Vy(a,c),C=f.createElement("script"),Tt(C),gn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(b,C))}}function aA(a,c,f,m){var b=(b=ee.current)?Rf(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=ul(f.href),f=Br(b).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=ul(f.href);var C=Br(b).hoistableStyles,M=C.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,M),(C=b.querySelector(Gc(a)))&&!C._p&&(M.instance=C,M.state.loading=5),vr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},vr.set(a,f),C||qH(b,a,f,M.state))),c&&m===null)throw Error(r(528,""));return M}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=dl(f),f=Br(b).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function ul(a){return'href="'+_e(a)+'"'}function Gc(a){return'link[rel="stylesheet"]['+a+"]"}function lA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function qH(a,c,f,m){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=a.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),gn(c,"link",f),Tt(c),a.head.appendChild(c))}function dl(a){return'[src="'+_e(a)+'"]'}function Kc(a){return"script[async]"+a}function cA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=a.querySelector('style[data-href~="'+_e(f.href)+'"]');if(m)return c.instance=m,Tt(m),m;var b=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Tt(m),gn(m,"style",b),Of(m,f.precedence,a),c.instance=m;case"stylesheet":b=ul(f.href);var C=a.querySelector(Gc(b));if(C)return c.state.loading|=4,c.instance=C,Tt(C),C;m=lA(f),(b=vr.get(b))&&qy(m,b),C=(a.ownerDocument||a).createElement("link"),Tt(C);var M=C;return M._p=new Promise(function(j,U){M.onload=j,M.onerror=U}),gn(C,"link",m),c.state.loading|=4,Of(C,f.precedence,a),c.instance=C;case"script":return C=dl(f.src),(b=a.querySelector(Kc(C)))?(c.instance=b,Tt(b),b):(m=f,(b=vr.get(C))&&(m=h({},f),Vy(m,b)),a=a.ownerDocument||a,b=a.createElement("script"),Tt(b),gn(b,"link",m),a.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Of(m,f.precedence,a));return c.instance}function Of(a,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,C=b,M=0;M<m.length;M++){var j=m[M];if(j.dataset.precedence===c)C=j;else if(C!==b)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function qy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function Vy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var jf=null;function uA(a,c,f){if(jf===null){var m=new Map,b=jf=new Map;b.set(f,m)}else b=jf,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(a))return m;for(m.set(a,null),f=f.getElementsByTagName(a),b=0;b<f.length;b++){var C=f[b];if(!(C[Ti]||C[Nt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(c)||"";M=a+M;var j=m.get(M);j?j.push(C):m.set(M,[C])}}return m}function dA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function VH(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function fA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Yc=null;function HH(){}function FH(a,c,f){if(Yc===null)throw Error(r(475));var m=Yc;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=ul(f.href),C=a.querySelector(Gc(b));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Lf.bind(m),a.then(m,m)),c.state.loading|=4,c.instance=C,Tt(C);return}C=a.ownerDocument||a,f=lA(f),(b=vr.get(b))&&qy(f,b),C=C.createElement("link"),Tt(C);var M=C;M._p=new Promise(function(j,U){M.onload=j,M.onerror=U}),gn(C,"link",f),c.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Lf.bind(m),a.addEventListener("load",c),a.addEventListener("error",c))}}function UH(){if(Yc===null)throw Error(r(475));var a=Yc;return a.stylesheets&&a.count===0&&Hy(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&Hy(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Lf(){if(this.count--,this.count===0){if(this.stylesheets)Hy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Pf=null;function Hy(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Pf=new Map,c.forEach($H,a),Pf=null,Lf.call(a))}function $H(a,c){if(!(c.state.loading&4)){var f=Pf.get(a);if(f)var m=f.get(null);else{f=new Map,Pf.set(a,f);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var M=b[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(f.set(M.dataset.precedence,M),m=M)}m&&f.set(null,m)}b=c.instance,M=b.getAttribute("data-precedence"),C=f.get(M)||m,C===m&&f.set(null,b),f.set(M,b),this.count++,m=Lf.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),C?C.parentNode.insertBefore(b,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),c.state.loading|=4}}var Wc={$$typeof:k,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function GH(a,c,f,m,b,C,M,j){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function hA(a,c,f,m,b,C,M,j,U,re,de,he){return a=new GH(a,c,f,M,j,U,re,he),c=1,C===!0&&(c|=24),C=Xn(3,null,null,c),a.current=C,C.stateNode=a,c=Cg(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:m,isDehydrated:f,cache:c},Tg(C),a}function pA(a){return a?(a=Ha,a):Ha}function mA(a,c,f,m,b,C){b=pA(b),m.context===null?m.context=b:m.pendingContext=b,m=vs(c),m.payload={element:f},C=C===void 0?null:C,C!==null&&(m.callback=C),f=bs(a,m,c),f!==null&&(tr(f,a,c),kc(f,a,c))}function gA(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function Fy(a,c){gA(a,c),(a=a.alternate)&&gA(a,c)}function yA(a){if(a.tag===13){var c=Va(a,67108864);c!==null&&tr(c,a,67108864),Fy(a,67108864)}}var If=!0;function KH(a,c,f,m){var b=I.T;I.T=null;var C=q.p;try{q.p=2,Uy(a,c,f,m)}finally{q.p=C,I.T=b}}function YH(a,c,f,m){var b=I.T;I.T=null;var C=q.p;try{q.p=8,Uy(a,c,f,m)}finally{q.p=C,I.T=b}}function Uy(a,c,f,m){if(If){var b=$y(m);if(b===null)Dy(a,c,m,Bf,f),bA(a,m);else if(XH(b,a,c,f,m))m.stopPropagation();else if(bA(a,m),c&4&&-1<WH.indexOf(a)){for(;b!==null;){var C=Ir(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=Lr(C.pendingLanes);if(M!==0){var j=C;for(j.pendingLanes|=2,j.entangledLanes|=2;M;){var U=1<<31-wt(M);j.entanglements[1]|=U,M&=~U}ci(C),(it&6)===0&&(wf=Ae()+500,Hc(0))}}break;case 13:j=Va(C,2),j!==null&&tr(j,C,2),Cf(),Fy(C,2)}if(C=$y(m),C===null&&Dy(a,c,m,Bf,f),C===b)break;b=C}b!==null&&m.stopPropagation()}else Dy(a,c,m,null,f)}}function $y(a){return a=Xm(a),Gy(a)}var Bf=null;function Gy(a){if(Bf=null,a=ti(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Bf=a,null}function vA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(at()){case gt:return 2;case Or:return 8;case wn:case Wt:return 32;case rt:return 268435456;default:return 32}default:return 32}}var Ky=!1,Rs=null,Os=null,js=null,Xc=new Map,Zc=new Map,Ls=[],WH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bA(a,c){switch(a){case"focusin":case"focusout":Rs=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":js=null;break;case"pointerover":case"pointerout":Xc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(c.pointerId)}}function Qc(a,c,f,m,b,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:C,targetContainers:[b]},c!==null&&(c=Ir(c),c!==null&&yA(c)),a):(a.eventSystemFlags|=m,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function XH(a,c,f,m,b){switch(c){case"focusin":return Rs=Qc(Rs,a,c,f,m,b),!0;case"dragenter":return Os=Qc(Os,a,c,f,m,b),!0;case"mouseover":return js=Qc(js,a,c,f,m,b),!0;case"pointerover":var C=b.pointerId;return Xc.set(C,Qc(Xc.get(C)||null,a,c,f,m,b)),!0;case"gotpointercapture":return C=b.pointerId,Zc.set(C,Qc(Zc.get(C)||null,a,c,f,m,b)),!0}return!1}function xA(a){var c=ti(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,ic(a.priority,function(){if(f.tag===13){var m=er();m=Jr(m);var b=Va(f,m);b!==null&&tr(b,f,m),Fy(f,m)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function zf(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=$y(a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Wm=m,f.target.dispatchEvent(m),Wm=null}else return c=Ir(f),c!==null&&yA(c),a.blockedOn=f,!1;c.shift()}return!0}function wA(a,c,f){zf(a)&&f.delete(c)}function ZH(){Ky=!1,Rs!==null&&zf(Rs)&&(Rs=null),Os!==null&&zf(Os)&&(Os=null),js!==null&&zf(js)&&(js=null),Xc.forEach(wA),Zc.forEach(wA)}function qf(a,c){a.blockedOn===c&&(a.blockedOn=null,Ky||(Ky=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ZH)))}var Vf=null;function SA(a){Vf!==a&&(Vf=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Vf===a&&(Vf=null);for(var c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],b=a[c+2];if(typeof m!="function"){if(Gy(m||f)===null)continue;break}var C=Ir(f);C!==null&&(a.splice(c,3),c-=3,Gg(C,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function Jc(a){function c(U){return qf(U,a)}Rs!==null&&qf(Rs,a),Os!==null&&qf(Os,a),js!==null&&qf(js,a),Xc.forEach(c),Zc.forEach(c);for(var f=0;f<Ls.length;f++){var m=Ls[f];m.blockedOn===a&&(m.blockedOn=null)}for(;0<Ls.length&&(f=Ls[0],f.blockedOn===null);)xA(f),f.blockedOn===null&&Ls.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],C=f[m+1],M=b[Qt]||null;if(typeof C=="function")M||SA(f);else if(M){var j=null;if(C&&C.hasAttribute("formAction")){if(b=C,M=C[Qt]||null)j=M.formAction;else if(Gy(b)!==null)continue}else j=M.action;typeof j=="function"?f[m+1]=j:(f.splice(m,3),m-=3),SA(f)}}}function Yy(a){this._internalRoot=a}Hf.prototype.render=Yy.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,m=er();mA(f,m,a,c,null,null)},Hf.prototype.unmount=Yy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;mA(a.current,2,null,a,null,null),Cf(),c[Pr]=null}};function Hf(a){this._internalRoot=a}Hf.prototype.unstable_scheduleHydration=function(a){if(a){var c=ei();a={blockedOn:null,target:a,priority:c};for(var f=0;f<Ls.length&&c!==0&&c<Ls[f].priority;f++);Ls.splice(f,0,a),f===0&&xA(a)}};var CA=t.version;if(CA!=="19.1.1")throw Error(r(527,CA,"19.1.1"));q.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var QH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ff.isDisabled&&Ff.supportsFiber)try{Xt=Ff.inject(QH),dt=Ff}catch{}}return tu.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,m="",b=zN,C=qN,M=VN,j=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=hA(a,1,!1,null,null,f,m,b,C,M,j,null),a[Pr]=c.current,_y(a),new Yy(c)},tu.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var m=!1,b="",C=zN,M=qN,j=VN,U=null,re=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks),f.formState!==void 0&&(re=f.formState)),c=hA(a,1,!0,c,f??null,m,b,C,M,j,U,re),c.context=pA(null),f=c.current,m=er(),m=Jr(m),b=vs(m),b.callback=null,bs(f,b,m),f=m,c.current.lanes=f,ur(c,f),ci(c),a[Pr]=c.current,_y(a),new Hf(c)},tu.version="19.1.1",tu}var OA;function cF(){if(OA)return Zy.exports;OA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zy.exports=lF(),Zy.exports}var uF=cF(),dF=pP();const FC=hd(dF);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iu.apply(this,arguments)}var Ys;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ys||(Ys={}));const jA="popstate";function fF(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:u=""}=va(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),SS("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:mP(s))}function r(i,s){UC(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return pF(t,n,r,e)}function tn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function UC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function hF(){return Math.random().toString(36).substr(2,8)}function LA(e,t){return{usr:e.state,key:e.key,idx:t}}function SS(e,t,n,r){return n===void 0&&(n=null),Iu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?va(t):t,{state:n,key:t&&t.key||r||hF()})}function mP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function va(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function pF(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Ys.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Iu({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Ys.Pop;let w=h(),E=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:E})}function g(w,E){l=Ys.Push;let N=SS(S.location,w,E);n&&n(N,w),d=h()+1;let k=LA(N,d),T=S.createHref(N);try{o.pushState(k,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&u&&u({action:l,location:S.location,delta:1})}function y(w,E){l=Ys.Replace;let N=SS(S.location,w,E);n&&n(N,w),d=h();let k=LA(N,d),T=S.createHref(N);o.replaceState(k,"",T),s&&u&&u({action:l,location:S.location,delta:0})}function x(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof w=="string"?w:mP(w);return N=N.replace(/ $/,"%20"),tn(E,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,E)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(jA,p),u=w,()=>{i.removeEventListener(jA,p),u=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let E=x(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:y,go(w){return o.go(w)}};return S}var PA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(PA||(PA={}));function mF(e,t,n){return n===void 0&&(n="/"),gF(e,t,n)}function gF(e,t,n,r){let i=typeof t=="string"?va(t):t,s=vP(i.pathname||"/",n);if(s==null)return null;let o=gP(e);yF(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=MF(s);l=NF(o[u],d)}return l}function gP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(tn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Qo([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(tn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),gP(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:EF(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of yP(s.path))i(s,o,u)}),t}function yP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=yP(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function yF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vF=/^:[\w-]+$/,bF=3,xF=2,wF=1,SF=10,CF=-2,IA=e=>e==="*";function EF(e,t){let n=e.split("/"),r=n.length;return n.some(IA)&&(r+=CF),t&&(r+=xF),n.filter(i=>!IA(i)).reduce((i,s)=>i+(vF.test(s)?bF:s===""?wF:SF),r)}function kF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function NF(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=TF({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Qo([s,p.pathname]),pathnameBase:LF(Qo([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Qo([s,p.pathnameBase]))}return o}function TF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=AF(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[p];return y&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function AF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),UC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function MF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return UC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function _F(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?va(e):e;return{pathname:n?n.startsWith("/")?n:DF(n,t):t,search:PF(r),hash:IF(i)}}function DF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function t0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function RF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function OF(e,t){let n=RF(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function jF(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=va(e):(i=Iu({},e),tn(!i.pathname||!i.pathname.includes("?"),t0("?","pathname","search",i)),tn(!i.pathname||!i.pathname.includes("#"),t0("#","pathname","hash",i)),tn(!i.search||!i.search.includes("#"),t0("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let u=_F(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Qo=e=>e.join("/").replace(/\/\/+/g,"/"),LF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bP=["post","put","patch","delete"];new Set(bP);const zF=["get",...bP];new Set(zF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bu.apply(this,arguments)}const $C=O.createContext(null),qF=O.createContext(null),Up=O.createContext(null),$p=O.createContext(null),ba=O.createContext({outlet:null,matches:[],isDataRoute:!1}),xP=O.createContext(null);function Gp(){return O.useContext($p)!=null}function wP(){return Gp()||tn(!1),O.useContext($p).location}function SP(e){O.useContext(Up).static||O.useLayoutEffect(e)}function md(){let{isDataRoute:e}=O.useContext(ba);return e?eU():VF()}function VF(){Gp()||tn(!1);let e=O.useContext($C),{basename:t,future:n,navigator:r}=O.useContext(Up),{matches:i}=O.useContext(ba),{pathname:s}=wP(),o=JSON.stringify(OF(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return SP(()=>{l.current=!0}),O.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=jF(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Qo([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function HF(){let{matches:e}=O.useContext(ba),t=e[e.length-1];return t?t.params:{}}function FF(e,t){return UF(e,t)}function UF(e,t,n,r){Gp()||tn(!1);let{navigator:i}=O.useContext(Up),{matches:s}=O.useContext(ba),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=wP(),h;if(t){var p;let w=typeof t=="string"?va(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||tn(!1),h=w}else h=d;let g=h.pathname||"/",y=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=mF(e,{pathname:y}),S=WF(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Qo([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Qo([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?O.createElement($p.Provider,{value:{location:Bu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ys.Pop}},S):S}function $F(){let e=JF(),t=BF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:i},n):null,null)}const GF=O.createElement($F,null);class KF extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?O.createElement(ba.Provider,{value:this.props.routeContext},O.createElement(xP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YF(e){let{routeContext:t,match:n,children:r}=e,i=O.useContext($C);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ba.Provider,{value:t},r)}function WF(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||tn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:y}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,x=!1,S=null,w=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||GF,u&&(d<0&&g===0?(tU("route-fallback"),x=!0,w=null):d===g&&(x=!0,w=p.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,g+1)),N=()=>{let k;return y?k=S:x?k=w:p.route.Component?k=O.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,O.createElement(YF,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(KF,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:N(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):N()},null)}var CP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(CP||{}),EP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(EP||{});function XF(e){let t=O.useContext($C);return t||tn(!1),t}function ZF(e){let t=O.useContext(qF);return t||tn(!1),t}function QF(e){let t=O.useContext(ba);return t||tn(!1),t}function kP(e){let t=QF(),n=t.matches[t.matches.length-1];return n.route.id||tn(!1),n.route.id}function JF(){var e;let t=O.useContext(xP),n=ZF(),r=kP();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function eU(){let{router:e}=XF(CP.UseNavigateStable),t=kP(EP.UseNavigateStable),n=O.useRef(!1);return SP(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Bu({fromRouteId:t},s)))},[e,t])}const BA={};function tU(e,t,n){BA[e]||(BA[e]=!0)}function nU(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function qo(e){tn(!1)}function rU(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Ys.Pop,navigator:s,static:o=!1,future:l}=e;Gp()&&tn(!1);let u=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:s,static:o,future:Bu({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=va(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:x="default"}=r,S=O.useMemo(()=>{let w=vP(h,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:x},navigationType:i}},[u,h,p,g,y,x,i]);return S==null?null:O.createElement(Up.Provider,{value:d},O.createElement($p.Provider,{children:n,value:S}))}function iU(e){let{children:t,location:n}=e;return FF(CS(t),n)}new Promise(()=>{});function CS(e,t){t===void 0&&(t=[]);let n=[];return O.Children.forEach(e,(r,i)=>{if(!O.isValidElement(r))return;let s=[...t,i];if(r.type===O.Fragment){n.push.apply(n,CS(r.props.children,s));return}r.type!==qo&&tn(!1),!r.props.index||!r.props.children||tn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=CS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sU="6";try{window.__reactRouterVersion=sU}catch{}const oU="startTransition",zA=iF[oU];function aU(e){let{basename:t,children:n,future:r,window:i}=e,s=O.useRef();s.current==null&&(s.current=fF({window:i,v5Compat:!0}));let o=s.current,[l,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=O.useCallback(p=>{d&&zA?zA(()=>u(p)):u(p)},[u,d]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>nU(r),[r]),O.createElement(rU,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var qA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(qA||(qA={}));var VA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(VA||(VA={}));var NP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},HA=Re.createContext&&Re.createContext(NP),lU=["attr","size","title"];function cU(e,t){if(e==null)return{};var n=uU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rh.apply(this,arguments)}function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(r){dU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dU(e,t,n){return t=fU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fU(e){var t=hU(e,"string");return typeof t=="symbol"?t:t+""}function hU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TP(e){return e&&e.map((t,n)=>Re.createElement(t.tag,Oh({key:n},t.attr),TP(t.child)))}function tt(e){return t=>Re.createElement(pU,Rh({attr:Oh({},e.attr)},t),TP(e.child))}function pU(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=cU(e,lU),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),Re.createElement("svg",Rh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Oh(Oh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Re.createElement("title",null,s),e.children)};return HA!==void 0?Re.createElement(HA.Consumer,null,n=>t(n)):t(NP)}function mU(e){return tt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function gU(e){return tt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function yU(e){return tt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const vU=e=>e==="system"||e==="light"||e==="dark";function xa(){const[e,t]=O.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return vU(s)?s:"light"}),[n,r]=O.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return O.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),O.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const gd=()=>{const{theme:e,setTheme:t}=xa();return v.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?v.jsx(mU,{size:18}):v.jsx(gU,{size:18})})},nr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},yd=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(O.useEffect(()=>{document.title=e||nr.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let g=document.querySelector(`meta[${p}="${u}"]`);g?g.content=d:(g=document.createElement("meta"),g.setAttribute(p,u),g.content=d,document.head.appendChild(g))};o("description",t||nr.description),o("keywords",n||nr.keywords),o("og:title",e||nr.title,!0),o("og:description",t||nr.description,!0),o("og:image",r||nr.image,!0),o("og:url",i||nr.url,!0),o("og:type",s,!0),o("twitter:title",e||nr.title),o("twitter:description",t||nr.description),o("twitter:image",r||nr.image),o("twitter:url",i||nr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||nr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||nr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class lu extends Error{}lu.prototype.name="InvalidTokenError";function bU(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function xU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return bU(t)}catch{return atob(t)}}function wU(e,t){if(typeof e!="string")throw new lu("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new lu(`Invalid token specified: missing part #${n+1}`);let i;try{i=xU(r)}catch(s){throw new lu(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new lu(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Ui="https://diagrammatic-api.vercel.app";class SU{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${Ui}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${Ui}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${Ui}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${Ui}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${Ui}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${Ui}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${Ui}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${Ui}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${Ui}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}}const Er=new SU,AP=O.createContext(void 0),CU=({children:e})=>{const[t,n]=O.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=O.useCallback(h=>{try{const p=wU(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=O.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);O.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(g=>({...g,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(g=>({...g,isLoading:!1}));return}try{const g=await Er.getCurrentUser();n({user:g,token:p,isAuthenticated:!0,isLoading:!1})}catch(g){console.error("Failed to fetch user:",g),localStorage.removeItem("auth_token"),n(y=>({...y,isLoading:!1}))}})()},[r]);const s=O.useCallback(async h=>{const{user:p,token:g}=await Er.login(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),o=O.useCallback(async h=>{const{user:p,token:g}=await Er.signup(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),l=O.useCallback(async h=>{const{user:p,token:g}=await Er.googleLogin(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),u=O.useCallback(async()=>{if(t.token)try{const h=await Er.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=O.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return v.jsx(AP.Provider,{value:d,children:e})},Kp=()=>{const e=O.useContext(AP);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},GC=O.createContext({});function KC(e){const t=O.useRef(null);return t.current===null&&(t.current=e()),t.current}const YC=typeof window<"u",MP=YC?O.useLayoutEffect:O.useEffect,Yp=O.createContext(null);function WC(e,t){e.indexOf(t)===-1&&e.push(t)}function XC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ts=(e,t,n)=>n>t?t:n<e?e:n;let ZC=()=>{};const ns={},_P=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function DP(e){return typeof e=="object"&&e!==null}const RP=e=>/^0[^.\s]+$/u.test(e);function QC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ar=e=>e,EU=(e,t)=>n=>t(e(n)),vd=(...e)=>e.reduce(EU),zu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class JC{constructor(){this.subscriptions=[]}add(t){return WC(this.subscriptions,t),()=>XC(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const gi=e=>e*1e3,Nr=e=>e/1e3;function OP(e,t){return t?e*(1e3/t):0}const jP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,kU=1e-7,NU=12;function TU(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=jP(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>kU&&++l<NU);return o}function bd(e,t,n,r){if(e===t&&n===r)return Ar;const i=s=>TU(s,0,1,e,n);return s=>s===0||s===1?s:jP(i(s),t,r)}const LP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,PP=e=>t=>1-e(1-t),IP=bd(.33,1.53,.69,.99),eE=PP(IP),BP=LP(eE),zP=e=>(e*=2)<1?.5*eE(e):.5*(2-Math.pow(2,-10*(e-1))),tE=e=>1-Math.sin(Math.acos(e)),qP=PP(tE),VP=LP(tE),AU=bd(.42,0,1,1),MU=bd(0,0,.58,1),HP=bd(.42,0,.58,1),_U=e=>Array.isArray(e)&&typeof e[0]!="number",FP=e=>Array.isArray(e)&&typeof e[0]=="number",DU={linear:Ar,easeIn:AU,easeInOut:HP,easeOut:MU,circIn:tE,circInOut:VP,circOut:qP,backIn:eE,backInOut:BP,backOut:IP,anticipate:zP},RU=e=>typeof e=="string",UA=e=>{if(FP(e)){ZC(e.length===4);const[t,n,r,i]=e;return bd(t,n,r,i)}else if(RU(e))return DU[e];return e},$f=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function OU(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const jU=40;function UP(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=$f.reduce((k,T)=>(k[T]=OU(s),k),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:g,render:y,postRender:x}=o,S=()=>{const k=ns.useManualTiming?i.timestamp:performance.now();n=!1,ns.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,jU),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),y.process(i),x.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:$f.reduce((k,T)=>{const A=o[T];return k[T]=(_,R=!1,D=!1)=>(n||w(),A.schedule(_,R,D)),k},{}),cancel:k=>{for(let T=0;T<$f.length;T++)o[$f[T]].cancel(k)},state:i,steps:o}}const{schedule:vt,cancel:io,state:vn,steps:n0}=UP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ar,!0);let yh;function LU(){yh=void 0}const Hn={now:()=>(yh===void 0&&Hn.set(vn.isProcessing||ns.useManualTiming?vn.timestamp:performance.now()),yh),set:e=>{yh=e,queueMicrotask(LU)}},$P=e=>t=>typeof t=="string"&&t.startsWith(e),nE=$P("--"),PU=$P("var(--"),rE=e=>PU(e)?IU.test(e.split("/*")[0].trim()):!1,IU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Yl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},qu={...Yl,transform:e=>ts(0,1,e)},Gf={...Yl,default:1},bu=e=>Math.round(e*1e5)/1e5,iE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function BU(e){return e==null}const zU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,sE=(e,t)=>n=>!!(typeof n=="string"&&zU.test(n)&&n.startsWith(e)||t&&!BU(n)&&Object.prototype.hasOwnProperty.call(n,t)),GP=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(iE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},qU=e=>ts(0,255,e),r0={...Yl,transform:e=>Math.round(qU(e))},$o={test:sE("rgb","red"),parse:GP("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+r0.transform(e)+", "+r0.transform(t)+", "+r0.transform(n)+", "+bu(qu.transform(r))+")"};function VU(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const ES={test:sE("#"),parse:VU,transform:$o.transform},xd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qs=xd("deg"),yi=xd("%"),ze=xd("px"),HU=xd("vh"),FU=xd("vw"),$A={...yi,parse:e=>yi.parse(e)/100,transform:e=>yi.transform(e*100)},Sl={test:sE("hsl","hue"),parse:GP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+yi.transform(bu(t))+", "+yi.transform(bu(n))+", "+bu(qu.transform(r))+")"},Ft={test:e=>$o.test(e)||ES.test(e)||Sl.test(e),parse:e=>$o.test(e)?$o.parse(e):Sl.test(e)?Sl.parse(e):ES.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?$o.transform(e):Sl.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},UU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $U(e){return isNaN(e)&&typeof e=="string"&&(e.match(iE)?.length||0)+(e.match(UU)?.length||0)>0}const KP="number",YP="color",GU="var",KU="var(",GA="${}",YU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(YU,u=>(Ft.test(u)?(r.color.push(s),i.push(YP),n.push(Ft.parse(u))):u.startsWith(KU)?(r.var.push(s),i.push(GU),n.push(u)):(r.number.push(s),i.push(KP),n.push(parseFloat(u))),++s,GA)).split(GA);return{values:n,split:l,indexes:r,types:i}}function WP(e){return Vu(e).values}function XP(e){const{split:t,types:n}=Vu(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===KP?s+=bu(i[o]):l===YP?s+=Ft.transform(i[o]):s+=i[o]}return s}}const WU=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function XU(e){const t=WP(e);return XP(e)(t.map(WU))}const so={test:$U,parse:WP,createTransformer:XP,getAnimatableNone:XU};function i0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ZU({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=i0(u,l,e+1/3),s=i0(u,l,e),o=i0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function jh(e,t){return n=>n>0?t:e}const Et=(e,t,n)=>e+(t-e)*n,s0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},QU=[ES,$o,Sl],JU=e=>QU.find(t=>t.test(e));function KA(e){const t=JU(e);if(!t)return!1;let n=t.parse(e);return t===Sl&&(n=ZU(n)),n}const YA=(e,t)=>{const n=KA(e),r=KA(t);if(!n||!r)return jh(e,t);const i={...n};return s=>(i.red=s0(n.red,r.red,s),i.green=s0(n.green,r.green,s),i.blue=s0(n.blue,r.blue,s),i.alpha=Et(n.alpha,r.alpha,s),$o.transform(i))},kS=new Set(["none","hidden"]);function e$(e,t){return kS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function t$(e,t){return n=>Et(e,t,n)}function oE(e){return typeof e=="number"?t$:typeof e=="string"?rE(e)?jh:Ft.test(e)?YA:i$:Array.isArray(e)?ZP:typeof e=="object"?Ft.test(e)?YA:n$:jh}function ZP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>oE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function n$(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=oE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function r$(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const i$=(e,t)=>{const n=so.createTransformer(t),r=Vu(e),i=Vu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?kS.has(e)&&!i.values.length||kS.has(t)&&!r.values.length?e$(e,t):vd(ZP(r$(r,i),i.values),n):jh(e,t)};function QP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Et(e,t,n):oE(e)(e,t)}const s$=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>vt.update(t,n),stop:()=>io(t),now:()=>vn.isProcessing?vn.timestamp:Hn.now()}},JP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Lh=2e4;function aE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Lh;)t+=n,r=e.next(t);return t>=Lh?1/0:t}function o$(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(aE(r),Lh);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Nr(i)}}const a$=5;function e5(e,t,n){const r=Math.max(t-a$,0);return OP(n-e(r),t-r)}const Rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},o0=.001;function l$({duration:e=Rt.duration,bounce:t=Rt.bounce,velocity:n=Rt.velocity,mass:r=Rt.mass}){let i,s,o=1-t;o=ts(Rt.minDamping,Rt.maxDamping,o),e=ts(Rt.minDuration,Rt.maxDuration,Nr(e)),o<1?(i=d=>{const h=d*o,p=h*e,g=h-n,y=NS(d,o),x=Math.exp(-p);return o0-g/y*x},s=d=>{const p=d*o*e,g=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-p),S=NS(Math.pow(d,2),o);return(-i(d)+o0>0?-1:1)*((g-y)*x)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-o0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=u$(i,s,l);if(e=gi(e),isNaN(u))return{stiffness:Rt.stiffness,damping:Rt.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const c$=12;function u$(e,t,n){let r=n;for(let i=1;i<c$;i++)r=r-e(r)/t(r);return r}function NS(e,t){return e*Math.sqrt(1-t*t)}const d$=["duration","bounce"],f$=["stiffness","damping","mass"];function WA(e,t){return t.some(n=>e[n]!==void 0)}function h$(e){let t={velocity:Rt.velocity,stiffness:Rt.stiffness,damping:Rt.damping,mass:Rt.mass,isResolvedFromDuration:!1,...e};if(!WA(e,f$)&&WA(e,d$))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ts(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Rt.mass,stiffness:i,damping:s}}else{const n=l$(e);t={...t,...n,mass:Rt.mass},t.isResolvedFromDuration=!0}return t}function Ph(e=Rt.visualDuration,t=Rt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=h$({...n,velocity:-Nr(n.velocity||0)}),x=g||0,S=d/(2*Math.sqrt(u*h)),w=o-s,E=Nr(Math.sqrt(u/h)),N=Math.abs(w)<5;r||(r=N?Rt.restSpeed.granular:Rt.restSpeed.default),i||(i=N?Rt.restDelta.granular:Rt.restDelta.default);let k;if(S<1){const A=NS(E,S);k=_=>{const R=Math.exp(-S*E*_);return o-R*((x+S*E*w)/A*Math.sin(A*_)+w*Math.cos(A*_))}}else if(S===1)k=A=>o-Math.exp(-E*A)*(w+(x+E*w)*A);else{const A=E*Math.sqrt(S*S-1);k=_=>{const R=Math.exp(-S*E*_),D=Math.min(A*_,300);return o-R*((x+S*E*w)*Math.sinh(D)+A*w*Math.cosh(D))/A}}const T={calculatedDuration:y&&p||null,next:A=>{const _=k(A);if(y)l.done=A>=p;else{let R=A===0?x:0;S<1&&(R=A===0?gi(x):e5(k,A,_));const D=Math.abs(R)<=r,P=Math.abs(o-_)<=i;l.done=D&&P}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(aE(T),Lh),_=JP(R=>T.next(A*R).value,A,30);return A+"ms "+_},toTransition:()=>{}};return T}Ph.applyToOptions=e=>{const t=o$(e,100,Ph);return e.ease=t.ease,e.duration=gi(t.duration),e.type="keyframes",e};function TS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],g={done:!1,value:p},y=D=>l!==void 0&&D<l||u!==void 0&&D>u,x=D=>l===void 0?u:u===void 0||Math.abs(l-D)<Math.abs(u-D)?l:u;let S=n*t;const w=p+S,E=o===void 0?w:o(w);E!==w&&(S=E-p);const N=D=>-S*Math.exp(-D/r),k=D=>E+N(D),T=D=>{const P=N(D),$=k(D);g.done=Math.abs(P)<=d,g.value=g.done?E:$};let A,_;const R=D=>{y(g.value)&&(A=D,_=Ph({keyframes:[g.value,x(g.value)],velocity:e5(k,D,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return R(0),{calculatedDuration:null,next:D=>{let P=!1;return!_&&A===void 0&&(P=!0,T(D),R(D)),A!==void 0&&D>=A?_.next(D-A):(!P&&T(D),g)}}}function p$(e,t,n){const r=[],i=n||ns.mix||QP,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Ar:t;l=vd(u,l)}r.push(l)}return r}function m$(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(ZC(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=p$(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const g=zu(e[p],e[p+1],h);return l[p](g)};return n?h=>d(ts(e[0],e[s-1],h)):d}function g$(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=zu(0,t,r);e.push(Et(n,1,i))}}function y$(e){const t=[0];return g$(t,e.length-1),t}function v$(e,t){return e.map(n=>n*t)}function b$(e,t){return e.map(()=>t||HP).splice(0,e.length-1)}function xu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=_U(r)?r.map(UA):UA(r),s={done:!1,value:t[0]},o=v$(n&&n.length===t.length?n:y$(t),e),l=m$(o,t,{ease:Array.isArray(i)?i:b$(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const x$=e=>e!==null;function lE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(x$),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const w$={decay:TS,inertia:TS,tween:xu,keyframes:xu,spring:Ph};function t5(e){typeof e.type=="string"&&(e.type=w$[e.type])}class cE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const S$=e=>e/100;class uE extends cE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Hn.now()&&this.tick(Hn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;t5(t);const{type:n=xu,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||xu;u!==xu&&typeof l[0]!="number"&&(this.mixKeyframes=vd(S$,QP(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=aE(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:y,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,T=r;if(p){const D=Math.min(this.currentTime,i)/l;let P=Math.floor(D),$=D%1;!$&&D>=1&&($=1),$===1&&P--,P=Math.min(P,p+1),!!(P%2)&&(g==="reverse"?($=1-$,y&&($-=y/l)):g==="mirror"&&(T=o)),k=ts(0,1,$)*l}const A=N?{done:!1,value:h[0]}:T.next(k);s&&(A.value=s(A.value));let{done:_}=A;!N&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return R&&x!==TS&&(A.value=lE(h,this.options,w,this.speed)),S&&S(A.value),R&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return Nr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Nr(t)}get time(){return Nr(this.currentTime)}set time(t){t=gi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Hn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Nr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=s$,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Hn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function C$(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Go=e=>e*180/Math.PI,AS=e=>{const t=Go(Math.atan2(e[1],e[0]));return MS(t)},E$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:AS,rotateZ:AS,skewX:e=>Go(Math.atan(e[1])),skewY:e=>Go(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},MS=e=>(e=e%360,e<0&&(e+=360),e),XA=AS,ZA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),QA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),k$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ZA,scaleY:QA,scale:e=>(ZA(e)+QA(e))/2,rotateX:e=>MS(Go(Math.atan2(e[6],e[5]))),rotateY:e=>MS(Go(Math.atan2(-e[2],e[0]))),rotateZ:XA,rotate:XA,skewX:e=>Go(Math.atan(e[4])),skewY:e=>Go(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function _S(e){return e.includes("scale")?1:0}function DS(e,t){if(!e||e==="none")return _S(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=k$,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=E$,i=l}if(!i)return _S(t);const s=r[t],o=i[1].split(",").map(T$);return typeof s=="function"?s(o):o[s]}const N$=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return DS(n,t)};function T$(e){return parseFloat(e.trim())}const Wl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xl=new Set(Wl),JA=e=>e===Yl||e===ze,A$=new Set(["x","y","z"]),M$=Wl.filter(e=>!A$.has(e));function _$(e){const t=[];return M$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Jo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>DS(t,"x"),y:(e,{transform:t})=>DS(t,"y")};Jo.translateX=Jo.x;Jo.translateY=Jo.y;const ea=new Set;let RS=!1,OS=!1,jS=!1;function n5(){if(OS){const e=Array.from(ea).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=_$(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}OS=!1,RS=!1,ea.forEach(e=>e.complete(jS)),ea.clear()}function r5(){ea.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(OS=!0)})}function D$(){jS=!0,r5(),n5(),jS=!1}class dE{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ea.add(this),RS||(RS=!0,vt.read(r5),vt.resolveKeyframes(n5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}C$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ea.delete(this)}cancel(){this.state==="scheduled"&&(ea.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const R$=e=>e.startsWith("--");function O$(e,t,n){R$(t)?e.style.setProperty(t,n):e.style[t]=n}const j$=QC(()=>window.ScrollTimeline!==void 0),L$={};function P$(e,t){const n=QC(e);return()=>L$[t]??n()}const i5=P$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,eM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cu([0,.65,.55,1]),circOut:cu([.55,0,1,.45]),backIn:cu([.31,.01,.66,-.59]),backOut:cu([.33,1.53,.69,.99])};function s5(e,t){if(e)return typeof e=="function"?i5()?JP(e,t):"ease-out":FP(e)?cu(e):Array.isArray(e)?e.map(n=>s5(n,t)||eM.easeOut):eM[e]}function I$(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=s5(l,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),e.animate(h,g)}function o5(e){return typeof e=="function"&&"applyToOptions"in e}function B$({type:e,...t}){return o5(e)&&i5()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class z$ extends cE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,ZC(typeof t.type!="string");const d=B$(t);this.animation=I$(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=lE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):O$(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Nr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Nr(t)}get time(){return Nr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=gi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&j$()?(this.animation.timeline=t,Ar):n(this)}}const a5={anticipate:zP,backInOut:BP,circInOut:VP};function q$(e){return e in a5}function V$(e){typeof e.ease=="string"&&q$(e.ease)&&(e.ease=a5[e.ease])}const tM=10;class H$ extends z${constructor(t){V$(t),t5(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new uE({...o,autoplay:!1}),u=gi(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-tM).value,l.sample(u).value,tM),l.stop()}}const nM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(so.test(e)||e==="0")&&!e.startsWith("url("));function F$(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function U$(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=nM(i,t),l=nM(s,t);return!o||!l?!1:F$(e)||(n==="spring"||o5(n))&&r}function LS(e){e.duration=0,e.type="keyframes"}const $$=new Set(["opacity","clipPath","filter","transform"]),G$=QC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function K$(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return G$()&&n&&$$.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const Y$=40;class W$ extends cE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Hn.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},y=h?.KeyframeResolver||dE;this.keyframeResolver=new y(l,(x,S,w)=>this.onKeyframesResolved(x,S,g,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Hn.now(),U$(t,s,o,l)||((ns.instantAnimations||!u)&&h?.(lE(t,r,n)),t[0]=t[t.length-1],LS(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Y$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!d&&K$(g)?new H$({...g,element:g.motionValue.owner.current}):new uE(g);y.finished.then(()=>this.notifyFinished()).catch(Ar),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),D$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const X$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Z$(e){const t=X$.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function l5(e,t,n=1){const[r,i]=Z$(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return _P(o)?parseFloat(o):o}return rE(i)?l5(i,t,n+1):i}function fE(e,t){return e?.[t]??e?.default??e}const c5=new Set(["width","height","top","left","right","bottom",...Wl]),Q$={test:e=>e==="auto",parse:e=>e},u5=e=>t=>t.test(e),d5=[Yl,ze,yi,qs,FU,HU,Q$],rM=e=>d5.find(u5(e));function J$(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||RP(e):!0}const e9=new Set(["brightness","contrast","saturate","opacity"]);function t9(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(iE)||[];if(!r)return e;const i=n.replace(r,"");let s=e9.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const n9=/\b([a-z-]*)\(.*?\)/gu,PS={...so,getAnimatableNone:e=>{const t=e.match(n9);return t?t.map(t9).join(" "):e}},iM={...Yl,transform:Math.round},r9={rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:Gf,scaleX:Gf,scaleY:Gf,scaleZ:Gf,skew:qs,skewX:qs,skewY:qs,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:qu,originX:$A,originY:$A,originZ:ze},hE={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...r9,zIndex:iM,fillOpacity:qu,strokeOpacity:qu,numOctaves:iM},i9={...hE,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:PS,WebkitFilter:PS},f5=e=>i9[e];function h5(e,t){let n=f5(e);return n!==PS&&(n=so),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const s9=new Set(["auto","none","0"]);function o9(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!s9.has(s)&&Vu(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=h5(n,i)}class a9 extends dE{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),rE(d))){const h=l5(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!c5.has(r)||t.length!==2)return;const[i,s]=t,o=rM(i),l=rM(s);if(o!==l)if(JA(o)&&JA(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Jo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||J$(t[i]))&&r.push(i);r.length&&o9(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Jo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function l9(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const p5=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function m5(e){return DP(e)&&"offsetHeight"in e}const sM=30,c9=e=>!isNaN(parseFloat(e));class u9{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Hn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Hn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=c9(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new JC);const r=this.events[t].add(n);return t==="change"?()=>{r(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Hn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>sM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,sM);return OP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ll(e,t){return new u9(e,t)}const{schedule:pE}=UP(queueMicrotask,!1),Fr={x:!1,y:!1};function g5(){return Fr.x||Fr.y}function d9(e){return e==="x"||e==="y"?Fr[e]?null:(Fr[e]=!0,()=>{Fr[e]=!1}):Fr.x||Fr.y?null:(Fr.x=Fr.y=!0,()=>{Fr.x=Fr.y=!1})}function y5(e,t){const n=l9(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function oM(e){return!(e.pointerType==="touch"||g5())}function f9(e,t,n={}){const[r,i,s]=y5(e,n),o=l=>{if(!oM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{oM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const v5=(e,t)=>t?e===t?!0:v5(e,t.parentElement):!1,mE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,h9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function p9(e){return h9.has(e.tagName)||e.tabIndex!==-1}const vh=new WeakSet;function aM(e){return t=>{t.key==="Enter"&&e(t)}}function a0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const m9=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=aM(()=>{if(vh.has(n))return;a0(n,"down");const i=aM(()=>{a0(n,"up")}),s=()=>a0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function lM(e){return mE(e)&&!g5()}function g9(e,t,n={}){const[r,i,s]=y5(e,n),o=l=>{const u=l.currentTarget;if(!lM(l))return;vh.add(u);const d=t(u,l),h=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),vh.has(u)&&vh.delete(u),lM(y)&&typeof d=="function"&&d(y,{success:x})},p=y=>{h(y,u===window||u===document||n.useGlobalTarget||v5(u,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),m5(l)&&(l.addEventListener("focus",d=>m9(d,i)),!p9(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function b5(e){return DP(e)&&"ownerSVGElement"in e}function y9(e){return b5(e)&&e.tagName==="svg"}const Nn=e=>!!(e&&e.getVelocity),v9=[...d5,Ft,so],b9=e=>v9.find(u5(e)),gE=O.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function cM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function x9(...e){return t=>{let n=!1;const r=e.map(i=>{const s=cM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():cM(e[i],null)}}}}function w9(...e){return O.useCallback(x9(...e),e)}class S9 extends O.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=m5(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function C9({children:e,isPresent:t,anchorX:n,root:r}){const i=O.useId(),s=O.useRef(null),o=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=O.useContext(gE),u=w9(s,e?.ref);return O.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:g,right:y}=o.current;if(t||!s.current||!d||!h)return;const x=n==="left"?`left: ${g}`:`right: ${y}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),v.jsx(S9,{isPresent:t,childRef:s,sizeRef:o,children:O.cloneElement(e,{ref:u})})}const E9=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=KC(k9),h=O.useId();let p=!0,g=O.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const x of d.values())if(!x)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return s&&p&&(g={...g}),O.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[n]),O.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=v.jsx(C9,{isPresent:n,anchorX:l,root:u,children:e})),v.jsx(Yp.Provider,{value:g,children:e})};function k9(){return new Map}function x5(e=!0){const t=O.useContext(Yp);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=O.useId();O.useEffect(()=>{if(e)return i(s)},[e]);const o=O.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const Kf=e=>e.key||"";function uM(e){const t=[];return O.Children.forEach(e,n=>{O.isValidElement(n)&&t.push(n)}),t}const yE=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=x5(o),p=O.useMemo(()=>uM(e),[e]),g=o&&!d?[]:p.map(Kf),y=O.useRef(!0),x=O.useRef(p),S=KC(()=>new Map),[w,E]=O.useState(p),[N,k]=O.useState(p);MP(()=>{y.current=!1,x.current=p;for(let _=0;_<N.length;_++){const R=Kf(N[_]);g.includes(R)?S.delete(R):S.get(R)!==!0&&S.set(R,!1)}},[N,g.length,g.join("-")]);const T=[];if(p!==w){let _=[...p];for(let R=0;R<N.length;R++){const D=N[R],P=Kf(D);g.includes(P)||(_.splice(R,0,D),T.push(D))}return s==="wait"&&T.length&&(_=T),k(uM(_)),E(p),null}const{forceRender:A}=O.useContext(GC);return v.jsx(v.Fragment,{children:N.map(_=>{const R=Kf(_),D=o&&!d?!1:p===N||g.includes(R),P=()=>{if(S.has(R))S.set(R,!0);else return;let $=!0;S.forEach(V=>{V||($=!1)}),$&&(A?.(),k(x.current),o&&h?.(),r&&r())};return v.jsx(E9,{isPresent:D,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:D?void 0:P,anchorX:l,children:_},R)})})},w5=O.createContext({strict:!1}),dM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pl={};for(const e in dM)Pl[e]={isEnabled:t=>dM[e].some(n=>!!t[n])};function N9(e){for(const t in e)Pl[t]={...Pl[t],...e[t]}}const T9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ih(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||T9.has(e)}let S5=e=>!Ih(e);function A9(e){typeof e=="function"&&(S5=t=>t.startsWith("on")?!Ih(t):e(t))}try{A9(require("@emotion/is-prop-valid").default)}catch{}function M9(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(S5(i)||n===!0&&Ih(i)||!t&&!Ih(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Wp=O.createContext({});function Xp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Hu(e){return typeof e=="string"||Array.isArray(e)}const vE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bE=["initial",...vE];function Zp(e){return Xp(e.animate)||bE.some(t=>Hu(e[t]))}function C5(e){return!!(Zp(e)||e.variants)}function _9(e,t){if(Zp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Hu(n)?n:void 0,animate:Hu(r)?r:void 0}}return e.inherit!==!1?t:{}}function D9(e){const{initial:t,animate:n}=_9(e,O.useContext(Wp));return O.useMemo(()=>({initial:t,animate:n}),[fM(t),fM(n)])}function fM(e){return Array.isArray(e)?e.join(" "):e}const Fu={};function R9(e){for(const t in e)Fu[t]=e[t],nE(t)&&(Fu[t].isCSSVariable=!0)}function E5(e,{layout:t,layoutId:n}){return Xl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Fu[e]||e==="opacity")}const O9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},j9=Wl.length;function L9(e,t,n){let r="",i=!0;for(let s=0;s<j9;s++){const o=Wl[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=p5(l,hE[o]);if(!u){i=!1;const h=O9[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function xE(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Xl.has(u)){o=!0;continue}else if(nE(u)){i[u]=d;continue}else{const h=p5(d,hE[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=L9(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const wE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function k5(e,t,n){for(const r in t)!Nn(t[r])&&!E5(r,n)&&(e[r]=t[r])}function P9({transformTemplate:e},t){return O.useMemo(()=>{const n=wE();return xE(n,t,e),Object.assign({},n.vars,n.style)},[t])}function I9(e,t){const n=e.style||{},r={};return k5(r,n,e),Object.assign(r,P9(e,t)),r}function B9(e,t){const n={},r=I9(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const z9={offset:"stroke-dashoffset",array:"stroke-dasharray"},q9={offset:"strokeDashoffset",array:"strokeDasharray"};function V9(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?z9:q9;e[s.offset]=ze.transform(-r);const o=ze.transform(t),l=ze.transform(n);e[s.array]=`${o} ${l}`}function N5(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(xE(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&V9(p,i,s,o,!1)}const T5=()=>({...wE(),attrs:{}}),A5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function H9(e,t,n,r){const i=O.useMemo(()=>{const s=T5();return N5(s,t,A5(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};k5(s,e.style,e),i.style={...s,...i.style}}return i}const F9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function SE(e){return typeof e!="string"||e.includes("-")?!1:!!(F9.indexOf(e)>-1||/[A-Z]/u.test(e))}function U9(e,t,n,{latestValues:r},i,s=!1){const l=(SE(e)?H9:B9)(t,r,i,e),u=M9(t,typeof e=="string",s),d=e!==O.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=O.useMemo(()=>Nn(h)?h.get():h,[h]);return O.createElement(e,{...d,children:p})}function hM(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function CE(e,t,n,r){if(typeof t=="function"){const[i,s]=hM(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=hM(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function bh(e){return Nn(e)?e.get():e}function $9({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:G9(n,r,i,e),renderState:t()}}function G9(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=bh(s[g]);let{initial:o,animate:l}=e;const u=Zp(e),d=C5(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Xp(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const x=CE(e,g[y]);if(x){const{transitionEnd:S,transition:w,...E}=x;for(const N in E){let k=E[N];if(Array.isArray(k)){const T=h?k.length-1:0;k=k[T]}k!==null&&(i[N]=k)}for(const N in S)i[N]=S[N]}}}return i}const M5=e=>(t,n)=>{const r=O.useContext(Wp),i=O.useContext(Yp),s=()=>$9(e,t,r,i);return n?s():KC(s)};function EE(e,t,n){const{style:r}=e,i={};for(const s in r)(Nn(r[s])||t.style&&Nn(t.style[s])||E5(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const K9=M5({scrapeMotionValuesFromProps:EE,createRenderState:wE});function _5(e,t,n){const r=EE(e,t,n);for(const i in e)if(Nn(e[i])||Nn(t[i])){const s=Wl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const Y9=M5({scrapeMotionValuesFromProps:_5,createRenderState:T5}),W9=Symbol.for("motionComponentSymbol");function Cl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function X9(e,t,n){return O.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Cl(n)&&(n.current=r))},[t])}const kE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Z9="framerAppearId",D5="data-"+kE(Z9),R5=O.createContext({});function Q9(e,t,n,r,i){const{visualElement:s}=O.useContext(Wp),o=O.useContext(w5),l=O.useContext(Yp),u=O.useContext(gE).reducedMotion,d=O.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=O.useContext(R5);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&J9(d.current,n,i,p);const g=O.useRef(!1);O.useInsertionEffect(()=>{h&&g.current&&h.update(n,l)});const y=n[D5],x=O.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return MP(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),O.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),h.enteringChildren=void 0)}),h}function J9(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:O5(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Cl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function O5(e){if(e)return e.options.allowProjection!==!1?e.projection:O5(e.parent)}function l0(e,{forwardMotionProps:t=!1}={},n,r){n&&N9(n);const i=SE(e)?Y9:K9;function s(l,u){let d;const h={...O.useContext(gE),...l,layoutId:e7(l)},{isStatic:p}=h,g=D9(l),y=i(l,p);if(!p&&YC){t7();const x=n7(h);d=x.MeasureLayout,g.visualElement=Q9(e,y,h,r,x.ProjectionNode)}return v.jsxs(Wp.Provider,{value:g,children:[d&&g.visualElement?v.jsx(d,{visualElement:g.visualElement,...h}):null,U9(e,l,X9(y,g.visualElement,u),y,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=O.forwardRef(s);return o[W9]=e,o}function e7({layoutId:e}){const t=O.useContext(GC).id;return t&&e!==void 0?t+"-"+e:e}function t7(e,t){O.useContext(w5).strict}function n7(e){const{drag:t,layout:n}=Pl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function r7(e,t){if(typeof Proxy>"u")return l0;const n=new Map,r=(s,o)=>l0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,l0(o,void 0,e,t)),n.get(o))})}function j5({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function i7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function s7(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function c0(e){return e===void 0||e===1}function IS({scale:e,scaleX:t,scaleY:n}){return!c0(e)||!c0(t)||!c0(n)}function Vo(e){return IS(e)||L5(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function L5(e){return pM(e.x)||pM(e.y)}function pM(e){return e&&e!=="0%"}function Bh(e,t,n){const r=e-n,i=t*r;return n+i}function mM(e,t,n,r,i){return i!==void 0&&(e=Bh(e,i,r)),Bh(e,n,r)+t}function BS(e,t=0,n=1,r,i){e.min=mM(e.min,t,n,r,i),e.max=mM(e.max,t,n,r,i)}function P5(e,{x:t,y:n}){BS(e.x,t.translate,t.scale,t.originPoint),BS(e.y,n.translate,n.scale,n.originPoint)}const gM=.999999999999,yM=1.0000000000001;function o7(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&kl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,P5(e,o)),r&&Vo(s.latestValues)&&kl(e,s.latestValues))}t.x<yM&&t.x>gM&&(t.x=1),t.y<yM&&t.y>gM&&(t.y=1)}function El(e,t){e.min=e.min+t,e.max=e.max+t}function vM(e,t,n,r,i=.5){const s=Et(e.min,e.max,i);BS(e,t,n,s,r)}function kl(e,t){vM(e.x,t.x,t.scaleX,t.scale,t.originX),vM(e.y,t.y,t.scaleY,t.scale,t.originY)}function I5(e,t){return j5(s7(e.getBoundingClientRect(),t))}function a7(e,t,n){const r=I5(e,n),{scroll:i}=t;return i&&(El(r.x,i.offset.x),El(r.y,i.offset.y)),r}const bM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nl=()=>({x:bM(),y:bM()}),xM=()=>({min:0,max:0}),It=()=>({x:xM(),y:xM()}),zS={current:null},B5={current:!1};function l7(){if(B5.current=!0,!!YC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zS.current=e.matches;e.addEventListener("change",t),t()}else zS.current=!1}const c7=new WeakMap;function u7(e,t,n){for(const r in t){const i=t[r],s=n[r];if(Nn(i))e.addValue(r,i);else if(Nn(s))e.addValue(r,Ll(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,Ll(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const wM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class d7{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=dE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Hn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,vt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Zp(n),this.isVariantNode=C5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];u[g]!==void 0&&Nn(y)&&y.set(u[g])}}mount(t){this.current=t,c7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),B5.current||l7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),io(this.notifyUpdate),io(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Xl.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&vt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Pl){const n=Pl[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<wM.length;r++){const i=wM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=u7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ll(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(_P(r)||RP(r))?r=parseFloat(r):!b9(r)&&so.test(n)&&(r=h5(t,n)),this.setBaseTarget(t,Nn(r)?r.get():r)),Nn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=CE(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Nn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new JC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){pE.render(this.render)}}class z5 extends d7{constructor(){super(...arguments),this.KeyframeResolver=a9}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Nn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function q5(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function f7(e){return window.getComputedStyle(e)}class h7 extends z5{constructor(){super(...arguments),this.type="html",this.renderInstance=q5}readValueFromInstance(t,n){if(Xl.has(n))return this.projection?.isProjecting?_S(n):N$(t,n);{const r=f7(t),i=(nE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return I5(t,n)}build(t,n,r){xE(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return EE(t,n,r)}}const V5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function p7(e,t,n,r){q5(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(V5.has(i)?i:kE(i),t.attrs[i])}class m7 extends z5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Xl.has(n)){const r=f5(n);return r&&r.default||0}return n=V5.has(n)?n:kE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return _5(t,n,r)}build(t,n,r){N5(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){p7(t,n,r,i)}mount(t){this.isSVGTag=A5(t.tagName),super.mount(t)}}const g7=(e,t)=>SE(e)?new m7(t):new h7(t,{allowProjection:e!==O.Fragment});function _l(e,t,n){const r=e.getProps();return CE(r,t,n!==void 0?n:r.custom,e)}const qS=e=>Array.isArray(e);function y7(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ll(n))}function v7(e){return qS(e)?e[e.length-1]||0:e}function b7(e,t){const n=_l(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=v7(s[o]);y7(e,o,l)}}function x7(e){return!!(Nn(e)&&e.add)}function VS(e,t){const n=e.getValue("willChange");if(x7(n))return n.add(t);if(!n&&ns.WillChange){const r=new ns.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function H5(e){return e.props[D5]}const w7=e=>e!==null;function S7(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(w7),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const C7={type:"spring",stiffness:500,damping:25,restSpeed:10},E7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),k7={type:"keyframes",duration:.8},N7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T7=(e,{keyframes:t})=>t.length>2?k7:Xl.has(e)?e.startsWith("scale")?E7(t[1]):C7:N7;function A7({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const NE=(e,t,n,r={},i,s)=>o=>{const l=fE(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-gi(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};A7(l)||Object.assign(h,T7(e,h)),h.duration&&(h.duration=gi(h.duration)),h.repeatDelay&&(h.repeatDelay=gi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(LS(h),h.delay===0&&(p=!0)),(ns.instantAnimations||ns.skipAnimations)&&(p=!0,LS(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=S7(h.keyframes,l);if(g!==void 0){vt.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new uE(h):new W$(h)};function M7({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function F5(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),g=l[h];if(g===void 0||d&&M7(d,h))continue;const y={delay:n,...fE(s||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===x&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=H5(e);if(E){const N=window.MotionHandoffAnimation(E,h,vt);N!==null&&(y.startTime=N,S=!0)}}VS(e,h),p.start(NE(h,p,g,e.shouldReduceMotion&&c5.has(h)?{type:!1}:y,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{vt.update(()=>{o&&b7(e,o)})}),u}function U5(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function HS(e,t,n={}){const r=_l(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(F5(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return _7(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function _7(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(HS(u,t,{...o,delay:n+(typeof r=="function"?0:r)+U5(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function D7(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>HS(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=HS(e,t,n);else{const i=typeof t=="function"?_l(e,t,n.custom):t;r=Promise.all(F5(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function $5(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const R7=bE.length;function G5(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?G5(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<R7;n++){const r=bE[n],i=e.props[r];(Hu(i)||i===!1)&&(t[r]=i)}return t}const O7=[...vE].reverse(),j7=vE.length;function L7(e){return t=>Promise.all(t.map(({animation:n,options:r})=>D7(e,n,r)))}function P7(e){let t=L7(e),n=SM(),r=!0;const i=u=>(d,h)=>{const p=_l(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...x}=p;d={...d,...x,...y}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=G5(e.parent)||{},p=[],g=new Set;let y={},x=1/0;for(let w=0;w<j7;w++){const E=O7[w],N=n[E],k=d[E]!==void 0?d[E]:h[E],T=Hu(k),A=E===u?N.isActive:null;A===!1&&(x=w);let _=k===h[E]&&k!==d[E]&&T;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),N.protectedKeys={...y},!N.isActive&&A===null||!k&&!N.prevProp||Xp(k)||typeof k=="boolean")continue;const R=I7(N.prevProp,k);let D=R||E===u&&N.isActive&&!_&&T||w>x&&T,P=!1;const $=Array.isArray(k)?k:[k];let V=$.reduce(i(E),{});A===!1&&(V={});const{prevResolvedValues:B={}}=N,G={...B,...V},z=q=>{D=!0,g.has(q)&&(P=!0,g.delete(q)),N.needsAnimating[q]=!0;const W=e.getValue(q);W&&(W.liveStyle=!1)};for(const q in G){const W=V[q],Q=B[q];if(y.hasOwnProperty(q))continue;let L=!1;qS(W)&&qS(Q)?L=!$5(W,Q):L=W!==Q,L?W!=null?z(q):g.add(q):W!==void 0&&g.has(q)?z(q):N.protectedKeys[q]=!0}N.prevProp=k,N.prevResolvedValues=V,N.isActive&&(y={...y,...V}),r&&e.blockInitialAnimation&&(D=!1);const F=_&&R;D&&(!F||P)&&p.push(...$.map(q=>{const W={type:E};if(typeof q=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:Q}=e,L=_l(Q,q);if(Q.enteringChildren&&L){const{delayChildren:K}=L.transition||{};W.delay=U5(Q.enteringChildren,e,K)}}return{animation:q,options:W}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const E=_l(e,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(w.transition=E.transition)}g.forEach(E=>{const N=e.getBaseTarget(E),k=e.getValue(E);k&&(k.liveStyle=!0),w[E]=N??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=SM(),r=!0}}}function I7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!$5(t,e):!1}function Bo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function SM(){return{animate:Bo(!0),whileInView:Bo(),whileHover:Bo(),whileTap:Bo(),whileDrag:Bo(),whileFocus:Bo(),exit:Bo()}}class lo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class B7 extends lo{constructor(t){super(t),t.animationState||(t.animationState=P7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Xp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let z7=0;class q7 extends lo{constructor(){super(...arguments),this.id=z7++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const V7={animation:{Feature:B7},exit:{Feature:q7}};function Uu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wd(e){return{point:{x:e.pageX,y:e.pageY}}}const H7=e=>t=>mE(t)&&e(t,wd(t));function wu(e,t,n,r){return Uu(e,t,H7(n),r)}const K5=1e-4,F7=1-K5,U7=1+K5,Y5=.01,$7=0-Y5,G7=0+Y5;function Dn(e){return e.max-e.min}function K7(e,t,n){return Math.abs(e-t)<=n}function CM(e,t,n,r=.5){e.origin=r,e.originPoint=Et(t.min,t.max,e.origin),e.scale=Dn(n)/Dn(t),e.translate=Et(n.min,n.max,e.origin)-e.originPoint,(e.scale>=F7&&e.scale<=U7||isNaN(e.scale))&&(e.scale=1),(e.translate>=$7&&e.translate<=G7||isNaN(e.translate))&&(e.translate=0)}function Su(e,t,n,r){CM(e.x,t.x,n.x,r?r.originX:void 0),CM(e.y,t.y,n.y,r?r.originY:void 0)}function EM(e,t,n){e.min=n.min+t.min,e.max=e.min+Dn(t)}function Y7(e,t,n){EM(e.x,t.x,n.x),EM(e.y,t.y,n.y)}function kM(e,t,n){e.min=t.min-n.min,e.max=e.min+Dn(t)}function Cu(e,t,n){kM(e.x,t.x,n.x),kM(e.y,t.y,n.y)}function wr(e){return[e("x"),e("y")]}const W5=({current:e})=>e?e.ownerDocument.defaultView:null,NM=(e,t)=>Math.abs(e-t);function W7(e,t){const n=NM(e.x,t.x),r=NM(e.y,t.y);return Math.sqrt(n**2+r**2)}class X5{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=d0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=W7(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:S}=g,{timestamp:w}=vn;this.history.push({...S,timestamp:w});const{onStart:E,onMove:N}=this.handlers;y||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=u0(y,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=d0(g.type==="pointercancel"?this.lastMoveEventInfo:u0(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,E),S&&S(g,E)},!mE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=wd(t),u=u0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=vn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,d0(u,this.history)),this.removeListeners=vd(wu(this.contextWindow,"pointermove",this.handlePointerMove),wu(this.contextWindow,"pointerup",this.handlePointerUp),wu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),io(this.updatePoint)}}function u0(e,t){return t?{point:t(e.point)}:e}function TM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function d0({point:e},t){return{point:e,delta:TM(e,Z5(t)),offset:TM(e,X7(t)),velocity:Z7(t,.1)}}function X7(e){return e[0]}function Z5(e){return e[e.length-1]}function Z7(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Z5(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>gi(t)));)n--;if(!r)return{x:0,y:0};const s=Nr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Q7(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Et(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Et(n,e,r.max):Math.min(e,n)),e}function AM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function J7(e,{top:t,left:n,bottom:r,right:i}){return{x:AM(e.x,n,i),y:AM(e.y,t,r)}}function MM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function eG(e,t){return{x:MM(e.x,t.x),y:MM(e.y,t.y)}}function tG(e,t){let n=.5;const r=Dn(e),i=Dn(t);return i>r?n=zu(t.min,t.max-r,e.min):r>i&&(n=zu(e.min,e.max-i,t.min)),ts(0,1,n)}function nG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const FS=.35;function rG(e=FS){return e===!1?e=0:e===!0&&(e=FS),{x:_M(e,"left","right"),y:_M(e,"top","bottom")}}function _M(e,t,n){return{min:DM(e,t),max:DM(e,n)}}function DM(e,t){return typeof e=="number"?e:e[t]||0}const iG=new WeakMap;class sG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wd(p).point)},o=(p,g)=>{const{drag:y,dragPropagation:x,onDragStart:S}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=d9(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),wr(E=>{let N=this.getAxisMotionValue(E).get()||0;if(yi.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[E];T&&(N=Dn(T)*(parseFloat(N)/100))}}this.originPoint[E]=N}),S&&vt.postRender(()=>S(p,g)),VS(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=g;if(x&&this.currentDirection===null){this.currentDirection=oG(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>wr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new X5(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:W5(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&vt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Yf(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Q7(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Cl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=J7(r.layoutBox,t):this.constraints=!1,this.elastic=rG(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&wr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=nG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Cl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=a7(r,i.root,this.visualElement.getTransformPagePoint());let o=eG(i.layout.layoutBox,s);if(n){const l=n(i7(o));this.hasMutatedConstraints=!!l,l&&(o=j5(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=wr(h=>{if(!Yf(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return VS(this.visualElement,t),r.start(NE(t,r,0,n,this.visualElement,!1))}stopAnimation(){wr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){wr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){wr(n=>{const{drag:r}=this.getProps();if(!Yf(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-Et(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Cl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};wr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=tG({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),wr(o=>{if(!Yf(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Et(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;iG.set(this.visualElement,this);const t=this.visualElement.current,n=wu(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Cl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),vt.read(r);const o=Uu(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(wr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=FS,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Yf(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function oG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class aG extends lo{constructor(t){super(t),this.removeGroupControls=Ar,this.removeListeners=Ar,this.controls=new sG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ar}unmount(){this.removeGroupControls(),this.removeListeners()}}const RM=e=>(t,n)=>{e&&vt.postRender(()=>e(t,n))};class lG extends lo{constructor(){super(...arguments),this.removePointerDownListener=Ar}onPointerDown(t){this.session=new X5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:W5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:RM(t),onStart:RM(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&vt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=wu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const nu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ze.test(e))e=parseFloat(e);else return e;const n=OM(e,t.target.x),r=OM(e,t.target.y);return`${n}% ${r}%`}},cG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=so.parse(e);if(i.length>5)return r;const s=so.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=Et(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let f0=!1;class uG extends O.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;R9(dG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),f0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),xh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,f0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||vt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),pE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;f0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Q5(e){const[t,n]=x5(),r=O.useContext(GC);return v.jsx(uG,{...e,layoutGroup:r,switchLayoutGroup:O.useContext(R5),isPresent:t,safeToRemove:n})}const dG={borderRadius:{...nu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nu,borderTopRightRadius:nu,borderBottomLeftRadius:nu,borderBottomRightRadius:nu,boxShadow:cG};function fG(e,t,n){const r=Nn(e)?e:Ll(e);return r.start(NE("",r,t,n)),r.animation}const hG=(e,t)=>e.depth-t.depth;class pG{constructor(){this.children=[],this.isDirty=!1}add(t){WC(this.children,t),this.isDirty=!0}remove(t){XC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hG),this.isDirty=!1,this.children.forEach(t)}}function mG(e,t){const n=Hn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(io(r),e(s-t))};return vt.setup(r,!0),()=>io(r)}const J5=["TopLeft","TopRight","BottomLeft","BottomRight"],gG=J5.length,jM=e=>typeof e=="string"?parseFloat(e):e,LM=e=>typeof e=="number"||ze.test(e);function yG(e,t,n,r,i,s){i?(e.opacity=Et(0,n.opacity??1,vG(r)),e.opacityExit=Et(t.opacity??1,0,bG(r))):s&&(e.opacity=Et(t.opacity??1,n.opacity??1,r));for(let o=0;o<gG;o++){const l=`border${J5[o]}Radius`;let u=PM(t,l),d=PM(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||LM(u)===LM(d)?(e[l]=Math.max(Et(jM(u),jM(d),r),0),(yi.test(d)||yi.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Et(t.rotate||0,n.rotate||0,r))}function PM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const vG=eI(0,.5,qP),bG=eI(.5,.95,Ar);function eI(e,t,n){return r=>r<e?0:r>t?1:n(zu(e,t,r))}function IM(e,t){e.min=t.min,e.max=t.max}function br(e,t){IM(e.x,t.x),IM(e.y,t.y)}function BM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function zM(e,t,n,r,i){return e-=t,e=Bh(e,1/n,r),i!==void 0&&(e=Bh(e,1/i,r)),e}function xG(e,t=0,n=1,r=.5,i,s=e,o=e){if(yi.test(t)&&(t=parseFloat(t),t=Et(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Et(s.min,s.max,r);e===s&&(l-=t),e.min=zM(e.min,t,n,l,i),e.max=zM(e.max,t,n,l,i)}function qM(e,t,[n,r,i],s,o){xG(e,t[n],t[r],t[i],t.scale,s,o)}const wG=["x","scaleX","originX"],SG=["y","scaleY","originY"];function VM(e,t,n,r){qM(e.x,t,wG,n?n.x:void 0,r?r.x:void 0),qM(e.y,t,SG,n?n.y:void 0,r?r.y:void 0)}function HM(e){return e.translate===0&&e.scale===1}function tI(e){return HM(e.x)&&HM(e.y)}function FM(e,t){return e.min===t.min&&e.max===t.max}function CG(e,t){return FM(e.x,t.x)&&FM(e.y,t.y)}function UM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function nI(e,t){return UM(e.x,t.x)&&UM(e.y,t.y)}function $M(e){return Dn(e.x)/Dn(e.y)}function GM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class EG{constructor(){this.members=[]}add(t){WC(this.members,t),t.scheduleRender()}remove(t){if(XC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kG(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const h0=["","X","Y","Z"],NG=1e3;let TG=0;function p0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function rI(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=H5(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",vt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&rI(r)}function iI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=TG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_G),this.nodes.forEach(jG),this.nodes.forEach(LG),this.nodes.forEach(DG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new pG)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new JC),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=b5(o)&&!y9(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{p=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=mG(g,250),xh.hasAnimatedSinceResize&&(xh.hasAnimatedSinceResize=!1,this.nodes.forEach(WM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||qG,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),E=!this.targetLayout||!nI(this.targetLayout,y),N=!p&&g;if(this.options.layoutRoot||this.resumeFrom||N||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...fE(x,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,N)}else p||WM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),io(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(YM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(OG),this.nodes.forEach(AG),this.nodes.forEach(MG)):this.nodes.forEach(YM),this.clearAllSnapshots();const l=Hn.now();vn.delta=ts(0,1e3/60,l-vn.timestamp),vn.timestamp=l,vn.isProcessing=!0,n0.update.process(vn),n0.preRender.process(vn),n0.render.process(vn),vn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(RG),this.sharedNodes.forEach(IG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Dn(this.snapshot.measuredBox.x)&&!Dn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!tI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Vo(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),VG(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return It();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(HG))){const{scroll:d}=this.root;d&&(El(l.x,d.offset.x),El(l.y,d.offset.y))}return l}removeElementScroll(o){const l=It();if(br(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&br(l,o),El(l.x,h.offset.x),El(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=It();br(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&kl(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Vo(h.latestValues)&&kl(u,h.latestValues)}return Vo(this.latestValues)&&kl(u,this.latestValues),u}removeTransform(o){const l=It();br(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Vo(d.latestValues))continue;IS(d.latestValues)&&d.updateSnapshot();const h=It(),p=d.measurePageBox();br(h,p),VM(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Vo(this.latestValues)&&VM(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=vn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),Cu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Y7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):br(this.target,this.layout.layoutBox),P5(this.target,this.targetDelta)):br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),Cu(this.relativeTargetOrigin,this.target,g.target),br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||IS(this.parent.latestValues)||L5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===vn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;br(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;o7(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=It());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(BM(this.prevProjectionDelta.x,this.projectionDelta.x),BM(this.prevProjectionDelta.y,this.projectionDelta.y)),Su(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!GM(this.projectionDelta.x,this.prevProjectionDelta.x)||!GM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nl(),this.projectionDelta=Nl(),this.projectionDeltaWithTransform=Nl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=Nl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=It(),y=u?u.source:void 0,x=this.layout?this.layout.source:void 0,S=y!==x,w=this.getStack(),E=!w||w.members.length<=1,N=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(zG));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const A=T/1e3;XM(p.x,o.x,A),XM(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),BG(this.relativeTarget,this.relativeTargetOrigin,g,A),k&&CG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=It()),br(k,this.relativeTarget)),S&&(this.animationValues=h,yG(h,d,this.latestValues,A,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(io(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{xh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ll(0)),this.currentAnimation=fG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(NG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&sI(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||It();const p=Dn(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=Dn(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}br(l,u),kl(l,h),Su(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new EG),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&p0("z",o,d,this.animationValues);for(let h=0;h<h0.length;h++)p0(`rotate${h0[h]}`,o,d,this.animationValues),p0(`skew${h0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=bh(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=bh(l?.pointerEvents)||""),this.hasProjected&&!Vo(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=kG(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:g,y}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Fu){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:E}=Fu[x],N=p==="none"?h[x]:S(h[x],d);if(w){const k=w.length;for(let T=0;T<k;T++)o[w[T]]=N}else E?this.options.visualElement.renderState.vars[x]=N:o[x]=N}this.options.layoutId&&(o.pointerEvents=d===this?bh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(KM),this.root.sharedNodes.clear()}}}function AG(e){e.updateLayout()}function MG(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?wr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Dn(p);p.min=n[h].min,p.max=p.min+g}):sI(i,t.layoutBox,n)&&wr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=Dn(n[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=Nl();Su(o,n,t.layoutBox);const l=Nl();s?Su(l,e.applyTransform(r,!0),t.measuredBox):Su(l,n,t.layoutBox);const u=!tI(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=It();Cu(y,t.layoutBox,p.layoutBox);const x=It();Cu(x,n,g.layoutBox),nI(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function _G(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function DG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function RG(e){e.clearSnapshot()}function KM(e){e.clearMeasurements()}function YM(e){e.isLayoutDirty=!1}function OG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function WM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function jG(e){e.resolveTargetDelta()}function LG(e){e.calcProjection()}function PG(e){e.resetSkewAndRotation()}function IG(e){e.removeLeadSnapshot()}function XM(e,t,n){e.translate=Et(t.translate,0,n),e.scale=Et(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ZM(e,t,n,r){e.min=Et(t.min,n.min,r),e.max=Et(t.max,n.max,r)}function BG(e,t,n,r){ZM(e.x,t.x,n.x,r),ZM(e.y,t.y,n.y,r)}function zG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qG={duration:.45,ease:[.4,0,.1,1]},QM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),JM=QM("applewebkit/")&&!QM("chrome/")?Math.round:Ar;function e_(e){e.min=JM(e.min),e.max=JM(e.max)}function VG(e){e_(e.x),e_(e.y)}function sI(e,t,n){return e==="position"||e==="preserve-aspect"&&!K7($M(t),$M(n),.2)}function HG(e){return e!==e.root&&e.scroll?.wasRoot}const FG=iI({attachResizeListener:(e,t)=>Uu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),m0={current:void 0},oI=iI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!m0.current){const e=new FG({});e.mount(window),e.setOptions({layoutScroll:!0}),m0.current=e}return m0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),UG={pan:{Feature:lG},drag:{Feature:aG,ProjectionNode:oI,MeasureLayout:Q5}};function t_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&vt.postRender(()=>s(t,wd(t)))}class $G extends lo{mount(){const{current:t}=this.node;t&&(this.unmount=f9(t,(n,r)=>(t_(this.node,r,"Start"),i=>t_(this.node,i,"End"))))}unmount(){}}class GG extends lo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=vd(Uu(this.node.current,"focus",()=>this.onFocus()),Uu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&vt.postRender(()=>s(t,wd(t)))}class KG extends lo{mount(){const{current:t}=this.node;t&&(this.unmount=g9(t,(n,r)=>(n_(this.node,r,"Start"),(i,{success:s})=>n_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const US=new WeakMap,g0=new WeakMap,YG=e=>{const t=US.get(e.target);t&&t(e)},WG=e=>{e.forEach(YG)};function XG({root:e,...t}){const n=e||document;g0.has(n)||g0.set(n,{});const r=g0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(WG,{root:e,...t})),r[i]}function ZG(e,t,n){const r=XG(t);return US.set(e,n),r.observe(e),()=>{US.delete(e),r.unobserve(e)}}const QG={some:0,all:1};class JG extends lo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:QG[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return ZG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(eK(t,n))&&this.startObserver()}unmount(){}}function eK({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const tK={inView:{Feature:JG},tap:{Feature:KG},focus:{Feature:GG},hover:{Feature:$G}},nK={layout:{ProjectionNode:oI,MeasureLayout:Q5}},rK={...V7,...tK,...UG,...nK},Kn=r7(rK,g7);function iK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function TE(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function aI(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function sK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function oK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)}function aK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)}function lK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function cK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function uK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function dK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function fK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function hK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function pK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function mK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function gK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function yK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function vK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function bK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)}function lI(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function xK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function cI(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function wK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function SK(e){return tt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}const Qp=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=O.useState("login"),[l,u]=O.useState(""),[d,h]=O.useState(""),[p,g]=O.useState(""),[y,x]=O.useState(""),[S,w]=O.useState(!1),[E,N]=O.useState(!1);O.useEffect(()=>{const _=()=>{const P=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");N(P)};_();const R=window.matchMedia("(prefers-color-scheme: dark)"),D=new MutationObserver(_);return R.addEventListener("change",_),D.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{R.removeEventListener("change",_),D.disconnect()}},[]);const k=O.useCallback(async _=>{if(i){w(!0),x("");try{await i(_.credential),t()}catch(R){x(R instanceof Error?R.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);O.useEffect(()=>{if(!e||!i)return;const _=document.createElement("script");return _.src="https://accounts.google.com/gsi/client",_.async=!0,_.defer=!0,document.body.appendChild(_),_.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:k}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:E?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(_)&&document.body.removeChild(_)}},[e,s,i,k,E]);const T=async _=>{_.preventDefault(),x(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),g("")}catch(R){x(R instanceof Error?R.message:"Authentication failed")}finally{w(!1)}},A=()=>{o(_=>_==="login"?"signup":"login"),x("")};return e?v.jsx(yE,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(Kn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:_=>_.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx(lI,{className:"h-5 w-5"})})]}),v.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),y&&v.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:y}),i&&v.jsxs(v.Fragment,{children:[v.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-theme/20"})}),v.jsx("div",{className:"relative flex justify-center text-sm",children:v.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),v.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s==="signup"&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),v.jsx("input",{id:"name",type:"text",value:p,onChange:_=>g(_.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:d,onChange:_=>h(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&v.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),v.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",v.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),v.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:v.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},r_=()=>{xa();const e=md(),[t,n]=O.useState(!1),[r,i]=O.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Kp(),[p,g]=O.useState(!1),[y,x]=O.useState(!1),[S,w]=O.useState([]),[E,N]=O.useState(!1);O.useEffect(()=>{n(!0)},[]),O.useEffect(()=>{const D=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[]),O.useEffect(()=>{(async()=>{if(!o){w([]);return}N(!0);try{const P=await Er.getUserDiagrams();w(P)}catch(P){console.error("Failed to load diagrams:",P)}finally{N(!1)}})()},[o]);const k=D=>{e(`/playground/free?diagramId=${D}`)},T=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"55+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"55+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],R=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return v.jsxs(v.Fragment,{children:[v.jsx(yd,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 55+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[v.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),v.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),v.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),v.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),v.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx(gd,{}),v.jsx("div",{className:"relative",children:o?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?v.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("section",{className:"relative pt-16 pb-20",children:v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[v.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),v.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:v.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[v.jsx("div",{className:"inline-block mb-6",children:v.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 55+ Components & AI Assessment"})}),v.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[v.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),v.jsx("br",{}),v.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),v.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design  practice, learn, and create architecture diagrams with ease"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((D,P)=>v.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${P===0?"fade-in-up-delay-100":P===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[v.jsx("div",{className:"text-3xl mb-1",children:D.icon}),v.jsx("div",{className:"text-3xl font-bold text-white",children:D.value}),v.jsx("div",{className:"text-sm text-white/80",children:D.label})]},D.label))}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),v.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",v.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),v.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required  Free forever  55+ components"})]})})]})}),o&&v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),E?v.jsx("div",{className:"flex items-center justify-center py-20",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?v.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),v.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(D=>v.jsxs("div",{onClick:()=>k(D.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:D.title}),D.description&&v.jsx("p",{className:"text-sm text-muted line-clamp-2",children:D.description})]}),v.jsx("div",{className:"text-3xl ml-2",children:""})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),D.nodes.length," node",D.nodes.length!==1?"s":""]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),D.edges.length," connection",D.edges.length!==1?"s":""]})]}),v.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(D.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},D.id))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((D,P)=>v.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${P===0?"delay-0":P===1?"delay-100":"delay-200"}`,onClick:()=>e(D.route),onKeyDown:$=>$.key==="Enter"&&e(D.route),role:"button",tabIndex:0,children:[v.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${D.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:D.icon}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:D.title}),v.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:D.description}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[D.action,v.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},D.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((D,P)=>v.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${P===0?"delay-0":P===1?"delay-[50ms]":P===2?"delay-[100ms]":P===3?"delay-[150ms]":P===4?"delay-[200ms]":"delay-[250ms]"}`,children:[v.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:D.icon}),v.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:D.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed",children:D.description})]},D.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:R.map((D,P)=>v.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[v.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),v.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:D.quote}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:D.author.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold text-theme",children:D.author}),v.jsx("div",{className:"text-muted text-sm",children:D.role})]})]})]})]},`testimonial-${P}`))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),v.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),v.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),v.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),v.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),v.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&v.jsx(Qp,{isOpen:p,onClose:()=>g(!1),onLogin:async(D,P)=>{await l({email:D,password:P})},onSignup:async(D,P,$)=>{await u({email:D,password:P,name:$})},onGoogleLogin:async D=>{await d(D)}})]})]})};function rs(e){return Array.isArray?Array.isArray(e):fI(e)==="[object Array]"}function CK(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function EK(e){return e==null?"":CK(e)}function pi(e){return typeof e=="string"}function uI(e){return typeof e=="number"}function kK(e){return e===!0||e===!1||NK(e)&&fI(e)=="[object Boolean]"}function dI(e){return typeof e=="object"}function NK(e){return dI(e)&&e!==null}function ir(e){return e!=null}function y0(e){return!e.trim().length}function fI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const TK="Incorrect 'index' type",AK=e=>`Invalid value for key ${e}`,MK=e=>`Pattern length exceeds max of ${e}.`,_K=e=>`Missing ${e} property in key`,DK=e=>`Property 'weight' in key '${e}' must be a positive integer`,i_=Object.prototype.hasOwnProperty;class RK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=hI(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function hI(e){let t=null,n=null,r=null,i=1,s=null;if(pi(e)||rs(e))r=e,t=s_(e),n=$S(e);else{if(!i_.call(e,"name"))throw new Error(_K("name"));const o=e.name;if(r=o,i_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(DK(o));t=s_(o),n=$S(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function s_(e){return rs(e)?e:e.split(".")}function $S(e){return rs(e)?e.join("."):e}function OK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(ir(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!ir(d))return;if(l===o.length-1&&(pi(d)||uI(d)||kK(d)))n.push(EK(d));else if(rs(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,pi(t)?t.split("."):t,0),r?n:n[0]}const jK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},LK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},PK={location:0,threshold:.6,distance:100},IK={useExtendedSearch:!1,getFn:OK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var qe={...LK,...jK,...PK,...IK};const BK=/[^ ]+/g;function zK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(BK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class AE{constructor({getFn:t=qe.getFn,fieldNormWeight:n=qe.fieldNormWeight}={}){this.norm=zK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,pi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();pi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ir(t)||y0(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(ir(o)){if(rs(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(ir(h))if(pi(h)&&!y0(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else rs(h)&&h.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(pi(o)&&!y0(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function pI(e,t,{getFn:n=qe.getFn,fieldNormWeight:r=qe.fieldNormWeight}={}){const i=new AE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(hI)),i.setSources(t),i.create(),i}function qK(e,{getFn:t=qe.getFn,fieldNormWeight:n=qe.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new AE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Wf(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=qe.distance,ignoreLocation:s=qe.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function VK(e=[],t=qe.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const Fo=32;function HK(e,t,n,{location:r=qe.location,distance:i=qe.distance,threshold:s=qe.threshold,findAllMatches:o=qe.findAllMatches,minMatchCharLength:l=qe.minMatchCharLength,includeMatches:u=qe.includeMatches,ignoreLocation:d=qe.ignoreLocation}={}){if(t.length>Fo)throw new Error(MK(Fo));const h=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let y=s,x=g;const S=l>1||u,w=S?Array(p):[];let E;for(;(E=e.indexOf(t,x))>-1;){let R=Wf(t,{currentLocation:E,expectedLocation:g,distance:i,ignoreLocation:d});if(y=Math.min(R,y),x=E+h,S){let D=0;for(;D<h;)w[E+D]=1,D+=1}}x=-1;let N=[],k=1,T=h+p;const A=1<<h-1;for(let R=0;R<h;R+=1){let D=0,P=T;for(;D<P;)Wf(t,{errors:R,currentLocation:g+P,expectedLocation:g,distance:i,ignoreLocation:d})<=y?D=P:T=P,P=Math.floor((T-D)/2+D);T=P;let $=Math.max(1,g-P+1),V=o?p:Math.min(g+P,p)+h,B=Array(V+2);B[V+1]=(1<<R)-1;for(let z=V;z>=$;z-=1){let F=z-1,I=n[e.charAt(F)];if(S&&(w[F]=+!!I),B[z]=(B[z+1]<<1|1)&I,R&&(B[z]|=(N[z+1]|N[z])<<1|1|N[z+1]),B[z]&A&&(k=Wf(t,{errors:R,currentLocation:F,expectedLocation:g,distance:i,ignoreLocation:d}),k<=y)){if(y=k,x=F,x<=g)break;$=Math.max(1,2*g-x)}}if(Wf(t,{errors:R+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>y)break;N=B}const _={isMatch:x>=0,score:Math.max(.001,k)};if(S){const R=VK(w,l);R.length?u&&(_.indices=R):_.isMatch=!1}return _}function FK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const zh=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class mI{constructor(t,{location:n=qe.location,threshold:r=qe.threshold,distance:i=qe.distance,includeMatches:s=qe.includeMatches,findAllMatches:o=qe.findAllMatches,minMatchCharLength:l=qe.minMatchCharLength,isCaseSensitive:u=qe.isCaseSensitive,ignoreDiacritics:d=qe.ignoreDiacritics,ignoreLocation:h=qe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?zh(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(y,x)=>{this.chunks.push({pattern:y,alphabet:FK(y),startIndex:x})},g=this.pattern.length;if(g>Fo){let y=0;const x=g%Fo,S=g-x;for(;y<S;)p(this.pattern.substr(y,Fo),y),y+=Fo;if(x){const w=g-Fo;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?zh(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],g=0,y=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:E})=>{const{isMatch:N,score:k,indices:T}=HK(t,S,w,{location:s+E,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});N&&(y=!0),g+=k,N&&T&&(p=[...p,...T])});let x={isMatch:y,score:y?g/this.chunks.length:1};return y&&i&&(x.indices=p),x}}class co{constructor(t){this.pattern=t}static isMultiMatch(t){return o_(t,this.multiRegex)}static isSingleMatch(t){return o_(t,this.singleRegex)}search(){}}function o_(e,t){const n=e.match(t);return n?n[1]:null}class UK extends co{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class $K extends co{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class GK extends co{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class KK extends co{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class YK extends co{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class WK extends co{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class gI extends co{constructor(t,{location:n=qe.location,threshold:r=qe.threshold,distance:i=qe.distance,includeMatches:s=qe.includeMatches,findAllMatches:o=qe.findAllMatches,minMatchCharLength:l=qe.minMatchCharLength,isCaseSensitive:u=qe.isCaseSensitive,ignoreDiacritics:d=qe.ignoreDiacritics,ignoreLocation:h=qe.ignoreLocation}={}){super(t),this._bitapSearch=new mI(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class yI extends co{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const GS=[UK,yI,GK,KK,WK,YK,$K,gI],a_=GS.length,XK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,ZK="|";function QK(e,t={}){return e.split(ZK).map(n=>{let r=n.trim().split(XK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<a_;){const h=GS[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<a_;){const h=GS[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const JK=new Set([gI.type,yI.type]);class eY{constructor(t,{isCaseSensitive:n=qe.isCaseSensitive,ignoreDiacritics:r=qe.ignoreDiacritics,includeMatches:i=qe.includeMatches,minMatchCharLength:s=qe.minMatchCharLength,ignoreLocation:o=qe.ignoreLocation,findAllMatches:l=qe.findAllMatches,location:u=qe.location,threshold:d=qe.threshold,distance:h=qe.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?zh(t):t,this.pattern=t,this.query=QK(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?zh(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,y=p.length;g<y;g+=1){const x=p[g],{isMatch:S,indices:w,score:E}=x.search(t);if(S){if(o+=1,u+=E,r){const N=x.constructor.type;JK.has(N)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const KS=[];function tY(...e){KS.push(...e)}function YS(e,t){for(let n=0,r=KS.length;n<r;n+=1){let i=KS[n];if(i.condition(e,t))return new i(e,t)}return new mI(e,t)}const qh={AND:"$and",OR:"$or"},WS={PATH:"$path",PATTERN:"$val"},XS=e=>!!(e[qh.AND]||e[qh.OR]),nY=e=>!!e[WS.PATH],rY=e=>!rs(e)&&dI(e)&&!XS(e),l_=e=>({[qh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function vI(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=nY(i);if(!o&&s.length>1&&!XS(i))return r(l_(i));if(rY(i)){const u=o?i[WS.PATH]:s[0],d=o?i[WS.PATTERN]:i[u];if(!pi(d))throw new Error(AK(u));const h={keyId:$S(u),pattern:d};return n&&(h.searcher=YS(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];rs(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return XS(e)||(e=l_(e)),r(e)}function iY(e,{ignoreFieldNorm:t=qe.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function sY(e,t){const n=e.matches;t.matches=[],ir(n)&&n.forEach(r=>{if(!ir(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function oY(e,t){t.score=e.score}function aY(e,t,{includeMatches:n=qe.includeMatches,includeScore:r=qe.includeScore}={}){const i=[];return n&&i.push(sY),r&&i.push(oY),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class wa{constructor(t,n={},r){this.options={...qe,...n},this.options.useExtendedSearch,this._keyStore=new RK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof AE))throw new Error(TK);this._myIndex=n||pI(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ir(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=pi(t)?pi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return iY(u,{ignoreFieldNorm:l}),s&&u.sort(o),uI(n)&&n>-1&&(u=u.slice(0,n)),aY(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=YS(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!ir(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=vI(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return y&&y.length?[{idx:d,item:u,matches:y}]:[]}const h=[];for(let p=0,g=l.children.length;p<g;p+=1){const y=l.children[p],x=r(y,u,d);if(x.length)h.push(...x);else if(l.operator===qh.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(ir(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=YS(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!ir(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!ir(n))return[];let i=[];if(rs(n))n.forEach(({v:s,i:o,n:l})=>{if(!ir(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}wa.version="7.1.0";wa.createIndex=pI;wa.parseIndex=qK;wa.config=qe;wa.parseQuery=vI;tY(eY);const lY=()=>{xa();const e=md(),[t,n]=O.useState("All"),[r,i]=O.useState("All"),[s,o]=O.useState(""),[l,u]=O.useState([]),[d,h]=O.useState(!0),[p,g]=O.useState(null),[y,x]=O.useState(!1),[S,w]=O.useState(!1),{user:E,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:_}=Kp();O.useEffect(()=>{(async()=>{try{h(!0),g(null);const G=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!G.ok)throw new Error(`Failed to fetch problems: ${G.status} ${G.statusText}`);const z=await G.json();u(z)}catch(B){g(B instanceof Error?B.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",B)}finally{h(!1)}})()},[]);const R=O.useMemo(()=>{const V=s?.trim()??"";let B=l;return V.length>0&&(B=new wa(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(V).map(z=>z.item)),B.filter(G=>{const z=t==="All"||G.difficulty===t,F=r==="All"||G.category===r;return z&&F})},[t,r,s,l]),D=["All",...Array.from(new Set(l.map(V=>V.category)))],P=["All","Easy","Medium","Hard","Very Hard"],$=V=>{switch(V){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return v.jsxs(v.Fragment,{children:[v.jsx(yd,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${R.length} problems available`}),v.jsx(gd,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?v.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),v.jsx("button",{type:"button",onClick:()=>{_(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),v.jsx("div",{className:"text-muted text-sm mb-6",children:p}),v.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:V=>o(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),v.jsx("select",{id:"difficulty-select",value:t,onChange:V=>n(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:P.map(V=>v.jsx("option",{value:V,children:V},V))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),v.jsx("select",{id:"category-select",value:r,onChange:V=>i(V.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:D.map(V=>v.jsx("option",{value:V,children:V},V))})]})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:R.map((V,B)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${B===0?"delay-0":B===1?"delay-100":B===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:V.title}),v.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${$(V.difficulty)}`,children:V.difficulty})]}),v.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:V.description}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",V.category]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",V.estimated_time]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[V.tags.slice(0,3).map(G=>v.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:G},G)),V.tags.length>3&&v.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",V.tags.length-3," more"]})]}),v.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),e(`/playground/${V.id}`)},"aria-label":`Start ${V.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem "})]})]},V.id))}),R.length===0&&!d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),v.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&v.jsx(Qp,{isOpen:S,onClose:()=>w(!1),onLogin:async(V,B)=>{await k({email:V,password:B})},onSignup:async(V,B,G)=>{await T({email:V,password:B,name:G})},onGoogleLogin:async V=>{await A(V)}})]})};var v0={exports:{}},b0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function cY(){if(c_)return b0;c_=1;var e=pd();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,w=x[1];return s(function(){S.value=y,S.getSnapshot=g,u(S)&&w({inst:S})},[p,y,g]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return b0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,b0}var u_;function bI(){return u_||(u_=1,v0.exports=cY()),v0.exports}var xI=bI();function yn(e){this.content=e}yn.prototype={constructor:yn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new yn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new yn(n)},addToStart:function(e,t){return new yn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new yn(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new yn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=yn.from(e),e.size?new yn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=yn.from(e),e.size?new yn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=yn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};yn.from=function(e){if(e instanceof yn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new yn(t)};function wI(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=wI(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function SI(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=SI(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class me{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new me(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new me(r,i)}cutByIndex(t,n){return t==n?me.empty:t==0&&n==this.content.length?this:new me(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new me(i,s)}addToStart(t){return new me([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new me(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return wI(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return SI(this,t,n,r)}findIndex(t){if(t==0)return Xf(0,t);if(t==this.size)return Xf(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Xf(n+1,s):Xf(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return me.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new me(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return me.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new me(n||t,r)}static from(t){if(!t)return me.empty;if(t instanceof me)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new me([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}me.empty=new me([],0);const x0={index:0,offset:0};function Xf(e,t){return x0.index=e,x0.offset=t,x0}function Vh(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Vh(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Vh(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let ht=class ZS{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Vh(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return ZS.none;if(t instanceof ZS)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ht.none=[];class Hh extends Error{}class xe{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=EI(this.content,t+this.openStart,n);return r&&new xe(r,this.openStart,this.openEnd)}removeBetween(t,n){return new xe(CI(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return xe.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(me.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new xe(t,r,i)}}xe.empty=new xe(me.empty,0,0);function CI(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(CI(s.content,t-i-1,n-i-1)))}function EI(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=EI(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function uY(e,t,n){if(n.openStart>e.depth)throw new Hh("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Hh("Inconsistent open depths");return kI(e,t,n,0)}function kI(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=kI(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return na(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=dY(n,e);return na(s,TI(e,o,l,t,r))}else return na(s,Fh(e,t,r))}function NI(e,t){if(!t.type.compatibleContent(e.type))throw new Hh("Cannot join "+t.type.name+" onto "+e.type.name)}function QS(e,t,n){let r=e.node(n);return NI(r,t.node(n)),r}function ta(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Eu(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(ta(e.nodeAfter,r),s++));for(let l=s;l<o;l++)ta(i.child(l),r);t&&t.depth==n&&t.textOffset&&ta(t.nodeBefore,r)}function na(e,t){return e.type.checkContent(t),e.copy(t)}function TI(e,t,n,r,i){let s=e.depth>i&&QS(e,t,i+1),o=r.depth>i&&QS(n,r,i+1),l=[];return Eu(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(NI(s,o),ta(na(s,TI(e,t,n,r,i+1)),l)):(s&&ta(na(s,Fh(e,t,i+1)),l),Eu(t,n,i,l),o&&ta(na(o,Fh(n,r,i+1)),l)),Eu(r,null,i,l),new me(l)}function Fh(e,t,n){let r=[];if(Eu(null,e,n,r),e.depth>n){let i=QS(e,t,n+1);ta(na(i,Fh(e,t,n+1)),r)}return Eu(t,null,n,r),new me(r)}function dY(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(me.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class $u{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return ht.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Uh(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new $u(n,r,s)}static resolveCached(t,n){let r=d_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else d_.set(t,r=new fY);let i=r.elts[r.i]=$u.resolve(t,n);return r.i=(r.i+1)%hY,i}}class fY{constructor(){this.elts=[],this.i=0}}const hY=12,d_=new WeakMap;class Uh{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pY=Object.create(null);let Qs=class JS{constructor(t,n,r,i=ht.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||me.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Vh(this.attrs,n||t.defaultAttrs||pY)&&ht.sameSet(this.marks,r||ht.none)}copy(t=null){return t==this.content?this:new JS(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new JS(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return xe.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new xe(d,i.depth-o,s.depth-o)}replace(t,n,r){return uY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return $u.resolveCached(this,t)}resolveNoCache(t){return $u.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),AI(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=me.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ht.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!ht.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=me.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Qs.prototype.text=void 0;class $h extends Qs{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):AI(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new $h(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new $h(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function AI(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class la{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new mY(t,n);if(r.next==null)return la.empty;let i=MI(r);r.next&&r.err("Unexpected trailing text");let s=SY(wY(i));return CY(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return me.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}la.empty=new la(!0);class mY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function MI(e){let t=[];do t.push(gY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function gY(e){let t=[];do t.push(yY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function yY(e){let t=xY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=vY(e,t);else break;return t}function f_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function vY(e,t){let n=f_(e),r=n;return e.eat(",")&&(e.next!="}"?r=f_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function bY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function xY(e){if(e.eat("(")){let t=MI(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=bY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function wY(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function _I(e,t){return t-e}function h_(e,t){let n=[];return r(t),n.sort(_I);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function SY(e){let t=Object.create(null);return n(h_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);h_(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new la(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(_I);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function CY(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function DI(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function RI(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function OI(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function jI(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new kY(e,r,t[r]);return n}let p_=class LI{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=jI(t,r.attrs),this.defaultAttrs=DI(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==la.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:RI(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Qs(this,this.computeAttrs(t),me.from(n),ht.setFrom(r))}createChecked(t=null,n,r){return n=me.from(n),this.checkContent(n),new Qs(this,this.computeAttrs(t),n,ht.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=me.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(me.empty,!0);return s?new Qs(this,t,n.append(s),ht.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){OI(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:ht.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new LI(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function EY(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class kY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?EY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Jp{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=jI(t,i.attrs),this.excluded=null;let s=DI(this.attrs);this.instance=s?new ht(this,s):null}create(t=null){return!t&&this.instance?this.instance:new ht(this,RI(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Jp(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){OI(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class PI{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=yn.from(t.nodes),n.marks=yn.from(t.marks||{}),this.nodes=p_.compile(this.spec.nodes,this),this.marks=Jp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=la.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?m_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:m_(this,o.split(" "))}this.nodeFromJSON=i=>Qs.fromJSON(this,i),this.markFromJSON=i=>ht.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof p_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new $h(r,r.defaultAttrs,t,ht.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function m_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function NY(e){return e.tag!=null}function TY(e){return e.style!=null}let ku=class eC{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(NY(i))this.tags.push(i);else if(TY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new y_(this,n,!1);return r.addAll(t,ht.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new y_(this,n,!0);return r.addAll(t,ht.none,n.from,n.to),xe.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(_Y(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=v_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=v_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new eC(t,eC.schemaRules(t)))}};const II={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},AY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},BI={ol:!0,ul:!0},Gu=1,tC=2,Nu=4;function g_(e,t,n){return t!=null?(t?Gu:0)|(t==="full"?tC:0):e&&e.whitespace=="pre"?Gu|tC:n&~Nu}class Zf{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ht.none,this.match=s||(o&Nu?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(me.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Gu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=me.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(me.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!II.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class y_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=g_(null,n.preserveWhitespace,0)|(r?Nu:0);i?s=new Zf(i.type,i.attrs,ht.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Zf(null,null,ht.none,!0,null,o):s=new Zf(t.schema.topNodeType,null,ht.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&tC?"full":this.localPreserveWS||(i.options&Gu)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;BI.hasOwnProperty(o)&&this.parser.normalizeLists&&MY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:AY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(II.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=ht.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):b_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=g_(t,s,o.options);o.options&Nu&&o.content.length==0&&(l|=Nu);let u=ht.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):b_(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Zf(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Gu)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function MY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&BI.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function _Y(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function v_(e){let t={};for(let n in e)t[n]=e[n];return t}function b_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Sa{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=w0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=wh(w0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&wh(w0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return wh(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Sa(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=x_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return x_(t.marks)}}function x_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function w0(e){return e.document||window.document}const w_=new WeakMap;function DY(e){let t=w_.get(e);return t===void 0&&w_.set(e,t=RY(e)),t}function RY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function wh(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=DY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:x}=wh(e,g,n,r);if(u.appendChild(y),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const zI=65535,qI=Math.pow(2,16);function OY(e,t){return e+t*qI}function S_(e){return e&zI}function jY(e){return(e-(e&zI))/qI}const VI=1,HI=2,Sh=4,FI=8;class nC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&FI)>0}get deletedBefore(){return(this.delInfo&(VI|Sh))>0}get deletedAfter(){return(this.delInfo&(HI|Sh))>0}get deletedAcross(){return(this.delInfo&Sh)>0}}class sr{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&sr.empty)return sr.empty}recover(t){let n=0,r=S_(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+jY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let g=d?t==u?-1:t==p?1:n:n,y=u+i+(g<0?0:h);if(r)return y;let x=t==(n<0?u:p)?null:OY(l/3,t-u),S=t==u?HI:t==p?VI:Sh;return(n<0?t!=u:t!=p)&&(S|=FI),new nC(y,S,x)}i+=h-d}return r?t+i:new nC(t+i,0,null)}touches(t,n){let r=0,i=S_(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new sr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?sr.empty:new sr(t<0?[0,-t,0]:[0,0,t])}}sr.empty=new sr([]);class Ku{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Ku(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Ku;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new nC(t,i,null)}}const S0=Object.create(null);class An{getMap(){return sr.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=S0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in S0)throw new RangeError("Duplicate use of step JSON ID "+t);return S0[t]=n,n.prototype.jsonID=t,n}}class Ut{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Ut(t,null)}static fail(t){return new Ut(null,t)}static fromReplace(t,n,r,i){try{return Ut.ok(t.replace(n,r,i))}catch(s){if(s instanceof Hh)return Ut.fail(s.message);throw s}}}function ME(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(ME(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return me.fromArray(r)}class Ws extends An{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new xe(ME(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Ut.fromReplace(t,this.from,this.to,s)}invert(){return new Kr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ws(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ws&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ws(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ws(n.from,n.to,t.markFromJSON(n.mark))}}An.jsonID("addMark",Ws);class Kr extends An{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new xe(ME(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Ut.fromReplace(t,this.from,this.to,r)}invert(){return new Ws(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Kr(n.pos,r.pos,this.mark)}merge(t){return t instanceof Kr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Kr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Kr(n.from,n.to,t.markFromJSON(n.mark))}}An.jsonID("removeMark",Kr);class Xs extends An{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ut.fromReplace(t,this.pos,this.pos+1,new xe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Xs(this.pos,n.marks[i]);return new Xs(this.pos,this.mark)}}return new ca(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Xs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Xs(n.pos,t.markFromJSON(n.mark))}}An.jsonID("addNodeMark",Xs);class ca extends An{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ut.fromReplace(t,this.pos,this.pos+1,new xe(me.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Xs(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ca(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ca(n.pos,t.markFromJSON(n.mark))}}An.jsonID("removeNodeMark",ca);class ln extends An{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&rC(t,this.from,this.to)?Ut.fail("Structure replace would overwrite content"):Ut.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new sr([this.from,this.to-this.from,this.slice.size])}invert(t){return new ln(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ln(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ln)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?xe.empty:new xe(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ln(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?xe.empty:new xe(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ln(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ln(n.from,n.to,xe.fromJSON(t,n.slice),!!n.structure)}}An.jsonID("replace",ln);class cn extends An{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(rC(t,this.from,this.gapFrom)||rC(t,this.gapTo,this.to)))return Ut.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ut.fromReplace(t,this.from,this.to,r):Ut.fail("Content does not fit in gap")}getMap(){return new sr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new cn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new cn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new cn(n.from,n.to,n.gapFrom,n.gapTo,xe.fromJSON(t,n.slice),n.insert,!!n.structure)}}An.jsonID("replaceAround",cn);function rC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function LY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,t),y=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(x)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=y:i.push(o=new Kr(g,y,p[S])));l&&l.to==g?l.to=y:s.push(l=new Ws(g,y,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function PY(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Jp){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],g;for(let y=0;y<i.length;y++){let x=i[y];x.step==s-1&&p.eq(i[y].style)&&(g=x)}g?(g.to=d,g.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Kr(o.from,o.to,o.style)))}function _E(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new ln(l,h,xe.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||e.step(new Kr(l,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,y=/\r?\n|\r/g,x;for(;g=y.exec(d.text);)x||(x=new xe(me.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new ln(l+g.index,l+g.index+g[0].length,x))}}l=h}if(!r.validEnd){let u=r.fillBefore(me.empty,!0);e.replace(l,l,new xe(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function IY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Zl(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!IY(i,s,o))break}return null}function BY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=me.empty,p=0;for(let x=s,S=!1;x>n;x--)S||r.index(x)>0?(S=!0,h=me.from(r.node(x).copy(h)),p++):u--;let g=me.empty,y=0;for(let x=s,S=!1;x>n;x--)S||i.after(x+1)<i.end(x)?(S=!0,g=me.from(i.node(x).copy(g)),y++):d++;e.step(new cn(u,d,o,l,new xe(h.append(g),p,y),h.size-p,!0))}function DE(e,t,n=null,r=e){let i=zY(e,t),s=i&&qY(r,t);return s?i.map(C_).concat({type:t,attrs:n}).concat(s.map(C_)):null}function C_(e){return{type:e,attrs:null}}function zY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function qY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function VY(e,t,n){let r=me.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=me.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new cn(i,s,i,s,new xe(r,0,0),n.length,!0))}function HY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&FY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!x?d=!1:!y&&x&&(d=!0)}d===!1&&$I(e,o,l,s),_E(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return e.step(new cn(p,g,p+1,g-1,new xe(me.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&UI(e,o,l,s),!1}})}function UI(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function $I(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function FY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function UY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new cn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new xe(me.from(o),0,0),1,!0))}function Ji(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),g=i.index(d);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(g,p.childCount),x=r&&r[h+1];x&&(y=y.replaceChild(0,x.type.create(x.attrs)));let S=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(y))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function $Y(e,t,n=1,r){let i=e.doc.resolve(t),s=me.empty,o=me.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=me.from(i.node(l).copy(s));let h=r&&r[d];o=me.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new ln(t,t,new xe(s.append(o),n,n),!0))}function uo(e,t){let n=e.resolve(t),r=n.index();return GI(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function GY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function GI(e,t){return!!(e&&t&&!e.isLeaf&&GY(e,t))}function em(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&GI(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function KY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);$I(e,h.node(),h.before(),l)}o.inlineContent&&_E(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new ln(d,u.map(t+n,-1),xe.empty,!0)),r===!0){let h=e.doc.resolve(d);UI(e,h.node(),h.before(),e.steps.length)}return e}function YY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function KI(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function tm(e,t,n=t,r=xe.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return YI(i,s,r)?new ln(t,n,r):new WY(i,s,r).fit()}function YI(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class WY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=me.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=me.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new xe(s,o,l);return t>-1?new cn(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new ln(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=C0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(me.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=C0(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new xe(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=C0(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new xe(uu(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new xe(uu(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let y=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(WI(S.mark(g.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?y:-1)))}let x=d==l.childCount;x||(y=-1),this.placed=du(this.placed,n,me.from(h)),this.frontier[n].match=p,x&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<y;S++){let E=w.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),w=E.content}this.unplaced=x?t==0?xe.empty:new xe(uu(o.content,t-1,1),t-1,y<0?o.openEnd:t-1):new xe(uu(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!E0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=E0(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=E0(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=du(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=du(this.placed,this.depth,me.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(me.empty,!0);n.childCount&&(this.placed=du(this.placed,this.frontier.length,n))}}function uu(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(uu(e.firstChild.content,t-1,n)))}function du(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(du(e.lastChild.content,t-1,n)))}function C0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function WI(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,WI(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(me.empty,!0)))),e.copy(r)}function E0(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!XY(n,s.content,o)?l:null}function XY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function ZY(e){return e.spec.defining||e.spec.definingForContent}function QY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(YI(i,s,r))return e.step(new ln(t,n,r));let o=ZI(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let x=i.node(g).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==y&&o.splice(1,0,-g)}let u=o.indexOf(l),d=[],h=r.openStart;for(let g=r.content,y=0;;y++){let x=g.firstChild;if(d.push(x),y==r.openStart)break;g=x.content}for(let g=h-1;g>=0;g--){let y=d[g],x=ZY(y.type);if(x&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(x||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),x=d[y];if(x)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],E=!0;w<0&&(E=!1,w=-w);let N=i.node(w-1),k=i.index(w-1);if(N.canReplaceWith(k,k,x.type,x.marks))return e.replace(i.before(w),E?s.after(w):n,new xe(XI(r.content,0,r.openStart,y),y,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let y=o[g];y<0||(t=i.before(y),n=s.after(y))}}function XI(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(XI(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(me.empty,!0))}return e}function JY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=YY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new xe(me.from(r),0,0))}function eW(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=ZI(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function ZI(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Dl extends An{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ut.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ut.fromReplace(t,this.pos,this.pos+1,new xe(me.from(i),0,n.isLeaf?0:1))}getMap(){return sr.empty}invert(t){return new Dl(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Dl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Dl(n.pos,n.attr,n.value)}}An.jsonID("attr",Dl);class Yu extends An{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Ut.ok(r)}getMap(){return sr.empty}invert(t){return new Yu(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Yu(n.attr,n.value)}}An.jsonID("docAttr",Yu);let Il=class extends Error{};Il=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Il.prototype=Object.create(Error.prototype);Il.prototype.constructor=Il;Il.prototype.name="TransformError";let QI=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Ku}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Il(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=xe.empty){let i=tm(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new xe(me.from(r),0,0))}delete(t,n){return this.replace(t,n,xe.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return QY(this,t,n,r),this}replaceRangeWith(t,n,r){return JY(this,t,n,r),this}deleteRange(t,n){return eW(this,t,n),this}lift(t,n){return BY(this,t,n),this}join(t,n=1){return KY(this,t,n),this}wrap(t,n){return VY(this,t,n),this}setBlockType(t,n=t,r,i=null){return HY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return UY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Dl(t,n,r)),this}setDocAttribute(t,n){return this.step(new Yu(t,n)),this}addNodeMark(t,n){return this.step(new Xs(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof ht)n.isInSet(r.marks)&&this.step(new ca(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new ca(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return $Y(this,t,n,r),this}addMark(t,n,r){return LY(this,t,n,r),this}removeMark(t,n,r){return PY(this,t,n,r),this}clearIncompatible(t,n,r){return _E(this,t,n,r),this}};const k0=Object.create(null);let $e=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new tW(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=xe.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?xe.empty:n),l==0&&N_(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),N_(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ve(t):vl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?vl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):vl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new ar(t.node(0))}static atStart(t){return vl(t,t,0,0,1)||new ar(t)}static atEnd(t){return vl(t,t,t.content.size,t.childCount,-1)||new ar(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=k0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in k0)throw new RangeError("Duplicate use of selection JSON ID "+t);return k0[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}};$e.prototype.visible=!0;class tW{constructor(t,n){this.$from=t,this.$to=n}}let E_=!1;function k_(e){!E_&&!e.parent.inlineContent&&(E_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ve extends $e{constructor(t,n=t){k_(t),k_(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return $e.near(r);let i=t.resolve(n.map(this.anchor));return new Ve(i.parent.inlineContent?i:r,r)}replace(t,n=xe.empty){if(super.replace(t,n),n==xe.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ve&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new nm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=$e.findFrom(n,r,!0)||$e.findFrom(n,-r,!0);if(s)n=s.$head;else return $e.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=($e.findFrom(t,-r,!0)||$e.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ve(t,n)}}$e.jsonID("text",Ve);class nm{constructor(t,n){this.anchor=t,this.head=n}map(t){return new nm(t.map(this.anchor),t.map(this.head))}resolve(t){return Ve.between(t.resolve(this.anchor),t.resolve(this.head))}}class Oe extends $e{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?$e.near(s):new Oe(s)}content(){return new xe(me.from(this.node),0,0)}eq(t){return t instanceof Oe&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new RE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Oe(t.resolve(n.anchor))}static create(t,n){return new Oe(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Oe.prototype.visible=!1;$e.jsonID("node",Oe);class RE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new nm(r,r):new RE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Oe.isSelectable(r)?new Oe(n):$e.near(n)}}class ar extends $e{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=xe.empty){if(n==xe.empty){t.delete(0,t.doc.content.size);let r=$e.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new ar(t)}map(t){return new ar(t)}eq(t){return t instanceof ar}getBookmark(){return nW}}$e.jsonID("all",ar);const nW={map(){return this},resolve(e){return new ar(e)}};function vl(e,t,n,r,i,s=!1){if(t.inlineContent)return Ve.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Oe.isSelectable(l))return Oe.create(e,n-(i<0?l.nodeSize:0))}else{let u=vl(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function N_(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof ln||i instanceof cn))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection($e.near(e.doc.resolve(o),n))}const T_=1,Qf=2,A_=4;class rW extends QI{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|T_)&~Qf,this.storedMarks=null,this}get selectionSet(){return(this.updated&T_)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Qf,this}ensureMarks(t){return ht.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Qf)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Qf,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ht.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection($e.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=A_,this}get scrolledIntoView(){return(this.updated&A_)>0}}function M_(e,t){return!t||!e?e:e.bind(t)}class fu{constructor(t,n,r){this.name=t,this.init=M_(n.init,r),this.apply=M_(n.apply,r)}}const iW=[new fu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new fu("selection",{init(e,t){return e.selection||$e.atStart(t.doc)},apply(e){return e.selection}}),new fu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new fu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class N0{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iW.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new fu(r.key,r.spec.state,r))})}}class Tl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Tl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new rW(this)}static create(t){let n=new N0(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Tl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new N0(this.schema,t.plugins),r=n.fields,i=new Tl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new N0(t.schema,t.plugins),s=new Tl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Qs.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=$e.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function JI(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=JI(i,t,{})),n[r]=i}return n}class jt{constructor(t){this.spec=t,this.props={},t.props&&JI(t.props,this,this.props),this.key=t.key?t.key.key:eB("plugin")}getState(t){return t[this.key]}}const T0=Object.create(null);function eB(e){return e in T0?e+"$"+ ++T0[e]:(T0[e]=0,e+"$")}class dn{constructor(t="key"){this.key=eB(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const bn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Bl=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let iC=null;const Xi=function(e,t,n){let r=iC||(iC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},sW=function(){iC=null},ua=function(e,t,n,r){return n&&(__(e,t,n,r,-1)||__(e,t,n,r,1))},oW=/^(img|br|input|textarea|hr)$/i;function __(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:kr(e))){let o=e.parentNode;if(!o||o.nodeType!=1||Sd(e)||oW.test(e.nodeName)||e.contentEditable=="false")return!1;t=bn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?kr(e):0}else return!1}}function kr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function aW(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=kr(e)}else if(e.parentNode&&!Sd(e))t=bn(e),e=e.parentNode;else return null}}function lW(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Sd(e))t=bn(e)+1,e=e.parentNode;else return null}}function cW(e,t,n){for(let r=t==0,i=t==kr(e);r||i;){if(e==n)return!0;let s=bn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==kr(e)}}function Sd(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const rm=function(e){return e.focusNode&&ua(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Uo(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function uW(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function dW(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(kr(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(kr(r.startContainer),r.startOffset)}}}const bi=typeof navigator<"u"?navigator:null,D_=typeof document<"u"?document:null,fo=bi&&bi.userAgent||"",sC=/Edge\/(\d+)/.exec(fo),tB=/MSIE \d/.exec(fo),oC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(fo),Un=!!(tB||oC||sC),Js=tB?document.documentMode:oC?+oC[1]:sC?+sC[1]:0,Mr=!Un&&/gecko\/(\d+)/i.test(fo);Mr&&+(/Firefox\/(\d+)/.exec(fo)||[0,0])[1];const aC=!Un&&/Chrome\/(\d+)/.exec(fo),Tn=!!aC,nB=aC?+aC[1]:0,On=!Un&&!!bi&&/Apple Computer/.test(bi.vendor),zl=On&&(/Mobile\/\w+/.test(fo)||!!bi&&bi.maxTouchPoints>2),Cr=zl||(bi?/Mac/.test(bi.platform):!1),fW=bi?/Win/.test(bi.platform):!1,Zi=/Android \d/.test(fo),Cd=!!D_&&"webkitFontSmoothing"in D_.documentElement.style,hW=Cd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function pW(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function $i(e,t){return typeof e=="number"?e:e[t]}function mW(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function R_(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Bl(o);continue}let l=o,u=l==s.body,d=u?pW(s):mW(l),h=0,p=0;if(t.top<d.top+$i(r,"top")?p=-(d.top-t.top+$i(i,"top")):t.bottom>d.bottom-$i(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+$i(i,"top")-d.top:t.bottom-d.bottom+$i(i,"bottom")),t.left<d.left+$i(r,"left")?h=-(d.left-t.left+$i(i,"left")):t.right>d.right-$i(r,"right")&&(h=t.right-d.right+$i(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-y,w=l.scrollTop-x;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let g=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:Bl(o)}}function gW(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:rB(e.dom)}}function rB(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Bl(r));return t}function yW({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;iB(n,r==0?0:r-t)}function iB(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let fl=null;function vW(e){if(e.setActive)return e.setActive();if(fl)return e.focus(fl);let t=rB(e);e.focus(fl==null?{get preventScroll(){return fl={preventScroll:!0},!0}}:void 0),fl||(fl=!1,iB(t,0))}function sB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=Xi(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let x=g[y];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let S=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!u&&x.left<=t.left&&x.right>=t.left&&(u=h,d={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!n&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?bW(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:sB(n,i)}function bW(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=Vs(r,1);if(s.top!=s.bottom&&OE(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function OE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function xW(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function wW(e,t,n){let{node:r,offset:i}=sB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function SW(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function oB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(OE(t,d))return oB(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function CW(e,t){let n=e.dom.ownerDocument,r,i=0,s=dW(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!OE(t,d)||(o=oB(e.dom,t,d),!o))return null}if(On)for(let d=o;r&&d;d=Bl(d))d.draggable&&(r=void 0);if(o=xW(o,t),r){if(Mr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;Cd&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=SW(e,r,i,t))}l==null&&(l=wW(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function O_(e){return e.top<e.bottom||e.left<e.right}function Vs(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(O_(r))return r}return Array.prototype.find.call(n,O_)||e.getBoundingClientRect()}const EW=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function aB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=Cd||Mr;if(r.nodeType==3)if(o&&(EW.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=Vs(Xi(r,i,i),n);if(Mr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Vs(Xi(r,i-1,i-1),-1);if(d.top==u.top){let h=Vs(Xi(r,i,i+1),-1);if(h.top!=u.top)return ru(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,ru(Vs(Xi(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==kr(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return A0(u.getBoundingClientRect(),!1)}if(s==null&&i<kr(r)){let u=r.childNodes[i];if(u.nodeType==1)return A0(u.getBoundingClientRect(),!0)}return A0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==kr(r))){let u=r.childNodes[i-1],d=u.nodeType==3?Xi(u,kr(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return ru(Vs(d,1),!1)}if(s==null&&i<kr(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?Xi(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return ru(Vs(d,-1),!0)}return ru(Vs(r.nodeType==3?Xi(r):r,-n),n>=0)}function ru(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function A0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function lB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function kW(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return lB(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=aB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=Xi(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const NW=/[\u0590-\u08ac]/;function TW(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!NW.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:lB(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let y=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:x,focusOffset:S}=e.domSelectionRange(),w=x&&!y.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return g!=null&&(l.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let j_=null,L_=null,P_=!1;function AW(e,t,n){return j_==t&&L_==n?P_:(j_=t,L_=n,P_=n=="up"||n=="down"?kW(e,t,n):TW(e,t,n))}const _r=0,I_=1,Ko=2,xi=3;class Ed{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=_r,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>bn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof uB){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof cB&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?bn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?bn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=bn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=bn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let y=0,x=0;y<this.children.length;y++){let S=this.children[y],w=x+S.size;if(s>x&&o<w)return S.setSelection(t-x-S.border,n-x-S.border,r,i);x=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((Mr||On)&&t==n){let{node:y,offset:x}=l;if(y.nodeType==3){if(p=!!(x&&y.nodeValue[x-1]==`
`),p&&x==y.nodeValue.length)for(let S=y,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:bn(w)+1});break}let E=S.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let S=y.childNodes[x-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Mr&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&On)&&ua(l.node,l.offset,h.anchorNode,h.anchorOffset)&&ua(u.node,u.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||t==n)&&!(p&&Mr)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(t>n){let x=l;l=u,u=x}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?Ko:I_,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=xi:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ko:xi}r=o}this.dirty=Ko}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Ko:I_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class cB extends Ed{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==_r&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class MW extends Ed{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class da extends Ed{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Sa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new da(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&xi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=xi&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=_r){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=_r}}slice(t,n,r){let i=da.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=cC(s,n,o,r)),t>0&&(s=cC(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class eo extends Ed{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=Sa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=hB(h,r,n),d?u=new _W(t,n,r,i,h,p||null,g,d,s,o+1):n.isText?new im(t,n,r,i,h,g,s):new eo(t,n,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>me.empty)}return t}matchesNode(t,n,r){return this.dirty==_r&&t.eq(this.node)&&Gh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new RW(this,o&&o.node,t);LW(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?ht.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,g)=>{u.syncToMarks(d.marks,r,t);let y;u.findNodeMatch(d,h,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(y=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,y,t)||u.updateNextNode(d,h,p,t,g,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Ko)&&(o&&this.protectLocalComposition(t,o),dB(this.contentDOM,this.children,t),zl&&PW(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ve)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=IW(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new MW(this,s,n,i);t.input.compositionNodes.push(o),this.children=cC(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==xi||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=_r}updateOuterDeco(t){if(Gh(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=fB(this.dom,this.nodeDOM,lC(this.outerDeco,this.node,n),lC(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function B_(e,t,n,r,i){hB(r,t,e);let s=new eo(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class im extends eo{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==xi||this.dirty!=_r&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=_r||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=_r,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new im(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=xi)}get domAtom(){return!1}isText(t){return this.node.text==t}}class uB extends Ed{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==_r&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class _W extends eo{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==xi)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function dB(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=z_(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof da){let u=r?r.previousSibling:e.lastChild;dB(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=z_(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Tu=function(e){e&&(this.nodeName=e)};Tu.prototype=Object.create(null);const Yo=[new Tu];function lC(e,t,n){if(e.length==0)return Yo;let r=n?Yo[0]:new Tu,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new Tu(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new Tu(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function fB(e,t,n,r){if(n==Yo&&r==Yo)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=Yo[0]),i=u}DW(i,l||Yo[0],o)}return i}function DW(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function hB(e,t,n){return fB(e,e,Yo,lC(t,n,e.nodeType!=1))}function Gh(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function z_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class RW{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=OW(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=_r,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=da.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==xi&&o.dom==o.contentDOM&&(o.dirty=Ko),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof eo){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,g=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=xi&&Gh(n,u.outerDeco));if(!g&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=Ko,p.updateChildren(i,o+1),p.dirty=_r),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Gh(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=eo.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=eo.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new cB(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof da;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof im)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((On||Tn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new uB(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function OW(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof da)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function jW(e,t){return e.type.side-t.type.side}function LW(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(jW);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let g,y;if(u)y=-1,g=u,u=null;else if(d<e.childCount)y=d,g=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+g.nodeSize;if(g.isText){let w=x;o<i.length&&i[o].from<w&&(w=i[o].from);for(let E=0;E<l.length;E++)l[E].to<w&&(w=l[E].to);w<x&&(u=g.cut(w-s),g=g.cut(0,w-s),x=w,y=-1)}else for(;o<i.length&&i[o].to<x;)o++;let S=g.isInline&&!g.isLeaf?l.filter(w=>!w.inline):l.slice();r(g,S,t.forChild(s,g),y),s=x}}function PW(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function IW(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function cC(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function jE(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(rm(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Oe.isSelectable(p)&&i.parent&&!(p.isInline&&cW(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new Oe(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let y=0;y<n.rangeCount;y++){let x=n.getRangeAt(y);p=Math.min(p,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=LE(e,h,l,p)}return d}function pB(e){return e.editable?e.hasFocus():gB(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function es(e,t=!1){let n=e.state.selection;if(mB(e,n),!!pB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Tn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ua(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)zW(e);else{let{anchor:r,head:i}=n,s,o;q_&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(s=V_(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=V_(e,n.to))),e.docView.setSelection(r,i,e,t),q_&&(s&&H_(s),o&&H_(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&BW(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const q_=On||Tn&&nB<63;function V_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(On&&i&&i.contentEditable=="false")return M0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return M0(i);if(s)return M0(s)}}function M0(e){return e.contentEditable="true",On&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function H_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function BW(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!pB(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function zW(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,bn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Un&&Js<=11&&(n.disabled=!0,n.disabled=!1)}function mB(e,t){if(t instanceof Oe){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(F_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else F_(e)}function F_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function LE(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ve.between(t,n,r)}function U_(e){return e.editable&&!e.hasFocus()?!1:gB(e)}function gB(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function qW(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return ua(t.node,t.offset,n.anchorNode,n.anchorOffset)}function uC(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&$e.findFrom(s,t)}function Hs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function $_(e,t,n){let r=e.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Hs(e,new Ve(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=uC(e.state,t);return i&&i instanceof Oe?Hs(e,i):!1}else if(!(Cr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Oe.isSelectable(s)?Hs(e,new Oe(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Cd?Hs(e,new Ve(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Oe&&r.node.isInline)return Hs(e,new Ve(t>0?r.$to:r.$from));{let i=uC(e.state,t);return i?Hs(e,i):!1}}}function Kh(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Au(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function hl(e,t){return t<0?VW(e):HW(e)}function VW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(Mr&&n.nodeType==1&&r<Kh(n)&&Au(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Au(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(yB(n))break;{let l=n.previousSibling;for(;l&&Au(l,-1);)i=n.parentNode,s=bn(l),l=l.previousSibling;if(l)n=l,r=Kh(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?dC(e,n,r):i&&dC(e,i,s)}function HW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Kh(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Au(l,1))s=n,o=++r;else break}else{if(yB(n))break;{let l=n.nextSibling;for(;l&&Au(l,1);)s=l.parentNode,o=bn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Kh(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&dC(e,s,o)}function yB(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function FW(e,t){for(;e&&t==e.childNodes.length&&!Sd(e);)t=bn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function UW(e,t){for(;e&&!t&&!Sd(e);)t=bn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function dC(e,t,n){if(t.nodeType!=3){let s,o;(o=FW(t,n))?(t=o,n=0):(s=UW(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(rm(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&es(e)},50)}function G_(e,t){let n=e.state.doc.resolve(t);if(!(Tn||fW)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function K_(e,t,n){let r=e.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||Cr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=uC(e.state,t);if(o&&o instanceof Oe)return Hs(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof ar?$e.near(o,t):$e.findFrom(o,t);return l?Hs(e,l):!1}return!1}function Y_(e,t){if(!(e.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function W_(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function $W(e){if(!On||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;W_(e,r,"true"),setTimeout(()=>W_(e,r,"false"),20)}return!1}function GW(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function KW(e,t){let n=t.keyCode,r=GW(t);if(n==8||Cr&&n==72&&r=="c")return Y_(e,-1)||hl(e,-1);if(n==46&&!t.shiftKey||Cr&&n==68&&r=="c")return Y_(e,1)||hl(e,1);if(n==13||n==27)return!0;if(n==37||Cr&&n==66&&r=="c"){let i=n==37?G_(e,e.state.selection.from)=="ltr"?-1:1:-1;return $_(e,i,r)||hl(e,i)}else if(n==39||Cr&&n==70&&r=="c"){let i=n==39?G_(e,e.state.selection.from)=="ltr"?1:-1:1;return $_(e,i,r)||hl(e,i)}else{if(n==38||Cr&&n==80&&r=="c")return K_(e,-1,r)||hl(e,-1);if(n==40||Cr&&n==78&&r=="c")return $W(e)||K_(e,1,r)||hl(e,1);if(r==(Cr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function PE(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=e.someProp("clipboardSerializer")||Sa.fromSchema(e.state.schema),l=CB(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=SB[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let x=l.createElement(h[y]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:g,slice:t}}function vB(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new xe(me.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:y}=e.state,x=Sa.fromSchema(y);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(x.serializeNode(y.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=ZW(n),Cd&&QW(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||ku.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!YW.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=JW(X_(l,+h[1],+h[2]),h[4]);else if(l=xe.maxOpen(WW(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=X_(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const YW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function WW(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&xB(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=wB(o[o.length-1],s.length));let h=bB(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return me.from(o)}return e}function bB(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,me.from(e));return e}function xB(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=xB(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(me.from(bB(n,e,i+1))))}}function wB(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,wB(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(me.empty,!0);return e.copy(n.append(r))}function fC(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=fC(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(me.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function X_(e,t,n){return t<e.openStart&&(e=new xe(fC(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new xe(fC(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const SB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Z_=null;function CB(){return Z_||(Z_=document.implementation.createHTMLDocument("title"))}let _0=null;function XW(e){let t=window.trustedTypes;return t?(_0||(_0=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_0.createHTML(e)):e}function ZW(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=CB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&SB[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=XW(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function QW(e){let t=e.querySelectorAll(Tn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function JW(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=me.from(u.create(r[l+1],i)),s++,o++}return new xe(i,s,o)}const jn={},Ln={},eX={touchstart:!0,touchmove:!0};class tX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function nX(e){for(let t in jn){let n=jn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{iX(e,r)&&!IE(e,r)&&(e.editable||!(r.type in Ln))&&n(e,r)},eX[t]?{passive:!0}:void 0)}On&&e.dom.addEventListener("input",()=>null),hC(e)}function Zs(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function rX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function hC(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>IE(e,r))})}function IE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function iX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function sX(e,t){!IE(e,t)&&jn[t.type]&&(e.editable||!(t.type in Ln))&&jn[t.type](e,t)}Ln.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!kB(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Zi&&Tn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),zl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,Uo(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||KW(e,n)?n.preventDefault():Zs(e,"key")};Ln.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Ln.keypress=(e,t)=>{let n=t;if(kB(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Cr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function sm(e){return{left:e.clientX,top:e.clientY}}function oX(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function BE(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Rl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function aX(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Oe.isSelectable(r)?(Rl(e,new Oe(n)),!0):!1}function lX(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Oe&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Oe.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Rl(e,Oe.create(e.state.doc,i)),!0):!1}function cX(e,t,n,r,i){return BE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?lX(e,n):aX(e,n))}function uX(e,t,n,r){return BE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function dX(e,t,n,r){return BE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||fX(e,n,r)}function fX(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Rl(e,Ve.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Rl(e,Ve.create(r,l+1,l+1+o.content.size));else if(Oe.isSelectable(o))Rl(e,Oe.create(r,l));else continue;return!0}}function zE(e){return Yh(e)}const EB=Cr?"metaKey":"ctrlKey";jn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=zE(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&oX(n,e.input.lastClick)&&!n[EB]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(sm(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new hX(e,o,n,!!r)):(s=="doubleClick"?uX:dX)(e,o.pos,o.inside,n)?n.preventDefault():Zs(e,"pointer"))};class hX{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[EB],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Oe&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Mr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Zs(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>es(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(sm(t))),this.updateAllowDefault(t),this.allowDefault||!n?Zs(this.view,"pointer"):cX(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||On&&this.mightDrag&&!this.mightDrag.node.isAtom||Tn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Rl(this.view,$e.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Zs(this.view,"pointer")}move(t){this.updateAllowDefault(t),Zs(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}jn.touchstart=e=>{e.input.lastTouch=Date.now(),zE(e),Zs(e,"pointer")};jn.touchmove=e=>{e.input.lastTouch=Date.now(),Zs(e,"pointer")};jn.contextmenu=e=>zE(e);function kB(e,t){return e.composing?!0:On&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const pX=Zi?5e3:-1;Ln.compositionstart=Ln.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ve&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Yh(e,!0),e.markCursor=null;else if(Yh(e,!t.selection.empty),Mr&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}NB(e,pX)};Ln.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,NB(e,20))};function NB(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Yh(e),t))}function TB(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=gX());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function mX(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=aW(t.focusNode,t.focusOffset),r=lW(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function gX(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Yh(e,t=!1){if(!(Zi&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),TB(e),t||e.docView&&e.docView.dirty){let n=jE(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function yX(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Wu=Un&&Js<15||zl&&hW<604;jn.copy=Ln.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=Wu?null:n.clipboardData,o=r.content(),{dom:l,text:u}=PE(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):yX(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function vX(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function bX(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Xu(e,r.value,null,i,t):Xu(e,r.textContent,r.innerHTML,i,t)},50)}function Xu(e,t,n,r,i){let s=vB(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||xe.empty)))return!0;if(!s)return!1;let o=vX(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function AB(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ln.paste=(e,t)=>{let n=t;if(e.composing&&!Zi)return;let r=Wu?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Xu(e,AB(r),r.getData("text/html"),i,n)?n.preventDefault():bX(e,n)};class MB{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const xX=Cr?"altKey":"ctrlKey";function _B(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[xX]}jn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(sm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Oe?i.to-1:i.to))){if(r&&r.mightDrag)o=Oe.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Oe.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=PE(e,l);(!n.dataTransfer.files.length||!Tn||nB>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Wu?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Wu||n.dataTransfer.setData("text/plain",d),e.dragging=new MB(h,_B(e,n),o)};jn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Ln.dragover=Ln.dragenter=(e,t)=>t.preventDefault();Ln.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(sm(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",x=>{o=x(o,e,!1)}):o=vB(e,AB(n.dataTransfer),Wu?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&_B(e,n));if(e.someProp("handleDrop",x=>x(e,n,o||xe.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?KI(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(g))return;let y=d.doc.resolve(h);if(p&&Oe.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Oe(y));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,E,N)=>x=N),d.setSelection(LE(e,y,d.doc.resolve(x)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};jn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&es(e)},20))};jn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};jn.beforeinput=(e,t)=>{if(Tn&&Zi&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Uo(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Ln)jn[e]=Ln[e];function Zu(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Wh{constructor(t,n){this.toDOM=t,this.spec=n||ra,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Rn(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Wh&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Zu(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class to{constructor(t,n){this.attrs=t,this.spec=n||ra}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Rn(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof to&&Zu(this.attrs,t.attrs)&&Zu(this.spec,t.spec)}static is(t){return t.type instanceof to}destroy(){}}class qE{constructor(t,n){this.attrs=t,this.spec=n||ra}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Rn(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof qE&&Zu(this.attrs,t.attrs)&&Zu(this.spec,t.spec)}destroy(){}}class Rn{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Rn(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Rn(t,t,new Wh(n,r))}static inline(t,n,r,i){return new Rn(t,n,new to(r,i))}static node(t,n,r,i){return new Rn(t,n,new qE(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof to}get widget(){return this.type instanceof Wh}}const bl=[],ra={};class Ct{constructor(t,n){this.local=t.length?t:bl,this.children=n.length?n:bl}static create(t,n){return n.length?Xh(n,t,0,ra):kn}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==kn||t.maps.length==0?this:this.mapInner(t,n,0,0,r||ra)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?wX(this.children,o||[],t,n,r,i,s):o?new Ct(o.sort(ia),bl):kn}add(t,n){return n.length?this==kn?Ct.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=RB(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,Xh(h,l,d+1,ra)),s+=3}});let o=DB(s?OB(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Ct(o.length?this.local.concat(o).sort(ia):this.local,i||this.children)}remove(t){return t.length==0||this==kn?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=kn?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ct(i,r):kn}forChild(t,n){if(this==kn)return this;if(n.isLeaf)return Ct.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof to){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new Ct(i.sort(ia),bl);return r?new $s([l,r]):l}return r||kn}eq(t){if(this==t)return!0;if(!(t instanceof Ct)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return VE(this.localsInner(t))}localsInner(t){if(this==kn)return bl;if(t.inlineContent||!this.local.some(to.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof to||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Ct.empty=new Ct([],[]);Ct.removeOverlap=VE;const kn=Ct.empty;class $s{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,ra));return $s.from(r)}forChild(t,n){if(n.isLeaf)return Ct.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=kn&&(s instanceof $s?r=r.concat(s.members):r.push(s))}return $s.from(r)}eq(t){if(!(t instanceof $s)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?VE(r?n:n.sort(ia)):bl}static from(t){switch(t.length){case 0:return kn;case 1:return t[0];default:return new $s(t.every(n=>n instanceof Ct)?t:t.reduce((n,r)=>n.concat(r instanceof Ct?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function wX(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,y,x,S)=>{let w=S-x-(y-g);for(let E=0;E<l.length;E+=3){let N=l[E+1];if(N<0||g>N+h-p)continue;let k=l[E]+h-p;y>=k?l[E+1]=g<=k?-2:-1:g>=h&&w&&(l[E]+=w,l[E+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(e[d+1]+s,-1),y=g-i,{index:x,offset:S}=r.content.findIndex(p),w=r.maybeChild(x);if(w&&S==p&&S+w.nodeSize==y){let E=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);E!=kn?(l[d]=p,l[d+1]=y,l[d+2]=E):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=SX(l,e,t,n,i,s,o),h=Xh(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let y=h.children[p];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new Ct(t.sort(ia),l)}function DB(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Rn(i.from+t,i.to+t,i.type))}return n}function SX(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function RB(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function OB(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Xh(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=RB(e,l,u+n);if(d){s=!0;let h=Xh(d,l,n+u+1,r);h!=kn&&i.push(u,u+l.nodeSize,h)}});let o=DB(s?OB(e):e,-n).sort(ia);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ct(o,i):kn}function ia(e,t){return e.from-t.from||e.to-t.to}function VE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),Q_(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),Q_(t,i,r.copy(s.from,r.to)));break}}}return t}function Q_(e,t,n){for(;t<e.length&&ia(n,e[t])>0;)t++;e.splice(t,0,n)}function D0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=kn&&t.push(r)}),e.cursorWrapper&&t.push(Ct.create(e.state.doc,[e.cursorWrapper.deco])),$s.from(t)}const CX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},EX=Un&&Js<=11;class kX{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class NX{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new kX,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Un&&Js<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),EX&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,CX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(U_(this.view)){if(this.suppressingSelectionUpdates)return es(this.view);if(Un&&Js<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ua(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Bl(s))n.add(s);for(let s=t.anchorNode;s;s=Bl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&U_(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(Mr&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!p||MX(t,p)!=y)&&g.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&rm(r)&&(d=jE(t))&&d.eq($e.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,es(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),TX(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||es(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Un&&Js<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?bn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?bn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let J_=new WeakMap,eD=!1;function TX(e){if(!J_.has(e)&&(J_.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Mr,eD)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),eD=!0}}function tD(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return ua(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function AX(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return tD(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?tD(e,n):null}function MX(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function _X(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],rm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),Tn&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let E=r.childNodes[w-1],N=E.pmViewDesc;if(E.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let p=e.state.doc,g=e.someProp("domParser")||ku.fromSchema(e.state.schema),y=p.resolve(o),x=null,S=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:DX,context:y});if(d&&d[0].pos!=null){let w=d[0].pos,E=d[1]&&d[1].pos;E==null&&(E=w),x={anchor:w+o,head:E+o}}return{doc:S,sel:x,from:o,to:l}}function DX(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(On&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||On&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const RX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function OX(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let D=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,P=jE(e,D);if(P&&!e.state.selection.eq(P)){if(Tn&&Zi&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",V=>V(e,Uo(13,"Enter"))))return;let $=e.state.tr.setSelection(P);D=="pointer"?$.setMeta("pointer",!0):D=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),e.dispatch($)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=_X(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),g,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,y="end"):(g=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let x=PX(p.content,d.doc.content,d.from,g,y);if(x&&e.input.domChangeCount++,(zl&&e.input.lastIOSEnter>Date.now()-225||Zi)&&i.some(D=>D.nodeType==1&&!RX.test(D.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",D=>D(e,Uo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof Ve&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let D=nD(e,e.state.doc,d.sel);if(D&&!D.eq(e.state.selection)){let P=e.state.tr.setSelection(D);s&&P.setMeta("composition",s),e.dispatch(P)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ve&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Un&&Js<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let S=d.doc.resolveNoCache(x.start-d.from),w=d.doc.resolveNoCache(x.endB-d.from),E=h.resolve(x.start),N=S.sameParent(w)&&S.parent.inlineContent&&E.end()>=x.endA,k;if((zl&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!N&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(k=$e.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",D=>D(e,Uo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&LX(h,x.start,x.endA,S,w)&&e.someProp("handleKeyDown",D=>D(e,Uo(8,"Backspace")))){Zi&&Tn&&e.domObserver.suppressSelectionUpdates();return}Tn&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),Zi&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,w=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(D){return D(e,Uo(13,"Enter"))})},20));let T=x.start,A=x.endA,_=D=>{let P=D||e.state.tr.replace(T,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let $=nD(e,P.doc,d.sel);$&&!(Tn&&e.composing&&$.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&($.head==T||$.head==P.mapping.map(A)-1)||Un&&$.empty&&$.head==T)&&P.setSelection($)}return s&&P.setMeta("composition",s),P.scrollIntoView()},R;if(N){if(S.pos==w.pos){Un&&Js<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>es(e),20));let D=_(e.state.tr.delete(T,A)),P=h.resolve(x.start).marksAcross(h.resolve(x.endA));P&&D.ensureMarks(P),e.dispatch(D)}else if(x.endA==x.endB&&(R=jX(S.parent.content.cut(S.parentOffset,w.parentOffset),E.parent.content.cut(E.parentOffset,x.endA-E.start())))){let D=_(e.state.tr);R.type=="add"?D.addMark(T,A,R.mark):D.removeMark(T,A,R.mark),e.dispatch(D)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let D=S.parent.textBetween(S.parentOffset,w.parentOffset),P=()=>_(e.state.tr.insertText(D,T,A));e.someProp("handleTextInput",$=>$(e,T,A,D,P))||e.dispatch(P())}}else e.dispatch(_())}function nD(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:LE(e,t.resolve(n.anchor),t.resolve(n.head))}function jX(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(me.from(d).eq(e))return{mark:l,type:o}}function LX(e,t,n,r,i){if(n-t<=i.pos-r.pos||R0(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(R0(s,!0,!0));return!o.parent.isTextblock||o.pos>n||R0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function R0(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function PX(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&rD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&rD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function rD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class jB{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new tX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(lD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=oD(this),sD(this),this.nodeViews=aD(this),this.docView=B_(this.state.doc,iD(this),D0(this),this.dom,this),this.domObserver=new NX(this,(r,i,s,o)=>OX(this,r,i,s,o)),this.domObserver.start(),nX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&hC(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(lD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(TB(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=aD(this);BX(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&hC(this),this.editable=oD(this),sD(this);let u=D0(this),d=iD(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&gW(this);if(o){this.domObserver.stop();let y=p&&(Un||Tn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&IX(i.selection,t.selection);if(p){let x=Tn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=mX(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=B_(t.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&qW(this))?es(this,y):(mB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&yW(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Oe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&R_(this,n.getBoundingClientRect(),t)}else R_(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new MB(t.slice,t.move,i<0?void 0:Oe.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Un){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&vW(this.dom),es(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return CW(this,t)}coordsAtPos(t,n=1){return aB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return AW(this,n||this.state,t)}pasteHTML(t,n){return Xu(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Xu(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return PE(this,t)}destroy(){this.docView&&(rX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],D0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sW())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return sX(this,t)}domSelectionRange(){let t=this.domSelection();return t?On&&this.root.nodeType===11&&uW(this.dom.ownerDocument)==this.dom&&AX(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}jB.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function iD(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Rn.node(0,e.state.doc.content.size,t)]}function sD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Rn.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function oD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function IX(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function aD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function BX(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function lD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var oo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},zX=typeof navigator<"u"&&/Mac/.test(navigator.platform),qX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var xn=0;xn<10;xn++)oo[48+xn]=oo[96+xn]=String(xn);for(var xn=1;xn<=24;xn++)oo[xn+111]="F"+xn;for(var xn=65;xn<=90;xn++)oo[xn]=String.fromCharCode(xn+32),Zh[xn]=String.fromCharCode(xn);for(var O0 in oo)Zh.hasOwnProperty(O0)||(Zh[O0]=oo[O0]);function VX(e){var t=zX&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||qX&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Zh:oo)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const HX=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),FX=typeof navigator<"u"&&/Win/.test(navigator.platform);function UX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))HX?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function $X(e){let t=Object.create(null);for(let n in e)t[UX(n)]=e[n];return t}function j0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function GX(e){return new jt({props:{handleKeyDown:LB(e)}})}function LB(e){let t=$X(e);return function(n,r){let i=VX(r),s,o=t[j0(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[j0(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(FX&&r.ctrlKey&&r.altKey)&&(s=oo[r.keyCode])&&s!=i){let l=t[j0(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const HE=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function PB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const IB=(e,t,n)=>{let r=PB(e,n);if(!r)return!1;let i=FE(r);if(!i){let o=r.blockRange(),l=o&&Zl(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(GB(e,i,t,-1))return!0;if(r.parent.content.size==0&&(ql(s,"end")||Oe.isSelectable(s)))for(let o=r.depth;;o--){let l=tm(e.doc,r.before(o),r.after(o),xe.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(ql(s,"end")?$e.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Oe.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},KX=(e,t,n)=>{let r=PB(e,n);if(!r)return!1;let i=FE(r);return i?BB(e,i,t):!1},YX=(e,t,n)=>{let r=qB(e,n);if(!r)return!1;let i=UE(r);return i?BB(e,i,t):!1};function BB(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=tm(e.doc,s,u,xe.empty);if(!d||d.from!=s||d instanceof ln&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(Ve.create(h.doc,s)),n(h.scrollIntoView())}return!0}function ql(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const zB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=FE(r)}let o=s&&s.nodeBefore;return!o||!Oe.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Oe.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function FE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function qB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const VB=(e,t,n)=>{let r=qB(e,n);if(!r)return!1;let i=UE(r);if(!i)return!1;let s=i.nodeAfter;if(GB(e,i,t,1))return!0;if(r.parent.content.size==0&&(ql(s,"start")||Oe.isSelectable(s))){let o=tm(e.doc,r.before(),r.after(),xe.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(ql(s,"start")?$e.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Oe.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},HB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=UE(r)}let o=s&&s.nodeAfter;return!o||!Oe.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Oe.create(e.doc,s.pos)).scrollIntoView()),!0)};function UE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const WX=(e,t)=>{let n=e.selection,r=n instanceof Oe,i;if(r){if(n.node.isTextblock||!uo(e.doc,n.from))return!1;i=n.from}else if(i=em(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Oe.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},XX=(e,t)=>{let n=e.selection,r;if(n instanceof Oe){if(n.node.isTextblock||!uo(e.doc,n.to))return!1;r=n.to}else if(r=em(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},ZX=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Zl(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},FB=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function $E(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const QX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=$E(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection($e.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},UB=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof ar||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=$E(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ve.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},$B=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Ji(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Zl(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function JX(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Oe&&t.selection.node.isBlock)return!r.parentOffset||!Ji(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){u=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),l=$E(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),s.unshift(u&&l?{type:l}:null),o=y;break}else{if(y==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Ve||t.selection instanceof ar)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=Ji(h.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=Ji(h.doc,p,s.length,s)),!g)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let y=h.mapping.map(r.before(o)),x=h.doc.resolve(y);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const eZ=JX(),tZ=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Oe.create(e.doc,i))),!0)};function nZ(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||uo(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function GB(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&nZ(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let y=t.pos+s.nodeSize,x=me.empty;for(let E=o.length-1;E>=0;E--)x=me.from(o[E].create(null,x));x=me.from(i.copy(x));let S=e.tr.step(new cn(t.pos-1,y,t.pos,y,new xe(x,1,0),o.length,!0)),w=S.doc.resolve(y+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&uo(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:$e.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),g=p&&Zl(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(d&&ql(s,"start",!0)&&ql(i,"end")){let y=i,x=[];for(;x.push(y),!y.isTextblock;)y=y.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,S.content)){if(n){let E=me.empty;for(let k=x.length-1;k>=0;k--)E=me.from(x[k].copy(E));let N=e.tr.step(new cn(t.pos-x.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new xe(E,x.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function KB(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ve.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const rZ=KB(-1),iZ=KB(1);function sZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&DE(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function cD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function GE(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}GE(HE,IB,zB);GE(HE,VB,HB);GE(FB,UB,$B,eZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function oZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return aZ(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function aZ(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new Uh(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new Uh(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=DE(s,n,r,t);return l?(e&&lZ(e,t,l,i,n),!0):!1}function lZ(e,t,n,r,i){let s=me.empty;for(let h=n.length-1;h>=0;h--)s=me.from(n[h].type.create(n[h].attrs,s));e.step(new cn(t.start-(r?2:0),t.end,t.start,t.end,new xe(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,g=!0;h<p;h++,g=!1)!g&&Ji(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function cZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?uZ(t,n,e,s):dZ(t,n,s):!0:!1}}function uZ(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new cn(s-1,o,s,o,new xe(me.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Uh(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Zl(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return uo(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function dZ(e,t,n){let r=e.tr,i=n.parent;for(let y=n.end,x=n.endIndex-1,S=n.startIndex;x>S;x--)y-=i.child(x).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?me.empty:me.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new cn(p-(l?1:0),g+(u?1:0),p+1,g-1,new xe((l?me.empty:me.from(i.copy(me.empty))).append(u?me.empty:me.from(i.copy(me.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function fZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=me.from(d?e.create():null),p=new xe(me.from(e.create(null,me.from(l.type.create(null,h)))),d?3:1,0),g=s.start,y=s.end;n(t.tr.step(new cn(g-(d?3:1),y,g,y,p,1,!0)).scrollIntoView())}return!0}}var hZ=Object.defineProperty,YB=(e,t)=>{for(var n in t)hZ(e,n,{get:t[n],enumerable:!0})};function om(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var am=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...x)=>{const S=this.buildProps(u,t),w=g(...x)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:om({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},pZ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function WB(e,t){const n=new QI(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var XB=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&XB(r)}return e};function Jf(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return XB(n)}function Qu(e,t,n){if(e instanceof Qs||e instanceof me)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return me.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Qu("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new PI({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?ku.fromSchema(u).parseSlice(Jf(e),n.parseOptions):ku.fromSchema(u).parse(Jf(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=ku.fromSchema(t);return n.slice?s.parseSlice(Jf(e),n.parseOptions).content:s.parse(Jf(e),n.parseOptions)}return Qu("",t,n)}function pC(e,t,n={},r={}){return Qu(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function mZ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function gZ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function yZ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function lm(e){return t=>yZ(t.$from,e)}function De(e,t,n){return e.config[t]===void 0&&e.parent?De(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?De(e.parent,t,n):null}):e.config[t]}function KE(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=De(t,"addExtensions",n);return r?[t,...KE(r())]:t}).flat(10)}function YE(e,t){const n=Sa.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function ZB(e){return typeof e=="function"}function ot(e,t=void 0,...n){return ZB(e)?t?e.bind(t)(...n):e(...n):e}function vZ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Ju(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function QB(e){const t=[],{nodeExtensions:n,markExtensions:r}=Ju(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=De(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,y])=>{t.push({type:p,name:g,attribute:{...s,...y}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=De(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function $t(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Qh(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>$t(n,r),{})}function bZ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function uD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):bZ(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function dD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&vZ(n)?!1:n!=null))}function xZ(e,t){var n;const r=QB(e),{nodeExtensions:i,markExtensions:s}=Ju(e),o=(n=i.find(d=>De(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(E=>E.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((E,N)=>{const k=De(N,"extendNodeSchema",p);return{...E,...k?k(d):{}}},{}),y=dD({...g,content:ot(De(d,"content",p)),marks:ot(De(d,"marks",p)),group:ot(De(d,"group",p)),inline:ot(De(d,"inline",p)),atom:ot(De(d,"atom",p)),selectable:ot(De(d,"selectable",p)),draggable:ot(De(d,"draggable",p)),code:ot(De(d,"code",p)),whitespace:ot(De(d,"whitespace",p)),linebreakReplacement:ot(De(d,"linebreakReplacement",p)),defining:ot(De(d,"defining",p)),isolating:ot(De(d,"isolating",p)),attrs:Object.fromEntries(h.map(E=>{var N,k;return[E.name,{default:(N=E?.attribute)==null?void 0:N.default,validate:(k=E?.attribute)==null?void 0:k.validate}]}))}),x=ot(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(E=>uD(E,h)));const S=De(d,"renderHTML",p);S&&(y.toDOM=E=>S({node:E,HTMLAttributes:Qh(E,h)}));const w=De(d,"renderText",p);return w&&(y.toText=w),[d.name,y]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((w,E)=>{const N=De(E,"extendMarkSchema",p);return{...w,...N?N(d):{}}},{}),y=dD({...g,inclusive:ot(De(d,"inclusive",p)),excludes:ot(De(d,"excludes",p)),group:ot(De(d,"group",p)),spanning:ot(De(d,"spanning",p)),code:ot(De(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var E,N;return[w.name,{default:(E=w?.attribute)==null?void 0:E.default,validate:(N=w?.attribute)==null?void 0:N.validate}]}))}),x=ot(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(w=>uD(w,h)));const S=De(d,"renderHTML",p);return S&&(y.toDOM=w=>S({mark:w,HTMLAttributes:Qh(w,h)})),[d.name,y]}));return new PI({topNode:o,nodes:l,marks:u})}function wZ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function WE(e){return e.sort((n,r)=>{const i=De(n,"priority")||100,s=De(r,"priority")||100;return i>s?-1:i<s?1:0})}function JB(e){const t=WE(KE(e)),n=wZ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function e6(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var g;u.isBlock&&d>r&&(l+=s);const y=o?.[u.type.name];if(y)return h&&(l+=y({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(g=u?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),l}function SZ(e,t){const n={from:0,to:e.content.size};return e6(e,n,t)}function t6(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function ss(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function n6(e,t){const n=ss(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Gt(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function CZ(e,t){const n=Gt(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function cm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function r6(e,t){const n=cm(typeof t=="string"?t:t.name,e.schema);return n==="node"?CZ(e,t):n==="mark"?n6(e,t):{}}function EZ(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function kZ(e){const t=EZ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function i6(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),g=t.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:h}})})}),kZ(r)}function XE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Jh(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:XE(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function s6(e,t,n={}){return e.find(r=>r.type===t&&Jh(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function fD(e,t,n={}){return!!s6(e,t,n)}function ZE(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!s6([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&fD([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&fD([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function QE(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=ZE(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var NZ=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function L0(e,t){return t.nodes[e]||t.marks[e]||null}function Ch(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var TZ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function mC(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?ss(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Jh(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,x=g.pos;e.doc.nodesBetween(y,x,(S,w)=>{if(!S.isText&&!S.marks.length)return;const E=Math.max(y,w),N=Math.min(x,w+S.nodeSize),k=N-E;o+=k,l.push(...S.marks.map(T=>({mark:T,from:E,to:N})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Jh(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=o}function ao(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Gt(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),x=Math.min(i,g+p.nodeSize);l.push({node:p,from:y,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Jh(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}function AZ(e,t,n={}){if(!t)return ao(e,null,n)||mC(e,null,n);const r=cm(t,e.schema);return r==="node"?ao(e,t,n):r==="mark"?mC(e,t,n):!1}var MZ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=lm(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},_Z=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function hD(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function pD(e,t){const{nodeExtensions:n}=Ju(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=ot(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function um(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(um(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function o6(e){return e instanceof Oe}function a6(e){return e instanceof Ve}function Wo(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function l6(e,t=null){if(!t)return null;const n=$e.atStart(e),r=$e.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ve.create(e,Wo(0,i,s),Wo(e.content.size,i,s)):Ve.create(e,Wo(t,i,s),Wo(t,i,s))}function DZ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof ln||i instanceof cn))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection($e.near(e.doc.resolve(o),n))}var dm=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},RZ=(e,t)=>{if(XE(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function eh(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=TZ(d)+s;return o.forEach(g=>{if(h)return;const y=RZ(p,g.find);if(!y)return;const x=u.state.tr,S=om({state:u.state,transaction:x}),w={from:r-(y[0].length-s.length),to:i},{commands:E,chain:N,can:k}=new am({editor:n,state:S});g.handler({state:S,range:w,match:y,commands:E,chain:N,can:k})===null||!x.steps.length||(g.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),h=!0)}),h}function OZ(e){const{editor:t,rules:n}=e,r=new jt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=YE(me.from(h),o.schema);const{from:p}=u,g=p+h.length;eh({editor:t,from:p,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return eh({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&eh({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?eh({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function jZ(e){return Object.prototype.toString.call(e).slice(8,-1)}function th(e){return jZ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function c6(e,t){const n={...e};return th(e)&&th(t)&&Object.keys(t).forEach(r=>{th(t[r])&&th(e[r])?n[r]=c6(e[r],t[r]):n[r]=t[r]}),n}var JE=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...ot(De(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ot(De(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>c6(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Ca=class u6 extends JE{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new u6(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function LZ(e){return typeof e=="number"}var PZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},IZ=(e,t,n)=>{if(XE(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function BZ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new am({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,x)=>{var S,w,E,N,k;if((w=(S=y.type)==null?void 0:S.spec)!=null&&w.code||!(y.isText||y.isTextblock||y.isInline))return;const T=(k=(N=(E=y.content)==null?void 0:E.size)!=null?N:y.nodeSize)!=null?k:0,A=Math.max(r,x),_=Math.min(i,x+T);if(A>=_)return;const R=y.isText?y.text||"":y.textBetween(A-x,_-x,void 0,"");IZ(R,s.find,o).forEach(P=>{if(P.index===void 0)return;const $=A+P.index+1,V=$+P[0].length,B={from:n.tr.mapping.map($),to:n.tr.mapping.map(V)},G=s.handler({state:n,range:B,match:P,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(G)})}),p.every(y=>y!==null)}var nh=null,zZ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function qZ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:g,rule:y,pasteEvt:x})=>{const S=h.tr,w=om({state:h,transaction:S});if(!(!BZ({editor:t,state:w,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:x,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new jt({view(p){const g=x=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(x.target)?p.dom.parentElement:null,r&&(nh=t)},y=()=>{nh&&(nh=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const y=nh;y?.isEditable&&setTimeout(()=>{const x=y.state.selection;x&&y.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,g)=>{var y;const x=(y=g.clipboardData)==null?void 0:y.getData("text/html");return o=g,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,y)=>{const x=p[0],S=x.getMeta("uiEvent")==="paste"&&!i,w=x.getMeta("uiEvent")==="drop"&&!s,E=x.getMeta("applyPasteRules"),N=!!E;if(!S&&!w&&!N)return;if(N){let{text:A}=E;typeof A=="string"?A=A:A=YE(me.from(A),y.schema);const{from:_}=E,R=_+A.length,D=zZ(A);return u({rule:h,state:y,from:_,to:{b:R},pasteEvt:D})}const k=g.doc.content.findDiffStart(y.doc.content),T=g.doc.content.findDiffEnd(y.doc.content);if(!(!LZ(k)||!T||k===T.b))return u({rule:h,state:y,from:k,to:T,pasteEvt:o})}}))}var fm=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=JB(e),this.schema=xZ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:L0(t.name,this.schema)},r=De(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return WE([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:L0(r.name,this.schema)},s=[],o=De(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&De(r,"exitable",i)&&(l.ArrowRight=()=>Ca.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([y,x])=>[y,()=>x({editor:e})]));l={...l,...g}}const u=GX(l);s.push(u);const d=De(r,"addInputRules",i);if(hD(r,e.options.enableInputRules)&&d){const g=d();if(g&&g.length){const y=OZ({editor:e,rules:g}),x=Array.isArray(y)?y:[y];s.push(...x)}}const h=De(r,"addPasteRules",i);if(hD(r,e.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=qZ({editor:e,rules:g});s.push(...y)}}const p=De(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return QB(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Ju(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Gt(n.name,this.schema)},s=De(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const g=Qh(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Ju(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:ss(n.name,this.schema)},s=De(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=Qh(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{nJ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:L0(t.name,this.schema)};t.type==="mark"&&((n=ot(De(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=De(t,"onBeforeCreate",r),s=De(t,"onCreate",r),o=De(t,"onUpdate",r),l=De(t,"onSelectionUpdate",r),u=De(t,"onTransaction",r),d=De(t,"onFocus",r),h=De(t,"onBlur",r),p=De(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};fm.resolve=JB;fm.sort=WE;fm.flatten=KE;var VZ={};YB(VZ,{ClipboardTextSerializer:()=>f6,Commands:()=>m6,Delete:()=>g6,Drop:()=>y6,Editable:()=>v6,FocusEvents:()=>x6,Keymap:()=>w6,Paste:()=>S6,Tabindex:()=>C6,focusEventsPluginKey:()=>b6});var Bt=class d6 extends JE{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new d6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},f6=Bt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new jt({key:new dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=t6(n);return e6(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),h6={};YB(h6,{blur:()=>HZ,clearContent:()=>FZ,clearNodes:()=>UZ,command:()=>$Z,createParagraphNear:()=>GZ,cut:()=>KZ,deleteCurrentNode:()=>YZ,deleteNode:()=>WZ,deleteRange:()=>XZ,deleteSelection:()=>ZZ,enter:()=>QZ,exitCode:()=>JZ,extendMarkRange:()=>eQ,first:()=>tQ,focus:()=>rQ,forEach:()=>iQ,insertContent:()=>sQ,insertContentAt:()=>aQ,joinBackward:()=>uQ,joinDown:()=>cQ,joinForward:()=>dQ,joinItemBackward:()=>fQ,joinItemForward:()=>hQ,joinTextblockBackward:()=>pQ,joinTextblockForward:()=>mQ,joinUp:()=>lQ,keyboardShortcut:()=>yQ,lift:()=>vQ,liftEmptyBlock:()=>bQ,liftListItem:()=>xQ,newlineInCode:()=>wQ,resetAttributes:()=>SQ,scrollIntoView:()=>CQ,selectAll:()=>EQ,selectNodeBackward:()=>kQ,selectNodeForward:()=>NQ,selectParentNode:()=>TQ,selectTextblockEnd:()=>AQ,selectTextblockStart:()=>MQ,setContent:()=>_Q,setMark:()=>RQ,setMeta:()=>OQ,setNode:()=>jQ,setNodeSelection:()=>LQ,setTextSelection:()=>PQ,sinkListItem:()=>IQ,splitBlock:()=>BQ,splitListItem:()=>zQ,toggleList:()=>qQ,toggleMark:()=>VQ,toggleNode:()=>HQ,toggleWrap:()=>FQ,undoInputRule:()=>UQ,unsetAllMarks:()=>$Q,unsetMark:()=>GQ,updateAttributes:()=>KQ,wrapIn:()=>YQ,wrapInList:()=>WQ});var HZ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),FZ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),UZ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),g=d.resolve(h.map(u+l.nodeSize)),y=p.blockRange(g);if(!y)return;const x=Zl(y);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(y.start,S)}(x||x===0)&&t.lift(y,x)})}),!0},$Z=e=>t=>e(t),GZ=()=>({state:e,dispatch:t})=>UB(e,t),KZ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ve(r.doc.resolve(Math.max(o-1,0)))),!0},YZ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},WZ=e=>({tr:t,state:n,dispatch:r})=>{const i=Gt(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},XZ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},ZZ=()=>({state:e,dispatch:t})=>HE(e,t),QZ=()=>({commands:e})=>e.keyboardShortcut("Enter"),JZ=()=>({state:e,dispatch:t})=>QX(e,t),eQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=ss(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=ZE(u,s,t);if(p&&p.from<=d&&p.to>=h){const g=Ve.create(o,p.from,p.to);n.setSelection(g)}}return!0},tQ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function nQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ek(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var rQ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(ek()||nQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!a6(n.state.selection))return o(),!0;const l=l6(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},iQ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),sQ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),oQ=e=>!("type"in e),aQ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Qu(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=Qu(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,y=!0;if((oQ(l)?l:[l]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),h===p&&y){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof me){let w="";t.forEach(E=>{E.text&&(w+=E.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),E=w.node(),N=w.parentOffset===0,k=E.isText||E.isTextblock,T=E.content.size>0;N&&k&&T&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&DZ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},lQ=()=>({state:e,dispatch:t})=>WX(e,t),cQ=()=>({state:e,dispatch:t})=>XX(e,t),uQ=()=>({state:e,dispatch:t})=>IB(e,t),dQ=()=>({state:e,dispatch:t})=>VB(e,t),fQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=em(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},hQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=em(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},pQ=()=>({state:e,dispatch:t})=>KX(e,t),mQ=()=>({state:e,dispatch:t})=>YX(e,t);function p6(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function gQ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))ek()||p6()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var yQ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=gQ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},vQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return ao(n,i,t)?ZX(n,r):!1},bQ=()=>({state:e,dispatch:t})=>$B(e,t),xQ=e=>({state:t,dispatch:n})=>{const r=Gt(e,t.schema);return cZ(r)(t,n)},wQ=()=>({state:e,dispatch:t})=>FB(e,t);function mD(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var SQ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=cm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Gt(e,r.schema)),l==="mark"&&(o=ss(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,mD(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(mD(p.attrs,t)))})})}),!0):!1},CQ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),EQ=()=>({tr:e,dispatch:t})=>{if(t){const n=new ar(e.doc);e.setSelection(n)}return!0},kQ=()=>({state:e,dispatch:t})=>zB(e,t),NQ=()=>({state:e,dispatch:t})=>HB(e,t),TQ=()=>({state:e,dispatch:t})=>tZ(e,t),AQ=()=>({state:e,dispatch:t})=>iZ(e,t),MQ=()=>({state:e,dispatch:t})=>rZ(e,t),_Q=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=pC(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function DQ(e,t,n){var r;const{selection:i}=t;let s=null;if(a6(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,g)=>{if(d)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(n),x=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=y&&x}return!d}),d})}var RQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=ss(e,r.schema);if(i)if(o){const d=n6(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(g,y)=>{const x=Math.max(y,h),S=Math.min(y+g.nodeSize,p);g.marks.find(E=>E.type===u)?g.marks.forEach(E=>{u===E.type&&n.addMark(x,S,u.create({...E.attrs,...t}))}):n.addMark(x,S,u.create(t))})});return DQ(r,n,u)},OQ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),jQ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Gt(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>cD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>cD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},LQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Wo(e,0,r.content.size),s=Oe.create(r,i);t.setSelection(s)}return!0},PQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ve.atStart(r).from,l=Ve.atEnd(r).to,u=Wo(i,o,l),d=Wo(s,o,l),h=Ve.create(r,u,d);t.setSelection(h)}return!0},IQ=e=>({state:t,dispatch:n})=>{const r=Gt(e,t.schema);return fZ(r)(t,n)};function gD(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var BQ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=Ch(d,l.node().type.name,l.node().attrs);if(s instanceof Oe&&s.node.isBlock)return!l.parentOffset||!Ji(o,l.pos)?!1:(r&&(e&&gD(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=l.depth===0?void 0:mZ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&g?[{type:g,attrs:h}]:void 0,x=Ji(t.doc,t.mapping.map(l.pos),1,y);if(!y&&!x&&Ji(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(x=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(x&&(s instanceof Ve&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,y),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&gD(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},zQ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Gt(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let E=me.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let D=u.depth-N;D>=u.depth-3;D-=1)E=me.from(u.node(D).copy(E));const k=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,T={...Ch(g,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(T))||void 0;E=E.append(me.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(N-1));n.replace(_,u.after(-k),new xe(E,4-N,0));let R=-1;n.doc.nodesBetween(_,n.doc.content.size,(D,P)=>{if(R>-1)return!1;D.isTextblock&&D.content.size===0&&(R=P+1)}),R>-1&&n.setSelection(Ve.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const y=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...Ch(g,p.type.name,p.attrs),...t},S={...Ch(g,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=y?[{type:l,attrs:x},{type:y,attrs:S}]:[{type:l,attrs:x}];if(!Ji(n.doc,u.pos,2))return!1;if(i){const{selection:E,storedMarks:N}=r,{splittableMarks:k}=s.extensionManager,T=N||E.$to.parentOffset&&E.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!T||!i)return!0;const A=T.filter(_=>k.includes(_.type.name));n.ensureMarks(A)}return!0},P0=(e,t)=>{const n=lm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&uo(e.doc,n.pos)&&e.join(n.pos),!0},I0=(e,t)=>{const n=lm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&uo(e.doc,r)&&e.join(r),!0},qQ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,y=Gt(e,o.schema),x=Gt(t,o.schema),{selection:S,storedMarks:w}=o,{$from:E,$to:N}=S,k=E.blockRange(N),T=w||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const A=lm(_=>pD(_.type.name,p))(S);if(k.depth>=1&&A&&k.depth-A.depth<=1){if(A.node.type===y)return d.liftListItem(x);if(pD(A.node.type.name,p)&&y.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,y),!0)).command(()=>P0(s,y)).command(()=>I0(s,y)).run()}return!n||!T||!l?u().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>P0(s,y)).command(()=>I0(s,y)).run():u().command(()=>{const _=h().wrapInList(y,r),R=T.filter(D=>g.includes(D.type.name));return s.ensureMarks(R),_?!0:d.clearNodes()}).wrapInList(y,r).command(()=>P0(s,y)).command(()=>I0(s,y)).run()},VQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=ss(e,r.schema);return mC(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},HQ=(e,t,n={})=>({state:r,commands:i})=>{const s=Gt(e,r.schema),o=Gt(t,r.schema),l=ao(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},FQ=(e,t={})=>({state:n,commands:r})=>{const i=Gt(e,n.schema);return ao(n,i,t)?r.lift(i):r.wrapIn(i,t)},UQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},$Q=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},GQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=ss(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:y}=l;const x=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=ZE(d,u,x);S&&(g=S.from,y=S.to),n.removeMark(g,y,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},KQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=cm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Gt(e,r.schema)),l==="mark"&&(o=ss(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,g,y,x;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(E=>{if(o===E.type){const N=Math.max(w,d),k=Math.min(w+S.nodeSize,h);n.addMark(N,k,o.create({...E.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(y,x,o.create({...S.attrs,...t}))}))}),!0):!1},YQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return sZ(i,t)(n,r)},WQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return oZ(i,t)(n,r)},m6=Bt.create({name:"commands",addCommands(){return{...h6}}}),g6=Bt.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=WB(e.before,[e,...t]);i6(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(x,S)=>{const w=S+x.nodeSize-2,E=y.oldRange.from<=S&&w<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:y.oldRange,newRange:y.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,x)=>{var S,w;if(y instanceof Kr){const E=g.slice(x).map(y.from,-1),N=g.slice(x).map(y.to),k=g.invert().map(E,-1),T=g.invert().map(N),A=(S=h.doc.nodeAt(E-1))==null?void 0:S.marks.some(R=>R.eq(y.mark)),_=(w=h.doc.nodeAt(N))==null?void 0:w.marks.some(R=>R.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:k,to:T},newRange:{from:E,to:N},partial:!!(_||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),y6=Bt.create({name:"drop",addProseMirrorPlugins(){return[new jt({key:new dn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),v6=Bt.create({name:"editable",addProseMirrorPlugins(){return[new jt({key:new dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),b6=new dn("focusEvents"),x6=Bt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new jt({key:b6,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),w6=Bt.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:g,parent:y}=p,x=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=x.parent.type.spec.isolating,w=p.pos-p.parentOffset,E=S&&x.parent.childCount===1?w===p.pos:$e.atStart(d).from===g;return!h||!y.type.isTextblock||y.textContent.length||!E||E&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ek()||p6()?s:i},addProseMirrorPlugins(){return[new jt({key:new dn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=$e.atStart(t.doc).from,d=$e.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!um(n.doc))return;const g=n.tr,y=om({state:n,transaction:g}),{commands:x}=new am({editor:this.editor,state:y});if(x.clearNodes(),!!g.steps.length)return g}})]}}),S6=Bt.create({name:"paste",addProseMirrorPlugins(){return[new jt({key:new dn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),C6=Bt.create({name:"tabindex",addProseMirrorPlugins(){return[new jt({key:new dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),XQ=class xl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new xl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new xl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new xl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new xl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new xl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},ZQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function QQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var JQ=class extends pZ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=l6(t,this.options.autofocus);this.editorState=Tl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=QQ(ZQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=ZB(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[v6,f6.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),m6,x6,w6,C6,y6,S6,g6].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new fm(r,this)}createCommandManager(){this.commandManager=new am({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=pC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=pC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new jB(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return r6(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return AZ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return YE(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return SZ(this.state.doc,{blockSeparator:t,textSerializers:{...t6(this.schema),...n}})}get isEmpty(){return um(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new XQ(t,this)}get $doc(){return this.$pos(0)}};function Vl(e){return new dm({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ot(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(QE(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(S=>S===e.type&&S!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const g=n.from+u+o.length;s.addMark(n.from+u,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function eJ(e){return new dm({find:e.find,handler:({state:t,range:n,match:r})=>{const i=ot(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function gC(e){return new dm({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=ot(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Hl(e){return new dm({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=ot(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&DE(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:y}=e.editor.extensionManager,x=g||p.$to.parentOffset&&p.$from.marks();if(x){const S=x.filter(w=>y.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&uo(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function tJ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Oe){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function nJ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let g=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(g=!0)}),g){const y=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,y)}}),s.docChanged&&t.view.dispatch(s)}var cr=class E6 extends JE{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new E6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function fa(e){return new PZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=ot(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),g=p+l.length;if(QE(n.from,n.to,t.doc).filter(x=>x.mark.type.excluded.find(w=>w===e.type&&w!==x.mark.type)).filter(x=>x.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var B0,yD;function rJ(){return yD||(yD=1,B0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),B0}var iJ=rJ();const sJ=hd(iJ);var z0={exports:{}},q0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD;function oJ(){if(vD)return q0;vD=1;var e=pd(),t=bI();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return q0.useSyncExternalStoreWithSelector=function(d,h,p,g,y){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function E(_){if(!N){if(N=!0,k=_,_=g(_),y!==void 0&&S.hasValue){var R=S.value;if(y(R,_))return T=R}return T=_}if(R=T,r(k,_))return R;var D=g(_);return y!==void 0&&y(R,D)?(k=_,R):(k=_,T=D)}var N=!1,k,T,A=p===void 0?null:p;return[function(){return E(h())},A===null?void 0:function(){return E(A())}]},[h,p,g,y]);var w=i(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},q0}var bD;function aJ(){return bD||(bD=1,z0.exports=oJ()),z0.exports}var k6=aJ();const lJ=hd(k6);var cJ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},uJ=({contentComponent:e})=>{const t=xI.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(t)})};function dJ(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:FC.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var fJ=class extends Re.Component{constructor(e){var t;super(e),this.editorContentRef=Re.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=dJ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:cJ(t,this.editorContentRef),...n}),e?.contentComponent&&v.jsx(uJ,{contentComponent:e.contentComponent})]})}},hJ=O.forwardRef((e,t)=>{const n=Re.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Re.createElement(fJ,{key:n,innerRef:t,...e})}),xD=Re.memo(hJ),pJ=typeof window<"u"?O.useLayoutEffect:O.useEffect,mJ=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function gJ(e){var t;const[n]=O.useState(()=>new mJ(e.editor)),r=k6.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:sJ);return pJ(()=>n.watch(e.editor),[e.editor,n]),O.useDebugValue(r),r}var yJ=!1,yC=typeof window>"u",vJ=yC||!!(typeof window<"u"&&window.next),bJ=class N6{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?yC||vJ?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new JQ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?N6.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function xJ(e={},t=[]){const n=O.useRef(e);n.current=e;const[r]=O.useState(()=>new bJ(n)),i=xI.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(t)),gJ({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var wJ=O.createContext({editor:null});wJ.Consumer;var SJ=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),CJ=()=>O.useContext(SJ);Re.forwardRef((e,t)=>{const{onDragStart:n}=CJ(),r=e.as||"div";return v.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Re.createContext({markViewContentRef:()=>{}});var ep=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},EJ=/^\s*>\s$/,kJ=cr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return ep("blockquote",{...$t(this.options.HTMLAttributes,e),children:ep("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Hl({find:EJ,type:this.type})]}}),NJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,TJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,AJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,MJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,_J=Ca.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return ep("strong",{...$t(this.options.HTMLAttributes,e),children:ep("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Vl({find:NJ,type:this.type}),Vl({find:AJ,type:this.type})]},addPasteRules(){return[fa({find:TJ,type:this.type}),fa({find:MJ,type:this.type})]}}),DJ=/(^|[^`])`([^`]+)`(?!`)$/,RJ=/(^|[^`])`([^`]+)`(?!`)/g,OJ=Ca.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Vl({find:DJ,type:this.type})]},addPasteRules(){return[fa({find:RJ,type:this.type})]}}),jJ=/^```([a-z]+)?[\s\n]$/,LJ=/^~~~([a-z]+)?[\s\n]$/,PJ=cr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",$t(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let g=0,y=0;const x=l-u;for(let T=0;T<p.length;T+=1){if(y+p[T].length>=x){g=T;break}y+=p[T].length+1}const w=((o=p[g].match(/^ */))==null?void 0:o[0])||"",E=Math.min(w.length,this.options.tabSize);if(E===0)return!0;let N=u;for(let T=0;T<g;T+=1)N+=p[T].length+1;return s.delete(N,N+E),l-N<=E&&s.setSelection(Ve.create(s.doc,N)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const y=((g=p.match(/^ */))==null?void 0:g[0])||"",x=Math.min(y.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection($e.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[gC({find:jJ,type:this.type,getAttributes:e=>({language:e[1]})}),gC({find:LJ,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new jt({key:new dn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ve.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),IJ=cr.create({name:"doc",topNode:!0,content:"block+"}),BJ=cr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",$t(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(g=>l.includes(g.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),T6=cr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>gC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),zJ=T6,qJ=cr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",$t(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!tJ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return o6(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ve.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Oe.create(s.doc,u.pos)):s.setSelection(Ve.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(Ve.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[eJ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),VJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,HJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,FJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,UJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,$J=Ca.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Vl({find:VJ,type:this.type}),Vl({find:FJ,type:this.type})]},addPasteRules(){return[fa({find:HJ,type:this.type}),fa({find:UJ,type:this.type})]}});const GJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",KJ="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",vC="numeric",bC="ascii",xC="alpha",Mu="asciinumeric",hu="alphanumeric",wC="domain",A6="emoji",YJ="scheme",WJ="slashscheme",V0="whitespace";function XJ(e,t){return e in t||(t[e]=[]),t[e]}function Xo(e,t,n){t[vC]&&(t[Mu]=!0,t[hu]=!0),t[bC]&&(t[Mu]=!0,t[xC]=!0),t[Mu]&&(t[hu]=!0),t[xC]&&(t[hu]=!0),t[hu]&&(t[wC]=!0),t[A6]&&(t[wC]=!0);for(const r in t){const i=XJ(r,n);i.indexOf(e)<0&&i.push(e)}}function ZJ(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Vn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Vn.groups={};Vn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Vn.groups;let i;return t&&t.j?i=t:(i=new Vn(t),n&&r&&Xo(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Vn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Vn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Vn,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(ZJ(o.t,r),n);Xo(s,u,r)}else n&&Xo(s,n,r);o.t=s}return i.j[e]=o,o}};const Ge=(e,t,n,r,i)=>e.ta(t,n,r,i),Dt=(e,t,n,r,i)=>e.tr(t,n,r,i),wD=(e,t,n,r,i)=>e.ts(t,n,r,i),ye=(e,t,n,r,i)=>e.tt(t,n,r,i),Wi="WORD",SC="UWORD",M6="ASCIINUMERICAL",_6="ALPHANUMERICAL",ed="LOCALHOST",CC="TLD",EC="UTLD",Eh="SCHEME",wl="SLASH_SCHEME",tk="NUM",kC="WS",nk="NL",_u="OPENBRACE",Du="CLOSEBRACE",tp="OPENBRACKET",np="CLOSEBRACKET",rp="OPENPAREN",ip="CLOSEPAREN",sp="OPENANGLEBRACKET",op="CLOSEANGLEBRACKET",ap="FULLWIDTHLEFTPAREN",lp="FULLWIDTHRIGHTPAREN",cp="LEFTCORNERBRACKET",up="RIGHTCORNERBRACKET",dp="LEFTWHITECORNERBRACKET",fp="RIGHTWHITECORNERBRACKET",hp="FULLWIDTHLESSTHAN",pp="FULLWIDTHGREATERTHAN",mp="AMPERSAND",gp="APOSTROPHE",yp="ASTERISK",Fs="AT",vp="BACKSLASH",bp="BACKTICK",xp="CARET",Gs="COLON",rk="COMMA",wp="DOLLAR",ui="DOT",Sp="EQUALS",ik="EXCLAMATION",Sr="HYPHEN",Ru="PERCENT",Cp="PIPE",Ep="PLUS",kp="POUND",Ou="QUERY",sk="QUOTE",D6="FULLWIDTHMIDDLEDOT",ok="SEMI",di="SLASH",ju="TILDE",Np="UNDERSCORE",R6="EMOJI",Tp="SYM";var O6=Object.freeze({__proto__:null,ALPHANUMERICAL:_6,AMPERSAND:mp,APOSTROPHE:gp,ASCIINUMERICAL:M6,ASTERISK:yp,AT:Fs,BACKSLASH:vp,BACKTICK:bp,CARET:xp,CLOSEANGLEBRACKET:op,CLOSEBRACE:Du,CLOSEBRACKET:np,CLOSEPAREN:ip,COLON:Gs,COMMA:rk,DOLLAR:wp,DOT:ui,EMOJI:R6,EQUALS:Sp,EXCLAMATION:ik,FULLWIDTHGREATERTHAN:pp,FULLWIDTHLEFTPAREN:ap,FULLWIDTHLESSTHAN:hp,FULLWIDTHMIDDLEDOT:D6,FULLWIDTHRIGHTPAREN:lp,HYPHEN:Sr,LEFTCORNERBRACKET:cp,LEFTWHITECORNERBRACKET:dp,LOCALHOST:ed,NL:nk,NUM:tk,OPENANGLEBRACKET:sp,OPENBRACE:_u,OPENBRACKET:tp,OPENPAREN:rp,PERCENT:Ru,PIPE:Cp,PLUS:Ep,POUND:kp,QUERY:Ou,QUOTE:sk,RIGHTCORNERBRACKET:up,RIGHTWHITECORNERBRACKET:fp,SCHEME:Eh,SEMI:ok,SLASH:di,SLASH_SCHEME:wl,SYM:Tp,TILDE:ju,TLD:CC,UNDERSCORE:Np,UTLD:EC,UWORD:SC,WORD:Wi,WS:kC});const Gi=/[a-z]/,iu=new RegExp("\\p{L}","u"),H0=new RegExp("\\p{Emoji}","u"),Ki=/\d/,F0=/\s/,SD="\r",U0=`
`,QJ="",JJ="",$0="";let rh=null,ih=null;function eee(e=[]){const t={};Vn.groups=t;const n=new Vn;rh==null&&(rh=CD(GJ)),ih==null&&(ih=CD(KJ)),ye(n,"'",gp),ye(n,"{",_u),ye(n,"}",Du),ye(n,"[",tp),ye(n,"]",np),ye(n,"(",rp),ye(n,")",ip),ye(n,"<",sp),ye(n,">",op),ye(n,"",ap),ye(n,"",lp),ye(n,"",cp),ye(n,"",up),ye(n,"",dp),ye(n,"",fp),ye(n,"",hp),ye(n,"",pp),ye(n,"&",mp),ye(n,"*",yp),ye(n,"@",Fs),ye(n,"`",bp),ye(n,"^",xp),ye(n,":",Gs),ye(n,",",rk),ye(n,"$",wp),ye(n,".",ui),ye(n,"=",Sp),ye(n,"!",ik),ye(n,"-",Sr),ye(n,"%",Ru),ye(n,"|",Cp),ye(n,"+",Ep),ye(n,"#",kp),ye(n,"?",Ou),ye(n,'"',sk),ye(n,"/",di),ye(n,";",ok),ye(n,"~",ju),ye(n,"_",Np),ye(n,"\\",vp),ye(n,"",D6);const r=Dt(n,Ki,tk,{[vC]:!0});Dt(r,Ki,r);const i=Dt(r,Gi,M6,{[Mu]:!0}),s=Dt(r,iu,_6,{[hu]:!0}),o=Dt(n,Gi,Wi,{[bC]:!0});Dt(o,Ki,i),Dt(o,Gi,o),Dt(i,Ki,i),Dt(i,Gi,i);const l=Dt(n,iu,SC,{[xC]:!0});Dt(l,Gi),Dt(l,Ki,s),Dt(l,iu,l),Dt(s,Ki,s),Dt(s,Gi),Dt(s,iu,s);const u=ye(n,U0,nk,{[V0]:!0}),d=ye(n,SD,kC,{[V0]:!0}),h=Dt(n,F0,kC,{[V0]:!0});ye(n,$0,h),ye(d,U0,u),ye(d,$0,h),Dt(d,F0,h),ye(h,SD),ye(h,U0),Dt(h,F0,h),ye(h,$0,h);const p=Dt(n,H0,R6,{[A6]:!0});ye(p,"#"),Dt(p,H0,p),ye(p,QJ,p);const g=ye(p,JJ);ye(g,"#"),Dt(g,H0,p);const y=[[Gi,o],[Ki,i]],x=[[Gi,null],[iu,l],[Ki,s]];for(let S=0;S<rh.length;S++)Is(n,rh[S],CC,Wi,y);for(let S=0;S<ih.length;S++)Is(n,ih[S],EC,SC,x);Xo(CC,{tld:!0,ascii:!0},t),Xo(EC,{utld:!0,alpha:!0},t),Is(n,"file",Eh,Wi,y),Is(n,"mailto",Eh,Wi,y),Is(n,"http",wl,Wi,y),Is(n,"https",wl,Wi,y),Is(n,"ftp",wl,Wi,y),Is(n,"ftps",wl,Wi,y),Xo(Eh,{scheme:!0,ascii:!0},t),Xo(wl,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],N=e[S][1]?{[YJ]:!0}:{[WJ]:!0};w.indexOf("-")>=0?N[wC]=!0:Gi.test(w)?Ki.test(w)?N[Mu]=!0:N[bC]=!0:N[vC]=!0,wD(n,w,w,N)}return wD(n,"localhost",ed,{ascii:!0}),n.jd=new Vn(Tp),{start:n,tokens:Object.assign({groups:t},O6)}}function j6(e,t){const n=tee(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,g=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=n[o].length,g++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function tee(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Is(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Vn(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Vn(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function CD(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const td={defaultProtocol:"http",events:null,format:ED,formatHref:ED,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function ak(e,t=null){let n=Object.assign({},td);e&&(n=Object.assign(n,e instanceof ak?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}ak.prototype={o:td,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:td[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function ED(e){return e}function L6(e,t){this.t="token",this.v=e,this.tk=t}L6.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=td.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function hm(e,t){class n extends L6{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const kD=hm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ND=hm("text"),nee=hm("nl"),sh=hm("url",{isLink:!0,toHref(e=td.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==ed&&e[1].t===Gs}}),xr=e=>new Vn(e);function ree({groups:e}){const t=e.domain.concat([mp,yp,Fs,vp,bp,xp,wp,Sp,Sr,tk,Ru,Cp,Ep,kp,di,Tp,ju,Np]),n=[gp,Gs,rk,ui,ik,Ru,Ou,sk,ok,sp,op,_u,Du,np,tp,rp,ip,ap,lp,cp,up,dp,fp,hp,pp],r=[mp,gp,yp,vp,bp,xp,wp,Sp,Sr,_u,Du,Ru,Cp,Ep,kp,Ou,di,Tp,ju,Np],i=xr(),s=ye(i,ju);Ge(s,r,s),Ge(s,e.domain,s);const o=xr(),l=xr(),u=xr();Ge(i,e.domain,o),Ge(i,e.scheme,l),Ge(i,e.slashscheme,u),Ge(o,r,s),Ge(o,e.domain,o);const d=ye(o,Fs);ye(s,Fs,d),ye(l,Fs,d),ye(u,Fs,d);const h=ye(s,ui);Ge(h,r,s),Ge(h,e.domain,s);const p=xr();Ge(d,e.domain,p),Ge(p,e.domain,p);const g=ye(p,ui);Ge(g,e.domain,p);const y=xr(kD);Ge(g,e.tld,y),Ge(g,e.utld,y),ye(d,ed,y);const x=ye(p,Sr);ye(x,Sr,x),Ge(x,e.domain,p),Ge(y,e.domain,p),ye(y,ui,g),ye(y,Sr,x);const S=ye(y,Gs);Ge(S,e.numeric,kD);const w=ye(o,Sr),E=ye(o,ui);ye(w,Sr,w),Ge(w,e.domain,o),Ge(E,r,s),Ge(E,e.domain,o);const N=xr(sh);Ge(E,e.tld,N),Ge(E,e.utld,N),Ge(N,e.domain,o),Ge(N,r,s),ye(N,ui,E),ye(N,Sr,w),ye(N,Fs,d);const k=ye(N,Gs),T=xr(sh);Ge(k,e.numeric,T);const A=xr(sh),_=xr();Ge(A,t,A),Ge(A,n,_),Ge(_,t,A),Ge(_,n,_),ye(N,di,A),ye(T,di,A);const R=ye(l,Gs),D=ye(u,Gs),P=ye(D,di),$=ye(P,di);Ge(l,e.domain,o),ye(l,ui,E),ye(l,Sr,w),Ge(u,e.domain,o),ye(u,ui,E),ye(u,Sr,w),Ge(R,e.domain,A),ye(R,di,A),ye(R,Ou,A),Ge($,e.domain,A),Ge($,t,A),ye($,di,A);const V=[[_u,Du],[tp,np],[rp,ip],[sp,op],[ap,lp],[cp,up],[dp,fp],[hp,pp]];for(let B=0;B<V.length;B++){const[G,z]=V[B],F=ye(A,G);ye(_,G,F),ye(F,z,A);const I=xr(sh);Ge(F,t,I);const q=xr();Ge(F,n),Ge(I,t,I),Ge(I,n,q),Ge(q,t,I),Ge(q,n,q),ye(I,z,A),ye(q,z,A)}return ye(i,ed,N),ye(i,nk,nee),{start:i,tokens:O6}}function iee(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,g=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(G0(ND,t,o)),o=[]),i-=g,h-=g;const y=p.t,x=n.slice(i-h,i);s.push(G0(y,t,x))}}return o.length>0&&s.push(G0(ND,t,o)),s}function G0(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const see=typeof console<"u"&&console&&console.warn||(()=>{}),oee="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",mt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function aee(){return Vn.groups={},mt.scanner=null,mt.parser=null,mt.tokenQueue=[],mt.pluginQueue=[],mt.customSchemes=[],mt.initialized=!1,mt}function TD(e,t=!1){if(mt.initialized&&see(`linkifyjs: already initialized - will not register custom scheme "${e}" ${oee}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);mt.customSchemes.push([e,t])}function lee(){mt.scanner=eee(mt.customSchemes);for(let e=0;e<mt.tokenQueue.length;e++)mt.tokenQueue[e][1]({scanner:mt.scanner});mt.parser=ree(mt.scanner.tokens);for(let e=0;e<mt.pluginQueue.length;e++)mt.pluginQueue[e][1]({scanner:mt.scanner,parser:mt.parser});return mt.initialized=!0,mt}function lk(e){return mt.initialized||lee(),iee(mt.parser.start,e,j6(mt.scanner.start,e))}lk.scan=j6;function P6(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new ak(n),i=lk(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var ck="[\0- -\u2029]",cee=new RegExp(ck),uee=new RegExp(`${ck}$`),dee=new RegExp(ck,"g");function fee(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function hee(e){return new jt({key:new dn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=WB(n.doc,[...t]);if(i6(l).forEach(({newRange:d})=>{const h=gZ(r.doc,d,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!uee.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const y=g.split(cee).filter(Boolean);if(y.length<=0)return!1;const x=y[y.length-1],S=p.pos+g.lastIndexOf(x);if(!x)return!1;const w=lk(x).map(E=>E.toObject(e.defaultProtocol));if(!fee(w))return!1;w.filter(E=>E.isLink).map(E=>({...E,from:S+E.start+1,to:S+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{QE(E.from,E.to,r.doc).some(N=>N.mark.type===e.type)||o.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!o.steps.length)return o}})}function pee(e){return new jt({key:new dn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=r6(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function mee(e){return new jt({key:new dn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=P6(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function zo(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(dee,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var I6=Ca.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){TD(e);return}TD(e.scheme,e.optionalSlashes)})},onDestroy(){aee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!zo(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!zo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!zo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",$t(this.options.HTMLAttributes,e),0]:["a",$t(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!zo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!zo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[fa({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=P6(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!zo(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(hee({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!zo(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(pee({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(mee({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),gee=I6,yee=Object.defineProperty,vee=(e,t)=>{for(var n in t)yee(e,n,{get:t[n],enumerable:!0})},bee="listItem",AD="textStyle",MD=/^\s*([-+*])\s$/,uk=cr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bee,this.editor.getAttributes(AD)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Hl({find:MD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Hl({find:MD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(AD),editor:this.editor})),[e]}}),dk=cr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",$t(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),xee={};vee(xee,{findListItemPos:()=>kd,getNextListDepth:()=>fk,handleBackspace:()=>NC,handleDelete:()=>TC,hasListBefore:()=>B6,hasListItemAfter:()=>wee,hasListItemBefore:()=>z6,listItemHasSubList:()=>q6,nextListIsDeeper:()=>V6,nextListIsHigher:()=>H6});var kd=(e,t)=>{const{$from:n}=t.selection,r=Gt(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},fk=(e,t)=>{const n=kd(e,t);if(!n)return!1;const[,r]=NZ(t,e,n.$pos.pos+4);return r},B6=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},z6=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},q6=(e,t,n)=>{if(!n)return!1;const r=Gt(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},NC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!ao(e.state,t)&&B6(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((g,y)=>{g.type.name===t&&d.push({node:g,pos:y})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!ao(e.state,t)||!_Z(e.state))return!1;const r=kd(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=q6(t,e.state,s);return z6(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},V6=(e,t)=>{const n=fk(e,t),r=kd(e,t);return!r||!n?!1:n>r.depth},H6=(e,t)=>{const n=fk(e,t),r=kd(e,t);return!r||!n?!1:n<r.depth},TC=(e,t)=>{if(!ao(e.state,t)||!MZ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:V6(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():H6(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},wee=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},F6=Bt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&TC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&TC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&NC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&NC(e,n,r)&&(t=!0)}),t}}}}),See="listItem",_D="textStyle",DD=/^(\d+)\.\s$/,hk=cr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",$t(this.options.HTMLAttributes,n),0]:["ol",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(See,this.editor.getAttributes(_D)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Hl({find:DD,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Hl({find:DD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(_D)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Cee=/^\s*(\[([( |x])?\])\s$/,Eee=cr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",$t(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const y=n();if(typeof y!="number")return!1;const x=g.doc.nodeAt(y);return g.setNodeMarkup(y,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[Hl({find:Cee,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),kee=cr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",$t(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Bt.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(uk.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(dk.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(F6.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(hk.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Eee.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(kee.configure(this.options.taskList)),e}});var Nee=cr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Tee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Aee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Mee=Ca.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Vl({find:Tee,type:this.type})]},addPasteRules(){return[fa({find:Aee,type:this.type})]}}),_ee=cr.create({name:"text",group:"inline"}),U6=Ca.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Dee=U6;function Ree(e={}){return new jt({view(t){return new Oee(t,e)}})}class Oee{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let x=y.getBoundingClientRect(),S=p?x.bottom:x.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:x.left,right:x.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,y=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,h=p.top-u.scrollTop*y}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=KI(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Ot extends $e{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Ot.valid(r)?new Ot(r):$e.near(r)}content(){return xe.empty}eq(t){return t instanceof Ot&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ot(t.resolve(n.pos))}getBookmark(){return new pk(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!jee(t)||!Lee(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Ot.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(Ot.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Oe.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(Ot.valid(l))return l}return null}}}Ot.prototype.visible=!1;Ot.findFrom=Ot.findGapCursorFrom;$e.jsonID("gapcursor",Ot);class pk{constructor(t){this.pos=t}map(t){return new pk(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Ot.valid(n)?new Ot(n):$e.near(n)}}function jee(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Lee(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Pee(){return new jt({props:{decorations:qee,createSelectionBetween(e,t,n){return t.pos==n.pos&&Ot.valid(n)?new Ot(n):null},handleClick:Bee,handleKeyDown:Iee,handleDOMEvents:{beforeinput:zee}}})}const Iee=LB({ArrowLeft:oh("horiz",-1),ArrowRight:oh("horiz",1),ArrowUp:oh("vert",-1),ArrowDown:oh("vert",1)});function oh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ve){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=Ot.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new Ot(d))),!0):!1}}function Bee(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Ot.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Oe.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Ot(r))),!0)}function zee(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Ot))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=me.empty;for(let o=r.length-1;o>=0;o--)i=me.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new xe(i,0,0));return s.setSelection(Ve.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function qee(e){if(!(e.selection instanceof Ot))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ct.create(e.doc,[Rn.widget(e.selection.head,t,{key:"gapcursor"})])}var Ap=200,un=function(){};un.prototype.append=function(t){return t.length?(t=un.from(t),!this.length&&t||t.length<Ap&&this.leafAppend(t)||this.length<Ap&&t.leafPrepend(this)||this.appendInner(t)):this};un.prototype.prepend=function(t){return t.length?un.from(t).append(this):this};un.prototype.appendInner=function(t){return new Vee(this,t)};un.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?un.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};un.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};un.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};un.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};un.from=function(t){return t instanceof un?t:t&&t.length?new $6(t):un.empty};var $6=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=Ap)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=Ap)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(un);un.empty=new $6([]);var Vee=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(un);const Hee=500;class $r{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new fi(p.map));let y=p.step.map(i.slice(s)),x;y&&o.maybeStep(y).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new fi(x,void 0,void 0,d.length+h.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new $r(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),g=new fi(t.mapping.maps[h],p,n),y;(y=u&&u.merge(g))&&(g=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(u=g)}let d=o-r.depth;return d>Uee&&(l=Fee(l,d),o-=d),new $r(l.append(s),o)}remapping(t,n){let r=new Ku;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new $r(this.items.append(t.map(n=>new fi(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let u=n;this.items.forEach(g=>{let y=s.getMirror(--u);if(y==null)return;o=Math.min(o,y);let x=s.maps[y];if(g.step){let S=t.steps[y].invert(t.docs[y]),w=g.selection&&g.selection.map(s.slice(u+1,y));w&&l++,r.push(new fi(x,S,w))}else r.push(new fi(x))},i);let d=[];for(let g=n;g<o;g++)d.push(new fi(s.maps[g]));let h=this.items.slice(0,i).append(d).append(r),p=new $r(h,l);return p.emptyItemCount()>Hee&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new fi(d.invert(),u,h),g,y=i.length-1;(g=i.length&&i[y].merge(p))?i[y]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new $r(un.from(i.reverse()),s)}}$r.empty=new $r(un.empty,0);function Fee(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class fi{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new fi(n.getMap().invert(),n,this.selection)}}}class Us{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Uee=20;function $ee(e,t,n,r){let i=n.getMeta(sa),s;if(i)return i.historyState;n.getMeta(Yee)&&(e=new Us(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(sa))return o.getMeta(sa).redo?new Us(e.done.addTransform(n,void 0,r,kh(t)),e.undone,RD(n.mapping.maps),e.prevTime,e.prevComposition):new Us(e.done,e.undone.addTransform(n,void 0,r,kh(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Gee(n,e.prevRanges)),d=o?K0(e.prevRanges,n.mapping):RD(n.mapping.maps);return new Us(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,kh(t)),$r.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Us(e.done.rebased(n,s),e.undone.rebased(n,s),K0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Us(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),K0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Gee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function RD(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function K0(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function Kee(e,t,n){let r=kh(t),i=sa.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new Us(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(sa,{redo:n,historyState:u})}let Y0=!1,OD=null;function kh(e){let t=e.plugins;if(OD!=t){Y0=!1,OD=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Y0=!0;break}}return Y0}const sa=new dn("history"),Yee=new dn("closeHistory");function Wee(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new jt({key:sa,state:{init(){return new Us($r.empty,$r.empty,null,0,-1)},apply(t,n,r){return $ee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?K6:r=="historyRedo"?Y6:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function G6(e,t){return(n,r)=>{let i=sa.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=Kee(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const K6=G6(!1,!0),Y6=G6(!0,!0);Bt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new jt({key:new dn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var Xee=Bt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Ree(this.options)]}});Bt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new jt({key:new dn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Ct.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Rn.node(d,d+u.nodeSize,{class:this.options.className}))}),Ct.create(e,s)}}})]}});var Zee=Bt.create({name:"gapCursor",addProseMirrorPlugins(){return[Pee()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=ot(De(e,"allowGapCursor",n)))!=null?t:null}}}),Qee=Bt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new jt({key:new dn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&um(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=Rn.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),Ct.create(e,i)}}})]}});Bt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new jt({key:new dn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||o6(n.selection)||e.view.dragging?null:Ct.create(n.doc,[Rn.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function jD({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Jee=Bt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new dn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new jt({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!jD({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!jD({node:i,types:t})}}})]}}),ete=Bt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>K6(e,t),redo:()=>({state:e,dispatch:t})=>Y6(e,t)}},addProseMirrorPlugins(){return[Wee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),tte=Bt.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(_J.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(kJ.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(uk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(OJ.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(PJ.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(IJ.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Xee.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Zee.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(BJ.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(T6.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(ete.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(qJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push($J.configure(this.options.italic)),this.options.listItem!==!1&&i.push(dk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(F6.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(I6.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(hk.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(Nee.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Mee.configure(this.options.strike)),this.options.text!==!1&&i.push(_ee.configure(this.options.text)),this.options.underline!==!1&&i.push(U6.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Jee.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),nte=tte,rte=Bt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),ite=rte,ste=Qee,ote=uk,ate=hk,lte=dk;const pm=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return v.jsxs(Kn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&v.jsx(Kn.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},mm=()=>{const[e,t]=Re.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}},pl=({onClick:e,disabled:t,active:n,title:r,children:i})=>v.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),LD=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),v.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[v.jsx("option",{value:"0",children:"P"}),v.jsx("option",{value:"1",children:"H1"}),v.jsx("option",{value:"2",children:"H2"}),v.jsx("option",{value:"3",children:"H3"})]})},Mp=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=O.useState(0),[d,h]=O.useState(!1),{focused:p,onFocus:g,onBlur:y}=mm(),x=()=>u(Date.now()),S=()=>{h(!d)},w=xJ({extensions:[nte.configure({bulletList:!1,orderedList:!1,listItem:!1}),ote.configure({HTMLAttributes:{class:"bullet-list"}}),ate.configure({HTMLAttributes:{class:"ordered-list"}}),lte.configure({HTMLAttributes:{class:"list-item"}}),Dee,gee.configure({openOnClick:!1}),ite.configure({types:["heading","paragraph"]}),zJ.configure({levels:[1,2,3]}),ste.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:T})=>{r(T.getHTML())},onFocus:g,onBlur:y,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(O.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),O.useEffect(()=>{const T=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",T),document.body.style.overflow=""}},[d]),!w)return null;const E=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:v.jsx(fK,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:v.jsx(hK,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:v.jsx(yK,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:v.jsx(v.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:v.jsx(pK,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:v.jsx(mK,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:v.jsx(gK,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:v.jsx(iK,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:v.jsx(uK,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:v.jsx(cK,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:v.jsx(dK,{size:16})}],k=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?v.jsx(wK,{size:16}):v.jsx(SK,{size:16})}];return v.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?v.jsxs(Kn.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[v.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&v.jsx("span",{className:"font-medium text-theme",children:t})}),v.jsx(LD,{editor:w,disabled:s}),E.map(T=>v.jsx(pl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(pl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(pl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsx("div",{className:"h-full overflow-y-auto p-4",children:v.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:v.jsx(xD,{editor:w,className:"focus:outline-none h-full"})})})})]}):v.jsx(pm,{id:e,label:t,focused:p,containerClassName:l,children:v.jsxs(Kn.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[v.jsx(LD,{editor:w,disabled:s}),E.map(T=>v.jsx(pl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(pl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(pl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:v.jsx(xD,{editor:w,className:"focus:outline-none"})})]})})})},cte=()=>{xa();const e=md(),[t,n]=O.useState(!1),r=O.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=O.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,y)=>{o(x=>({...x,[g]:y}))},u=(g,y,x)=>{const S=s[g].map(w=>w.id===y?{...w,value:x}:w);o(w=>({...w,[g]:S}))},d=g=>{o(y=>({...y,[g]:[...y[g],{id:i(),value:""}]}))},h=(g,y)=>{const x=s[g].filter(S=>S.id!==y);o(S=>({...S,[g]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(y=>y.value).filter(y=>y.trim()!==""),constraints:s.constraints.map(y=>y.value).filter(y=>y.trim()!==""),hints:s.hints.map(y=>y.value).filter(y=>y.trim()!==""),tags:s.tags.map(y=>y.value).filter(y=>y.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return v.jsxs(v.Fragment,{children:[v.jsx(yd,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsx(gd,{})})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"inline-block mb-4",children:v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),v.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsx("div",{children:v.jsx(Mp,{id:"description",label:" Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),v.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"Easy",children:"Easy"}),v.jsx("option",{value:"Medium",children:"Medium"}),v.jsx("option",{value:"Hard",children:"Hard"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Category"]}),v.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),v.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Requirements"]}),v.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,y)=>v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-3 items-start",children:[v.jsx("div",{className:"flex-1",children:v.jsx(Mp,{id:`requirement-${g.id}`,label:`Requirement ${y+1}`,value:g.value,onChange:x=>u("requirements",g.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&v.jsx("button",{type:"button",onClick:()=>h("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Constraints"]}),v.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("constraints",g.id,y.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),v.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("hints",g.id,y.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(g=>g.value.trim())&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>v.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[v.jsx("span",{children:g.value}),v.jsx("button",{type:"button",onClick:()=>h("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>u("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),v.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[v.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):v.jsx(v.Fragment,{children:" Create & Start Designing"})}),v.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},ute=()=>{xa();const e=md(),[t,n]=O.useState([]),[r,i]=O.useState(!1),[s,o]=O.useState(""),[l,u]=O.useState("updated"),[d,h]=O.useState(!1),[p,g]=O.useState(!1),[y,x]=O.useState(!1),[S,w]=O.useState(null),{user:E,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:_}=Kp();O.useEffect(()=>{N||e("/")},[N,e]),O.useEffect(()=>{(async()=>{if(!N){n([]);return}i(!0);try{const G=await Er.getUserDiagrams();n(G)}catch(G){console.error("Failed to load diagrams:",G)}finally{i(!1)}})()},[N]);const R=B=>{e(`/playground/free?diagramId=${B}`)},D=async(B,G)=>{G.stopPropagation();const z=t.find(F=>F.id===B);z&&(w(z),x(!0))},P=async()=>{if(S)try{await Er.deleteDiagram(S.id),n(B=>B.filter(G=>G.id!==S.id)),x(!1),w(null)}catch(B){console.error("Failed to delete diagram:",B),alert("Failed to delete diagram. Please try again.")}},$=()=>{x(!1),w(null)},V=t.filter(B=>{const G=s.toLowerCase();return B.title.toLowerCase().includes(G)||B.description?.toLowerCase().includes(G)||!1}).sort((B,G)=>{switch(l){case"title":return B.title.localeCompare(G.title);case"created":return new Date(G.createdAt).getTime()-new Date(B.createdAt).getTime();case"updated":default:return new Date(G.updatedAt).getTime()-new Date(B.updatedAt).getTime()}});return v.jsxs(v.Fragment,{children:[v.jsx(yd,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${V.length} design${V.length===1?"":"s"}`}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),v.jsx(gd,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[E?.picture?v.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:E?.name?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline text-sm",children:E?.name||E?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&v.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:v.jsxs("div",{className:"py-1",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name}),v.jsx("p",{className:"text-sm text-muted truncate",children:E?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(!1),_()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved system design projects"})]}),!r&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:B=>o(B.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),v.jsxs("select",{id:"sort-select",value:l,onChange:B=>u(B.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"updated",children:"Last Updated"}),v.jsx("option",{value:"created",children:"Date Created"}),v.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&V.length===0&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:s?"":""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":"No designs yet"}),v.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":"Start creating your first system design project"}),!s&&v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&V.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:V.map((B,G)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${G===0?"delay-0":G===1?"delay-100":G===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsx("button",{type:"button",onClick:z=>D(B.id,z),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{className:"cursor-pointer",onClick:()=>R(B.id),children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1 pr-8",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 mb-1",children:B.title}),B.description&&v.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:B.description})]}),v.jsx("div",{className:"text-3xl",children:""})]}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),B.nodes.length," node",B.nodes.length===1?"":"s"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),B.edges.length," connection",B.edges.length===1?"":"s"]})]}),v.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[v.jsxs("span",{children:["Updated"," ",new Date(B.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),v.jsxs("span",{children:["Created"," ",new Date(B.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),v.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),R(B.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},B.id))})]})]})})]}),p&&v.jsx(Qp,{isOpen:p,onClose:()=>g(!1),onLogin:async(B,G)=>{await k({email:B,password:G})},onSignup:async(B,G,z)=>{await T({email:B,password:G,name:z})},onGoogleLogin:async B=>{await A(B)}}),y&&S&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",v.jsxs("strong",{children:['"',S.title,'"']}),"? This will permanently remove the design and all its data."]}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:$,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:P,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function dte(e){return tt({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(e)}const W6=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>v.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[v.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[v.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),v.jsx(yE,{children:t&&v.jsx(Kn.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&v.jsx("span",{className:"text-sm text-theme",children:r})]}),X6=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:g}=mm();return v.jsx(pm,{id:e,label:t,focused:h,containerClassName:d,children:v.jsx(Kn.input,{id:e,type:"number",value:n??"",onChange:y=>r(Number(y.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Nh=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=mm();return v.jsx(pm,{id:e,label:t,focused:u,containerClassName:l,children:v.jsx(Kn.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Z6=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=mm(),p=`${e}-label`;return v.jsxs(pm,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&v.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),v.jsx(Kn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:v.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>v.jsx("option",{value:g,children:g},g))})})]})};function fte(e,t=50){const[n,r]=O.useState({past:[],present:e,future:[]}),i=O.useRef(!1),s=O.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const g=[...h.past,h.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=O.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=O.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=O.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Kt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Kt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var hte={value:()=>{}};function gm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Th(n)}function Th(e){this._=e}function pte(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Th.prototype=gm.prototype={constructor:Th,on:function(e,t){var n=this._,r=pte(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=mte(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=PD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=PD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Th(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function mte(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function PD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=hte,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var AC="http://www.w3.org/1999/xhtml";const ID={svg:"http://www.w3.org/2000/svg",xhtml:AC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ym(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ID.hasOwnProperty(t)?{space:ID[t],local:e}:e}function gte(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===AC&&t.documentElement.namespaceURI===AC?t.createElement(e):t.createElementNS(n,e)}}function yte(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Q6(e){var t=ym(e);return(t.local?yte:gte)(t)}function vte(){}function mk(e){return e==null?vte:function(){return this.querySelector(e)}}function bte(e){typeof e!="function"&&(e=mk(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new lr(r,this._parents)}function xte(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function wte(){return[]}function J6(e){return e==null?wte:function(){return this.querySelectorAll(e)}}function Ste(e){return function(){return xte(e.apply(this,arguments))}}function Cte(e){typeof e=="function"?e=Ste(e):e=J6(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new lr(r,i)}function ez(e){return function(){return this.matches(e)}}function tz(e){return function(t){return t.matches(e)}}var Ete=Array.prototype.find;function kte(e){return function(){return Ete.call(this.children,e)}}function Nte(){return this.firstElementChild}function Tte(e){return this.select(e==null?Nte:kte(typeof e=="function"?e:tz(e)))}var Ate=Array.prototype.filter;function Mte(){return Array.from(this.children)}function _te(e){return function(){return Ate.call(this.children,e)}}function Dte(e){return this.selectAll(e==null?Mte:_te(typeof e=="function"?e:tz(e)))}function Rte(e){typeof e!="function"&&(e=ez(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new lr(r,this._parents)}function nz(e){return new Array(e.length)}function Ote(){return new lr(this._enter||this._groups.map(nz),this._parents)}function _p(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_p.prototype={constructor:_p,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jte(e){return function(){return e}}function Lte(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new _p(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function Pte(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,g=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(g[l]=y=o.call(u,u.__data__,l,t)+"",d.has(y)?i[l]=u:d.set(y,u));for(l=0;l<p;++l)y=o.call(e,s[l],l,s)+"",(u=d.get(y))?(r[l]=u,u.__data__=s[l],d.delete(y)):n[l]=new _p(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(g[l])===u&&(i[l]=u)}function Ite(e){return e.__data__}function Bte(e,t){if(!arguments.length)return Array.from(this,Ite);var n=t?Pte:Lte,r=this._parents,i=this._groups;typeof e!="function"&&(e=jte(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],g=p.length,y=zte(e.call(h,h&&h.__data__,d,r)),x=y.length,S=l[d]=new Array(x),w=o[d]=new Array(x),E=u[d]=new Array(g);n(h,p,S,w,E,y,t);for(var N=0,k=0,T,A;N<x;++N)if(T=S[N]){for(N>=k&&(k=N+1);!(A=w[k])&&++k<x;);T._next=A||null}}return o=new lr(o,r),o._enter=l,o._exit=u,o}function zte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function qte(){return new lr(this._exit||this._groups.map(nz),this._parents)}function Vte(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Hte(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,g=l[u]=new Array(p),y,x=0;x<p;++x)(y=d[x]||h[x])&&(g[x]=y);for(;u<i;++u)l[u]=n[u];return new lr(l,this._parents)}function Fte(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Ute(e){e||(e=$te);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new lr(i,this._parents).order()}function $te(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Gte(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kte(){return Array.from(this)}function Yte(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Wte(){let e=0;for(const t of this)++e;return e}function Xte(){return!this.node()}function Zte(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function Qte(e){return function(){this.removeAttribute(e)}}function Jte(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ene(e,t){return function(){this.setAttribute(e,t)}}function tne(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function nne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function rne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ine(e,t){var n=ym(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Jte:Qte:typeof t=="function"?n.local?rne:nne:n.local?tne:ene)(n,t))}function rz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sne(e){return function(){this.style.removeProperty(e)}}function one(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ane(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function lne(e,t,n){return arguments.length>1?this.each((t==null?sne:typeof t=="function"?ane:one)(e,t,n??"")):Fl(this.node(),e)}function Fl(e,t){return e.style.getPropertyValue(t)||rz(e).getComputedStyle(e,null).getPropertyValue(t)}function cne(e){return function(){delete this[e]}}function une(e,t){return function(){this[e]=t}}function dne(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function fne(e,t){return arguments.length>1?this.each((t==null?cne:typeof t=="function"?dne:une)(e,t)):this.node()[e]}function iz(e){return e.trim().split(/^|\s+/)}function gk(e){return e.classList||new sz(e)}function sz(e){this._node=e,this._names=iz(e.getAttribute("class")||"")}sz.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function oz(e,t){for(var n=gk(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function az(e,t){for(var n=gk(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function hne(e){return function(){oz(this,e)}}function pne(e){return function(){az(this,e)}}function mne(e,t){return function(){(t.apply(this,arguments)?oz:az)(this,e)}}function gne(e,t){var n=iz(e+"");if(arguments.length<2){for(var r=gk(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?mne:t?hne:pne)(n,t))}function yne(){this.textContent=""}function vne(e){return function(){this.textContent=e}}function bne(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function xne(e){return arguments.length?this.each(e==null?yne:(typeof e=="function"?bne:vne)(e)):this.node().textContent}function wne(){this.innerHTML=""}function Sne(e){return function(){this.innerHTML=e}}function Cne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ene(e){return arguments.length?this.each(e==null?wne:(typeof e=="function"?Cne:Sne)(e)):this.node().innerHTML}function kne(){this.nextSibling&&this.parentNode.appendChild(this)}function Nne(){return this.each(kne)}function Tne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ane(){return this.each(Tne)}function Mne(e){var t=typeof e=="function"?e:Q6(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _ne(){return null}function Dne(e,t){var n=typeof e=="function"?e:Q6(e),r=t==null?_ne:typeof t=="function"?t:mk(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Rne(){var e=this.parentNode;e&&e.removeChild(this)}function One(){return this.each(Rne)}function jne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Pne(e){return this.select(e?Lne:jne)}function Ine(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bne(e){return function(t){e.call(this,t,this.__data__)}}function zne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function qne(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Vne(e,t,n){return function(){var r=this.__on,i,s=Bne(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Hne(e,t,n){var r=zne(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Vne:qne,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function lz(e,t,n){var r=rz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Fne(e,t){return function(){return lz(this,e,t)}}function Une(e,t){return function(){return lz(this,e,t.apply(this,arguments))}}function $ne(e,t){return this.each((typeof t=="function"?Une:Fne)(e,t))}function*Gne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var cz=[null];function lr(e,t){this._groups=e,this._parents=t}function Nd(){return new lr([[document.documentElement]],cz)}function Kne(){return this}lr.prototype=Nd.prototype={constructor:lr,select:bte,selectAll:Cte,selectChild:Tte,selectChildren:Dte,filter:Rte,data:Bte,enter:Ote,exit:qte,join:Vte,merge:Hte,selection:Kne,order:Fte,sort:Ute,call:Gte,nodes:Kte,node:Yte,size:Wte,empty:Xte,each:Zte,attr:ine,style:lne,property:fne,classed:gne,text:xne,html:Ene,raise:Nne,lower:Ane,append:Mne,insert:Dne,remove:One,clone:Pne,datum:Ine,on:Hne,dispatch:$ne,[Symbol.iterator]:Gne};function or(e){return typeof e=="string"?new lr([[document.querySelector(e)]],[document.documentElement]):new lr([[e]],cz)}function Yne(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ur(e,t){if(e=Yne(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Wne={passive:!1},nd={capture:!0,passive:!1};function W0(e){e.stopImmediatePropagation()}function Ol(e){e.preventDefault(),e.stopImmediatePropagation()}function uz(e){var t=e.document.documentElement,n=or(e).on("dragstart.drag",Ol,nd);"onselectstart"in t?n.on("selectstart.drag",Ol,nd):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function dz(e,t){var n=e.document.documentElement,r=or(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ol,nd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ah=e=>()=>e;function MC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}MC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Xne(e){return!e.ctrlKey&&!e.button}function Zne(){return this.parentNode}function Qne(e,t){return t??{x:e.x,y:e.y}}function Jne(){return navigator.maxTouchPoints||"ontouchstart"in this}function fz(){var e=Xne,t=Zne,n=Qne,r=Jne,i={},s=gm("start","drag","end"),o=0,l,u,d,h,p=0;function g(T){T.on("mousedown.drag",y).filter(r).on("touchstart.drag",w).on("touchmove.drag",E,Wne).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(T,A){if(!(h||!e.call(this,T,A))){var _=k(this,t.call(this,T,A),T,A,"mouse");_&&(or(T.view).on("mousemove.drag",x,nd).on("mouseup.drag",S,nd),uz(T.view),W0(T),d=!1,l=T.clientX,u=T.clientY,_("start",T))}}function x(T){if(Ol(T),!d){var A=T.clientX-l,_=T.clientY-u;d=A*A+_*_>p}i.mouse("drag",T)}function S(T){or(T.view).on("mousemove.drag mouseup.drag",null),dz(T.view,d),Ol(T),i.mouse("end",T)}function w(T,A){if(e.call(this,T,A)){var _=T.changedTouches,R=t.call(this,T,A),D=_.length,P,$;for(P=0;P<D;++P)($=k(this,R,T,A,_[P].identifier,_[P]))&&(W0(T),$("start",T,_[P]))}}function E(T){var A=T.changedTouches,_=A.length,R,D;for(R=0;R<_;++R)(D=i[A[R].identifier])&&(Ol(T),D("drag",T,A[R]))}function N(T){var A=T.changedTouches,_=A.length,R,D;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),R=0;R<_;++R)(D=i[A[R].identifier])&&(W0(T),D("end",T,A[R]))}function k(T,A,_,R,D,P){var $=s.copy(),V=Ur(P||_,A),B,G,z;if((z=n.call(T,new MC("beforestart",{sourceEvent:_,target:g,identifier:D,active:o,x:V[0],y:V[1],dx:0,dy:0,dispatch:$}),R))!=null)return B=z.x-V[0]||0,G=z.y-V[1]||0,function F(I,q,W){var Q=V,L;switch(I){case"start":i[D]=F,L=o++;break;case"end":delete i[D],--o;case"drag":V=Ur(W||q,A),L=o;break}$.call(I,T,new MC(I,{sourceEvent:q,subject:z,target:g,identifier:D,active:L,x:V[0]+B,y:V[1]+G,dx:V[0]-Q[0],dy:V[1]-Q[1],dispatch:$}),R)}}return g.filter=function(T){return arguments.length?(e=typeof T=="function"?T:ah(!!T),g):e},g.container=function(T){return arguments.length?(t=typeof T=="function"?T:ah(T),g):t},g.subject=function(T){return arguments.length?(n=typeof T=="function"?T:ah(T),g):n},g.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:ah(!!T),g):r},g.on=function(){var T=s.on.apply(s,arguments);return T===s?g:T},g.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,g):Math.sqrt(p)},g}function yk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Td(){}var rd=.7,Dp=1/rd,jl="\\s*([+-]?\\d+)\\s*",id="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ere=/^#([0-9a-f]{3,8})$/,tre=new RegExp(`^rgb\\(${jl},${jl},${jl}\\)$`),nre=new RegExp(`^rgb\\(${vi},${vi},${vi}\\)$`),rre=new RegExp(`^rgba\\(${jl},${jl},${jl},${id}\\)$`),ire=new RegExp(`^rgba\\(${vi},${vi},${vi},${id}\\)$`),sre=new RegExp(`^hsl\\(${id},${vi},${vi}\\)$`),ore=new RegExp(`^hsla\\(${id},${vi},${vi},${id}\\)$`),BD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yk(Td,ha,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zD,formatHex:zD,formatHex8:are,formatHsl:lre,formatRgb:qD,toString:qD});function zD(){return this.rgb().formatHex()}function are(){return this.rgb().formatHex8()}function lre(){return pz(this).formatHsl()}function qD(){return this.rgb().formatRgb()}function ha(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ere.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?VD(t):n===3?new Fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?lh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?lh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tre.exec(e))?new Fn(t[1],t[2],t[3],1):(t=nre.exec(e))?new Fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=rre.exec(e))?lh(t[1],t[2],t[3],t[4]):(t=ire.exec(e))?lh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sre.exec(e))?UD(t[1],t[2]/100,t[3]/100,1):(t=ore.exec(e))?UD(t[1],t[2]/100,t[3]/100,t[4]):BD.hasOwnProperty(e)?VD(BD[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function VD(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function lh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fn(e,t,n,r)}function cre(e){return e instanceof Td||(e=ha(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function _C(e,t,n,r){return arguments.length===1?cre(e):new Fn(e,t,n,r??1)}function Fn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}yk(Fn,_C,hz(Td,{brighter(e){return e=e==null?Dp:Math.pow(Dp,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rd:Math.pow(rd,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(oa(this.r),oa(this.g),oa(this.b),Rp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HD,formatHex:HD,formatHex8:ure,formatRgb:FD,toString:FD}));function HD(){return`#${Zo(this.r)}${Zo(this.g)}${Zo(this.b)}`}function ure(){return`#${Zo(this.r)}${Zo(this.g)}${Zo(this.b)}${Zo((isNaN(this.opacity)?1:this.opacity)*255)}`}function FD(){const e=Rp(this.opacity);return`${e===1?"rgb(":"rgba("}${oa(this.r)}, ${oa(this.g)}, ${oa(this.b)}${e===1?")":`, ${e})`}`}function Rp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zo(e){return e=oa(e),(e<16?"0":"")+e.toString(16)}function UD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Gr(e,t,n,r)}function pz(e){if(e instanceof Gr)return new Gr(e.h,e.s,e.l,e.opacity);if(e instanceof Td||(e=ha(e)),!e)return new Gr;if(e instanceof Gr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Gr(o,l,u,e.opacity)}function dre(e,t,n,r){return arguments.length===1?pz(e):new Gr(e,t,n,r??1)}function Gr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}yk(Gr,dre,hz(Td,{brighter(e){return e=e==null?Dp:Math.pow(Dp,e),new Gr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rd:Math.pow(rd,e),new Gr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fn(X0(e>=240?e-240:e+120,i,r),X0(e,i,r),X0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Gr($D(this.h),ch(this.s),ch(this.l),Rp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rp(this.opacity);return`${e===1?"hsl(":"hsla("}${$D(this.h)}, ${ch(this.s)*100}%, ${ch(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $D(e){return e=(e||0)%360,e<0?e+360:e}function ch(e){return Math.max(0,Math.min(1,e||0))}function X0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vk=e=>()=>e;function fre(e,t){return function(n){return e+n*t}}function hre(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function pre(e){return(e=+e)==1?mz:function(t,n){return n-t?hre(t,n,e):vk(isNaN(t)?n:t)}}function mz(e,t){var n=t-e;return n?fre(e,n):vk(isNaN(e)?t:e)}const Op=(function e(t){var n=pre(t);function r(i,s){var o=n((i=_C(i)).r,(s=_C(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=mz(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function mre(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function gre(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yre(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Lu(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function vre(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function hi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bre(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Lu(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var DC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z0=new RegExp(DC.source,"g");function xre(e){return function(){return e}}function wre(e){return function(t){return e(t)+""}}function gz(e,t){var n=DC.lastIndex=Z0.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=DC.exec(e))&&(i=Z0.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:hi(r,i)})),n=Z0.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?wre(u[0].x):xre(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Lu(e,t){var n=typeof t,r;return t==null||n==="boolean"?vk(t):(n==="number"?hi:n==="string"?(r=ha(t))?(t=r,Op):gz:t instanceof ha?Op:t instanceof Date?vre:gre(t)?mre:Array.isArray(t)?yre:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bre:hi)(e,t)}var GD=180/Math.PI,RC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yz(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*GD,skewX:Math.atan(u)*GD,scaleX:o,scaleY:l}}var uh;function Sre(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?RC:yz(t.a,t.b,t.c,t.d,t.e,t.f)}function Cre(e){return e==null||(uh||(uh=document.createElementNS("http://www.w3.org/2000/svg","g")),uh.setAttribute("transform",e),!(e=uh.transform.baseVal.consolidate()))?RC:(e=e.matrix,yz(e.a,e.b,e.c,e.d,e.e,e.f))}function vz(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push("translate(",null,t,null,n);x.push({i:S-4,x:hi(d,p)},{i:S-2,x:hi(h,g)})}else(p||g)&&y.push("translate("+p+t+g+n)}function o(d,h,p,g){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:hi(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,g){d!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:hi(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push(i(y)+"scale(",null,",",null,")");x.push({i:S-4,x:hi(d,p)},{i:S-2,x:hi(h,g)})}else(p!==1||g!==1)&&y.push(i(y)+"scale("+p+","+g+")")}return function(d,h){var p=[],g=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,g),o(d.rotate,h.rotate,p,g),l(d.skewX,h.skewX,p,g),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,g),d=h=null,function(y){for(var x=-1,S=g.length,w;++x<S;)p[(w=g[x]).i]=w.x(y);return p.join("")}}}var Ere=vz(Sre,"px, ","px)","deg)"),kre=vz(Cre,", ",")",")"),Nre=1e-12;function KD(e){return((e=Math.exp(e))+1/e)/2}function Tre(e){return((e=Math.exp(e))-1/e)/2}function Are(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ah=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],g=o[2],y=h-l,x=p-u,S=y*y+x*x,w,E;if(S<Nre)E=Math.log(g/d)/t,w=function(R){return[l+R*y,u+R*x,d*Math.exp(t*R*E)]};else{var N=Math.sqrt(S),k=(g*g-d*d+r*S)/(2*d*n*N),T=(g*g-d*d-r*S)/(2*g*n*N),A=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(T*T+1)-T);E=(_-A)/t,w=function(R){var D=R*E,P=KD(A),$=d/(n*N)*(P*Are(t*D+A)-Tre(A));return[l+$*y,u+$*x,d*P/KD(t*D+A)]}}return w.duration=E*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var Ul=0,pu=0,su=0,bz=1e3,jp,mu,Lp=0,pa=0,vm=0,sd=typeof performance=="object"&&performance.now?performance:Date,xz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function bk(){return pa||(xz(Mre),pa=sd.now()+vm)}function Mre(){pa=0}function Pp(){this._call=this._time=this._next=null}Pp.prototype=wz.prototype={constructor:Pp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?bk():+n)+(t==null?0:+t),!this._next&&mu!==this&&(mu?mu._next=this:jp=this,mu=this),this._call=e,this._time=n,OC()},stop:function(){this._call&&(this._call=null,this._time=1/0,OC())}};function wz(e,t,n){var r=new Pp;return r.restart(e,t,n),r}function _re(){bk(),++Ul;for(var e=jp,t;e;)(t=pa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ul}function YD(){pa=(Lp=sd.now())+vm,Ul=pu=0;try{_re()}finally{Ul=0,Rre(),pa=0}}function Dre(){var e=sd.now(),t=e-Lp;t>bz&&(vm-=t,Lp=e)}function Rre(){for(var e,t=jp,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jp=n);mu=e,OC(r)}function OC(e){if(!Ul){pu&&(pu=clearTimeout(pu));var t=e-pa;t>24?(e<1/0&&(pu=setTimeout(YD,e-sd.now()-vm)),su&&(su=clearInterval(su))):(su||(Lp=sd.now(),su=setInterval(Dre,bz)),Ul=1,xz(YD))}}function WD(e,t,n){var r=new Pp;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Ore=gm("start","end","cancel","interrupt"),jre=[],Sz=0,XD=1,jC=2,Mh=3,ZD=4,LC=5,_h=6;function bm(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Lre(e,n,{name:t,index:r,group:i,on:Ore,tween:jre,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Sz})}function xk(e,t){var n=Xr(e,t);if(n.state>Sz)throw new Error("too late; already scheduled");return n}function Si(e,t){var n=Xr(e,t);if(n.state>Mh)throw new Error("too late; already running");return n}function Xr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Lre(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=wz(s,0,n.time);function s(d){n.state=XD,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,g,y;if(n.state!==XD)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===Mh)return WD(o);y.state===ZD?(y.state=_h,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=_h,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(WD(function(){n.state===Mh&&(n.state=ZD,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=jC,n.on.call("start",e,e.__data__,n.index,n.group),n.state===jC){for(n.state=Mh,i=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=LC,1),p=-1,g=i.length;++p<g;)i[p].call(e,h);n.state===LC&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=_h,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Dh(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>jC&&r.state<LC,r.state=_h,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Pre(e){return this.each(function(){Dh(this,e)})}function Ire(e,t){var n,r;return function(){var i=Si(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Bre(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Si(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function zre(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Xr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Ire:Bre)(n,e,t))}function wk(e,t,n){var r=e._id;return e.each(function(){var i=Si(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Xr(i,r).value[t]}}function Cz(e,t){var n;return(typeof t=="number"?hi:t instanceof ha?Op:(n=ha(t))?(t=n,Op):gz)(e,t)}function qre(e){return function(){this.removeAttribute(e)}}function Vre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Fre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Ure(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function $re(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Gre(e,t){var n=ym(e),r=n==="transform"?kre:Cz;return this.attrTween(e,typeof t=="function"?(n.local?$re:Ure)(n,r,wk(this,"attr."+e,t)):t==null?(n.local?Vre:qre)(n):(n.local?Fre:Hre)(n,r,t))}function Kre(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Yre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Yre(e,s)),n}return i._value=t,i}function Xre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Kre(e,s)),n}return i._value=t,i}function Zre(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ym(e);return this.tween(n,(r.local?Wre:Xre)(r,t))}function Qre(e,t){return function(){xk(this,e).delay=+t.apply(this,arguments)}}function Jre(e,t){return t=+t,function(){xk(this,e).delay=t}}function eie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Qre:Jre)(t,e)):Xr(this.node(),t).delay}function tie(e,t){return function(){Si(this,e).duration=+t.apply(this,arguments)}}function nie(e,t){return t=+t,function(){Si(this,e).duration=t}}function rie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tie:nie)(t,e)):Xr(this.node(),t).duration}function iie(e,t){if(typeof t!="function")throw new Error;return function(){Si(this,e).ease=t}}function sie(e){var t=this._id;return arguments.length?this.each(iie(t,e)):Xr(this.node(),t).ease}function oie(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Si(this,e).ease=n}}function aie(e){if(typeof e!="function")throw new Error;return this.each(oie(this._id,e))}function lie(e){typeof e!="function"&&(e=ez(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new is(r,this._parents,this._name,this._id)}function cie(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),g,y=0;y<h;++y)(g=u[y]||d[y])&&(p[y]=g);for(;l<r;++l)o[l]=t[l];return new is(o,this._parents,this._name,this._id)}function uie(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function die(e,t,n){var r,i,s=uie(t)?xk:Si;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function fie(e,t){var n=this._id;return arguments.length<2?Xr(this.node(),n).on.on(e):this.each(die(n,e,t))}function hie(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pie(){return this.on("end.remove",hie(this._id))}function mie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=mk(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,g=0;g<u;++g)(h=l[g])&&(p=e.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),d[g]=p,bm(d[g],t,n,g,d,Xr(h,n)));return new is(s,this._parents,t,n)}function gie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=J6(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var g=e.call(h,h.__data__,p,u),y,x=Xr(h,n),S=0,w=g.length;S<w;++S)(y=g[S])&&bm(y,t,n,S,g,x);s.push(g),o.push(h)}return new is(s,o,t,n)}var yie=Nd.prototype.constructor;function vie(){return new yie(this._groups,this._parents)}function bie(e,t){var n,r,i;return function(){var s=Fl(this,e),o=(this.style.removeProperty(e),Fl(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Ez(e){return function(){this.style.removeProperty(e)}}function xie(e,t,n){var r,i=n+"",s;return function(){var o=Fl(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function wie(e,t,n){var r,i,s;return function(){var o=Fl(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Fl(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function Sie(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=Si(this,e),d=u.on,h=u.value[s]==null?l||(l=Ez(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function Cie(e,t,n){var r=(e+="")=="transform"?Ere:Cz;return t==null?this.styleTween(e,bie(e,r)).on("end.style."+e,Ez(e)):typeof t=="function"?this.styleTween(e,wie(e,r,wk(this,"style."+e,t))).each(Sie(this._id,e)):this.styleTween(e,xie(e,r,t),n).on("end.style."+e,null)}function Eie(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function kie(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Eie(e,o,n)),r}return s._value=t,s}function Nie(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,kie(e,t,n??""))}function Tie(e){return function(){this.textContent=e}}function Aie(e){return function(){var t=e(this);this.textContent=t??""}}function Mie(e){return this.tween("text",typeof e=="function"?Aie(wk(this,"text",e)):Tie(e==null?"":e+""))}function _ie(e){return function(t){this.textContent=e.call(this,t)}}function Die(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&_ie(i)),t}return r._value=e,r}function Rie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Die(e))}function Oie(){for(var e=this._name,t=this._id,n=kz(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=Xr(u,t);bm(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new is(r,this._parents,e,n)}function jie(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=Si(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var Lie=0;function is(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function kz(){return++Lie}var Yi=Nd.prototype;is.prototype={constructor:is,select:mie,selectAll:gie,selectChild:Yi.selectChild,selectChildren:Yi.selectChildren,filter:lie,merge:cie,selection:vie,transition:Oie,call:Yi.call,nodes:Yi.nodes,node:Yi.node,size:Yi.size,empty:Yi.empty,each:Yi.each,on:fie,attr:Gre,attrTween:Zre,style:Cie,styleTween:Nie,text:Mie,textTween:Rie,remove:pie,tween:zre,delay:eie,duration:rie,ease:sie,easeVarying:aie,end:jie,[Symbol.iterator]:Yi[Symbol.iterator]};function Pie(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Iie={time:null,delay:0,duration:250,ease:Pie};function Bie(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zie(e){var t,n;e instanceof is?(t=e._id,e=e._name):(t=kz(),(n=Iie).time=bk(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&bm(u,e,t,d,o,n||Bie(u,t));return new is(r,this._parents,e,t)}Nd.prototype.interrupt=Pre;Nd.prototype.transition=zie;const dh=e=>()=>e;function qie(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Qi(e,t,n){this.k=e,this.x=t,this.y=n}Qi.prototype={constructor:Qi,scale:function(e){return e===1?this:new Qi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Qi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xm=new Qi(1,0,0);Nz.prototype=Qi.prototype;function Nz(e){for(;!e.__zoom;)if(!(e=e.parentNode))return xm;return e.__zoom}function Q0(e){e.stopImmediatePropagation()}function ou(e){e.preventDefault(),e.stopImmediatePropagation()}function Vie(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Hie(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function QD(){return this.__zoom||xm}function Fie(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Uie(){return navigator.maxTouchPoints||"ontouchstart"in this}function $ie(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Tz(){var e=Vie,t=Hie,n=$ie,r=Fie,i=Uie,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=Ah,d=gm("start","zoom","end"),h,p,g,y=500,x=150,S=0,w=10;function E(z){z.property("__zoom",QD).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",V).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(z,F,I,q){var W=z.selection?z.selection():z;W.property("__zoom",QD),z!==W?A(z,F,I,q):W.interrupt().each(function(){_(this,arguments).event(q).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},E.scaleBy=function(z,F,I,q){E.scaleTo(z,function(){var W=this.__zoom.k,Q=typeof F=="function"?F.apply(this,arguments):F;return W*Q},I,q)},E.scaleTo=function(z,F,I,q){E.transform(z,function(){var W=t.apply(this,arguments),Q=this.__zoom,L=I==null?T(W):typeof I=="function"?I.apply(this,arguments):I,K=Q.invert(L),se=typeof F=="function"?F.apply(this,arguments):F;return n(k(N(Q,se),L,K),W,o)},I,q)},E.translateBy=function(z,F,I,q){E.transform(z,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof I=="function"?I.apply(this,arguments):I),t.apply(this,arguments),o)},null,q)},E.translateTo=function(z,F,I,q,W){E.transform(z,function(){var Q=t.apply(this,arguments),L=this.__zoom,K=q==null?T(Q):typeof q=="function"?q.apply(this,arguments):q;return n(xm.translate(K[0],K[1]).scale(L.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof I=="function"?-I.apply(this,arguments):-I),Q,o)},q,W)};function N(z,F){return F=Math.max(s[0],Math.min(s[1],F)),F===z.k?z:new Qi(F,z.x,z.y)}function k(z,F,I){var q=F[0]-I[0]*z.k,W=F[1]-I[1]*z.k;return q===z.x&&W===z.y?z:new Qi(z.k,q,W)}function T(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function A(z,F,I,q){z.on("start.zoom",function(){_(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(q).end()}).tween("zoom",function(){var W=this,Q=arguments,L=_(W,Q).event(q),K=t.apply(W,Q),se=I==null?T(K):typeof I=="function"?I.apply(W,Q):I,ce=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),H=W.__zoom,X=typeof F=="function"?F.apply(W,Q):F,ee=u(H.invert(se).concat(ce/H.k),X.invert(se).concat(ce/X.k));return function(ue){if(ue===1)ue=X;else{var le=ee(ue),ge=ce/le[2];ue=new Qi(ge,se[0]-le[0]*ge,se[1]-le[1]*ge)}L.zoom(null,ue)}})}function _(z,F,I){return!I&&z.__zooming||new R(z,F)}function R(z,F){this.that=z,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(z,F),this.taps=0}R.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,F){return this.mouse&&z!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var F=or(this.that).datum();d.call(z,this.that,new qie(z,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),F)}};function D(z,...F){if(!e.apply(this,arguments))return;var I=_(this,F).event(z),q=this.__zoom,W=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),Q=Ur(z);if(I.wheel)(I.mouse[0][0]!==Q[0]||I.mouse[0][1]!==Q[1])&&(I.mouse[1]=q.invert(I.mouse[0]=Q)),clearTimeout(I.wheel);else{if(q.k===W)return;I.mouse=[Q,q.invert(Q)],Dh(this),I.start()}ou(z),I.wheel=setTimeout(L,x),I.zoom("mouse",n(k(N(q,W),I.mouse[0],I.mouse[1]),I.extent,o));function L(){I.wheel=null,I.end()}}function P(z,...F){if(g||!e.apply(this,arguments))return;var I=z.currentTarget,q=_(this,F,!0).event(z),W=or(z.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",ce,!0),Q=Ur(z,I),L=z.clientX,K=z.clientY;uz(z.view),Q0(z),q.mouse=[Q,this.__zoom.invert(Q)],Dh(this),q.start();function se(H){if(ou(H),!q.moved){var X=H.clientX-L,ee=H.clientY-K;q.moved=X*X+ee*ee>S}q.event(H).zoom("mouse",n(k(q.that.__zoom,q.mouse[0]=Ur(H,I),q.mouse[1]),q.extent,o))}function ce(H){W.on("mousemove.zoom mouseup.zoom",null),dz(H.view,q.moved),ou(H),q.event(H).end()}}function $(z,...F){if(e.apply(this,arguments)){var I=this.__zoom,q=Ur(z.changedTouches?z.changedTouches[0]:z,this),W=I.invert(q),Q=I.k*(z.shiftKey?.5:2),L=n(k(N(I,Q),q,W),t.apply(this,F),o);ou(z),l>0?or(this).transition().duration(l).call(A,L,q,z):or(this).call(E.transform,L,q,z)}}function V(z,...F){if(e.apply(this,arguments)){var I=z.touches,q=I.length,W=_(this,F,z.changedTouches.length===q).event(z),Q,L,K,se;for(Q0(z),L=0;L<q;++L)K=I[L],se=Ur(K,this),se=[se,this.__zoom.invert(se),K.identifier],W.touch0?!W.touch1&&W.touch0[2]!==se[2]&&(W.touch1=se,W.taps=0):(W.touch0=se,Q=!0,W.taps=1+!!h);h&&(h=clearTimeout(h)),Q&&(W.taps<2&&(p=se[0],h=setTimeout(function(){h=null},y)),Dh(this),W.start())}}function B(z,...F){if(this.__zooming){var I=_(this,F).event(z),q=z.changedTouches,W=q.length,Q,L,K,se;for(ou(z),Q=0;Q<W;++Q)L=q[Q],K=Ur(L,this),I.touch0&&I.touch0[2]===L.identifier?I.touch0[0]=K:I.touch1&&I.touch1[2]===L.identifier&&(I.touch1[0]=K);if(L=I.that.__zoom,I.touch1){var ce=I.touch0[0],H=I.touch0[1],X=I.touch1[0],ee=I.touch1[1],ue=(ue=X[0]-ce[0])*ue+(ue=X[1]-ce[1])*ue,le=(le=ee[0]-H[0])*le+(le=ee[1]-H[1])*le;L=N(L,Math.sqrt(ue/le)),K=[(ce[0]+X[0])/2,(ce[1]+X[1])/2],se=[(H[0]+ee[0])/2,(H[1]+ee[1])/2]}else if(I.touch0)K=I.touch0[0],se=I.touch0[1];else return;I.zoom("touch",n(k(L,K,se),I.extent,o))}}function G(z,...F){if(this.__zooming){var I=_(this,F).event(z),q=z.changedTouches,W=q.length,Q,L;for(Q0(z),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),Q=0;Q<W;++Q)L=q[Q],I.touch0&&I.touch0[2]===L.identifier?delete I.touch0:I.touch1&&I.touch1[2]===L.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(L=Ur(L,this),Math.hypot(p[0]-L[0],p[1]-L[1])<w)){var K=or(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return E.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:dh(+z),E):r},E.filter=function(z){return arguments.length?(e=typeof z=="function"?z:dh(!!z),E):e},E.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:dh(!!z),E):i},E.extent=function(z){return arguments.length?(t=typeof z=="function"?z:dh([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),E):t},E.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],E):[s[0],s[1]]},E.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(z){return arguments.length?(n=z,E):n},E.duration=function(z){return arguments.length?(l=+z,E):l},E.interpolate=function(z){return arguments.length?(u=z,E):u},E.on=function(){var z=d.on.apply(d,arguments);return z===d?E:z},E.clickDistance=function(z){return arguments.length?(S=(z=+z)*z,E):Math.sqrt(S)},E.tapDistance=function(z){return arguments.length?(w=+z,E):w},E}const wi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},od=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Az=["Enter"," ","Escape"],Mz={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var ma;(function(e){e.Strict="strict",e.Loose="loose"})(ma||(ma={}));var aa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(aa||(aa={}));var ad;(function(e){e.Partial="partial",e.Full="full"})(ad||(ad={}));const _z={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ks;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ks||(Ks={}));var Ip;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ip||(Ip={}));var Te;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Te||(Te={}));const JD={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top};function Dz(e){return e===null?null:e?"valid":"invalid"}const Rz=e=>"id"in e&&"source"in e&&"target"in e,Gie=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Sk=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ad=(e,t=[0,0])=>{const{width:n,height:r}=as(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},Oz=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):Sk(i)?i:t.nodeLookup.get(i.id));const l=o?Bp(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return wm(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Sm(n)},Md=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Bp(r);n=wm(n,i)}}),Sm(n)},Ck=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Dd(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:g=!1}=d;if(o&&!p||g)continue;const y=h.width??d.width??d.initialWidth??null,x=h.height??d.height??d.initialHeight??null,S=ld(l,Gl(d)),w=(y??0)*(x??0),E=s&&S>0;(!d.internals.handleBounds||E||S>=w||d.dragging)&&u.push(d)}return u},Kie=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Yie(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Wie({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Yie(e,o),u=Md(l),d=Cm(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function jz({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",wi.error005());else{const y=l.measured.width,x=l.measured.height;y&&x&&(p=[[u,d],[u+y,d+x]])}else l&&Kl(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=Kl(p)?ga(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",wi.error015()),{position:{x:g.x-u+(o.measured.width??0)*h[0],y:g.y-d+(o.measured.height??0)*h[1]},positionAbsolute:g}}async function Xie({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const y=s.has(g.id),x=!y&&g.parentId&&o.find(S=>S.id===g.parentId);(y||x)&&o.push(g)}const l=new Set(t.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),h=Kie(o,u);for(const g of u)l.has(g.id)&&!h.find(x=>x.id===g.id)&&h.push(g);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const $l=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ga=(e={x:0,y:0},t,n)=>({x:$l(e.x,t[0][0],t[1][0]-(n?.width??0)),y:$l(e.y,t[0][1],t[1][1]-(n?.height??0))});function Lz(e,t,n){const{width:r,height:i}=as(n),{x:s,y:o}=n.internals.positionAbsolute;return ga(e,[[s,o],[s+r,o+i]],t)}const eR=(e,t,n)=>e<t?$l(Math.abs(e-t),1,t)/t:e>n?-$l(Math.abs(e-n),1,t)/t:0,Pz=(e,t,n=15,r=40)=>{const i=eR(e.x,r,t.width-r)*n,s=eR(e.y,r,t.height-r)*n;return[i,s]},wm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),PC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Sm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Gl=(e,t=[0,0])=>{const{x:n,y:r}=Sk(e)?e.internals.positionAbsolute:Ad(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Bp=(e,t=[0,0])=>{const{x:n,y:r}=Sk(e)?e.internals.positionAbsolute:Ad(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},Iz=(e,t)=>Sm(wm(PC(e),PC(t))),ld=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},tR=e=>Yr(e.width)&&Yr(e.height)&&Yr(e.x)&&Yr(e.y),Yr=e=>!isNaN(e)&&isFinite(e),Zie=(e,t)=>{},_d=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Dd=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?_d(l,o):l},zp=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function ml(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Qie(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=ml(e,n),i=ml(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=ml(e.top??e.y??0,n),i=ml(e.bottom??e.y??0,n),s=ml(e.left??e.x??0,t),o=ml(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Jie(e,t,n,r,i,s){const{x:o,y:l}=zp(e,[t,n,r]),{x:u,y:d}=zp({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const Cm=(e,t,n,r,i,s)=>{const o=Qie(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=$l(d,r,i),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*h,x=n/2-g*h,S=Jie(e,y,x,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:y-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},cd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Kl(e){return e!=null&&e!=="parent"}function as(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Bz(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function zz(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function nR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ese(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function tse(e){return{...Mz,...e||{}}}function Pu(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=mi(e),l=Dd({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?_d(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const Ek=e=>({width:e.offsetWidth,height:e.offsetHeight}),qz=e=>e?.getRootNode?.()||window?.document,nse=["INPUT","SELECT","TEXTAREA"];function Vz(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:nse.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Hz=e=>"clientX"in e,mi=(e,t)=>{const n=Hz(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},rR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...Ek(o)}})};function Fz({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function fh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function iR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Te.Left:return[t-fh(t-r,s),n];case Te.Right:return[t+fh(r-t,s),n];case Te.Top:return[t,n-fh(n-i,s)];case Te.Bottom:return[t,n+fh(i-n,s)]}}function kk({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top,curvature:o=.25}){const[l,u]=iR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=iR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,y,x]=Fz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,g,y,x]}function Nk({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function rse({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function ise({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=wm(Bp(e),Bp(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return ld(o,Sm(s))>0}const sse=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,ose=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Uz=(e,t)=>{if(!e.source||!e.target)return t;let n;return Rz(e)?n={...e}:n={...e,id:sse(e)},ose(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function $z({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=Nk({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const sR={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}},ase=({source:e,sourcePosition:t=Te.Bottom,target:n})=>t===Te.Left||t===Te.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},oR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function lse({source:e,sourcePosition:t=Te.Bottom,target:n,targetPosition:r=Te.Top,center:i,offset:s,stepPosition:o}){const l=sR[t],u=sR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=ase({source:d,sourcePosition:t,target:h}),g=p.x!==0?"x":"y",y=p[g];let x=[],S,w;const E={x:0,y:0},N={x:0,y:0},[,,k,T]=Nk({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*u[g]===-1){g==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const _=[{x:S,y:d.y},{x:S,y:h.y}],R=[{x:d.x,y:w},{x:h.x,y:w}];l[g]===y?x=g==="x"?_:R:x=g==="x"?R:_}else{const _=[{x:d.x,y:h.y}],R=[{x:h.x,y:d.y}];if(g==="x"?x=l.x===y?R:_:x=l.y===y?_:R,t===r){const B=Math.abs(e[g]-n[g]);if(B<=s){const G=Math.min(s-1,s-B);l[g]===y?E[g]=(d[g]>e[g]?-1:1)*G:N[g]=(h[g]>n[g]?-1:1)*G}}if(t!==r){const B=g==="x"?"y":"x",G=l[g]===u[B],z=d[B]>h[B],F=d[B]<h[B];(l[g]===1&&(!G&&z||G&&F)||l[g]!==1&&(!G&&F||G&&z))&&(x=g==="x"?_:R)}const D={x:d.x+E.x,y:d.y+E.y},P={x:h.x+N.x,y:h.y+N.y},$=Math.max(Math.abs(D.x-x[0].x),Math.abs(P.x-x[0].x)),V=Math.max(Math.abs(D.y-x[0].y),Math.abs(P.y-x[0].y));$>=V?(S=(D.x+P.x)/2,w=x[0].y):(S=x[0].x,w=(D.y+P.y)/2)}return[[e,{x:d.x+E.x,y:d.y+E.y},...x,{x:h.x+N.x,y:h.y+N.y},n],S,w,k,T]}function cse(e,t,n,r){const i=Math.min(oR(e,t)/2,oR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function IC({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,g,y,x,S]=lse({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((E,N,k)=>{let T="";return k>0&&k<p.length-1?T=cse(p[k-1],N,p[k+1],o):T=`${k===0?"M":"L"}${N.x} ${N.y}`,E+=T,E},""),g,y,x,S]}function aR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function use(e){const{sourceNode:t,targetNode:n}=e;if(!aR(t)||!aR(n))return null;const r=t.internals.handleBounds||lR(t.handles),i=n.internals.handleBounds||lR(n.handles),s=cR(r?.source??[],e.sourceHandle),o=cR(e.connectionMode===ma.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",wi.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Te.Bottom,u=o?.position||Te.Top,d=ud(t,s,l),h=ud(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function lR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function ud(e,t,n=Te.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??as(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Te.Top:return{x:i+o/2,y:s};case Te.Right:return{x:i+o,y:s+l/2};case Te.Bottom:return{x:i+o/2,y:s+l};case Te.Left:return{x:i,y:s+l/2}}}function cR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function BC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function dse(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=BC(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const Tk={nodeOrigin:[0,0],nodeExtent:od,elevateNodesOnSelect:!0,defaults:{}},fse={...Tk,checkEquality:!0};function Ak(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function hse(e,t,n){const r=Ak(Tk,n);for(const i of e.values())if(i.parentId)Mk(i,e,t,r);else{const s=Ad(i,r.nodeOrigin),o=Kl(i.extent)?i.extent:r.nodeExtent,l=ga(s,o,as(i));i.internals.positionAbsolute=l}}function zC(e,t,n,r){const i=Ak(fse,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=Ad(u,i.nodeOrigin),p=Kl(u.extent)?u.extent:i.nodeExtent,g=ga(h,p,as(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:Gz(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&Mk(d,t,n,r)}return s}function pse(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Mk(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=Ak(Tk,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}pse(e,n);const d=i?1e3:0,{x:h,y:p,z:g}=mse(e,u,s,o,d),{positionAbsolute:y}=e.internals,x=h!==y.x||p!==y.y;(x||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:p}:y,z:g}})}function Gz(e,t){return(Yr(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function mse(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=as(e),u=Ad(e,n),d=Kl(e.extent)?ga(u,e.extent,l):u;let h=ga({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=Lz(h,l,t));const p=Gz(e,i),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=p?g+1:p}}function _k(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Gl(l),d=Iz(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=as(l),p=l.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,y=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(x-h.width)*p[0],E=(S-h.height)*p[1];(g>0||y>0||w||E)&&(i.push({id:u,type:"position",position:{x:l.position.x-g+w,y:l.position.y-y+E}}),n.get(u)?.forEach(N=>{e.some(k=>k.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+g,y:N.position.y+y}})})),(h.width<o.width||h.height<o.height||g||y)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(g?p[0]*g-w:0),height:S+(y?p[1]*y-E:0)}})}),i}function gse(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const g of e.values()){const y=t.get(g.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const x=Ek(g.nodeElement),S=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!y.internals.handleBounds||g.force))){const E=g.nodeElement.getBoundingClientRect(),N=Kl(y.extent)?y.extent:s;let{positionAbsolute:k}=y.internals;y.parentId&&y.extent==="parent"?k=Lz(k,x,t.get(y.parentId)):N&&(k=ga(k,N,x));const T={...y,measured:x,internals:{...y.internals,positionAbsolute:k,handleBounds:{source:rR("source",g.nodeElement,E,h,y.id),target:rR("target",g.nodeElement,E,h,y.id)}}};t.set(y.id,T),y.parentId&&Mk(T,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&p.push({id:y.id,parentId:y.parentId,rect:Gl(T,i)}))}}if(p.length>0){const g=_k(p,t,n,i);u.push(...g)}return{changes:u,updatedInternals:l}}async function yse({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function uR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function Kz(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;uR("source",u,h,e,i,o),uR("target",u,d,e,s,l),t.set(r.id,r)}}function Yz(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Yz(n,t):!1}function dR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function vse(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!Yz(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function J0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function bse({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=_d(s,t);return{x:o.x-s.x,y:o.y-s.y}}function xse({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,g=null,y=!1,x=!1,S=null;function w({noDragClassName:N,handleSelector:k,domNode:T,isSelectable:A,nodeId:_,nodeClickDistance:R=0}){g=or(T);function D({x:B,y:G}){const{nodeLookup:z,nodeExtent:F,snapGrid:I,snapToGrid:q,nodeOrigin:W,onNodeDrag:Q,onSelectionDrag:L,onError:K,updateNodePositions:se}=t();s={x:B,y:G};let ce=!1;const H=l.size>1,X=H&&F?PC(Md(l)):null,ee=H&&q?bse({dragItems:l,snapGrid:I,x:B,y:G}):null;for(const[ue,le]of l){if(!z.has(ue))continue;let ge={x:B-le.distance.x,y:G-le.distance.y};q&&(ge=ee?{x:Math.round(ge.x+ee.x),y:Math.round(ge.y+ee.y)}:_d(ge,I));let Ee=null;if(H&&F&&!le.extent&&X){const{positionAbsolute:Ne}=le.internals,we=Ne.x-X.x+F[0][0],ve=Ne.x+le.measured.width-X.x2+F[1][0],Pe=Ne.y-X.y+F[0][1],Ae=Ne.y+le.measured.height-X.y2+F[1][1];Ee=[[we,Pe],[ve,Ae]]}const{position:je,positionAbsolute:ke}=jz({nodeId:ue,nextPosition:ge,nodeLookup:z,nodeExtent:Ee||F,nodeOrigin:W,onError:K});ce=ce||le.position.x!==je.x||le.position.y!==je.y,le.position=je,le.internals.positionAbsolute=ke}if(x=x||ce,!!ce&&(se(l,!0),S&&(r||Q||!_&&L))){const[ue,le]=J0({nodeId:_,dragItems:l,nodeLookup:z});r?.(S,l,ue,le),Q?.(S,ue,le),_||L?.(S,le)}}async function P(){if(!h)return;const{transform:B,panBy:G,autoPanSpeed:z,autoPanOnNodeDrag:F}=t();if(!F){u=!1,cancelAnimationFrame(o);return}const[I,q]=Pz(d,h,z);(I!==0||q!==0)&&(s.x=(s.x??0)-I/B[2],s.y=(s.y??0)-q/B[2],await G({x:I,y:q})&&D(s)),o=requestAnimationFrame(P)}function $(B){const{nodeLookup:G,multiSelectionActive:z,nodesDraggable:F,transform:I,snapGrid:q,snapToGrid:W,selectNodesOnDrag:Q,onNodeDragStart:L,onSelectionDragStart:K,unselectNodesAndEdges:se}=t();p=!0,(!Q||!A)&&!z&&_&&(G.get(_)?.selected||se()),A&&Q&&_&&e?.(_);const ce=Pu(B.sourceEvent,{transform:I,snapGrid:q,snapToGrid:W,containerBounds:h});if(s=ce,l=vse(G,F,ce,_),l.size>0&&(n||L||!_&&K)){const[H,X]=J0({nodeId:_,dragItems:l,nodeLookup:G});n?.(B.sourceEvent,l,H,X),L?.(B.sourceEvent,H,X),_||K?.(B.sourceEvent,X)}}const V=fz().clickDistance(R).on("start",B=>{const{domNode:G,nodeDragThreshold:z,transform:F,snapGrid:I,snapToGrid:q}=t();h=G?.getBoundingClientRect()||null,y=!1,x=!1,S=B.sourceEvent,z===0&&$(B),s=Pu(B.sourceEvent,{transform:F,snapGrid:I,snapToGrid:q,containerBounds:h}),d=mi(B.sourceEvent,h)}).on("drag",B=>{const{autoPanOnNodeDrag:G,transform:z,snapGrid:F,snapToGrid:I,nodeDragThreshold:q,nodeLookup:W}=t(),Q=Pu(B.sourceEvent,{transform:z,snapGrid:F,snapToGrid:I,containerBounds:h});if(S=B.sourceEvent,(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1||_&&!W.has(_))&&(y=!0),!y){if(!u&&G&&p&&(u=!0,P()),!p){const L=Q.xSnapped-(s.x??0),K=Q.ySnapped-(s.y??0);Math.sqrt(L*L+K*K)>q&&$(B)}(s.x!==Q.xSnapped||s.y!==Q.ySnapped)&&l&&p&&(d=mi(B.sourceEvent,h),D(Q))}}).on("end",B=>{if(!(!p||y)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:G,updateNodePositions:z,onNodeDragStop:F,onSelectionDragStop:I}=t();if(x&&(z(l,!1),x=!1),i||F||!_&&I){const[q,W]=J0({nodeId:_,dragItems:l,nodeLookup:G,dragging:!1});i?.(B.sourceEvent,l,q,W),F?.(B.sourceEvent,q,W),_||I?.(B.sourceEvent,W)}}}).filter(B=>{const G=B.target;return!B.button&&(!N||!dR(G,`.${N}`,T))&&(!k||dR(G,k,T))});g.call(V)}function E(){g?.on(".drag",null)}return{update:w,destroy:E}}function wse(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())ld(i,Gl(s))>0&&r.push(s);return r}const Sse=250;function Cse(e,t,n,r){let i=[],s=1/0;const o=wse(e,n,t+Sse);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=ud(l,d,d.position,!0),g=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...d,x:h,y:p}],s=g):g===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function Wz(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...ud(o,u,u.position,!0)}:u}function Xz(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Ese(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Zz=()=>!0;function kse(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:y,onConnectStart:x,onConnect:S,onConnectEnd:w,isValidConnection:E=Zz,onReconnectEnd:N,updateConnection:k,getTransform:T,getFromHandle:A,autoPanSpeed:_,dragThreshold:R=1,handleDomNode:D}){const P=qz(e.target);let $=0,V;const{x:B,y:G}=mi(e),z=Xz(s,D),F=l?.getBoundingClientRect();let I=!1;if(!F||!z)return;const q=Wz(i,z,r,u,t);if(!q)return;let W=mi(e,F),Q=!1,L=null,K=!1,se=null;function ce(){if(!h||!F)return;const[je,ke]=Pz(W,F,_);g({x:je,y:ke}),$=requestAnimationFrame(ce)}const H={...q,nodeId:i,type:z,position:q.position},X=u.get(i);let ue={inProgress:!0,isValid:null,from:ud(X,H,Te.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:X,to:W,toHandle:null,toPosition:JD[H.position],toNode:null};function le(){I=!0,k(ue),x?.(e,{nodeId:i,handleId:r,handleType:z})}R===0&&le();function ge(je){if(!I){const{x:ve,y:Pe}=mi(je),Ae=ve-B,at=Pe-G;if(!(Ae*Ae+at*at>R*R))return;le()}if(!A()||!H){Ee(je);return}const ke=T();W=mi(je,F),V=Cse(Dd(W,ke,!1,[1,1]),n,u,H),Q||(ce(),Q=!0);const Ne=Qz(je,{handle:V,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:E,doc:P,lib:d,flowId:p,nodeLookup:u});se=Ne.handleDomNode,L=Ne.connection,K=Ese(!!V,Ne.isValid);const we={...ue,isValid:K,to:Ne.toHandle&&K?zp({x:Ne.toHandle.x,y:Ne.toHandle.y},ke):W,toHandle:Ne.toHandle,toPosition:K&&Ne.toHandle?Ne.toHandle.position:JD[H.position],toNode:Ne.toHandle?u.get(Ne.toHandle.nodeId):null};K&&V&&ue.toHandle&&we.toHandle&&ue.toHandle.type===we.toHandle.type&&ue.toHandle.nodeId===we.toHandle.nodeId&&ue.toHandle.id===we.toHandle.id&&ue.to.x===we.to.x&&ue.to.y===we.to.y||(k(we),ue=we)}function Ee(je){if(I){(V||se)&&L&&K&&S?.(L);const{inProgress:ke,...Ne}=ue,we={...Ne,toPosition:ue.toHandle?ue.toPosition:null};w?.(je,we),s&&N?.(je,we)}y(),cancelAnimationFrame($),Q=!1,K=!1,L=null,se=null,P.removeEventListener("mousemove",ge),P.removeEventListener("mouseup",Ee),P.removeEventListener("touchmove",ge),P.removeEventListener("touchend",Ee)}P.addEventListener("mousemove",ge),P.addEventListener("mouseup",Ee),P.addEventListener("touchmove",ge),P.addEventListener("touchend",Ee)}function Qz(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=Zz,nodeLookup:h}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:x}=mi(e),S=o.elementFromPoint(y,x),w=S?.classList.contains(`${l}-flow__handle`)?S:g,E={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const N=Xz(void 0,w),k=w.getAttribute("data-nodeid"),T=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!k||!N)return E;const R={source:p?k:r,sourceHandle:p?T:i,target:p?r:k,targetHandle:p?i:T};E.connection=R;const P=A&&_&&(n===ma.Strict?p&&N==="source"||!p&&N==="target":k!==r||T!==i);E.isValid=P&&d(R),E.toHandle=Wz(k,N,T,h,n,!0)}return E}const qC={onPointerDown:kse,isValid:Qz};function Nse({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=or(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const x=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=k.sourceEvent.ctrlKey&&cd()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,R=T[2]*Math.pow(2,_*A);t.scaleTo(R)};let S=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},E=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[A[0]-S[0],A[1]-S[1]];S=A;const R=r()*Math.max(T[2],Math.log(T[2]))*(y?-1:1),D={x:T[0]-_[0]*R,y:T[1]-_[1]*R},P=[[0,0],[u,d]];t.setViewportConstrained({x:D.x,y:D.y,zoom:T[2]},P,l)},N=Tz().on("start",w).on("zoom",p?E:null).on("zoom.wheel",g?x:null);i.call(N,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Ur}}const Tse=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Em=e=>({x:e.x,y:e.y,zoom:e.k}),ev=({x:e,y:t,zoom:n})=>xm.translate(e,t).scale(n),Al=(e,t)=>e.target.closest(`.${t}`),Jz=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Ase=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,tv=(e,t=0,n=Ase,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},eq=e=>{const t=e.ctrlKey&&cd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Mse({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(Al(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Ur(h),E=eq(h),N=p*Math.pow(2,E);r.scaleTo(n,N,w,h);return}const g=h.deltaMode===1?20:1;let y=i===aa.Vertical?0:h.deltaX*g,x=i===aa.Horizontal?0:h.deltaY*g;!cd()&&h.shiftKey&&i!==aa.Vertical&&(y=h.deltaY*g,x=0),r.translateBy(n,-(y/p)*s,-(x/p)*s,{internal:!0});const S=Em(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function _se({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=Al(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function Dse({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Em(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Rse({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&Jz(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Em(s.transform))}}function Ose({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&Jz(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&Tse(e.prevViewport,o.transform))){const l=Em(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function jse({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,g=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(Al(h,`${d}-flow__node`)||Al(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Al(h,l)&&h.type==="wheel"||Al(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!g&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&y}}function Lse({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=Tz().clickDistance(!Yr(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),y=or(e).call(g);k({x:s.x,y:s.y,zoom:$l(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const x=y.on("wheel.zoom"),S=y.on("dblclick.zoom");g.wheelDelta(eq);function w(B,G){return y?new Promise(z=>{g?.interpolate(G?.interpolate==="linear"?Lu:Ah).transform(tv(y,G?.duration,G?.ease,()=>z(!0)),B)}):Promise.resolve(!1)}function E({noWheelClassName:B,noPanClassName:G,onPaneContextMenu:z,userSelectionActive:F,panOnScroll:I,panOnDrag:q,panOnScrollMode:W,panOnScrollSpeed:Q,preventScrolling:L,zoomOnPinch:K,zoomOnScroll:se,zoomOnDoubleClick:ce,zoomActivationKeyPressed:H,lib:X,onTransformChange:ee}){F&&!h.isZoomingOrPanning&&N();const le=I&&!H&&!F?Mse({zoomPanValues:h,noWheelClassName:B,d3Selection:y,d3Zoom:g,panOnScrollMode:W,panOnScrollSpeed:Q,zoomOnPinch:K,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):_se({noWheelClassName:B,preventScrolling:L,d3ZoomHandler:x});if(y.on("wheel.zoom",le,{passive:!1}),!F){const Ee=Dse({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});g.on("start",Ee);const je=Rse({zoomPanValues:h,panOnDrag:q,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:ee});g.on("zoom",je);const ke=Ose({zoomPanValues:h,panOnDrag:q,panOnScroll:I,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:d});g.on("end",ke)}const ge=jse({zoomActivationKeyPressed:H,panOnDrag:q,zoomOnScroll:se,panOnScroll:I,zoomOnDoubleClick:ce,zoomOnPinch:K,userSelectionActive:F,noPanClassName:G,noWheelClassName:B,lib:X});g.filter(ge),ce?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function N(){g.on("zoom",null)}async function k(B,G,z){const F=ev(B),I=g?.constrain()(F,G,z);return I&&await w(I),new Promise(q=>q(I))}async function T(B,G){const z=ev(B);return await w(z,G),new Promise(F=>F(z))}function A(B){if(y){const G=ev(B),z=y.property("__zoom");(z.k!==B.zoom||z.x!==B.x||z.y!==B.y)&&g?.transform(y,G,null,{sync:!0})}}function _(){const B=y?Nz(y.node()):{x:0,y:0,k:1};return{x:B.x,y:B.y,zoom:B.k}}function R(B,G){return y?new Promise(z=>{g?.interpolate(G?.interpolate==="linear"?Lu:Ah).scaleTo(tv(y,G?.duration,G?.ease,()=>z(!0)),B)}):Promise.resolve(!1)}function D(B,G){return y?new Promise(z=>{g?.interpolate(G?.interpolate==="linear"?Lu:Ah).scaleBy(tv(y,G?.duration,G?.ease,()=>z(!0)),B)}):Promise.resolve(!1)}function P(B){g?.scaleExtent(B)}function $(B){g?.translateExtent(B)}function V(B){const G=!Yr(B)||B<0?0:B;g?.clickDistance(G)}return{update:E,destroy:N,setViewport:T,setViewportConstrained:k,getViewport:_,scaleTo:R,scaleBy:D,setScaleExtent:P,setTranslateExtent:$,syncViewport:A,setClickDistance:V}}var ya;(function(e){e.Line="line",e.Handle="handle"})(ya||(ya={}));const Pse=["top-left","top-right","bottom-left","bottom-right"],Ise=["top","right","bottom","left"];function Bse({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function zse(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Bs(e,t){return Math.max(0,t-e)}function zs(e,t){return Math.max(0,e-t)}function hh(e,t,n){return Math.max(0,t-e,e-n)}function fR(e,t){return e?!t:t}function qse(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,g=h&&p,{xSnapped:y,ySnapped:x}=n,{minWidth:S,maxWidth:w,minHeight:E,maxHeight:N}=r,{x:k,y:T,width:A,height:_,aspectRatio:R}=e;let D=Math.floor(h?y-e.pointerX:0),P=Math.floor(p?x-e.pointerY:0);const $=A+(u?-D:D),V=_+(d?-P:P),B=-s[0]*A,G=-s[1]*_;let z=hh($,S,w),F=hh(V,E,N);if(o){let W=0,Q=0;u&&D<0?W=Bs(k+D+B,o[0][0]):!u&&D>0&&(W=zs(k+$+B,o[1][0])),d&&P<0?Q=Bs(T+P+G,o[0][1]):!d&&P>0&&(Q=zs(T+V+G,o[1][1])),z=Math.max(z,W),F=Math.max(F,Q)}if(l){let W=0,Q=0;u&&D>0?W=zs(k+D,l[0][0]):!u&&D<0&&(W=Bs(k+$,l[1][0])),d&&P>0?Q=zs(T+P,l[0][1]):!d&&P<0&&(Q=Bs(T+V,l[1][1])),z=Math.max(z,W),F=Math.max(F,Q)}if(i){if(h){const W=hh($/R,E,N)*R;if(z=Math.max(z,W),o){let Q=0;!u&&!d||u&&!d&&g?Q=zs(T+G+$/R,o[1][1])*R:Q=Bs(T+G+(u?D:-D)/R,o[0][1])*R,z=Math.max(z,Q)}if(l){let Q=0;!u&&!d||u&&!d&&g?Q=Bs(T+$/R,l[1][1])*R:Q=zs(T+(u?D:-D)/R,l[0][1])*R,z=Math.max(z,Q)}}if(p){const W=hh(V*R,S,w)/R;if(F=Math.max(F,W),o){let Q=0;!u&&!d||d&&!u&&g?Q=zs(k+V*R+B,o[1][0])/R:Q=Bs(k+(d?P:-P)*R+B,o[0][0])/R,F=Math.max(F,Q)}if(l){let Q=0;!u&&!d||d&&!u&&g?Q=Bs(k+V*R,l[1][0])/R:Q=zs(k+(d?P:-P)*R,l[0][0])/R,F=Math.max(F,Q)}}}P=P+(P<0?F:-F),D=D+(D<0?z:-z),i&&(g?$>V*R?P=(fR(u,d)?-D:D)/R:D=(fR(u,d)?-P:P)*R:h?(P=D/R,d=u):(D=P*R,u=d));const I=u?k+D:k,q=d?T+P:T;return{width:A+(u?-D:D),height:_+(d?-P:P),x:s[0]*D*(u?-1:1)+I,y:s[1]*P*(d?-1:1)+q}}const tq={width:0,height:0,x:0,y:0},Vse={...tq,pointerX:0,pointerY:0,aspectRatio:1};function Hse(e){return[[0,0],[e.measured.width,e.measured.height]]}function Fse(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Use({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=or(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:g,onResize:y,onResizeEnd:x,shouldResize:S}){let w={...tq},E={...Vse};const N=zse(u);let k,T=null,A=[],_,R,D;const P=fz().on("start",$=>{const{nodeLookup:V,transform:B,snapGrid:G,snapToGrid:z,nodeOrigin:F,paneDomNode:I}=n();if(k=V.get(t),!k)return;T=I?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:W}=Pu($.sourceEvent,{transform:B,snapGrid:G,snapToGrid:z,containerBounds:T});w={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},E={...w,pointerX:q,pointerY:W,aspectRatio:w.width/w.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=V.get(k.parentId),R=_&&k.extent==="parent"?Hse(_):void 0),A=[],D=void 0;for(const[Q,L]of V)if(L.parentId===t&&(A.push({id:Q,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const K=Fse(L,k,L.origin??F);D?D=[[Math.min(K[0][0],D[0][0]),Math.min(K[0][1],D[0][1])],[Math.max(K[1][0],D[1][0]),Math.max(K[1][1],D[1][1])]]:D=K}g?.($,{...w})}).on("drag",$=>{const{transform:V,snapGrid:B,snapToGrid:G,nodeOrigin:z}=n(),F=Pu($.sourceEvent,{transform:V,snapGrid:B,snapToGrid:G,containerBounds:T}),I=[];if(!k)return;const{x:q,y:W,width:Q,height:L}=w,K={},se=k.origin??z,{width:ce,height:H,x:X,y:ee}=qse(E,N,F,d,h,se,R,D),ue=ce!==Q,le=H!==L,ge=X!==q&&ue,Ee=ee!==W&&le;if(!ge&&!Ee&&!ue&&!le)return;if((ge||Ee||se[0]===1||se[1]===1)&&(K.x=ge?X:w.x,K.y=Ee?ee:w.y,w.x=K.x,w.y=K.y,A.length>0)){const we=X-q,ve=ee-W;for(const Pe of A)Pe.position={x:Pe.position.x-we+se[0]*(ce-Q),y:Pe.position.y-ve+se[1]*(H-L)},I.push(Pe)}if((ue||le)&&(K.width=ue&&(!p||p==="horizontal")?ce:w.width,K.height=le&&(!p||p==="vertical")?H:w.height,w.width=K.width,w.height=K.height),_&&k.expandParent){const we=se[0]*(K.width??0);K.x&&K.x<we&&(w.x=we,E.x=E.x-(K.x-we));const ve=se[1]*(K.height??0);K.y&&K.y<ve&&(w.y=ve,E.y=E.y-(K.y-ve))}const je=Bse({width:w.width,prevWidth:Q,height:w.height,prevHeight:L,affectsX:N.affectsX,affectsY:N.affectsY}),ke={...w,direction:je};S?.($,ke)!==!1&&(y?.($,ke),r(K,I))}).on("end",$=>{x?.($,{...w}),i?.({...w})});s.call(P)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const $se={},hR=e=>{let t;const n=new Set,r=(h,p)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(x=>x(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{($se?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},Gse=e=>e?hR(e):hR,{useDebugValue:Kse}=Re,{useSyncExternalStoreWithSelector:Yse}=lJ,Wse=e=>e;function nq(e,t=Wse,n){const r=Yse(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Kse(r),r}const pR=(e,t)=>{const n=Gse(e),r=(i,s=t)=>nq(n,i,s);return Object.assign(r,n),r},Xse=(e,t)=>e?pR(e,t):pR;function kt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const km=O.createContext(null),Zse=km.Provider,rq=wi.error001();function Ze(e,t){const n=O.useContext(km);if(n===null)throw new Error(rq);return nq(n,e,t)}function bt(){const e=O.useContext(km);if(e===null)throw new Error(rq);return O.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const mR={display:"none"},Qse={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},iq="react-flow__node-desc",sq="react-flow__edge-desc",Jse="react-flow__aria-live",eoe=e=>e.ariaLiveMessage,toe=e=>e.ariaLabelConfig;function noe({rfId:e}){const t=Ze(eoe);return v.jsx("div",{id:`${Jse}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Qse,children:t})}function roe({rfId:e,disableKeyboardA11y:t}){const n=Ze(toe);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${iq}-${e}`,style:mR,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${sq}-${e}`,style:mR,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(noe,{rfId:e})]})}const Nm=O.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return v.jsx("div",{className:Kt(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});Nm.displayName="Panel";function ioe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx(Nm,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const soe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},ph=e=>e.id;function ooe(e,t){return kt(e.selectedNodes.map(ph),t.selectedNodes.map(ph))&&kt(e.selectedEdges.map(ph),t.selectedEdges.map(ph))}function aoe({onSelectionChange:e}){const t=bt(),{selectedNodes:n,selectedEdges:r}=Ze(soe,ooe);return O.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const loe=e=>!!e.onSelectionChangeHandlers;function coe({onSelectionChange:e}){const t=Ze(loe);return e||t?v.jsx(aoe,{onSelectionChange:e}):null}const oq=[0,0],uoe={x:0,y:0,zoom:1},doe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],gR=[...doe,"rfId"],foe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),yR={translateExtent:od,nodeOrigin:oq,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function hoe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=Ze(foe,kt),h=bt();O.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=yR,l()}),[]);const p=O.useRef(yR);return O.useEffect(()=>{for(const g of gR){const y=e[g],x=p.current[g];y!==x&&(typeof e[g]>"u"||(g==="nodes"?t(y):g==="edges"?n(y):g==="minZoom"?r(y):g==="maxZoom"?i(y):g==="translateExtent"?s(y):g==="nodeExtent"?o(y):g==="paneClickDistance"?d(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:tse(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=e},gR.map(g=>e[g])),null}function vR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function poe(e){const[t,n]=O.useState(e==="system"?null:e);return O.useEffect(()=>{if(e!=="system"){n(e);return}const r=vR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:vR()?.matches?"dark":"light"}const bR=typeof document<"u"?document:null;function dd(e=null,t={target:bR,actInsideInputWithModifier:!0}){const[n,r]=O.useState(!1),i=O.useRef(!1),s=O.useRef(new Set([])),[o,l]=O.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,g)=>p.concat(...g),[]);return[d,h]}return[[],[]]},[e]);return O.useEffect(()=>{const u=t?.target??bR,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!i.current||i.current&&!d)&&Vz(y))return!1;const S=wR(y.code,l);if(s.current.add(y[S]),xR(o,s.current,!1)){const w=y.composedPath?.()?.[0]||y.target,E=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!E)&&y.preventDefault(),r(!0)}},p=y=>{const x=wR(y.code,l);xR(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[x]),y.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function xR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function wR(e,t){return t.includes(e)?"code":"key"}const moe=()=>{const e=bt();return O.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=Cm(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return Dd(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=zp(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function aq(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)goe(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function goe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function lq(e,t){return aq(e,t)}function cq(e,t){return aq(e,t)}function Ho(e,t){return{id:e,type:"select",selected:t}}function Ml(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(Ho(s.id,o)))}return r}function SR({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function CR(e){return{id:e.id,type:"remove"}}const ER=e=>Gie(e),yoe=e=>Rz(e);function uq(e){return O.forwardRef(e)}const voe=typeof window<"u"?O.useLayoutEffect:O.useEffect;function kR(e){const[t,n]=O.useState(BigInt(0)),[r]=O.useState(()=>boe(()=>n(i=>i+BigInt(1))));return voe(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function boe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const dq=O.createContext(null);function xoe({children:e}){const t=bt(),n=O.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:g,fitViewQueued:y}=t.getState();let x=u;for(const w of l)x=typeof w=="function"?w(x):w;const S=SR({items:x,lookup:g});h&&d(x),S.length>0?p?.(S):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:E,setNodes:N}=t.getState();w&&N(E)})},[]),r=kR(n),i=O.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:g}=t.getState();let y=u;for(const x of l)y=typeof x=="function"?x(y):x;h?d(y):p&&p(SR({items:y,lookup:g}))},[]),s=kR(i),o=O.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return v.jsx(dq.Provider,{value:o,children:e})}function woe(){const e=O.useContext(dq);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Soe=e=>!!e.panZoom;function fd(){const e=moe(),t=bt(),n=woe(),r=Ze(Soe),i=O.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),x=ER(p)?p:g.get(p.id),S=x.parentId?zz(x.position,x.measured,x.parentId,g,y):x.position,w={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return Gl(w)},d=(p,g,y={replace:!1})=>{o(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&ER(w)?w:{...S,...w}}return S}))},h=(p,g,y={replace:!1})=>{l(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&yoe(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[x,S,w]=y;return{nodes:p.map(E=>({...E})),edges:g.map(E=>({...E})),viewport:{x,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:x,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:E,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:T}=t.getState(),{nodes:A,edges:_}=await Xie({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:x,onBeforeDelete:T}),R=_.length>0,D=A.length>0;if(R){const P=_.map(CR);w?.(_),N(P)}if(D){const P=A.map(CR);S?.(A),E(P)}return(D||R)&&k?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,g=!0,y)=>{const x=tR(p),S=x?p:u(p),w=y!==void 0;return S?(y||t.getState().nodes).filter(E=>{const N=t.getState().nodeLookup.get(E.id);if(N&&!x&&(E.id===p.id||!N.internals.positionAbsolute))return!1;const k=Gl(w?E:N),T=ld(k,S);return g&&T>0||T>=k.width*k.height||T>=S.width*S.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const S=tR(p)?p:u(p);if(!S)return!1;const w=ld(S,g);return y&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,g,y={replace:!1})=>{d(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},updateEdge:h,updateEdgeData:(p,g,y={replace:!1})=>{h(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return Oz(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??ese();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return O.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const NR=e=>e.selected,Coe=typeof window<"u"?window:void 0;function Eoe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=bt(),{deleteElements:r}=fd(),i=dd(e,{actInsideInputWithModifier:!1}),s=dd(t,{target:Coe});O.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(NR),edges:o.filter(NR)}),n.setState({nodesSelectionActive:!1})}},[i]),O.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function koe(e){const t=bt();O.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=Ek(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",wi.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Tm={position:"absolute",width:"100%",height:"100%",top:0,left:0},Noe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function Toe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=aa.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:x,noWheelClassName:S,noPanClassName:w,onViewportChange:E,isControlledViewport:N,paneClickDistance:k}){const T=bt(),A=O.useRef(null),{userSelectionActive:_,lib:R}=Ze(Noe,kt),D=dd(g),P=O.useRef();koe(A);const $=O.useCallback(V=>{E?.({x:V[0],y:V[1],zoom:V[2]}),N||T.setState({transform:V})},[E,N]);return O.useEffect(()=>{if(A.current){P.current=Lse({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:k,onDraggingChange:z=>T.setState({paneDragging:z}),onPanZoomStart:(z,F)=>{const{onViewportChangeStart:I,onMoveStart:q}=T.getState();q?.(z,F),I?.(F)},onPanZoom:(z,F)=>{const{onViewportChange:I,onMove:q}=T.getState();q?.(z,F),I?.(F)},onPanZoomEnd:(z,F)=>{const{onViewportChangeEnd:I,onMoveEnd:q}=T.getState();q?.(z,F),I?.(F)}});const{x:V,y:B,zoom:G}=P.current.getViewport();return T.setState({panZoom:P.current,transform:[V,B,G],domNode:A.current.closest(".react-flow")}),()=>{P.current?.destroy()}}},[]),O.useEffect(()=>{P.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:y,noPanClassName:w,userSelectionActive:_,noWheelClassName:S,lib:R,onTransformChange:$})},[e,t,n,r,i,s,o,l,D,y,w,_,S,R,$]),v.jsx("div",{className:"react-flow__renderer",ref:A,style:Tm,children:x})}const Aoe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Moe(){const{userSelectionActive:e,userSelectionRect:t}=Ze(Aoe,kt);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const nv=(e,t)=>n=>{n.target===t.current&&e?.(n)},_oe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Doe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=ad.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:y}){const x=bt(),{userSelectionActive:S,elementsSelectable:w,dragging:E,connectionInProgress:N}=Ze(_oe,kt),k=w&&(e||S),T=O.useRef(null),A=O.useRef(),_=O.useRef(new Set),R=O.useRef(new Set),D=O.useRef(!1),P=O.useRef(!1),$=q=>{if(D.current||N){D.current=!1;return}l?.(q),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},V=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}u?.(q)},B=d?q=>d(q):void 0,G=q=>{const{resetSelectedElements:W,domNode:Q}=x.getState();if(A.current=Q?.getBoundingClientRect(),!w||!e||q.button!==0||q.target!==T.current||!A.current)return;q.target?.setPointerCapture?.(q.pointerId),P.current=!0,D.current=!1;const{x:L,y:K}=mi(q.nativeEvent,A.current);W(),x.setState({userSelectionRect:{width:0,height:0,startX:L,startY:K,x:L,y:K}}),s?.(q)},z=q=>{const{userSelectionRect:W,transform:Q,nodeLookup:L,edgeLookup:K,connectionLookup:se,triggerNodeChanges:ce,triggerEdgeChanges:H,defaultEdgeOptions:X}=x.getState();if(!A.current||!W)return;D.current=!0;const{x:ee,y:ue}=mi(q.nativeEvent,A.current),{startX:le,startY:ge}=W,Ee={startX:le,startY:ge,x:ee<le?ee:le,y:ue<ge?ue:ge,width:Math.abs(ee-le),height:Math.abs(ue-ge)},je=_.current,ke=R.current;_.current=new Set(Ck(L,Ee,Q,n===ad.Partial,!0).map(we=>we.id)),R.current=new Set;const Ne=X?.selectable??!0;for(const we of _.current){const ve=se.get(we);if(ve)for(const{edgeId:Pe}of ve.values()){const Ae=K.get(Pe);Ae&&(Ae.selectable??Ne)&&R.current.add(Pe)}}if(!nR(je,_.current)){const we=Ml(L,_.current,!0);ce(we)}if(!nR(ke,R.current)){const we=Ml(K,R.current);H(we)}x.setState({userSelectionRect:Ee,userSelectionActive:!0,nodesSelectionActive:!1})},F=q=>{if(q.button!==0||!P.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:W}=x.getState();!S&&W&&q.target===T.current&&$?.(q),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(q),(t||i)&&(D.current=!1),P.current=!1},I=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:Kt(["react-flow__pane",{draggable:I,dragging:E,selection:e}]),onClick:k?void 0:nv($,T),onContextMenu:nv(V,T),onWheel:nv(B,T),onPointerEnter:k?void 0:h,onPointerDown:k?G:p,onPointerMove:k?z:p,onPointerUp:k?F:void 0,onPointerLeave:g,ref:T,style:Tm,children:[y,v.jsx(Moe,{})]})}function VC({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",wi.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function fq({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=bt(),[u,d]=O.useState(!1),h=O.useRef();return O.useEffect(()=>{h.current=xse({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{VC({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),O.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const Roe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function hq(){const e=bt();return O.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,g=Roe(o),y=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*y*n.factor,w=n.direction.y*x*n.factor;for(const[,E]of d){if(!g(E))continue;let N={x:E.internals.positionAbsolute.x+S,y:E.internals.positionAbsolute.y+w};i&&(N=_d(N,s));const{position:k,positionAbsolute:T}=jz({nodeId:E.id,nextPosition:N,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});E.position=k,E.internals.positionAbsolute=T,p.set(E.id,E)}u(p)},[])}const Dk=O.createContext(null),Ooe=Dk.Provider;Dk.Consumer;const pq=()=>O.useContext(Dk),joe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Loe=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===ma.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function Poe({type:e="source",position:t=Te.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...g},y){const x=o||null,S=e==="target",w=bt(),E=pq(),{connectOnClick:N,noPanClassName:k,rfId:T}=Ze(joe,kt),{connectingFrom:A,connectingTo:_,clickConnecting:R,isPossibleEndHandle:D,connectionInProcess:P,clickConnectionInProcess:$,valid:V}=Ze(Loe(E,x,e),kt);E||w.getState().onError?.("010",wi.error010());const B=F=>{const{defaultEdgeOptions:I,onConnect:q,hasDefaultEdges:W}=w.getState(),Q={...I,...F};if(W){const{edges:L,setEdges:K}=w.getState();K(Uz(Q,L))}q?.(Q),l?.(Q)},G=F=>{if(!E)return;const I=Hz(F.nativeEvent);if(i&&(I&&F.button===0||!I)){const q=w.getState();qC.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:x,nodeId:E,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:B,isValidConnection:n||q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}I?h?.(F):p?.(F)},z=F=>{const{onClickConnectStart:I,onClickConnectEnd:q,connectionClickStartHandle:W,connectionMode:Q,isValidConnection:L,lib:K,rfId:se,nodeLookup:ce,connection:H}=w.getState();if(!E||!W&&!i)return;if(!W){I?.(F.nativeEvent,{nodeId:E,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:E,type:e,id:x}});return}const X=qz(F.target),ee=n||L,{connection:ue,isValid:le}=qC.isValid(F.nativeEvent,{handle:{nodeId:E,id:x,type:e},connectionMode:Q,fromNodeId:W.nodeId,fromHandleId:W.id||null,fromType:W.type,isValidConnection:ee,flowId:se,doc:X,lib:K,nodeLookup:ce});le&&ue&&B(ue);const ge=structuredClone(H);delete ge.inProgress,ge.toPosition=ge.toHandle?ge.toHandle.position:null,q?.(F,ge),w.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":E,"data-handlepos":t,"data-id":`${T}-${E}-${x}-${e}`,className:Kt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:R,connectingfrom:A,connectingto:_,valid:V,connectionindicator:r&&(!P||D)&&(P||$?s:i)}]),onMouseDown:G,onTouchStart:G,onClick:N?z:void 0,ref:y,...g,children:u})}const Tr=O.memo(uq(Poe));function Ioe({data:e,isConnectable:t,sourcePosition:n=Te.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(Tr,{type:"source",position:n,isConnectable:t})]})}function Boe({data:e,isConnectable:t,targetPosition:n=Te.Top,sourcePosition:r=Te.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Tr,{type:"target",position:n,isConnectable:t}),e?.label,v.jsx(Tr,{type:"source",position:r,isConnectable:t})]})}function zoe(){return null}function qoe({data:e,isConnectable:t,targetPosition:n=Te.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Tr,{type:"target",position:n,isConnectable:t}),e?.label]})}const qp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},TR={input:Ioe,default:Boe,output:qoe,group:zoe};function Voe(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Hoe=e=>{const{width:t,height:n,x:r,y:i}=Md(e.nodeLookup,{filter:s=>!!s.selected});return{width:Yr(t)?t:null,height:Yr(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Foe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=bt(),{width:i,height:s,transformString:o,userSelectionActive:l}=Ze(Hoe,kt),u=hq(),d=O.useRef(null);if(O.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),fq({nodeRef:d}),l||!i||!s)return null;const h=e?g=>{const y=r.getState().nodes.filter(x=>x.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(qp,g.key)&&(g.preventDefault(),u({direction:qp[g.key],factor:g.shiftKey?4:1}))};return v.jsx("div",{className:Kt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:v.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const AR=typeof window<"u"?window:void 0,Uoe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function mq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:D,defaultViewport:P,translateExtent:$,minZoom:V,maxZoom:B,preventScrolling:G,onSelectionContextMenu:z,noWheelClassName:F,noPanClassName:I,disableKeyboardA11y:q,onViewportChange:W,isControlledViewport:Q}){const{nodesSelectionActive:L,userSelectionActive:K}=Ze(Uoe),se=dd(d,{target:AR}),ce=dd(S,{target:AR}),H=ce||D,X=ce||T,ee=h&&H!==!0,ue=se||K||ee;return Eoe({deleteKeyCode:u,multiSelectionKeyCode:x}),v.jsx(Toe,{onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:X,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:!se&&H,defaultViewport:P,translateExtent:$,minZoom:V,maxZoom:B,zoomActivationKeyCode:w,preventScrolling:G,noWheelClassName:F,noPanClassName:I,onViewportChange:W,isControlledViewport:Q,paneClickDistance:l,children:v.jsxs(Doe,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:H,isSelecting:!!ue,selectionMode:p,selectionKeyPressed:se,selectionOnDrag:ee,children:[e,L&&v.jsx(Foe,{onSelectionContextMenu:z,noPanClassName:I,disableKeyboardA11y:q})]})})}mq.displayName="FlowRenderer";const $oe=O.memo(mq),Goe=e=>t=>e?Ck(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Koe(e){return Ze(O.useCallback(Goe(e),[e]),kt)}const Yoe=e=>e.updateNodeInternals;function Woe(){const e=Ze(Yoe),[t]=O.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return O.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Xoe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=bt(),s=O.useRef(null),o=O.useRef(null),l=O.useRef(e.sourcePosition),u=O.useRef(e.targetPosition),d=O.useRef(t),h=n&&!!e.internals.handleBounds;return O.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),O.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),O.useEffect(()=>{if(s.current){const p=d.current!==t,g=l.current!==e.sourcePosition,y=u.current!==e.targetPosition;(p||g||y)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function Zoe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:x,rfId:S,nodeTypes:w,nodeClickDistance:E,onError:N}){const{node:k,internals:T,isParent:A}=Ze(le=>{const ge=le.nodeLookup.get(e),Ee=le.parentLookup.has(e);return{node:ge,internals:ge.internals,isParent:Ee}},kt);let _=k.type||"default",R=w?.[_]||TR[_];R===void 0&&(N?.("003",wi.error003(_)),_="default",R=w?.default||TR.default);const D=!!(k.draggable||l&&typeof k.draggable>"u"),P=!!(k.selectable||u&&typeof k.selectable>"u"),$=!!(k.connectable||d&&typeof k.connectable>"u"),V=!!(k.focusable||h&&typeof k.focusable>"u"),B=bt(),G=Bz(k),z=Xoe({node:k,nodeType:_,hasDimensions:G,resizeObserver:p}),F=fq({nodeRef:z,disabled:k.hidden||!D,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:E}),I=hq();if(k.hidden)return null;const q=as(k),W=Voe(k),Q=P||D||t||n||r||i,L=n?le=>n(le,{...T.userNode}):void 0,K=r?le=>r(le,{...T.userNode}):void 0,se=i?le=>i(le,{...T.userNode}):void 0,ce=s?le=>s(le,{...T.userNode}):void 0,H=o?le=>o(le,{...T.userNode}):void 0,X=le=>{const{selectNodesOnDrag:ge,nodeDragThreshold:Ee}=B.getState();P&&(!ge||!D||Ee>0)&&VC({id:e,store:B,nodeRef:z}),t&&t(le,{...T.userNode})},ee=le=>{if(!(Vz(le.nativeEvent)||x)){if(Az.includes(le.key)&&P){const ge=le.key==="Escape";VC({id:e,store:B,unselect:ge,nodeRef:z})}else if(D&&k.selected&&Object.prototype.hasOwnProperty.call(qp,le.key)){le.preventDefault();const{ariaLabelConfig:ge}=B.getState();B.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),I({direction:qp[le.key],factor:le.shiftKey?4:1})}}},ue=()=>{if(x||!z.current?.matches(":focus-visible"))return;const{transform:le,width:ge,height:Ee,autoPanOnNodeFocus:je,setCenter:ke}=B.getState();if(!je)return;Ck(new Map([[e,k]]),{x:0,y:0,width:ge,height:Ee},le,!0).length>0||ke(k.position.x+q.width/2,k.position.y+q.height/2,{zoom:le[2]})};return v.jsx("div",{className:Kt(["react-flow__node",`react-flow__node-${_}`,{[y]:D},k.className,{selected:k.selected,selectable:P,parent:A,draggable:D,dragging:F}]),ref:z,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:Q?"all":"none",visibility:G?"visible":"hidden",...k.style,...W},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:L,onMouseMove:K,onMouseLeave:se,onContextMenu:ce,onClick:X,onDoubleClick:H,onKeyDown:V?ee:void 0,tabIndex:V?0:void 0,onFocus:V?ue:void 0,role:k.ariaRole??(V?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${iq}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:v.jsx(Ooe,{value:e,children:v.jsx(R,{id:e,data:k.data,type:_,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:P,draggable:D,deletable:k.deletable??!0,isConnectable:$,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:F,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...q})})})}const Qoe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function gq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Ze(Qoe,kt),o=Koe(e.onlyRenderVisibleElements),l=Woe();return v.jsx("div",{className:"react-flow__nodes",style:Tm,children:o.map(u=>v.jsx(Zoe,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}gq.displayName="NodeRenderer";const Joe=O.memo(gq);function eae(e){return Ze(O.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&ise({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),kt)}const tae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return v.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},nae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return v.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},MR={[Ip.Arrow]:tae,[Ip.ArrowClosed]:nae};function rae(e){const t=bt();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(MR,e)?MR[e]:(t.getState().onError?.("009",wi.error009(e)),null),[e])}const iae=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=rae(t);return u?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:v.jsx(u,{color:n,strokeWidth:o})}):null},yq=({defaultColor:e,rfId:t})=>{const n=Ze(s=>s.edges),r=Ze(s=>s.defaultEdgeOptions),i=O.useMemo(()=>dse(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:i.map(s=>v.jsx(iae,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};yq.displayName="MarkerDefinitions";var sae=O.memo(yq);function vq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,g]=O.useState({x:1,y:0,width:0,height:0}),y=Kt(["react-flow__edge-textwrapper",d]),x=O.useRef(null);return O.useEffect(()=>{if(x.current){const S=x.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...h,children:[i&&v.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),v.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}vq.displayName="EdgeText";const oae=O.memo(vq);function Am({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...h,d:e,fill:"none",className:Kt(["react-flow__edge-path",h.className])}),d?v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&Yr(t)&&Yr(n)?v.jsx(oae,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function _R({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Te.Left||e===Te.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function bq({sourceX:e,sourceY:t,sourcePosition:n=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top}){const[o,l]=_R({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=_R({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,g,y]=Fz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,g,y]}function xq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})=>{const[N,k,T]=bq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return v.jsx(Am,{id:A,path:N,labelX:k,labelY:T,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})})}const aae=xq({isInternal:!1}),wq=xq({isInternal:!0});aae.displayName="SimpleBezierEdge";wq.displayName="SimpleBezierEdgeInternal";function Sq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:y=Te.Bottom,targetPosition:x=Te.Top,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=IC({sourceX:n,sourceY:r,sourcePosition:y,targetX:i,targetY:s,targetPosition:x,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),_=e.isInternal?void 0:t;return v.jsx(Am,{id:_,path:k,labelX:T,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:w,interactionWidth:N})})}const Cq=Sq({isInternal:!1}),Eq=Sq({isInternal:!0});Cq.displayName="SmoothStepEdge";Eq.displayName="SmoothStepEdgeInternal";function kq(e){return O.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return v.jsx(Cq,{...n,id:r,pathOptions:O.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const lae=kq({isInternal:!1}),Nq=kq({isInternal:!0});lae.displayName="StepEdge";Nq.displayName="StepEdgeInternal";function Tq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})=>{const[w,E,N]=$z({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return v.jsx(Am,{id:k,path:w,labelX:E,labelY:N,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})})}const cae=Tq({isInternal:!1}),Aq=Tq({isInternal:!0});cae.displayName="StraightEdge";Aq.displayName="StraightEdgeInternal";function Mq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Te.Bottom,targetPosition:l=Te.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=kk({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:E?.curvature}),_=e.isInternal?void 0:t;return v.jsx(Am,{id:_,path:k,labelX:T,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:N})})}const uae=Mq({isInternal:!1}),_q=Mq({isInternal:!0});uae.displayName="BezierEdge";_q.displayName="BezierEdgeInternal";const DR={default:_q,straight:Aq,step:Nq,smoothstep:Eq,simplebezier:wq},RR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},dae=(e,t,n)=>n===Te.Left?e-t:n===Te.Right?e+t:e,fae=(e,t,n)=>n===Te.Top?e-t:n===Te.Bottom?e+t:e,OR="react-flow__edgeupdater";function jR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Kt([OR,`${OR}-${l}`]),cx:dae(t,r,e),cy:fae(n,r,e),r,stroke:"transparent",fill:"transparent"})}function hae({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const x=bt(),S=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:_,domNode:R,isValidConnection:D,connectionMode:P,connectionRadius:$,lib:V,onConnectStart:B,onConnectEnd:G,cancelConnection:z,nodeLookup:F,rfId:I,panBy:q,updateConnection:W}=x.getState(),Q=A.type==="target",L=(ce,H)=>{g(!1),p?.(ce,n,A.type,H)},K=ce=>d?.(n,ce),se=(ce,H)=>{g(!0),h?.(T,n,A.type),B?.(ce,H)};qC.onPointerDown(T.nativeEvent,{autoPanOnConnect:_,connectionMode:P,connectionRadius:$,domNode:R,handleId:A.id,nodeId:A.nodeId,nodeLookup:F,isTarget:Q,edgeUpdaterType:A.type,lib:V,flowId:I,cancelConnection:z,panBy:q,isValidConnection:D,onConnect:K,onConnectStart:se,onConnectEnd:G,onReconnectEnd:L,updateConnection:W,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},w=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),E=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>y(!0),k=()=>y(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(jR,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:N,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&v.jsx(jR,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:E,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function pae({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:x,edgeTypes:S,noPanClassName:w,onError:E,disableKeyboardA11y:N}){let k=Ze(ke=>ke.edgeLookup.get(e));const T=Ze(ke=>ke.defaultEdgeOptions);k=T?{...T,...k}:k;let A=k.type||"default",_=S?.[A]||DR[A];_===void 0&&(E?.("011",wi.error011(A)),A="default",_=S?.default||DR.default);const R=!!(k.focusable||t&&typeof k.focusable>"u"),D=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),P=!!(k.selectable||r&&typeof k.selectable>"u"),$=O.useRef(null),[V,B]=O.useState(!1),[G,z]=O.useState(!1),F=bt(),{zIndex:I,sourceX:q,sourceY:W,targetX:Q,targetY:L,sourcePosition:K,targetPosition:se}=Ze(O.useCallback(ke=>{const Ne=ke.nodeLookup.get(k.source),we=ke.nodeLookup.get(k.target);if(!Ne||!we)return{zIndex:k.zIndex,...RR};const ve=use({id:e,sourceNode:Ne,targetNode:we,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:ke.connectionMode,onError:E});return{zIndex:rse({selected:k.selected,zIndex:k.zIndex,sourceNode:Ne,targetNode:we,elevateOnSelect:ke.elevateEdgesOnSelect}),...ve||RR}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),kt),ce=O.useMemo(()=>k.markerStart?`url('#${BC(k.markerStart,x)}')`:void 0,[k.markerStart,x]),H=O.useMemo(()=>k.markerEnd?`url('#${BC(k.markerEnd,x)}')`:void 0,[k.markerEnd,x]);if(k.hidden||q===null||W===null||Q===null||L===null)return null;const X=ke=>{const{addSelectedEdges:Ne,unselectNodesAndEdges:we,multiSelectionActive:ve}=F.getState();P&&(F.setState({nodesSelectionActive:!1}),k.selected&&ve?(we({nodes:[],edges:[k]}),$.current?.blur()):Ne([e])),i&&i(ke,k)},ee=s?ke=>{s(ke,{...k})}:void 0,ue=o?ke=>{o(ke,{...k})}:void 0,le=l?ke=>{l(ke,{...k})}:void 0,ge=u?ke=>{u(ke,{...k})}:void 0,Ee=d?ke=>{d(ke,{...k})}:void 0,je=ke=>{if(!N&&Az.includes(ke.key)&&P){const{unselectNodesAndEdges:Ne,addSelectedEdges:we}=F.getState();ke.key==="Escape"?($.current?.blur(),Ne({edges:[k]})):we([e])}};return v.jsx("svg",{style:{zIndex:I},children:v.jsxs("g",{className:Kt(["react-flow__edge",`react-flow__edge-${A}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!P&&!i,updating:V,selectable:P}]),onClick:X,onDoubleClick:ee,onContextMenu:ue,onMouseEnter:le,onMouseMove:ge,onMouseLeave:Ee,onKeyDown:R?je:void 0,tabIndex:R?0:void 0,role:k.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":R?`${sq}-${x}`:void 0,ref:$,...k.domAttributes,children:[!G&&v.jsx(_,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:P,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:q,sourceY:W,targetX:Q,targetY:L,sourcePosition:K,targetPosition:se,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:ce,markerEnd:H,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),D&&v.jsx(hae,{edge:k,isReconnectable:D,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:q,sourceY:W,targetX:Q,targetY:L,sourcePosition:K,targetPosition:se,setUpdateHover:B,setReconnecting:z})]})})}const mae=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Dq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,onError:k}=Ze(mae,kt),T=eae(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(sae,{defaultColor:e,rfId:n}),T.map(A=>v.jsx(pae,{id:A,edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},A))]})}Dq.displayName="EdgeRenderer";const gae=O.memo(Dq),yae=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function vae({children:e}){const t=Ze(yae);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function bae(e){const t=fd(),n=O.useRef(!1);O.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const xae=e=>e.panZoom?.syncViewport;function wae(e){const t=Ze(xae),n=bt();return O.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Sae(e){return e.connection.inProgress?{...e.connection,to:Dd(e.connection.to,e.transform)}:{...e.connection}}function Cae(e){return Sae}function Eae(e){const t=Cae();return Ze(t,kt)}const kae=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function Nae({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Ze(kae,kt);return!(s&&i&&u)?null:v.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:Kt(["react-flow__connection",Dz(l)]),children:v.jsx(Rq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const Rq=({style:e,type:t=Ks.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:g}=Eae();if(!i)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:Dz(r),toNode:h,toHandle:p});let y="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(t){case Ks.Bezier:[y]=kk(x);break;case Ks.SimpleBezier:[y]=bq(x);break;case Ks.Step:[y]=IC({...x,borderRadius:0});break;case Ks.SmoothStep:[y]=IC(x);break;default:[y]=$z(x)}return v.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};Rq.displayName="ConnectionLine";const Tae={};function LR(e=Tae){O.useRef(e),bt(),O.useEffect(()=>{},[e])}function Aae(){bt(),O.useRef(!1),O.useEffect(()=>{},[])}function Oq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:E,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:R,deleteKeyCode:D,onlyRenderVisibleElements:P,elementsSelectable:$,defaultViewport:V,translateExtent:B,minZoom:G,maxZoom:z,preventScrolling:F,defaultMarkerColor:I,zoomOnScroll:q,zoomOnPinch:W,panOnScroll:Q,panOnScrollSpeed:L,panOnScrollMode:K,zoomOnDoubleClick:se,panOnDrag:ce,onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:ee,onPaneMouseLeave:ue,onPaneScroll:le,onPaneContextMenu:ge,paneClickDistance:Ee,nodeClickDistance:je,onEdgeContextMenu:ke,onEdgeMouseEnter:Ne,onEdgeMouseMove:we,onEdgeMouseLeave:ve,reconnectRadius:Pe,onReconnect:Ae,onReconnectStart:at,onReconnectEnd:gt,noDragClassName:Or,noWheelClassName:wn,noPanClassName:Wt,disableKeyboardA11y:rt,nodeExtent:nn,rfId:fn,viewport:Xt,onViewportChange:dt}){return LR(e),LR(t),Aae(),bae(n),wae(Xt),v.jsx($oe,{onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:ee,onPaneMouseLeave:ue,onPaneContextMenu:ge,onPaneScroll:le,paneClickDistance:Ee,deleteKeyCode:D,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:R,elementsSelectable:$,zoomOnScroll:q,zoomOnPinch:W,zoomOnDoubleClick:se,panOnScroll:Q,panOnScrollSpeed:L,panOnScrollMode:K,panOnDrag:ce,defaultViewport:V,translateExtent:B,minZoom:G,maxZoom:z,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:Or,noWheelClassName:wn,noPanClassName:Wt,disableKeyboardA11y:rt,onViewportChange:dt,isControlledViewport:!!Xt,children:v.jsxs(vae,{children:[v.jsx(gae,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Ae,onReconnectStart:at,onReconnectEnd:gt,onlyRenderVisibleElements:P,onEdgeContextMenu:ke,onEdgeMouseEnter:Ne,onEdgeMouseMove:we,onEdgeMouseLeave:ve,reconnectRadius:Pe,defaultMarkerColor:I,noPanClassName:Wt,disableKeyboardA11y:rt,rfId:fn}),v.jsx(Nae,{style:S,type:x,component:w,containerStyle:E}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(Joe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:je,onlyRenderVisibleElements:P,noPanClassName:Wt,noDragClassName:Or,disableKeyboardA11y:rt,nodeExtent:nn,rfId:fn}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Oq.displayName="GraphView";const Mae=O.memo(Oq),PR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const g=new Map,y=new Map,x=new Map,S=new Map,w=r??t??[],E=n??e??[],N=h??[0,0],k=p??od;Kz(x,S,w);const T=zC(E,g,y,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=Md(g,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:R,y:D,zoom:P}=Cm(_,i,s,u,d,l?.padding??.1);A=[R,D,P]}return{rfId:"1",width:0,height:0,transform:A,nodes:E,nodesInitialized:T,nodeLookup:g,parentLookup:y,edges:w,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:od,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:ma.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{..._z},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Zie,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Mz}},_ae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>Xse((g,y)=>{async function x(){const{nodeLookup:S,panZoom:w,fitViewOptions:E,fitViewResolver:N,width:k,height:T,minZoom:A,maxZoom:_}=y();w&&(await Wie({nodes:S,width:k,height:T,panZoom:w,minZoom:A,maxZoom:_},E),N?.resolve(!0),g({fitViewResolver:null}))}return{...PR({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:E,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:T}=y(),A=zC(S,w,E,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});T&&A?(x(),g({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:E}=y();Kz(w,E,S),g({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:E}=y();E(S),g({hasDefaultNodes:!0})}if(w){const{setEdges:E}=y();E(w),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:E,parentLookup:N,domNode:k,nodeOrigin:T,nodeExtent:A,debug:_,fitViewQueued:R}=y(),{changes:D,updatedInternals:P}=gse(S,E,N,k,T,A);P&&(hse(E,N,{nodeOrigin:T,nodeExtent:A}),R?(x(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),D?.length>0&&(_&&console.log("React Flow: trigger node changes",D),w?.(D)))},updateNodePositions:(S,w=!1)=>{const E=[],N=[],{nodeLookup:k,triggerNodeChanges:T}=y();for(const[A,_]of S){const R=k.get(A),D=!!(R?.expandParent&&R?.parentId&&_?.position),P={id:A,type:"position",position:D?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:w};D&&R.parentId&&E.push({id:A,parentId:R.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),N.push(P)}if(E.length>0){const{parentLookup:A,nodeOrigin:_}=y(),R=_k(E,k,A,_);N.push(...R)}T(N)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:E,nodes:N,hasDefaultNodes:k,debug:T}=y();if(S?.length){if(k){const A=lq(S,N);E(A)}T&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:E,edges:N,hasDefaultEdges:k,debug:T}=y();if(S?.length){if(k){const A=cq(S,N);E(A)}T&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>Ho(_,!0));k(A);return}k(Ml(N,new Set([...S]),!0)),T(Ml(E))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>Ho(_,!0));T(A);return}T(Ml(E,new Set([...S]))),k(Ml(N,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:E,nodes:N,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:A}=y(),_=S||N,R=w||E,D=_.map($=>{const V=k.get($.id);return V&&(V.selected=!1),Ho($.id,!1)}),P=R.map($=>Ho($.id,!1));T(D),A(P)},setMinZoom:S=>{const{panZoom:w,maxZoom:E}=y();w?.setScaleExtent([S,E]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:E}=y();w?.setScaleExtent([E,S]),g({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{y().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:E,triggerEdgeChanges:N,elementsSelectable:k}=y();if(!k)return;const T=w.reduce((_,R)=>R.selected?[..._,Ho(R.id,!1)]:_,[]),A=S.reduce((_,R)=>R.selected?[..._,Ho(R.id,!1)]:_,[]);E(T),N(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:E,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:T,nodeExtent:A}=y();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(zC(w,E,N,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:T,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:w,width:E,height:N,panZoom:k,translateExtent:T}=y();return yse({delta:S,panZoom:k,transform:w,translateExtent:T,width:E,height:N})},setCenter:async(S,w,E)=>{const{width:N,height:k,maxZoom:T,panZoom:A}=y();if(!A)return Promise.resolve(!1);const _=typeof E?.zoom<"u"?E.zoom:T;return await A.setViewport({x:N/2-S*_,y:k/2-w*_,zoom:_},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{..._z}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...PR()})}},Object.is);function jq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:g}){const[y]=O.useState(()=>_ae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return v.jsx(Zse,{value:y,children:v.jsx(xoe,{children:g})})}function Dae({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:g}){return O.useContext(km)?v.jsx(v.Fragment,{children:e}):v.jsx(jq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:e})}const Rae={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Oae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:P,onNodesDelete:$,onEdgesDelete:V,onDelete:B,onSelectionChange:G,onSelectionDragStart:z,onSelectionDrag:F,onSelectionDragStop:I,onSelectionContextMenu:q,onSelectionStart:W,onSelectionEnd:Q,onBeforeDelete:L,connectionMode:K,connectionLineType:se=Ks.Bezier,connectionLineStyle:ce,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:ee="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:le=!1,selectionMode:ge=ad.Full,panActivationKeyCode:Ee="Space",multiSelectionKeyCode:je=cd()?"Meta":"Control",zoomActivationKeyCode:ke=cd()?"Meta":"Control",snapToGrid:Ne,snapGrid:we,onlyRenderVisibleElements:ve=!1,selectNodesOnDrag:Pe,nodesDraggable:Ae,autoPanOnNodeFocus:at,nodesConnectable:gt,nodesFocusable:Or,nodeOrigin:wn=oq,edgesFocusable:Wt,edgesReconnectable:rt,elementsSelectable:nn=!0,defaultViewport:fn=uoe,minZoom:Xt=.5,maxZoom:dt=2,translateExtent:zt=od,preventScrolling:wt=!0,nodeExtent:Qr,defaultMarkerColor:po="#b1b1b7",zoomOnScroll:jr=!0,zoomOnPinch:Zt=!0,panOnScroll:hn=!1,panOnScrollSpeed:Lr=.5,panOnScrollMode:Ei=aa.Free,zoomOnDoubleClick:ki=!0,panOnDrag:rc=!0,onPaneClick:Aa,onPaneMouseEnter:Ma,onPaneMouseMove:He,onPaneMouseLeave:ur,onPaneScroll:mo,onPaneContextMenu:go,paneClickDistance:Ni=0,nodeClickDistance:Jr=0,children:yo,onReconnect:ei,onReconnectStart:ic,onReconnectEnd:Pn,onEdgeContextMenu:Nt,onEdgeDoubleClick:Qt,onEdgeMouseEnter:Pr,onEdgeMouseMove:vo,onEdgeMouseLeave:_a,reconnectRadius:us=10,onNodesChange:Da,onEdgesChange:Ti,noDragClassName:ds="nodrag",noWheelClassName:ti="nowheel",noPanClassName:Ir="nopan",fitView:ni,fitViewOptions:Br,connectOnClick:Tt,attributionPosition:Ai,proOptions:fs,defaultEdgeOptions:dr,elevateNodesOnSelect:ri,elevateEdgesOnSelect:sc,disableKeyboardA11y:bo=!1,autoPanOnConnect:Ra,autoPanOnNodeDrag:oc,autoPanSpeed:ii,connectionRadius:hs,isValidConnection:Yn,onError:xo,style:Oa,id:zr,nodeDragThreshold:wo,connectionDragThreshold:ps,viewport:ac,onViewportChange:ja,width:Sn,height:te,colorMode:Z="light",debug:ae,onScroll:pe,ariaLabelConfig:be,...Se},_e){const Fe=zr||"1",qt=poe(Z),Mn=O.useCallback(rn=>{rn.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),pe?.(rn)},[pe]);return v.jsx("div",{"data-testid":"rf__wrapper",...Se,onScroll:Mn,style:{...Oa,...Rae},ref:_e,className:Kt(["react-flow",i,qt]),id:zr,role:"application",children:v.jsxs(Dae,{nodes:e,edges:t,width:Sn,height:te,fitView:ni,fitViewOptions:Br,minZoom:Xt,maxZoom:dt,nodeOrigin:wn,nodeExtent:Qr,children:[v.jsx(Mae,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:se,connectionLineStyle:ce,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:ue,selectionOnDrag:le,selectionMode:ge,deleteKeyCode:ee,multiSelectionKeyCode:je,panActivationKeyCode:Ee,zoomActivationKeyCode:ke,onlyRenderVisibleElements:ve,defaultViewport:fn,translateExtent:zt,minZoom:Xt,maxZoom:dt,preventScrolling:wt,zoomOnScroll:jr,zoomOnPinch:Zt,zoomOnDoubleClick:ki,panOnScroll:hn,panOnScrollSpeed:Lr,panOnScrollMode:Ei,panOnDrag:rc,onPaneClick:Aa,onPaneMouseEnter:Ma,onPaneMouseMove:He,onPaneMouseLeave:ur,onPaneScroll:mo,onPaneContextMenu:go,paneClickDistance:Ni,nodeClickDistance:Jr,onSelectionContextMenu:q,onSelectionStart:W,onSelectionEnd:Q,onReconnect:ei,onReconnectStart:ic,onReconnectEnd:Pn,onEdgeContextMenu:Nt,onEdgeDoubleClick:Qt,onEdgeMouseEnter:Pr,onEdgeMouseMove:vo,onEdgeMouseLeave:_a,reconnectRadius:us,defaultMarkerColor:po,noDragClassName:ds,noWheelClassName:ti,noPanClassName:Ir,rfId:Fe,disableKeyboardA11y:bo,nodeExtent:Qr,viewport:ac,onViewportChange:ja}),v.jsx(hoe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,nodesDraggable:Ae,autoPanOnNodeFocus:at,nodesConnectable:gt,nodesFocusable:Or,edgesFocusable:Wt,edgesReconnectable:rt,elementsSelectable:nn,elevateNodesOnSelect:ri,elevateEdgesOnSelect:sc,minZoom:Xt,maxZoom:dt,nodeExtent:Qr,onNodesChange:Da,onEdgesChange:Ti,snapToGrid:Ne,snapGrid:we,connectionMode:K,translateExtent:zt,connectOnClick:Tt,defaultEdgeOptions:dr,fitView:ni,fitViewOptions:Br,onNodesDelete:$,onEdgesDelete:V,onDelete:B,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:P,onSelectionDrag:F,onSelectionDragStart:z,onSelectionDragStop:I,onMove:h,onMoveStart:p,onMoveEnd:g,noPanClassName:Ir,nodeOrigin:wn,rfId:Fe,autoPanOnConnect:Ra,autoPanOnNodeDrag:oc,autoPanSpeed:ii,onError:xo,connectionRadius:hs,isValidConnection:Yn,selectNodesOnDrag:Pe,nodeDragThreshold:wo,connectionDragThreshold:ps,onBeforeDelete:L,paneClickDistance:Ni,debug:ae,ariaLabelConfig:be}),v.jsx(coe,{onSelectionChange:G}),yo,v.jsx(ioe,{proOptions:fs,position:Ai}),v.jsx(roe,{rfId:Fe,disableKeyboardA11y:bo})]})})}var jae=uq(Oae);function Lae(e){const[t,n]=O.useState(e),r=O.useCallback(i=>n(s=>lq(i,s)),[]);return[t,n,r]}function Pae(e){const[t,n]=O.useState(e),r=O.useCallback(i=>n(s=>cq(i,s)),[]);return[t,n,r]}function Iae({dimensions:e,lineWidth:t,variant:n,className:r}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Kt(["react-flow__background-pattern",n,r])})}function Bae({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:Kt(["react-flow__background-pattern","dots",t])})}var no;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(no||(no={}));const zae={[no.Dots]:1,[no.Lines]:1,[no.Cross]:6},qae=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Lq({id:e,variant:t=no.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=O.useRef(null),{transform:g,patternId:y}=Ze(qae,kt),x=r||zae[t],S=t===no.Dots,w=t===no.Cross,E=Array.isArray(n)?n:[n,n],N=[E[0]*g[2]||1,E[1]*g[2]||1],k=x*g[2],T=Array.isArray(s)?s:[s,s],A=w?[k,k]:N,_=[T[0]*g[2]||1+A[0]/2,T[1]*g[2]||1+A[1]/2],R=`${y}${e||""}`;return v.jsxs("svg",{className:Kt(["react-flow__background",d]),style:{...u,...Tm,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[v.jsx("pattern",{id:R,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?v.jsx(Bae,{radius:k/2,className:h}):v.jsx(Iae,{dimensions:A,lineWidth:i,variant:t,className:h})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}Lq.displayName="Background";const Vae=O.memo(Lq);function Hae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Fae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Uae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function $ae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Gae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function mh({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:Kt(["react-flow__controls-button",t]),...n,children:e})}const Kae=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Pq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const x=bt(),{isInteractive:S,minZoomReached:w,maxZoomReached:E,ariaLabelConfig:N}=Ze(Kae,kt),{zoomIn:k,zoomOut:T,fitView:A}=fd(),_=()=>{k(),s?.()},R=()=>{T(),o?.()},D=()=>{A(i),l?.()},P=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},$=g==="horizontal"?"horizontal":"vertical";return v.jsxs(Nm,{className:Kt(["react-flow__controls",$,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??N["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(mh,{onClick:_,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:E,children:v.jsx(Hae,{})}),v.jsx(mh,{onClick:R,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:w,children:v.jsx(Fae,{})})]}),n&&v.jsx(mh,{className:"react-flow__controls-fitview",onClick:D,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:v.jsx(Uae,{})}),r&&v.jsx(mh,{className:"react-flow__controls-interactive",onClick:P,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?v.jsx(Gae,{}):v.jsx($ae,{})}),h]})}Pq.displayName="Controls";const Yae=O.memo(Pq);function Wae({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:g,onClick:y}){const{background:x,backgroundColor:S}=s||{},w=o||x||S;return v.jsx("rect",{className:Kt(["react-flow__minimap-node",{selected:g},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:y?E=>y(E,e):void 0})}const Xae=O.memo(Wae),Zae=e=>e.nodes.map(t=>t.id),rv=e=>e instanceof Function?e:()=>e;function Qae({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Xae,onClick:o}){const l=Ze(Zae,kt),u=rv(t),d=rv(e),h=rv(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:l.map(g=>v.jsx(ele,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function Jae({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:g,height:y}=Ze(x=>{const{internals:S}=x.nodeLookup.get(e),w=S.userNode,{x:E,y:N}=S.positionAbsolute,{width:k,height:T}=as(w);return{node:w,x:E,y:N,width:k,height:T}},kt);return!d||d.hidden||!Bz(d)?null:v.jsx(l,{x:h,y:p,width:g,height:y,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const ele=O.memo(Jae);var tle=O.memo(Qae);const nle=200,rle=150,ile=e=>!e.hidden,sle=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?Iz(Md(e.nodeLookup,{filter:ile}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},ole="react-flow__minimap-desc";function Iq({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:x,pannable:S=!1,zoomable:w=!1,ariaLabel:E,inversePan:N,zoomStep:k=1,offsetScale:T=5}){const A=bt(),_=O.useRef(null),{boundingRect:R,viewBB:D,rfId:P,panZoom:$,translateExtent:V,flowWidth:B,flowHeight:G,ariaLabelConfig:z}=Ze(sle,kt),F=e?.width??nle,I=e?.height??rle,q=R.width/F,W=R.height/I,Q=Math.max(q,W),L=Q*F,K=Q*I,se=T*Q,ce=R.x-(L-R.width)/2-se,H=R.y-(K-R.height)/2-se,X=L+se*2,ee=K+se*2,ue=`${ole}-${P}`,le=O.useRef(0),ge=O.useRef();le.current=Q,O.useEffect(()=>{if(_.current&&$)return ge.current=Nse({domNode:_.current,panZoom:$,getTransform:()=>A.getState().transform,getViewScale:()=>le.current}),()=>{ge.current?.destroy()}},[$]),O.useEffect(()=>{ge.current?.update({translateExtent:V,width:B,height:G,inversePan:N,pannable:S,zoomStep:k,zoomable:w})},[S,w,N,k,V,B,G]);const Ee=y?Ne=>{const[we,ve]=ge.current?.pointer(Ne)||[0,0];y(Ne,{x:we,y:ve})}:void 0,je=x?O.useCallback((Ne,we)=>{const ve=A.getState().nodeLookup.get(we).internals.userNode;x(Ne,ve)},[]):void 0,ke=E??z["minimap.ariaLabel"];return v.jsx(Nm,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*Q:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Kt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:F,height:I,viewBox:`${ce} ${H} ${X} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ue,ref:_,onClick:Ee,children:[ke&&v.jsx("title",{id:ue,children:ke}),v.jsx(tle,{onClick:je,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-se},${H-se}h${X+se*2}v${ee+se*2}h${-X-se*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Iq.displayName="MiniMap";const ale=O.memo(Iq),lle=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,cle={[ya.Line]:"right",[ya.Handle]:"bottom-right"};function ule({nodeId:e,position:t,variant:n=ya.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:x,onResizeStart:S,onResize:w,onResizeEnd:E}){const N=pq(),k=typeof e=="string"?e:N,T=bt(),A=O.useRef(null),_=n===ya.Handle,R=Ze(O.useCallback(lle(_&&y),[_,y]),kt),D=O.useRef(null),P=t??cle[n];O.useEffect(()=>{if(!(!A.current||!k))return D.current||(D.current=Use({domNode:A.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:V,transform:B,snapGrid:G,snapToGrid:z,nodeOrigin:F,domNode:I}=T.getState();return{nodeLookup:V,transform:B,snapGrid:G,snapToGrid:z,nodeOrigin:F,paneDomNode:I}},onChange:(V,B)=>{const{triggerNodeChanges:G,nodeLookup:z,parentLookup:F,nodeOrigin:I}=T.getState(),q=[],W={x:V.x,y:V.y},Q=z.get(k);if(Q&&Q.expandParent&&Q.parentId){const L=Q.origin??I,K=V.width??Q.measured.width??0,se=V.height??Q.measured.height??0,ce={id:Q.id,parentId:Q.parentId,rect:{width:K,height:se,...zz({x:V.x??Q.position.x,y:V.y??Q.position.y},{width:K,height:se},Q.parentId,z,L)}},H=_k([ce],z,F,I);q.push(...H),W.x=V.x?Math.max(L[0]*K,V.x):void 0,W.y=V.y?Math.max(L[1]*se,V.y):void 0}if(W.x!==void 0&&W.y!==void 0){const L={id:k,type:"position",position:{...W}};q.push(L)}if(V.width!==void 0&&V.height!==void 0){const K={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:V.width,height:V.height}};q.push(K)}for(const L of B){const K={...L,type:"position"};q.push(K)}G(q)},onEnd:({width:V,height:B})=>{const G={id:k,type:"dimensions",resizing:!1,dimensions:{width:V,height:B}};T.getState().triggerNodeChanges([G])}})),D.current.update({controlPosition:P,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:E,shouldResize:x}),()=>{D.current?.destroy()}},[P,l,u,d,h,p,S,w,E,x]);const $=P.split("-");return v.jsx("div",{className:Kt(["react-flow__resize-control","nodrag",...$,n,r]),ref:A,style:{...i,scale:R,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const IR=O.memo(ule);function dle({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:y,onResizeStart:x,onResize:S,onResizeEnd:w}){return t?v.jsxs(v.Fragment,{children:[Ise.map(E=>v.jsx(IR,{className:i,style:s,nodeId:e,position:E,variant:ya.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},E)),Pse.map(E=>v.jsx(IR,{className:n,style:r,nodeId:e,position:E,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},E))]}):null}function fle(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const hle=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function ro(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let gl=null;function Bq(e={}){return gl||(e.includeStyleProperties?(gl=e.includeStyleProperties,gl):(gl=ro(window.getComputedStyle(document.documentElement)),gl))}function Vp(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function ple(e){const t=Vp(e,"border-left-width"),n=Vp(e,"border-right-width");return e.clientWidth+t+n}function mle(e){const t=Vp(e,"border-top-width"),n=Vp(e,"border-bottom-width");return e.clientHeight+t+n}function zq(e,t={}){const n=t.width||ple(e),r=t.height||mle(e);return{width:n,height:r}}function gle(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const rr=16384;function yle(e){(e.width>rr||e.height>rr)&&(e.width>rr&&e.height>rr?e.width>e.height?(e.height*=rr/e.width,e.width=rr):(e.width*=rr/e.height,e.height=rr):e.width>rr?(e.height*=rr/e.width,e.width=rr):(e.width*=rr/e.height,e.height=rr))}function Hp(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function vle(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ble(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),vle(i)}const $n=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||$n(n,t)};function xle(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function wle(e,t){return Bq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Sle(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?xle(n):wle(n,r);return document.createTextNode(`${i}{${s}}`)}function BR(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=hle();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(Sle(o,n,i,r)),t.appendChild(l)}function Cle(e,t,n){BR(e,t,":before",n),BR(e,t,":after",n)}const zR="application/font-woff",qR="image/jpeg",Ele={woff:zR,woff2:zR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:qR,jpeg:qR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function kle(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Rk(e){const t=kle(e).toLowerCase();return Ele[t]||""}function Nle(e){return e.split(/,/)[1]}function HC(e){return e.search(/^(data:)/)!==-1}function Tle(e,t){return`data:${t};base64,${e}`}async function qq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const iv={};function Ale(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function Ok(e,t,n){const r=Ale(e,t,n.includeQueryParams);if(iv[r]!=null)return iv[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await qq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),Nle(l)));i=Tle(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return iv[r]=i,i}async function Mle(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Hp(t)}async function _le(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return Hp(l)}const n=e.poster,r=Rk(n),i=await Ok(n,r,t);return Hp(i)}async function Dle(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await Mm(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Rle(e,t){return $n(e,HTMLCanvasElement)?Mle(e):$n(e,HTMLVideoElement)?_le(e,t):$n(e,HTMLIFrameElement)?Dle(e,t):e.cloneNode(Vq(e))}const Ole=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Vq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function jle(e,t,n){var r,i;if(Vq(t))return t;let s=[];return Ole(e)&&e.assignedNodes?s=ro(e.assignedNodes()):$n(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=ro(e.contentDocument.body.childNodes):s=ro(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||$n(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>Mm(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Lle(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Bq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),$n(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function Ple(e,t){$n(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),$n(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Ile(e,t){if($n(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Ble(e,t,n){return $n(t,Element)&&(Lle(e,t,n),Cle(e,t,n),Ple(e,t),Ile(e,t)),t}async function zle(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await Mm(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function Mm(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Rle(r,t)).then(r=>jle(e,r,t)).then(r=>Ble(e,r,t)).then(r=>zle(r,t))}const Hq=/url\((['"]?)([^'"]+?)\1\)/g,qle=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Vle=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Hle(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Fle(e){const t=[];return e.replace(Hq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!HC(n))}async function Ule(e,t,n,r,i){try{const s=n?fle(t,n):t,o=Rk(t);let l;return i||(l=await Ok(s,o,r)),e.replace(Hle(t),`$1${l}$3`)}catch{}return e}function $le(e,{preferredFontFormat:t}){return t?e.replace(Vle,n=>{for(;;){const[r,,i]=qle.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Fq(e){return e.search(Hq)!==-1}async function Uq(e,t,n){if(!Fq(e))return e;const r=$le(e,n);return Fle(r).reduce((s,o)=>s.then(l=>Ule(l,o,t,n)),Promise.resolve(r))}async function yl(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Uq(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Gle(e,t){await yl("background",e,t)||await yl("background-image",e,t),await yl("mask",e,t)||await yl("-webkit-mask",e,t)||await yl("mask-image",e,t)||await yl("-webkit-mask-image",e,t)}async function Kle(e,t){const n=$n(e,HTMLImageElement);if(!(n&&!HC(e.src))&&!($n(e,SVGImageElement)&&!HC(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await Ok(r,Rk(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Yle(e,t){const r=ro(e.childNodes).map(i=>$q(i,t));await Promise.all(r).then(()=>e)}async function $q(e,t){$n(e,Element)&&(await Gle(e,t),await Kle(e,t),await Yle(e,t))}function Wle(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const VR={};async function HR(e){let t=VR[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},VR[e]=t,t}async function FR(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),qq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function UR(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function Xle(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{ro(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=HR(u).then(h=>FR(h,t)).then(h=>UR(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(HR(i.href).then(l=>FR(l,t)).then(l=>UR(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{ro(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function Zle(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Fq(t.style.getPropertyValue("src")))}async function Qle(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=ro(e.ownerDocument.styleSheets),r=await Xle(n,t);return Zle(r)}function Gq(e){return e.trim().replace(/["']/g,"")}function Jle(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(Gq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function ece(e,t){const n=await Qle(e,t),r=Jle(e);return(await Promise.all(n.filter(s=>r.has(Gq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Uq(s.cssText,o,t)}))).join(`
`)}async function tce(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await ece(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Kq(e,t={}){const{width:n,height:r}=zq(e,t),i=await Mm(e,t,!0);return await tce(i,t),await $q(i,t),Wle(i,t),await ble(i,n,r)}async function Yq(e,t={}){const{width:n,height:r}=zq(e,t),i=await Kq(e,t),s=await Hp(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||gle(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||yle(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function nce(e,t={}){return(await Yq(e,t)).toDataURL()}async function rce(e,t={}){return(await Yq(e,t)).toDataURL("image/jpeg",t.quality||1)}function jk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sv,$R;function ice(){if($R)return sv;$R=1;function e(){this.__data__=[],this.size=0}return sv=e,sv}var ov,GR;function Ql(){if(GR)return ov;GR=1;function e(t,n){return t===n||t!==t&&n!==n}return ov=e,ov}var av,KR;function _m(){if(KR)return av;KR=1;var e=Ql();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return av=t,av}var lv,YR;function sce(){if(YR)return lv;YR=1;var e=_m(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return lv=r,lv}var cv,WR;function oce(){if(WR)return cv;WR=1;var e=_m();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return cv=t,cv}var uv,XR;function ace(){if(XR)return uv;XR=1;var e=_m();function t(n){return e(this.__data__,n)>-1}return uv=t,uv}var dv,ZR;function lce(){if(ZR)return dv;ZR=1;var e=_m();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return dv=t,dv}var fv,QR;function Dm(){if(QR)return fv;QR=1;var e=ice(),t=sce(),n=oce(),r=ace(),i=lce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,fv=s,fv}var hv,JR;function cce(){if(JR)return hv;JR=1;var e=Dm();function t(){this.__data__=new e,this.size=0}return hv=t,hv}var pv,eO;function uce(){if(eO)return pv;eO=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return pv=e,pv}var mv,tO;function dce(){if(tO)return mv;tO=1;function e(t){return this.__data__.get(t)}return mv=e,mv}var gv,nO;function fce(){if(nO)return gv;nO=1;function e(t){return this.__data__.has(t)}return gv=e,gv}var yv,rO;function Wq(){if(rO)return yv;rO=1;var e=typeof Uf=="object"&&Uf&&Uf.Object===Object&&Uf;return yv=e,yv}var vv,iO;function Zr(){if(iO)return vv;iO=1;var e=Wq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return vv=n,vv}var bv,sO;function Jl(){if(sO)return bv;sO=1;var e=Zr(),t=e.Symbol;return bv=t,bv}var xv,oO;function hce(){if(oO)return xv;oO=1;var e=Jl(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return xv=s,xv}var wv,aO;function pce(){if(aO)return wv;aO=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return wv=n,wv}var Sv,lO;function Ea(){if(lO)return Sv;lO=1;var e=Jl(),t=hce(),n=pce(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return Sv=o,Sv}var Cv,cO;function Dr(){if(cO)return Cv;cO=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return Cv=e,Cv}var Ev,uO;function Rd(){if(uO)return Ev;uO=1;var e=Ea(),t=Dr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return Ev=o,Ev}var kv,dO;function mce(){if(dO)return kv;dO=1;var e=Zr(),t=e["__core-js_shared__"];return kv=t,kv}var Nv,fO;function gce(){if(fO)return Nv;fO=1;var e=mce(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return Nv=n,Nv}var Tv,hO;function Xq(){if(hO)return Tv;hO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return Tv=n,Tv}var Av,pO;function yce(){if(pO)return Av;pO=1;var e=Rd(),t=gce(),n=Dr(),r=Xq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var y=e(g)?h:s;return y.test(r(g))}return Av=p,Av}var Mv,mO;function vce(){if(mO)return Mv;mO=1;function e(t,n){return t?.[n]}return Mv=e,Mv}var _v,gO;function ka(){if(gO)return _v;gO=1;var e=yce(),t=vce();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return _v=n,_v}var Dv,yO;function Lk(){if(yO)return Dv;yO=1;var e=ka(),t=Zr(),n=e(t,"Map");return Dv=n,Dv}var Rv,vO;function Rm(){if(vO)return Rv;vO=1;var e=ka(),t=e(Object,"create");return Rv=t,Rv}var Ov,bO;function bce(){if(bO)return Ov;bO=1;var e=Rm();function t(){this.__data__=e?e(null):{},this.size=0}return Ov=t,Ov}var jv,xO;function xce(){if(xO)return jv;xO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return jv=e,jv}var Lv,wO;function wce(){if(wO)return Lv;wO=1;var e=Rm(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return Lv=i,Lv}var Pv,SO;function Sce(){if(SO)return Pv;SO=1;var e=Rm(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Pv=r,Pv}var Iv,CO;function Cce(){if(CO)return Iv;CO=1;var e=Rm(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Iv=n,Iv}var Bv,EO;function Ece(){if(EO)return Bv;EO=1;var e=bce(),t=xce(),n=wce(),r=Sce(),i=Cce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Bv=s,Bv}var zv,kO;function kce(){if(kO)return zv;kO=1;var e=Ece(),t=Dm(),n=Lk();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return zv=r,zv}var qv,NO;function Nce(){if(NO)return qv;NO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return qv=e,qv}var Vv,TO;function Om(){if(TO)return Vv;TO=1;var e=Nce();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Vv=t,Vv}var Hv,AO;function Tce(){if(AO)return Hv;AO=1;var e=Om();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Hv=t,Hv}var Fv,MO;function Ace(){if(MO)return Fv;MO=1;var e=Om();function t(n){return e(this,n).get(n)}return Fv=t,Fv}var Uv,_O;function Mce(){if(_O)return Uv;_O=1;var e=Om();function t(n){return e(this,n).has(n)}return Uv=t,Uv}var $v,DO;function _ce(){if(DO)return $v;DO=1;var e=Om();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return $v=t,$v}var Gv,RO;function Pk(){if(RO)return Gv;RO=1;var e=kce(),t=Tce(),n=Ace(),r=Mce(),i=_ce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Gv=s,Gv}var Kv,OO;function Dce(){if(OO)return Kv;OO=1;var e=Dm(),t=Lk(),n=Pk(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return Kv=i,Kv}var Yv,jO;function jm(){if(jO)return Yv;jO=1;var e=Dm(),t=cce(),n=uce(),r=dce(),i=fce(),s=Dce();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Yv=o,Yv}var Wv,LO;function Ik(){if(LO)return Wv;LO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Wv=e,Wv}var Xv,PO;function Zq(){if(PO)return Xv;PO=1;var e=ka(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Xv=t,Xv}var Zv,IO;function Lm(){if(IO)return Zv;IO=1;var e=Zq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Zv=t,Zv}var Qv,BO;function Pm(){if(BO)return Qv;BO=1;var e=Lm(),t=Ql(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Qv=i,Qv}var Jv,zO;function Od(){if(zO)return Jv;zO=1;var e=Pm(),t=Lm();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return Jv=n,Jv}var eb,qO;function Rce(){if(qO)return eb;qO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return eb=e,eb}var tb,VO;function Ci(){if(VO)return tb;VO=1;function e(t){return t!=null&&typeof t=="object"}return tb=e,tb}var nb,HO;function Oce(){if(HO)return nb;HO=1;var e=Ea(),t=Ci(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return nb=r,nb}var rb,FO;function jd(){if(FO)return rb;FO=1;var e=Oce(),t=Ci(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return rb=s,rb}var ib,UO;function Yt(){if(UO)return ib;UO=1;var e=Array.isArray;return ib=e,ib}var gu={exports:{}},sb,$O;function jce(){if($O)return sb;$O=1;function e(){return!1}return sb=e,sb}gu.exports;var GO;function ec(){return GO||(GO=1,(function(e,t){var n=Zr(),r=jce(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(gu,gu.exports)),gu.exports}var ob,KO;function Im(){if(KO)return ob;KO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return ob=n,ob}var ab,YO;function Bk(){if(YO)return ab;YO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return ab=t,ab}var lb,WO;function Lce(){if(WO)return lb;WO=1;var e=Ea(),t=Bk(),n=Ci(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",x="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",R="[object Uint8Array]",D="[object Uint8ClampedArray]",P="[object Uint16Array]",$="[object Uint32Array]",V={};V[N]=V[k]=V[T]=V[A]=V[_]=V[R]=V[D]=V[P]=V[$]=!0,V[r]=V[i]=V[w]=V[s]=V[E]=V[o]=V[l]=V[u]=V[d]=V[h]=V[p]=V[g]=V[y]=V[x]=V[S]=!1;function B(G){return n(G)&&t(G.length)&&!!V[e(G)]}return lb=B,lb}var cb,XO;function Bm(){if(XO)return cb;XO=1;function e(t){return function(n){return t(n)}}return cb=e,cb}var yu={exports:{}};yu.exports;var ZO;function zk(){return ZO||(ZO=1,(function(e,t){var n=Wq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(yu,yu.exports)),yu.exports}var ub,QO;function Ld(){if(QO)return ub;QO=1;var e=Lce(),t=Bm(),n=zk(),r=n&&n.isTypedArray,i=r?t(r):e;return ub=i,ub}var db,JO;function Qq(){if(JO)return db;JO=1;var e=Rce(),t=jd(),n=Yt(),r=ec(),i=Im(),s=Ld(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),g=!p&&t(d),y=!p&&!g&&r(d),x=!p&&!g&&!y&&s(d),S=p||g||y||x,w=S?e(d.length,String):[],E=w.length;for(var N in d)(h||l.call(d,N))&&!(S&&(N=="length"||y&&(N=="offset"||N=="parent")||x&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,E)))&&w.push(N);return w}return db=u,db}var fb,ej;function zm(){if(ej)return fb;ej=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return fb=t,fb}var hb,tj;function Jq(){if(tj)return hb;tj=1;function e(t,n){return function(r){return t(n(r))}}return hb=e,hb}var pb,nj;function Pce(){if(nj)return pb;nj=1;var e=Jq(),t=e(Object.keys,Object);return pb=t,pb}var mb,rj;function qk(){if(rj)return mb;rj=1;var e=zm(),t=Pce(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return mb=i,mb}var gb,ij;function ls(){if(ij)return gb;ij=1;var e=Rd(),t=Bk();function n(r){return r!=null&&t(r.length)&&!e(r)}return gb=n,gb}var yb,sj;function ho(){if(sj)return yb;sj=1;var e=Qq(),t=qk(),n=ls();function r(i){return n(i)?e(i):t(i)}return yb=r,yb}var vb,oj;function Ice(){if(oj)return vb;oj=1;var e=Od(),t=ho();function n(r,i){return r&&e(i,t(i),r)}return vb=n,vb}var bb,aj;function Bce(){if(aj)return bb;aj=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return bb=e,bb}var xb,lj;function zce(){if(lj)return xb;lj=1;var e=Dr(),t=zm(),n=Bce(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return xb=s,xb}var wb,cj;function Na(){if(cj)return wb;cj=1;var e=Qq(),t=zce(),n=ls();function r(i){return n(i)?e(i,!0):t(i)}return wb=r,wb}var Sb,uj;function qce(){if(uj)return Sb;uj=1;var e=Od(),t=Na();function n(r,i){return r&&e(i,t(i),r)}return Sb=n,Sb}var vu={exports:{}};vu.exports;var dj;function eV(){return dj||(dj=1,(function(e,t){var n=Zr(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(vu,vu.exports)),vu.exports}var Cb,fj;function tV(){if(fj)return Cb;fj=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return Cb=e,Cb}var Eb,hj;function nV(){if(hj)return Eb;hj=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return Eb=e,Eb}var kb,pj;function rV(){if(pj)return kb;pj=1;function e(){return[]}return kb=e,kb}var Nb,mj;function Vk(){if(mj)return Nb;mj=1;var e=nV(),t=rV(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return Nb=s,Nb}var Tb,gj;function Vce(){if(gj)return Tb;gj=1;var e=Od(),t=Vk();function n(r,i){return e(r,t(r),i)}return Tb=n,Tb}var Ab,yj;function Hk(){if(yj)return Ab;yj=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return Ab=e,Ab}var Mb,vj;function qm(){if(vj)return Mb;vj=1;var e=Jq(),t=e(Object.getPrototypeOf,Object);return Mb=t,Mb}var _b,bj;function iV(){if(bj)return _b;bj=1;var e=Hk(),t=qm(),n=Vk(),r=rV(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return _b=s,_b}var Db,xj;function Hce(){if(xj)return Db;xj=1;var e=Od(),t=iV();function n(r,i){return e(r,t(r),i)}return Db=n,Db}var Rb,wj;function sV(){if(wj)return Rb;wj=1;var e=Hk(),t=Yt();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return Rb=n,Rb}var Ob,Sj;function oV(){if(Sj)return Ob;Sj=1;var e=sV(),t=Vk(),n=ho();function r(i){return e(i,n,t)}return Ob=r,Ob}var jb,Cj;function Fce(){if(Cj)return jb;Cj=1;var e=sV(),t=iV(),n=Na();function r(i){return e(i,n,t)}return jb=r,jb}var Lb,Ej;function Uce(){if(Ej)return Lb;Ej=1;var e=ka(),t=Zr(),n=e(t,"DataView");return Lb=n,Lb}var Pb,kj;function $ce(){if(kj)return Pb;kj=1;var e=ka(),t=Zr(),n=e(t,"Promise");return Pb=n,Pb}var Ib,Nj;function aV(){if(Nj)return Ib;Nj=1;var e=ka(),t=Zr(),n=e(t,"Set");return Ib=n,Ib}var Bb,Tj;function Gce(){if(Tj)return Bb;Tj=1;var e=ka(),t=Zr(),n=e(t,"WeakMap");return Bb=n,Bb}var zb,Aj;function tc(){if(Aj)return zb;Aj=1;var e=Uce(),t=Lk(),n=$ce(),r=aV(),i=Gce(),s=Ea(),o=Xq(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",y=o(e),x=o(t),S=o(n),w=o(r),E=o(i),N=s;return(e&&N(new e(new ArrayBuffer(1)))!=g||t&&N(new t)!=l||n&&N(n.resolve())!=d||r&&N(new r)!=h||i&&N(new i)!=p)&&(N=function(k){var T=s(k),A=T==u?k.constructor:void 0,_=A?o(A):"";if(_)switch(_){case y:return g;case x:return l;case S:return d;case w:return h;case E:return p}return T}),zb=N,zb}var qb,Mj;function Kce(){if(Mj)return qb;Mj=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return qb=n,qb}var Vb,_j;function lV(){if(_j)return Vb;_j=1;var e=Zr(),t=e.Uint8Array;return Vb=t,Vb}var Hb,Dj;function Fk(){if(Dj)return Hb;Dj=1;var e=lV();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Hb=t,Hb}var Fb,Rj;function Yce(){if(Rj)return Fb;Rj=1;var e=Fk();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Fb=t,Fb}var Ub,Oj;function Wce(){if(Oj)return Ub;Oj=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Ub=t,Ub}var $b,jj;function Xce(){if(jj)return $b;jj=1;var e=Jl(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return $b=r,$b}var Gb,Lj;function cV(){if(Lj)return Gb;Lj=1;var e=Fk();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Gb=t,Gb}var Kb,Pj;function Zce(){if(Pj)return Kb;Pj=1;var e=Fk(),t=Yce(),n=Wce(),r=Xce(),i=cV(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",R="[object Uint32Array]";function D(P,$,V){var B=P.constructor;switch($){case y:return e(P);case s:case o:return new B(+P);case x:return t(P,V);case S:case w:case E:case N:case k:case T:case A:case _:case R:return i(P,V);case l:return new B;case u:case p:return new B(P);case d:return n(P);case h:return new B;case g:return r(P)}}return Kb=D,Kb}var Yb,Ij;function uV(){if(Ij)return Yb;Ij=1;var e=Dr(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return Yb=n,Yb}var Wb,Bj;function dV(){if(Bj)return Wb;Bj=1;var e=uV(),t=qm(),n=zm();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Wb=r,Wb}var Xb,zj;function Qce(){if(zj)return Xb;zj=1;var e=tc(),t=Ci(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Xb=r,Xb}var Zb,qj;function Jce(){if(qj)return Zb;qj=1;var e=Qce(),t=Bm(),n=zk(),r=n&&n.isMap,i=r?t(r):e;return Zb=i,Zb}var Qb,Vj;function eue(){if(Vj)return Qb;Vj=1;var e=tc(),t=Ci(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Qb=r,Qb}var Jb,Hj;function tue(){if(Hj)return Jb;Hj=1;var e=eue(),t=Bm(),n=zk(),r=n&&n.isSet,i=r?t(r):e;return Jb=i,Jb}var ex,Fj;function fV(){if(Fj)return ex;Fj=1;var e=jm(),t=Ik(),n=Pm(),r=Ice(),i=qce(),s=eV(),o=tV(),l=Vce(),u=Hce(),d=oV(),h=Fce(),p=tc(),g=Kce(),y=Zce(),x=dV(),S=Yt(),w=ec(),E=Jce(),N=Dr(),k=tue(),T=ho(),A=Na(),_=1,R=2,D=4,P="[object Arguments]",$="[object Array]",V="[object Boolean]",B="[object Date]",G="[object Error]",z="[object Function]",F="[object GeneratorFunction]",I="[object Map]",q="[object Number]",W="[object Object]",Q="[object RegExp]",L="[object Set]",K="[object String]",se="[object Symbol]",ce="[object WeakMap]",H="[object ArrayBuffer]",X="[object DataView]",ee="[object Float32Array]",ue="[object Float64Array]",le="[object Int8Array]",ge="[object Int16Array]",Ee="[object Int32Array]",je="[object Uint8Array]",ke="[object Uint8ClampedArray]",Ne="[object Uint16Array]",we="[object Uint32Array]",ve={};ve[P]=ve[$]=ve[H]=ve[X]=ve[V]=ve[B]=ve[ee]=ve[ue]=ve[le]=ve[ge]=ve[Ee]=ve[I]=ve[q]=ve[W]=ve[Q]=ve[L]=ve[K]=ve[se]=ve[je]=ve[ke]=ve[Ne]=ve[we]=!0,ve[G]=ve[z]=ve[ce]=!1;function Pe(Ae,at,gt,Or,wn,Wt){var rt,nn=at&_,fn=at&R,Xt=at&D;if(gt&&(rt=wn?gt(Ae,Or,wn,Wt):gt(Ae)),rt!==void 0)return rt;if(!N(Ae))return Ae;var dt=S(Ae);if(dt){if(rt=g(Ae),!nn)return o(Ae,rt)}else{var zt=p(Ae),wt=zt==z||zt==F;if(w(Ae))return s(Ae,nn);if(zt==W||zt==P||wt&&!wn){if(rt=fn||wt?{}:x(Ae),!nn)return fn?u(Ae,i(rt,Ae)):l(Ae,r(rt,Ae))}else{if(!ve[zt])return wn?Ae:{};rt=y(Ae,zt,nn)}}Wt||(Wt=new e);var Qr=Wt.get(Ae);if(Qr)return Qr;Wt.set(Ae,rt),k(Ae)?Ae.forEach(function(Zt){rt.add(Pe(Zt,at,gt,Zt,Ae,Wt))}):E(Ae)&&Ae.forEach(function(Zt,hn){rt.set(hn,Pe(Zt,at,gt,hn,Ae,Wt))});var po=Xt?fn?h:d:fn?A:T,jr=dt?void 0:po(Ae);return t(jr||Ae,function(Zt,hn){jr&&(hn=Zt,Zt=Ae[hn]),n(rt,hn,Pe(Zt,at,gt,hn,Ae,Wt))}),rt}return ex=Pe,ex}var tx,Uj;function nue(){if(Uj)return tx;Uj=1;var e=fV(),t=4;function n(r){return e(r,t)}return tx=n,tx}var nx,$j;function Uk(){if($j)return nx;$j=1;function e(t){return function(){return t}}return nx=e,nx}var rx,Gj;function rue(){if(Gj)return rx;Gj=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return rx=e,rx}var ix,Kj;function $k(){if(Kj)return ix;Kj=1;var e=rue(),t=e();return ix=t,ix}var sx,Yj;function Gk(){if(Yj)return sx;Yj=1;var e=$k(),t=ho();function n(r,i){return r&&e(r,i,t)}return sx=n,sx}var ox,Wj;function iue(){if(Wj)return ox;Wj=1;var e=ls();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return ox=t,ox}var ax,Xj;function Vm(){if(Xj)return ax;Xj=1;var e=Gk(),t=iue(),n=t(e);return ax=n,ax}var lx,Zj;function Ta(){if(Zj)return lx;Zj=1;function e(t){return t}return lx=e,lx}var cx,Qj;function hV(){if(Qj)return cx;Qj=1;var e=Ta();function t(n){return typeof n=="function"?n:e}return cx=t,cx}var ux,Jj;function pV(){if(Jj)return ux;Jj=1;var e=Ik(),t=Vm(),n=hV(),r=Yt();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return ux=i,ux}var dx,e3;function mV(){return e3||(e3=1,dx=pV()),dx}var fx,t3;function sue(){if(t3)return fx;t3=1;var e=Vm();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return fx=t,fx}var hx,n3;function oue(){if(n3)return hx;n3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return hx=t,hx}var px,r3;function aue(){if(r3)return px;r3=1;function e(t){return this.__data__.has(t)}return px=e,px}var mx,i3;function gV(){if(i3)return mx;i3=1;var e=Pk(),t=oue(),n=aue();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,mx=r,mx}var gx,s3;function lue(){if(s3)return gx;s3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return gx=e,gx}var yx,o3;function yV(){if(o3)return yx;o3=1;function e(t,n){return t.has(n)}return yx=e,yx}var vx,a3;function vV(){if(a3)return vx;a3=1;var e=gV(),t=lue(),n=yV(),r=1,i=2;function s(o,l,u,d,h,p){var g=u&r,y=o.length,x=l.length;if(y!=x&&!(g&&x>y))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var E=-1,N=!0,k=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++E<y;){var T=o[E],A=l[E];if(d)var _=g?d(A,T,E,l,o,p):d(T,A,E,o,l,p);if(_!==void 0){if(_)continue;N=!1;break}if(k){if(!t(l,function(R,D){if(!n(k,D)&&(T===R||h(T,R,u,d,p)))return k.push(D)})){N=!1;break}}else if(!(T===A||h(T,A,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return vx=s,vx}var bx,l3;function cue(){if(l3)return bx;l3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return bx=e,bx}var xx,c3;function Kk(){if(c3)return xx;c3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return xx=e,xx}var wx,u3;function uue(){if(u3)return wx;u3=1;var e=Jl(),t=lV(),n=Ql(),r=vV(),i=cue(),s=Kk(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",y="[object RegExp]",x="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",N="[object DataView]",k=e?e.prototype:void 0,T=k?k.valueOf:void 0;function A(_,R,D,P,$,V,B){switch(D){case N:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case E:return!(_.byteLength!=R.byteLength||!V(new t(_),new t(R)));case u:case d:case g:return n(+_,+R);case h:return _.name==R.name&&_.message==R.message;case y:case S:return _==R+"";case p:var G=i;case x:var z=P&o;if(G||(G=s),_.size!=R.size&&!z)return!1;var F=B.get(_);if(F)return F==R;P|=l,B.set(_,R);var I=r(G(_),G(R),P,$,V,B);return B.delete(_),I;case w:if(T)return T.call(_)==T.call(R)}return!1}return wx=A,wx}var Sx,d3;function due(){if(d3)return Sx;d3=1;var e=oV(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,g=e(s),y=g.length,x=e(o),S=x.length;if(y!=S&&!p)return!1;for(var w=y;w--;){var E=g[w];if(!(p?E in o:r.call(o,E)))return!1}var N=h.get(s),k=h.get(o);if(N&&k)return N==o&&k==s;var T=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<y;){E=g[w];var _=s[E],R=o[E];if(u)var D=p?u(R,_,E,o,s,h):u(_,R,E,s,o,h);if(!(D===void 0?_===R||d(_,R,l,u,h):D)){T=!1;break}A||(A=E=="constructor")}if(T&&!A){var P=s.constructor,$=o.constructor;P!=$&&"constructor"in s&&"constructor"in o&&!(typeof P=="function"&&P instanceof P&&typeof $=="function"&&$ instanceof $)&&(T=!1)}return h.delete(s),h.delete(o),T}return Sx=i,Sx}var Cx,f3;function fue(){if(f3)return Cx;f3=1;var e=jm(),t=vV(),n=uue(),r=due(),i=tc(),s=Yt(),o=ec(),l=Ld(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function x(S,w,E,N,k,T){var A=s(S),_=s(w),R=A?h:i(S),D=_?h:i(w);R=R==d?p:R,D=D==d?p:D;var P=R==p,$=D==p,V=R==D;if(V&&o(S)){if(!o(w))return!1;A=!0,P=!1}if(V&&!P)return T||(T=new e),A||l(S)?t(S,w,E,N,k,T):n(S,w,R,E,N,k,T);if(!(E&u)){var B=P&&y.call(S,"__wrapped__"),G=$&&y.call(w,"__wrapped__");if(B||G){var z=B?S.value():S,F=G?w.value():w;return T||(T=new e),k(z,F,E,N,T)}}return V?(T||(T=new e),r(S,w,E,N,k,T)):!1}return Cx=x,Cx}var Ex,h3;function bV(){if(h3)return Ex;h3=1;var e=fue(),t=Ci();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return Ex=n,Ex}var kx,p3;function hue(){if(p3)return kx;p3=1;var e=jm(),t=bV(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<h;){g=l[d];var y=g[0],x=s[y],S=g[1];if(p&&g[2]){if(x===void 0&&!(y in s))return!1}else{var w=new e;if(u)var E=u(x,S,y,s,o,w);if(!(E===void 0?t(S,x,n|r,u,w):E))return!1}}return!0}return kx=i,kx}var Nx,m3;function xV(){if(m3)return Nx;m3=1;var e=Dr();function t(n){return n===n&&!e(n)}return Nx=t,Nx}var Tx,g3;function pue(){if(g3)return Tx;g3=1;var e=xV(),t=ho();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return Tx=n,Tx}var Ax,y3;function wV(){if(y3)return Ax;y3=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Ax=e,Ax}var Mx,v3;function mue(){if(v3)return Mx;v3=1;var e=hue(),t=pue(),n=wV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return Mx=r,Mx}var _x,b3;function nc(){if(b3)return _x;b3=1;var e=Ea(),t=Ci(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return _x=r,_x}var Dx,x3;function Yk(){if(x3)return Dx;x3=1;var e=Yt(),t=nc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Dx=i,Dx}var Rx,w3;function gue(){if(w3)return Rx;w3=1;var e=Pk(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,Rx=n,Rx}var Ox,S3;function yue(){if(S3)return Ox;S3=1;var e=gue(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return Ox=n,Ox}var jx,C3;function vue(){if(C3)return jx;C3=1;var e=yue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return jx=r,jx}var Lx,E3;function Hm(){if(E3)return Lx;E3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Lx=e,Lx}var Px,k3;function bue(){if(k3)return Px;k3=1;var e=Jl(),t=Hm(),n=Yt(),r=nc(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return Px=o,Px}var Ix,N3;function SV(){if(N3)return Ix;N3=1;var e=bue();function t(n){return n==null?"":e(n)}return Ix=t,Ix}var Bx,T3;function Fm(){if(T3)return Bx;T3=1;var e=Yt(),t=Yk(),n=vue(),r=SV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return Bx=i,Bx}var zx,A3;function Pd(){if(A3)return zx;A3=1;var e=nc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return zx=t,zx}var qx,M3;function Um(){if(M3)return qx;M3=1;var e=Fm(),t=Pd();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return qx=n,qx}var Vx,_3;function xue(){if(_3)return Vx;_3=1;var e=Um();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Vx=t,Vx}var Hx,D3;function wue(){if(D3)return Hx;D3=1;function e(t,n){return t!=null&&n in Object(t)}return Hx=e,Hx}var Fx,R3;function CV(){if(R3)return Fx;R3=1;var e=Fm(),t=jd(),n=Yt(),r=Im(),i=Bk(),s=Pd();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,g=!1;++h<p;){var y=s(u[h]);if(!(g=l!=null&&d(l,y)))break;l=l[y]}return g||++h!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(y,p)&&(n(l)||t(l)))}return Fx=o,Fx}var Ux,O3;function EV(){if(O3)return Ux;O3=1;var e=wue(),t=CV();function n(r,i){return r!=null&&t(r,i,e)}return Ux=n,Ux}var $x,j3;function Sue(){if(j3)return $x;j3=1;var e=bV(),t=xue(),n=EV(),r=Yk(),i=xV(),s=wV(),o=Pd(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(g){var y=t(g,h);return y===void 0&&y===p?n(g,h):e(p,y,l|u)}}return $x=d,$x}var Gx,L3;function kV(){if(L3)return Gx;L3=1;function e(t){return function(n){return n?.[t]}}return Gx=e,Gx}var Kx,P3;function Cue(){if(P3)return Kx;P3=1;var e=Um();function t(n){return function(r){return e(r,n)}}return Kx=t,Kx}var Yx,I3;function Eue(){if(I3)return Yx;I3=1;var e=kV(),t=Cue(),n=Yk(),r=Pd();function i(s){return n(s)?e(r(s)):t(s)}return Yx=i,Yx}var Wx,B3;function cs(){if(B3)return Wx;B3=1;var e=mue(),t=Sue(),n=Ta(),r=Yt(),i=Eue();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return Wx=s,Wx}var Xx,z3;function NV(){if(z3)return Xx;z3=1;var e=nV(),t=sue(),n=cs(),r=Yt();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return Xx=i,Xx}var Zx,q3;function kue(){if(q3)return Zx;q3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Zx=n,Zx}var Qx,V3;function TV(){if(V3)return Qx;V3=1;var e=kue(),t=CV();function n(r,i){return r!=null&&t(r,i,e)}return Qx=n,Qx}var Jx,H3;function Nue(){if(H3)return Jx;H3=1;var e=qk(),t=tc(),n=jd(),r=Yt(),i=ls(),s=ec(),o=zm(),l=Ld(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||l(y)||n(y)))return!y.length;var x=t(y);if(x==u||x==d)return!y.size;if(o(y))return!e(y).length;for(var S in y)if(p.call(y,S))return!1;return!0}return Jx=g,Jx}var e1,F3;function AV(){if(F3)return e1;F3=1;function e(t){return t===void 0}return e1=e,e1}var t1,U3;function MV(){if(U3)return t1;U3=1;var e=Vm(),t=ls();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return t1=n,t1}var n1,$3;function _V(){if($3)return n1;$3=1;var e=Hm(),t=cs(),n=MV(),r=Yt();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return n1=i,n1}var r1,G3;function Tue(){if(G3)return r1;G3=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return r1=e,r1}var i1,K3;function Aue(){if(K3)return i1;K3=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return i1=e,i1}var s1,Y3;function DV(){if(Y3)return s1;Y3=1;var e=Tue(),t=Vm(),n=cs(),r=Aue(),i=Yt();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return s1=s,s1}var o1,W3;function Mue(){if(W3)return o1;W3=1;var e=Ea(),t=Yt(),n=Ci(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return o1=i,o1}var a1,X3;function _ue(){if(X3)return a1;X3=1;var e=kV(),t=e("length");return a1=t,a1}var l1,Z3;function Due(){if(Z3)return l1;Z3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return l1=u,l1}var c1,Q3;function Rue(){if(Q3)return c1;Q3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=d+"?",S="["+s+"]?",w="(?:"+y+"(?:"+[h,p,g].join("|")+")"+S+x+")*",E=S+x+w,N="(?:"+[h+l+"?",l,p,g,o].join("|")+")",k=RegExp(u+"(?="+u+")|"+N+E,"g");function T(A){for(var _=k.lastIndex=0;k.test(A);)++_;return _}return c1=T,c1}var u1,J3;function Oue(){if(J3)return u1;J3=1;var e=_ue(),t=Due(),n=Rue();function r(i){return t(i)?n(i):e(i)}return u1=r,u1}var d1,eL;function jue(){if(eL)return d1;eL=1;var e=qk(),t=tc(),n=ls(),r=Mue(),i=Oue(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return d1=l,d1}var f1,tL;function Lue(){if(tL)return f1;tL=1;var e=Ik(),t=uV(),n=Gk(),r=cs(),i=qm(),s=Yt(),o=ec(),l=Rd(),u=Dr(),d=Ld();function h(p,g,y){var x=s(p),S=x||o(p)||d(p);if(g=r(g,4),y==null){var w=p&&p.constructor;S?y=x?new w:[]:u(p)?y=l(w)?t(i(p)):{}:y={}}return(S?e:n)(p,function(E,N,k){return g(y,E,N,k)}),y}return f1=h,f1}var h1,nL;function Pue(){if(nL)return h1;nL=1;var e=Jl(),t=jd(),n=Yt(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return h1=i,h1}var p1,rL;function Wk(){if(rL)return p1;rL=1;var e=Hk(),t=Pue();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return p1=n,p1}var m1,iL;function Iue(){if(iL)return m1;iL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return m1=e,m1}var g1,sL;function RV(){if(sL)return g1;sL=1;var e=Iue(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return g1=n,g1}var y1,oL;function Bue(){if(oL)return y1;oL=1;var e=Uk(),t=Zq(),n=Ta(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return y1=r,y1}var v1,aL;function zue(){if(aL)return v1;aL=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return v1=r,v1}var b1,lL;function OV(){if(lL)return b1;lL=1;var e=Bue(),t=zue(),n=t(e);return b1=n,b1}var x1,cL;function $m(){if(cL)return x1;cL=1;var e=Ta(),t=RV(),n=OV();function r(i,s){return n(t(i,s,e),i+"")}return x1=r,x1}var w1,uL;function jV(){if(uL)return w1;uL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return w1=e,w1}var S1,dL;function que(){if(dL)return S1;dL=1;function e(t){return t!==t}return S1=e,S1}var C1,fL;function Vue(){if(fL)return C1;fL=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return C1=e,C1}var E1,hL;function Hue(){if(hL)return E1;hL=1;var e=jV(),t=que(),n=Vue();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return E1=r,E1}var k1,pL;function Fue(){if(pL)return k1;pL=1;var e=Hue();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return k1=t,k1}var N1,mL;function Uue(){if(mL)return N1;mL=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return N1=e,N1}var T1,gL;function $ue(){if(gL)return T1;gL=1;function e(){}return T1=e,T1}var A1,yL;function Gue(){if(yL)return A1;yL=1;var e=aV(),t=$ue(),n=Kk(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return A1=i,A1}var M1,vL;function Kue(){if(vL)return M1;vL=1;var e=gV(),t=Fue(),n=Uue(),r=yV(),i=Gue(),s=Kk(),o=200;function l(u,d,h){var p=-1,g=t,y=u.length,x=!0,S=[],w=S;if(h)x=!1,g=n;else if(y>=o){var E=d?null:i(u);if(E)return s(E);x=!1,g=r,w=new e}else w=d?[]:S;e:for(;++p<y;){var N=u[p],k=d?d(N):N;if(N=h||N!==0?N:0,x&&k===k){for(var T=w.length;T--;)if(w[T]===k)continue e;d&&w.push(k),S.push(N)}else g(w,k,h)||(w!==S&&w.push(k),S.push(N))}return S}return M1=l,M1}var _1,bL;function LV(){if(bL)return _1;bL=1;var e=ls(),t=Ci();function n(r){return t(r)&&e(r)}return _1=n,_1}var D1,xL;function Yue(){if(xL)return D1;xL=1;var e=Wk(),t=$m(),n=Kue(),r=LV(),i=t(function(s){return n(e(s,1,r,!0))});return D1=i,D1}var R1,wL;function Wue(){if(wL)return R1;wL=1;var e=Hm();function t(n,r){return e(r,function(i){return n[i]})}return R1=t,R1}var O1,SL;function PV(){if(SL)return O1;SL=1;var e=Wue(),t=ho();function n(r){return r==null?[]:e(r,t(r))}return O1=n,O1}var j1,CL;function Rr(){if(CL)return j1;CL=1;var e;if(typeof jk=="function")try{e={clone:nue(),constant:Uk(),each:mV(),filter:NV(),has:TV(),isArray:Yt(),isEmpty:Nue(),isFunction:Rd(),isUndefined:AV(),keys:ho(),map:_V(),reduce:DV(),size:jue(),transform:Lue(),union:Yue(),values:PV()}}catch{}return e||(e=window._),j1=e,j1}var L1,EL;function Xk(){if(EL)return L1;EL=1;var e=Rr();L1=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var g=arguments,y=this;return e.each(h,function(x){g.length>1?y.setNode(x,p):y.setNode(x)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var g=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(y){p.setParent(y)}),delete this._children[h]),e.each(e.keys(this._in[h]),g),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),g),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var y={};function x(S){var w=g.parent(S);return w===void 0||p.hasNode(w)?(y[S]=w,w):w in y?y[w]:x(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,x(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var g=this,y=arguments;return e.reduce(h,function(x,S){return y.length>1?g.setEdge(x,S,p):g.setEdge(x,S),S}),this},i.prototype.setEdge=function(){var h,p,g,y,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,g=S.name,arguments.length===2&&(y=arguments[1],x=!0)):(h=S,p=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],x=!0)),h=""+h,p=""+p,e.isUndefined(g)||(g=""+g);var w=l(this._isDirected,h,p,g);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=x?y:this._defaultEdgeLabelFn(h,p,g);var E=u(this._isDirected,h,p,g);return h=E.v,p=E.w,Object.freeze(E),this._edgeObjs[w]=E,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=E,this._out[h][w]=E,this._edgeCount++,this},i.prototype.edge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g),x=this._edgeObjs[y];return x&&(h=x.v,p=x.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][y],delete this._out[h][y],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var g=this._in[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.v===p}):y}},i.prototype.outEdges=function(h,p){var g=this._out[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.w===p}):y}},i.prototype.nodeEdges=function(h,p){var g=this.inEdges(h,p);if(g)return g.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}return x+r+S+r+(e.isUndefined(y)?t:y)}function u(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}var E={v:x,w:S};return y&&(E.name=y),E}function d(h,p){return l(h,p.v,p.w,p.name)}return L1}var P1,kL;function Xue(){return kL||(kL=1,P1="2.1.8"),P1}var I1,NL;function Zue(){return NL||(NL=1,I1={Graph:Xk(),version:Xue()}),I1}var B1,TL;function Que(){if(TL)return B1;TL=1;var e=Rr(),t=Xk();B1={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return B1}var z1,AL;function Jue(){if(AL)return z1;AL=1;var e=Rr();z1=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return z1}var q1,ML;function IV(){if(ML)return q1;ML=1;var e=Rr();q1=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},q1}var V1,_L;function BV(){if(_L)return V1;_L=1;var e=Rr(),t=IV();V1=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,g,y=function(x){var S=x.v!==p?x.v:x.w,w=d[S],E=l(x),N=g.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+E);N<w.distance&&(w.distance=N,w.predecessor=p,h.decrease(S,N))};for(s.nodes().forEach(function(x){var S=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:S},h.add(x,S)});h.size()>0&&(p=h.removeMin(),g=d[p],g.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(y);return d}return V1}var H1,DL;function ede(){if(DL)return H1;DL=1;var e=BV(),t=Rr();H1=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return H1}var F1,RL;function zV(){if(RL)return F1;RL=1;var e=Rr();F1=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(d.lowlink=Math.min(d.lowlink,s[g].index)):(l(g),d.lowlink=Math.min(d.lowlink,s[g].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return F1}var U1,OL;function tde(){if(OL)return U1;OL=1;var e=Rr(),t=zV();U1=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return U1}var $1,jL;function nde(){if(jL)return $1;jL=1;var e=Rr();$1=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,g=s(h);l[d][p]={distance:g,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var g=l[p];u.forEach(function(y){var x=g[d],S=h[y],w=g[y],E=x.distance+S.distance;E<w.distance&&(w.distance=E,w.predecessor=S.predecessor)})})}),l}return $1}var G1,LL;function qV(){if(LL)return G1;LL=1;var e=Rr();G1=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,G1}var K1,PL;function rde(){if(PL)return K1;PL=1;var e=qV();K1=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return K1}var Y1,IL;function VV(){if(IL)return Y1;IL=1;var e=Rr();Y1=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return Y1}var W1,BL;function ide(){if(BL)return W1;BL=1;var e=VV();W1=t;function t(n,r){return e(n,r,"post")}return W1}var X1,zL;function sde(){if(zL)return X1;zL=1;var e=VV();X1=t;function t(n,r){return e(n,r,"pre")}return X1}var Z1,qL;function ode(){if(qL)return Z1;qL=1;var e=Rr(),t=Xk(),n=IV();Z1=r;function r(i,s){var o=new t,l={},u=new n,d;function h(g){var y=g.v===d?g.w:g.v,x=u.priority(y);if(x!==void 0){var S=s(g);S<x&&(l[y]=d,u.decrease(y,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return Z1}var Q1,VL;function ade(){return VL||(VL=1,Q1={components:Jue(),dijkstra:BV(),dijkstraAll:ede(),findCycles:tde(),floydWarshall:nde(),isAcyclic:rde(),postorder:ide(),preorder:sde(),prim:ode(),tarjan:zV(),topsort:qV()}),Q1}var J1,HL;function lde(){if(HL)return J1;HL=1;var e=Zue();return J1={Graph:e.Graph,json:Que(),alg:ade(),version:e.version},J1}var ew,FL;function Wr(){if(FL)return ew;FL=1;var e;if(typeof jk=="function")try{e=lde()}catch{}return e||(e=window.graphlib),ew=e,ew}var tw,UL;function cde(){if(UL)return tw;UL=1;var e=fV(),t=1,n=4;function r(i){return e(i,t|n)}return tw=r,tw}var nw,$L;function Gm(){if($L)return nw;$L=1;var e=Ql(),t=ls(),n=Im(),r=Dr();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return nw=i,nw}var rw,GL;function ude(){if(GL)return rw;GL=1;var e=$m(),t=Ql(),n=Gm(),r=Na(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var g=u[d],y=r(g),x=-1,S=y.length;++x<S;){var w=y[x],E=l[w];(E===void 0||t(E,i[w])&&!s.call(l,w))&&(l[w]=g[w])}return l});return rw=o,rw}var iw,KL;function dde(){if(KL)return iw;KL=1;var e=cs(),t=ls(),n=ho();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return iw=r,iw}var sw,YL;function fde(){if(YL)return sw;YL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return sw=t,sw}var ow,WL;function hde(){if(WL)return ow;WL=1;var e=fde(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return ow=n,ow}var aw,XL;function pde(){if(XL)return aw;XL=1;var e=hde(),t=Dr(),n=nc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return aw=u,aw}var lw,ZL;function HV(){if(ZL)return lw;ZL=1;var e=pde(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return lw=r,lw}var cw,QL;function mde(){if(QL)return cw;QL=1;var e=HV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return cw=t,cw}var uw,JL;function gde(){if(JL)return uw;JL=1;var e=jV(),t=cs(),n=mde(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return uw=i,uw}var dw,e4;function yde(){if(e4)return dw;e4=1;var e=dde(),t=gde(),n=e(t);return dw=n,dw}var fw,t4;function FV(){if(t4)return fw;t4=1;var e=Wk();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return fw=t,fw}var hw,n4;function vde(){if(n4)return hw;n4=1;var e=$k(),t=hV(),n=Na();function r(i,s){return i==null?i:e(i,t(s),n)}return hw=r,hw}var pw,r4;function bde(){if(r4)return pw;r4=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return pw=e,pw}var mw,i4;function xde(){if(i4)return mw;i4=1;var e=Lm(),t=Gk(),n=cs();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return mw=r,mw}var gw,s4;function Zk(){if(s4)return gw;s4=1;var e=nc();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return gw=t,gw}var yw,o4;function wde(){if(o4)return yw;o4=1;function e(t,n){return t>n}return yw=e,yw}var vw,a4;function Sde(){if(a4)return vw;a4=1;var e=Zk(),t=wde(),n=Ta();function r(i){return i&&i.length?e(i,n,t):void 0}return vw=r,vw}var bw,l4;function UV(){if(l4)return bw;l4=1;var e=Lm(),t=Ql();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return bw=n,bw}var xw,c4;function Cde(){if(c4)return xw;c4=1;var e=Ea(),t=qm(),n=Ci(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return xw=d,xw}var ww,u4;function $V(){if(u4)return ww;u4=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return ww=e,ww}var Sw,d4;function Ede(){if(d4)return Sw;d4=1;var e=Od(),t=Na();function n(r){return e(r,t(r))}return Sw=n,Sw}var Cw,f4;function kde(){if(f4)return Cw;f4=1;var e=UV(),t=eV(),n=cV(),r=tV(),i=dV(),s=jd(),o=Yt(),l=LV(),u=ec(),d=Rd(),h=Dr(),p=Cde(),g=Ld(),y=$V(),x=Ede();function S(w,E,N,k,T,A,_){var R=y(w,N),D=y(E,N),P=_.get(D);if(P){e(w,N,P);return}var $=A?A(R,D,N+"",w,E,_):void 0,V=$===void 0;if(V){var B=o(D),G=!B&&u(D),z=!B&&!G&&g(D);$=D,B||G||z?o(R)?$=R:l(R)?$=r(R):G?(V=!1,$=t(D,!0)):z?(V=!1,$=n(D,!0)):$=[]:p(D)||s(D)?($=R,s(R)?$=x(R):(!h(R)||d(R))&&($=i(D))):V=!1}V&&(_.set(D,$),T($,D,k,A,_),_.delete(D)),e(w,N,$)}return Cw=S,Cw}var Ew,h4;function Nde(){if(h4)return Ew;h4=1;var e=jm(),t=UV(),n=$k(),r=kde(),i=Dr(),s=Na(),o=$V();function l(u,d,h,p,g){u!==d&&n(d,function(y,x){if(g||(g=new e),i(y))r(u,d,x,h,l,p,g);else{var S=p?p(o(u,x),y,x+"",u,d,g):void 0;S===void 0&&(S=y),t(u,x,S)}},s)}return Ew=l,Ew}var kw,p4;function Tde(){if(p4)return kw;p4=1;var e=$m(),t=Gm();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return kw=n,kw}var Nw,m4;function Ade(){if(m4)return Nw;m4=1;var e=Nde(),t=Tde(),n=t(function(r,i,s){e(r,i,s)});return Nw=n,Nw}var Tw,g4;function GV(){if(g4)return Tw;g4=1;function e(t,n){return t<n}return Tw=e,Tw}var Aw,y4;function Mde(){if(y4)return Aw;y4=1;var e=Zk(),t=GV(),n=Ta();function r(i){return i&&i.length?e(i,n,t):void 0}return Aw=r,Aw}var Mw,v4;function _de(){if(v4)return Mw;v4=1;var e=Zk(),t=cs(),n=GV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return Mw=r,Mw}var _w,b4;function Dde(){if(b4)return _w;b4=1;var e=Zr(),t=function(){return e.Date.now()};return _w=t,_w}var Dw,x4;function Rde(){if(x4)return Dw;x4=1;var e=Pm(),t=Fm(),n=Im(),r=Dr(),i=Pd();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,g=p-1,y=o;y!=null&&++h<p;){var x=i(l[h]),S=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(h!=g){var w=y[x];S=d?d(w,x,y):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(y,x,S),y=y[x]}return o}return Dw=s,Dw}var Rw,w4;function Ode(){if(w4)return Rw;w4=1;var e=Um(),t=Rde(),n=Fm();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return Rw=r,Rw}var Ow,S4;function jde(){if(S4)return Ow;S4=1;var e=Ode(),t=EV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return Ow=n,Ow}var jw,C4;function Lde(){if(C4)return jw;C4=1;var e=FV(),t=RV(),n=OV();function r(i){return n(t(i,void 0,e),i+"")}return jw=r,jw}var Lw,E4;function Pde(){if(E4)return Lw;E4=1;var e=jde(),t=Lde(),n=t(function(r,i){return r==null?{}:e(r,i)});return Lw=n,Lw}var Pw,k4;function Ide(){if(k4)return Pw;k4=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return Pw=n,Pw}var Iw,N4;function Bde(){if(N4)return Iw;N4=1;var e=Ide(),t=Gm(),n=HV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return Iw=r,Iw}var Bw,T4;function zde(){if(T4)return Bw;T4=1;var e=Bde(),t=e();return Bw=t,Bw}var zw,A4;function qde(){if(A4)return zw;A4=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return zw=e,zw}var qw,M4;function Vde(){if(M4)return qw;M4=1;var e=nc();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return qw=t,qw}var Vw,_4;function Hde(){if(_4)return Vw;_4=1;var e=Vde();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return Vw=t,Vw}var Hw,D4;function Fde(){if(D4)return Hw;D4=1;var e=Hm(),t=Um(),n=cs(),r=MV(),i=qde(),s=Bm(),o=Hde(),l=Ta(),u=Yt();function d(h,p,g){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var y=-1;p=e(p,s(n));var x=r(h,function(S,w,E){var N=e(p,function(k){return k(S)});return{criteria:N,index:++y,value:S}});return i(x,function(S,w){return o(S,w,g)})}return Hw=d,Hw}var Fw,R4;function Ude(){if(R4)return Fw;R4=1;var e=Wk(),t=Fde(),n=$m(),r=Gm(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Fw=i,Fw}var Uw,O4;function $de(){if(O4)return Uw;O4=1;var e=SV(),t=0;function n(r){var i=++t;return e(r)+i}return Uw=n,Uw}var $w,j4;function Gde(){if(j4)return $w;j4=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return $w=e,$w}var Gw,L4;function Kde(){if(L4)return Gw;L4=1;var e=Pm(),t=Gde();function n(r,i){return t(r||[],i||[],e)}return Gw=n,Gw}var Kw,P4;function xt(){if(P4)return Kw;P4=1;var e;if(typeof jk=="function")try{e={cloneDeep:cde(),constant:Uk(),defaults:ude(),each:mV(),filter:NV(),find:yde(),flatten:FV(),forEach:pV(),forIn:vde(),has:TV(),isUndefined:AV(),last:bde(),map:_V(),mapValues:xde(),max:Sde(),merge:Ade(),min:Mde(),minBy:_de(),now:Dde(),pick:Pde(),range:zde(),reduce:DV(),sortBy:Ude(),uniqueId:$de(),values:PV(),zipObject:Kde()}}catch{}return e||(e=window._),Kw=e,Kw}var Yw,I4;function Yde(){if(I4)return Yw;I4=1,Yw=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Yw}var Ww,B4;function Wde(){if(B4)return Ww;B4=1;var e=xt(),t=Wr().Graph,n=Yde();Ww=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(y){return d.outEdges(y.v,y.w)}),!0)}function s(d,h,p){for(var g=[],y=h[h.length-1],x=h[0],S;d.nodeCount();){for(;S=x.dequeue();)o(d,h,p,S);for(;S=y.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){g=g.concat(o(d,h,p,S,!0));break}}}return g}function o(d,h,p,g,y){var x=y?[]:void 0;return e.forEach(d.inEdges(g.v),function(S){var w=d.edge(S),E=d.node(S.v);y&&x.push({v:S.v,w:S.w}),E.out-=w,u(h,p,E)}),e.forEach(d.outEdges(g.v),function(S){var w=d.edge(S),E=S.w,N=d.node(E);N.in-=w,u(h,p,N)}),d.removeNode(g.v),x}function l(d,h){var p=new t,g=0,y=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var E=p.edge(w.v,w.w)||0,N=h(w),k=E+N;p.setEdge(w.v,w.w,k),y=Math.max(y,p.node(w.v).out+=N),g=Math.max(g,p.node(w.w).in+=N)});var x=e.range(y+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(w){u(x,S,p.node(w))}),{graph:p,buckets:x,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return Ww}var Xw,z4;function Xde(){if(z4)return Xw;z4=1;var e=xt(),t=Wde();Xw={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return Xw}var Zw,q4;function Gn(){if(q4)return Zw;q4=1;var e=xt(),t=Wr().Graph;Zw={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:g,partition:y,time:x,notime:S};function n(w,E,N,k){var T;do T=e.uniqueId(k);while(w.hasNode(T));return N.dummy=E,w.setNode(T,N),T}function r(w){var E=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(N){E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){var k=E.edge(N.v,N.w)||{weight:0,minlen:1},T=w.edge(N);E.setEdge(N.v,N.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),E}function i(w){var E=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(N){w.children(N).length||E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){E.setEdge(N,w.edge(N))}),E}function s(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.outEdges(N),function(T){k[T.w]=(k[T.w]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function o(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.inEdges(N),function(T){k[T.v]=(k[T.v]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function l(w,E){var N=w.x,k=w.y,T=E.x-N,A=E.y-k,_=w.width/2,R=w.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var D,P;return Math.abs(A)*_>Math.abs(T)*R?(A<0&&(R=-R),D=R*T/A,P=R):(T<0&&(_=-_),D=_,P=_*A/T),{x:N+D,y:k+P}}function u(w){var E=e.map(e.range(g(w)+1),function(){return[]});return e.forEach(w.nodes(),function(N){var k=w.node(N),T=k.rank;e.isUndefined(T)||(E[T][k.order]=N)}),E}function d(w){var E=e.min(e.map(w.nodes(),function(N){return w.node(N).rank}));e.forEach(w.nodes(),function(N){var k=w.node(N);e.has(k,"rank")&&(k.rank-=E)})}function h(w){var E=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),N=[];e.forEach(w.nodes(),function(A){var _=w.node(A).rank-E;N[_]||(N[_]=[]),N[_].push(A)});var k=0,T=w.graph().nodeRankFactor;e.forEach(N,function(A,_){e.isUndefined(A)&&_%T!==0?--k:k&&e.forEach(A,function(R){w.node(R).rank+=k})})}function p(w,E,N,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=N,T.order=k),n(w,"border",T,E)}function g(w){return e.max(e.map(w.nodes(),function(E){var N=w.node(E).rank;if(!e.isUndefined(N))return N}))}function y(w,E){var N={lhs:[],rhs:[]};return e.forEach(w,function(k){E(k)?N.lhs.push(k):N.rhs.push(k)}),N}function x(w,E){var N=e.now();try{return E()}finally{console.log(w+" time: "+(e.now()-N)+"ms")}}function S(w,E){return E()}return Zw}var Qw,V4;function Zde(){if(V4)return Qw;V4=1;var e=xt(),t=Gn();Qw={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,g=s.edge(o),y=g.labelRank;if(h!==u+1){s.removeEdge(o);var x,S,w;for(w=0,++u;u<h;++w,++u)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},x=t.addDummyNode(s,"edge",S,"_d"),u===y&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,x,{weight:g.weight},p),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return Qw}var Jw,H4;function Fp(){if(H4)return Jw;H4=1;var e=xt();Jw={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Jw}var eS,F4;function KV(){if(F4)return eS;F4=1;var e=xt(),t=Wr().Graph,n=Fp().slack;eS=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,g;i(u,l)<h;)p=s(u,l),g=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,g);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var g=p.v,y=h===g?p.w:g;!l.hasNode(y)&&!n(u,p)&&(l.setNode(y,{}),l.setEdge(h,y,{}),d(y))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return eS}var tS,U4;function Qde(){if(U4)return tS;U4=1;var e=xt(),t=KV(),n=Fp().slack,r=Fp().longestPath,i=Wr().alg.preorder,s=Wr().alg.postorder,o=Gn().simplify;tS=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=y,l.enterEdge=x,l.exchangeEdges=S;function l(k){k=o(k),r(k);var T=t(k);p(T),u(T,k);for(var A,_;A=y(T);)_=x(T,k,A),S(T,k,A,_)}function u(k,T){var A=s(k,k.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(_){d(k,T,_)})}function d(k,T,A){var _=k.node(A),R=_.parent;k.edge(A,R).cutvalue=h(k,T,A)}function h(k,T,A){var _=k.node(A),R=_.parent,D=!0,P=T.edge(A,R),$=0;return P||(D=!1,P=T.edge(R,A)),$=P.weight,e.forEach(T.nodeEdges(A),function(V){var B=V.v===A,G=B?V.w:V.v;if(G!==R){var z=B===D,F=T.edge(V).weight;if($+=z?F:-F,E(k,A,G)){var I=k.edge(A,G).cutvalue;$+=z?-I:I}}}),$}function p(k,T){arguments.length<2&&(T=k.nodes()[0]),g(k,{},1,T)}function g(k,T,A,_,R){var D=A,P=k.node(_);return T[_]=!0,e.forEach(k.neighbors(_),function($){e.has(T,$)||(A=g(k,T,A,$,_))}),P.low=D,P.lim=A++,R?P.parent=R:delete P.parent,A}function y(k){return e.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function x(k,T,A){var _=A.v,R=A.w;T.hasEdge(_,R)||(_=A.w,R=A.v);var D=k.node(_),P=k.node(R),$=D,V=!1;D.lim>P.lim&&($=P,V=!0);var B=e.filter(T.edges(),function(G){return V===N(k,k.node(G.v),$)&&V!==N(k,k.node(G.w),$)});return e.minBy(B,function(G){return n(T,G)})}function S(k,T,A,_){var R=A.v,D=A.w;k.removeEdge(R,D),k.setEdge(_.v,_.w,{}),p(k),u(k,T),w(k,T)}function w(k,T){var A=e.find(k.nodes(),function(R){return!T.node(R).parent}),_=i(k,A);_=_.slice(1),e.forEach(_,function(R){var D=k.node(R).parent,P=T.edge(R,D),$=!1;P||(P=T.edge(D,R),$=!0),T.node(R).rank=T.node(D).rank+($?P.minlen:-P.minlen)})}function E(k,T,A){return k.hasEdge(T,A)}function N(k,T,A){return A.low<=T.lim&&T.lim<=A.lim}return tS}var nS,$4;function Jde(){if($4)return nS;$4=1;var e=Fp(),t=e.longestPath,n=KV(),r=Qde();nS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return nS}var rS,G4;function efe(){if(G4)return rS;G4=1;var e=xt();rS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,g=0,y=h[g],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(y=h[g])!==p&&i.node(y).maxRank<l.rank;)g++;y===p&&(x=!1)}if(!x){for(;g<h.length-1&&i.node(y=h[g+1]).minRank<=l.rank;)g++;y=h[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,y;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>h||p>s[g].lim));for(y=g,g=l;(g=i.parent(g))!==y;)d.push(g);return{path:u.concat(d.reverse()),lca:y}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return rS}var iS,K4;function tfe(){if(K4)return iS;K4=1;var e=xt(),t=Gn();iS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(y){l.edge(y).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(y){r(l,u,p,g,h,d,y)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,g,y){var x=l.children(y);if(!x.length){y!==u&&l.setEdge(u,y,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),E=l.node(y);l.setParent(S,y),E.borderTop=S,l.setParent(w,y),E.borderBottom=w,e.forEach(x,function(N){r(l,u,d,h,p,g,N);var k=l.node(N),T=k.borderTop?k.borderTop:N,A=k.borderBottom?k.borderBottom:N,_=k.borderTop?h:2*h,R=T!==A?1:p-g[y]+1;l.setEdge(S,T,{weight:_,minlen:R,nestingEdge:!0}),l.setEdge(A,w,{weight:_,minlen:R,nestingEdge:!0})}),l.parent(y)||l.setEdge(u,S,{weight:0,minlen:p+g[y]})}function i(l){var u={};function d(h,p){var g=l.children(h);g&&g.length&&e.forEach(g,function(y){d(y,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return iS}var sS,Y4;function nfe(){if(Y4)return sS;Y4=1;var e=xt(),t=Gn();sS=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],g=t.addDummyNode(i,"border",h,o);u[s][d]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return sS}var oS,W4;function rfe(){if(W4)return oS;W4=1;var e=xt();oS={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return oS}var aS,X4;function ife(){if(X4)return aS;X4=1;var e=xt();aS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return aS}var lS,Z4;function sfe(){if(Z4)return lS;Z4=1;var e=xt();lS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var y=g.pos+u;h[y]+=g.weight;for(var x=0;y>0;)y%2&&(x+=h[y+1]),y=y-1>>1,h[y]+=g.weight;p+=g.weight*x})),p}return lS}var cS,Q4;function ofe(){if(Q4)return cS;Q4=1;var e=xt();cS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return cS}var uS,J4;function afe(){if(J4)return uS;J4=1;var e=xt();uS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return uS}var dS,eP;function lfe(){if(eP)return dS;eP=1;var e=xt(),t=Gn();dS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,g=0,y=0;u.sort(i(!!o)),y=r(h,d,y),e.forEach(u,function(S){y+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,y=r(h,d,y)});var x={vs:e.flatten(h,!0)};return g&&(x.barycenter=p/g,x.weight=g),x}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return dS}var fS,tP;function cfe(){if(tP)return fS;tP=1;var e=xt(),t=ofe(),n=afe(),r=lfe();fS=i;function i(l,u,d,h){var p=l.children(u),g=l.node(u),y=g?g.borderLeft:void 0,x=g?g.borderRight:void 0,S={};y&&(p=e.filter(p,function(A){return A!==y&&A!==x}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,h);S[A.v]=_,e.has(_,"barycenter")&&o(A,_)}});var E=n(w,d);s(E,S);var N=r(E,h);if(y&&(N.vs=e.flatten([y,N.vs,x],!0),l.predecessors(y).length)){var k=l.node(l.predecessors(y)[0]),T=l.node(l.predecessors(x)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+k.order+T.order)/(N.weight+2),N.weight+=2}return N}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return fS}var hS,nP;function ufe(){if(nP)return hS;nP=1;var e=xt(),t=Wr().Graph;hS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(g){var y=g.v===d?g.w:g.v,x=u.edge(y,d),S=e.isUndefined(x)?0:x.weight;u.setEdge(y,d,{weight:i.edge(g).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return hS}var pS,rP;function dfe(){if(rP)return pS;rP=1;var e=xt();pS=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return pS}var mS,iP;function ffe(){if(iP)return mS;iP=1;var e=xt(),t=ife(),n=sfe(),r=cfe(),i=ufe(),s=dfe(),o=Wr().Graph,l=Gn();mS=u;function u(g){var y=l.maxRank(g),x=d(g,e.range(1,y+1),"inEdges"),S=d(g,e.range(y-1,-1,-1),"outEdges"),w=t(g);p(g,w);for(var E=Number.POSITIVE_INFINITY,N,k=0,T=0;T<4;++k,++T){h(k%2?x:S,k%4>=2),w=l.buildLayerMatrix(g);var A=n(g,w);A<E&&(T=0,N=e.cloneDeep(w),E=A)}p(g,N)}function d(g,y,x){return e.map(y,function(S){return i(g,S,x)})}function h(g,y){var x=new o;e.forEach(g,function(S){var w=S.graph().root,E=r(S,w,x,y);e.forEach(E.vs,function(N,k){S.node(N).order=k}),s(S,x,E.vs)})}function p(g,y){e.forEach(y,function(x){e.forEach(x,function(S,w){g.node(S).order=w})})}return mS}var gS,sP;function hfe(){if(sP)return gS;sP=1;var e=xt(),t=Wr().Graph,n=Gn();gS={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:y};function r(E,N){var k={};function T(A,_){var R=0,D=0,P=A.length,$=e.last(_);return e.forEach(_,function(V,B){var G=s(E,V),z=G?E.node(G).order:P;(G||V===$)&&(e.forEach(_.slice(D,B+1),function(F){e.forEach(E.predecessors(F),function(I){var q=E.node(I),W=q.order;(W<R||z<W)&&!(q.dummy&&E.node(F).dummy)&&o(k,I,F)})}),D=B+1,R=z)}),_}return e.reduce(N,T),k}function i(E,N){var k={};function T(_,R,D,P,$){var V;e.forEach(e.range(R,D),function(B){V=_[B],E.node(V).dummy&&e.forEach(E.predecessors(V),function(G){var z=E.node(G);z.dummy&&(z.order<P||z.order>$)&&o(k,G,V)})})}function A(_,R){var D=-1,P,$=0;return e.forEach(R,function(V,B){if(E.node(V).dummy==="border"){var G=E.predecessors(V);G.length&&(P=E.node(G[0]).order,T(R,$,B,D,P),$=B,D=P)}T(R,$,R.length,P,_.length)}),R}return e.reduce(N,A),k}function s(E,N){if(E.node(N).dummy)return e.find(E.predecessors(N),function(k){return E.node(k).dummy})}function o(E,N,k){if(N>k){var T=N;N=k,k=T}var A=E[N];A||(E[N]=A={}),A[k]=!0}function l(E,N,k){if(N>k){var T=N;N=k,k=T}return e.has(E[N],k)}function u(E,N,k,T){var A={},_={},R={};return e.forEach(N,function(D){e.forEach(D,function(P,$){A[P]=P,_[P]=P,R[P]=$})}),e.forEach(N,function(D){var P=-1;e.forEach(D,function($){var V=T($);if(V.length){V=e.sortBy(V,function(I){return R[I]});for(var B=(V.length-1)/2,G=Math.floor(B),z=Math.ceil(B);G<=z;++G){var F=V[G];_[$]===$&&P<R[F]&&!l(k,$,F)&&(_[F]=$,_[$]=A[$]=A[F],P=R[F])}}})}),{root:A,align:_}}function d(E,N,k,T,A){var _={},R=h(E,N,k,A),D=A?"borderLeft":"borderRight";function P(B,G){for(var z=R.nodes(),F=z.pop(),I={};F;)I[F]?B(F):(I[F]=!0,z.push(F),z=z.concat(G(F))),F=z.pop()}function $(B){_[B]=R.inEdges(B).reduce(function(G,z){return Math.max(G,_[z.v]+R.edge(z))},0)}function V(B){var G=R.outEdges(B).reduce(function(F,I){return Math.min(F,_[I.w]-R.edge(I))},Number.POSITIVE_INFINITY),z=E.node(B);G!==Number.POSITIVE_INFINITY&&z.borderType!==D&&(_[B]=Math.max(_[B],G))}return P($,R.predecessors.bind(R)),P(V,R.successors.bind(R)),e.forEach(T,function(B){_[B]=_[k[B]]}),_}function h(E,N,k,T){var A=new t,_=E.graph(),R=S(_.nodesep,_.edgesep,T);return e.forEach(N,function(D){var P;e.forEach(D,function($){var V=k[$];if(A.setNode(V),P){var B=k[P],G=A.edge(B,V);A.setEdge(B,V,Math.max(R(E,$,P),G||0))}P=$})}),A}function p(E,N){return e.minBy(e.values(N),function(k){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(k,function(_,R){var D=w(E,R)/2;T=Math.max(_+D,T),A=Math.min(_-D,A)}),T-A})}function g(E,N){var k=e.values(N),T=e.min(k),A=e.max(k);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(R){var D=_+R,P=E[D],$;if(P!==N){var V=e.values(P);$=R==="l"?T-e.min(V):A-e.max(V),$&&(E[D]=e.mapValues(P,function(B){return B+$}))}})})}function y(E,N){return e.mapValues(E.ul,function(k,T){if(N)return E[N.toLowerCase()][T];var A=e.sortBy(e.map(E,T));return(A[1]+A[2])/2})}function x(E){var N=n.buildLayerMatrix(E),k=e.merge(r(E,N),i(E,N)),T={},A;e.forEach(["u","d"],function(R){A=R==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(D){D==="r"&&(A=e.map(A,function(B){return e.values(B).reverse()}));var P=(R==="u"?E.predecessors:E.successors).bind(E),$=u(E,A,k,P),V=d(E,A,$.root,$.align,D==="r");D==="r"&&(V=e.mapValues(V,function(B){return-B})),T[R+D]=V})});var _=p(E,T);return g(T,_),y(T,E.graph().align)}function S(E,N,k){return function(T,A,_){var R=T.node(A),D=T.node(_),P=0,$;if(P+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":$=-R.width/2;break;case"r":$=R.width/2;break}if($&&(P+=k?$:-$),$=0,P+=(R.dummy?N:E)/2,P+=(D.dummy?N:E)/2,P+=D.width/2,e.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":$=D.width/2;break;case"r":$=-D.width/2;break}return $&&(P+=k?$:-$),$=0,P}}function w(E,N){return E.node(N).width}return gS}var yS,oP;function pfe(){if(oP)return yS;oP=1;var e=xt(),t=Gn(),n=hfe().positionX;yS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return yS}var vS,aP;function mfe(){if(aP)return vS;aP=1;var e=xt(),t=Xde(),n=Zde(),r=Jde(),i=Gn().normalizeRanks,s=efe(),o=Gn().removeEmptyRanks,l=tfe(),u=nfe(),d=rfe(),h=ffe(),p=pfe(),g=Gn(),y=Wr().Graph;vS=x;function x(H,X){var ee=X&&X.debugTiming?g.time:g.notime;ee("layout",function(){var ue=ee("  buildLayoutGraph",function(){return P(H)});ee("  runLayout",function(){S(ue,ee)}),ee("  updateInputGraph",function(){w(H,ue)})})}function S(H,X){X("    makeSpaceForEdgeLabels",function(){$(H)}),X("    removeSelfEdges",function(){Q(H)}),X("    acyclic",function(){t.run(H)}),X("    nestingGraph.run",function(){l.run(H)}),X("    rank",function(){r(g.asNonCompoundGraph(H))}),X("    injectEdgeLabelProxies",function(){V(H)}),X("    removeEmptyRanks",function(){o(H)}),X("    nestingGraph.cleanup",function(){l.cleanup(H)}),X("    normalizeRanks",function(){i(H)}),X("    assignRankMinMax",function(){B(H)}),X("    removeEdgeLabelProxies",function(){G(H)}),X("    normalize.run",function(){n.run(H)}),X("    parentDummyChains",function(){s(H)}),X("    addBorderSegments",function(){u(H)}),X("    order",function(){h(H)}),X("    insertSelfEdges",function(){L(H)}),X("    adjustCoordinateSystem",function(){d.adjust(H)}),X("    position",function(){p(H)}),X("    positionSelfEdges",function(){K(H)}),X("    removeBorderNodes",function(){W(H)}),X("    normalize.undo",function(){n.undo(H)}),X("    fixupEdgeLabelCoords",function(){I(H)}),X("    undoCoordinateSystem",function(){d.undo(H)}),X("    translateGraph",function(){z(H)}),X("    assignNodeIntersects",function(){F(H)}),X("    reversePoints",function(){q(H)}),X("    acyclic.undo",function(){t.undo(H)})}function w(H,X){e.forEach(H.nodes(),function(ee){var ue=H.node(ee),le=X.node(ee);ue&&(ue.x=le.x,ue.y=le.y,X.children(ee).length&&(ue.width=le.width,ue.height=le.height))}),e.forEach(H.edges(),function(ee){var ue=H.edge(ee),le=X.edge(ee);ue.points=le.points,e.has(le,"x")&&(ue.x=le.x,ue.y=le.y)}),H.graph().width=X.graph().width,H.graph().height=X.graph().height}var E=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],R={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},D=["labelpos"];function P(H){var X=new y({multigraph:!0,compound:!0}),ee=ce(H.graph());return X.setGraph(e.merge({},N,se(ee,E),e.pick(ee,k))),e.forEach(H.nodes(),function(ue){var le=ce(H.node(ue));X.setNode(ue,e.defaults(se(le,T),A)),X.setParent(ue,H.parent(ue))}),e.forEach(H.edges(),function(ue){var le=ce(H.edge(ue));X.setEdge(ue,e.merge({},R,se(le,_),e.pick(le,D)))}),X}function $(H){var X=H.graph();X.ranksep/=2,e.forEach(H.edges(),function(ee){var ue=H.edge(ee);ue.minlen*=2,ue.labelpos.toLowerCase()!=="c"&&(X.rankdir==="TB"||X.rankdir==="BT"?ue.width+=ue.labeloffset:ue.height+=ue.labeloffset)})}function V(H){e.forEach(H.edges(),function(X){var ee=H.edge(X);if(ee.width&&ee.height){var ue=H.node(X.v),le=H.node(X.w),ge={rank:(le.rank-ue.rank)/2+ue.rank,e:X};g.addDummyNode(H,"edge-proxy",ge,"_ep")}})}function B(H){var X=0;e.forEach(H.nodes(),function(ee){var ue=H.node(ee);ue.borderTop&&(ue.minRank=H.node(ue.borderTop).rank,ue.maxRank=H.node(ue.borderBottom).rank,X=e.max(X,ue.maxRank))}),H.graph().maxRank=X}function G(H){e.forEach(H.nodes(),function(X){var ee=H.node(X);ee.dummy==="edge-proxy"&&(H.edge(ee.e).labelRank=ee.rank,H.removeNode(X))})}function z(H){var X=Number.POSITIVE_INFINITY,ee=0,ue=Number.POSITIVE_INFINITY,le=0,ge=H.graph(),Ee=ge.marginx||0,je=ge.marginy||0;function ke(Ne){var we=Ne.x,ve=Ne.y,Pe=Ne.width,Ae=Ne.height;X=Math.min(X,we-Pe/2),ee=Math.max(ee,we+Pe/2),ue=Math.min(ue,ve-Ae/2),le=Math.max(le,ve+Ae/2)}e.forEach(H.nodes(),function(Ne){ke(H.node(Ne))}),e.forEach(H.edges(),function(Ne){var we=H.edge(Ne);e.has(we,"x")&&ke(we)}),X-=Ee,ue-=je,e.forEach(H.nodes(),function(Ne){var we=H.node(Ne);we.x-=X,we.y-=ue}),e.forEach(H.edges(),function(Ne){var we=H.edge(Ne);e.forEach(we.points,function(ve){ve.x-=X,ve.y-=ue}),e.has(we,"x")&&(we.x-=X),e.has(we,"y")&&(we.y-=ue)}),ge.width=ee-X+Ee,ge.height=le-ue+je}function F(H){e.forEach(H.edges(),function(X){var ee=H.edge(X),ue=H.node(X.v),le=H.node(X.w),ge,Ee;ee.points?(ge=ee.points[0],Ee=ee.points[ee.points.length-1]):(ee.points=[],ge=le,Ee=ue),ee.points.unshift(g.intersectRect(ue,ge)),ee.points.push(g.intersectRect(le,Ee))})}function I(H){e.forEach(H.edges(),function(X){var ee=H.edge(X);if(e.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function q(H){e.forEach(H.edges(),function(X){var ee=H.edge(X);ee.reversed&&ee.points.reverse()})}function W(H){e.forEach(H.nodes(),function(X){if(H.children(X).length){var ee=H.node(X),ue=H.node(ee.borderTop),le=H.node(ee.borderBottom),ge=H.node(e.last(ee.borderLeft)),Ee=H.node(e.last(ee.borderRight));ee.width=Math.abs(Ee.x-ge.x),ee.height=Math.abs(le.y-ue.y),ee.x=ge.x+ee.width/2,ee.y=ue.y+ee.height/2}}),e.forEach(H.nodes(),function(X){H.node(X).dummy==="border"&&H.removeNode(X)})}function Q(H){e.forEach(H.edges(),function(X){if(X.v===X.w){var ee=H.node(X.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:X,label:H.edge(X)}),H.removeEdge(X)}})}function L(H){var X=g.buildLayerMatrix(H);e.forEach(X,function(ee){var ue=0;e.forEach(ee,function(le,ge){var Ee=H.node(le);Ee.order=ge+ue,e.forEach(Ee.selfEdges,function(je){g.addDummyNode(H,"selfedge",{width:je.label.width,height:je.label.height,rank:Ee.rank,order:ge+ ++ue,e:je.e,label:je.label},"_se")}),delete Ee.selfEdges})})}function K(H){e.forEach(H.nodes(),function(X){var ee=H.node(X);if(ee.dummy==="selfedge"){var ue=H.node(ee.e.v),le=ue.x+ue.width/2,ge=ue.y,Ee=ee.x-le,je=ue.height/2;H.setEdge(ee.e,ee.label),H.removeNode(X),ee.label.points=[{x:le+2*Ee/3,y:ge-je},{x:le+5*Ee/6,y:ge-je},{x:le+Ee,y:ge},{x:le+5*Ee/6,y:ge+je},{x:le+2*Ee/3,y:ge+je}],ee.label.x=ee.x,ee.label.y=ee.y}})}function se(H,X){return e.mapValues(e.pick(H,X),Number)}function ce(H){var X={};return e.forEach(H,function(ee,ue){X[ue.toLowerCase()]=ee}),X}return vS}var bS,lP;function gfe(){if(lP)return bS;lP=1;var e=xt(),t=Gn(),n=Wr().Graph;bS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return bS}var xS,cP;function yfe(){return cP||(cP=1,xS="0.8.5"),xS}var wS,uP;function vfe(){return uP||(uP=1,wS={graphlib:Wr(),layout:mfe(),debug:gfe(),util:{time:Gn().time,notime:Gn().notime},version:yfe()}),wS}var bfe=vfe();const gh=hd(bfe),au=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]}];function YV(e){return tt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function WV(e){return tt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function XV(e){return tt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function xfe(e){return tt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function wfe({components:e,onAdd:t}){const[n,r]=Re.useState(!0),[i,s]=Re.useState(new Set),[o,l]=Re.useState(null),[u,d]=Re.useState(""),h=Re.useMemo(()=>new wa(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Re.useMemo(()=>{const x=u.trim();if(!x)return Array.from(e);const w=h.search(x).map(k=>k.item),E=e.find(k=>k.id==="custom-component"),N=w.some(k=>k.id==="custom-component");return E&&!N&&w.push(E),w},[e,h,u]),g=Re.useMemo(()=>{const x=new Map;for(const S of p){const w=S.group??"Other";x.has(w)||x.set(w,[]),x.get(w).push(S)}return Array.from(x.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);Re.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([x])=>x)))},[g,i.size]);const y=x=>{s(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?v.jsx(WV,{size:16}):v.jsx(XV,{size:16})}),v.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),v.jsx("div",{className:"mr-3 mb-3",children:v.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),v.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?v.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([x,S])=>{const w=i.has(x);return v.jsxs("div",{children:[v.jsxs("button",{type:"button",onClick:()=>y(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${x}`,children:[v.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),v.jsx(YV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&v.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:v.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(E=>v.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${E.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();l({label:E.label,description:E.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:N=>{l(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:E.id})),N.dataTransfer?.setData("text/plain",E.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),t(E.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[v.jsx("div",{className:"text-center mb-1",children:v.jsx("span",{className:"text-2xl",children:E.icon})}),v.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:E.label})]},E.id))})})]},x)}),v.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[v.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),v.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:v.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&FC.createPortal(v.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[v.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),v.jsx("div",{className:"text-muted",children:o.description}),v.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const Sfe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h})=>v.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:v.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:v.jsxs(jae,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,connectionMode:ma.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[v.jsx(ale,{nodeStrokeWidth:3}),v.jsx(Yae,{}),v.jsx(Vae,{gap:16})]})})}),Cfe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[g,y]=Re.useState(320),x=260,S=640,w=Re.useRef(!1),E=Re.useRef(null),[N,k]=Re.useState(!1),[T,A]=Re.useState(!0),_=Re.useCallback(B=>{if(!w.current)return;const G=Math.min(Math.max(window.innerWidth-B.clientX,x),S);y(G)},[]),R=Re.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),D=B=>{B.preventDefault(),w.current=!0,document.body.style.userSelect="none"};Re.useEffect(()=>(globalThis.addEventListener("mousemove",_),globalThis.addEventListener("mouseup",R),()=>{globalThis.removeEventListener("mousemove",_),globalThis.removeEventListener("mouseup",R)}),[_,R]),Re.useEffect(()=>{E.current&&(E.current.style.width=g+"px")},[g]);const P=e?.id==="free";if(Re.useEffect(()=>{P&&!r&&A(!1)},[P,r]),Re.useEffect(()=>{P&&r&&(n("inspector"),A(!0))},[P,r,n]),!e)return null;const $=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const B=document.createElement("textarea");B.value=JSON.stringify(d,null,2),document.body.appendChild(B),B.select(),document.execCommand("copy"),B.remove()}},V=()=>{if(!d)return;const B=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),G=URL.createObjectURL(B),z=document.createElement("a");z.href=G,z.download=`assessment-${Date.now()}.json`,document.body.appendChild(z),z.click(),z.remove(),URL.revokeObjectURL(G)};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>A(B=>!B),"aria-label":T?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:T?v.jsx(XV,{size:16}):v.jsx(WV,{size:16})}),v.jsx("aside",{ref:E,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${T?"p-4":"w-6 p-1"}`,"data-width":g,style:{width:T?`${g}px`:"24px"},children:T&&v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onMouseDown:D,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[v.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),v.jsx(xfe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),v.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!P&&v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),v.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),v.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&v.jsxs("div",{children:[d&&v.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),v.jsxs("div",{className:"text-sm font-semibold text-theme",children:[d.score,"%"]})]}),v.jsx("div",{className:"text-xs text-muted mb-2",children:d.isValid?"Pass":"Needs work"}),v.jsx("div",{className:"space-y-1 text-xs",children:d.feedback.slice(0,3).map(B=>v.jsx("div",{className:"text-sm text-theme",children:B.message},`${B.category}-${B.type}`))}),v.jsxs("div",{className:"mt-3 flex gap-2",children:[v.jsx("button",{type:"button",onClick:$,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),v.jsx("button",{type:"button",onClick:V,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),v.jsxs("div",{className:"mt-3 text-xs",children:[v.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),d.architectureStrengths.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.architectureStrengths.map(B=>v.jsx("li",{children:B},`strength-${B}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),d.improvements.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.improvements.map(B=>v.jsx("li",{children:B},`imp-${B}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),v.jsx("div",{className:"space-y-1",children:d.feedback.map(B=>v.jsxs("div",{className:"text-xs",children:[v.jsx("div",{className:"font-medium",children:B.category.toUpperCase()}),v.jsx("div",{className:"text-muted",children:B.message})]},`${B.category}-${B.type}`))})]})]}),v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),v.jsx("ul",{className:"space-y-1",children:e.requirements.map(B=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:B})]},B))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),v.jsx("ul",{className:"space-y-1",children:e.constraints.map(B=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:B})]},B))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("button",{type:"button",onClick:()=>k(!N),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),v.jsx(YV,{size:14,className:`text-muted transition-transform duration-150 ${N?"rotate-0":"-rotate-90"}`})]}),N&&v.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(B=>v.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:v.jsx("div",{className:"text-xs text-white",children:B})},B))})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(B=>v.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:B},B))})]})]}),t==="inspector"&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&v.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),v.jsx("div",{className:"space-y-2",children:s})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),v.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[v.jsx(sK,{size:14}),v.jsx("span",{children:"Add"})]})]}),v.jsx("div",{className:"space-y-2",children:o})]}),v.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&v.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[v.jsx("span",{children:""}),v.jsx("span",{children:"Detach from Group"})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),v.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})})]})};async function Efe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),kfe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function kfe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}function Nfe(e){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(e)}const ZV=Re.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=Re.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=Re.useCallback(y=>{y.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),u=Re.useCallback(y=>{y.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),d=Re.useCallback(y=>{y.stopPropagation(),n?.(e,t)},[e,t,n]),h=Re.useCallback(y=>{y.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),p=Re.useCallback(y=>{y.preventDefault(),y.stopPropagation(),s({visible:!0,x:y.clientX,y:y.clientY})},[]),g=Re.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return Re.useEffect(()=>{if(i.visible){const y=x=>{const S=document.querySelector("[data-context-menu]");S&&!S.contains(x.target)&&g()};return document.addEventListener("click",y),document.addEventListener("contextmenu",y),()=>{document.removeEventListener("click",y),document.removeEventListener("contextmenu",y)}}},[i.visible,g]),v.jsxs(v.Fragment,{children:[v.jsxs(Kn.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",onContextMenu:p,children:[v.jsx("legend",{className:"sr-only",children:o}),v.jsx(Tr,{id:"top",type:"source",position:Te.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Tr,{id:"right",type:"source",position:Te.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Tr,{id:"bottom",type:"source",position:Te.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Tr,{id:"left",type:"source",position:Te.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[v.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),v.jsxs("div",{className:"min-w-0 w-full text-center",children:[v.jsx("div",{className:"truncate font-medium text-sm",children:o}),t.subtitle&&v.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]}),i.visible&&FC.createPortal(v.jsxs(Kn.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),u(y),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[v.jsx(aI,{className:"w-4 h-4"}),"Settings"]}),r&&v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),h(y),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[v.jsx(yU,{className:"w-4 h-4"}),"Detach from Group"]}),v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),d(y),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[v.jsx(Nfe,{className:"w-4 h-4"}),"Duplicate"]}),v.jsxs("button",{type:"button",onClick:y=>{y.stopPropagation(),l(y),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[v.jsx(TE,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});ZV.displayName="Node";const Tfe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Afe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=Tfe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,y=p,x=g+d/2;return{edgePath:h,centerX:y,centerY:x}}const[o]=kk(e),[l,u]=Nk({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Mfe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:g}=e,[y,x]=O.useState(!1),[S,w]=O.useState(h?.label??""),[E,N]=O.useState(h?.hasLabel??!1),k=O.useRef(null),T=Ze(G=>{const z=G.edges.some(F=>F.id!==t&&F.source===r&&F.target===n);return z&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),z}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:R,centerY:D}=Afe(A,T),P=G=>{G.stopPropagation(),x(!0),setTimeout(()=>k.current?.focus(),0)},$=G=>{G.stopPropagation(),N(!0),x(!0),setTimeout(()=>k.current?.focus(),0)},V=G=>{G.stopPropagation(),N(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},B=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:E||S.trim().length>0}}))};return v.jsxs("g",{className:"react-flow__edge",children:[v.jsx("defs",{children:v.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:v.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),v.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),v.jsx("foreignObject",{x:R-75,y:D-12,width:150,height:24,className:"overflow-visible",children:v.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:E?v.jsx("div",{className:"flex items-center gap-1",children:y?v.jsx("input",{ref:k,value:S,onChange:G=>w(G.target.value),onBlur:B,onKeyDown:G=>{G.key==="Enter"&&B(),G.key==="Escape"&&(x(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onDoubleClick:P,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&v.jsx("button",{onClick:V,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&v.jsx("button",{onClick:$,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},_fe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Re.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Re.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return v.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[v.jsx(dle,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),v.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[v.jsx(Kn.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(aI,{className:"w-3 h-3"})}),v.jsx(Kn.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(TE,{className:"w-3 h-3"})})]}),v.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&v.jsx("span",{children:t.icon}),v.jsx("span",{children:t.label})]}),t.subtitle&&v.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),v.jsx(Tr,{id:"top",type:"source",position:Te.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Tr,{id:"right",type:"source",position:Te.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Tr,{id:"bottom",type:"source",position:Te.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Tr,{id:"left",type:"source",position:Te.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Dfe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=O.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return v.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[v.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?v.jsx(xK,{size:18}):v.jsx(cI,{size:18}),v.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),v.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:v.jsx(TE,{size:16})})]}),i&&v.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(Nh,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),v.jsx(Nh,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),v.jsx(Z6,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),v.jsxs("div",{className:"border-t border-theme pt-3",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&v.jsx(Nh,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&v.jsx(Mp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&v.jsx(X6,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&v.jsx("div",{className:"pt-1",children:v.jsx(W6,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},Rfe=()=>{const[e,t]=O.useState([]),n=O.useCallback((u,d="info",h)=>{const g={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:h};t(y=>[...y,g])},[]),r=O.useCallback(u=>{t(d=>d.filter(h=>h.id!==u))},[]),i=O.useCallback((u,d)=>{n(u,"success",d)},[n]),s=O.useCallback((u,d)=>{n(u,"error",d)},[n]),o=O.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=O.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Ofe=({toast:e,onClose:t})=>{O.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return v.jsxs(Kn.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[v.jsx("div",{className:"flex-shrink-0",children:r()}),v.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),v.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},jfe=({toasts:e,onClose:t})=>v.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:v.jsx(yE,{children:e.map(n=>v.jsx("div",{className:"pointer-events-auto",children:v.jsx(Ofe,{toast:n,onClose:t})},n.id))})}),Lfe=(e,t,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:e,edges:t};return JSON.stringify(i,null,2)},Pfe=(e,t,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<e.length;l++){const u=e[l],d=`node-${l+2}`,h=u.data?.label||u.id,p=u.position?.x||0,g=u.position?.y||0,y=u.style?.width||u.width||200,x=u.style?.height||u.height||80,S=s();o+=`        <mxCell id="${d}" value="${i(String(h))}" `,o+=`style="${S}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${g}" width="${y}" height="${x}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<t.length;l++){const u=t[l],d=`edge-${l}`,h=e.findIndex(y=>y.id===u.source),p=e.findIndex(y=>y.id===u.target),g=u.label||u.data?.label||"";h!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(g))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${h+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},dP=e=>{try{const t=JSON.parse(e);if(!t.nodes||!Array.isArray(t.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!t.edges||!Array.isArray(t.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:t.nodes,edges:t.edges}}catch(t){throw new Error(t instanceof Error?`Failed to import JSON: ${t.message}`:"Failed to import JSON: Invalid format")}},fP=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const g=p.getAttribute("id")||`cell-${u}`,y=p.getAttribute("value")||`Node ${u+1}`,x=p.querySelector("mxGeometry"),S=Number.parseFloat(x?.getAttribute("x")||"0"),w=Number.parseFloat(x?.getAttribute("y")||"0"),E=Number.parseFloat(x?.getAttribute("width")||"200"),N=Number.parseFloat(x?.getAttribute("height")||"80"),k=`imported-node-${Date.now()}-${u}`;o.set(g,k);const T={label:y},A=p.querySelector("mxData");if(A){const _=A.querySelectorAll("property");for(const R of _){const D=R.getAttribute("name"),P=R.getAttribute("value");if(D&&P)try{T[D]=JSON.parse(P)}catch{T[D]=P}}}i.push({id:k,type:"custom",position:{x:S,y:w},data:T,...E&&N?{style:{width:E,height:N}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let h=0;for(const p of d){const g=p.getAttribute("source"),y=p.getAttribute("target"),x=p.getAttribute("value")||"";if(g&&y){const S=o.get(g),w=o.get(y);if(S&&w){const E={};x&&(E.label=x,E.hasLabel=!0);const N=p.querySelector("mxData");if(N){const k=N.querySelectorAll("property");for(const T of k){const A=T.getAttribute("name"),_=T.getAttribute("value");if(A&&_)try{E[A]=JSON.parse(_)}catch{E[A]=_}}}s.push({id:`imported-edge-${Date.now()}-${h}`,source:S,target:w,type:"customEdge",data:E,...x?{label:x}:{}})}}h++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(t){throw new Error(t instanceof Error?`Failed to import XML: ${t.message}`:"Failed to import XML: Invalid format")}},hP=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},Ife=async e=>e.text(),Bfe={customEdge:Mfe},zfe=Re.memo(e=>{const t=e.data;return v.jsx(ZV,{id:e.id,data:t,onCopy:e.onCopy,isInGroup:e.isInGroup})}),qfe=(e,t)=>n=>{const r=t.find(i=>i.id===n.id)?.parentId!==void 0;return v.jsx(zfe,{...n,onCopy:e,isInGroup:r})},Vfe=()=>{xa();const e=md(),n=HF()?.id,{screenToFlowPosition:r}=fd(),{user:i,isAuthenticated:s,login:o,signup:l,googleLogin:u,logout:d}=Kp(),h=Rfe(),g=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[y,x]=O.useState(null),[S,w]=O.useState(!0),[E,N]=O.useState(null),[k,T]=O.useState(!1),[A,_]=O.useState(null),[R,D]=O.useState(null),[P,$]=O.useState(!1),[V,B]=O.useState(!1),[G,z]=O.useState(null),[F,I]=O.useState(""),[q,W]=O.useState(""),[Q,L]=O.useState("idle"),[K,se]=O.useState(null),[ce,H]=O.useState(!1),[X,ee]=O.useState(0),ue=O.useRef(null);O.useEffect(()=>{if(!n){w(!1),N("No problem ID provided");return}if(n==="free"){x({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),w(!1);return}if(n.startsWith("custom-")){const Z=localStorage.getItem(`custom-problem-${n}`);if(Z){x(JSON.parse(Z)),w(!1);return}}(async()=>{try{w(!0),N(null);const ae=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!ae.ok)throw new Error(`Failed to fetch problem: ${ae.status} ${ae.statusText}`);const pe=await ae.json();x(pe)}catch(Z){N(Z instanceof Error?Z.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",Z)}finally{w(!1)}})()},[n]);const le=()=>e("/"),{state:ge,setState:Ee,undo:je,redo:ke,canUndo:Ne,canRedo:we}=fte({nodes:[],edges:[]}),[ve,Pe,Ae]=Lae(ge.nodes),[at,gt,Or]=Pae(ge.edges),{getNodes:wn,fitView:Wt}=fd(),[rt,nn]=O.useState(!1),[fn,Xt]=O.useState(!1),dt=O.useRef(null);O.useEffect(()=>{if(g&&s)(async()=>{try{const Z=await Er.getDiagram(g),ae=Z.nodes,pe=Z.edges;Pe(ae),gt(pe),_(Z.id),D(Z),Ee({nodes:ae,edges:pe})}catch(Z){console.error("Failed to load diagram:",Z),h.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&s){const te=`last-diagram-${i?.id||"anonymous"}`,Z=localStorage.getItem(te);Z&&(async()=>{try{const pe=await Er.getDiagram(Z),be=pe.nodes,Se=pe.edges;Pe(be),gt(Se),_(pe.id),D(pe),Ee({nodes:be,edges:Se}),h.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(te),h.error("Failed to restore previous design. Starting fresh.")}})()}else if(n&&n!=="free"&&s){const te=`problem-progress-${i?.id||"anonymous"}-${n}`,Z=localStorage.getItem(te);if(Z)try{const ae=JSON.parse(Z),pe=ae.nodes,be=ae.edges;Pe(pe),gt(be),ae.elapsedTime&&ee(ae.elapsedTime),Ee({nodes:pe,edges:be}),h.success("Progress restored from previous session")}catch(ae){console.error("Failed to load saved progress:",ae)}}},[g,s,n,i?.id]),O.useEffect(()=>{H(s&&n!==void 0)},[s,n]),O.useEffect(()=>{if(!ce||ve.length===0)return;const Z=setTimeout(async()=>{try{if(L("saving"),n==="free")if(A){await Er.updateDiagram(A,{title:R?.title||"Auto-saved Design",description:R?.description||"Auto-saved design",nodes:ve,edges:at});const ae=`last-diagram-${i?.id||"anonymous"}`;localStorage.setItem(ae,A)}else{z({nodes:ve,edges:at}),B(!0),L("idle");return}else{const ae=`problem-progress-${i?.id||"anonymous"}-${n}`,pe={problemId:n,nodes:ve,edges:at,lastSaved:new Date().toISOString(),elapsedTime:X};localStorage.setItem(ae,JSON.stringify(pe))}L("saved"),se(new Date),h.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),setTimeout(()=>L("idle"),3e3)}catch(ae){console.error("Auto-save failed:",ae),L("error"),setTimeout(()=>L("idle"),5e3)}},3e3);return()=>clearTimeout(Z)},[ve,at,ce,n,A,i?.id]),O.useEffect(()=>{Pe(ge.nodes),gt(ge.edges)},[ge,Pe,gt]),O.useEffect(()=>{const te=Z=>{(Z.ctrlKey||Z.metaKey)&&Z.key==="z"&&!Z.shiftKey&&(Z.preventDefault(),je()),((Z.ctrlKey||Z.metaKey)&&Z.shiftKey&&Z.key==="z"||Z.ctrlKey&&Z.key==="y")&&(Z.preventDefault(),ke())};return globalThis.addEventListener("keydown",te),()=>globalThis.removeEventListener("keydown",te)},[je,ke]),O.useEffect(()=>{if(n!=="free")return ue.current=setInterval(()=>{ee(te=>te+1)},1e3),()=>{ue.current&&clearInterval(ue.current)}},[n]),O.useEffect(()=>()=>{const te=`last-diagram-${i?.id||"anonymous"}`;if(localStorage.removeItem(te),n&&n!=="free"){const Z=`problem-progress-${i?.id||"anonymous"}-${n}`;localStorage.removeItem(Z)}},[i?.id,n]);const zt=te=>{const Z=Math.floor(te/3600),ae=Math.floor(te%3600/60),pe=te%60;return Z>0?`${Z.toString().padStart(2,"0")}:${ae.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${ae.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},wt=te=>{const ae=Math.floor((new Date().getTime()-te.getTime())/1e3);if(ae<60)return"a moment ago";if(ae<1800)return`${Math.floor(ae/60)} min ago`;if(ae<3600)return"about an hour ago";if(ae<86400){const pe=Math.floor(ae/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${te.toLocaleTimeString()}`};O.useEffect(()=>{const te=Z=>{rt&&(Z.target.closest(".relative")||nn(!1))};if(rt)return document.addEventListener("click",te),()=>document.removeEventListener("click",te)},[rt]),O.useEffect(()=>{const te=Z=>{fn&&(Z.target.closest(".relative")||Xt(!1))};if(fn)return document.addEventListener("click",te),()=>document.removeEventListener("click",te)},[fn]);const Qr=te=>{const Z={...te,type:"customEdge",data:{label:"",hasLabel:!1}};gt(ae=>Uz(Z,ae))},[po,jr]=Re.useState(null),[Zt,hn]=O.useState(!1),Lr=async()=>{if(Zt)return;hn(!0),jr(null);const te={components:ve.map(Z=>{const ae=Z.data??{},pe=ae.type;let be;typeof pe=="string"?be=pe:typeof Z.type=="string"?be=Z.type:be="microservice";const Se=ae.label,_e=typeof Se=="string"?Se:String(Z.id),Fe=ae&&typeof ae=="object"?{...ae}:{},{icon:qt,subtitle:Mn,...rn}=Fe;return{id:Z.id,type:be,label:_e,position:{x:Z.position?.x??0,y:Z.position?.y??0},properties:{...rn,nodeData:{label:_e,icon:ae.icon,subtitle:ae.subtitle}}}}),connections:at.map(Z=>{const ae=Z.data??{},pe=ae.type,be=typeof pe=="string"?pe:"api-call",Se=ae.label,_e=typeof Se=="string"?Se:void 0;return{id:Z.id??`${Z.source}-${Z.target}`,source:Z.source,target:Z.target,type:be,label:_e,properties:ae}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",te);const Z=await Efe(te,y);jr(Z),ei("details")}catch(Z){console.error("Assessment failed:",Z),jr({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{hn(!1)}},Ei=O.useRef(null),ki=te=>{te.preventDefault(),te.dataTransfer&&(te.dataTransfer.dropEffect="move")},rc=te=>{te.preventDefault();const Z=te.dataTransfer?.getData("application/reactflow")||te.dataTransfer?.getData("text/plain");let ae=Z;try{Z&&(ae=JSON.parse(Z).type||Z)}catch{}const pe=r({x:te.clientX,y:te.clientY}),be=`${ae}-${Date.now()}`,Se=au.find(qt=>qt.id===ae),_e=Se?.group==="Grouping",Fe={id:be,position:pe,type:_e?"group":"custom",style:_e?{width:400,height:300,zIndex:-1}:void 0,data:{label:Se?.label??ae,componentId:Se?.id,icon:Se?.icon,subtitle:Se?.description,backgroundColor:_e?"rgba(100, 100, 255, 0.05)":void 0,borderColor:_e?"rgba(100, 100, 255, 0.3)":void 0}};Pe(qt=>[...qt,Fe])},Aa=(te,Z)=>{if(Z.parentId)return;const ae=ve.filter(be=>be.type==="group");let pe;for(const be of ae){if(be.id===Z.id)continue;const Se=be.position.x,_e=be.position.y,Fe=be.style?.width||400,qt=be.style?.height||300,Mn=Z.position.x,rn=Z.position.y,Mi=10;if(Mn>Se+Mi&&Mn<Se+Fe-Mi&&rn>_e+Mi&&rn<_e+qt-Mi){pe=be.id;break}}pe&&Pe(be=>be.map(Se=>{if(Se.id===Z.id){const _e=be.find(qt=>qt.id===pe),Fe=_e?{x:Z.position.x-_e.position.x,y:Z.position.y-_e.position.y}:Z.position;return{...Se,position:Fe,parentId:pe,extent:"parent"}}return Se}))},Ma=O.useCallback(()=>{const te=Nt.current;te&&Pe(Z=>Z.map(ae=>{if(ae.id===te&&ae.parentId){const pe=Z.find(_e=>_e.id===ae.parentId);let be=ae.position.x,Se=ae.position.y;return pe&&(be+=pe.position.x,Se+=pe.position.y),{...ae,position:{x:be,y:Se},parentId:void 0,extent:void 0}}return ae}))},[Pe]),[He,ur]=O.useState(null),[mo,go]=O.useState({}),[Ni,Jr]=O.useState({}),[yo,ei]=O.useState("details"),[ic,Pn]=O.useState(!1),Nt=O.useRef(null);Re.useEffect(()=>{Nt.current=He},[He]);const Qt=O.useRef(void 0);Qt.current=te=>{const ae=te.detail.id;Pe(pe=>pe.filter(be=>be.id!==ae)),Nt.current===ae&&(ur(null),ei("details"))};const Pr=O.useRef(void 0);Pr.current=te=>{const ae=te.detail.id;ur(pe=>{const be=pe===ae?null:ae;return ei(be?"inspector":"details"),be})};function vo(te,Z,ae,pe){return te.map(be=>be.id===Z?{...be,data:{...be.data,label:ae,hasLabel:pe},label:ae}:be)}const _a=Re.useRef(void 0);_a.current=te=>{const Z=te,{id:ae,label:pe,hasLabel:be}=Z.detail;gt(Se=>vo(Se,ae,pe,be))},Re.useEffect(()=>{const te=Z=>_a.current?.(Z);return globalThis.addEventListener("diagram:edge-label-change",te),()=>globalThis.removeEventListener("diagram:edge-label-change",te)},[]),Re.useEffect(()=>{const te=pe=>Qt.current?.(pe),Z=pe=>Pr.current?.(pe),ae=pe=>{const be=pe;Pe(Se=>Se.map(_e=>{if(_e.id===be.detail.id&&_e.parentId){const Fe=Se.find(rn=>rn.id===_e.parentId);let qt=_e.position.x,Mn=_e.position.y;return Fe&&(qt+=Fe.position.x,Mn+=Fe.position.y),{..._e,position:{x:qt,y:Mn},parentId:void 0,extent:void 0}}return _e}))};return globalThis.addEventListener("diagram:node-delete",te),globalThis.addEventListener("diagram:node-toggle",Z),globalThis.addEventListener("diagram:node-detach",ae),()=>{globalThis.removeEventListener("diagram:node-delete",te),globalThis.removeEventListener("diagram:node-toggle",Z),globalThis.removeEventListener("diagram:node-detach",ae)}},[Pe]),Re.useEffect(()=>{if(!He)return;const te=ve.find(Z=>Z.id===He);go(te?.data??{})},[He,ve]);const us=(te,Z)=>{go(ae=>({...ae,[te]:Z})),He&&Pe(ae=>ae.map(pe=>pe.id===He?{...pe,data:{...pe.data,[te]:Z}}:pe))},Da=(te,Z)=>us(te,Z),Ti=(te,Z)=>us(te,Z),ds=(te,Z)=>us(te,Z),ti=(te,Z)=>us(te,Z),Ir=()=>{if(!He)return;const te={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(Ni[He]?.length||0)+1}`,label:`Custom Property ${(Ni[He]?.length||0)+1}`,type:"text",value:""};Jr(Z=>{const ae={...Z,[He]:[...Z[He]||[],te]};return Pe(pe=>pe.map(be=>be.id===He?{...be,data:{...be.data,_customProperties:ae[He]}}:be)),ae})},ni=(te,Z)=>{He&&Jr(ae=>{const be=(ae[He]||[]).map(Se=>Se.id===te?{...Se,...Z}:Se);return Pe(Se=>Se.map(_e=>_e.id===He?{..._e,data:{..._e.data,_customProperties:be}}:_e)),{...ae,[He]:be}})},Br=te=>{He&&Jr(Z=>{const pe=(Z[He]||[]).filter(be=>be.id!==te);return Pe(be=>be.map(Se=>Se.id===He?{...Se,data:{...Se.data,_customProperties:pe}}:Se)),{...Z,[He]:pe}})};Re.useEffect(()=>{if(!He)return;const te=ve.find(Z=>Z.id===He);te?.data?._customProperties&&Jr(Z=>({...Z,[He]:te.data._customProperties}))},[He,ve]);const Tt=te=>{const Z=`${He}-${te.key}`,ae=mo[te.key];let pe;typeof ae=="number"?pe=ae:typeof te.default=="number"?pe=te.default:pe=void 0;let be;typeof ae=="string"?be=ae:te.default===null||te.default===void 0?be="":be=String(te.default);let Se;typeof ae=="string"?Se=ae:te.default===null||te.default===void 0?Se=void 0:Se=String(te.default);const _e=!!ae;return v.jsxs("div",{className:"flex flex-col px-1",children:[te.type==="boolean"&&v.jsx(W6,{id:Z,checked:_e,onChange:Fe=>Da(te.key,Fe),label:te.label}),te.type==="number"&&v.jsx(X6,{id:Z,label:te.label,value:pe,onChange:Fe=>Ti(te.key,Fe)}),te.type==="text"&&v.jsx(Nh,{id:Z,label:te.label,value:be,placeholder:te.placeholder,onChange:Fe=>ds(te.key,Fe)}),te.type==="textarea"&&v.jsx(Mp,{id:Z,label:te.label,value:be,placeholder:te.placeholder,onChange:Fe=>ds(te.key,Fe)}),te.type==="select"&&v.jsx(Z6,{id:Z,label:te.label,value:Se,options:te.options||[],onChange:Fe=>ti(te.key,Fe)})]},te.key)};let Ai=null;if(He){const te=ve.find(Z=>Z.id===He);if(te){const Z=te.data.componentId?au.find(ae=>ae.id===te.data.componentId):au.find(ae=>ae.label===te.data.label);Z?.properties?Ai=Z.properties.map(ae=>Tt(ae)):Ai=v.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else Ai=v.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let fs=null;if(He){const te=Ni[He]||[];te.length>0?fs=te.map(Z=>v.jsx(Dfe,{property:Z,onUpdate:ni,onDelete:Br},Z.id)):fs=v.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const dr=O.useCallback((te,Z)=>{const ae=ve.find(Se=>Se.id===te);if(!ae)return;const pe=`${te}-copy-${Date.now()}`,be={...ae,id:pe,position:{x:ae.position.x+200,y:ae.position.y+100},data:{...Z},selected:!1};Pe(Se=>[...Se,be])},[ve,Pe]),ri=O.useMemo(()=>({custom:qfe(dr,ve),group:_fe}),[dr,ve]);if(S)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),v.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(E)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),v.jsx("div",{className:"text-muted mb-4",children:E}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:le,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),v.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!y)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),v.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),v.jsx("button",{onClick:le,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function sc(te){const Z=au.find(Fe=>Fe.id===te),ae=Ei.current?.getBoundingClientRect();if(!ae)return;const pe=r({x:ae.left+ae.width/2,y:ae.top+ae.height/2}),be=`${te}-${Date.now()}`,Se=Z?.group==="Grouping",_e={id:be,position:pe,type:Se?"group":"custom",style:Se?{width:400,height:300,zIndex:-1}:void 0,data:{label:Z?.label??te,componentId:Z?.id,icon:Z?.icon,subtitle:Z?.description,backgroundColor:Se?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Se?"rgba(100, 100, 255, 0.3)":void 0}};Pe(Fe=>[...Fe,_e])}const bo=()=>{ve.length===0&&at.length===0||Pn(!0)},Ra=()=>{Pe([]),gt([]),ur(null),jr(null),Pn(!1)},oc=()=>{Pn(!1)},ii=(te="png")=>{const Z=Oz(wn()),ae=Cm(Z,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let be,Se;te==="svg"?(be=Kq,Se="svg"):te==="jpeg"?(be=rce,Se="jpg"):(be=nce,Se="png"),be(pe,{backgroundColor:te==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${ae.x}px, ${ae.y}px) scale(${ae.zoom})`}}).then(_e=>{const Fe=document.createElement("a");Fe.setAttribute("download",`system-design-${Date.now()}.${Se}`),Fe.setAttribute("href",_e),Fe.click()}).catch(_e=>{console.error("Error generating image:",_e)})},hs=()=>{try{const te=y?.title||"System Design",Z=y?.description,ae=Lfe(ve,at,te,Z),pe=`${te.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;hP(ae,pe,"application/json"),h.success("Design exported as JSON successfully!")}catch(te){console.error("Export JSON error:",te),h.error("Failed to export as JSON")}},Yn=()=>{try{const te=y?.title||"System Design",Z=y?.description,ae=Pfe(ve,at,te,Z),pe=`${te.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;hP(ae,pe,"application/xml"),h.success("Design exported as XML successfully!")}catch(te){console.error("Export XML error:",te),h.error("Failed to export as XML")}},xo=async te=>{const Z=te.target.files?.[0];if(Z)try{const ae=await Ife(Z);let pe;if(Z.name.endsWith(".json"))pe=dP(ae),h.success("Design imported from JSON successfully!");else if(Z.name.endsWith(".xml")||Z.name.endsWith(".drawio"))pe=fP(ae),h.success("Design imported from XML successfully!");else{const be=ae.trim();if(be.startsWith("{")||be.startsWith("["))pe=dP(ae),h.success("Design imported from JSON successfully!");else if(be.startsWith("<?xml")||be.startsWith("<mxfile"))pe=fP(ae),h.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}Pe(pe.nodes),gt(pe.edges),_(null),setTimeout(()=>{Wt({padding:.2,duration:400})},100)}catch(ae){console.error("Import error:",ae),h.error(ae instanceof Error?ae.message:"Failed to import diagram")}finally{dt.current&&(dt.current.value="")}},Oa=()=>{dt.current?.click()},zr=async te=>{if(te.preventDefault(),!(!G||!F.trim()))try{L("saving"),B(!1);const Z=F.trim(),ae=q.trim(),pe=await Er.saveDiagram({title:Z,description:ae,nodes:G.nodes,edges:G.edges});_(pe.id),D({id:pe.id,userId:i?.id||"",title:Z,description:ae,nodes:G.nodes,edges:G.edges,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),z(null);const be=`last-diagram-${i?.id||"anonymous"}`;localStorage.setItem(be,pe.id),L("saved"),se(new Date),h.success(`Your design "${Z}" has been saved successfully.`),I(""),W(""),setTimeout(()=>L("idle"),3e3)}catch(Z){console.error("Save failed:",Z),L("error"),z(null),h.error("Failed to save your design. Please try again."),setTimeout(()=>L("idle"),5e3)}},wo=()=>{B(!1),z(null),L("idle"),I(""),W("")},ps=(te="TB")=>{const Z=ve.filter(Je=>Je.type==="group"),ae=ve.filter(Je=>Je.type!=="group"&&!Je.parentId),pe=new gh.graphlib.Graph;pe.setDefaultEdgeLabel(()=>({})),pe.setGraph({rankdir:te,nodesep:150,ranksep:200,marginx:50,marginy:50});const be=350,Se=250;for(const Je of Z)pe.setNode(Je.id,{width:be,height:Se});const _e=at.filter(Je=>Z.some(At=>At.id===Je.source)&&Z.some(At=>At.id===Je.target));for(const Je of _e)pe.setEdge(Je.source,Je.target);Z.length>0&&gh.layout(pe);const Fe=new gh.graphlib.Graph;Fe.setDefaultEdgeLabel(()=>({})),Fe.setGraph({rankdir:te,nodesep:80,ranksep:100});const qt=200,Mn=80;for(const Je of ae)Fe.setNode(Je.id,{width:qt,height:Mn});const rn=at.filter(Je=>ae.some(At=>At.id===Je.source)&&ae.some(At=>At.id===Je.target));for(const Je of rn)Fe.setEdge(Je.source,Je.target);ae.length>0&&gh.layout(Fe);const Mi=ve.map(Je=>{if(Je.type==="group"){const At=pe.node(Je.id);if(At)return{...Je,position:{x:At.x-be/2,y:At.y-Se/2}}}else{if(Je.parentId)return Je;{const At=Fe.node(Je.id);if(At){const Km=Z.length>0?be+100:0;return{...Je,position:{x:At.x-qt/2+Km,y:At.y-Mn/2}}}}}return Je});Pe(Mi),globalThis.requestAnimationFrame(()=>{Wt({padding:.2,duration:400})})},ac=()=>{if(Pe(te=>te.map(Z=>Z.id===He?{...Z,data:{...Z.data,...mo}}:Z)),He){const te=ve.find(Z=>Z.id===He);console.log("Node properties saved:",{id:He,data:te?.data,nodeProps:mo})}},ja=n==="free"?"Design Studio | Diagrammatic":`${y?.title||"System Design Challenge"} | Diagrammatic`,Sn=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${y?.title||"system design"} challenge. ${y?.description?.substring(0,150)||"Practice system design skills"}...`;return v.jsxs(v.Fragment,{children:[v.jsx(yd,{title:ja,description:Sn,keywords:`system design playground, ${y?.title||"free canvas"}, architecture diagram tool, ${y?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),v.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[v.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:v.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:v.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsxs("button",{type:"button",onClick:le,className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[v.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":y.title,children:y.title}),n!=="free"&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":y.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:y.difficulty}),y.estimated_time&&v.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[v.jsx(lK,{className:"h-3 w-3"}),y.estimated_time]})]}),n!=="free"&&v.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:v.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:zt(X)})})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&v.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:ce&&v.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[Q==="saving"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),v.jsx("span",{children:"Saving..."})]}),Q==="saved"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),v.jsxs("span",{children:["Saved ",K&&wt(K)]})]}),Q==="error"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),v.jsx("span",{children:"Save failed"})]}),Q==="idle"&&K&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),v.jsxs("span",{children:["Saved ",wt(K)]})]})]})}),n&&n!=="free"&&ce&&v.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:v.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[Q==="saving"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),v.jsx("span",{children:"Saving progress..."})]}),Q==="saved"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),v.jsxs("span",{children:["Progress saved ",K&&wt(K)]})]}),Q==="error"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),v.jsx("span",{children:"Save failed"})]}),Q==="idle"&&K&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),v.jsxs("span",{children:["Progress saved ",wt(K)]})]})]})}),v.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[v.jsx("button",{type:"button",onClick:je,disabled:!Ne,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:v.jsx(aK,{className:"h-5 w-5"})}),v.jsx("button",{type:"button",onClick:ke,disabled:!we,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:v.jsx(oK,{className:"h-5 w-5"})}),v.jsx("button",{type:"button",onClick:bo,disabled:ve.length===0&&at.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:v.jsx(lI,{className:"h-5 w-5"})})]}),n==="free"&&v.jsxs(v.Fragment,{children:[v.jsx("button",{type:"button",onClick:Oa,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:v.jsx(bK,{className:"h-5 w-5"})}),v.jsx("input",{ref:dt,type:"file",accept:".json,.xml,.drawio",onChange:xo,className:"hidden","aria-label":"Import diagram file"})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{type:"button",onClick:()=>nn(!rt),disabled:ve.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:v.jsx(vK,{className:"h-5 w-5"})}),rt&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),v.jsx("button",{type:"button",onClick:()=>{ii("png"),nn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),v.jsx("button",{type:"button",onClick:()=>{ii("jpeg"),nn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),v.jsx("button",{type:"button",onClick:()=>{ii("svg"),nn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),v.jsx("div",{className:"border-t border-theme/10 my-1"}),v.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),v.jsx("button",{type:"button",onClick:()=>{hs(),nn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),v.jsx("button",{type:"button",onClick:()=>{Yn(),nn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{type:"button",onClick:()=>Xt(!fn),disabled:ve.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:v.jsx(dte,{className:"h-5 w-5"})}),fn&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[v.jsx("button",{type:"button",onClick:()=>{ps("TB"),Xt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),v.jsx("button",{type:"button",onClick:()=>{ps("LR"),Xt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),y?.id!=="free"&&v.jsx("button",{type:"button",onClick:Lr,disabled:Zt,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:Zt?"Assessing...":"Run Assessment"}),v.jsx(gd,{}),v.jsx("div",{className:"relative",children:s?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>$(!P),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[i?.picture?v.jsx("img",{src:i.picture,alt:i.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:i?.name?.[0]?.toUpperCase()||i?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:i?.name||i?.email}),v.jsx(cI,{className:"h-4 w-4"})]}),P&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:i?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:i?.email})]}),v.jsx("button",{type:"button",onClick:()=>{d(),$(!1),_(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>T(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),v.jsxs("div",{className:"flex-1 flex min-h-0",children:[v.jsx(wfe,{components:au,onAdd:sc}),v.jsx(Sfe,{reactFlowWrapperRef:Ei,nodes:ve,edges:at,nodeTypes:ri,edgeTypes:Bfe,onNodesChange:Ae,onEdgesChange:Or,onConnect:Qr,onDragOver:ki,onDrop:rc,onNodeDragStop:Aa}),v.jsx(Cfe,{problem:y,activeTab:yo,setActiveTab:ei,inspectedNodeId:He,setInspectedNodeId:ur,propertyElements:Ai,customPropertyElements:fs,onAddCustomProperty:Ir,handleSave:ac,assessmentResult:po,onDetachFromGroup:Ma,isNodeInGroup:He?ve.find(te=>te.id===He)?.parentId!==void 0:!1})]}),ic&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:oc,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:Ra,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),v.jsx(Qp,{isOpen:k,onClose:()=>T(!1),onLogin:async(te,Z)=>{await o({email:te,password:Z})},onSignup:async(te,Z,ae)=>{await l({email:te,password:Z,name:ae})},onGoogleLogin:u}),V&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:v.jsxs("form",{onSubmit:zr,children:[v.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:v.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),v.jsxs("div",{className:"px-6 py-4 space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",v.jsx("span",{className:"text-red-500",children:"*"})]}),v.jsx("input",{id:"title-input",type:"text",value:F,onChange:te=>I(te.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),v.jsx("textarea",{id:"description-input",value:q,onChange:te=>W(te.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),v.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:wo,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:!F.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),v.jsx(jfe,{toasts:h.toasts,onClose:h.removeToast})]})]})},Hfe=()=>v.jsx(jq,{children:v.jsx(Vfe,{})}),Ffe=()=>(xa(),v.jsx(CU,{children:v.jsx(aU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsxs(iU,{children:[v.jsx(qo,{path:"/",element:v.jsx(r_,{})}),v.jsx(qo,{path:"/problems",element:v.jsx(lY,{})}),v.jsx(qo,{path:"/create-problem",element:v.jsx(cte,{})}),v.jsx(qo,{path:"/diagrams",element:v.jsx(ute,{})}),v.jsx(qo,{path:"/playground/:id",element:v.jsx(Hfe,{})}),v.jsx(qo,{path:"*",element:v.jsx(r_,{})})]})})}));uF.createRoot(document.getElementById("root")).render(v.jsx(O.StrictMode,{children:v.jsx(Ffe,{})}));
