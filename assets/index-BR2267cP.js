function fj(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Ih(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pg={exports:{}},nc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function hj(){if(Mw)return nc;Mw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var a=null;if(o!==void 0&&(a=""+o),r.key!==void 0&&(a=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:o}}return nc.Fragment=e,nc.jsx=n,nc.jsxs=n,nc}var Nw;function pj(){return Nw||(Nw=1,Pg.exports=hj()),Pg.exports}var v=pj(),Vg={exports:{}},ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw;function mj(){if(Aw)return ze;Aw=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function g(O){return O===null||typeof O!="object"?null:(O=m&&O[m]||O["@@iterator"],typeof O=="function"?O:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function E(O,H,J){this.props=O,this.context=H,this.refs=w,this.updater=J||x}E.prototype.isReactComponent={},E.prototype.setState=function(O,H){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,H,"setState")},E.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function C(){}C.prototype=E.prototype;function N(O,H,J){this.props=O,this.context=H,this.refs=w,this.updater=J||x}var k=N.prototype=new C;k.constructor=N,S(k,E.prototype),k.isPureReactComponent=!0;var M=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function P(O,H,J,te,re,he){return J=he.ref,{$$typeof:t,type:O,key:H,ref:J!==void 0?J:null,props:he}}function B(O,H){return P(O.type,H,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function ee(O){var H={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(J){return H[J]})}var K=/\/+/g;function W(O,H){return typeof O=="object"&&O!==null&&O.key!=null?ee(""+O.key):H.toString(36)}function ne(){}function z(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(ne,ne):(O.status="pending",O.then(function(H){O.status==="pending"&&(O.status="fulfilled",O.value=H)},function(H){O.status==="pending"&&(O.status="rejected",O.reason=H)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function U(O,H,J,te,re){var he=typeof O;(he==="undefined"||he==="boolean")&&(O=null);var fe=!1;if(O===null)fe=!0;else switch(he){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(O.$$typeof){case t:case e:fe=!0;break;case p:return fe=O._init,U(fe(O._payload),H,J,te,re)}}if(fe)return re=re(O),fe=te===""?"."+W(O,0):te,M(re)?(J="",fe!=null&&(J=fe.replace(K,"$&/")+"/"),U(re,H,J,"",function(ye){return ye})):re!=null&&(I(re)&&(re=B(re,J+(re.key==null||O&&O.key===re.key?"":(""+re.key).replace(K,"$&/")+"/")+fe)),H.push(re)),1;fe=0;var me=te===""?".":te+":";if(M(O))for(var le=0;le<O.length;le++)te=O[le],he=me+W(te,le),fe+=U(te,H,J,he,re);else if(le=g(O),typeof le=="function")for(O=le.call(O),le=0;!(te=O.next()).done;)te=te.value,he=me+W(te,le++),fe+=U(te,H,J,he,re);else if(he==="object"){if(typeof O.then=="function")return U(z(O),H,J,te,re);throw H=String(O),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return fe}function R(O,H,J){if(O==null)return O;var te=[],re=0;return U(O,te,"","",function(he){return H.call(J,he,re++)}),te}function L(O){if(O._status===-1){var H=O._result;H=H(),H.then(function(J){(O._status===0||O._status===-1)&&(O._status=1,O._result=J)},function(J){(O._status===0||O._status===-1)&&(O._status=2,O._result=J)}),O._status===-1&&(O._status=0,O._result=H)}if(O._status===1)return O._result.default;throw O._result}var F=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Y(){}return ze.Children={map:R,forEach:function(O,H,J){R(O,function(){H.apply(this,arguments)},J)},count:function(O){var H=0;return R(O,function(){H++}),H},toArray:function(O){return R(O,function(H){return H})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},ze.Component=E,ze.Fragment=n,ze.Profiler=r,ze.PureComponent=N,ze.StrictMode=i,ze.Suspense=d,ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ze.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},ze.cache=function(O){return function(){return O.apply(null,arguments)}},ze.cloneElement=function(O,H,J){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var te=S({},O.props),re=O.key,he=void 0;if(H!=null)for(fe in H.ref!==void 0&&(he=void 0),H.key!==void 0&&(re=""+H.key),H)!_.call(H,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&H.ref===void 0||(te[fe]=H[fe]);var fe=arguments.length-2;if(fe===1)te.children=J;else if(1<fe){for(var me=Array(fe),le=0;le<fe;le++)me[le]=arguments[le+2];te.children=me}return P(O.type,re,void 0,void 0,he,te)},ze.createContext=function(O){return O={$$typeof:a,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},ze.createElement=function(O,H,J){var te,re={},he=null;if(H!=null)for(te in H.key!==void 0&&(he=""+H.key),H)_.call(H,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(re[te]=H[te]);var fe=arguments.length-2;if(fe===1)re.children=J;else if(1<fe){for(var me=Array(fe),le=0;le<fe;le++)me[le]=arguments[le+2];re.children=me}if(O&&O.defaultProps)for(te in fe=O.defaultProps,fe)re[te]===void 0&&(re[te]=fe[te]);return P(O,he,void 0,void 0,null,re)},ze.createRef=function(){return{current:null}},ze.forwardRef=function(O){return{$$typeof:c,render:O}},ze.isValidElement=I,ze.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:L}},ze.memo=function(O,H){return{$$typeof:f,type:O,compare:H===void 0?null:H}},ze.startTransition=function(O){var H=D.T,J={};D.T=J;try{var te=O(),re=D.S;re!==null&&re(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(Y,F)}catch(he){F(he)}finally{D.T=H}},ze.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ze.use=function(O){return D.H.use(O)},ze.useActionState=function(O,H,J){return D.H.useActionState(O,H,J)},ze.useCallback=function(O,H){return D.H.useCallback(O,H)},ze.useContext=function(O){return D.H.useContext(O)},ze.useDebugValue=function(){},ze.useDeferredValue=function(O,H){return D.H.useDeferredValue(O,H)},ze.useEffect=function(O,H,J){var te=D.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(O,H)},ze.useId=function(){return D.H.useId()},ze.useImperativeHandle=function(O,H,J){return D.H.useImperativeHandle(O,H,J)},ze.useInsertionEffect=function(O,H){return D.H.useInsertionEffect(O,H)},ze.useLayoutEffect=function(O,H){return D.H.useLayoutEffect(O,H)},ze.useMemo=function(O,H){return D.H.useMemo(O,H)},ze.useOptimistic=function(O,H){return D.H.useOptimistic(O,H)},ze.useReducer=function(O,H,J){return D.H.useReducer(O,H,J)},ze.useRef=function(O){return D.H.useRef(O)},ze.useState=function(O){return D.H.useState(O)},ze.useSyncExternalStore=function(O,H,J){return D.H.useSyncExternalStore(O,H,J)},ze.useTransition=function(){return D.H.useTransition()},ze.version="19.1.1",ze}var Dw;function lu(){return Dw||(Dw=1,Vg.exports=mj()),Vg.exports}var j=lu();const je=Ih(j),gj=fj({__proto__:null,default:je},[j]);var Ig={exports:{}},ic={},Hg={exports:{}},$g={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function yj(){return Ow||(Ow=1,(function(t){function e(R,L){var F=R.length;R.push(L);e:for(;0<F;){var Y=F-1>>>1,O=R[Y];if(0<r(O,L))R[Y]=L,R[F]=O,F=Y;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var L=R[0],F=R.pop();if(F!==L){R[0]=F;e:for(var Y=0,O=R.length,H=O>>>1;Y<H;){var J=2*(Y+1)-1,te=R[J],re=J+1,he=R[re];if(0>r(te,F))re<O&&0>r(he,te)?(R[Y]=he,R[re]=F,Y=re):(R[Y]=te,R[J]=F,Y=J);else if(re<O&&0>r(he,F))R[Y]=he,R[re]=F,Y=re;else break e}}return L}function r(R,L){var F=R.sortIndex-L.sortIndex;return F!==0?F:R.id-L.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var d=[],f=[],p=1,m=null,g=3,x=!1,S=!1,w=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function M(R){for(var L=n(f);L!==null;){if(L.callback===null)i(f);else if(L.startTime<=R)i(f),L.sortIndex=L.expirationTime,e(d,L);else break;L=n(f)}}function D(R){if(w=!1,M(R),!S)if(n(d)!==null)S=!0,_||(_=!0,W());else{var L=n(f);L!==null&&U(D,L.startTime-R)}}var _=!1,P=-1,B=5,I=-1;function ee(){return E?!0:!(t.unstable_now()-I<B)}function K(){if(E=!1,_){var R=t.unstable_now();I=R;var L=!0;try{e:{S=!1,w&&(w=!1,N(P),P=-1),x=!0;var F=g;try{t:{for(M(R),m=n(d);m!==null&&!(m.expirationTime>R&&ee());){var Y=m.callback;if(typeof Y=="function"){m.callback=null,g=m.priorityLevel;var O=Y(m.expirationTime<=R);if(R=t.unstable_now(),typeof O=="function"){m.callback=O,M(R),L=!0;break t}m===n(d)&&i(d),M(R)}else i(d);m=n(d)}if(m!==null)L=!0;else{var H=n(f);H!==null&&U(D,H.startTime-R),L=!1}}break e}finally{m=null,g=F,x=!1}L=void 0}}finally{L?W():_=!1}}}var W;if(typeof k=="function")W=function(){k(K)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,z=ne.port2;ne.port1.onmessage=K,W=function(){z.postMessage(null)}}else W=function(){C(K,0)};function U(R,L){P=C(function(){R(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(R){switch(g){case 1:case 2:case 3:var L=3;break;default:L=g}var F=g;g=L;try{return R()}finally{g=F}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=g;g=R;try{return L()}finally{g=F}},t.unstable_scheduleCallback=function(R,L,F){var Y=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,R){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=F+O,R={id:p++,callback:L,priorityLevel:R,startTime:F,expirationTime:O,sortIndex:-1},F>Y?(R.sortIndex=F,e(f,R),n(d)===null&&R===n(f)&&(w?(N(P),P=-1):w=!0,U(D,F-Y))):(R.sortIndex=O,e(d,R),S||x||(S=!0,_||(_=!0,W()))),R},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(R){var L=g;return function(){var F=g;g=L;try{return R.apply(this,arguments)}finally{g=F}}}})($g)),$g}var Rw;function xj(){return Rw||(Rw=1,Hg.exports=yj()),Hg.exports}var Ug={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jw;function bj(){if(jw)return nn;jw=1;var t=lu();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(d,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:m==null?null:""+m,children:d,containerInfo:f,implementation:p}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,nn.createPortal=function(d,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,p)},nn.flushSync=function(d){var f=a.T,p=i.p;try{if(a.T=null,i.p=2,d)return d()}finally{a.T=f,i.p=p,i.d.f()}},nn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},nn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},nn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:x}):p==="script"&&i.d.X(d,{crossOrigin:m,integrity:g,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},nn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=c(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},nn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=c(p,f.crossOrigin);i.d.L(d,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},nn.preloadModule=function(d,f){if(typeof d=="string")if(f){var p=c(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},nn.requestFormReset=function(d){i.d.r(d)},nn.unstable_batchedUpdates=function(d,f){return d(f)},nn.useFormState=function(d,f,p){return a.H.useFormState(d,f,p)},nn.useFormStatus=function(){return a.H.useHostTransitionStatus()},nn.version="19.1.1",nn}var _w;function I2(){if(_w)return Ug.exports;_w=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ug.exports=bj(),Ug.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function vj(){if(Lw)return ic;Lw=1;var t=xj(),e=lu(),n=I2();function i(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,u=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(u=l.return),s=l.return;while(s)}return l.tag===3?u:null}function a(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(o(s)!==s)throw Error(i(188))}function d(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(i(188));return l!==s?null:s}for(var u=s,h=l;;){var y=u.return;if(y===null)break;var b=y.alternate;if(b===null){if(h=y.return,h!==null){u=h;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===u)return c(y),s;if(b===h)return c(y),l;b=b.sibling}throw Error(i(188))}if(u.return!==h.return)u=y,h=b;else{for(var T=!1,A=y.child;A;){if(A===u){T=!0,u=y,h=b;break}if(A===h){T=!0,h=y,u=b;break}A=A.sibling}if(!T){for(A=b.child;A;){if(A===u){T=!0,u=b,h=y;break}if(A===h){T=!0,h=b,u=y;break}A=A.sibling}if(!T)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:l}function f(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=f(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function W(s){return s===null||typeof s!="object"?null:(s=K&&s[K]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function z(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case S:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case D:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case x:return"Portal";case k:return(s.displayName||"Context")+".Provider";case N:return(s._context.displayName||"Context")+".Consumer";case M:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return l=s.displayName||null,l!==null?l:z(s.type)||"Memo";case B:l=s._payload,s=s._init;try{return z(s(l))}catch{}}return null}var U=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Y=[],O=-1;function H(s){return{current:s}}function J(s){0>O||(s.current=Y[O],Y[O]=null,O--)}function te(s,l){O++,Y[O]=s.current,s.current=l}var re=H(null),he=H(null),fe=H(null),me=H(null);function le(s,l){switch(te(fe,l),te(he,s),te(re,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?tw(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=tw(l),s=nw(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}J(re),te(re,s)}function ye(){J(re),J(he),J(fe)}function Ie(s){s.memoizedState!==null&&te(me,s);var l=re.current,u=nw(l,s.type);l!==u&&(te(he,s),te(re,u))}function Fe(s){he.current===s&&(J(re),J(he)),me.current===s&&(J(me),Zl._currentValue=F)}var Ce=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,Te=t.unstable_cancelCallback,We=t.unstable_shouldYield,Lt=t.unstable_requestPaint,lt=t.unstable_now,pi=t.unstable_getCurrentPriorityLevel,_i=t.unstable_ImmediatePriority,Li=t.unstable_UserBlockingPriority,ni=t.unstable_NormalPriority,ae=t.unstable_LowPriority,ce=t.unstable_IdlePriority,pe=t.log,Le=t.unstable_setDisableYieldValue,we=null,ke=null;function Ze(s){if(typeof pe=="function"&&Le(s),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(we,s)}catch{}}var Ke=Math.clz32?Math.clz32:Cu,To=Math.log,Eu=Math.LN2;function Cu(s){return s>>>=0,s===0?32:31-(To(s)/Eu|0)|0}var xr=256,Mo=4194304;function zi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function No(s,l,u){var h=s.pendingLanes;if(h===0)return 0;var y=0,b=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var A=h&134217727;return A!==0?(h=A&~b,h!==0?y=zi(h):(T&=A,T!==0?y=zi(T):u||(u=A&~s,u!==0&&(y=zi(u))))):(A=h&~b,A!==0?y=zi(A):T!==0?y=zi(T):u||(u=h&~s,u!==0&&(y=zi(u)))),y===0?0:l!==0&&l!==y&&(l&b)===0&&(b=y&-y,u=l&-l,b>=u||b===32&&(u&4194048)!==0)?l:y}function ws(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function Mp(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ku(){var s=xr;return xr<<=1,(xr&4194048)===0&&(xr=256),s}function Tu(){var s=Mo;return Mo<<=1,(Mo&62914560)===0&&(Mo=4194304),s}function Qa(s){for(var l=[],u=0;31>u;u++)l.push(s);return l}function Es(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Np(s,l,u,h,y,b){var T=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var A=s.entanglements,V=s.expirationTimes,X=s.hiddenUpdates;for(u=T&~u;0<u;){var ie=31-Ke(u),oe=1<<ie;A[ie]=0,V[ie]=-1;var Z=X[ie];if(Z!==null)for(X[ie]=null,ie=0;ie<Z.length;ie++){var Q=Z[ie];Q!==null&&(Q.lane&=-536870913)}u&=~oe}h!==0&&Mu(s,h,0),b!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=b&~(T&~l))}function Mu(s,l,u){s.pendingLanes|=l,s.suspendedLanes&=~l;var h=31-Ke(l);s.entangledLanes|=l,s.entanglements[h]=s.entanglements[h]|1073741824|u&4194090}function Ja(s,l){var u=s.entangledLanes|=l;for(s=s.entanglements;u;){var h=31-Ke(u),y=1<<h;y&l|s[h]&l&&(s[h]|=l),u&=~y}}function el(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function tl(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Nu(){var s=L.p;return s!==0?s:(s=window.event,s===void 0?32:Sw(s.type))}function Ap(s,l){var u=L.p;try{return L.p=s,l()}finally{L.p=u}}var mi=Math.random().toString(36).slice(2),Vt="__reactFiber$"+mi,en="__reactProps$"+mi,br="__reactContainer$"+mi,nl="__reactEvents$"+mi,Dp="__reactListeners$"+mi,Op="__reactHandles$"+mi,Au="__reactResources$"+mi,Cs="__reactMarker$"+mi;function il(s){delete s[Vt],delete s[en],delete s[nl],delete s[Dp],delete s[Op]}function vr(s){var l=s[Vt];if(l)return l;for(var u=s.parentNode;u;){if(l=u[br]||u[Vt]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(s=ow(s);s!==null;){if(u=s[Vt])return u;s=ow(s)}return l}s=u,u=s.parentNode}return null}function Bi(s){if(s=s[Vt]||s[br]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function Sr(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(i(33))}function Pi(s){var l=s[Au];return l||(l=s[Au]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Mt(s){s[Cs]=!0}var Du=new Set,Ou={};function Vi(s,l){wr(s,l),wr(s+"Capture",l)}function wr(s,l){for(Ou[s]=l,s=0;s<l.length;s++)Du.add(l[s])}var Rp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},Ru={};function jp(s){return Ce.call(Ru,s)?!0:Ce.call(rl,s)?!1:Rp.test(s)?Ru[s]=!0:(rl[s]=!0,!1)}function Ao(s,l,u){if(jp(l))if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+u)}}function Do(s,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+u)}}function ii(s,l,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(l,u,""+h)}}var sl,ju;function Ii(s){if(sl===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);sl=l&&l[1]||"",ju=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sl+s+ju}var ol=!1;function al(s,l){if(!s||ol)return"";ol=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Q){var Z=Q}Reflect.construct(s,[],oe)}else{try{oe.call()}catch(Q){Z=Q}s.call(oe.prototype)}}else{try{throw Error()}catch(Q){Z=Q}(oe=s())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Q){if(Q&&Z&&typeof Q.stack=="string")return[Q.stack,Z.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),T=b[0],A=b[1];if(T&&A){var V=T.split(`
`),X=A.split(`
`);for(y=h=0;h<V.length&&!V[h].includes("DetermineComponentFrameRoot");)h++;for(;y<X.length&&!X[y].includes("DetermineComponentFrameRoot");)y++;if(h===V.length||y===X.length)for(h=V.length-1,y=X.length-1;1<=h&&0<=y&&V[h]!==X[y];)y--;for(;1<=h&&0<=y;h--,y--)if(V[h]!==X[y]){if(h!==1||y!==1)do if(h--,y--,0>y||V[h]!==X[y]){var ie=`
`+V[h].replace(" at new "," at ");return s.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",s.displayName)),ie}while(1<=h&&0<=y);break}}}finally{ol=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ii(u):""}function _p(s){switch(s.tag){case 26:case 27:case 5:return Ii(s.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 15:return al(s.type,!1);case 11:return al(s.type.render,!1);case 1:return al(s.type,!0);case 31:return Ii("Activity");default:return""}}function _u(s){try{var l="";do l+=_p(s),s=s.return;while(s);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function pn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Lu(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Lp(s){var l=Lu(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),h=""+s[l];if(!s.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,b=u.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return y.call(this)},set:function(T){h=""+T,b.call(this,T)}}),Object.defineProperty(s,l,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Oo(s){s._valueTracker||(s._valueTracker=Lp(s))}function ll(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var u=l.getValue(),h="";return s&&(h=Lu(s)?s.checked?"true":"false":s.value),s=h,s!==u?(l.setValue(s),!0):!1}function Ro(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var zp=/[\n"\\]/g;function mn(s){return s.replace(zp,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ks(s,l,u,h,y,b,T,A){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),l!=null?T==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+pn(l)):s.value!==""+pn(l)&&(s.value=""+pn(l)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),l!=null?cl(s,T,pn(l)):u!=null?cl(s,T,pn(u)):h!=null&&s.removeAttribute("value"),y==null&&b!=null&&(s.defaultChecked=!!b),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?s.name=""+pn(A):s.removeAttribute("name")}function zu(s,l,u,h,y,b,T,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(s.type=b),l!=null||u!=null){if(!(b!=="submit"&&b!=="reset"||l!=null))return;u=u!=null?""+pn(u):"",l=l!=null?""+pn(l):u,A||l===s.value||(s.value=l),s.defaultValue=l}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=A?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T)}function cl(s,l,u){l==="number"&&Ro(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Hi(s,l,u,h){if(s=s.options,l){l={};for(var y=0;y<u.length;y++)l["$"+u[y]]=!0;for(u=0;u<s.length;u++)y=l.hasOwnProperty("$"+s[u].value),s[u].selected!==y&&(s[u].selected=y),y&&h&&(s[u].defaultSelected=!0)}else{for(u=""+pn(u),l=null,y=0;y<s.length;y++){if(s[y].value===u){s[y].selected=!0,h&&(s[y].defaultSelected=!0);return}l!==null||s[y].disabled||(l=s[y])}l!==null&&(l.selected=!0)}}function Jb(s,l,u){if(l!=null&&(l=""+pn(l),l!==s.value&&(s.value=l),u==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=u!=null?""+pn(u):""}function ev(s,l,u,h){if(l==null){if(h!=null){if(u!=null)throw Error(i(92));if(U(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),l=u}u=pn(l),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h)}function jo(s,l){if(l){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=l;return}}s.textContent=l}var cR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tv(s,l,u){var h=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":h?s.setProperty(l,u):typeof u!="number"||u===0||cR.has(l)?l==="float"?s.cssFloat=u:s[l]=(""+u).trim():s[l]=u+"px"}function nv(s,l,u){if(l!=null&&typeof l!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var y in l)h=l[y],l.hasOwnProperty(y)&&u[y]!==h&&tv(s,y,h)}else for(var b in l)l.hasOwnProperty(b)&&tv(s,b,l[b])}function Bp(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bu(s){return dR.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Pp=null;function Vp(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var _o=null,Lo=null;function iv(s){var l=Bi(s);if(l&&(s=l.stateNode)){var u=s[en]||null;e:switch(s=l.stateNode,l.type){case"input":if(ks(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+mn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var h=u[l];if(h!==s&&h.form===s.form){var y=h[en]||null;if(!y)throw Error(i(90));ks(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(l=0;l<u.length;l++)h=u[l],h.form===s.form&&ll(h)}break e;case"textarea":Jb(s,u.value,u.defaultValue);break e;case"select":l=u.value,l!=null&&Hi(s,!!u.multiple,l,!1)}}}var Ip=!1;function rv(s,l,u){if(Ip)return s(l,u);Ip=!0;try{var h=s(l);return h}finally{if(Ip=!1,(_o!==null||Lo!==null)&&(wd(),_o&&(l=_o,s=Lo,Lo=_o=null,iv(l),s)))for(l=0;l<s.length;l++)iv(s[l])}}function ul(s,l){var u=s.stateNode;if(u===null)return null;var h=u[en]||null;if(h===null)return null;u=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,l,typeof u));return u}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hp=!1;if($i)try{var dl={};Object.defineProperty(dl,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",dl,dl),window.removeEventListener("test",dl,dl)}catch{Hp=!1}var Er=null,$p=null,Pu=null;function sv(){if(Pu)return Pu;var s,l=$p,u=l.length,h,y="value"in Er?Er.value:Er.textContent,b=y.length;for(s=0;s<u&&l[s]===y[s];s++);var T=u-s;for(h=1;h<=T&&l[u-h]===y[b-h];h++);return Pu=y.slice(s,1<h?1-h:void 0)}function Vu(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Iu(){return!0}function ov(){return!1}function gn(s){function l(u,h,y,b,T){this._reactName=u,this._targetInst=y,this.type=h,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(u=s[A],this[A]=u?u(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Iu:ov,this.isPropagationStopped=ov,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Iu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Iu)},persist:function(){},isPersistent:Iu}),l}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hu=gn(Ts),fl=p({},Ts,{view:0,detail:0}),fR=gn(fl),Up,Fp,hl,$u=p({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yp,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==hl&&(hl&&s.type==="mousemove"?(Up=s.screenX-hl.screenX,Fp=s.screenY-hl.screenY):Fp=Up=0,hl=s),Up)},movementY:function(s){return"movementY"in s?s.movementY:Fp}}),av=gn($u),hR=p({},$u,{dataTransfer:0}),pR=gn(hR),mR=p({},fl,{relatedTarget:0}),qp=gn(mR),gR=p({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),yR=gn(gR),xR=p({},Ts,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bR=gn(xR),vR=p({},Ts,{data:0}),lv=gn(vR),SR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ER={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CR(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=ER[s])?!!l[s]:!1}function Yp(){return CR}var kR=p({},fl,{key:function(s){if(s.key){var l=SR[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Vu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?wR[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yp,charCode:function(s){return s.type==="keypress"?Vu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Vu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),TR=gn(kR),MR=p({},$u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cv=gn(MR),NR=p({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yp}),AR=gn(NR),DR=p({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),OR=gn(DR),RR=p({},$u,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),jR=gn(RR),_R=p({},Ts,{newState:0,oldState:0}),LR=gn(_R),zR=[9,13,27,32],Kp=$i&&"CompositionEvent"in window,pl=null;$i&&"documentMode"in document&&(pl=document.documentMode);var BR=$i&&"TextEvent"in window&&!pl,uv=$i&&(!Kp||pl&&8<pl&&11>=pl),dv=" ",fv=!1;function hv(s,l){switch(s){case"keyup":return zR.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var zo=!1;function PR(s,l){switch(s){case"compositionend":return pv(l);case"keypress":return l.which!==32?null:(fv=!0,dv);case"textInput":return s=l.data,s===dv&&fv?null:s;default:return null}}function VR(s,l){if(zo)return s==="compositionend"||!Kp&&hv(s,l)?(s=sv(),Pu=$p=Er=null,zo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return uv&&l.locale!=="ko"?null:l.data;default:return null}}var IR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mv(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!IR[s.type]:l==="textarea"}function gv(s,l,u,h){_o?Lo?Lo.push(h):Lo=[h]:_o=h,l=Nd(l,"onChange"),0<l.length&&(u=new Hu("onChange","change",null,u,h),s.push({event:u,listeners:l}))}var ml=null,gl=null;function HR(s){WS(s,0)}function Uu(s){var l=Sr(s);if(ll(l))return s}function yv(s,l){if(s==="change")return l}var xv=!1;if($i){var Gp;if($i){var Xp="oninput"in document;if(!Xp){var bv=document.createElement("div");bv.setAttribute("oninput","return;"),Xp=typeof bv.oninput=="function"}Gp=Xp}else Gp=!1;xv=Gp&&(!document.documentMode||9<document.documentMode)}function vv(){ml&&(ml.detachEvent("onpropertychange",Sv),gl=ml=null)}function Sv(s){if(s.propertyName==="value"&&Uu(gl)){var l=[];gv(l,gl,s,Vp(s)),rv(HR,l)}}function $R(s,l,u){s==="focusin"?(vv(),ml=l,gl=u,ml.attachEvent("onpropertychange",Sv)):s==="focusout"&&vv()}function UR(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Uu(gl)}function FR(s,l){if(s==="click")return Uu(l)}function qR(s,l){if(s==="input"||s==="change")return Uu(l)}function YR(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Cn=typeof Object.is=="function"?Object.is:YR;function yl(s,l){if(Cn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var u=Object.keys(s),h=Object.keys(l);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var y=u[h];if(!Ce.call(l,y)||!Cn(s[y],l[y]))return!1}return!0}function wv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ev(s,l){var u=wv(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=l&&h>=l)return{node:u,offset:l-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=wv(u)}}function Cv(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Cv(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function kv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Ro(s.document);l instanceof s.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)s=l.contentWindow;else break;l=Ro(s.document)}return l}function Wp(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var KR=$i&&"documentMode"in document&&11>=document.documentMode,Bo=null,Zp=null,xl=null,Qp=!1;function Tv(s,l,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qp||Bo==null||Bo!==Ro(h)||(h=Bo,"selectionStart"in h&&Wp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xl&&yl(xl,h)||(xl=h,h=Nd(Zp,"onSelect"),0<h.length&&(l=new Hu("onSelect","select",null,l,u),s.push({event:l,listeners:h}),l.target=Bo)))}function Ms(s,l){var u={};return u[s.toLowerCase()]=l.toLowerCase(),u["Webkit"+s]="webkit"+l,u["Moz"+s]="moz"+l,u}var Po={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},Jp={},Mv={};$i&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function Ns(s){if(Jp[s])return Jp[s];if(!Po[s])return s;var l=Po[s],u;for(u in l)if(l.hasOwnProperty(u)&&u in Mv)return Jp[s]=l[u];return s}var Nv=Ns("animationend"),Av=Ns("animationiteration"),Dv=Ns("animationstart"),GR=Ns("transitionrun"),XR=Ns("transitionstart"),WR=Ns("transitioncancel"),Ov=Ns("transitionend"),Rv=new Map,em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");em.push("scrollEnd");function ri(s,l){Rv.set(s,l),Vi(l,[s])}var jv=new WeakMap;function Pn(s,l){if(typeof s=="object"&&s!==null){var u=jv.get(s);return u!==void 0?u:(l={value:s,source:l,stack:_u(l)},jv.set(s,l),l)}return{value:s,source:l,stack:_u(l)}}var Vn=[],Vo=0,tm=0;function Fu(){for(var s=Vo,l=tm=Vo=0;l<s;){var u=Vn[l];Vn[l++]=null;var h=Vn[l];Vn[l++]=null;var y=Vn[l];Vn[l++]=null;var b=Vn[l];if(Vn[l++]=null,h!==null&&y!==null){var T=h.pending;T===null?y.next=y:(y.next=T.next,T.next=y),h.pending=y}b!==0&&_v(u,y,b)}}function qu(s,l,u,h){Vn[Vo++]=s,Vn[Vo++]=l,Vn[Vo++]=u,Vn[Vo++]=h,tm|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function nm(s,l,u,h){return qu(s,l,u,h),Yu(s)}function Io(s,l){return qu(s,null,null,l),Yu(s)}function _v(s,l,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var y=!1,b=s.return;b!==null;)b.childLanes|=u,h=b.alternate,h!==null&&(h.childLanes|=u),b.tag===22&&(s=b.stateNode,s===null||s._visibility&1||(y=!0)),s=b,b=b.return;return s.tag===3?(b=s.stateNode,y&&l!==null&&(y=31-Ke(u),s=b.hiddenUpdates,h=s[y],h===null?s[y]=[l]:h.push(l),l.lane=u|536870912),b):null}function Yu(s){if(50<Ul)throw Ul=0,lg=null,Error(i(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Ho={};function ZR(s,l,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(s,l,u,h){return new ZR(s,l,u,h)}function im(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ui(s,l){var u=s.alternate;return u===null?(u=kn(s.tag,l,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=l,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,l=s.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Lv(s,l){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,l=u.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Ku(s,l,u,h,y,b){var T=0;if(h=s,typeof s=="function")im(s)&&(T=1);else if(typeof s=="string")T=J3(s,u,re.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=kn(31,u,l,y),s.elementType=I,s.lanes=b,s;case S:return As(u.children,y,b,l);case w:T=8,y|=24;break;case E:return s=kn(12,u,l,y|2),s.elementType=E,s.lanes=b,s;case D:return s=kn(13,u,l,y),s.elementType=D,s.lanes=b,s;case _:return s=kn(19,u,l,y),s.elementType=_,s.lanes=b,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:case k:T=10;break e;case N:T=9;break e;case M:T=11;break e;case P:T=14;break e;case B:T=16,h=null;break e}T=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return l=kn(T,u,l,y),l.elementType=s,l.type=h,l.lanes=b,l}function As(s,l,u,h){return s=kn(7,s,h,l),s.lanes=u,s}function rm(s,l,u){return s=kn(6,s,null,l),s.lanes=u,s}function sm(s,l,u){return l=kn(4,s.children!==null?s.children:[],s.key,l),l.lanes=u,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var $o=[],Uo=0,Gu=null,Xu=0,In=[],Hn=0,Ds=null,Fi=1,qi="";function Os(s,l){$o[Uo++]=Xu,$o[Uo++]=Gu,Gu=s,Xu=l}function zv(s,l,u){In[Hn++]=Fi,In[Hn++]=qi,In[Hn++]=Ds,Ds=s;var h=Fi;s=qi;var y=32-Ke(h)-1;h&=~(1<<y),u+=1;var b=32-Ke(l)+y;if(30<b){var T=y-y%5;b=(h&(1<<T)-1).toString(32),h>>=T,y-=T,Fi=1<<32-Ke(l)+y|u<<y|h,qi=b+s}else Fi=1<<b|u<<y|h,qi=s}function om(s){s.return!==null&&(Os(s,1),zv(s,1,0))}function am(s){for(;s===Gu;)Gu=$o[--Uo],$o[Uo]=null,Xu=$o[--Uo],$o[Uo]=null;for(;s===Ds;)Ds=In[--Hn],In[Hn]=null,qi=In[--Hn],In[Hn]=null,Fi=In[--Hn],In[Hn]=null}var ln=null,yt=null,Xe=!1,Rs=null,gi=!1,lm=Error(i(519));function js(s){var l=Error(i(418,""));throw Sl(Pn(l,s)),lm}function Bv(s){var l=s.stateNode,u=s.type,h=s.memoizedProps;switch(l[Vt]=s,l[en]=h,u){case"dialog":Ue("cancel",l),Ue("close",l);break;case"iframe":case"object":case"embed":Ue("load",l);break;case"video":case"audio":for(u=0;u<ql.length;u++)Ue(ql[u],l);break;case"source":Ue("error",l);break;case"img":case"image":case"link":Ue("error",l),Ue("load",l);break;case"details":Ue("toggle",l);break;case"input":Ue("invalid",l),zu(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Oo(l);break;case"select":Ue("invalid",l);break;case"textarea":Ue("invalid",l),ev(l,h.value,h.defaultValue,h.children),Oo(l)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||h.suppressHydrationWarning===!0||ew(l.textContent,u)?(h.popover!=null&&(Ue("beforetoggle",l),Ue("toggle",l)),h.onScroll!=null&&Ue("scroll",l),h.onScrollEnd!=null&&Ue("scrollend",l),h.onClick!=null&&(l.onclick=Ad),l=!0):l=!1,l||js(s)}function Pv(s){for(ln=s.return;ln;)switch(ln.tag){case 5:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:ln=ln.return}}function bl(s){if(s!==ln)return!1;if(!Xe)return Pv(s),Xe=!0,!1;var l=s.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Cg(s.type,s.memoizedProps)),u=!u),u&&yt&&js(s),Pv(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(l===0){yt=oi(s.nextSibling);break e}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;s=s.nextSibling}yt=null}}else l===27?(l=yt,Vr(s.type)?(s=Ng,Ng=null,yt=s):yt=l):yt=ln?oi(s.stateNode.nextSibling):null;return!0}function vl(){yt=ln=null,Xe=!1}function Vv(){var s=Rs;return s!==null&&(bn===null?bn=s:bn.push.apply(bn,s),Rs=null),s}function Sl(s){Rs===null?Rs=[s]:Rs.push(s)}var cm=H(null),_s=null,Yi=null;function Cr(s,l,u){te(cm,l._currentValue),l._currentValue=u}function Ki(s){s._currentValue=cm.current,J(cm)}function um(s,l,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),s===u)break;s=s.return}}function dm(s,l,u,h){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var b=y.dependencies;if(b!==null){var T=y.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=y;for(var V=0;V<l.length;V++)if(A.context===l[V]){b.lanes|=u,A=b.alternate,A!==null&&(A.lanes|=u),um(b.return,u,s),h||(T=null);break e}b=A.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(i(341));T.lanes|=u,b=T.alternate,b!==null&&(b.lanes|=u),um(T,u,s),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===s){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function wl(s,l,u,h){s=null;for(var y=l,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var A=y.type;Cn(y.pendingProps.value,T.value)||(s!==null?s.push(A):s=[A])}}else if(y===me.current){if(T=y.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Zl):s=[Zl])}y=y.return}s!==null&&dm(l,s,u,h),l.flags|=262144}function Wu(s){for(s=s.firstContext;s!==null;){if(!Cn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ls(s){_s=s,Yi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function tn(s){return Iv(_s,s)}function Zu(s,l){return _s===null&&Ls(s),Iv(s,l)}function Iv(s,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},Yi===null){if(s===null)throw Error(i(308));Yi=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else Yi=Yi.next=l;return u}var QR=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){l.aborted=!0,s.forEach(function(u){return u()})}},JR=t.unstable_scheduleCallback,e3=t.unstable_NormalPriority,zt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fm(){return{controller:new QR,data:new Map,refCount:0}}function El(s){s.refCount--,s.refCount===0&&JR(e3,function(){s.controller.abort()})}var Cl=null,hm=0,Fo=0,qo=null;function t3(s,l){if(Cl===null){var u=Cl=[];hm=0,Fo=mg(),qo={status:"pending",value:void 0,then:function(h){u.push(h)}}}return hm++,l.then(Hv,Hv),l}function Hv(){if(--hm===0&&Cl!==null){qo!==null&&(qo.status="fulfilled");var s=Cl;Cl=null,Fo=0,qo=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function n3(s,l){var u=[],h={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return s.then(function(){h.status="fulfilled",h.value=l;for(var y=0;y<u.length;y++)(0,u[y])(l)},function(y){for(h.status="rejected",h.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),h}var $v=R.S;R.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&t3(s,l),$v!==null&&$v(s,l)};var zs=H(null);function pm(){var s=zs.current;return s!==null?s:ot.pooledCache}function Qu(s,l){l===null?te(zs,zs.current):te(zs,l.pool)}function Uv(){var s=pm();return s===null?null:{parent:zt._currentValue,pool:s}}var kl=Error(i(460)),Fv=Error(i(474)),Ju=Error(i(542)),mm={then:function(){}};function qv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function ed(){}function Yv(s,l,u){switch(u=s[u],u===void 0?s.push(l):u!==l&&(l.then(ed,ed),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Gv(s),s;default:if(typeof l.status=="string")l.then(ed,ed);else{if(s=ot,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=l,s.status="pending",s.then(function(h){if(l.status==="pending"){var y=l;y.status="fulfilled",y.value=h}},function(h){if(l.status==="pending"){var y=l;y.status="rejected",y.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,Gv(s),s}throw Tl=l,kl}}var Tl=null;function Kv(){if(Tl===null)throw Error(i(459));var s=Tl;return Tl=null,s}function Gv(s){if(s===kl||s===Ju)throw Error(i(483))}var kr=!1;function gm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ym(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Tr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Mr(s,l,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(Qe&2)!==0){var y=h.pending;return y===null?l.next=l:(l.next=y.next,y.next=l),h.pending=l,l=Yu(s),_v(s,null,u),l}return qu(s,h,l,u),Yu(s)}function Ml(s,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var h=l.lanes;h&=s.pendingLanes,u|=h,l.lanes=u,Ja(s,u)}}function xm(s,l){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var y=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};b===null?y=b=T:b=b.next=T,u=u.next}while(u!==null);b===null?y=b=l:b=b.next=l}else y=b=l;u={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=l}var bm=!1;function Nl(){if(bm){var s=qo;if(s!==null)throw s}}function Al(s,l,u,h){bm=!1;var y=s.updateQueue;kr=!1;var b=y.firstBaseUpdate,T=y.lastBaseUpdate,A=y.shared.pending;if(A!==null){y.shared.pending=null;var V=A,X=V.next;V.next=null,T===null?b=X:T.next=X,T=V;var ie=s.alternate;ie!==null&&(ie=ie.updateQueue,A=ie.lastBaseUpdate,A!==T&&(A===null?ie.firstBaseUpdate=X:A.next=X,ie.lastBaseUpdate=V))}if(b!==null){var oe=y.baseState;T=0,ie=X=V=null,A=b;do{var Z=A.lane&-536870913,Q=Z!==A.lane;if(Q?(Ye&Z)===Z:(h&Z)===Z){Z!==0&&Z===Fo&&(bm=!0),ie!==null&&(ie=ie.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var De=s,Me=A;Z=l;var it=u;switch(Me.tag){case 1:if(De=Me.payload,typeof De=="function"){oe=De.call(it,oe,Z);break e}oe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Me.payload,Z=typeof De=="function"?De.call(it,oe,Z):De,Z==null)break e;oe=p({},oe,Z);break e;case 2:kr=!0}}Z=A.callback,Z!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=y.callbacks,Q===null?y.callbacks=[Z]:Q.push(Z))}else Q={lane:Z,tag:A.tag,payload:A.payload,callback:A.callback,next:null},ie===null?(X=ie=Q,V=oe):ie=ie.next=Q,T|=Z;if(A=A.next,A===null){if(A=y.shared.pending,A===null)break;Q=A,A=Q.next,Q.next=null,y.lastBaseUpdate=Q,y.shared.pending=null}}while(!0);ie===null&&(V=oe),y.baseState=V,y.firstBaseUpdate=X,y.lastBaseUpdate=ie,b===null&&(y.shared.lanes=0),Lr|=T,s.lanes=T,s.memoizedState=oe}}function Xv(s,l){if(typeof s!="function")throw Error(i(191,s));s.call(l)}function Wv(s,l){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Xv(u[s],l)}var Yo=H(null),td=H(0);function Zv(s,l){s=er,te(td,s),te(Yo,l),er=s|l.baseLanes}function vm(){te(td,er),te(Yo,Yo.current)}function Sm(){er=td.current,J(Yo),J(td)}var Nr=0,Ve=null,tt=null,Nt=null,nd=!1,Ko=!1,Bs=!1,id=0,Dl=0,Go=null,i3=0;function Et(){throw Error(i(321))}function wm(s,l){if(l===null)return!1;for(var u=0;u<l.length&&u<s.length;u++)if(!Cn(s[u],l[u]))return!1;return!0}function Em(s,l,u,h,y,b){return Nr=b,Ve=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,R.H=s===null||s.memoizedState===null?_1:L1,Bs=!1,b=u(h,y),Bs=!1,Ko&&(b=Jv(l,u,h,y)),Qv(s),b}function Qv(s){R.H=cd;var l=tt!==null&&tt.next!==null;if(Nr=0,Nt=tt=Ve=null,nd=!1,Dl=0,Go=null,l)throw Error(i(300));s===null||It||(s=s.dependencies,s!==null&&Wu(s)&&(It=!0))}function Jv(s,l,u,h){Ve=s;var y=0;do{if(Ko&&(Go=null),Dl=0,Ko=!1,25<=y)throw Error(i(301));if(y+=1,Nt=tt=null,s.updateQueue!=null){var b=s.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=u3,b=l(u,h)}while(Ko);return b}function r3(){var s=R.H,l=s.useState()[0];return l=typeof l.then=="function"?Ol(l):l,s=s.useState()[0],(tt!==null?tt.memoizedState:null)!==s&&(Ve.flags|=1024),l}function Cm(){var s=id!==0;return id=0,s}function km(s,l,u){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~u}function Tm(s){if(nd){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}nd=!1}Nr=0,Nt=tt=Ve=null,Ko=!1,Dl=id=0,Go=null}function yn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ve.memoizedState=Nt=s:Nt=Nt.next=s,Nt}function At(){if(tt===null){var s=Ve.alternate;s=s!==null?s.memoizedState:null}else s=tt.next;var l=Nt===null?Ve.memoizedState:Nt.next;if(l!==null)Nt=l,tt=s;else{if(s===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));tt=s,s={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Nt===null?Ve.memoizedState=Nt=s:Nt=Nt.next=s}return Nt}function Mm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(s){var l=Dl;return Dl+=1,Go===null&&(Go=[]),s=Yv(Go,s,l),l=Ve,(Nt===null?l.memoizedState:Nt.next)===null&&(l=l.alternate,R.H=l===null||l.memoizedState===null?_1:L1),s}function rd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ol(s);if(s.$$typeof===k)return tn(s)}throw Error(i(438,String(s)))}function Nm(s){var l=null,u=Ve.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var h=Ve.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(y){return y.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Mm(),Ve.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(s),h=0;h<s;h++)u[h]=ee;return l.index++,u}function Gi(s,l){return typeof l=="function"?l(s):l}function sd(s){var l=At();return Am(l,tt,s)}function Am(s,l,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var y=s.baseQueue,b=h.pending;if(b!==null){if(y!==null){var T=y.next;y.next=b.next,b.next=T}l.baseQueue=y=b,h.pending=null}if(b=s.baseState,y===null)s.memoizedState=b;else{l=y.next;var A=T=null,V=null,X=l,ie=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(Ye&oe)===oe:(Nr&oe)===oe){var Z=X.revertLane;if(Z===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===Fo&&(ie=!0);else if((Nr&Z)===Z){X=X.next,Z===Fo&&(ie=!0);continue}else oe={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(A=V=oe,T=b):V=V.next=oe,Ve.lanes|=Z,Lr|=Z;oe=X.action,Bs&&u(b,oe),b=X.hasEagerState?X.eagerState:u(b,oe)}else Z={lane:oe,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},V===null?(A=V=Z,T=b):V=V.next=Z,Ve.lanes|=oe,Lr|=oe;X=X.next}while(X!==null&&X!==l);if(V===null?T=b:V.next=A,!Cn(b,s.memoizedState)&&(It=!0,ie&&(u=qo,u!==null)))throw u;s.memoizedState=b,s.baseState=T,s.baseQueue=V,h.lastRenderedState=b}return y===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function Dm(s){var l=At(),u=l.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,y=u.pending,b=l.memoizedState;if(y!==null){u.pending=null;var T=y=y.next;do b=s(b,T.action),T=T.next;while(T!==y);Cn(b,l.memoizedState)||(It=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),u.lastRenderedState=b}return[b,h]}function e1(s,l,u){var h=Ve,y=At(),b=Xe;if(b){if(u===void 0)throw Error(i(407));u=u()}else u=l();var T=!Cn((tt||y).memoizedState,u);T&&(y.memoizedState=u,It=!0),y=y.queue;var A=i1.bind(null,h,y,s);if(Rl(2048,8,A,[s]),y.getSnapshot!==l||T||Nt!==null&&Nt.memoizedState.tag&1){if(h.flags|=2048,Xo(9,od(),n1.bind(null,h,y,u,l),null),ot===null)throw Error(i(349));b||(Nr&124)!==0||t1(h,l,u)}return u}function t1(s,l,u){s.flags|=16384,s={getSnapshot:l,value:u},l=Ve.updateQueue,l===null?(l=Mm(),Ve.updateQueue=l,l.stores=[s]):(u=l.stores,u===null?l.stores=[s]:u.push(s))}function n1(s,l,u,h){l.value=u,l.getSnapshot=h,r1(l)&&s1(s)}function i1(s,l,u){return u(function(){r1(l)&&s1(s)})}function r1(s){var l=s.getSnapshot;s=s.value;try{var u=l();return!Cn(s,u)}catch{return!0}}function s1(s){var l=Io(s,2);l!==null&&Dn(l,s,2)}function Om(s){var l=yn();if(typeof s=="function"){var u=s;if(s=u(),Bs){Ze(!0);try{u()}finally{Ze(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:s},l}function o1(s,l,u,h){return s.baseState=u,Am(s,tt,typeof h=="function"?h:Gi)}function s3(s,l,u,h,y){if(ld(s))throw Error(i(485));if(s=l.action,s!==null){var b={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};R.T!==null?u(!0):b.isTransition=!1,h(b),u=l.pending,u===null?(b.next=l.pending=b,a1(l,b)):(b.next=u.next,l.pending=u.next=b)}}function a1(s,l){var u=l.action,h=l.payload,y=s.state;if(l.isTransition){var b=R.T,T={};R.T=T;try{var A=u(y,h),V=R.S;V!==null&&V(T,A),l1(s,l,A)}catch(X){Rm(s,l,X)}finally{R.T=b}}else try{b=u(y,h),l1(s,l,b)}catch(X){Rm(s,l,X)}}function l1(s,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){c1(s,l,h)},function(h){return Rm(s,l,h)}):c1(s,l,u)}function c1(s,l,u){l.status="fulfilled",l.value=u,u1(l),s.state=u,l=s.pending,l!==null&&(u=l.next,u===l?s.pending=null:(u=u.next,l.next=u,a1(s,u)))}function Rm(s,l,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=u,u1(l),l=l.next;while(l!==h)}s.action=null}function u1(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function d1(s,l){return l}function f1(s,l){if(Xe){var u=ot.formState;if(u!==null){e:{var h=Ve;if(Xe){if(yt){t:{for(var y=yt,b=gi;y.nodeType!==8;){if(!b){y=null;break t}if(y=oi(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){yt=oi(y.nextSibling),h=y.data==="F!";break e}}js(h)}h=!1}h&&(l=u[0])}}return u=yn(),u.memoizedState=u.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:d1,lastRenderedState:l},u.queue=h,u=O1.bind(null,Ve,h),h.dispatch=u,h=Om(!1),b=Bm.bind(null,Ve,!1,h.queue),h=yn(),y={state:l,dispatch:null,action:s,pending:null},h.queue=y,u=s3.bind(null,Ve,y,b,u),y.dispatch=u,h.memoizedState=s,[l,u,!1]}function h1(s){var l=At();return p1(l,tt,s)}function p1(s,l,u){if(l=Am(s,l,d1)[0],s=sd(Gi)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Ol(l)}catch(T){throw T===kl?Ju:T}else h=l;l=At();var y=l.queue,b=y.dispatch;return u!==l.memoizedState&&(Ve.flags|=2048,Xo(9,od(),o3.bind(null,y,u),null)),[h,b,s]}function o3(s,l){s.action=l}function m1(s){var l=At(),u=tt;if(u!==null)return p1(l,u,s);At(),l=l.memoizedState,u=At();var h=u.queue.dispatch;return u.memoizedState=s,[l,h,!1]}function Xo(s,l,u,h){return s={tag:s,create:u,deps:h,inst:l,next:null},l=Ve.updateQueue,l===null&&(l=Mm(),Ve.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,l.lastEffect=s),s}function od(){return{destroy:void 0,resource:void 0}}function g1(){return At().memoizedState}function ad(s,l,u,h){var y=yn();h=h===void 0?null:h,Ve.flags|=s,y.memoizedState=Xo(1|l,od(),u,h)}function Rl(s,l,u,h){var y=At();h=h===void 0?null:h;var b=y.memoizedState.inst;tt!==null&&h!==null&&wm(h,tt.memoizedState.deps)?y.memoizedState=Xo(l,b,u,h):(Ve.flags|=s,y.memoizedState=Xo(1|l,b,u,h))}function y1(s,l){ad(8390656,8,s,l)}function x1(s,l){Rl(2048,8,s,l)}function b1(s,l){return Rl(4,2,s,l)}function v1(s,l){return Rl(4,4,s,l)}function S1(s,l){if(typeof l=="function"){s=s();var u=l(s);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function w1(s,l,u){u=u!=null?u.concat([s]):null,Rl(4,4,S1.bind(null,l,s),u)}function jm(){}function E1(s,l){var u=At();l=l===void 0?null:l;var h=u.memoizedState;return l!==null&&wm(l,h[1])?h[0]:(u.memoizedState=[s,l],s)}function C1(s,l){var u=At();l=l===void 0?null:l;var h=u.memoizedState;if(l!==null&&wm(l,h[1]))return h[0];if(h=s(),Bs){Ze(!0);try{s()}finally{Ze(!1)}}return u.memoizedState=[h,l],h}function _m(s,l,u){return u===void 0||(Nr&1073741824)!==0?s.memoizedState=l:(s.memoizedState=u,s=MS(),Ve.lanes|=s,Lr|=s,u)}function k1(s,l,u,h){return Cn(u,l)?u:Yo.current!==null?(s=_m(s,u,h),Cn(s,l)||(It=!0),s):(Nr&42)===0?(It=!0,s.memoizedState=u):(s=MS(),Ve.lanes|=s,Lr|=s,l)}function T1(s,l,u,h,y){var b=L.p;L.p=b!==0&&8>b?b:8;var T=R.T,A={};R.T=A,Bm(s,!1,l,u);try{var V=y(),X=R.S;if(X!==null&&X(A,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ie=n3(V,h);jl(s,l,ie,An(s))}else jl(s,l,h,An(s))}catch(oe){jl(s,l,{then:function(){},status:"rejected",reason:oe},An())}finally{L.p=b,R.T=T}}function a3(){}function Lm(s,l,u,h){if(s.tag!==5)throw Error(i(476));var y=M1(s).queue;T1(s,y,l,F,u===null?a3:function(){return N1(s),u(h)})}function M1(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:F},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gi,lastRenderedState:u},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function N1(s){var l=M1(s).next.queue;jl(s,l,{},An())}function zm(){return tn(Zl)}function A1(){return At().memoizedState}function D1(){return At().memoizedState}function l3(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var u=An();s=Tr(u);var h=Mr(l,s,u);h!==null&&(Dn(h,l,u),Ml(h,l,u)),l={cache:fm()},s.payload=l;return}l=l.return}}function c3(s,l,u){var h=An();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ld(s)?R1(l,u):(u=nm(s,l,u,h),u!==null&&(Dn(u,s,h),j1(u,l,h)))}function O1(s,l,u){var h=An();jl(s,l,u,h)}function jl(s,l,u,h){var y={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ld(s))R1(l,y);else{var b=s.alternate;if(s.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var T=l.lastRenderedState,A=b(T,u);if(y.hasEagerState=!0,y.eagerState=A,Cn(A,T))return qu(s,l,y,0),ot===null&&Fu(),!1}catch{}finally{}if(u=nm(s,l,y,h),u!==null)return Dn(u,s,h),j1(u,l,h),!0}return!1}function Bm(s,l,u,h){if(h={lane:2,revertLane:mg(),action:h,hasEagerState:!1,eagerState:null,next:null},ld(s)){if(l)throw Error(i(479))}else l=nm(s,u,h,2),l!==null&&Dn(l,s,2)}function ld(s){var l=s.alternate;return s===Ve||l!==null&&l===Ve}function R1(s,l){Ko=nd=!0;var u=s.pending;u===null?l.next=l:(l.next=u.next,u.next=l),s.pending=l}function j1(s,l,u){if((u&4194048)!==0){var h=l.lanes;h&=s.pendingLanes,u|=h,l.lanes=u,Ja(s,u)}}var cd={readContext:tn,use:rd,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},_1={readContext:tn,use:rd,useCallback:function(s,l){return yn().memoizedState=[s,l===void 0?null:l],s},useContext:tn,useEffect:y1,useImperativeHandle:function(s,l,u){u=u!=null?u.concat([s]):null,ad(4194308,4,S1.bind(null,l,s),u)},useLayoutEffect:function(s,l){return ad(4194308,4,s,l)},useInsertionEffect:function(s,l){ad(4,2,s,l)},useMemo:function(s,l){var u=yn();l=l===void 0?null:l;var h=s();if(Bs){Ze(!0);try{s()}finally{Ze(!1)}}return u.memoizedState=[h,l],h},useReducer:function(s,l,u){var h=yn();if(u!==void 0){var y=u(l);if(Bs){Ze(!0);try{u(l)}finally{Ze(!1)}}}else y=l;return h.memoizedState=h.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},h.queue=s,s=s.dispatch=c3.bind(null,Ve,s),[h.memoizedState,s]},useRef:function(s){var l=yn();return s={current:s},l.memoizedState=s},useState:function(s){s=Om(s);var l=s.queue,u=O1.bind(null,Ve,l);return l.dispatch=u,[s.memoizedState,u]},useDebugValue:jm,useDeferredValue:function(s,l){var u=yn();return _m(u,s,l)},useTransition:function(){var s=Om(!1);return s=T1.bind(null,Ve,s.queue,!0,!1),yn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,u){var h=Ve,y=yn();if(Xe){if(u===void 0)throw Error(i(407));u=u()}else{if(u=l(),ot===null)throw Error(i(349));(Ye&124)!==0||t1(h,l,u)}y.memoizedState=u;var b={value:u,getSnapshot:l};return y.queue=b,y1(i1.bind(null,h,b,s),[s]),h.flags|=2048,Xo(9,od(),n1.bind(null,h,b,u,l),null),u},useId:function(){var s=yn(),l=ot.identifierPrefix;if(Xe){var u=qi,h=Fi;u=(h&~(1<<32-Ke(h)-1)).toString(32)+u,l="«"+l+"R"+u,u=id++,0<u&&(l+="H"+u.toString(32)),l+="»"}else u=i3++,l="«"+l+"r"+u.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:zm,useFormState:f1,useActionState:f1,useOptimistic:function(s){var l=yn();l.memoizedState=l.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Bm.bind(null,Ve,!0,u),u.dispatch=l,[s,l]},useMemoCache:Nm,useCacheRefresh:function(){return yn().memoizedState=l3.bind(null,Ve)}},L1={readContext:tn,use:rd,useCallback:E1,useContext:tn,useEffect:x1,useImperativeHandle:w1,useInsertionEffect:b1,useLayoutEffect:v1,useMemo:C1,useReducer:sd,useRef:g1,useState:function(){return sd(Gi)},useDebugValue:jm,useDeferredValue:function(s,l){var u=At();return k1(u,tt.memoizedState,s,l)},useTransition:function(){var s=sd(Gi)[0],l=At().memoizedState;return[typeof s=="boolean"?s:Ol(s),l]},useSyncExternalStore:e1,useId:A1,useHostTransitionStatus:zm,useFormState:h1,useActionState:h1,useOptimistic:function(s,l){var u=At();return o1(u,tt,s,l)},useMemoCache:Nm,useCacheRefresh:D1},u3={readContext:tn,use:rd,useCallback:E1,useContext:tn,useEffect:x1,useImperativeHandle:w1,useInsertionEffect:b1,useLayoutEffect:v1,useMemo:C1,useReducer:Dm,useRef:g1,useState:function(){return Dm(Gi)},useDebugValue:jm,useDeferredValue:function(s,l){var u=At();return tt===null?_m(u,s,l):k1(u,tt.memoizedState,s,l)},useTransition:function(){var s=Dm(Gi)[0],l=At().memoizedState;return[typeof s=="boolean"?s:Ol(s),l]},useSyncExternalStore:e1,useId:A1,useHostTransitionStatus:zm,useFormState:m1,useActionState:m1,useOptimistic:function(s,l){var u=At();return tt!==null?o1(u,tt,s,l):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:D1},Wo=null,_l=0;function ud(s){var l=_l;return _l+=1,Wo===null&&(Wo=[]),Yv(Wo,s,l)}function Ll(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function dd(s,l){throw l.$$typeof===m?Error(i(525)):(s=Object.prototype.toString.call(l),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function z1(s){var l=s._init;return l(s._payload)}function B1(s){function l(q,$){if(s){var G=q.deletions;G===null?(q.deletions=[$],q.flags|=16):G.push($)}}function u(q,$){if(!s)return null;for(;$!==null;)l(q,$),$=$.sibling;return null}function h(q){for(var $=new Map;q!==null;)q.key!==null?$.set(q.key,q):$.set(q.index,q),q=q.sibling;return $}function y(q,$){return q=Ui(q,$),q.index=0,q.sibling=null,q}function b(q,$,G){return q.index=G,s?(G=q.alternate,G!==null?(G=G.index,G<$?(q.flags|=67108866,$):G):(q.flags|=67108866,$)):(q.flags|=1048576,$)}function T(q){return s&&q.alternate===null&&(q.flags|=67108866),q}function A(q,$,G,se){return $===null||$.tag!==6?($=rm(G,q.mode,se),$.return=q,$):($=y($,G),$.return=q,$)}function V(q,$,G,se){var xe=G.type;return xe===S?ie(q,$,G.props.children,se,G.key):$!==null&&($.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===B&&z1(xe)===$.type)?($=y($,G.props),Ll($,G),$.return=q,$):($=Ku(G.type,G.key,G.props,null,q.mode,se),Ll($,G),$.return=q,$)}function X(q,$,G,se){return $===null||$.tag!==4||$.stateNode.containerInfo!==G.containerInfo||$.stateNode.implementation!==G.implementation?($=sm(G,q.mode,se),$.return=q,$):($=y($,G.children||[]),$.return=q,$)}function ie(q,$,G,se,xe){return $===null||$.tag!==7?($=As(G,q.mode,se,xe),$.return=q,$):($=y($,G),$.return=q,$)}function oe(q,$,G){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=rm(""+$,q.mode,G),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case g:return G=Ku($.type,$.key,$.props,null,q.mode,G),Ll(G,$),G.return=q,G;case x:return $=sm($,q.mode,G),$.return=q,$;case B:var se=$._init;return $=se($._payload),oe(q,$,G)}if(U($)||W($))return $=As($,q.mode,G,null),$.return=q,$;if(typeof $.then=="function")return oe(q,ud($),G);if($.$$typeof===k)return oe(q,Zu(q,$),G);dd(q,$)}return null}function Z(q,$,G,se){var xe=$!==null?$.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return xe!==null?null:A(q,$,""+G,se);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case g:return G.key===xe?V(q,$,G,se):null;case x:return G.key===xe?X(q,$,G,se):null;case B:return xe=G._init,G=xe(G._payload),Z(q,$,G,se)}if(U(G)||W(G))return xe!==null?null:ie(q,$,G,se,null);if(typeof G.then=="function")return Z(q,$,ud(G),se);if(G.$$typeof===k)return Z(q,$,Zu(q,G),se);dd(q,G)}return null}function Q(q,$,G,se,xe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get(G)||null,A($,q,""+se,xe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case g:return q=q.get(se.key===null?G:se.key)||null,V($,q,se,xe);case x:return q=q.get(se.key===null?G:se.key)||null,X($,q,se,xe);case B:var He=se._init;return se=He(se._payload),Q(q,$,G,se,xe)}if(U(se)||W(se))return q=q.get(G)||null,ie($,q,se,xe,null);if(typeof se.then=="function")return Q(q,$,G,ud(se),xe);if(se.$$typeof===k)return Q(q,$,G,Zu($,se),xe);dd($,se)}return null}function De(q,$,G,se){for(var xe=null,He=null,be=$,Ne=$=0,$t=null;be!==null&&Ne<G.length;Ne++){be.index>Ne?($t=be,be=null):$t=be.sibling;var Ge=Z(q,be,G[Ne],se);if(Ge===null){be===null&&(be=$t);break}s&&be&&Ge.alternate===null&&l(q,be),$=b(Ge,$,Ne),He===null?xe=Ge:He.sibling=Ge,He=Ge,be=$t}if(Ne===G.length)return u(q,be),Xe&&Os(q,Ne),xe;if(be===null){for(;Ne<G.length;Ne++)be=oe(q,G[Ne],se),be!==null&&($=b(be,$,Ne),He===null?xe=be:He.sibling=be,He=be);return Xe&&Os(q,Ne),xe}for(be=h(be);Ne<G.length;Ne++)$t=Q(be,q,Ne,G[Ne],se),$t!==null&&(s&&$t.alternate!==null&&be.delete($t.key===null?Ne:$t.key),$=b($t,$,Ne),He===null?xe=$t:He.sibling=$t,He=$t);return s&&be.forEach(function(Fr){return l(q,Fr)}),Xe&&Os(q,Ne),xe}function Me(q,$,G,se){if(G==null)throw Error(i(151));for(var xe=null,He=null,be=$,Ne=$=0,$t=null,Ge=G.next();be!==null&&!Ge.done;Ne++,Ge=G.next()){be.index>Ne?($t=be,be=null):$t=be.sibling;var Fr=Z(q,be,Ge.value,se);if(Fr===null){be===null&&(be=$t);break}s&&be&&Fr.alternate===null&&l(q,be),$=b(Fr,$,Ne),He===null?xe=Fr:He.sibling=Fr,He=Fr,be=$t}if(Ge.done)return u(q,be),Xe&&Os(q,Ne),xe;if(be===null){for(;!Ge.done;Ne++,Ge=G.next())Ge=oe(q,Ge.value,se),Ge!==null&&($=b(Ge,$,Ne),He===null?xe=Ge:He.sibling=Ge,He=Ge);return Xe&&Os(q,Ne),xe}for(be=h(be);!Ge.done;Ne++,Ge=G.next())Ge=Q(be,q,Ne,Ge.value,se),Ge!==null&&(s&&Ge.alternate!==null&&be.delete(Ge.key===null?Ne:Ge.key),$=b(Ge,$,Ne),He===null?xe=Ge:He.sibling=Ge,He=Ge);return s&&be.forEach(function(dj){return l(q,dj)}),Xe&&Os(q,Ne),xe}function it(q,$,G,se){if(typeof G=="object"&&G!==null&&G.type===S&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case g:e:{for(var xe=G.key;$!==null;){if($.key===xe){if(xe=G.type,xe===S){if($.tag===7){u(q,$.sibling),se=y($,G.props.children),se.return=q,q=se;break e}}else if($.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===B&&z1(xe)===$.type){u(q,$.sibling),se=y($,G.props),Ll(se,G),se.return=q,q=se;break e}u(q,$);break}else l(q,$);$=$.sibling}G.type===S?(se=As(G.props.children,q.mode,se,G.key),se.return=q,q=se):(se=Ku(G.type,G.key,G.props,null,q.mode,se),Ll(se,G),se.return=q,q=se)}return T(q);case x:e:{for(xe=G.key;$!==null;){if($.key===xe)if($.tag===4&&$.stateNode.containerInfo===G.containerInfo&&$.stateNode.implementation===G.implementation){u(q,$.sibling),se=y($,G.children||[]),se.return=q,q=se;break e}else{u(q,$);break}else l(q,$);$=$.sibling}se=sm(G,q.mode,se),se.return=q,q=se}return T(q);case B:return xe=G._init,G=xe(G._payload),it(q,$,G,se)}if(U(G))return De(q,$,G,se);if(W(G)){if(xe=W(G),typeof xe!="function")throw Error(i(150));return G=xe.call(G),Me(q,$,G,se)}if(typeof G.then=="function")return it(q,$,ud(G),se);if(G.$$typeof===k)return it(q,$,Zu(q,G),se);dd(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,$!==null&&$.tag===6?(u(q,$.sibling),se=y($,G),se.return=q,q=se):(u(q,$),se=rm(G,q.mode,se),se.return=q,q=se),T(q)):u(q,$)}return function(q,$,G,se){try{_l=0;var xe=it(q,$,G,se);return Wo=null,xe}catch(be){if(be===kl||be===Ju)throw be;var He=kn(29,be,null,q.mode);return He.lanes=se,He.return=q,He}finally{}}}var Zo=B1(!0),P1=B1(!1),$n=H(null),yi=null;function Ar(s){var l=s.alternate;te(Bt,Bt.current&1),te($n,s),yi===null&&(l===null||Yo.current!==null||l.memoizedState!==null)&&(yi=s)}function V1(s){if(s.tag===22){if(te(Bt,Bt.current),te($n,s),yi===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(yi=s)}}else Dr()}function Dr(){te(Bt,Bt.current),te($n,$n.current)}function Xi(s){J($n),yi===s&&(yi=null),J(Bt)}var Bt=H(0);function fd(s){for(var l=s;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Mg(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Pm(s,l,u,h){l=s.memoizedState,u=u(h,l),u=u==null?l:p({},l,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Vm={enqueueSetState:function(s,l,u){s=s._reactInternals;var h=An(),y=Tr(h);y.payload=l,u!=null&&(y.callback=u),l=Mr(s,y,h),l!==null&&(Dn(l,s,h),Ml(l,s,h))},enqueueReplaceState:function(s,l,u){s=s._reactInternals;var h=An(),y=Tr(h);y.tag=1,y.payload=l,u!=null&&(y.callback=u),l=Mr(s,y,h),l!==null&&(Dn(l,s,h),Ml(l,s,h))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var u=An(),h=Tr(u);h.tag=2,l!=null&&(h.callback=l),l=Mr(s,h,u),l!==null&&(Dn(l,s,u),Ml(l,s,u))}};function I1(s,l,u,h,y,b,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,b,T):l.prototype&&l.prototype.isPureReactComponent?!yl(u,h)||!yl(y,b):!0}function H1(s,l,u,h){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,h),l.state!==s&&Vm.enqueueReplaceState(l,l.state,null)}function Ps(s,l){var u=l;if("ref"in l){u={};for(var h in l)h!=="ref"&&(u[h]=l[h])}if(s=s.defaultProps){u===l&&(u=p({},u));for(var y in s)u[y]===void 0&&(u[y]=s[y])}return u}var hd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function $1(s){hd(s)}function U1(s){console.error(s)}function F1(s){hd(s)}function pd(s,l){try{var u=s.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function q1(s,l,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Im(s,l,u){return u=Tr(u),u.tag=3,u.payload={element:null},u.callback=function(){pd(s,l)},u}function Y1(s){return s=Tr(s),s.tag=3,s}function K1(s,l,u,h){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var b=h.value;s.payload=function(){return y(b)},s.callback=function(){q1(l,u,h)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){q1(l,u,h),typeof y!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var A=h.stack;this.componentDidCatch(h.value,{componentStack:A!==null?A:""})})}function d3(s,l,u,h,y){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=u.alternate,l!==null&&wl(l,u,y,!0),u=$n.current,u!==null){switch(u.tag){case 13:return yi===null?ug():u.alternate===null&&xt===0&&(xt=3),u.flags&=-257,u.flags|=65536,u.lanes=y,h===mm?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([h]):l.add(h),fg(s,h,y)),!1;case 22:return u.flags|=65536,h===mm?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([h]):u.add(h)),fg(s,h,y)),!1}throw Error(i(435,u.tag))}return fg(s,h,y),ug(),!1}if(Xe)return l=$n.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=y,h!==lm&&(s=Error(i(422),{cause:h}),Sl(Pn(s,u)))):(h!==lm&&(l=Error(i(423),{cause:h}),Sl(Pn(l,u))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,h=Pn(h,u),y=Im(s.stateNode,h,y),xm(s,y),xt!==4&&(xt=2)),!1;var b=Error(i(520),{cause:h});if(b=Pn(b,u),$l===null?$l=[b]:$l.push(b),xt!==4&&(xt=2),l===null)return!0;h=Pn(h,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,s=y&-y,u.lanes|=s,s=Im(u.stateNode,h,s),xm(u,s),!1;case 1:if(l=u.type,b=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zr===null||!zr.has(b))))return u.flags|=65536,y&=-y,u.lanes|=y,y=Y1(y),K1(y,s,u,h),xm(u,y),!1}u=u.return}while(u!==null);return!1}var G1=Error(i(461)),It=!1;function Kt(s,l,u,h){l.child=s===null?P1(l,null,u,h):Zo(l,s.child,u,h)}function X1(s,l,u,h,y){u=u.render;var b=l.ref;if("ref"in h){var T={};for(var A in h)A!=="ref"&&(T[A]=h[A])}else T=h;return Ls(l),h=Em(s,l,u,T,b,y),A=Cm(),s!==null&&!It?(km(s,l,y),Wi(s,l,y)):(Xe&&A&&om(l),l.flags|=1,Kt(s,l,h,y),l.child)}function W1(s,l,u,h,y){if(s===null){var b=u.type;return typeof b=="function"&&!im(b)&&b.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=b,Z1(s,l,b,h,y)):(s=Ku(u.type,null,h,l,l.mode,y),s.ref=l.ref,s.return=l,l.child=s)}if(b=s.child,!Gm(s,y)){var T=b.memoizedProps;if(u=u.compare,u=u!==null?u:yl,u(T,h)&&s.ref===l.ref)return Wi(s,l,y)}return l.flags|=1,s=Ui(b,h),s.ref=l.ref,s.return=l,l.child=s}function Z1(s,l,u,h,y){if(s!==null){var b=s.memoizedProps;if(yl(b,h)&&s.ref===l.ref)if(It=!1,l.pendingProps=h=b,Gm(s,y))(s.flags&131072)!==0&&(It=!0);else return l.lanes=s.lanes,Wi(s,l,y)}return Hm(s,l,u,h,y)}function Q1(s,l,u){var h=l.pendingProps,y=h.children,b=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((l.flags&128)!==0){if(h=b!==null?b.baseLanes|u:u,s!==null){for(y=l.child=s.child,b=0;y!==null;)b=b|y.lanes|y.childLanes,y=y.sibling;l.childLanes=b&~h}else l.childLanes=0,l.child=null;return J1(s,l,h,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Qu(l,b!==null?b.cachePool:null),b!==null?Zv(l,b):vm(),V1(l);else return l.lanes=l.childLanes=536870912,J1(s,l,b!==null?b.baseLanes|u:u,u)}else b!==null?(Qu(l,b.cachePool),Zv(l,b),Dr(),l.memoizedState=null):(s!==null&&Qu(l,null),vm(),Dr());return Kt(s,l,y,u),l.child}function J1(s,l,u,h){var y=pm();return y=y===null?null:{parent:zt._currentValue,pool:y},l.memoizedState={baseLanes:u,cachePool:y},s!==null&&Qu(l,null),vm(),V1(l),s!==null&&wl(s,l,h,!0),null}function md(s,l){var u=l.ref;if(u===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(l.flags|=4194816)}}function Hm(s,l,u,h,y){return Ls(l),u=Em(s,l,u,h,void 0,y),h=Cm(),s!==null&&!It?(km(s,l,y),Wi(s,l,y)):(Xe&&h&&om(l),l.flags|=1,Kt(s,l,u,y),l.child)}function eS(s,l,u,h,y,b){return Ls(l),l.updateQueue=null,u=Jv(l,h,u,y),Qv(s),h=Cm(),s!==null&&!It?(km(s,l,b),Wi(s,l,b)):(Xe&&h&&om(l),l.flags|=1,Kt(s,l,u,b),l.child)}function tS(s,l,u,h,y){if(Ls(l),l.stateNode===null){var b=Ho,T=u.contextType;typeof T=="object"&&T!==null&&(b=tn(T)),b=new u(h,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Vm,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=h,b.state=l.memoizedState,b.refs={},gm(l),T=u.contextType,b.context=typeof T=="object"&&T!==null?tn(T):Ho,b.state=l.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Pm(l,u,T,h),b.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&Vm.enqueueReplaceState(b,b.state,null),Al(l,h,b,y),Nl(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(s===null){b=l.stateNode;var A=l.memoizedProps,V=Ps(u,A);b.props=V;var X=b.context,ie=u.contextType;T=Ho,typeof ie=="object"&&ie!==null&&(T=tn(ie));var oe=u.getDerivedStateFromProps;ie=typeof oe=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=l.pendingProps!==A,ie||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||X!==T)&&H1(l,b,h,T),kr=!1;var Z=l.memoizedState;b.state=Z,Al(l,h,b,y),Nl(),X=l.memoizedState,A||Z!==X||kr?(typeof oe=="function"&&(Pm(l,u,oe,h),X=l.memoizedState),(V=kr||I1(l,u,V,h,Z,X,T))?(ie||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=X),b.props=h,b.state=X,b.context=T,h=V):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{b=l.stateNode,ym(s,l),T=l.memoizedProps,ie=Ps(u,T),b.props=ie,oe=l.pendingProps,Z=b.context,X=u.contextType,V=Ho,typeof X=="object"&&X!==null&&(V=tn(X)),A=u.getDerivedStateFromProps,(X=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==oe||Z!==V)&&H1(l,b,h,V),kr=!1,Z=l.memoizedState,b.state=Z,Al(l,h,b,y),Nl();var Q=l.memoizedState;T!==oe||Z!==Q||kr||s!==null&&s.dependencies!==null&&Wu(s.dependencies)?(typeof A=="function"&&(Pm(l,u,A,h),Q=l.memoizedState),(ie=kr||I1(l,u,ie,h,Z,Q,V)||s!==null&&s.dependencies!==null&&Wu(s.dependencies))?(X||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,Q,V),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,Q,V)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=Q),b.props=h,b.state=Q,b.context=V,h=ie):(typeof b.componentDidUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&Z===s.memoizedState||(l.flags|=1024),h=!1)}return b=h,md(s,l),h=(l.flags&128)!==0,b||h?(b=l.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,s!==null&&h?(l.child=Zo(l,s.child,null,y),l.child=Zo(l,null,u,y)):Kt(s,l,u,y),l.memoizedState=b.state,s=l.child):s=Wi(s,l,y),s}function nS(s,l,u,h){return vl(),l.flags|=256,Kt(s,l,u,h),l.child}var $m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Um(s){return{baseLanes:s,cachePool:Uv()}}function Fm(s,l,u){return s=s!==null?s.childLanes&~u:0,l&&(s|=Un),s}function iS(s,l,u){var h=l.pendingProps,y=!1,b=(l.flags&128)!==0,T;if((T=b)||(T=s!==null&&s.memoizedState===null?!1:(Bt.current&2)!==0),T&&(y=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,s===null){if(Xe){if(y?Ar(l):Dr(),Xe){var A=yt,V;if(V=A){e:{for(V=A,A=gi;V.nodeType!==8;){if(!A){A=null;break e}if(V=oi(V.nextSibling),V===null){A=null;break e}}A=V}A!==null?(l.memoizedState={dehydrated:A,treeContext:Ds!==null?{id:Fi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},V=kn(18,null,null,0),V.stateNode=A,V.return=l,l.child=V,ln=l,yt=null,V=!0):V=!1}V||js(l)}if(A=l.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return Mg(A)?l.lanes=32:l.lanes=536870912,null;Xi(l)}return A=h.children,h=h.fallback,y?(Dr(),y=l.mode,A=gd({mode:"hidden",children:A},y),h=As(h,y,u,null),A.return=l,h.return=l,A.sibling=h,l.child=A,y=l.child,y.memoizedState=Um(u),y.childLanes=Fm(s,T,u),l.memoizedState=$m,h):(Ar(l),qm(l,A))}if(V=s.memoizedState,V!==null&&(A=V.dehydrated,A!==null)){if(b)l.flags&256?(Ar(l),l.flags&=-257,l=Ym(s,l,u)):l.memoizedState!==null?(Dr(),l.child=s.child,l.flags|=128,l=null):(Dr(),y=h.fallback,A=l.mode,h=gd({mode:"visible",children:h.children},A),y=As(y,A,u,null),y.flags|=2,h.return=l,y.return=l,h.sibling=y,l.child=h,Zo(l,s.child,null,u),h=l.child,h.memoizedState=Um(u),h.childLanes=Fm(s,T,u),l.memoizedState=$m,l=y);else if(Ar(l),Mg(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var X=T.dgst;T=X,h=Error(i(419)),h.stack="",h.digest=T,Sl({value:h,source:null,stack:null}),l=Ym(s,l,u)}else if(It||wl(s,l,u,!1),T=(u&s.childLanes)!==0,It||T){if(T=ot,T!==null&&(h=u&-u,h=(h&42)!==0?1:el(h),h=(h&(T.suspendedLanes|u))!==0?0:h,h!==0&&h!==V.retryLane))throw V.retryLane=h,Io(s,h),Dn(T,s,h),G1;A.data==="$?"||ug(),l=Ym(s,l,u)}else A.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=V.treeContext,yt=oi(A.nextSibling),ln=l,Xe=!0,Rs=null,gi=!1,s!==null&&(In[Hn++]=Fi,In[Hn++]=qi,In[Hn++]=Ds,Fi=s.id,qi=s.overflow,Ds=l),l=qm(l,h.children),l.flags|=4096);return l}return y?(Dr(),y=h.fallback,A=l.mode,V=s.child,X=V.sibling,h=Ui(V,{mode:"hidden",children:h.children}),h.subtreeFlags=V.subtreeFlags&65011712,X!==null?y=Ui(X,y):(y=As(y,A,u,null),y.flags|=2),y.return=l,h.return=l,h.sibling=y,l.child=h,h=y,y=l.child,A=s.child.memoizedState,A===null?A=Um(u):(V=A.cachePool,V!==null?(X=zt._currentValue,V=V.parent!==X?{parent:X,pool:X}:V):V=Uv(),A={baseLanes:A.baseLanes|u,cachePool:V}),y.memoizedState=A,y.childLanes=Fm(s,T,u),l.memoizedState=$m,h):(Ar(l),u=s.child,s=u.sibling,u=Ui(u,{mode:"visible",children:h.children}),u.return=l,u.sibling=null,s!==null&&(T=l.deletions,T===null?(l.deletions=[s],l.flags|=16):T.push(s)),l.child=u,l.memoizedState=null,u)}function qm(s,l){return l=gd({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function gd(s,l){return s=kn(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ym(s,l,u){return Zo(l,s.child,null,u),s=qm(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function rS(s,l,u){s.lanes|=l;var h=s.alternate;h!==null&&(h.lanes|=l),um(s.return,l,u)}function Km(s,l,u,h,y){var b=s.memoizedState;b===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:y}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=u,b.tailMode=y)}function sS(s,l,u){var h=l.pendingProps,y=h.revealOrder,b=h.tail;if(Kt(s,l,h.children,u),h=Bt.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&rS(s,u,l);else if(s.tag===19)rS(s,u,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(te(Bt,h),y){case"forwards":for(u=l.child,y=null;u!==null;)s=u.alternate,s!==null&&fd(s)===null&&(y=u),u=u.sibling;u=y,u===null?(y=l.child,l.child=null):(y=u.sibling,u.sibling=null),Km(l,!1,y,u,b);break;case"backwards":for(u=null,y=l.child,l.child=null;y!==null;){if(s=y.alternate,s!==null&&fd(s)===null){l.child=y;break}s=y.sibling,y.sibling=u,u=y,y=s}Km(l,!0,u,null,b);break;case"together":Km(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Wi(s,l,u){if(s!==null&&(l.dependencies=s.dependencies),Lr|=l.lanes,(u&l.childLanes)===0)if(s!==null){if(wl(s,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(i(153));if(l.child!==null){for(s=l.child,u=Ui(s,s.pendingProps),l.child=u,u.return=l;s.sibling!==null;)s=s.sibling,u=u.sibling=Ui(s,s.pendingProps),u.return=l;u.sibling=null}return l.child}function Gm(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Wu(s)))}function f3(s,l,u){switch(l.tag){case 3:le(l,l.stateNode.containerInfo),Cr(l,zt,s.memoizedState.cache),vl();break;case 27:case 5:Ie(l);break;case 4:le(l,l.stateNode.containerInfo);break;case 10:Cr(l,l.type,l.memoizedProps.value);break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(Ar(l),l.flags|=128,null):(u&l.child.childLanes)!==0?iS(s,l,u):(Ar(l),s=Wi(s,l,u),s!==null?s.sibling:null);Ar(l);break;case 19:var y=(s.flags&128)!==0;if(h=(u&l.childLanes)!==0,h||(wl(s,l,u,!1),h=(u&l.childLanes)!==0),y){if(h)return sS(s,l,u);l.flags|=128}if(y=l.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),te(Bt,Bt.current),h)break;return null;case 22:case 23:return l.lanes=0,Q1(s,l,u);case 24:Cr(l,zt,s.memoizedState.cache)}return Wi(s,l,u)}function oS(s,l,u){if(s!==null)if(s.memoizedProps!==l.pendingProps)It=!0;else{if(!Gm(s,u)&&(l.flags&128)===0)return It=!1,f3(s,l,u);It=(s.flags&131072)!==0}else It=!1,Xe&&(l.flags&1048576)!==0&&zv(l,Xu,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var h=l.elementType,y=h._init;if(h=y(h._payload),l.type=h,typeof h=="function")im(h)?(s=Ps(h,s),l.tag=1,l=tS(null,l,h,s,u)):(l.tag=0,l=Hm(null,l,h,s,u));else{if(h!=null){if(y=h.$$typeof,y===M){l.tag=11,l=X1(null,l,h,s,u);break e}else if(y===P){l.tag=14,l=W1(null,l,h,s,u);break e}}throw l=z(h)||h,Error(i(306,l,""))}}return l;case 0:return Hm(s,l,l.type,l.pendingProps,u);case 1:return h=l.type,y=Ps(h,l.pendingProps),tS(s,l,h,y,u);case 3:e:{if(le(l,l.stateNode.containerInfo),s===null)throw Error(i(387));h=l.pendingProps;var b=l.memoizedState;y=b.element,ym(s,l),Al(l,h,null,u);var T=l.memoizedState;if(h=T.cache,Cr(l,zt,h),h!==b.cache&&dm(l,[zt],u,!0),Nl(),h=T.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=nS(s,l,h,u);break e}else if(h!==y){y=Pn(Error(i(424)),l),Sl(y),l=nS(s,l,h,u);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(yt=oi(s.firstChild),ln=l,Xe=!0,Rs=null,gi=!0,u=P1(l,null,h,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(vl(),h===y){l=Wi(s,l,u);break e}Kt(s,l,h,u)}l=l.child}return l;case 26:return md(s,l),s===null?(u=uw(l.type,null,l.pendingProps,null))?l.memoizedState=u:Xe||(u=l.type,s=l.pendingProps,h=Dd(fe.current).createElement(u),h[Vt]=l,h[en]=s,Xt(h,u,s),Mt(h),l.stateNode=h):l.memoizedState=uw(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Ie(l),s===null&&Xe&&(h=l.stateNode=aw(l.type,l.pendingProps,fe.current),ln=l,gi=!0,y=yt,Vr(l.type)?(Ng=y,yt=oi(h.firstChild)):yt=y),Kt(s,l,l.pendingProps.children,u),md(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Xe&&((y=h=yt)&&(h=I3(h,l.type,l.pendingProps,gi),h!==null?(l.stateNode=h,ln=l,yt=oi(h.firstChild),gi=!1,y=!0):y=!1),y||js(l)),Ie(l),y=l.type,b=l.pendingProps,T=s!==null?s.memoizedProps:null,h=b.children,Cg(y,b)?h=null:T!==null&&Cg(y,T)&&(l.flags|=32),l.memoizedState!==null&&(y=Em(s,l,r3,null,null,u),Zl._currentValue=y),md(s,l),Kt(s,l,h,u),l.child;case 6:return s===null&&Xe&&((s=u=yt)&&(u=H3(u,l.pendingProps,gi),u!==null?(l.stateNode=u,ln=l,yt=null,s=!0):s=!1),s||js(l)),null;case 13:return iS(s,l,u);case 4:return le(l,l.stateNode.containerInfo),h=l.pendingProps,s===null?l.child=Zo(l,null,h,u):Kt(s,l,h,u),l.child;case 11:return X1(s,l,l.type,l.pendingProps,u);case 7:return Kt(s,l,l.pendingProps,u),l.child;case 8:return Kt(s,l,l.pendingProps.children,u),l.child;case 12:return Kt(s,l,l.pendingProps.children,u),l.child;case 10:return h=l.pendingProps,Cr(l,l.type,h.value),Kt(s,l,h.children,u),l.child;case 9:return y=l.type._context,h=l.pendingProps.children,Ls(l),y=tn(y),h=h(y),l.flags|=1,Kt(s,l,h,u),l.child;case 14:return W1(s,l,l.type,l.pendingProps,u);case 15:return Z1(s,l,l.type,l.pendingProps,u);case 19:return sS(s,l,u);case 31:return h=l.pendingProps,u=l.mode,h={mode:h.mode,children:h.children},s===null?(u=gd(h,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=Ui(s.child,h),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return Q1(s,l,u);case 24:return Ls(l),h=tn(zt),s===null?(y=pm(),y===null&&(y=ot,b=fm(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=u),y=b),l.memoizedState={parent:h,cache:y},gm(l),Cr(l,zt,y)):((s.lanes&u)!==0&&(ym(s,l),Al(l,null,null,u),Nl()),y=s.memoizedState,b=l.memoizedState,y.parent!==h?(y={parent:h,cache:h},l.memoizedState=y,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=y),Cr(l,zt,h)):(h=b.cache,Cr(l,zt,h),h!==y.cache&&dm(l,[zt],u,!0))),Kt(s,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Zi(s){s.flags|=4}function aS(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!mw(l)){if(l=$n.current,l!==null&&((Ye&4194048)===Ye?yi!==null:(Ye&62914560)!==Ye&&(Ye&536870912)===0||l!==yi))throw Tl=mm,Fv;s.flags|=8192}}function yd(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Tu():536870912,s.lanes|=l,ta|=l)}function zl(s,l){if(!Xe)switch(s.tailMode){case"hidden":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function ht(s){var l=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(l)for(var y=s.child;y!==null;)u|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)u|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=h,s.childLanes=u,l}function h3(s,l,u){var h=l.pendingProps;switch(am(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(l),null;case 1:return ht(l),null;case 3:return u=l.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Ki(zt),ye(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(bl(l)?Zi(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Vv())),ht(l),null;case 26:return u=l.memoizedState,s===null?(Zi(l),u!==null?(ht(l),aS(l,u)):(ht(l),l.flags&=-16777217)):u?u!==s.memoizedState?(Zi(l),ht(l),aS(l,u)):(ht(l),l.flags&=-16777217):(s.memoizedProps!==h&&Zi(l),ht(l),l.flags&=-16777217),null;case 27:Fe(l),u=fe.current;var y=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Zi(l);else{if(!h){if(l.stateNode===null)throw Error(i(166));return ht(l),null}s=re.current,bl(l)?Bv(l):(s=aw(y,h,u),l.stateNode=s,Zi(l))}return ht(l),null;case 5:if(Fe(l),u=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==h&&Zi(l);else{if(!h){if(l.stateNode===null)throw Error(i(166));return ht(l),null}if(s=re.current,bl(l))Bv(l);else{switch(y=Dd(fe.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?y.createElement("select",{is:h.is}):y.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?y.createElement(u,{is:h.is}):y.createElement(u)}}s[Vt]=l,s[en]=h;e:for(y=l.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===l)break e;for(;y.sibling===null;){if(y.return===null||y.return===l)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}l.stateNode=s;e:switch(Xt(s,u,h),u){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Zi(l)}}return ht(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==h&&Zi(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(i(166));if(s=fe.current,bl(l)){if(s=l.stateNode,u=l.memoizedProps,h=null,y=ln,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}s[Vt]=l,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||ew(s.nodeValue,u)),s||js(l)}else s=Dd(s).createTextNode(h),s[Vt]=l,l.stateNode=s}return ht(l),null;case 13:if(h=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=bl(l),h!==null&&h.dehydrated!==null){if(s===null){if(!y)throw Error(i(318));if(y=l.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Vt]=l}else vl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;ht(l),y=!1}else y=Vv(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return l.flags&256?(Xi(l),l):(Xi(l),null)}if(Xi(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=h!==null,s=s!==null&&s.memoizedState!==null,u){h=l.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool);var b=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==y&&(h.flags|=2048)}return u!==s&&u&&(l.child.flags|=8192),yd(l,l.updateQueue),ht(l),null;case 4:return ye(),s===null&&bg(l.stateNode.containerInfo),ht(l),null;case 10:return Ki(l.type),ht(l),null;case 19:if(J(Bt),y=l.memoizedState,y===null)return ht(l),null;if(h=(l.flags&128)!==0,b=y.rendering,b===null)if(h)zl(y,!1);else{if(xt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(b=fd(s),b!==null){for(l.flags|=128,zl(y,!1),s=b.updateQueue,l.updateQueue=s,yd(l,s),l.subtreeFlags=0,s=u,u=l.child;u!==null;)Lv(u,s),u=u.sibling;return te(Bt,Bt.current&1|2),l.child}s=s.sibling}y.tail!==null&&lt()>vd&&(l.flags|=128,h=!0,zl(y,!1),l.lanes=4194304)}else{if(!h)if(s=fd(b),s!==null){if(l.flags|=128,h=!0,s=s.updateQueue,l.updateQueue=s,yd(l,s),zl(y,!0),y.tail===null&&y.tailMode==="hidden"&&!b.alternate&&!Xe)return ht(l),null}else 2*lt()-y.renderingStartTime>vd&&u!==536870912&&(l.flags|=128,h=!0,zl(y,!1),l.lanes=4194304);y.isBackwards?(b.sibling=l.child,l.child=b):(s=y.last,s!==null?s.sibling=b:l.child=b,y.last=b)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=lt(),l.sibling=null,s=Bt.current,te(Bt,h?s&1|2:s&1),l):(ht(l),null);case 22:case 23:return Xi(l),Sm(),h=l.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(u&536870912)!==0&&(l.flags&128)===0&&(ht(l),l.subtreeFlags&6&&(l.flags|=8192)):ht(l),u=l.updateQueue,u!==null&&yd(l,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==u&&(l.flags|=2048),s!==null&&J(zs),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),Ki(zt),ht(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function p3(s,l){switch(am(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return Ki(zt),ye(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Fe(l),null;case 13:if(Xi(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(i(340));vl()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return J(Bt),null;case 4:return ye(),null;case 10:return Ki(l.type),null;case 22:case 23:return Xi(l),Sm(),s!==null&&J(zs),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return Ki(zt),null;case 25:return null;default:return null}}function lS(s,l){switch(am(l),l.tag){case 3:Ki(zt),ye();break;case 26:case 27:case 5:Fe(l);break;case 4:ye();break;case 13:Xi(l);break;case 19:J(Bt);break;case 10:Ki(l.type);break;case 22:case 23:Xi(l),Sm(),s!==null&&J(zs);break;case 24:Ki(zt)}}function Bl(s,l){try{var u=l.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var y=h.next;u=y;do{if((u.tag&s)===s){h=void 0;var b=u.create,T=u.inst;h=b(),T.destroy=h}u=u.next}while(u!==y)}}catch(A){rt(l,l.return,A)}}function Or(s,l,u){try{var h=l.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var b=y.next;h=b;do{if((h.tag&s)===s){var T=h.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,y=l;var V=u,X=A;try{X()}catch(ie){rt(y,V,ie)}}}h=h.next}while(h!==b)}}catch(ie){rt(l,l.return,ie)}}function cS(s){var l=s.updateQueue;if(l!==null){var u=s.stateNode;try{Wv(l,u)}catch(h){rt(s,s.return,h)}}}function uS(s,l,u){u.props=Ps(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){rt(s,l,h)}}function Pl(s,l){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(y){rt(s,l,y)}}function xi(s,l){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(y){rt(s,l,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){rt(s,l,y)}else u.current=null}function dS(s){var l=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(y){rt(s,s.return,y)}}function Xm(s,l,u){try{var h=s.stateNode;L3(h,s.type,u,l),h[en]=l}catch(y){rt(s,s.return,y)}}function fS(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Vr(s.type)||s.tag===4}function Wm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||fS(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Vr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Zm(s,l,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(s),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Ad));else if(h!==4&&(h===27&&Vr(s.type)&&(u=s.stateNode,l=null),s=s.child,s!==null))for(Zm(s,l,u),s=s.sibling;s!==null;)Zm(s,l,u),s=s.sibling}function xd(s,l,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,l?u.insertBefore(s,l):u.appendChild(s);else if(h!==4&&(h===27&&Vr(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(xd(s,l,u),s=s.sibling;s!==null;)xd(s,l,u),s=s.sibling}function hS(s){var l=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,y=l.attributes;y.length;)l.removeAttributeNode(y[0]);Xt(l,h,u),l[Vt]=s,l[en]=u}catch(b){rt(s,s.return,b)}}var Qi=!1,Ct=!1,Qm=!1,pS=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function m3(s,l){if(s=s.containerInfo,wg=zd,s=kv(s),Wp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var y=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var T=0,A=-1,V=-1,X=0,ie=0,oe=s,Z=null;t:for(;;){for(var Q;oe!==u||y!==0&&oe.nodeType!==3||(A=T+y),oe!==b||h!==0&&oe.nodeType!==3||(V=T+h),oe.nodeType===3&&(T+=oe.nodeValue.length),(Q=oe.firstChild)!==null;)Z=oe,oe=Q;for(;;){if(oe===s)break t;if(Z===u&&++X===y&&(A=T),Z===b&&++ie===h&&(V=T),(Q=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=Q}u=A===-1||V===-1?null:{start:A,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(Eg={focusedElem:s,selectionRange:u},zd=!1,Ht=l;Ht!==null;)if(l=Ht,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,Ht=s;else for(;Ht!==null;){switch(l=Ht,b=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&b!==null){s=void 0,u=l,y=b.memoizedProps,b=b.memoizedState,h=u.stateNode;try{var De=Ps(u.type,y,u.elementType===u.type);s=h.getSnapshotBeforeUpdate(De,b),h.__reactInternalSnapshotBeforeUpdate=s}catch(Me){rt(u,u.return,Me)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,u=s.nodeType,u===9)Tg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=l.sibling,s!==null){s.return=l.return,Ht=s;break}Ht=l.return}}function mS(s,l,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Rr(s,u),h&4&&Bl(5,u);break;case 1:if(Rr(s,u),h&4)if(s=u.stateNode,l===null)try{s.componentDidMount()}catch(T){rt(u,u.return,T)}else{var y=Ps(u.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(y,l,s.__reactInternalSnapshotBeforeUpdate)}catch(T){rt(u,u.return,T)}}h&64&&cS(u),h&512&&Pl(u,u.return);break;case 3:if(Rr(s,u),h&64&&(s=u.updateQueue,s!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{Wv(s,l)}catch(T){rt(u,u.return,T)}}break;case 27:l===null&&h&4&&hS(u);case 26:case 5:Rr(s,u),l===null&&h&4&&dS(u),h&512&&Pl(u,u.return);break;case 12:Rr(s,u);break;case 13:Rr(s,u),h&4&&xS(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=C3.bind(null,u),$3(s,u))));break;case 22:if(h=u.memoizedState!==null||Qi,!h){l=l!==null&&l.memoizedState!==null||Ct,y=Qi;var b=Ct;Qi=h,(Ct=l)&&!b?jr(s,u,(u.subtreeFlags&8772)!==0):Rr(s,u),Qi=y,Ct=b}break;case 30:break;default:Rr(s,u)}}function gS(s){var l=s.alternate;l!==null&&(s.alternate=null,gS(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&il(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var ct=null,xn=!1;function Ji(s,l,u){for(u=u.child;u!==null;)yS(s,l,u),u=u.sibling}function yS(s,l,u){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(we,u)}catch{}switch(u.tag){case 26:Ct||xi(u,l),Ji(s,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ct||xi(u,l);var h=ct,y=xn;Vr(u.type)&&(ct=u.stateNode,xn=!1),Ji(s,l,u),Kl(u.stateNode),ct=h,xn=y;break;case 5:Ct||xi(u,l);case 6:if(h=ct,y=xn,ct=null,Ji(s,l,u),ct=h,xn=y,ct!==null)if(xn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(u.stateNode)}catch(b){rt(u,l,b)}else try{ct.removeChild(u.stateNode)}catch(b){rt(u,l,b)}break;case 18:ct!==null&&(xn?(s=ct,sw(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),tc(s)):sw(ct,u.stateNode));break;case 4:h=ct,y=xn,ct=u.stateNode.containerInfo,xn=!0,Ji(s,l,u),ct=h,xn=y;break;case 0:case 11:case 14:case 15:Ct||Or(2,u,l),Ct||Or(4,u,l),Ji(s,l,u);break;case 1:Ct||(xi(u,l),h=u.stateNode,typeof h.componentWillUnmount=="function"&&uS(u,l,h)),Ji(s,l,u);break;case 21:Ji(s,l,u);break;case 22:Ct=(h=Ct)||u.memoizedState!==null,Ji(s,l,u),Ct=h;break;default:Ji(s,l,u)}}function xS(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{tc(s)}catch(u){rt(l,l.return,u)}}function g3(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new pS),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new pS),l;default:throw Error(i(435,s.tag))}}function Jm(s,l){var u=g3(s);l.forEach(function(h){var y=k3.bind(null,s,h);u.has(h)||(u.add(h),h.then(y,y))})}function Tn(s,l){var u=l.deletions;if(u!==null)for(var h=0;h<u.length;h++){var y=u[h],b=s,T=l,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Vr(A.type)){ct=A.stateNode,xn=!1;break e}break;case 5:ct=A.stateNode,xn=!1;break e;case 3:case 4:ct=A.stateNode.containerInfo,xn=!0;break e}A=A.return}if(ct===null)throw Error(i(160));yS(b,T,y),ct=null,xn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)bS(l,s),l=l.sibling}var si=null;function bS(s,l){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Tn(l,s),Mn(s),h&4&&(Or(3,s,s.return),Bl(3,s),Or(5,s,s.return));break;case 1:Tn(l,s),Mn(s),h&512&&(Ct||u===null||xi(u,u.return)),h&64&&Qi&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var y=si;if(Tn(l,s),Mn(s),h&512&&(Ct||u===null||xi(u,u.return)),h&4){var b=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Cs]||b[Vt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(h),y.head.insertBefore(b,y.querySelector("head > title"))),Xt(b,h,u),b[Vt]=s,Mt(b),h=b;break e;case"link":var T=hw("link","href",y).get(h+(u.href||""));if(T){for(var A=0;A<T.length;A++)if(b=T[A],b.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&b.getAttribute("rel")===(u.rel==null?null:u.rel)&&b.getAttribute("title")===(u.title==null?null:u.title)&&b.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(A,1);break t}}b=y.createElement(h),Xt(b,h,u),y.head.appendChild(b);break;case"meta":if(T=hw("meta","content",y).get(h+(u.content||""))){for(A=0;A<T.length;A++)if(b=T[A],b.getAttribute("content")===(u.content==null?null:""+u.content)&&b.getAttribute("name")===(u.name==null?null:u.name)&&b.getAttribute("property")===(u.property==null?null:u.property)&&b.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&b.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(A,1);break t}}b=y.createElement(h),Xt(b,h,u),y.head.appendChild(b);break;default:throw Error(i(468,h))}b[Vt]=s,Mt(b),h=b}s.stateNode=h}else pw(y,s.type,s.stateNode);else s.stateNode=fw(y,h,s.memoizedProps);else b!==h?(b===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):b.count--,h===null?pw(y,s.type,s.stateNode):fw(y,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Xm(s,s.memoizedProps,u.memoizedProps)}break;case 27:Tn(l,s),Mn(s),h&512&&(Ct||u===null||xi(u,u.return)),u!==null&&h&4&&Xm(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Tn(l,s),Mn(s),h&512&&(Ct||u===null||xi(u,u.return)),s.flags&32){y=s.stateNode;try{jo(y,"")}catch(Q){rt(s,s.return,Q)}}h&4&&s.stateNode!=null&&(y=s.memoizedProps,Xm(s,y,u!==null?u.memoizedProps:y)),h&1024&&(Qm=!0);break;case 6:if(Tn(l,s),Mn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Q){rt(s,s.return,Q)}}break;case 3:if(jd=null,y=si,si=Od(l.containerInfo),Tn(l,s),si=y,Mn(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{tc(l.containerInfo)}catch(Q){rt(s,s.return,Q)}Qm&&(Qm=!1,vS(s));break;case 4:h=si,si=Od(s.stateNode.containerInfo),Tn(l,s),Mn(s),si=h;break;case 12:Tn(l,s),Mn(s);break;case 13:Tn(l,s),Mn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(sg=lt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Jm(s,h)));break;case 22:y=s.memoizedState!==null;var V=u!==null&&u.memoizedState!==null,X=Qi,ie=Ct;if(Qi=X||y,Ct=ie||V,Tn(l,s),Ct=ie,Qi=X,Mn(s),h&8192)e:for(l=s.stateNode,l._visibility=y?l._visibility&-2:l._visibility|1,y&&(u===null||V||Qi||Ct||Vs(s)),u=null,l=s;;){if(l.tag===5||l.tag===26){if(u===null){V=u=l;try{if(b=V.stateNode,y)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=V.stateNode;var oe=V.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;A.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Q){rt(V,V.return,Q)}}}else if(l.tag===6){if(u===null){V=l;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(Q){rt(V,V.return,Q)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Jm(s,u))));break;case 19:Tn(l,s),Mn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Jm(s,h)));break;case 30:break;case 21:break;default:Tn(l,s),Mn(s)}}function Mn(s){var l=s.flags;if(l&2){try{for(var u,h=s.return;h!==null;){if(fS(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,b=Wm(s);xd(s,b,y);break;case 5:var T=u.stateNode;u.flags&32&&(jo(T,""),u.flags&=-33);var A=Wm(s);xd(s,A,T);break;case 3:case 4:var V=u.stateNode.containerInfo,X=Wm(s);Zm(s,X,V);break;default:throw Error(i(161))}}catch(ie){rt(s,s.return,ie)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function vS(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;vS(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Rr(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)mS(s,l.alternate,l),l=l.sibling}function Vs(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Or(4,l,l.return),Vs(l);break;case 1:xi(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&uS(l,l.return,u),Vs(l);break;case 27:Kl(l.stateNode);case 26:case 5:xi(l,l.return),Vs(l);break;case 22:l.memoizedState===null&&Vs(l);break;case 30:Vs(l);break;default:Vs(l)}s=s.sibling}}function jr(s,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,y=s,b=l,T=b.flags;switch(b.tag){case 0:case 11:case 15:jr(y,b,u),Bl(4,b);break;case 1:if(jr(y,b,u),h=b,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(X){rt(h,h.return,X)}if(h=b,y=h.updateQueue,y!==null){var A=h.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Xv(V[y],A)}catch(X){rt(h,h.return,X)}}u&&T&64&&cS(b),Pl(b,b.return);break;case 27:hS(b);case 26:case 5:jr(y,b,u),u&&h===null&&T&4&&dS(b),Pl(b,b.return);break;case 12:jr(y,b,u);break;case 13:jr(y,b,u),u&&T&4&&xS(y,b);break;case 22:b.memoizedState===null&&jr(y,b,u),Pl(b,b.return);break;case 30:break;default:jr(y,b,u)}l=l.sibling}}function eg(s,l){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&El(u))}function tg(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&El(s))}function bi(s,l,u,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)SS(s,l,u,h),l=l.sibling}function SS(s,l,u,h){var y=l.flags;switch(l.tag){case 0:case 11:case 15:bi(s,l,u,h),y&2048&&Bl(9,l);break;case 1:bi(s,l,u,h);break;case 3:bi(s,l,u,h),y&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&El(s)));break;case 12:if(y&2048){bi(s,l,u,h),s=l.stateNode;try{var b=l.memoizedProps,T=b.id,A=b.onPostCommit;typeof A=="function"&&A(T,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){rt(l,l.return,V)}}else bi(s,l,u,h);break;case 13:bi(s,l,u,h);break;case 23:break;case 22:b=l.stateNode,T=l.alternate,l.memoizedState!==null?b._visibility&2?bi(s,l,u,h):Vl(s,l):b._visibility&2?bi(s,l,u,h):(b._visibility|=2,Qo(s,l,u,h,(l.subtreeFlags&10256)!==0)),y&2048&&eg(T,l);break;case 24:bi(s,l,u,h),y&2048&&tg(l.alternate,l);break;default:bi(s,l,u,h)}}function Qo(s,l,u,h,y){for(y=y&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var b=s,T=l,A=u,V=h,X=T.flags;switch(T.tag){case 0:case 11:case 15:Qo(b,T,A,V,y),Bl(8,T);break;case 23:break;case 22:var ie=T.stateNode;T.memoizedState!==null?ie._visibility&2?Qo(b,T,A,V,y):Vl(b,T):(ie._visibility|=2,Qo(b,T,A,V,y)),y&&X&2048&&eg(T.alternate,T);break;case 24:Qo(b,T,A,V,y),y&&X&2048&&tg(T.alternate,T);break;default:Qo(b,T,A,V,y)}l=l.sibling}}function Vl(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=s,h=l,y=h.flags;switch(h.tag){case 22:Vl(u,h),y&2048&&eg(h.alternate,h);break;case 24:Vl(u,h),y&2048&&tg(h.alternate,h);break;default:Vl(u,h)}l=l.sibling}}var Il=8192;function Jo(s){if(s.subtreeFlags&Il)for(s=s.child;s!==null;)wS(s),s=s.sibling}function wS(s){switch(s.tag){case 26:Jo(s),s.flags&Il&&s.memoizedState!==null&&tj(si,s.memoizedState,s.memoizedProps);break;case 5:Jo(s);break;case 3:case 4:var l=si;si=Od(s.stateNode.containerInfo),Jo(s),si=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Il,Il=16777216,Jo(s),Il=l):Jo(s));break;default:Jo(s)}}function ES(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Hl(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];Ht=h,kS(h,s)}ES(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)CS(s),s=s.sibling}function CS(s){switch(s.tag){case 0:case 11:case 15:Hl(s),s.flags&2048&&Or(9,s,s.return);break;case 3:Hl(s);break;case 12:Hl(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,bd(s)):Hl(s);break;default:Hl(s)}}function bd(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var h=l[u];Ht=h,kS(h,s)}ES(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Or(8,l,l.return),bd(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,bd(l));break;default:bd(l)}s=s.sibling}}function kS(s,l){for(;Ht!==null;){var u=Ht;switch(u.tag){case 0:case 11:case 15:Or(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:El(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Ht=h;else e:for(u=s;Ht!==null;){h=Ht;var y=h.sibling,b=h.return;if(gS(h),h===u){Ht=null;break e}if(y!==null){y.return=b,Ht=y;break e}Ht=b}}}var y3={getCacheForType:function(s){var l=tn(zt),u=l.data.get(s);return u===void 0&&(u=s(),l.data.set(s,u)),u}},x3=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,$e=null,Ye=0,Je=0,Nn=null,_r=!1,ea=!1,ng=!1,er=0,xt=0,Lr=0,Is=0,ig=0,Un=0,ta=0,$l=null,bn=null,rg=!1,sg=0,vd=1/0,Sd=null,zr=null,Gt=0,Br=null,na=null,ia=0,og=0,ag=null,TS=null,Ul=0,lg=null;function An(){if((Qe&2)!==0&&Ye!==0)return Ye&-Ye;if(R.T!==null){var s=Fo;return s!==0?s:mg()}return Nu()}function MS(){Un===0&&(Un=(Ye&536870912)===0||Xe?ku():536870912);var s=$n.current;return s!==null&&(s.flags|=32),Un}function Dn(s,l,u){(s===ot&&(Je===2||Je===9)||s.cancelPendingCommit!==null)&&(ra(s,0),Pr(s,Ye,Un,!1)),Es(s,u),((Qe&2)===0||s!==ot)&&(s===ot&&((Qe&2)===0&&(Is|=u),xt===4&&Pr(s,Ye,Un,!1)),vi(s))}function NS(s,l,u){if((Qe&6)!==0)throw Error(i(327));var h=!u&&(l&124)===0&&(l&s.expiredLanes)===0||ws(s,l),y=h?S3(s,l):dg(s,l,!0),b=h;do{if(y===0){ea&&!h&&Pr(s,l,0,!1);break}else{if(u=s.current.alternate,b&&!b3(u)){y=dg(s,l,!1),b=!1;continue}if(y===2){if(b=l,s.errorRecoveryDisabledLanes&b)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var A=s;y=$l;var V=A.current.memoizedState.isDehydrated;if(V&&(ra(A,T).flags|=256),T=dg(A,T,!1),T!==2){if(ng&&!V){A.errorRecoveryDisabledLanes|=b,Is|=b,y=4;break e}b=bn,bn=y,b!==null&&(bn===null?bn=b:bn.push.apply(bn,b))}y=T}if(b=!1,y!==2)continue}}if(y===1){ra(s,0),Pr(s,l,0,!0);break}e:{switch(h=s,b=y,b){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Pr(h,l,Un,!_r);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(y=sg+300-lt(),10<y)){if(Pr(h,l,Un,!_r),No(h,0,!0)!==0)break e;h.timeoutHandle=iw(AS.bind(null,h,u,bn,Sd,rg,l,Un,Is,ta,_r,b,2,-0,0),y);break e}AS(h,u,bn,Sd,rg,l,Un,Is,ta,_r,b,0,-0,0)}}break}while(!0);vi(s)}function AS(s,l,u,h,y,b,T,A,V,X,ie,oe,Z,Q){if(s.timeoutHandle=-1,oe=l.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Wl={stylesheets:null,count:0,unsuspend:ej},wS(l),oe=nj(),oe!==null)){s.cancelPendingCommit=oe(zS.bind(null,s,l,b,u,h,y,T,A,V,ie,1,Z,Q)),Pr(s,b,T,!X);return}zS(s,l,b,u,h,y,T,A,V)}function b3(s){for(var l=s;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var y=u[h],b=y.getSnapshot;y=y.value;try{if(!Cn(b(),y))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Pr(s,l,u,h){l&=~ig,l&=~Is,s.suspendedLanes|=l,s.pingedLanes&=~l,h&&(s.warmLanes|=l),h=s.expirationTimes;for(var y=l;0<y;){var b=31-Ke(y),T=1<<b;h[b]=-1,y&=~T}u!==0&&Mu(s,u,l)}function wd(){return(Qe&6)===0?(Fl(0),!1):!0}function cg(){if($e!==null){if(Je===0)var s=$e.return;else s=$e,Yi=_s=null,Tm(s),Wo=null,_l=0,s=$e;for(;s!==null;)lS(s.alternate,s),s=s.return;$e=null}}function ra(s,l){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,B3(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),cg(),ot=s,$e=u=Ui(s.current,null),Ye=l,Je=0,Nn=null,_r=!1,ea=ws(s,l),ng=!1,ta=Un=ig=Is=Lr=xt=0,bn=$l=null,rg=!1,(l&8)!==0&&(l|=l&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=l;0<h;){var y=31-Ke(h),b=1<<y;l|=s[y],h&=~b}return er=l,Fu(),u}function DS(s,l){Ve=null,R.H=cd,l===kl||l===Ju?(l=Kv(),Je=3):l===Fv?(l=Kv(),Je=4):Je=l===G1?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Nn=l,$e===null&&(xt=1,pd(s,Pn(l,s.current)))}function OS(){var s=R.H;return R.H=cd,s===null?cd:s}function RS(){var s=R.A;return R.A=y3,s}function ug(){xt=4,_r||(Ye&4194048)!==Ye&&$n.current!==null||(ea=!0),(Lr&134217727)===0&&(Is&134217727)===0||ot===null||Pr(ot,Ye,Un,!1)}function dg(s,l,u){var h=Qe;Qe|=2;var y=OS(),b=RS();(ot!==s||Ye!==l)&&(Sd=null,ra(s,l)),l=!1;var T=xt;e:do try{if(Je!==0&&$e!==null){var A=$e,V=Nn;switch(Je){case 8:cg(),T=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(l=!0);var X=Je;if(Je=0,Nn=null,sa(s,A,V,X),u&&ea){T=0;break e}break;default:X=Je,Je=0,Nn=null,sa(s,A,V,X)}}v3(),T=xt;break}catch(ie){DS(s,ie)}while(!0);return l&&s.shellSuspendCounter++,Yi=_s=null,Qe=h,R.H=y,R.A=b,$e===null&&(ot=null,Ye=0,Fu()),T}function v3(){for(;$e!==null;)jS($e)}function S3(s,l){var u=Qe;Qe|=2;var h=OS(),y=RS();ot!==s||Ye!==l?(Sd=null,vd=lt()+500,ra(s,l)):ea=ws(s,l);e:do try{if(Je!==0&&$e!==null){l=$e;var b=Nn;t:switch(Je){case 1:Je=0,Nn=null,sa(s,l,b,1);break;case 2:case 9:if(qv(b)){Je=0,Nn=null,_S(l);break}l=function(){Je!==2&&Je!==9||ot!==s||(Je=7),vi(s)},b.then(l,l);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:qv(b)?(Je=0,Nn=null,_S(l)):(Je=0,Nn=null,sa(s,l,b,7));break;case 5:var T=null;switch($e.tag){case 26:T=$e.memoizedState;case 5:case 27:var A=$e;if(!T||mw(T)){Je=0,Nn=null;var V=A.sibling;if(V!==null)$e=V;else{var X=A.return;X!==null?($e=X,Ed(X)):$e=null}break t}}Je=0,Nn=null,sa(s,l,b,5);break;case 6:Je=0,Nn=null,sa(s,l,b,6);break;case 8:cg(),xt=6;break e;default:throw Error(i(462))}}w3();break}catch(ie){DS(s,ie)}while(!0);return Yi=_s=null,R.H=h,R.A=y,Qe=u,$e!==null?0:(ot=null,Ye=0,Fu(),xt)}function w3(){for(;$e!==null&&!We();)jS($e)}function jS(s){var l=oS(s.alternate,s,er);s.memoizedProps=s.pendingProps,l===null?Ed(s):$e=l}function _S(s){var l=s,u=l.alternate;switch(l.tag){case 15:case 0:l=eS(u,l,l.pendingProps,l.type,void 0,Ye);break;case 11:l=eS(u,l,l.pendingProps,l.type.render,l.ref,Ye);break;case 5:Tm(l);default:lS(u,l),l=$e=Lv(l,er),l=oS(u,l,er)}s.memoizedProps=s.pendingProps,l===null?Ed(s):$e=l}function sa(s,l,u,h){Yi=_s=null,Tm(l),Wo=null,_l=0;var y=l.return;try{if(d3(s,y,l,u,Ye)){xt=1,pd(s,Pn(u,s.current)),$e=null;return}}catch(b){if(y!==null)throw $e=y,b;xt=1,pd(s,Pn(u,s.current)),$e=null;return}l.flags&32768?(Xe||h===1?s=!0:ea||(Ye&536870912)!==0?s=!1:(_r=s=!0,(h===2||h===9||h===3||h===6)&&(h=$n.current,h!==null&&h.tag===13&&(h.flags|=16384))),LS(l,s)):Ed(l)}function Ed(s){var l=s;do{if((l.flags&32768)!==0){LS(l,_r);return}s=l.return;var u=h3(l.alternate,l,er);if(u!==null){$e=u;return}if(l=l.sibling,l!==null){$e=l;return}$e=l=s}while(l!==null);xt===0&&(xt=5)}function LS(s,l){do{var u=p3(s.alternate,s);if(u!==null){u.flags&=32767,$e=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(s=s.sibling,s!==null)){$e=s;return}$e=s=u}while(s!==null);xt=6,$e=null}function zS(s,l,u,h,y,b,T,A,V){s.cancelPendingCommit=null;do Cd();while(Gt!==0);if((Qe&6)!==0)throw Error(i(327));if(l!==null){if(l===s.current)throw Error(i(177));if(b=l.lanes|l.childLanes,b|=tm,Np(s,u,b,T,A,V),s===ot&&($e=ot=null,Ye=0),na=l,Br=s,ia=u,og=b,ag=y,TS=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,T3(ni,function(){return HS(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=R.T,R.T=null,y=L.p,L.p=2,T=Qe,Qe|=4;try{m3(s,l,u)}finally{Qe=T,L.p=y,R.T=h}}Gt=1,BS(),PS(),VS()}}function BS(){if(Gt===1){Gt=0;var s=Br,l=na,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=R.T,R.T=null;var h=L.p;L.p=2;var y=Qe;Qe|=4;try{bS(l,s);var b=Eg,T=kv(s.containerInfo),A=b.focusedElem,V=b.selectionRange;if(T!==A&&A&&A.ownerDocument&&Cv(A.ownerDocument.documentElement,A)){if(V!==null&&Wp(A)){var X=V.start,ie=V.end;if(ie===void 0&&(ie=X),"selectionStart"in A)A.selectionStart=X,A.selectionEnd=Math.min(ie,A.value.length);else{var oe=A.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var Q=Z.getSelection(),De=A.textContent.length,Me=Math.min(V.start,De),it=V.end===void 0?Me:Math.min(V.end,De);!Q.extend&&Me>it&&(T=it,it=Me,Me=T);var q=Ev(A,Me),$=Ev(A,it);if(q&&$&&(Q.rangeCount!==1||Q.anchorNode!==q.node||Q.anchorOffset!==q.offset||Q.focusNode!==$.node||Q.focusOffset!==$.offset)){var G=oe.createRange();G.setStart(q.node,q.offset),Q.removeAllRanges(),Me>it?(Q.addRange(G),Q.extend($.node,$.offset)):(G.setEnd($.node,$.offset),Q.addRange(G))}}}}for(oe=[],Q=A;Q=Q.parentNode;)Q.nodeType===1&&oe.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<oe.length;A++){var se=oe[A];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}zd=!!wg,Eg=wg=null}finally{Qe=y,L.p=h,R.T=u}}s.current=l,Gt=2}}function PS(){if(Gt===2){Gt=0;var s=Br,l=na,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=R.T,R.T=null;var h=L.p;L.p=2;var y=Qe;Qe|=4;try{mS(s,l.alternate,l)}finally{Qe=y,L.p=h,R.T=u}}Gt=3}}function VS(){if(Gt===4||Gt===3){Gt=0,Lt();var s=Br,l=na,u=ia,h=TS;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Gt=5:(Gt=0,na=Br=null,IS(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(zr=null),tl(u),l=l.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(we,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=R.T,y=L.p,L.p=2,R.T=null;try{for(var b=s.onRecoverableError,T=0;T<h.length;T++){var A=h[T];b(A.value,{componentStack:A.stack})}}finally{R.T=l,L.p=y}}(ia&3)!==0&&Cd(),vi(s),y=s.pendingLanes,(u&4194090)!==0&&(y&42)!==0?s===lg?Ul++:(Ul=0,lg=s):Ul=0,Fl(0)}}function IS(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,El(l)))}function Cd(s){return BS(),PS(),VS(),HS()}function HS(){if(Gt!==5)return!1;var s=Br,l=og;og=0;var u=tl(ia),h=R.T,y=L.p;try{L.p=32>u?32:u,R.T=null,u=ag,ag=null;var b=Br,T=ia;if(Gt=0,na=Br=null,ia=0,(Qe&6)!==0)throw Error(i(331));var A=Qe;if(Qe|=4,CS(b.current),SS(b,b.current,T,u),Qe=A,Fl(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(we,b)}catch{}return!0}finally{L.p=y,R.T=h,IS(s,l)}}function $S(s,l,u){l=Pn(u,l),l=Im(s.stateNode,l,2),s=Mr(s,l,2),s!==null&&(Es(s,2),vi(s))}function rt(s,l,u){if(s.tag===3)$S(s,s,u);else for(;l!==null;){if(l.tag===3){$S(l,s,u);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(zr===null||!zr.has(h))){s=Pn(u,s),u=Y1(2),h=Mr(l,u,2),h!==null&&(K1(u,h,l,s),Es(h,2),vi(h));break}}l=l.return}}function fg(s,l,u){var h=s.pingCache;if(h===null){h=s.pingCache=new x3;var y=new Set;h.set(l,y)}else y=h.get(l),y===void 0&&(y=new Set,h.set(l,y));y.has(u)||(ng=!0,y.add(u),s=E3.bind(null,s,l,u),l.then(s,s))}function E3(s,l,u){var h=s.pingCache;h!==null&&h.delete(l),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ot===s&&(Ye&u)===u&&(xt===4||xt===3&&(Ye&62914560)===Ye&&300>lt()-sg?(Qe&2)===0&&ra(s,0):ig|=u,ta===Ye&&(ta=0)),vi(s)}function US(s,l){l===0&&(l=Tu()),s=Io(s,l),s!==null&&(Es(s,l),vi(s))}function C3(s){var l=s.memoizedState,u=0;l!==null&&(u=l.retryLane),US(s,u)}function k3(s,l){var u=0;switch(s.tag){case 13:var h=s.stateNode,y=s.memoizedState;y!==null&&(u=y.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(l),US(s,u)}function T3(s,l){return Ae(s,l)}var kd=null,oa=null,hg=!1,Td=!1,pg=!1,Hs=0;function vi(s){s!==oa&&s.next===null&&(oa===null?kd=oa=s:oa=oa.next=s),Td=!0,hg||(hg=!0,N3())}function Fl(s,l){if(!pg&&Td){pg=!0;do for(var u=!1,h=kd;h!==null;){if(s!==0){var y=h.pendingLanes;if(y===0)var b=0;else{var T=h.suspendedLanes,A=h.pingedLanes;b=(1<<31-Ke(42|s)+1)-1,b&=y&~(T&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(u=!0,KS(h,b))}else b=Ye,b=No(h,h===ot?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||ws(h,b)||(u=!0,KS(h,b));h=h.next}while(u);pg=!1}}function M3(){FS()}function FS(){Td=hg=!1;var s=0;Hs!==0&&(z3()&&(s=Hs),Hs=0);for(var l=lt(),u=null,h=kd;h!==null;){var y=h.next,b=qS(h,l);b===0?(h.next=null,u===null?kd=y:u.next=y,y===null&&(oa=u)):(u=h,(s!==0||(b&3)!==0)&&(Td=!0)),h=y}Fl(s)}function qS(s,l){for(var u=s.suspendedLanes,h=s.pingedLanes,y=s.expirationTimes,b=s.pendingLanes&-62914561;0<b;){var T=31-Ke(b),A=1<<T,V=y[T];V===-1?((A&u)===0||(A&h)!==0)&&(y[T]=Mp(A,l)):V<=l&&(s.expiredLanes|=A),b&=~A}if(l=ot,u=Ye,u=No(s,s===l?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===l&&(Je===2||Je===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Te(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||ws(s,u)){if(l=u&-u,l===s.callbackPriority)return l;switch(h!==null&&Te(h),tl(u)){case 2:case 8:u=Li;break;case 32:u=ni;break;case 268435456:u=ce;break;default:u=ni}return h=YS.bind(null,s),u=Ae(u,h),s.callbackPriority=l,s.callbackNode=u,l}return h!==null&&h!==null&&Te(h),s.callbackPriority=2,s.callbackNode=null,2}function YS(s,l){if(Gt!==0&&Gt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Cd()&&s.callbackNode!==u)return null;var h=Ye;return h=No(s,s===ot?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(NS(s,h,l),qS(s,lt()),s.callbackNode!=null&&s.callbackNode===u?YS.bind(null,s):null)}function KS(s,l){if(Cd())return null;NS(s,l,!0)}function N3(){P3(function(){(Qe&6)!==0?Ae(_i,M3):FS()})}function mg(){return Hs===0&&(Hs=ku()),Hs}function GS(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Bu(""+s)}function XS(s,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,s.id&&u.setAttribute("form",s.id),l.parentNode.insertBefore(u,l),s=new FormData(s),u.parentNode.removeChild(u),s}function A3(s,l,u,h,y){if(l==="submit"&&u&&u.stateNode===y){var b=GS((y[en]||null).action),T=h.submitter;T&&(l=(l=T[en]||null)?GS(l.formAction):T.getAttribute("formAction"),l!==null&&(b=l,T=null));var A=new Hu("action","action",null,h,y);s.push({event:A,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Hs!==0){var V=T?XS(y,T):new FormData(y);Lm(u,{pending:!0,data:V,method:y.method,action:b},null,V)}}else typeof b=="function"&&(A.preventDefault(),V=T?XS(y,T):new FormData(y),Lm(u,{pending:!0,data:V,method:y.method,action:b},b,V))},currentTarget:y}]})}}for(var gg=0;gg<em.length;gg++){var yg=em[gg],D3=yg.toLowerCase(),O3=yg[0].toUpperCase()+yg.slice(1);ri(D3,"on"+O3)}ri(Nv,"onAnimationEnd"),ri(Av,"onAnimationIteration"),ri(Dv,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(GR,"onTransitionRun"),ri(XR,"onTransitionStart"),ri(WR,"onTransitionCancel"),ri(Ov,"onTransitionEnd"),wr("onMouseEnter",["mouseout","mouseover"]),wr("onMouseLeave",["mouseout","mouseover"]),wr("onPointerEnter",["pointerout","pointerover"]),wr("onPointerLeave",["pointerout","pointerover"]),Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function WS(s,l){l=(l&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],y=h.event;h=h.listeners;e:{var b=void 0;if(l)for(var T=h.length-1;0<=T;T--){var A=h[T],V=A.instance,X=A.currentTarget;if(A=A.listener,V!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=X;try{b(y)}catch(ie){hd(ie)}y.currentTarget=null,b=V}else for(T=0;T<h.length;T++){if(A=h[T],V=A.instance,X=A.currentTarget,A=A.listener,V!==b&&y.isPropagationStopped())break e;b=A,y.currentTarget=X;try{b(y)}catch(ie){hd(ie)}y.currentTarget=null,b=V}}}}function Ue(s,l){var u=l[nl];u===void 0&&(u=l[nl]=new Set);var h=s+"__bubble";u.has(h)||(ZS(l,s,2,!1),u.add(h))}function xg(s,l,u){var h=0;l&&(h|=4),ZS(u,s,h,l)}var Md="_reactListening"+Math.random().toString(36).slice(2);function bg(s){if(!s[Md]){s[Md]=!0,Du.forEach(function(u){u!=="selectionchange"&&(R3.has(u)||xg(u,!1,s),xg(u,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Md]||(l[Md]=!0,xg("selectionchange",!1,l))}}function ZS(s,l,u,h){switch(Sw(l)){case 2:var y=sj;break;case 8:y=oj;break;default:y=jg}u=y.bind(null,l,u,s),y=void 0,!Hp||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(y=!0),h?y!==void 0?s.addEventListener(l,u,{capture:!0,passive:y}):s.addEventListener(l,u,!0):y!==void 0?s.addEventListener(l,u,{passive:y}):s.addEventListener(l,u,!1)}function vg(s,l,u,h,y){var b=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var A=h.stateNode.containerInfo;if(A===y)break;if(T===4)for(T=h.return;T!==null;){var V=T.tag;if((V===3||V===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;A!==null;){if(T=vr(A),T===null)return;if(V=T.tag,V===5||V===6||V===26||V===27){h=b=T;continue e}A=A.parentNode}}h=h.return}rv(function(){var X=b,ie=Vp(u),oe=[];e:{var Z=Rv.get(s);if(Z!==void 0){var Q=Hu,De=s;switch(s){case"keypress":if(Vu(u)===0)break e;case"keydown":case"keyup":Q=TR;break;case"focusin":De="focus",Q=qp;break;case"focusout":De="blur",Q=qp;break;case"beforeblur":case"afterblur":Q=qp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=av;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=pR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=AR;break;case Nv:case Av:case Dv:Q=yR;break;case Ov:Q=OR;break;case"scroll":case"scrollend":Q=fR;break;case"wheel":Q=jR;break;case"copy":case"cut":case"paste":Q=bR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=cv;break;case"toggle":case"beforetoggle":Q=LR}var Me=(l&4)!==0,it=!Me&&(s==="scroll"||s==="scrollend"),q=Me?Z!==null?Z+"Capture":null:Z;Me=[];for(var $=X,G;$!==null;){var se=$;if(G=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||G===null||q===null||(se=ul($,q),se!=null&&Me.push(Yl($,se,G))),it)break;$=$.return}0<Me.length&&(Z=new Q(Z,De,null,u,ie),oe.push({event:Z,listeners:Me}))}}if((l&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",Z&&u!==Pp&&(De=u.relatedTarget||u.fromElement)&&(vr(De)||De[br]))break e;if((Q||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,Q?(De=u.relatedTarget||u.toElement,Q=X,De=De?vr(De):null,De!==null&&(it=o(De),Me=De.tag,De!==it||Me!==5&&Me!==27&&Me!==6)&&(De=null)):(Q=null,De=X),Q!==De)){if(Me=av,se="onMouseLeave",q="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(Me=cv,se="onPointerLeave",q="onPointerEnter",$="pointer"),it=Q==null?Z:Sr(Q),G=De==null?Z:Sr(De),Z=new Me(se,$+"leave",Q,u,ie),Z.target=it,Z.relatedTarget=G,se=null,vr(ie)===X&&(Me=new Me(q,$+"enter",De,u,ie),Me.target=G,Me.relatedTarget=it,se=Me),it=se,Q&&De)t:{for(Me=Q,q=De,$=0,G=Me;G;G=aa(G))$++;for(G=0,se=q;se;se=aa(se))G++;for(;0<$-G;)Me=aa(Me),$--;for(;0<G-$;)q=aa(q),G--;for(;$--;){if(Me===q||q!==null&&Me===q.alternate)break t;Me=aa(Me),q=aa(q)}Me=null}else Me=null;Q!==null&&QS(oe,Z,Q,Me,!1),De!==null&&it!==null&&QS(oe,it,De,Me,!0)}}e:{if(Z=X?Sr(X):window,Q=Z.nodeName&&Z.nodeName.toLowerCase(),Q==="select"||Q==="input"&&Z.type==="file")var xe=yv;else if(mv(Z))if(xv)xe=qR;else{xe=UR;var He=$R}else Q=Z.nodeName,!Q||Q.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&Bp(X.elementType)&&(xe=yv):xe=FR;if(xe&&(xe=xe(s,X))){gv(oe,xe,u,ie);break e}He&&He(s,Z,X),s==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&cl(Z,"number",Z.value)}switch(He=X?Sr(X):window,s){case"focusin":(mv(He)||He.contentEditable==="true")&&(Bo=He,Zp=X,xl=null);break;case"focusout":xl=Zp=Bo=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,Tv(oe,u,ie);break;case"selectionchange":if(KR)break;case"keydown":case"keyup":Tv(oe,u,ie)}var be;if(Kp)e:{switch(s){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else zo?hv(s,u)&&(Ne="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ne="onCompositionStart");Ne&&(uv&&u.locale!=="ko"&&(zo||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&zo&&(be=sv()):(Er=ie,$p="value"in Er?Er.value:Er.textContent,zo=!0)),He=Nd(X,Ne),0<He.length&&(Ne=new lv(Ne,s,null,u,ie),oe.push({event:Ne,listeners:He}),be?Ne.data=be:(be=pv(u),be!==null&&(Ne.data=be)))),(be=BR?PR(s,u):VR(s,u))&&(Ne=Nd(X,"onBeforeInput"),0<Ne.length&&(He=new lv("onBeforeInput","beforeinput",null,u,ie),oe.push({event:He,listeners:Ne}),He.data=be)),A3(oe,s,X,u,ie)}WS(oe,l)})}function Yl(s,l,u){return{instance:s,listener:l,currentTarget:u}}function Nd(s,l){for(var u=l+"Capture",h=[];s!==null;){var y=s,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=ul(s,u),y!=null&&h.unshift(Yl(s,y,b)),y=ul(s,l),y!=null&&h.push(Yl(s,y,b))),s.tag===3)return h;s=s.return}return[]}function aa(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function QS(s,l,u,h,y){for(var b=l._reactName,T=[];u!==null&&u!==h;){var A=u,V=A.alternate,X=A.stateNode;if(A=A.tag,V!==null&&V===h)break;A!==5&&A!==26&&A!==27||X===null||(V=X,y?(X=ul(u,b),X!=null&&T.unshift(Yl(u,X,V))):y||(X=ul(u,b),X!=null&&T.push(Yl(u,X,V)))),u=u.return}T.length!==0&&s.push({event:l,listeners:T})}var j3=/\r\n?/g,_3=/\u0000|\uFFFD/g;function JS(s){return(typeof s=="string"?s:""+s).replace(j3,`
`).replace(_3,"")}function ew(s,l){return l=JS(l),JS(s)===l}function Ad(){}function nt(s,l,u,h,y,b){switch(u){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||jo(s,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&jo(s,""+h);break;case"className":Do(s,"class",h);break;case"tabIndex":Do(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Do(s,u,h);break;case"style":nv(s,h,b);break;case"data":if(l!=="object"){Do(s,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Bu(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(u==="formAction"?(l!=="input"&&nt(s,l,"name",y.name,y,null),nt(s,l,"formEncType",y.formEncType,y,null),nt(s,l,"formMethod",y.formMethod,y,null),nt(s,l,"formTarget",y.formTarget,y,null)):(nt(s,l,"encType",y.encType,y,null),nt(s,l,"method",y.method,y,null),nt(s,l,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Bu(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Ad);break;case"onScroll":h!=null&&Ue("scroll",s);break;case"onScrollEnd":h!=null&&Ue("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Bu(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":Ue("beforetoggle",s),Ue("toggle",s),Ao(s,"popover",h);break;case"xlinkActuate":ii(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ii(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ii(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ii(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ii(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ii(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ii(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ii(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ii(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ao(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=uR.get(u)||u,Ao(s,u,h))}}function Sg(s,l,u,h,y,b){switch(u){case"style":nv(s,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(y.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?jo(s,h):(typeof h=="number"||typeof h=="bigint")&&jo(s,""+h);break;case"onScroll":h!=null&&Ue("scroll",s);break;case"onScrollEnd":h!=null&&Ue("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Ad);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ou.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),l=u.slice(2,y?u.length-7:void 0),b=s[en]||null,b=b!=null?b[u]:null,typeof b=="function"&&s.removeEventListener(l,b,y),typeof h=="function")){typeof b!="function"&&b!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(l,h,y);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Ao(s,u,h)}}}function Xt(s,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",s),Ue("load",s);var h=!1,y=!1,b;for(b in u)if(u.hasOwnProperty(b)){var T=u[b];if(T!=null)switch(b){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:nt(s,l,b,T,u,null)}}y&&nt(s,l,"srcSet",u.srcSet,u,null),h&&nt(s,l,"src",u.src,u,null);return;case"input":Ue("invalid",s);var A=b=T=y=null,V=null,X=null;for(h in u)if(u.hasOwnProperty(h)){var ie=u[h];if(ie!=null)switch(h){case"name":y=ie;break;case"type":T=ie;break;case"checked":V=ie;break;case"defaultChecked":X=ie;break;case"value":b=ie;break;case"defaultValue":A=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,l));break;default:nt(s,l,h,ie,u,null)}}zu(s,b,A,V,X,T,y,!1),Oo(s);return;case"select":Ue("invalid",s),h=T=b=null;for(y in u)if(u.hasOwnProperty(y)&&(A=u[y],A!=null))switch(y){case"value":b=A;break;case"defaultValue":T=A;break;case"multiple":h=A;default:nt(s,l,y,A,u,null)}l=b,u=T,s.multiple=!!h,l!=null?Hi(s,!!h,l,!1):u!=null&&Hi(s,!!h,u,!0);return;case"textarea":Ue("invalid",s),b=y=h=null;for(T in u)if(u.hasOwnProperty(T)&&(A=u[T],A!=null))switch(T){case"value":h=A;break;case"defaultValue":y=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(i(91));break;default:nt(s,l,T,A,u,null)}ev(s,h,y,b),Oo(s);return;case"option":for(V in u)if(u.hasOwnProperty(V)&&(h=u[V],h!=null))switch(V){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:nt(s,l,V,h,u,null)}return;case"dialog":Ue("beforetoggle",s),Ue("toggle",s),Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":Ue("load",s);break;case"video":case"audio":for(h=0;h<ql.length;h++)Ue(ql[h],s);break;case"image":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"embed":case"source":case"link":Ue("error",s),Ue("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(h=u[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:nt(s,l,X,h,u,null)}return;default:if(Bp(l)){for(ie in u)u.hasOwnProperty(ie)&&(h=u[ie],h!==void 0&&Sg(s,l,ie,h,u,void 0));return}}for(A in u)u.hasOwnProperty(A)&&(h=u[A],h!=null&&nt(s,l,A,h,u,null))}function L3(s,l,u,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,T=null,A=null,V=null,X=null,ie=null;for(Q in u){var oe=u[Q];if(u.hasOwnProperty(Q)&&oe!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=oe;default:h.hasOwnProperty(Q)||nt(s,l,Q,null,h,oe)}}for(var Z in h){var Q=h[Z];if(oe=u[Z],h.hasOwnProperty(Z)&&(Q!=null||oe!=null))switch(Z){case"type":b=Q;break;case"name":y=Q;break;case"checked":X=Q;break;case"defaultChecked":ie=Q;break;case"value":T=Q;break;case"defaultValue":A=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,l));break;default:Q!==oe&&nt(s,l,Z,Q,h,oe)}}ks(s,T,A,V,X,ie,b,y);return;case"select":Q=T=A=Z=null;for(b in u)if(V=u[b],u.hasOwnProperty(b)&&V!=null)switch(b){case"value":break;case"multiple":Q=V;default:h.hasOwnProperty(b)||nt(s,l,b,null,h,V)}for(y in h)if(b=h[y],V=u[y],h.hasOwnProperty(y)&&(b!=null||V!=null))switch(y){case"value":Z=b;break;case"defaultValue":A=b;break;case"multiple":T=b;default:b!==V&&nt(s,l,y,b,h,V)}l=A,u=T,h=Q,Z!=null?Hi(s,!!u,Z,!1):!!h!=!!u&&(l!=null?Hi(s,!!u,l,!0):Hi(s,!!u,u?[]:"",!1));return;case"textarea":Q=Z=null;for(A in u)if(y=u[A],u.hasOwnProperty(A)&&y!=null&&!h.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:nt(s,l,A,null,h,y)}for(T in h)if(y=h[T],b=u[T],h.hasOwnProperty(T)&&(y!=null||b!=null))switch(T){case"value":Z=y;break;case"defaultValue":Q=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==b&&nt(s,l,T,y,h,b)}Jb(s,Z,Q);return;case"option":for(var De in u)if(Z=u[De],u.hasOwnProperty(De)&&Z!=null&&!h.hasOwnProperty(De))switch(De){case"selected":s.selected=!1;break;default:nt(s,l,De,null,h,Z)}for(V in h)if(Z=h[V],Q=u[V],h.hasOwnProperty(V)&&Z!==Q&&(Z!=null||Q!=null))switch(V){case"selected":s.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:nt(s,l,V,Z,h,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in u)Z=u[Me],u.hasOwnProperty(Me)&&Z!=null&&!h.hasOwnProperty(Me)&&nt(s,l,Me,null,h,Z);for(X in h)if(Z=h[X],Q=u[X],h.hasOwnProperty(X)&&Z!==Q&&(Z!=null||Q!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,l));break;default:nt(s,l,X,Z,h,Q)}return;default:if(Bp(l)){for(var it in u)Z=u[it],u.hasOwnProperty(it)&&Z!==void 0&&!h.hasOwnProperty(it)&&Sg(s,l,it,void 0,h,Z);for(ie in h)Z=h[ie],Q=u[ie],!h.hasOwnProperty(ie)||Z===Q||Z===void 0&&Q===void 0||Sg(s,l,ie,Z,h,Q);return}}for(var q in u)Z=u[q],u.hasOwnProperty(q)&&Z!=null&&!h.hasOwnProperty(q)&&nt(s,l,q,null,h,Z);for(oe in h)Z=h[oe],Q=u[oe],!h.hasOwnProperty(oe)||Z===Q||Z==null&&Q==null||nt(s,l,oe,Z,h,Q)}var wg=null,Eg=null;function Dd(s){return s.nodeType===9?s:s.ownerDocument}function tw(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nw(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function Cg(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var kg=null;function z3(){var s=window.event;return s&&s.type==="popstate"?s===kg?!1:(kg=s,!0):(kg=null,!1)}var iw=typeof setTimeout=="function"?setTimeout:void 0,B3=typeof clearTimeout=="function"?clearTimeout:void 0,rw=typeof Promise=="function"?Promise:void 0,P3=typeof queueMicrotask=="function"?queueMicrotask:typeof rw<"u"?function(s){return rw.resolve(null).then(s).catch(V3)}:iw;function V3(s){setTimeout(function(){throw s})}function Vr(s){return s==="head"}function sw(s,l){var u=l,h=0,y=0;do{var b=u.nextSibling;if(s.removeChild(u),b&&b.nodeType===8)if(u=b.data,u==="/$"){if(0<h&&8>h){u=h;var T=s.ownerDocument;if(u&1&&Kl(T.documentElement),u&2&&Kl(T.body),u&4)for(u=T.head,Kl(u),T=u.firstChild;T;){var A=T.nextSibling,V=T.nodeName;T[Cs]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&T.rel.toLowerCase()==="stylesheet"||u.removeChild(T),T=A}}if(y===0){s.removeChild(b),tc(l);return}y--}else u==="$"||u==="$?"||u==="$!"?y++:h=u.charCodeAt(0)-48;else h=0;u=b}while(u);tc(l)}function Tg(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Tg(u),il(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function I3(s,l,u,h){for(;s.nodeType===1;){var y=u;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Cs])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(b=s.getAttribute("rel"),b==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(b!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(b=s.getAttribute("src"),(b!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===b)return s}else return s;if(s=oi(s.nextSibling),s===null)break}return null}function H3(s,l,u){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=oi(s.nextSibling),s===null))return null;return s}function Mg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function $3(s,l){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")l();else{var h=function(){l(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function oi(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var Ng=null;function ow(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return s;l--}else u==="/$"&&l++}s=s.previousSibling}return null}function aw(s,l,u){switch(l=Dd(u),s){case"html":if(s=l.documentElement,!s)throw Error(i(452));return s;case"head":if(s=l.head,!s)throw Error(i(453));return s;case"body":if(s=l.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Kl(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);il(s)}var Fn=new Map,lw=new Set;function Od(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var tr=L.d;L.d={f:U3,r:F3,D:q3,C:Y3,L:K3,m:G3,X:W3,S:X3,M:Z3};function U3(){var s=tr.f(),l=wd();return s||l}function F3(s){var l=Bi(s);l!==null&&l.tag===5&&l.type==="form"?N1(l):tr.r(s)}var la=typeof document>"u"?null:document;function cw(s,l,u){var h=la;if(h&&typeof l=="string"&&l){var y=mn(l);y='link[rel="'+s+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),lw.has(y)||(lw.add(y),s={rel:s,crossOrigin:u,href:l},h.querySelector(y)===null&&(l=h.createElement("link"),Xt(l,"link",s),Mt(l),h.head.appendChild(l)))}}function q3(s){tr.D(s),cw("dns-prefetch",s,null)}function Y3(s,l){tr.C(s,l),cw("preconnect",s,l)}function K3(s,l,u){tr.L(s,l,u);var h=la;if(h&&s&&l){var y='link[rel="preload"][as="'+mn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+mn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+mn(u.imageSizes)+'"]')):y+='[href="'+mn(s)+'"]';var b=y;switch(l){case"style":b=ca(s);break;case"script":b=ua(s)}Fn.has(b)||(s=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:s,as:l},u),Fn.set(b,s),h.querySelector(y)!==null||l==="style"&&h.querySelector(Gl(b))||l==="script"&&h.querySelector(Xl(b))||(l=h.createElement("link"),Xt(l,"link",s),Mt(l),h.head.appendChild(l)))}}function G3(s,l){tr.m(s,l);var u=la;if(u&&s){var h=l&&typeof l.as=="string"?l.as:"script",y='link[rel="modulepreload"][as="'+mn(h)+'"][href="'+mn(s)+'"]',b=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ua(s)}if(!Fn.has(b)&&(s=p({rel:"modulepreload",href:s},l),Fn.set(b,s),u.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Xl(b)))return}h=u.createElement("link"),Xt(h,"link",s),Mt(h),u.head.appendChild(h)}}}function X3(s,l,u){tr.S(s,l,u);var h=la;if(h&&s){var y=Pi(h).hoistableStyles,b=ca(s);l=l||"default";var T=y.get(b);if(!T){var A={loading:0,preload:null};if(T=h.querySelector(Gl(b)))A.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},u),(u=Fn.get(b))&&Ag(s,u);var V=T=h.createElement("link");Mt(V),Xt(V,"link",s),V._p=new Promise(function(X,ie){V.onload=X,V.onerror=ie}),V.addEventListener("load",function(){A.loading|=1}),V.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Rd(T,l,h)}T={type:"stylesheet",instance:T,count:1,state:A},y.set(b,T)}}}function W3(s,l){tr.X(s,l);var u=la;if(u&&s){var h=Pi(u).hoistableScripts,y=ua(s),b=h.get(y);b||(b=u.querySelector(Xl(y)),b||(s=p({src:s,async:!0},l),(l=Fn.get(y))&&Dg(s,l),b=u.createElement("script"),Mt(b),Xt(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(y,b))}}function Z3(s,l){tr.M(s,l);var u=la;if(u&&s){var h=Pi(u).hoistableScripts,y=ua(s),b=h.get(y);b||(b=u.querySelector(Xl(y)),b||(s=p({src:s,async:!0,type:"module"},l),(l=Fn.get(y))&&Dg(s,l),b=u.createElement("script"),Mt(b),Xt(b,"link",s),u.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(y,b))}}function uw(s,l,u,h){var y=(y=fe.current)?Od(y):null;if(!y)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=ca(u.href),u=Pi(y).hoistableStyles,h=u.get(l),h||(h={type:"style",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=ca(u.href);var b=Pi(y).hoistableStyles,T=b.get(s);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(s,T),(b=y.querySelector(Gl(s)))&&!b._p&&(T.instance=b,T.state.loading=5),Fn.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Fn.set(s,u),b||Q3(y,s,u,T.state))),l&&h===null)throw Error(i(528,""));return T}if(l&&h!==null)throw Error(i(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ua(u),u=Pi(y).hoistableScripts,h=u.get(l),h||(h={type:"script",instance:null,count:0,state:null},u.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ca(s){return'href="'+mn(s)+'"'}function Gl(s){return'link[rel="stylesheet"]['+s+"]"}function dw(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function Q3(s,l,u,h){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=s.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),Xt(l,"link",u),Mt(l),s.head.appendChild(l))}function ua(s){return'[src="'+mn(s)+'"]'}function Xl(s){return"script[async]"+s}function fw(s,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var h=s.querySelector('style[data-href~="'+mn(u.href)+'"]');if(h)return l.instance=h,Mt(h),h;var y=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),Mt(h),Xt(h,"style",y),Rd(h,u.precedence,s),l.instance=h;case"stylesheet":y=ca(u.href);var b=s.querySelector(Gl(y));if(b)return l.state.loading|=4,l.instance=b,Mt(b),b;h=dw(u),(y=Fn.get(y))&&Ag(h,y),b=(s.ownerDocument||s).createElement("link"),Mt(b);var T=b;return T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),Xt(b,"link",h),l.state.loading|=4,Rd(b,u.precedence,s),l.instance=b;case"script":return b=ua(u.src),(y=s.querySelector(Xl(b)))?(l.instance=y,Mt(y),y):(h=u,(y=Fn.get(b))&&(h=p({},u),Dg(h,y)),s=s.ownerDocument||s,y=s.createElement("script"),Mt(y),Xt(y,"link",h),s.head.appendChild(y),l.instance=y);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,Rd(h,u.precedence,s));return l.instance}function Rd(s,l,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,b=y,T=0;T<h.length;T++){var A=h[T];if(A.dataset.precedence===l)b=A;else if(b!==y)break}b?b.parentNode.insertBefore(s,b.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(s,l.firstChild))}function Ag(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Dg(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var jd=null;function hw(s,l,u){if(jd===null){var h=new Map,y=jd=new Map;y.set(u,h)}else y=jd,h=y.get(u),h||(h=new Map,y.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),y=0;y<u.length;y++){var b=u[y];if(!(b[Cs]||b[Vt]||s==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(l)||"";T=s+T;var A=h.get(T);A?A.push(b):h.set(T,[b])}}return h}function pw(s,l,u){s=s.ownerDocument||s,s.head.insertBefore(u,l==="title"?s.querySelector("head > title"):null)}function J3(s,l,u){if(u===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function mw(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Wl=null;function ej(){}function tj(s,l,u){if(Wl===null)throw Error(i(475));var h=Wl;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ca(u.href),b=s.querySelector(Gl(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=_d.bind(h),s.then(h,h)),l.state.loading|=4,l.instance=b,Mt(b);return}b=s.ownerDocument||s,u=dw(u),(y=Fn.get(y))&&Ag(u,y),b=b.createElement("link"),Mt(b);var T=b;T._p=new Promise(function(A,V){T.onload=A,T.onerror=V}),Xt(b,"link",u),l.instance=b}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(h.count++,l=_d.bind(h),s.addEventListener("load",l),s.addEventListener("error",l))}}function nj(){if(Wl===null)throw Error(i(475));var s=Wl;return s.stylesheets&&s.count===0&&Og(s,s.stylesheets),0<s.count?function(l){var u=setTimeout(function(){if(s.stylesheets&&Og(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u)}}:null}function _d(){if(this.count--,this.count===0){if(this.stylesheets)Og(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Ld=null;function Og(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Ld=new Map,l.forEach(ij,s),Ld=null,_d.call(s))}function ij(s,l){if(!(l.state.loading&4)){var u=Ld.get(s);if(u)var h=u.get(null);else{u=new Map,Ld.set(s,u);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var T=y[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),h=T)}h&&u.set(null,h)}y=l.instance,T=y.getAttribute("data-precedence"),b=u.get(T)||h,b===h&&u.set(null,y),u.set(T,y),this.count++,h=_d.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),b?b.parentNode.insertBefore(y,b.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),l.state.loading|=4}}var Zl={$$typeof:k,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function rj(s,l,u,h,y,b,T,A){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qa(0),this.hiddenUpdates=Qa(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function gw(s,l,u,h,y,b,T,A,V,X,ie,oe){return s=new rj(s,l,u,T,A,V,X,oe),l=1,b===!0&&(l|=24),b=kn(3,null,null,l),s.current=b,b.stateNode=s,l=fm(),l.refCount++,s.pooledCache=l,l.refCount++,b.memoizedState={element:h,isDehydrated:u,cache:l},gm(b),s}function yw(s){return s?(s=Ho,s):Ho}function xw(s,l,u,h,y,b){y=yw(y),h.context===null?h.context=y:h.pendingContext=y,h=Tr(l),h.payload={element:u},b=b===void 0?null:b,b!==null&&(h.callback=b),u=Mr(s,h,l),u!==null&&(Dn(u,s,l),Ml(u,s,l))}function bw(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<l?u:l}}function Rg(s,l){bw(s,l),(s=s.alternate)&&bw(s,l)}function vw(s){if(s.tag===13){var l=Io(s,67108864);l!==null&&Dn(l,s,67108864),Rg(s,67108864)}}var zd=!0;function sj(s,l,u,h){var y=R.T;R.T=null;var b=L.p;try{L.p=2,jg(s,l,u,h)}finally{L.p=b,R.T=y}}function oj(s,l,u,h){var y=R.T;R.T=null;var b=L.p;try{L.p=8,jg(s,l,u,h)}finally{L.p=b,R.T=y}}function jg(s,l,u,h){if(zd){var y=_g(h);if(y===null)vg(s,l,h,Bd,u),ww(s,h);else if(lj(y,s,l,u,h))h.stopPropagation();else if(ww(s,h),l&4&&-1<aj.indexOf(s)){for(;y!==null;){var b=Bi(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=zi(b.pendingLanes);if(T!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var V=1<<31-Ke(T);A.entanglements[1]|=V,T&=~V}vi(b),(Qe&6)===0&&(vd=lt()+500,Fl(0))}}break;case 13:A=Io(b,2),A!==null&&Dn(A,b,2),wd(),Rg(b,2)}if(b=_g(h),b===null&&vg(s,l,h,Bd,u),b===y)break;y=b}y!==null&&h.stopPropagation()}else vg(s,l,h,null,u)}}function _g(s){return s=Vp(s),Lg(s)}var Bd=null;function Lg(s){if(Bd=null,s=vr(s),s!==null){var l=o(s);if(l===null)s=null;else{var u=l.tag;if(u===13){if(s=a(l),s!==null)return s;s=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Bd=s,null}function Sw(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pi()){case _i:return 2;case Li:return 8;case ni:case ae:return 32;case ce:return 268435456;default:return 32}default:return 32}}var zg=!1,Ir=null,Hr=null,$r=null,Ql=new Map,Jl=new Map,Ur=[],aj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ww(s,l){switch(s){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":Ql.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(l.pointerId)}}function ec(s,l,u,h,y,b){return s===null||s.nativeEvent!==b?(s={blockedOn:l,domEventName:u,eventSystemFlags:h,nativeEvent:b,targetContainers:[y]},l!==null&&(l=Bi(l),l!==null&&vw(l)),s):(s.eventSystemFlags|=h,l=s.targetContainers,y!==null&&l.indexOf(y)===-1&&l.push(y),s)}function lj(s,l,u,h,y){switch(l){case"focusin":return Ir=ec(Ir,s,l,u,h,y),!0;case"dragenter":return Hr=ec(Hr,s,l,u,h,y),!0;case"mouseover":return $r=ec($r,s,l,u,h,y),!0;case"pointerover":var b=y.pointerId;return Ql.set(b,ec(Ql.get(b)||null,s,l,u,h,y)),!0;case"gotpointercapture":return b=y.pointerId,Jl.set(b,ec(Jl.get(b)||null,s,l,u,h,y)),!0}return!1}function Ew(s){var l=vr(s.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=a(u),l!==null){s.blockedOn=l,Ap(s.priority,function(){if(u.tag===13){var h=An();h=el(h);var y=Io(u,h);y!==null&&Dn(y,u,h),Rg(u,h)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Pd(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var u=_g(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Pp=h,u.target.dispatchEvent(h),Pp=null}else return l=Bi(u),l!==null&&vw(l),s.blockedOn=u,!1;l.shift()}return!0}function Cw(s,l,u){Pd(s)&&u.delete(l)}function cj(){zg=!1,Ir!==null&&Pd(Ir)&&(Ir=null),Hr!==null&&Pd(Hr)&&(Hr=null),$r!==null&&Pd($r)&&($r=null),Ql.forEach(Cw),Jl.forEach(Cw)}function Vd(s,l){s.blockedOn===l&&(s.blockedOn=null,zg||(zg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,cj)))}var Id=null;function kw(s){Id!==s&&(Id=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Id===s&&(Id=null);for(var l=0;l<s.length;l+=3){var u=s[l],h=s[l+1],y=s[l+2];if(typeof h!="function"){if(Lg(h||u)===null)continue;break}var b=Bi(u);b!==null&&(s.splice(l,3),l-=3,Lm(b,{pending:!0,data:y,method:u.method,action:h},h,y))}}))}function tc(s){function l(V){return Vd(V,s)}Ir!==null&&Vd(Ir,s),Hr!==null&&Vd(Hr,s),$r!==null&&Vd($r,s),Ql.forEach(l),Jl.forEach(l);for(var u=0;u<Ur.length;u++){var h=Ur[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<Ur.length&&(u=Ur[0],u.blockedOn===null);)Ew(u),u.blockedOn===null&&Ur.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var y=u[h],b=u[h+1],T=y[en]||null;if(typeof b=="function")T||kw(u);else if(T){var A=null;if(b&&b.hasAttribute("formAction")){if(y=b,T=b[en]||null)A=T.formAction;else if(Lg(y)!==null)continue}else A=T.action;typeof A=="function"?u[h+1]=A:(u.splice(h,3),h-=3),kw(u)}}}function Bg(s){this._internalRoot=s}Hd.prototype.render=Bg.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(i(409));var u=l.current,h=An();xw(u,h,s,l,null,null)},Hd.prototype.unmount=Bg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;xw(s.current,2,null,s,null,null),wd(),l[br]=null}};function Hd(s){this._internalRoot=s}Hd.prototype.unstable_scheduleHydration=function(s){if(s){var l=Nu();s={blockedOn:null,target:s,priority:l};for(var u=0;u<Ur.length&&l!==0&&l<Ur[u].priority;u++);Ur.splice(u,0,s),u===0&&Ew(s)}};var Tw=e.version;if(Tw!=="19.1.1")throw Error(i(527,Tw,"19.1.1"));L.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(l),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var uj={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$d.isDisabled&&$d.supportsFiber)try{we=$d.inject(uj),ke=$d}catch{}}return ic.createRoot=function(s,l){if(!r(s))throw Error(i(299));var u=!1,h="",y=$1,b=U1,T=F1,A=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(A=l.unstable_transitionCallbacks)),l=gw(s,1,!1,null,null,u,h,y,b,T,A,null),s[br]=l.current,bg(s),new Bg(l)},ic.hydrateRoot=function(s,l,u){if(!r(s))throw Error(i(299));var h=!1,y="",b=$1,T=U1,A=F1,V=null,X=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(b=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(A=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(V=u.unstable_transitionCallbacks),u.formState!==void 0&&(X=u.formState)),l=gw(s,1,!0,l,u??null,h,y,b,T,A,V,X),l.context=yw(null),u=l.current,h=An(),h=el(h),y=Tr(h),y.callback=null,Mr(u,y,h),u=h,l.current.lanes=u,Es(l,u),vi(l),s[br]=l.current,bg(s),new Hd(l)},ic.version="19.1.1",ic}var zw;function Sj(){if(zw)return Ig.exports;zw=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ig.exports=vj(),Ig.exports}var wj=Sj(),Ej=I2();const H2=Ih(Ej);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jc(){return jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jc.apply(this,arguments)}var ns;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ns||(ns={}));const Bw="popstate";function Cj(t){t===void 0&&(t={});function e(r,o){let{pathname:a="/",search:c="",hash:d=""}=So(r.location.hash.substr(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Ky("",{pathname:a,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let a=r.document.querySelector("base"),c="";if(a&&a.getAttribute("href")){let d=r.location.href,f=d.indexOf("#");c=f===-1?d:d.slice(0,f)}return c+"#"+(typeof o=="string"?o:$2(o))}function i(r,o){fx(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return Tj(e,n,i,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function fx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kj(){return Math.random().toString(36).substr(2,8)}function Pw(t,e){return{usr:t.state,key:t.key,idx:e}}function Ky(t,e,n,i){return n===void 0&&(n=null),jc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?So(e):e,{state:n,key:e&&e.key||i||kj()})}function $2(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function So(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function Tj(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,a=r.history,c=ns.Pop,d=null,f=p();f==null&&(f=0,a.replaceState(jc({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){c=ns.Pop;let E=p(),C=E==null?null:E-f;f=E,d&&d({action:c,location:w.location,delta:C})}function g(E,C){c=ns.Push;let N=Ky(w.location,E,C);n&&n(N,E),f=p()+1;let k=Pw(N,f),M=w.createHref(N);try{a.pushState(k,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(M)}o&&d&&d({action:c,location:w.location,delta:1})}function x(E,C){c=ns.Replace;let N=Ky(w.location,E,C);n&&n(N,E),f=p();let k=Pw(N,f),M=w.createHref(N);a.replaceState(k,"",M),o&&d&&d({action:c,location:w.location,delta:0})}function S(E){let C=r.location.origin!=="null"?r.location.origin:r.location.href,N=typeof E=="string"?E:$2(E);return N=N.replace(/ $/,"%20"),Pt(C,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,C)}let w={get action(){return c},get location(){return t(r,a)},listen(E){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(Bw,m),d=E,()=>{r.removeEventListener(Bw,m),d=null}},createHref(E){return e(r,E)},createURL:S,encodeLocation(E){let C=S(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:x,go(E){return a.go(E)}};return w}var Vw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Vw||(Vw={}));function Mj(t,e,n){return n===void 0&&(n="/"),Nj(t,e,n)}function Nj(t,e,n,i){let r=typeof e=="string"?So(e):e,o=q2(r.pathname||"/",n);if(o==null)return null;let a=U2(t);Aj(a);let c=null;for(let d=0;c==null&&d<a.length;++d){let f=Hj(o);c=Pj(a[d],f)}return c}function U2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,a,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};d.relativePath.startsWith("/")&&(Pt(d.relativePath.startsWith(i),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(i.length));let f=to([i,d.relativePath]),p=n.concat(d);o.children&&o.children.length>0&&(Pt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),U2(o.children,e,p,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:zj(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))r(o,a);else for(let d of F2(o.path))r(o,a,d)}),e}function F2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let a=F2(i.join("/")),c=[];return c.push(...a.map(d=>d===""?o:[o,d].join("/"))),r&&c.push(...a),c.map(d=>t.startsWith("/")&&d===""?"/":d)}function Aj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Bj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const Dj=/^:[\w-]+$/,Oj=3,Rj=2,jj=1,_j=10,Lj=-2,Iw=t=>t==="*";function zj(t,e){let n=t.split("/"),i=n.length;return n.some(Iw)&&(i+=Lj),e&&(i+=Rj),n.filter(r=>!Iw(r)).reduce((r,o)=>r+(Dj.test(o)?Oj:o===""?jj:_j),i)}function Bj(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Pj(t,e,n){let{routesMeta:i}=t,r={},o="/",a=[];for(let c=0;c<i.length;++c){let d=i[c],f=c===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",m=Vj({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},p),g=d.route;if(!m)return null;Object.assign(r,m.params),a.push({params:r,pathname:to([o,m.pathname]),pathnameBase:Kj(to([o,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(o=to([o,m.pathnameBase]))}return a}function Vj(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Ij(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],a=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((f,p,m)=>{let{paramName:g,isOptional:x}=p;if(g==="*"){let w=c[m]||"";a=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const S=c[m];return x&&!S?f[g]=void 0:f[g]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:a,pattern:t}}function Ij(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),fx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,d)=>(i.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function Hj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function q2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function $j(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?So(t):t;return{pathname:n?n.startsWith("/")?n:Uj(n,e):e,search:Gj(i),hash:Xj(r)}}function Uj(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Fg(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qj(t,e){let n=Fj(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Yj(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=So(t):(r=jc({},t),Pt(!r.pathname||!r.pathname.includes("?"),Fg("?","pathname","search",r)),Pt(!r.pathname||!r.pathname.includes("#"),Fg("#","pathname","hash",r)),Pt(!r.search||!r.search.includes("#"),Fg("#","search","hash",r)));let o=t===""||r.pathname==="",a=o?"/":r.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!i&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}c=m>=0?e[m]:"/"}let d=$j(r,c),f=a&&a!=="/"&&a.endsWith("/"),p=(o||a===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||p)&&(d.pathname+="/"),d}const to=t=>t.join("/").replace(/\/\/+/g,"/"),Kj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Gj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Xj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Wj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Y2=["post","put","patch","delete"];new Set(Y2);const Zj=["get",...Y2];new Set(Zj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _c(){return _c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_c.apply(this,arguments)}const hx=j.createContext(null),Qj=j.createContext(null),Hh=j.createContext(null),$h=j.createContext(null),wo=j.createContext({outlet:null,matches:[],isDataRoute:!1}),K2=j.createContext(null);function Uh(){return j.useContext($h)!=null}function G2(){return Uh()||Pt(!1),j.useContext($h).location}function X2(t){j.useContext(Hh).static||j.useLayoutEffect(t)}function Fh(){let{isDataRoute:t}=j.useContext(wo);return t?f4():Jj()}function Jj(){Uh()||Pt(!1);let t=j.useContext(hx),{basename:e,future:n,navigator:i}=j.useContext(Hh),{matches:r}=j.useContext(wo),{pathname:o}=G2(),a=JSON.stringify(qj(r,n.v7_relativeSplatPath)),c=j.useRef(!1);return X2(()=>{c.current=!0}),j.useCallback(function(f,p){if(p===void 0&&(p={}),!c.current)return;if(typeof f=="number"){i.go(f);return}let m=Yj(f,JSON.parse(a),o,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:to([e,m.pathname])),(p.replace?i.replace:i.push)(m,p.state,p)},[e,i,a,o,t])}function e4(){let{matches:t}=j.useContext(wo),e=t[t.length-1];return e?e.params:{}}function t4(t,e){return n4(t,e)}function n4(t,e,n,i){Uh()||Pt(!1);let{navigator:r}=j.useContext(Hh),{matches:o}=j.useContext(wo),a=o[o.length-1],c=a?a.params:{};a&&a.pathname;let d=a?a.pathnameBase:"/";a&&a.route;let f=G2(),p;if(e){var m;let E=typeof e=="string"?So(e):e;d==="/"||(m=E.pathname)!=null&&m.startsWith(d)||Pt(!1),p=E}else p=f;let g=p.pathname||"/",x=g;if(d!=="/"){let E=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=Mj(t,{pathname:x}),w=a4(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:to([d,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:to([d,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,i);return e&&w?j.createElement($h.Provider,{value:{location:_c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ns.Pop}},w):w}function i4(){let t=d4(),e=Wj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,null)}const r4=j.createElement(i4,null);class s4 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(wo.Provider,{value:this.props.routeContext},j.createElement(K2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function o4(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(hx);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(wo.Provider,{value:e},i)}function a4(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(r=n)==null?void 0:r.errors;if(c!=null){let p=a.findIndex(m=>m.route.id&&c?.[m.route.id]!==void 0);p>=0||Pt(!1),a=a.slice(0,Math.min(a.length,p+1))}let d=!1,f=-1;if(n&&i&&i.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:g,errors:x}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||S){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,g)=>{let x,S=!1,w=null,E=null;n&&(x=c&&m.route.id?c[m.route.id]:void 0,w=m.route.errorElement||r4,d&&(f<0&&g===0?(h4("route-fallback"),S=!0,E=null):f===g&&(S=!0,E=m.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,g+1)),N=()=>{let k;return x?k=w:S?k=E:m.route.Component?k=j.createElement(m.route.Component,null):m.route.element?k=m.route.element:k=p,j.createElement(o4,{match:m,routeContext:{outlet:p,matches:C,isDataRoute:n!=null},children:k})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?j.createElement(s4,{location:n.location,revalidation:n.revalidation,component:w,error:x,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}var W2=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(W2||{}),Z2=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Z2||{});function l4(t){let e=j.useContext(hx);return e||Pt(!1),e}function c4(t){let e=j.useContext(Qj);return e||Pt(!1),e}function u4(t){let e=j.useContext(wo);return e||Pt(!1),e}function Q2(t){let e=u4(),n=e.matches[e.matches.length-1];return n.route.id||Pt(!1),n.route.id}function d4(){var t;let e=j.useContext(K2),n=c4(),i=Q2();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function f4(){let{router:t}=l4(W2.UseNavigateStable),e=Q2(Z2.UseNavigateStable),n=j.useRef(!1);return X2(()=>{n.current=!0}),j.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,_c({fromRouteId:e},o)))},[t,e])}const Hw={};function h4(t,e,n){Hw[t]||(Hw[t]=!0)}function p4(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function ma(t){Pt(!1)}function m4(t){let{basename:e="/",children:n=null,location:i,navigationType:r=ns.Pop,navigator:o,static:a=!1,future:c}=t;Uh()&&Pt(!1);let d=e.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:d,navigator:o,static:a,future:_c({v7_relativeSplatPath:!1},c)}),[d,c,o,a]);typeof i=="string"&&(i=So(i));let{pathname:p="/",search:m="",hash:g="",state:x=null,key:S="default"}=i,w=j.useMemo(()=>{let E=q2(p,d);return E==null?null:{location:{pathname:E,search:m,hash:g,state:x,key:S},navigationType:r}},[d,p,m,g,x,S,r]);return w==null?null:j.createElement(Hh.Provider,{value:f},j.createElement($h.Provider,{children:n,value:w}))}function g4(t){let{children:e,location:n}=t;return t4(Gy(e),n)}new Promise(()=>{});function Gy(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let o=[...e,r];if(i.type===j.Fragment){n.push.apply(n,Gy(i.props.children,o));return}i.type!==ma&&Pt(!1),!i.props.index||!i.props.children||Pt(!1);let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Gy(i.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const y4="6";try{window.__reactRouterVersion=y4}catch{}const x4="startTransition",$w=gj[x4];function b4(t){let{basename:e,children:n,future:i,window:r}=t,o=j.useRef();o.current==null&&(o.current=Cj({window:r,v5Compat:!0}));let a=o.current,[c,d]=j.useState({action:a.action,location:a.location}),{v7_startTransition:f}=i||{},p=j.useCallback(m=>{f&&$w?$w(()=>d(m)):d(m)},[d,f]);return j.useLayoutEffect(()=>a.listen(p),[a,p]),j.useEffect(()=>p4(i),[i]),j.createElement(m4,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:i})}var Uw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Uw||(Uw={}));var Fw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Fw||(Fw={}));var J2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},qw=je.createContext&&je.createContext(J2),v4=["attr","size","title"];function S4(t,e){if(t==null)return{};var n=w4(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function w4(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Of.apply(this,arguments)}function Yw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yw(Object(n),!0).forEach(function(i){E4(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yw(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function E4(t,e,n){return e=C4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C4(t){var e=k4(t,"string");return typeof e=="symbol"?e:e+""}function k4(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eT(t){return t&&t.map((e,n)=>je.createElement(e.tag,Rf({key:n},e.attr),eT(e.child)))}function dt(t){return e=>je.createElement(T4,Of({attr:Rf({},t.attr)},e),eT(t.child))}function T4(t){var e=n=>{var{attr:i,size:r,title:o}=t,a=S4(t,v4),c=r||n.size||"1em",d;return n.className&&(d=n.className),t.className&&(d=(d?d+" ":"")+t.className),je.createElement("svg",Of({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,a,{className:d,style:Rf(Rf({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&je.createElement("title",null,o),t.children)};return qw!==void 0?je.createElement(qw.Consumer,null,n=>e(n)):e(J2)}function M4(t){return dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function N4(t){return dt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}const A4=t=>t==="system"||t==="light"||t==="dark";function Ka(){const[t,e]=j.useState(()=>{if(typeof window>"u")return"light";const o=localStorage.getItem("theme");return A4(o)?o:"light"}),[n,i]=j.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return j.useLayoutEffect(()=>{const o=document.documentElement;(c=>{c==="system"?o.classList.toggle("dark",n):o.classList.toggle("dark",c==="dark")})(t);try{localStorage.setItem("theme",t)}catch{}},[t,n]),j.useEffect(()=>{if(typeof window>"u")return;const o=window.matchMedia("(prefers-color-scheme: dark)"),a=c=>{i(c.matches)};return o.addEventListener("change",a),()=>o.removeEventListener("change",a)},[]),{theme:t,setTheme:e,flowColorMode:t==="system"?n?"dark":"light":t}}const qh=()=>{const{theme:t,setTheme:e}=Ka();return v.jsx("button",{onClick:()=>e(t==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:t==="light"?v.jsx(M4,{size:18}):v.jsx(N4,{size:18})})},On={title:"Diagrammatic — Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},Yh=({title:t,description:e,keywords:n,image:i,url:r,type:o="website"})=>(j.useEffect(()=>{document.title=t||On.title;const a=(d,f,p=!1)=>{const m=p?"property":"name";let g=document.querySelector(`meta[${m}="${d}"]`);g?g.content=f:(g=document.createElement("meta"),g.setAttribute(m,d),g.content=f,document.head.appendChild(g))};a("description",e||On.description),a("keywords",n||On.keywords),a("og:title",t||On.title,!0),a("og:description",e||On.description,!0),a("og:image",i||On.image,!0),a("og:url",r||On.url,!0),a("og:type",o,!0),a("twitter:title",t||On.title),a("twitter:description",e||On.description),a("twitter:image",i||On.image),a("twitter:url",r||On.url);let c=document.querySelector('link[rel="canonical"]');c?c.href=r||On.url:(c=document.createElement("link"),c.rel="canonical",c.href=r||On.url,document.head.appendChild(c))},[t,e,n,i,r,o]),null),Kw=()=>{Ka();const t=Fh(),[e,n]=j.useState(!1),[i,r]=j.useState(!1);j.useEffect(()=>{n(!0)},[]),j.useEffect(()=>{const f=()=>{r(window.scrollY>100)};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]);const o=[{icon:"🎯",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"🎨",title:"Free Design Canvas",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"📝",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],a=[{icon:"🧩",title:"45+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"🔗",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"⚡",title:"Custom Properties",description:"Add metadata to any component"},{icon:"🎯",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"🌓",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"💾",title:"Export & Share",description:"Save and share your designs"}],c=[{value:"45+",label:"Components",icon:"🧩"},{value:"1000+",label:"Users",icon:"👥"},{value:"∞",label:"Possibilities",icon:"✨"}],d=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return v.jsxs(v.Fragment,{children:[v.jsx(Yh,{title:"Diagrammatic — Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[v.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),v.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:"🗄️"}),v.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"🔐"}),v.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:"⚡"}),v.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"🌐"}),v.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:"⚙️"}),v.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"📡"}),v.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:"🔗"}),v.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"💾"}),v.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:"🎯"}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"📊"}),v.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:"🔄"}),v.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:"🎨"}),v.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"💡"}),v.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:"✨"}),v.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"🚀"}),v.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:"🌟"})]}),v.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${i?"shadow-lg":""}`,children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{type:"button",onClick:()=>t("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),v.jsx(qh,{})]})]})})}),v.jsx("section",{className:"relative pt-16 pb-20",children:v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[v.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:"🗄️"}),v.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"⚡"}),v.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:"🔗"}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"💾"}),v.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:"📊"}),v.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:"🚀"})]}),v.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:v.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[v.jsx("div",{className:"inline-block mb-6",children:v.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:"✨ Now with 45+ Components & AI Assessment"})}),v.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[v.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),v.jsx("br",{}),v.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),v.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design — practice, learn, and create architecture diagrams with ease"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:c.map((f,p)=>v.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${e?"fade-in-up":"opacity-0 translate-y-5"} ${p===0?"fade-in-up-delay-100":p===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[v.jsx("div",{className:"text-3xl mb-1",children:f.icon}),v.jsx("div",{className:"text-3xl font-bold text-white",children:f.value}),v.jsx("div",{className:"text-sm text-white/80",children:f.label})]},f.label))}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[v.jsxs("button",{type:"button",onClick:()=>t("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"→"})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),v.jsxs("button",{type:"button",onClick:()=>t("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",v.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:"→"})]})]}),v.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required • Free forever • 45+ components"})]})})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching — we've got you covered"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:o.map((f,p)=>v.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${p===0?"delay-0":p===1?"delay-100":"delay-200"}`,onClick:()=>t(f.route),onKeyDown:m=>m.key==="Enter"&&t(f.route),role:"button",tabIndex:0,children:[v.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${f.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:f.icon}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:f.title}),v.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:f.description}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[f.action,v.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]})]},f.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((f,p)=>v.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${p===0?"delay-0":p===1?"delay-[50ms]":p===2?"delay-[100ms]":p===3?"delay-[150ms]":p===4?"delay-[200ms]":"delay-[250ms]"}`,children:[v.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:f.icon}),v.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:f.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed",children:f.description})]},f.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:d.map((f,p)=>v.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[v.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),v.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:f.quote}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:f.author.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold text-theme",children:f.author}),v.jsx("div",{className:"text-muted text-sm",children:f.role})]})]})]})]},`testimonial-${p}`))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:"🎓"})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:"💼"})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:"👨‍🏫"})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]})]})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),v.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),v.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),v.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),v.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),v.jsx("p",{className:"text-muted text-sm",children:"© 2025 Diagrammatic. Built with ❤️ for system designers"})]})})}),v.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `})]})]})};function fr(t){return Array.isArray?Array.isArray(t):iT(t)==="[object Array]"}function D4(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function O4(t){return t==null?"":D4(t)}function ki(t){return typeof t=="string"}function tT(t){return typeof t=="number"}function R4(t){return t===!0||t===!1||j4(t)&&iT(t)=="[object Boolean]"}function nT(t){return typeof t=="object"}function j4(t){return nT(t)&&t!==null}function Rn(t){return t!=null}function qg(t){return!t.trim().length}function iT(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const _4="Incorrect 'index' type",L4=t=>`Invalid value for key ${t}`,z4=t=>`Pattern length exceeds max of ${t}.`,B4=t=>`Missing ${t} property in key`,P4=t=>`Property 'weight' in key '${t}' must be a positive integer`,Gw=Object.prototype.hasOwnProperty;class V4{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(i=>{let r=rT(i);this._keys.push(r),this._keyMap[r.id]=r,n+=r.weight}),this._keys.forEach(i=>{i.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rT(t){let e=null,n=null,i=null,r=1,o=null;if(ki(t)||fr(t))i=t,e=Xw(t),n=Xy(t);else{if(!Gw.call(t,"name"))throw new Error(B4("name"));const a=t.name;if(i=a,Gw.call(t,"weight")&&(r=t.weight,r<=0))throw new Error(P4(a));e=Xw(a),n=Xy(a),o=t.getFn}return{path:e,id:n,weight:r,src:i,getFn:o}}function Xw(t){return fr(t)?t:t.split(".")}function Xy(t){return fr(t)?t.join("."):t}function I4(t,e){let n=[],i=!1;const r=(o,a,c)=>{if(Rn(o))if(!a[c])n.push(o);else{let d=a[c];const f=o[d];if(!Rn(f))return;if(c===a.length-1&&(ki(f)||tT(f)||R4(f)))n.push(O4(f));else if(fr(f)){i=!0;for(let p=0,m=f.length;p<m;p+=1)r(f[p],a,c+1)}else a.length&&r(f,a,c+1)}};return r(t,ki(e)?e.split("."):e,0),i?n:n[0]}const H4={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},$4={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},U4={location:0,threshold:.6,distance:100},F4={useExtendedSearch:!1,getFn:I4,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Re={...$4,...H4,...U4,...F4};const q4=/[^ ]+/g;function Y4(t=1,e=3){const n=new Map,i=Math.pow(10,e);return{get(r){const o=r.match(q4).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*t),c=parseFloat(Math.round(a*i)/i);return n.set(o,c),c},clear(){n.clear()}}}class px{constructor({getFn:e=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){this.norm=Y4(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,i)=>{this._keysMap[n.id]=i})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ki(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();ki(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,i=this.size();n<i;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!Rn(e)||qg(e))return;let i={v:e,i:n,n:this.norm.get(e)};this.records.push(i)}_addObject(e,n){let i={i:n,$:{}};this.keys.forEach((r,o)=>{let a=r.getFn?r.getFn(e):this.getFn(e,r.path);if(Rn(a)){if(fr(a)){let c=[];const d=[{nestedArrIndex:-1,value:a}];for(;d.length;){const{nestedArrIndex:f,value:p}=d.pop();if(Rn(p))if(ki(p)&&!qg(p)){let m={v:p,i:f,n:this.norm.get(p)};c.push(m)}else fr(p)&&p.forEach((m,g)=>{d.push({nestedArrIndex:g,value:m})})}i.$[o]=c}else if(ki(a)&&!qg(a)){let c={v:a,n:this.norm.get(a)};i.$[o]=c}}}),this.records.push(i)}toJSON(){return{keys:this.keys,records:this.records}}}function sT(t,e,{getFn:n=Re.getFn,fieldNormWeight:i=Re.fieldNormWeight}={}){const r=new px({getFn:n,fieldNormWeight:i});return r.setKeys(t.map(rT)),r.setSources(e),r.create(),r}function K4(t,{getFn:e=Re.getFn,fieldNormWeight:n=Re.fieldNormWeight}={}){const{keys:i,records:r}=t,o=new px({getFn:e,fieldNormWeight:n});return o.setKeys(i),o.setIndexRecords(r),o}function Ud(t,{errors:e=0,currentLocation:n=0,expectedLocation:i=0,distance:r=Re.distance,ignoreLocation:o=Re.ignoreLocation}={}){const a=e/t.length;if(o)return a;const c=Math.abs(i-n);return r?a+c/r:c?1:a}function G4(t=[],e=Re.minMatchCharLength){let n=[],i=-1,r=-1,o=0;for(let a=t.length;o<a;o+=1){let c=t[o];c&&i===-1?i=o:!c&&i!==-1&&(r=o-1,r-i+1>=e&&n.push([i,r]),i=-1)}return t[o-1]&&o-i>=e&&n.push([i,o-1]),n}const Ys=32;function X4(t,e,n,{location:i=Re.location,distance:r=Re.distance,threshold:o=Re.threshold,findAllMatches:a=Re.findAllMatches,minMatchCharLength:c=Re.minMatchCharLength,includeMatches:d=Re.includeMatches,ignoreLocation:f=Re.ignoreLocation}={}){if(e.length>Ys)throw new Error(z4(Ys));const p=e.length,m=t.length,g=Math.max(0,Math.min(i,m));let x=o,S=g;const w=c>1||d,E=w?Array(m):[];let C;for(;(C=t.indexOf(e,S))>-1;){let P=Ud(e,{currentLocation:C,expectedLocation:g,distance:r,ignoreLocation:f});if(x=Math.min(P,x),S=C+p,w){let B=0;for(;B<p;)E[C+B]=1,B+=1}}S=-1;let N=[],k=1,M=p+m;const D=1<<p-1;for(let P=0;P<p;P+=1){let B=0,I=M;for(;B<I;)Ud(e,{errors:P,currentLocation:g+I,expectedLocation:g,distance:r,ignoreLocation:f})<=x?B=I:M=I,I=Math.floor((M-B)/2+B);M=I;let ee=Math.max(1,g-I+1),K=a?m:Math.min(g+I,m)+p,W=Array(K+2);W[K+1]=(1<<P)-1;for(let z=K;z>=ee;z-=1){let U=z-1,R=n[t.charAt(U)];if(w&&(E[U]=+!!R),W[z]=(W[z+1]<<1|1)&R,P&&(W[z]|=(N[z+1]|N[z])<<1|1|N[z+1]),W[z]&D&&(k=Ud(e,{errors:P,currentLocation:U,expectedLocation:g,distance:r,ignoreLocation:f}),k<=x)){if(x=k,S=U,S<=g)break;ee=Math.max(1,2*g-S)}}if(Ud(e,{errors:P+1,currentLocation:g,expectedLocation:g,distance:r,ignoreLocation:f})>x)break;N=W}const _={isMatch:S>=0,score:Math.max(.001,k)};if(w){const P=G4(E,c);P.length?d&&(_.indices=P):_.isMatch=!1}return _}function W4(t){let e={};for(let n=0,i=t.length;n<i;n+=1){const r=t.charAt(n);e[r]=(e[r]||0)|1<<i-n-1}return e}const jf=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class oT{constructor(e,{location:n=Re.location,threshold:i=Re.threshold,distance:r=Re.distance,includeMatches:o=Re.includeMatches,findAllMatches:a=Re.findAllMatches,minMatchCharLength:c=Re.minMatchCharLength,isCaseSensitive:d=Re.isCaseSensitive,ignoreDiacritics:f=Re.ignoreDiacritics,ignoreLocation:p=Re.ignoreLocation}={}){if(this.options={location:n,threshold:i,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:d,ignoreDiacritics:f,ignoreLocation:p},e=d?e:e.toLowerCase(),e=f?jf(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const m=(x,S)=>{this.chunks.push({pattern:x,alphabet:W4(x),startIndex:S})},g=this.pattern.length;if(g>Ys){let x=0;const S=g%Ys,w=g-S;for(;x<w;)m(this.pattern.substr(x,Ys),x),x+=Ys;if(S){const E=g-Ys;m(this.pattern.substr(E),E)}}else m(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:i,includeMatches:r}=this.options;if(e=n?e:e.toLowerCase(),e=i?jf(e):e,this.pattern===e){let w={isMatch:!0,score:0};return r&&(w.indices=[[0,e.length-1]]),w}const{location:o,distance:a,threshold:c,findAllMatches:d,minMatchCharLength:f,ignoreLocation:p}=this.options;let m=[],g=0,x=!1;this.chunks.forEach(({pattern:w,alphabet:E,startIndex:C})=>{const{isMatch:N,score:k,indices:M}=X4(e,w,E,{location:o+C,distance:a,threshold:c,findAllMatches:d,minMatchCharLength:f,includeMatches:r,ignoreLocation:p});N&&(x=!0),g+=k,N&&M&&(m=[...m,...M])});let S={isMatch:x,score:x?g/this.chunks.length:1};return x&&r&&(S.indices=m),S}}class xs{constructor(e){this.pattern=e}static isMultiMatch(e){return Ww(e,this.multiRegex)}static isSingleMatch(e){return Ww(e,this.singleRegex)}search(){}}function Ww(t,e){const n=t.match(e);return n?n[1]:null}class Z4 extends xs{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Q4 extends xs{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const i=e.indexOf(this.pattern)===-1;return{isMatch:i,score:i?0:1,indices:[0,e.length-1]}}}class J4 extends xs{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class e5 extends xs{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class t5 extends xs{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class n5 extends xs{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class aT extends xs{constructor(e,{location:n=Re.location,threshold:i=Re.threshold,distance:r=Re.distance,includeMatches:o=Re.includeMatches,findAllMatches:a=Re.findAllMatches,minMatchCharLength:c=Re.minMatchCharLength,isCaseSensitive:d=Re.isCaseSensitive,ignoreDiacritics:f=Re.ignoreDiacritics,ignoreLocation:p=Re.ignoreLocation}={}){super(e),this._bitapSearch=new oT(e,{location:n,threshold:i,distance:r,includeMatches:o,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:d,ignoreDiacritics:f,ignoreLocation:p})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class lT extends xs{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,i;const r=[],o=this.pattern.length;for(;(i=e.indexOf(this.pattern,n))>-1;)n=i+o,r.push([i,n-1]);const a=!!r.length;return{isMatch:a,score:a?0:1,indices:r}}}const Wy=[Z4,lT,J4,e5,n5,t5,Q4,aT],Zw=Wy.length,i5=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,r5="|";function s5(t,e={}){return t.split(r5).map(n=>{let i=n.trim().split(i5).filter(o=>o&&!!o.trim()),r=[];for(let o=0,a=i.length;o<a;o+=1){const c=i[o];let d=!1,f=-1;for(;!d&&++f<Zw;){const p=Wy[f];let m=p.isMultiMatch(c);m&&(r.push(new p(m,e)),d=!0)}if(!d)for(f=-1;++f<Zw;){const p=Wy[f];let m=p.isSingleMatch(c);if(m){r.push(new p(m,e));break}}}return r})}const o5=new Set([aT.type,lT.type]);class a5{constructor(e,{isCaseSensitive:n=Re.isCaseSensitive,ignoreDiacritics:i=Re.ignoreDiacritics,includeMatches:r=Re.includeMatches,minMatchCharLength:o=Re.minMatchCharLength,ignoreLocation:a=Re.ignoreLocation,findAllMatches:c=Re.findAllMatches,location:d=Re.location,threshold:f=Re.threshold,distance:p=Re.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:i,includeMatches:r,minMatchCharLength:o,findAllMatches:c,ignoreLocation:a,location:d,threshold:f,distance:p},e=n?e:e.toLowerCase(),e=i?jf(e):e,this.pattern=e,this.query=s5(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:i,isCaseSensitive:r,ignoreDiacritics:o}=this.options;e=r?e:e.toLowerCase(),e=o?jf(e):e;let a=0,c=[],d=0;for(let f=0,p=n.length;f<p;f+=1){const m=n[f];c.length=0,a=0;for(let g=0,x=m.length;g<x;g+=1){const S=m[g],{isMatch:w,indices:E,score:C}=S.search(e);if(w){if(a+=1,d+=C,i){const N=S.constructor.type;o5.has(N)?c=[...c,...E]:c.push(E)}}else{d=0,a=0,c.length=0;break}}if(a){let g={isMatch:!0,score:d/a};return i&&(g.indices=c),g}}return{isMatch:!1,score:1}}}const Zy=[];function l5(...t){Zy.push(...t)}function Qy(t,e){for(let n=0,i=Zy.length;n<i;n+=1){let r=Zy[n];if(r.condition(t,e))return new r(t,e)}return new oT(t,e)}const _f={AND:"$and",OR:"$or"},Jy={PATH:"$path",PATTERN:"$val"},e0=t=>!!(t[_f.AND]||t[_f.OR]),c5=t=>!!t[Jy.PATH],u5=t=>!fr(t)&&nT(t)&&!e0(t),Qw=t=>({[_f.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function cT(t,e,{auto:n=!0}={}){const i=r=>{let o=Object.keys(r);const a=c5(r);if(!a&&o.length>1&&!e0(r))return i(Qw(r));if(u5(r)){const d=a?r[Jy.PATH]:o[0],f=a?r[Jy.PATTERN]:r[d];if(!ki(f))throw new Error(L4(d));const p={keyId:Xy(d),pattern:f};return n&&(p.searcher=Qy(f,e)),p}let c={children:[],operator:o[0]};return o.forEach(d=>{const f=r[d];fr(f)&&f.forEach(p=>{c.children.push(i(p))})}),c};return e0(t)||(t=Qw(t)),i(t)}function d5(t,{ignoreFieldNorm:e=Re.ignoreFieldNorm}){t.forEach(n=>{let i=1;n.matches.forEach(({key:r,norm:o,score:a})=>{const c=r?r.weight:null;i*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(e?1:o))}),n.score=i})}function f5(t,e){const n=t.matches;e.matches=[],Rn(n)&&n.forEach(i=>{if(!Rn(i.indices)||!i.indices.length)return;const{indices:r,value:o}=i;let a={indices:r,value:o};i.key&&(a.key=i.key.src),i.idx>-1&&(a.refIndex=i.idx),e.matches.push(a)})}function h5(t,e){e.score=t.score}function p5(t,e,{includeMatches:n=Re.includeMatches,includeScore:i=Re.includeScore}={}){const r=[];return n&&r.push(f5),i&&r.push(h5),t.map(o=>{const{idx:a}=o,c={item:e[a],refIndex:a};return r.length&&r.forEach(d=>{d(o,c)}),c})}class Eo{constructor(e,n={},i){this.options={...Re,...n},this.options.useExtendedSearch,this._keyStore=new V4(this.options.keys),this.setCollection(e,i)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof px))throw new Error(_4);this._myIndex=n||sT(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Rn(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let i=0,r=this._docs.length;i<r;i+=1){const o=this._docs[i];e(o,i)&&(this.removeAt(i),i-=1,r-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:i,includeScore:r,shouldSort:o,sortFn:a,ignoreFieldNorm:c}=this.options;let d=ki(e)?ki(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return d5(d,{ignoreFieldNorm:c}),o&&d.sort(a),tT(n)&&n>-1&&(d=d.slice(0,n)),p5(d,this._docs,{includeMatches:i,includeScore:r})}_searchStringList(e){const n=Qy(e,this.options),{records:i}=this._myIndex,r=[];return i.forEach(({v:o,i:a,n:c})=>{if(!Rn(o))return;const{isMatch:d,score:f,indices:p}=n.searchIn(o);d&&r.push({item:o,idx:a,matches:[{score:f,value:o,norm:c,indices:p}]})}),r}_searchLogical(e){const n=cT(e,this.options),i=(c,d,f)=>{if(!c.children){const{keyId:m,searcher:g}=c,x=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(d,m),searcher:g});return x&&x.length?[{idx:f,item:d,matches:x}]:[]}const p=[];for(let m=0,g=c.children.length;m<g;m+=1){const x=c.children[m],S=i(x,d,f);if(S.length)p.push(...S);else if(c.operator===_f.AND)return[]}return p},r=this._myIndex.records,o={},a=[];return r.forEach(({$:c,i:d})=>{if(Rn(c)){let f=i(n,c,d);f.length&&(o[d]||(o[d]={idx:d,item:c,matches:[]},a.push(o[d])),f.forEach(({matches:p})=>{o[d].matches.push(...p)}))}}),a}_searchObjectList(e){const n=Qy(e,this.options),{keys:i,records:r}=this._myIndex,o=[];return r.forEach(({$:a,i:c})=>{if(!Rn(a))return;let d=[];i.forEach((f,p)=>{d.push(...this._findMatches({key:f,value:a[p],searcher:n}))}),d.length&&o.push({idx:c,item:a,matches:d})}),o}_findMatches({key:e,value:n,searcher:i}){if(!Rn(n))return[];let r=[];if(fr(n))n.forEach(({v:o,i:a,n:c})=>{if(!Rn(o))return;const{isMatch:d,score:f,indices:p}=i.searchIn(o);d&&r.push({score:f,key:e,value:o,idx:a,norm:c,indices:p})});else{const{v:o,n:a}=n,{isMatch:c,score:d,indices:f}=i.searchIn(o);c&&r.push({score:d,key:e,value:o,norm:a,indices:f})}return r}}Eo.version="7.1.0";Eo.createIndex=sT;Eo.parseIndex=K4;Eo.config=Re;Eo.parseQuery=cT;l5(a5);const m5=()=>{Ka();const t=Fh(),[e,n]=j.useState("All"),[i,r]=j.useState("All"),[o,a]=j.useState(""),[c,d]=j.useState([]),[f,p]=j.useState(!0),[m,g]=j.useState(null);j.useEffect(()=>{(async()=>{try{p(!0),g(null);const k=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!k.ok)throw new Error(`Failed to fetch problems: ${k.status} ${k.statusText}`);const M=await k.json();d(M)}catch(N){g(N instanceof Error?N.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",N)}finally{p(!1)}})()},[]);const x=j.useMemo(()=>{const C=o?.trim()??"";let N=c;return C.length>0&&(N=new Eo(c,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(C).map(M=>M.item)),N.filter(k=>{const M=e==="All"||k.difficulty===e,D=i==="All"||k.category===i;return M&&D})},[e,i,o,c]),S=["All",...Array.from(new Set(c.map(C=>C.category)))],w=["All","Easy","Medium","Hard"],E=C=>{switch(C){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return v.jsxs(v.Fragment,{children:[v.jsx(Yh,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:f?"Loading...":`${x.length} problems available`}),v.jsx(qh,{})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),f&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),m&&v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),v.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),v.jsx("div",{className:"text-muted text-sm mb-6",children:m}),v.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!f&&!m&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:"🔍 Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:o,onChange:C=>a(C.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:"📊 Difficulty"}),v.jsx("select",{id:"difficulty-select",value:e,onChange:C=>n(C.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:w.map(C=>v.jsx("option",{value:C,children:C},C))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:"🏷️ Category"}),v.jsx("select",{id:"category-select",value:i,onChange:C=>r(C.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:S.map(C=>v.jsx("option",{value:C,children:C},C))})]})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:x.map((C,N)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${N===0?"delay-0":N===1?"delay-100":N===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:C.title}),v.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${E(C.difficulty)}`,children:C.difficulty})]}),v.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:C.description}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:"🏷️"})," ",C.category]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:"⏱️"})," ",C.estimated_time]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[C.tags.slice(0,3).map(k=>v.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:k},k)),C.tags.length>3&&v.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",C.tags.length-3," more"]})]}),v.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),t(`/playground/${C.id}`)},"aria-label":`Start ${C.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem →"})]})]},C.id))}),x.length===0&&!f&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:"🔍"}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),v.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]})]})},mx=j.createContext({});function gx(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const yx=typeof window<"u",uT=yx?j.useLayoutEffect:j.useEffect,Kh=j.createContext(null);function xx(t,e){t.indexOf(e)===-1&&t.push(e)}function bx(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const hr=(t,e,n)=>n>e?e:n<t?t:n;let vx=()=>{};const pr={},dT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function fT(t){return typeof t=="object"&&t!==null}const hT=t=>/^0[^.\s]+$/u.test(t);function Sx(t){let e;return()=>(e===void 0&&(e=t()),e)}const Jn=t=>t,g5=(t,e)=>n=>e(t(n)),cu=(...t)=>t.reduce(g5),Lc=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class wx{constructor(){this.subscriptions=[]}add(e){return xx(this.subscriptions,e),()=>bx(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Mi=t=>t*1e3,Zn=t=>t/1e3;function pT(t,e){return e?t*(1e3/e):0}const mT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,y5=1e-7,x5=12;function b5(t,e,n,i,r){let o,a,c=0;do a=e+(n-e)/2,o=mT(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>y5&&++c<x5);return a}function uu(t,e,n,i){if(t===e&&n===i)return Jn;const r=o=>b5(o,0,1,t,n);return o=>o===0||o===1?o:mT(r(o),e,i)}const gT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,yT=t=>e=>1-t(1-e),xT=uu(.33,1.53,.69,.99),Ex=yT(xT),bT=gT(Ex),vT=t=>(t*=2)<1?.5*Ex(t):.5*(2-Math.pow(2,-10*(t-1))),Cx=t=>1-Math.sin(Math.acos(t)),ST=yT(Cx),wT=gT(Cx),v5=uu(.42,0,1,1),S5=uu(0,0,.58,1),ET=uu(.42,0,.58,1),w5=t=>Array.isArray(t)&&typeof t[0]!="number",CT=t=>Array.isArray(t)&&typeof t[0]=="number",E5={linear:Jn,easeIn:v5,easeInOut:ET,easeOut:S5,circIn:Cx,circInOut:wT,circOut:ST,backIn:Ex,backInOut:bT,backOut:xT,anticipate:vT},C5=t=>typeof t=="string",Jw=t=>{if(CT(t)){vx(t.length===4);const[e,n,i,r]=t;return uu(e,n,i,r)}else if(C5(t))return E5[t];return t},Fd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function k5(t,e){let n=new Set,i=new Set,r=!1,o=!1;const a=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(p){a.has(p)&&(f.schedule(p),t()),p(c)}const f={schedule:(p,m=!1,g=!1)=>{const S=g&&r?n:i;return m&&a.add(p),S.has(p)||S.add(p),p},cancel:p=>{i.delete(p),a.delete(p)},process:p=>{if(c=p,r){o=!0;return}r=!0,[n,i]=[i,n],n.forEach(d),n.clear(),r=!1,o&&(o=!1,f.process(p))}};return f}const T5=40;function kT(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Fd.reduce((k,M)=>(k[M]=k5(o),k),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:p,update:m,preRender:g,render:x,postRender:S}=a,w=()=>{const k=pr.useManualTiming?r.timestamp:performance.now();n=!1,pr.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(k-r.timestamp,T5),1)),r.timestamp=k,r.isProcessing=!0,c.process(r),d.process(r),f.process(r),p.process(r),m.process(r),g.process(r),x.process(r),S.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(w))},E=()=>{n=!0,i=!0,r.isProcessing||t(w)};return{schedule:Fd.reduce((k,M)=>{const D=a[M];return k[M]=(_,P=!1,B=!1)=>(n||E(),D.schedule(_,P,B)),k},{}),cancel:k=>{for(let M=0;M<Fd.length;M++)a[Fd[M]].cancel(k)},state:r,steps:a}}const{schedule:ut,cancel:ps,state:Zt,steps:Yg}=kT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jn,!0);let gf;function M5(){gf=void 0}const Sn={now:()=>(gf===void 0&&Sn.set(Zt.isProcessing||pr.useManualTiming?Zt.timestamp:performance.now()),gf),set:t=>{gf=t,queueMicrotask(M5)}},TT=t=>e=>typeof e=="string"&&e.startsWith(t),kx=TT("--"),N5=TT("var(--"),Tx=t=>N5(t)?A5.test(t.split("/*")[0].trim()):!1,A5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ga={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zc={...Ga,transform:t=>hr(0,1,t)},qd={...Ga,default:1},gc=t=>Math.round(t*1e5)/1e5,Mx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function D5(t){return t==null}const O5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Nx=(t,e)=>n=>!!(typeof n=="string"&&O5.test(n)&&n.startsWith(t)||e&&!D5(n)&&Object.prototype.hasOwnProperty.call(n,e)),MT=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,c]=i.match(Mx);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:c!==void 0?parseFloat(c):1}},R5=t=>hr(0,255,t),Kg={...Ga,transform:t=>Math.round(R5(t))},Gs={test:Nx("rgb","red"),parse:MT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Kg.transform(t)+", "+Kg.transform(e)+", "+Kg.transform(n)+", "+gc(zc.transform(i))+")"};function j5(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const t0={test:Nx("#"),parse:j5,transform:Gs.transform},du=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Gr=du("deg"),Ni=du("%"),Oe=du("px"),_5=du("vh"),L5=du("vw"),eE={...Ni,parse:t=>Ni.parse(t)/100,transform:t=>Ni.transform(t*100)},va={test:Nx("hsl","hue"),parse:MT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Ni.transform(gc(e))+", "+Ni.transform(gc(n))+", "+gc(zc.transform(i))+")"},Dt={test:t=>Gs.test(t)||t0.test(t)||va.test(t),parse:t=>Gs.test(t)?Gs.parse(t):va.test(t)?va.parse(t):t0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Gs.transform(t):va.transform(t),getAnimatableNone:t=>{const e=Dt.parse(t);return e.alpha=0,Dt.transform(e)}},z5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function B5(t){return isNaN(t)&&typeof t=="string"&&(t.match(Mx)?.length||0)+(t.match(z5)?.length||0)>0}const NT="number",AT="color",P5="var",V5="var(",tE="${}",I5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bc(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(I5,d=>(Dt.test(d)?(i.color.push(o),r.push(AT),n.push(Dt.parse(d))):d.startsWith(V5)?(i.var.push(o),r.push(P5),n.push(d)):(i.number.push(o),r.push(NT),n.push(parseFloat(d))),++o,tE)).split(tE);return{values:n,split:c,indexes:i,types:r}}function DT(t){return Bc(t).values}function OT(t){const{split:e,types:n}=Bc(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const c=n[a];c===NT?o+=gc(r[a]):c===AT?o+=Dt.transform(r[a]):o+=r[a]}return o}}const H5=t=>typeof t=="number"?0:Dt.test(t)?Dt.getAnimatableNone(t):t;function $5(t){const e=DT(t);return OT(t)(e.map(H5))}const ms={test:B5,parse:DT,createTransformer:OT,getAnimatableNone:$5};function Gg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function U5({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=Gg(d,c,t+1/3),o=Gg(d,c,t),a=Gg(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function Lf(t,e){return n=>n>0?e:t}const mt=(t,e,n)=>t+(e-t)*n,Xg=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},F5=[t0,Gs,va],q5=t=>F5.find(e=>e.test(t));function nE(t){const e=q5(t);if(!e)return!1;let n=e.parse(t);return e===va&&(n=U5(n)),n}const iE=(t,e)=>{const n=nE(t),i=nE(e);if(!n||!i)return Lf(t,e);const r={...n};return o=>(r.red=Xg(n.red,i.red,o),r.green=Xg(n.green,i.green,o),r.blue=Xg(n.blue,i.blue,o),r.alpha=mt(n.alpha,i.alpha,o),Gs.transform(r))},n0=new Set(["none","hidden"]);function Y5(t,e){return n0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function K5(t,e){return n=>mt(t,e,n)}function Ax(t){return typeof t=="number"?K5:typeof t=="string"?Tx(t)?Lf:Dt.test(t)?iE:W5:Array.isArray(t)?RT:typeof t=="object"?Dt.test(t)?iE:G5:Lf}function RT(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>Ax(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function G5(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=Ax(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function X5(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],a=t.indexes[o][i[o]],c=t.values[a]??0;n[r]=c,i[o]++}return n}const W5=(t,e)=>{const n=ms.createTransformer(e),i=Bc(t),r=Bc(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?n0.has(t)&&!r.values.length||n0.has(e)&&!i.values.length?Y5(t,e):cu(RT(X5(i,r),r.values),n):Lf(t,e)};function jT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?mt(t,e,n):Ax(t)(t,e)}const Z5=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ut.update(e,n),stop:()=>ps(e),now:()=>Zt.isProcessing?Zt.timestamp:Sn.now()}},_T=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=Math.round(t(o/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},zf=2e4;function Dx(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<zf;)e+=n,i=t.next(e);return e>=zf?1/0:e}function Q5(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(Dx(i),zf);return{type:"keyframes",ease:o=>i.next(r*o).value/e,duration:Zn(r)}}const J5=5;function LT(t,e,n){const i=Math.max(e-J5,0);return pT(n-t(i),e-i)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wg=.001;function e_({duration:t=vt.duration,bounce:e=vt.bounce,velocity:n=vt.velocity,mass:i=vt.mass}){let r,o,a=1-e;a=hr(vt.minDamping,vt.maxDamping,a),t=hr(vt.minDuration,vt.maxDuration,Zn(t)),a<1?(r=f=>{const p=f*a,m=p*t,g=p-n,x=i0(f,a),S=Math.exp(-m);return Wg-g/x*S},o=f=>{const m=f*a*t,g=m*n+n,x=Math.pow(a,2)*Math.pow(f,2)*t,S=Math.exp(-m),w=i0(Math.pow(f,2),a);return(-r(f)+Wg>0?-1:1)*((g-x)*S)/w}):(r=f=>{const p=Math.exp(-f*t),m=(f-n)*t+1;return-Wg+p*m},o=f=>{const p=Math.exp(-f*t),m=(n-f)*(t*t);return p*m});const c=5/t,d=n_(r,o,c);if(t=Mi(t),isNaN(d))return{stiffness:vt.stiffness,damping:vt.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const t_=12;function n_(t,e,n){let i=n;for(let r=1;r<t_;r++)i=i-t(i)/e(i);return i}function i0(t,e){return t*Math.sqrt(1-e*e)}const i_=["duration","bounce"],r_=["stiffness","damping","mass"];function rE(t,e){return e.some(n=>t[n]!==void 0)}function s_(t){let e={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...t};if(!rE(t,r_)&&rE(t,i_))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*hr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:vt.mass,stiffness:r,damping:o}}else{const n=e_(t);e={...e,...n,mass:vt.mass},e.isResolvedFromDuration=!0}return e}function Bf(t=vt.visualDuration,e=vt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:f,mass:p,duration:m,velocity:g,isResolvedFromDuration:x}=s_({...n,velocity:-Zn(n.velocity||0)}),S=g||0,w=f/(2*Math.sqrt(d*p)),E=a-o,C=Zn(Math.sqrt(d/p)),N=Math.abs(E)<5;i||(i=N?vt.restSpeed.granular:vt.restSpeed.default),r||(r=N?vt.restDelta.granular:vt.restDelta.default);let k;if(w<1){const D=i0(C,w);k=_=>{const P=Math.exp(-w*C*_);return a-P*((S+w*C*E)/D*Math.sin(D*_)+E*Math.cos(D*_))}}else if(w===1)k=D=>a-Math.exp(-C*D)*(E+(S+C*E)*D);else{const D=C*Math.sqrt(w*w-1);k=_=>{const P=Math.exp(-w*C*_),B=Math.min(D*_,300);return a-P*((S+w*C*E)*Math.sinh(B)+D*E*Math.cosh(B))/D}}const M={calculatedDuration:x&&m||null,next:D=>{const _=k(D);if(x)c.done=D>=m;else{let P=D===0?S:0;w<1&&(P=D===0?Mi(S):LT(k,D,_));const B=Math.abs(P)<=i,I=Math.abs(a-_)<=r;c.done=B&&I}return c.value=c.done?a:_,c},toString:()=>{const D=Math.min(Dx(M),zf),_=_T(P=>M.next(D*P).value,D,30);return D+"ms "+_},toTransition:()=>{}};return M}Bf.applyToOptions=t=>{const e=Q5(t,100,Bf);return t.ease=e.ease,t.duration=Mi(e.duration),t.type="keyframes",t};function r0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:c,max:d,restDelta:f=.5,restSpeed:p}){const m=t[0],g={done:!1,value:m},x=B=>c!==void 0&&B<c||d!==void 0&&B>d,S=B=>c===void 0?d:d===void 0||Math.abs(c-B)<Math.abs(d-B)?c:d;let w=n*e;const E=m+w,C=a===void 0?E:a(E);C!==E&&(w=C-m);const N=B=>-w*Math.exp(-B/i),k=B=>C+N(B),M=B=>{const I=N(B),ee=k(B);g.done=Math.abs(I)<=f,g.value=g.done?C:ee};let D,_;const P=B=>{x(g.value)&&(D=B,_=Bf({keyframes:[g.value,S(g.value)],velocity:LT(k,B,g.value),damping:r,stiffness:o,restDelta:f,restSpeed:p}))};return P(0),{calculatedDuration:null,next:B=>{let I=!1;return!_&&D===void 0&&(I=!0,M(B),P(B)),D!==void 0&&B>=D?_.next(B-D):(!I&&M(B),g)}}}function o_(t,e,n){const i=[],r=n||pr.mix||jT,o=t.length-1;for(let a=0;a<o;a++){let c=r(t[a],t[a+1]);if(e){const d=Array.isArray(e)?e[a]||Jn:e;c=cu(d,c)}i.push(c)}return i}function a_(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(vx(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=o_(e,i,r),d=c.length,f=p=>{if(a&&p<t[0])return e[0];let m=0;if(d>1)for(;m<t.length-2&&!(p<t[m+1]);m++);const g=Lc(t[m],t[m+1],p);return c[m](g)};return n?p=>f(hr(t[0],t[o-1],p)):f}function l_(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Lc(0,e,i);t.push(mt(n,1,r))}}function c_(t){const e=[0];return l_(e,t.length-1),e}function u_(t,e){return t.map(n=>n*e)}function d_(t,e){return t.map(()=>e||ET).splice(0,t.length-1)}function yc({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=w5(i)?i.map(Jw):Jw(i),o={done:!1,value:e[0]},a=u_(n&&n.length===e.length?n:c_(e),t),c=a_(a,e,{ease:Array.isArray(r)?r:d_(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const f_=t=>t!==null;function Ox(t,{repeat:e,repeatType:n="loop"},i,r=1){const o=t.filter(f_),c=r<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||i===void 0?o[c]:i}const h_={decay:r0,inertia:r0,tween:yc,keyframes:yc,spring:Bf};function zT(t){typeof t.type=="string"&&(t.type=h_[t.type])}class Rx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const p_=t=>t/100;class jx extends Rx{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Sn.now()&&this.tick(Sn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;zT(e);const{type:n=yc,repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=e;let{keyframes:c}=e;const d=n||yc;d!==yc&&typeof c[0]!="number"&&(this.mixKeyframes=cu(p_,jT(c[0],c[1])),c=[0,100]);const f=d({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Dx(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:p,repeat:m,repeatType:g,repeatDelay:x,type:S,onUpdate:w,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>r;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,M=i;if(m){const B=Math.min(this.currentTime,r)/c;let I=Math.floor(B),ee=B%1;!ee&&B>=1&&(ee=1),ee===1&&I--,I=Math.min(I,m+1),!!(I%2)&&(g==="reverse"?(ee=1-ee,x&&(ee-=x/c)):g==="mirror"&&(M=a)),k=hr(0,1,ee)*c}const D=N?{done:!1,value:p[0]}:M.next(k);o&&(D.value=o(D.value));let{done:_}=D;!N&&d!==null&&(_=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return P&&S!==r0&&(D.value=Ox(p,this.options,E,this.speed)),w&&w(D.value),P&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Zn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Zn(e)}get time(){return Zn(this.currentTime)}set time(e){e=Mi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Sn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Zn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Z5,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Sn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function m_(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Xs=t=>t*180/Math.PI,s0=t=>{const e=Xs(Math.atan2(t[1],t[0]));return o0(e)},g_={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:s0,rotateZ:s0,skewX:t=>Xs(Math.atan(t[1])),skewY:t=>Xs(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},o0=t=>(t=t%360,t<0&&(t+=360),t),sE=s0,oE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),aE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),y_={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:oE,scaleY:aE,scale:t=>(oE(t)+aE(t))/2,rotateX:t=>o0(Xs(Math.atan2(t[6],t[5]))),rotateY:t=>o0(Xs(Math.atan2(-t[2],t[0]))),rotateZ:sE,rotate:sE,skewX:t=>Xs(Math.atan(t[4])),skewY:t=>Xs(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function a0(t){return t.includes("scale")?1:0}function l0(t,e){if(!t||t==="none")return a0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=y_,r=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=g_,r=c}if(!r)return a0(e);const o=i[e],a=r[1].split(",").map(b_);return typeof o=="function"?o(a):a[o]}const x_=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return l0(n,e)};function b_(t){return parseFloat(t.trim())}const Xa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wa=new Set(Xa),lE=t=>t===Ga||t===Oe,v_=new Set(["x","y","z"]),S_=Xa.filter(t=>!v_.has(t));function w_(t){const e=[];return S_.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const no={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>l0(e,"x"),y:(t,{transform:e})=>l0(e,"y")};no.translateX=no.x;no.translateY=no.y;const io=new Set;let c0=!1,u0=!1,d0=!1;function BT(){if(u0){const t=Array.from(io).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=w_(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{i.getValue(o)?.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}u0=!1,c0=!1,io.forEach(t=>t.complete(d0)),io.clear()}function PT(){io.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(u0=!0)})}function E_(){d0=!0,PT(),BT(),d0=!1}class _x{constructor(e,n,i,r,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(io.add(this),c0||(c0=!0,ut.read(PT),ut.resolveKeyframes(BT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const o=r?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const c=i.readValue(n,a);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}m_(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),io.delete(this)}cancel(){this.state==="scheduled"&&(io.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C_=t=>t.startsWith("--");function k_(t,e,n){C_(e)?t.style.setProperty(e,n):t.style[e]=n}const T_=Sx(()=>window.ScrollTimeline!==void 0),M_={};function N_(t,e){const n=Sx(t);return()=>M_[e]??n()}const VT=N_(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cc=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,cE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cc([0,.65,.55,1]),circOut:cc([.55,0,1,.45]),backIn:cc([.31,.01,.66,-.59]),backOut:cc([.33,1.53,.69,.99])};function IT(t,e){if(t)return typeof t=="function"?VT()?_T(t,e):"ease-out":CT(t)?cc(t):Array.isArray(t)?t.map(n=>IT(n,e)||cE.easeOut):cE[t]}function A_(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:c="easeOut",times:d}={},f=void 0){const p={[e]:n};d&&(p.offset=d);const m=IT(c,r);Array.isArray(m)&&(p.easing=m);const g={delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),t.animate(p,g)}function HT(t){return typeof t=="function"&&"applyToOptions"in t}function D_({type:t,...e}){return HT(t)&&VT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class O_ extends Rx{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,vx(typeof e.type!="string");const f=D_(e);this.animation=A_(n,i,r,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=Ox(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):k_(n,i,p),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Zn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Zn(e)}get time(){return Zn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Mi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&T_()?(this.animation.timeline=e,Jn):n(this)}}const $T={anticipate:vT,backInOut:bT,circInOut:wT};function R_(t){return t in $T}function j_(t){typeof t.ease=="string"&&R_(t.ease)&&(t.ease=$T[t.ease])}const uE=10;class __ extends O_{constructor(e){j_(e),zT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new jx({...a,autoplay:!1}),d=Mi(this.finishedTime??this.time);n.setWithVelocity(c.sample(d-uE).value,c.sample(d).value,uE),c.stop()}}const dE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ms.test(t)||t==="0")&&!t.startsWith("url("));function L_(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function z_(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=dE(r,e),c=dE(o,e);return!a||!c?!1:L_(t)||(n==="spring"||HT(n))&&i}function f0(t){t.duration=0,t.type="keyframes"}const B_=new Set(["opacity","clipPath","filter","transform"]),P_=Sx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function V_(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:o,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return P_()&&n&&B_.has(n)&&(n!=="transform"||!f)&&!d&&!i&&r!=="mirror"&&o!==0&&a!=="inertia"}const I_=40;class H_ extends Rx{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",keyframes:c,name:d,motionValue:f,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Sn.now();const g={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,name:d,motionValue:f,element:p,...m},x=p?.KeyframeResolver||_x;this.keyframeResolver=new x(c,(S,w,E)=>this.onKeyframesResolved(S,w,g,!E),d,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:o,type:a,velocity:c,delay:d,isHandoff:f,onUpdate:p}=i;this.resolvedAt=Sn.now(),z_(e,o,a,c)||((pr.instantAnimations||!d)&&p?.(Ox(e,i,n)),e[0]=e[e.length-1],f0(i),i.repeat=0);const g={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>I_?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},x=!f&&V_(g)?new __({...g,element:g.motionValue.owner.current}):new jx(g);x.finished.then(()=>this.notifyFinished()).catch(Jn),this.pendingTimeline&&(this.stopTimeline=x.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=x}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),E_()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const $_=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function U_(t){const e=$_.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function UT(t,e,n=1){const[i,r]=U_(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return dT(a)?parseFloat(a):a}return Tx(r)?UT(r,e,n+1):r}function Lx(t,e){return t?.[e]??t?.default??t}const FT=new Set(["width","height","top","left","right","bottom",...Xa]),F_={test:t=>t==="auto",parse:t=>t},qT=t=>e=>e.test(t),YT=[Ga,Oe,Ni,Gr,L5,_5,F_],fE=t=>YT.find(qT(t));function q_(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||hT(t):!0}const Y_=new Set(["brightness","contrast","saturate","opacity"]);function K_(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Mx)||[];if(!i)return t;const r=n.replace(i,"");let o=Y_.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const G_=/\b([a-z-]*)\(.*?\)/gu,h0={...ms,getAnimatableNone:t=>{const e=t.match(G_);return e?e.map(K_).join(" "):t}},hE={...Ga,transform:Math.round},X_={rotate:Gr,rotateX:Gr,rotateY:Gr,rotateZ:Gr,scale:qd,scaleX:qd,scaleY:qd,scaleZ:qd,skew:Gr,skewX:Gr,skewY:Gr,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:zc,originX:eE,originY:eE,originZ:Oe},zx={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...X_,zIndex:hE,fillOpacity:zc,strokeOpacity:zc,numOctaves:hE},W_={...zx,color:Dt,backgroundColor:Dt,outlineColor:Dt,fill:Dt,stroke:Dt,borderColor:Dt,borderTopColor:Dt,borderRightColor:Dt,borderBottomColor:Dt,borderLeftColor:Dt,filter:h0,WebkitFilter:h0},KT=t=>W_[t];function GT(t,e){let n=KT(t);return n!==h0&&(n=ms),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Z_=new Set(["auto","none","0"]);function Q_(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!Z_.has(o)&&Bc(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=GT(n,r)}class J_ extends _x{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Tx(f))){const p=UT(f,n.current);p!==void 0&&(e[d]=p),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!FT.has(i)||e.length!==2)return;const[r,o]=e,a=fE(r),c=fE(o);if(a!==c)if(lE(a)&&lE(c))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else no[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||q_(e[r]))&&i.push(r);i.length&&Q_(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=no[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=no[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function eL(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const XT=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function WT(t){return fT(t)&&"offsetHeight"in t}const pE=30,tL=t=>!isNaN(parseFloat(t));class nL{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Sn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wx);const i=this.events[e].add(n);return e==="change"?()=>{i(),ut.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>pE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,pE);return pT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ja(t,e){return new nL(t,e)}const{schedule:Bx}=kT(queueMicrotask,!1),ai={x:!1,y:!1};function ZT(){return ai.x||ai.y}function iL(t){return t==="x"||t==="y"?ai[t]?null:(ai[t]=!0,()=>{ai[t]=!1}):ai.x||ai.y?null:(ai.x=ai.y=!0,()=>{ai.x=ai.y=!1})}function QT(t,e){const n=eL(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function mE(t){return!(t.pointerType==="touch"||ZT())}function rL(t,e,n={}){const[i,r,o]=QT(t,n),a=c=>{if(!mE(c))return;const{target:d}=c,f=e(d,c);if(typeof f!="function"||!d)return;const p=m=>{mE(m)&&(f(m),d.removeEventListener("pointerleave",p))};d.addEventListener("pointerleave",p,r)};return i.forEach(c=>{c.addEventListener("pointerenter",a,r)}),o}const JT=(t,e)=>e?t===e?!0:JT(t,e.parentElement):!1,Px=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oL(t){return sL.has(t.tagName)||t.tabIndex!==-1}const yf=new WeakSet;function gE(t){return e=>{e.key==="Enter"&&t(e)}}function Zg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aL=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=gE(()=>{if(yf.has(n))return;Zg(n,"down");const r=gE(()=>{Zg(n,"up")}),o=()=>Zg(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function yE(t){return Px(t)&&!ZT()}function lL(t,e,n={}){const[i,r,o]=QT(t,n),a=c=>{const d=c.currentTarget;if(!yE(c))return;yf.add(d);const f=e(d,c),p=(x,S)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",g),yf.has(d)&&yf.delete(d),yE(x)&&typeof f=="function"&&f(x,{success:S})},m=x=>{p(x,d===window||d===document||n.useGlobalTarget||JT(d,x.target))},g=x=>{p(x,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",g,r)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",a,r),WT(c)&&(c.addEventListener("focus",f=>aL(f,r)),!oL(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function eM(t){return fT(t)&&"ownerSVGElement"in t}function cL(t){return eM(t)&&t.tagName==="svg"}const sn=t=>!!(t&&t.getVelocity),uL=[...YT,Dt,ms],dL=t=>uL.find(qT(t)),Vx=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function xE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function fL(...t){return e=>{let n=!1;const i=t.map(r=>{const o=xE(r,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():xE(t[r],null)}}}}function hL(...t){return j.useCallback(fL(...t),t)}class pL extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=WT(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function mL({children:t,isPresent:e,anchorX:n,root:i}){const r=j.useId(),o=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=j.useContext(Vx),d=hL(o,t?.ref);return j.useInsertionEffect(()=>{const{width:f,height:p,top:m,left:g,right:x}=a.current;if(e||!o.current||!f||!p)return;const S=n==="left"?`left: ${g}`:`right: ${x}`;o.current.dataset.motionPopId=r;const w=document.createElement("style");c&&(w.nonce=c);const E=i??document.head;return E.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${p}px !important;
            ${S}px !important;
            top: ${m}px !important;
          }
        `),()=>{E.contains(w)&&E.removeChild(w)}},[e]),v.jsx(pL,{isPresent:e,childRef:o,sizeRef:a,children:j.cloneElement(t,{ref:d})})}const gL=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:a,anchorX:c,root:d})=>{const f=gx(yL),p=j.useId();let m=!0,g=j.useMemo(()=>(m=!1,{id:p,initial:e,isPresent:n,custom:r,onExitComplete:x=>{f.set(x,!0);for(const S of f.values())if(!S)return;i&&i()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[n,f,i]);return o&&m&&(g={...g}),j.useMemo(()=>{f.forEach((x,S)=>f.set(S,!1))},[n]),j.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),a==="popLayout"&&(t=v.jsx(mL,{isPresent:n,anchorX:c,root:d,children:t})),v.jsx(Kh.Provider,{value:g,children:t})};function yL(){return new Map}function tM(t=!0){const e=j.useContext(Kh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=j.useId();j.useEffect(()=>{if(t)return r(o)},[t]);const a=j.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Yd=t=>t.key||"";function bE(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const xL=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:a=!1,anchorX:c="left",root:d})=>{const[f,p]=tM(a),m=j.useMemo(()=>bE(t),[t]),g=a&&!f?[]:m.map(Yd),x=j.useRef(!0),S=j.useRef(m),w=gx(()=>new Map),[E,C]=j.useState(m),[N,k]=j.useState(m);uT(()=>{x.current=!1,S.current=m;for(let _=0;_<N.length;_++){const P=Yd(N[_]);g.includes(P)?w.delete(P):w.get(P)!==!0&&w.set(P,!1)}},[N,g.length,g.join("-")]);const M=[];if(m!==E){let _=[...m];for(let P=0;P<N.length;P++){const B=N[P],I=Yd(B);g.includes(I)||(_.splice(P,0,B),M.push(B))}return o==="wait"&&M.length&&(_=M),k(bE(_)),C(m),null}const{forceRender:D}=j.useContext(mx);return v.jsx(v.Fragment,{children:N.map(_=>{const P=Yd(_),B=a&&!f?!1:m===N||g.includes(P),I=()=>{if(w.has(P))w.set(P,!0);else return;let ee=!0;w.forEach(K=>{K||(ee=!1)}),ee&&(D?.(),k(S.current),a&&p?.(),i&&i())};return v.jsx(gL,{isPresent:B,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:o,root:d,onExitComplete:B?void 0:I,anchorX:c,children:_},P)})})},nM=j.createContext({strict:!1}),vE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_a={};for(const t in vE)_a[t]={isEnabled:e=>vE[t].some(n=>!!e[n])};function bL(t){for(const e in t)_a[e]={..._a[e],...t[e]}}const vL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vL.has(t)}let iM=t=>!Pf(t);function SL(t){typeof t=="function"&&(iM=e=>e.startsWith("on")?!Pf(e):t(e))}try{SL(require("@emotion/is-prop-valid").default)}catch{}function wL(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(iM(r)||n===!0&&Pf(r)||!e&&!Pf(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const Gh=j.createContext({});function Xh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Pc(t){return typeof t=="string"||Array.isArray(t)}const Ix=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hx=["initial",...Ix];function Wh(t){return Xh(t.animate)||Hx.some(e=>Pc(t[e]))}function rM(t){return!!(Wh(t)||t.variants)}function EL(t,e){if(Wh(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Pc(n)?n:void 0,animate:Pc(i)?i:void 0}}return t.inherit!==!1?e:{}}function CL(t){const{initial:e,animate:n}=EL(t,j.useContext(Gh));return j.useMemo(()=>({initial:e,animate:n}),[SE(e),SE(n)])}function SE(t){return Array.isArray(t)?t.join(" "):t}const Vc={};function kL(t){for(const e in t)Vc[e]=t[e],kx(e)&&(Vc[e].isCSSVariable=!0)}function sM(t,{layout:e,layoutId:n}){return Wa.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Vc[t]||t==="opacity")}const TL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ML=Xa.length;function NL(t,e,n){let i="",r=!0;for(let o=0;o<ML;o++){const a=Xa[o],c=t[a];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(a.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const f=XT(c,zx[a]);if(!d){r=!1;const p=TL[a]||a;i+=`${p}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function $x(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,c=!1;for(const d in e){const f=e[d];if(Wa.has(d)){a=!0;continue}else if(kx(d)){r[d]=f;continue}else{const p=XT(f,zx[d]);d.startsWith("origin")?(c=!0,o[d]=p):i[d]=p}}if(e.transform||(a||n?i.transform=NL(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:p=0}=o;i.transformOrigin=`${d} ${f} ${p}`}}const Ux=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oM(t,e,n){for(const i in e)!sn(e[i])&&!sM(i,n)&&(t[i]=e[i])}function AL({transformTemplate:t},e){return j.useMemo(()=>{const n=Ux();return $x(n,e,t),Object.assign({},n.vars,n.style)},[e])}function DL(t,e){const n=t.style||{},i={};return oM(i,n,t),Object.assign(i,AL(t,e)),i}function OL(t,e){const n={},i=DL(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const RL={offset:"stroke-dashoffset",array:"stroke-dasharray"},jL={offset:"strokeDashoffset",array:"strokeDasharray"};function _L(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?RL:jL;t[o.offset]=Oe.transform(-i);const a=Oe.transform(e),c=Oe.transform(n);t[o.array]=`${a} ${c}`}function aM(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:o=1,pathOffset:a=0,...c},d,f,p){if($x(t,c,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g}=t;m.transform&&(g.transform=m.transform,delete m.transform),(g.transform||m.transformOrigin)&&(g.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),g.transform&&(g.transformBox=p?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),r!==void 0&&_L(m,r,o,a,!1)}const lM=()=>({...Ux(),attrs:{}}),cM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function LL(t,e,n,i){const r=j.useMemo(()=>{const o=lM();return aM(o,e,cM(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};oM(o,t.style,t),r.style={...o,...r.style}}return r}const zL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fx(t){return typeof t!="string"||t.includes("-")?!1:!!(zL.indexOf(t)>-1||/[A-Z]/u.test(t))}function BL(t,e,n,{latestValues:i},r,o=!1){const c=(Fx(t)?LL:OL)(e,i,r,t),d=wL(e,typeof t=="string",o),f=t!==j.Fragment?{...d,...c,ref:n}:{},{children:p}=e,m=j.useMemo(()=>sn(p)?p.get():p,[p]);return j.createElement(t,{...f,children:m})}function wE(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function qx(t,e,n,i){if(typeof e=="function"){const[r,o]=wE(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=wE(i);e=e(n!==void 0?n:t.custom,r,o)}return e}function xf(t){return sn(t)?t.get():t}function PL({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:VL(n,i,r,t),renderState:e()}}function VL(t,e,n,i){const r={},o=i(t,{});for(const g in o)r[g]=xf(o[g]);let{initial:a,animate:c}=t;const d=Wh(t),f=rM(t);e&&f&&!d&&t.inherit!==!1&&(a===void 0&&(a=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||a===!1;const m=p?c:a;if(m&&typeof m!="boolean"&&!Xh(m)){const g=Array.isArray(m)?m:[m];for(let x=0;x<g.length;x++){const S=qx(t,g[x]);if(S){const{transitionEnd:w,transition:E,...C}=S;for(const N in C){let k=C[N];if(Array.isArray(k)){const M=p?k.length-1:0;k=k[M]}k!==null&&(r[N]=k)}for(const N in w)r[N]=w[N]}}}return r}const uM=t=>(e,n)=>{const i=j.useContext(Gh),r=j.useContext(Kh),o=()=>PL(t,e,i,r);return n?o():gx(o)};function Yx(t,e,n){const{style:i}=t,r={};for(const o in i)(sn(i[o])||e.style&&sn(e.style[o])||sM(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(r[o]=i[o]);return r}const IL=uM({scrapeMotionValuesFromProps:Yx,createRenderState:Ux});function dM(t,e,n){const i=Yx(t,e,n);for(const r in t)if(sn(t[r])||sn(e[r])){const o=Xa.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}const HL=uM({scrapeMotionValuesFromProps:dM,createRenderState:lM}),$L=Symbol.for("motionComponentSymbol");function Sa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function UL(t,e,n){return j.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Sa(n)&&(n.current=i))},[e])}const Kx=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),FL="framerAppearId",fM="data-"+Kx(FL),hM=j.createContext({});function qL(t,e,n,i,r){const{visualElement:o}=j.useContext(Gh),a=j.useContext(nM),c=j.useContext(Kh),d=j.useContext(Vx).reducedMotion,f=j.useRef(null);i=i||a.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,m=j.useContext(hM);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&YL(f.current,n,r,m);const g=j.useRef(!1);j.useInsertionEffect(()=>{p&&g.current&&p.update(n,c)});const x=n[fM],S=j.useRef(!!x&&!window.MotionHandoffIsComplete?.(x)&&window.MotionHasOptimisedAnimation?.(x));return uT(()=>{p&&(g.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),S.current&&p.animationState&&p.animationState.animateChanges())}),j.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(x)}),S.current=!1),p.enteringChildren=void 0)}),p}function YL(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pM(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||c&&Sa(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:d,layoutRoot:f})}function pM(t){if(t)return t.options.allowProjection!==!1?t.projection:pM(t.parent)}function Qg(t,{forwardMotionProps:e=!1}={},n,i){n&&bL(n);const r=Fx(t)?HL:IL;function o(c,d){let f;const p={...j.useContext(Vx),...c,layoutId:KL(c)},{isStatic:m}=p,g=CL(c),x=r(c,m);if(!m&&yx){GL();const S=XL(p);f=S.MeasureLayout,g.visualElement=qL(t,x,p,i,S.ProjectionNode)}return v.jsxs(Gh.Provider,{value:g,children:[f&&g.visualElement?v.jsx(f,{visualElement:g.visualElement,...p}):null,BL(t,c,UL(x,g.visualElement,d),x,m,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=j.forwardRef(o);return a[$L]=t,a}function KL({layoutId:t}){const e=j.useContext(mx).id;return e&&t!==void 0?e+"-"+t:t}function GL(t,e){j.useContext(nM).strict}function XL(t){const{drag:e,layout:n}=_a;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function WL(t,e){if(typeof Proxy>"u")return Qg;const n=new Map,i=(o,a)=>Qg(o,a,t,e),r=(o,a)=>i(o,a);return new Proxy(r,{get:(o,a)=>a==="create"?i:(n.has(a)||n.set(a,Qg(a,void 0,t,e)),n.get(a))})}function mM({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function ZL({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function QL(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Jg(t){return t===void 0||t===1}function p0({scale:t,scaleX:e,scaleY:n}){return!Jg(t)||!Jg(e)||!Jg(n)}function Fs(t){return p0(t)||gM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function gM(t){return EE(t.x)||EE(t.y)}function EE(t){return t&&t!=="0%"}function Vf(t,e,n){const i=t-n,r=e*i;return n+r}function CE(t,e,n,i,r){return r!==void 0&&(t=Vf(t,r,i)),Vf(t,n,i)+e}function m0(t,e=0,n=1,i,r){t.min=CE(t.min,e,n,i,r),t.max=CE(t.max,e,n,i,r)}function yM(t,{x:e,y:n}){m0(t.x,e.translate,e.scale,e.originPoint),m0(t.y,n.translate,n.scale,n.originPoint)}const kE=.999999999999,TE=1.0000000000001;function JL(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let c=0;c<r;c++){o=n[c],a=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ea(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,yM(t,a)),i&&Fs(o.latestValues)&&Ea(t,o.latestValues))}e.x<TE&&e.x>kE&&(e.x=1),e.y<TE&&e.y>kE&&(e.y=1)}function wa(t,e){t.min=t.min+e,t.max=t.max+e}function ME(t,e,n,i,r=.5){const o=mt(t.min,t.max,r);m0(t,e,n,o,i)}function Ea(t,e){ME(t.x,e.x,e.scaleX,e.scale,e.originX),ME(t.y,e.y,e.scaleY,e.scale,e.originY)}function xM(t,e){return mM(QL(t.getBoundingClientRect(),e))}function ez(t,e,n){const i=xM(t,n),{scroll:r}=e;return r&&(wa(i.x,r.offset.x),wa(i.y,r.offset.y)),i}const NE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ca=()=>({x:NE(),y:NE()}),AE=()=>({min:0,max:0}),kt=()=>({x:AE(),y:AE()}),g0={current:null},bM={current:!1};function tz(){if(bM.current=!0,!!yx)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>g0.current=t.matches;t.addEventListener("change",e),e()}else g0.current=!1}const nz=new WeakMap;function iz(t,e,n){for(const i in e){const r=e[i],o=n[i];if(sn(r))t.addValue(i,r);else if(sn(o))t.addValue(i,ja(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,ja(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const DE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rz{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_x,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Sn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ut.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=a;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Wh(n),this.isVariantNode=rM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in m){const x=m[g];d[g]!==void 0&&sn(x)&&x.set(d[g])}}mount(e){this.current=e,nz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),bM.current||tz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:g0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ps(this.notifyUpdate),ps(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Wa.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ut.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in _a){const n=_a[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):kt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<DE.length;i++){const r=DE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=iz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ja(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(dT(i)||hT(i))?i=parseFloat(i):!dL(i)&&ms.test(n)&&(i=GT(e,n)),this.setBaseTarget(e,sn(i)?i.get():i)),sn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=qx(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!sn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wx),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Bx.render(this.render)}}class vM extends rz{constructor(){super(...arguments),this.KeyframeResolver=J_}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;sn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function SM(t,{style:e,vars:n},i,r){const o=t.style;let a;for(a in e)o[a]=e[a];r?.applyProjectionStyles(o,i);for(a in n)o.setProperty(a,n[a])}function sz(t){return window.getComputedStyle(t)}class oz extends vM{constructor(){super(...arguments),this.type="html",this.renderInstance=SM}readValueFromInstance(e,n){if(Wa.has(n))return this.projection?.isProjecting?a0(n):x_(e,n);{const i=sz(e),r=(kx(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return xM(e,n)}build(e,n,i){$x(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Yx(e,n,i)}}const wM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function az(t,e,n,i){SM(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(wM.has(r)?r:Kx(r),e.attrs[r])}class lz extends vM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=kt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wa.has(n)){const i=KT(n);return i&&i.default||0}return n=wM.has(n)?n:Kx(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return dM(e,n,i)}build(e,n,i){aM(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){az(e,n,i,r)}mount(e){this.isSVGTag=cM(e.tagName),super.mount(e)}}const cz=(t,e)=>Fx(t)?new lz(e):new oz(e,{allowProjection:t!==j.Fragment});function Na(t,e,n){const i=t.getProps();return qx(i,e,n!==void 0?n:i.custom,t)}const y0=t=>Array.isArray(t);function uz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ja(n))}function dz(t){return y0(t)?t[t.length-1]||0:t}function fz(t,e){const n=Na(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const c=dz(o[a]);uz(t,a,c)}}function hz(t){return!!(sn(t)&&t.add)}function x0(t,e){const n=t.getValue("willChange");if(hz(n))return n.add(e);if(!n&&pr.WillChange){const i=new pr.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function EM(t){return t.props[fM]}const pz=t=>t!==null;function mz(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(pz),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[o]}const gz={type:"spring",stiffness:500,damping:25,restSpeed:10},yz=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),xz={type:"keyframes",duration:.8},bz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vz=(t,{keyframes:e})=>e.length>2?xz:Wa.has(t)?t.startsWith("scale")?yz(e[1]):gz:bz;function Sz({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:c,from:d,elapsed:f,...p}){return!!Object.keys(p).length}const Gx=(t,e,n,i={},r,o)=>a=>{const c=Lx(i,t)||{},d=c.delay||i.delay||0;let{elapsed:f=0}=i;f=f-Mi(d);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-f,onUpdate:g=>{e.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{a(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};Sz(c)||Object.assign(p,vz(t,p)),p.duration&&(p.duration=Mi(p.duration)),p.repeatDelay&&(p.repeatDelay=Mi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(f0(p),p.delay===0&&(m=!0)),(pr.instantAnimations||pr.skipAnimations)&&(m=!0,f0(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,m&&!o&&e.get()!==void 0){const g=mz(p.keyframes,c);if(g!==void 0){ut.update(()=>{p.onUpdate(g),p.onComplete()});return}}return c.isSync?new jx(p):new H_(p)};function wz({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function CM(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...c}=e;i&&(o=i);const d=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const p in c){const m=t.getValue(p,t.latestValues[p]??null),g=c[p];if(g===void 0||f&&wz(f,p))continue;const x={delay:n,...Lx(o||{},p)},S=m.get();if(S!==void 0&&!m.isAnimating&&!Array.isArray(g)&&g===S&&!x.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=EM(t);if(C){const N=window.MotionHandoffAnimation(C,p,ut);N!==null&&(x.startTime=N,w=!0)}}x0(t,p),m.start(Gx(p,m,g,t.shouldReduceMotion&&FT.has(p)?{type:!1}:x,t,w));const E=m.animation;E&&d.push(E)}return a&&Promise.all(d).then(()=>{ut.update(()=>{a&&fz(t,a)})}),d}function kM(t,e,n,i=0,r=1){const o=Array.from(t).sort((f,p)=>f.sortNodePosition(p)).indexOf(e),a=t.size,c=(a-1)*i;return typeof n=="function"?n(o,a):r===1?o*i:c-o*i}function b0(t,e,n={}){const i=Na(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(CM(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=r;return Ez(t,e,d,f,p,m,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[d,f]=c==="beforeChildren"?[o,a]:[a,o];return d().then(()=>f())}else return Promise.all([o(),a(n.delay)])}function Ez(t,e,n=0,i=0,r=0,o=1,a){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),c.push(b0(d,e,{...a,delay:n+(typeof i=="function"?0:i)+kM(t.variantChildren,d,i,r,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function Cz(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>b0(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=b0(t,e,n);else{const r=typeof e=="function"?Na(t,e,n.custom):e;i=Promise.all(CM(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function TM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const kz=Hx.length;function MM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?MM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<kz;n++){const i=Hx[n],r=t.props[i];(Pc(r)||r===!1)&&(e[i]=r)}return e}const Tz=[...Ix].reverse(),Mz=Ix.length;function Nz(t){return e=>Promise.all(e.map(({animation:n,options:i})=>Cz(t,n,i)))}function Az(t){let e=Nz(t),n=OE(),i=!0;const r=d=>(f,p)=>{const m=Na(t,p,d==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:g,transitionEnd:x,...S}=m;f={...f,...S,...x}}return f};function o(d){e=d(t)}function a(d){const{props:f}=t,p=MM(t.parent)||{},m=[],g=new Set;let x={},S=1/0;for(let E=0;E<Mz;E++){const C=Tz[E],N=n[C],k=f[C]!==void 0?f[C]:p[C],M=Pc(k),D=C===d?N.isActive:null;D===!1&&(S=E);let _=k===p[C]&&k!==f[C]&&M;if(_&&i&&t.manuallyAnimateOnMount&&(_=!1),N.protectedKeys={...x},!N.isActive&&D===null||!k&&!N.prevProp||Xh(k)||typeof k=="boolean")continue;const P=Dz(N.prevProp,k);let B=P||C===d&&N.isActive&&!_&&M||E>S&&M,I=!1;const ee=Array.isArray(k)?k:[k];let K=ee.reduce(r(C),{});D===!1&&(K={});const{prevResolvedValues:W={}}=N,ne={...W,...K},z=L=>{B=!0,g.has(L)&&(I=!0,g.delete(L)),N.needsAnimating[L]=!0;const F=t.getValue(L);F&&(F.liveStyle=!1)};for(const L in ne){const F=K[L],Y=W[L];if(x.hasOwnProperty(L))continue;let O=!1;y0(F)&&y0(Y)?O=!TM(F,Y):O=F!==Y,O?F!=null?z(L):g.add(L):F!==void 0&&g.has(L)?z(L):N.protectedKeys[L]=!0}N.prevProp=k,N.prevResolvedValues=K,N.isActive&&(x={...x,...K}),i&&t.blockInitialAnimation&&(B=!1);const U=_&&P;B&&(!U||I)&&m.push(...ee.map(L=>{const F={type:C};if(typeof L=="string"&&i&&!U&&t.manuallyAnimateOnMount&&t.parent){const{parent:Y}=t,O=Na(Y,L);if(Y.enteringChildren&&O){const{delayChildren:H}=O.transition||{};F.delay=kM(Y.enteringChildren,t,H)}}return{animation:L,options:F}}))}if(g.size){const E={};if(typeof f.initial!="boolean"){const C=Na(t,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(E.transition=C.transition)}g.forEach(C=>{const N=t.getBaseTarget(C),k=t.getValue(C);k&&(k.liveStyle=!0),E[C]=N??null}),m.push({animation:E})}let w=!!m.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(w=!1),i=!1,w?e(m):Promise.resolve()}function c(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(d,f)),n[d].isActive=f;const p=a(d);for(const m in n)n[m].protectedKeys={};return p}return{animateChanges:a,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=OE(),i=!0}}}function Dz(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!TM(e,t):!1}function $s(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function OE(){return{animate:$s(!0),whileInView:$s(),whileHover:$s(),whileTap:$s(),whileDrag:$s(),whileFocus:$s(),exit:$s()}}class bs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Oz extends bs{constructor(e){super(e),e.animationState||(e.animationState=Az(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Rz=0;class jz extends bs{constructor(){super(...arguments),this.id=Rz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _z={animation:{Feature:Oz},exit:{Feature:jz}};function Ic(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function fu(t){return{point:{x:t.pageX,y:t.pageY}}}const Lz=t=>e=>Px(e)&&t(e,fu(e));function xc(t,e,n,i){return Ic(t,e,Lz(n),i)}const NM=1e-4,zz=1-NM,Bz=1+NM,AM=.01,Pz=0-AM,Vz=0+AM;function cn(t){return t.max-t.min}function Iz(t,e,n){return Math.abs(t-e)<=n}function RE(t,e,n,i=.5){t.origin=i,t.originPoint=mt(e.min,e.max,t.origin),t.scale=cn(n)/cn(e),t.translate=mt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=zz&&t.scale<=Bz||isNaN(t.scale))&&(t.scale=1),(t.translate>=Pz&&t.translate<=Vz||isNaN(t.translate))&&(t.translate=0)}function bc(t,e,n,i){RE(t.x,e.x,n.x,i?i.originX:void 0),RE(t.y,e.y,n.y,i?i.originY:void 0)}function jE(t,e,n){t.min=n.min+e.min,t.max=t.min+cn(e)}function Hz(t,e,n){jE(t.x,e.x,n.x),jE(t.y,e.y,n.y)}function _E(t,e,n){t.min=e.min-n.min,t.max=t.min+cn(e)}function vc(t,e,n){_E(t.x,e.x,n.x),_E(t.y,e.y,n.y)}function Kn(t){return[t("x"),t("y")]}const DM=({current:t})=>t?t.ownerDocument.defaultView:null,LE=(t,e)=>Math.abs(t-e);function $z(t,e){const n=LE(t.x,e.x),i=LE(t.y,e.y);return Math.sqrt(n**2+i**2)}class OM{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=ty(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,S=$z(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!x&&!S)return;const{point:w}=g,{timestamp:E}=Zt;this.history.push({...w,timestamp:E});const{onStart:C,onMove:N}=this.handlers;x||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,g)},this.handlePointerMove=(g,x)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=ey(x,this.transformPagePoint),ut.update(this.updatePoint,!0)},this.handlePointerUp=(g,x)=>{this.end();const{onEnd:S,onSessionEnd:w,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=ty(g.type==="pointercancel"?this.lastMoveEventInfo:ey(x,this.transformPagePoint),this.history);this.startEvent&&S&&S(g,C),w&&w(g,C)},!Px(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=r||window;const c=fu(e),d=ey(c,this.transformPagePoint),{point:f}=d,{timestamp:p}=Zt;this.history=[{...f,timestamp:p}];const{onSessionStart:m}=n;m&&m(e,ty(d,this.history)),this.removeListeners=cu(xc(this.contextWindow,"pointermove",this.handlePointerMove),xc(this.contextWindow,"pointerup",this.handlePointerUp),xc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ps(this.updatePoint)}}function ey(t,e){return e?{point:e(t.point)}:t}function zE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ty({point:t},e){return{point:t,delta:zE(t,RM(e)),offset:zE(t,Uz(e)),velocity:Fz(e,.1)}}function Uz(t){return t[0]}function RM(t){return t[t.length-1]}function Fz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=RM(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Mi(e)));)n--;if(!i)return{x:0,y:0};const o=Zn(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function qz(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?mt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?mt(n,t,i.max):Math.min(t,n)),t}function BE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Yz(t,{top:e,left:n,bottom:i,right:r}){return{x:BE(t.x,n,r),y:BE(t.y,e,i)}}function PE(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Kz(t,e){return{x:PE(t.x,e.x),y:PE(t.y,e.y)}}function Gz(t,e){let n=.5;const i=cn(t),r=cn(e);return r>i?n=Lc(e.min,e.max-i,t.min):i>r&&(n=Lc(t.min,t.max-r,e.min)),hr(0,1,n)}function Xz(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const v0=.35;function Wz(t=v0){return t===!1?t=0:t===!0&&(t=v0),{x:VE(t,"left","right"),y:VE(t,"top","bottom")}}function VE(t,e,n){return{min:IE(t,e),max:IE(t,n)}}function IE(t,e){return typeof t=="number"?t:t[e]||0}const Zz=new WeakMap;class Qz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=kt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=m=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(fu(m).point)},a=(m,g)=>{const{drag:x,dragPropagation:S,onDragStart:w}=this.getProps();if(x&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iL(x),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kn(C=>{let N=this.getAxisMotionValue(C).get()||0;if(Ni.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const M=k.layout.layoutBox[C];M&&(N=cn(M)*(parseFloat(N)/100))}}this.originPoint[C]=N}),w&&ut.postRender(()=>w(m,g)),x0(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:S,onDirectionLock:w,onDrag:E}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:C}=g;if(S&&this.currentDirection===null){this.currentDirection=Jz(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),E&&E(m,g)},d=(m,g)=>{this.latestPointerEvent=m,this.latestPanInfo=g,this.stop(m,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Kn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new OM(e,{onSessionStart:o,onStart:a,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:DM(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!i)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&ut.postRender(()=>c(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Kd(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=qz(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Sa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Yz(i.layoutBox,e):this.constraints=!1,this.elastic=Wz(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Kn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Xz(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sa(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=ez(i,r.root,this.visualElement.getTransformPagePoint());let a=Kz(r.layout.layoutBox,o);if(n){const c=n(ZL(a));this.hasMutatedConstraints=!!c,c&&(a=mM(c))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=Kn(p=>{if(!Kd(p,n,this.currentDirection))return;let m=d&&d[p]||{};a&&(m={min:0,max:0});const g=r?200:1e6,x=r?40:1e7,S={type:"inertia",velocity:i?e[p]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(p,S)});return Promise.all(f).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return x0(this.visualElement,e),i.start(Gx(e,i,0,n,this.visualElement,!1))}stopAnimation(){Kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Kn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Kn(n=>{const{drag:i}=this.getProps();if(!Kd(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:c}=r.layout.layoutBox[n];o.set(e[n]-mt(a,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Sa(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Kn(a=>{const c=this.getAxisMotionValue(a);if(c&&this.constraints!==!1){const d=c.get();r[a]=Gz({min:d,max:d},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Kn(a=>{if(!Kd(a,e,null))return;const c=this.getAxisMotionValue(a),{min:d,max:f}=this.constraints[a];c.set(mt(d,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;Zz.set(this.visualElement,this);const e=this.visualElement.current,n=xc(e,"pointerdown",d=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Sa(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ut.read(i);const a=Ic(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Kn(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=d[p].translate,m.set(m.get()+d[p].translate))}),this.visualElement.render())}));return()=>{a(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=v0,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:c}}}function Kd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Jz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eB extends bs{constructor(e){super(e),this.removeGroupControls=Jn,this.removeListeners=Jn,this.controls=new Qz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jn}unmount(){this.removeGroupControls(),this.removeListeners()}}const HE=t=>(e,n)=>{t&&ut.postRender(()=>t(e,n))};class tB extends bs{constructor(){super(...arguments),this.removePointerDownListener=Jn}onPointerDown(e){this.session=new OM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:HE(e),onStart:HE(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&ut.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=xc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $E(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const rc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Oe.test(t))t=parseFloat(t);else return t;const n=$E(t,e.target.x),i=$E(t,e.target.y);return`${n}% ${i}%`}},nB={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ms.parse(t);if(r.length>5)return i;const o=ms.createTransformer(t),a=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+a]/=c,r[1+a]/=d;const f=mt(c,d,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};let ny=!1;class iB extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;kL(rB),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),ny&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),bf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,{projection:a}=i;return a&&(a.isPresent=o,ny=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||ut.postRender(()=>{const c=a.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Bx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;ny=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jM(t){const[e,n]=tM(),i=j.useContext(mx);return v.jsx(iB,{...t,layoutGroup:i,switchLayoutGroup:j.useContext(hM),isPresent:e,safeToRemove:n})}const rB={borderRadius:{...rc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rc,borderTopRightRadius:rc,borderBottomLeftRadius:rc,borderBottomRightRadius:rc,boxShadow:nB};function sB(t,e,n){const i=sn(t)?t:ja(t);return i.start(Gx("",i,e,n)),i.animation}const oB=(t,e)=>t.depth-e.depth;class aB{constructor(){this.children=[],this.isDirty=!1}add(e){xx(this.children,e),this.isDirty=!0}remove(e){bx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oB),this.isDirty=!1,this.children.forEach(e)}}function lB(t,e){const n=Sn.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(ps(i),t(o-e))};return ut.setup(i,!0),()=>ps(i)}const _M=["TopLeft","TopRight","BottomLeft","BottomRight"],cB=_M.length,UE=t=>typeof t=="string"?parseFloat(t):t,FE=t=>typeof t=="number"||Oe.test(t);function uB(t,e,n,i,r,o){r?(t.opacity=mt(0,n.opacity??1,dB(i)),t.opacityExit=mt(e.opacity??1,0,fB(i))):o&&(t.opacity=mt(e.opacity??1,n.opacity??1,i));for(let a=0;a<cB;a++){const c=`border${_M[a]}Radius`;let d=qE(e,c),f=qE(n,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||FE(d)===FE(f)?(t[c]=Math.max(mt(UE(d),UE(f),i),0),(Ni.test(f)||Ni.test(d))&&(t[c]+="%")):t[c]=f}(e.rotate||n.rotate)&&(t.rotate=mt(e.rotate||0,n.rotate||0,i))}function qE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const dB=LM(0,.5,ST),fB=LM(.5,.95,Jn);function LM(t,e,n){return i=>i<t?0:i>e?1:n(Lc(t,e,i))}function YE(t,e){t.min=e.min,t.max=e.max}function qn(t,e){YE(t.x,e.x),YE(t.y,e.y)}function KE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function GE(t,e,n,i,r){return t-=e,t=Vf(t,1/n,i),r!==void 0&&(t=Vf(t,1/r,i)),t}function hB(t,e=0,n=1,i=.5,r,o=t,a=t){if(Ni.test(e)&&(e=parseFloat(e),e=mt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let c=mt(o.min,o.max,i);t===o&&(c-=e),t.min=GE(t.min,e,n,c,r),t.max=GE(t.max,e,n,c,r)}function XE(t,e,[n,i,r],o,a){hB(t,e[n],e[i],e[r],e.scale,o,a)}const pB=["x","scaleX","originX"],mB=["y","scaleY","originY"];function WE(t,e,n,i){XE(t.x,e,pB,n?n.x:void 0,i?i.x:void 0),XE(t.y,e,mB,n?n.y:void 0,i?i.y:void 0)}function ZE(t){return t.translate===0&&t.scale===1}function zM(t){return ZE(t.x)&&ZE(t.y)}function QE(t,e){return t.min===e.min&&t.max===e.max}function gB(t,e){return QE(t.x,e.x)&&QE(t.y,e.y)}function JE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function BM(t,e){return JE(t.x,e.x)&&JE(t.y,e.y)}function eC(t){return cn(t.x)/cn(t.y)}function tC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yB{constructor(){this.members=[]}add(e){xx(this.members,e),e.scheduleRender()}remove(e){if(bx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xB(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=n?.z||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:p,rotateX:m,rotateY:g,skewX:x,skewY:S}=n;f&&(i=`perspective(${f}px) ${i}`),p&&(i+=`rotate(${p}deg) `),m&&(i+=`rotateX(${m}deg) `),g&&(i+=`rotateY(${g}deg) `),x&&(i+=`skewX(${x}deg) `),S&&(i+=`skewY(${S}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const iy=["","X","Y","Z"],bB=1e3;let vB=0;function ry(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function PM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=EM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ut,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&PM(i)}function VM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},c=e?.()){this.id=vB++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(EB),this.nodes.forEach(MB),this.nodes.forEach(NB),this.nodes.forEach(CB)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new aB)}addEventListener(a,c){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new wx),this.eventHandlers.get(a).add(c)}notifyListeners(a,...c){const d=this.eventHandlers.get(a);d&&d.notify(...c)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=eM(a)&&!cL(a),this.instance=a;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let p,m=0;const g=()=>this.root.updateBlockedByResize=!1;ut.read(()=>{m=window.innerWidth}),t(a,()=>{const x=window.innerWidth;x!==m&&(m=x,this.root.updateBlockedByResize=!0,p&&p(),p=lB(g,250),bf.hasAnimatedSinceResize&&(bf.hasAnimatedSinceResize=!1,this.nodes.forEach(rC)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||jB,{onLayoutAnimationStart:w,onLayoutAnimationComplete:E}=f.getProps(),C=!this.targetLayout||!BM(this.targetLayout,x),N=!m&&g;if(this.options.layoutRoot||this.resumeFrom||N||m&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Lx(S,"layout"),onPlay:w,onComplete:E};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(p,N)}else m||rC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ps(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AB),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(iC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(TB),this.nodes.forEach(SB),this.nodes.forEach(wB)):this.nodes.forEach(iC),this.clearAllSnapshots();const c=Sn.now();Zt.delta=hr(0,1e3/60,c-Zt.timestamp),Zt.timestamp=c,Zt.isProcessing=!0,Yg.update.process(Zt),Yg.preRender.process(Zt),Yg.render.process(Zt),Zt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Bx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(kB),this.sharedNodes.forEach(DB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cn(this.snapshot.measuredBox.x)&&!cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=kt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(c=!1),c&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!zM(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;a&&this.instance&&(c||Fs(this.latestValues)||p)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return a&&(d=this.removeTransform(d)),_B(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return kt();const c=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(LB))){const{scroll:f}=this.root;f&&(wa(c.x,f.offset.x),wa(c.y,f.offset.y))}return c}removeElementScroll(a){const c=kt();if(qn(c,a),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&qn(c,a),wa(c.x,p.offset.x),wa(c.y,p.offset.y))}return c}applyTransform(a,c=!1){const d=kt();qn(d,a);for(let f=0;f<this.path.length;f++){const p=this.path[f];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ea(d,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Fs(p.latestValues)&&Ea(d,p.latestValues)}return Fs(this.latestValues)&&Ea(d,this.latestValues),d}removeTransform(a){const c=kt();qn(c,a);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!Fs(f.latestValues))continue;p0(f.latestValues)&&f.updateSnapshot();const p=kt(),m=f.measurePageBox();qn(p,m),WE(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Fs(this.latestValues)&&WE(c,this.latestValues),c}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(a||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Zt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),vc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=kt(),this.targetWithTransforms=kt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qn(this.target,this.layout.layoutBox),yM(this.target,this.targetDelta)):qn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=kt(),this.relativeTargetOrigin=kt(),vc(this.relativeTargetOrigin,this.target,g.target),qn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||p0(this.parent.latestValues)||gM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),c=!!this.resumingFrom||this!==a;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Zt.timestamp&&(d=!1),d)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;qn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;JL(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=kt());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(KE(this.prevProjectionDelta.x,this.projectionDelta.x),KE(this.prevProjectionDelta.y,this.projectionDelta.y)),bc(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!tC(this.projectionDelta.x,this.prevProjectionDelta.x)||!tC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ca(),this.projectionDelta=Ca(),this.projectionDeltaWithTransform=Ca()}setAnimationOrigin(a,c=!1){const d=this.snapshot,f=d?d.latestValues:{},p={...this.latestValues},m=Ca();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=kt(),x=d?d.source:void 0,S=this.layout?this.layout.source:void 0,w=x!==S,E=this.getStack(),C=!E||E.members.length<=1,N=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(RB));this.animationProgress=0;let k;this.mixTargetDelta=M=>{const D=M/1e3;sC(m.x,a.x,D),sC(m.y,a.y,D),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vc(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),OB(this.relativeTarget,this.relativeTargetOrigin,g,D),k&&gB(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=kt()),qn(k,this.relativeTarget)),w&&(this.animationValues=p,uB(p,f,this.latestValues,D,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ps(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ut.update(()=>{bf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ja(0)),this.currentAnimation=sB(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),a.onUpdate&&a.onUpdate(c)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(bB),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:p}=a;if(!(!c||!d||!f)){if(this!==a&&this.layout&&f&&IM(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||kt();const m=cn(this.layout.layoutBox.x);d.x.min=a.target.x.min,d.x.max=d.x.min+m;const g=cn(this.layout.layoutBox.y);d.y.min=a.target.y.min,d.y.max=d.y.min+g}qn(c,d),Ea(c,p),bc(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(a,c){this.sharedNodes.has(a)||this.sharedNodes.set(a,new yB),this.sharedNodes.get(a).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),a&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let c=!1;const{latestValues:d}=a;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&ry("z",a,f,this.animationValues);for(let p=0;p<iy.length;p++)ry(`rotate${iy[p]}`,a,f,this.animationValues),ry(`skew${iy[p]}`,a,f,this.animationValues);a.render();for(const p in f)a.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);a.scheduleRender()}applyProjectionStyles(a,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=xf(c?.pointerEvents)||"",a.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=xf(c?.pointerEvents)||""),this.hasProjected&&!Fs(this.latestValues)&&(a.transform=d?d({},""):"none",this.hasProjected=!1);return}a.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=xB(this.projectionDeltaWithTransform,this.treeScale,p);d&&(m=d(p,m)),a.transform=m;const{x:g,y:x}=this.projectionDelta;a.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?a.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:a.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Vc){if(p[S]===void 0)continue;const{correct:w,applyTo:E,isCSSVariable:C}=Vc[S],N=m==="none"?p[S]:w(p[S],f);if(E){const k=E.length;for(let M=0;M<k;M++)a[E[M]]=N}else C?this.options.visualElement.renderState.vars[S]=N:a[S]=N}this.options.layoutId&&(a.pointerEvents=f===this?xf(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(nC),this.root.sharedNodes.clear()}}}function SB(t){t.updateLayout()}function wB(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,o=e.source!==t.layout.source;r==="size"?Kn(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],g=cn(m);m.min=n[p].min,m.max=m.min+g}):IM(r,e.layoutBox,n)&&Kn(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],g=cn(n[p]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+g)});const a=Ca();bc(a,n,e.layoutBox);const c=Ca();o?bc(c,t.applyTransform(i,!0),e.measuredBox):bc(c,n,e.layoutBox);const d=!zM(a);let f=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const x=kt();vc(x,e.layoutBox,m.layoutBox);const S=kt();vc(S,n,g.layoutBox),BM(x,S)||(f=!0),p.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=x,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function EB(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CB(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kB(t){t.clearSnapshot()}function nC(t){t.clearMeasurements()}function iC(t){t.isLayoutDirty=!1}function TB(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function MB(t){t.resolveTargetDelta()}function NB(t){t.calcProjection()}function AB(t){t.resetSkewAndRotation()}function DB(t){t.removeLeadSnapshot()}function sC(t,e,n){t.translate=mt(e.translate,0,n),t.scale=mt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function oC(t,e,n,i){t.min=mt(e.min,n.min,i),t.max=mt(e.max,n.max,i)}function OB(t,e,n,i){oC(t.x,e.x,n.x,i),oC(t.y,e.y,n.y,i)}function RB(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jB={duration:.45,ease:[.4,0,.1,1]},aC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),lC=aC("applewebkit/")&&!aC("chrome/")?Math.round:Jn;function cC(t){t.min=lC(t.min),t.max=lC(t.max)}function _B(t){cC(t.x),cC(t.y)}function IM(t,e,n){return t==="position"||t==="preserve-aspect"&&!Iz(eC(e),eC(n),.2)}function LB(t){return t!==t.root&&t.scroll?.wasRoot}const zB=VM({attachResizeListener:(t,e)=>Ic(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sy={current:void 0},HM=VM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sy.current){const t=new zB({});t.mount(window),t.setOptions({layoutScroll:!0}),sy.current=t}return sy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BB={pan:{Feature:tB},drag:{Feature:eB,ProjectionNode:HM,MeasureLayout:jM}};function uC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&ut.postRender(()=>o(e,fu(e)))}class PB extends bs{mount(){const{current:e}=this.node;e&&(this.unmount=rL(e,(n,i)=>(uC(this.node,i,"Start"),r=>uC(this.node,r,"End"))))}unmount(){}}class VB extends bs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cu(Ic(this.node.current,"focus",()=>this.onFocus()),Ic(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function dC(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&ut.postRender(()=>o(e,fu(e)))}class IB extends bs{mount(){const{current:e}=this.node;e&&(this.unmount=lL(e,(n,i)=>(dC(this.node,i,"Start"),(r,{success:o})=>dC(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const S0=new WeakMap,oy=new WeakMap,HB=t=>{const e=S0.get(t.target);e&&e(t)},$B=t=>{t.forEach(HB)};function UB({root:t,...e}){const n=t||document;oy.has(n)||oy.set(n,{});const i=oy.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver($B,{root:t,...e})),i[r]}function FB(t,e,n){const i=UB(e);return S0.set(t,n),i.observe(t),()=>{S0.delete(t),i.unobserve(t)}}const qB={some:0,all:1};class YB extends bs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:qB[r]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),g=f?p:m;g&&g(d)};return FB(this.node.current,a,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(KB(e,n))&&this.startObserver()}unmount(){}}function KB({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const GB={inView:{Feature:YB},tap:{Feature:IB},focus:{Feature:VB},hover:{Feature:PB}},XB={layout:{ProjectionNode:HM,MeasureLayout:jM}},WB={..._z,...GB,...BB,...XB},Qn=WL(WB,cz);var ay={exports:{}},ly={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function ZB(){if(fC)return ly;fC=1;var t=lu();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,o=t.useLayoutEffect,a=t.useDebugValue;function c(m,g){var x=g(),S=i({inst:{value:x,getSnapshot:g}}),w=S[0].inst,E=S[1];return o(function(){w.value=x,w.getSnapshot=g,d(w)&&E({inst:w})},[m,x,g]),r(function(){return d(w)&&E({inst:w}),m(function(){d(w)&&E({inst:w})})},[m]),a(x),x}function d(m){var g=m.getSnapshot;m=m.value;try{var x=g();return!n(m,x)}catch{return!0}}function f(m,g){return g()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return ly.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,ly}var hC;function $M(){return hC||(hC=1,ay.exports=ZB()),ay.exports}var UM=$M();function Wt(t){this.content=t}Wt.prototype={constructor:Wt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),o=i.content.slice();return r==-1?o.push(n||t,e):(o[r+1]=e,n&&(o[r]=n)),new Wt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Wt(n)},addToStart:function(t,e){return new Wt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Wt(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),o=i.find(t);return r.splice(o==-1?r.length:o,0,e,n),new Wt(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Wt.from(t),t.size?new Wt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Wt.from(t),t.size?new Wt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Wt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Wt.from=function(t){if(t instanceof Wt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Wt(e)};function FM(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),o=e.child(i);if(r==o){n+=r.nodeSize;continue}if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(let a=0;r.text[a]==o.text[a];a++)n++;return n}if(r.content.size||o.content.size){let a=FM(r.content,o.content,n+1);if(a!=null)return a}n+=r.nodeSize}}function qM(t,e,n,i){for(let r=t.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:n,b:i};let a=t.child(--r),c=e.child(--o),d=a.nodeSize;if(a==c){n-=d,i-=d;continue}if(!a.sameMarkup(c))return{a:n,b:i};if(a.isText&&a.text!=c.text){let f=0,p=Math.min(a.text.length,c.text.length);for(;f<p&&a.text[a.text.length-f-1]==c.text[c.text.length-f-1];)f++,n--,i--;return{a:n,b:i}}if(a.content.size||c.content.size){let f=qM(a.content,c.content,n-1,i-1);if(f)return f}n-=d,i-=d}}class ue{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,r=0,o){for(let a=0,c=0;c<n;a++){let d=this.content[a],f=c+d.nodeSize;if(f>e&&i(d,r+c,o||null,a)!==!1&&d.content.size){let p=c+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,n-p),i,r+p)}c=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,r){let o="",a=!0;return this.nodesBetween(e,n,(c,d)=>{let f=c.isText?c.text.slice(Math.max(e,d)-d,n-d):c.isLeaf?r?typeof r=="function"?r(c):r:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&f||c.isTextblock)&&i&&(a?a=!1:o+=i),o+=f},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,r=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(i)&&(r[r.length-1]=n.withText(n.text+i.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new ue(r,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let i=[],r=0;if(n>e)for(let o=0,a=0;a<n;o++){let c=this.content[o],d=a+c.nodeSize;d>e&&((a<e||d>n)&&(c.isText?c=c.cut(Math.max(0,e-a),Math.min(c.text.length,n-a)):c=c.cut(Math.max(0,e-a-1),Math.min(c.content.size,n-a-1))),i.push(c),r+=c.nodeSize),a=d}return new ue(i,r)}cutByIndex(e,n){return e==n?ue.empty:e==0&&n==this.content.length?this:new ue(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let r=this.content.slice(),o=this.size+n.nodeSize-i.nodeSize;return r[e]=n,new ue(r,o)}addToStart(e){return new ue([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ue(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let r=this.content[n];e(r,i,n),i+=r.nodeSize}}findDiffStart(e,n=0){return FM(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return qM(this,e,n,i)}findIndex(e){if(e==0)return Gd(0,e);if(e==this.size)return Gd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let r=this.child(n),o=i+r.nodeSize;if(o>=e)return o==e?Gd(n+1,o):Gd(n,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ue.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ue(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ue.empty;let n,i=0;for(let r=0;r<e.length;r++){let o=e[r];i+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(n||(n=e.slice(0,r)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new ue(n||e,i)}static from(e){if(!e)return ue.empty;if(e instanceof ue)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ue([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ue.empty=new ue([],0);const cy={index:0,offset:0};function Gd(t,e){return cy.index=t,cy.offset=e,cy}function If(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!If(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!If(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}let st=class w0{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,i=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!i&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,r)),n.push(this),i=!0),n&&n.push(o)}}return n||(n=e.slice()),i||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&If(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[n.type];if(!i)throw new RangeError(`There is no mark type ${n.type} in this schema`);let r=i.create(n.attrs);return i.checkAttrs(r.attrs),r}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(n[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return w0.none;if(e instanceof w0)return[e];let n=e.slice();return n.sort((i,r)=>i.type.rank-r.type.rank),n}};st.none=[];class Hf extends Error{}class ge{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=KM(this.content,e+this.openStart,n);return i&&new ge(i,this.openStart,this.openEnd)}removeBetween(e,n){return new ge(YM(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ge.empty;let i=n.openStart||0,r=n.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ge(ue.fromJSON(e,n.content),i,r)}static maxOpen(e,n=!0){let i=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)i++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)r++;return new ge(e,i,r)}}ge.empty=new ge(ue.empty,0,0);function YM(t,e,n){let{index:i,offset:r}=t.findIndex(e),o=t.maybeChild(i),{index:a,offset:c}=t.findIndex(n);if(r==e||o.isText){if(c!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(i,o.copy(YM(o.content,e-r-1,n-r-1)))}function KM(t,e,n,i){let{index:r,offset:o}=t.findIndex(e),a=t.maybeChild(r);if(o==e||a.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=KM(a.content,e-o-1,n,a);return c&&t.replaceChild(r,a.copy(c))}function QB(t,e,n){if(n.openStart>t.depth)throw new Hf("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Hf("Inconsistent open depths");return GM(t,e,n,0)}function GM(t,e,n,i){let r=t.index(i),o=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let a=GM(t,e,n,i+1);return o.copy(o.content.replaceChild(r,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==i&&e.depth==i){let a=t.parent,c=a.content;return so(a,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:a,end:c}=JB(n,t);return so(o,WM(t,a,c,e,i))}else return so(o,$f(t,e,i))}function XM(t,e){if(!e.type.compatibleContent(t.type))throw new Hf("Cannot join "+e.type.name+" onto "+t.type.name)}function E0(t,e,n){let i=t.node(n);return XM(i,e.node(n)),i}function ro(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Sc(t,e,n,i){let r=(e||t).node(n),o=0,a=e?e.index(n):r.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(ro(t.nodeAfter,i),o++));for(let c=o;c<a;c++)ro(r.child(c),i);e&&e.depth==n&&e.textOffset&&ro(e.nodeBefore,i)}function so(t,e){return t.type.checkContent(e),t.copy(e)}function WM(t,e,n,i,r){let o=t.depth>r&&E0(t,e,r+1),a=i.depth>r&&E0(n,i,r+1),c=[];return Sc(null,t,r,c),o&&a&&e.index(r)==n.index(r)?(XM(o,a),ro(so(o,WM(t,e,n,i,r+1)),c)):(o&&ro(so(o,$f(t,e,r+1)),c),Sc(e,n,r,c),a&&ro(so(a,$f(n,i,r+1)),c)),Sc(i,null,r,c),new ue(c)}function $f(t,e,n){let i=[];if(Sc(null,t,n,i),t.depth>n){let r=E0(t,e,n+1);ro(so(r,$f(t,e,n+1)),i)}return Sc(e,null,n,i),new ue(i)}function JB(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(ue.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}class Hc{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(n);return i?e.child(n).cut(i):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[n*3],r=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)r+=i.child(o).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return st.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),r=e.maybeChild(n);if(!i){let c=i;i=r,r=c}let o=i.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!r||!o[a].isInSet(r.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!r||!i[o].isInSet(r.marks))&&(i=i[o--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new Uf(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],r=0,o=n;for(let a=e;;){let{index:c,offset:d}=a.content.findIndex(o),f=o-d;if(i.push(a,c,r+d),!f||(a=a.child(c),a.isText))break;o=f-1,r+=d+1}return new Hc(n,i,o)}static resolveCached(e,n){let i=pC.get(e);if(i)for(let o=0;o<i.elts.length;o++){let a=i.elts[o];if(a.pos==n)return a}else pC.set(e,i=new eP);let r=i.elts[i.i]=Hc.resolve(e,n);return i.i=(i.i+1)%tP,r}}class eP{constructor(){this.elts=[],this.i=0}}const tP=12,pC=new WeakMap;class Uf{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const nP=Object.create(null);let ls=class C0{constructor(e,n,i,r=st.none){this.type=e,this.attrs=n,this.marks=r,this.content=i||ue.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,r=0){this.content.nodesBetween(e,n,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,r){return this.content.textBetween(e,n,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&If(this.attrs,n||e.defaultAttrs||nP)&&st.sameSet(this.marks,i||st.none)}copy(e=null){return e==this.content?this:new C0(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new C0(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return ge.empty;let r=this.resolve(e),o=this.resolve(n),a=i?0:r.sharedDepth(n),c=r.start(a),f=r.node(a).content.cut(r.pos-c,o.pos-c);return new ge(f,r.depth-a,o.depth-a)}replace(e,n,i){return QB(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}}resolve(e){return Hc.resolveCached(this,e)}resolveNoCache(e){return Hc.resolve(this,e)}rangeHasMark(e,n,i){let r=!1;return n>e&&this.nodesBetween(e,n,o=>(i.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),ZM(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=ue.empty,r=0,o=i.childCount){let a=this.contentMatchAt(e).matchFragment(i,r,o),c=a&&a.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let d=r;d<o;d++)if(!this.type.allowsMarks(i.child(d).marks))return!1;return!0}canReplaceWith(e,n,i,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(i),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=st.none;for(let n=0;n<this.marks.length;n++){let i=this.marks[n];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!st.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let r=ue.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,r,i);return o.type.checkAttrs(o.attrs),o}};ls.prototype.text=void 0;class Ff extends ls{constructor(e,n,i,r){if(super(e,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):ZM(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ff(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ff(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function ZM(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class fo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new iP(e,n);if(i.next==null)return fo.empty;let r=QM(i);i.next&&i.err("Unexpected trailing text");let o=uP(cP(r));return dP(o,i),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let r=this;for(let o=n;r&&o<i;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let r=[this];function o(a,c){let d=a.matchFragment(e,i);if(d&&(!n||d.validEnd))return ue.from(c.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:m}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&r.indexOf(m)==-1){r.push(m);let g=o(m,c.concat(p));if(g)return g}}return null}return o(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),o=r.match;if(o.matchType(e)){let a=[];for(let c=r;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:c,next:d}=o.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!r.type||d.validEnd)&&(i.push({match:c.contentMatch,type:c,via:r}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&n(i.next[r].next)}return n(this),e.map((i,r)=>{let o=r+(i.validEnd?"*":" ")+" ";for(let a=0;a<i.next.length;a++)o+=(a?", ":"")+i.next[a].type.name+"->"+e.indexOf(i.next[a].next);return o}).join(`
`)}}fo.empty=new fo(!0);class iP{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function QM(t){let e=[];do e.push(rP(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function rP(t){let e=[];do e.push(sP(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function sP(t){let e=lP(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=oP(t,e);else break;return e}function mC(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function oP(t,e){let n=mC(t),i=n;return t.eat(",")&&(t.next!="}"?i=mC(t):i=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function aP(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let o in n){let a=n[o];a.isInGroup(e)&&r.push(a)}return r.length==0&&t.err("No node type or group '"+e+"' found"),r}function lP(t){if(t.eat("(")){let e=QM(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=aP(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function cP(t){let e=[[]];return r(o(t,0),n()),e;function n(){return e.push([])-1}function i(a,c,d){let f={term:d,to:c};return e[a].push(f),f}function r(a,c){a.forEach(d=>d.to=c)}function o(a,c){if(a.type=="choice")return a.exprs.reduce((d,f)=>d.concat(o(f,c)),[]);if(a.type=="seq")for(let d=0;;d++){let f=o(a.exprs[d],c);if(d==a.exprs.length-1)return f;r(f,c=n())}else if(a.type=="star"){let d=n();return i(c,d),r(o(a.expr,d),d),[i(d)]}else if(a.type=="plus"){let d=n();return r(o(a.expr,c),d),r(o(a.expr,d),d),[i(d)]}else{if(a.type=="opt")return[i(c)].concat(o(a.expr,c));if(a.type=="range"){let d=c;for(let f=0;f<a.min;f++){let p=n();r(o(a.expr,d),p),d=p}if(a.max==-1)r(o(a.expr,d),d);else for(let f=a.min;f<a.max;f++){let p=n();i(d,p),r(o(a.expr,d),p),d=p}return[i(d)]}else{if(a.type=="name")return[i(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function JM(t,e){return e-t}function gC(t,e){let n=[];return i(e),n.sort(JM);function i(r){let o=t[r];if(o.length==1&&!o[0].term)return i(o[0].to);n.push(r);for(let a=0;a<o.length;a++){let{term:c,to:d}=o[a];!c&&n.indexOf(d)==-1&&i(d)}}}function uP(t){let e=Object.create(null);return n(gC(t,0));function n(i){let r=[];i.forEach(a=>{t[a].forEach(({term:c,to:d})=>{if(!c)return;let f;for(let p=0;p<r.length;p++)r[p][0]==c&&(f=r[p][1]);gC(t,d).forEach(p=>{f||r.push([c,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let o=e[i.join(",")]=new fo(i.indexOf(t.length-1)>-1);for(let a=0;a<r.length;a++){let c=r[a][1].sort(JM);o.next.push({type:r[a][0],next:e[c.join(",")]||n(c)})}return o}}function dP(t,e){for(let n=0,i=[t];n<i.length;n++){let r=i[n],o=!r.validEnd,a=[];for(let c=0;c<r.next.length;c++){let{type:d,next:f}=r.next[c];a.push(d.name),o&&!(d.isText||d.hasRequiredAttrs())&&(o=!1),i.indexOf(f)==-1&&i.push(f)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function eN(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function tN(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(r===void 0){let o=t[i];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=r}return n}function nN(t,e,n,i){for(let r in e)if(!(r in t))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let r in t){let o=t[r];o.validate&&o.validate(e[r])}}function iN(t,e){let n=Object.create(null);if(e)for(let i in e)n[i]=new hP(t,i,e[i]);return n}let yC=class rN{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=iN(e,i.attrs),this.defaultAttrs=eN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==fo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:tN(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ls(this,this.computeAttrs(e),ue.from(n),st.setFrom(i))}createChecked(e=null,n,i){return n=ue.from(n),this.checkContent(n),new ls(this,this.computeAttrs(e),n,st.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),n=ue.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let r=this.contentMatch.matchFragment(n),o=r&&r.fillBefore(ue.empty,!0);return o?new ls(this,e,n.append(o),st.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){nN(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:st.none:e}static compile(e,n){let i=Object.create(null);e.forEach((o,a)=>i[o]=new rN(o,n,a));let r=n.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let o in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function fP(t,e,n){let i=n.split("|");return r=>{let o=r===null?"null":typeof r;if(i.indexOf(o)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${t}, got ${o}`)}}class hP{constructor(e,n,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?fP(e,n,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class Zh{constructor(e,n,i,r){this.name=e,this.rank=n,this.schema=i,this.spec=r,this.attrs=iN(e,r.attrs),this.excluded=null;let o=eN(this.attrs);this.instance=o?new st(this,o):null}create(e=null){return!e&&this.instance?this.instance:new st(this,tN(this.attrs,e))}static compile(e,n){let i=Object.create(null),r=0;return e.forEach((o,a)=>i[o]=new Zh(o,r++,n,a)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){nN(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class sN{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=Wt.from(e.nodes),n.marks=Wt.from(e.marks||{}),this.nodes=yC.compile(this.spec.nodes,this),this.marks=Zh.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],a=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=i[a]||(i[a]=fo.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?xC(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:xC(this,a.split(" "))}this.nodeFromJSON=r=>ls.fromJSON(this,r),this.markFromJSON=r=>st.fromJSON(this,r),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof yC){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,r)}text(e,n){let i=this.nodes.text;return new Ff(i,i.defaultAttrs,e,st.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function xC(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],o=t.marks[r],a=o;if(o)n.push(o);else for(let c in t.marks){let d=t.marks[c];(r=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(r)>-1)&&n.push(a=d)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}function pP(t){return t.tag!=null}function mP(t){return t.style!=null}class cs{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let i=this.matchedStyles=[];n.forEach(r=>{if(pP(r))this.tags.push(r);else if(mP(r)){let o=/[^=]*/.exec(r.style)[0];i.indexOf(o)<0&&i.push(o),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let i=new vC(this,n,!1);return i.addAll(e,st.none,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new vC(this,n,!0);return i.addAll(e,st.none,n.from,n.to),ge.maxOpen(i.finish())}matchTag(e,n,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(xP(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,n,i,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let a=this.styles[o],c=a.style;if(!(c.indexOf(e)!=0||a.context&&!i.matchesContext(a.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(a.getAttrs){let d=a.getAttrs(n);if(d===!1)continue;a.attrs=d||void 0}return a}}}static schemaRules(e){let n=[];function i(r){let o=r.priority==null?50:r.priority,a=0;for(;a<n.length;a++){let c=n[a];if((c.priority==null?50:c.priority)<o)break}n.splice(a,0,r)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(a=>{i(a=SC(a)),a.mark||a.ignore||a.clearMark||(a.mark=r)})}for(let r in e.nodes){let o=e.nodes[r].spec.parseDOM;o&&o.forEach(a=>{i(a=SC(a)),a.node||a.ignore||a.mark||(a.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new cs(e,cs.schemaRules(e)))}}const oN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},gP={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},aN={ol:!0,ul:!0},$c=1,k0=2,wc=4;function bC(t,e,n){return e!=null?(e?$c:0)|(e==="full"?k0:0):t&&t.whitespace=="pre"?$c|k0:n&~wc}class Xd{constructor(e,n,i,r,o,a){this.type=e,this.attrs=n,this.marks=i,this.solid=r,this.options=a,this.content=[],this.activeMarks=st.none,this.match=o||(a&wc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ue.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$c)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let o=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let n=ue.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ue.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!oN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class vC{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let r=n.topNode,o,a=bC(null,n.preserveWhitespace,0)|(i?wc:0);r?o=new Xd(r.type,r.attrs,st.none,!0,n.topMatch||r.type.contentMatch,a):i?o=new Xd(null,null,st.none,!0,null,a):o=new Xd(e.schema.topNodeType,null,st.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let i=e.nodeValue,r=this.top,o=r.options&k0?"full":this.localPreserveWS||(r.options&$c)>0;if(o==="full"||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(o)o!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let a=r.content[r.content.length-1],c=e.previousSibling;(!a||c&&c.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),n,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,n,i){let r=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),c;aN.hasOwnProperty(a)&&this.parser.normalizeLists&&yP(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,i));e:if(d?d.ignore:gP.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let f,p=this.needsBlock;if(oN.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),f=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let m=d&&d.skip?n:this.readStyles(e,n);m&&this.addAll(e,m),f&&this.sync(o),this.needsBlock=p}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,d,f,d.consuming===!1?c:void 0)}this.localPreserveWS=r}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let i=e.style;if(i&&i.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],a=i.getPropertyValue(o);if(a)for(let c=void 0;;){let d=this.parser.matchStyle(o,a,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(f=>!d.clearMark(f)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return n}addElementByRule(e,n,i,r){let o,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let d=this.enter(a,n.attrs||null,i,n.preserveWhitespace);d&&(o=!0,i=d)}else{let d=this.parser.schema.marks[n.mark];i=i.concat(d.create(n.attrs))}let c=this.top;if(a&&a.isLeaf)this.findInside(e);else if(r)this.addElement(e,i,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,i,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,i),this.findAround(e,d,!1)}o&&this.sync(c)&&this.open--}addAll(e,n,i,r){let o=i||0;for(let a=i?e.childNodes[i]:e.firstChild,c=r==null?null:e.childNodes[r];a!=c;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a,n);this.findAtPoint(e,o)}findPlace(e,n,i){let r,o;for(let a=this.open,c=0;a>=0;a--){let d=this.nodes[a],f=d.findWrapping(e);if(f&&(!r||r.length>f.length+c)&&(r=f,o=d,!f.length))break;if(d.solid){if(i)break;c+=2}}if(!r)return null;this.sync(o);for(let a=0;a<r.length;a++)n=this.enterInner(r[a],null,n,!1);return n}insertNode(e,n,i){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let r=this.findPlace(e,n,i);if(r){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let a=st.none;for(let c of r.concat(e.marks))(o.type?o.type.allowsMarkType(c.type):wC(c.type,e.type))&&(a=c.addToSet(a));return o.content.push(e.mark(a)),!0}return!1}enter(e,n,i,r){let o=this.findPlace(e.create(n),i,!1);return o&&(o=this.enterInner(e,n,i,!0,r)),o}enterInner(e,n,i,r=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let c=bC(e,o,a.options);a.options&wc&&a.content.length==0&&(c|=wc);let d=st.none;return i=i.filter(f=>(a.type?a.type.allowsMarkType(f.type):wC(f.type,e))?(d=f.addToSet(d),!1):!0),this.nodes.push(new Xd(e,n,d,r,null,c)),this.open++,i}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=$c)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),o=-(i?i.depth+1:0)+(r?0:1),a=(c,d)=>{for(;c>=0;c--){let f=n[c];if(f==""){if(c==n.length-1||c==0)continue;for(;d>=o;d--)if(a(c-1,d))return!0;return!1}else{let p=d>0||d==0&&r?this.nodes[d].type:i&&d>=o?i.node(d-o).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;d--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}}function yP(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&aN.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):i=="li"?n=e:i&&(n=null)}}function xP(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function SC(t){let e={};for(let n in t)e[n]=t[n];return e}function wC(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let o=[],a=c=>{o.push(c);for(let d=0;d<c.edgeCount;d++){let{type:f,next:p}=c.edge(d);if(f==e||o.indexOf(p)<0&&a(p))return!0}};if(a(r.contentMatch))return!0}}class Co{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=uy(n).createDocumentFragment());let r=i,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let c=0,d=0;for(;c<o.length&&d<a.marks.length;){let f=a.marks[d];if(!this.marks[f.type.name]){d++;continue}if(!f.eq(o[c][0])||f.type.spec.spanning===!1)break;c++,d++}for(;c<o.length;)r=o.pop()[1];for(;d<a.marks.length;){let f=a.marks[d++],p=this.serializeMark(f,a.isInline,n);p&&(o.push([f,r]),r.appendChild(p.dom),r=p.contentDOM||p.dom)}}r.appendChild(this.serializeNodeInner(a,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:r}=vf(uy(n),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(i),i=o.dom)}return i}serializeMark(e,n,i={}){let r=this.marks[e.type.name];return r&&vf(uy(i),r(e,n),null,e.attrs)}static renderSpec(e,n,i=null,r){return vf(e,n,i,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Co(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=EC(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return EC(e.marks)}}function EC(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function uy(t){return t.document||window.document}const CC=new WeakMap;function bP(t){let e=CC.get(t);return e===void 0&&CC.set(t,e=vP(t)),e}function vP(t){let e=null;function n(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let r=0;r<i.length;r++)n(i[r]);else for(let r in i)n(i[r])}return n(t),e}function vf(t,e,n,i){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],o;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(o=bP(i))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=r.indexOf(" ");a>0&&(n=r.slice(0,a),r=r.slice(a+1));let c,d=n?t.createElementNS(n,r):t.createElement(r),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let m in f)if(f[m]!=null){let g=m.indexOf(" ");g>0?d.setAttributeNS(m.slice(0,g),m.slice(g+1),f[m]):m=="style"&&d.style?d.style.cssText=f[m]:d.setAttribute(m,f[m])}}for(let m=p;m<e.length;m++){let g=e[m];if(g===0){if(m<e.length-1||m>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:x,contentDOM:S}=vf(t,g,n,i);if(d.appendChild(x),S){if(c)throw new RangeError("Multiple content holes");c=S}}}return{dom:d,contentDOM:c}}const lN=65535,cN=Math.pow(2,16);function SP(t,e){return t+e*cN}function kC(t){return t&lN}function wP(t){return(t-(t&lN))/cN}const uN=1,dN=2,Sf=4,fN=8;class T0{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&fN)>0}get deletedBefore(){return(this.delInfo&(uN|Sf))>0}get deletedAfter(){return(this.delInfo&(dN|Sf))>0}get deletedAcross(){return(this.delInfo&Sf)>0}}class jn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&jn.empty)return jn.empty}recover(e){let n=0,i=kC(e);if(!this.inverted)for(let r=0;r<i;r++)n+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+n+wP(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let r=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let f=this.ranges[c+o],p=this.ranges[c+a],m=d+f;if(e<=m){let g=f?e==d?-1:e==m?1:n:n,x=d+r+(g<0?0:p);if(i)return x;let S=e==(n<0?d:m)?null:SP(c/3,e-d),w=e==d?dN:e==m?uN:Sf;return(n<0?e!=d:e!=m)&&(w|=fN),new T0(x,w,S)}r+=p-f}return i?e+r:new T0(e+r,0,null)}touches(e,n){let i=0,r=kC(n),o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?i:0);if(d>e)break;let f=this.ranges[c+o],p=d+f;if(e<=p&&c==r*3)return!0;i+=this.ranges[c+a]-f}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let a=this.ranges[r],c=a-(this.inverted?o:0),d=a+(this.inverted?0:o),f=this.ranges[r+n],p=this.ranges[r+i];e(c,c+f,d,d+p),o+=p-f}}invert(){return new jn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?jn.empty:new jn(e<0?[0,-e,0]:[0,0,e])}}jn.empty=new jn([]);class Uc{constructor(e,n,i=0,r=e?e.length:0){this.mirror=n,this.from=i,this.to=r,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Uc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,i=this._maps.length;n<e._maps.length;n++){let r=e.getMirror(n);this.appendMap(e._maps[n],r!=null&&r<n?i+r:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this._maps.length+e._maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e._maps[n].invert(),r!=null&&r>n?i-r-1:void 0)}}invert(){let e=new Uc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let r=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],c=a.mapResult(e,n);if(c.recover!=null){let d=this.getMirror(o);if(d!=null&&d>o&&d<this.to){o=d,e=this._maps[d].recover(c.recover);continue}}r|=c.delInfo,e=c.pos}return i?e:new T0(e,r,null)}}const dy=Object.create(null);class an{getMap(){return jn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=dy[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in dy)throw new RangeError("Duplicate use of step JSON ID "+e);return dy[e]=n,n.prototype.jsonID=e,n}}class Ot{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ot(e,null)}static fail(e){return new Ot(null,e)}static fromReplace(e,n,i,r){try{return Ot.ok(e.replace(n,i,r))}catch(o){if(o instanceof Hf)return Ot.fail(o.message);throw o}}}function Xx(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(Xx(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return ue.fromArray(i)}class is extends an{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new ge(Xx(n.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),r),n.openStart,n.openEnd);return Ot.fromReplace(e,this.from,this.to,o)}invert(){return new di(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new is(n.pos,i.pos,this.mark)}merge(e){return e instanceof is&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new is(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new is(n.from,n.to,e.markFromJSON(n.mark))}}an.jsonID("addMark",is);class di extends an{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new ge(Xx(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return Ot.fromReplace(e,this.from,this.to,i)}invert(){return new is(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new di(n.pos,i.pos,this.mark)}merge(e){return e instanceof di&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new di(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new di(n.from,n.to,e.markFromJSON(n.mark))}}an.jsonID("removeMark",di);class rs extends an{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ot.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ot.fromReplace(e,this.pos,this.pos+1,new ge(ue.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(i))return new rs(this.pos,n.marks[r]);return new rs(this.pos,this.mark)}}return new ho(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new rs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new rs(n.pos,e.markFromJSON(n.mark))}}an.jsonID("addNodeMark",rs);class ho extends an{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ot.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ot.fromReplace(e,this.pos,this.pos+1,new ge(ue.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new rs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ho(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ho(n.pos,e.markFromJSON(n.mark))}}an.jsonID("removeNodeMark",ho);class Ut extends an{constructor(e,n,i,r=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=r}apply(e){return this.structure&&M0(e,this.from,this.to)?Ot.fail("Structure replace would overwrite content"):Ot.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new jn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ut(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new Ut(n.pos,Math.max(n.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ut)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ge.empty:new ge(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ut(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ge.empty:new ge(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ut(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ut(n.from,n.to,ge.fromJSON(e,n.slice),!!n.structure)}}an.jsonID("replace",Ut);class Ft extends an{constructor(e,n,i,r,o,a,c=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=a,this.structure=c}apply(e){if(this.structure&&(M0(e,this.from,this.gapFrom)||M0(e,this.gapTo,this.to)))return Ot.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ot.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?Ot.fromReplace(e,this.from,this.to,i):Ot.fail("Content does not fit in gap")}getMap(){return new jn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ft(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||o>i.pos?null:new Ft(n.pos,i.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ft(n.from,n.to,n.gapFrom,n.gapTo,ge.fromJSON(e,n.slice),n.insert,!!n.structure)}}an.jsonID("replaceAround",Ft);function M0(t,e,n){let i=t.resolve(e),r=n-e,o=i.depth;for(;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0){let a=i.node(o).maybeChild(i.indexAfter(o));for(;r>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,r--}}return!1}function EP(t,e,n,i){let r=[],o=[],a,c;t.doc.nodesBetween(e,n,(d,f,p)=>{if(!d.isInline)return;let m=d.marks;if(!i.isInSet(m)&&p.type.allowsMarkType(i.type)){let g=Math.max(f,e),x=Math.min(f+d.nodeSize,n),S=i.addToSet(m);for(let w=0;w<m.length;w++)m[w].isInSet(S)||(a&&a.to==g&&a.mark.eq(m[w])?a.to=x:r.push(a=new di(g,x,m[w])));c&&c.to==g?c.to=x:o.push(c=new is(g,x,i))}}),r.forEach(d=>t.step(d)),o.forEach(d=>t.step(d))}function CP(t,e,n,i){let r=[],o=0;t.doc.nodesBetween(e,n,(a,c)=>{if(!a.isInline)return;o++;let d=null;if(i instanceof Zh){let f=a.marks,p;for(;p=i.isInSet(f);)(d||(d=[])).push(p),f=p.removeFromSet(f)}else i?i.isInSet(a.marks)&&(d=[i]):d=a.marks;if(d&&d.length){let f=Math.min(c+a.nodeSize,n);for(let p=0;p<d.length;p++){let m=d[p],g;for(let x=0;x<r.length;x++){let S=r[x];S.step==o-1&&m.eq(r[x].style)&&(g=S)}g?(g.to=f,g.step=o):r.push({style:m,from:Math.max(c,e),to:f,step:o})}}}),r.forEach(a=>t.step(new di(a.from,a.to,a.style)))}function Wx(t,e,n,i=n.contentMatch,r=!0){let o=t.doc.nodeAt(e),a=[],c=e+1;for(let d=0;d<o.childCount;d++){let f=o.child(d),p=c+f.nodeSize,m=i.matchType(f.type);if(!m)a.push(new Ut(c,p,ge.empty));else{i=m;for(let g=0;g<f.marks.length;g++)n.allowsMarkType(f.marks[g].type)||t.step(new di(c,p,f.marks[g]));if(r&&f.isText&&n.whitespace!="pre"){let g,x=/\r?\n|\r/g,S;for(;g=x.exec(f.text);)S||(S=new ge(ue.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),a.push(new Ut(c+g.index,c+g.index+g[0].length,S))}}c=p}if(!i.validEnd){let d=i.fillBefore(ue.empty,!0);t.replace(c,c,new ge(d,0,0))}for(let d=a.length-1;d>=0;d--)t.step(a[d])}function kP(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Za(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let r=t.$from.node(i),o=t.$from.index(i),a=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(o,a,n))return i;if(i==0||r.type.spec.isolating||!kP(r,o,a))break}return null}function TP(t,e,n){let{$from:i,$to:r,depth:o}=e,a=i.before(o+1),c=r.after(o+1),d=a,f=c,p=ue.empty,m=0;for(let S=o,w=!1;S>n;S--)w||i.index(S)>0?(w=!0,p=ue.from(i.node(S).copy(p)),m++):d--;let g=ue.empty,x=0;for(let S=o,w=!1;S>n;S--)w||r.after(S+1)<r.end(S)?(w=!0,g=ue.from(r.node(S).copy(g)),x++):f++;t.step(new Ft(d,f,a,c,new ge(p.append(g),m,x),p.size-m,!0))}function Zx(t,e,n=null,i=t){let r=MP(t,e),o=r&&NP(i,e);return o?r.map(TC).concat({type:e,attrs:n}).concat(o.map(TC)):null}function TC(t){return{type:t,attrs:null}}function MP(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.contentMatchAt(i).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return n.canReplaceWith(i,r,a)?o:null}function NP(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.child(i),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let d=(a.length?a[a.length-1]:e).contentMatch;for(let f=i;d&&f<r;f++)d=d.matchType(n.child(f).type);return!d||!d.validEnd?null:a}function AP(t,e,n){let i=ue.empty;for(let a=n.length-1;a>=0;a--){if(i.size){let c=n[a].type.contentMatch.matchFragment(i);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=ue.from(n[a].type.create(n[a].attrs,i))}let r=e.start,o=e.end;t.step(new Ft(r,o,r,o,new ge(i,0,0),n.length,!0))}function DP(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(a,c)=>{let d=typeof r=="function"?r(a):r;if(a.isTextblock&&!a.hasMarkup(i,d)&&OP(t.doc,t.mapping.slice(o).map(c),i)){let f=null;if(i.schema.linebreakReplacement){let x=i.whitespace=="pre",S=!!i.contentMatch.matchType(i.schema.linebreakReplacement);x&&!S?f=!1:!x&&S&&(f=!0)}f===!1&&pN(t,a,c,o),Wx(t,t.mapping.slice(o).map(c,1),i,void 0,f===null);let p=t.mapping.slice(o),m=p.map(c,1),g=p.map(c+a.nodeSize,1);return t.step(new Ft(m,g,m+1,g-1,new ge(ue.from(i.create(d,null,a.marks)),0,0),1,!0)),f===!0&&hN(t,a,c,o),!1}})}function hN(t,e,n,i){e.forEach((r,o)=>{if(r.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(r.text);){let d=t.mapping.slice(i).map(n+1+o+a.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function pN(t,e,n,i){e.forEach((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let a=t.mapping.slice(i).map(n+1+o);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function OP(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}function RP(t,e,n,i,r){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(i,null,r||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ft(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ge(ue.from(a),0,0),1,!0))}function ur(t,e,n=1,i){let r=t.resolve(e),o=r.depth-n,a=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!a.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let f=r.depth-1,p=n-2;f>o;f--,p--){let m=r.node(f),g=r.index(f);if(m.type.spec.isolating)return!1;let x=m.content.cutByIndex(g,m.childCount),S=i&&i[p+1];S&&(x=x.replaceChild(0,S.type.create(S.attrs)));let w=i&&i[p]||m;if(!m.canReplace(g+1,m.childCount)||!w.type.validContent(x))return!1}let c=r.indexAfter(o),d=i&&i[0];return r.node(o).canReplaceWith(c,c,d?d.type:r.node(o+1).type)}function jP(t,e,n=1,i){let r=t.doc.resolve(e),o=ue.empty,a=ue.empty;for(let c=r.depth,d=r.depth-n,f=n-1;c>d;c--,f--){o=ue.from(r.node(c).copy(o));let p=i&&i[f];a=ue.from(p?p.type.create(p.attrs,a):r.node(c).copy(a))}t.step(new Ut(e,e,new ge(o.append(a),n,n),!0))}function vs(t,e){let n=t.resolve(e),i=n.index();return mN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function _P(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:i}=t.type.schema;for(let r=0;r<e.childCount;r++){let o=e.child(r),a=o.type==i?t.type.schema.nodes.text:o.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function mN(t,e){return!!(t&&e&&!t.isLeaf&&_P(t,e))}function Qh(t,e,n=-1){let i=t.resolve(e);for(let r=i.depth;;r--){let o,a,c=i.index(r);if(r==i.depth?(o=i.nodeBefore,a=i.nodeAfter):n>0?(o=i.node(r+1),c++,a=i.node(r).maybeChild(c)):(o=i.node(r).maybeChild(c-1),a=i.node(r+1)),o&&!o.isTextblock&&mN(o,a)&&i.node(r).canReplace(c,c+1))return e;if(r==0)break;e=n<0?i.before(r):i.after(r)}}function LP(t,e,n){let i=null,{linebreakReplacement:r}=t.doc.type.schema,o=t.doc.resolve(e-n),a=o.node().type;if(r&&a.inlineContent){let p=a.whitespace=="pre",m=!!a.contentMatch.matchType(r);p&&!m?i=!1:!p&&m&&(i=!0)}let c=t.steps.length;if(i===!1){let p=t.doc.resolve(e+n);pN(t,p.node(),p.before(),c)}a.inlineContent&&Wx(t,e+n-1,a,o.node().contentMatchAt(o.index()),i==null);let d=t.mapping.slice(c),f=d.map(e-n);if(t.step(new Ut(f,d.map(e+n,-1),ge.empty,!0)),i===!0){let p=t.doc.resolve(f);hN(t,p.node(),p.before(),t.steps.length)}return t}function zP(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let o=i.index(r);if(i.node(r).canReplaceWith(o,o,n))return i.before(r+1);if(o>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let o=i.indexAfter(r);if(i.node(r).canReplaceWith(o,o,n))return i.after(r+1);if(o<i.node(r).childCount)return null}return null}function gN(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let o=0;o<n.openStart;o++)r=r.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let a=i.depth;a>=0;a--){let c=a==i.depth?0:i.pos<=(i.start(a+1)+i.end(a+1))/2?-1:1,d=i.index(a)+(c>0?1:0),f=i.node(a),p=!1;if(o==1)p=f.canReplace(d,d,r);else{let m=f.contentMatchAt(d).findWrapping(r.firstChild.type);p=m&&f.canReplaceWith(d,d,m[0])}if(p)return c==0?i.pos:c<0?i.before(a+1):i.after(a+1)}return null}function Jh(t,e,n=e,i=ge.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),o=t.resolve(n);return yN(r,o,i)?new Ut(e,n,i):new BP(r,o,i).fit()}function yN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class BP{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=ue.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=ue.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let o=this.placed,a=i.depth,c=r.depth;for(;a&&c&&o.childCount==1;)o=o.firstChild.content,a--,c--;let d=new ge(o,a,c);return e>-1?new Ft(i.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||i.pos!=this.$to.pos?new Ut(i.pos,r.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let o=n.firstChild;if(n.childCount>1&&(r=0),o.type.spec.isolating&&r<=i){e=i;break}n=o.content}for(let n=1;n<=2;n++)for(let i=n==1?e:this.unplaced.openStart;i>=0;i--){let r,o=null;i?(o=fy(this.unplaced.content,i-1).firstChild,r=o.content):r=this.unplaced.content;let a=r.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:f}=this.frontier[c],p,m=null;if(n==1&&(a?f.matchType(a.type)||(m=f.fillBefore(ue.from(a),!1)):o&&d.compatibleContent(o.type)))return{sliceDepth:i,frontierDepth:c,parent:o,inject:m};if(n==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:i,frontierDepth:c,parent:o,wrap:p};if(o&&f.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=fy(e,n);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new ge(e,n+1,Math.max(i,r.size+n>=e.size-i?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=fy(e,n);if(r.childCount<=1&&n>0){let o=e.size-n<=n+r.size;this.unplaced=new ge(uc(e,n-1,1),n-1,o?n-1:i)}else this.unplaced=new ge(uc(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:r,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let w=0;w<o.length;w++)this.openFrontierNode(o[w]);let a=this.unplaced,c=i?i.content:a.content,d=a.openStart-e,f=0,p=[],{match:m,type:g}=this.frontier[n];if(r){for(let w=0;w<r.childCount;w++)p.push(r.child(w));m=m.matchFragment(r)}let x=c.size+e-(a.content.size-a.openEnd);for(;f<c.childCount;){let w=c.child(f),E=m.matchType(w.type);if(!E)break;f++,(f>1||d==0||w.content.size)&&(m=E,p.push(xN(w.mark(g.allowedMarks(w.marks)),f==1?d:0,f==c.childCount?x:-1)))}let S=f==c.childCount;S||(x=-1),this.placed=dc(this.placed,n,ue.from(p)),this.frontier[n].match=m,S&&x<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,E=c;w<x;w++){let C=E.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),E=C.content}this.unplaced=S?e==0?ge.empty:new ge(uc(a.content,e-1,1),e-1,x<0?a.openEnd:e-1):new ge(uc(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!hy(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:r}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=hy(e,n,r,i,o);if(a){for(let c=n-1;c>=0;c--){let{match:d,type:f}=this.frontier[c],p=hy(e,c,f,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:a,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=dc(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let r=e.node(i),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,n=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=dc(this.placed,this.depth,ue.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ue.empty,!0);n.childCount&&(this.placed=dc(this.placed,this.frontier.length,n))}}function uc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(uc(t.firstChild.content,e-1,n)))}function dc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(dc(t.lastChild.content,e-1,n)))}function fy(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function xN(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,xN(i.firstChild,e-1,i.childCount==1?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(ue.empty,!0)))),t.copy(i)}function hy(t,e,n,i,r){let o=t.node(e),a=r?t.indexAfter(e):t.index(e);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let c=i.fillBefore(o.content,!0,a);return c&&!PP(n,o.content,a)?c:null}function PP(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}function VP(t){return t.spec.defining||t.spec.definingForContent}function IP(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),o=t.doc.resolve(n);if(yN(r,o,i))return t.step(new Ut(e,n,i));let a=vN(r,t.doc.resolve(n));a[a.length-1]==0&&a.pop();let c=-(r.depth+1);a.unshift(c);for(let g=r.depth,x=r.pos-1;g>0;g--,x--){let S=r.node(g).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;a.indexOf(g)>-1?c=g:r.before(g)==x&&a.splice(1,0,-g)}let d=a.indexOf(c),f=[],p=i.openStart;for(let g=i.content,x=0;;x++){let S=g.firstChild;if(f.push(S),x==i.openStart)break;g=S.content}for(let g=p-1;g>=0;g--){let x=f[g],S=VP(x.type);if(S&&!x.sameMarkup(r.node(Math.abs(c)-1)))p=g;else if(S||!x.type.isTextblock)break}for(let g=i.openStart;g>=0;g--){let x=(g+p+1)%(i.openStart+1),S=f[x];if(S)for(let w=0;w<a.length;w++){let E=a[(w+d)%a.length],C=!0;E<0&&(C=!1,E=-E);let N=r.node(E-1),k=r.index(E-1);if(N.canReplaceWith(k,k,S.type,S.marks))return t.replace(r.before(E),C?o.after(E):n,new ge(bN(i.content,0,i.openStart,x),x,i.openEnd))}}let m=t.steps.length;for(let g=a.length-1;g>=0&&(t.replace(e,n,i),!(t.steps.length>m));g--){let x=a[g];x<0||(e=r.before(x),n=o.after(x))}}function bN(t,e,n,i,r){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(bN(o.content,e+1,n,i,o)))}if(e>i){let o=r.contentMatchAt(0),a=o.fillBefore(t).append(t);t=a.append(o.matchFragment(a).fillBefore(ue.empty,!0))}return t}function HP(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=zP(t.doc,e,i.type);r!=null&&(e=n=r)}t.replaceRange(e,n,new ge(ue.from(i),0,0))}function $P(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),o=vN(i,r);for(let a=0;a<o.length;a++){let c=o[a],d=a==o.length-1;if(d&&c==0||i.node(c).type.contentMatch.validEnd)return t.delete(i.start(c),r.end(c));if(c>0&&(d||i.node(c-1).canReplace(i.index(c-1),r.indexAfter(c-1))))return t.delete(i.before(c),r.after(c))}for(let a=1;a<=i.depth&&a<=r.depth;a++)if(e-i.start(a)==i.depth-a&&n>i.end(a)&&r.end(a)-n!=r.depth-a&&i.start(a-1)==r.start(a-1)&&i.node(a-1).canReplace(i.index(a-1),r.index(a-1)))return t.delete(i.before(a),n);t.delete(e,n)}function vN(t,e){let n=[],i=Math.min(t.depth,e.depth);for(let r=i;r>=0;r--){let o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}class Aa extends an{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ot.fail("No node at attribute step's position");let i=Object.create(null);for(let o in n.attrs)i[o]=n.attrs[o];i[this.attr]=this.value;let r=n.type.create(i,null,n.marks);return Ot.fromReplace(e,this.pos,this.pos+1,new ge(ue.from(r),0,n.isLeaf?0:1))}getMap(){return jn.empty}invert(e){return new Aa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Aa(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Aa(n.pos,n.attr,n.value)}}an.jsonID("attr",Aa);class Fc extends an{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,e.content,e.marks);return Ot.ok(i)}getMap(){return jn.empty}invert(e){return new Fc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Fc(n.attr,n.value)}}an.jsonID("docAttr",Fc);let La=class extends Error{};La=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};La.prototype=Object.create(Error.prototype);La.prototype.constructor=La;La.prototype.name="TransformError";let SN=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Uc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new La(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=ge.empty){let r=Jh(this.doc,e,n,i);return r&&this.step(r),this}replaceWith(e,n,i){return this.replace(e,n,new ge(ue.from(i),0,0))}delete(e,n){return this.replace(e,n,ge.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return IP(this,e,n,i),this}replaceRangeWith(e,n,i){return HP(this,e,n,i),this}deleteRange(e,n){return $P(this,e,n),this}lift(e,n){return TP(this,e,n),this}join(e,n=1){return LP(this,e,n),this}wrap(e,n){return AP(this,e,n),this}setBlockType(e,n=e,i,r=null){return DP(this,e,n,i,r),this}setNodeMarkup(e,n,i=null,r){return RP(this,e,n,i,r),this}setNodeAttribute(e,n,i){return this.step(new Aa(e,n,i)),this}setDocAttribute(e,n){return this.step(new Fc(e,n)),this}addNodeMark(e,n){return this.step(new rs(e,n)),this}removeNodeMark(e,n){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(n instanceof st)n.isInSet(i.marks)&&this.step(new ho(e,n));else{let r=i.marks,o,a=[];for(;o=n.isInSet(r);)a.push(new ho(e,o)),r=o.removeFromSet(r);for(let c=a.length-1;c>=0;c--)this.step(a[c])}return this}split(e,n=1,i){return jP(this,e,n,i),this}addMark(e,n,i){return EP(this,e,n,i),this}removeMark(e,n,i){return CP(this,e,n,i),this}clearIncompatible(e,n,i){return Wx(this,e,n,i),this}};const py=Object.create(null);let Be=class{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new UP(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ge.empty){let i=n.content.lastChild,r=null;for(let c=0;c<n.openEnd;c++)r=i,i=i.lastChild;let o=e.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:d,$to:f}=a[c],p=e.mapping.slice(o);e.replaceRange(p.map(d.pos),p.map(f.pos),c?ge.empty:n),c==0&&AC(e,o,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:a,$to:c}=r[o],d=e.mapping.slice(i),f=d.map(a.pos),p=d.map(c.pos);o?e.deleteRange(f,p):(e.replaceRangeWith(f,p,n),AC(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let r=e.parent.inlineContent?new _e(e):ga(e.node(0),e.parent,e.pos,e.index(),n,i);if(r)return r;for(let o=e.depth-1;o>=0;o--){let a=n<0?ga(e.node(0),e.node(o),e.before(o+1),e.index(o),n,i):ga(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,i);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ln(e.node(0))}static atStart(e){return ga(e,e,0,0,1)||new Ln(e)}static atEnd(e){return ga(e,e,e.content.size,e.childCount,-1)||new Ln(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=py[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in py)throw new RangeError("Duplicate use of selection JSON ID "+e);return py[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _e.between(this.$anchor,this.$head).getBookmark()}};Be.prototype.visible=!0;class UP{constructor(e,n){this.$from=e,this.$to=n}}let MC=!1;function NC(t){!MC&&!t.parent.inlineContent&&(MC=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _e extends Be{constructor(e,n=e){NC(e),NC(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return Be.near(i);let r=e.resolve(n.map(this.anchor));return new _e(r.parent.inlineContent?r:i,i)}replace(e,n=ge.empty){if(super.replace(e,n),n==ge.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof _e&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ep(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _e(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let r=e.resolve(n);return new this(r,i==n?r:e.resolve(i))}static between(e,n,i){let r=e.pos-n.pos;if((!i||r)&&(i=r>=0?1:-1),!n.parent.inlineContent){let o=Be.findFrom(n,i,!0)||Be.findFrom(n,-i,!0);if(o)n=o.$head;else return Be.near(n,i)}return e.parent.inlineContent||(r==0?e=n:(e=(Be.findFrom(e,-i,!0)||Be.findFrom(e,i,!0)).$anchor,e.pos<n.pos!=r<0&&(e=n))),new _e(e,n)}}Be.jsonID("text",_e);class ep{constructor(e,n){this.anchor=e,this.head=n}map(e){return new ep(e.map(this.anchor),e.map(this.head))}resolve(e){return _e.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ee extends Be{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:r}=n.mapResult(this.anchor),o=e.resolve(r);return i?Be.near(o):new Ee(o)}content(){return new ge(ue.from(this.node),0,0)}eq(e){return e instanceof Ee&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Qx(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ee(e.resolve(n.anchor))}static create(e,n){return new Ee(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ee.prototype.visible=!1;Be.jsonID("node",Ee);class Qx{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new ep(i,i):new Qx(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&Ee.isSelectable(i)?new Ee(n):Be.near(n)}}class Ln extends Be{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ge.empty){if(n==ge.empty){e.delete(0,e.doc.content.size);let i=Be.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ln(e)}map(e){return new Ln(e)}eq(e){return e instanceof Ln}getBookmark(){return FP}}Be.jsonID("all",Ln);const FP={map(){return this},resolve(t){return new Ln(t)}};function ga(t,e,n,i,r,o=!1){if(e.inlineContent)return _e.create(t,n);for(let a=i-(r>0?0:1);r>0?a<e.childCount:a>=0;a+=r){let c=e.child(a);if(c.isAtom){if(!o&&Ee.isSelectable(c))return Ee.create(t,n-(r<0?c.nodeSize:0))}else{let d=ga(t,c,n+r,r<0?c.childCount:0,r,o);if(d)return d}n+=c.nodeSize*r}return null}function AC(t,e,n){let i=t.steps.length-1;if(i<e)return;let r=t.steps[i];if(!(r instanceof Ut||r instanceof Ft))return;let o=t.mapping.maps[i],a;o.forEach((c,d,f,p)=>{a==null&&(a=p)}),t.setSelection(Be.near(t.doc.resolve(a),n))}const DC=1,Wd=2,OC=4;class qP extends SN{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|DC)&~Wd,this.storedMarks=null,this}get selectionSet(){return(this.updated&DC)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Wd,this}ensureMarks(e){return st.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Wd)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Wd,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||st.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let r=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=n),i=i??n,!e)return this.deleteRange(n,i);let o=this.storedMarks;if(!o){let a=this.doc.resolve(n);o=i==n?a.marks():a.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,r.text(e,o)),this.selection.empty||this.setSelection(Be.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=OC,this}get scrolledIntoView(){return(this.updated&OC)>0}}function RC(t,e){return!e||!t?t:t.bind(e)}class fc{constructor(e,n,i){this.name=e,this.init=RC(n.init,i),this.apply=RC(n.apply,i)}}const YP=[new fc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new fc("selection",{init(t,e){return t.selection||Be.atStart(e.doc)},apply(t){return t.selection}}),new fc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new fc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class my{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=YP.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new fc(i.key,i.spec.state,i))})}}class ka{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),r=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let c=this.config.plugins[a];if(c.spec.appendTransaction){let d=r?r[a].n:0,f=r?r[a].state:this,p=d<n.length&&c.spec.appendTransaction.call(c,d?n.slice(d):n,f,i);if(p&&i.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!r){r=[];for(let m=0;m<this.config.plugins.length;m++)r.push(m<a?{state:i,n:n.length}:{state:this,n:0})}n.push(p),i=i.applyInner(p),o=!0}r&&(r[a]={state:i,n:n.length})}}if(!o)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new ka(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let o=i[r];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new qP(this)}static create(e){let n=new my(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new ka(n);for(let r=0;r<n.fields.length;r++)i[n.fields[r].name]=n.fields[r].init(e,i);return i}reconfigure(e){let n=new my(this.schema,e.plugins),i=n.fields,r=new ka(n);for(let o=0;o<i.length;o++){let a=i[o].name;r[a]=this.hasOwnProperty(a)?this[a]:i[o].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],o=r.spec.state;o&&o.toJSON&&(n[i]=o.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new my(e.schema,e.plugins),o=new ka(r);return r.fields.forEach(a=>{if(a.name=="doc")o.doc=ls.fromJSON(e.schema,n.doc);else if(a.name=="selection")o.selection=Be.fromJSON(o.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let c in i){let d=i[c],f=d.spec.state;if(d.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){o[a.name]=f.fromJSON.call(d,e,n[c],o);return}}o[a.name]=a.init(e,o)}}),o}}function wN(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=wN(r,e,{})),n[i]=r}return n}class wt{constructor(e){this.spec=e,this.props={},e.props&&wN(e.props,this,this.props),this.key=e.key?e.key.key:EN("plugin")}getState(e){return e[this.key]}}const gy=Object.create(null);function EN(t){return t in gy?t+"$"+ ++gy[t]:(gy[t]=0,t+"$")}class Yt{constructor(e="key"){this.key=EN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Qt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},za=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let N0=null;const ar=function(t,e,n){let i=N0||(N0=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},KP=function(){N0=null},po=function(t,e,n,i){return n&&(jC(t,e,n,i,-1)||jC(t,e,n,i,1))},GP=/^(img|br|input|textarea|hr)$/i;function jC(t,e,n,i,r){for(var o;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Wn(t))){let a=t.parentNode;if(!a||a.nodeType!=1||hu(t)||GP.test(t.nodeName)||t.contentEditable=="false")return!1;e=Qt(t)+(r<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(r<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=r;else return!1;else t=a,e=r<0?Wn(t):0}else return!1}}function Wn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function XP(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Wn(t)}else if(t.parentNode&&!hu(t))e=Qt(t),t=t.parentNode;else return null}}function WP(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!hu(t))e=Qt(t)+1,t=t.parentNode;else return null}}function ZP(t,e,n){for(let i=e==0,r=e==Wn(t);i||r;){if(t==n)return!0;let o=Qt(t);if(t=t.parentNode,!t)return!1;i=i&&o==0,r=r&&o==Wn(t)}}function hu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const tp=function(t){return t.focusNode&&po(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Ks(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function QP(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function JP(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:Math.min(Wn(i.offsetNode),i.offset)}}catch{}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:Math.min(Wn(i.startContainer),i.startOffset)}}}const Di=typeof navigator<"u"?navigator:null,_C=typeof document<"u"?document:null,Ss=Di&&Di.userAgent||"",A0=/Edge\/(\d+)/.exec(Ss),CN=/MSIE \d/.exec(Ss),D0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ss),En=!!(CN||D0||A0),us=CN?document.documentMode:D0?+D0[1]:A0?+A0[1]:0,ei=!En&&/gecko\/(\d+)/i.test(Ss);ei&&+(/Firefox\/(\d+)/.exec(Ss)||[0,0])[1];const O0=!En&&/Chrome\/(\d+)/.exec(Ss),on=!!O0,kN=O0?+O0[1]:0,dn=!En&&!!Di&&/Apple Computer/.test(Di.vendor),Ba=dn&&(/Mobile\/\w+/.test(Ss)||!!Di&&Di.maxTouchPoints>2),Xn=Ba||(Di?/Mac/.test(Di.platform):!1),e6=Di?/Win/.test(Di.platform):!1,lr=/Android \d/.test(Ss),pu=!!_C&&"webkitFontSmoothing"in _C.documentElement.style,t6=pu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function n6(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function nr(t,e){return typeof t=="number"?t:t[e]}function i6(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function LC(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=za(a);continue}let c=a,d=c==o.body,f=d?n6(o):i6(c),p=0,m=0;if(e.top<f.top+nr(i,"top")?m=-(f.top-e.top+nr(r,"top")):e.bottom>f.bottom-nr(i,"bottom")&&(m=e.bottom-e.top>f.bottom-f.top?e.top+nr(r,"top")-f.top:e.bottom-f.bottom+nr(r,"bottom")),e.left<f.left+nr(i,"left")?p=-(f.left-e.left+nr(r,"left")):e.right>f.right-nr(i,"right")&&(p=e.right-f.right+nr(r,"right")),p||m)if(d)o.defaultView.scrollBy(p,m);else{let x=c.scrollLeft,S=c.scrollTop;m&&(c.scrollTop+=m),p&&(c.scrollLeft+=p);let w=c.scrollLeft-x,E=c.scrollTop-S;e={left:e.left-w,top:e.top-E,right:e.right-w,bottom:e.bottom-E}}let g=d?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(g))break;a=g=="absolute"?a.offsetParent:za(a)}}function r6(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),i,r;for(let o=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let c=t.root.elementFromPoint(o,a);if(!c||c==t.dom||!t.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=n-20){i=c,r=d.top;break}}return{refDOM:i,refTop:r,stack:TN(t.dom)}}function TN(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=za(i));return e}function s6({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;MN(n,i==0?0:i-e)}function MN(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:o}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=o&&(i.scrollLeft=o)}}let da=null;function o6(t){if(t.setActive)return t.setActive();if(da)return t.focus(da);let e=TN(t);t.focus(da==null?{get preventScroll(){return da={preventScroll:!0},!0}}:void 0),da||(da=!1,MN(e,0))}function NN(t,e){let n,i=2e8,r,o=0,a=e.top,c=e.top,d,f;for(let p=t.firstChild,m=0;p;p=p.nextSibling,m++){let g;if(p.nodeType==1)g=p.getClientRects();else if(p.nodeType==3)g=ar(p).getClientRects();else continue;for(let x=0;x<g.length;x++){let S=g[x];if(S.top<=a&&S.bottom>=c){a=Math.max(S.bottom,a),c=Math.min(S.top,c);let w=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(w<i){n=p,i=w,r=w&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,p.nodeType==1&&w&&(o=m+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!d&&S.left<=e.left&&S.right>=e.left&&(d=p,f={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(o=m+1)}}return!n&&d&&(n=d,r=f,i=0),n&&n.nodeType==3?a6(n,r):!n||i&&n.nodeType==1?{node:t,offset:o}:NN(n,r)}function a6(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let o=Xr(i,1);if(o.top!=o.bottom&&Jx(e,o))return{node:t,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function Jx(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function l6(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function c6(t,e,n){let{node:i,offset:r}=NN(e,n),o=-1;if(i.nodeType==1&&!i.firstChild){let a=i.getBoundingClientRect();o=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,r,o)}function u6(t,e,n,i){let r=-1;for(let o=e,a=!1;o!=t.dom;){let c=t.docView.nearestDesc(o,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!a&&d.left>i.left||d.top>i.top?r=c.posBefore:(!a&&d.right<i.left||d.bottom<i.top)&&(r=c.posAfter),a=!0),!c.contentDOM&&r<0&&!c.node.isText))return(c.node.isBlock?i.top<(d.top+d.bottom)/2:i.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;o=c.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}function AN(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let a=t.childNodes[o];if(a.nodeType==1){let c=a.getClientRects();for(let d=0;d<c.length;d++){let f=c[d];if(Jx(e,f))return AN(a,e,f)}}if((o=(o+1)%i)==r)break}return t}function d6(t,e){let n=t.dom.ownerDocument,i,r=0,o=JP(n,e.left,e.top);o&&({node:i,offset:r}=o);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=t.dom.getBoundingClientRect();if(!Jx(e,f)||(a=AN(t.dom,e,f),!a))return null}if(dn)for(let f=a;i&&f;f=za(f))f.draggable&&(i=void 0);if(a=l6(a,e),i){if(ei&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let p=i.childNodes[r],m;p.nodeName=="IMG"&&(m=p.getBoundingClientRect()).right<=e.left&&m.bottom>e.top&&r++}let f;pu&&r&&i.nodeType==1&&(f=i.childNodes[r-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&r--,i==t.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(c=u6(t,i,r,e))}c==null&&(c=c6(t,a,e));let d=t.docView.nearestDesc(a,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function zC(t){return t.top<t.bottom||t.left<t.right}function Xr(t,e){let n=t.getClientRects();if(n.length){let i=n[e<0?0:n.length-1];if(zC(i))return i}return Array.prototype.find.call(n,zC)||t.getBoundingClientRect()}const f6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function DN(t,e,n){let{node:i,offset:r,atom:o}=t.docView.domFromPos(e,n<0?-1:1),a=pu||ei;if(i.nodeType==3)if(a&&(f6.test(i.nodeValue)||(n<0?!r:r==i.nodeValue.length))){let d=Xr(ar(i,r,r),n);if(ei&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let f=Xr(ar(i,r-1,r-1),-1);if(f.top==d.top){let p=Xr(ar(i,r,r+1),-1);if(p.top!=d.top)return sc(p,p.left<f.left)}}return d}else{let d=r,f=r,p=n<0?1:-1;return n<0&&!r?(f++,p=-1):n>=0&&r==i.nodeValue.length?(d--,p=1):n<0?d--:f++,sc(Xr(ar(i,d,f),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&r&&(n<0||r==Wn(i))){let d=i.childNodes[r-1];if(d.nodeType==1)return yy(d.getBoundingClientRect(),!1)}if(o==null&&r<Wn(i)){let d=i.childNodes[r];if(d.nodeType==1)return yy(d.getBoundingClientRect(),!0)}return yy(i.getBoundingClientRect(),n>=0)}if(o==null&&r&&(n<0||r==Wn(i))){let d=i.childNodes[r-1],f=d.nodeType==3?ar(d,Wn(d)-(a?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(f)return sc(Xr(f,1),!1)}if(o==null&&r<Wn(i)){let d=i.childNodes[r];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let f=d?d.nodeType==3?ar(d,0,a?0:1):d.nodeType==1?d:null:null;if(f)return sc(Xr(f,-1),!0)}return sc(Xr(i.nodeType==3?ar(i):i,-n),n>=0)}function sc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function yy(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ON(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}function h6(t,e,n){let i=e.selection,r=n=="up"?i.$from:i.$to;return ON(t,e,()=>{let{node:o}=t.docView.domFromPos(r.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let a=DN(t,r.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=ar(c,0,c.nodeValue.length).getClientRects();else continue;for(let f=0;f<d.length;f++){let p=d[f];if(p.bottom>p.top+1&&(n=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const p6=/[\u0590-\u08ac]/;function m6(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,a=r==i.parent.content.size,c=t.domSelection();return c?!p6.test(i.parent.textContent)||!c.modify?n=="left"||n=="backward"?o:a:ON(t,e,()=>{let{focusNode:d,focusOffset:f,anchorNode:p,anchorOffset:m}=t.domSelectionRange(),g=c.caretBidiLevel;c.modify("move",n,"character");let x=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:S,focusOffset:w}=t.domSelectionRange(),E=S&&!x.contains(S.nodeType==1?S:S.parentNode)||d==S&&f==w;try{c.collapse(p,m),d&&(d!=p||f!=m)&&c.extend&&c.extend(d,f)}catch{}return g!=null&&(c.caretBidiLevel=g),E}):i.pos==i.start()||i.pos==i.end()}let BC=null,PC=null,VC=!1;function g6(t,e,n){return BC==e&&PC==n?VC:(BC=e,PC=n,VC=n=="up"||n=="down"?h6(t,e,n):m6(t,e,n))}const ti=0,IC=1,Ws=2,Oi=3;class mu{constructor(e,n,i,r){this.parent=e,this.children=n,this.dom=i,this.contentDOM=r,this.dirty=ti,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let r=this.children[n];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let o,a;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=n>Qt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!1;break}if(o.previousSibling)break}if(r==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!0;break}if(o.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,r=e;r;r=r.parentNode){let o=this.getDesc(r),a;if(o&&(!n||o.node))if(i&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))i=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let r=this.children[n],o=i+r.size;if(i==e&&o!=i){for(;!r.border&&r.children.length;)for(let a=0;a<r.children.length;a++){let c=r.children[a];if(c.size){r=c;break}}return r}if(e<o)return r.descAt(e-i-r.border);i=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let o=0;i<this.children.length;i++){let a=this.children[i],c=o+a.size;if(c>e||a instanceof jN){r=e-o;break}o=c}if(r)return this.children[i].domFromPos(r-this.children[i].border,n);for(let o;i&&!(o=this.children[i-1]).size&&o instanceof RN&&o.side>=0;i--);if(n<=0){let o,a=!0;for(;o=i?this.children[i-1]:null,!(!o||o.dom.parentNode==this.contentDOM);i--,a=!1);return o&&n&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?Qt(o.dom)+1:0}}else{let o,a=!0;for(;o=i<this.children.length?this.children[i]:null,!(!o||o.dom.parentNode==this.contentDOM);i++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?Qt(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let a=i,c=0;;c++){let d=this.children[c],f=a+d.size;if(r==-1&&e<=f){let p=a+d.border;if(e>=p&&n<=f-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,p);e=a;for(let m=c;m>0;m--){let g=this.children[m-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){r=Qt(g.dom)+1;break}e-=g.size}r==-1&&(r=0)}if(r>-1&&(f>n||c==this.children.length-1)){n=f;for(let p=c+1;p<this.children.length;p++){let m=this.children[p];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(-1)){o=Qt(m.dom);break}n+=m.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,r=!1){let o=Math.min(e,n),a=Math.max(e,n);for(let x=0,S=0;x<this.children.length;x++){let w=this.children[x],E=S+w.size;if(o>S&&a<E)return w.setSelection(e-S-w.border,n-S-w.border,i,r);S=E}let c=this.domFromPos(e,e?-1:1),d=n==e?c:this.domFromPos(n,n?-1:1),f=i.root.getSelection(),p=i.domSelectionRange(),m=!1;if((ei||dn)&&e==n){let{node:x,offset:S}=c;if(x.nodeType==3){if(m=!!(S&&x.nodeValue[S-1]==`
`),m&&S==x.nodeValue.length)for(let w=x,E;w;w=w.parentNode){if(E=w.nextSibling){E.nodeName=="BR"&&(c=d={node:E.parentNode,offset:Qt(E)+1});break}let C=w.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let w=x.childNodes[S-1];m=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(ei&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let x=p.focusNode.childNodes[p.focusOffset];x&&x.contentEditable=="false"&&(r=!0)}if(!(r||m&&dn)&&po(c.node,c.offset,p.anchorNode,p.anchorOffset)&&po(d.node,d.offset,p.focusNode,p.focusOffset))return;let g=!1;if((f.extend||e==n)&&!(m&&ei)){f.collapse(c.node,c.offset);try{e!=n&&f.extend(d.node,d.offset),g=!0}catch{}}if(!g){if(e>n){let S=c;c=d,d=S}let x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(c.node,c.offset),f.removeAllRanges(),f.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,r=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(i==a?e<=a&&n>=i:e<a&&n>i){let c=i+o.border,d=a-o.border;if(e>=c&&n<=d){this.dirty=e==i||n==a?Ws:IC,e==c&&n==d&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Oi:o.markDirty(e-c,n-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?Ws:Oi}i=a}this.dirty=Ws}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=e==1?Ws:IC;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class RN extends mu{constructor(e,n,i,r){let o,a=n.type.toDOM;if(typeof a=="function"&&(a=a(i,()=>{if(!o)return r;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(a.nodeType!=1){let c=document.createElement("span");c.appendChild(a),a=c}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==ti&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class y6 extends mu{constructor(e,n,i,r){super(e,[],n,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class mo extends mu{constructor(e,n,i,r,o){super(e,[],i,r),this.mark=n,this.spec=o}static create(e,n,i,r){let o=r.nodeViews[n.type.name],a=o&&o(n,r,i);return(!a||!a.dom)&&(a=Co.renderSpec(document,n.type.spec.toDOM(n,i),null,n.attrs)),new mo(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Oi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Oi&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ti){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=ti}}slice(e,n,i){let r=mo.create(this.parent,this.mark,!0,i),o=this.children,a=this.size;n<a&&(o=j0(o,n,a,i)),e>0&&(o=j0(o,0,e,i));for(let c=0;c<o.length;c++)o[c].parent=r;return r.children=o,r}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ds extends mu{constructor(e,n,i,r,o,a,c,d,f){super(e,[],o,a),this.node=n,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=c}static create(e,n,i,r,o,a){let c=o.nodeViews[n.type.name],d,f=c&&c(n,o,()=>{if(!d)return a;if(d.parent)return d.parent.posBeforeChild(d)},i,r),p=f&&f.dom,m=f&&f.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:m}=Co.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!m&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let g=p;return p=zN(p,i,n),f?d=new x6(e,n,i,r,p,m||null,g,f,o,a+1):n.isText?new np(e,n,i,r,p,g,o):new ds(e,n,i,r,p,m||null,g,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ue.empty)}return e}matchesNode(e,n,i){return this.dirty==ti&&e.eq(this.node)&&qf(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,r=n,o=e.composing?this.localCompositionInfo(e,n):null,a=o&&o.pos>-1?o:null,c=o&&o.pos<0,d=new v6(this,a&&a.node,e);E6(this.node,this.innerDeco,(f,p,m)=>{f.spec.marks?d.syncToMarks(f.spec.marks,i,e):f.type.side>=0&&!m&&d.syncToMarks(p==this.node.childCount?st.none:this.node.child(p).marks,i,e),d.placeWidget(f,e,r)},(f,p,m,g)=>{d.syncToMarks(f.marks,i,e);let x;d.findNodeMatch(f,p,m,g)||c&&e.state.selection.from>r&&e.state.selection.to<r+f.nodeSize&&(x=d.findIndexWithChild(o.node))>-1&&d.updateNodeAt(f,p,m,x,e)||d.updateNextNode(f,p,m,e,g,r)||d.addNode(f,p,m,e,r),r+=f.nodeSize}),d.syncToMarks([],i,e),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Ws)&&(a&&this.protectLocalComposition(e,a),_N(this.contentDOM,this.children,e),Ba&&C6(this.dom))}localCompositionInfo(e,n){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof _e)||i<n||r>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,c=k6(this.node.content,a,i-n,r-n);return c<0?null:{node:o,pos:c,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:r}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new y6(this,o,n,r);e.input.compositionNodes.push(a),this.children=j0(this.children,i,i+r.length,e,a)}update(e,n,i,r){return this.dirty==Oi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,i,r),!0)}updateInner(e,n,i,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ti}updateOuterDeco(e){if(qf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=LN(this.dom,this.nodeDOM,R0(this.outerDeco,this.node,n),R0(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function HC(t,e,n,i,r){zN(i,e,t);let o=new ds(void 0,t,e,n,i,i,i,r,0);return o.contentDOM&&o.updateChildren(r,0),o}class np extends ds{constructor(e,n,i,r,o,a,c){super(e,n,i,r,o,null,a,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,r){return this.dirty==Oi||this.dirty!=ti&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ti||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ti,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,i){let r=this.node.cut(e,n),o=document.createTextNode(r.text);return new np(this.parent,r,this.outerDeco,this.innerDeco,o,o,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Oi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class jN extends mu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ti&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class x6 extends ds{constructor(e,n,i,r,o,a,c,d,f,p){super(e,n,i,r,o,a,c,f,p),this.spec=d}update(e,n,i,r){if(this.dirty==Oi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,i);return o&&this.updateInner(e,n,i,r),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i.root):super.setSelection(e,n,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function _N(t,e,n){let i=t.firstChild,r=!1;for(let o=0;o<e.length;o++){let a=e[o],c=a.dom;if(c.parentNode==t){for(;c!=i;)i=$C(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(c,i);if(a instanceof mo){let d=i?i.previousSibling:t.lastChild;_N(a.contentDOM,a.children,n),i=d?d.nextSibling:t.firstChild}}for(;i;)i=$C(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}const Ec=function(t){t&&(this.nodeName=t)};Ec.prototype=Object.create(null);const Zs=[new Ec];function R0(t,e,n){if(t.length==0)return Zs;let i=n?Zs[0]:new Ec,r=[i];for(let o=0;o<t.length;o++){let a=t[o].type.attrs;if(a){a.nodeName&&r.push(i=new Ec(a.nodeName));for(let c in a){let d=a[c];d!=null&&(n&&r.length==1&&r.push(i=new Ec(e.isInline?"span":"div")),c=="class"?i.class=(i.class?i.class+" ":"")+d:c=="style"?i.style=(i.style?i.style+";":"")+d:c!="nodeName"&&(i[c]=d))}}}return r}function LN(t,e,n,i){if(n==Zs&&i==Zs)return e;let r=e;for(let o=0;o<i.length;o++){let a=i[o],c=n[o];if(o){let d;c&&c.nodeName==a.nodeName&&r!=t&&(d=r.parentNode)&&d.nodeName.toLowerCase()==a.nodeName||(d=document.createElement(a.nodeName),d.pmIsDeco=!0,d.appendChild(r),c=Zs[0]),r=d}b6(r,c||Zs[0],a)}return r}function b6(t,e,n){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&t.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&t.classList.remove(i[o]);for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&t.classList.add(r[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)t.style.removeProperty(r[1])}n.style&&(t.style.cssText+=n.style)}}function zN(t,e,n){return LN(t,t,Zs,R0(e,n,t.nodeType!=1))}function qf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function $C(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class v6{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=S6(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i){let r=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;r<a&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=ti,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let d=this.index;d<Math.min(this.index+3,this.top.children.length);d++){let f=this.top.children[d];if(f.matchesMark(e[o])&&!this.isLocked(f.dom)){c=d;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let d=mo.create(this.top,e[o],n,i);this.top.children.splice(this.index,0,d),this.top=d,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,i,r){let o=-1,a;if(r>=this.preMatch.index&&(a=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,i))o=this.top.children.indexOf(a,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let f=this.top.children[c];if(f.matchesNode(e,n,i)&&!this.preMatch.matched.has(f)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,i,r,o){let a=this.top.children[r];return a.dirty==Oi&&a.dom==a.contentDOM&&(a.dirty=Ws),a.update(e,n,i,o)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=n}}updateNextNode(e,n,i,r,o,a){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof ds){let f=this.preMatch.matched.get(d);if(f!=null&&f!=o)return!1;let p=d.dom,m,g=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Oi&&qf(n,d.outerDeco));if(!g&&d.update(e,n,i,r))return this.destroyBetween(this.index,c),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!g&&(m=this.recreateWrapper(d,e,n,i,r,a)))return this.destroyBetween(this.index,c),this.top.children[this.index]=m,m.contentDOM&&(m.dirty=Ws,m.updateChildren(r,a+1),m.dirty=ti),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,i,r,o,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!qf(i,e.outerDeco)||!r.eq(e.innerDeco))return null;let c=ds.create(this.top,n,i,r,o,a);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,n,i,r,o){let a=ds.create(this.top,e,n,i,r,o);a.contentDOM&&a.updateChildren(r,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new RN(this.top,e,n,i);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof mo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof np)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((dn||on)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new jN(this.top,[],i,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function S6(t,e){let n=e,i=n.children.length,r=t.childCount,o=new Map,a=[];e:for(;r>0;){let c;for(;;)if(i){let f=n.children[i-1];if(f instanceof mo)n=f,i=f.children.length;else{c=f,i--;break}}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let d=c.node;if(d){if(d!=t.child(r-1))break;--r,o.set(c,r),a.push(c)}}return{index:r,matched:o,matches:a.reverse()}}function w6(t,e){return t.type.side-e.type.side}function E6(t,e,n,i){let r=e.locals(t),o=0;if(r.length==0){for(let f=0;f<t.childCount;f++){let p=t.child(f);i(p,r,e.forChild(o,p),f),o+=p.nodeSize}return}let a=0,c=[],d=null;for(let f=0;;){let p,m;for(;a<r.length&&r[a].to==o;){let E=r[a++];E.widget&&(p?(m||(m=[p])).push(E):p=E)}if(p)if(m){m.sort(w6);for(let E=0;E<m.length;E++)n(m[E],f,!!d)}else n(p,f,!!d);let g,x;if(d)x=-1,g=d,d=null;else if(f<t.childCount)x=f,g=t.child(f++);else break;for(let E=0;E<c.length;E++)c[E].to<=o&&c.splice(E--,1);for(;a<r.length&&r[a].from<=o&&r[a].to>o;)c.push(r[a++]);let S=o+g.nodeSize;if(g.isText){let E=S;a<r.length&&r[a].from<E&&(E=r[a].from);for(let C=0;C<c.length;C++)c[C].to<E&&(E=c[C].to);E<S&&(d=g.cut(E-o),g=g.cut(0,E-o),S=E,x=-1)}else for(;a<r.length&&r[a].to<S;)a++;let w=g.isInline&&!g.isLeaf?c.filter(E=>!E.inline):c.slice();i(g,w,e.forChild(o,g),x),o=S}}function C6(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function k6(t,e,n,i){for(let r=0,o=0;r<t.childCount&&o<=i;){let a=t.child(r++),c=o;if(o+=a.nodeSize,!a.isText)continue;let d=a.text;for(;r<t.childCount;){let f=t.child(r++);if(o+=f.nodeSize,!f.isText)break;d+=f.text}if(o>=n){if(o>=i&&d.slice(i-e.length-c,i-c)==e)return i-e.length;let f=c<i?d.lastIndexOf(e,i-c-1):-1;if(f>=0&&f+e.length+c>=n)return c+f;if(n==i&&d.length>=i+e.length-c&&d.slice(i-c,i-c+e.length)==e)return i}}return-1}function j0(t,e,n,i,r){let o=[];for(let a=0,c=0;a<t.length;a++){let d=t[a],f=c,p=c+=d.size;f>=n||p<=e?o.push(d):(f<e&&o.push(d.slice(0,e-f,i)),r&&(o.push(r),r=void 0),p>n&&o.push(d.slice(n-f,d.size,i)))}return o}function eb(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),o=r&&r.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let c=i.resolve(a),d,f;if(tp(n)){for(d=a;r&&!r.node;)r=r.parent;let m=r.node;if(r&&m.isAtom&&Ee.isSelectable(m)&&r.parent&&!(m.isInline&&ZP(n.focusNode,n.focusOffset,r.dom))){let g=r.posBefore;f=new Ee(a==g?c:i.resolve(g))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let m=a,g=a;for(let x=0;x<n.rangeCount;x++){let S=n.getRangeAt(x);m=Math.min(m,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),g=Math.max(g,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(m<0)return null;[d,a]=g==t.state.selection.anchor?[g,m]:[m,g],c=i.resolve(a)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=i.resolve(d);if(!f){let m=e=="pointer"||t.state.selection.head<c.pos&&!o?1:-1;f=tb(t,p,c,m)}return f}function BN(t){return t.editable?t.hasFocus():VN(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function dr(t,e=!1){let n=t.state.selection;if(PN(t,n),!!BN(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&on){let i=t.domSelectionRange(),r=t.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&po(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)M6(t);else{let{anchor:i,head:r}=n,o,a;UC&&!(n instanceof _e)&&(n.$from.parent.inlineContent||(o=FC(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=FC(t,n.to))),t.docView.setSelection(i,r,t,e),UC&&(o&&qC(o),a&&qC(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&T6(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const UC=dn||on&&kN<63;function FC(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(dn&&r&&r.contentEditable=="false")return xy(r);if((!r||r.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(r)return xy(r);if(o)return xy(o)}}function xy(t){return t.contentEditable="true",dn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function qC(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function T6(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!BN(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function M6(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,i=n.nodeName=="IMG";i?e.collapse(n.parentNode,Qt(n)+1):e.collapse(n,0),!i&&!t.state.selection.visible&&En&&us<=11&&(n.disabled=!0,n.disabled=!1)}function PN(t,e){if(e instanceof Ee){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(YC(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else YC(t)}function YC(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function tb(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||_e.between(e,n,i)}function KC(t){return t.editable&&!t.hasFocus()?!1:VN(t)}function VN(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function N6(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return po(e.node,e.offset,n.anchorNode,n.anchorOffset)}function _0(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),o=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return o&&Be.findFrom(o,e)}function Wr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function GC(t,e,n){let i=t.state.selection;if(i instanceof _e)if(n.indexOf("s")>-1){let{$head:r}=i,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=t.state.doc.resolve(r.pos+o.nodeSize*(e<0?-1:1));return Wr(t,new _e(i.$anchor,a))}else if(i.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let r=_0(t.state,e);return r&&r instanceof Ee?Wr(t,r):!1}else if(!(Xn&&n.indexOf("m")>-1)){let r=i.$head,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,a;if(!o||o.isText)return!1;let c=e<0?r.pos-o.nodeSize:r.pos;return o.isAtom||(a=t.docView.descAt(c))&&!a.contentDOM?Ee.isSelectable(o)?Wr(t,new Ee(e<0?t.state.doc.resolve(r.pos-o.nodeSize):r)):pu?Wr(t,new _e(t.state.doc.resolve(e<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Ee&&i.node.isInline)return Wr(t,new _e(e>0?i.$to:i.$from));{let r=_0(t.state,e);return r?Wr(t,r):!1}}}function Yf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Cc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function fa(t,e){return e<0?A6(t):D6(t)}function A6(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,o,a=!1;for(ei&&n.nodeType==1&&i<Yf(n)&&Cc(n.childNodes[i],-1)&&(a=!0);;)if(i>0){if(n.nodeType!=1)break;{let c=n.childNodes[i-1];if(Cc(c,-1))r=n,o=--i;else if(c.nodeType==3)n=c,i=n.nodeValue.length;else break}}else{if(IN(n))break;{let c=n.previousSibling;for(;c&&Cc(c,-1);)r=n.parentNode,o=Qt(c),c=c.previousSibling;if(c)n=c,i=Yf(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}a?L0(t,n,i):r&&L0(t,r,o)}function D6(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r=Yf(n),o,a;for(;;)if(i<r){if(n.nodeType!=1)break;let c=n.childNodes[i];if(Cc(c,1))o=n,a=++i;else break}else{if(IN(n))break;{let c=n.nextSibling;for(;c&&Cc(c,1);)o=c.parentNode,a=Qt(c)+1,c=c.nextSibling;if(c)n=c,i=0,r=Yf(n);else{if(n=n.parentNode,n==t.dom)break;i=r=0}}}o&&L0(t,o,a)}function IN(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function O6(t,e){for(;t&&e==t.childNodes.length&&!hu(t);)e=Qt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function R6(t,e){for(;t&&!e&&!hu(t);)e=Qt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function L0(t,e,n){if(e.nodeType!=3){let o,a;(a=O6(e,n))?(e=a,n=0):(o=R6(e,n))&&(e=o,n=o.nodeValue.length)}let i=t.domSelection();if(!i)return;if(tp(i)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),i.removeAllRanges(),i.addRange(o)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout(()=>{t.state==r&&dr(t)},50)}function XC(t,e){let n=t.state.doc.resolve(e);if(!(on||e6)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),a=(o.top+o.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),a=(o.top+o.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function WC(t,e,n){let i=t.state.selection;if(i instanceof _e&&!i.empty||n.indexOf("s")>-1||Xn&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=_0(t.state,e);if(a&&a instanceof Ee)return Wr(t,a)}if(!r.parent.inlineContent){let a=e<0?r:o,c=i instanceof Ln?Be.near(a,e):Be.findFrom(a,e);return c?Wr(t,c):!1}return!1}function ZC(t,e){if(!(t.state.selection instanceof _e))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let a=t.state.tr;return e<0?a.delete(n.pos-o.nodeSize,n.pos):a.delete(n.pos,n.pos+o.nodeSize),t.dispatch(a),!0}return!1}function QC(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function j6(t){if(!dn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;QC(t,i,"true"),setTimeout(()=>QC(t,i,"false"),20)}return!1}function _6(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function L6(t,e){let n=e.keyCode,i=_6(e);if(n==8||Xn&&n==72&&i=="c")return ZC(t,-1)||fa(t,-1);if(n==46&&!e.shiftKey||Xn&&n==68&&i=="c")return ZC(t,1)||fa(t,1);if(n==13||n==27)return!0;if(n==37||Xn&&n==66&&i=="c"){let r=n==37?XC(t,t.state.selection.from)=="ltr"?-1:1:-1;return GC(t,r,i)||fa(t,r)}else if(n==39||Xn&&n==70&&i=="c"){let r=n==39?XC(t,t.state.selection.from)=="ltr"?1:-1:1;return GC(t,r,i)||fa(t,r)}else{if(n==38||Xn&&n==80&&i=="c")return WC(t,-1,i)||fa(t,-1);if(n==40||Xn&&n==78&&i=="c")return j6(t)||WC(t,1,i)||fa(t,1);if(i==(Xn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function nb(t,e){t.someProp("transformCopied",x=>{e=x(e,t)});let n=[],{content:i,openStart:r,openEnd:o}=e;for(;r>1&&o>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,o--;let x=i.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),i=x.content}let a=t.someProp("clipboardSerializer")||Co.fromSchema(t.state.schema),c=YN(),d=c.createElement("div");d.appendChild(a.serializeFragment(i,{document:c}));let f=d.firstChild,p,m=0;for(;f&&f.nodeType==1&&(p=qN[f.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let S=c.createElement(p[x]);for(;d.firstChild;)S.appendChild(d.firstChild);d.appendChild(S),m++}f=d.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${r} ${o}${m?` -${m}`:""} ${JSON.stringify(n)}`);let g=t.someProp("clipboardTextSerializer",x=>x(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:g,slice:e}}function HN(t,e,n,i,r){let o=r.parent.type.spec.code,a,c;if(!n&&!e)return null;let d=!!e&&(i||o||!n);if(d){if(t.someProp("transformPastedText",g=>{e=g(e,o||i,t)}),o)return c=new ge(ue.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",g=>{c=g(c,t,!0)}),c;let m=t.someProp("clipboardTextParser",g=>g(e,r,i,t));if(m)c=m;else{let g=r.marks(),{schema:x}=t.state,S=Co.fromSchema(x);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let E=a.appendChild(document.createElement("p"));w&&E.appendChild(S.serializeNode(x.text(w,g)))})}}else t.someProp("transformPastedHTML",m=>{n=m(n,t)}),a=V6(n),pu&&I6(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let m=+p[3];m>0;m--){let g=a.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;a=g}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||cs.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(d||p),context:r,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!z6.test(g.parentNode.nodeName)?{ignore:!0}:null}})),p)c=H6(JC(c,+p[1],+p[2]),p[4]);else if(c=ge.maxOpen(B6(c.content,r),!0),c.openStart||c.openEnd){let m=0,g=0;for(let x=c.content.firstChild;m<c.openStart&&!x.type.spec.isolating;m++,x=x.firstChild);for(let x=c.content.lastChild;g<c.openEnd&&!x.type.spec.isolating;g++,x=x.lastChild);c=JC(c,m,g)}return t.someProp("transformPasted",m=>{c=m(c,t,d)}),c}const z6=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function B6(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,a=[];if(t.forEach(c=>{if(!a)return;let d=r.findWrapping(c.type),f;if(!d)return a=null;if(f=a.length&&o.length&&UN(d,o,c,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=FN(a[a.length-1],o.length));let p=$N(c,d);a.push(p),r=r.matchType(p.type),o=d}}),a)return ue.from(a)}return t}function $N(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,ue.from(t));return t}function UN(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let o=UN(t,e,n,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(ue.from($N(n,t,r+1))))}}function FN(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,FN(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(ue.empty,!0);return t.copy(n.append(i))}function z0(t,e,n,i,r,o){let a=e<0?t.firstChild:t.lastChild,c=a.content;return t.childCount>1&&(o=0),r<i-1&&(c=z0(c,e,n,i,r+1,o)),r>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,o<=r).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(ue.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}function JC(t,e,n){return e<t.openStart&&(t=new ge(z0(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ge(z0(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const qN={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ek=null;function YN(){return ek||(ek=document.implementation.createHTMLDocument("title"))}let by=null;function P6(t){let e=window.trustedTypes;return e?(by||(by=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),by.createHTML(t)):t}function V6(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=YN().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t),r;if((r=i&&qN[i[1].toLowerCase()])&&(t=r.map(o=>"<"+o+">").join("")+t+r.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=P6(t),r)for(let o=0;o<r.length;o++)n=n.querySelector(r[o])||n;return n}function I6(t){let e=t.querySelectorAll(on?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];i.childNodes.length==1&&i.textContent==" "&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}function H6(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return t}let{content:r,openStart:o,openEnd:a}=t;for(let c=i.length-2;c>=0;c-=2){let d=n.nodes[i[c]];if(!d||d.hasRequiredAttrs())break;r=ue.from(d.create(i[c+1],r)),o++,a++}return new ge(r,o,a)}const fn={},hn={},$6={touchstart:!0,touchmove:!0};class U6{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function F6(t){for(let e in fn){let n=fn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{Y6(t,i)&&!ib(t,i)&&(t.editable||!(i.type in hn))&&n(t,i)},$6[e]?{passive:!0}:void 0)}dn&&t.dom.addEventListener("input",()=>null),B0(t)}function ss(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function q6(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function B0(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>ib(t,i))})}function ib(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return i?i(t,e)||e.defaultPrevented:!1})}function Y6(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function K6(t,e){!ib(t,e)&&fn[e.type]&&(t.editable||!(e.type in hn))&&fn[e.type](t,e)}hn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!GN(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(lr&&on&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ba&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",r=>r(t,Ks(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",i=>i(t,n))||L6(t,n)?n.preventDefault():ss(t,"key")};hn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};hn.keypress=(t,e)=>{let n=e;if(GN(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Xn&&n.metaKey)return;if(t.someProp("handleKeyPress",r=>r(t,n))){n.preventDefault();return}let i=t.state.selection;if(!(i instanceof _e)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(r).scrollIntoView();!/[\r\n]/.test(r)&&!t.someProp("handleTextInput",a=>a(t,i.$from.pos,i.$to.pos,r,o))&&t.dispatch(o()),n.preventDefault()}};function ip(t){return{left:t.clientX,top:t.clientY}}function G6(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function rb(t,e,n,i,r){if(i==-1)return!1;let o=t.state.doc.resolve(i);for(let a=o.depth+1;a>0;a--)if(t.someProp(e,c=>a>o.depth?c(t,n,o.nodeAfter,o.before(a),r,!0):c(t,n,o.node(a),o.before(a),r,!1)))return!0;return!1}function Da(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let i=t.state.tr.setSelection(e);i.setMeta("pointer",!0),t.dispatch(i)}function X6(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return i&&i.isAtom&&Ee.isSelectable(i)?(Da(t,new Ee(n)),!0):!1}function W6(t,e){if(e==-1)return!1;let n=t.state.selection,i,r;n instanceof Ee&&(i=n.node);let o=t.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let c=a>o.depth?o.nodeAfter:o.node(a);if(Ee.isSelectable(c)){i&&n.$from.depth>0&&a>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?r=o.before(n.$from.depth):r=o.before(a);break}}return r!=null?(Da(t,Ee.create(t.state.doc,r)),!0):!1}function Z6(t,e,n,i,r){return rb(t,"handleClickOn",e,n,i)||t.someProp("handleClick",o=>o(t,e,i))||(r?W6(t,n):X6(t,n))}function Q6(t,e,n,i){return rb(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",r=>r(t,e,i))}function J6(t,e,n,i){return rb(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",r=>r(t,e,i))||eV(t,n,i)}function eV(t,e,n){if(n.button!=0)return!1;let i=t.state.doc;if(e==-1)return i.inlineContent?(Da(t,_e.create(i,0,i.content.size)),!0):!1;let r=i.resolve(e);for(let o=r.depth+1;o>0;o--){let a=o>r.depth?r.nodeAfter:r.node(o),c=r.before(o);if(a.inlineContent)Da(t,_e.create(i,c+1,c+1+a.content.size));else if(Ee.isSelectable(a))Da(t,Ee.create(i,c));else continue;return!0}}function sb(t){return Kf(t)}const KN=Xn?"metaKey":"ctrlKey";fn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=sb(t),r=Date.now(),o="singleClick";r-t.input.lastClick.time<500&&G6(n,t.input.lastClick)&&!n[KN]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o,button:n.button};let a=t.posAtCoords(ip(n));a&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new tV(t,a,n,!!i)):(o=="doubleClick"?Q6:J6)(t,a.pos,a.inside,n)?n.preventDefault():ss(t,"pointer"))};class tV{constructor(e,n,i,r){this.view=e,this.pos=n,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[KN],this.allowDefault=i.shiftKey;let o,a;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),a=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,a=p.depth?p.before():0}const c=r?null:i.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:f}=e.state;(i.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||f instanceof Ee&&f.from<=a&&f.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ei&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ss(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>dr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ip(e))),this.updateAllowDefault(e),this.allowDefault||!n?ss(this.view,"pointer"):Z6(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||dn&&this.mightDrag&&!this.mightDrag.node.isAtom||on&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Da(this.view,Be.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ss(this.view,"pointer")}move(e){this.updateAllowDefault(e),ss(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}fn.touchstart=t=>{t.input.lastTouch=Date.now(),sb(t),ss(t,"pointer")};fn.touchmove=t=>{t.input.lastTouch=Date.now(),ss(t,"pointer")};fn.contextmenu=t=>sb(t);function GN(t,e){return t.composing?!0:dn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const nV=lr?5e3:-1;hn.compositionstart=hn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _e&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Kf(t,!0),t.markCursor=null;else if(Kf(t,!e.selection.empty),ei&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let r=i.focusNode,o=i.focusOffset;r&&r.nodeType==1&&o!=0;){let a=o<0?r.lastChild:r.childNodes[o-1];if(!a)break;if(a.nodeType==3){let c=t.domSelection();c&&c.collapse(a,a.nodeValue.length);break}else r=a,o=-1}}t.input.composing=!0}XN(t,nV)};hn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,XN(t,20))};function XN(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Kf(t),e))}function WN(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=rV());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function iV(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=XP(e.focusNode,e.focusOffset),i=WP(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let r=i.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||i==o)return o;if(!r||!r.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return i}}return n||i}function rV(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Kf(t,e=!1){if(!(lr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),WN(t),e||t.docView&&t.docView.dirty){let n=eb(t),i=t.state.selection;return n&&!n.eq(i)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function sV(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const qc=En&&us<15||Ba&&t6<604;fn.copy=hn.cut=(t,e)=>{let n=e,i=t.state.selection,r=n.type=="cut";if(i.empty)return;let o=qc?null:n.clipboardData,a=i.content(),{dom:c,text:d}=nb(t,a);o?(n.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",d)):sV(t,c),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function oV(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function aV(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Yc(t,i.value,null,r,e):Yc(t,i.textContent,i.innerHTML,r,e)},50)}function Yc(t,e,n,i,r){let o=HN(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,r,o||ge.empty)))return!0;if(!o)return!1;let a=oV(o),c=a?t.state.tr.replaceSelectionWith(a,i):t.state.tr.replaceSelection(o);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ZN(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}hn.paste=(t,e)=>{let n=e;if(t.composing&&!lr)return;let i=qc?null:n.clipboardData,r=t.input.shiftKey&&t.input.lastKeyCode!=45;i&&Yc(t,ZN(i),i.getData("text/html"),r,n)?n.preventDefault():aV(t,n)};class QN{constructor(e,n,i){this.slice=e,this.move=n,this.node=i}}const lV=Xn?"altKey":"ctrlKey";function JN(t,e){let n=t.someProp("dragCopies",i=>!i(e));return n??!e[lV]}fn.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=t.state.selection,o=r.empty?null:t.posAtCoords(ip(n)),a;if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof Ee?r.to-1:r.to))){if(i&&i.mightDrag)a=Ee.create(t.state.doc,i.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let m=t.docView.nearestDesc(n.target,!0);m&&m.node.type.spec.draggable&&m!=t.docView&&(a=Ee.create(t.state.doc,m.posBefore))}}let c=(a||t.state.selection).content(),{dom:d,text:f,slice:p}=nb(t,c);(!n.dataTransfer.files.length||!on||kN>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(qc?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",qc||n.dataTransfer.setData("text/plain",f),t.dragging=new QN(p,JN(t,n),a)};fn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};hn.dragover=hn.dragenter=(t,e)=>e.preventDefault();hn.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(ip(n));if(!r)return;let o=t.state.doc.resolve(r.pos),a=i&&i.slice;a?t.someProp("transformPasted",S=>{a=S(a,t,!1)}):a=HN(t,ZN(n.dataTransfer),qc?null:n.dataTransfer.getData("text/html"),!1,o);let c=!!(i&&JN(t,n));if(t.someProp("handleDrop",S=>S(t,n,a||ge.empty,c))){n.preventDefault();return}if(!a)return;n.preventDefault();let d=a?gN(t.state.doc,o.pos,a):o.pos;d==null&&(d=o.pos);let f=t.state.tr;if(c){let{node:S}=i;S?S.replace(f):f.deleteSelection()}let p=f.mapping.map(d),m=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,g=f.doc;if(m?f.replaceRangeWith(p,p,a.content.firstChild):f.replaceRange(p,p,a),f.doc.eq(g))return;let x=f.doc.resolve(p);if(m&&Ee.isSelectable(a.content.firstChild)&&x.nodeAfter&&x.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new Ee(x));else{let S=f.mapping.map(d);f.mapping.maps[f.mapping.maps.length-1].forEach((w,E,C,N)=>S=N),f.setSelection(tb(t,x,f.doc.resolve(S)))}t.focus(),t.dispatch(f.setMeta("uiEvent","drop"))};fn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&dr(t)},20))};fn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};fn.beforeinput=(t,e)=>{if(on&&lr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,Ks(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in hn)fn[t]=hn[t];function Kc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Gf{constructor(e,n){this.toDOM=e,this.spec=n||oo,this.side=this.spec.side||0}map(e,n,i,r){let{pos:o,deleted:a}=e.mapResult(n.from+r,this.side<0?-1:1);return a?null:new un(o-i,o-i,this)}valid(){return!0}eq(e){return this==e||e instanceof Gf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Kc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class fs{constructor(e,n){this.attrs=e,this.spec=n||oo}map(e,n,i,r){let o=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-i,a=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-i;return o>=a?null:new un(o,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof fs&&Kc(this.attrs,e.attrs)&&Kc(this.spec,e.spec)}static is(e){return e.type instanceof fs}destroy(){}}class ob{constructor(e,n){this.attrs=e,this.spec=n||oo}map(e,n,i,r){let o=e.mapResult(n.from+r,1);if(o.deleted)return null;let a=e.mapResult(n.to+r,-1);return a.deleted||a.pos<=o.pos?null:new un(o.pos-i,a.pos-i,this)}valid(e,n){let{index:i,offset:r}=e.content.findIndex(n.from),o;return r==n.from&&!(o=e.child(i)).isText&&r+o.nodeSize==n.to}eq(e){return this==e||e instanceof ob&&Kc(this.attrs,e.attrs)&&Kc(this.spec,e.spec)}destroy(){}}class un{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new un(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new un(e,e,new Gf(n,i))}static inline(e,n,i,r){return new un(e,n,new fs(i,r))}static node(e,n,i,r){return new un(e,n,new ob(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof fs}get widget(){return this.type instanceof Gf}}const ya=[],oo={};class pt{constructor(e,n){this.local=e.length?e:ya,this.children=n.length?n:ya}static create(e,n){return n.length?Xf(n,e,0,oo):rn}find(e,n,i){let r=[];return this.findInner(e??0,n??1e9,r,0,i),r}findInner(e,n,i,r,o){for(let a=0;a<this.local.length;a++){let c=this.local[a];c.from<=n&&c.to>=e&&(!o||o(c.spec))&&i.push(c.copy(c.from+r,c.to+r))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let c=this.children[a]+1;this.children[a+2].findInner(e-c,n-c,i,r+c,o)}}map(e,n,i){return this==rn||e.maps.length==0?this:this.mapInner(e,n,0,0,i||oo)}mapInner(e,n,i,r,o){let a;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,i,r);d&&d.type.valid(n,d)?(a||(a=[])).push(d):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?cV(this.children,a||[],e,n,i,r,o):a?new pt(a.sort(ao),ya):rn}add(e,n){return n.length?this==rn?pt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let r,o=0;e.forEach((c,d)=>{let f=d+i,p;if(p=tA(n,c,f)){for(r||(r=this.children.slice());o<r.length&&r[o]<d;)o+=3;r[o]==d?r[o+2]=r[o+2].addInner(c,p,f+1):r.splice(o,0,d,d+c.nodeSize,Xf(p,c,f+1,oo)),o+=3}});let a=eA(o?nA(n):n,-i);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||a.splice(c--,1);return new pt(a.length?this.local.concat(a).sort(ao):this.local,r||this.children)}remove(e){return e.length==0||this==rn?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,r=this.local;for(let o=0;o<i.length;o+=3){let a,c=i[o]+n,d=i[o+1]+n;for(let p=0,m;p<e.length;p++)(m=e[p])&&m.from>c&&m.to<d&&(e[p]=null,(a||(a=[])).push(m));if(!a)continue;i==this.children&&(i=this.children.slice());let f=i[o+2].removeInner(a,c+1);f!=rn?i[o+2]=f:(i.splice(o,3),o-=3)}if(r.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let c=0;c<r.length;c++)r[c].eq(a,n)&&(r==this.local&&(r=this.local.slice()),r.splice(c--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new pt(r,i):rn}forChild(e,n){if(this==rn)return this;if(n.isLeaf)return pt.empty;let i,r;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(i=this.children[c+2]);break}let o=e+1,a=o+n.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<a&&d.to>o&&d.type instanceof fs){let f=Math.max(o,d.from)-o,p=Math.min(a,d.to)-o;f<p&&(r||(r=[])).push(d.copy(f,p))}}if(r){let c=new pt(r.sort(ao),ya);return i?new Jr([c,i]):c}return i||rn}eq(e){if(this==e)return!0;if(!(e instanceof pt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ab(this.localsInner(e))}localsInner(e){if(this==rn)return ya;if(e.inlineContent||!this.local.some(fs.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof fs||n.push(this.local[i]);return n}forEachSet(e){e(this)}}pt.empty=new pt([],[]);pt.removeOverlap=ab;const rn=pt.empty;class Jr{constructor(e){this.members=e}map(e,n){const i=this.members.map(r=>r.map(e,n,oo));return Jr.from(i)}forChild(e,n){if(n.isLeaf)return pt.empty;let i=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,n);o!=rn&&(o instanceof Jr?i=i.concat(o.members):i.push(o))}return Jr.from(i)}eq(e){if(!(e instanceof Jr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(!n)n=o;else{i&&(n=n.slice(),i=!1);for(let a=0;a<o.length;a++)n.push(o[a])}}return n?ab(i?n:n.sort(ao)):ya}static from(e){switch(e.length){case 0:return rn;case 1:return e[0];default:return new Jr(e.every(n=>n instanceof pt)?e:e.reduce((n,i)=>n.concat(i instanceof pt?i:i.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function cV(t,e,n,i,r,o,a){let c=t.slice();for(let f=0,p=o;f<n.maps.length;f++){let m=0;n.maps[f].forEach((g,x,S,w)=>{let E=w-S-(x-g);for(let C=0;C<c.length;C+=3){let N=c[C+1];if(N<0||g>N+p-m)continue;let k=c[C]+p-m;x>=k?c[C+1]=g<=k?-2:-1:g>=p&&E&&(c[C]+=E,c[C+1]+=E)}m+=E}),p=n.maps[f].map(p,-1)}let d=!1;for(let f=0;f<c.length;f+=3)if(c[f+1]<0){if(c[f+1]==-2){d=!0,c[f+1]=-1;continue}let p=n.map(t[f]+o),m=p-r;if(m<0||m>=i.content.size){d=!0;continue}let g=n.map(t[f+1]+o,-1),x=g-r,{index:S,offset:w}=i.content.findIndex(m),E=i.maybeChild(S);if(E&&w==m&&w+E.nodeSize==x){let C=c[f+2].mapInner(n,E,p+1,t[f]+o+1,a);C!=rn?(c[f]=m,c[f+1]=x,c[f+2]=C):(c[f+1]=-2,d=!0)}else d=!0}if(d){let f=uV(c,t,e,n,r,o,a),p=Xf(f,i,0,a);e=p.local;for(let m=0;m<c.length;m+=3)c[m+1]<0&&(c.splice(m,3),m-=3);for(let m=0,g=0;m<p.children.length;m+=3){let x=p.children[m];for(;g<c.length&&c[g]<x;)g+=3;c.splice(g,0,p.children[m],p.children[m+1],p.children[m+2])}}return new pt(e.sort(ao),c)}function eA(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new un(r.from+e,r.to+e,r.type))}return n}function uV(t,e,n,i,r,o,a){function c(d,f){for(let p=0;p<d.local.length;p++){let m=d.local[p].map(i,r,f);m?n.push(m):a.onRemove&&a.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)c(d.children[p+2],d.children[p]+f+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],e[d]+o+1);return n}function tA(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let o=0,a;o<t.length;o++)(a=t[o])&&a.from>n&&a.to<i&&((r||(r=[])).push(a),t[o]=null);return r}function nA(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Xf(t,e,n,i){let r=[],o=!1;e.forEach((c,d)=>{let f=tA(t,c,d+n);if(f){o=!0;let p=Xf(f,c,n+d+1,i);p!=rn&&r.push(d,d+c.nodeSize,p)}});let a=eA(o?nA(t):t,-n).sort(ao);for(let c=0;c<a.length;c++)a[c].type.valid(e,a[c])||(i.onRemove&&i.onRemove(a[c].spec),a.splice(c--,1));return a.length||r.length?new pt(a,r):rn}function ao(t,e){return t.from-e.from||t.to-e.to}function ab(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let o=e[r];if(o.from==i.from){o.to!=i.to&&(e==t&&(e=t.slice()),e[r]=o.copy(o.from,i.to),tk(e,r+1,o.copy(i.to,o.to)));continue}else{o.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,o.from),tk(e,r,i.copy(o.from,i.to)));break}}}return e}function tk(t,e,n){for(;e<t.length&&ao(n,t[e])>0;)e++;t.splice(e,0,n)}function vy(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=rn&&e.push(i)}),t.cursorWrapper&&e.push(pt.create(t.state.doc,[t.cursorWrapper.deco])),Jr.from(e)}const dV={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},fV=En&&us<=11;class hV{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pV{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hV,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);En&&us<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),fV&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,dV)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(KC(this.view)){if(this.suppressingSelectionUpdates)return dr(this.view);if(En&&us<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&po(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,i;for(let o=e.focusNode;o;o=za(o))n.add(o);for(let o=e.anchorNode;o;o=za(o))if(n.has(o)){i=o;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&KC(e)&&!this.ignoreSelectionChange(i),o=-1,a=-1,c=!1,d=[];if(e.editable)for(let p=0;p<n.length;p++){let m=this.registerMutation(n[p],d);m&&(o=o<0?m.from:Math.min(m.from,o),a=a<0?m.to:Math.max(m.to,a),m.typeOver&&(c=!0))}if(ei&&d.length){let p=d.filter(m=>m.nodeName=="BR");if(p.length==2){let[m,g]=p;m.parentNode&&m.parentNode.parentNode==g.parentNode?g.remove():m.remove()}else{let{focusNode:m}=this.currentSelection;for(let g of p){let x=g.parentNode;x&&x.nodeName=="LI"&&(!m||yV(e,m)!=x)&&g.remove()}}}let f=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&tp(i)&&(f=eb(e))&&f.eq(Be.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,dr(e),this.currentSelection.set(i),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,a),mV(e)),this.handleDOMChange(o,a,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||dr(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let m=e.addedNodes[p];n.push(m),m.nodeType==3&&(this.lastChangedTextNode=m)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,o=e.nextSibling;if(En&&us<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:m,nextSibling:g}=e.addedNodes[p];(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(r=m),(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(o=g)}let a=r&&r.parentNode==e.target?Qt(r)+1:0,c=i.localPosFromDOM(e.target,a,-1),d=o&&o.parentNode==e.target?Qt(o):e.target.childNodes.length,f=i.localPosFromDOM(e.target,d,1);return{from:c,to:f}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let nk=new WeakMap,ik=!1;function mV(t){if(!nk.has(t)&&(nk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ei,ik)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ik=!0}}function rk(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return po(a.node,a.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}function gV(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return rk(t,r)}let n;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?rk(t,n):null}function yV(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let i=t.docView.nearestDesc(n,!0);if(i&&i.node.isBlock)return n}return null}function xV(t,e,n){let{node:i,fromOffset:r,toOffset:o,from:a,to:c}=t.docView.parseRange(e,n),d=t.domSelectionRange(),f,p=d.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:d.anchorOffset}],tp(d)||f.push({node:d.focusNode,offset:d.focusOffset})),on&&t.input.lastKeyCode===8)for(let E=o;E>r;E--){let C=i.childNodes[E-1],N=C.pmViewDesc;if(C.nodeName=="BR"&&!N){o=E;break}if(!N||N.size)break}let m=t.state.doc,g=t.someProp("domParser")||cs.fromSchema(t.state.schema),x=m.resolve(a),S=null,w=g.parse(i,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:r,to:o,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:bV,context:x});if(f&&f[0].pos!=null){let E=f[0].pos,C=f[1]&&f[1].pos;C==null&&(C=E),S={anchor:E+a,head:C+a}}return{doc:w,sel:S,from:a,to:c}}function bV(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(dn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||dn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const vV=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function SV(t,e,n,i,r){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let B=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,I=eb(t,B);if(I&&!t.state.selection.eq(I)){if(on&&lr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",K=>K(t,Ks(13,"Enter"))))return;let ee=t.state.tr.setSelection(I);B=="pointer"?ee.setMeta("pointer",!0):B=="key"&&ee.scrollIntoView(),o&&ee.setMeta("composition",o),t.dispatch(ee)}return}let a=t.state.doc.resolve(e),c=a.sharedDepth(n);e=a.before(c+1),n=t.state.doc.resolve(n).after(c+1);let d=t.state.selection,f=xV(t,e,n),p=t.state.doc,m=p.slice(f.from,f.to),g,x;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(g=t.state.selection.to,x="end"):(g=t.state.selection.from,x="start"),t.input.lastKeyCode=null;let S=CV(m.content,f.doc.content,f.from,g,x);if(S&&t.input.domChangeCount++,(Ba&&t.input.lastIOSEnter>Date.now()-225||lr)&&r.some(B=>B.nodeType==1&&!vV.test(B.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",B=>B(t,Ks(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(i&&d instanceof _e&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))S={start:d.from,endA:d.to,endB:d.to};else{if(f.sel){let B=sk(t,t.state.doc,f.sel);if(B&&!B.eq(t.state.selection)){let I=t.state.tr.setSelection(B);o&&I.setMeta("composition",o),t.dispatch(I)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof _e&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),En&&us<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>f.from&&f.doc.textBetween(S.start-f.from-1,S.start-f.from+1)=="  "&&(S.start--,S.endA--,S.endB--);let w=f.doc.resolveNoCache(S.start-f.from),E=f.doc.resolveNoCache(S.endB-f.from),C=p.resolve(S.start),N=w.sameParent(E)&&w.parent.inlineContent&&C.end()>=S.endA,k;if((Ba&&t.input.lastIOSEnter>Date.now()-225&&(!N||r.some(B=>B.nodeName=="DIV"||B.nodeName=="P"))||!N&&w.pos<f.doc.content.size&&(!w.sameParent(E)||!w.parent.inlineContent)&&!/\S/.test(f.doc.textBetween(w.pos,E.pos,"",""))&&(k=Be.findFrom(f.doc.resolve(w.pos+1),1,!0))&&k.head>w.pos)&&t.someProp("handleKeyDown",B=>B(t,Ks(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&EV(p,S.start,S.endA,w,E)&&t.someProp("handleKeyDown",B=>B(t,Ks(8,"Backspace")))){lr&&on&&t.domObserver.suppressSelectionUpdates();return}on&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),lr&&!N&&w.start()!=E.start()&&E.parentOffset==0&&w.depth==E.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==S.endA&&(S.endB-=2,E=f.doc.resolveNoCache(S.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(B){return B(t,Ks(13,"Enter"))})},20));let M=S.start,D=S.endA,_=B=>{let I=B||t.state.tr.replace(M,D,f.doc.slice(S.start-f.from,S.endB-f.from));if(f.sel){let ee=sk(t,I.doc,f.sel);ee&&!(on&&t.composing&&ee.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(ee.head==M||ee.head==I.mapping.map(D)-1)||En&&ee.empty&&ee.head==M)&&I.setSelection(ee)}return o&&I.setMeta("composition",o),I.scrollIntoView()},P;if(N){if(w.pos==E.pos){En&&us<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>dr(t),20));let B=_(t.state.tr.delete(M,D)),I=p.resolve(S.start).marksAcross(p.resolve(S.endA));I&&B.ensureMarks(I),t.dispatch(B)}else if(S.endA==S.endB&&(P=wV(w.parent.content.cut(w.parentOffset,E.parentOffset),C.parent.content.cut(C.parentOffset,S.endA-C.start())))){let B=_(t.state.tr);P.type=="add"?B.addMark(M,D,P.mark):B.removeMark(M,D,P.mark),t.dispatch(B)}else if(w.parent.child(w.index()).isText&&w.index()==E.index()-(E.textOffset?0:1)){let B=w.parent.textBetween(w.parentOffset,E.parentOffset),I=()=>_(t.state.tr.insertText(B,M,D));t.someProp("handleTextInput",ee=>ee(t,M,D,B,I))||t.dispatch(I())}}else t.dispatch(_())}function sk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:tb(t,e.resolve(n.anchor),e.resolve(n.head))}function wV(t,e){let n=t.firstChild.marks,i=e.firstChild.marks,r=n,o=i,a,c,d;for(let p=0;p<i.length;p++)r=i[p].removeFromSet(r);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(r.length==1&&o.length==0)c=r[0],a="add",d=p=>p.mark(c.addToSet(p.marks));else if(r.length==0&&o.length==1)c=o[0],a="remove",d=p=>p.mark(c.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(d(e.child(p)));if(ue.from(f).eq(t))return{mark:c,type:a}}function EV(t,e,n,i,r){if(n-e<=r.pos-i.pos||Sy(i,!0,!1)<r.pos)return!1;let o=t.resolve(e);if(!i.parent.isTextblock){let c=o.nodeAfter;return c!=null&&n==e+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=t.resolve(Sy(o,!0,!0));return!a.parent.isTextblock||a.pos>n||Sy(a,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(a.parent.content)}function Sy(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let o=t.node(i).maybeChild(t.indexAfter(i));for(;o&&!o.isLeaf;)o=o.firstChild,r++}return r}function CV(t,e,n,i,r){let o=t.findDiffStart(e,n);if(o==null)return null;let{a,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(r=="end"){let d=Math.max(0,o-Math.min(a,c));i-=a+d-o}if(a<o&&t.size<e.size){let d=i<=o&&i>=a?o-i:0;o-=d,o&&o<e.size&&ok(e.textBetween(o-1,o+1))&&(o+=d?1:-1),c=o+(c-a),a=o}else if(c<o){let d=i<=o&&i>=c?o-i:0;o-=d,o&&o<t.size&&ok(t.textBetween(o-1,o+1))&&(o+=d?1:-1),a=o+(a-c),c=o}return{start:o,endA:a,endB:c}}function ok(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class iA{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new U6,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(dk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ck(this),lk(this),this.nodeViews=uk(this),this.docView=HC(this.state.doc,ak(this),vy(this),this.dom,this),this.domObserver=new pV(this,(i,r,o,a)=>SV(this,i,r,o,a)),this.domObserver.start(),F6(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&B0(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(dk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var i;let r=this.state,o=!1,a=!1;e.storedMarks&&this.composing&&(WN(this),a=!0),this.state=e;let c=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let x=uk(this);TV(x,this.nodeViews)&&(this.nodeViews=x,o=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&B0(this),this.editable=ck(this),lk(this);let d=vy(this),f=ak(this),p=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",m=o||!this.docView.matchesNode(e.doc,f,d);(m||!e.selection.eq(r.selection))&&(a=!0);let g=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&r6(this);if(a){this.domObserver.stop();let x=m&&(En||on)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&kV(r.selection,e.selection);if(m){let S=on?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=iV(this)),(o||!this.docView.update(e.doc,f,d,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=HC(e.doc,f,d,this.dom,this)),S&&!this.trackWrites&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&N6(this))?dr(this,x):(PN(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((i=this.dragging)===null||i===void 0)&&i.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():g&&s6(g)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ee){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&LC(this,n.getBoundingClientRect(),e)}else LC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}}updateDraggedNode(e,n){let i=e.node,r=-1;if(this.state.doc.nodeAt(i.from)==i.node)r=i.from;else{let o=i.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==i.node&&(r=o)}this.dragging=new QN(e.slice,e.move,r<0?void 0:Ee.create(this.state.doc,r))}someProp(e,n){let i=this._props&&this._props[e],r;if(i!=null&&(r=n?n(i):i))return r;for(let a=0;a<this.directPlugins.length;a++){let c=this.directPlugins[a].props[e];if(c!=null&&(r=n?n(c):c))return r}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let c=o[a].props[e];if(c!=null&&(r=n?n(c):c))return r}}hasFocus(){if(En){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&o6(this.dom),dr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return d6(this,e)}coordsAtPos(e,n=1){return DN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let r=this.docView.posFromDOM(e,n,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return g6(this,n||this.state,e)}pasteHTML(e,n){return Yc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Yc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return nb(this,e)}destroy(){this.docView&&(q6(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],vy(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,KP())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return K6(this,e)}domSelectionRange(){let e=this.domSelection();return e?dn&&this.root.nodeType===11&&QP(this.dom.ownerDocument)==this.dom&&gV(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}iA.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function ak(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let i in n)i=="class"?e.class+=" "+n[i]:i=="style"?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(n[i]))}),e.translate||(e.translate="no"),[un.node(0,t.state.doc.content.size,e)]}function lk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:un.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function ck(t){return!t.someProp("editable",e=>e(t.state)===!1)}function kV(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function uk(t){let e=Object.create(null);function n(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function TV(t,e){let n=0,i=0;for(let r in t){if(t[r]!=e[r])return!0;n++}for(let r in e)i++;return n!=i}function dk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var gs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},MV=typeof navigator<"u"&&/Mac/.test(navigator.platform),NV=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jt=0;Jt<10;Jt++)gs[48+Jt]=gs[96+Jt]=String(Jt);for(var Jt=1;Jt<=24;Jt++)gs[Jt+111]="F"+Jt;for(var Jt=65;Jt<=90;Jt++)gs[Jt]=String.fromCharCode(Jt+32),Wf[Jt]=String.fromCharCode(Jt);for(var wy in gs)Wf.hasOwnProperty(wy)||(Wf[wy]=gs[wy]);function AV(t){var e=MV&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||NV&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Wf:gs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const DV=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),OV=typeof navigator<"u"&&/Win/.test(navigator.platform);function RV(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let i,r,o,a;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))r=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))DV?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+d)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function jV(t){let e=Object.create(null);for(let n in t)e[RV(n)]=t[n];return e}function Ey(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function _V(t){return new wt({props:{handleKeyDown:rA(t)}})}function rA(t){let e=jV(t);return function(n,i){let r=AV(i),o,a=e[Ey(r,i)];if(a&&a(n.state,n.dispatch,n))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let c=e[Ey(r,i,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(OV&&i.ctrlKey&&i.altKey)&&(o=gs[i.keyCode])&&o!=r){let c=e[Ey(o,i)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}const lb=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function sA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const oA=(t,e,n)=>{let i=sA(t,n);if(!i)return!1;let r=cb(i);if(!r){let a=i.blockRange(),c=a&&Za(a);return c==null?!1:(e&&e(t.tr.lift(a,c).scrollIntoView()),!0)}let o=r.nodeBefore;if(mA(t,r,e,-1))return!0;if(i.parent.content.size==0&&(Pa(o,"end")||Ee.isSelectable(o)))for(let a=i.depth;;a--){let c=Jh(t.doc,i.before(a),i.after(a),ge.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=t.tr.step(c);d.setSelection(Pa(o,"end")?Be.findFrom(d.doc.resolve(d.mapping.map(r.pos,-1)),-1):Ee.create(d.doc,r.pos-o.nodeSize)),e(d.scrollIntoView())}return!0}if(a==1||i.node(a-1).childCount>1)break}return o.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1},LV=(t,e,n)=>{let i=sA(t,n);if(!i)return!1;let r=cb(i);return r?aA(t,r,e):!1},zV=(t,e,n)=>{let i=cA(t,n);if(!i)return!1;let r=ub(i);return r?aA(t,r,e):!1};function aA(t,e,n){let i=e.nodeBefore,r=i,o=e.pos-1;for(;!r.isTextblock;o--){if(r.type.spec.isolating)return!1;let p=r.lastChild;if(!p)return!1;r=p}let a=e.nodeAfter,c=a,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let f=Jh(t.doc,o,d,ge.empty);if(!f||f.from!=o||f instanceof Ut&&f.slice.size>=d-o)return!1;if(n){let p=t.tr.step(f);p.setSelection(_e.create(p.doc,o)),n(p.scrollIntoView())}return!0}function Pa(t,e,n=!1){for(let i=t;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}const lA=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;o=cb(i)}let a=o&&o.nodeBefore;return!a||!Ee.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Ee.create(t.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function cb(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function cA(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const uA=(t,e,n)=>{let i=cA(t,n);if(!i)return!1;let r=ub(i);if(!r)return!1;let o=r.nodeAfter;if(mA(t,r,e,1))return!0;if(i.parent.content.size==0&&(Pa(o,"start")||Ee.isSelectable(o))){let a=Jh(t.doc,i.before(),i.after(),ge.empty);if(a&&a.slice.size<a.to-a.from){if(e){let c=t.tr.step(a);c.setSelection(Pa(o,"start")?Be.findFrom(c.doc.resolve(c.mapping.map(r.pos)),1):Ee.create(c.doc,c.mapping.map(r.pos))),e(c.scrollIntoView())}return!0}}return o.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},dA=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;o=ub(i)}let a=o&&o.nodeAfter;return!a||!Ee.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Ee.create(t.doc,o.pos)).scrollIntoView()),!0)};function ub(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const BV=(t,e)=>{let n=t.selection,i=n instanceof Ee,r;if(i){if(n.node.isTextblock||!vs(t.doc,n.from))return!1;r=n.from}else if(r=Qh(t.doc,n.from,-1),r==null)return!1;if(e){let o=t.tr.join(r);i&&o.setSelection(Ee.create(o.doc,r-t.doc.resolve(r).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},PV=(t,e)=>{let n=t.selection,i;if(n instanceof Ee){if(n.node.isTextblock||!vs(t.doc,n.to))return!1;i=n.to}else if(i=Qh(t.doc,n.to,1),i==null)return!1;return e&&e(t.tr.join(i).scrollIntoView()),!0},VV=(t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),o=r&&Za(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},fA=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function db(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const IV=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),o=n.indexAfter(-1),a=db(r.contentMatchAt(o));if(!a||!r.canReplaceWith(o,o,a))return!1;if(e){let c=n.after(),d=t.tr.replaceWith(c,c,a.createAndFill());d.setSelection(Be.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},hA=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof Ln||i.parent.inlineContent||r.parent.inlineContent)return!1;let o=db(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,c=t.tr.insert(a,o.createAndFill());c.setSelection(_e.create(c.doc,a+1)),e(c.scrollIntoView())}return!0},pA=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(ur(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let i=n.blockRange(),r=i&&Za(i);return r==null?!1:(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};function HV(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof Ee&&e.selection.node.isBlock)return!i.parentOffset||!ur(e.doc,i.pos)?!1:(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let o=[],a,c,d=!1,f=!1;for(let x=i.depth;;x--)if(i.node(x).isBlock){d=i.end(x)==i.pos+(i.depth-x),f=i.start(x)==i.pos-(i.depth-x),c=db(i.node(x-1).contentMatchAt(i.indexAfter(x-1))),o.unshift(d&&c?{type:c}:null),a=x;break}else{if(x==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof _e||e.selection instanceof Ln)&&p.deleteSelection();let m=p.mapping.map(i.pos),g=ur(p.doc,m,o.length,o);if(g||(o[0]=c?{type:c}:null,g=ur(p.doc,m,o.length,o)),!g)return!1;if(p.split(m,o.length,o),!d&&f&&i.node(a).type!=c){let x=p.mapping.map(i.before(a)),S=p.doc.resolve(x);c&&i.node(a-1).canReplaceWith(S.index(),S.index()+1,c)&&p.setNodeMarkup(p.mapping.map(i.before(a)),c)}return n&&n(p.scrollIntoView()),!0}}const $V=HV(),UV=(t,e)=>{let{$from:n,to:i}=t.selection,r,o=n.sharedDepth(i);return o==0?!1:(r=n.before(o),e&&e(t.tr.setSelection(Ee.create(t.doc,r))),!0)};function FV(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,o=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||vs(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function mA(t,e,n,i){let r=e.nodeBefore,o=e.nodeAfter,a,c,d=r.type.spec.isolating||o.type.spec.isolating;if(!d&&FV(t,e,n))return!0;let f=!d&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(c=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&c.matchType(a[0]||o.type).validEnd){if(n){let x=e.pos+o.nodeSize,S=ue.empty;for(let C=a.length-1;C>=0;C--)S=ue.from(a[C].create(null,S));S=ue.from(r.copy(S));let w=t.tr.step(new Ft(e.pos-1,x,e.pos,x,new ge(S,1,0),a.length,!0)),E=w.doc.resolve(x+2*a.length);E.nodeAfter&&E.nodeAfter.type==r.type&&vs(w.doc,E.pos)&&w.join(E.pos),n(w.scrollIntoView())}return!0}let p=o.type.spec.isolating||i>0&&d?null:Be.findFrom(e,1),m=p&&p.$from.blockRange(p.$to),g=m&&Za(m);if(g!=null&&g>=e.depth)return n&&n(t.tr.lift(m,g).scrollIntoView()),!0;if(f&&Pa(o,"start",!0)&&Pa(r,"end")){let x=r,S=[];for(;S.push(x),!x.isTextblock;)x=x.lastChild;let w=o,E=1;for(;!w.isTextblock;w=w.firstChild)E++;if(x.canReplace(x.childCount,x.childCount,w.content)){if(n){let C=ue.empty;for(let k=S.length-1;k>=0;k--)C=ue.from(S[k].copy(C));let N=t.tr.step(new Ft(e.pos-S.length,e.pos+o.nodeSize,e.pos+E,e.pos+o.nodeSize-E,new ge(C,S.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function gA(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(n&&n(e.tr.setSelection(_e.create(e.doc,t<0?r.start(o):r.end(o)))),!0):!1}}const qV=gA(-1),YV=gA(1);function KV(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,a=r.blockRange(o),c=a&&Zx(a,t,e);return c?(i&&i(n.tr.wrap(a,c).scrollIntoView()),!0):!1}}function fk(t,e=null){return function(n,i){let r=!1;for(let o=0;o<n.selection.ranges.length&&!r;o++){let{$from:{pos:a},$to:{pos:c}}=n.selection.ranges[o];n.doc.nodesBetween(a,c,(d,f)=>{if(r)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)r=!0;else{let p=n.doc.resolve(f),m=p.index();r=p.parent.canReplaceWith(m,m+1,t)}})}if(!r)return!1;if(i){let o=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:d}}=n.selection.ranges[a];o.setBlockType(c,d,t,e)}i(o.scrollIntoView())}return!0}}function fb(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}fb(lb,oA,lA);fb(lb,uA,dA);fb(fA,hA,pA,$V);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function GV(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,a=r.blockRange(o);if(!a)return!1;let c=i?n.tr:null;return XV(c,a,t,e)?(i&&i(c.scrollIntoView()),!0):!1}}function XV(t,e,n,i=null){let r=!1,o=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=a.resolve(e.start-2);o=new Uf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Uf(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),r=!0}let c=Zx(o,n,i,e);return c?(t&&WV(t,e,c,r,n),!0):!1}function WV(t,e,n,i,r){let o=ue.empty;for(let p=n.length-1;p>=0;p--)o=ue.from(n[p].type.create(n[p].attrs,o));t.step(new Ft(e.start-(i?2:0),e.end,e.start,e.end,new ge(o,0,0),n.length,!0));let a=0;for(let p=0;p<n.length;p++)n[p].type==r&&(a=p+1);let c=n.length-a,d=e.start+n.length-(i?2:0),f=e.parent;for(let p=e.startIndex,m=e.endIndex,g=!0;p<m;p++,g=!1)!g&&ur(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=f.child(p).nodeSize;return t}function ZV(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,a=>a.childCount>0&&a.firstChild.type==t);return o?n?i.node(o.depth-1).type==t?QV(e,n,t,o):JV(e,n,o):!0:!1}}function QV(t,e,n,i){let r=t.tr,o=i.end,a=i.$to.end(i.depth);o<a&&(r.step(new Ft(o-1,a,o,a,new ge(ue.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new Uf(r.doc.resolve(i.$from.pos),r.doc.resolve(a),i.depth));const c=Za(i);if(c==null)return!1;r.lift(i,c);let d=r.doc.resolve(r.mapping.map(o,-1)-1);return vs(r.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&r.join(d.pos),e(r.scrollIntoView()),!0}function JV(t,e,n){let i=t.tr,r=n.parent;for(let x=n.end,S=n.endIndex-1,w=n.startIndex;S>w;S--)x-=r.child(S).nodeSize,i.delete(x-1,x+1);let o=i.doc.resolve(n.start),a=o.nodeAfter;if(i.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,d=n.endIndex==r.childCount,f=o.node(-1),p=o.index(-1);if(!f.canReplace(p+(c?0:1),p+1,a.content.append(d?ue.empty:ue.from(r))))return!1;let m=o.pos,g=m+a.nodeSize;return i.step(new Ft(m-(c?1:0),g+(d?1:0),m+1,g-1,new ge((c?ue.empty:ue.from(r.copy(ue.empty))).append(d?ue.empty:ue.from(r.copy(ue.empty))),c?0:1,d?0:1),c?0:1)),e(i.scrollIntoView()),!0}function eI(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,f=>f.childCount>0&&f.firstChild.type==t);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let c=o.parent,d=c.child(a-1);if(d.type!=t)return!1;if(n){let f=d.lastChild&&d.lastChild.type==c.type,p=ue.from(f?t.create():null),m=new ge(ue.from(t.create(null,ue.from(c.type.create(null,p)))),f?3:1,0),g=o.start,x=o.end;n(e.tr.step(new Ft(g-(f?3:1),x,g,x,m,1,!0)).scrollIntoView())}return!0}}var tI=Object.defineProperty,yA=(t,e)=>{for(var n in e)tI(t,n,{get:e[n],enumerable:!0})};function rp(t){const{state:e,transaction:n}=t;let{selection:i}=n,{doc:r}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return i},get doc(){return r},get tr(){return i=n.selection,r=n.doc,o=n.storedMarks,n}}}var sp=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:i}=e,{tr:r}=n,o=this.buildProps(r);return Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...f)=>{const p=c(...f)(o);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(r),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:i,state:r}=this,{view:o}=i,a=[],c=!!t,d=t||r.tr,f=()=>(!c&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(d),a.every(m=>m===!0)),p={...Object.fromEntries(Object.entries(n).map(([m,g])=>[m,(...S)=>{const w=this.buildProps(d,e),E=g(...S)(w);return a.push(E),p}])),run:f};return p}createCan(t){const{rawCommands:e,state:n}=this,i=!1,r=t||n.tr,o=this.buildProps(r,i);return{...Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...f)=>d(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,i)}}buildProps(t,e=!0){const{rawCommands:n,editor:i,state:r}=this,{view:o}=i,a={tr:t,editor:i,view:o,state:rp({state:r,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...f)=>d(...f)(a)]))}};return a}},nI=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(i=>i!==e):delete this.callbacks[t]),this}once(t,e){const n=(...i)=>{this.off(t,n),e.apply(this,i)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function xA(t,e){const n=new SN(t);return e.forEach(i=>{i.steps.forEach(r=>{n.step(r)})}),n}var bA=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const i=e[n];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?t.removeChild(i):i.nodeType===1&&bA(i)}return t};function Zd(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return bA(n)}function Gc(t,e,n){if(t instanceof ls||t instanceof ue)return t;n={slice:!0,parseOptions:{},...n};const i=typeof t=="object"&&t!==null,r=typeof t=="string";if(i)try{if(Array.isArray(t)&&t.length>0)return ue.fromArray(t.map(c=>e.nodeFromJSON(c)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Gc("",e,n)}if(r){if(n.errorOnInvalidContent){let a=!1,c="";const d=new sN({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,c=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?cs.fromSchema(d).parseSlice(Zd(t),n.parseOptions):cs.fromSchema(d).parse(Zd(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=cs.fromSchema(e);return n.slice?o.parseSlice(Zd(t),n.parseOptions).content:o.parse(Zd(t),n.parseOptions)}return Gc("",e,n)}function P0(t,e,n={},i={}){return Gc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:i.errorOnInvalidContent})}function iI(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function rI(t,e,n){const i=[];return t.nodesBetween(e.from,e.to,(r,o)=>{n(r)&&i.push({node:r,pos:o})}),i}function sI(t,e){for(let n=t.depth;n>0;n-=1){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}}function op(t){return e=>sI(e.$from,t)}function Se(t,e,n){return t.config[e]===void 0&&t.parent?Se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Se(t.parent,e,n):null}):t.config[e]}function hb(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},i=Se(e,"addExtensions",n);return i?[e,...hb(i())]:e}).flat(10)}function pb(t,e){const n=Co.fromSchema(e).serializeFragment(t),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function vA(t){return typeof t=="function"}function et(t,e=void 0,...n){return vA(t)?e?t.bind(e)(...n):t(...n):t}function oI(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Xc(t){const e=t.filter(r=>r.type==="extension"),n=t.filter(r=>r.type==="node"),i=t.filter(r=>r.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:i}}function SA(t){const e=[],{nodeExtensions:n,markExtensions:i}=Xc(t),r=[...n,...i],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage,extensions:r},d=Se(a,"addGlobalAttributes",c);if(!d)return;d().forEach(p=>{p.types.forEach(m=>{Object.entries(p.attributes).forEach(([g,x])=>{e.push({type:m,name:g,attribute:{...o,...x}})})})})}),r.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},d=Se(a,"addAttributes",c);if(!d)return;const f=d();Object.entries(f).forEach(([p,m])=>{const g={...o,...m};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,e.push({type:a.name,name:p,attribute:g})})}),e}function Rt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const i={...e};return Object.entries(n).forEach(([r,o])=>{if(!i[r]){i[r]=o;return}if(r==="class"){const c=o?String(o).split(" "):[],d=i[r]?i[r].split(" "):[],f=c.filter(p=>!d.includes(p));i[r]=[...d,...f].join(" ")}else if(r==="style"){const c=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],d=i[r]?i[r].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;d.forEach(p=>{const[m,g]=p.split(":").map(x=>x.trim());f.set(m,g)}),c.forEach(p=>{const[m,g]=p.split(":").map(x=>x.trim());f.set(m,g)}),i[r]=Array.from(f.entries()).map(([p,m])=>`${p}: ${m}`).join("; ")}else i[r]=o}),i},{})}function Zf(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,i)=>Rt(n,i),{})}function aI(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function hk(t,e){return"style"in t?t:{...t,getAttrs:n=>{const i=t.getAttrs?t.getAttrs(n):t.attrs;if(i===!1)return!1;const r=e.reduce((o,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(n):aI(n.getAttribute(a.name));return c==null?o:{...o,[a.name]:c}},{});return{...i,...r}}}}function pk(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&oI(n)?!1:n!=null))}function lI(t,e){var n;const i=SA(t),{nodeExtensions:r,markExtensions:o}=Xc(t),a=(n=r.find(f=>Se(f,"topNode")))==null?void 0:n.name,c=Object.fromEntries(r.map(f=>{const p=i.filter(C=>C.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},g=t.reduce((C,N)=>{const k=Se(N,"extendNodeSchema",m);return{...C,...k?k(f):{}}},{}),x=pk({...g,content:et(Se(f,"content",m)),marks:et(Se(f,"marks",m)),group:et(Se(f,"group",m)),inline:et(Se(f,"inline",m)),atom:et(Se(f,"atom",m)),selectable:et(Se(f,"selectable",m)),draggable:et(Se(f,"draggable",m)),code:et(Se(f,"code",m)),whitespace:et(Se(f,"whitespace",m)),linebreakReplacement:et(Se(f,"linebreakReplacement",m)),defining:et(Se(f,"defining",m)),isolating:et(Se(f,"isolating",m)),attrs:Object.fromEntries(p.map(C=>{var N,k;return[C.name,{default:(N=C?.attribute)==null?void 0:N.default,validate:(k=C?.attribute)==null?void 0:k.validate}]}))}),S=et(Se(f,"parseHTML",m));S&&(x.parseDOM=S.map(C=>hk(C,p)));const w=Se(f,"renderHTML",m);w&&(x.toDOM=C=>w({node:C,HTMLAttributes:Zf(C,p)}));const E=Se(f,"renderText",m);return E&&(x.toText=E),[f.name,x]})),d=Object.fromEntries(o.map(f=>{const p=i.filter(E=>E.type===f.name),m={name:f.name,options:f.options,storage:f.storage,editor:e},g=t.reduce((E,C)=>{const N=Se(C,"extendMarkSchema",m);return{...E,...N?N(f):{}}},{}),x=pk({...g,inclusive:et(Se(f,"inclusive",m)),excludes:et(Se(f,"excludes",m)),group:et(Se(f,"group",m)),spanning:et(Se(f,"spanning",m)),code:et(Se(f,"code",m)),attrs:Object.fromEntries(p.map(E=>{var C,N;return[E.name,{default:(C=E?.attribute)==null?void 0:C.default,validate:(N=E?.attribute)==null?void 0:N.validate}]}))}),S=et(Se(f,"parseHTML",m));S&&(x.parseDOM=S.map(E=>hk(E,p)));const w=Se(f,"renderHTML",m);return w&&(x.toDOM=E=>w({mark:E,HTMLAttributes:Zf(E,p)})),[f.name,x]}));return new sN({topNode:a,nodes:c,marks:d})}function cI(t){const e=t.filter((n,i)=>t.indexOf(n)!==i);return Array.from(new Set(e))}function mb(t){return t.sort((n,i)=>{const r=Se(n,"priority")||100,o=Se(i,"priority")||100;return r>o?-1:r<o?1:0})}function wA(t){const e=mb(hb(t)),n=cI(e.map(i=>i.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),e}function EA(t,e,n){const{from:i,to:r}=e,{blockSeparator:o=`

`,textSerializers:a={}}=n||{};let c="";return t.nodesBetween(i,r,(d,f,p,m)=>{var g;d.isBlock&&f>i&&(c+=o);const x=a?.[d.type.name];if(x)return p&&(c+=x({node:d,pos:f,parent:p,index:m,range:e})),!1;d.isText&&(c+=(g=d?.text)==null?void 0:g.slice(Math.max(i,f)-f,r-f))}),c}function uI(t,e){const n={from:0,to:t.content.size};return EA(t,n,e)}function CA(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function gr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function kA(t,e){const n=gr(e,t.schema),{from:i,to:r,empty:o}=t.selection,a=[];o?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(i,r,d=>{a.push(...d.marks)});const c=a.find(d=>d.type.name===n.name);return c?{...c.attrs}:{}}function jt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function dI(t,e){const n=jt(e,t.schema),{from:i,to:r}=t.selection,o=[];t.doc.nodesBetween(i,r,c=>{o.push(c)});const a=o.reverse().find(c=>c.type.name===n.name);return a?{...a.attrs}:{}}function ap(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function TA(t,e){const n=ap(typeof e=="string"?e:e.name,t.schema);return n==="node"?dI(t,e):n==="mark"?kA(t,e):{}}function fI(t,e=JSON.stringify){const n={};return t.filter(i=>{const r=e(i);return Object.prototype.hasOwnProperty.call(n,r)?!1:n[r]=!0})}function hI(t){const e=fI(t);return e.length===1?e:e.filter((n,i)=>!e.filter((o,a)=>a!==i).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function MA(t){const{mapping:e,steps:n}=t,i=[];return e.maps.forEach((r,o)=>{const a=[];if(r.ranges.length)r.forEach((c,d)=>{a.push({from:c,to:d})});else{const{from:c,to:d}=n[o];if(c===void 0||d===void 0)return;a.push({from:c,to:d})}a.forEach(({from:c,to:d})=>{const f=e.slice(o).map(c,-1),p=e.slice(o).map(d),m=e.invert().map(f,-1),g=e.invert().map(p);i.push({oldRange:{from:m,to:g},newRange:{from:f,to:p}})})}),hI(i)}function gb(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Qf(t,e,n={strict:!0}){const i=Object.keys(e);return i.length?i.every(r=>n.strict?e[r]===t[r]:gb(e[r])?e[r].test(t[r]):e[r]===t[r]):!0}function NA(t,e,n={}){return t.find(i=>i.type===e&&Qf(Object.fromEntries(Object.keys(n).map(r=>[r,i.attrs[r]])),n))}function mk(t,e,n={}){return!!NA(t,e,n)}function yb(t,e,n){var i;if(!t||!e)return;let r=t.parent.childAfter(t.parentOffset);if((!r.node||!r.node.marks.some(p=>p.type===e))&&(r=t.parent.childBefore(t.parentOffset)),!r.node||!r.node.marks.some(p=>p.type===e)||(n=n||((i=r.node.marks[0])==null?void 0:i.attrs),!NA([...r.node.marks],e,n)))return;let a=r.index,c=t.start()+r.offset,d=a+1,f=c+r.node.nodeSize;for(;a>0&&mk([...t.parent.child(a-1).marks],e,n);)a-=1,c-=t.parent.child(a).nodeSize;for(;d<t.parent.childCount&&mk([...t.parent.child(d).marks],e,n);)f+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:f}}function xb(t,e,n){const i=[];return t===e?n.resolve(t).marks().forEach(r=>{const o=n.resolve(t),a=yb(o,r.type);a&&i.push({mark:r,...a})}):n.nodesBetween(t,e,(r,o)=>{!r||r?.nodeSize===void 0||i.push(...r.marks.map(a=>({from:o,to:o+r.nodeSize,mark:a})))}),i}var pI=(t,e,n,i=20)=>{const r=t.doc.resolve(n);let o=i,a=null;for(;o>0&&a===null;){const c=r.node(o);c?.type.name===e?a=c:o-=1}return[a,o]};function Cy(t,e){return e.nodes[t]||e.marks[t]||null}function wf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const r=t.find(o=>o.type===e&&o.name===i);return r?r.attribute.keepOnSplit:!1}))}var mI=(t,e=500)=>{let n="";const i=t.parentOffset;return t.parent.nodesBetween(Math.max(0,i-e),i,(r,o,a,c)=>{var d,f;const p=((f=(d=r.type.spec).toText)==null?void 0:f.call(d,{node:r,pos:o,parent:a,index:c}))||r.textContent||"%leaf%";n+=r.isAtom&&!r.isText?p:p.slice(0,Math.max(0,i-o))}),n};function V0(t,e,n={}){const{empty:i,ranges:r}=t.selection,o=e?gr(e,t.schema):null;if(i)return!!(t.storedMarks||t.selection.$from.marks()).filter(m=>o?o.name===m.type.name:!0).find(m=>Qf(m.attrs,n,{strict:!1}));let a=0;const c=[];if(r.forEach(({$from:m,$to:g})=>{const x=m.pos,S=g.pos;t.doc.nodesBetween(x,S,(w,E)=>{if(!w.isText&&!w.marks.length)return;const C=Math.max(x,E),N=Math.min(S,E+w.nodeSize),k=N-C;a+=k,c.push(...w.marks.map(M=>({mark:M,from:C,to:N})))})}),a===0)return!1;const d=c.filter(m=>o?o.name===m.mark.type.name:!0).filter(m=>Qf(m.mark.attrs,n,{strict:!1})).reduce((m,g)=>m+g.to-g.from,0),f=c.filter(m=>o?m.mark.type!==o&&m.mark.type.excludes(o):!0).reduce((m,g)=>m+g.to-g.from,0);return(d>0?d+f:d)>=a}function ys(t,e,n={}){const{from:i,to:r,empty:o}=t.selection,a=e?jt(e,t.schema):null,c=[];t.doc.nodesBetween(i,r,(m,g)=>{if(m.isText)return;const x=Math.max(i,g),S=Math.min(r,g+m.nodeSize);c.push({node:m,from:x,to:S})});const d=r-i,f=c.filter(m=>a?a.name===m.node.type.name:!0).filter(m=>Qf(m.node.attrs,n,{strict:!1}));return o?!!f.length:f.reduce((m,g)=>m+g.to-g.from,0)>=d}function gI(t,e,n={}){if(!e)return ys(t,null,n)||V0(t,null,n);const i=ap(e,t.schema);return i==="node"?ys(t,e,n):i==="mark"?V0(t,e,n):!1}var yI=(t,e)=>{const{$from:n,$to:i,$anchor:r}=t.selection;if(e){const o=op(c=>c.type.name===e)(t.selection);if(!o)return!1;const a=t.doc.resolve(o.pos+1);return r.pos+1===a.end()}return!(i.parentOffset<i.parent.nodeSize-2||n.pos!==i.pos)},xI=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function gk(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function yk(t,e){const{nodeExtensions:n}=Xc(e),i=n.find(a=>a.name===t);if(!i)return!1;const r={name:i.name,options:i.options,storage:i.storage},o=et(Se(i,"group",r));return typeof o!="string"?!1:o.split(" ").includes("list")}function lp(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var i;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((i=t.text)!=null?i:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let r=!0;return t.content.forEach(o=>{r!==!1&&(lp(o,{ignoreWhitespace:n,checkChildren:e})||(r=!1))}),r}return!1}function AA(t){return t instanceof Ee}function DA(t){return t instanceof _e}function Qs(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function OA(t,e=null){if(!e)return null;const n=Be.atStart(t),i=Be.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return i;const r=n.from,o=i.to;return e==="all"?_e.create(t,Qs(0,r,o),Qs(t.content.size,r,o)):_e.create(t,Qs(e,r,o),Qs(e,r,o))}function bI(t,e,n){const i=t.steps.length-1;if(i<e)return;const r=t.steps[i];if(!(r instanceof Ut||r instanceof Ft))return;const o=t.mapping.maps[i];let a=0;o.forEach((c,d,f,p)=>{a===0&&(a=p)}),t.setSelection(Be.near(t.doc.resolve(a),n))}var cp=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},vI=(t,e)=>{if(gb(e))return e.exec(t);const n=e(t);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=t,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i};function Qd(t){var e;const{editor:n,from:i,to:r,text:o,rules:a,plugin:c}=t,{view:d}=n;if(d.composing)return!1;const f=d.state.doc.resolve(i);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(g=>g.type.spec.code))return!1;let p=!1;const m=mI(f)+o;return a.forEach(g=>{if(p)return;const x=vI(m,g.find);if(!x)return;const S=d.state.tr,w=rp({state:d.state,transaction:S}),E={from:i-(x[0].length-o.length),to:r},{commands:C,chain:N,can:k}=new sp({editor:n,state:w});g.handler({state:w,range:E,match:x,commands:C,chain:N,can:k})===null||!S.steps.length||(g.undoable&&S.setMeta(c,{transform:S,from:i,to:r,text:o}),d.dispatch(S),p=!0)}),p}function SI(t){const{editor:e,rules:n}=t,i=new wt({state:{init(){return null},apply(r,o,a){const c=r.getMeta(i);if(c)return c;const d=r.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=pb(ue.from(p),a.schema);const{from:m}=d,g=m+p.length;Qd({editor:e,from:m,to:g,text:p,rules:n,plugin:i})}),r.selectionSet||r.docChanged?null:o}},props:{handleTextInput(r,o,a,c){return Qd({editor:e,from:o,to:a,text:c,rules:n,plugin:i})},handleDOMEvents:{compositionend:r=>(setTimeout(()=>{const{$cursor:o}=r.state.selection;o&&Qd({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(r,o){if(o.key!=="Enter")return!1;const{$cursor:a}=r.state.selection;return a?Qd({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:i}):!1}},isInputRules:!0});return i}function wI(t){return Object.prototype.toString.call(t).slice(8,-1)}function Jd(t){return wI(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function RA(t,e){const n={...t};return Jd(t)&&Jd(e)&&Object.keys(e).forEach(i=>{Jd(e[i])&&Jd(t[i])?n[i]=RA(t[i],e[i]):n[i]=e[i]}),n}var bb=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...et(Se(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...et(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>RA(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ko=class jA extends bb{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new jA(n)}static handleExit({editor:e,mark:n}){const{tr:i}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){const a=r.marks();if(!!!a.find(f=>f?.type.name===n.name))return!1;const d=a.find(f=>f?.type.name===n.name);return d&&i.removeStoredMark(d),i.insertText(" ",r.pos),e.view.dispatch(i),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function EI(t){return typeof t=="number"}var CI=class{constructor(t){this.find=t.find,this.handler=t.handler}},kI=(t,e,n)=>{if(gb(e))return[...t.matchAll(e)];const i=e(t,n);return i?i.map(r=>{const o=[r.text];return o.index=r.index,o.input=t,o.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(r.replaceWith)),o}):[]};function TI(t){const{editor:e,state:n,from:i,to:r,rule:o,pasteEvent:a,dropEvent:c}=t,{commands:d,chain:f,can:p}=new sp({editor:e,state:n}),m=[];return n.doc.nodesBetween(i,r,(x,S)=>{var w,E,C,N,k;if((E=(w=x.type)==null?void 0:w.spec)!=null&&E.code||!(x.isText||x.isTextblock||x.isInline))return;const M=(k=(N=(C=x.content)==null?void 0:C.size)!=null?N:x.nodeSize)!=null?k:0,D=Math.max(i,S),_=Math.min(r,S+M);if(D>=_)return;const P=x.isText?x.text||"":x.textBetween(D-S,_-S,void 0,"￼");kI(P,o.find,a).forEach(I=>{if(I.index===void 0)return;const ee=D+I.index+1,K=ee+I[0].length,W={from:n.tr.mapping.map(ee),to:n.tr.mapping.map(K)},ne=o.handler({state:n,range:W,match:I,commands:d,chain:f,can:p,pasteEvent:a,dropEvent:c});m.push(ne)})}),m.every(x=>x!==null)}var ef=null,MI=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function NI(t){const{editor:e,rules:n}=t;let i=null,r=!1,o=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:p,from:m,to:g,rule:x,pasteEvt:S})=>{const w=p.tr,E=rp({state:p,transaction:w});if(!(!TI({editor:e,state:E,from:Math.max(m-1,0),to:g.b-1,rule:x,pasteEvent:S,dropEvent:c})||!w.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(p=>new wt({view(m){const g=S=>{var w;i=(w=m.dom.parentElement)!=null&&w.contains(S.target)?m.dom.parentElement:null,i&&(ef=e)},x=()=>{ef&&(ef=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(m,g)=>{if(o=i===m.dom.parentElement,c=g,!o){const x=ef;x?.isEditable&&setTimeout(()=>{const S=x.state.selection;S&&x.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(m,g)=>{var x;const S=(x=g.clipboardData)==null?void 0:x.getData("text/html");return a=g,r=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(m,g,x)=>{const S=m[0],w=S.getMeta("uiEvent")==="paste"&&!r,E=S.getMeta("uiEvent")==="drop"&&!o,C=S.getMeta("applyPasteRules"),N=!!C;if(!w&&!E&&!N)return;if(N){let{text:D}=C;typeof D=="string"?D=D:D=pb(ue.from(D),x.schema);const{from:_}=C,P=_+D.length,B=MI(D);return d({rule:p,state:x,from:_,to:{b:P},pasteEvt:B})}const k=g.doc.content.findDiffStart(x.doc.content),M=g.doc.content.findDiffEnd(x.doc.content);if(!(!EI(k)||!M||k===M.b))return d({rule:p,state:x,from:k,to:M,pasteEvt:a})}}))}var up=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=wA(t),this.schema=lI(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Cy(e.name,this.schema)},i=Se(e,"addCommands",n);return i?{...t,...i()}:t},{})}get plugins(){const{editor:t}=this;return mb([...this.extensions].reverse()).flatMap(i=>{const r={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Cy(i.name,this.schema)},o=[],a=Se(i,"addKeyboardShortcuts",r);let c={};if(i.type==="mark"&&Se(i,"exitable",r)&&(c.ArrowRight=()=>ko.handleExit({editor:t,mark:i})),a){const g=Object.fromEntries(Object.entries(a()).map(([x,S])=>[x,()=>S({editor:t})]));c={...c,...g}}const d=_V(c);o.push(d);const f=Se(i,"addInputRules",r);if(gk(i,t.options.enableInputRules)&&f){const g=f();if(g&&g.length){const x=SI({editor:t,rules:g}),S=Array.isArray(x)?x:[x];o.push(...S)}}const p=Se(i,"addPasteRules",r);if(gk(i,t.options.enablePasteRules)&&p){const g=p();if(g&&g.length){const x=NI({editor:t,rules:g});o.push(...x)}}const m=Se(i,"addProseMirrorPlugins",r);if(m){const g=m();o.push(...g)}return o})}get attributes(){return SA(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Xc(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addNodeView")).map(n=>{const i=this.attributes.filter(c=>c.type===n.name),r={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:jt(n.name,this.schema)},o=Se(n,"addNodeView",r);if(!o)return[];const a=(c,d,f,p,m)=>{const g=Zf(c,i);return o()({node:c,view:d,getPos:f,decorations:p,innerDecorations:m,editor:t,extension:n,HTMLAttributes:g})};return[n.name,a]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Xc(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addMarkView")).map(n=>{const i=this.attributes.filter(c=>c.type===n.name),r={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:gr(n.name,this.schema)},o=Se(n,"addMarkView",r);if(!o)return[];const a=(c,d,f)=>{const p=Zf(c,i);return o()({mark:c,view:d,inline:f,editor:t,extension:n,HTMLAttributes:p,updateAttributes:m=>{FH(c,t,m)}})};return[n.name,a]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const i={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Cy(e.name,this.schema)};e.type==="mark"&&((n=et(Se(e,"keepOnSplit",i)))==null||n)&&this.splittableMarks.push(e.name);const r=Se(e,"onBeforeCreate",i),o=Se(e,"onCreate",i),a=Se(e,"onUpdate",i),c=Se(e,"onSelectionUpdate",i),d=Se(e,"onTransaction",i),f=Se(e,"onFocus",i),p=Se(e,"onBlur",i),m=Se(e,"onDestroy",i);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),a&&this.editor.on("update",a),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),m&&this.editor.on("destroy",m)})}};up.resolve=wA;up.sort=mb;up.flatten=hb;var AI={};yA(AI,{ClipboardTextSerializer:()=>LA,Commands:()=>PA,Delete:()=>VA,Drop:()=>IA,Editable:()=>HA,FocusEvents:()=>UA,Keymap:()=>FA,Paste:()=>qA,Tabindex:()=>YA,focusEventsPluginKey:()=>$A});var Tt=class _A extends bb{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new _A(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},LA=Tt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new wt({key:new Yt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:i,selection:r}=e,{ranges:o}=r,a=Math.min(...o.map(p=>p.$from.pos)),c=Math.max(...o.map(p=>p.$to.pos)),d=CA(n);return EA(i,{from:a,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),zA={};yA(zA,{blur:()=>DI,clearContent:()=>OI,clearNodes:()=>RI,command:()=>jI,createParagraphNear:()=>_I,cut:()=>LI,deleteCurrentNode:()=>zI,deleteNode:()=>BI,deleteRange:()=>PI,deleteSelection:()=>VI,enter:()=>II,exitCode:()=>HI,extendMarkRange:()=>$I,first:()=>UI,focus:()=>qI,forEach:()=>YI,insertContent:()=>KI,insertContentAt:()=>XI,joinBackward:()=>QI,joinDown:()=>ZI,joinForward:()=>JI,joinItemBackward:()=>eH,joinItemForward:()=>tH,joinTextblockBackward:()=>nH,joinTextblockForward:()=>iH,joinUp:()=>WI,keyboardShortcut:()=>sH,lift:()=>oH,liftEmptyBlock:()=>aH,liftListItem:()=>lH,newlineInCode:()=>cH,resetAttributes:()=>uH,scrollIntoView:()=>dH,selectAll:()=>fH,selectNodeBackward:()=>hH,selectNodeForward:()=>pH,selectParentNode:()=>mH,selectTextblockEnd:()=>gH,selectTextblockStart:()=>yH,setContent:()=>xH,setMark:()=>vH,setMeta:()=>SH,setNode:()=>wH,setNodeSelection:()=>EH,setTextSelection:()=>CH,sinkListItem:()=>kH,splitBlock:()=>TH,splitListItem:()=>MH,toggleList:()=>NH,toggleMark:()=>AH,toggleNode:()=>DH,toggleWrap:()=>OH,undoInputRule:()=>RH,unsetAllMarks:()=>jH,unsetMark:()=>_H,updateAttributes:()=>LH,wrapIn:()=>zH,wrapInList:()=>BH});var DI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),OI=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),RI=()=>({state:t,tr:e,dispatch:n})=>{const{selection:i}=e,{ranges:r}=i;return n&&r.forEach(({$from:o,$to:a})=>{t.doc.nodesBetween(o.pos,a.pos,(c,d)=>{if(c.type.isText)return;const{doc:f,mapping:p}=e,m=f.resolve(p.map(d)),g=f.resolve(p.map(d+c.nodeSize)),x=m.blockRange(g);if(!x)return;const S=Za(x);if(c.type.isTextblock){const{defaultType:w}=m.parent.contentMatchAt(m.index());e.setNodeMarkup(x.start,w)}(S||S===0)&&e.lift(x,S)})}),!0},jI=t=>e=>t(e),_I=()=>({state:t,dispatch:e})=>hA(t,e),LI=(t,e)=>({editor:n,tr:i})=>{const{state:r}=n,o=r.doc.slice(t.from,t.to);i.deleteRange(t.from,t.to);const a=i.mapping.map(e);return i.insert(a,o.content),i.setSelection(new _e(i.doc.resolve(Math.max(a-1,0)))),!0},zI=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,i=n.$anchor.node();if(i.content.size>0)return!1;const r=t.selection.$anchor;for(let o=r.depth;o>0;o-=1)if(r.node(o).type===i.type){if(e){const c=r.before(o),d=r.after(o);t.delete(c,d).scrollIntoView()}return!0}return!1},BI=t=>({tr:e,state:n,dispatch:i})=>{const r=jt(t,n.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===r){if(i){const d=o.before(a),f=o.after(a);e.delete(d,f).scrollIntoView()}return!0}return!1},PI=t=>({tr:e,dispatch:n})=>{const{from:i,to:r}=t;return n&&e.delete(i,r),!0},VI=()=>({state:t,dispatch:e})=>lb(t,e),II=()=>({commands:t})=>t.keyboardShortcut("Enter"),HI=()=>({state:t,dispatch:e})=>IV(t,e),$I=(t,e={})=>({tr:n,state:i,dispatch:r})=>{const o=gr(t,i.schema),{doc:a,selection:c}=n,{$from:d,from:f,to:p}=c;if(r){const m=yb(d,o,e);if(m&&m.from<=f&&m.to>=p){const g=_e.create(a,m.from,m.to);n.setSelection(g)}}return!0},UI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let i=0;i<n.length;i+=1)if(n[i](e))return!0;return!1};function FI(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function vb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var qI=(t=null,e={})=>({editor:n,view:i,tr:r,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{(vb()||FI())&&i.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(i.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!DA(n.state.selection))return a(),!0;const c=OA(r.doc,t)||n.state.selection,d=n.state.selection.eq(c);return o&&(d||r.setSelection(c),d&&r.storedMarks&&r.setStoredMarks(r.storedMarks),a()),!0},YI=(t,e)=>n=>t.every((i,r)=>e(i,{...n,index:r})),KI=(t,e)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),GI=t=>!("type"in t),XI=(t,e,n)=>({tr:i,dispatch:r,editor:o})=>{var a;if(r){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const d=E=>{o.emit("contentError",{editor:o,error:E,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Gc(e,o.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(E){d(E)}try{c=Gc(e,o.schema,{parseOptions:f,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(E){return d(E),!1}let{from:p,to:m}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},g=!0,x=!0;if((GI(c)?c:[c]).forEach(E=>{E.check(),g=g?E.isText&&E.marks.length===0:!1,x=x?E.isBlock:!1}),p===m&&x){const{parent:E}=i.doc.resolve(p);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(p-=1,m+=1)}let w;if(g){if(Array.isArray(e))w=e.map(E=>E.text||"").join("");else if(e instanceof ue){let E="";e.forEach(C=>{C.text&&(E+=C.text)}),w=E}else typeof e=="object"&&e&&e.text?w=e.text:w=e;i.insertText(w,p,m)}else{w=c;const E=i.doc.resolve(p),C=E.node(),N=E.parentOffset===0,k=C.isText||C.isTextblock,M=C.content.size>0;N&&k&&M&&(p=Math.max(0,p-1)),i.replaceWith(p,m,w)}n.updateSelection&&bI(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:p,text:w}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:p,text:w})}return!0},WI=()=>({state:t,dispatch:e})=>BV(t,e),ZI=()=>({state:t,dispatch:e})=>PV(t,e),QI=()=>({state:t,dispatch:e})=>oA(t,e),JI=()=>({state:t,dispatch:e})=>uA(t,e),eH=()=>({state:t,dispatch:e,tr:n})=>{try{const i=Qh(t.doc,t.selection.$from.pos,-1);return i==null?!1:(n.join(i,2),e&&e(n),!0)}catch{return!1}},tH=()=>({state:t,dispatch:e,tr:n})=>{try{const i=Qh(t.doc,t.selection.$from.pos,1);return i==null?!1:(n.join(i,2),e&&e(n),!0)}catch{return!1}},nH=()=>({state:t,dispatch:e})=>LV(t,e),iH=()=>({state:t,dispatch:e})=>zV(t,e);function BA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function rH(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let i,r,o,a;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))a=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))r=!0;else if(/^s(hift)?$/i.test(d))o=!0;else if(/^mod$/i.test(d))vb()||BA()?a=!0:r=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return i&&(n=`Alt-${n}`),r&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var sH=t=>({editor:e,view:n,tr:i,dispatch:r})=>{const o=rH(t).split(/-(?!$)/),a=o.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,c))});return d?.steps.forEach(f=>{const p=f.map(i.mapping);p&&r&&i.maybeStep(p)}),!0},oH=(t,e={})=>({state:n,dispatch:i})=>{const r=jt(t,n.schema);return ys(n,r,e)?VV(n,i):!1},aH=()=>({state:t,dispatch:e})=>pA(t,e),lH=t=>({state:e,dispatch:n})=>{const i=jt(t,e.schema);return ZV(i)(e,n)},cH=()=>({state:t,dispatch:e})=>fA(t,e);function xk(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((i,r)=>(n.includes(r)||(i[r]=t[r]),i),{})}var uH=(t,e)=>({tr:n,state:i,dispatch:r})=>{let o=null,a=null;const c=ap(typeof t=="string"?t:t.name,i.schema);return c?(c==="node"&&(o=jt(t,i.schema)),c==="mark"&&(a=gr(t,i.schema)),r&&n.selection.ranges.forEach(d=>{i.doc.nodesBetween(d.$from.pos,d.$to.pos,(f,p)=>{o&&o===f.type&&n.setNodeMarkup(p,void 0,xk(f.attrs,e)),a&&f.marks.length&&f.marks.forEach(m=>{a===m.type&&n.addMark(p,p+f.nodeSize,a.create(xk(m.attrs,e)))})})}),!0):!1},dH=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),fH=()=>({tr:t,dispatch:e})=>{if(e){const n=new Ln(t.doc);t.setSelection(n)}return!0},hH=()=>({state:t,dispatch:e})=>lA(t,e),pH=()=>({state:t,dispatch:e})=>dA(t,e),mH=()=>({state:t,dispatch:e})=>UV(t,e),gH=()=>({state:t,dispatch:e})=>YV(t,e),yH=()=>({state:t,dispatch:e})=>qV(t,e),xH=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:i={}}={})=>({editor:r,tr:o,dispatch:a,commands:c})=>{const{doc:d}=o;if(i.preserveWhitespace!=="full"){const f=P0(t,r.schema,i,{errorOnInvalidContent:e??r.options.enableContentCheck});return a&&o.replaceWith(0,d.content.size,f).setMeta("preventUpdate",!n),!0}return a&&o.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:i,errorOnInvalidContent:e??r.options.enableContentCheck})};function bH(t,e,n){var i;const{selection:r}=e;let o=null;if(DA(r)&&(o=r.$cursor),o){const c=(i=t.storedMarks)!=null?i:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(f=>f.type.excludes(n)))}const{ranges:a}=r;return a.some(({$from:c,$to:d})=>{let f=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,d.pos,(p,m,g)=>{if(f)return!1;if(p.isInline){const x=!g||g.type.allowsMarkType(n),S=!!n.isInSet(p.marks)||!p.marks.some(w=>w.type.excludes(n));f=x&&S}return!f}),f})}var vH=(t,e={})=>({tr:n,state:i,dispatch:r})=>{const{selection:o}=n,{empty:a,ranges:c}=o,d=gr(t,i.schema);if(r)if(a){const f=kA(i,d);n.addStoredMark(d.create({...f,...e}))}else c.forEach(f=>{const p=f.$from.pos,m=f.$to.pos;i.doc.nodesBetween(p,m,(g,x)=>{const S=Math.max(x,p),w=Math.min(x+g.nodeSize,m);g.marks.find(C=>C.type===d)?g.marks.forEach(C=>{d===C.type&&n.addMark(S,w,d.create({...C.attrs,...e}))}):n.addMark(S,w,d.create(e))})});return bH(i,n,d)},SH=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),wH=(t,e={})=>({state:n,dispatch:i,chain:r})=>{const o=jt(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),o.isTextblock?r().command(({commands:c})=>fk(o,{...a,...e})(n)?!0:c.clearNodes()).command(({state:c})=>fk(o,{...a,...e})(c,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},EH=t=>({tr:e,dispatch:n})=>{if(n){const{doc:i}=e,r=Qs(t,0,i.content.size),o=Ee.create(i,r);e.setSelection(o)}return!0},CH=t=>({tr:e,dispatch:n})=>{if(n){const{doc:i}=e,{from:r,to:o}=typeof t=="number"?{from:t,to:t}:t,a=_e.atStart(i).from,c=_e.atEnd(i).to,d=Qs(r,a,c),f=Qs(o,a,c),p=_e.create(i,d,f);e.setSelection(p)}return!0},kH=t=>({state:e,dispatch:n})=>{const i=jt(t,e.schema);return eI(i)(e,n)};function bk(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const i=n.filter(r=>e?.includes(r.type.name));t.tr.ensureMarks(i)}}var TH=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:r})=>{const{selection:o,doc:a}=e,{$from:c,$to:d}=o,f=r.extensionManager.attributes,p=wf(f,c.node().type.name,c.node().attrs);if(o instanceof Ee&&o.node.isBlock)return!c.parentOffset||!ur(a,c.pos)?!1:(i&&(t&&bk(n,r.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const m=d.parentOffset===d.parent.content.size,g=c.depth===0?void 0:iI(c.node(-1).contentMatchAt(c.indexAfter(-1)));let x=m&&g?[{type:g,attrs:p}]:void 0,S=ur(e.doc,e.mapping.map(c.pos),1,x);if(!x&&!S&&ur(e.doc,e.mapping.map(c.pos),1,g?[{type:g}]:void 0)&&(S=!0,x=g?[{type:g,attrs:p}]:void 0),i){if(S&&(o instanceof _e&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,x),g&&!m&&!c.parentOffset&&c.parent.type!==g)){const w=e.mapping.map(c.before()),E=e.doc.resolve(w);c.node(-1).canReplaceWith(E.index(),E.index()+1,g)&&e.setNodeMarkup(e.mapping.map(c.before()),g)}t&&bk(n,r.extensionManager.splittableMarks),e.scrollIntoView()}return S},MH=(t,e={})=>({tr:n,state:i,dispatch:r,editor:o})=>{var a;const c=jt(t,i.schema),{$from:d,$to:f}=i.selection,p=i.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(f))return!1;const m=d.node(-1);if(m.type!==c)return!1;const g=o.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(r){let C=ue.empty;const N=d.index(-1)?1:d.index(-2)?2:3;for(let B=d.depth-N;B>=d.depth-3;B-=1)C=ue.from(d.node(B).copy(C));const k=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,M={...wf(g,d.node().type.name,d.node().attrs),...e},D=((a=c.contentMatch.defaultType)==null?void 0:a.createAndFill(M))||void 0;C=C.append(ue.from(c.createAndFill(null,D)||void 0));const _=d.before(d.depth-(N-1));n.replace(_,d.after(-k),new ge(C,4-N,0));let P=-1;n.doc.nodesBetween(_,n.doc.content.size,(B,I)=>{if(P>-1)return!1;B.isTextblock&&B.content.size===0&&(P=I+1)}),P>-1&&n.setSelection(_e.near(n.doc.resolve(P))),n.scrollIntoView()}return!0}const x=f.pos===d.end()?m.contentMatchAt(0).defaultType:null,S={...wf(g,m.type.name,m.attrs),...e},w={...wf(g,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,f.pos);const E=x?[{type:c,attrs:S},{type:x,attrs:w}]:[{type:c,attrs:S}];if(!ur(n.doc,d.pos,2))return!1;if(r){const{selection:C,storedMarks:N}=i,{splittableMarks:k}=o.extensionManager,M=N||C.$to.parentOffset&&C.$from.marks();if(n.split(d.pos,2,E).scrollIntoView(),!M||!r)return!0;const D=M.filter(_=>k.includes(_.type.name));n.ensureMarks(D)}return!0},ky=(t,e)=>{const n=op(a=>a.type===e)(t.selection);if(!n)return!0;const i=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(i===void 0)return!0;const r=t.doc.nodeAt(i);return n.node.type===r?.type&&vs(t.doc,n.pos)&&t.join(n.pos),!0},Ty=(t,e)=>{const n=op(a=>a.type===e)(t.selection);if(!n)return!0;const i=t.doc.resolve(n.start).after(n.depth);if(i===void 0)return!0;const r=t.doc.nodeAt(i);return n.node.type===r?.type&&vs(t.doc,i)&&t.join(i),!0},NH=(t,e,n,i={})=>({editor:r,tr:o,state:a,dispatch:c,chain:d,commands:f,can:p})=>{const{extensions:m,splittableMarks:g}=r.extensionManager,x=jt(t,a.schema),S=jt(e,a.schema),{selection:w,storedMarks:E}=a,{$from:C,$to:N}=w,k=C.blockRange(N),M=E||w.$to.parentOffset&&w.$from.marks();if(!k)return!1;const D=op(_=>yk(_.type.name,m))(w);if(k.depth>=1&&D&&k.depth-D.depth<=1){if(D.node.type===x)return f.liftListItem(S);if(yk(D.node.type.name,m)&&x.validContent(D.node.content)&&c)return d().command(()=>(o.setNodeMarkup(D.pos,x),!0)).command(()=>ky(o,x)).command(()=>Ty(o,x)).run()}return!n||!M||!c?d().command(()=>p().wrapInList(x,i)?!0:f.clearNodes()).wrapInList(x,i).command(()=>ky(o,x)).command(()=>Ty(o,x)).run():d().command(()=>{const _=p().wrapInList(x,i),P=M.filter(B=>g.includes(B.type.name));return o.ensureMarks(P),_?!0:f.clearNodes()}).wrapInList(x,i).command(()=>ky(o,x)).command(()=>Ty(o,x)).run()},AH=(t,e={},n={})=>({state:i,commands:r})=>{const{extendEmptyMarkRange:o=!1}=n,a=gr(t,i.schema);return V0(i,a,e)?r.unsetMark(a,{extendEmptyMarkRange:o}):r.setMark(a,e)},DH=(t,e,n={})=>({state:i,commands:r})=>{const o=jt(t,i.schema),a=jt(e,i.schema),c=ys(i,o,n);let d;return i.selection.$anchor.sameParent(i.selection.$head)&&(d=i.selection.$anchor.parent.attrs),c?r.setNode(a,d):r.setNode(o,{...d,...n})},OH=(t,e={})=>({state:n,commands:i})=>{const r=jt(t,n.schema);return ys(n,r,e)?i.lift(r):i.wrapIn(r,e)},RH=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let i=0;i<n.length;i+=1){const r=n[i];let o;if(r.spec.isInputRules&&(o=r.getState(t))){if(e){const a=t.tr,c=o.transform;for(let d=c.steps.length-1;d>=0;d-=1)a.step(c.steps[d].invert(c.docs[d]));if(o.text){const d=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,t.schema.text(o.text,d))}else a.delete(o.from,o.to)}return!0}}return!1},jH=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:i,ranges:r}=n;return i||e&&r.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},_H=(t,e={})=>({tr:n,state:i,dispatch:r})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:c}=n,d=gr(t,i.schema),{$from:f,empty:p,ranges:m}=c;if(!r)return!0;if(p&&a){let{from:g,to:x}=c;const S=(o=f.marks().find(E=>E.type===d))==null?void 0:o.attrs,w=yb(f,d,S);w&&(g=w.from,x=w.to),n.removeMark(g,x,d)}else m.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,d)});return n.removeStoredMark(d),!0},LH=(t,e={})=>({tr:n,state:i,dispatch:r})=>{let o=null,a=null;const c=ap(typeof t=="string"?t:t.name,i.schema);return c?(c==="node"&&(o=jt(t,i.schema)),c==="mark"&&(a=gr(t,i.schema)),r&&n.selection.ranges.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;let m,g,x,S;n.selection.empty?i.doc.nodesBetween(f,p,(w,E)=>{o&&o===w.type&&(x=Math.max(E,f),S=Math.min(E+w.nodeSize,p),m=E,g=w)}):i.doc.nodesBetween(f,p,(w,E)=>{E<f&&o&&o===w.type&&(x=Math.max(E,f),S=Math.min(E+w.nodeSize,p),m=E,g=w),E>=f&&E<=p&&(o&&o===w.type&&n.setNodeMarkup(E,void 0,{...w.attrs,...e}),a&&w.marks.length&&w.marks.forEach(C=>{if(a===C.type){const N=Math.max(E,f),k=Math.min(E+w.nodeSize,p);n.addMark(N,k,a.create({...C.attrs,...e}))}}))}),g&&(m!==void 0&&n.setNodeMarkup(m,void 0,{...g.attrs,...e}),a&&g.marks.length&&g.marks.forEach(w=>{a===w.type&&n.addMark(x,S,a.create({...w.attrs,...e}))}))}),!0):!1},zH=(t,e={})=>({state:n,dispatch:i})=>{const r=jt(t,n.schema);return KV(r,e)(n,i)},BH=(t,e={})=>({state:n,dispatch:i})=>{const r=jt(t,n.schema);return GV(r,e)(n,i)},PA=Tt.create({name:"commands",addCommands(){return{...zA}}}),VA=Tt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,i,r;const o=()=>{var a,c,d,f;if((f=(d=(c=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?f:t.getMeta("y-sync$"))return;const p=xA(t.before,[t,...e]);MA(p).forEach(x=>{p.mapping.mapResult(x.oldRange.from).deletedAfter&&p.mapping.mapResult(x.oldRange.to).deletedBefore&&p.before.nodesBetween(x.oldRange.from,x.oldRange.to,(S,w)=>{const E=w+S.nodeSize-2,C=x.oldRange.from<=w&&E<=x.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:w,to:E,newFrom:p.mapping.map(w),newTo:p.mapping.map(E),deletedRange:x.oldRange,newRange:x.newRange,partial:!C,editor:this.editor,transaction:t,combinedTransform:p})})});const g=p.mapping;p.steps.forEach((x,S)=>{var w,E;if(x instanceof di){const C=g.slice(S).map(x.from,-1),N=g.slice(S).map(x.to),k=g.invert().map(C,-1),M=g.invert().map(N),D=(w=p.doc.nodeAt(C-1))==null?void 0:w.marks.some(P=>P.eq(x.mark)),_=(E=p.doc.nodeAt(N))==null?void 0:E.marks.some(P=>P.eq(x.mark));this.editor.emit("delete",{type:"mark",mark:x.mark,from:x.from,to:x.to,deletedRange:{from:k,to:M},newRange:{from:C,to:N},partial:!!(_||D),editor:this.editor,transaction:t,combinedTransform:p})}})};(r=(i=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:i.async)==null||r?setTimeout(o,0):o()}}),IA=Tt.create({name:"drop",addProseMirrorPlugins(){return[new wt({key:new Yt("tiptapDrop"),props:{handleDrop:(t,e,n,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:i})}}})]}}),HA=Tt.create({name:"editable",addProseMirrorPlugins(){return[new wt({key:new Yt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),$A=new Yt("focusEvents"),UA=Tt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new wt({key:$A,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const i=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,n)=>{t.isFocused=!1;const i=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),FA=Tt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:c})=>{const{selection:d,doc:f}=c,{empty:p,$anchor:m}=d,{pos:g,parent:x}=m,S=m.parent.isTextblock&&g>0?c.doc.resolve(g-1):m,w=S.parent.type.spec.isolating,E=m.pos-m.parentOffset,C=w&&S.parent.childCount===1?E===m.pos:Be.atStart(f).from===g;return!p||!x.type.isTextblock||x.textContent.length||!C||C&&m.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},r={...i},o={...i,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return vb()||BA()?o:r},addProseMirrorPlugins(){return[new wt({key:new Yt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const i=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),r=t.some(w=>w.getMeta("preventClearDocument"));if(!i||r)return;const{empty:o,from:a,to:c}=e.selection,d=Be.atStart(e.doc).from,f=Be.atEnd(e.doc).to;if(o||!(a===d&&c===f)||!lp(n.doc))return;const g=n.tr,x=rp({state:n,transaction:g}),{commands:S}=new sp({editor:this.editor,state:x});if(S.clearNodes(),!!g.steps.length)return g}})]}}),qA=Tt.create({name:"paste",addProseMirrorPlugins(){return[new wt({key:new Yt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),YA=Tt.create({name:"tabindex",addProseMirrorPlugins(){return[new wt({key:new Yt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),PH=class xa{constructor(e,n,i=!1,r=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=n,this.currentNode=r}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:n,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new xa(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new xa(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new xa(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,i)=>{const r=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,a=this.pos+i+(o?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(a);if(!r&&c.depth<=this.depth)return;const d=new xa(c,this.editor,r,r?n:null);r&&(d.actualDepth=this.depth+1),e.push(new xa(c,this.editor,r,r?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let i=null,r=this.parent;for(;r&&!i;){if(r.node.type.name===e)if(Object.keys(n).length>0){const o=r.node.attrs,a=Object.keys(n);for(let c=0;c<a.length;c+=1){const d=a[c];if(o[d]!==n[d])break}}else i=r;r=r.parent}return i}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},i=!1){let r=[];if(!this.children||this.children.length===0)return r;const o=Object.keys(n);return this.children.forEach(a=>{i&&r.length>0||(a.node.type.name===e&&o.every(d=>n[d]===a.node.attrs[d])&&r.push(a),!(i&&r.length>0)&&(r=r.concat(a.querySelectorAll(e,n,i))))}),r}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},VH=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function IH(t,e,n){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.setAttribute("data-tiptap-style",""),r.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(r),r}var HH=class extends nI{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:i})=>{throw i},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:i,slice:r,moved:o})=>this.options.onDrop(i,r,o)),this.on("paste",({event:i,slice:r})=>this.options.onPaste(i,r)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=OA(e,this.options.autofocus);this.editorState=ka.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=IH(VH,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=vA(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(r=>{const o=typeof r=="string"?`${r}$`:r.key;n=n.filter(a=>!a.key.startsWith(o))}),e.length===n.length)return;const i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}createExtensionManager(){var t,e;const i=[...this.options.enableCoreExtensions?[HA,LA.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),PA,UA,FA,YA,IA,qA,VA].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r?.type));this.extensionManager=new up(i,this)}createCommandManager(){this.commandManager=new sp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=P0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=P0(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new iA(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),i=!this.state.selection.eq(e.selection),r=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!r)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const a=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),c=a?.getMeta("focus"),d=a?.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:a}),d&&this.emit("blur",{editor:this,event:d.event,transaction:a}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return TA(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,i=typeof t=="string"?e:t;return gI(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return pb(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return uI(this.state.doc,{blockSeparator:e,textSerializers:{...CA(this.schema),...n}})}get isEmpty(){return lp(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new PH(e,this)}get $doc(){return this.$pos(0)}};function Va(t){return new cp({find:t.find,handler:({state:e,range:n,match:i})=>{const r=et(t.getAttributes,void 0,i);if(r===!1||r===null)return null;const{tr:o}=e,a=i[i.length-1],c=i[0];if(a){const d=c.search(/\S/),f=n.from+c.indexOf(a),p=f+a.length;if(xb(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(w=>w===t.type&&w!==x.mark.type)).filter(x=>x.to>f).length)return null;p<n.to&&o.delete(p,n.to),f>n.from&&o.delete(n.from+d,f);const g=n.from+d+a.length;o.addMark(n.from+d,g,t.type.create(r||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function $H(t){return new cp({find:t.find,handler:({state:e,range:n,match:i})=>{const r=et(t.getAttributes,void 0,i)||{},{tr:o}=e,a=n.from;let c=n.to;const d=t.type.create(r);if(i[1]){const f=i[0].lastIndexOf(i[1]);let p=a+f;p>c?p=c:c=p+i[1].length;const m=i[0][i[0].length-1];o.insertText(m,a+i[0].length-1),o.replaceWith(p,c,d)}else if(i[0]){const f=t.type.isInline?a:a-1;o.insert(f,t.type.create(r)).delete(o.mapping.map(a),o.mapping.map(c))}o.scrollIntoView()},undoable:t.undoable})}function I0(t){return new cp({find:t.find,handler:({state:e,range:n,match:i})=>{const r=e.doc.resolve(n.from),o=et(t.getAttributes,void 0,i)||{};if(!r.node(-1).canReplaceWith(r.index(-1),r.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Ia(t){return new cp({find:t.find,handler:({state:e,range:n,match:i,chain:r})=>{const o=et(t.getAttributes,void 0,i)||{},a=e.tr.delete(n.from,n.to),d=a.doc.resolve(n.from).blockRange(),f=d&&Zx(d,t.type,o);if(!f)return null;if(a.wrap(d,f),t.keepMarks&&t.editor){const{selection:m,storedMarks:g}=e,{splittableMarks:x}=t.editor.extensionManager,S=g||m.$to.parentOffset&&m.$from.marks();if(S){const w=S.filter(E=>x.includes(E.type.name));a.ensureMarks(w)}}if(t.keepAttributes){const m=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";r().updateAttributes(m,o).run()}const p=a.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&vs(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(i,p))&&a.join(n.from-1)},undoable:t.undoable})}function UH(t,e){const{selection:n}=t,{$from:i}=n;if(n instanceof Ee){const o=i.index();return i.parent.canReplaceWith(o,o+1,e)}let r=i.depth;for(;r>=0;){const o=i.index(r);if(i.node(r).contentMatchAt(o).matchType(e))return!0;r-=1}return!1}function FH(t,e,n={}){const{state:i}=e,{doc:r,tr:o}=i,a=t;r.descendants((c,d)=>{const f=o.mapping.map(d),p=o.mapping.map(d)+c.nodeSize;let m=null;if(c.marks.forEach(x=>{if(x!==a)return!1;m=x}),!m)return;let g=!1;if(Object.keys(n).forEach(x=>{n[x]!==m.attrs[x]&&(g=!0)}),g){const x=t.type.create({...t.attrs,...n});o.removeMark(f,p,t.type),o.addMark(f,p,x)}}),o.docChanged&&e.view.dispatch(o)}var Bn=class KA extends bb{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new KA(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function go(t){return new CI({find:t.find,handler:({state:e,range:n,match:i,pasteEvent:r})=>{const o=et(t.getAttributes,void 0,i,r);if(o===!1||o===null)return null;const{tr:a}=e,c=i[i.length-1],d=i[0];let f=n.to;if(c){const p=d.search(/\S/),m=n.from+d.indexOf(c),g=m+c.length;if(xb(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(E=>E===t.type&&E!==S.mark.type)).filter(S=>S.to>m).length)return null;g<n.to&&a.delete(g,n.to),m>n.from&&a.delete(n.from+p,m),f=n.from+p+c.length,a.addMark(n.from+p,f,t.type.create(o||{})),a.removeStoredMark(t.type)}}})}var My,vk;function qH(){return vk||(vk=1,My=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;for(r of e.entries())if(!t(r[1],n.get(r[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(r of e.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(e[r]!==n[r])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){var a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}),My}var YH=qH();const KH=Ih(YH);var Ny={exports:{}},Ay={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sk;function GH(){if(Sk)return Ay;Sk=1;var t=lu(),e=$M();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,o=t.useRef,a=t.useEffect,c=t.useMemo,d=t.useDebugValue;return Ay.useSyncExternalStoreWithSelector=function(f,p,m,g,x){var S=o(null);if(S.current===null){var w={hasValue:!1,value:null};S.current=w}else w=S.current;S=c(function(){function C(_){if(!N){if(N=!0,k=_,_=g(_),x!==void 0&&w.hasValue){var P=w.value;if(x(P,_))return M=P}return M=_}if(P=M,i(k,_))return P;var B=g(_);return x!==void 0&&x(P,B)?(k=_,P):(k=_,M=B)}var N=!1,k,M,D=m===void 0?null:m;return[function(){return C(p())},D===null?void 0:function(){return C(D())}]},[p,m,g,x]);var E=r(f,S[0],S[1]);return a(function(){w.hasValue=!0,w.value=E},[E]),d(E),E},Ay}var wk;function XH(){return wk||(wk=1,Ny.exports=GH()),Ny.exports}var GA=XH();const WH=Ih(GA);var ZH=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},QH=({contentComponent:t})=>{const e=UM.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(e)})};function JH(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,i){e={...e,[n]:H2.createPortal(i.reactElement,i.element,n)},t.forEach(r=>r())},removeRenderer(n){const i={...e};delete i[n],e=i,t.forEach(r=>r())}}}var e8=class extends je.Component{constructor(t){var e;super(t),this.editorContentRef=je.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=JH(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:ZH(e,this.editorContentRef),...n}),t?.contentComponent&&v.jsx(QH,{contentComponent:t.contentComponent})]})}},t8=j.forwardRef((t,e)=>{const n=je.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return je.createElement(e8,{key:n,innerRef:e,...t})}),Ek=je.memo(t8),n8=typeof window<"u"?j.useLayoutEffect:j.useEffect,i8=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function r8(t){var e;const[n]=j.useState(()=>new i8(t.editor)),i=GA.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:KH);return n8(()=>n.watch(t.editor),[t.editor,n]),j.useDebugValue(i),i}var s8=!1,H0=typeof window>"u",o8=H0||!!(typeof window<"u"&&window.next),a8=class XA{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?H0||o8?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...i)=>{var r,o;return(o=(r=this.options.current).onBeforeCreate)==null?void 0:o.call(r,...i)},onBlur:(...i)=>{var r,o;return(o=(r=this.options.current).onBlur)==null?void 0:o.call(r,...i)},onCreate:(...i)=>{var r,o;return(o=(r=this.options.current).onCreate)==null?void 0:o.call(r,...i)},onDestroy:(...i)=>{var r,o;return(o=(r=this.options.current).onDestroy)==null?void 0:o.call(r,...i)},onFocus:(...i)=>{var r,o;return(o=(r=this.options.current).onFocus)==null?void 0:o.call(r,...i)},onSelectionUpdate:(...i)=>{var r,o;return(o=(r=this.options.current).onSelectionUpdate)==null?void 0:o.call(r,...i)},onTransaction:(...i)=>{var r,o;return(o=(r=this.options.current).onTransaction)==null?void 0:o.call(r,...i)},onUpdate:(...i)=>{var r,o;return(o=(r=this.options.current).onUpdate)==null?void 0:o.call(r,...i)},onContentError:(...i)=>{var r,o;return(o=(r=this.options.current).onContentError)==null?void 0:o.call(r,...i)},onDrop:(...i)=>{var r,o;return(o=(r=this.options.current).onDrop)==null?void 0:o.call(r,...i)},onPaste:(...i)=>{var r,o;return(o=(r=this.options.current).onPaste)==null?void 0:o.call(r,...i)},onDelete:(...i)=>{var r,o;return(o=(r=this.options.current).onDelete)==null?void 0:o.call(r,...i)}};return new HH(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(i=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(i)?!0:i==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((r,o)=>{var a;return r===((a=n.extensions)==null?void 0:a[o])}):e[i]===n[i])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?XA.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((i,r)=>i===e[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function l8(t={},e=[]){const n=j.useRef(t);n.current=t;const[i]=j.useState(()=>new a8(n)),r=UM.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return j.useDebugValue(r),j.useEffect(i.onRender(e)),r8({editor:r,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),r}var c8=j.createContext({editor:null});c8.Consumer;var u8=j.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),d8=()=>j.useContext(u8);je.forwardRef((t,e)=>{const{onDragStart:n}=d8(),i=t.as||"div";return v.jsx(i,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});je.createContext({markViewContentRef:()=>{}});var Jf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...i}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,i,n]},f8=/^\s*>\s$/,h8=Bn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Jf("blockquote",{...Rt(this.options.HTMLAttributes,t),children:Jf("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ia({find:f8,type:this.type})]}}),p8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,m8=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,g8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,y8=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,x8=ko.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Jf("strong",{...Rt(this.options.HTMLAttributes,t),children:Jf("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Va({find:p8,type:this.type}),Va({find:g8,type:this.type})]},addPasteRules(){return[go({find:m8,type:this.type}),go({find:y8,type:this.type})]}}),b8=/(^|[^`])`([^`]+)`(?!`)$/,v8=/(^|[^`])`([^`]+)`(?!`)/g,S8=ko.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Va({find:b8,type:this.type})]},addPasteRules(){return[go({find:v8,type:this.type})]}}),w8=/^```([a-z]+)?[\s\n]$/,E8=/^~~~([a-z]+)?[\s\n]$/,C8=Bn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Rt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:i,empty:r}=n;if(i.parent.type!==this.type)return!1;const o=" ".repeat(this.options.tabSize);return r?t.commands.insertContent(o):t.commands.command(({tr:a})=>{const{from:c,to:d}=n,m=e.doc.textBetween(c,d,`
`,`
`).split(`
`).map(g=>o+g).join(`
`);return a.replaceWith(c,d,e.schema.text(m)),!0})},"Shift-Tab":({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:i,empty:r}=n;return i.parent.type!==this.type?!1:r?t.commands.command(({tr:o})=>{var a;const{pos:c}=i,d=i.start(),f=i.end(),m=e.doc.textBetween(d,f,`
`,`
`).split(`
`);let g=0,x=0;const S=c-d;for(let M=0;M<m.length;M+=1){if(x+m[M].length>=S){g=M;break}x+=m[M].length+1}const E=((a=m[g].match(/^ */))==null?void 0:a[0])||"",C=Math.min(E.length,this.options.tabSize);if(C===0)return!0;let N=d;for(let M=0;M<g;M+=1)N+=m[M].length+1;return o.delete(N,N+C),c-N<=C&&o.setSelection(_e.create(o.doc,N)),!0}):t.commands.command(({tr:o})=>{const{from:a,to:c}=n,p=e.doc.textBetween(a,c,`
`,`
`).split(`
`).map(m=>{var g;const x=((g=m.match(/^ */))==null?void 0:g[0])||"",S=Math.min(x.length,this.options.tabSize);return m.slice(S)}).join(`
`);return o.replaceWith(a,c,e.schema.text(p)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:i,empty:r}=n;if(!r||i.parent.type!==this.type)return!1;const o=i.parentOffset===i.parent.nodeSize-2,a=i.parent.textContent.endsWith(`

`);return!o||!a?!1:t.chain().command(({tr:c})=>(c.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:i}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const c=r.after();return c===void 0?!1:i.nodeAt(c)?t.commands.command(({tr:f})=>(f.setSelection(Be.near(i.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[I0({find:w8,type:this.type,getAttributes:t=>({language:t[1]})}),I0({find:E8,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new wt({key:new Yt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),r=i?JSON.parse(i):void 0,o=r?.mode;if(!n||!o)return!1;const{tr:a,schema:c}=t.state,d=c.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:o},d)),a.selection.$from.parent.type!==this.type&&a.setSelection(_e.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),k8=Bn.create({name:"doc",topNode:!0,content:"block+"}),T8=Bn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Rt(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:i})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:r,storedMarks:o}=n;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=i.extensionManager,d=o||r.$to.parentOffset&&r.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&d&&a){const m=d.filter(g=>c.includes(g.type.name));f.ensureMarks(m)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),WA=Bn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>I0({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),M8=WA,N8=Bn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Rt(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!UH(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:i}=n,r=t();return AA(n)?r.insertContentAt(i.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:o,dispatch:a})=>{var c;if(a){const{$to:d}=o.selection,f=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?o.setSelection(_e.create(o.doc,d.pos+1)):d.nodeAfter.isBlock?o.setSelection(Ee.create(o.doc,d.pos)):o.setSelection(_e.create(o.doc,d.pos));else{const p=(c=d.parent.type.contentMatch.defaultType)==null?void 0:c.create();p&&(o.insert(f,p),o.setSelection(_e.create(o.doc,f+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[$H({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),A8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,D8=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,O8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,R8=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,j8=ko.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Va({find:A8,type:this.type}),Va({find:O8,type:this.type})]},addPasteRules(){return[go({find:D8,type:this.type}),go({find:R8,type:this.type})]}});const _8="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",L8="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",$0="numeric",U0="ascii",F0="alpha",kc="asciinumeric",hc="alphanumeric",q0="domain",ZA="emoji",z8="scheme",B8="slashscheme",Dy="whitespace";function P8(t,e){return t in e||(e[t]=[]),e[t]}function Js(t,e,n){e[$0]&&(e[kc]=!0,e[hc]=!0),e[U0]&&(e[kc]=!0,e[F0]=!0),e[kc]&&(e[hc]=!0),e[F0]&&(e[hc]=!0),e[hc]&&(e[q0]=!0),e[ZA]&&(e[q0]=!0);for(const i in e){const r=P8(i,n);r.indexOf(t)<0&&r.push(t)}}function V8(t,e){const n={};for(const i in e)e[i].indexOf(t)>=0&&(n[i]=!0);return n}function vn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}vn.groups={};vn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let i=0;i<e.jr.length;i++){const r=e.jr[i][0],o=e.jr[i][1];if(o&&r.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,i){for(let r=0;r<t.length;r++)this.tt(t[r],e,n,i)},tr(t,e,n,i){i=i||vn.groups;let r;return e&&e.j?r=e:(r=new vn(e),n&&i&&Js(e,n,i)),this.jr.push([t,r]),r},ts(t,e,n,i){let r=this;const o=t.length;if(!o)return r;for(let a=0;a<o-1;a++)r=r.tt(t[a]);return r.tt(t[o-1],e,n,i)},tt(t,e,n,i){i=i||vn.groups;const r=this;if(e&&e.j)return r.j[t]=e,e;const o=e;let a,c=r.go(t);if(c?(a=new vn,Object.assign(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new vn,o){if(i)if(a.t&&typeof a.t=="string"){const d=Object.assign(V8(a.t,i),n);Js(o,d,i)}else n&&Js(o,n,i);a.t=o}return r.j[t]=a,a}};const Pe=(t,e,n,i,r)=>t.ta(e,n,i,r),bt=(t,e,n,i,r)=>t.tr(e,n,i,r),Ck=(t,e,n,i,r)=>t.ts(e,n,i,r),de=(t,e,n,i,r)=>t.tt(e,n,i,r),or="WORD",Y0="UWORD",QA="ASCIINUMERICAL",JA="ALPHANUMERICAL",Wc="LOCALHOST",K0="TLD",G0="UTLD",Ef="SCHEME",ba="SLASH_SCHEME",Sb="NUM",X0="WS",wb="NL",Tc="OPENBRACE",Mc="CLOSEBRACE",eh="OPENBRACKET",th="CLOSEBRACKET",nh="OPENPAREN",ih="CLOSEPAREN",rh="OPENANGLEBRACKET",sh="CLOSEANGLEBRACKET",oh="FULLWIDTHLEFTPAREN",ah="FULLWIDTHRIGHTPAREN",lh="LEFTCORNERBRACKET",ch="RIGHTCORNERBRACKET",uh="LEFTWHITECORNERBRACKET",dh="RIGHTWHITECORNERBRACKET",fh="FULLWIDTHLESSTHAN",hh="FULLWIDTHGREATERTHAN",ph="AMPERSAND",mh="APOSTROPHE",gh="ASTERISK",Zr="AT",yh="BACKSLASH",xh="BACKTICK",bh="CARET",es="COLON",Eb="COMMA",vh="DOLLAR",Si="DOT",Sh="EQUALS",Cb="EXCLAMATION",Gn="HYPHEN",Nc="PERCENT",wh="PIPE",Eh="PLUS",Ch="POUND",Ac="QUERY",kb="QUOTE",eD="FULLWIDTHMIDDLEDOT",Tb="SEMI",wi="SLASH",Dc="TILDE",kh="UNDERSCORE",tD="EMOJI",Th="SYM";var nD=Object.freeze({__proto__:null,ALPHANUMERICAL:JA,AMPERSAND:ph,APOSTROPHE:mh,ASCIINUMERICAL:QA,ASTERISK:gh,AT:Zr,BACKSLASH:yh,BACKTICK:xh,CARET:bh,CLOSEANGLEBRACKET:sh,CLOSEBRACE:Mc,CLOSEBRACKET:th,CLOSEPAREN:ih,COLON:es,COMMA:Eb,DOLLAR:vh,DOT:Si,EMOJI:tD,EQUALS:Sh,EXCLAMATION:Cb,FULLWIDTHGREATERTHAN:hh,FULLWIDTHLEFTPAREN:oh,FULLWIDTHLESSTHAN:fh,FULLWIDTHMIDDLEDOT:eD,FULLWIDTHRIGHTPAREN:ah,HYPHEN:Gn,LEFTCORNERBRACKET:lh,LEFTWHITECORNERBRACKET:uh,LOCALHOST:Wc,NL:wb,NUM:Sb,OPENANGLEBRACKET:rh,OPENBRACE:Tc,OPENBRACKET:eh,OPENPAREN:nh,PERCENT:Nc,PIPE:wh,PLUS:Eh,POUND:Ch,QUERY:Ac,QUOTE:kb,RIGHTCORNERBRACKET:ch,RIGHTWHITECORNERBRACKET:dh,SCHEME:Ef,SEMI:Tb,SLASH:wi,SLASH_SCHEME:ba,SYM:Th,TILDE:Dc,TLD:K0,UNDERSCORE:kh,UTLD:G0,UWORD:Y0,WORD:or,WS:X0});const ir=/[a-z]/,oc=new RegExp("\\p{L}","u"),Oy=new RegExp("\\p{Emoji}","u"),rr=/\d/,Ry=/\s/,kk="\r",jy=`
`,I8="️",H8="‍",_y="￼";let tf=null,nf=null;function $8(t=[]){const e={};vn.groups=e;const n=new vn;tf==null&&(tf=Tk(_8)),nf==null&&(nf=Tk(L8)),de(n,"'",mh),de(n,"{",Tc),de(n,"}",Mc),de(n,"[",eh),de(n,"]",th),de(n,"(",nh),de(n,")",ih),de(n,"<",rh),de(n,">",sh),de(n,"（",oh),de(n,"）",ah),de(n,"「",lh),de(n,"」",ch),de(n,"『",uh),de(n,"』",dh),de(n,"＜",fh),de(n,"＞",hh),de(n,"&",ph),de(n,"*",gh),de(n,"@",Zr),de(n,"`",xh),de(n,"^",bh),de(n,":",es),de(n,",",Eb),de(n,"$",vh),de(n,".",Si),de(n,"=",Sh),de(n,"!",Cb),de(n,"-",Gn),de(n,"%",Nc),de(n,"|",wh),de(n,"+",Eh),de(n,"#",Ch),de(n,"?",Ac),de(n,'"',kb),de(n,"/",wi),de(n,";",Tb),de(n,"~",Dc),de(n,"_",kh),de(n,"\\",yh),de(n,"・",eD);const i=bt(n,rr,Sb,{[$0]:!0});bt(i,rr,i);const r=bt(i,ir,QA,{[kc]:!0}),o=bt(i,oc,JA,{[hc]:!0}),a=bt(n,ir,or,{[U0]:!0});bt(a,rr,r),bt(a,ir,a),bt(r,rr,r),bt(r,ir,r);const c=bt(n,oc,Y0,{[F0]:!0});bt(c,ir),bt(c,rr,o),bt(c,oc,c),bt(o,rr,o),bt(o,ir),bt(o,oc,o);const d=de(n,jy,wb,{[Dy]:!0}),f=de(n,kk,X0,{[Dy]:!0}),p=bt(n,Ry,X0,{[Dy]:!0});de(n,_y,p),de(f,jy,d),de(f,_y,p),bt(f,Ry,p),de(p,kk),de(p,jy),bt(p,Ry,p),de(p,_y,p);const m=bt(n,Oy,tD,{[ZA]:!0});de(m,"#"),bt(m,Oy,m),de(m,I8,m);const g=de(m,H8);de(g,"#"),bt(g,Oy,m);const x=[[ir,a],[rr,r]],S=[[ir,null],[oc,c],[rr,o]];for(let w=0;w<tf.length;w++)qr(n,tf[w],K0,or,x);for(let w=0;w<nf.length;w++)qr(n,nf[w],G0,Y0,S);Js(K0,{tld:!0,ascii:!0},e),Js(G0,{utld:!0,alpha:!0},e),qr(n,"file",Ef,or,x),qr(n,"mailto",Ef,or,x),qr(n,"http",ba,or,x),qr(n,"https",ba,or,x),qr(n,"ftp",ba,or,x),qr(n,"ftps",ba,or,x),Js(Ef,{scheme:!0,ascii:!0},e),Js(ba,{slashscheme:!0,ascii:!0},e),t=t.sort((w,E)=>w[0]>E[0]?1:-1);for(let w=0;w<t.length;w++){const E=t[w][0],N=t[w][1]?{[z8]:!0}:{[B8]:!0};E.indexOf("-")>=0?N[q0]=!0:ir.test(E)?rr.test(E)?N[kc]=!0:N[U0]=!0:N[$0]=!0,Ck(n,E,E,N)}return Ck(n,"localhost",Wc,{ascii:!0}),n.jd=new vn(Th),{start:n,tokens:Object.assign({groups:e},nD)}}function iD(t,e){const n=U8(e.replace(/[A-Z]/g,c=>c.toLowerCase())),i=n.length,r=[];let o=0,a=0;for(;a<i;){let c=t,d=null,f=0,p=null,m=-1,g=-1;for(;a<i&&(d=c.go(n[a]));)c=d,c.accepts()?(m=0,g=0,p=c):m>=0&&(m+=n[a].length,g++),f+=n[a].length,o+=n[a].length,a++;o-=m,a-=g,f-=m,r.push({t:p.t,v:e.slice(o-f,o),s:o-f,e:o})}return r}function U8(t){const e=[],n=t.length;let i=0;for(;i<n;){let r=t.charCodeAt(i),o,a=r<55296||r>56319||i+1===n||(o=t.charCodeAt(i+1))<56320||o>57343?t[i]:t.slice(i,i+2);e.push(a),i+=a.length}return e}function qr(t,e,n,i,r){let o;const a=e.length;for(let c=0;c<a-1;c++){const d=e[c];t.j[d]?o=t.j[d]:(o=new vn(i),o.jr=r.slice(),t.j[d]=o),t=o}return o=new vn(n),o.jr=r.slice(),t.j[e[a-1]]=o,o}function Tk(t){const e=[],n=[];let i=0,r="0123456789";for(;i<t.length;){let o=0;for(;r.indexOf(t[i+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let a=parseInt(t.substring(i,i+o),10);a>0;a--)n.pop();i+=o}else n.push(t[i]),i++}return e}const Zc={defaultProtocol:"http",events:null,format:Mk,formatHref:Mk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Mb(t,e=null){let n=Object.assign({},Zc);t&&(n=Object.assign(n,t instanceof Mb?t.o:t));const i=n.ignoreTags,r=[];for(let o=0;o<i.length;o++)r.push(i[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=r}Mb.prototype={o:Zc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const i=e!=null;let r=this.o[t];return r&&(typeof r=="object"?(r=n.t in r?r[n.t]:Zc[t],typeof r=="function"&&i&&(r=r(e,n))):typeof r=="function"&&i&&(r=r(e,n.t,n)),r)},getObj(t,e,n){let i=this.o[t];return typeof i=="function"&&e!=null&&(i=i(e,n.t,n)),i},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Mk(t){return t}function rD(t,e){this.t="token",this.v=t,this.tk=e}rD.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),i=t.get("format",e,this);return n&&i.length>n?i.substring(0,n)+"…":i},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Zc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),i=t.get("formatHref",n,this),r=t.get("tagName",n,e),o=this.toFormattedString(t),a={},c=t.get("className",n,e),d=t.get("target",n,e),f=t.get("rel",n,e),p=t.getObj("attributes",n,e),m=t.getObj("events",n,e);return a.href=i,c&&(a.class=c),d&&(a.target=d),f&&(a.rel=f),p&&Object.assign(a,p),{tagName:r,attributes:a,content:o,eventListeners:m}}};function dp(t,e){class n extends rD{constructor(r,o){super(r,o),this.t=t}}for(const i in e)n.prototype[i]=e[i];return n.t=t,n}const Nk=dp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ak=dp("text"),F8=dp("nl"),rf=dp("url",{isLink:!0,toHref(t=Zc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Wc&&t[1].t===es}}),Yn=t=>new vn(t);function q8({groups:t}){const e=t.domain.concat([ph,gh,Zr,yh,xh,bh,vh,Sh,Gn,Sb,Nc,wh,Eh,Ch,wi,Th,Dc,kh]),n=[mh,es,Eb,Si,Cb,Nc,Ac,kb,Tb,rh,sh,Tc,Mc,th,eh,nh,ih,oh,ah,lh,ch,uh,dh,fh,hh],i=[ph,mh,gh,yh,xh,bh,vh,Sh,Gn,Tc,Mc,Nc,wh,Eh,Ch,Ac,wi,Th,Dc,kh],r=Yn(),o=de(r,Dc);Pe(o,i,o),Pe(o,t.domain,o);const a=Yn(),c=Yn(),d=Yn();Pe(r,t.domain,a),Pe(r,t.scheme,c),Pe(r,t.slashscheme,d),Pe(a,i,o),Pe(a,t.domain,a);const f=de(a,Zr);de(o,Zr,f),de(c,Zr,f),de(d,Zr,f);const p=de(o,Si);Pe(p,i,o),Pe(p,t.domain,o);const m=Yn();Pe(f,t.domain,m),Pe(m,t.domain,m);const g=de(m,Si);Pe(g,t.domain,m);const x=Yn(Nk);Pe(g,t.tld,x),Pe(g,t.utld,x),de(f,Wc,x);const S=de(m,Gn);de(S,Gn,S),Pe(S,t.domain,m),Pe(x,t.domain,m),de(x,Si,g),de(x,Gn,S);const w=de(x,es);Pe(w,t.numeric,Nk);const E=de(a,Gn),C=de(a,Si);de(E,Gn,E),Pe(E,t.domain,a),Pe(C,i,o),Pe(C,t.domain,a);const N=Yn(rf);Pe(C,t.tld,N),Pe(C,t.utld,N),Pe(N,t.domain,a),Pe(N,i,o),de(N,Si,C),de(N,Gn,E),de(N,Zr,f);const k=de(N,es),M=Yn(rf);Pe(k,t.numeric,M);const D=Yn(rf),_=Yn();Pe(D,e,D),Pe(D,n,_),Pe(_,e,D),Pe(_,n,_),de(N,wi,D),de(M,wi,D);const P=de(c,es),B=de(d,es),I=de(B,wi),ee=de(I,wi);Pe(c,t.domain,a),de(c,Si,C),de(c,Gn,E),Pe(d,t.domain,a),de(d,Si,C),de(d,Gn,E),Pe(P,t.domain,D),de(P,wi,D),de(P,Ac,D),Pe(ee,t.domain,D),Pe(ee,e,D),de(ee,wi,D);const K=[[Tc,Mc],[eh,th],[nh,ih],[rh,sh],[oh,ah],[lh,ch],[uh,dh],[fh,hh]];for(let W=0;W<K.length;W++){const[ne,z]=K[W],U=de(D,ne);de(_,ne,U),de(U,z,D);const R=Yn(rf);Pe(U,e,R);const L=Yn();Pe(U,n),Pe(R,e,R),Pe(R,n,L),Pe(L,e,R),Pe(L,n,L),de(R,z,D),de(L,z,D)}return de(r,Wc,N),de(r,wb,F8),{start:r,tokens:nD}}function Y8(t,e,n){let i=n.length,r=0,o=[],a=[];for(;r<i;){let c=t,d=null,f=null,p=0,m=null,g=-1;for(;r<i&&!(d=c.go(n[r].t));)a.push(n[r++]);for(;r<i&&(f=d||c.go(n[r].t));)d=null,c=f,c.accepts()?(g=0,m=c):g>=0&&g++,r++,p++;if(g<0)r-=p,r<i&&(a.push(n[r]),r++);else{a.length>0&&(o.push(Ly(Ak,e,a)),a=[]),r-=g,p-=g;const x=m.t,S=n.slice(r-p,r);o.push(Ly(x,e,S))}}return a.length>0&&o.push(Ly(Ak,e,a)),o}function Ly(t,e,n){const i=n[0].s,r=n[n.length-1].e,o=e.slice(i,r);return new t(o,n)}const K8=typeof console<"u"&&console&&console.warn||(()=>{}),G8="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",at={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function X8(){return vn.groups={},at.scanner=null,at.parser=null,at.tokenQueue=[],at.pluginQueue=[],at.customSchemes=[],at.initialized=!1,at}function Dk(t,e=!1){if(at.initialized&&K8(`linkifyjs: already initialized - will not register custom scheme "${t}" ${G8}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);at.customSchemes.push([t,e])}function W8(){at.scanner=$8(at.customSchemes);for(let t=0;t<at.tokenQueue.length;t++)at.tokenQueue[t][1]({scanner:at.scanner});at.parser=q8(at.scanner.tokens);for(let t=0;t<at.pluginQueue.length;t++)at.pluginQueue[t][1]({scanner:at.scanner,parser:at.parser});return at.initialized=!0,at}function Nb(t){return at.initialized||W8(),Y8(at.parser.start,t,iD(at.scanner.start,t))}Nb.scan=iD;function sD(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const i=new Mb(n),r=Nb(t),o=[];for(let a=0;a<r.length;a++){const c=r[a];c.isLink&&(!e||c.t===e)&&i.check(c)&&o.push(c.toFormattedObject(i))}return o}var Ab="[\0-   ᠎ -\u2029 　]",Z8=new RegExp(Ab),Q8=new RegExp(`${Ab}$`),J8=new RegExp(Ab,"g");function e9(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function t9(t){return new wt({key:new Yt("autolink"),appendTransaction:(e,n,i)=>{const r=e.some(f=>f.docChanged)&&!n.doc.eq(i.doc),o=e.some(f=>f.getMeta("preventAutolink"));if(!r||o)return;const{tr:a}=i,c=xA(n.doc,[...e]);if(MA(c).forEach(({newRange:f})=>{const p=rI(i.doc,f,x=>x.isTextblock);let m,g;if(p.length>1)m=p[0],g=i.doc.textBetween(m.pos,m.pos+m.node.nodeSize,void 0," ");else if(p.length){const x=i.doc.textBetween(f.from,f.to," "," ");if(!Q8.test(x))return;m=p[0],g=i.doc.textBetween(m.pos,f.to,void 0," ")}if(m&&g){const x=g.split(Z8).filter(Boolean);if(x.length<=0)return!1;const S=x[x.length-1],w=m.pos+g.lastIndexOf(S);if(!S)return!1;const E=Nb(S).map(C=>C.toObject(t.defaultProtocol));if(!e9(E))return!1;E.filter(C=>C.isLink).map(C=>({...C,from:w+C.start+1,to:w+C.end+1})).filter(C=>i.schema.marks.code?!i.doc.rangeHasMark(C.from,C.to,i.schema.marks.code):!0).filter(C=>t.validate(C.value)).filter(C=>t.shouldAutoLink(C.value)).forEach(C=>{xb(C.from,C.to,i.doc).some(N=>N.mark.type===t.type)||a.addMark(C.from,C.to,t.type.create({href:C.href}))})}}),!!a.steps.length)return a}})}function n9(t){return new wt({key:new Yt("handleClickLink"),props:{handleClick:(e,n,i)=>{var r,o;if(i.button!==0||!e.editable)return!1;let a=null;if(i.target instanceof HTMLAnchorElement)a=i.target;else{let p=i.target;const m=[];for(;p.nodeName!=="DIV";)m.push(p),p=p.parentNode;a=m.find(g=>g.nodeName==="A")}if(!a)return!1;const c=TA(e.state,t.type.name),d=(r=a?.href)!=null?r:c.href,f=(o=a?.target)!=null?o:c.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),a&&d?(window.open(d,f),!0):!1}}})}function i9(t){return new wt({key:new Yt("handlePasteLink"),props:{handlePaste:(e,n,i)=>{const{state:r}=e,{selection:o}=r,{empty:a}=o;if(a)return!1;let c="";i.content.forEach(f=>{c+=f.textContent});const d=sD(c,{defaultProtocol:t.defaultProtocol}).find(f=>f.isLink&&f.value===c);return!c||!d?!1:t.editor.commands.setMark(t.type,{href:d.href})}}})}function Us(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(i=>{const r=typeof i=="string"?i:i.scheme;r&&n.push(r)}),!t||t.replace(J8,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var oD=ko.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Dk(t);return}Dk(t.scheme,t.optionalSlashes)})},onDestroy(){X8()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Us(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Us(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Us(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Rt(this.options.HTMLAttributes,t),0]:["a",Rt(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:i=>!!Us(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:i=>!!Us(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[go({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:i}=this.options,r=sD(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:a=>!!Us(a,n),protocols:n,defaultProtocol:i}));r.length&&r.forEach(o=>e.push({text:o.value,data:{href:o.href},index:o.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(t9({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:i=>this.options.isAllowedUri(i,{defaultValidate:r=>!!Us(r,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(n9({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(i9({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),r9=oD,s9=Object.defineProperty,o9=(t,e)=>{for(var n in e)s9(t,n,{get:e[n],enumerable:!0})},a9="listItem",Ok="textStyle",Rk=/^\s*([-+*])\s$/,Db=Bn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(a9,this.editor.getAttributes(Ok)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ia({find:Rk,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ia({find:Rk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ok),editor:this.editor})),[t]}}),Ob=Bn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Rt(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),l9={};o9(l9,{findListItemPos:()=>gu,getNextListDepth:()=>Rb,handleBackspace:()=>W0,handleDelete:()=>Z0,hasListBefore:()=>aD,hasListItemAfter:()=>c9,hasListItemBefore:()=>lD,listItemHasSubList:()=>cD,nextListIsDeeper:()=>uD,nextListIsHigher:()=>dD});var gu=(t,e)=>{const{$from:n}=e.selection,i=jt(t,e.schema);let r=null,o=n.depth,a=n.pos,c=null;for(;o>0&&c===null;)r=n.node(o),r.type===i?c=o:(o-=1,a-=1);return c===null?null:{$pos:e.doc.resolve(a),depth:c}},Rb=(t,e)=>{const n=gu(t,e);if(!n)return!1;const[,i]=pI(e,t,n.$pos.pos+4);return i},aD=(t,e,n)=>{const{$anchor:i}=t.selection,r=Math.max(0,i.pos-2),o=t.doc.resolve(r).node();return!(!o||!n.includes(o.type.name))},lD=(t,e)=>{var n;const{$anchor:i}=e.selection,r=e.doc.resolve(i.pos-2);return!(r.index()===0||((n=r.nodeBefore)==null?void 0:n.type.name)!==t)},cD=(t,e,n)=>{if(!n)return!1;const i=jt(t,e.schema);let r=!1;return n.descendants(o=>{o.type===i&&(r=!0)}),r},W0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ys(t.state,e)&&aD(t.state,e,n)){const{$anchor:c}=t.state.selection,d=t.state.doc.resolve(c.before()-1),f=[];d.node().descendants((g,x)=>{g.type.name===e&&f.push({node:g,pos:x})});const p=f.at(-1);if(!p)return!1;const m=t.state.doc.resolve(d.start()+p.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},m.end()).joinForward().run()}if(!ys(t.state,e)||!xI(t.state))return!1;const i=gu(e,t.state);if(!i)return!1;const o=t.state.doc.resolve(i.$pos.pos-2).node(i.depth),a=cD(e,t.state,o);return lD(e,t.state)&&!a?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},uD=(t,e)=>{const n=Rb(t,e),i=gu(t,e);return!i||!n?!1:n>i.depth},dD=(t,e)=>{const n=Rb(t,e),i=gu(t,e);return!i||!n?!1:n<i.depth},Z0=(t,e)=>{if(!ys(t.state,e)||!yI(t.state,e))return!1;const{selection:n}=t.state,{$from:i,$to:r}=n;return!n.empty&&i.sameParent(r)?!1:uD(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():dD(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},c9=(t,e)=>{var n;const{$anchor:i}=e.selection,r=e.doc.resolve(i.pos-i.parentOffset-2);return!(r.index()===r.parent.childCount-1||((n=r.nodeAfter)==null?void 0:n.type.name)!==t)},fD=Tt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Z0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Z0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:i})=>{t.state.schema.nodes[n]!==void 0&&W0(t,n,i)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:i})=>{t.state.schema.nodes[n]!==void 0&&W0(t,n,i)&&(e=!0)}),e}}}}),u9="listItem",jk="textStyle",_k=/^(\d+)\.\s$/,jb=Bn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Rt(this.options.HTMLAttributes,n),0]:["ol",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(u9,this.editor.getAttributes(jk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ia({find:_k,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ia({find:_k,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(jk)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),d9=/^\s*(\[([( |x])?\])\s$/,f9=Bn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Rt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:i})=>{const r=document.createElement("li"),o=document.createElement("label"),a=document.createElement("span"),c=document.createElement("input"),d=document.createElement("div"),f=p=>{var m,g;c.ariaLabel=((g=(m=this.options.a11y)==null?void 0:m.checkboxLabel)==null?void 0:g.call(m,p,c.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};return f(t),o.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",p=>p.preventDefault()),c.addEventListener("change",p=>{if(!i.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:m}=p.target;i.isEditable&&typeof n=="function"&&i.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const x=n();if(typeof x!="number")return!1;const S=g.doc.nodeAt(x);return g.setNodeMarkup(x,void 0,{...S?.attrs,checked:m}),!0}).run(),!i.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,m)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,m])=>{r.setAttribute(p,m)}),r.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,o.append(c,a),r.append(o,d),Object.entries(e).forEach(([p,m])=>{r.setAttribute(p,m)}),{dom:r,contentDOM:d,update:p=>p.type!==this.type?!1:(r.dataset.checked=p.attrs.checked,c.checked=p.attrs.checked,f(p),!0)}}},addInputRules(){return[Ia({find:d9,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),h9=Bn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Rt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Tt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Db.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Ob.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(fD.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(jb.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(f9.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(h9.configure(this.options.taskList)),t}});var p9=Bn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),m9=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,g9=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,y9=ko.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Va({find:m9,type:this.type})]},addPasteRules(){return[go({find:g9,type:this.type})]}}),x9=Bn.create({name:"text",group:"inline"}),hD=ko.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),b9=hD;function v9(t={}){return new wt({view(e){return new S9(e,t)}})}class S9{constructor(e,n){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=n.width)!==null&&i!==void 0?i:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let o=a=>{this[r](a)};return e.dom.addEventListener(r,o),{name:r,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,i,r=this.editorView.dom,o=r.getBoundingClientRect(),a=o.width/r.offsetWidth,c=o.height/r.offsetHeight;if(n){let m=e.nodeBefore,g=e.nodeAfter;if(m||g){let x=this.editorView.nodeDOM(this.cursorPos-(m?m.nodeSize:0));if(x){let S=x.getBoundingClientRect(),w=m?S.bottom:S.top;m&&g&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*c;i={left:S.left,right:S.right,top:w-E,bottom:w+E}}}}if(!i){let m=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*a;i={left:m.left-g,right:m.left+g,top:m.top,bottom:m.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")f=-pageXOffset,p=-pageYOffset;else{let m=d.getBoundingClientRect(),g=m.width/d.offsetWidth,x=m.height/d.offsetHeight;f=m.left-d.scrollLeft*g,p=m.top-d.scrollTop*x}this.element.style.left=(i.left-f)/a+"px",this.element.style.top=(i.top-p)/c+"px",this.element.style.width=(i.right-i.left)/a+"px",this.element.style.height=(i.bottom-i.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),r=i&&i.type.spec.disableDropCursor,o=typeof r=="function"?r(this.editorView,n,e):r;if(n&&!o){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=gN(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class St extends Be{constructor(e){super(e,e)}map(e,n){let i=e.resolve(n.map(this.head));return St.valid(i)?new St(i):Be.near(i)}content(){return ge.empty}eq(e){return e instanceof St&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new St(e.resolve(n.pos))}getBookmark(){return new _b(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!w9(e)||!E9(e))return!1;let i=n.type.spec.allowGapCursor;if(i!=null)return i;let r=n.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,n,i=!1){e:for(;;){if(!i&&St.valid(e))return e;let r=e.pos,o=null;for(let a=e.depth;;a--){let c=e.node(a);if(n>0?e.indexAfter(a)<c.childCount:e.index(a)>0){o=c.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;r+=n;let d=e.doc.resolve(r);if(St.valid(d))return d}for(;;){let a=n>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!Ee.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*n),i=!1;continue e}break}o=a,r+=n;let c=e.doc.resolve(r);if(St.valid(c))return c}return null}}}St.prototype.visible=!1;St.findFrom=St.findGapCursorFrom;Be.jsonID("gapcursor",St);class _b{constructor(e){this.pos=e}map(e){return new _b(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return St.valid(n)?new St(n):Be.near(n)}}function w9(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),i=t.node(e);if(n==0){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(n-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function E9(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),i=t.node(e);if(n==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let r=i.child(n);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function C9(){return new wt({props:{decorations:N9,createSelectionBetween(t,e,n){return e.pos==n.pos&&St.valid(n)?new St(n):null},handleClick:T9,handleKeyDown:k9,handleDOMEvents:{beforeinput:M9}}})}const k9=rA({ArrowLeft:sf("horiz",-1),ArrowRight:sf("horiz",1),ArrowUp:sf("vert",-1),ArrowDown:sf("vert",1)});function sf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,r,o){let a=i.selection,c=e>0?a.$to:a.$from,d=a.empty;if(a instanceof _e){if(!o.endOfTextblock(n)||c.depth==0)return!1;d=!1,c=i.doc.resolve(e>0?c.after():c.before())}let f=St.findGapCursorFrom(c,e,d);return f?(r&&r(i.tr.setSelection(new St(f))),!0):!1}}function T9(t,e,n){if(!t||!t.editable)return!1;let i=t.state.doc.resolve(e);if(!St.valid(i))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return r&&r.inside>-1&&Ee.isSelectable(t.state.doc.nodeAt(r.inside))?!1:(t.dispatch(t.state.tr.setSelection(new St(i))),!0)}function M9(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof St))return!1;let{$from:n}=t.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!i)return!1;let r=ue.empty;for(let a=i.length-1;a>=0;a--)r=ue.from(i[a].createAndFill(null,r));let o=t.state.tr.replace(n.pos,n.pos,new ge(r,0,0));return o.setSelection(_e.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function N9(t){if(!(t.selection instanceof St))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",pt.create(t.doc,[un.widget(t.selection.head,e,{key:"gapcursor"})])}var Mh=200,qt=function(){};qt.prototype.append=function(e){return e.length?(e=qt.from(e),!this.length&&e||e.length<Mh&&this.leafAppend(e)||this.length<Mh&&e.leafPrepend(this)||this.appendInner(e)):this};qt.prototype.prepend=function(e){return e.length?qt.from(e).append(this):this};qt.prototype.appendInner=function(e){return new A9(this,e)};qt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?qt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};qt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};qt.prototype.forEach=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)};qt.prototype.map=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(o,a){return r.push(e(o,a))},n,i),r};qt.from=function(e){return e instanceof qt?e:e&&e.length?new pD(e):qt.empty};var pD=(function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,a,c){for(var d=o;d<a;d++)if(r(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,a,c){for(var d=o-1;d>=a;d--)if(r(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=Mh)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=Mh)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(qt);qt.empty=new pD([]);var A9=(function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,o,a){var c=this.left.length;if(r<c&&this.left.forEachInner(i,r,Math.min(o,c),a)===!1||o>c&&this.right.forEachInner(i,Math.max(r-c,0),Math.min(this.length,o)-c,a+c)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,o,a){var c=this.left.length;if(r>c&&this.right.forEachInvertedInner(i,r-c,Math.max(o,c)-c,a+c)===!1||o<c&&this.left.forEachInvertedInner(i,Math.min(r,c),o,a)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(i,r):i>=o?this.right.slice(i-o,r-o):this.left.slice(i,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e})(qt);const D9=500;class ci{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,o;n&&(r=this.remapping(i,this.items.length),o=r.maps.length);let a=e.tr,c,d,f=[],p=[];return this.items.forEach((m,g)=>{if(!m.step){r||(r=this.remapping(i,g+1),o=r.maps.length),o--,p.push(m);return}if(r){p.push(new Ei(m.map));let x=m.step.map(r.slice(o)),S;x&&a.maybeStep(x).doc&&(S=a.mapping.maps[a.mapping.maps.length-1],f.push(new Ei(S,void 0,void 0,f.length+p.length))),o--,S&&r.appendMap(S,o)}else a.maybeStep(m.step);if(m.selection)return c=r?m.selection.map(r.slice(o)):m.selection,d=new ci(this.items.slice(0,i).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:a,selection:c}}addTransform(e,n,i,r){let o=[],a=this.eventCount,c=this.items,d=!r&&c.length?c.get(c.length-1):null;for(let p=0;p<e.steps.length;p++){let m=e.steps[p].invert(e.docs[p]),g=new Ei(e.mapping.maps[p],m,n),x;(x=d&&d.merge(g))&&(g=x,p?o.pop():c=c.slice(0,c.length-1)),o.push(g),n&&(a++,n=void 0),r||(d=g)}let f=a-i.depth;return f>R9&&(c=O9(c,f),a-=f),new ci(c.append(o),a)}remapping(e,n){let i=new Uc;return this.items.forEach((r,o)=>{let a=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,a)},e,n),i}addMaps(e){return this.eventCount==0?this:new ci(this.items.append(e.map(n=>new Ei(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-n),o=e.mapping,a=e.steps.length,c=this.eventCount;this.items.forEach(g=>{g.selection&&c--},r);let d=n;this.items.forEach(g=>{let x=o.getMirror(--d);if(x==null)return;a=Math.min(a,x);let S=o.maps[x];if(g.step){let w=e.steps[x].invert(e.docs[x]),E=g.selection&&g.selection.map(o.slice(d+1,x));E&&c++,i.push(new Ei(S,w,E))}else i.push(new Ei(S))},r);let f=[];for(let g=n;g<a;g++)f.push(new Ei(o.maps[g]));let p=this.items.slice(0,r).append(f).append(i),m=new ci(p,c);return m.emptyItemCount()>D9&&(m=m.compress(this.items.length-i.length)),m}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,r=[],o=0;return this.items.forEach((a,c)=>{if(c>=e)r.push(a),a.selection&&o++;else if(a.step){let d=a.step.map(n.slice(i)),f=d&&d.getMap();if(i--,f&&n.appendMap(f,i),d){let p=a.selection&&a.selection.map(n.slice(i));p&&o++;let m=new Ei(f.invert(),d,p),g,x=r.length-1;(g=r.length&&r[x].merge(m))?r[x]=g:r.push(m)}}else a.map&&i--},this.items.length,0),new ci(qt.from(r.reverse()),o)}}ci.empty=new ci(qt.empty,0);function O9(t,e){let n;return t.forEach((i,r)=>{if(i.selection&&e--==0)return n=r,!1}),t.slice(n)}class Ei{constructor(e,n,i,r){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ei(n.getMap().invert(),n,this.selection)}}}class Qr{constructor(e,n,i,r,o){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=r,this.prevComposition=o}}const R9=20;function j9(t,e,n,i){let r=n.getMeta(lo),o;if(r)return r.historyState;n.getMeta(z9)&&(t=new Qr(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(lo))return a.getMeta(lo).redo?new Qr(t.done.addTransform(n,void 0,i,Cf(e)),t.undone,Lk(n.mapping.maps),t.prevTime,t.prevComposition):new Qr(t.done,t.undone.addTransform(n,void 0,i,Cf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),d=t.prevTime==0||!a&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-i.newGroupDelay||!_9(n,t.prevRanges)),f=a?zy(t.prevRanges,n.mapping):Lk(n.mapping.maps);return new Qr(t.done.addTransform(n,d?e.selection.getBookmark():void 0,i,Cf(e)),ci.empty,f,n.time,c??t.prevComposition)}else return(o=n.getMeta("rebased"))?new Qr(t.done.rebased(n,o),t.undone.rebased(n,o),zy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Qr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),zy(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function _9(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,r)=>{for(let o=0;o<e.length;o+=2)i<=e[o+1]&&r>=e[o]&&(n=!0)}),n}function Lk(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((i,r,o,a)=>e.push(o,a));return e}function zy(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),o=e.map(t[i+1],-1);r<=o&&n.push(r,o)}return n}function L9(t,e,n){let i=Cf(e),r=lo.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,i);if(!o)return null;let a=o.selection.resolve(o.transform.doc),c=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),r,i),d=new Qr(n?c:o.remaining,n?o.remaining:c,null,0,-1);return o.transform.setSelection(a).setMeta(lo,{redo:n,historyState:d})}let By=!1,zk=null;function Cf(t){let e=t.plugins;if(zk!=e){By=!1,zk=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){By=!0;break}}return By}const lo=new Yt("history"),z9=new Yt("closeHistory");function B9(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new wt({key:lo,state:{init(){return new Qr(ci.empty,ci.empty,null,0,-1)},apply(e,n,i){return j9(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,r=i=="historyUndo"?gD:i=="historyRedo"?yD:null;return r?(n.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function mD(t,e){return(n,i)=>{let r=lo.getState(n);if(!r||(t?r.undone:r.done).eventCount==0)return!1;if(i){let o=L9(r,n,t);o&&i(e?o.scrollIntoView():o)}return!0}}const gD=mD(!1,!0),yD=mD(!0,!0);Tt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const i=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(i)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new wt({key:new Yt("characterCount"),appendTransaction:(e,n,i)=>{if(t)return;const r=this.options.limit;if(r==null||r===0){t=!0;return}const o=this.storage.characters({node:i.doc});if(o>r){const a=o-r,c=0,d=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${r} characters. Content was automatically trimmed.`);const f=i.tr.deleteRange(c,d);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const i=this.options.limit;if(!e.docChanged||i===0||i===null||i===void 0)return!0;const r=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=i||r>i&&o>i&&o<=r)return!0;if(r>i&&o>i&&o>r||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,d=o-i,f=c-d,p=c;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>i)}})]}});var P9=Tt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[v9(this.options)]}});Tt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new wt({key:new Yt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:i}=this.editor,{anchor:r}=e,o=[];if(!n||!i)return pt.create(t,[]);let a=0;this.options.mode==="deepest"&&t.descendants((d,f)=>{if(d.isText)return;if(!(r>=f&&r<=f+d.nodeSize-1))return!1;a+=1});let c=0;return t.descendants((d,f)=>{if(d.isText||!(r>=f&&r<=f+d.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&a-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(un.node(f,f+d.nodeSize,{class:this.options.className}))}),pt.create(t,o)}}})]}});var V9=Tt.create({name:"gapCursor",addProseMirrorPlugins(){return[C9()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=et(Se(t,"allowGapCursor",n)))!=null?e:null}}}),I9=Tt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new wt({key:new Yt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,r=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((a,c)=>{const d=i>=c&&i<=c+a.nodeSize,f=!a.isLeaf&&lp(a);if((d||!this.options.showOnlyCurrent)&&f){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const m=un.node(c,c+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:c,hasAnchor:d}):this.options.placeholder});r.push(m)}return this.options.includeChildren}),pt.create(t,r)}}})]}});Tt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new wt({key:new Yt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||AA(n.selection)||t.view.dragging?null:pt.create(n.doc,[un.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Bk({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var H9=Tt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new Yt(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new wt({key:t,appendTransaction:(n,i,r)=>{const{doc:o,tr:a,schema:c}=r,d=t.getState(r),f=o.content.size,p=c.nodes[this.options.node];if(d)return a.insert(f,p.create())},state:{init:(n,i)=>{const r=i.tr.doc.lastChild;return!Bk({node:r,types:e})},apply:(n,i)=>{if(!n.docChanged)return i;const r=n.doc.lastChild;return!Bk({node:r,types:e})}}})]}}),$9=Tt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>gD(t,e),redo:()=>({state:t,dispatch:e})=>yD(t,e)}},addProseMirrorPlugins(){return[B9(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),U9=Tt.create({name:"starterKit",addExtensions(){var t,e,n,i;const r=[];return this.options.bold!==!1&&r.push(x8.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(h8.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push(Db.configure(this.options.bulletList)),this.options.code!==!1&&r.push(S8.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(C8.configure(this.options.codeBlock)),this.options.document!==!1&&r.push(k8.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(P9.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(V9.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(T8.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push(WA.configure(this.options.heading)),this.options.undoRedo!==!1&&r.push($9.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&r.push(N8.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(j8.configure(this.options.italic)),this.options.listItem!==!1&&r.push(Ob.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(fD.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&r.push(oD.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&r.push(jb.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(p9.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(y9.configure(this.options.strike)),this.options.text!==!1&&r.push(x9.configure(this.options.text)),this.options.underline!==!1&&r.push(hD.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&r.push(H9.configure((i=this.options)==null?void 0:i.trailingNode)),r}}),F9=U9,q9=Tt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Y9=q9,K9=I9,G9=Db,X9=jb,W9=Ob;const fp=({label:t,id:e,children:n,focused:i,containerClassName:r})=>{const o=`${e}-label`;return v.jsxs(Qn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${r||""}`,children:[t&&v.jsx(Qn.label,{id:o,htmlFor:e,className:"text-xs text-muted",animate:{color:i?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:t}),n]})},hp=()=>{const[t,e]=je.useState(!1);return{focused:t,onFocus:()=>e(!0),onBlur:()=>e(!1)}};function Z9(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function xD(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function Q9(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function J9(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function e7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H9V4h9v12zM3 15v-2h2v2H3zm0-5.5h2v2H3v-2zM10 20h2v2h-2v-2zm-7-1.5v-2h2v2H3zM5 22c-1.1 0-2-.9-2-2h2v2zm3.5 0h-2v-2h2v2zm5 0v-2h2c0 1.1-.9 2-2 2zM5 6v2H3c0-1.1.9-2 2-2z"},child:[]}]})(t)}function t7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(t)}function n7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(t)}function i7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(t)}function r7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function s7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(t)}function o7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(t)}function a7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(t)}function l7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(t)}function c7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(t)}function u7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(t)}function d7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(t)}function f7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function h7(t){return dt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}const ha=({onClick:t,disabled:e,active:n,title:i,children:r})=>v.jsx("button",{onClick:t,disabled:e,title:i,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${e?"opacity-50 cursor-not-allowed":""}`,children:r}),Pk=({editor:t,disabled:e})=>{let n="0";return t.isActive("heading",{level:1})?n="1":t.isActive("heading",{level:2})?n="2":t.isActive("heading",{level:3})&&(n="3"),v.jsxs("select",{title:"Heading level",value:n,onChange:i=>{const r=parseInt(i.target.value,10);r===0?t.chain().focus().setParagraph().run():t.chain().focus().toggleHeading({level:r}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:e,children:[v.jsx("option",{value:"0",children:"P"}),v.jsx("option",{value:"1",children:"H1"}),v.jsx("option",{value:"2",children:"H2"}),v.jsx("option",{value:"3",children:"H3"})]})},Nh=({id:t,label:e,value:n,onChange:i,placeholder:r="Start typing…",disabled:o=!1,className:a="",containerClassName:c})=>{const[,d]=j.useState(0),[f,p]=j.useState(!1),{focused:m,onFocus:g,onBlur:x}=hp(),S=()=>d(Date.now()),w=()=>{p(!f)},E=l8({extensions:[F9.configure({bulletList:!1,orderedList:!1,listItem:!1}),G9.configure({HTMLAttributes:{class:"bullet-list"}}),X9.configure({HTMLAttributes:{class:"ordered-list"}}),W9.configure({HTMLAttributes:{class:"list-item"}}),b9,r9.configure({openOnClick:!1}),Y9.configure({types:["heading","paragraph"]}),M8.configure({levels:[1,2,3]}),K9.configure({placeholder:r})],content:n,editable:!o,onUpdate:({editor:M})=>{i(M.getHTML())},onFocus:g,onBlur:x,onSelectionUpdate:()=>{S()},onTransaction:()=>{S()}});if(j.useEffect(()=>{E&&(n!==E.getHTML()&&E.commands.setContent(n,{emitUpdate:!1}),E.setEditable(!o))},[n,o,E]),j.useEffect(()=>{const M=D=>{D.key==="Escape"&&f&&p(!1)};return f?(document.addEventListener("keydown",M),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",M),document.body.style.overflow=""}},[f]),!E)return null;const C=[{key:"bold",title:"Bold",onClick:()=>E.chain().focus().toggleBold().run(),active:E.isActive("bold"),node:v.jsx(r7,{size:16})},{key:"italic",title:"Italic",onClick:()=>E.chain().focus().toggleItalic().run(),active:E.isActive("italic"),node:v.jsx(s7,{size:16})},{key:"underline",title:"Underline",onClick:()=>E.chain().focus().toggleUnderline().run(),active:E.isActive("underline"),node:v.jsx(c7,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>E.chain().focus().toggleStrike().run(),active:E.isActive("strike"),node:v.jsx(v.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>E.chain().focus().toggleBulletList().run(),active:E.isActive("bulletList"),node:v.jsx(o7,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>E.chain().focus().toggleOrderedList().run(),active:E.isActive("orderedList"),node:v.jsx(a7,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>E.chain().focus().toggleBlockquote().run(),active:E.isActive("blockquote"),node:v.jsx(l7,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>E.chain().focus().toggleCodeBlock().run(),active:E.isActive("codeBlock"),node:v.jsx(Z9,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>E.chain().focus().setTextAlign("left").run(),active:E.isActive({textAlign:"left"}),node:v.jsx(n7,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>E.chain().focus().setTextAlign("center").run(),active:E.isActive({textAlign:"center"}),node:v.jsx(t7,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>E.chain().focus().setTextAlign("right").run(),active:E.isActive({textAlign:"right"}),node:v.jsx(i7,{size:16})}],k=[{key:"fullscreen",title:f?"Exit Fullscreen":"Enter Fullscreen",onClick:w,active:f,node:f?v.jsx(f7,{size:16}):v.jsx(h7,{size:16})}];return v.jsx("div",{className:f?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:f?v.jsxs(Qn.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:m?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[v.jsx("div",{className:"flex items-center gap-2 mr-4",children:e&&v.jsx("span",{className:"font-medium text-theme",children:e})}),v.jsx(Pk,{editor:E,disabled:o}),C.map(M=>v.jsx(ha,{onClick:M.onClick,disabled:o,active:M.active,title:M.title,children:M.node},M.key)),N.map(M=>v.jsx(ha,{onClick:M.onClick,disabled:o,active:M.active,title:M.title,children:M.node},M.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(M=>v.jsx(ha,{onClick:M.onClick,disabled:o,active:M.active,title:M.title,children:M.node},M.key))]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsx("div",{className:"h-full overflow-y-auto p-4",children:v.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:v.jsx(Ek,{editor:E,className:"focus:outline-none h-full"})})})})]}):v.jsx(fp,{id:t,label:e,focused:m,containerClassName:c,children:v.jsxs(Qn.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${a} ${o?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:m?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[v.jsx(Pk,{editor:E,disabled:o}),C.map(M=>v.jsx(ha,{onClick:M.onClick,disabled:o,active:M.active,title:M.title,children:M.node},M.key)),N.map(M=>v.jsx(ha,{onClick:M.onClick,disabled:o,active:M.active,title:M.title,children:M.node},M.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(M=>v.jsx(ha,{onClick:M.onClick,disabled:o,active:M.active,title:M.title,children:M.node},M.key))]}),v.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:v.jsx(Ek,{editor:E,className:"focus:outline-none"})})]})})})},p7=()=>{Ka();const t=Fh(),[e,n]=j.useState(!1),i=j.useRef(0),r=()=>(i.current+=1,`item-${Date.now()}-${i.current}`),[o,a]=j.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:r(),value:""}],constraints:[{id:r(),value:""}],hints:[{id:r(),value:""}],tags:[{id:r(),value:""}]}),c=(g,x)=>{a(S=>({...S,[g]:x}))},d=(g,x,S)=>{const w=o[g].map(E=>E.id===x?{...E,value:S}:E);a(E=>({...E,[g]:w}))},f=g=>{a(x=>({...x,[g]:[...x[g],{id:r(),value:""}]}))},p=(g,x)=>{const S=o[g].filter(w=>w.id!==x);a(w=>({...w,[g]:S.length>0?S:[{id:r(),value:""}]}))},m=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:o.title,description:o.description,difficulty:o.difficulty,category:o.category,estimated_time:o.estimatedTime,requirements:o.requirements.map(x=>x.value).filter(x=>x.trim()!==""),constraints:o.constraints.map(x=>x.value).filter(x=>x.trim()!==""),hints:o.hints.map(x=>x.value).filter(x=>x.trim()!==""),tags:o.tags.map(x=>x.value).filter(x=>x.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{t(`/playground/${g.id}`)},300)};return v.jsxs(v.Fragment,{children:[v.jsx(Yh,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsx(qh,{})})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"inline-block mb-4",children:v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:"✨ Custom Problem Creator"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"📝"})," Problem Title *"]}),v.jsx("input",{id:"title",type:"text",value:o.title,onChange:g=>c("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsx("div",{children:v.jsx(Nh,{id:"description",label:"📄 Description *",value:o.description,onChange:g=>c("description",g),placeholder:"Describe the problem in detail..."})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"📊"})," Difficulty"]}),v.jsxs("select",{id:"difficulty",value:o.difficulty,onChange:g=>c("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"Easy",children:"Easy"}),v.jsx("option",{value:"Medium",children:"Medium"}),v.jsx("option",{value:"Hard",children:"Hard"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"🏷️"})," Category"]}),v.jsx("input",{id:"category",type:"text",value:o.category,onChange:g=>c("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"⏱️"})," Estimated Time"]}),v.jsx("input",{id:"estimatedTime",type:"text",value:o.estimatedTime,onChange:g=>c("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"✅"})," Requirements"]}),v.jsx("button",{type:"button",onClick:()=>f("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),o.requirements.map((g,x)=>v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-3 items-start",children:[v.jsx("div",{className:"flex-1",children:v.jsx(Nh,{id:`requirement-${g.id}`,label:`Requirement ${x+1}`,value:g.value,onChange:S=>d("requirements",g.id,S),placeholder:"Enter a requirement (supports rich text formatting)"})}),o.requirements.length>1&&v.jsx("button",{type:"button",onClick:()=>p("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:"✕"})]})},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"⚠️"})," Constraints"]}),v.jsx("button",{type:"button",onClick:()=>f("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),o.constraints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:x=>d("constraints",g.id,x.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),o.constraints.length>1&&v.jsx("button",{type:"button",onClick:()=>p("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:"✕"})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"💡"})," Hints (Optional)"]}),v.jsx("button",{type:"button",onClick:()=>f("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),o.hints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:x=>d("hints",g.id,x.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),o.hints.length>1&&v.jsx("button",{type:"button",onClick:()=>p("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:"✕"})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:"🏷️"})," Tags"]})}),o.tags.some(g=>g.value.trim())&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:o.tags.filter(g=>g.value.trim()).map(g=>v.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[v.jsx("span",{children:g.value}),v.jsx("button",{type:"button",onClick:()=>p("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:o.tags.at(-1)?.value||"",onChange:g=>d("tags",o.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),f("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),v.jsx("button",{type:"button",onClick:()=>{o.tags.at(-1)?.value.trim()&&f("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[v.jsx("button",{type:"button",onClick:m,disabled:!o.title||!o.description||e,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:e?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):v.jsx(v.Fragment,{children:"🚀 Create & Start Designing"})}),v.jsx("button",{type:"button",onClick:()=>t("/"),disabled:e,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},bD=({id:t,checked:e,onChange:n,label:i,disabled:r=!1,className:o=""})=>v.jsxs("label",{htmlFor:t,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${r?"opacity-60 cursor-not-allowed":""} ${o}`,children:[v.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[v.jsx("input",{id:t,type:"checkbox",checked:e,disabled:r,onChange:a=>n(a.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),v.jsx(xL,{children:e&&v.jsx(Qn.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:"✓"},"check")})]}),i&&v.jsx("span",{className:"text-sm text-theme",children:i})]}),vD=({id:t,label:e,value:n,onChange:i,min:r,max:o,step:a,disabled:c,className:d="",containerClassName:f})=>{const{focused:p,onFocus:m,onBlur:g}=hp();return v.jsx(fp,{id:t,label:e,focused:p,containerClassName:f,children:v.jsx(Qn.input,{id:t,type:"number",value:n??"",onChange:x=>i(Number(x.target.value)),onFocus:m,onBlur:g,disabled:c,min:r,max:o,step:a,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${c?"opacity-60 cursor-not-allowed":""} ${d}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},kf=({id:t,label:e,value:n,onChange:i,placeholder:r,disabled:o,className:a="",containerClassName:c})=>{const{focused:d,onFocus:f,onBlur:p}=hp();return v.jsx(fp,{id:t,label:e,focused:d,containerClassName:c,children:v.jsx(Qn.input,{id:t,type:"text",value:n,placeholder:r,onChange:m=>i(m.target.value),onFocus:f,onBlur:p,disabled:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${o?"opacity-60 cursor-not-allowed":""} ${a}`,animate:{boxShadow:d?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},SD=({id:t,label:e,value:n,onChange:i,options:r,disabled:o,className:a="",containerClassName:c})=>{const{focused:d,onFocus:f,onBlur:p}=hp(),m=`${t}-label`;return v.jsxs(fp,{id:t,label:e,focused:d,containerClassName:c,children:[!e&&v.jsx("label",{id:m,htmlFor:t,className:"sr-only",children:t}),v.jsx(Qn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:v.jsx("select",{id:t,value:n??"",onChange:g=>i(g.target.value),onFocus:f,onBlur:p,disabled:o,"aria-labelledby":e?m:void 0,"aria-label":e||t,title:e||t,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${o?"opacity-60 cursor-not-allowed":""} ${a}`,children:r.map(g=>v.jsx("option",{value:g,children:g},g))})})]})};function _t(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=_t(t[n]))!==""&&(e+=(e&&" ")+i);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var m7={value:()=>{}};function pp(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Tf(n)}function Tf(t){this._=t}function g7(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Tf.prototype=pp.prototype={constructor:Tf,on:function(t,e){var n=this._,i=g7(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=y7(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=Vk(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Vk(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Tf(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function y7(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Vk(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=m7,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Q0="http://www.w3.org/1999/xhtml";const Ik={svg:"http://www.w3.org/2000/svg",xhtml:Q0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mp(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ik.hasOwnProperty(e)?{space:Ik[e],local:t}:t}function x7(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Q0&&e.documentElement.namespaceURI===Q0?e.createElement(t):e.createElementNS(n,t)}}function b7(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function wD(t){var e=mp(t);return(e.local?b7:x7)(e)}function v7(){}function Lb(t){return t==null?v7:function(){return this.querySelector(t)}}function S7(t){typeof t!="function"&&(t=Lb(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,c=i[r]=new Array(a),d,f,p=0;p<a;++p)(d=o[p])&&(f=t.call(d,d.__data__,p,o))&&("__data__"in d&&(f.__data__=d.__data__),c[p]=f);return new zn(i,this._parents)}function w7(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function E7(){return[]}function ED(t){return t==null?E7:function(){return this.querySelectorAll(t)}}function C7(t){return function(){return w7(t.apply(this,arguments))}}function k7(t){typeof t=="function"?t=C7(t):t=ED(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],c=a.length,d,f=0;f<c;++f)(d=a[f])&&(i.push(t.call(d,d.__data__,f,a)),r.push(d));return new zn(i,r)}function CD(t){return function(){return this.matches(t)}}function kD(t){return function(e){return e.matches(t)}}var T7=Array.prototype.find;function M7(t){return function(){return T7.call(this.children,t)}}function N7(){return this.firstElementChild}function A7(t){return this.select(t==null?N7:M7(typeof t=="function"?t:kD(t)))}var D7=Array.prototype.filter;function O7(){return Array.from(this.children)}function R7(t){return function(){return D7.call(this.children,t)}}function j7(t){return this.selectAll(t==null?O7:R7(typeof t=="function"?t:kD(t)))}function _7(t){typeof t!="function"&&(t=CD(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,c=i[r]=[],d,f=0;f<a;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new zn(i,this._parents)}function TD(t){return new Array(t.length)}function L7(){return new zn(this._enter||this._groups.map(TD),this._parents)}function Ah(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ah.prototype={constructor:Ah,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function z7(t){return function(){return t}}function B7(t,e,n,i,r,o){for(var a=0,c,d=e.length,f=o.length;a<f;++a)(c=e[a])?(c.__data__=o[a],i[a]=c):n[a]=new Ah(t,o[a]);for(;a<d;++a)(c=e[a])&&(r[a]=c)}function P7(t,e,n,i,r,o,a){var c,d,f=new Map,p=e.length,m=o.length,g=new Array(p),x;for(c=0;c<p;++c)(d=e[c])&&(g[c]=x=a.call(d,d.__data__,c,e)+"",f.has(x)?r[c]=d:f.set(x,d));for(c=0;c<m;++c)x=a.call(t,o[c],c,o)+"",(d=f.get(x))?(i[c]=d,d.__data__=o[c],f.delete(x)):n[c]=new Ah(t,o[c]);for(c=0;c<p;++c)(d=e[c])&&f.get(g[c])===d&&(r[c]=d)}function V7(t){return t.__data__}function I7(t,e){if(!arguments.length)return Array.from(this,V7);var n=e?P7:B7,i=this._parents,r=this._groups;typeof t!="function"&&(t=z7(t));for(var o=r.length,a=new Array(o),c=new Array(o),d=new Array(o),f=0;f<o;++f){var p=i[f],m=r[f],g=m.length,x=H7(t.call(p,p&&p.__data__,f,i)),S=x.length,w=c[f]=new Array(S),E=a[f]=new Array(S),C=d[f]=new Array(g);n(p,m,w,E,C,x,e);for(var N=0,k=0,M,D;N<S;++N)if(M=w[N]){for(N>=k&&(k=N+1);!(D=E[k])&&++k<S;);M._next=D||null}}return a=new zn(a,i),a._enter=c,a._exit=d,a}function H7(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $7(){return new zn(this._exit||this._groups.map(TD),this._parents)}function U7(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function F7(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),c=new Array(r),d=0;d<a;++d)for(var f=n[d],p=i[d],m=f.length,g=c[d]=new Array(m),x,S=0;S<m;++S)(x=f[S]||p[S])&&(g[S]=x);for(;d<r;++d)c[d]=n[d];return new zn(c,this._parents)}function q7(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Y7(t){t||(t=K7);function e(m,g){return m&&g?t(m.__data__,g.__data__):!m-!g}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],c=a.length,d=r[o]=new Array(c),f,p=0;p<c;++p)(f=a[p])&&(d[p]=f);d.sort(e)}return new zn(r,this._parents).order()}function K7(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function G7(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function X7(){return Array.from(this)}function W7(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function Z7(){let t=0;for(const e of this)++t;return t}function Q7(){return!this.node()}function J7(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,c;o<a;++o)(c=r[o])&&t.call(c,c.__data__,o,r);return this}function e$(t){return function(){this.removeAttribute(t)}}function t$(t){return function(){this.removeAttributeNS(t.space,t.local)}}function n$(t,e){return function(){this.setAttribute(t,e)}}function i$(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function r$(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function s$(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function o$(t,e){var n=mp(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?t$:e$:typeof e=="function"?n.local?s$:r$:n.local?i$:n$)(n,e))}function MD(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function a$(t){return function(){this.style.removeProperty(t)}}function l$(t,e,n){return function(){this.style.setProperty(t,e,n)}}function c$(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function u$(t,e,n){return arguments.length>1?this.each((e==null?a$:typeof e=="function"?c$:l$)(t,e,n??"")):Ha(this.node(),t)}function Ha(t,e){return t.style.getPropertyValue(e)||MD(t).getComputedStyle(t,null).getPropertyValue(e)}function d$(t){return function(){delete this[t]}}function f$(t,e){return function(){this[t]=e}}function h$(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function p$(t,e){return arguments.length>1?this.each((e==null?d$:typeof e=="function"?h$:f$)(t,e)):this.node()[t]}function ND(t){return t.trim().split(/^|\s+/)}function zb(t){return t.classList||new AD(t)}function AD(t){this._node=t,this._names=ND(t.getAttribute("class")||"")}AD.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function DD(t,e){for(var n=zb(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function OD(t,e){for(var n=zb(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function m$(t){return function(){DD(this,t)}}function g$(t){return function(){OD(this,t)}}function y$(t,e){return function(){(e.apply(this,arguments)?DD:OD)(this,t)}}function x$(t,e){var n=ND(t+"");if(arguments.length<2){for(var i=zb(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?y$:e?m$:g$)(n,e))}function b$(){this.textContent=""}function v$(t){return function(){this.textContent=t}}function S$(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function w$(t){return arguments.length?this.each(t==null?b$:(typeof t=="function"?S$:v$)(t)):this.node().textContent}function E$(){this.innerHTML=""}function C$(t){return function(){this.innerHTML=t}}function k$(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function T$(t){return arguments.length?this.each(t==null?E$:(typeof t=="function"?k$:C$)(t)):this.node().innerHTML}function M$(){this.nextSibling&&this.parentNode.appendChild(this)}function N$(){return this.each(M$)}function A$(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function D$(){return this.each(A$)}function O$(t){var e=typeof t=="function"?t:wD(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function R$(){return null}function j$(t,e){var n=typeof t=="function"?t:wD(t),i=e==null?R$:typeof e=="function"?e:Lb(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function _$(){var t=this.parentNode;t&&t.removeChild(this)}function L$(){return this.each(_$)}function z$(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function B$(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function P$(t){return this.select(t?B$:z$)}function V$(t){return arguments.length?this.property("__data__",t):this.node().__data__}function I$(t){return function(e){t.call(this,e,this.__data__)}}function H$(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function $$(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function U$(t,e,n){return function(){var i=this.__on,r,o=I$(e);if(i){for(var a=0,c=i.length;a<c;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function F$(t,e,n){var i=H$(t+""),r,o=i.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,p;d<f;++d)for(r=0,p=c[d];r<o;++r)if((a=i[r]).type===p.type&&a.name===p.name)return p.value}return}for(c=e?U$:$$,r=0;r<o;++r)this.each(c(i[r],e,n));return this}function RD(t,e,n){var i=MD(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function q$(t,e){return function(){return RD(this,t,e)}}function Y$(t,e){return function(){return RD(this,t,e.apply(this,arguments))}}function K$(t,e){return this.each((typeof e=="function"?Y$:q$)(t,e))}function*G$(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var jD=[null];function zn(t,e){this._groups=t,this._parents=e}function yu(){return new zn([[document.documentElement]],jD)}function X$(){return this}zn.prototype=yu.prototype={constructor:zn,select:S7,selectAll:k7,selectChild:A7,selectChildren:j7,filter:_7,data:I7,enter:L7,exit:$7,join:U7,merge:F7,selection:X$,order:q7,sort:Y7,call:G7,nodes:X7,node:W7,size:Z7,empty:Q7,each:J7,attr:o$,style:u$,property:p$,classed:x$,text:w$,html:T$,raise:N$,lower:D$,append:O$,insert:j$,remove:L$,clone:P$,datum:V$,on:F$,dispatch:K$,[Symbol.iterator]:G$};function _n(t){return typeof t=="string"?new zn([[document.querySelector(t)]],[document.documentElement]):new zn([[t]],jD)}function W$(t){let e;for(;e=t.sourceEvent;)t=e;return t}function li(t,e){if(t=W$(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Z$={passive:!1},Qc={capture:!0,passive:!1};function Py(t){t.stopImmediatePropagation()}function Oa(t){t.preventDefault(),t.stopImmediatePropagation()}function _D(t){var e=t.document.documentElement,n=_n(t).on("dragstart.drag",Oa,Qc);"onselectstart"in e?n.on("selectstart.drag",Oa,Qc):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function LD(t,e){var n=t.document.documentElement,i=_n(t).on("dragstart.drag",null);e&&(i.on("click.drag",Oa,Qc),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const of=t=>()=>t;function J0(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:a,y:c,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}J0.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Q$(t){return!t.ctrlKey&&!t.button}function J$(){return this.parentNode}function eU(t,e){return e??{x:t.x,y:t.y}}function tU(){return navigator.maxTouchPoints||"ontouchstart"in this}function zD(){var t=Q$,e=J$,n=eU,i=tU,r={},o=pp("start","drag","end"),a=0,c,d,f,p,m=0;function g(M){M.on("mousedown.drag",x).filter(i).on("touchstart.drag",E).on("touchmove.drag",C,Z$).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(M,D){if(!(p||!t.call(this,M,D))){var _=k(this,e.call(this,M,D),M,D,"mouse");_&&(_n(M.view).on("mousemove.drag",S,Qc).on("mouseup.drag",w,Qc),_D(M.view),Py(M),f=!1,c=M.clientX,d=M.clientY,_("start",M))}}function S(M){if(Oa(M),!f){var D=M.clientX-c,_=M.clientY-d;f=D*D+_*_>m}r.mouse("drag",M)}function w(M){_n(M.view).on("mousemove.drag mouseup.drag",null),LD(M.view,f),Oa(M),r.mouse("end",M)}function E(M,D){if(t.call(this,M,D)){var _=M.changedTouches,P=e.call(this,M,D),B=_.length,I,ee;for(I=0;I<B;++I)(ee=k(this,P,M,D,_[I].identifier,_[I]))&&(Py(M),ee("start",M,_[I]))}}function C(M){var D=M.changedTouches,_=D.length,P,B;for(P=0;P<_;++P)(B=r[D[P].identifier])&&(Oa(M),B("drag",M,D[P]))}function N(M){var D=M.changedTouches,_=D.length,P,B;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),P=0;P<_;++P)(B=r[D[P].identifier])&&(Py(M),B("end",M,D[P]))}function k(M,D,_,P,B,I){var ee=o.copy(),K=li(I||_,D),W,ne,z;if((z=n.call(M,new J0("beforestart",{sourceEvent:_,target:g,identifier:B,active:a,x:K[0],y:K[1],dx:0,dy:0,dispatch:ee}),P))!=null)return W=z.x-K[0]||0,ne=z.y-K[1]||0,function U(R,L,F){var Y=K,O;switch(R){case"start":r[B]=U,O=a++;break;case"end":delete r[B],--a;case"drag":K=li(F||L,D),O=a;break}ee.call(R,M,new J0(R,{sourceEvent:L,subject:z,target:g,identifier:B,active:O,x:K[0]+W,y:K[1]+ne,dx:K[0]-Y[0],dy:K[1]-Y[1],dispatch:ee}),P)}}return g.filter=function(M){return arguments.length?(t=typeof M=="function"?M:of(!!M),g):t},g.container=function(M){return arguments.length?(e=typeof M=="function"?M:of(M),g):e},g.subject=function(M){return arguments.length?(n=typeof M=="function"?M:of(M),g):n},g.touchable=function(M){return arguments.length?(i=typeof M=="function"?M:of(!!M),g):i},g.on=function(){var M=o.on.apply(o,arguments);return M===o?g:M},g.clickDistance=function(M){return arguments.length?(m=(M=+M)*M,g):Math.sqrt(m)},g}function Bb(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function BD(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function xu(){}var Jc=.7,Dh=1/Jc,Ra="\\s*([+-]?\\d+)\\s*",eu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nU=/^#([0-9a-f]{3,8})$/,iU=new RegExp(`^rgb\\(${Ra},${Ra},${Ra}\\)$`),rU=new RegExp(`^rgb\\(${Ai},${Ai},${Ai}\\)$`),sU=new RegExp(`^rgba\\(${Ra},${Ra},${Ra},${eu}\\)$`),oU=new RegExp(`^rgba\\(${Ai},${Ai},${Ai},${eu}\\)$`),aU=new RegExp(`^hsl\\(${eu},${Ai},${Ai}\\)$`),lU=new RegExp(`^hsla\\(${eu},${Ai},${Ai},${eu}\\)$`),Hk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Bb(xu,yo,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:$k,formatHex:$k,formatHex8:cU,formatHsl:uU,formatRgb:Uk,toString:Uk});function $k(){return this.rgb().formatHex()}function cU(){return this.rgb().formatHex8()}function uU(){return PD(this).formatHsl()}function Uk(){return this.rgb().formatRgb()}function yo(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=nU.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Fk(e):n===3?new wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?af(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?af(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=iU.exec(t))?new wn(e[1],e[2],e[3],1):(e=rU.exec(t))?new wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sU.exec(t))?af(e[1],e[2],e[3],e[4]):(e=oU.exec(t))?af(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=aU.exec(t))?Kk(e[1],e[2]/100,e[3]/100,1):(e=lU.exec(t))?Kk(e[1],e[2]/100,e[3]/100,e[4]):Hk.hasOwnProperty(t)?Fk(Hk[t]):t==="transparent"?new wn(NaN,NaN,NaN,0):null}function Fk(t){return new wn(t>>16&255,t>>8&255,t&255,1)}function af(t,e,n,i){return i<=0&&(t=e=n=NaN),new wn(t,e,n,i)}function dU(t){return t instanceof xu||(t=yo(t)),t?(t=t.rgb(),new wn(t.r,t.g,t.b,t.opacity)):new wn}function ex(t,e,n,i){return arguments.length===1?dU(t):new wn(t,e,n,i??1)}function wn(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Bb(wn,ex,BD(xu,{brighter(t){return t=t==null?Dh:Math.pow(Dh,t),new wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Jc:Math.pow(Jc,t),new wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new wn(co(this.r),co(this.g),co(this.b),Oh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qk,formatHex:qk,formatHex8:fU,formatRgb:Yk,toString:Yk}));function qk(){return`#${eo(this.r)}${eo(this.g)}${eo(this.b)}`}function fU(){return`#${eo(this.r)}${eo(this.g)}${eo(this.b)}${eo((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yk(){const t=Oh(this.opacity);return`${t===1?"rgb(":"rgba("}${co(this.r)}, ${co(this.g)}, ${co(this.b)}${t===1?")":`, ${t})`}`}function Oh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function co(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function eo(t){return t=co(t),(t<16?"0":"")+t.toString(16)}function Kk(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ui(t,e,n,i)}function PD(t){if(t instanceof ui)return new ui(t.h,t.s,t.l,t.opacity);if(t instanceof xu||(t=yo(t)),!t)return new ui;if(t instanceof ui)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,c=o-r,d=(o+r)/2;return c?(e===o?a=(n-i)/c+(n<i)*6:n===o?a=(i-e)/c+2:a=(e-n)/c+4,c/=d<.5?o+r:2-o-r,a*=60):c=d>0&&d<1?0:a,new ui(a,c,d,t.opacity)}function hU(t,e,n,i){return arguments.length===1?PD(t):new ui(t,e,n,i??1)}function ui(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Bb(ui,hU,BD(xu,{brighter(t){return t=t==null?Dh:Math.pow(Dh,t),new ui(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Jc:Math.pow(Jc,t),new ui(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new wn(Vy(t>=240?t-240:t+120,r,i),Vy(t,r,i),Vy(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new ui(Gk(this.h),lf(this.s),lf(this.l),Oh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Oh(this.opacity);return`${t===1?"hsl(":"hsla("}${Gk(this.h)}, ${lf(this.s)*100}%, ${lf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Gk(t){return t=(t||0)%360,t<0?t+360:t}function lf(t){return Math.max(0,Math.min(1,t||0))}function Vy(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Pb=t=>()=>t;function pU(t,e){return function(n){return t+n*e}}function mU(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function gU(t){return(t=+t)==1?VD:function(e,n){return n-e?mU(e,n,t):Pb(isNaN(e)?n:e)}}function VD(t,e){var n=e-t;return n?pU(t,n):Pb(isNaN(t)?e:t)}const Rh=(function t(e){var n=gU(e);function i(r,o){var a=n((r=ex(r)).r,(o=ex(o)).r),c=n(r.g,o.g),d=n(r.b,o.b),f=VD(r.opacity,o.opacity);return function(p){return r.r=a(p),r.g=c(p),r.b=d(p),r.opacity=f(p),r+""}}return i.gamma=t,i})(1);function yU(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function xU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bU(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=Oc(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(c){for(a=0;a<i;++a)o[a]=r[a](c);return o}}function vU(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ci(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function SU(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Oc(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Iy=new RegExp(tx.source,"g");function wU(t){return function(){return t}}function EU(t){return function(e){return t(e)+""}}function ID(t,e){var n=tx.lastIndex=Iy.lastIndex=0,i,r,o,a=-1,c=[],d=[];for(t=t+"",e=e+"";(i=tx.exec(t))&&(r=Iy.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),c[a]?c[a]+=o:c[++a]=o),(i=i[0])===(r=r[0])?c[a]?c[a]+=r:c[++a]=r:(c[++a]=null,d.push({i:a,x:Ci(i,r)})),n=Iy.lastIndex;return n<e.length&&(o=e.slice(n),c[a]?c[a]+=o:c[++a]=o),c.length<2?d[0]?EU(d[0].x):wU(e):(e=d.length,function(f){for(var p=0,m;p<e;++p)c[(m=d[p]).i]=m.x(f);return c.join("")})}function Oc(t,e){var n=typeof e,i;return e==null||n==="boolean"?Pb(e):(n==="number"?Ci:n==="string"?(i=yo(e))?(e=i,Rh):ID:e instanceof yo?Rh:e instanceof Date?vU:xU(e)?yU:Array.isArray(e)?bU:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?SU:Ci)(t,e)}var Xk=180/Math.PI,nx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function HD(t,e,n,i,r,o){var a,c,d;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(d=t*n+e*i)&&(n-=t*d,i-=e*d),(c=Math.sqrt(n*n+i*i))&&(n/=c,i/=c,d/=c),t*i<e*n&&(t=-t,e=-e,d=-d,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Xk,skewX:Math.atan(d)*Xk,scaleX:a,scaleY:c}}var cf;function CU(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nx:HD(e.a,e.b,e.c,e.d,e.e,e.f)}function kU(t){return t==null||(cf||(cf=document.createElementNS("http://www.w3.org/2000/svg","g")),cf.setAttribute("transform",t),!(t=cf.transform.baseVal.consolidate()))?nx:(t=t.matrix,HD(t.a,t.b,t.c,t.d,t.e,t.f))}function $D(t,e,n,i){function r(f){return f.length?f.pop()+" ":""}function o(f,p,m,g,x,S){if(f!==m||p!==g){var w=x.push("translate(",null,e,null,n);S.push({i:w-4,x:Ci(f,m)},{i:w-2,x:Ci(p,g)})}else(m||g)&&x.push("translate("+m+e+g+n)}function a(f,p,m,g){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),g.push({i:m.push(r(m)+"rotate(",null,i)-2,x:Ci(f,p)})):p&&m.push(r(m)+"rotate("+p+i)}function c(f,p,m,g){f!==p?g.push({i:m.push(r(m)+"skewX(",null,i)-2,x:Ci(f,p)}):p&&m.push(r(m)+"skewX("+p+i)}function d(f,p,m,g,x,S){if(f!==m||p!==g){var w=x.push(r(x)+"scale(",null,",",null,")");S.push({i:w-4,x:Ci(f,m)},{i:w-2,x:Ci(p,g)})}else(m!==1||g!==1)&&x.push(r(x)+"scale("+m+","+g+")")}return function(f,p){var m=[],g=[];return f=t(f),p=t(p),o(f.translateX,f.translateY,p.translateX,p.translateY,m,g),a(f.rotate,p.rotate,m,g),c(f.skewX,p.skewX,m,g),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,m,g),f=p=null,function(x){for(var S=-1,w=g.length,E;++S<w;)m[(E=g[S]).i]=E.x(x);return m.join("")}}}var TU=$D(CU,"px, ","px)","deg)"),MU=$D(kU,", ",")",")"),NU=1e-12;function Wk(t){return((t=Math.exp(t))+1/t)/2}function AU(t){return((t=Math.exp(t))-1/t)/2}function DU(t){return((t=Math.exp(2*t))-1)/(t+1)}const Mf=(function t(e,n,i){function r(o,a){var c=o[0],d=o[1],f=o[2],p=a[0],m=a[1],g=a[2],x=p-c,S=m-d,w=x*x+S*S,E,C;if(w<NU)C=Math.log(g/f)/e,E=function(P){return[c+P*x,d+P*S,f*Math.exp(e*P*C)]};else{var N=Math.sqrt(w),k=(g*g-f*f+i*w)/(2*f*n*N),M=(g*g-f*f-i*w)/(2*g*n*N),D=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(M*M+1)-M);C=(_-D)/e,E=function(P){var B=P*C,I=Wk(D),ee=f/(n*N)*(I*DU(e*B+D)-AU(D));return[c+ee*x,d+ee*S,f*I/Wk(e*B+D)]}}return E.duration=C*1e3*e/Math.SQRT2,E}return r.rho=function(o){var a=Math.max(.001,+o),c=a*a,d=c*c;return t(a,c,d)},r})(Math.SQRT2,2,4);var $a=0,pc=0,ac=0,UD=1e3,jh,mc,_h=0,xo=0,gp=0,tu=typeof performance=="object"&&performance.now?performance:Date,FD=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Vb(){return xo||(FD(OU),xo=tu.now()+gp)}function OU(){xo=0}function Lh(){this._call=this._time=this._next=null}Lh.prototype=qD.prototype={constructor:Lh,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Vb():+n)+(e==null?0:+e),!this._next&&mc!==this&&(mc?mc._next=this:jh=this,mc=this),this._call=t,this._time=n,ix()},stop:function(){this._call&&(this._call=null,this._time=1/0,ix())}};function qD(t,e,n){var i=new Lh;return i.restart(t,e,n),i}function RU(){Vb(),++$a;for(var t=jh,e;t;)(e=xo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--$a}function Zk(){xo=(_h=tu.now())+gp,$a=pc=0;try{RU()}finally{$a=0,_U(),xo=0}}function jU(){var t=tu.now(),e=t-_h;e>UD&&(gp-=e,_h=t)}function _U(){for(var t,e=jh,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:jh=n);mc=t,ix(i)}function ix(t){if(!$a){pc&&(pc=clearTimeout(pc));var e=t-xo;e>24?(t<1/0&&(pc=setTimeout(Zk,t-tu.now()-gp)),ac&&(ac=clearInterval(ac))):(ac||(_h=tu.now(),ac=setInterval(jU,UD)),$a=1,FD(Zk))}}function Qk(t,e,n){var i=new Lh;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var LU=pp("start","end","cancel","interrupt"),zU=[],YD=0,Jk=1,rx=2,Nf=3,e2=4,sx=5,Af=6;function yp(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;BU(t,n,{name:e,index:i,group:r,on:LU,tween:zU,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:YD})}function Ib(t,e){var n=hi(t,e);if(n.state>YD)throw new Error("too late; already scheduled");return n}function ji(t,e){var n=hi(t,e);if(n.state>Nf)throw new Error("too late; already running");return n}function hi(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function BU(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=qD(o,0,n.time);function o(f){n.state=Jk,n.timer.restart(a,n.delay,n.time),n.delay<=f&&a(f-n.delay)}function a(f){var p,m,g,x;if(n.state!==Jk)return d();for(p in i)if(x=i[p],x.name===n.name){if(x.state===Nf)return Qk(a);x.state===e2?(x.state=Af,x.timer.stop(),x.on.call("interrupt",t,t.__data__,x.index,x.group),delete i[p]):+p<e&&(x.state=Af,x.timer.stop(),x.on.call("cancel",t,t.__data__,x.index,x.group),delete i[p])}if(Qk(function(){n.state===Nf&&(n.state=e2,n.timer.restart(c,n.delay,n.time),c(f))}),n.state=rx,n.on.call("start",t,t.__data__,n.index,n.group),n.state===rx){for(n.state=Nf,r=new Array(g=n.tween.length),p=0,m=-1;p<g;++p)(x=n.tween[p].value.call(t,t.__data__,n.index,n.group))&&(r[++m]=x);r.length=m+1}}function c(f){for(var p=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=sx,1),m=-1,g=r.length;++m<g;)r[m].call(t,p);n.state===sx&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=Af,n.timer.stop(),delete i[e];for(var f in i)return;delete t.__transition}}function Df(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>rx&&i.state<sx,i.state=Af,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function PU(t){return this.each(function(){Df(this,t)})}function VU(t,e){var n,i;return function(){var r=ji(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,c=i.length;a<c;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function IU(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=ji(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var c={name:e,value:n},d=0,f=r.length;d<f;++d)if(r[d].name===e){r[d]=c;break}d===f&&r.push(c)}o.tween=r}}function HU(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=hi(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?VU:IU)(n,t,e))}function Hb(t,e,n){var i=t._id;return t.each(function(){var r=ji(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return hi(r,i).value[e]}}function KD(t,e){var n;return(typeof e=="number"?Ci:e instanceof yo?Rh:(n=yo(e))?(e=n,Rh):ID)(t,e)}function $U(t){return function(){this.removeAttribute(t)}}function UU(t){return function(){this.removeAttributeNS(t.space,t.local)}}function FU(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function qU(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function YU(t,e,n){var i,r,o;return function(){var a,c=n(this),d;return c==null?void this.removeAttribute(t):(a=this.getAttribute(t),d=c+"",a===d?null:a===i&&d===r?o:(r=d,o=e(i=a,c)))}}function KU(t,e,n){var i,r,o;return function(){var a,c=n(this),d;return c==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),d=c+"",a===d?null:a===i&&d===r?o:(r=d,o=e(i=a,c)))}}function GU(t,e){var n=mp(t),i=n==="transform"?MU:KD;return this.attrTween(t,typeof e=="function"?(n.local?KU:YU)(n,i,Hb(this,"attr."+t,e)):e==null?(n.local?UU:$U)(n):(n.local?qU:FU)(n,i,e))}function XU(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function WU(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ZU(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&WU(t,o)),n}return r._value=e,r}function QU(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&XU(t,o)),n}return r._value=e,r}function JU(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=mp(t);return this.tween(n,(i.local?ZU:QU)(i,e))}function eF(t,e){return function(){Ib(this,t).delay=+e.apply(this,arguments)}}function tF(t,e){return e=+e,function(){Ib(this,t).delay=e}}function nF(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?eF:tF)(e,t)):hi(this.node(),e).delay}function iF(t,e){return function(){ji(this,t).duration=+e.apply(this,arguments)}}function rF(t,e){return e=+e,function(){ji(this,t).duration=e}}function sF(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?iF:rF)(e,t)):hi(this.node(),e).duration}function oF(t,e){if(typeof e!="function")throw new Error;return function(){ji(this,t).ease=e}}function aF(t){var e=this._id;return arguments.length?this.each(oF(e,t)):hi(this.node(),e).ease}function lF(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ji(this,t).ease=n}}function cF(t){if(typeof t!="function")throw new Error;return this.each(lF(this._id,t))}function uF(t){typeof t!="function"&&(t=CD(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,c=i[r]=[],d,f=0;f<a;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new mr(i,this._parents,this._name,this._id)}function dF(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),c=0;c<o;++c)for(var d=e[c],f=n[c],p=d.length,m=a[c]=new Array(p),g,x=0;x<p;++x)(g=d[x]||f[x])&&(m[x]=g);for(;c<i;++c)a[c]=e[c];return new mr(a,this._parents,this._name,this._id)}function fF(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function hF(t,e,n){var i,r,o=fF(e)?Ib:ji;return function(){var a=o(this,t),c=a.on;c!==i&&(r=(i=c).copy()).on(e,n),a.on=r}}function pF(t,e){var n=this._id;return arguments.length<2?hi(this.node(),n).on.on(t):this.each(hF(n,t,e))}function mF(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function gF(){return this.on("end.remove",mF(this._id))}function yF(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Lb(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var c=i[a],d=c.length,f=o[a]=new Array(d),p,m,g=0;g<d;++g)(p=c[g])&&(m=t.call(p,p.__data__,g,c))&&("__data__"in p&&(m.__data__=p.__data__),f[g]=m,yp(f[g],e,n,g,f,hi(p,n)));return new mr(o,this._parents,e,n)}function xF(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ED(t));for(var i=this._groups,r=i.length,o=[],a=[],c=0;c<r;++c)for(var d=i[c],f=d.length,p,m=0;m<f;++m)if(p=d[m]){for(var g=t.call(p,p.__data__,m,d),x,S=hi(p,n),w=0,E=g.length;w<E;++w)(x=g[w])&&yp(x,e,n,w,g,S);o.push(g),a.push(p)}return new mr(o,a,e,n)}var bF=yu.prototype.constructor;function vF(){return new bF(this._groups,this._parents)}function SF(t,e){var n,i,r;return function(){var o=Ha(this,t),a=(this.style.removeProperty(t),Ha(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function GD(t){return function(){this.style.removeProperty(t)}}function wF(t,e,n){var i,r=n+"",o;return function(){var a=Ha(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function EF(t,e,n){var i,r,o;return function(){var a=Ha(this,t),c=n(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(t),Ha(this,t))),a===d?null:a===i&&d===r?o:(r=d,o=e(i=a,c))}}function CF(t,e){var n,i,r,o="style."+e,a="end."+o,c;return function(){var d=ji(this,t),f=d.on,p=d.value[o]==null?c||(c=GD(e)):void 0;(f!==n||r!==p)&&(i=(n=f).copy()).on(a,r=p),d.on=i}}function kF(t,e,n){var i=(t+="")=="transform"?TU:KD;return e==null?this.styleTween(t,SF(t,i)).on("end.style."+t,GD(t)):typeof e=="function"?this.styleTween(t,EF(t,i,Hb(this,"style."+t,e))).each(CF(this._id,t)):this.styleTween(t,wF(t,i,e),n).on("end.style."+t,null)}function TF(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function MF(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&TF(t,a,n)),i}return o._value=e,o}function NF(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,MF(t,e,n??""))}function AF(t){return function(){this.textContent=t}}function DF(t){return function(){var e=t(this);this.textContent=e??""}}function OF(t){return this.tween("text",typeof t=="function"?DF(Hb(this,"text",t)):AF(t==null?"":t+""))}function RF(t){return function(e){this.textContent=t.call(this,e)}}function jF(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&RF(r)),e}return i._value=t,i}function _F(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,jF(t))}function LF(){for(var t=this._name,e=this._id,n=XD(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],c=a.length,d,f=0;f<c;++f)if(d=a[f]){var p=hi(d,e);yp(d,t,n,f,a,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new mr(i,this._parents,t,n)}function zF(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var c={value:a},d={value:function(){--r===0&&o()}};n.each(function(){var f=ji(this,i),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(d)),f.on=e}),r===0&&o()})}var BF=0;function mr(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function XD(){return++BF}var sr=yu.prototype;mr.prototype={constructor:mr,select:yF,selectAll:xF,selectChild:sr.selectChild,selectChildren:sr.selectChildren,filter:uF,merge:dF,selection:vF,transition:LF,call:sr.call,nodes:sr.nodes,node:sr.node,size:sr.size,empty:sr.empty,each:sr.each,on:pF,attr:GU,attrTween:JU,style:kF,styleTween:NF,text:OF,textTween:_F,remove:gF,tween:HU,delay:nF,duration:sF,ease:aF,easeVarying:cF,end:zF,[Symbol.iterator]:sr[Symbol.iterator]};function PF(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var VF={time:null,delay:0,duration:250,ease:PF};function IF(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function HF(t){var e,n;t instanceof mr?(e=t._id,t=t._name):(e=XD(),(n=VF).time=Vb(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],c=a.length,d,f=0;f<c;++f)(d=a[f])&&yp(d,t,e,f,a,n||IF(d,e));return new mr(i,this._parents,t,e)}yu.prototype.interrupt=PU;yu.prototype.transition=HF;const uf=t=>()=>t;function $F(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function cr(t,e,n){this.k=t,this.x=e,this.y=n}cr.prototype={constructor:cr,scale:function(t){return t===1?this:new cr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new cr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var xp=new cr(1,0,0);WD.prototype=cr.prototype;function WD(t){for(;!t.__zoom;)if(!(t=t.parentNode))return xp;return t.__zoom}function Hy(t){t.stopImmediatePropagation()}function lc(t){t.preventDefault(),t.stopImmediatePropagation()}function UF(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function FF(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function t2(){return this.__zoom||xp}function qF(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function YF(){return navigator.maxTouchPoints||"ontouchstart"in this}function KF(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function ZD(){var t=UF,e=FF,n=KF,i=qF,r=YF,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],c=250,d=Mf,f=pp("start","zoom","end"),p,m,g,x=500,S=150,w=0,E=10;function C(z){z.property("__zoom",t2).on("wheel.zoom",B,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",ee).filter(r).on("touchstart.zoom",K).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",ne).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(z,U,R,L){var F=z.selection?z.selection():z;F.property("__zoom",t2),z!==F?D(z,U,R,L):F.interrupt().each(function(){_(this,arguments).event(L).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},C.scaleBy=function(z,U,R,L){C.scaleTo(z,function(){var F=this.__zoom.k,Y=typeof U=="function"?U.apply(this,arguments):U;return F*Y},R,L)},C.scaleTo=function(z,U,R,L){C.transform(z,function(){var F=e.apply(this,arguments),Y=this.__zoom,O=R==null?M(F):typeof R=="function"?R.apply(this,arguments):R,H=Y.invert(O),J=typeof U=="function"?U.apply(this,arguments):U;return n(k(N(Y,J),O,H),F,a)},R,L)},C.translateBy=function(z,U,R,L){C.transform(z,function(){return n(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof R=="function"?R.apply(this,arguments):R),e.apply(this,arguments),a)},null,L)},C.translateTo=function(z,U,R,L,F){C.transform(z,function(){var Y=e.apply(this,arguments),O=this.__zoom,H=L==null?M(Y):typeof L=="function"?L.apply(this,arguments):L;return n(xp.translate(H[0],H[1]).scale(O.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof R=="function"?-R.apply(this,arguments):-R),Y,a)},L,F)};function N(z,U){return U=Math.max(o[0],Math.min(o[1],U)),U===z.k?z:new cr(U,z.x,z.y)}function k(z,U,R){var L=U[0]-R[0]*z.k,F=U[1]-R[1]*z.k;return L===z.x&&F===z.y?z:new cr(z.k,L,F)}function M(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function D(z,U,R,L){z.on("start.zoom",function(){_(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(L).end()}).tween("zoom",function(){var F=this,Y=arguments,O=_(F,Y).event(L),H=e.apply(F,Y),J=R==null?M(H):typeof R=="function"?R.apply(F,Y):R,te=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),re=F.__zoom,he=typeof U=="function"?U.apply(F,Y):U,fe=d(re.invert(J).concat(te/re.k),he.invert(J).concat(te/he.k));return function(me){if(me===1)me=he;else{var le=fe(me),ye=te/le[2];me=new cr(ye,J[0]-le[0]*ye,J[1]-le[1]*ye)}O.zoom(null,me)}})}function _(z,U,R){return!R&&z.__zooming||new P(z,U)}function P(z,U){this.that=z,this.args=U,this.active=0,this.sourceEvent=null,this.extent=e.apply(z,U),this.taps=0}P.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,U){return this.mouse&&z!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var U=_n(this.that).datum();f.call(z,this.that,new $F(z,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:f}),U)}};function B(z,...U){if(!t.apply(this,arguments))return;var R=_(this,U).event(z),L=this.__zoom,F=Math.max(o[0],Math.min(o[1],L.k*Math.pow(2,i.apply(this,arguments)))),Y=li(z);if(R.wheel)(R.mouse[0][0]!==Y[0]||R.mouse[0][1]!==Y[1])&&(R.mouse[1]=L.invert(R.mouse[0]=Y)),clearTimeout(R.wheel);else{if(L.k===F)return;R.mouse=[Y,L.invert(Y)],Df(this),R.start()}lc(z),R.wheel=setTimeout(O,S),R.zoom("mouse",n(k(N(L,F),R.mouse[0],R.mouse[1]),R.extent,a));function O(){R.wheel=null,R.end()}}function I(z,...U){if(g||!t.apply(this,arguments))return;var R=z.currentTarget,L=_(this,U,!0).event(z),F=_n(z.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",te,!0),Y=li(z,R),O=z.clientX,H=z.clientY;_D(z.view),Hy(z),L.mouse=[Y,this.__zoom.invert(Y)],Df(this),L.start();function J(re){if(lc(re),!L.moved){var he=re.clientX-O,fe=re.clientY-H;L.moved=he*he+fe*fe>w}L.event(re).zoom("mouse",n(k(L.that.__zoom,L.mouse[0]=li(re,R),L.mouse[1]),L.extent,a))}function te(re){F.on("mousemove.zoom mouseup.zoom",null),LD(re.view,L.moved),lc(re),L.event(re).end()}}function ee(z,...U){if(t.apply(this,arguments)){var R=this.__zoom,L=li(z.changedTouches?z.changedTouches[0]:z,this),F=R.invert(L),Y=R.k*(z.shiftKey?.5:2),O=n(k(N(R,Y),L,F),e.apply(this,U),a);lc(z),c>0?_n(this).transition().duration(c).call(D,O,L,z):_n(this).call(C.transform,O,L,z)}}function K(z,...U){if(t.apply(this,arguments)){var R=z.touches,L=R.length,F=_(this,U,z.changedTouches.length===L).event(z),Y,O,H,J;for(Hy(z),O=0;O<L;++O)H=R[O],J=li(H,this),J=[J,this.__zoom.invert(J),H.identifier],F.touch0?!F.touch1&&F.touch0[2]!==J[2]&&(F.touch1=J,F.taps=0):(F.touch0=J,Y=!0,F.taps=1+!!p);p&&(p=clearTimeout(p)),Y&&(F.taps<2&&(m=J[0],p=setTimeout(function(){p=null},x)),Df(this),F.start())}}function W(z,...U){if(this.__zooming){var R=_(this,U).event(z),L=z.changedTouches,F=L.length,Y,O,H,J;for(lc(z),Y=0;Y<F;++Y)O=L[Y],H=li(O,this),R.touch0&&R.touch0[2]===O.identifier?R.touch0[0]=H:R.touch1&&R.touch1[2]===O.identifier&&(R.touch1[0]=H);if(O=R.that.__zoom,R.touch1){var te=R.touch0[0],re=R.touch0[1],he=R.touch1[0],fe=R.touch1[1],me=(me=he[0]-te[0])*me+(me=he[1]-te[1])*me,le=(le=fe[0]-re[0])*le+(le=fe[1]-re[1])*le;O=N(O,Math.sqrt(me/le)),H=[(te[0]+he[0])/2,(te[1]+he[1])/2],J=[(re[0]+fe[0])/2,(re[1]+fe[1])/2]}else if(R.touch0)H=R.touch0[0],J=R.touch0[1];else return;R.zoom("touch",n(k(O,H,J),R.extent,a))}}function ne(z,...U){if(this.__zooming){var R=_(this,U).event(z),L=z.changedTouches,F=L.length,Y,O;for(Hy(z),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),Y=0;Y<F;++Y)O=L[Y],R.touch0&&R.touch0[2]===O.identifier?delete R.touch0:R.touch1&&R.touch1[2]===O.identifier&&delete R.touch1;if(R.touch1&&!R.touch0&&(R.touch0=R.touch1,delete R.touch1),R.touch0)R.touch0[1]=this.__zoom.invert(R.touch0[0]);else if(R.end(),R.taps===2&&(O=li(O,this),Math.hypot(m[0]-O[0],m[1]-O[1])<E)){var H=_n(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return C.wheelDelta=function(z){return arguments.length?(i=typeof z=="function"?z:uf(+z),C):i},C.filter=function(z){return arguments.length?(t=typeof z=="function"?z:uf(!!z),C):t},C.touchable=function(z){return arguments.length?(r=typeof z=="function"?z:uf(!!z),C):r},C.extent=function(z){return arguments.length?(e=typeof z=="function"?z:uf([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),C):e},C.scaleExtent=function(z){return arguments.length?(o[0]=+z[0],o[1]=+z[1],C):[o[0],o[1]]},C.translateExtent=function(z){return arguments.length?(a[0][0]=+z[0][0],a[1][0]=+z[1][0],a[0][1]=+z[0][1],a[1][1]=+z[1][1],C):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},C.constrain=function(z){return arguments.length?(n=z,C):n},C.duration=function(z){return arguments.length?(c=+z,C):c},C.interpolate=function(z){return arguments.length?(d=z,C):d},C.on=function(){var z=f.on.apply(f,arguments);return z===f?C:z},C.clickDistance=function(z){return arguments.length?(w=(z=+z)*z,C):Math.sqrt(w)},C.tapDistance=function(z){return arguments.length?(E=+z,C):E},C}const Ri={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:i}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},nu=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],QD=["Enter"," ","Escape"],JD={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var bo;(function(t){t.Strict="strict",t.Loose="loose"})(bo||(bo={}));var uo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(uo||(uo={}));var iu;(function(t){t.Partial="partial",t.Full="full"})(iu||(iu={}));const eO={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var ts;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(ts||(ts={}));var zh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(zh||(zh={}));var ve;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ve||(ve={}));const n2={[ve.Left]:ve.Right,[ve.Right]:ve.Left,[ve.Top]:ve.Bottom,[ve.Bottom]:ve.Top};function tO(t){return t===null?null:t?"valid":"invalid"}const nO=t=>"id"in t&&"source"in t&&"target"in t,GF=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),$b=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),bu=(t,e=[0,0])=>{const{width:n,height:i}=yr(t),r=t.origin??e,o=n*r[0],a=i*r[1];return{x:t.position.x-o,y:t.position.y-a}},XF=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,r)=>{const o=typeof r=="string";let a=!e.nodeLookup&&!o?r:void 0;e.nodeLookup&&(a=o?e.nodeLookup.get(r):$b(r)?r:e.nodeLookup.get(r.id));const c=a?Bh(a,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return bp(i,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return vp(n)},vu=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter===void 0||e.filter(i)){const r=Bh(i);n=bp(n,r)}}),vp(n)},Ub=(t,e,[n,i,r]=[0,0,1],o=!1,a=!1)=>{const c={...wu(e,[n,i,r]),width:e.width/r,height:e.height/r},d=[];for(const f of t.values()){const{measured:p,selectable:m=!0,hidden:g=!1}=f;if(a&&!m||g)continue;const x=p.width??f.width??f.initialWidth??null,S=p.height??f.height??f.initialHeight??null,w=ru(c,Fa(f)),E=(x??0)*(S??0),C=o&&w>0;(!f.internals.handleBounds||C||w>=E||f.dragging)&&d.push(f)}return d},WF=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function ZF(t,e){const n=new Map,i=e?.nodes?new Set(e.nodes.map(r=>r.id)):null;return t.forEach(r=>{r.measured.width&&r.measured.height&&(e?.includeHiddenNodes||!r.hidden)&&(!i||i.has(r.id))&&n.set(r.id,r)}),n}async function QF({nodes:t,width:e,height:n,panZoom:i,minZoom:r,maxZoom:o},a){if(t.size===0)return Promise.resolve(!0);const c=ZF(t,a),d=vu(c),f=Fb(d,e,n,a?.minZoom??r,a?.maxZoom??o,a?.padding??.1);return await i.setViewport(f,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function iO({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const a=n.get(t),c=a.parentId?n.get(a.parentId):void 0,{x:d,y:f}=c?c.internals.positionAbsolute:{x:0,y:0},p=a.origin??i;let m=a.extent||r;if(a.extent==="parent"&&!a.expandParent)if(!c)o?.("005",Ri.error005());else{const x=c.measured.width,S=c.measured.height;x&&S&&(m=[[d,f],[d+x,f+S]])}else c&&qa(a.extent)&&(m=[[a.extent[0][0]+d,a.extent[0][1]+f],[a.extent[1][0]+d,a.extent[1][1]+f]]);const g=qa(m)?vo(e,m,a.measured):e;return(a.measured.width===void 0||a.measured.height===void 0)&&o?.("015",Ri.error015()),{position:{x:g.x-d+(a.measured.width??0)*p[0],y:g.y-f+(a.measured.height??0)*p[1]},positionAbsolute:g}}async function JF({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(t.map(g=>g.id)),a=[];for(const g of n){if(g.deletable===!1)continue;const x=o.has(g.id),S=!x&&g.parentId&&a.find(w=>w.id===g.parentId);(x||S)&&a.push(g)}const c=new Set(e.map(g=>g.id)),d=i.filter(g=>g.deletable!==!1),p=WF(a,d);for(const g of d)c.has(g.id)&&!p.find(S=>S.id===g.id)&&p.push(g);if(!r)return{edges:p,nodes:a};const m=await r({nodes:a,edges:p});return typeof m=="boolean"?m?{edges:p,nodes:a}:{edges:[],nodes:[]}:m}const Ua=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),vo=(t={x:0,y:0},e,n)=>({x:Ua(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Ua(t.y,e[0][1],e[1][1]-(n?.height??0))});function rO(t,e,n){const{width:i,height:r}=yr(n),{x:o,y:a}=n.internals.positionAbsolute;return vo(t,[[o,a],[o+i,a+r]],e)}const i2=(t,e,n)=>t<e?Ua(Math.abs(t-e),1,e)/e:t>n?-Ua(Math.abs(t-n),1,e)/e:0,sO=(t,e,n=15,i=40)=>{const r=i2(t.x,i,e.width-i)*n,o=i2(t.y,i,e.height-i)*n;return[r,o]},bp=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),ox=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),vp=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),Fa=(t,e=[0,0])=>{const{x:n,y:i}=$b(t)?t.internals.positionAbsolute:bu(t,e);return{x:n,y:i,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},Bh=(t,e=[0,0])=>{const{x:n,y:i}=$b(t)?t.internals.positionAbsolute:bu(t,e);return{x:n,y:i,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:i+(t.measured?.height??t.height??t.initialHeight??0)}},oO=(t,e)=>vp(bp(ox(t),ox(e))),ru=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},r2=t=>fi(t.width)&&fi(t.height)&&fi(t.x)&&fi(t.y),fi=t=>!isNaN(t)&&isFinite(t),eq=(t,e)=>{},Su=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),wu=({x:t,y:e},[n,i,r],o=!1,a=[1,1])=>{const c={x:(t-n)/r,y:(e-i)/r};return o?Su(c,a):c},Ph=({x:t,y:e},[n,i,r])=>({x:t*r+n,y:e*r+i});function pa(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function tq(t,e,n){if(typeof t=="string"||typeof t=="number"){const i=pa(t,n),r=pa(t,e);return{top:i,right:r,bottom:i,left:r,x:r*2,y:i*2}}if(typeof t=="object"){const i=pa(t.top??t.y??0,n),r=pa(t.bottom??t.y??0,n),o=pa(t.left??t.x??0,e),a=pa(t.right??t.x??0,e);return{top:i,right:a,bottom:r,left:o,x:o+a,y:i+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function nq(t,e,n,i,r,o){const{x:a,y:c}=Ph(t,[e,n,i]),{x:d,y:f}=Ph({x:t.x+t.width,y:t.y+t.height},[e,n,i]),p=r-d,m=o-f;return{left:Math.floor(a),top:Math.floor(c),right:Math.floor(p),bottom:Math.floor(m)}}const Fb=(t,e,n,i,r,o)=>{const a=tq(o,e,n),c=(e-a.x)/t.width,d=(n-a.y)/t.height,f=Math.min(c,d),p=Ua(f,i,r),m=t.x+t.width/2,g=t.y+t.height/2,x=e/2-m*p,S=n/2-g*p,w=nq(t,x,S,p,e,n),E={left:Math.min(w.left-a.left,0),top:Math.min(w.top-a.top,0),right:Math.min(w.right-a.right,0),bottom:Math.min(w.bottom-a.bottom,0)};return{x:x-E.left+E.right,y:S-E.top+E.bottom,zoom:p}},su=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function qa(t){return t!=null&&t!=="parent"}function yr(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function aO(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function lO(t,e={width:0,height:0},n,i,r){const o={...t},a=i.get(n);if(a){const c=a.origin||r;o.x+=a.internals.positionAbsolute.x-(e.width??0)*c[0],o.y+=a.internals.positionAbsolute.y-(e.height??0)*c[1]}return o}function s2(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function iq(){let t,e;return{promise:new Promise((i,r)=>{t=i,e=r}),resolve:t,reject:e}}function rq(t){return{...JD,...t||{}}}function Rc(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i,containerBounds:r}){const{x:o,y:a}=Ti(t),c=wu({x:o-(r?.left??0),y:a-(r?.top??0)},i),{x:d,y:f}=n?Su(c,e):c;return{xSnapped:d,ySnapped:f,...c}}const qb=t=>({width:t.offsetWidth,height:t.offsetHeight}),cO=t=>t?.getRootNode?.()||window?.document,sq=["INPUT","SELECT","TEXTAREA"];function uO(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:sq.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const dO=t=>"clientX"in t,Ti=(t,e)=>{const n=dO(t),i=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:i-(e?.left??0),y:r-(e?.top??0)}},o2=(t,e,n,i,r)=>{const o=e.querySelectorAll(`.${t}`);return!o||!o.length?null:Array.from(o).map(a=>{const c=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:t,nodeId:r,position:a.getAttribute("data-handlepos"),x:(c.left-n.left)/i,y:(c.top-n.top)/i,...qb(a)}})};function fO({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:a,targetControlY:c}){const d=t*.125+r*.375+a*.375+n*.125,f=e*.125+o*.375+c*.375+i*.125,p=Math.abs(d-t),m=Math.abs(f-e);return[d,f,p,m]}function df(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function a2({pos:t,x1:e,y1:n,x2:i,y2:r,c:o}){switch(t){case ve.Left:return[e-df(e-i,o),n];case ve.Right:return[e+df(i-e,o),n];case ve.Top:return[e,n-df(n-r,o)];case ve.Bottom:return[e,n+df(r-n,o)]}}function Yb({sourceX:t,sourceY:e,sourcePosition:n=ve.Bottom,targetX:i,targetY:r,targetPosition:o=ve.Top,curvature:a=.25}){const[c,d]=a2({pos:n,x1:t,y1:e,x2:i,y2:r,c:a}),[f,p]=a2({pos:o,x1:i,y1:r,x2:t,y2:e,c:a}),[m,g,x,S]=fO({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${t},${e} C${c},${d} ${f},${p} ${i},${r}`,m,g,x,S]}function Kb({sourceX:t,sourceY:e,targetX:n,targetY:i}){const r=Math.abs(n-t)/2,o=n<t?n+r:n-r,a=Math.abs(i-e)/2,c=i<e?i+a:i-a;return[o,c,r,a]}function oq({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i,elevateOnSelect:r=!1}){if(i!==void 0)return i;const o=r&&n?1e3:0,a=Math.max(t.parentId?t.internals.z:0,e.parentId?e.internals.z:0);return o+a}function aq({sourceNode:t,targetNode:e,width:n,height:i,transform:r}){const o=bp(Bh(t),Bh(e));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return ru(a,vp(o))>0}const lq=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||""}-${n}${i||""}`,cq=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),hO=(t,e)=>{if(!t.source||!t.target)return e;let n;return nO(t)?n={...t}:n={...t,id:lq(t)},cq(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function pO({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[r,o,a,c]=Kb({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,r,o,a,c]}const l2={[ve.Left]:{x:-1,y:0},[ve.Right]:{x:1,y:0},[ve.Top]:{x:0,y:-1},[ve.Bottom]:{x:0,y:1}},uq=({source:t,sourcePosition:e=ve.Bottom,target:n})=>e===ve.Left||e===ve.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},c2=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function dq({source:t,sourcePosition:e=ve.Bottom,target:n,targetPosition:i=ve.Top,center:r,offset:o,stepPosition:a}){const c=l2[e],d=l2[i],f={x:t.x+c.x*o,y:t.y+c.y*o},p={x:n.x+d.x*o,y:n.y+d.y*o},m=uq({source:f,sourcePosition:e,target:p}),g=m.x!==0?"x":"y",x=m[g];let S=[],w,E;const C={x:0,y:0},N={x:0,y:0},[,,k,M]=Kb({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(c[g]*d[g]===-1){g==="x"?(w=r.x??f.x+(p.x-f.x)*a,E=r.y??(f.y+p.y)/2):(w=r.x??(f.x+p.x)/2,E=r.y??f.y+(p.y-f.y)*a);const _=[{x:w,y:f.y},{x:w,y:p.y}],P=[{x:f.x,y:E},{x:p.x,y:E}];c[g]===x?S=g==="x"?_:P:S=g==="x"?P:_}else{const _=[{x:f.x,y:p.y}],P=[{x:p.x,y:f.y}];if(g==="x"?S=c.x===x?P:_:S=c.y===x?_:P,e===i){const W=Math.abs(t[g]-n[g]);if(W<=o){const ne=Math.min(o-1,o-W);c[g]===x?C[g]=(f[g]>t[g]?-1:1)*ne:N[g]=(p[g]>n[g]?-1:1)*ne}}if(e!==i){const W=g==="x"?"y":"x",ne=c[g]===d[W],z=f[W]>p[W],U=f[W]<p[W];(c[g]===1&&(!ne&&z||ne&&U)||c[g]!==1&&(!ne&&U||ne&&z))&&(S=g==="x"?_:P)}const B={x:f.x+C.x,y:f.y+C.y},I={x:p.x+N.x,y:p.y+N.y},ee=Math.max(Math.abs(B.x-S[0].x),Math.abs(I.x-S[0].x)),K=Math.max(Math.abs(B.y-S[0].y),Math.abs(I.y-S[0].y));ee>=K?(w=(B.x+I.x)/2,E=S[0].y):(w=S[0].x,E=(B.y+I.y)/2)}return[[t,{x:f.x+C.x,y:f.y+C.y},...S,{x:p.x+N.x,y:p.y+N.y},n],w,E,k,M]}function fq(t,e,n,i){const r=Math.min(c2(t,e)/2,c2(e,n)/2,i),{x:o,y:a}=e;if(t.x===o&&o===n.x||t.y===a&&a===n.y)return`L${o} ${a}`;if(t.y===a){const f=t.x<n.x?-1:1,p=t.y<n.y?1:-1;return`L ${o+r*f},${a}Q ${o},${a} ${o},${a+r*p}`}const c=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${o},${a+r*d}Q ${o},${a} ${o+r*c},${a}`}function ax({sourceX:t,sourceY:e,sourcePosition:n=ve.Bottom,targetX:i,targetY:r,targetPosition:o=ve.Top,borderRadius:a=5,centerX:c,centerY:d,offset:f=20,stepPosition:p=.5}){const[m,g,x,S,w]=dq({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:c,y:d},offset:f,stepPosition:p});return[m.reduce((C,N,k)=>{let M="";return k>0&&k<m.length-1?M=fq(m[k-1],N,m[k+1],a):M=`${k===0?"M":"L"}${N.x} ${N.y}`,C+=M,C},""),g,x,S,w]}function u2(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function hq(t){const{sourceNode:e,targetNode:n}=t;if(!u2(e)||!u2(n))return null;const i=e.internals.handleBounds||d2(e.handles),r=n.internals.handleBounds||d2(n.handles),o=f2(i?.source??[],t.sourceHandle),a=f2(t.connectionMode===bo.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),t.targetHandle);if(!o||!a)return t.onError?.("008",Ri.error008(o?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const c=o?.position||ve.Bottom,d=a?.position||ve.Top,f=ou(e,o,c),p=ou(n,a,d);return{sourceX:f.x,sourceY:f.y,targetX:p.x,targetY:p.y,sourcePosition:c,targetPosition:d}}function d2(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type==="source"?e.push(i):i.type==="target"&&n.push(i);return{source:e,target:n}}function ou(t,e,n=ve.Left,i=!1){const r=(e?.x??0)+t.internals.positionAbsolute.x,o=(e?.y??0)+t.internals.positionAbsolute.y,{width:a,height:c}=e??yr(t);if(i)return{x:r+a/2,y:o+c/2};switch(e?.position??n){case ve.Top:return{x:r+a/2,y:o};case ve.Right:return{x:r+a,y:o+c/2};case ve.Bottom:return{x:r+a/2,y:o+c};case ve.Left:return{x:r,y:o+c/2}}}function f2(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function lx(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`:""}function pq(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return t.reduce((a,c)=>([c.markerStart||i,c.markerEnd||r].forEach(d=>{if(d&&typeof d=="object"){const f=lx(d,e);o.has(f)||(a.push({id:f,color:d.color||n,...d}),o.add(f))}}),a),[]).sort((a,c)=>a.id.localeCompare(c.id))}const Gb={nodeOrigin:[0,0],nodeExtent:nu,elevateNodesOnSelect:!0,defaults:{}},mq={...Gb,checkEquality:!0};function Xb(t,e){const n={...t};for(const i in e)e[i]!==void 0&&(n[i]=e[i]);return n}function gq(t,e,n){const i=Xb(Gb,n);for(const r of t.values())if(r.parentId)Wb(r,t,e,i);else{const o=bu(r,i.nodeOrigin),a=qa(r.extent)?r.extent:i.nodeExtent,c=vo(o,a,yr(r));r.internals.positionAbsolute=c}}function cx(t,e,n,i){const r=Xb(mq,i);let o=t.length>0;const a=new Map(e),c=r?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const d of t){let f=a.get(d.id);if(r.checkEquality&&d===f?.internals.userNode)e.set(d.id,f);else{const p=bu(d,r.nodeOrigin),m=qa(d.extent)?d.extent:r.nodeExtent,g=vo(p,m,yr(d));f={...r.defaults,...d,measured:{width:d.measured?.width,height:d.measured?.height},internals:{positionAbsolute:g,handleBounds:d.measured?f?.internals.handleBounds:void 0,z:mO(d,c),userNode:d}},e.set(d.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(o=!1),d.parentId&&Wb(f,e,n,i)}return o}function yq(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function Wb(t,e,n,i){const{elevateNodesOnSelect:r,nodeOrigin:o,nodeExtent:a}=Xb(Gb,i),c=t.parentId,d=e.get(c);if(!d){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}yq(t,n);const f=r?1e3:0,{x:p,y:m,z:g}=xq(t,d,o,a,f),{positionAbsolute:x}=t.internals,S=p!==x.x||m!==x.y;(S||g!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:S?{x:p,y:m}:x,z:g}})}function mO(t,e){return(fi(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function xq(t,e,n,i,r){const{x:o,y:a}=e.internals.positionAbsolute,c=yr(t),d=bu(t,n),f=qa(t.extent)?vo(d,t.extent,c):d;let p=vo({x:o+f.x,y:a+f.y},i,c);t.extent==="parent"&&(p=rO(p,c,e));const m=mO(t,r),g=e.internals.z??0;return{x:p.x,y:p.y,z:g>=m?g+1:m}}function Zb(t,e,n,i=[0,0]){const r=[],o=new Map;for(const a of t){const c=e.get(a.parentId);if(!c)continue;const d=o.get(a.parentId)?.expandedRect??Fa(c),f=oO(d,a.rect);o.set(a.parentId,{expandedRect:f,parent:c})}return o.size>0&&o.forEach(({expandedRect:a,parent:c},d)=>{const f=c.internals.positionAbsolute,p=yr(c),m=c.origin??i,g=a.x<f.x?Math.round(Math.abs(f.x-a.x)):0,x=a.y<f.y?Math.round(Math.abs(f.y-a.y)):0,S=Math.max(p.width,Math.round(a.width)),w=Math.max(p.height,Math.round(a.height)),E=(S-p.width)*m[0],C=(w-p.height)*m[1];(g>0||x>0||E||C)&&(r.push({id:d,type:"position",position:{x:c.position.x-g+E,y:c.position.y-x+C}}),n.get(d)?.forEach(N=>{t.some(k=>k.id===N.id)||r.push({id:N.id,type:"position",position:{x:N.position.x+g,y:N.position.y+x}})})),(p.width<a.width||p.height<a.height||g||x)&&r.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:S+(g?m[0]*g-E:0),height:w+(x?m[1]*x-C:0)}})}),r}function bq(t,e,n,i,r,o){const a=i?.querySelector(".xyflow__viewport");let c=!1;if(!a)return{changes:[],updatedInternals:c};const d=[],f=window.getComputedStyle(a),{m22:p}=new window.DOMMatrixReadOnly(f.transform),m=[];for(const g of t.values()){const x=e.get(g.id);if(!x)continue;if(x.hidden){e.set(x.id,{...x,internals:{...x.internals,handleBounds:void 0}}),c=!0;continue}const S=qb(g.nodeElement),w=x.measured.width!==S.width||x.measured.height!==S.height;if(!!(S.width&&S.height&&(w||!x.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),N=qa(x.extent)?x.extent:o;let{positionAbsolute:k}=x.internals;x.parentId&&x.extent==="parent"?k=rO(k,S,e.get(x.parentId)):N&&(k=vo(k,N,S));const M={...x,measured:S,internals:{...x.internals,positionAbsolute:k,handleBounds:{source:o2("source",g.nodeElement,C,p,x.id),target:o2("target",g.nodeElement,C,p,x.id)}}};e.set(x.id,M),x.parentId&&Wb(M,e,n,{nodeOrigin:r}),c=!0,w&&(d.push({id:x.id,type:"dimensions",dimensions:S}),x.expandParent&&x.parentId&&m.push({id:x.id,parentId:x.parentId,rect:Fa(M,r)}))}}if(m.length>0){const g=Zb(m,e,n,r);d.push(...g)}return{changes:d,updatedInternals:c}}async function vq({delta:t,panZoom:e,transform:n,translateExtent:i,width:r,height:o}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const a=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,o]],i),c=!!a&&(a.x!==n[0]||a.y!==n[1]||a.k!==n[2]);return Promise.resolve(c)}function h2(t,e,n,i,r,o){let a=r;const c=i.get(a)||new Map;i.set(a,c.set(n,e)),a=`${r}-${t}`;const d=i.get(a)||new Map;if(i.set(a,d.set(n,e)),o){a=`${r}-${t}-${o}`;const f=i.get(a)||new Map;i.set(a,f.set(n,e))}}function gO(t,e,n){t.clear(),e.clear();for(const i of n){const{source:r,target:o,sourceHandle:a=null,targetHandle:c=null}=i,d={edgeId:i.id,source:r,target:o,sourceHandle:a,targetHandle:c},f=`${r}-${a}--${o}-${c}`,p=`${o}-${c}--${r}-${a}`;h2("source",d,p,t,r,a),h2("target",d,f,t,o,c),e.set(i.id,i)}}function yO(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:yO(n,e):!1}function p2(t,e,n){let i=t;do{if(i?.matches?.(e))return!0;if(i===n)return!1;i=i?.parentElement}while(i);return!1}function Sq(t,e,n,i){const r=new Map;for(const[o,a]of t)if((a.selected||a.id===i)&&(!a.parentId||!yO(a,t))&&(a.draggable||e&&typeof a.draggable>"u")){const c=t.get(o);c&&r.set(o,{id:o,position:c.position||{x:0,y:0},distance:{x:n.x-c.internals.positionAbsolute.x,y:n.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return r}function $y({nodeId:t,dragItems:e,nodeLookup:n,dragging:i=!0}){const r=[];for(const[a,c]of e){const d=n.get(a)?.internals.userNode;d&&r.push({...d,position:c.position,dragging:i})}if(!t)return[r[0],r];const o=n.get(t)?.internals.userNode;return[o?{...o,position:e.get(t)?.position||o.position,dragging:i}:r[0],r]}function wq({dragItems:t,snapGrid:e,x:n,y:i}){const r=t.values().next().value;if(!r)return null;const o={x:n-r.distance.x,y:i-r.distance.y},a=Su(o,e);return{x:a.x-o.x,y:a.y-o.y}}function Eq({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},a=0,c=new Map,d=!1,f={x:0,y:0},p=null,m=!1,g=null,x=!1,S=!1,w=null;function E({noDragClassName:N,handleSelector:k,domNode:M,isSelectable:D,nodeId:_,nodeClickDistance:P=0}){g=_n(M);function B({x:W,y:ne}){const{nodeLookup:z,nodeExtent:U,snapGrid:R,snapToGrid:L,nodeOrigin:F,onNodeDrag:Y,onSelectionDrag:O,onError:H,updateNodePositions:J}=e();o={x:W,y:ne};let te=!1;const re=c.size>1,he=re&&U?ox(vu(c)):null,fe=re&&L?wq({dragItems:c,snapGrid:R,x:W,y:ne}):null;for(const[me,le]of c){if(!z.has(me))continue;let ye={x:W-le.distance.x,y:ne-le.distance.y};L&&(ye=fe?{x:Math.round(ye.x+fe.x),y:Math.round(ye.y+fe.y)}:Su(ye,R));let Ie=null;if(re&&U&&!le.extent&&he){const{positionAbsolute:Ae}=le.internals,Te=Ae.x-he.x+U[0][0],We=Ae.x+le.measured.width-he.x2+U[1][0],Lt=Ae.y-he.y+U[0][1],lt=Ae.y+le.measured.height-he.y2+U[1][1];Ie=[[Te,Lt],[We,lt]]}const{position:Fe,positionAbsolute:Ce}=iO({nodeId:me,nextPosition:ye,nodeLookup:z,nodeExtent:Ie||U,nodeOrigin:F,onError:H});te=te||le.position.x!==Fe.x||le.position.y!==Fe.y,le.position=Fe,le.internals.positionAbsolute=Ce}if(S=S||te,!!te&&(J(c,!0),w&&(i||Y||!_&&O))){const[me,le]=$y({nodeId:_,dragItems:c,nodeLookup:z});i?.(w,c,me,le),Y?.(w,me,le),_||O?.(w,le)}}async function I(){if(!p)return;const{transform:W,panBy:ne,autoPanSpeed:z,autoPanOnNodeDrag:U}=e();if(!U){d=!1,cancelAnimationFrame(a);return}const[R,L]=sO(f,p,z);(R!==0||L!==0)&&(o.x=(o.x??0)-R/W[2],o.y=(o.y??0)-L/W[2],await ne({x:R,y:L})&&B(o)),a=requestAnimationFrame(I)}function ee(W){const{nodeLookup:ne,multiSelectionActive:z,nodesDraggable:U,transform:R,snapGrid:L,snapToGrid:F,selectNodesOnDrag:Y,onNodeDragStart:O,onSelectionDragStart:H,unselectNodesAndEdges:J}=e();m=!0,(!Y||!D)&&!z&&_&&(ne.get(_)?.selected||J()),D&&Y&&_&&t?.(_);const te=Rc(W.sourceEvent,{transform:R,snapGrid:L,snapToGrid:F,containerBounds:p});if(o=te,c=Sq(ne,U,te,_),c.size>0&&(n||O||!_&&H)){const[re,he]=$y({nodeId:_,dragItems:c,nodeLookup:ne});n?.(W.sourceEvent,c,re,he),O?.(W.sourceEvent,re,he),_||H?.(W.sourceEvent,he)}}const K=zD().clickDistance(P).on("start",W=>{const{domNode:ne,nodeDragThreshold:z,transform:U,snapGrid:R,snapToGrid:L}=e();p=ne?.getBoundingClientRect()||null,x=!1,S=!1,w=W.sourceEvent,z===0&&ee(W),o=Rc(W.sourceEvent,{transform:U,snapGrid:R,snapToGrid:L,containerBounds:p}),f=Ti(W.sourceEvent,p)}).on("drag",W=>{const{autoPanOnNodeDrag:ne,transform:z,snapGrid:U,snapToGrid:R,nodeDragThreshold:L,nodeLookup:F}=e(),Y=Rc(W.sourceEvent,{transform:z,snapGrid:U,snapToGrid:R,containerBounds:p});if(w=W.sourceEvent,(W.sourceEvent.type==="touchmove"&&W.sourceEvent.touches.length>1||_&&!F.has(_))&&(x=!0),!x){if(!d&&ne&&m&&(d=!0,I()),!m){const O=Y.xSnapped-(o.x??0),H=Y.ySnapped-(o.y??0);Math.sqrt(O*O+H*H)>L&&ee(W)}(o.x!==Y.xSnapped||o.y!==Y.ySnapped)&&c&&m&&(f=Ti(W.sourceEvent,p),B(Y))}}).on("end",W=>{if(!(!m||x)&&(d=!1,m=!1,cancelAnimationFrame(a),c.size>0)){const{nodeLookup:ne,updateNodePositions:z,onNodeDragStop:U,onSelectionDragStop:R}=e();if(S&&(z(c,!1),S=!1),r||U||!_&&R){const[L,F]=$y({nodeId:_,dragItems:c,nodeLookup:ne,dragging:!1});r?.(W.sourceEvent,c,L,F),U?.(W.sourceEvent,L,F),_||R?.(W.sourceEvent,F)}}}).filter(W=>{const ne=W.target;return!W.button&&(!N||!p2(ne,`.${N}`,M))&&(!k||p2(ne,k,M))});g.call(K)}function C(){g?.on(".drag",null)}return{update:E,destroy:C}}function Cq(t,e,n){const i=[],r={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const o of e.values())ru(r,Fa(o))>0&&i.push(o);return i}const kq=250;function Tq(t,e,n,i){let r=[],o=1/0;const a=Cq(t,n,e+kq);for(const c of a){const d=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const f of d){if(i.nodeId===f.nodeId&&i.type===f.type&&i.id===f.id)continue;const{x:p,y:m}=ou(c,f,f.position,!0),g=Math.sqrt(Math.pow(p-t.x,2)+Math.pow(m-t.y,2));g>e||(g<o?(r=[{...f,x:p,y:m}],o=g):g===o&&r.push({...f,x:p,y:m}))}}if(!r.length)return null;if(r.length>1){const c=i.type==="source"?"target":"source";return r.find(d=>d.type===c)??r[0]}return r[0]}function xO(t,e,n,i,r,o=!1){const a=i.get(t);if(!a)return null;const c=r==="strict"?a.internals.handleBounds?.[e]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&o?{...d,...ou(a,d,d.position,!0)}:d}function bO(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Mq(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const vO=()=>!0;function Nq(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:a,domNode:c,nodeLookup:d,lib:f,autoPanOnConnect:p,flowId:m,panBy:g,cancelConnection:x,onConnectStart:S,onConnect:w,onConnectEnd:E,isValidConnection:C=vO,onReconnectEnd:N,updateConnection:k,getTransform:M,getFromHandle:D,autoPanSpeed:_,dragThreshold:P=1,handleDomNode:B}){const I=cO(t.target);let ee=0,K;const{x:W,y:ne}=Ti(t),z=bO(o,B),U=c?.getBoundingClientRect();let R=!1;if(!U||!z)return;const L=xO(r,z,i,d,e);if(!L)return;let F=Ti(t,U),Y=!1,O=null,H=!1,J=null;function te(){if(!p||!U)return;const[Fe,Ce]=sO(F,U,_);g({x:Fe,y:Ce}),ee=requestAnimationFrame(te)}const re={...L,nodeId:r,type:z,position:L.position},he=d.get(r);let me={inProgress:!0,isValid:null,from:ou(he,re,ve.Left,!0),fromHandle:re,fromPosition:re.position,fromNode:he,to:F,toHandle:null,toPosition:n2[re.position],toNode:null};function le(){R=!0,k(me),S?.(t,{nodeId:r,handleId:i,handleType:z})}P===0&&le();function ye(Fe){if(!R){const{x:We,y:Lt}=Ti(Fe),lt=We-W,pi=Lt-ne;if(!(lt*lt+pi*pi>P*P))return;le()}if(!D()||!re){Ie(Fe);return}const Ce=M();F=Ti(Fe,U),K=Tq(wu(F,Ce,!1,[1,1]),n,d,re),Y||(te(),Y=!0);const Ae=SO(Fe,{handle:K,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:a?"target":"source",isValidConnection:C,doc:I,lib:f,flowId:m,nodeLookup:d});J=Ae.handleDomNode,O=Ae.connection,H=Mq(!!K,Ae.isValid);const Te={...me,isValid:H,to:Ae.toHandle&&H?Ph({x:Ae.toHandle.x,y:Ae.toHandle.y},Ce):F,toHandle:Ae.toHandle,toPosition:H&&Ae.toHandle?Ae.toHandle.position:n2[re.position],toNode:Ae.toHandle?d.get(Ae.toHandle.nodeId):null};H&&K&&me.toHandle&&Te.toHandle&&me.toHandle.type===Te.toHandle.type&&me.toHandle.nodeId===Te.toHandle.nodeId&&me.toHandle.id===Te.toHandle.id&&me.to.x===Te.to.x&&me.to.y===Te.to.y||(k(Te),me=Te)}function Ie(Fe){if(R){(K||J)&&O&&H&&w?.(O);const{inProgress:Ce,...Ae}=me,Te={...Ae,toPosition:me.toHandle?me.toPosition:null};E?.(Fe,Te),o&&N?.(Fe,Te)}x(),cancelAnimationFrame(ee),Y=!1,H=!1,O=null,J=null,I.removeEventListener("mousemove",ye),I.removeEventListener("mouseup",Ie),I.removeEventListener("touchmove",ye),I.removeEventListener("touchend",Ie)}I.addEventListener("mousemove",ye),I.addEventListener("mouseup",Ie),I.addEventListener("touchmove",ye),I.addEventListener("touchend",Ie)}function SO(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:a,lib:c,flowId:d,isValidConnection:f=vO,nodeLookup:p}){const m=o==="target",g=e?a.querySelector(`.${c}-flow__handle[data-id="${d}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x,y:S}=Ti(t),w=a.elementFromPoint(x,S),E=w?.classList.contains(`${c}-flow__handle`)?w:g,C={handleDomNode:E,isValid:!1,connection:null,toHandle:null};if(E){const N=bO(void 0,E),k=E.getAttribute("data-nodeid"),M=E.getAttribute("data-handleid"),D=E.classList.contains("connectable"),_=E.classList.contains("connectableend");if(!k||!N)return C;const P={source:m?k:i,sourceHandle:m?M:r,target:m?i:k,targetHandle:m?r:M};C.connection=P;const I=D&&_&&(n===bo.Strict?m&&N==="source"||!m&&N==="target":k!==i||M!==r);C.isValid=I&&f(P),C.toHandle=xO(k,N,M,p,n,!0)}return C}const ux={onPointerDown:Nq,isValid:SO};function Aq({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const r=_n(t);function o({translateExtent:c,width:d,height:f,zoomStep:p=1,pannable:m=!0,zoomable:g=!0,inversePan:x=!1}){const S=k=>{if(k.sourceEvent.type!=="wheel"||!e)return;const M=n(),D=k.sourceEvent.ctrlKey&&su()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*p,P=M[2]*Math.pow(2,_*D);e.scaleTo(P)};let w=[0,0];const E=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(w=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},C=k=>{const M=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!e)return;const D=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[D[0]-w[0],D[1]-w[1]];w=D;const P=i()*Math.max(M[2],Math.log(M[2]))*(x?-1:1),B={x:M[0]-_[0]*P,y:M[1]-_[1]*P},I=[[0,0],[d,f]];e.setViewportConstrained({x:B.x,y:B.y,zoom:M[2]},I,c)},N=ZD().on("start",E).on("zoom",m?C:null).on("zoom.wheel",g?S:null);r.call(N,{})}function a(){r.on("zoom",null)}return{update:o,destroy:a,pointer:li}}const Dq=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Sp=t=>({x:t.x,y:t.y,zoom:t.k}),Uy=({x:t,y:e,zoom:n})=>xp.translate(t,e).scale(n),Ta=(t,e)=>t.target.closest(`.${e}`),wO=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Oq=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Fy=(t,e=0,n=Oq,i=()=>{})=>{const r=typeof e=="number"&&e>0;return r||i(),r?t.transition().duration(e).ease(n).on("end",i):t},EO=t=>{const e=t.ctrlKey&&su()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function Rq({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:c,onPanZoom:d,onPanZoomEnd:f}){return p=>{if(Ta(p,e))return!1;p.preventDefault(),p.stopImmediatePropagation();const m=n.property("__zoom").k||1;if(p.ctrlKey&&a){const E=li(p),C=EO(p),N=m*Math.pow(2,C);i.scaleTo(n,N,E,p);return}const g=p.deltaMode===1?20:1;let x=r===uo.Vertical?0:p.deltaX*g,S=r===uo.Horizontal?0:p.deltaY*g;!su()&&p.shiftKey&&r!==uo.Vertical&&(x=p.deltaY*g,S=0),i.translateBy(n,-(x/m)*o,-(S/m)*o,{internal:!0});const w=Sp(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,c?.(p,w)),t.isPanScrolling&&(d?.(p,w),t.panScrollTimeout=setTimeout(()=>{f?.(p,w),t.isPanScrolling=!1},150))}}function jq({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,r){const o=i.type==="wheel",a=!e&&o&&!i.ctrlKey,c=Ta(i,t);if(i.ctrlKey&&o&&c&&i.preventDefault(),a||c)return null;i.preventDefault(),n.call(this,i,r)}}function _q({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{if(i.sourceEvent?.internal)return;const r=Sp(i.transform);t.mouseButton=i.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=r,i.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(i.sourceEvent,r)}}function Lq({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{t.usedRightMouseButton=!!(n&&wO(e,t.mouseButton??0)),o.sourceEvent?.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!o.sourceEvent?.internal&&r?.(o.sourceEvent,Sp(o.transform))}}function zq({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return a=>{if(!a.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,o&&wO(e,t.mouseButton??0)&&!t.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),t.usedRightMouseButton=!1,i(!1),r&&Dq(t.prevViewport,a.transform))){const c=Sp(a.transform);t.prevViewport=c,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r?.(a.sourceEvent,c)},n?150:0)}}}function Bq({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:c,noPanClassName:d,lib:f}){return p=>{const m=t||e,g=n&&p.ctrlKey;if(p.button===1&&p.type==="mousedown"&&(Ta(p,`${f}-flow__node`)||Ta(p,`${f}-flow__edge`)))return!0;if(!i&&!m&&!r&&!o&&!n||a||Ta(p,c)&&p.type==="wheel"||Ta(p,d)&&(p.type!=="wheel"||r&&p.type==="wheel"&&!t)||!n&&p.ctrlKey&&p.type==="wheel")return!1;if(!n&&p.type==="touchstart"&&p.touches?.length>1)return p.preventDefault(),!1;if(!m&&!r&&!g&&p.type==="wheel"||!i&&(p.type==="mousedown"||p.type==="touchstart")||Array.isArray(i)&&!i.includes(p.button)&&p.type==="mousedown")return!1;const x=Array.isArray(i)&&i.includes(p.button)||!p.button||p.button<=1;return(!p.ctrlKey||p.type==="wheel")&&x}}function Pq({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:i,translateExtent:r,viewport:o,onPanZoom:a,onPanZoomStart:c,onPanZoomEnd:d,onDraggingChange:f}){const p={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=t.getBoundingClientRect(),g=ZD().clickDistance(!fi(i)||i<0?0:i).scaleExtent([e,n]).translateExtent(r),x=_n(t).call(g);k({x:o.x,y:o.y,zoom:Ua(o.zoom,e,n)},[[0,0],[m.width,m.height]],r);const S=x.on("wheel.zoom"),w=x.on("dblclick.zoom");g.wheelDelta(EO);function E(W,ne){return x?new Promise(z=>{g?.interpolate(ne?.interpolate==="linear"?Oc:Mf).transform(Fy(x,ne?.duration,ne?.ease,()=>z(!0)),W)}):Promise.resolve(!1)}function C({noWheelClassName:W,noPanClassName:ne,onPaneContextMenu:z,userSelectionActive:U,panOnScroll:R,panOnDrag:L,panOnScrollMode:F,panOnScrollSpeed:Y,preventScrolling:O,zoomOnPinch:H,zoomOnScroll:J,zoomOnDoubleClick:te,zoomActivationKeyPressed:re,lib:he,onTransformChange:fe}){U&&!p.isZoomingOrPanning&&N();const le=R&&!re&&!U?Rq({zoomPanValues:p,noWheelClassName:W,d3Selection:x,d3Zoom:g,panOnScrollMode:F,panOnScrollSpeed:Y,zoomOnPinch:H,onPanZoomStart:c,onPanZoom:a,onPanZoomEnd:d}):jq({noWheelClassName:W,preventScrolling:O,d3ZoomHandler:S});if(x.on("wheel.zoom",le,{passive:!1}),!U){const Ie=_q({zoomPanValues:p,onDraggingChange:f,onPanZoomStart:c});g.on("start",Ie);const Fe=Lq({zoomPanValues:p,panOnDrag:L,onPaneContextMenu:!!z,onPanZoom:a,onTransformChange:fe});g.on("zoom",Fe);const Ce=zq({zoomPanValues:p,panOnDrag:L,panOnScroll:R,onPaneContextMenu:z,onPanZoomEnd:d,onDraggingChange:f});g.on("end",Ce)}const ye=Bq({zoomActivationKeyPressed:re,panOnDrag:L,zoomOnScroll:J,panOnScroll:R,zoomOnDoubleClick:te,zoomOnPinch:H,userSelectionActive:U,noPanClassName:ne,noWheelClassName:W,lib:he});g.filter(ye),te?x.on("dblclick.zoom",w):x.on("dblclick.zoom",null)}function N(){g.on("zoom",null)}async function k(W,ne,z){const U=Uy(W),R=g?.constrain()(U,ne,z);return R&&await E(R),new Promise(L=>L(R))}async function M(W,ne){const z=Uy(W);return await E(z,ne),new Promise(U=>U(z))}function D(W){if(x){const ne=Uy(W),z=x.property("__zoom");(z.k!==W.zoom||z.x!==W.x||z.y!==W.y)&&g?.transform(x,ne,null,{sync:!0})}}function _(){const W=x?WD(x.node()):{x:0,y:0,k:1};return{x:W.x,y:W.y,zoom:W.k}}function P(W,ne){return x?new Promise(z=>{g?.interpolate(ne?.interpolate==="linear"?Oc:Mf).scaleTo(Fy(x,ne?.duration,ne?.ease,()=>z(!0)),W)}):Promise.resolve(!1)}function B(W,ne){return x?new Promise(z=>{g?.interpolate(ne?.interpolate==="linear"?Oc:Mf).scaleBy(Fy(x,ne?.duration,ne?.ease,()=>z(!0)),W)}):Promise.resolve(!1)}function I(W){g?.scaleExtent(W)}function ee(W){g?.translateExtent(W)}function K(W){const ne=!fi(W)||W<0?0:W;g?.clickDistance(ne)}return{update:C,destroy:N,setViewport:M,setViewportConstrained:k,getViewport:_,scaleTo:P,scaleBy:B,setScaleExtent:I,setTranslateExtent:ee,syncViewport:D,setClickDistance:K}}var Ya;(function(t){t.Line="line",t.Handle="handle"})(Ya||(Ya={}));function Vq({width:t,prevWidth:e,height:n,prevHeight:i,affectsX:r,affectsY:o}){const a=t-e,c=n-i,d=[a>0?1:a<0?-1:0,c>0?1:c<0?-1:0];return a&&r&&(d[0]=d[0]*-1),c&&o&&(d[1]=d[1]*-1),d}function Iq(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),i=t.includes("left"),r=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:i,affectsY:r}}function Yr(t,e){return Math.max(0,e-t)}function Kr(t,e){return Math.max(0,t-e)}function ff(t,e,n){return Math.max(0,e-t,t-n)}function m2(t,e){return t?!e:e}function Hq(t,e,n,i,r,o,a,c){let{affectsX:d,affectsY:f}=e;const{isHorizontal:p,isVertical:m}=e,g=p&&m,{xSnapped:x,ySnapped:S}=n,{minWidth:w,maxWidth:E,minHeight:C,maxHeight:N}=i,{x:k,y:M,width:D,height:_,aspectRatio:P}=t;let B=Math.floor(p?x-t.pointerX:0),I=Math.floor(m?S-t.pointerY:0);const ee=D+(d?-B:B),K=_+(f?-I:I),W=-o[0]*D,ne=-o[1]*_;let z=ff(ee,w,E),U=ff(K,C,N);if(a){let F=0,Y=0;d&&B<0?F=Yr(k+B+W,a[0][0]):!d&&B>0&&(F=Kr(k+ee+W,a[1][0])),f&&I<0?Y=Yr(M+I+ne,a[0][1]):!f&&I>0&&(Y=Kr(M+K+ne,a[1][1])),z=Math.max(z,F),U=Math.max(U,Y)}if(c){let F=0,Y=0;d&&B>0?F=Kr(k+B,c[0][0]):!d&&B<0&&(F=Yr(k+ee,c[1][0])),f&&I>0?Y=Kr(M+I,c[0][1]):!f&&I<0&&(Y=Yr(M+K,c[1][1])),z=Math.max(z,F),U=Math.max(U,Y)}if(r){if(p){const F=ff(ee/P,C,N)*P;if(z=Math.max(z,F),a){let Y=0;!d&&!f||d&&!f&&g?Y=Kr(M+ne+ee/P,a[1][1])*P:Y=Yr(M+ne+(d?B:-B)/P,a[0][1])*P,z=Math.max(z,Y)}if(c){let Y=0;!d&&!f||d&&!f&&g?Y=Yr(M+ee/P,c[1][1])*P:Y=Kr(M+(d?B:-B)/P,c[0][1])*P,z=Math.max(z,Y)}}if(m){const F=ff(K*P,w,E)/P;if(U=Math.max(U,F),a){let Y=0;!d&&!f||f&&!d&&g?Y=Kr(k+K*P+W,a[1][0])/P:Y=Yr(k+(f?I:-I)*P+W,a[0][0])/P,U=Math.max(U,Y)}if(c){let Y=0;!d&&!f||f&&!d&&g?Y=Yr(k+K*P,c[1][0])/P:Y=Kr(k+(f?I:-I)*P,c[0][0])/P,U=Math.max(U,Y)}}}I=I+(I<0?U:-U),B=B+(B<0?z:-z),r&&(g?ee>K*P?I=(m2(d,f)?-B:B)/P:B=(m2(d,f)?-I:I)*P:p?(I=B/P,f=d):(B=I*P,d=f));const R=d?k+B:k,L=f?M+I:M;return{width:D+(d?-B:B),height:_+(f?-I:I),x:o[0]*B*(d?-1:1)+R,y:o[1]*I*(f?-1:1)+L}}const CO={width:0,height:0,x:0,y:0},$q={...CO,pointerX:0,pointerY:0,aspectRatio:1};function Uq(t){return[[0,0],[t.measured.width,t.measured.height]]}function Fq(t,e,n){const i=e.position.x+t.position.x,r=e.position.y+t.position.y,o=t.measured.width??0,a=t.measured.height??0,c=n[0]*o,d=n[1]*a;return[[i-c,r-d],[i+o-c,r+a-d]]}function qq({domNode:t,nodeId:e,getStoreItems:n,onChange:i,onEnd:r}){const o=_n(t);function a({controlPosition:d,boundaries:f,keepAspectRatio:p,resizeDirection:m,onResizeStart:g,onResize:x,onResizeEnd:S,shouldResize:w}){let E={...CO},C={...$q};const N=Iq(d);let k,M=null,D=[],_,P,B;const I=zD().on("start",ee=>{const{nodeLookup:K,transform:W,snapGrid:ne,snapToGrid:z,nodeOrigin:U,paneDomNode:R}=n();if(k=K.get(e),!k)return;M=R?.getBoundingClientRect()??null;const{xSnapped:L,ySnapped:F}=Rc(ee.sourceEvent,{transform:W,snapGrid:ne,snapToGrid:z,containerBounds:M});E={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},C={...E,pointerX:L,pointerY:F,aspectRatio:E.width/E.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=K.get(k.parentId),P=_&&k.extent==="parent"?Uq(_):void 0),D=[],B=void 0;for(const[Y,O]of K)if(O.parentId===e&&(D.push({id:Y,position:{...O.position},extent:O.extent}),O.extent==="parent"||O.expandParent)){const H=Fq(O,k,O.origin??U);B?B=[[Math.min(H[0][0],B[0][0]),Math.min(H[0][1],B[0][1])],[Math.max(H[1][0],B[1][0]),Math.max(H[1][1],B[1][1])]]:B=H}g?.(ee,{...E})}).on("drag",ee=>{const{transform:K,snapGrid:W,snapToGrid:ne,nodeOrigin:z}=n(),U=Rc(ee.sourceEvent,{transform:K,snapGrid:W,snapToGrid:ne,containerBounds:M}),R=[];if(!k)return;const{x:L,y:F,width:Y,height:O}=E,H={},J=k.origin??z,{width:te,height:re,x:he,y:fe}=Hq(C,N,U,f,p,J,P,B),me=te!==Y,le=re!==O,ye=he!==L&&me,Ie=fe!==F&&le;if(!ye&&!Ie&&!me&&!le)return;if((ye||Ie||J[0]===1||J[1]===1)&&(H.x=ye?he:E.x,H.y=Ie?fe:E.y,E.x=H.x,E.y=H.y,D.length>0)){const Te=he-L,We=fe-F;for(const Lt of D)Lt.position={x:Lt.position.x-Te+J[0]*(te-Y),y:Lt.position.y-We+J[1]*(re-O)},R.push(Lt)}if((me||le)&&(H.width=me&&(!m||m==="horizontal")?te:E.width,H.height=le&&(!m||m==="vertical")?re:E.height,E.width=H.width,E.height=H.height),_&&k.expandParent){const Te=J[0]*(H.width??0);H.x&&H.x<Te&&(E.x=Te,C.x=C.x-(H.x-Te));const We=J[1]*(H.height??0);H.y&&H.y<We&&(E.y=We,C.y=C.y-(H.y-We))}const Fe=Vq({width:E.width,prevWidth:Y,height:E.height,prevHeight:O,affectsX:N.affectsX,affectsY:N.affectsY}),Ce={...E,direction:Fe};w?.(ee,Ce)!==!1&&(x?.(ee,Ce),i(H,R))}).on("end",ee=>{S?.(ee,{...E}),r?.({...E})});o.call(I)}function c(){o.on(".drag",null)}return{update:a,destroy:c}}const Yq={},g2=t=>{let e;const n=new Set,i=(p,m)=>{const g=typeof p=="function"?p(e):p;if(!Object.is(g,e)){const x=e;e=m??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(S=>S(e,x))}},r=()=>e,d={setState:i,getState:r,getInitialState:()=>f,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(Yq?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(i,r,d);return d},Kq=t=>t?g2(t):g2,{useDebugValue:Gq}=je,{useSyncExternalStoreWithSelector:Xq}=WH,Wq=t=>t;function kO(t,e=Wq,n){const i=Xq(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Gq(i),i}const y2=(t,e)=>{const n=Kq(t),i=(r,o=e)=>kO(n,r,o);return Object.assign(i,n),i},Zq=(t,e)=>t?y2(t,e):y2;function gt(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,r]of t)if(!Object.is(r,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}const wp=j.createContext(null),Qq=wp.Provider,TO=Ri.error001();function qe(t,e){const n=j.useContext(wp);if(n===null)throw new Error(TO);return kO(n,t,e)}function ft(){const t=j.useContext(wp);if(t===null)throw new Error(TO);return j.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const x2={display:"none"},Jq={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},MO="react-flow__node-desc",NO="react-flow__edge-desc",eY="react-flow__aria-live",tY=t=>t.ariaLiveMessage,nY=t=>t.ariaLabelConfig;function iY({rfId:t}){const e=qe(tY);return v.jsx("div",{id:`${eY}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Jq,children:e})}function rY({rfId:t,disableKeyboardA11y:e}){const n=qe(nY);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${MO}-${t}`,style:x2,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${NO}-${t}`,style:x2,children:n["edge.a11yDescription.default"]}),!e&&v.jsx(iY,{rfId:t})]})}const Ep=j.forwardRef(({position:t="top-left",children:e,className:n,style:i,...r},o)=>{const a=`${t}`.split("-");return v.jsx("div",{className:_t(["react-flow__panel",n,...a]),style:i,ref:o,...r,children:e})});Ep.displayName="Panel";function sY({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:v.jsx(Ep,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const oY=t=>{const e=[],n=[];for(const[,i]of t.nodeLookup)i.selected&&e.push(i.internals.userNode);for(const[,i]of t.edgeLookup)i.selected&&n.push(i);return{selectedNodes:e,selectedEdges:n}},hf=t=>t.id;function aY(t,e){return gt(t.selectedNodes.map(hf),e.selectedNodes.map(hf))&&gt(t.selectedEdges.map(hf),e.selectedEdges.map(hf))}function lY({onSelectionChange:t}){const e=ft(),{selectedNodes:n,selectedEdges:i}=qe(oY,aY);return j.useEffect(()=>{const r={nodes:n,edges:i};t?.(r),e.getState().onSelectionChangeHandlers.forEach(o=>o(r))},[n,i,t]),null}const cY=t=>!!t.onSelectionChangeHandlers;function uY({onSelectionChange:t}){const e=qe(cY);return t||e?v.jsx(lY,{onSelectionChange:t}):null}const AO=[0,0],dY={x:0,y:0,zoom:1},fY=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],b2=[...fY,"rfId"],hY=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),v2={translateExtent:nu,nodeOrigin:AO,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function pY(t){const{setNodes:e,setEdges:n,setMinZoom:i,setMaxZoom:r,setTranslateExtent:o,setNodeExtent:a,reset:c,setDefaultNodesAndEdges:d,setPaneClickDistance:f}=qe(hY,gt),p=ft();j.useEffect(()=>(d(t.defaultNodes,t.defaultEdges),()=>{m.current=v2,c()}),[]);const m=j.useRef(v2);return j.useEffect(()=>{for(const g of b2){const x=t[g],S=m.current[g];x!==S&&(typeof t[g]>"u"||(g==="nodes"?e(x):g==="edges"?n(x):g==="minZoom"?i(x):g==="maxZoom"?r(x):g==="translateExtent"?o(x):g==="nodeExtent"?a(x):g==="paneClickDistance"?f(x):g==="ariaLabelConfig"?p.setState({ariaLabelConfig:rq(x)}):g==="fitView"?p.setState({fitViewQueued:x}):g==="fitViewOptions"?p.setState({fitViewOptions:x}):p.setState({[g]:x})))}m.current=t},b2.map(g=>t[g])),null}function S2(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function mY(t){const[e,n]=j.useState(t==="system"?null:t);return j.useEffect(()=>{if(t!=="system"){n(t);return}const i=S2(),r=()=>n(i?.matches?"dark":"light");return r(),i?.addEventListener("change",r),()=>{i?.removeEventListener("change",r)}},[t]),e!==null?e:S2()?.matches?"dark":"light"}const w2=typeof document<"u"?document:null;function au(t=null,e={target:w2,actInsideInputWithModifier:!0}){const[n,i]=j.useState(!1),r=j.useRef(!1),o=j.useRef(new Set([])),[a,c]=j.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=f.reduce((m,g)=>m.concat(...g),[]);return[f,p]}return[[],[]]},[t]);return j.useEffect(()=>{const d=e?.target??w2,f=e?.actInsideInputWithModifier??!0;if(t!==null){const p=x=>{if(r.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!r.current||r.current&&!f)&&uO(x))return!1;const w=C2(x.code,c);if(o.current.add(x[w]),E2(a,o.current,!1)){const E=x.composedPath?.()?.[0]||x.target,C=E?.nodeName==="BUTTON"||E?.nodeName==="A";e.preventDefault!==!1&&(r.current||!C)&&x.preventDefault(),i(!0)}},m=x=>{const S=C2(x.code,c);E2(a,o.current,!0)?(i(!1),o.current.clear()):o.current.delete(x[S]),x.key==="Meta"&&o.current.clear(),r.current=!1},g=()=>{o.current.clear(),i(!1)};return d?.addEventListener("keydown",p),d?.addEventListener("keyup",m),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d?.removeEventListener("keydown",p),d?.removeEventListener("keyup",m),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[t,i]),n}function E2(t,e,n){return t.filter(i=>n||i.length===e.size).some(i=>i.every(r=>e.has(r)))}function C2(t,e){return e.includes(t)?"code":"key"}const gY=()=>{const t=ft();return j.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:i}=t.getState();return i?i.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[i,r,o],panZoom:a}=t.getState();return a?(await a.setViewport({x:e.x??i,y:e.y??r,zoom:e.zoom??o},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,i]=t.getState().transform;return{x:e,y:n,zoom:i}},setCenter:async(e,n,i)=>t.getState().setCenter(e,n,i),fitBounds:async(e,n)=>{const{width:i,height:r,minZoom:o,maxZoom:a,panZoom:c}=t.getState(),d=Fb(e,i,r,o,a,n?.padding??.1);return c?(await c.setViewport(d,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:i,snapGrid:r,snapToGrid:o,domNode:a}=t.getState();if(!a)return e;const{x:c,y:d}=a.getBoundingClientRect(),f={x:e.x-c,y:e.y-d},p=n.snapGrid??r,m=n.snapToGrid??o;return wu(f,i,m,p)},flowToScreenPosition:e=>{const{transform:n,domNode:i}=t.getState();if(!i)return e;const{x:r,y:o}=i.getBoundingClientRect(),a=Ph(e,n);return{x:a.x+r,y:a.y+o}}}),[])};function DO(t,e){const n=[],i=new Map,r=[];for(const o of t)if(o.type==="add"){r.push(o);continue}else if(o.type==="remove"||o.type==="replace")i.set(o.id,[o]);else{const a=i.get(o.id);a?a.push(o):i.set(o.id,[o])}for(const o of e){const a=i.get(o.id);if(!a){n.push(o);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const c={...o};for(const d of a)yY(d,c);n.push(c)}return r.length&&r.forEach(o=>{o.index!==void 0?n.splice(o.index,0,{...o.item}):n.push({...o.item})}),n}function yY(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function OO(t,e){return DO(t,e)}function RO(t,e){return DO(t,e)}function qs(t,e){return{id:t,type:"select",selected:e}}function Ma(t,e=new Set,n=!1){const i=[];for(const[r,o]of t){const a=e.has(r);!(o.selected===void 0&&!a)&&o.selected!==a&&(n&&(o.selected=a),i.push(qs(o.id,a)))}return i}function k2({items:t=[],lookup:e}){const n=[],i=new Map(t.map(r=>[r.id,r]));for(const[r,o]of t.entries()){const a=e.get(o.id),c=a?.internals?.userNode??a;c!==void 0&&c!==o&&n.push({id:o.id,item:o,type:"replace"}),c===void 0&&n.push({item:o,type:"add",index:r})}for(const[r]of e)i.get(r)===void 0&&n.push({id:r,type:"remove"});return n}function T2(t){return{id:t.id,type:"remove"}}const M2=t=>GF(t),xY=t=>nO(t);function jO(t){return j.forwardRef(t)}const bY=typeof window<"u"?j.useLayoutEffect:j.useEffect;function N2(t){const[e,n]=j.useState(BigInt(0)),[i]=j.useState(()=>vY(()=>n(r=>r+BigInt(1))));return bY(()=>{const r=i.get();r.length&&(t(r),i.reset())},[e]),i}function vY(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const _O=j.createContext(null);function SY({children:t}){const e=ft(),n=j.useCallback(c=>{const{nodes:d=[],setNodes:f,hasDefaultNodes:p,onNodesChange:m,nodeLookup:g,fitViewQueued:x}=e.getState();let S=d;for(const E of c)S=typeof E=="function"?E(S):E;const w=k2({items:S,lookup:g});p&&f(S),w.length>0?m?.(w):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:E,nodes:C,setNodes:N}=e.getState();E&&N(C)})},[]),i=N2(n),r=j.useCallback(c=>{const{edges:d=[],setEdges:f,hasDefaultEdges:p,onEdgesChange:m,edgeLookup:g}=e.getState();let x=d;for(const S of c)x=typeof S=="function"?S(x):S;p?f(x):m&&m(k2({items:x,lookup:g}))},[]),o=N2(r),a=j.useMemo(()=>({nodeQueue:i,edgeQueue:o}),[]);return v.jsx(_O.Provider,{value:a,children:t})}function wY(){const t=j.useContext(_O);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const EY=t=>!!t.panZoom;function Cp(){const t=gY(),e=ft(),n=wY(),i=qe(EY),r=j.useMemo(()=>{const o=m=>e.getState().nodeLookup.get(m),a=m=>{n.nodeQueue.push(m)},c=m=>{n.edgeQueue.push(m)},d=m=>{const{nodeLookup:g,nodeOrigin:x}=e.getState(),S=M2(m)?m:g.get(m.id),w=S.parentId?lO(S.position,S.measured,S.parentId,g,x):S.position,E={...S,position:w,width:S.measured?.width??S.width,height:S.measured?.height??S.height};return Fa(E)},f=(m,g,x={replace:!1})=>{a(S=>S.map(w=>{if(w.id===m){const E=typeof g=="function"?g(w):g;return x.replace&&M2(E)?E:{...w,...E}}return w}))},p=(m,g,x={replace:!1})=>{c(S=>S.map(w=>{if(w.id===m){const E=typeof g=="function"?g(w):g;return x.replace&&xY(E)?E:{...w,...E}}return w}))};return{getNodes:()=>e.getState().nodes.map(m=>({...m})),getNode:m=>o(m)?.internals.userNode,getInternalNode:o,getEdges:()=>{const{edges:m=[]}=e.getState();return m.map(g=>({...g}))},getEdge:m=>e.getState().edgeLookup.get(m),setNodes:a,setEdges:c,addNodes:m=>{const g=Array.isArray(m)?m:[m];n.nodeQueue.push(x=>[...x,...g])},addEdges:m=>{const g=Array.isArray(m)?m:[m];n.edgeQueue.push(x=>[...x,...g])},toObject:()=>{const{nodes:m=[],edges:g=[],transform:x}=e.getState(),[S,w,E]=x;return{nodes:m.map(C=>({...C})),edges:g.map(C=>({...C})),viewport:{x:S,y:w,zoom:E}}},deleteElements:async({nodes:m=[],edges:g=[]})=>{const{nodes:x,edges:S,onNodesDelete:w,onEdgesDelete:E,triggerNodeChanges:C,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:M}=e.getState(),{nodes:D,edges:_}=await JF({nodesToRemove:m,edgesToRemove:g,nodes:x,edges:S,onBeforeDelete:M}),P=_.length>0,B=D.length>0;if(P){const I=_.map(T2);E?.(_),N(I)}if(B){const I=D.map(T2);w?.(D),C(I)}return(B||P)&&k?.({nodes:D,edges:_}),{deletedNodes:D,deletedEdges:_}},getIntersectingNodes:(m,g=!0,x)=>{const S=r2(m),w=S?m:d(m),E=x!==void 0;return w?(x||e.getState().nodes).filter(C=>{const N=e.getState().nodeLookup.get(C.id);if(N&&!S&&(C.id===m.id||!N.internals.positionAbsolute))return!1;const k=Fa(E?C:N),M=ru(k,w);return g&&M>0||M>=k.width*k.height||M>=w.width*w.height}):[]},isNodeIntersecting:(m,g,x=!0)=>{const w=r2(m)?m:d(m);if(!w)return!1;const E=ru(w,g);return x&&E>0||E>=w.width*w.height},updateNode:f,updateNodeData:(m,g,x={replace:!1})=>{f(m,S=>{const w=typeof g=="function"?g(S):g;return x.replace?{...S,data:w}:{...S,data:{...S.data,...w}}},x)},updateEdge:p,updateEdgeData:(m,g,x={replace:!1})=>{p(m,S=>{const w=typeof g=="function"?g(S):g;return x.replace?{...S,data:w}:{...S,data:{...S.data,...w}}},x)},getNodesBounds:m=>{const{nodeLookup:g,nodeOrigin:x}=e.getState();return XF(m,{nodeLookup:g,nodeOrigin:x})},getHandleConnections:({type:m,id:g,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}-${m}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:m,handleId:g,nodeId:x})=>Array.from(e.getState().connectionLookup.get(`${x}${m?g?`-${m}-${g}`:`-${m}`:""}`)?.values()??[]),fitView:async m=>{const g=e.getState().fitViewResolver??iq();return e.setState({fitViewQueued:!0,fitViewOptions:m,fitViewResolver:g}),n.nodeQueue.push(x=>[...x]),g.promise}}},[]);return j.useMemo(()=>({...r,...t,viewportInitialized:i}),[i])}const A2=t=>t.selected,CY=typeof window<"u"?window:void 0;function kY({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=ft(),{deleteElements:i}=Cp(),r=au(t,{actInsideInputWithModifier:!1}),o=au(e,{target:CY});j.useEffect(()=>{if(r){const{edges:a,nodes:c}=n.getState();i({nodes:c.filter(A2),edges:a.filter(A2)}),n.setState({nodesSelectionActive:!1})}},[r]),j.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])}function TY(t){const e=ft();j.useEffect(()=>{const n=()=>{if(!t.current)return!1;const i=qb(t.current);(i.height===0||i.width===0)&&e.getState().onError?.("004",Ri.error004()),e.setState({width:i.width||500,height:i.height||500})};if(t.current){n(),window.addEventListener("resize",n);const i=new ResizeObserver(()=>n());return i.observe(t.current),()=>{window.removeEventListener("resize",n),i&&t.current&&i.unobserve(t.current)}}},[])}const kp={position:"absolute",width:"100%",height:"100%",top:0,left:0},MY=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function NY({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:i=!1,panOnScrollSpeed:r=.5,panOnScrollMode:o=uo.Free,zoomOnDoubleClick:a=!0,panOnDrag:c=!0,defaultViewport:d,translateExtent:f,minZoom:p,maxZoom:m,zoomActivationKeyCode:g,preventScrolling:x=!0,children:S,noWheelClassName:w,noPanClassName:E,onViewportChange:C,isControlledViewport:N,paneClickDistance:k}){const M=ft(),D=j.useRef(null),{userSelectionActive:_,lib:P}=qe(MY,gt),B=au(g),I=j.useRef();TY(D);const ee=j.useCallback(K=>{C?.({x:K[0],y:K[1],zoom:K[2]}),N||M.setState({transform:K})},[C,N]);return j.useEffect(()=>{if(D.current){I.current=Pq({domNode:D.current,minZoom:p,maxZoom:m,translateExtent:f,viewport:d,paneClickDistance:k,onDraggingChange:z=>M.setState({paneDragging:z}),onPanZoomStart:(z,U)=>{const{onViewportChangeStart:R,onMoveStart:L}=M.getState();L?.(z,U),R?.(U)},onPanZoom:(z,U)=>{const{onViewportChange:R,onMove:L}=M.getState();L?.(z,U),R?.(U)},onPanZoomEnd:(z,U)=>{const{onViewportChangeEnd:R,onMoveEnd:L}=M.getState();L?.(z,U),R?.(U)}});const{x:K,y:W,zoom:ne}=I.current.getViewport();return M.setState({panZoom:I.current,transform:[K,W,ne],domNode:D.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),j.useEffect(()=>{I.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:i,panOnScrollSpeed:r,panOnScrollMode:o,zoomOnDoubleClick:a,panOnDrag:c,zoomActivationKeyPressed:B,preventScrolling:x,noPanClassName:E,userSelectionActive:_,noWheelClassName:w,lib:P,onTransformChange:ee})},[t,e,n,i,r,o,a,c,B,x,E,_,w,P,ee]),v.jsx("div",{className:"react-flow__renderer",ref:D,style:kp,children:S})}const AY=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function DY(){const{userSelectionActive:t,userSelectionRect:e}=qe(AY,gt);return t&&e?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const qy=(t,e)=>n=>{n.target===e.current&&t?.(n)},OY=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function RY({isSelecting:t,selectionKeyPressed:e,selectionMode:n=iu.Full,panOnDrag:i,selectionOnDrag:r,onSelectionStart:o,onSelectionEnd:a,onPaneClick:c,onPaneContextMenu:d,onPaneScroll:f,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:g,children:x}){const S=ft(),{userSelectionActive:w,elementsSelectable:E,dragging:C,connectionInProgress:N}=qe(OY,gt),k=E&&(t||w),M=j.useRef(null),D=j.useRef(),_=j.useRef(new Set),P=j.useRef(new Set),B=j.useRef(!1),I=j.useRef(!1),ee=L=>{if(B.current||N){B.current=!1;return}c?.(L),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},K=L=>{if(Array.isArray(i)&&i?.includes(2)){L.preventDefault();return}d?.(L)},W=f?L=>f(L):void 0,ne=L=>{const{resetSelectedElements:F,domNode:Y}=S.getState();if(D.current=Y?.getBoundingClientRect(),!E||!t||L.button!==0||L.target!==M.current||!D.current)return;L.target?.setPointerCapture?.(L.pointerId),I.current=!0,B.current=!1;const{x:O,y:H}=Ti(L.nativeEvent,D.current);F(),S.setState({userSelectionRect:{width:0,height:0,startX:O,startY:H,x:O,y:H}}),o?.(L)},z=L=>{const{userSelectionRect:F,transform:Y,nodeLookup:O,edgeLookup:H,connectionLookup:J,triggerNodeChanges:te,triggerEdgeChanges:re,defaultEdgeOptions:he}=S.getState();if(!D.current||!F)return;B.current=!0;const{x:fe,y:me}=Ti(L.nativeEvent,D.current),{startX:le,startY:ye}=F,Ie={startX:le,startY:ye,x:fe<le?fe:le,y:me<ye?me:ye,width:Math.abs(fe-le),height:Math.abs(me-ye)},Fe=_.current,Ce=P.current;_.current=new Set(Ub(O,Ie,Y,n===iu.Partial,!0).map(Te=>Te.id)),P.current=new Set;const Ae=he?.selectable??!0;for(const Te of _.current){const We=J.get(Te);if(We)for(const{edgeId:Lt}of We.values()){const lt=H.get(Lt);lt&&(lt.selectable??Ae)&&P.current.add(Lt)}}if(!s2(Fe,_.current)){const Te=Ma(O,_.current,!0);te(Te)}if(!s2(Ce,P.current)){const Te=Ma(H,P.current);re(Te)}S.setState({userSelectionRect:Ie,userSelectionActive:!0,nodesSelectionActive:!1})},U=L=>{if(L.button!==0||!I.current)return;L.target?.releasePointerCapture?.(L.pointerId);const{userSelectionRect:F}=S.getState();!w&&F&&L.target===M.current&&ee?.(L),S.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),a?.(L),(e||r)&&(B.current=!1),I.current=!1},R=i===!0||Array.isArray(i)&&i.includes(0);return v.jsxs("div",{className:_t(["react-flow__pane",{draggable:R,dragging:C,selection:t}]),onClick:k?void 0:qy(ee,M),onContextMenu:qy(K,M),onWheel:qy(W,M),onPointerEnter:k?void 0:p,onPointerDown:k?ne:m,onPointerMove:k?z:m,onPointerUp:k?U:void 0,onPointerLeave:g,ref:M,style:kp,children:[x,v.jsx(DY,{})]})}function dx({id:t,store:e,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:r,unselectNodesAndEdges:o,multiSelectionActive:a,nodeLookup:c,onError:d}=e.getState(),f=c.get(t);if(!f){d?.("012",Ri.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&a)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):r([t])}function LO({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:i,nodeId:r,isSelectable:o,nodeClickDistance:a}){const c=ft(),[d,f]=j.useState(!1),p=j.useRef();return j.useEffect(()=>{p.current=Eq({getStoreItems:()=>c.getState(),onNodeMouseDown:m=>{dx({id:m,store:c,nodeRef:t})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),j.useEffect(()=>{if(e)p.current?.destroy();else if(t.current)return p.current?.update({noDragClassName:n,handleSelector:i,domNode:t.current,isSelectable:o,nodeId:r,nodeClickDistance:a}),()=>{p.current?.destroy()}},[n,i,e,o,t,r]),d}const jY=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function zO(){const t=ft();return j.useCallback(n=>{const{nodeExtent:i,snapToGrid:r,snapGrid:o,nodesDraggable:a,onError:c,updateNodePositions:d,nodeLookup:f,nodeOrigin:p}=t.getState(),m=new Map,g=jY(a),x=r?o[0]:5,S=r?o[1]:5,w=n.direction.x*x*n.factor,E=n.direction.y*S*n.factor;for(const[,C]of f){if(!g(C))continue;let N={x:C.internals.positionAbsolute.x+w,y:C.internals.positionAbsolute.y+E};r&&(N=Su(N,o));const{position:k,positionAbsolute:M}=iO({nodeId:C.id,nextPosition:N,nodeLookup:f,nodeExtent:i,nodeOrigin:p,onError:c});C.position=k,C.internals.positionAbsolute=M,m.set(C.id,C)}d(m)},[])}const Qb=j.createContext(null),_Y=Qb.Provider;Qb.Consumer;const BO=()=>j.useContext(Qb),LY=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),zY=(t,e,n)=>i=>{const{connectionClickStartHandle:r,connectionMode:o,connection:a}=i,{fromHandle:c,toHandle:d,isValid:f}=a,p=d?.nodeId===t&&d?.id===e&&d?.type===n;return{connectingFrom:c?.nodeId===t&&c?.id===e&&c?.type===n,connectingTo:p,clickConnecting:r?.nodeId===t&&r?.id===e&&r?.type===n,isPossibleEndHandle:o===bo.Strict?c?.type!==n:t!==c?.nodeId||e!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!r,valid:p&&f}};function BY({type:t="source",position:e=ve.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:r=!0,isConnectableEnd:o=!0,id:a,onConnect:c,children:d,className:f,onMouseDown:p,onTouchStart:m,...g},x){const S=a||null,w=t==="target",E=ft(),C=BO(),{connectOnClick:N,noPanClassName:k,rfId:M}=qe(LY,gt),{connectingFrom:D,connectingTo:_,clickConnecting:P,isPossibleEndHandle:B,connectionInProcess:I,clickConnectionInProcess:ee,valid:K}=qe(zY(C,S,t),gt);C||E.getState().onError?.("010",Ri.error010());const W=U=>{const{defaultEdgeOptions:R,onConnect:L,hasDefaultEdges:F}=E.getState(),Y={...R,...U};if(F){const{edges:O,setEdges:H}=E.getState();H(hO(Y,O))}L?.(Y),c?.(Y)},ne=U=>{if(!C)return;const R=dO(U.nativeEvent);if(r&&(R&&U.button===0||!R)){const L=E.getState();ux.onPointerDown(U.nativeEvent,{handleDomNode:U.currentTarget,autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:w,handleId:S,nodeId:C,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:W,isValidConnection:n||L.isValidConnection,getTransform:()=>E.getState().transform,getFromHandle:()=>E.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed,dragThreshold:L.connectionDragThreshold})}R?p?.(U):m?.(U)},z=U=>{const{onClickConnectStart:R,onClickConnectEnd:L,connectionClickStartHandle:F,connectionMode:Y,isValidConnection:O,lib:H,rfId:J,nodeLookup:te,connection:re}=E.getState();if(!C||!F&&!r)return;if(!F){R?.(U.nativeEvent,{nodeId:C,handleId:S,handleType:t}),E.setState({connectionClickStartHandle:{nodeId:C,type:t,id:S}});return}const he=cO(U.target),fe=n||O,{connection:me,isValid:le}=ux.isValid(U.nativeEvent,{handle:{nodeId:C,id:S,type:t},connectionMode:Y,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:fe,flowId:J,doc:he,lib:H,nodeLookup:te});le&&me&&W(me);const ye=structuredClone(re);delete ye.inProgress,ye.toPosition=ye.toHandle?ye.toHandle.position:null,L?.(U,ye),E.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":S,"data-nodeid":C,"data-handlepos":e,"data-id":`${M}-${C}-${S}-${t}`,className:_t(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",k,f,{source:!w,target:w,connectable:i,connectablestart:r,connectableend:o,clickconnecting:P,connectingfrom:D,connectingto:_,valid:K,connectionindicator:i&&(!I||B)&&(I||ee?o:r)}]),onMouseDown:ne,onTouchStart:ne,onClick:N?z:void 0,ref:x,...g,children:d})}const as=j.memo(jO(BY));function PY({data:t,isConnectable:e,sourcePosition:n=ve.Bottom}){return v.jsxs(v.Fragment,{children:[t?.label,v.jsx(as,{type:"source",position:n,isConnectable:e})]})}function VY({data:t,isConnectable:e,targetPosition:n=ve.Top,sourcePosition:i=ve.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(as,{type:"target",position:n,isConnectable:e}),t?.label,v.jsx(as,{type:"source",position:i,isConnectable:e})]})}function IY(){return null}function HY({data:t,isConnectable:e,targetPosition:n=ve.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(as,{type:"target",position:n,isConnectable:e}),t?.label]})}const Vh={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},D2={input:PY,default:VY,output:HY,group:IY};function $Y(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const UY=t=>{const{width:e,height:n,x:i,y:r}=vu(t.nodeLookup,{filter:o=>!!o.selected});return{width:fi(e)?e:null,height:fi(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${i}px,${r}px)`}};function FY({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const i=ft(),{width:r,height:o,transformString:a,userSelectionActive:c}=qe(UY,gt),d=zO(),f=j.useRef(null);if(j.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),LO({nodeRef:f}),c||!r||!o)return null;const p=t?g=>{const x=i.getState().nodes.filter(S=>S.selected);t(g,x)}:void 0,m=g=>{Object.prototype.hasOwnProperty.call(Vh,g.key)&&(g.preventDefault(),d({direction:Vh[g.key],factor:g.shiftKey?4:1}))};return v.jsx("div",{className:_t(["react-flow__nodesselection","react-flow__container",e]),style:{transform:a},children:v.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:m,style:{width:r,height:o}})})}const O2=typeof window<"u"?window:void 0,qY=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function PO({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:o,onPaneScroll:a,paneClickDistance:c,deleteKeyCode:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:m,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:S,panActivationKeyCode:w,zoomActivationKeyCode:E,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:M,panOnScrollSpeed:D,panOnScrollMode:_,zoomOnDoubleClick:P,panOnDrag:B,defaultViewport:I,translateExtent:ee,minZoom:K,maxZoom:W,preventScrolling:ne,onSelectionContextMenu:z,noWheelClassName:U,noPanClassName:R,disableKeyboardA11y:L,onViewportChange:F,isControlledViewport:Y}){const{nodesSelectionActive:O,userSelectionActive:H}=qe(qY),J=au(f,{target:O2}),te=au(w,{target:O2}),re=te||B,he=te||M,fe=p&&re!==!0,me=J||H||fe;return kY({deleteKeyCode:d,multiSelectionKeyCode:S}),v.jsx(NY,{onPaneContextMenu:o,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:he,panOnScrollSpeed:D,panOnScrollMode:_,zoomOnDoubleClick:P,panOnDrag:!J&&re,defaultViewport:I,translateExtent:ee,minZoom:K,maxZoom:W,zoomActivationKeyCode:E,preventScrolling:ne,noWheelClassName:U,noPanClassName:R,onViewportChange:F,isControlledViewport:Y,paneClickDistance:c,children:v.jsxs(RY,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:re,isSelecting:!!me,selectionMode:m,selectionKeyPressed:J,selectionOnDrag:fe,children:[t,O&&v.jsx(FY,{onSelectionContextMenu:z,noPanClassName:R,disableKeyboardA11y:L})]})})}PO.displayName="FlowRenderer";const YY=j.memo(PO),KY=t=>e=>t?Ub(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function GY(t){return qe(j.useCallback(KY(t),[t]),gt)}const XY=t=>t.updateNodeInternals;function WY(){const t=qe(XY),[e]=j.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const i=new Map;n.forEach(r=>{const o=r.target.getAttribute("data-id");i.set(o,{id:o,nodeElement:r.target,force:!0})}),t(i)}));return j.useEffect(()=>()=>{e?.disconnect()},[e]),e}function ZY({node:t,nodeType:e,hasDimensions:n,resizeObserver:i}){const r=ft(),o=j.useRef(null),a=j.useRef(null),c=j.useRef(t.sourcePosition),d=j.useRef(t.targetPosition),f=j.useRef(e),p=n&&!!t.internals.handleBounds;return j.useEffect(()=>{o.current&&!t.hidden&&(!p||a.current!==o.current)&&(a.current&&i?.unobserve(a.current),i?.observe(o.current),a.current=o.current)},[p,t.hidden]),j.useEffect(()=>()=>{a.current&&(i?.unobserve(a.current),a.current=null)},[]),j.useEffect(()=>{if(o.current){const m=f.current!==e,g=c.current!==t.sourcePosition,x=d.current!==t.targetPosition;(m||g||x)&&(f.current=e,c.current=t.sourcePosition,d.current=t.targetPosition,r.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:o.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),o}function QY({id:t,onClick:e,onMouseEnter:n,onMouseMove:i,onMouseLeave:r,onContextMenu:o,onDoubleClick:a,nodesDraggable:c,elementsSelectable:d,nodesConnectable:f,nodesFocusable:p,resizeObserver:m,noDragClassName:g,noPanClassName:x,disableKeyboardA11y:S,rfId:w,nodeTypes:E,nodeClickDistance:C,onError:N}){const{node:k,internals:M,isParent:D}=qe(le=>{const ye=le.nodeLookup.get(t),Ie=le.parentLookup.has(t);return{node:ye,internals:ye.internals,isParent:Ie}},gt);let _=k.type||"default",P=E?.[_]||D2[_];P===void 0&&(N?.("003",Ri.error003(_)),_="default",P=E?.default||D2.default);const B=!!(k.draggable||c&&typeof k.draggable>"u"),I=!!(k.selectable||d&&typeof k.selectable>"u"),ee=!!(k.connectable||f&&typeof k.connectable>"u"),K=!!(k.focusable||p&&typeof k.focusable>"u"),W=ft(),ne=aO(k),z=ZY({node:k,nodeType:_,hasDimensions:ne,resizeObserver:m}),U=LO({nodeRef:z,disabled:k.hidden||!B,noDragClassName:g,handleSelector:k.dragHandle,nodeId:t,isSelectable:I,nodeClickDistance:C}),R=zO();if(k.hidden)return null;const L=yr(k),F=$Y(k),Y=I||B||e||n||i||r,O=n?le=>n(le,{...M.userNode}):void 0,H=i?le=>i(le,{...M.userNode}):void 0,J=r?le=>r(le,{...M.userNode}):void 0,te=o?le=>o(le,{...M.userNode}):void 0,re=a?le=>a(le,{...M.userNode}):void 0,he=le=>{const{selectNodesOnDrag:ye,nodeDragThreshold:Ie}=W.getState();I&&(!ye||!B||Ie>0)&&dx({id:t,store:W,nodeRef:z}),e&&e(le,{...M.userNode})},fe=le=>{if(!(uO(le.nativeEvent)||S)){if(QD.includes(le.key)&&I){const ye=le.key==="Escape";dx({id:t,store:W,unselect:ye,nodeRef:z})}else if(B&&k.selected&&Object.prototype.hasOwnProperty.call(Vh,le.key)){le.preventDefault();const{ariaLabelConfig:ye}=W.getState();W.setState({ariaLiveMessage:ye["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~M.positionAbsolute.x,y:~~M.positionAbsolute.y})}),R({direction:Vh[le.key],factor:le.shiftKey?4:1})}}},me=()=>{if(S||!z.current?.matches(":focus-visible"))return;const{transform:le,width:ye,height:Ie,autoPanOnNodeFocus:Fe,setCenter:Ce}=W.getState();if(!Fe)return;Ub(new Map([[t,k]]),{x:0,y:0,width:ye,height:Ie},le,!0).length>0||Ce(k.position.x+L.width/2,k.position.y+L.height/2,{zoom:le[2]})};return v.jsx("div",{className:_t(["react-flow__node",`react-flow__node-${_}`,{[x]:B},k.className,{selected:k.selected,selectable:I,parent:D,draggable:B,dragging:U}]),ref:z,style:{zIndex:M.z,transform:`translate(${M.positionAbsolute.x}px,${M.positionAbsolute.y}px)`,pointerEvents:Y?"all":"none",visibility:ne?"visible":"hidden",...k.style,...F},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:O,onMouseMove:H,onMouseLeave:J,onContextMenu:te,onClick:he,onDoubleClick:re,onKeyDown:K?fe:void 0,tabIndex:K?0:void 0,onFocus:K?me:void 0,role:k.ariaRole??(K?"group":void 0),"aria-roledescription":"node","aria-describedby":S?void 0:`${MO}-${w}`,"aria-label":k.ariaLabel,...k.domAttributes,children:v.jsx(_Y,{value:t,children:v.jsx(P,{id:t,data:k.data,type:_,positionAbsoluteX:M.positionAbsolute.x,positionAbsoluteY:M.positionAbsolute.y,selected:k.selected??!1,selectable:I,draggable:B,deletable:k.deletable??!0,isConnectable:ee,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:U,dragHandle:k.dragHandle,zIndex:M.z,parentId:k.parentId,...L})})})}const JY=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function VO(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,onError:o}=qe(JY,gt),a=GY(t.onlyRenderVisibleElements),c=WY();return v.jsx("div",{className:"react-flow__nodes",style:kp,children:a.map(d=>v.jsx(QY,{id:d,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:c,nodesDraggable:e,nodesConnectable:n,nodesFocusable:i,elementsSelectable:r,nodeClickDistance:t.nodeClickDistance,onError:o},d))})}VO.displayName="NodeRenderer";const eK=j.memo(VO);function tK(t){return qe(j.useCallback(n=>{if(!t)return n.edges.map(r=>r.id);const i=[];if(n.width&&n.height)for(const r of n.edges){const o=n.nodeLookup.get(r.source),a=n.nodeLookup.get(r.target);o&&a&&aq({sourceNode:o,targetNode:a,width:n.width,height:n.height,transform:n.transform})&&i.push(r.id)}return i},[t]),gt)}const nK=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return v.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},iK=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return v.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},R2={[zh.Arrow]:nK,[zh.ArrowClosed]:iK};function rK(t){const e=ft();return j.useMemo(()=>Object.prototype.hasOwnProperty.call(R2,t)?R2[t]:(e.getState().onError?.("009",Ri.error009(t)),null),[t])}const sK=({id:t,type:e,color:n,width:i=12.5,height:r=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:c="auto-start-reverse"})=>{const d=rK(e);return d?v.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0",children:v.jsx(d,{color:n,strokeWidth:a})}):null},IO=({defaultColor:t,rfId:e})=>{const n=qe(o=>o.edges),i=qe(o=>o.defaultEdgeOptions),r=j.useMemo(()=>pq(n,{id:e,defaultColor:t,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[n,i,e,t]);return r.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:r.map(o=>v.jsx(sK,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};IO.displayName="MarkerDefinitions";var oK=j.memo(IO);function HO({x:t,y:e,label:n,labelStyle:i,labelShowBg:r=!0,labelBgStyle:o,labelBgPadding:a=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...p}){const[m,g]=j.useState({x:1,y:0,width:0,height:0}),x=_t(["react-flow__edge-textwrapper",f]),S=j.useRef(null);return j.useEffect(()=>{if(S.current){const w=S.current.getBBox();g({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?v.jsxs("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:x,visibility:m.width?"visible":"hidden",...p,children:[r&&v.jsx("rect",{width:m.width+2*a[0],x:-a[0],y:-a[1],height:m.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),v.jsx("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:S,style:i,children:n}),d]}):null}HO.displayName="EdgeText";const aK=j.memo(HO);function Tp({path:t,labelX:e,labelY:n,label:i,labelStyle:r,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d,interactionWidth:f=20,...p}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...p,d:t,fill:"none",className:_t(["react-flow__edge-path",p.className])}),f?v.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,i&&fi(e)&&fi(n)?v.jsx(aK,{x:e,y:n,label:i,labelStyle:r,labelShowBg:o,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:d}):null]})}function j2({pos:t,x1:e,y1:n,x2:i,y2:r}){return t===ve.Left||t===ve.Right?[.5*(e+i),n]:[e,.5*(n+r)]}function $O({sourceX:t,sourceY:e,sourcePosition:n=ve.Bottom,targetX:i,targetY:r,targetPosition:o=ve.Top}){const[a,c]=j2({pos:n,x1:t,y1:e,x2:i,y2:r}),[d,f]=j2({pos:o,x1:i,y1:r,x2:t,y2:e}),[p,m,g,x]=fO({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${t},${e} C${a},${c} ${d},${f} ${i},${r}`,p,m,g,x]}function UO(t){return j.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:a,targetPosition:c,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:S,markerEnd:w,markerStart:E,interactionWidth:C})=>{const[N,k,M]=$O({sourceX:n,sourceY:i,sourcePosition:a,targetX:r,targetY:o,targetPosition:c}),D=t.isInternal?void 0:e;return v.jsx(Tp,{id:D,path:N,labelX:k,labelY:M,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:S,markerEnd:w,markerStart:E,interactionWidth:C})})}const lK=UO({isInternal:!1}),FO=UO({isInternal:!0});lK.displayName="SimpleBezierEdge";FO.displayName="SimpleBezierEdgeInternal";function qO(t){return j.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:o,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,sourcePosition:x=ve.Bottom,targetPosition:S=ve.Top,markerEnd:w,markerStart:E,pathOptions:C,interactionWidth:N})=>{const[k,M,D]=ax({sourceX:n,sourceY:i,sourcePosition:x,targetX:r,targetY:o,targetPosition:S,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),_=t.isInternal?void 0:e;return v.jsx(Tp,{id:_,path:k,labelX:M,labelY:D,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:w,markerStart:E,interactionWidth:N})})}const YO=qO({isInternal:!1}),KO=qO({isInternal:!0});YO.displayName="SmoothStepEdge";KO.displayName="SmoothStepEdgeInternal";function GO(t){return j.memo(({id:e,...n})=>{const i=t.isInternal?void 0:e;return v.jsx(YO,{...n,id:i,pathOptions:j.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const cK=GO({isInternal:!1}),XO=GO({isInternal:!0});cK.displayName="StepEdge";XO.displayName="StepEdgeInternal";function WO(t){return j.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:o,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:x,markerStart:S,interactionWidth:w})=>{const[E,C,N]=pO({sourceX:n,sourceY:i,targetX:r,targetY:o}),k=t.isInternal?void 0:e;return v.jsx(Tp,{id:k,path:E,labelX:C,labelY:N,label:a,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:m,style:g,markerEnd:x,markerStart:S,interactionWidth:w})})}const uK=WO({isInternal:!1}),ZO=WO({isInternal:!0});uK.displayName="StraightEdge";ZO.displayName="StraightEdgeInternal";function QO(t){return j.memo(({id:e,sourceX:n,sourceY:i,targetX:r,targetY:o,sourcePosition:a=ve.Bottom,targetPosition:c=ve.Top,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:S,markerEnd:w,markerStart:E,pathOptions:C,interactionWidth:N})=>{const[k,M,D]=Yb({sourceX:n,sourceY:i,sourcePosition:a,targetX:r,targetY:o,targetPosition:c,curvature:C?.curvature}),_=t.isInternal?void 0:e;return v.jsx(Tp,{id:_,path:k,labelX:M,labelY:D,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:m,labelBgPadding:g,labelBgBorderRadius:x,style:S,markerEnd:w,markerStart:E,interactionWidth:N})})}const dK=QO({isInternal:!1}),JO=QO({isInternal:!0});dK.displayName="BezierEdge";JO.displayName="BezierEdgeInternal";const _2={default:JO,straight:ZO,step:XO,smoothstep:KO,simplebezier:FO},L2={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},fK=(t,e,n)=>n===ve.Left?t-e:n===ve.Right?t+e:t,hK=(t,e,n)=>n===ve.Top?t-e:n===ve.Bottom?t+e:t,z2="react-flow__edgeupdater";function B2({position:t,centerX:e,centerY:n,radius:i=10,onMouseDown:r,onMouseEnter:o,onMouseOut:a,type:c}){return v.jsx("circle",{onMouseDown:r,onMouseEnter:o,onMouseOut:a,className:_t([z2,`${z2}-${c}`]),cx:fK(e,i,t),cy:hK(n,i,t),r:i,stroke:"transparent",fill:"transparent"})}function pK({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:i,sourceY:r,targetX:o,targetY:a,sourcePosition:c,targetPosition:d,onReconnect:f,onReconnectStart:p,onReconnectEnd:m,setReconnecting:g,setUpdateHover:x}){const S=ft(),w=(M,D)=>{if(M.button!==0)return;const{autoPanOnConnect:_,domNode:P,isValidConnection:B,connectionMode:I,connectionRadius:ee,lib:K,onConnectStart:W,onConnectEnd:ne,cancelConnection:z,nodeLookup:U,rfId:R,panBy:L,updateConnection:F}=S.getState(),Y=D.type==="target",O=(te,re)=>{g(!1),m?.(te,n,D.type,re)},H=te=>f?.(n,te),J=(te,re)=>{g(!0),p?.(M,n,D.type),W?.(te,re)};ux.onPointerDown(M.nativeEvent,{autoPanOnConnect:_,connectionMode:I,connectionRadius:ee,domNode:P,handleId:D.id,nodeId:D.nodeId,nodeLookup:U,isTarget:Y,edgeUpdaterType:D.type,lib:K,flowId:R,cancelConnection:z,panBy:L,isValidConnection:B,onConnect:H,onConnectStart:J,onConnectEnd:ne,onReconnectEnd:O,updateConnection:F,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,dragThreshold:S.getState().connectionDragThreshold,handleDomNode:M.currentTarget})},E=M=>w(M,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=M=>w(M,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>x(!0),k=()=>x(!1);return v.jsxs(v.Fragment,{children:[(t===!0||t==="source")&&v.jsx(B2,{position:c,centerX:i,centerY:r,radius:e,onMouseDown:E,onMouseEnter:N,onMouseOut:k,type:"source"}),(t===!0||t==="target")&&v.jsx(B2,{position:d,centerX:o,centerY:a,radius:e,onMouseDown:C,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function mK({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:i,onClick:r,onDoubleClick:o,onContextMenu:a,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,reconnectRadius:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:x,rfId:S,edgeTypes:w,noPanClassName:E,onError:C,disableKeyboardA11y:N}){let k=qe(Ce=>Ce.edgeLookup.get(t));const M=qe(Ce=>Ce.defaultEdgeOptions);k=M?{...M,...k}:k;let D=k.type||"default",_=w?.[D]||_2[D];_===void 0&&(C?.("011",Ri.error011(D)),D="default",_=w?.default||_2.default);const P=!!(k.focusable||e&&typeof k.focusable>"u"),B=typeof m<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),I=!!(k.selectable||i&&typeof k.selectable>"u"),ee=j.useRef(null),[K,W]=j.useState(!1),[ne,z]=j.useState(!1),U=ft(),{zIndex:R,sourceX:L,sourceY:F,targetX:Y,targetY:O,sourcePosition:H,targetPosition:J}=qe(j.useCallback(Ce=>{const Ae=Ce.nodeLookup.get(k.source),Te=Ce.nodeLookup.get(k.target);if(!Ae||!Te)return{zIndex:k.zIndex,...L2};const We=hq({id:t,sourceNode:Ae,targetNode:Te,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:Ce.connectionMode,onError:C});return{zIndex:oq({selected:k.selected,zIndex:k.zIndex,sourceNode:Ae,targetNode:Te,elevateOnSelect:Ce.elevateEdgesOnSelect}),...We||L2}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),gt),te=j.useMemo(()=>k.markerStart?`url('#${lx(k.markerStart,S)}')`:void 0,[k.markerStart,S]),re=j.useMemo(()=>k.markerEnd?`url('#${lx(k.markerEnd,S)}')`:void 0,[k.markerEnd,S]);if(k.hidden||L===null||F===null||Y===null||O===null)return null;const he=Ce=>{const{addSelectedEdges:Ae,unselectNodesAndEdges:Te,multiSelectionActive:We}=U.getState();I&&(U.setState({nodesSelectionActive:!1}),k.selected&&We?(Te({nodes:[],edges:[k]}),ee.current?.blur()):Ae([t])),r&&r(Ce,k)},fe=o?Ce=>{o(Ce,{...k})}:void 0,me=a?Ce=>{a(Ce,{...k})}:void 0,le=c?Ce=>{c(Ce,{...k})}:void 0,ye=d?Ce=>{d(Ce,{...k})}:void 0,Ie=f?Ce=>{f(Ce,{...k})}:void 0,Fe=Ce=>{if(!N&&QD.includes(Ce.key)&&I){const{unselectNodesAndEdges:Ae,addSelectedEdges:Te}=U.getState();Ce.key==="Escape"?(ee.current?.blur(),Ae({edges:[k]})):Te([t])}};return v.jsx("svg",{style:{zIndex:R},children:v.jsxs("g",{className:_t(["react-flow__edge",`react-flow__edge-${D}`,k.className,E,{selected:k.selected,animated:k.animated,inactive:!I&&!r,updating:K,selectable:I}]),onClick:he,onDoubleClick:fe,onContextMenu:me,onMouseEnter:le,onMouseMove:ye,onMouseLeave:Ie,onKeyDown:P?Fe:void 0,tabIndex:P?0:void 0,role:k.ariaRole??(P?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":P?`${NO}-${S}`:void 0,ref:ee,...k.domAttributes,children:[!ne&&v.jsx(_,{id:t,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:I,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:L,sourceY:F,targetX:Y,targetY:O,sourcePosition:H,targetPosition:J,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:te,markerEnd:re,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),B&&v.jsx(pK,{edge:k,isReconnectable:B,reconnectRadius:p,onReconnect:m,onReconnectStart:g,onReconnectEnd:x,sourceX:L,sourceY:F,targetX:Y,targetY:O,sourcePosition:H,targetPosition:J,setUpdateHover:W,setReconnecting:z})]})})}const gK=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function eR({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:i,noPanClassName:r,onReconnect:o,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,reconnectRadius:m,onEdgeDoubleClick:g,onReconnectStart:x,onReconnectEnd:S,disableKeyboardA11y:w}){const{edgesFocusable:E,edgesReconnectable:C,elementsSelectable:N,onError:k}=qe(gK,gt),M=tK(e);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(oK,{defaultColor:t,rfId:n}),M.map(D=>v.jsx(mK,{id:D,edgesFocusable:E,edgesReconnectable:C,elementsSelectable:N,noPanClassName:r,onReconnect:o,onContextMenu:a,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:p,reconnectRadius:m,onDoubleClick:g,onReconnectStart:x,onReconnectEnd:S,rfId:n,onError:k,edgeTypes:i,disableKeyboardA11y:w},D))]})}eR.displayName="EdgeRenderer";const yK=j.memo(eR),xK=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function bK({children:t}){const e=qe(xK);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function vK(t){const e=Cp(),n=j.useRef(!1);j.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const SK=t=>t.panZoom?.syncViewport;function wK(t){const e=qe(SK),n=ft();return j.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function EK(t){return t.connection.inProgress?{...t.connection,to:wu(t.connection.to,t.transform)}:{...t.connection}}function CK(t){return EK}function kK(t){const e=CK();return qe(e,gt)}const TK=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function MK({containerStyle:t,style:e,type:n,component:i}){const{nodesConnectable:r,width:o,height:a,isValid:c,inProgress:d}=qe(TK,gt);return!(o&&r&&d)?null:v.jsx("svg",{style:t,width:o,height:a,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:_t(["react-flow__connection",tO(c)]),children:v.jsx(tR,{style:e,type:n,CustomComponent:i,isValid:c})})})}const tR=({style:t,type:e=ts.Bezier,CustomComponent:n,isValid:i})=>{const{inProgress:r,from:o,fromNode:a,fromHandle:c,fromPosition:d,to:f,toNode:p,toHandle:m,toPosition:g}=kK();if(!r)return;if(n)return v.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:a,fromHandle:c,fromX:o.x,fromY:o.y,toX:f.x,toY:f.y,fromPosition:d,toPosition:g,connectionStatus:tO(i),toNode:p,toHandle:m});let x="";const S={sourceX:o.x,sourceY:o.y,sourcePosition:d,targetX:f.x,targetY:f.y,targetPosition:g};switch(e){case ts.Bezier:[x]=Yb(S);break;case ts.SimpleBezier:[x]=$O(S);break;case ts.Step:[x]=ax({...S,borderRadius:0});break;case ts.SmoothStep:[x]=ax(S);break;default:[x]=pO(S)}return v.jsx("path",{d:x,fill:"none",className:"react-flow__connection-path",style:t})};tR.displayName="ConnectionLine";const NK={};function P2(t=NK){j.useRef(t),ft(),j.useEffect(()=>{},[t])}function AK(){ft(),j.useRef(!1),j.useEffect(()=>{},[])}function nR({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:i,onEdgeClick:r,onNodeDoubleClick:o,onEdgeDoubleClick:a,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:m,onSelectionStart:g,onSelectionEnd:x,connectionLineType:S,connectionLineStyle:w,connectionLineComponent:E,connectionLineContainerStyle:C,selectionKeyCode:N,selectionOnDrag:k,selectionMode:M,multiSelectionKeyCode:D,panActivationKeyCode:_,zoomActivationKeyCode:P,deleteKeyCode:B,onlyRenderVisibleElements:I,elementsSelectable:ee,defaultViewport:K,translateExtent:W,minZoom:ne,maxZoom:z,preventScrolling:U,defaultMarkerColor:R,zoomOnScroll:L,zoomOnPinch:F,panOnScroll:Y,panOnScrollSpeed:O,panOnScrollMode:H,zoomOnDoubleClick:J,panOnDrag:te,onPaneClick:re,onPaneMouseEnter:he,onPaneMouseMove:fe,onPaneMouseLeave:me,onPaneScroll:le,onPaneContextMenu:ye,paneClickDistance:Ie,nodeClickDistance:Fe,onEdgeContextMenu:Ce,onEdgeMouseEnter:Ae,onEdgeMouseMove:Te,onEdgeMouseLeave:We,reconnectRadius:Lt,onReconnect:lt,onReconnectStart:pi,onReconnectEnd:_i,noDragClassName:Li,noWheelClassName:ni,noPanClassName:ae,disableKeyboardA11y:ce,nodeExtent:pe,rfId:Le,viewport:we,onViewportChange:ke}){return P2(t),P2(e),AK(),vK(n),wK(we),v.jsx(YY,{onPaneClick:re,onPaneMouseEnter:he,onPaneMouseMove:fe,onPaneMouseLeave:me,onPaneContextMenu:ye,onPaneScroll:le,paneClickDistance:Ie,deleteKeyCode:B,selectionKeyCode:N,selectionOnDrag:k,selectionMode:M,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:D,panActivationKeyCode:_,zoomActivationKeyCode:P,elementsSelectable:ee,zoomOnScroll:L,zoomOnPinch:F,zoomOnDoubleClick:J,panOnScroll:Y,panOnScrollSpeed:O,panOnScrollMode:H,panOnDrag:te,defaultViewport:K,translateExtent:W,minZoom:ne,maxZoom:z,onSelectionContextMenu:m,preventScrolling:U,noDragClassName:Li,noWheelClassName:ni,noPanClassName:ae,disableKeyboardA11y:ce,onViewportChange:ke,isControlledViewport:!!we,children:v.jsxs(bK,{children:[v.jsx(yK,{edgeTypes:e,onEdgeClick:r,onEdgeDoubleClick:a,onReconnect:lt,onReconnectStart:pi,onReconnectEnd:_i,onlyRenderVisibleElements:I,onEdgeContextMenu:Ce,onEdgeMouseEnter:Ae,onEdgeMouseMove:Te,onEdgeMouseLeave:We,reconnectRadius:Lt,defaultMarkerColor:R,noPanClassName:ae,disableKeyboardA11y:ce,rfId:Le}),v.jsx(MK,{style:w,type:S,component:E,containerStyle:C}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(eK,{nodeTypes:t,onNodeClick:i,onNodeDoubleClick:o,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:p,nodeClickDistance:Fe,onlyRenderVisibleElements:I,noPanClassName:ae,noDragClassName:Li,disableKeyboardA11y:ce,nodeExtent:pe,rfId:Le}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}nR.displayName="GraphView";const DK=j.memo(nR),V2=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:r,height:o,fitView:a,fitViewOptions:c,minZoom:d=.5,maxZoom:f=2,nodeOrigin:p,nodeExtent:m}={})=>{const g=new Map,x=new Map,S=new Map,w=new Map,E=i??e??[],C=n??t??[],N=p??[0,0],k=m??nu;gO(S,w,E);const M=cx(C,g,x,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let D=[0,0,1];if(a&&r&&o){const _=vu(g,{filter:ee=>!!((ee.width||ee.initialWidth)&&(ee.height||ee.initialHeight))}),{x:P,y:B,zoom:I}=Fb(_,r,o,d,f,c?.padding??.1);D=[P,B,I]}return{rfId:"1",width:0,height:0,transform:D,nodes:C,nodesInitialized:M,nodeLookup:g,parentLookup:x,edges:E,edgeLookup:w,connectionLookup:S,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:d,maxZoom:f,translateExtent:nu,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:bo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:c,fitViewResolver:null,connection:{...eO},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:eq,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:JD}},OK=({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:r,height:o,fitView:a,fitViewOptions:c,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:m})=>Zq((g,x)=>{async function S(){const{nodeLookup:w,panZoom:E,fitViewOptions:C,fitViewResolver:N,width:k,height:M,minZoom:D,maxZoom:_}=x();E&&(await QF({nodes:w,width:k,height:M,panZoom:E,minZoom:D,maxZoom:_},C),N?.resolve(!0),g({fitViewResolver:null}))}return{...V2({nodes:t,edges:e,width:r,height:o,fitView:a,fitViewOptions:c,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:m,defaultNodes:n,defaultEdges:i}),setNodes:w=>{const{nodeLookup:E,parentLookup:C,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:M}=x(),D=cx(w,E,C,{nodeOrigin:N,nodeExtent:m,elevateNodesOnSelect:k,checkEquality:!0});M&&D?(S(),g({nodes:w,nodesInitialized:D,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:w,nodesInitialized:D})},setEdges:w=>{const{connectionLookup:E,edgeLookup:C}=x();gO(E,C,w),g({edges:w})},setDefaultNodesAndEdges:(w,E)=>{if(w){const{setNodes:C}=x();C(w),g({hasDefaultNodes:!0})}if(E){const{setEdges:C}=x();C(E),g({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:E,nodeLookup:C,parentLookup:N,domNode:k,nodeOrigin:M,nodeExtent:D,debug:_,fitViewQueued:P}=x(),{changes:B,updatedInternals:I}=bq(w,C,N,k,M,D);I&&(gq(C,N,{nodeOrigin:M,nodeExtent:D}),P?(S(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),B?.length>0&&(_&&console.log("React Flow: trigger node changes",B),E?.(B)))},updateNodePositions:(w,E=!1)=>{const C=[],N=[],{nodeLookup:k,triggerNodeChanges:M}=x();for(const[D,_]of w){const P=k.get(D),B=!!(P?.expandParent&&P?.parentId&&_?.position),I={id:D,type:"position",position:B?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:E};B&&P.parentId&&C.push({id:D,parentId:P.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),N.push(I)}if(C.length>0){const{parentLookup:D,nodeOrigin:_}=x(),P=Zb(C,k,D,_);N.push(...P)}M(N)},triggerNodeChanges:w=>{const{onNodesChange:E,setNodes:C,nodes:N,hasDefaultNodes:k,debug:M}=x();if(w?.length){if(k){const D=OO(w,N);C(D)}M&&console.log("React Flow: trigger node changes",w),E?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:E,setEdges:C,edges:N,hasDefaultEdges:k,debug:M}=x();if(w?.length){if(k){const D=RO(w,N);C(D)}M&&console.log("React Flow: trigger edge changes",w),E?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:E,edgeLookup:C,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:M}=x();if(E){const D=w.map(_=>qs(_,!0));k(D);return}k(Ma(N,new Set([...w]),!0)),M(Ma(C))},addSelectedEdges:w=>{const{multiSelectionActive:E,edgeLookup:C,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:M}=x();if(E){const D=w.map(_=>qs(_,!0));M(D);return}M(Ma(C,new Set([...w]))),k(Ma(N,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:E}={})=>{const{edges:C,nodes:N,nodeLookup:k,triggerNodeChanges:M,triggerEdgeChanges:D}=x(),_=w||N,P=E||C,B=_.map(ee=>{const K=k.get(ee.id);return K&&(K.selected=!1),qs(ee.id,!1)}),I=P.map(ee=>qs(ee.id,!1));M(B),D(I)},setMinZoom:w=>{const{panZoom:E,maxZoom:C}=x();E?.setScaleExtent([w,C]),g({minZoom:w})},setMaxZoom:w=>{const{panZoom:E,minZoom:C}=x();E?.setScaleExtent([C,w]),g({maxZoom:w})},setTranslateExtent:w=>{x().panZoom?.setTranslateExtent(w),g({translateExtent:w})},setPaneClickDistance:w=>{x().panZoom?.setClickDistance(w)},resetSelectedElements:()=>{const{edges:w,nodes:E,triggerNodeChanges:C,triggerEdgeChanges:N,elementsSelectable:k}=x();if(!k)return;const M=E.reduce((_,P)=>P.selected?[..._,qs(P.id,!1)]:_,[]),D=w.reduce((_,P)=>P.selected?[..._,qs(P.id,!1)]:_,[]);C(M),N(D)},setNodeExtent:w=>{const{nodes:E,nodeLookup:C,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:M,nodeExtent:D}=x();w[0][0]===D[0][0]&&w[0][1]===D[0][1]&&w[1][0]===D[1][0]&&w[1][1]===D[1][1]||(cx(E,C,N,{nodeOrigin:k,nodeExtent:w,elevateNodesOnSelect:M,checkEquality:!1}),g({nodeExtent:w}))},panBy:w=>{const{transform:E,width:C,height:N,panZoom:k,translateExtent:M}=x();return vq({delta:w,panZoom:k,transform:E,translateExtent:M,width:C,height:N})},setCenter:async(w,E,C)=>{const{width:N,height:k,maxZoom:M,panZoom:D}=x();if(!D)return Promise.resolve(!1);const _=typeof C?.zoom<"u"?C.zoom:M;return await D.setViewport({x:N/2-w*_,y:k/2-E*_,zoom:_},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...eO}})},updateConnection:w=>{g({connection:w})},reset:()=>g({...V2()})}},Object.is);function iR({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:i,initialWidth:r,initialHeight:o,initialMinZoom:a,initialMaxZoom:c,initialFitViewOptions:d,fitView:f,nodeOrigin:p,nodeExtent:m,children:g}){const[x]=j.useState(()=>OK({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,width:r,height:o,fitView:f,minZoom:a,maxZoom:c,fitViewOptions:d,nodeOrigin:p,nodeExtent:m}));return v.jsx(Qq,{value:x,children:v.jsx(SY,{children:g})})}function RK({children:t,nodes:e,edges:n,defaultNodes:i,defaultEdges:r,width:o,height:a,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:p,nodeOrigin:m,nodeExtent:g}){return j.useContext(wp)?v.jsx(v.Fragment,{children:t}):v.jsx(iR,{initialNodes:e,initialEdges:n,defaultNodes:i,defaultEdges:r,initialWidth:o,initialHeight:a,fitView:c,initialFitViewOptions:d,initialMinZoom:f,initialMaxZoom:p,nodeOrigin:m,nodeExtent:g,children:t})}const jK={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function _K({nodes:t,edges:e,defaultNodes:n,defaultEdges:i,className:r,nodeTypes:o,edgeTypes:a,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:m,onMoveEnd:g,onConnect:x,onConnectStart:S,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:C,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:M,onNodeContextMenu:D,onNodeDoubleClick:_,onNodeDragStart:P,onNodeDrag:B,onNodeDragStop:I,onNodesDelete:ee,onEdgesDelete:K,onDelete:W,onSelectionChange:ne,onSelectionDragStart:z,onSelectionDrag:U,onSelectionDragStop:R,onSelectionContextMenu:L,onSelectionStart:F,onSelectionEnd:Y,onBeforeDelete:O,connectionMode:H,connectionLineType:J=ts.Bezier,connectionLineStyle:te,connectionLineComponent:re,connectionLineContainerStyle:he,deleteKeyCode:fe="Backspace",selectionKeyCode:me="Shift",selectionOnDrag:le=!1,selectionMode:ye=iu.Full,panActivationKeyCode:Ie="Space",multiSelectionKeyCode:Fe=su()?"Meta":"Control",zoomActivationKeyCode:Ce=su()?"Meta":"Control",snapToGrid:Ae,snapGrid:Te,onlyRenderVisibleElements:We=!1,selectNodesOnDrag:Lt,nodesDraggable:lt,autoPanOnNodeFocus:pi,nodesConnectable:_i,nodesFocusable:Li,nodeOrigin:ni=AO,edgesFocusable:ae,edgesReconnectable:ce,elementsSelectable:pe=!0,defaultViewport:Le=dY,minZoom:we=.5,maxZoom:ke=2,translateExtent:Ze=nu,preventScrolling:Ke=!0,nodeExtent:To,defaultMarkerColor:Eu="#b1b1b7",zoomOnScroll:Cu=!0,zoomOnPinch:xr=!0,panOnScroll:Mo=!1,panOnScrollSpeed:zi=.5,panOnScrollMode:No=uo.Free,zoomOnDoubleClick:ws=!0,panOnDrag:Mp=!0,onPaneClick:ku,onPaneMouseEnter:Tu,onPaneMouseMove:Qa,onPaneMouseLeave:Es,onPaneScroll:Np,onPaneContextMenu:Mu,paneClickDistance:Ja=0,nodeClickDistance:el=0,children:tl,onReconnect:Nu,onReconnectStart:Ap,onReconnectEnd:mi,onEdgeContextMenu:Vt,onEdgeDoubleClick:en,onEdgeMouseEnter:br,onEdgeMouseMove:nl,onEdgeMouseLeave:Dp,reconnectRadius:Op=10,onNodesChange:Au,onEdgesChange:Cs,noDragClassName:il="nodrag",noWheelClassName:vr="nowheel",noPanClassName:Bi="nopan",fitView:Sr,fitViewOptions:Pi,connectOnClick:Mt,attributionPosition:Du,proOptions:Ou,defaultEdgeOptions:Vi,elevateNodesOnSelect:wr,elevateEdgesOnSelect:Rp,disableKeyboardA11y:rl=!1,autoPanOnConnect:Ru,autoPanOnNodeDrag:jp,autoPanSpeed:Ao,connectionRadius:Do,isValidConnection:ii,onError:sl,style:ju,id:Ii,nodeDragThreshold:ol,connectionDragThreshold:al,viewport:_p,onViewportChange:_u,width:pn,height:Lu,colorMode:Lp="light",debug:Oo,onScroll:ll,ariaLabelConfig:Ro,...zp},mn){const ks=Ii||"1",zu=mY(Lp),cl=j.useCallback(Hi=>{Hi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),ll?.(Hi)},[ll]);return v.jsx("div",{"data-testid":"rf__wrapper",...zp,onScroll:cl,style:{...ju,...jK},ref:mn,className:_t(["react-flow",r,zu]),id:Ii,role:"application",children:v.jsxs(RK,{nodes:t,edges:e,width:pn,height:Lu,fitView:Sr,fitViewOptions:Pi,minZoom:we,maxZoom:ke,nodeOrigin:ni,nodeExtent:To,children:[v.jsx(DK,{onInit:f,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:M,onNodeContextMenu:D,onNodeDoubleClick:_,nodeTypes:o,edgeTypes:a,connectionLineType:J,connectionLineStyle:te,connectionLineComponent:re,connectionLineContainerStyle:he,selectionKeyCode:me,selectionOnDrag:le,selectionMode:ye,deleteKeyCode:fe,multiSelectionKeyCode:Fe,panActivationKeyCode:Ie,zoomActivationKeyCode:Ce,onlyRenderVisibleElements:We,defaultViewport:Le,translateExtent:Ze,minZoom:we,maxZoom:ke,preventScrolling:Ke,zoomOnScroll:Cu,zoomOnPinch:xr,zoomOnDoubleClick:ws,panOnScroll:Mo,panOnScrollSpeed:zi,panOnScrollMode:No,panOnDrag:Mp,onPaneClick:ku,onPaneMouseEnter:Tu,onPaneMouseMove:Qa,onPaneMouseLeave:Es,onPaneScroll:Np,onPaneContextMenu:Mu,paneClickDistance:Ja,nodeClickDistance:el,onSelectionContextMenu:L,onSelectionStart:F,onSelectionEnd:Y,onReconnect:Nu,onReconnectStart:Ap,onReconnectEnd:mi,onEdgeContextMenu:Vt,onEdgeDoubleClick:en,onEdgeMouseEnter:br,onEdgeMouseMove:nl,onEdgeMouseLeave:Dp,reconnectRadius:Op,defaultMarkerColor:Eu,noDragClassName:il,noWheelClassName:vr,noPanClassName:Bi,rfId:ks,disableKeyboardA11y:rl,nodeExtent:To,viewport:_p,onViewportChange:_u}),v.jsx(pY,{nodes:t,edges:e,defaultNodes:n,defaultEdges:i,onConnect:x,onConnectStart:S,onConnectEnd:w,onClickConnectStart:E,onClickConnectEnd:C,nodesDraggable:lt,autoPanOnNodeFocus:pi,nodesConnectable:_i,nodesFocusable:Li,edgesFocusable:ae,edgesReconnectable:ce,elementsSelectable:pe,elevateNodesOnSelect:wr,elevateEdgesOnSelect:Rp,minZoom:we,maxZoom:ke,nodeExtent:To,onNodesChange:Au,onEdgesChange:Cs,snapToGrid:Ae,snapGrid:Te,connectionMode:H,translateExtent:Ze,connectOnClick:Mt,defaultEdgeOptions:Vi,fitView:Sr,fitViewOptions:Pi,onNodesDelete:ee,onEdgesDelete:K,onDelete:W,onNodeDragStart:P,onNodeDrag:B,onNodeDragStop:I,onSelectionDrag:U,onSelectionDragStart:z,onSelectionDragStop:R,onMove:p,onMoveStart:m,onMoveEnd:g,noPanClassName:Bi,nodeOrigin:ni,rfId:ks,autoPanOnConnect:Ru,autoPanOnNodeDrag:jp,autoPanSpeed:Ao,onError:sl,connectionRadius:Do,isValidConnection:ii,selectNodesOnDrag:Lt,nodeDragThreshold:ol,connectionDragThreshold:al,onBeforeDelete:O,paneClickDistance:Ja,debug:Oo,ariaLabelConfig:Ro}),v.jsx(uY,{onSelectionChange:ne}),tl,v.jsx(sY,{proOptions:Ou,position:Du}),v.jsx(rY,{rfId:ks,disableKeyboardA11y:rl})]})})}var LK=jO(_K);function zK(t){const[e,n]=j.useState(t),i=j.useCallback(r=>n(o=>OO(r,o)),[]);return[e,n,i]}function BK(t){const[e,n]=j.useState(t),i=j.useCallback(r=>n(o=>RO(r,o)),[]);return[e,n,i]}function PK({dimensions:t,lineWidth:e,variant:n,className:i}){return v.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:_t(["react-flow__background-pattern",n,i])})}function VK({radius:t,className:e}){return v.jsx("circle",{cx:t,cy:t,r:t,className:_t(["react-flow__background-pattern","dots",e])})}var hs;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(hs||(hs={}));const IK={[hs.Dots]:1,[hs.Lines]:1,[hs.Cross]:6},HK=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function rR({id:t,variant:e=hs.Dots,gap:n=20,size:i,lineWidth:r=1,offset:o=0,color:a,bgColor:c,style:d,className:f,patternClassName:p}){const m=j.useRef(null),{transform:g,patternId:x}=qe(HK,gt),S=i||IK[e],w=e===hs.Dots,E=e===hs.Cross,C=Array.isArray(n)?n:[n,n],N=[C[0]*g[2]||1,C[1]*g[2]||1],k=S*g[2],M=Array.isArray(o)?o:[o,o],D=E?[k,k]:N,_=[M[0]*g[2]||1+D[0]/2,M[1]*g[2]||1+D[1]/2],P=`${x}${t||""}`;return v.jsxs("svg",{className:_t(["react-flow__background",f]),style:{...d,...kp,"--xy-background-color-props":c,"--xy-background-pattern-color-props":a},ref:m,"data-testid":"rf__background",children:[v.jsx("pattern",{id:P,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:w?v.jsx(VK,{radius:k/2,className:p}):v.jsx(PK,{dimensions:D,lineWidth:r,variant:e,className:p})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${P})`})]})}rR.displayName="Background";const $K=j.memo(rR);function UK(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function FK(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function qK(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function YK(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function KK(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function pf({children:t,className:e,...n}){return v.jsx("button",{type:"button",className:_t(["react-flow__controls-button",e]),...n,children:t})}const GK=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function sR({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:o,onZoomOut:a,onFitView:c,onInteractiveChange:d,className:f,children:p,position:m="bottom-left",orientation:g="vertical","aria-label":x}){const S=ft(),{isInteractive:w,minZoomReached:E,maxZoomReached:C,ariaLabelConfig:N}=qe(GK,gt),{zoomIn:k,zoomOut:M,fitView:D}=Cp(),_=()=>{k(),o?.()},P=()=>{M(),a?.()},B=()=>{D(r),c?.()},I=()=>{S.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),d?.(!w)},ee=g==="horizontal"?"horizontal":"vertical";return v.jsxs(Ep,{className:_t(["react-flow__controls",ee,f]),position:m,style:t,"data-testid":"rf__controls","aria-label":x??N["controls.ariaLabel"],children:[e&&v.jsxs(v.Fragment,{children:[v.jsx(pf,{onClick:_,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:C,children:v.jsx(UK,{})}),v.jsx(pf,{onClick:P,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:E,children:v.jsx(FK,{})})]}),n&&v.jsx(pf,{className:"react-flow__controls-fitview",onClick:B,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:v.jsx(qK,{})}),i&&v.jsx(pf,{className:"react-flow__controls-interactive",onClick:I,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:w?v.jsx(KK,{}):v.jsx(YK,{})}),p]})}sR.displayName="Controls";const XK=j.memo(sR);function WK({id:t,x:e,y:n,width:i,height:r,style:o,color:a,strokeColor:c,strokeWidth:d,className:f,borderRadius:p,shapeRendering:m,selected:g,onClick:x}){const{background:S,backgroundColor:w}=o||{},E=a||S||w;return v.jsx("rect",{className:_t(["react-flow__minimap-node",{selected:g},f]),x:e,y:n,rx:p,ry:p,width:i,height:r,style:{fill:E,stroke:c,strokeWidth:d},shapeRendering:m,onClick:x?C=>x(C,t):void 0})}const ZK=j.memo(WK),QK=t=>t.nodes.map(e=>e.id),Yy=t=>t instanceof Function?t:()=>t;function JK({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:i=5,nodeStrokeWidth:r,nodeComponent:o=ZK,onClick:a}){const c=qe(QK,gt),d=Yy(e),f=Yy(t),p=Yy(n),m=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:c.map(g=>v.jsx(tG,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:f,nodeClassNameFunc:p,nodeBorderRadius:i,nodeStrokeWidth:r,NodeComponent:o,onClick:a,shapeRendering:m},g))})}function eG({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:i,nodeBorderRadius:r,nodeStrokeWidth:o,shapeRendering:a,NodeComponent:c,onClick:d}){const{node:f,x:p,y:m,width:g,height:x}=qe(S=>{const{internals:w}=S.nodeLookup.get(t),E=w.userNode,{x:C,y:N}=w.positionAbsolute,{width:k,height:M}=yr(E);return{node:E,x:C,y:N,width:k,height:M}},gt);return!f||f.hidden||!aO(f)?null:v.jsx(c,{x:p,y:m,width:g,height:x,style:f.style,selected:!!f.selected,className:i(f),color:e(f),borderRadius:r,strokeColor:n(f),strokeWidth:o,shapeRendering:a,onClick:d,id:f.id})}const tG=j.memo(eG);var nG=j.memo(JK);const iG=200,rG=150,sG=t=>!t.hidden,oG=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?oO(vu(t.nodeLookup,{filter:sG}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},aG="react-flow__minimap-desc";function oR({style:t,className:e,nodeStrokeColor:n,nodeColor:i,nodeClassName:r="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:c,bgColor:d,maskColor:f,maskStrokeColor:p,maskStrokeWidth:m,position:g="bottom-right",onClick:x,onNodeClick:S,pannable:w=!1,zoomable:E=!1,ariaLabel:C,inversePan:N,zoomStep:k=1,offsetScale:M=5}){const D=ft(),_=j.useRef(null),{boundingRect:P,viewBB:B,rfId:I,panZoom:ee,translateExtent:K,flowWidth:W,flowHeight:ne,ariaLabelConfig:z}=qe(oG,gt),U=t?.width??iG,R=t?.height??rG,L=P.width/U,F=P.height/R,Y=Math.max(L,F),O=Y*U,H=Y*R,J=M*Y,te=P.x-(O-P.width)/2-J,re=P.y-(H-P.height)/2-J,he=O+J*2,fe=H+J*2,me=`${aG}-${I}`,le=j.useRef(0),ye=j.useRef();le.current=Y,j.useEffect(()=>{if(_.current&&ee)return ye.current=Aq({domNode:_.current,panZoom:ee,getTransform:()=>D.getState().transform,getViewScale:()=>le.current}),()=>{ye.current?.destroy()}},[ee]),j.useEffect(()=>{ye.current?.update({translateExtent:K,width:W,height:ne,inversePan:N,pannable:w,zoomStep:k,zoomable:E})},[w,E,N,k,K,W,ne]);const Ie=x?Ae=>{const[Te,We]=ye.current?.pointer(Ae)||[0,0];x(Ae,{x:Te,y:We})}:void 0,Fe=S?j.useCallback((Ae,Te)=>{const We=D.getState().nodeLookup.get(Te).internals.userNode;S(Ae,We)},[]):void 0,Ce=C??z["minimap.ariaLabel"];return v.jsx(Ep,{position:g,style:{...t,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof m=="number"?m*Y:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="number"?a:void 0},className:_t(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:U,height:R,viewBox:`${te} ${re} ${he} ${fe}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":me,ref:_,onClick:Ie,children:[Ce&&v.jsx("title",{id:me,children:Ce}),v.jsx(nG,{onClick:Fe,nodeColor:i,nodeStrokeColor:n,nodeBorderRadius:o,nodeClassName:r,nodeStrokeWidth:a,nodeComponent:c}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${te-J},${re-J}h${he+J*2}v${fe+J*2}h${-he-J*2}z
        M${B.x},${B.y}h${B.width}v${B.height}h${-B.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}oR.displayName="MiniMap";const lG=j.memo(oR),cG=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,uG={[Ya.Line]:"right",[Ya.Handle]:"bottom-right"};function dG({nodeId:t,position:e,variant:n=Ya.Handle,className:i,style:r=void 0,children:o,color:a,minWidth:c=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:m=!1,resizeDirection:g,autoScale:x=!0,shouldResize:S,onResizeStart:w,onResize:E,onResizeEnd:C}){const N=BO(),k=typeof t=="string"?t:N,M=ft(),D=j.useRef(null),_=n===Ya.Handle,P=qe(j.useCallback(cG(_&&x),[_,x]),gt),B=j.useRef(null),I=e??uG[n];j.useEffect(()=>{if(!(!D.current||!k))return B.current||(B.current=qq({domNode:D.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:K,transform:W,snapGrid:ne,snapToGrid:z,nodeOrigin:U,domNode:R}=M.getState();return{nodeLookup:K,transform:W,snapGrid:ne,snapToGrid:z,nodeOrigin:U,paneDomNode:R}},onChange:(K,W)=>{const{triggerNodeChanges:ne,nodeLookup:z,parentLookup:U,nodeOrigin:R}=M.getState(),L=[],F={x:K.x,y:K.y},Y=z.get(k);if(Y&&Y.expandParent&&Y.parentId){const O=Y.origin??R,H=K.width??Y.measured.width??0,J=K.height??Y.measured.height??0,te={id:Y.id,parentId:Y.parentId,rect:{width:H,height:J,...lO({x:K.x??Y.position.x,y:K.y??Y.position.y},{width:H,height:J},Y.parentId,z,O)}},re=Zb([te],z,U,R);L.push(...re),F.x=K.x?Math.max(O[0]*H,K.x):void 0,F.y=K.y?Math.max(O[1]*J,K.y):void 0}if(F.x!==void 0&&F.y!==void 0){const O={id:k,type:"position",position:{...F}};L.push(O)}if(K.width!==void 0&&K.height!==void 0){const H={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:K.width,height:K.height}};L.push(H)}for(const O of W){const H={...O,type:"position"};L.push(H)}ne(L)},onEnd:({width:K,height:W})=>{const ne={id:k,type:"dimensions",resizing:!1,dimensions:{width:K,height:W}};M.getState().triggerNodeChanges([ne])}})),B.current.update({controlPosition:I,boundaries:{minWidth:c,minHeight:d,maxWidth:f,maxHeight:p},keepAspectRatio:m,resizeDirection:g,onResizeStart:w,onResize:E,onResizeEnd:C,shouldResize:S}),()=>{B.current?.destroy()}},[I,c,d,f,p,m,w,E,C,S]);const ee=I.split("-");return v.jsx("div",{className:_t(["react-flow__resize-control","nodrag",...ee,n,i]),ref:D,style:{...r,scale:P,...a&&{[_?"backgroundColor":"borderColor"]:a}},children:o})}j.memo(dG);const mf=[{id:"web-app",group:"Frontend",icon:"💻",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"📱",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"🖥️",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"🗄️",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"⚖️",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"⚡",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"🌐",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"📨",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"🔐",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"🚀",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"🔎",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"📮",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"📊",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"🌍",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"🔗",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"📡",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"🌐",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"🚪",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"📤",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"🔢",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"🔒",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"❄️",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"🗃️",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"⚙️",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"🔔",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"🎯",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"💳",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"📝",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"📡",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"🖥️",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"⚡",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"🌍",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"🕸️",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"🐳",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"λ",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"🔀",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"🌊",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"🏭",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"📈",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"🔍",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"🚦",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"⚡",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"📂",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"🔐",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"🛡️",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"🔑",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"📧",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"💬",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"📦",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]}];function aR(t){return dt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(t)}function fG(t){return dt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(t)}function hG(t){return dt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(t)}function pG(t){return dt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(t)}function mG({components:t,onAdd:e}){const[n,i]=je.useState(!0),[r,o]=je.useState(new Set),[a,c]=je.useState(null),[d,f]=je.useState(""),p=je.useMemo(()=>new Eo(Array.from(t),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[t]),m=je.useMemo(()=>{const S=d.trim();if(!S)return Array.from(t);const E=p.search(S).map(k=>k.item),C=t.find(k=>k.id==="custom-component"),N=E.some(k=>k.id==="custom-component");return C&&!N&&E.push(C),E},[t,p,d]),g=je.useMemo(()=>{const S=new Map;for(const w of m){const E=w.group??"Other";S.has(E)||S.set(E,[]),S.get(E).push(w)}return Array.from(S.entries()).sort((w,E)=>w[0].localeCompare(E[0]))},[m]);je.useEffect(()=>{g.length>0&&r.size===0&&o(new Set(g.map(([S])=>S)))},[g,r.size]);const x=S=>{o(w=>{const E=new Set(w);return E.has(S)?E.delete(S):E.add(S),E})};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>i(S=>!S),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?v.jsx(fG,{size:16}):v.jsx(hG,{size:16})}),v.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),v.jsx("div",{className:"mr-3 mb-3",children:v.jsx("input",{type:"text",placeholder:"Search components...",value:d,onChange:S=>f(S.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),v.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?v.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([S,w])=>{const E=r.has(S);return v.jsxs("div",{children:[v.jsxs("button",{type:"button",onClick:()=>x(S),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":E,"aria-controls":`group-${S}`,children:[v.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:S}),v.jsx(aR,{size:12,className:`text-muted transition-transform duration-150 ${E?"rotate-0":"-rotate-90"}`})]}),E&&v.jsx("div",{id:`group-${S}`,className:"mt-1 mb-3 px-1",children:v.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:w.map(C=>v.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${C.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();c({label:C.label,description:C.description||"",rect:k})},onMouseLeave:()=>c(null),onDragStart:N=>{c(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:C.id})),N.dataTransfer?.setData("text/plain",C.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),e(C.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[v.jsx("div",{className:"text-center mb-1",children:v.jsx("span",{className:"text-2xl",children:C.icon})}),v.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:C.label})]},C.id))})})]},S)}),v.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[v.jsx("div",{className:"font-medium mb-1 text-theme",children:"💡 Tip"}),v.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:v.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),a&&H2.createPortal(v.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${a.rect.right+8}px`,top:`${a.rect.top+a.rect.height/2}px`},children:[v.jsx("div",{className:"font-semibold text-theme mb-0.5",children:a.label}),v.jsx("div",{className:"text-muted",children:a.description}),v.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const gG=({reactFlowWrapperRef:t,nodes:e,edges:n,nodeTypes:i,edgeTypes:r,onNodesChange:o,onEdgesChange:a,onConnect:c,onDragOver:d,onDrop:f})=>v.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:v.jsx("section",{className:"w-full h-full",ref:t,onDragOver:d,onDrop:f,"aria-label":"Diagram canvas drop area",children:v.jsxs(LK,{className:"w-full h-full",nodes:e,edges:n,nodeTypes:i,edgeTypes:r,onNodesChange:o,onEdgesChange:a,onConnect:c,connectionMode:bo.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[v.jsx(lG,{nodeStrokeWidth:3}),v.jsx(XK,{}),v.jsx($K,{gap:16})]})})}),yG=({problem:t,activeTab:e,setActiveTab:n,inspectedNodeId:i,setInspectedNodeId:r,propertyElements:o,customPropertyElements:a,onAddCustomProperty:c,handleSave:d,assessmentResult:f})=>{const[p,m]=je.useState(320),g=260,x=640,S=je.useRef(!1),w=je.useRef(null),[E,C]=je.useState(!1),N=je.useCallback(I=>{if(!S.current)return;const ee=Math.min(Math.max(window.innerWidth-I.clientX,g),x);m(ee)},[]),k=je.useCallback(()=>{S.current=!1,document.body.style.userSelect=""},[]),M=I=>{I.preventDefault(),S.current=!0,document.body.style.userSelect="none"};je.useEffect(()=>(globalThis.addEventListener("mousemove",N),globalThis.addEventListener("mouseup",k),()=>{globalThis.removeEventListener("mousemove",N),globalThis.removeEventListener("mouseup",k)}),[N,k]),je.useEffect(()=>{w.current&&(w.current.style.width=p+"px")},[p]);const D=t?.id==="free",_=D&&!i;if(je.useEffect(()=>{D&&i&&e==="details"&&n("inspector")},[D,i,e,n]),!t||_)return null;const P=async()=>{if(f)try{await navigator.clipboard.writeText(JSON.stringify(f,null,2))}catch{const I=document.createElement("textarea");I.value=JSON.stringify(f,null,2),document.body.appendChild(I),I.select(),document.execCommand("copy"),I.remove()}},B=()=>{if(!f)return;const I=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),ee=URL.createObjectURL(I),K=document.createElement("a");K.href=ee,K.download=`assessment-${Date.now()}.json`,document.body.appendChild(K),K.click(),K.remove(),URL.revokeObjectURL(ee)};return v.jsxs("aside",{ref:w,className:"bg-surface border-l border-theme p-4 flex flex-col h-full relative inspector-resizable","data-width":p,children:[v.jsxs("button",{type:"button",onMouseDown:M,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[v.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),v.jsx(pG,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),v.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!D&&v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[v.jsx("span",{className:"text-sm",children:"📄"}),v.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[v.jsx("span",{className:"text-sm",children:"⚙️"}),v.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),v.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),v.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[e==="details"&&v.jsxs("div",{children:[f&&v.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),v.jsxs("div",{className:"text-sm font-semibold text-theme",children:[f.score,"%"]})]}),v.jsx("div",{className:"text-xs text-muted mb-2",children:f.isValid?"Pass":"Needs work"}),v.jsx("div",{className:"space-y-1 text-xs",children:f.feedback.slice(0,3).map(I=>v.jsx("div",{className:"text-sm text-theme",children:I.message},`${I.category}-${I.type}`))}),v.jsxs("div",{className:"mt-3 flex gap-2",children:[v.jsx("button",{type:"button",onClick:P,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),v.jsx("button",{type:"button",onClick:B,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),v.jsxs("div",{className:"mt-3 text-xs",children:[v.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),f.architectureStrengths.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:f.architectureStrengths.map(I=>v.jsx("li",{children:I},`strength-${I}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),f.improvements.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:f.improvements.map(I=>v.jsx("li",{children:I},`imp-${I}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),v.jsx("div",{className:"space-y-1",children:f.feedback.map(I=>v.jsxs("div",{className:"text-xs",children:[v.jsx("div",{className:"font-medium",children:I.category.toUpperCase()}),v.jsx("div",{className:"text-muted",children:I.message})]},`${I.category}-${I.type}`))})]})]}),v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:t.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:t.description}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),v.jsx("ul",{className:"space-y-1",children:t.requirements.map(I=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:"✓"}),v.jsx("span",{className:"text-xs text-muted",children:I})]},I))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),v.jsx("ul",{className:"space-y-1",children:t.constraints.map(I=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:"⚠"}),v.jsx("span",{className:"text-xs text-muted",children:I})]},I))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("button",{type:"button",onClick:()=>C(!E),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme",children:"💡 Hints"}),v.jsx(aR,{size:14,className:`text-muted transition-transform duration-150 ${E?"rotate-0":"-rotate-90"}`})]}),E&&v.jsx("div",{id:"hints-content",className:"space-y-2",children:t.hints.map(I=>v.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:v.jsx("div",{className:"text-xs text-white",children:I})},I))})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(I=>v.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:I},I))})]})]}),e==="inspector"&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!i&&v.jsx("div",{className:"text-sm text-muted",children:"Select a node settings (⚙️) to view properties."}),i&&v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",i]}),o&&v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),v.jsx("div",{className:"space-y-2",children:o})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),v.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[v.jsx(J9,{size:14}),v.jsx("span",{children:"Add"})]})]}),v.jsx("div",{className:"space-y-2",children:a})]}),v.jsxs("div",{className:"mt-6 flex space-x-2 pt-4 border-t border-theme",children:[v.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:d,children:"Save Changes"}),v.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{r(null),n("details")},children:"Close"})]})]})]})]})]})};async function xG(t,e){if(!t)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const i={components:t.components.map(a=>({id:a.id||`comp-${Date.now()}`,type:a.type,label:a.label,properties:a.properties||{},position:a.position})),connections:t.connections?.map(a=>({id:a.id||`conn-${Date.now()}`,source:a.source,target:a.target,label:a.label,type:a.type}))||[],explanation:t.explanation,keyPoints:t.keyPoints,problem:e?{title:e.title,description:e.description,requirements:Array.isArray(e.requirements)?e.requirements.join(`.
`):e.requirements,constraints:Array.isArray(e.constraints)?e.constraints.join(`.
`):e.constraints,difficulty:e.difficulty,category:e.category,estimatedTime:e.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",i);const r=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)});if(!r.ok){const a=await r.text();throw new Error(`Assessment API failed: ${r.status} ${r.statusText} - ${a}`)}const o=await r.json();return console.log("Assessment API response:",o),bG(o)}catch(i){return console.error("AI Assessment failed:",i),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${i instanceof Error?i.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function bG(t){const e=t,n=(e.feedback||[]).map(i=>({type:i.type,message:i.message,category:i.category}));return{isValid:e.is_valid||!1,score:e.overall_score||0,feedback:n,suggestions:e.suggestions||[],missingComponents:e.missing_components||[],architectureStrengths:e.strengths||[],improvements:e.improvements||[]}}const lR=je.memo(({id:t,data:e,onCopy:n})=>{const i=e.componentName||e.label,r=je.useCallback(c=>{c.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),o=je.useCallback(c=>{c.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),a=je.useCallback(c=>{c.stopPropagation(),n?.(t,e)},[t,e,n]);return v.jsxs(Qn.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",children:[v.jsx("legend",{className:"sr-only",children:i}),v.jsxs("div",{className:"absolute -top-5 right-1 flex items-center z-10 bg-[var(--surface)]/80 border border-theme rounded-full shadow-sm",children:[v.jsx(Qn.button,{type:"button","aria-label":"Settings",onClick:o,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(Q9,{className:"w-2 h-2"})}),v.jsx(Qn.button,{type:"button","aria-label":"Copy Node",onClick:a,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Copy Node",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(e7,{className:"w-2 h-2"})}),v.jsx(Qn.button,{type:"button","aria-label":"Delete",onClick:r,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(xD,{className:"w-2 h-2"})})]}),v.jsx(as,{id:"top",type:"source",position:ve.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(as,{id:"right",type:"source",position:ve.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(as,{id:"bottom",type:"source",position:ve.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(as,{id:"left",type:"source",position:ve.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[v.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:e.icon??"●"}),v.jsxs("div",{className:"min-w-0 w-full text-center",children:[v.jsx("div",{className:"truncate font-medium text-sm",children:i}),e.subtitle&&v.jsx("div",{className:"text-xs text-muted truncate",children:e.subtitle})]})]})]})});lR.displayName="Node";const vG=({sourceX:t,sourceY:e,targetX:n,targetY:i},r)=>{const o=(t+n)/2,a=(e+i)/2;return`M ${t} ${e} Q ${o} ${a+r} ${n} ${i}`},SG=(t,e)=>{const{sourceX:n,sourceY:i,targetX:r,targetY:o}=t;if(e){const f=n<r?25:-25,p=vG({sourceX:n,sourceY:i,targetX:r,targetY:o},f),m=(n+r)/2,g=(i+o)/2,x=m,S=g+f/2;return{edgePath:p,centerX:x,centerY:S}}const[a]=Yb(t),[c,d]=Kb({sourceX:n,sourceY:i,targetX:r,targetY:o});return{edgePath:a,centerX:c,centerY:d}},wG=t=>{const{id:e,source:n,target:i,sourceX:r,sourceY:o,targetX:a,targetY:c,sourcePosition:d,targetPosition:f,data:p,selected:m,markerEnd:g}=t,[x,S]=j.useState(!1),[w,E]=j.useState(p?.label??""),[C,N]=j.useState(p?.hasLabel??!1),k=j.useRef(null),M=qe(ne=>{const z=ne.edges.some(U=>U.id!==e&&U.source===i&&U.target===n);return z&&console.log(`Bi-directional edge detected: ${e} (${n} -> ${i})`),z}),D={sourceX:r,sourceY:o,sourcePosition:d,targetX:a,targetY:c,targetPosition:f},{edgePath:_,centerX:P,centerY:B}=SG(D,M),I=ne=>{ne.stopPropagation(),S(!0),setTimeout(()=>k.current?.focus(),0)},ee=ne=>{ne.stopPropagation(),N(!0),S(!0),setTimeout(()=>k.current?.focus(),0)},K=ne=>{ne.stopPropagation(),N(!1),E(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:"",hasLabel:!1}}))},W=()=>{S(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:w,hasLabel:C||w.trim().length>0}}))};return v.jsxs("g",{className:"react-flow__edge",children:[v.jsx("defs",{children:v.jsx("marker",{id:`arrow-${e}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:v.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),v.jsx("path",{id:e,d:_,fill:"none",stroke:m?"var(--brand)":"var(--muted)",strokeWidth:m?3:2,markerEnd:g||`url(#arrow-${e})`,className:"transition-colors"}),v.jsx("foreignObject",{x:P-75,y:B-12,width:150,height:24,className:"overflow-visible",children:v.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:C?v.jsx("div",{className:"flex items-center gap-1",children:x?v.jsx("input",{ref:k,value:w,onChange:ne=>E(ne.target.value),onBlur:W,onKeyDown:ne=>{ne.key==="Enter"&&W(),ne.key==="Escape"&&(S(!1),E(p?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onDoubleClick:I,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${m?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:w||"Label"}),m&&v.jsx("button",{onClick:K,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:"✕"})]})}):m&&v.jsx("button",{onClick:ee,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},EG=({property:t,onUpdate:e,onDelete:n,isNew:i=!1})=>{const[r,o]=j.useState(i),a=f=>{e(t.id,{value:f})},c=(f,p)=>{e(t.id,{[f]:p})},d=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return v.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[v.jsxs("button",{type:"button",onClick:()=>o(!r),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[r?v.jsx(u7,{size:18}):v.jsx(d7,{size:18}),v.jsx("span",{className:"text-sm font-medium text-theme truncate",children:t.label||"Unnamed Property"})]}),v.jsx("button",{type:"button",onClick:()=>n(t.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:v.jsx(xD,{size:16})})]}),r&&v.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(kf,{id:`${t.id}-key`,label:"Key",value:t.key,onChange:f=>c("key",f),placeholder:"e.g., customField"}),v.jsx(kf,{id:`${t.id}-label`,label:"Label",value:t.label,onChange:f=>c("label",f),placeholder:"e.g., Custom Field"})]}),v.jsx(SD,{id:`${t.id}-type`,label:"Type",value:t.type,options:d.map(f=>f.value),onChange:f=>{c("type",f),f==="boolean"?c("value",!1):f==="number"?c("value",0):c("value","")}}),v.jsxs("div",{className:"border-t border-theme pt-3",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),t.type==="text"&&v.jsx(kf,{id:`${t.id}-value`,label:"",value:String(t.value),onChange:a,placeholder:"Enter value"}),t.type==="textarea"&&v.jsx(Nh,{id:`${t.id}-value`,label:"",value:String(t.value),onChange:a,placeholder:"Enter value"}),t.type==="number"&&v.jsx(vD,{id:`${t.id}-value`,label:"",value:Number(t.value)||0,onChange:f=>a(f)}),t.type==="boolean"&&v.jsx("div",{className:"pt-1",children:v.jsx(bD,{id:`${t.id}-value`,checked:!!t.value,onChange:a,label:"Enabled"})})]})]})]})},CG=je.memo(t=>{const e=t.data;return v.jsx(lR,{id:t.id,data:e,onCopy:t.onCopy})}),kG=t=>e=>v.jsx(CG,{...e,onCopy:t}),TG=()=>{Ka();const t=Fh(),n=e4()?.id,{screenToFlowPosition:i}=Cp(),[r,o]=j.useState(null),[a,c]=j.useState(!0),[d,f]=j.useState(null);j.useEffect(()=>{if(!n){c(!1),f("No problem ID provided");return}if(n==="free"){o({id:"free",title:"Free Design Canvas",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),c(!1);return}if(n.startsWith("custom-")){const ce=localStorage.getItem(`custom-problem-${n}`);if(ce){o(JSON.parse(ce)),c(!1);return}}(async()=>{try{c(!0),f(null);const pe=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!pe.ok)throw new Error(`Failed to fetch problem: ${pe.status} ${pe.statusText}`);const Le=await pe.json();o(Le)}catch(ce){f(ce instanceof Error?ce.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",ce)}finally{c(!1)}})()},[n]);const p=()=>t("/"),m=(()=>{if(!r)return"";const ae=r.difficulty;return ae==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ae==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"})(),[g,x,S]=zK([]),[w,E,C]=BK([]),N=ae=>{const ce={...ae,type:"customEdge",data:{label:"",hasLabel:!1}};E(pe=>hO(ce,pe))},[k,M]=je.useState(null),[D,_]=j.useState(!1),P=async()=>{if(D)return;_(!0),M(null);const ae={components:g.map(ce=>{const pe=ce.data??{},Le=pe.type;let we;typeof Le=="string"?we=Le:typeof ce.type=="string"?we=ce.type:we="microservice";const ke=pe.label,Ze=typeof ke=="string"?ke:String(ce.id),Ke=pe&&typeof pe=="object"?{...pe}:{},{label:To,icon:Eu,subtitle:Cu,...xr}=Ke;return{id:ce.id,type:we,label:Ze,position:{x:ce.position?.x??0,y:ce.position?.y??0},properties:{...xr,nodeData:{label:Ze,icon:pe.icon,subtitle:pe.subtitle}}}}),connections:w.map(ce=>{const pe=ce.data??{},Le=pe.type,we=typeof Le=="string"?Le:"api-call",ke=pe.label,Ze=typeof ke=="string"?ke:void 0;return{id:ce.id??`${ce.source}-${ce.target}`,source:ce.source,target:ce.target,type:we,label:Ze,properties:pe}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",ae);const ce=await xG(ae,r);M(ce),F("details")}catch(ce){console.error("Assessment failed:",ce),M({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{_(!1)}},B=j.useRef(null),I=ae=>{ae.preventDefault(),ae.dataTransfer&&(ae.dataTransfer.dropEffect="move")},ee=ae=>{ae.preventDefault();const ce=ae.dataTransfer?.getData("application/reactflow")||ae.dataTransfer?.getData("text/plain");let pe=ce;try{ce&&(pe=JSON.parse(ce).type||ce)}catch{}const Le=i({x:ae.clientX,y:ae.clientY}),we=`${pe}-${Date.now()}`,ke=mf.find(Ke=>Ke.id===pe),Ze={id:we,position:Le,type:"custom",data:{label:ke?.label??pe,icon:ke?.icon}};x(Ke=>[...Ke,Ze])},[K,W]=j.useState(null),[ne,z]=j.useState({}),[U,R]=j.useState({}),[L,F]=j.useState("details"),Y=j.useRef(null);je.useEffect(()=>{Y.current=K},[K]);const O=j.useRef(void 0);O.current=ae=>{const pe=ae.detail.id;x(Le=>Le.filter(we=>we.id!==pe)),Y.current===pe&&(W(null),F("details"))};const H=j.useRef(void 0);H.current=ae=>{const pe=ae.detail.id;W(Le=>{const we=Le===pe?null:pe;return F(we?"inspector":"details"),we})};function J(ae,ce,pe,Le){return ae.map(we=>we.id===ce?{...we,data:{...we.data,label:pe,hasLabel:Le},label:pe}:we)}const te=je.useRef(void 0);te.current=ae=>{const ce=ae,{id:pe,label:Le,hasLabel:we}=ce.detail;E(ke=>J(ke,pe,Le,we))},je.useEffect(()=>{const ae=ce=>te.current?.(ce);return globalThis.addEventListener("diagram:edge-label-change",ae),()=>globalThis.removeEventListener("diagram:edge-label-change",ae)},[]),je.useEffect(()=>{const ae=pe=>O.current?.(pe),ce=pe=>H.current?.(pe);return globalThis.addEventListener("diagram:node-delete",ae),globalThis.addEventListener("diagram:node-toggle",ce),()=>{globalThis.removeEventListener("diagram:node-delete",ae),globalThis.removeEventListener("diagram:node-toggle",ce)}},[]),je.useEffect(()=>{if(!K)return;const ae=g.find(ce=>ce.id===K);z(ae?.data??{})},[K,g]);const re=(ae,ce)=>{z(pe=>({...pe,[ae]:ce})),K&&x(pe=>pe.map(Le=>Le.id===K?{...Le,data:{...Le.data,[ae]:ce}}:Le))},he=(ae,ce)=>re(ae,ce),fe=(ae,ce)=>re(ae,ce),me=(ae,ce)=>re(ae,ce),le=(ae,ce)=>re(ae,ce),ye=()=>{if(!K)return;const ae={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(U[K]?.length||0)+1}`,label:`Custom Property ${(U[K]?.length||0)+1}`,type:"text",value:""};R(ce=>{const pe={...ce,[K]:[...ce[K]||[],ae]};return x(Le=>Le.map(we=>we.id===K?{...we,data:{...we.data,_customProperties:pe[K]}}:we)),pe})},Ie=(ae,ce)=>{K&&R(pe=>{const we=(pe[K]||[]).map(ke=>ke.id===ae?{...ke,...ce}:ke);return x(ke=>ke.map(Ze=>Ze.id===K?{...Ze,data:{...Ze.data,_customProperties:we}}:Ze)),{...pe,[K]:we}})},Fe=ae=>{K&&R(ce=>{const Le=(ce[K]||[]).filter(we=>we.id!==ae);return x(we=>we.map(ke=>ke.id===K?{...ke,data:{...ke.data,_customProperties:Le}}:ke)),{...ce,[K]:Le}})};je.useEffect(()=>{if(!K)return;const ae=g.find(ce=>ce.id===K);ae?.data?._customProperties&&R(ce=>({...ce,[K]:ae.data._customProperties}))},[K,g]);const Ce=ae=>{const ce=`${K}-${ae.key}`,pe=ne[ae.key];let Le;typeof pe=="number"?Le=pe:typeof ae.default=="number"?Le=ae.default:Le=void 0;let we;typeof pe=="string"?we=pe:ae.default===null||ae.default===void 0?we="":we=String(ae.default);let ke;typeof pe=="string"?ke=pe:ae.default===null||ae.default===void 0?ke=void 0:ke=String(ae.default);const Ze=!!pe;return v.jsxs("div",{className:"flex flex-col px-1",children:[ae.type==="boolean"&&v.jsx(bD,{id:ce,checked:Ze,onChange:Ke=>he(ae.key,Ke),label:ae.label}),ae.type==="number"&&v.jsx(vD,{id:ce,label:ae.label,value:Le,onChange:Ke=>fe(ae.key,Ke)}),ae.type==="text"&&v.jsx(kf,{id:ce,label:ae.label,value:we,placeholder:ae.placeholder,onChange:Ke=>me(ae.key,Ke)}),ae.type==="textarea"&&v.jsx(Nh,{id:ce,label:ae.label,value:we,placeholder:ae.placeholder,onChange:Ke=>me(ae.key,Ke)}),ae.type==="select"&&v.jsx(SD,{id:ce,label:ae.label,value:ke,options:ae.options||[],onChange:Ke=>le(ae.key,Ke)})]},ae.key)};let Ae=null;if(K){const ae=g.find(ce=>ce.id===K);if(ae){const ce=mf.find(pe=>pe.label===ae.data.label);ce?.properties?Ae=ce.properties.map(pe=>Ce(pe)):Ae=v.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else Ae=v.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let Te=null;if(K){const ae=U[K]||[];ae.length>0?Te=ae.map(ce=>v.jsx(EG,{property:ce,onUpdate:Ie,onDelete:Fe},ce.id)):Te=v.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}if(a)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),v.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(d)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),v.jsx("div",{className:"text-muted mb-4",children:d}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:p,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),v.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!r)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),v.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),v.jsx("button",{onClick:p,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function We(ae){const ce=mf.find(Ze=>Ze.id===ae),pe=B.current?.getBoundingClientRect();if(!pe)return;const Le=i({x:pe.left+pe.width/2,y:pe.top+pe.height/2}),ke={id:`${ae}-${Date.now()}`,position:Le,type:"custom",data:{label:ce?.label??ae,icon:ce?.icon}};x(Ze=>[...Ze,ke])}const lt={custom:kG((ae,ce)=>{const pe=g.find(ke=>ke.id===ae);if(!pe)return;const Le=`${ae}-copy-${Date.now()}`,we={...pe,id:Le,position:{x:pe.position.x+200,y:pe.position.y+100},data:{...ce},selected:!1};x(ke=>[...ke,we])})},pi={customEdge:wG},_i=()=>{if(x(ae=>ae.map(ce=>ce.id===K?{...ce,data:{...ce.data,...ne}}:ce)),K){const ae=g.find(ce=>ce.id===K);console.log("Node properties saved:",{id:K,data:ae?.data,nodeProps:ne})}},Li=n==="free"?"Free Design Canvas | Diagrammatic":`${r?.title||"System Design Challenge"} | Diagrammatic`,ni=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${r?.title||"system design"} challenge. ${r?.description?.substring(0,150)||"Practice system design skills"}...`;return v.jsxs(v.Fragment,{children:[v.jsx(Yh,{title:Li,description:ni,keywords:`system design playground, ${r?.title||"free canvas"}, architecture diagram tool, ${r?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),v.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[v.jsx("div",{className:"bg-surface shadow-sm border-b border-theme px-4 py-1",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("button",{onClick:p,className:"px-3 py-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors cursor-pointer",children:"← Back to Dashboard"}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("h1",{className:"text-lg font-semibold text-theme",children:r.title}),v.jsx("span",{className:`px-2 py-1 rounded text-xs ${m}`,children:r.difficulty}),v.jsx("span",{className:"text-sm text-muted",children:r.estimated_time}),v.jsx("span",{className:"text-sm text-muted",children:"•"}),v.jsx("span",{className:"text-sm text-muted",children:r.category})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(qh,{}),r?.id!=="free"&&v.jsx("button",{type:"button",onClick:P,disabled:D,className:"px-6 py-1 bg-[var(--brand)] text-white font-bold rounded-md hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Run assessment on current design",children:D?"Assessing...":"Run Assessment"})]})]})}),v.jsxs("div",{className:"flex-1 flex min-h-0",children:[v.jsx(mG,{components:mf,onAdd:We}),v.jsx(gG,{reactFlowWrapperRef:B,nodes:g,edges:w,nodeTypes:lt,edgeTypes:pi,onNodesChange:S,onEdgesChange:C,onConnect:N,onDragOver:I,onDrop:ee}),v.jsx(yG,{problem:r,activeTab:L,setActiveTab:F,inspectedNodeId:K,setInspectedNodeId:W,propertyElements:Ae,customPropertyElements:Te,onAddCustomProperty:ye,handleSave:_i,assessmentResult:k})]})]})]})},MG=()=>v.jsx(iR,{children:v.jsx(TG,{})}),NG=()=>(Ka(),v.jsx(b4,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsxs(g4,{children:[v.jsx(ma,{path:"/",element:v.jsx(Kw,{})}),v.jsx(ma,{path:"/problems",element:v.jsx(m5,{})}),v.jsx(ma,{path:"/create-problem",element:v.jsx(p7,{})}),v.jsx(ma,{path:"/playground/:id",element:v.jsx(MG,{})}),v.jsx(ma,{path:"*",element:v.jsx(Kw,{})})]})}));wj.createRoot(document.getElementById("root")).render(v.jsx(j.StrictMode,{children:v.jsx(NG,{})}));
