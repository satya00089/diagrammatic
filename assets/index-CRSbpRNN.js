function wG(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N2={exports:{}},Bd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K9;function SG(){if(K9)return Bd;K9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Bd.Fragment=e,Bd.jsx=n,Bd.jsxs=n,Bd}var Y9;function CG(){return Y9||(Y9=1,N2.exports=SG()),N2.exports}var g=CG(),T2={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X9;function kG(){if(X9)return tt;X9=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function S(B,W,ie){this.props=B,this.context=W,this.refs=w,this.updater=ie||b}S.prototype.isReactComponent={},S.prototype.setState=function(B,W){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,W,"setState")},S.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function k(){}k.prototype=S.prototype;function T(B,W,ie){this.props=B,this.context=W,this.refs=w,this.updater=ie||b}var E=T.prototype=new k;E.constructor=T,v(E,S.prototype),E.isPureReactComponent=!0;var N=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function j(B,W,ie,oe,$,Z){return ie=Z.ref,{$$typeof:t,type:B,key:W,ref:ie!==void 0?ie:null,props:Z}}function R(B,W){return j(B.type,W,void 0,void 0,void 0,B.props)}function L(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function P(B){var W={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return W[ie]})}var F=/\/+/g;function V(B,W){return typeof B=="object"&&B!==null&&B.key!=null?P(""+B.key):W.toString(36)}function q(){}function I(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(q,q):(B.status="pending",B.then(function(W){B.status==="pending"&&(B.status="fulfilled",B.value=W)},function(W){B.status==="pending"&&(B.status="rejected",B.reason=W)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function U(B,W,ie,oe,$){var Z=typeof B;(Z==="undefined"||Z==="boolean")&&(B=null);var te=!1;if(B===null)te=!0;else switch(Z){case"bigint":case"string":case"number":te=!0;break;case"object":switch(B.$$typeof){case t:case e:te=!0;break;case f:return te=B._init,U(te(B._payload),W,ie,oe,$)}}if(te)return $=$(B),te=oe===""?"."+V(B,0):oe,N($)?(ie="",te!=null&&(ie=te.replace(F,"$&/")+"/"),U($,W,ie,"",function(ye){return ye})):$!=null&&(L($)&&($=R($,ie+($.key==null||B&&B.key===$.key?"":(""+$.key).replace(F,"$&/")+"/")+te)),W.push($)),1;te=0;var ce=oe===""?".":oe+":";if(N(B))for(var re=0;re<B.length;re++)oe=B[re],Z=ce+V(oe,re),te+=U(oe,W,ie,Z,$);else if(re=m(B),typeof re=="function")for(B=re.call(B),re=0;!(oe=B.next()).done;)oe=oe.value,Z=ce+V(oe,re++),te+=U(oe,W,ie,Z,$);else if(Z==="object"){if(typeof B.then=="function")return U(I(B),W,ie,oe,$);throw W=String(B),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return te}function O(B,W,ie){if(B==null)return B;var oe=[],$=0;return U(B,oe,"","",function(Z){return W.call(ie,Z,$++)}),oe}function H(B){if(B._status===-1){var W=B._result;W=W(),W.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=W)}if(B._status===1)return B._result.default;throw B._result}var G=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function ee(){}return tt.Children={map:O,forEach:function(B,W,ie){O(B,function(){W.apply(this,arguments)},ie)},count:function(B){var W=0;return O(B,function(){W++}),W},toArray:function(B){return O(B,function(W){return W})||[]},only:function(B){if(!L(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},tt.Component=S,tt.Fragment=n,tt.Profiler=i,tt.PureComponent=T,tt.StrictMode=r,tt.Suspense=u,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,tt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return A.H.useMemoCache(B)}},tt.cache=function(B){return function(){return B.apply(null,arguments)}},tt.cloneElement=function(B,W,ie){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var oe=v({},B.props),$=B.key,Z=void 0;if(W!=null)for(te in W.ref!==void 0&&(Z=void 0),W.key!==void 0&&($=""+W.key),W)!_.call(W,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&W.ref===void 0||(oe[te]=W[te]);var te=arguments.length-2;if(te===1)oe.children=ie;else if(1<te){for(var ce=Array(te),re=0;re<te;re++)ce[re]=arguments[re+2];oe.children=ce}return j(B.type,$,void 0,void 0,Z,oe)},tt.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:s,_context:B},B},tt.createElement=function(B,W,ie){var oe,$={},Z=null;if(W!=null)for(oe in W.key!==void 0&&(Z=""+W.key),W)_.call(W,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&($[oe]=W[oe]);var te=arguments.length-2;if(te===1)$.children=ie;else if(1<te){for(var ce=Array(te),re=0;re<te;re++)ce[re]=arguments[re+2];$.children=ce}if(B&&B.defaultProps)for(oe in te=B.defaultProps,te)$[oe]===void 0&&($[oe]=te[oe]);return j(B,Z,void 0,void 0,null,$)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(B){return{$$typeof:l,render:B}},tt.isValidElement=L,tt.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:H}},tt.memo=function(B,W){return{$$typeof:d,type:B,compare:W===void 0?null:W}},tt.startTransition=function(B){var W=A.T,ie={};A.T=ie;try{var oe=B(),$=A.S;$!==null&&$(ie,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ee,G)}catch(Z){G(Z)}finally{A.T=W}},tt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},tt.use=function(B){return A.H.use(B)},tt.useActionState=function(B,W,ie){return A.H.useActionState(B,W,ie)},tt.useCallback=function(B,W){return A.H.useCallback(B,W)},tt.useContext=function(B){return A.H.useContext(B)},tt.useDebugValue=function(){},tt.useDeferredValue=function(B,W){return A.H.useDeferredValue(B,W)},tt.useEffect=function(B,W,ie){var oe=A.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(B,W)},tt.useId=function(){return A.H.useId()},tt.useImperativeHandle=function(B,W,ie){return A.H.useImperativeHandle(B,W,ie)},tt.useInsertionEffect=function(B,W){return A.H.useInsertionEffect(B,W)},tt.useLayoutEffect=function(B,W){return A.H.useLayoutEffect(B,W)},tt.useMemo=function(B,W){return A.H.useMemo(B,W)},tt.useOptimistic=function(B,W){return A.H.useOptimistic(B,W)},tt.useReducer=function(B,W,ie){return A.H.useReducer(B,W,ie)},tt.useRef=function(B){return A.H.useRef(B)},tt.useState=function(B){return A.H.useState(B)},tt.useSyncExternalStore=function(B,W,ie){return A.H.useSyncExternalStore(B,W,ie)},tt.useTransition=function(){return A.H.useTransition()},tt.version="19.1.1",tt}var Z9;function ph(){return Z9||(Z9=1,T2.exports=kG()),T2.exports}var M=ph();const Ae=hh(M),EG=wG({__proto__:null,default:Ae},[M]);var A2={exports:{}},Vd={},M2={exports:{}},_2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J9;function NG(){return J9||(J9=1,(function(t){function e(O,H){var G=O.length;O.push(H);e:for(;0<G;){var ee=G-1>>>1,B=O[ee];if(0<i(B,H))O[ee]=H,O[G]=B,G=ee;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var H=O[0],G=O.pop();if(G!==H){O[0]=G;e:for(var ee=0,B=O.length,W=B>>>1;ee<W;){var ie=2*(ee+1)-1,oe=O[ie],$=ie+1,Z=O[$];if(0>i(oe,G))$<B&&0>i(Z,oe)?(O[ee]=Z,O[$]=G,ee=$):(O[ee]=oe,O[ie]=G,ee=ie);else if($<B&&0>i(Z,G))O[ee]=Z,O[$]=G,ee=$;else break e}}return H}function i(O,H){var G=O.sortIndex-H.sortIndex;return G!==0?G:O.id-H.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,m=3,b=!1,v=!1,w=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(O){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=O)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function A(O){if(w=!1,N(O),!v)if(n(u)!==null)v=!0,_||(_=!0,V());else{var H=n(d);H!==null&&U(A,H.startTime-O)}}var _=!1,j=-1,R=5,L=-1;function P(){return S?!0:!(t.unstable_now()-L<R)}function F(){if(S=!1,_){var O=t.unstable_now();L=O;var H=!0;try{e:{v=!1,w&&(w=!1,T(j),j=-1),b=!0;var G=m;try{t:{for(N(O),p=n(u);p!==null&&!(p.expirationTime>O&&P());){var ee=p.callback;if(typeof ee=="function"){p.callback=null,m=p.priorityLevel;var B=ee(p.expirationTime<=O);if(O=t.unstable_now(),typeof B=="function"){p.callback=B,N(O),H=!0;break t}p===n(u)&&r(u),N(O)}else r(u);p=n(u)}if(p!==null)H=!0;else{var W=n(d);W!==null&&U(A,W.startTime-O),H=!1}}break e}finally{p=null,m=G,b=!1}H=void 0}}finally{H?V():_=!1}}}var V;if(typeof E=="function")V=function(){E(F)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,I=q.port2;q.port1.onmessage=F,V=function(){I.postMessage(null)}}else V=function(){k(F,0)};function U(O,H){j=k(function(){O(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var G=m;m=H;try{return O()}finally{m=G}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(O,H){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var G=m;m=O;try{return H()}finally{m=G}},t.unstable_scheduleCallback=function(O,H,G){var ee=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ee+G:ee):G=ee,O){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=G+B,O={id:f++,callback:H,priorityLevel:O,startTime:G,expirationTime:B,sortIndex:-1},G>ee?(O.sortIndex=G,e(d,O),n(u)===null&&O===n(d)&&(w?(T(j),j=-1):w=!0,U(A,G-ee))):(O.sortIndex=B,e(u,O),v||b||(v=!0,_||(_=!0,V()))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var H=m;return function(){var G=m;m=H;try{return O.apply(this,arguments)}finally{m=G}}}})(_2)),_2}var Q9;function TG(){return Q9||(Q9=1,M2.exports=NG()),M2.exports}var D2={exports:{}},dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eE;function AG(){if(eE)return dr;eE=1;var t=ph();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,dr.createPortal=function(u,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,f)},dr.flushSync=function(u){var d=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=f,r.d.f()}},dr.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},dr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},dr.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:b}):f==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},dr.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},dr.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=l(f,d.crossOrigin);r.d.L(u,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},dr.preloadModule=function(u,d){if(typeof u=="string")if(d){var f=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},dr.requestFormReset=function(u){r.d.r(u)},dr.unstable_batchedUpdates=function(u,d){return u(d)},dr.useFormState=function(u,d,f){return o.H.useFormState(u,d,f)},dr.useFormStatus=function(){return o.H.useHostTransitionStatus()},dr.version="19.1.1",dr}var tE;function AL(){if(tE)return D2.exports;tE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),D2.exports=AG(),D2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nE;function MG(){if(nE)return Vd;nE=1;var t=TG(),e=ph(),n=AL();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,y=c;;){var x=h.return;if(x===null)break;var C=x.alternate;if(C===null){if(y=x.return,y!==null){h=y;continue}break}if(x.child===C.child){for(C=x.child;C;){if(C===h)return l(x),a;if(C===y)return l(x),c;C=C.sibling}throw Error(r(188))}if(h.return!==y.return)h=x,y=C;else{for(var D=!1,z=x.child;z;){if(z===h){D=!0,h=x,y=C;break}if(z===y){D=!0,y=x,h=C;break}z=z.sibling}if(!D){for(z=C.child;z;){if(z===h){D=!0,h=C,y=x;break}if(z===y){D=!0,y=C,h=x;break}z=z.sibling}if(!D)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=F&&a[F]||a["@@iterator"],typeof a=="function"?a:null)}var q=Symbol.for("react.client.reference");function I(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case E:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case N:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return c=a.displayName||null,c!==null?c:I(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return I(a(c))}catch{}}return null}var U=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ee=[],B=-1;function W(a){return{current:a}}function ie(a){0>B||(a.current=ee[B],ee[B]=null,B--)}function oe(a,c){B++,ee[B]=a.current,a.current=c}var $=W(null),Z=W(null),te=W(null),ce=W(null);function re(a,c){switch(oe(te,c),oe(Z,a),oe($,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?S9(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=S9(c),a=C9(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ie($),oe($,a)}function ye(){ie($),ie(Z),ie(te)}function Ce(a){a.memoizedState!==null&&oe(ce,a);var c=$.current,h=C9(c,a.type);c!==h&&(oe(Z,a),oe($,h))}function De(a){Z.current===a&&(ie($),ie(Z)),ce.current===a&&(ie(ce),Od._currentValue=G)}var Se=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,Ee=t.unstable_cancelCallback,Me=t.unstable_shouldYield,yt=t.unstable_requestPaint,Pe=t.unstable_now,vt=t.unstable_getCurrentPriorityLevel,wt=t.unstable_ImmediatePriority,Yt=t.unstable_UserBlockingPriority,gn=t.unstable_NormalPriority,qt=t.unstable_LowPriority,Mt=t.unstable_IdlePriority,Dn=t.log,yn=t.unstable_setDisableYieldValue,zt=null,ht=null;function _t(a){if(typeof Dn=="function"&&yn(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(zt,a)}catch{}}var Dt=Math.clz32?Math.clz32:Ii,vr=Math.log,qr=Math.LN2;function Ii(a){return a>>>=0,a===0?32:31-(vr(a)/qr|0)|0}var rn=256,ze=4194304;function Ge(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function xr(a,c,h){var y=a.pendingLanes;if(y===0)return 0;var x=0,C=a.suspendedLanes,D=a.pingedLanes;a=a.warmLanes;var z=y&134217727;return z!==0?(y=z&~C,y!==0?x=Ge(y):(D&=z,D!==0?x=Ge(D):h||(h=z&~a,h!==0&&(x=Ge(h))))):(z=y&~C,z!==0?x=Ge(z):D!==0?x=Ge(D):h||(h=y&~a,h!==0&&(x=Ge(h)))),x===0?0:c!==0&&c!==x&&(c&C)===0&&(C=x&-x,h=c&-c,C>=h||C===32&&(h&4194048)!==0)?c:x}function pt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function bn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wo(){var a=rn;return rn<<=1,(rn&4194048)===0&&(rn=256),a}function Pi(){var a=ze;return ze<<=1,(ze&62914560)===0&&(ze=4194304),a}function Ur(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function $r(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function wr(a,c,h,y,x,C){var D=a.pendingLanes;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=h,a.entangledLanes&=h,a.errorRecoveryDisabledLanes&=h,a.shellSuspendCounter=0;var z=a.entanglements,K=a.expirationTimes,le=a.hiddenUpdates;for(h=D&~h;0<h;){var fe=31-Dt(h),me=1<<fe;z[fe]=0,K[fe]=-1;var ue=le[fe];if(ue!==null)for(le[fe]=null,fe=0;fe<ue.length;fe++){var de=ue[fe];de!==null&&(de.lane&=-536870913)}h&=~me}y!==0&&Dr(a,y,0),C!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=C&~(D&~c))}function Dr(a,c,h){a.pendingLanes|=c,a.suspendedLanes&=~c;var y=31-Dt(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|h&4194090}function Gr(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var y=31-Dt(h),x=1<<y;x&c|a[y]&c&&(a[y]|=c),h&=~x}}function St(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Kn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function So(){var a=H.p;return a!==0?a:(a=window.event,a===void 0?32:F9(a.type))}function zi(a,c){var h=H.p;try{return H.p=a,c()}finally{H.p=h}}var sr=Math.random().toString(36).slice(2),Xt="__reactFiber$"+sr,Bt="__reactProps$"+sr,Rr="__reactContainer$"+sr,Rn="__reactEvents$"+sr,Wr="__reactListeners$"+sr,es="__reactHandles$"+sr,Ls="__reactResources$"+sr,Kr="__reactMarker$"+sr;function ts(a){delete a[Xt],delete a[Bt],delete a[Rn],delete a[Wr],delete a[es]}function vn(a){var c=a[Xt];if(c)return c;for(var h=a.parentNode;h;){if(c=h[Rr]||h[Xt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=T9(a);a!==null;){if(h=a[Xt])return h;a=T9(a)}return c}a=h,h=a.parentNode}return null}function Ue(a){if(a=a[Xt]||a[Rr]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function or(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function ar(a){var c=a[Ls];return c||(c=a[Ls]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Lt(a){a[Kr]=!0}var ns=new Set,Le={};function J(a,c){ge(a,c),ge(a+"Capture",c)}function ge(a,c){for(Le[a]=c,a=0;a<c.length;a++)ns.add(c[a])}var je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dt={},Vt={};function Rt(a){return Se.call(Vt,a)?!0:Se.call(dt,a)?!1:je.test(a)?Vt[a]=!0:(dt[a]=!0,!1)}function Ut(a,c,h){if(Rt(c))if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+h)}}function zn(a,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+h)}}function xn(a,c,h,y){if(y===null)a.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(h);return}a.setAttributeNS(c,h,""+y)}}var fi,Ht;function Yn(a){if(fi===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);fi=c&&c[1]||"",Ht=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+a+Ht}var rs=!1;function La(a,c){if(!a||rs)return"";rs=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(de){var ue=de}Reflect.construct(a,[],me)}else{try{me.call()}catch(de){ue=de}a.call(me.prototype)}}else{try{throw Error()}catch(de){ue=de}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(de){if(de&&ue&&typeof de.stack=="string")return[de.stack,ue.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),D=C[0],z=C[1];if(D&&z){var K=D.split(`
`),le=z.split(`
`);for(x=y=0;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;for(;x<le.length&&!le[x].includes("DetermineComponentFrameRoot");)x++;if(y===K.length||x===le.length)for(y=K.length-1,x=le.length-1;1<=y&&0<=x&&K[y]!==le[x];)x--;for(;1<=y&&0<=x;y--,x--)if(K[y]!==le[x]){if(y!==1||x!==1)do if(y--,x--,0>x||K[y]!==le[x]){var fe=`
`+K[y].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=y&&0<=x);break}}}finally{rs=!1,Error.prepareStackTrace=h}return(h=a?a.displayName||a.name:"")?Yn(h):""}function ec(a){switch(a.tag){case 26:case 27:case 5:return Yn(a.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return La(a.type,!1);case 11:return La(a.type.render,!1);case 1:return La(a.type,!0);case 31:return Yn("Activity");default:return""}}function tc(a){try{var c="";do c+=ec(a),a=a.return;while(a);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function lr(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function nc(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function qu(a){var c=nc(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,C=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return x.call(this)},set:function(D){y=""+D,C.call(this,D)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Co(a){a._valueTracker||(a._valueTracker=qu(a))}function is(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return a&&(y=nc(a)?a.checked?"true":"false":a.value),a=y,a!==h?(c.setValue(a),!0):!1}function ss(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var ko=/[\n"\\]/g;function cr(a){return a.replace(ko,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Yr(a,c,h,y,x,C,D,z){a.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.type=D:a.removeAttribute("type"),c!=null?D==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+lr(c)):a.value!==""+lr(c)&&(a.value=""+lr(c)):D!=="submit"&&D!=="reset"||a.removeAttribute("value"),c!=null?Ia(a,D,lr(c)):h!=null?Ia(a,D,lr(h)):y!=null&&a.removeAttribute("value"),x==null&&C!=null&&(a.defaultChecked=!!C),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?a.name=""+lr(z):a.removeAttribute("name")}function Eo(a,c,h,y,x,C,D,z){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||h!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;h=h!=null?""+lr(h):"",c=c!=null?""+lr(c):h,z||c===a.value||(a.value=c),a.defaultValue=c}y=y??x,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=z?a.checked:!!y,a.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.name=D)}function Ia(a,c,h){c==="number"&&ss(a.ownerDocument)===a||a.defaultValue===""+h||(a.defaultValue=""+h)}function Bi(a,c,h,y){if(a=a.options,c){c={};for(var x=0;x<h.length;x++)c["$"+h[x]]=!0;for(h=0;h<a.length;h++)x=c.hasOwnProperty("$"+a[h].value),a[h].selected!==x&&(a[h].selected=x),x&&y&&(a[h].defaultSelected=!0)}else{for(h=""+lr(h),c=null,x=0;x<a.length;x++){if(a[x].value===h){a[x].selected=!0,y&&(a[x].defaultSelected=!0);return}c!==null||a[x].disabled||(c=a[x])}c!==null&&(c.selected=!0)}}function Uu(a,c,h){if(c!=null&&(c=""+lr(c),c!==a.value&&(a.value=c),h==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=h!=null?""+lr(h):""}function as(a,c,h,y){if(c==null){if(y!=null){if(h!=null)throw Error(r(92));if(U(y)){if(1<y.length)throw Error(r(93));y=y[0]}h=y}h==null&&(h=""),c=h}h=lr(c),a.defaultValue=h,y=a.textContent,y===h&&y!==""&&y!==null&&(a.value=y)}function No(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var _1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $h(a,c,h){var y=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":y?a.setProperty(c,h):typeof h!="number"||h===0||_1.has(c)?c==="float"?a.cssFloat=h:a[c]=(""+h).trim():a[c]=h+"px"}function Gh(a,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var x in c)y=c[x],c.hasOwnProperty(x)&&h[x]!==y&&$h(a,x,y)}else for(var C in c)c.hasOwnProperty(C)&&$h(a,C,c[C])}function $u(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),D1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(a){return D1.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Gu=null;function Pa(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var To=null,Ao=null;function Kh(a){var c=Ue(a);if(c&&(a=c.stateNode)){var h=a[Bt]||null;e:switch(a=c.stateNode,c.type){case"input":if(Yr(a,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+cr(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==a&&y.form===a.form){var x=y[Bt]||null;if(!x)throw Error(r(90));Yr(y,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<h.length;c++)y=h[c],y.form===a.form&&is(y)}break e;case"textarea":Uu(a,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Bi(a,!!h.multiple,c,!1)}}}var Wu=!1;function Yh(a,c,h){if(Wu)return a(c,h);Wu=!0;try{var y=a(c);return y}finally{if(Wu=!1,(To!==null||Ao!==null)&&(Rp(),To&&(c=To,a=Ao,Ao=To=null,Kh(c),a)))for(c=0;c<a.length;c++)Kh(a[c])}}function za(a,c){var h=a.stateNode;if(h===null)return null;var y=h[Bt]||null;if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ku=!1;if(Vi)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Ku=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Ku=!1}var ls=null,Yu=null,Va=null;function Xh(){if(Va)return Va;var a,c=Yu,h=c.length,y,x="value"in ls?ls.value:ls.textContent,C=x.length;for(a=0;a<h&&c[a]===x[a];a++);var D=h-a;for(y=1;y<=D&&c[h-y]===x[C-y];y++);return Va=x.slice(a,1<y?1-y:void 0)}function ic(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function sc(){return!0}function X(){return!1}function Y(a){function c(h,y,x,C,D){this._reactName=h,this._targetInst=x,this.type=y,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var z in a)a.hasOwnProperty(z)&&(h=a[z],this[z]=h?h(C):C[z]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?sc:X,this.isPropagationStopped=X,this}return f(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=sc)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=sc)},persist:function(){},isPersistent:sc}),c}var se={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pe=Y(se),ve=f({},se,{view:0,detail:0}),ke=Y(ve),Te,Be,et,Oe=f({},ve,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O1,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==et&&(et&&a.type==="mousemove"?(Te=a.screenX-et.screenX,Be=a.screenY-et.screenY):Be=Te=0,et=a),Te)},movementY:function(a){return"movementY"in a?a.movementY:Be}}),Je=Y(Oe),mt=f({},Oe,{dataTransfer:0}),R1=Y(mt),j1=f({},ve,{relatedTarget:0}),Xu=Y(j1),Zh=f({},se,{animationName:0,elapsedTime:0,pseudoElement:0}),Xn=Y(Zh),hi=f({},se,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jh=Y(hi),MU=f({},se,{data:0}),M7=Y(MU),_U={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jU(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=RU[a])?!!c[a]:!1}function O1(){return jU}var OU=f({},ve,{key:function(a){if(a.key){var c=_U[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=ic(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?DU[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O1,charCode:function(a){return a.type==="keypress"?ic(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ic(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),LU=Y(OU),IU=f({},Oe,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_7=Y(IU),PU=f({},ve,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O1}),zU=Y(PU),BU=f({},se,{propertyName:0,elapsedTime:0,pseudoElement:0}),VU=Y(BU),HU=f({},Oe,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),FU=Y(HU),qU=f({},se,{newState:0,oldState:0}),UU=Y(qU),$U=[9,13,27,32],L1=Vi&&"CompositionEvent"in window,Zu=null;Vi&&"documentMode"in document&&(Zu=document.documentMode);var GU=Vi&&"TextEvent"in window&&!Zu,D7=Vi&&(!L1||Zu&&8<Zu&&11>=Zu),R7=" ",j7=!1;function O7(a,c){switch(a){case"keyup":return $U.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L7(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var oc=!1;function WU(a,c){switch(a){case"compositionend":return L7(c);case"keypress":return c.which!==32?null:(j7=!0,R7);case"textInput":return a=c.data,a===R7&&j7?null:a;default:return null}}function KU(a,c){if(oc)return a==="compositionend"||!L1&&O7(a,c)?(a=Xh(),Va=Yu=ls=null,oc=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return D7&&c.locale!=="ko"?null:c.data;default:return null}}var YU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function I7(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!YU[a.type]:c==="textarea"}function P7(a,c,h,y){To?Ao?Ao.push(y):Ao=[y]:To=y,c=zp(c,"onChange"),0<c.length&&(h=new pe("onChange","change",null,h,y),a.push({event:h,listeners:c}))}var Ju=null,Qu=null;function XU(a){y9(a,0)}function Qh(a){var c=or(a);if(is(c))return a}function z7(a,c){if(a==="change")return c}var B7=!1;if(Vi){var I1;if(Vi){var P1="oninput"in document;if(!P1){var V7=document.createElement("div");V7.setAttribute("oninput","return;"),P1=typeof V7.oninput=="function"}I1=P1}else I1=!1;B7=I1&&(!document.documentMode||9<document.documentMode)}function H7(){Ju&&(Ju.detachEvent("onpropertychange",F7),Qu=Ju=null)}function F7(a){if(a.propertyName==="value"&&Qh(Qu)){var c=[];P7(c,Qu,a,Pa(a)),Yh(XU,c)}}function ZU(a,c,h){a==="focusin"?(H7(),Ju=c,Qu=h,Ju.attachEvent("onpropertychange",F7)):a==="focusout"&&H7()}function JU(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Qh(Qu)}function QU(a,c){if(a==="click")return Qh(c)}function e$(a,c){if(a==="input"||a==="change")return Qh(c)}function t$(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Xr=typeof Object.is=="function"?Object.is:t$;function ed(a,c){if(Xr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var x=h[y];if(!Se.call(c,x)||!Xr(a[x],c[x]))return!1}return!0}function q7(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function U7(a,c){var h=q7(a);a=0;for(var y;h;){if(h.nodeType===3){if(y=a+h.textContent.length,a<=c&&y>=c)return{node:h,offset:c-a};a=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=q7(h)}}function $7(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?$7(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function G7(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=ss(a.document);c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=ss(a.document)}return c}function z1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var n$=Vi&&"documentMode"in document&&11>=document.documentMode,ac=null,B1=null,td=null,V1=!1;function W7(a,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;V1||ac==null||ac!==ss(y)||(y=ac,"selectionStart"in y&&z1(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),td&&ed(td,y)||(td=y,y=zp(B1,"onSelect"),0<y.length&&(c=new pe("onSelect","select",null,c,h),a.push({event:c,listeners:y}),c.target=ac)))}function Ha(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var lc={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},H1={},K7={};Vi&&(K7=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Fa(a){if(H1[a])return H1[a];if(!lc[a])return a;var c=lc[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in K7)return H1[a]=c[h];return a}var Y7=Fa("animationend"),X7=Fa("animationiteration"),Z7=Fa("animationstart"),r$=Fa("transitionrun"),i$=Fa("transitionstart"),s$=Fa("transitioncancel"),J7=Fa("transitionend"),Q7=new Map,F1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");F1.push("scrollEnd");function Hi(a,c){Q7.set(a,c),J(c,[a])}var eC=new WeakMap;function pi(a,c){if(typeof a=="object"&&a!==null){var h=eC.get(a);return h!==void 0?h:(c={value:a,source:c,stack:tc(c)},eC.set(a,c),c)}return{value:a,source:c,stack:tc(c)}}var mi=[],cc=0,q1=0;function ep(){for(var a=cc,c=q1=cc=0;c<a;){var h=mi[c];mi[c++]=null;var y=mi[c];mi[c++]=null;var x=mi[c];mi[c++]=null;var C=mi[c];if(mi[c++]=null,y!==null&&x!==null){var D=y.pending;D===null?x.next=x:(x.next=D.next,D.next=x),y.pending=x}C!==0&&tC(h,x,C)}}function tp(a,c,h,y){mi[cc++]=a,mi[cc++]=c,mi[cc++]=h,mi[cc++]=y,q1|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function U1(a,c,h,y){return tp(a,c,h,y),np(a)}function uc(a,c){return tp(a,null,null,c),np(a)}function tC(a,c,h){a.lanes|=h;var y=a.alternate;y!==null&&(y.lanes|=h);for(var x=!1,C=a.return;C!==null;)C.childLanes|=h,y=C.alternate,y!==null&&(y.childLanes|=h),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(x=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,x&&c!==null&&(x=31-Dt(h),a=C.hiddenUpdates,y=a[x],y===null?a[x]=[c]:y.push(c),c.lane=h|536870912),C):null}function np(a){if(50<Nd)throw Nd=0,Xy=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var dc={};function o$(a,c,h,y){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(a,c,h,y){return new o$(a,c,h,y)}function $1(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Is(a,c){var h=a.alternate;return h===null?(h=Zr(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&65011712,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h.refCleanup=a.refCleanup,h}function nC(a,c){a.flags&=65011714;var h=a.alternate;return h===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=h.childLanes,a.lanes=h.lanes,a.child=h.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=h.memoizedProps,a.memoizedState=h.memoizedState,a.updateQueue=h.updateQueue,a.type=h.type,c=h.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function rp(a,c,h,y,x,C){var D=0;if(y=a,typeof a=="function")$1(a)&&(D=1);else if(typeof a=="string")D=lG(a,h,$.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=Zr(31,h,c,x),a.elementType=L,a.lanes=C,a;case v:return qa(h.children,x,C,c);case w:D=8,x|=24;break;case S:return a=Zr(12,h,c,x|2),a.elementType=S,a.lanes=C,a;case A:return a=Zr(13,h,c,x),a.elementType=A,a.lanes=C,a;case _:return a=Zr(19,h,c,x),a.elementType=_,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:case E:D=10;break e;case T:D=9;break e;case N:D=11;break e;case j:D=14;break e;case R:D=16,y=null;break e}D=29,h=Error(r(130,a===null?"null":typeof a,"")),y=null}return c=Zr(D,h,c,x),c.elementType=a,c.type=y,c.lanes=C,c}function qa(a,c,h,y){return a=Zr(7,a,y,c),a.lanes=h,a}function G1(a,c,h){return a=Zr(6,a,null,c),a.lanes=h,a}function W1(a,c,h){return c=Zr(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var fc=[],hc=0,ip=null,sp=0,gi=[],yi=0,Ua=null,Ps=1,zs="";function $a(a,c){fc[hc++]=sp,fc[hc++]=ip,ip=a,sp=c}function rC(a,c,h){gi[yi++]=Ps,gi[yi++]=zs,gi[yi++]=Ua,Ua=a;var y=Ps;a=zs;var x=32-Dt(y)-1;y&=~(1<<x),h+=1;var C=32-Dt(c)+x;if(30<C){var D=x-x%5;C=(y&(1<<D)-1).toString(32),y>>=D,x-=D,Ps=1<<32-Dt(c)+x|h<<x|y,zs=C+a}else Ps=1<<C|h<<x|y,zs=a}function K1(a){a.return!==null&&($a(a,1),rC(a,1,0))}function Y1(a){for(;a===ip;)ip=fc[--hc],fc[hc]=null,sp=fc[--hc],fc[hc]=null;for(;a===Ua;)Ua=gi[--yi],gi[yi]=null,zs=gi[--yi],gi[yi]=null,Ps=gi[--yi],gi[yi]=null}var Sr=null,sn=null,xt=!1,Ga=null,cs=!1,X1=Error(r(519));function Wa(a){var c=Error(r(418,""));throw id(pi(c,a)),X1}function iC(a){var c=a.stateNode,h=a.type,y=a.memoizedProps;switch(c[Xt]=a,c[Bt]=y,h){case"dialog":at("cancel",c),at("close",c);break;case"iframe":case"object":case"embed":at("load",c);break;case"video":case"audio":for(h=0;h<Ad.length;h++)at(Ad[h],c);break;case"source":at("error",c);break;case"img":case"image":case"link":at("error",c),at("load",c);break;case"details":at("toggle",c);break;case"input":at("invalid",c),Eo(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Co(c);break;case"select":at("invalid",c);break;case"textarea":at("invalid",c),as(c,y.value,y.defaultValue,y.children),Co(c)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||y.suppressHydrationWarning===!0||w9(c.textContent,h)?(y.popover!=null&&(at("beforetoggle",c),at("toggle",c)),y.onScroll!=null&&at("scroll",c),y.onScrollEnd!=null&&at("scrollend",c),y.onClick!=null&&(c.onclick=Bp),c=!0):c=!1,c||Wa(a)}function sC(a){for(Sr=a.return;Sr;)switch(Sr.tag){case 5:case 13:cs=!1;return;case 27:case 3:cs=!0;return;default:Sr=Sr.return}}function nd(a){if(a!==Sr)return!1;if(!xt)return sC(a),xt=!0,!1;var c=a.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=a.type,h=!(h!=="form"&&h!=="button")||f2(a.type,a.memoizedProps)),h=!h),h&&sn&&Wa(a),sC(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(h=a.data,h==="/$"){if(c===0){sn=qi(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;a=a.nextSibling}sn=null}}else c===27?(c=sn,Uo(a.type)?(a=g2,g2=null,sn=a):sn=c):sn=Sr?qi(a.stateNode.nextSibling):null;return!0}function rd(){sn=Sr=null,xt=!1}function oC(){var a=Ga;return a!==null&&(Lr===null?Lr=a:Lr.push.apply(Lr,a),Ga=null),a}function id(a){Ga===null?Ga=[a]:Ga.push(a)}var Z1=W(null),Ka=null,Bs=null;function Mo(a,c,h){oe(Z1,c._currentValue),c._currentValue=h}function Vs(a){a._currentValue=Z1.current,ie(Z1)}function J1(a,c,h){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===h)break;a=a.return}}function Q1(a,c,h,y){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var C=x.dependencies;if(C!==null){var D=x.child;C=C.firstContext;e:for(;C!==null;){var z=C;C=x;for(var K=0;K<c.length;K++)if(z.context===c[K]){C.lanes|=h,z=C.alternate,z!==null&&(z.lanes|=h),J1(C.return,h,a),y||(D=null);break e}C=z.next}}else if(x.tag===18){if(D=x.return,D===null)throw Error(r(341));D.lanes|=h,C=D.alternate,C!==null&&(C.lanes|=h),J1(D,h,a),D=null}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===a){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}}function sd(a,c,h,y){a=null;for(var x=c,C=!1;x!==null;){if(!C){if((x.flags&524288)!==0)C=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var D=x.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var z=x.type;Xr(x.pendingProps.value,D.value)||(a!==null?a.push(z):a=[z])}}else if(x===ce.current){if(D=x.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(Od):a=[Od])}x=x.return}a!==null&&Q1(c,a,h,y),c.flags|=262144}function op(a){for(a=a.firstContext;a!==null;){if(!Xr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ya(a){Ka=a,Bs=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ur(a){return aC(Ka,a)}function ap(a,c){return Ka===null&&Ya(a),aC(a,c)}function aC(a,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},Bs===null){if(a===null)throw Error(r(308));Bs=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Bs=Bs.next=c;return h}var a$=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(h,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(h){return h()})}},l$=t.unstable_scheduleCallback,c$=t.unstable_NormalPriority,jn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ey(){return{controller:new a$,data:new Map,refCount:0}}function od(a){a.refCount--,a.refCount===0&&l$(c$,function(){a.controller.abort()})}var ad=null,ty=0,pc=0,mc=null;function u$(a,c){if(ad===null){var h=ad=[];ty=0,pc=r2(),mc={status:"pending",value:void 0,then:function(y){h.push(y)}}}return ty++,c.then(lC,lC),c}function lC(){if(--ty===0&&ad!==null){mc!==null&&(mc.status="fulfilled");var a=ad;ad=null,pc=0,mc=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function d$(a,c){var h=[],y={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return a.then(function(){y.status="fulfilled",y.value=c;for(var x=0;x<h.length;x++)(0,h[x])(c)},function(x){for(y.status="rejected",y.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),y}var cC=O.S;O.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&u$(a,c),cC!==null&&cC(a,c)};var Xa=W(null);function ny(){var a=Xa.current;return a!==null?a:It.pooledCache}function lp(a,c){c===null?oe(Xa,Xa.current):oe(Xa,c.pool)}function uC(){var a=ny();return a===null?null:{parent:jn._currentValue,pool:a}}var ld=Error(r(460)),dC=Error(r(474)),cp=Error(r(542)),ry={then:function(){}};function fC(a){return a=a.status,a==="fulfilled"||a==="rejected"}function up(){}function hC(a,c,h){switch(h=a[h],h===void 0?a.push(c):h!==c&&(c.then(up,up),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,mC(a),a;default:if(typeof c.status=="string")c.then(up,up);else{if(a=It,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(y){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=y}},function(y){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,mC(a),a}throw cd=c,ld}}var cd=null;function pC(){if(cd===null)throw Error(r(459));var a=cd;return cd=null,a}function mC(a){if(a===ld||a===cp)throw Error(r(483))}var _o=!1;function iy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sy(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Do(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ro(a,c,h){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Ct&2)!==0){var x=y.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),y.pending=c,c=np(a),tC(a,null,h),c}return tp(a,y,c,h),np(a)}function ud(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Gr(a,h)}}function oy(a,c){var h=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var x=null,C=null;if(h=h.firstBaseUpdate,h!==null){do{var D={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};C===null?x=C=D:C=C.next=D,h=h.next}while(h!==null);C===null?x=C=c:C=C.next=c}else x=C=c;h={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}var ay=!1;function dd(){if(ay){var a=mc;if(a!==null)throw a}}function fd(a,c,h,y){ay=!1;var x=a.updateQueue;_o=!1;var C=x.firstBaseUpdate,D=x.lastBaseUpdate,z=x.shared.pending;if(z!==null){x.shared.pending=null;var K=z,le=K.next;K.next=null,D===null?C=le:D.next=le,D=K;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,z=fe.lastBaseUpdate,z!==D&&(z===null?fe.firstBaseUpdate=le:z.next=le,fe.lastBaseUpdate=K))}if(C!==null){var me=x.baseState;D=0,fe=le=K=null,z=C;do{var ue=z.lane&-536870913,de=ue!==z.lane;if(de?(ft&ue)===ue:(y&ue)===ue){ue!==0&&ue===pc&&(ay=!0),fe!==null&&(fe=fe.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var Ke=a,$e=z;ue=c;var At=h;switch($e.tag){case 1:if(Ke=$e.payload,typeof Ke=="function"){me=Ke.call(At,me,ue);break e}me=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=$e.payload,ue=typeof Ke=="function"?Ke.call(At,me,ue):Ke,ue==null)break e;me=f({},me,ue);break e;case 2:_o=!0}}ue=z.callback,ue!==null&&(a.flags|=64,de&&(a.flags|=8192),de=x.callbacks,de===null?x.callbacks=[ue]:de.push(ue))}else de={lane:ue,tag:z.tag,payload:z.payload,callback:z.callback,next:null},fe===null?(le=fe=de,K=me):fe=fe.next=de,D|=ue;if(z=z.next,z===null){if(z=x.shared.pending,z===null)break;de=z,z=de.next,de.next=null,x.lastBaseUpdate=de,x.shared.pending=null}}while(!0);fe===null&&(K=me),x.baseState=K,x.firstBaseUpdate=le,x.lastBaseUpdate=fe,C===null&&(x.shared.lanes=0),Vo|=D,a.lanes=D,a.memoizedState=me}}function gC(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function yC(a,c){var h=a.callbacks;if(h!==null)for(a.callbacks=null,a=0;a<h.length;a++)gC(h[a],c)}var gc=W(null),dp=W(0);function bC(a,c){a=Ws,oe(dp,a),oe(gc,c),Ws=a|c.baseLanes}function ly(){oe(dp,Ws),oe(gc,gc.current)}function cy(){Ws=dp.current,ie(gc),ie(dp)}var jo=0,it=null,Nt=null,wn=null,fp=!1,yc=!1,Za=!1,hp=0,hd=0,bc=null,f$=0;function dn(){throw Error(r(321))}function uy(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Xr(a[h],c[h]))return!1;return!0}function dy(a,c,h,y,x,C){return jo=C,it=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,O.H=a===null||a.memoizedState===null?tk:nk,Za=!1,C=h(y,x),Za=!1,yc&&(C=xC(c,h,y,x)),vC(a),C}function vC(a){O.H=vp;var c=Nt!==null&&Nt.next!==null;if(jo=0,wn=Nt=it=null,fp=!1,hd=0,bc=null,c)throw Error(r(300));a===null||Bn||(a=a.dependencies,a!==null&&op(a)&&(Bn=!0))}function xC(a,c,h,y){it=a;var x=0;do{if(yc&&(bc=null),hd=0,yc=!1,25<=x)throw Error(r(301));if(x+=1,wn=Nt=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}O.H=v$,C=c(h,y)}while(yc);return C}function h$(){var a=O.H,c=a.useState()[0];return c=typeof c.then=="function"?pd(c):c,a=a.useState()[0],(Nt!==null?Nt.memoizedState:null)!==a&&(it.flags|=1024),c}function fy(){var a=hp!==0;return hp=0,a}function hy(a,c,h){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~h}function py(a){if(fp){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}fp=!1}jo=0,wn=Nt=it=null,yc=!1,hd=hp=0,bc=null}function jr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?it.memoizedState=wn=a:wn=wn.next=a,wn}function Sn(){if(Nt===null){var a=it.alternate;a=a!==null?a.memoizedState:null}else a=Nt.next;var c=wn===null?it.memoizedState:wn.next;if(c!==null)wn=c,Nt=a;else{if(a===null)throw it.alternate===null?Error(r(467)):Error(r(310));Nt=a,a={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},wn===null?it.memoizedState=wn=a:wn=wn.next=a}return wn}function my(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pd(a){var c=hd;return hd+=1,bc===null&&(bc=[]),a=hC(bc,a,c),c=it,(wn===null?c.memoizedState:wn.next)===null&&(c=c.alternate,O.H=c===null||c.memoizedState===null?tk:nk),a}function pp(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return pd(a);if(a.$$typeof===E)return ur(a)}throw Error(r(438,String(a)))}function gy(a){var c=null,h=it.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var y=it.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=my(),it.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(a),y=0;y<a;y++)h[y]=P;return c.index++,h}function Hs(a,c){return typeof c=="function"?c(a):c}function mp(a){var c=Sn();return yy(c,Nt,a)}function yy(a,c,h){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=h;var x=a.baseQueue,C=y.pending;if(C!==null){if(x!==null){var D=x.next;x.next=C.next,C.next=D}c.baseQueue=x=C,y.pending=null}if(C=a.baseState,x===null)a.memoizedState=C;else{c=x.next;var z=D=null,K=null,le=c,fe=!1;do{var me=le.lane&-536870913;if(me!==le.lane?(ft&me)===me:(jo&me)===me){var ue=le.revertLane;if(ue===0)K!==null&&(K=K.next={lane:0,revertLane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),me===pc&&(fe=!0);else if((jo&ue)===ue){le=le.next,ue===pc&&(fe=!0);continue}else me={lane:0,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(z=K=me,D=C):K=K.next=me,it.lanes|=ue,Vo|=ue;me=le.action,Za&&h(C,me),C=le.hasEagerState?le.eagerState:h(C,me)}else ue={lane:me,revertLane:le.revertLane,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(z=K=ue,D=C):K=K.next=ue,it.lanes|=me,Vo|=me;le=le.next}while(le!==null&&le!==c);if(K===null?D=C:K.next=z,!Xr(C,a.memoizedState)&&(Bn=!0,fe&&(h=mc,h!==null)))throw h;a.memoizedState=C,a.baseState=D,a.baseQueue=K,y.lastRenderedState=C}return x===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function by(a){var c=Sn(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var y=h.dispatch,x=h.pending,C=c.memoizedState;if(x!==null){h.pending=null;var D=x=x.next;do C=a(C,D.action),D=D.next;while(D!==x);Xr(C,c.memoizedState)||(Bn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),h.lastRenderedState=C}return[C,y]}function wC(a,c,h){var y=it,x=Sn(),C=xt;if(C){if(h===void 0)throw Error(r(407));h=h()}else h=c();var D=!Xr((Nt||x).memoizedState,h);D&&(x.memoizedState=h,Bn=!0),x=x.queue;var z=kC.bind(null,y,x,a);if(md(2048,8,z,[a]),x.getSnapshot!==c||D||wn!==null&&wn.memoizedState.tag&1){if(y.flags|=2048,vc(9,gp(),CC.bind(null,y,x,h,c),null),It===null)throw Error(r(349));C||(jo&124)!==0||SC(y,c,h)}return h}function SC(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=it.updateQueue,c===null?(c=my(),it.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function CC(a,c,h,y){c.value=h,c.getSnapshot=y,EC(c)&&NC(a)}function kC(a,c,h){return h(function(){EC(c)&&NC(a)})}function EC(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Xr(a,h)}catch{return!0}}function NC(a){var c=uc(a,2);c!==null&&ni(c,a,2)}function vy(a){var c=jr();if(typeof a=="function"){var h=a;if(a=h(),Za){_t(!0);try{h()}finally{_t(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:a},c}function TC(a,c,h,y){return a.baseState=h,yy(a,Nt,typeof y=="function"?y:Hs)}function p$(a,c,h,y,x){if(bp(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){C.listeners.push(D)}};O.T!==null?h(!0):C.isTransition=!1,y(C),h=c.pending,h===null?(C.next=c.pending=C,AC(c,C)):(C.next=h.next,c.pending=h.next=C)}}function AC(a,c){var h=c.action,y=c.payload,x=a.state;if(c.isTransition){var C=O.T,D={};O.T=D;try{var z=h(x,y),K=O.S;K!==null&&K(D,z),MC(a,c,z)}catch(le){xy(a,c,le)}finally{O.T=C}}else try{C=h(x,y),MC(a,c,C)}catch(le){xy(a,c,le)}}function MC(a,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){_C(a,c,y)},function(y){return xy(a,c,y)}):_C(a,c,h)}function _C(a,c,h){c.status="fulfilled",c.value=h,DC(c),a.state=h,c=a.pending,c!==null&&(h=c.next,h===c?a.pending=null:(h=h.next,c.next=h,AC(a,h)))}function xy(a,c,h){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=h,DC(c),c=c.next;while(c!==y)}a.action=null}function DC(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function RC(a,c){return c}function jC(a,c){if(xt){var h=It.formState;if(h!==null){e:{var y=it;if(xt){if(sn){t:{for(var x=sn,C=cs;x.nodeType!==8;){if(!C){x=null;break t}if(x=qi(x.nextSibling),x===null){x=null;break t}}C=x.data,x=C==="F!"||C==="F"?x:null}if(x){sn=qi(x.nextSibling),y=x.data==="F!";break e}}Wa(y)}y=!1}y&&(c=h[0])}}return h=jr(),h.memoizedState=h.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:RC,lastRenderedState:c},h.queue=y,h=JC.bind(null,it,y),y.dispatch=h,y=vy(!1),C=Ey.bind(null,it,!1,y.queue),y=jr(),x={state:c,dispatch:null,action:a,pending:null},y.queue=x,h=p$.bind(null,it,x,C,h),x.dispatch=h,y.memoizedState=a,[c,h,!1]}function OC(a){var c=Sn();return LC(c,Nt,a)}function LC(a,c,h){if(c=yy(a,c,RC)[0],a=mp(Hs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=pd(c)}catch(D){throw D===ld?cp:D}else y=c;c=Sn();var x=c.queue,C=x.dispatch;return h!==c.memoizedState&&(it.flags|=2048,vc(9,gp(),m$.bind(null,x,h),null)),[y,C,a]}function m$(a,c){a.action=c}function IC(a){var c=Sn(),h=Nt;if(h!==null)return LC(c,h,a);Sn(),c=c.memoizedState,h=Sn();var y=h.queue.dispatch;return h.memoizedState=a,[c,y,!1]}function vc(a,c,h,y){return a={tag:a,create:h,deps:y,inst:c,next:null},c=it.updateQueue,c===null&&(c=my(),it.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=a.next=a:(y=h.next,h.next=a,a.next=y,c.lastEffect=a),a}function gp(){return{destroy:void 0,resource:void 0}}function PC(){return Sn().memoizedState}function yp(a,c,h,y){var x=jr();y=y===void 0?null:y,it.flags|=a,x.memoizedState=vc(1|c,gp(),h,y)}function md(a,c,h,y){var x=Sn();y=y===void 0?null:y;var C=x.memoizedState.inst;Nt!==null&&y!==null&&uy(y,Nt.memoizedState.deps)?x.memoizedState=vc(c,C,h,y):(it.flags|=a,x.memoizedState=vc(1|c,C,h,y))}function zC(a,c){yp(8390656,8,a,c)}function BC(a,c){md(2048,8,a,c)}function VC(a,c){return md(4,2,a,c)}function HC(a,c){return md(4,4,a,c)}function FC(a,c){if(typeof c=="function"){a=a();var h=c(a);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function qC(a,c,h){h=h!=null?h.concat([a]):null,md(4,4,FC.bind(null,c,a),h)}function wy(){}function UC(a,c){var h=Sn();c=c===void 0?null:c;var y=h.memoizedState;return c!==null&&uy(c,y[1])?y[0]:(h.memoizedState=[a,c],a)}function $C(a,c){var h=Sn();c=c===void 0?null:c;var y=h.memoizedState;if(c!==null&&uy(c,y[1]))return y[0];if(y=a(),Za){_t(!0);try{a()}finally{_t(!1)}}return h.memoizedState=[y,c],y}function Sy(a,c,h){return h===void 0||(jo&1073741824)!==0?a.memoizedState=c:(a.memoizedState=h,a=Kk(),it.lanes|=a,Vo|=a,h)}function GC(a,c,h,y){return Xr(h,c)?h:gc.current!==null?(a=Sy(a,h,y),Xr(a,c)||(Bn=!0),a):(jo&42)===0?(Bn=!0,a.memoizedState=h):(a=Kk(),it.lanes|=a,Vo|=a,c)}function WC(a,c,h,y,x){var C=H.p;H.p=C!==0&&8>C?C:8;var D=O.T,z={};O.T=z,Ey(a,!1,c,h);try{var K=x(),le=O.S;if(le!==null&&le(z,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var fe=d$(K,y);gd(a,c,fe,ti(a))}else gd(a,c,y,ti(a))}catch(me){gd(a,c,{then:function(){},status:"rejected",reason:me},ti())}finally{H.p=C,O.T=D}}function g$(){}function Cy(a,c,h,y){if(a.tag!==5)throw Error(r(476));var x=KC(a).queue;WC(a,x,c,G,h===null?g$:function(){return YC(a),h(y)})}function KC(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:G},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:h},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function YC(a){var c=KC(a).next.queue;gd(a,c,{},ti())}function ky(){return ur(Od)}function XC(){return Sn().memoizedState}function ZC(){return Sn().memoizedState}function y$(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var h=ti();a=Do(h);var y=Ro(c,a,h);y!==null&&(ni(y,c,h),ud(y,c,h)),c={cache:ey()},a.payload=c;return}c=c.return}}function b$(a,c,h){var y=ti();h={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},bp(a)?QC(c,h):(h=U1(a,c,h,y),h!==null&&(ni(h,a,y),ek(h,c,y)))}function JC(a,c,h){var y=ti();gd(a,c,h,y)}function gd(a,c,h,y){var x={lane:y,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(bp(a))QC(c,x);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var D=c.lastRenderedState,z=C(D,h);if(x.hasEagerState=!0,x.eagerState=z,Xr(z,D))return tp(a,c,x,0),It===null&&ep(),!1}catch{}finally{}if(h=U1(a,c,x,y),h!==null)return ni(h,a,y),ek(h,c,y),!0}return!1}function Ey(a,c,h,y){if(y={lane:2,revertLane:r2(),action:y,hasEagerState:!1,eagerState:null,next:null},bp(a)){if(c)throw Error(r(479))}else c=U1(a,h,y,2),c!==null&&ni(c,a,2)}function bp(a){var c=a.alternate;return a===it||c!==null&&c===it}function QC(a,c){yc=fp=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function ek(a,c,h){if((h&4194048)!==0){var y=c.lanes;y&=a.pendingLanes,h|=y,c.lanes=h,Gr(a,h)}}var vp={readContext:ur,use:pp,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn},tk={readContext:ur,use:pp,useCallback:function(a,c){return jr().memoizedState=[a,c===void 0?null:c],a},useContext:ur,useEffect:zC,useImperativeHandle:function(a,c,h){h=h!=null?h.concat([a]):null,yp(4194308,4,FC.bind(null,c,a),h)},useLayoutEffect:function(a,c){return yp(4194308,4,a,c)},useInsertionEffect:function(a,c){yp(4,2,a,c)},useMemo:function(a,c){var h=jr();c=c===void 0?null:c;var y=a();if(Za){_t(!0);try{a()}finally{_t(!1)}}return h.memoizedState=[y,c],y},useReducer:function(a,c,h){var y=jr();if(h!==void 0){var x=h(c);if(Za){_t(!0);try{h(c)}finally{_t(!1)}}}else x=c;return y.memoizedState=y.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},y.queue=a,a=a.dispatch=b$.bind(null,it,a),[y.memoizedState,a]},useRef:function(a){var c=jr();return a={current:a},c.memoizedState=a},useState:function(a){a=vy(a);var c=a.queue,h=JC.bind(null,it,c);return c.dispatch=h,[a.memoizedState,h]},useDebugValue:wy,useDeferredValue:function(a,c){var h=jr();return Sy(h,a,c)},useTransition:function(){var a=vy(!1);return a=WC.bind(null,it,a.queue,!0,!1),jr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,h){var y=it,x=jr();if(xt){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),It===null)throw Error(r(349));(ft&124)!==0||SC(y,c,h)}x.memoizedState=h;var C={value:h,getSnapshot:c};return x.queue=C,zC(kC.bind(null,y,C,a),[a]),y.flags|=2048,vc(9,gp(),CC.bind(null,y,C,h,c),null),h},useId:function(){var a=jr(),c=It.identifierPrefix;if(xt){var h=zs,y=Ps;h=(y&~(1<<32-Dt(y)-1)).toString(32)+h,c=""+c+"R"+h,h=hp++,0<h&&(c+="H"+h.toString(32)),c+=""}else h=f$++,c=""+c+"r"+h.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:ky,useFormState:jC,useActionState:jC,useOptimistic:function(a){var c=jr();c.memoizedState=c.baseState=a;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Ey.bind(null,it,!0,h),h.dispatch=c,[a,c]},useMemoCache:gy,useCacheRefresh:function(){return jr().memoizedState=y$.bind(null,it)}},nk={readContext:ur,use:pp,useCallback:UC,useContext:ur,useEffect:BC,useImperativeHandle:qC,useInsertionEffect:VC,useLayoutEffect:HC,useMemo:$C,useReducer:mp,useRef:PC,useState:function(){return mp(Hs)},useDebugValue:wy,useDeferredValue:function(a,c){var h=Sn();return GC(h,Nt.memoizedState,a,c)},useTransition:function(){var a=mp(Hs)[0],c=Sn().memoizedState;return[typeof a=="boolean"?a:pd(a),c]},useSyncExternalStore:wC,useId:XC,useHostTransitionStatus:ky,useFormState:OC,useActionState:OC,useOptimistic:function(a,c){var h=Sn();return TC(h,Nt,a,c)},useMemoCache:gy,useCacheRefresh:ZC},v$={readContext:ur,use:pp,useCallback:UC,useContext:ur,useEffect:BC,useImperativeHandle:qC,useInsertionEffect:VC,useLayoutEffect:HC,useMemo:$C,useReducer:by,useRef:PC,useState:function(){return by(Hs)},useDebugValue:wy,useDeferredValue:function(a,c){var h=Sn();return Nt===null?Sy(h,a,c):GC(h,Nt.memoizedState,a,c)},useTransition:function(){var a=by(Hs)[0],c=Sn().memoizedState;return[typeof a=="boolean"?a:pd(a),c]},useSyncExternalStore:wC,useId:XC,useHostTransitionStatus:ky,useFormState:IC,useActionState:IC,useOptimistic:function(a,c){var h=Sn();return Nt!==null?TC(h,Nt,a,c):(h.baseState=a,[a,h.queue.dispatch])},useMemoCache:gy,useCacheRefresh:ZC},xc=null,yd=0;function xp(a){var c=yd;return yd+=1,xc===null&&(xc=[]),hC(xc,a,c)}function bd(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function wp(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function rk(a){var c=a._init;return c(a._payload)}function ik(a){function c(ne,Q){if(a){var ae=ne.deletions;ae===null?(ne.deletions=[Q],ne.flags|=16):ae.push(Q)}}function h(ne,Q){if(!a)return null;for(;Q!==null;)c(ne,Q),Q=Q.sibling;return null}function y(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function x(ne,Q){return ne=Is(ne,Q),ne.index=0,ne.sibling=null,ne}function C(ne,Q,ae){return ne.index=ae,a?(ae=ne.alternate,ae!==null?(ae=ae.index,ae<Q?(ne.flags|=67108866,Q):ae):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function D(ne){return a&&ne.alternate===null&&(ne.flags|=67108866),ne}function z(ne,Q,ae,he){return Q===null||Q.tag!==6?(Q=G1(ae,ne.mode,he),Q.return=ne,Q):(Q=x(Q,ae),Q.return=ne,Q)}function K(ne,Q,ae,he){var Ie=ae.type;return Ie===v?fe(ne,Q,ae.props.children,he,ae.key):Q!==null&&(Q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&rk(Ie)===Q.type)?(Q=x(Q,ae.props),bd(Q,ae),Q.return=ne,Q):(Q=rp(ae.type,ae.key,ae.props,null,ne.mode,he),bd(Q,ae),Q.return=ne,Q)}function le(ne,Q,ae,he){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ae.containerInfo||Q.stateNode.implementation!==ae.implementation?(Q=W1(ae,ne.mode,he),Q.return=ne,Q):(Q=x(Q,ae.children||[]),Q.return=ne,Q)}function fe(ne,Q,ae,he,Ie){return Q===null||Q.tag!==7?(Q=qa(ae,ne.mode,he,Ie),Q.return=ne,Q):(Q=x(Q,ae),Q.return=ne,Q)}function me(ne,Q,ae){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=G1(""+Q,ne.mode,ae),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return ae=rp(Q.type,Q.key,Q.props,null,ne.mode,ae),bd(ae,Q),ae.return=ne,ae;case b:return Q=W1(Q,ne.mode,ae),Q.return=ne,Q;case R:var he=Q._init;return Q=he(Q._payload),me(ne,Q,ae)}if(U(Q)||V(Q))return Q=qa(Q,ne.mode,ae,null),Q.return=ne,Q;if(typeof Q.then=="function")return me(ne,xp(Q),ae);if(Q.$$typeof===E)return me(ne,ap(ne,Q),ae);wp(ne,Q)}return null}function ue(ne,Q,ae,he){var Ie=Q!==null?Q.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Ie!==null?null:z(ne,Q,""+ae,he);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case m:return ae.key===Ie?K(ne,Q,ae,he):null;case b:return ae.key===Ie?le(ne,Q,ae,he):null;case R:return Ie=ae._init,ae=Ie(ae._payload),ue(ne,Q,ae,he)}if(U(ae)||V(ae))return Ie!==null?null:fe(ne,Q,ae,he,null);if(typeof ae.then=="function")return ue(ne,Q,xp(ae),he);if(ae.$$typeof===E)return ue(ne,Q,ap(ne,ae),he);wp(ne,ae)}return null}function de(ne,Q,ae,he,Ie){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ne=ne.get(ae)||null,z(Q,ne,""+he,Ie);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case m:return ne=ne.get(he.key===null?ae:he.key)||null,K(Q,ne,he,Ie);case b:return ne=ne.get(he.key===null?ae:he.key)||null,le(Q,ne,he,Ie);case R:var st=he._init;return he=st(he._payload),de(ne,Q,ae,he,Ie)}if(U(he)||V(he))return ne=ne.get(ae)||null,fe(Q,ne,he,Ie,null);if(typeof he.then=="function")return de(ne,Q,ae,xp(he),Ie);if(he.$$typeof===E)return de(ne,Q,ae,ap(Q,he),Ie);wp(Q,he)}return null}function Ke(ne,Q,ae,he){for(var Ie=null,st=null,Ve=Q,We=Q=0,Hn=null;Ve!==null&&We<ae.length;We++){Ve.index>We?(Hn=Ve,Ve=null):Hn=Ve.sibling;var bt=ue(ne,Ve,ae[We],he);if(bt===null){Ve===null&&(Ve=Hn);break}a&&Ve&&bt.alternate===null&&c(ne,Ve),Q=C(bt,Q,We),st===null?Ie=bt:st.sibling=bt,st=bt,Ve=Hn}if(We===ae.length)return h(ne,Ve),xt&&$a(ne,We),Ie;if(Ve===null){for(;We<ae.length;We++)Ve=me(ne,ae[We],he),Ve!==null&&(Q=C(Ve,Q,We),st===null?Ie=Ve:st.sibling=Ve,st=Ve);return xt&&$a(ne,We),Ie}for(Ve=y(Ve);We<ae.length;We++)Hn=de(Ve,ne,We,ae[We],he),Hn!==null&&(a&&Hn.alternate!==null&&Ve.delete(Hn.key===null?We:Hn.key),Q=C(Hn,Q,We),st===null?Ie=Hn:st.sibling=Hn,st=Hn);return a&&Ve.forEach(function(Yo){return c(ne,Yo)}),xt&&$a(ne,We),Ie}function $e(ne,Q,ae,he){if(ae==null)throw Error(r(151));for(var Ie=null,st=null,Ve=Q,We=Q=0,Hn=null,bt=ae.next();Ve!==null&&!bt.done;We++,bt=ae.next()){Ve.index>We?(Hn=Ve,Ve=null):Hn=Ve.sibling;var Yo=ue(ne,Ve,bt.value,he);if(Yo===null){Ve===null&&(Ve=Hn);break}a&&Ve&&Yo.alternate===null&&c(ne,Ve),Q=C(Yo,Q,We),st===null?Ie=Yo:st.sibling=Yo,st=Yo,Ve=Hn}if(bt.done)return h(ne,Ve),xt&&$a(ne,We),Ie;if(Ve===null){for(;!bt.done;We++,bt=ae.next())bt=me(ne,bt.value,he),bt!==null&&(Q=C(bt,Q,We),st===null?Ie=bt:st.sibling=bt,st=bt);return xt&&$a(ne,We),Ie}for(Ve=y(Ve);!bt.done;We++,bt=ae.next())bt=de(Ve,ne,We,bt.value,he),bt!==null&&(a&&bt.alternate!==null&&Ve.delete(bt.key===null?We:bt.key),Q=C(bt,Q,We),st===null?Ie=bt:st.sibling=bt,st=bt);return a&&Ve.forEach(function(xG){return c(ne,xG)}),xt&&$a(ne,We),Ie}function At(ne,Q,ae,he){if(typeof ae=="object"&&ae!==null&&ae.type===v&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case m:e:{for(var Ie=ae.key;Q!==null;){if(Q.key===Ie){if(Ie=ae.type,Ie===v){if(Q.tag===7){h(ne,Q.sibling),he=x(Q,ae.props.children),he.return=ne,ne=he;break e}}else if(Q.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===R&&rk(Ie)===Q.type){h(ne,Q.sibling),he=x(Q,ae.props),bd(he,ae),he.return=ne,ne=he;break e}h(ne,Q);break}else c(ne,Q);Q=Q.sibling}ae.type===v?(he=qa(ae.props.children,ne.mode,he,ae.key),he.return=ne,ne=he):(he=rp(ae.type,ae.key,ae.props,null,ne.mode,he),bd(he,ae),he.return=ne,ne=he)}return D(ne);case b:e:{for(Ie=ae.key;Q!==null;){if(Q.key===Ie)if(Q.tag===4&&Q.stateNode.containerInfo===ae.containerInfo&&Q.stateNode.implementation===ae.implementation){h(ne,Q.sibling),he=x(Q,ae.children||[]),he.return=ne,ne=he;break e}else{h(ne,Q);break}else c(ne,Q);Q=Q.sibling}he=W1(ae,ne.mode,he),he.return=ne,ne=he}return D(ne);case R:return Ie=ae._init,ae=Ie(ae._payload),At(ne,Q,ae,he)}if(U(ae))return Ke(ne,Q,ae,he);if(V(ae)){if(Ie=V(ae),typeof Ie!="function")throw Error(r(150));return ae=Ie.call(ae),$e(ne,Q,ae,he)}if(typeof ae.then=="function")return At(ne,Q,xp(ae),he);if(ae.$$typeof===E)return At(ne,Q,ap(ne,ae),he);wp(ne,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,Q!==null&&Q.tag===6?(h(ne,Q.sibling),he=x(Q,ae),he.return=ne,ne=he):(h(ne,Q),he=G1(ae,ne.mode,he),he.return=ne,ne=he),D(ne)):h(ne,Q)}return function(ne,Q,ae,he){try{yd=0;var Ie=At(ne,Q,ae,he);return xc=null,Ie}catch(Ve){if(Ve===ld||Ve===cp)throw Ve;var st=Zr(29,Ve,null,ne.mode);return st.lanes=he,st.return=ne,st}finally{}}}var wc=ik(!0),sk=ik(!1),bi=W(null),us=null;function Oo(a){var c=a.alternate;oe(On,On.current&1),oe(bi,a),us===null&&(c===null||gc.current!==null||c.memoizedState!==null)&&(us=a)}function ok(a){if(a.tag===22){if(oe(On,On.current),oe(bi,a),us===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(us=a)}}else Lo()}function Lo(){oe(On,On.current),oe(bi,bi.current)}function Fs(a){ie(bi),us===a&&(us=null),ie(On)}var On=W(0);function Sp(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||m2(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Ny(a,c,h,y){c=a.memoizedState,h=h(y,c),h=h==null?c:f({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Ty={enqueueSetState:function(a,c,h){a=a._reactInternals;var y=ti(),x=Do(y);x.payload=c,h!=null&&(x.callback=h),c=Ro(a,x,y),c!==null&&(ni(c,a,y),ud(c,a,y))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var y=ti(),x=Do(y);x.tag=1,x.payload=c,h!=null&&(x.callback=h),c=Ro(a,x,y),c!==null&&(ni(c,a,y),ud(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=ti(),y=Do(h);y.tag=2,c!=null&&(y.callback=c),c=Ro(a,y,h),c!==null&&(ni(c,a,h),ud(c,a,h))}};function ak(a,c,h,y,x,C,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,C,D):c.prototype&&c.prototype.isPureReactComponent?!ed(h,y)||!ed(x,C):!0}function lk(a,c,h,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==a&&Ty.enqueueReplaceState(c,c.state,null)}function Ja(a,c){var h=c;if("ref"in c){h={};for(var y in c)y!=="ref"&&(h[y]=c[y])}if(a=a.defaultProps){h===c&&(h=f({},h));for(var x in a)h[x]===void 0&&(h[x]=a[x])}return h}var Cp=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function ck(a){Cp(a)}function uk(a){console.error(a)}function dk(a){Cp(a)}function kp(a,c){try{var h=a.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function fk(a,c,h){try{var y=a.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Ay(a,c,h){return h=Do(h),h.tag=3,h.payload={element:null},h.callback=function(){kp(a,c)},h}function hk(a){return a=Do(a),a.tag=3,a}function pk(a,c,h,y){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var C=y.value;a.payload=function(){return x(C)},a.callback=function(){fk(c,h,y)}}var D=h.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(a.callback=function(){fk(c,h,y),typeof x!="function"&&(Ho===null?Ho=new Set([this]):Ho.add(this));var z=y.stack;this.componentDidCatch(y.value,{componentStack:z!==null?z:""})})}function x$(a,c,h,y,x){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=h.alternate,c!==null&&sd(c,h,x,!0),h=bi.current,h!==null){switch(h.tag){case 13:return us===null?Jy():h.alternate===null&&on===0&&(on=3),h.flags&=-257,h.flags|=65536,h.lanes=x,y===ry?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([y]):c.add(y),e2(a,y,x)),!1;case 22:return h.flags|=65536,y===ry?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([y]):h.add(y)),e2(a,y,x)),!1}throw Error(r(435,h.tag))}return e2(a,y,x),Jy(),!1}if(xt)return c=bi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,y!==X1&&(a=Error(r(422),{cause:y}),id(pi(a,h)))):(y!==X1&&(c=Error(r(423),{cause:y}),id(pi(c,h))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,y=pi(y,h),x=Ay(a.stateNode,y,x),oy(a,x),on!==4&&(on=2)),!1;var C=Error(r(520),{cause:y});if(C=pi(C,h),Ed===null?Ed=[C]:Ed.push(C),on!==4&&(on=2),c===null)return!0;y=pi(y,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,a=x&-x,h.lanes|=a,a=Ay(h.stateNode,y,a),oy(h,a),!1;case 1:if(c=h.type,C=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ho===null||!Ho.has(C))))return h.flags|=65536,x&=-x,h.lanes|=x,x=hk(x),pk(x,a,h,y),oy(h,x),!1}h=h.return}while(h!==null);return!1}var mk=Error(r(461)),Bn=!1;function Zn(a,c,h,y){c.child=a===null?sk(c,null,h,y):wc(c,a.child,h,y)}function gk(a,c,h,y,x){h=h.render;var C=c.ref;if("ref"in y){var D={};for(var z in y)z!=="ref"&&(D[z]=y[z])}else D=y;return Ya(c),y=dy(a,c,h,D,C,x),z=fy(),a!==null&&!Bn?(hy(a,c,x),qs(a,c,x)):(xt&&z&&K1(c),c.flags|=1,Zn(a,c,y,x),c.child)}function yk(a,c,h,y,x){if(a===null){var C=h.type;return typeof C=="function"&&!$1(C)&&C.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=C,bk(a,c,C,y,x)):(a=rp(h.type,null,y,c,c.mode,x),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!Iy(a,x)){var D=C.memoizedProps;if(h=h.compare,h=h!==null?h:ed,h(D,y)&&a.ref===c.ref)return qs(a,c,x)}return c.flags|=1,a=Is(C,y),a.ref=c.ref,a.return=c,c.child=a}function bk(a,c,h,y,x){if(a!==null){var C=a.memoizedProps;if(ed(C,y)&&a.ref===c.ref)if(Bn=!1,c.pendingProps=y=C,Iy(a,x))(a.flags&131072)!==0&&(Bn=!0);else return c.lanes=a.lanes,qs(a,c,x)}return My(a,c,h,y,x)}function vk(a,c,h){var y=c.pendingProps,x=y.children,C=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=C!==null?C.baseLanes|h:h,a!==null){for(x=c.child=a.child,C=0;x!==null;)C=C|x.lanes|x.childLanes,x=x.sibling;c.childLanes=C&~y}else c.childLanes=0,c.child=null;return xk(a,c,y,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&lp(c,C!==null?C.cachePool:null),C!==null?bC(c,C):ly(),ok(c);else return c.lanes=c.childLanes=536870912,xk(a,c,C!==null?C.baseLanes|h:h,h)}else C!==null?(lp(c,C.cachePool),bC(c,C),Lo(),c.memoizedState=null):(a!==null&&lp(c,null),ly(),Lo());return Zn(a,c,x,h),c.child}function xk(a,c,h,y){var x=ny();return x=x===null?null:{parent:jn._currentValue,pool:x},c.memoizedState={baseLanes:h,cachePool:x},a!==null&&lp(c,null),ly(),ok(c),a!==null&&sd(a,c,y,!0),null}function Ep(a,c){var h=c.ref;if(h===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(a===null||a.ref!==h)&&(c.flags|=4194816)}}function My(a,c,h,y,x){return Ya(c),h=dy(a,c,h,y,void 0,x),y=fy(),a!==null&&!Bn?(hy(a,c,x),qs(a,c,x)):(xt&&y&&K1(c),c.flags|=1,Zn(a,c,h,x),c.child)}function wk(a,c,h,y,x,C){return Ya(c),c.updateQueue=null,h=xC(c,y,h,x),vC(a),y=fy(),a!==null&&!Bn?(hy(a,c,C),qs(a,c,C)):(xt&&y&&K1(c),c.flags|=1,Zn(a,c,h,C),c.child)}function Sk(a,c,h,y,x){if(Ya(c),c.stateNode===null){var C=dc,D=h.contextType;typeof D=="object"&&D!==null&&(C=ur(D)),C=new h(y,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Ty,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=y,C.state=c.memoizedState,C.refs={},iy(c),D=h.contextType,C.context=typeof D=="object"&&D!==null?ur(D):dc,C.state=c.memoizedState,D=h.getDerivedStateFromProps,typeof D=="function"&&(Ny(c,h,D,y),C.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(D=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),D!==C.state&&Ty.enqueueReplaceState(C,C.state,null),fd(c,y,C,x),dd(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(a===null){C=c.stateNode;var z=c.memoizedProps,K=Ja(h,z);C.props=K;var le=C.context,fe=h.contextType;D=dc,typeof fe=="object"&&fe!==null&&(D=ur(fe));var me=h.getDerivedStateFromProps;fe=typeof me=="function"||typeof C.getSnapshotBeforeUpdate=="function",z=c.pendingProps!==z,fe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z||le!==D)&&lk(c,C,y,D),_o=!1;var ue=c.memoizedState;C.state=ue,fd(c,y,C,x),dd(),le=c.memoizedState,z||ue!==le||_o?(typeof me=="function"&&(Ny(c,h,me,y),le=c.memoizedState),(K=_o||ak(c,h,K,y,ue,le,D))?(fe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=le),C.props=y,C.state=le,C.context=D,y=K):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{C=c.stateNode,sy(a,c),D=c.memoizedProps,fe=Ja(h,D),C.props=fe,me=c.pendingProps,ue=C.context,le=h.contextType,K=dc,typeof le=="object"&&le!==null&&(K=ur(le)),z=h.getDerivedStateFromProps,(le=typeof z=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==me||ue!==K)&&lk(c,C,y,K),_o=!1,ue=c.memoizedState,C.state=ue,fd(c,y,C,x),dd();var de=c.memoizedState;D!==me||ue!==de||_o||a!==null&&a.dependencies!==null&&op(a.dependencies)?(typeof z=="function"&&(Ny(c,h,z,y),de=c.memoizedState),(fe=_o||ak(c,h,fe,y,ue,de,K)||a!==null&&a.dependencies!==null&&op(a.dependencies))?(le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,de,K),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,de,K)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||D===a.memoizedProps&&ue===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ue===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=de),C.props=y,C.state=de,C.context=K,y=fe):(typeof C.componentDidUpdate!="function"||D===a.memoizedProps&&ue===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ue===a.memoizedState||(c.flags|=1024),y=!1)}return C=y,Ep(a,c),y=(c.flags&128)!==0,C||y?(C=c.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&y?(c.child=wc(c,a.child,null,x),c.child=wc(c,null,h,x)):Zn(a,c,h,x),c.memoizedState=C.state,a=c.child):a=qs(a,c,x),a}function Ck(a,c,h,y){return rd(),c.flags|=256,Zn(a,c,h,y),c.child}var _y={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dy(a){return{baseLanes:a,cachePool:uC()}}function Ry(a,c,h){return a=a!==null?a.childLanes&~h:0,c&&(a|=vi),a}function kk(a,c,h){var y=c.pendingProps,x=!1,C=(c.flags&128)!==0,D;if((D=C)||(D=a!==null&&a.memoizedState===null?!1:(On.current&2)!==0),D&&(x=!0,c.flags&=-129),D=(c.flags&32)!==0,c.flags&=-33,a===null){if(xt){if(x?Oo(c):Lo(),xt){var z=sn,K;if(K=z){e:{for(K=z,z=cs;K.nodeType!==8;){if(!z){z=null;break e}if(K=qi(K.nextSibling),K===null){z=null;break e}}z=K}z!==null?(c.memoizedState={dehydrated:z,treeContext:Ua!==null?{id:Ps,overflow:zs}:null,retryLane:536870912,hydrationErrors:null},K=Zr(18,null,null,0),K.stateNode=z,K.return=c,c.child=K,Sr=c,sn=null,K=!0):K=!1}K||Wa(c)}if(z=c.memoizedState,z!==null&&(z=z.dehydrated,z!==null))return m2(z)?c.lanes=32:c.lanes=536870912,null;Fs(c)}return z=y.children,y=y.fallback,x?(Lo(),x=c.mode,z=Np({mode:"hidden",children:z},x),y=qa(y,x,h,null),z.return=c,y.return=c,z.sibling=y,c.child=z,x=c.child,x.memoizedState=Dy(h),x.childLanes=Ry(a,D,h),c.memoizedState=_y,y):(Oo(c),jy(c,z))}if(K=a.memoizedState,K!==null&&(z=K.dehydrated,z!==null)){if(C)c.flags&256?(Oo(c),c.flags&=-257,c=Oy(a,c,h)):c.memoizedState!==null?(Lo(),c.child=a.child,c.flags|=128,c=null):(Lo(),x=y.fallback,z=c.mode,y=Np({mode:"visible",children:y.children},z),x=qa(x,z,h,null),x.flags|=2,y.return=c,x.return=c,y.sibling=x,c.child=y,wc(c,a.child,null,h),y=c.child,y.memoizedState=Dy(h),y.childLanes=Ry(a,D,h),c.memoizedState=_y,c=x);else if(Oo(c),m2(z)){if(D=z.nextSibling&&z.nextSibling.dataset,D)var le=D.dgst;D=le,y=Error(r(419)),y.stack="",y.digest=D,id({value:y,source:null,stack:null}),c=Oy(a,c,h)}else if(Bn||sd(a,c,h,!1),D=(h&a.childLanes)!==0,Bn||D){if(D=It,D!==null&&(y=h&-h,y=(y&42)!==0?1:St(y),y=(y&(D.suspendedLanes|h))!==0?0:y,y!==0&&y!==K.retryLane))throw K.retryLane=y,uc(a,y),ni(D,a,y),mk;z.data==="$?"||Jy(),c=Oy(a,c,h)}else z.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=K.treeContext,sn=qi(z.nextSibling),Sr=c,xt=!0,Ga=null,cs=!1,a!==null&&(gi[yi++]=Ps,gi[yi++]=zs,gi[yi++]=Ua,Ps=a.id,zs=a.overflow,Ua=c),c=jy(c,y.children),c.flags|=4096);return c}return x?(Lo(),x=y.fallback,z=c.mode,K=a.child,le=K.sibling,y=Is(K,{mode:"hidden",children:y.children}),y.subtreeFlags=K.subtreeFlags&65011712,le!==null?x=Is(le,x):(x=qa(x,z,h,null),x.flags|=2),x.return=c,y.return=c,y.sibling=x,c.child=y,y=x,x=c.child,z=a.child.memoizedState,z===null?z=Dy(h):(K=z.cachePool,K!==null?(le=jn._currentValue,K=K.parent!==le?{parent:le,pool:le}:K):K=uC(),z={baseLanes:z.baseLanes|h,cachePool:K}),x.memoizedState=z,x.childLanes=Ry(a,D,h),c.memoizedState=_y,y):(Oo(c),h=a.child,a=h.sibling,h=Is(h,{mode:"visible",children:y.children}),h.return=c,h.sibling=null,a!==null&&(D=c.deletions,D===null?(c.deletions=[a],c.flags|=16):D.push(a)),c.child=h,c.memoizedState=null,h)}function jy(a,c){return c=Np({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Np(a,c){return a=Zr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Oy(a,c,h){return wc(c,a.child,null,h),a=jy(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function Ek(a,c,h){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),J1(a.return,c,h)}function Ly(a,c,h,y,x){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:x}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=h,C.tailMode=x)}function Nk(a,c,h){var y=c.pendingProps,x=y.revealOrder,C=y.tail;if(Zn(a,c,y.children,h),y=On.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Ek(a,h,c);else if(a.tag===19)Ek(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(oe(On,y),x){case"forwards":for(h=c.child,x=null;h!==null;)a=h.alternate,a!==null&&Sp(a)===null&&(x=h),h=h.sibling;h=x,h===null?(x=c.child,c.child=null):(x=h.sibling,h.sibling=null),Ly(c,!1,x,h,C);break;case"backwards":for(h=null,x=c.child,c.child=null;x!==null;){if(a=x.alternate,a!==null&&Sp(a)===null){c.child=x;break}a=x.sibling,x.sibling=h,h=x,x=a}Ly(c,!0,h,null,C);break;case"together":Ly(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function qs(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),Vo|=c.lanes,(h&c.childLanes)===0)if(a!==null){if(sd(a,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=Is(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=Is(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function Iy(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&op(a)))}function w$(a,c,h){switch(c.tag){case 3:re(c,c.stateNode.containerInfo),Mo(c,jn,a.memoizedState.cache),rd();break;case 27:case 5:Ce(c);break;case 4:re(c,c.stateNode.containerInfo);break;case 10:Mo(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(Oo(c),c.flags|=128,null):(h&c.child.childLanes)!==0?kk(a,c,h):(Oo(c),a=qs(a,c,h),a!==null?a.sibling:null);Oo(c);break;case 19:var x=(a.flags&128)!==0;if(y=(h&c.childLanes)!==0,y||(sd(a,c,h,!1),y=(h&c.childLanes)!==0),x){if(y)return Nk(a,c,h);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),oe(On,On.current),y)break;return null;case 22:case 23:return c.lanes=0,vk(a,c,h);case 24:Mo(c,jn,a.memoizedState.cache)}return qs(a,c,h)}function Tk(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps)Bn=!0;else{if(!Iy(a,h)&&(c.flags&128)===0)return Bn=!1,w$(a,c,h);Bn=(a.flags&131072)!==0}else Bn=!1,xt&&(c.flags&1048576)!==0&&rC(c,sp,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,x=y._init;if(y=x(y._payload),c.type=y,typeof y=="function")$1(y)?(a=Ja(y,a),c.tag=1,c=Sk(null,c,y,a,h)):(c.tag=0,c=My(null,c,y,a,h));else{if(y!=null){if(x=y.$$typeof,x===N){c.tag=11,c=gk(null,c,y,a,h);break e}else if(x===j){c.tag=14,c=yk(null,c,y,a,h);break e}}throw c=I(y)||y,Error(r(306,c,""))}}return c;case 0:return My(a,c,c.type,c.pendingProps,h);case 1:return y=c.type,x=Ja(y,c.pendingProps),Sk(a,c,y,x,h);case 3:e:{if(re(c,c.stateNode.containerInfo),a===null)throw Error(r(387));y=c.pendingProps;var C=c.memoizedState;x=C.element,sy(a,c),fd(c,y,null,h);var D=c.memoizedState;if(y=D.cache,Mo(c,jn,y),y!==C.cache&&Q1(c,[jn],h,!0),dd(),y=D.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:D.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=Ck(a,c,y,h);break e}else if(y!==x){x=pi(Error(r(424)),c),id(x),c=Ck(a,c,y,h);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(sn=qi(a.firstChild),Sr=c,xt=!0,Ga=null,cs=!0,h=sk(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(rd(),y===x){c=qs(a,c,h);break e}Zn(a,c,y,h)}c=c.child}return c;case 26:return Ep(a,c),a===null?(h=D9(c.type,null,c.pendingProps,null))?c.memoizedState=h:xt||(h=c.type,a=c.pendingProps,y=Vp(te.current).createElement(h),y[Xt]=c,y[Bt]=a,Qn(y,h,a),Lt(y),c.stateNode=y):c.memoizedState=D9(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return Ce(c),a===null&&xt&&(y=c.stateNode=A9(c.type,c.pendingProps,te.current),Sr=c,cs=!0,x=sn,Uo(c.type)?(g2=x,sn=qi(y.firstChild)):sn=x),Zn(a,c,c.pendingProps.children,h),Ep(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&xt&&((x=y=sn)&&(y=Y$(y,c.type,c.pendingProps,cs),y!==null?(c.stateNode=y,Sr=c,sn=qi(y.firstChild),cs=!1,x=!0):x=!1),x||Wa(c)),Ce(c),x=c.type,C=c.pendingProps,D=a!==null?a.memoizedProps:null,y=C.children,f2(x,C)?y=null:D!==null&&f2(x,D)&&(c.flags|=32),c.memoizedState!==null&&(x=dy(a,c,h$,null,null,h),Od._currentValue=x),Ep(a,c),Zn(a,c,y,h),c.child;case 6:return a===null&&xt&&((a=h=sn)&&(h=X$(h,c.pendingProps,cs),h!==null?(c.stateNode=h,Sr=c,sn=null,a=!0):a=!1),a||Wa(c)),null;case 13:return kk(a,c,h);case 4:return re(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=wc(c,null,y,h):Zn(a,c,y,h),c.child;case 11:return gk(a,c,c.type,c.pendingProps,h);case 7:return Zn(a,c,c.pendingProps,h),c.child;case 8:return Zn(a,c,c.pendingProps.children,h),c.child;case 12:return Zn(a,c,c.pendingProps.children,h),c.child;case 10:return y=c.pendingProps,Mo(c,c.type,y.value),Zn(a,c,y.children,h),c.child;case 9:return x=c.type._context,y=c.pendingProps.children,Ya(c),x=ur(x),y=y(x),c.flags|=1,Zn(a,c,y,h),c.child;case 14:return yk(a,c,c.type,c.pendingProps,h);case 15:return bk(a,c,c.type,c.pendingProps,h);case 19:return Nk(a,c,h);case 31:return y=c.pendingProps,h=c.mode,y={mode:y.mode,children:y.children},a===null?(h=Np(y,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=Is(a.child,y),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return vk(a,c,h);case 24:return Ya(c),y=ur(jn),a===null?(x=ny(),x===null&&(x=It,C=ey(),x.pooledCache=C,C.refCount++,C!==null&&(x.pooledCacheLanes|=h),x=C),c.memoizedState={parent:y,cache:x},iy(c),Mo(c,jn,x)):((a.lanes&h)!==0&&(sy(a,c),fd(c,null,null,h),dd()),x=a.memoizedState,C=c.memoizedState,x.parent!==y?(x={parent:y,cache:y},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),Mo(c,jn,y)):(y=C.cache,Mo(c,jn,y),y!==x.cache&&Q1(c,[jn],h,!0))),Zn(a,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function Us(a){a.flags|=4}function Ak(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!I9(c)){if(c=bi.current,c!==null&&((ft&4194048)===ft?us!==null:(ft&62914560)!==ft&&(ft&536870912)===0||c!==us))throw cd=ry,dC;a.flags|=8192}}function Tp(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?Pi():536870912,a.lanes|=c,Ec|=c)}function vd(a,c){if(!xt)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Zt(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,y=0;if(c)for(var x=a.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags&65011712,y|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)h|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=y,a.childLanes=h,c}function S$(a,c,h){var y=c.pendingProps;switch(Y1(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(c),null;case 1:return Zt(c),null;case 3:return h=c.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),Vs(jn),ye(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(a===null||a.child===null)&&(nd(c)?Us(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,oC())),Zt(c),null;case 26:return h=c.memoizedState,a===null?(Us(c),h!==null?(Zt(c),Ak(c,h)):(Zt(c),c.flags&=-16777217)):h?h!==a.memoizedState?(Us(c),Zt(c),Ak(c,h)):(Zt(c),c.flags&=-16777217):(a.memoizedProps!==y&&Us(c),Zt(c),c.flags&=-16777217),null;case 27:De(c),h=te.current;var x=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==y&&Us(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Zt(c),null}a=$.current,nd(c)?iC(c):(a=A9(x,y,h),c.stateNode=a,Us(c))}return Zt(c),null;case 5:if(De(c),h=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&Us(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Zt(c),null}if(a=$.current,nd(c))iC(c);else{switch(x=Vp(te.current),a){case 1:a=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:a=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":a=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":a=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":a=x.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?x.createElement("select",{is:y.is}):x.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?x.createElement(h,{is:y.is}):x.createElement(h)}}a[Xt]=c,a[Bt]=y;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=a;e:switch(Qn(a,h,y),h){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Us(c)}}return Zt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==y&&Us(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(a=te.current,nd(c)){if(a=c.stateNode,h=c.memoizedProps,y=null,x=Sr,x!==null)switch(x.tag){case 27:case 5:y=x.memoizedProps}a[Xt]=c,a=!!(a.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||w9(a.nodeValue,h)),a||Wa(c)}else a=Vp(a).createTextNode(y),a[Xt]=c,c.stateNode=a}return Zt(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=nd(c),y!==null&&y.dehydrated!==null){if(a===null){if(!x)throw Error(r(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Xt]=c}else rd(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Zt(c),x=!1}else x=oC(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(Fs(c),c):(Fs(c),null)}if(Fs(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=y!==null,a=a!==null&&a.memoizedState!==null,h){y=c.child,x=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(x=y.alternate.memoizedState.cachePool.pool);var C=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==x&&(y.flags|=2048)}return h!==a&&h&&(c.child.flags|=8192),Tp(c,c.updateQueue),Zt(c),null;case 4:return ye(),a===null&&a2(c.stateNode.containerInfo),Zt(c),null;case 10:return Vs(c.type),Zt(c),null;case 19:if(ie(On),x=c.memoizedState,x===null)return Zt(c),null;if(y=(c.flags&128)!==0,C=x.rendering,C===null)if(y)vd(x,!1);else{if(on!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=Sp(a),C!==null){for(c.flags|=128,vd(x,!1),a=C.updateQueue,c.updateQueue=a,Tp(c,a),c.subtreeFlags=0,a=h,h=c.child;h!==null;)nC(h,a),h=h.sibling;return oe(On,On.current&1|2),c.child}a=a.sibling}x.tail!==null&&Pe()>_p&&(c.flags|=128,y=!0,vd(x,!1),c.lanes=4194304)}else{if(!y)if(a=Sp(C),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,Tp(c,a),vd(x,!0),x.tail===null&&x.tailMode==="hidden"&&!C.alternate&&!xt)return Zt(c),null}else 2*Pe()-x.renderingStartTime>_p&&h!==536870912&&(c.flags|=128,y=!0,vd(x,!1),c.lanes=4194304);x.isBackwards?(C.sibling=c.child,c.child=C):(a=x.last,a!==null?a.sibling=C:c.child=C,x.last=C)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Pe(),c.sibling=null,a=On.current,oe(On,y?a&1|2:a&1),c):(Zt(c),null);case 22:case 23:return Fs(c),cy(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(h&536870912)!==0&&(c.flags&128)===0&&(Zt(c),c.subtreeFlags&6&&(c.flags|=8192)):Zt(c),h=c.updateQueue,h!==null&&Tp(c,h.retryQueue),h=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==h&&(c.flags|=2048),a!==null&&ie(Xa),null;case 24:return h=null,a!==null&&(h=a.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Vs(jn),Zt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function C$(a,c){switch(Y1(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Vs(jn),ye(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return De(c),null;case 13:if(Fs(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));rd()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ie(On),null;case 4:return ye(),null;case 10:return Vs(c.type),null;case 22:case 23:return Fs(c),cy(),a!==null&&ie(Xa),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return Vs(jn),null;case 25:return null;default:return null}}function Mk(a,c){switch(Y1(c),c.tag){case 3:Vs(jn),ye();break;case 26:case 27:case 5:De(c);break;case 4:ye();break;case 13:Fs(c);break;case 19:ie(On);break;case 10:Vs(c.type);break;case 22:case 23:Fs(c),cy(),a!==null&&ie(Xa);break;case 24:Vs(jn)}}function xd(a,c){try{var h=c.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var x=y.next;h=x;do{if((h.tag&a)===a){y=void 0;var C=h.create,D=h.inst;y=C(),D.destroy=y}h=h.next}while(h!==x)}}catch(z){jt(c,c.return,z)}}function Io(a,c,h){try{var y=c.updateQueue,x=y!==null?y.lastEffect:null;if(x!==null){var C=x.next;y=C;do{if((y.tag&a)===a){var D=y.inst,z=D.destroy;if(z!==void 0){D.destroy=void 0,x=c;var K=h,le=z;try{le()}catch(fe){jt(x,K,fe)}}}y=y.next}while(y!==C)}}catch(fe){jt(c,c.return,fe)}}function _k(a){var c=a.updateQueue;if(c!==null){var h=a.stateNode;try{yC(c,h)}catch(y){jt(a,a.return,y)}}}function Dk(a,c,h){h.props=Ja(a.type,a.memoizedProps),h.state=a.memoizedState;try{h.componentWillUnmount()}catch(y){jt(a,c,y)}}function wd(a,c){try{var h=a.ref;if(h!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof h=="function"?a.refCleanup=h(y):h.current=y}}catch(x){jt(a,c,x)}}function ds(a,c){var h=a.ref,y=a.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(x){jt(a,c,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){jt(a,c,x)}else h.current=null}function Rk(a){var c=a.type,h=a.memoizedProps,y=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(x){jt(a,a.return,x)}}function Py(a,c,h){try{var y=a.stateNode;U$(y,a.type,h,c),y[Bt]=c}catch(x){jt(a,a.return,x)}}function jk(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Uo(a.type)||a.tag===4}function zy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||jk(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Uo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function By(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(a,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(a),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Bp));else if(y!==4&&(y===27&&Uo(a.type)&&(h=a.stateNode,c=null),a=a.child,a!==null))for(By(a,c,h),a=a.sibling;a!==null;)By(a,c,h),a=a.sibling}function Ap(a,c,h){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(y!==4&&(y===27&&Uo(a.type)&&(h=a.stateNode),a=a.child,a!==null))for(Ap(a,c,h),a=a.sibling;a!==null;)Ap(a,c,h),a=a.sibling}function Ok(a){var c=a.stateNode,h=a.memoizedProps;try{for(var y=a.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Qn(c,y,h),c[Xt]=a,c[Bt]=h}catch(C){jt(a,a.return,C)}}var $s=!1,fn=!1,Vy=!1,Lk=typeof WeakSet=="function"?WeakSet:Set,Vn=null;function k$(a,c){if(a=a.containerInfo,u2=Gp,a=G7(a),z1(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var x=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{h.nodeType,C.nodeType}catch{h=null;break e}var D=0,z=-1,K=-1,le=0,fe=0,me=a,ue=null;t:for(;;){for(var de;me!==h||x!==0&&me.nodeType!==3||(z=D+x),me!==C||y!==0&&me.nodeType!==3||(K=D+y),me.nodeType===3&&(D+=me.nodeValue.length),(de=me.firstChild)!==null;)ue=me,me=de;for(;;){if(me===a)break t;if(ue===h&&++le===x&&(z=D),ue===C&&++fe===y&&(K=D),(de=me.nextSibling)!==null)break;me=ue,ue=me.parentNode}me=de}h=z===-1||K===-1?null:{start:z,end:K}}else h=null}h=h||{start:0,end:0}}else h=null;for(d2={focusedElem:a,selectionRange:h},Gp=!1,Vn=c;Vn!==null;)if(c=Vn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Vn=a;else for(;Vn!==null;){switch(c=Vn,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,h=c,x=C.memoizedProps,C=C.memoizedState,y=h.stateNode;try{var Ke=Ja(h.type,x,h.elementType===h.type);a=y.getSnapshotBeforeUpdate(Ke,C),y.__reactInternalSnapshotBeforeUpdate=a}catch($e){jt(h,h.return,$e)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,h=a.nodeType,h===9)p2(a);else if(h===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":p2(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Vn=a;break}Vn=c.return}}function Ik(a,c,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:Po(a,h),y&4&&xd(5,h);break;case 1:if(Po(a,h),y&4)if(a=h.stateNode,c===null)try{a.componentDidMount()}catch(D){jt(h,h.return,D)}else{var x=Ja(h.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(x,c,a.__reactInternalSnapshotBeforeUpdate)}catch(D){jt(h,h.return,D)}}y&64&&_k(h),y&512&&wd(h,h.return);break;case 3:if(Po(a,h),y&64&&(a=h.updateQueue,a!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{yC(a,c)}catch(D){jt(h,h.return,D)}}break;case 27:c===null&&y&4&&Ok(h);case 26:case 5:Po(a,h),c===null&&y&4&&Rk(h),y&512&&wd(h,h.return);break;case 12:Po(a,h);break;case 13:Po(a,h),y&4&&Bk(a,h),y&64&&(a=h.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(h=j$.bind(null,h),Z$(a,h))));break;case 22:if(y=h.memoizedState!==null||$s,!y){c=c!==null&&c.memoizedState!==null||fn,x=$s;var C=fn;$s=y,(fn=c)&&!C?zo(a,h,(h.subtreeFlags&8772)!==0):Po(a,h),$s=x,fn=C}break;case 30:break;default:Po(a,h)}}function Pk(a){var c=a.alternate;c!==null&&(a.alternate=null,Pk(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&ts(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var $t=null,Or=!1;function Gs(a,c,h){for(h=h.child;h!==null;)zk(a,c,h),h=h.sibling}function zk(a,c,h){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(zt,h)}catch{}switch(h.tag){case 26:fn||ds(h,c),Gs(a,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:fn||ds(h,c);var y=$t,x=Or;Uo(h.type)&&($t=h.stateNode,Or=!1),Gs(a,c,h),_d(h.stateNode),$t=y,Or=x;break;case 5:fn||ds(h,c);case 6:if(y=$t,x=Or,$t=null,Gs(a,c,h),$t=y,Or=x,$t!==null)if(Or)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(h.stateNode)}catch(C){jt(h,c,C)}else try{$t.removeChild(h.stateNode)}catch(C){jt(h,c,C)}break;case 18:$t!==null&&(Or?(a=$t,N9(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,h.stateNode),zd(a)):N9($t,h.stateNode));break;case 4:y=$t,x=Or,$t=h.stateNode.containerInfo,Or=!0,Gs(a,c,h),$t=y,Or=x;break;case 0:case 11:case 14:case 15:fn||Io(2,h,c),fn||Io(4,h,c),Gs(a,c,h);break;case 1:fn||(ds(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"&&Dk(h,c,y)),Gs(a,c,h);break;case 21:Gs(a,c,h);break;case 22:fn=(y=fn)||h.memoizedState!==null,Gs(a,c,h),fn=y;break;default:Gs(a,c,h)}}function Bk(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{zd(a)}catch(h){jt(c,c.return,h)}}function E$(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new Lk),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new Lk),c;default:throw Error(r(435,a.tag))}}function Hy(a,c){var h=E$(a);c.forEach(function(y){var x=O$.bind(null,a,y);h.has(y)||(h.add(y),y.then(x,x))})}function Jr(a,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var x=h[y],C=a,D=c,z=D;e:for(;z!==null;){switch(z.tag){case 27:if(Uo(z.type)){$t=z.stateNode,Or=!1;break e}break;case 5:$t=z.stateNode,Or=!1;break e;case 3:case 4:$t=z.stateNode.containerInfo,Or=!0;break e}z=z.return}if($t===null)throw Error(r(160));zk(C,D,x),$t=null,Or=!1,C=x.alternate,C!==null&&(C.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Vk(c,a),c=c.sibling}var Fi=null;function Vk(a,c){var h=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Jr(c,a),Qr(a),y&4&&(Io(3,a,a.return),xd(3,a),Io(5,a,a.return));break;case 1:Jr(c,a),Qr(a),y&512&&(fn||h===null||ds(h,h.return)),y&64&&$s&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(h=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var x=Fi;if(Jr(c,a),Qr(a),y&512&&(fn||h===null||ds(h,h.return)),y&4){var C=h!==null?h.memoizedState:null;if(y=a.memoizedState,h===null)if(y===null)if(a.stateNode===null){e:{y=a.type,h=a.memoizedProps,x=x.ownerDocument||x;t:switch(y){case"title":C=x.getElementsByTagName("title")[0],(!C||C[Kr]||C[Xt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=x.createElement(y),x.head.insertBefore(C,x.querySelector("head > title"))),Qn(C,y,h),C[Xt]=a,Lt(C),y=C;break e;case"link":var D=O9("link","href",x).get(y+(h.href||""));if(D){for(var z=0;z<D.length;z++)if(C=D[z],C.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&C.getAttribute("rel")===(h.rel==null?null:h.rel)&&C.getAttribute("title")===(h.title==null?null:h.title)&&C.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){D.splice(z,1);break t}}C=x.createElement(y),Qn(C,y,h),x.head.appendChild(C);break;case"meta":if(D=O9("meta","content",x).get(y+(h.content||""))){for(z=0;z<D.length;z++)if(C=D[z],C.getAttribute("content")===(h.content==null?null:""+h.content)&&C.getAttribute("name")===(h.name==null?null:h.name)&&C.getAttribute("property")===(h.property==null?null:h.property)&&C.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&C.getAttribute("charset")===(h.charSet==null?null:h.charSet)){D.splice(z,1);break t}}C=x.createElement(y),Qn(C,y,h),x.head.appendChild(C);break;default:throw Error(r(468,y))}C[Xt]=a,Lt(C),y=C}a.stateNode=y}else L9(x,a.type,a.stateNode);else a.stateNode=j9(x,y,a.memoizedProps);else C!==y?(C===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):C.count--,y===null?L9(x,a.type,a.stateNode):j9(x,y,a.memoizedProps)):y===null&&a.stateNode!==null&&Py(a,a.memoizedProps,h.memoizedProps)}break;case 27:Jr(c,a),Qr(a),y&512&&(fn||h===null||ds(h,h.return)),h!==null&&y&4&&Py(a,a.memoizedProps,h.memoizedProps);break;case 5:if(Jr(c,a),Qr(a),y&512&&(fn||h===null||ds(h,h.return)),a.flags&32){x=a.stateNode;try{No(x,"")}catch(de){jt(a,a.return,de)}}y&4&&a.stateNode!=null&&(x=a.memoizedProps,Py(a,x,h!==null?h.memoizedProps:x)),y&1024&&(Vy=!0);break;case 6:if(Jr(c,a),Qr(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,h=a.stateNode;try{h.nodeValue=y}catch(de){jt(a,a.return,de)}}break;case 3:if(qp=null,x=Fi,Fi=Hp(c.containerInfo),Jr(c,a),Fi=x,Qr(a),y&4&&h!==null&&h.memoizedState.isDehydrated)try{zd(c.containerInfo)}catch(de){jt(a,a.return,de)}Vy&&(Vy=!1,Hk(a));break;case 4:y=Fi,Fi=Hp(a.stateNode.containerInfo),Jr(c,a),Qr(a),Fi=y;break;case 12:Jr(c,a),Qr(a);break;case 13:Jr(c,a),Qr(a),a.child.flags&8192&&a.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Wy=Pe()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Hy(a,y)));break;case 22:x=a.memoizedState!==null;var K=h!==null&&h.memoizedState!==null,le=$s,fe=fn;if($s=le||x,fn=fe||K,Jr(c,a),fn=fe,$s=le,Qr(a),y&8192)e:for(c=a.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(h===null||K||$s||fn||Qa(a)),h=null,c=a;;){if(c.tag===5||c.tag===26){if(h===null){K=h=c;try{if(C=K.stateNode,x)D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{z=K.stateNode;var me=K.memoizedProps.style,ue=me!=null&&me.hasOwnProperty("display")?me.display:null;z.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(de){jt(K,K.return,de)}}}else if(c.tag===6){if(h===null){K=c;try{K.stateNode.nodeValue=x?"":K.memoizedProps}catch(de){jt(K,K.return,de)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=a.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,Hy(a,h))));break;case 19:Jr(c,a),Qr(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Hy(a,y)));break;case 30:break;case 21:break;default:Jr(c,a),Qr(a)}}function Qr(a){var c=a.flags;if(c&2){try{for(var h,y=a.return;y!==null;){if(jk(y)){h=y;break}y=y.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var x=h.stateNode,C=zy(a);Ap(a,C,x);break;case 5:var D=h.stateNode;h.flags&32&&(No(D,""),h.flags&=-33);var z=zy(a);Ap(a,z,D);break;case 3:case 4:var K=h.stateNode.containerInfo,le=zy(a);By(a,le,K);break;default:throw Error(r(161))}}catch(fe){jt(a,a.return,fe)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function Hk(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;Hk(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function Po(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Ik(a,c.alternate,c),c=c.sibling}function Qa(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:Io(4,c,c.return),Qa(c);break;case 1:ds(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&Dk(c,c.return,h),Qa(c);break;case 27:_d(c.stateNode);case 26:case 5:ds(c,c.return),Qa(c);break;case 22:c.memoizedState===null&&Qa(c);break;case 30:Qa(c);break;default:Qa(c)}a=a.sibling}}function zo(a,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,x=a,C=c,D=C.flags;switch(C.tag){case 0:case 11:case 15:zo(x,C,h),xd(4,C);break;case 1:if(zo(x,C,h),y=C,x=y.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(le){jt(y,y.return,le)}if(y=C,x=y.updateQueue,x!==null){var z=y.stateNode;try{var K=x.shared.hiddenCallbacks;if(K!==null)for(x.shared.hiddenCallbacks=null,x=0;x<K.length;x++)gC(K[x],z)}catch(le){jt(y,y.return,le)}}h&&D&64&&_k(C),wd(C,C.return);break;case 27:Ok(C);case 26:case 5:zo(x,C,h),h&&y===null&&D&4&&Rk(C),wd(C,C.return);break;case 12:zo(x,C,h);break;case 13:zo(x,C,h),h&&D&4&&Bk(x,C);break;case 22:C.memoizedState===null&&zo(x,C,h),wd(C,C.return);break;case 30:break;default:zo(x,C,h)}c=c.sibling}}function Fy(a,c){var h=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==h&&(a!=null&&a.refCount++,h!=null&&od(h))}function qy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&od(a))}function fs(a,c,h,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Fk(a,c,h,y),c=c.sibling}function Fk(a,c,h,y){var x=c.flags;switch(c.tag){case 0:case 11:case 15:fs(a,c,h,y),x&2048&&xd(9,c);break;case 1:fs(a,c,h,y);break;case 3:fs(a,c,h,y),x&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&od(a)));break;case 12:if(x&2048){fs(a,c,h,y),a=c.stateNode;try{var C=c.memoizedProps,D=C.id,z=C.onPostCommit;typeof z=="function"&&z(D,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(K){jt(c,c.return,K)}}else fs(a,c,h,y);break;case 13:fs(a,c,h,y);break;case 23:break;case 22:C=c.stateNode,D=c.alternate,c.memoizedState!==null?C._visibility&2?fs(a,c,h,y):Sd(a,c):C._visibility&2?fs(a,c,h,y):(C._visibility|=2,Sc(a,c,h,y,(c.subtreeFlags&10256)!==0)),x&2048&&Fy(D,c);break;case 24:fs(a,c,h,y),x&2048&&qy(c.alternate,c);break;default:fs(a,c,h,y)}}function Sc(a,c,h,y,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,D=c,z=h,K=y,le=D.flags;switch(D.tag){case 0:case 11:case 15:Sc(C,D,z,K,x),xd(8,D);break;case 23:break;case 22:var fe=D.stateNode;D.memoizedState!==null?fe._visibility&2?Sc(C,D,z,K,x):Sd(C,D):(fe._visibility|=2,Sc(C,D,z,K,x)),x&&le&2048&&Fy(D.alternate,D);break;case 24:Sc(C,D,z,K,x),x&&le&2048&&qy(D.alternate,D);break;default:Sc(C,D,z,K,x)}c=c.sibling}}function Sd(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=a,y=c,x=y.flags;switch(y.tag){case 22:Sd(h,y),x&2048&&Fy(y.alternate,y);break;case 24:Sd(h,y),x&2048&&qy(y.alternate,y);break;default:Sd(h,y)}c=c.sibling}}var Cd=8192;function Cc(a){if(a.subtreeFlags&Cd)for(a=a.child;a!==null;)qk(a),a=a.sibling}function qk(a){switch(a.tag){case 26:Cc(a),a.flags&Cd&&a.memoizedState!==null&&uG(Fi,a.memoizedState,a.memoizedProps);break;case 5:Cc(a);break;case 3:case 4:var c=Fi;Fi=Hp(a.stateNode.containerInfo),Cc(a),Fi=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Cd,Cd=16777216,Cc(a),Cd=c):Cc(a));break;default:Cc(a)}}function Uk(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function kd(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Vn=y,Gk(y,a)}Uk(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)$k(a),a=a.sibling}function $k(a){switch(a.tag){case 0:case 11:case 15:kd(a),a.flags&2048&&Io(9,a,a.return);break;case 3:kd(a);break;case 12:kd(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Mp(a)):kd(a);break;default:kd(a)}}function Mp(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var y=c[h];Vn=y,Gk(y,a)}Uk(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:Io(8,c,c.return),Mp(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Mp(c));break;default:Mp(c)}a=a.sibling}}function Gk(a,c){for(;Vn!==null;){var h=Vn;switch(h.tag){case 0:case 11:case 15:Io(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:od(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,Vn=y;else e:for(h=a;Vn!==null;){y=Vn;var x=y.sibling,C=y.return;if(Pk(y),y===h){Vn=null;break e}if(x!==null){x.return=C,Vn=x;break e}Vn=C}}}var N$={getCacheForType:function(a){var c=ur(jn),h=c.data.get(a);return h===void 0&&(h=a(),c.data.set(a,h)),h}},T$=typeof WeakMap=="function"?WeakMap:Map,Ct=0,It=null,ot=null,ft=0,kt=0,ei=null,Bo=!1,kc=!1,Uy=!1,Ws=0,on=0,Vo=0,el=0,$y=0,vi=0,Ec=0,Ed=null,Lr=null,Gy=!1,Wy=0,_p=1/0,Dp=null,Ho=null,Jn=0,Fo=null,Nc=null,Tc=0,Ky=0,Yy=null,Wk=null,Nd=0,Xy=null;function ti(){if((Ct&2)!==0&&ft!==0)return ft&-ft;if(O.T!==null){var a=pc;return a!==0?a:r2()}return So()}function Kk(){vi===0&&(vi=(ft&536870912)===0||xt?wo():536870912);var a=bi.current;return a!==null&&(a.flags|=32),vi}function ni(a,c,h){(a===It&&(kt===2||kt===9)||a.cancelPendingCommit!==null)&&(Ac(a,0),qo(a,ft,vi,!1)),$r(a,h),((Ct&2)===0||a!==It)&&(a===It&&((Ct&2)===0&&(el|=h),on===4&&qo(a,ft,vi,!1)),hs(a))}function Yk(a,c,h){if((Ct&6)!==0)throw Error(r(327));var y=!h&&(c&124)===0&&(c&a.expiredLanes)===0||pt(a,c),x=y?_$(a,c):Qy(a,c,!0),C=y;do{if(x===0){kc&&!y&&qo(a,c,0,!1);break}else{if(h=a.current.alternate,C&&!A$(h)){x=Qy(a,c,!1),C=!1;continue}if(x===2){if(C=c,a.errorRecoveryDisabledLanes&C)var D=0;else D=a.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){c=D;e:{var z=a;x=Ed;var K=z.current.memoizedState.isDehydrated;if(K&&(Ac(z,D).flags|=256),D=Qy(z,D,!1),D!==2){if(Uy&&!K){z.errorRecoveryDisabledLanes|=C,el|=C,x=4;break e}C=Lr,Lr=x,C!==null&&(Lr===null?Lr=C:Lr.push.apply(Lr,C))}x=D}if(C=!1,x!==2)continue}}if(x===1){Ac(a,0),qo(a,c,0,!0);break}e:{switch(y=a,C=x,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:qo(y,c,vi,!Bo);break e;case 2:Lr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(x=Wy+300-Pe(),10<x)){if(qo(y,c,vi,!Bo),xr(y,0,!0)!==0)break e;y.timeoutHandle=k9(Xk.bind(null,y,h,Lr,Dp,Gy,c,vi,el,Ec,Bo,C,2,-0,0),x);break e}Xk(y,h,Lr,Dp,Gy,c,vi,el,Ec,Bo,C,0,-0,0)}}break}while(!0);hs(a)}function Xk(a,c,h,y,x,C,D,z,K,le,fe,me,ue,de){if(a.timeoutHandle=-1,me=c.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(jd={stylesheets:null,count:0,unsuspend:cG},qk(c),me=dG(),me!==null)){a.cancelPendingCommit=me(r9.bind(null,a,c,C,h,y,x,D,z,K,fe,1,ue,de)),qo(a,C,D,!le);return}r9(a,c,C,h,y,x,D,z,K)}function A$(a){for(var c=a;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var x=h[y],C=x.getSnapshot;x=x.value;try{if(!Xr(C(),x))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function qo(a,c,h,y){c&=~$y,c&=~el,a.suspendedLanes|=c,a.pingedLanes&=~c,y&&(a.warmLanes|=c),y=a.expirationTimes;for(var x=c;0<x;){var C=31-Dt(x),D=1<<C;y[C]=-1,x&=~D}h!==0&&Dr(a,h,c)}function Rp(){return(Ct&6)===0?(Td(0),!1):!0}function Zy(){if(ot!==null){if(kt===0)var a=ot.return;else a=ot,Bs=Ka=null,py(a),xc=null,yd=0,a=ot;for(;a!==null;)Mk(a.alternate,a),a=a.return;ot=null}}function Ac(a,c){var h=a.timeoutHandle;h!==-1&&(a.timeoutHandle=-1,G$(h)),h=a.cancelPendingCommit,h!==null&&(a.cancelPendingCommit=null,h()),Zy(),It=a,ot=h=Is(a.current,null),ft=c,kt=0,ei=null,Bo=!1,kc=pt(a,c),Uy=!1,Ec=vi=$y=el=Vo=on=0,Lr=Ed=null,Gy=!1,(c&8)!==0&&(c|=c&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=c;0<y;){var x=31-Dt(y),C=1<<x;c|=a[x],y&=~C}return Ws=c,ep(),h}function Zk(a,c){it=null,O.H=vp,c===ld||c===cp?(c=pC(),kt=3):c===dC?(c=pC(),kt=4):kt=c===mk?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ei=c,ot===null&&(on=1,kp(a,pi(c,a.current)))}function Jk(){var a=O.H;return O.H=vp,a===null?vp:a}function Qk(){var a=O.A;return O.A=N$,a}function Jy(){on=4,Bo||(ft&4194048)!==ft&&bi.current!==null||(kc=!0),(Vo&134217727)===0&&(el&134217727)===0||It===null||qo(It,ft,vi,!1)}function Qy(a,c,h){var y=Ct;Ct|=2;var x=Jk(),C=Qk();(It!==a||ft!==c)&&(Dp=null,Ac(a,c)),c=!1;var D=on;e:do try{if(kt!==0&&ot!==null){var z=ot,K=ei;switch(kt){case 8:Zy(),D=6;break e;case 3:case 2:case 9:case 6:bi.current===null&&(c=!0);var le=kt;if(kt=0,ei=null,Mc(a,z,K,le),h&&kc){D=0;break e}break;default:le=kt,kt=0,ei=null,Mc(a,z,K,le)}}M$(),D=on;break}catch(fe){Zk(a,fe)}while(!0);return c&&a.shellSuspendCounter++,Bs=Ka=null,Ct=y,O.H=x,O.A=C,ot===null&&(It=null,ft=0,ep()),D}function M$(){for(;ot!==null;)e9(ot)}function _$(a,c){var h=Ct;Ct|=2;var y=Jk(),x=Qk();It!==a||ft!==c?(Dp=null,_p=Pe()+500,Ac(a,c)):kc=pt(a,c);e:do try{if(kt!==0&&ot!==null){c=ot;var C=ei;t:switch(kt){case 1:kt=0,ei=null,Mc(a,c,C,1);break;case 2:case 9:if(fC(C)){kt=0,ei=null,t9(c);break}c=function(){kt!==2&&kt!==9||It!==a||(kt=7),hs(a)},C.then(c,c);break e;case 3:kt=7;break e;case 4:kt=5;break e;case 7:fC(C)?(kt=0,ei=null,t9(c)):(kt=0,ei=null,Mc(a,c,C,7));break;case 5:var D=null;switch(ot.tag){case 26:D=ot.memoizedState;case 5:case 27:var z=ot;if(!D||I9(D)){kt=0,ei=null;var K=z.sibling;if(K!==null)ot=K;else{var le=z.return;le!==null?(ot=le,jp(le)):ot=null}break t}}kt=0,ei=null,Mc(a,c,C,5);break;case 6:kt=0,ei=null,Mc(a,c,C,6);break;case 8:Zy(),on=6;break e;default:throw Error(r(462))}}D$();break}catch(fe){Zk(a,fe)}while(!0);return Bs=Ka=null,O.H=y,O.A=x,Ct=h,ot!==null?0:(It=null,ft=0,ep(),on)}function D$(){for(;ot!==null&&!Me();)e9(ot)}function e9(a){var c=Tk(a.alternate,a,Ws);a.memoizedProps=a.pendingProps,c===null?jp(a):ot=c}function t9(a){var c=a,h=c.alternate;switch(c.tag){case 15:case 0:c=wk(h,c,c.pendingProps,c.type,void 0,ft);break;case 11:c=wk(h,c,c.pendingProps,c.type.render,c.ref,ft);break;case 5:py(c);default:Mk(h,c),c=ot=nC(c,Ws),c=Tk(h,c,Ws)}a.memoizedProps=a.pendingProps,c===null?jp(a):ot=c}function Mc(a,c,h,y){Bs=Ka=null,py(c),xc=null,yd=0;var x=c.return;try{if(x$(a,x,c,h,ft)){on=1,kp(a,pi(h,a.current)),ot=null;return}}catch(C){if(x!==null)throw ot=x,C;on=1,kp(a,pi(h,a.current)),ot=null;return}c.flags&32768?(xt||y===1?a=!0:kc||(ft&536870912)!==0?a=!1:(Bo=a=!0,(y===2||y===9||y===3||y===6)&&(y=bi.current,y!==null&&y.tag===13&&(y.flags|=16384))),n9(c,a)):jp(c)}function jp(a){var c=a;do{if((c.flags&32768)!==0){n9(c,Bo);return}a=c.return;var h=S$(c.alternate,c,Ws);if(h!==null){ot=h;return}if(c=c.sibling,c!==null){ot=c;return}ot=c=a}while(c!==null);on===0&&(on=5)}function n9(a,c){do{var h=C$(a.alternate,a);if(h!==null){h.flags&=32767,ot=h;return}if(h=a.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(a=a.sibling,a!==null)){ot=a;return}ot=a=h}while(a!==null);on=6,ot=null}function r9(a,c,h,y,x,C,D,z,K){a.cancelPendingCommit=null;do Op();while(Jn!==0);if((Ct&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=q1,wr(a,h,C,D,z,K),a===It&&(ot=It=null,ft=0),Nc=c,Fo=a,Tc=h,Ky=C,Yy=x,Wk=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,L$(gn,function(){return l9(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=O.T,O.T=null,x=H.p,H.p=2,D=Ct,Ct|=4;try{k$(a,c,h)}finally{Ct=D,H.p=x,O.T=y}}Jn=1,i9(),s9(),o9()}}function i9(){if(Jn===1){Jn=0;var a=Fo,c=Nc,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=O.T,O.T=null;var y=H.p;H.p=2;var x=Ct;Ct|=4;try{Vk(c,a);var C=d2,D=G7(a.containerInfo),z=C.focusedElem,K=C.selectionRange;if(D!==z&&z&&z.ownerDocument&&$7(z.ownerDocument.documentElement,z)){if(K!==null&&z1(z)){var le=K.start,fe=K.end;if(fe===void 0&&(fe=le),"selectionStart"in z)z.selectionStart=le,z.selectionEnd=Math.min(fe,z.value.length);else{var me=z.ownerDocument||document,ue=me&&me.defaultView||window;if(ue.getSelection){var de=ue.getSelection(),Ke=z.textContent.length,$e=Math.min(K.start,Ke),At=K.end===void 0?$e:Math.min(K.end,Ke);!de.extend&&$e>At&&(D=At,At=$e,$e=D);var ne=U7(z,$e),Q=U7(z,At);if(ne&&Q&&(de.rangeCount!==1||de.anchorNode!==ne.node||de.anchorOffset!==ne.offset||de.focusNode!==Q.node||de.focusOffset!==Q.offset)){var ae=me.createRange();ae.setStart(ne.node,ne.offset),de.removeAllRanges(),$e>At?(de.addRange(ae),de.extend(Q.node,Q.offset)):(ae.setEnd(Q.node,Q.offset),de.addRange(ae))}}}}for(me=[],de=z;de=de.parentNode;)de.nodeType===1&&me.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<me.length;z++){var he=me[z];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Gp=!!u2,d2=u2=null}finally{Ct=x,H.p=y,O.T=h}}a.current=c,Jn=2}}function s9(){if(Jn===2){Jn=0;var a=Fo,c=Nc,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=O.T,O.T=null;var y=H.p;H.p=2;var x=Ct;Ct|=4;try{Ik(a,c.alternate,c)}finally{Ct=x,H.p=y,O.T=h}}Jn=3}}function o9(){if(Jn===4||Jn===3){Jn=0,yt();var a=Fo,c=Nc,h=Tc,y=Wk;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Jn=5:(Jn=0,Nc=Fo=null,a9(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(Ho=null),Kn(h),c=c.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(zt,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=O.T,x=H.p,H.p=2,O.T=null;try{for(var C=a.onRecoverableError,D=0;D<y.length;D++){var z=y[D];C(z.value,{componentStack:z.stack})}}finally{O.T=c,H.p=x}}(Tc&3)!==0&&Op(),hs(a),x=a.pendingLanes,(h&4194090)!==0&&(x&42)!==0?a===Xy?Nd++:(Nd=0,Xy=a):Nd=0,Td(0)}}function a9(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,od(c)))}function Op(a){return i9(),s9(),o9(),l9()}function l9(){if(Jn!==5)return!1;var a=Fo,c=Ky;Ky=0;var h=Kn(Tc),y=O.T,x=H.p;try{H.p=32>h?32:h,O.T=null,h=Yy,Yy=null;var C=Fo,D=Tc;if(Jn=0,Nc=Fo=null,Tc=0,(Ct&6)!==0)throw Error(r(331));var z=Ct;if(Ct|=4,$k(C.current),Fk(C,C.current,D,h),Ct=z,Td(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(zt,C)}catch{}return!0}finally{H.p=x,O.T=y,a9(a,c)}}function c9(a,c,h){c=pi(h,c),c=Ay(a.stateNode,c,2),a=Ro(a,c,2),a!==null&&($r(a,2),hs(a))}function jt(a,c,h){if(a.tag===3)c9(a,a,h);else for(;c!==null;){if(c.tag===3){c9(c,a,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ho===null||!Ho.has(y))){a=pi(h,a),h=hk(2),y=Ro(c,h,2),y!==null&&(pk(h,y,c,a),$r(y,2),hs(y));break}}c=c.return}}function e2(a,c,h){var y=a.pingCache;if(y===null){y=a.pingCache=new T$;var x=new Set;y.set(c,x)}else x=y.get(c),x===void 0&&(x=new Set,y.set(c,x));x.has(h)||(Uy=!0,x.add(h),a=R$.bind(null,a,c,h),c.then(a,a))}function R$(a,c,h){var y=a.pingCache;y!==null&&y.delete(c),a.pingedLanes|=a.suspendedLanes&h,a.warmLanes&=~h,It===a&&(ft&h)===h&&(on===4||on===3&&(ft&62914560)===ft&&300>Pe()-Wy?(Ct&2)===0&&Ac(a,0):$y|=h,Ec===ft&&(Ec=0)),hs(a)}function u9(a,c){c===0&&(c=Pi()),a=uc(a,c),a!==null&&($r(a,c),hs(a))}function j$(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),u9(a,h)}function O$(a,c){var h=0;switch(a.tag){case 13:var y=a.stateNode,x=a.memoizedState;x!==null&&(h=x.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(c),u9(a,h)}function L$(a,c){return Ne(a,c)}var Lp=null,_c=null,t2=!1,Ip=!1,n2=!1,tl=0;function hs(a){a!==_c&&a.next===null&&(_c===null?Lp=_c=a:_c=_c.next=a),Ip=!0,t2||(t2=!0,P$())}function Td(a,c){if(!n2&&Ip){n2=!0;do for(var h=!1,y=Lp;y!==null;){if(a!==0){var x=y.pendingLanes;if(x===0)var C=0;else{var D=y.suspendedLanes,z=y.pingedLanes;C=(1<<31-Dt(42|a)+1)-1,C&=x&~(D&~z),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(h=!0,p9(y,C))}else C=ft,C=xr(y,y===It?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||pt(y,C)||(h=!0,p9(y,C));y=y.next}while(h);n2=!1}}function I$(){d9()}function d9(){Ip=t2=!1;var a=0;tl!==0&&($$()&&(a=tl),tl=0);for(var c=Pe(),h=null,y=Lp;y!==null;){var x=y.next,C=f9(y,c);C===0?(y.next=null,h===null?Lp=x:h.next=x,x===null&&(_c=h)):(h=y,(a!==0||(C&3)!==0)&&(Ip=!0)),y=x}Td(a)}function f9(a,c){for(var h=a.suspendedLanes,y=a.pingedLanes,x=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var D=31-Dt(C),z=1<<D,K=x[D];K===-1?((z&h)===0||(z&y)!==0)&&(x[D]=bn(z,c)):K<=c&&(a.expiredLanes|=z),C&=~z}if(c=It,h=ft,h=xr(a,a===c?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,h===0||a===c&&(kt===2||kt===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&Ee(y),a.callbackNode=null,a.callbackPriority=0;if((h&3)===0||pt(a,h)){if(c=h&-h,c===a.callbackPriority)return c;switch(y!==null&&Ee(y),Kn(h)){case 2:case 8:h=Yt;break;case 32:h=gn;break;case 268435456:h=Mt;break;default:h=gn}return y=h9.bind(null,a),h=Ne(h,y),a.callbackPriority=c,a.callbackNode=h,c}return y!==null&&y!==null&&Ee(y),a.callbackPriority=2,a.callbackNode=null,2}function h9(a,c){if(Jn!==0&&Jn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var h=a.callbackNode;if(Op()&&a.callbackNode!==h)return null;var y=ft;return y=xr(a,a===It?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(Yk(a,y,c),f9(a,Pe()),a.callbackNode!=null&&a.callbackNode===h?h9.bind(null,a):null)}function p9(a,c){if(Op())return null;Yk(a,c,!0)}function P$(){W$(function(){(Ct&6)!==0?Ne(wt,I$):d9()})}function r2(){return tl===0&&(tl=wo()),tl}function m9(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:rc(""+a)}function g9(a,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,a.id&&h.setAttribute("form",a.id),c.parentNode.insertBefore(h,c),a=new FormData(a),h.parentNode.removeChild(h),a}function z$(a,c,h,y,x){if(c==="submit"&&h&&h.stateNode===x){var C=m9((x[Bt]||null).action),D=y.submitter;D&&(c=(c=D[Bt]||null)?m9(c.formAction):D.getAttribute("formAction"),c!==null&&(C=c,D=null));var z=new pe("action","action",null,y,x);a.push({event:z,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(tl!==0){var K=D?g9(x,D):new FormData(x);Cy(h,{pending:!0,data:K,method:x.method,action:C},null,K)}}else typeof C=="function"&&(z.preventDefault(),K=D?g9(x,D):new FormData(x),Cy(h,{pending:!0,data:K,method:x.method,action:C},C,K))},currentTarget:x}]})}}for(var i2=0;i2<F1.length;i2++){var s2=F1[i2],B$=s2.toLowerCase(),V$=s2[0].toUpperCase()+s2.slice(1);Hi(B$,"on"+V$)}Hi(Y7,"onAnimationEnd"),Hi(X7,"onAnimationIteration"),Hi(Z7,"onAnimationStart"),Hi("dblclick","onDoubleClick"),Hi("focusin","onFocus"),Hi("focusout","onBlur"),Hi(r$,"onTransitionRun"),Hi(i$,"onTransitionStart"),Hi(s$,"onTransitionCancel"),Hi(J7,"onTransitionEnd"),ge("onMouseEnter",["mouseout","mouseover"]),ge("onMouseLeave",["mouseout","mouseover"]),ge("onPointerEnter",["pointerout","pointerover"]),ge("onPointerLeave",["pointerout","pointerover"]),J("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),J("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),J("onBeforeInput",["compositionend","keypress","textInput","paste"]),J("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),J("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),J("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ad="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),H$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ad));function y9(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var y=a[h],x=y.event;y=y.listeners;e:{var C=void 0;if(c)for(var D=y.length-1;0<=D;D--){var z=y[D],K=z.instance,le=z.currentTarget;if(z=z.listener,K!==C&&x.isPropagationStopped())break e;C=z,x.currentTarget=le;try{C(x)}catch(fe){Cp(fe)}x.currentTarget=null,C=K}else for(D=0;D<y.length;D++){if(z=y[D],K=z.instance,le=z.currentTarget,z=z.listener,K!==C&&x.isPropagationStopped())break e;C=z,x.currentTarget=le;try{C(x)}catch(fe){Cp(fe)}x.currentTarget=null,C=K}}}}function at(a,c){var h=c[Rn];h===void 0&&(h=c[Rn]=new Set);var y=a+"__bubble";h.has(y)||(b9(c,a,2,!1),h.add(y))}function o2(a,c,h){var y=0;c&&(y|=4),b9(h,a,y,c)}var Pp="_reactListening"+Math.random().toString(36).slice(2);function a2(a){if(!a[Pp]){a[Pp]=!0,ns.forEach(function(h){h!=="selectionchange"&&(H$.has(h)||o2(h,!1,a),o2(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[Pp]||(c[Pp]=!0,o2("selectionchange",!1,c))}}function b9(a,c,h,y){switch(F9(c)){case 2:var x=pG;break;case 8:x=mG;break;default:x=w2}h=x.bind(null,c,h,a),x=void 0,!Ku||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),y?x!==void 0?a.addEventListener(c,h,{capture:!0,passive:x}):a.addEventListener(c,h,!0):x!==void 0?a.addEventListener(c,h,{passive:x}):a.addEventListener(c,h,!1)}function l2(a,c,h,y,x){var C=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var z=y.stateNode.containerInfo;if(z===x)break;if(D===4)for(D=y.return;D!==null;){var K=D.tag;if((K===3||K===4)&&D.stateNode.containerInfo===x)return;D=D.return}for(;z!==null;){if(D=vn(z),D===null)return;if(K=D.tag,K===5||K===6||K===26||K===27){y=C=D;continue e}z=z.parentNode}}y=y.return}Yh(function(){var le=C,fe=Pa(h),me=[];e:{var ue=Q7.get(a);if(ue!==void 0){var de=pe,Ke=a;switch(a){case"keypress":if(ic(h)===0)break e;case"keydown":case"keyup":de=LU;break;case"focusin":Ke="focus",de=Xu;break;case"focusout":Ke="blur",de=Xu;break;case"beforeblur":case"afterblur":de=Xu;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=Je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=R1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=zU;break;case Y7:case X7:case Z7:de=Xn;break;case J7:de=VU;break;case"scroll":case"scrollend":de=ke;break;case"wheel":de=FU;break;case"copy":case"cut":case"paste":de=Jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=_7;break;case"toggle":case"beforetoggle":de=UU}var $e=(c&4)!==0,At=!$e&&(a==="scroll"||a==="scrollend"),ne=$e?ue!==null?ue+"Capture":null:ue;$e=[];for(var Q=le,ae;Q!==null;){var he=Q;if(ae=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ae===null||ne===null||(he=za(Q,ne),he!=null&&$e.push(Md(Q,he,ae))),At)break;Q=Q.return}0<$e.length&&(ue=new de(ue,Ke,null,h,fe),me.push({event:ue,listeners:$e}))}}if((c&7)===0){e:{if(ue=a==="mouseover"||a==="pointerover",de=a==="mouseout"||a==="pointerout",ue&&h!==Gu&&(Ke=h.relatedTarget||h.fromElement)&&(vn(Ke)||Ke[Rr]))break e;if((de||ue)&&(ue=fe.window===fe?fe:(ue=fe.ownerDocument)?ue.defaultView||ue.parentWindow:window,de?(Ke=h.relatedTarget||h.toElement,de=le,Ke=Ke?vn(Ke):null,Ke!==null&&(At=s(Ke),$e=Ke.tag,Ke!==At||$e!==5&&$e!==27&&$e!==6)&&(Ke=null)):(de=null,Ke=le),de!==Ke)){if($e=Je,he="onMouseLeave",ne="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&($e=_7,he="onPointerLeave",ne="onPointerEnter",Q="pointer"),At=de==null?ue:or(de),ae=Ke==null?ue:or(Ke),ue=new $e(he,Q+"leave",de,h,fe),ue.target=At,ue.relatedTarget=ae,he=null,vn(fe)===le&&($e=new $e(ne,Q+"enter",Ke,h,fe),$e.target=ae,$e.relatedTarget=At,he=$e),At=he,de&&Ke)t:{for($e=de,ne=Ke,Q=0,ae=$e;ae;ae=Dc(ae))Q++;for(ae=0,he=ne;he;he=Dc(he))ae++;for(;0<Q-ae;)$e=Dc($e),Q--;for(;0<ae-Q;)ne=Dc(ne),ae--;for(;Q--;){if($e===ne||ne!==null&&$e===ne.alternate)break t;$e=Dc($e),ne=Dc(ne)}$e=null}else $e=null;de!==null&&v9(me,ue,de,$e,!1),Ke!==null&&At!==null&&v9(me,At,Ke,$e,!0)}}e:{if(ue=le?or(le):window,de=ue.nodeName&&ue.nodeName.toLowerCase(),de==="select"||de==="input"&&ue.type==="file")var Ie=z7;else if(I7(ue))if(B7)Ie=e$;else{Ie=JU;var st=ZU}else de=ue.nodeName,!de||de.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?le&&$u(le.elementType)&&(Ie=z7):Ie=QU;if(Ie&&(Ie=Ie(a,le))){P7(me,Ie,h,fe);break e}st&&st(a,ue,le),a==="focusout"&&le&&ue.type==="number"&&le.memoizedProps.value!=null&&Ia(ue,"number",ue.value)}switch(st=le?or(le):window,a){case"focusin":(I7(st)||st.contentEditable==="true")&&(ac=st,B1=le,td=null);break;case"focusout":td=B1=ac=null;break;case"mousedown":V1=!0;break;case"contextmenu":case"mouseup":case"dragend":V1=!1,W7(me,h,fe);break;case"selectionchange":if(n$)break;case"keydown":case"keyup":W7(me,h,fe)}var Ve;if(L1)e:{switch(a){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else oc?O7(a,h)&&(We="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(We="onCompositionStart");We&&(D7&&h.locale!=="ko"&&(oc||We!=="onCompositionStart"?We==="onCompositionEnd"&&oc&&(Ve=Xh()):(ls=fe,Yu="value"in ls?ls.value:ls.textContent,oc=!0)),st=zp(le,We),0<st.length&&(We=new M7(We,a,null,h,fe),me.push({event:We,listeners:st}),Ve?We.data=Ve:(Ve=L7(h),Ve!==null&&(We.data=Ve)))),(Ve=GU?WU(a,h):KU(a,h))&&(We=zp(le,"onBeforeInput"),0<We.length&&(st=new M7("onBeforeInput","beforeinput",null,h,fe),me.push({event:st,listeners:We}),st.data=Ve)),z$(me,a,le,h,fe)}y9(me,c)})}function Md(a,c,h){return{instance:a,listener:c,currentTarget:h}}function zp(a,c){for(var h=c+"Capture",y=[];a!==null;){var x=a,C=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||C===null||(x=za(a,h),x!=null&&y.unshift(Md(a,x,C)),x=za(a,c),x!=null&&y.push(Md(a,x,C))),a.tag===3)return y;a=a.return}return[]}function Dc(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function v9(a,c,h,y,x){for(var C=c._reactName,D=[];h!==null&&h!==y;){var z=h,K=z.alternate,le=z.stateNode;if(z=z.tag,K!==null&&K===y)break;z!==5&&z!==26&&z!==27||le===null||(K=le,x?(le=za(h,C),le!=null&&D.unshift(Md(h,le,K))):x||(le=za(h,C),le!=null&&D.push(Md(h,le,K)))),h=h.return}D.length!==0&&a.push({event:c,listeners:D})}var F$=/\r\n?/g,q$=/\u0000|\uFFFD/g;function x9(a){return(typeof a=="string"?a:""+a).replace(F$,`
`).replace(q$,"")}function w9(a,c){return c=x9(c),x9(a)===c}function Bp(){}function Tt(a,c,h,y,x,C){switch(h){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||No(a,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&No(a,""+y);break;case"className":zn(a,"class",y);break;case"tabIndex":zn(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":zn(a,h,y);break;case"style":Gh(a,y,C);break;case"data":if(c!=="object"){zn(a,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||h!=="href")){a.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=rc(""+y),a.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(h==="formAction"?(c!=="input"&&Tt(a,c,"name",x.name,x,null),Tt(a,c,"formEncType",x.formEncType,x,null),Tt(a,c,"formMethod",x.formMethod,x,null),Tt(a,c,"formTarget",x.formTarget,x,null)):(Tt(a,c,"encType",x.encType,x,null),Tt(a,c,"method",x.method,x,null),Tt(a,c,"target",x.target,x,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(h);break}y=rc(""+y),a.setAttribute(h,y);break;case"onClick":y!=null&&(a.onclick=Bp);break;case"onScroll":y!=null&&at("scroll",a);break;case"onScrollEnd":y!=null&&at("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}h=rc(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""+y):a.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,""):a.removeAttribute(h);break;case"capture":case"download":y===!0?a.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(h,y):a.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(h,y):a.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(h):a.setAttribute(h,y);break;case"popover":at("beforetoggle",a),at("toggle",a),Ut(a,"popover",y);break;case"xlinkActuate":xn(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":xn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":xn(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":xn(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":xn(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":xn(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":xn(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":xn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":xn(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ut(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Wh.get(h)||h,Ut(a,h,y))}}function c2(a,c,h,y,x,C){switch(h){case"style":Gh(a,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(h=y.__html,h!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=h}}break;case"children":typeof y=="string"?No(a,y):(typeof y=="number"||typeof y=="bigint")&&No(a,""+y);break;case"onScroll":y!=null&&at("scroll",a);break;case"onScrollEnd":y!=null&&at("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Bp);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Le.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),c=h.slice(2,x?h.length-7:void 0),C=a[Bt]||null,C=C!=null?C[h]:null,typeof C=="function"&&a.removeEventListener(c,C,x),typeof y=="function")){typeof C!="function"&&C!==null&&(h in a?a[h]=null:a.hasAttribute(h)&&a.removeAttribute(h)),a.addEventListener(c,y,x);break e}h in a?a[h]=y:y===!0?a.setAttribute(h,""):Ut(a,h,y)}}}function Qn(a,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",a),at("load",a);var y=!1,x=!1,C;for(C in h)if(h.hasOwnProperty(C)){var D=h[C];if(D!=null)switch(C){case"src":y=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Tt(a,c,C,D,h,null)}}x&&Tt(a,c,"srcSet",h.srcSet,h,null),y&&Tt(a,c,"src",h.src,h,null);return;case"input":at("invalid",a);var z=C=D=x=null,K=null,le=null;for(y in h)if(h.hasOwnProperty(y)){var fe=h[y];if(fe!=null)switch(y){case"name":x=fe;break;case"type":D=fe;break;case"checked":K=fe;break;case"defaultChecked":le=fe;break;case"value":C=fe;break;case"defaultValue":z=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,c));break;default:Tt(a,c,y,fe,h,null)}}Eo(a,C,z,K,le,D,x,!1),Co(a);return;case"select":at("invalid",a),y=D=C=null;for(x in h)if(h.hasOwnProperty(x)&&(z=h[x],z!=null))switch(x){case"value":C=z;break;case"defaultValue":D=z;break;case"multiple":y=z;default:Tt(a,c,x,z,h,null)}c=C,h=D,a.multiple=!!y,c!=null?Bi(a,!!y,c,!1):h!=null&&Bi(a,!!y,h,!0);return;case"textarea":at("invalid",a),C=x=y=null;for(D in h)if(h.hasOwnProperty(D)&&(z=h[D],z!=null))switch(D){case"value":y=z;break;case"defaultValue":x=z;break;case"children":C=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:Tt(a,c,D,z,h,null)}as(a,y,x,C),Co(a);return;case"option":for(K in h)if(h.hasOwnProperty(K)&&(y=h[K],y!=null))switch(K){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Tt(a,c,K,y,h,null)}return;case"dialog":at("beforetoggle",a),at("toggle",a),at("cancel",a),at("close",a);break;case"iframe":case"object":at("load",a);break;case"video":case"audio":for(y=0;y<Ad.length;y++)at(Ad[y],a);break;case"image":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"embed":case"source":case"link":at("error",a),at("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in h)if(h.hasOwnProperty(le)&&(y=h[le],y!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:Tt(a,c,le,y,h,null)}return;default:if($u(c)){for(fe in h)h.hasOwnProperty(fe)&&(y=h[fe],y!==void 0&&c2(a,c,fe,y,h,void 0));return}}for(z in h)h.hasOwnProperty(z)&&(y=h[z],y!=null&&Tt(a,c,z,y,h,null))}function U$(a,c,h,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,C=null,D=null,z=null,K=null,le=null,fe=null;for(de in h){var me=h[de];if(h.hasOwnProperty(de)&&me!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":K=me;default:y.hasOwnProperty(de)||Tt(a,c,de,null,y,me)}}for(var ue in y){var de=y[ue];if(me=h[ue],y.hasOwnProperty(ue)&&(de!=null||me!=null))switch(ue){case"type":C=de;break;case"name":x=de;break;case"checked":le=de;break;case"defaultChecked":fe=de;break;case"value":D=de;break;case"defaultValue":z=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:de!==me&&Tt(a,c,ue,de,y,me)}}Yr(a,D,z,K,le,fe,C,x);return;case"select":de=D=z=ue=null;for(C in h)if(K=h[C],h.hasOwnProperty(C)&&K!=null)switch(C){case"value":break;case"multiple":de=K;default:y.hasOwnProperty(C)||Tt(a,c,C,null,y,K)}for(x in y)if(C=y[x],K=h[x],y.hasOwnProperty(x)&&(C!=null||K!=null))switch(x){case"value":ue=C;break;case"defaultValue":z=C;break;case"multiple":D=C;default:C!==K&&Tt(a,c,x,C,y,K)}c=z,h=D,y=de,ue!=null?Bi(a,!!h,ue,!1):!!y!=!!h&&(c!=null?Bi(a,!!h,c,!0):Bi(a,!!h,h?[]:"",!1));return;case"textarea":de=ue=null;for(z in h)if(x=h[z],h.hasOwnProperty(z)&&x!=null&&!y.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Tt(a,c,z,null,y,x)}for(D in y)if(x=y[D],C=h[D],y.hasOwnProperty(D)&&(x!=null||C!=null))switch(D){case"value":ue=x;break;case"defaultValue":de=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==C&&Tt(a,c,D,x,y,C)}Uu(a,ue,de);return;case"option":for(var Ke in h)if(ue=h[Ke],h.hasOwnProperty(Ke)&&ue!=null&&!y.hasOwnProperty(Ke))switch(Ke){case"selected":a.selected=!1;break;default:Tt(a,c,Ke,null,y,ue)}for(K in y)if(ue=y[K],de=h[K],y.hasOwnProperty(K)&&ue!==de&&(ue!=null||de!=null))switch(K){case"selected":a.selected=ue&&typeof ue!="function"&&typeof ue!="symbol";break;default:Tt(a,c,K,ue,y,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in h)ue=h[$e],h.hasOwnProperty($e)&&ue!=null&&!y.hasOwnProperty($e)&&Tt(a,c,$e,null,y,ue);for(le in y)if(ue=y[le],de=h[le],y.hasOwnProperty(le)&&ue!==de&&(ue!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:Tt(a,c,le,ue,y,de)}return;default:if($u(c)){for(var At in h)ue=h[At],h.hasOwnProperty(At)&&ue!==void 0&&!y.hasOwnProperty(At)&&c2(a,c,At,void 0,y,ue);for(fe in y)ue=y[fe],de=h[fe],!y.hasOwnProperty(fe)||ue===de||ue===void 0&&de===void 0||c2(a,c,fe,ue,y,de);return}}for(var ne in h)ue=h[ne],h.hasOwnProperty(ne)&&ue!=null&&!y.hasOwnProperty(ne)&&Tt(a,c,ne,null,y,ue);for(me in y)ue=y[me],de=h[me],!y.hasOwnProperty(me)||ue===de||ue==null&&de==null||Tt(a,c,me,ue,y,de)}var u2=null,d2=null;function Vp(a){return a.nodeType===9?a:a.ownerDocument}function S9(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function C9(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function f2(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var h2=null;function $$(){var a=window.event;return a&&a.type==="popstate"?a===h2?!1:(h2=a,!0):(h2=null,!1)}var k9=typeof setTimeout=="function"?setTimeout:void 0,G$=typeof clearTimeout=="function"?clearTimeout:void 0,E9=typeof Promise=="function"?Promise:void 0,W$=typeof queueMicrotask=="function"?queueMicrotask:typeof E9<"u"?function(a){return E9.resolve(null).then(a).catch(K$)}:k9;function K$(a){setTimeout(function(){throw a})}function Uo(a){return a==="head"}function N9(a,c){var h=c,y=0,x=0;do{var C=h.nextSibling;if(a.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"){if(0<y&&8>y){h=y;var D=a.ownerDocument;if(h&1&&_d(D.documentElement),h&2&&_d(D.body),h&4)for(h=D.head,_d(h),D=h.firstChild;D;){var z=D.nextSibling,K=D.nodeName;D[Kr]||K==="SCRIPT"||K==="STYLE"||K==="LINK"&&D.rel.toLowerCase()==="stylesheet"||h.removeChild(D),D=z}}if(x===0){a.removeChild(C),zd(c);return}x--}else h==="$"||h==="$?"||h==="$!"?x++:y=h.charCodeAt(0)-48;else y=0;h=C}while(h);zd(c)}function p2(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":p2(h),ts(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}a.removeChild(h)}}function Y$(a,c,h,y){for(;a.nodeType===1;){var x=h;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[Kr])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=qi(a.nextSibling),a===null)break}return null}function X$(a,c,h){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!h||(a=qi(a.nextSibling),a===null))return null;return a}function m2(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function Z$(a,c){var h=a.ownerDocument;if(a.data!=="$?"||h.readyState==="complete")c();else{var y=function(){c(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function qi(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var g2=null;function T9(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}function A9(a,c,h){switch(c=Vp(h),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function _d(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);ts(a)}var xi=new Map,M9=new Set;function Hp(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ks=H.d;H.d={f:J$,r:Q$,D:eG,C:tG,L:nG,m:rG,X:sG,S:iG,M:oG};function J$(){var a=Ks.f(),c=Rp();return a||c}function Q$(a){var c=Ue(a);c!==null&&c.tag===5&&c.type==="form"?YC(c):Ks.r(a)}var Rc=typeof document>"u"?null:document;function _9(a,c,h){var y=Rc;if(y&&typeof c=="string"&&c){var x=cr(c);x='link[rel="'+a+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),M9.has(x)||(M9.add(x),a={rel:a,crossOrigin:h,href:c},y.querySelector(x)===null&&(c=y.createElement("link"),Qn(c,"link",a),Lt(c),y.head.appendChild(c)))}}function eG(a){Ks.D(a),_9("dns-prefetch",a,null)}function tG(a,c){Ks.C(a,c),_9("preconnect",a,c)}function nG(a,c,h){Ks.L(a,c,h);var y=Rc;if(y&&a&&c){var x='link[rel="preload"][as="'+cr(c)+'"]';c==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+cr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+cr(h.imageSizes)+'"]')):x+='[href="'+cr(a)+'"]';var C=x;switch(c){case"style":C=jc(a);break;case"script":C=Oc(a)}xi.has(C)||(a=f({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:a,as:c},h),xi.set(C,a),y.querySelector(x)!==null||c==="style"&&y.querySelector(Dd(C))||c==="script"&&y.querySelector(Rd(C))||(c=y.createElement("link"),Qn(c,"link",a),Lt(c),y.head.appendChild(c)))}}function rG(a,c){Ks.m(a,c);var h=Rc;if(h&&a){var y=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+cr(y)+'"][href="'+cr(a)+'"]',C=x;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Oc(a)}if(!xi.has(C)&&(a=f({rel:"modulepreload",href:a},c),xi.set(C,a),h.querySelector(x)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Rd(C)))return}y=h.createElement("link"),Qn(y,"link",a),Lt(y),h.head.appendChild(y)}}}function iG(a,c,h){Ks.S(a,c,h);var y=Rc;if(y&&a){var x=ar(y).hoistableStyles,C=jc(a);c=c||"default";var D=x.get(C);if(!D){var z={loading:0,preload:null};if(D=y.querySelector(Dd(C)))z.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":c},h),(h=xi.get(C))&&y2(a,h);var K=D=y.createElement("link");Lt(K),Qn(K,"link",a),K._p=new Promise(function(le,fe){K.onload=le,K.onerror=fe}),K.addEventListener("load",function(){z.loading|=1}),K.addEventListener("error",function(){z.loading|=2}),z.loading|=4,Fp(D,c,y)}D={type:"stylesheet",instance:D,count:1,state:z},x.set(C,D)}}}function sG(a,c){Ks.X(a,c);var h=Rc;if(h&&a){var y=ar(h).hoistableScripts,x=Oc(a),C=y.get(x);C||(C=h.querySelector(Rd(x)),C||(a=f({src:a,async:!0},c),(c=xi.get(x))&&b2(a,c),C=h.createElement("script"),Lt(C),Qn(C,"link",a),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(x,C))}}function oG(a,c){Ks.M(a,c);var h=Rc;if(h&&a){var y=ar(h).hoistableScripts,x=Oc(a),C=y.get(x);C||(C=h.querySelector(Rd(x)),C||(a=f({src:a,async:!0,type:"module"},c),(c=xi.get(x))&&b2(a,c),C=h.createElement("script"),Lt(C),Qn(C,"link",a),h.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(x,C))}}function D9(a,c,h,y){var x=(x=te.current)?Hp(x):null;if(!x)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=jc(h.href),h=ar(x).hoistableStyles,y=h.get(c),y||(y={type:"style",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){a=jc(h.href);var C=ar(x).hoistableStyles,D=C.get(a);if(D||(x=x.ownerDocument||x,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,D),(C=x.querySelector(Dd(a)))&&!C._p&&(D.instance=C,D.state.loading=5),xi.has(a)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},xi.set(a,h),C||aG(x,a,h,D.state))),c&&y===null)throw Error(r(528,""));return D}if(c&&y!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Oc(h),h=ar(x).hoistableScripts,y=h.get(c),y||(y={type:"script",instance:null,count:0,state:null},h.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function jc(a){return'href="'+cr(a)+'"'}function Dd(a){return'link[rel="stylesheet"]['+a+"]"}function R9(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function aG(a,c,h,y){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=a.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Qn(c,"link",h),Lt(c),a.head.appendChild(c))}function Oc(a){return'[src="'+cr(a)+'"]'}function Rd(a){return"script[async]"+a}function j9(a,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var y=a.querySelector('style[data-href~="'+cr(h.href)+'"]');if(y)return c.instance=y,Lt(y),y;var x=f({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Lt(y),Qn(y,"style",x),Fp(y,h.precedence,a),c.instance=y;case"stylesheet":x=jc(h.href);var C=a.querySelector(Dd(x));if(C)return c.state.loading|=4,c.instance=C,Lt(C),C;y=R9(h),(x=xi.get(x))&&y2(y,x),C=(a.ownerDocument||a).createElement("link"),Lt(C);var D=C;return D._p=new Promise(function(z,K){D.onload=z,D.onerror=K}),Qn(C,"link",y),c.state.loading|=4,Fp(C,h.precedence,a),c.instance=C;case"script":return C=Oc(h.src),(x=a.querySelector(Rd(C)))?(c.instance=x,Lt(x),x):(y=h,(x=xi.get(C))&&(y=f({},h),b2(y,x)),a=a.ownerDocument||a,x=a.createElement("script"),Lt(x),Qn(x,"link",y),a.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,Fp(y,h.precedence,a));return c.instance}function Fp(a,c,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=y.length?y[y.length-1]:null,C=x,D=0;D<y.length;D++){var z=y[D];if(z.dataset.precedence===c)C=z;else if(C!==x)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(a,c.firstChild))}function y2(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function b2(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var qp=null;function O9(a,c,h){if(qp===null){var y=new Map,x=qp=new Map;x.set(h,y)}else x=qp,y=x.get(h),y||(y=new Map,x.set(h,y));if(y.has(a))return y;for(y.set(a,null),h=h.getElementsByTagName(a),x=0;x<h.length;x++){var C=h[x];if(!(C[Kr]||C[Xt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var D=C.getAttribute(c)||"";D=a+D;var z=y.get(D);z?z.push(C):y.set(D,[C])}}return y}function L9(a,c,h){a=a.ownerDocument||a,a.head.insertBefore(h,c==="title"?a.querySelector("head > title"):null)}function lG(a,c,h){if(h===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function I9(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var jd=null;function cG(){}function uG(a,c,h){if(jd===null)throw Error(r(475));var y=jd;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=jc(h.href),C=a.querySelector(Dd(x));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Up.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=C,Lt(C);return}C=a.ownerDocument||a,h=R9(h),(x=xi.get(x))&&y2(h,x),C=C.createElement("link"),Lt(C);var D=C;D._p=new Promise(function(z,K){D.onload=z,D.onerror=K}),Qn(C,"link",h),c.instance=C}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=Up.bind(y),a.addEventListener("load",c),a.addEventListener("error",c))}}function dG(){if(jd===null)throw Error(r(475));var a=jd;return a.stylesheets&&a.count===0&&v2(a,a.stylesheets),0<a.count?function(c){var h=setTimeout(function(){if(a.stylesheets&&v2(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h)}}:null}function Up(){if(this.count--,this.count===0){if(this.stylesheets)v2(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var $p=null;function v2(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,$p=new Map,c.forEach(fG,a),$p=null,Up.call(a))}function fG(a,c){if(!(c.state.loading&4)){var h=$p.get(a);if(h)var y=h.get(null);else{h=new Map,$p.set(a,h);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<x.length;C++){var D=x[C];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(h.set(D.dataset.precedence,D),y=D)}y&&h.set(null,y)}x=c.instance,D=x.getAttribute("data-precedence"),C=h.get(D)||y,C===y&&h.set(null,x),h.set(D,x),this.count++,y=Up.bind(this),x.addEventListener("load",y),x.addEventListener("error",y),C?C.parentNode.insertBefore(x,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),c.state.loading|=4}}var Od={$$typeof:E,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function hG(a,c,h,y,x,C,D,z){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=y,this.onUncaughtError=x,this.onCaughtError=C,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function P9(a,c,h,y,x,C,D,z,K,le,fe,me){return a=new hG(a,c,h,D,z,K,le,me),c=1,C===!0&&(c|=24),C=Zr(3,null,null,c),a.current=C,C.stateNode=a,c=ey(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:y,isDehydrated:h,cache:c},iy(C),a}function z9(a){return a?(a=dc,a):dc}function B9(a,c,h,y,x,C){x=z9(x),y.context===null?y.context=x:y.pendingContext=x,y=Do(c),y.payload={element:h},C=C===void 0?null:C,C!==null&&(y.callback=C),h=Ro(a,y,c),h!==null&&(ni(h,a,c),ud(h,a,c))}function V9(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function x2(a,c){V9(a,c),(a=a.alternate)&&V9(a,c)}function H9(a){if(a.tag===13){var c=uc(a,67108864);c!==null&&ni(c,a,67108864),x2(a,67108864)}}var Gp=!0;function pG(a,c,h,y){var x=O.T;O.T=null;var C=H.p;try{H.p=2,w2(a,c,h,y)}finally{H.p=C,O.T=x}}function mG(a,c,h,y){var x=O.T;O.T=null;var C=H.p;try{H.p=8,w2(a,c,h,y)}finally{H.p=C,O.T=x}}function w2(a,c,h,y){if(Gp){var x=S2(y);if(x===null)l2(a,c,y,Wp,h),q9(a,y);else if(yG(x,a,c,h,y))y.stopPropagation();else if(q9(a,y),c&4&&-1<gG.indexOf(a)){for(;x!==null;){var C=Ue(x);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var D=Ge(C.pendingLanes);if(D!==0){var z=C;for(z.pendingLanes|=2,z.entangledLanes|=2;D;){var K=1<<31-Dt(D);z.entanglements[1]|=K,D&=~K}hs(C),(Ct&6)===0&&(_p=Pe()+500,Td(0))}}break;case 13:z=uc(C,2),z!==null&&ni(z,C,2),Rp(),x2(C,2)}if(C=S2(y),C===null&&l2(a,c,y,Wp,h),C===x)break;x=C}x!==null&&y.stopPropagation()}else l2(a,c,y,null,h)}}function S2(a){return a=Pa(a),C2(a)}var Wp=null;function C2(a){if(Wp=null,a=vn(a),a!==null){var c=s(a);if(c===null)a=null;else{var h=c.tag;if(h===13){if(a=o(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Wp=a,null}function F9(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case wt:return 2;case Yt:return 8;case gn:case qt:return 32;case Mt:return 268435456;default:return 32}default:return 32}}var k2=!1,$o=null,Go=null,Wo=null,Ld=new Map,Id=new Map,Ko=[],gG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function q9(a,c){switch(a){case"focusin":case"focusout":$o=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Wo=null;break;case"pointerover":case"pointerout":Ld.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Id.delete(c.pointerId)}}function Pd(a,c,h,y,x,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:C,targetContainers:[x]},c!==null&&(c=Ue(c),c!==null&&H9(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),a)}function yG(a,c,h,y,x){switch(c){case"focusin":return $o=Pd($o,a,c,h,y,x),!0;case"dragenter":return Go=Pd(Go,a,c,h,y,x),!0;case"mouseover":return Wo=Pd(Wo,a,c,h,y,x),!0;case"pointerover":var C=x.pointerId;return Ld.set(C,Pd(Ld.get(C)||null,a,c,h,y,x)),!0;case"gotpointercapture":return C=x.pointerId,Id.set(C,Pd(Id.get(C)||null,a,c,h,y,x)),!0}return!1}function U9(a){var c=vn(a.target);if(c!==null){var h=s(c);if(h!==null){if(c=h.tag,c===13){if(c=o(h),c!==null){a.blockedOn=c,zi(a.priority,function(){if(h.tag===13){var y=ti();y=St(y);var x=uc(h,y);x!==null&&ni(x,h,y),x2(h,y)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Kp(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=S2(a.nativeEvent);if(h===null){h=a.nativeEvent;var y=new h.constructor(h.type,h);Gu=y,h.target.dispatchEvent(y),Gu=null}else return c=Ue(h),c!==null&&H9(c),a.blockedOn=h,!1;c.shift()}return!0}function $9(a,c,h){Kp(a)&&h.delete(c)}function bG(){k2=!1,$o!==null&&Kp($o)&&($o=null),Go!==null&&Kp(Go)&&(Go=null),Wo!==null&&Kp(Wo)&&(Wo=null),Ld.forEach($9),Id.forEach($9)}function Yp(a,c){a.blockedOn===c&&(a.blockedOn=null,k2||(k2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bG)))}var Xp=null;function G9(a){Xp!==a&&(Xp=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Xp===a&&(Xp=null);for(var c=0;c<a.length;c+=3){var h=a[c],y=a[c+1],x=a[c+2];if(typeof y!="function"){if(C2(y||h)===null)continue;break}var C=Ue(h);C!==null&&(a.splice(c,3),c-=3,Cy(C,{pending:!0,data:x,method:h.method,action:y},y,x))}}))}function zd(a){function c(K){return Yp(K,a)}$o!==null&&Yp($o,a),Go!==null&&Yp(Go,a),Wo!==null&&Yp(Wo,a),Ld.forEach(c),Id.forEach(c);for(var h=0;h<Ko.length;h++){var y=Ko[h];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Ko.length&&(h=Ko[0],h.blockedOn===null);)U9(h),h.blockedOn===null&&Ko.shift();if(h=(a.ownerDocument||a).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var x=h[y],C=h[y+1],D=x[Bt]||null;if(typeof C=="function")D||G9(h);else if(D){var z=null;if(C&&C.hasAttribute("formAction")){if(x=C,D=C[Bt]||null)z=D.formAction;else if(C2(x)!==null)continue}else z=D.action;typeof z=="function"?h[y+1]=z:(h.splice(y,3),y-=3),G9(h)}}}function E2(a){this._internalRoot=a}Zp.prototype.render=E2.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,y=ti();B9(h,y,a,c,null,null)},Zp.prototype.unmount=E2.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;B9(a.current,2,null,a,null,null),Rp(),c[Rr]=null}};function Zp(a){this._internalRoot=a}Zp.prototype.unstable_scheduleHydration=function(a){if(a){var c=So();a={blockedOn:null,target:a,priority:c};for(var h=0;h<Ko.length&&c!==0&&c<Ko[h].priority;h++);Ko.splice(h,0,a),h===0&&U9(a)}};var W9=e.version;if(W9!=="19.1.1")throw Error(r(527,W9,"19.1.1"));H.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var vG={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jp.isDisabled&&Jp.supportsFiber)try{zt=Jp.inject(vG),ht=Jp}catch{}}return Vd.createRoot=function(a,c){if(!i(a))throw Error(r(299));var h=!1,y="",x=ck,C=uk,D=dk,z=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(z=c.unstable_transitionCallbacks)),c=P9(a,1,!1,null,null,h,y,x,C,D,z,null),a[Rr]=c.current,a2(a),new E2(c)},Vd.hydrateRoot=function(a,c,h){if(!i(a))throw Error(r(299));var y=!1,x="",C=ck,D=uk,z=dk,K=null,le=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(D=h.onCaughtError),h.onRecoverableError!==void 0&&(z=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(K=h.unstable_transitionCallbacks),h.formState!==void 0&&(le=h.formState)),c=P9(a,1,!0,c,h??null,y,x,C,D,z,K,le),c.context=z9(null),h=c.current,y=ti(),y=St(y),x=Do(y),x.callback=null,Ro(h,x,y),h=y,c.current.lanes=h,$r(c,h),hs(c),a[Rr]=c.current,a2(a),new Zp(c)},Vd.version="19.1.1",Vd}var rE;function _G(){if(rE)return A2.exports;rE=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),A2.exports=MG(),A2.exports}var DG=_G(),RG=AL();const mh=hh(RG);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _f(){return _f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_f.apply(this,arguments)}var ca;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ca||(ca={}));const iE="popstate";function jG(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return b6("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_L(i)}return LG(e,n,null,t)}function In(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ML(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OG(){return Math.random().toString(36).substr(2,8)}function sE(t,e){return{usr:t.state,key:t.key,idx:e}}function b6(t,e,n,r){return n===void 0&&(n=null),_f({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_u(e):e,{state:n,key:e&&e.key||r||OG()})}function _L(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _u(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function LG(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=ca.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(_f({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=ca.Pop;let S=f(),k=S==null?null:S-d;d=S,u&&u({action:l,location:w.location,delta:k})}function m(S,k){l=ca.Push;let T=b6(w.location,S,k);d=f()+1;let E=sE(T,d),N=w.createHref(T);try{o.pushState(E,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(N)}s&&u&&u({action:l,location:w.location,delta:1})}function b(S,k){l=ca.Replace;let T=b6(w.location,S,k);d=f();let E=sE(T,d),N=w.createHref(T);o.replaceState(E,"",N),s&&u&&u({action:l,location:w.location,delta:0})}function v(S){let k=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof S=="string"?S:_L(S);return T=T.replace(/ $/,"%20"),In(k,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,k)}let w={get action(){return l},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(iE,p),u=S,()=>{i.removeEventListener(iE,p),u=null}},createHref(S){return e(i,S)},createURL:v,encodeLocation(S){let k=v(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:m,replace:b,go(S){return o.go(S)}};return w}var oE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oE||(oE={}));function IG(t,e,n){return n===void 0&&(n="/"),PG(t,e,n)}function PG(t,e,n,r){let i=typeof e=="string"?_u(e):e,s=jL(i.pathname||"/",n);if(s==null)return null;let o=DL(t);zG(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=XG(s);l=WG(o[u],d)}return l}function DL(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(In(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=yl([r,u.relativePath]),f=n.concat(u);s.children&&s.children.length>0&&(In(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),DL(s.children,e,f,d)),!(s.path==null&&!s.index)&&e.push({path:d,score:$G(d,s.index),routesMeta:f})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of RL(s.path))i(s,o,u)}),e}function RL(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=RL(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function zG(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:GG(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const BG=/^:[\w-]+$/,VG=3,HG=2,FG=1,qG=10,UG=-2,aE=t=>t==="*";function $G(t,e){let n=t.split("/"),r=n.length;return n.some(aE)&&(r+=UG),e&&(r+=HG),n.filter(i=>!aE(i)).reduce((i,s)=>i+(BG.test(s)?VG:s===""?FG:qG),r)}function GG(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function WG(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=s==="/"?e:e.slice(s.length)||"/",p=KG({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:yl([s,p.pathname]),pathnameBase:nW(yl([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=yl([s,p.pathnameBase]))}return o}function KG(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=YG(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:m,isOptional:b}=f;if(m==="*"){let w=l[p]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=l[p];return b&&!v?d[m]=void 0:d[m]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:t}}function YG(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ML(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function XG(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ML(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jL(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function ZG(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?_u(t):t;return{pathname:n?n.startsWith("/")?n:JG(n,e):e,search:rW(r),hash:iW(i)}}function JG(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function R2(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function QG(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eW(t,e){let n=QG(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function tW(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=_u(t):(i=_f({},t),In(!i.pathname||!i.pathname.includes("?"),R2("?","pathname","search",i)),In(!i.pathname||!i.pathname.includes("#"),R2("#","pathname","hash",i)),In(!i.search||!i.search.includes("#"),R2("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?e[p]:"/"}let u=ZG(i,l),d=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const yl=t=>t.join("/").replace(/\/\/+/g,"/"),nW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),rW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,iW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const OL=["post","put","patch","delete"];new Set(OL);const oW=["get",...OL];new Set(oW);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Df(){return Df=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Df.apply(this,arguments)}const e8=M.createContext(null),aW=M.createContext(null),bg=M.createContext(null),vg=M.createContext(null),ql=M.createContext({outlet:null,matches:[],isDataRoute:!1}),LL=M.createContext(null);function xg(){return M.useContext(vg)!=null}function IL(){return xg()||In(!1),M.useContext(vg).location}function PL(t){M.useContext(bg).static||M.useLayoutEffect(t)}function gh(){let{isDataRoute:t}=M.useContext(ql);return t?wW():lW()}function lW(){xg()||In(!1);let t=M.useContext(e8),{basename:e,future:n,navigator:r}=M.useContext(bg),{matches:i}=M.useContext(ql),{pathname:s}=IL(),o=JSON.stringify(eW(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return PL(()=>{l.current=!0}),M.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=tW(d,JSON.parse(o),s,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:yl([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,s,t])}function cW(){let{matches:t}=M.useContext(ql),e=t[t.length-1];return e?e.params:{}}function uW(t,e){return dW(t,e)}function dW(t,e,n,r){xg()||In(!1);let{navigator:i}=M.useContext(bg),{matches:s}=M.useContext(ql),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=IL(),f;if(e){var p;let S=typeof e=="string"?_u(e):e;u==="/"||(p=S.pathname)!=null&&p.startsWith(u)||In(!1),f=S}else f=d;let m=f.pathname||"/",b=m;if(u!=="/"){let S=u.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=IG(t,{pathname:b}),w=gW(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},l,S.params),pathname:yl([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:yl([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,n,r);return e&&w?M.createElement(vg.Provider,{value:{location:Df({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ca.Pop}},w):w}function fW(){let t=xW(),e=sW(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const hW=M.createElement(fW,null);class pW extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(ql.Provider,{value:this.props.routeContext},M.createElement(LL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mW(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(e8);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(ql.Provider,{value:e},r)}function gW(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);f>=0||In(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:b}=n,v=p.route.loader&&m[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||v){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,m)=>{let b,v=!1,w=null,S=null;n&&(b=l&&p.route.id?l[p.route.id]:void 0,w=p.route.errorElement||hW,u&&(d<0&&m===0?(SW("route-fallback"),v=!0,S=null):d===m&&(v=!0,S=p.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,m+1)),T=()=>{let E;return b?E=w:v?E=S:p.route.Component?E=M.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=f,M.createElement(mW,{match:p,routeContext:{outlet:f,matches:k,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?M.createElement(pW,{location:n.location,revalidation:n.revalidation,component:w,error:b,children:T(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):T()},null)}var zL=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(zL||{}),BL=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(BL||{});function yW(t){let e=M.useContext(e8);return e||In(!1),e}function bW(t){let e=M.useContext(aW);return e||In(!1),e}function vW(t){let e=M.useContext(ql);return e||In(!1),e}function VL(t){let e=vW(),n=e.matches[e.matches.length-1];return n.route.id||In(!1),n.route.id}function xW(){var t;let e=M.useContext(LL),n=bW(),r=VL();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function wW(){let{router:t}=yW(zL.UseNavigateStable),e=VL(BL.UseNavigateStable),n=M.useRef(!1);return PL(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Df({fromRouteId:e},s)))},[t,e])}const lE={};function SW(t,e,n){lE[t]||(lE[t]=!0)}function CW(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function il(t){In(!1)}function kW(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ca.Pop,navigator:s,static:o=!1,future:l}=t;xg()&&In(!1);let u=e.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:u,navigator:s,static:o,future:Df({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=_u(r));let{pathname:f="/",search:p="",hash:m="",state:b=null,key:v="default"}=r,w=M.useMemo(()=>{let S=jL(f,u);return S==null?null:{location:{pathname:S,search:p,hash:m,state:b,key:v},navigationType:i}},[u,f,p,m,b,v,i]);return w==null?null:M.createElement(bg.Provider,{value:d},M.createElement(vg.Provider,{children:n,value:w}))}function EW(t){let{children:e,location:n}=t;return uW(v6(e),n)}new Promise(()=>{});function v6(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let s=[...e,i];if(r.type===M.Fragment){n.push.apply(n,v6(r.props.children,s));return}r.type!==il&&In(!1),!r.props.index||!r.props.children||In(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=v6(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const NW="6";try{window.__reactRouterVersion=NW}catch{}const TW="startTransition",cE=EG[TW];function AW(t){let{basename:e,children:n,future:r,window:i}=t,s=M.useRef();s.current==null&&(s.current=jG({window:i,v5Compat:!0}));let o=s.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=M.useCallback(p=>{d&&cE?cE(()=>u(p)):u(p)},[u,d]);return M.useLayoutEffect(()=>o.listen(f),[o,f]),M.useEffect(()=>CW(r),[r]),M.createElement(kW,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var uE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(uE||(uE={}));var dE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dE||(dE={}));var HL={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},fE=Ae.createContext&&Ae.createContext(HL),MW=["attr","size","title"];function _W(t,e){if(t==null)return{};var n=DW(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DW(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Z0(){return Z0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z0.apply(this,arguments)}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){RW(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RW(t,e,n){return e=jW(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jW(t){var e=OW(t,"string");return typeof e=="symbol"?e:e+""}function OW(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FL(t){return t&&t.map((e,n)=>Ae.createElement(e.tag,J0({key:n},e.attr),FL(e.child)))}function be(t){return e=>Ae.createElement(LW,Z0({attr:J0({},t.attr)},e),FL(t.child))}function LW(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=_W(t,MW),l=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Ae.createElement("svg",Z0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:J0(J0({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ae.createElement("title",null,s),t.children)};return fE!==void 0?Ae.createElement(fE.Consumer,null,n=>e(n)):e(HL)}function IW(t){return be({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(t)}function PW(t){return be({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(t)}function t8(t){return be({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(t)}const zW=t=>t==="system"||t==="light"||t==="dark";function Ul(){const[t,e]=M.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return zW(s)?s:"light"}),[n,r]=M.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return M.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(t);try{localStorage.setItem("theme",t)}catch{}},[t,n]),M.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:t,setTheme:e,flowColorMode:t==="system"?n?"dark":"light":t}}const yh=()=>{const{theme:t,setTheme:e}=Ul();return g.jsx("button",{onClick:()=>e(t==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:t==="light"?g.jsx(IW,{size:18}):g.jsx(PW,{size:18})})},ri={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},bh=({title:t,description:e,keywords:n,image:r,url:i,type:s="website"})=>(M.useEffect(()=>{document.title=t||ri.title;const o=(u,d,f=!1)=>{const p=f?"property":"name";let m=document.querySelector(`meta[${p}="${u}"]`);m?m.content=d:(m=document.createElement("meta"),m.setAttribute(p,u),m.content=d,document.head.appendChild(m))};o("description",e||ri.description),o("keywords",n||ri.keywords),o("og:title",t||ri.title,!0),o("og:description",e||ri.description,!0),o("og:image",r||ri.image,!0),o("og:url",i||ri.url,!0),o("og:type",s,!0),o("twitter:title",t||ri.title),o("twitter:description",e||ri.description),o("twitter:image",r||ri.image),o("twitter:url",i||ri.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||ri.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||ri.url,document.head.appendChild(l))},[t,e,n,r,i,s]),null);class Zd extends Error{}Zd.prototype.name="InvalidTokenError";function BW(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function VW(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return BW(e)}catch{return atob(e)}}function HW(t,e){if(typeof t!="string")throw new Zd("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new Zd(`Invalid token specified: missing part #${n+1}`);let i;try{i=VW(r)}catch(s){throw new Zd(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new Zd(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Cn="https://diagrammatic-api.vercel.app";class FW{getAuthHeaders(){const e=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}}async login(e){const n=await fetch(`${Cn}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(e){const n=await fetch(`${Cn}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(e){const n=await fetch(`${Cn}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const e=await fetch(`${Cn}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch user");return e.json()}async saveDiagram(e){const n=await fetch(`${Cn}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(e,n){const r=await fetch(`${Cn}/api/v1/diagrams/${e}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const e=await fetch(`${Cn}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch diagrams");return e.json()}async getDiagram(e){const n=await fetch(`${Cn}/api/v1/diagrams/${e}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async getPublicDiagram(e){const n=await fetch(`${Cn}/api/v1/diagrams/${e}/public`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(e){if(!(await fetch(`${Cn}/api/v1/diagrams/${e}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}async addCollaborator(e,n,r){const i=await fetch(`${Cn}/api/v1/diagrams/${e}/share`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({email:n,permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to add collaborator"}));throw new Error(s.message||"Failed to add collaborator")}}async getCollaborators(e){const n=await fetch(`${Cn}/api/v1/diagrams/${e}/collaborators`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch collaborators");return n.json()}async updateCollaborator(e,n,r){const i=await fetch(`${Cn}/api/v1/diagrams/${e}/collaborators/${n}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to update collaborator"}));throw new Error(s.message||"Failed to update collaborator")}}async removeCollaborator(e,n){if(!(await fetch(`${Cn}/api/v1/diagrams/${e}/collaborators/${n}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to remove collaborator")}async getAttemptedProblems(){const e=await fetch(`${Cn}/api/v1/problems/attempted`,{headers:this.getAuthHeaders()});return e.ok?e.json():[]}async saveAttempt(e){const n=await fetch(`${Cn}/api/v1/attempts`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(e)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to save attempt"}));throw new Error(r.message||"Failed to save attempt")}return n.json()}async getUserAttempts(){const e=await fetch(`${Cn}/api/v1/attempts`,{headers:this.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch attempts");return e.json()}async getAttemptByProblem(e){const n=await fetch(`${Cn}/api/v1/attempts/problem/${e}`,{headers:this.getAuthHeaders()});if(n.status===404)return null;if(!n.ok)throw new Error("Failed to fetch attempt");return n.json()}async deleteAttempt(e){if(!(await fetch(`${Cn}/api/v1/attempts/problem/${e}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete attempt")}async getRecommendations(e){const n={user_intent:e.userIntent?{title:e.userIntent.title,description:e.userIntent.description}:null,canvas_context:{node_count:e.canvasContext.nodeCount,edge_count:e.canvasContext.edgeCount,component_types:e.canvasContext.componentTypes,is_empty:e.canvasContext.isEmpty},components:e.components.map(s=>({id:s.id,type:s.type,label:s.label,has_description:s.hasDescription,properties:s.properties||{}})),connections:e.connections.map(s=>({source:s.source,target:s.target,type:s.type,has_label:s.hasLabel})),max_suggestions:e.maxSuggestions||5},r=await fetch(`${Cn}/api/v1/recommendations`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok)throw new Error("Failed to get recommendations");const i=await r.json();return{recommendations:i.recommendations.map(s=>({id:s.id,title:s.title,description:s.description,icon:s.icon,category:s.category,priority:s.priority,confidence:s.confidence,actionType:s.action_type,componentId:s.component_id,componentIds:s.component_ids,reasoning:s.reasoning})),totalCount:i.total_count,filteredCount:i.filtered_count,minConfidenceThreshold:i.min_confidence_threshold,contextSummary:i.context_summary,processingTimeMs:i.processing_time_ms}}}const Jt=new FW,qL=M.createContext(void 0),qW=({children:t})=>{const[e,n]=M.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=M.useCallback(f=>{try{const p=HW(f);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=M.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);M.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(m=>({...m,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(m=>({...m,isLoading:!1}));return}try{const m=await Jt.getCurrentUser();n({user:m,token:p,isAuthenticated:!0,isLoading:!1})}catch(m){console.error("Failed to fetch user:",m),localStorage.removeItem("auth_token"),n(b=>({...b,isLoading:!1}))}})()},[r]);const s=M.useCallback(async f=>{const{user:p,token:m}=await Jt.login(f);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),o=M.useCallback(async f=>{const{user:p,token:m}=await Jt.signup(f);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),l=M.useCallback(async f=>{const{user:p,token:m}=await Jt.googleLogin(f);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),u=M.useCallback(async()=>{if(e.token)try{const f=await Jt.getCurrentUser();n(p=>({...p,user:f}))}catch(f){console.error("Failed to refresh user:",f),i()}},[e.token,i]),d=M.useMemo(()=>({...e,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[e,s,o,l,i,u]);return g.jsx(qL.Provider,{value:d,children:t})},vh=()=>{const t=M.useContext(qL);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},n8=M.createContext({});function r8(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const i8=typeof window<"u",UL=i8?M.useLayoutEffect:M.useEffect,wg=M.createContext(null);function s8(t,e){t.indexOf(e)===-1&&t.push(e)}function o8(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const lo=(t,e,n)=>n>e?e:n<t?t:n;let a8=()=>{};const co={},$L=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function GL(t){return typeof t=="object"&&t!==null}const WL=t=>/^0[^.\s]+$/u.test(t);function l8(t){let e;return()=>(e===void 0&&(e=t()),e)}const _i=t=>t,UW=(t,e)=>n=>e(t(n)),xh=(...t)=>t.reduce(UW),Rf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class c8{constructor(){this.subscriptions=[]}add(e){return s8(this.subscriptions,e),()=>o8(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ss=t=>t*1e3,Mi=t=>t/1e3;function KL(t,e){return e?t*(1e3/e):0}const YL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$W=1e-7,GW=12;function WW(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=YL(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>$W&&++l<GW);return o}function wh(t,e,n,r){if(t===e&&n===r)return _i;const i=s=>WW(s,0,1,t,n);return s=>s===0||s===1?s:YL(i(s),e,r)}const XL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,ZL=t=>e=>1-t(1-e),JL=wh(.33,1.53,.69,.99),u8=ZL(JL),QL=XL(u8),eI=t=>(t*=2)<1?.5*u8(t):.5*(2-Math.pow(2,-10*(t-1))),d8=t=>1-Math.sin(Math.acos(t)),tI=ZL(d8),nI=XL(d8),KW=wh(.42,0,1,1),YW=wh(0,0,.58,1),rI=wh(.42,0,.58,1),XW=t=>Array.isArray(t)&&typeof t[0]!="number",iI=t=>Array.isArray(t)&&typeof t[0]=="number",ZW={linear:_i,easeIn:KW,easeInOut:rI,easeOut:YW,circIn:d8,circInOut:nI,circOut:tI,backIn:u8,backInOut:QL,backOut:JL,anticipate:eI},JW=t=>typeof t=="string",pE=t=>{if(iI(t)){a8(t.length===4);const[e,n,r,i]=t;return wh(e,n,r,i)}else if(JW(t))return ZW[t];return t},e0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function QW(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(d.schedule(f),t()),f(l)}const d={schedule:(f,p=!1,m=!1)=>{const v=m&&i?n:r;return p&&o.add(f),v.has(f)||v.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(l=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(f))}};return d}const eK=40;function sI(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=e0.reduce((E,N)=>(E[N]=QW(s),E),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:f,update:p,preRender:m,render:b,postRender:v}=o,w=()=>{const E=co.useManualTiming?i.timestamp:performance.now();n=!1,co.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,eK),1)),i.timestamp=E,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),f.process(i),p.process(i),m.process(i),b.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(w))},S=()=>{n=!0,r=!0,i.isProcessing||t(w)};return{schedule:e0.reduce((E,N)=>{const A=o[N];return E[N]=(_,j=!1,R=!1)=>(n||S(),A.schedule(_,j,R)),E},{}),cancel:E=>{for(let N=0;N<e0.length;N++)o[e0[N]].cancel(E)},state:i,steps:o}}const{schedule:Gt,cancel:wa,state:tr,steps:j2}=sI(typeof requestAnimationFrame<"u"?requestAnimationFrame:_i,!0);let D0;function tK(){D0=void 0}const Pr={now:()=>(D0===void 0&&Pr.set(tr.isProcessing||co.useManualTiming?tr.timestamp:performance.now()),D0),set:t=>{D0=t,queueMicrotask(tK)}},oI=t=>e=>typeof e=="string"&&e.startsWith(t),f8=oI("--"),nK=oI("var(--"),h8=t=>nK(t)?rK.test(t.split("/*")[0].trim()):!1,rK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Du={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},jf={...Du,transform:t=>lo(0,1,t)},t0={...Du,default:1},cf=t=>Math.round(t*1e5)/1e5,p8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function iK(t){return t==null}const sK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,m8=(t,e)=>n=>!!(typeof n=="string"&&sK.test(n)&&n.startsWith(t)||e&&!iK(n)&&Object.prototype.hasOwnProperty.call(n,e)),aI=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(p8);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},oK=t=>lo(0,255,t),O2={...Du,transform:t=>Math.round(oK(t))},cl={test:m8("rgb","red"),parse:aI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+O2.transform(t)+", "+O2.transform(e)+", "+O2.transform(n)+", "+cf(jf.transform(r))+")"};function aK(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const x6={test:m8("#"),parse:aK,transform:cl.transform},Sh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ea=Sh("deg"),Cs=Sh("%"),Ye=Sh("px"),lK=Sh("vh"),cK=Sh("vw"),mE={...Cs,parse:t=>Cs.parse(t)/100,transform:t=>Cs.transform(t*100)},Wc={test:m8("hsl","hue"),parse:aI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Cs.transform(cf(e))+", "+Cs.transform(cf(n))+", "+cf(jf.transform(r))+")"},kn={test:t=>cl.test(t)||x6.test(t)||Wc.test(t),parse:t=>cl.test(t)?cl.parse(t):Wc.test(t)?Wc.parse(t):x6.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?cl.transform(t):Wc.transform(t),getAnimatableNone:t=>{const e=kn.parse(t);return e.alpha=0,kn.transform(e)}},uK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dK(t){return isNaN(t)&&typeof t=="string"&&(t.match(p8)?.length||0)+(t.match(uK)?.length||0)>0}const lI="number",cI="color",fK="var",hK="var(",gE="${}",pK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Of(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(pK,u=>(kn.test(u)?(r.color.push(s),i.push(cI),n.push(kn.parse(u))):u.startsWith(hK)?(r.var.push(s),i.push(fK),n.push(u)):(r.number.push(s),i.push(lI),n.push(parseFloat(u))),++s,gE)).split(gE);return{values:n,split:l,indexes:r,types:i}}function uI(t){return Of(t).values}function dI(t){const{split:e,types:n}=Of(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===lI?s+=cf(i[o]):l===cI?s+=kn.transform(i[o]):s+=i[o]}return s}}const mK=t=>typeof t=="number"?0:kn.test(t)?kn.getAnimatableNone(t):t;function gK(t){const e=uI(t);return dI(t)(e.map(mK))}const Sa={test:dK,parse:uI,createTransformer:dI,getAnimatableNone:gK};function L2(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function yK({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=L2(u,l,t+1/3),s=L2(u,l,t),o=L2(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Q0(t,e){return n=>n>0?e:t}const tn=(t,e,n)=>t+(e-t)*n,I2=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},bK=[x6,cl,Wc],vK=t=>bK.find(e=>e.test(t));function yE(t){const e=vK(t);if(!e)return!1;let n=e.parse(t);return e===Wc&&(n=yK(n)),n}const bE=(t,e)=>{const n=yE(t),r=yE(e);if(!n||!r)return Q0(t,e);const i={...n};return s=>(i.red=I2(n.red,r.red,s),i.green=I2(n.green,r.green,s),i.blue=I2(n.blue,r.blue,s),i.alpha=tn(n.alpha,r.alpha,s),cl.transform(i))},w6=new Set(["none","hidden"]);function xK(t,e){return w6.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function wK(t,e){return n=>tn(t,e,n)}function g8(t){return typeof t=="number"?wK:typeof t=="string"?h8(t)?Q0:kn.test(t)?bE:kK:Array.isArray(t)?fI:typeof t=="object"?kn.test(t)?bE:SK:Q0}function fI(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>g8(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function SK(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=g8(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function CK(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const kK=(t,e)=>{const n=Sa.createTransformer(e),r=Of(t),i=Of(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?w6.has(t)&&!i.values.length||w6.has(e)&&!r.values.length?xK(t,e):xh(fI(CK(r,i),i.values),n):Q0(t,e)};function hI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tn(t,e,n):g8(t)(t,e)}const EK=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Gt.update(e,n),stop:()=>wa(e),now:()=>tr.isProcessing?tr.timestamp:Pr.now()}},pI=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},em=2e4;function y8(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<em;)e+=n,r=t.next(e);return e>=em?1/0:e}function NK(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(y8(r),em);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Mi(i)}}const TK=5;function mI(t,e,n){const r=Math.max(e-TK,0);return KL(n-t(r),e-r)}const ln={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},P2=.001;function AK({duration:t=ln.duration,bounce:e=ln.bounce,velocity:n=ln.velocity,mass:r=ln.mass}){let i,s,o=1-e;o=lo(ln.minDamping,ln.maxDamping,o),t=lo(ln.minDuration,ln.maxDuration,Mi(t)),o<1?(i=d=>{const f=d*o,p=f*t,m=f-n,b=S6(d,o),v=Math.exp(-p);return P2-m/b*v},s=d=>{const p=d*o*t,m=p*n+n,b=Math.pow(o,2)*Math.pow(d,2)*t,v=Math.exp(-p),w=S6(Math.pow(d,2),o);return(-i(d)+P2>0?-1:1)*((m-b)*v)/w}):(i=d=>{const f=Math.exp(-d*t),p=(d-n)*t+1;return-P2+f*p},s=d=>{const f=Math.exp(-d*t),p=(n-d)*(t*t);return f*p});const l=5/t,u=_K(i,s,l);if(t=Ss(t),isNaN(u))return{stiffness:ln.stiffness,damping:ln.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const MK=12;function _K(t,e,n){let r=n;for(let i=1;i<MK;i++)r=r-t(r)/e(r);return r}function S6(t,e){return t*Math.sqrt(1-e*e)}const DK=["duration","bounce"],RK=["stiffness","damping","mass"];function vE(t,e){return e.some(n=>t[n]!==void 0)}function jK(t){let e={velocity:ln.velocity,stiffness:ln.stiffness,damping:ln.damping,mass:ln.mass,isResolvedFromDuration:!1,...t};if(!vE(t,RK)&&vE(t,DK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*lo(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ln.mass,stiffness:i,damping:s}}else{const n=AK(t);e={...e,...n,mass:ln.mass},e.isResolvedFromDuration=!0}return e}function tm(t=ln.visualDuration,e=ln.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:f,duration:p,velocity:m,isResolvedFromDuration:b}=jK({...n,velocity:-Mi(n.velocity||0)}),v=m||0,w=d/(2*Math.sqrt(u*f)),S=o-s,k=Mi(Math.sqrt(u/f)),T=Math.abs(S)<5;r||(r=T?ln.restSpeed.granular:ln.restSpeed.default),i||(i=T?ln.restDelta.granular:ln.restDelta.default);let E;if(w<1){const A=S6(k,w);E=_=>{const j=Math.exp(-w*k*_);return o-j*((v+w*k*S)/A*Math.sin(A*_)+S*Math.cos(A*_))}}else if(w===1)E=A=>o-Math.exp(-k*A)*(S+(v+k*S)*A);else{const A=k*Math.sqrt(w*w-1);E=_=>{const j=Math.exp(-w*k*_),R=Math.min(A*_,300);return o-j*((v+w*k*S)*Math.sinh(R)+A*S*Math.cosh(R))/A}}const N={calculatedDuration:b&&p||null,next:A=>{const _=E(A);if(b)l.done=A>=p;else{let j=A===0?v:0;w<1&&(j=A===0?Ss(v):mI(E,A,_));const R=Math.abs(j)<=r,L=Math.abs(o-_)<=i;l.done=R&&L}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(y8(N),em),_=pI(j=>N.next(A*j).value,A,30);return A+"ms "+_},toTransition:()=>{}};return N}tm.applyToOptions=t=>{const e=NK(t,100,tm);return t.ease=e.ease,t.duration=Ss(e.duration),t.type="keyframes",t};function C6({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:f}){const p=t[0],m={done:!1,value:p},b=R=>l!==void 0&&R<l||u!==void 0&&R>u,v=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let w=n*e;const S=p+w,k=o===void 0?S:o(S);k!==S&&(w=k-p);const T=R=>-w*Math.exp(-R/r),E=R=>k+T(R),N=R=>{const L=T(R),P=E(R);m.done=Math.abs(L)<=d,m.value=m.done?k:P};let A,_;const j=R=>{b(m.value)&&(A=R,_=tm({keyframes:[m.value,v(m.value)],velocity:mI(E,R,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:f}))};return j(0),{calculatedDuration:null,next:R=>{let L=!1;return!_&&A===void 0&&(L=!0,N(R),j(R)),A!==void 0&&R>=A?_.next(R-A):(!L&&N(R),m)}}}function OK(t,e,n){const r=[],i=n||co.mix||hI,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||_i:e;l=xh(u,l)}r.push(l)}return r}function LK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(a8(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=OK(e,r,i),u=l.length,d=f=>{if(o&&f<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(f<t[p+1]);p++);const m=Rf(t[p],t[p+1],f);return l[p](m)};return n?f=>d(lo(t[0],t[s-1],f)):d}function IK(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Rf(0,e,r);t.push(tn(n,1,i))}}function PK(t){const e=[0];return IK(e,t.length-1),e}function zK(t,e){return t.map(n=>n*e)}function BK(t,e){return t.map(()=>e||rI).splice(0,t.length-1)}function uf({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=XW(r)?r.map(pE):pE(r),s={done:!1,value:e[0]},o=zK(n&&n.length===e.length?n:PK(e),t),l=LK(o,e,{ease:Array.isArray(i)?i:BK(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const VK=t=>t!==null;function b8(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(VK),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const HK={decay:C6,inertia:C6,tween:uf,keyframes:uf,spring:tm};function gI(t){typeof t.type=="string"&&(t.type=HK[t.type])}class v8{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const FK=t=>t/100;class x8 extends v8{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Pr.now()&&this.tick(Pr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;gI(e);const{type:n=uf,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const u=n||uf;u!==uf&&typeof l[0]!="number"&&(this.mixKeyframes=xh(FK,hI(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=y8(d));const{calculatedDuration:f}=d;this.calculatedDuration=f,this.resolvedDuration=f+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:f,repeat:p,repeatType:m,repeatDelay:b,type:v,onUpdate:w,finalKeyframe:S}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const k=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?k<0:k>i;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=r;if(p){const R=Math.min(this.currentTime,i)/l;let L=Math.floor(R),P=R%1;!P&&R>=1&&(P=1),P===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(m==="reverse"?(P=1-P,b&&(P-=b/l)):m==="mirror"&&(N=o)),E=lo(0,1,P)*l}const A=T?{done:!1,value:f[0]}:N.next(E);s&&(A.value=s(A.value));let{done:_}=A;!T&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return j&&v!==C6&&(A.value=b8(f,this.options,S,this.speed)),w&&w(A.value),j&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return Mi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mi(e)}get time(){return Mi(this.currentTime)}set time(e){e=Ss(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=EK,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function qK(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ul=t=>t*180/Math.PI,k6=t=>{const e=ul(Math.atan2(t[1],t[0]));return E6(e)},UK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:k6,rotateZ:k6,skewX:t=>ul(Math.atan(t[1])),skewY:t=>ul(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},E6=t=>(t=t%360,t<0&&(t+=360),t),xE=k6,wE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),SE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),$K={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wE,scaleY:SE,scale:t=>(wE(t)+SE(t))/2,rotateX:t=>E6(ul(Math.atan2(t[6],t[5]))),rotateY:t=>E6(ul(Math.atan2(-t[2],t[0]))),rotateZ:xE,rotate:xE,skewX:t=>ul(Math.atan(t[4])),skewY:t=>ul(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function N6(t){return t.includes("scale")?1:0}function T6(t,e){if(!t||t==="none")return N6(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=$K,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=UK,i=l}if(!i)return N6(e);const s=r[e],o=i[1].split(",").map(WK);return typeof s=="function"?s(o):o[s]}const GK=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return T6(n,e)};function WK(t){return parseFloat(t.trim())}const Ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ju=new Set(Ru),CE=t=>t===Du||t===Ye,KK=new Set(["x","y","z"]),YK=Ru.filter(t=>!KK.has(t));function XK(t){const e=[];return YK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const bl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>T6(e,"x"),y:(t,{transform:e})=>T6(e,"y")};bl.translateX=bl.x;bl.translateY=bl.y;const vl=new Set;let A6=!1,M6=!1,_6=!1;function yI(){if(M6){const t=Array.from(vl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=XK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}M6=!1,A6=!1,vl.forEach(t=>t.complete(_6)),vl.clear()}function bI(){vl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(M6=!0)})}function ZK(){_6=!0,bI(),yI(),_6=!1}class w8{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(vl.add(this),A6||(A6=!0,Gt.read(bI),Gt.resolveKeyframes(yI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i?.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}qK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vl.delete(this)}cancel(){this.state==="scheduled"&&(vl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const JK=t=>t.startsWith("--");function QK(t,e,n){JK(e)?t.style.setProperty(e,n):t.style[e]=n}const eY=l8(()=>window.ScrollTimeline!==void 0),tY={};function nY(t,e){const n=l8(t);return()=>tY[e]??n()}const vI=nY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,kE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jd([0,.65,.55,1]),circOut:Jd([.55,0,1,.45]),backIn:Jd([.31,.01,.66,-.59]),backOut:Jd([.33,1.53,.69,.99])};function xI(t,e){if(t)return typeof t=="function"?vI()?pI(t,e):"ease-out":iI(t)?Jd(t):Array.isArray(t)?t.map(n=>xI(n,e)||kE.easeOut):kE[t]}function rY(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const f={[e]:n};u&&(f.offset=u);const p=xI(l,i);Array.isArray(p)&&(f.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(f,m)}function wI(t){return typeof t=="function"&&"applyToOptions"in t}function iY({type:t,...e}){return wI(t)&&vI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class sY extends v8{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,a8(typeof e.type!="string");const d=iY(e);this.animation=rY(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=b8(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):QK(n,r,f),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Mi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Mi(e)}get time(){return Mi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ss(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&eY()?(this.animation.timeline=e,_i):n(this)}}const SI={anticipate:eI,backInOut:QL,circInOut:nI};function oY(t){return t in SI}function aY(t){typeof t.ease=="string"&&oY(t.ease)&&(t.ease=SI[t.ease])}const EE=10;class lY extends sY{constructor(e){aY(e),gI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new x8({...o,autoplay:!1}),u=Ss(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-EE).value,l.sample(u).value,EE),l.stop()}}const NE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sa.test(t)||t==="0")&&!t.startsWith("url("));function cY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function uY(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=NE(i,e),l=NE(s,e);return!o||!l?!1:cY(t)||(n==="spring"||wI(n))&&r}function D6(t){t.duration=0,t.type="keyframes"}const dY=new Set(["opacity","clipPath","filter","transform"]),fY=l8(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function hY(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return fY()&&n&&dY.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const pY=40;class mY extends v8{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:f,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Pr.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:f,...p},b=f?.KeyframeResolver||w8;this.keyframeResolver=new b(l,(v,w,S)=>this.onKeyframesResolved(v,w,m,!S),u,d,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:f}=r;this.resolvedAt=Pr.now(),uY(e,s,o,l)||((co.instantAnimations||!u)&&f?.(b8(e,r,n)),e[0]=e[e.length-1],D6(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>pY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},b=!d&&hY(m)?new lY({...m,element:m.motionValue.owner.current}):new x8(m);b.finished.then(()=>this.notifyFinished()).catch(_i),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ZK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const gY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yY(t){const e=gY.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function CI(t,e,n=1){const[r,i]=yY(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return $L(o)?parseFloat(o):o}return h8(i)?CI(i,e,n+1):i}function S8(t,e){return t?.[e]??t?.default??t}const kI=new Set(["width","height","top","left","right","bottom",...Ru]),bY={test:t=>t==="auto",parse:t=>t},EI=t=>e=>e.test(t),NI=[Du,Ye,Cs,ea,cK,lK,bY],TE=t=>NI.find(EI(t));function vY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||WL(t):!0}const xY=new Set(["brightness","contrast","saturate","opacity"]);function wY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(p8)||[];if(!r)return t;const i=n.replace(r,"");let s=xY.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const SY=/\b([a-z-]*)\(.*?\)/gu,R6={...Sa,getAnimatableNone:t=>{const e=t.match(SY);return e?e.map(wY).join(" "):t}},AE={...Du,transform:Math.round},CY={rotate:ea,rotateX:ea,rotateY:ea,rotateZ:ea,scale:t0,scaleX:t0,scaleY:t0,scaleZ:t0,skew:ea,skewX:ea,skewY:ea,distance:Ye,translateX:Ye,translateY:Ye,translateZ:Ye,x:Ye,y:Ye,z:Ye,perspective:Ye,transformPerspective:Ye,opacity:jf,originX:mE,originY:mE,originZ:Ye},C8={borderWidth:Ye,borderTopWidth:Ye,borderRightWidth:Ye,borderBottomWidth:Ye,borderLeftWidth:Ye,borderRadius:Ye,radius:Ye,borderTopLeftRadius:Ye,borderTopRightRadius:Ye,borderBottomRightRadius:Ye,borderBottomLeftRadius:Ye,width:Ye,maxWidth:Ye,height:Ye,maxHeight:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,backgroundPositionX:Ye,backgroundPositionY:Ye,...CY,zIndex:AE,fillOpacity:jf,strokeOpacity:jf,numOctaves:AE},kY={...C8,color:kn,backgroundColor:kn,outlineColor:kn,fill:kn,stroke:kn,borderColor:kn,borderTopColor:kn,borderRightColor:kn,borderBottomColor:kn,borderLeftColor:kn,filter:R6,WebkitFilter:R6},TI=t=>kY[t];function AI(t,e){let n=TI(t);return n!==R6&&(n=Sa),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const EY=new Set(["auto","none","0"]);function NY(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!EY.has(s)&&Of(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=AI(n,i)}class TY extends w8{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),h8(d))){const f=CI(d,n.current);f!==void 0&&(e[u]=f),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!kI.has(r)||e.length!==2)return;const[i,s]=e,o=TE(i),l=TE(s);if(o!==l)if(CE(o)&&CE(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else bl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||vY(e[i]))&&r.push(i);r.length&&NY(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=bl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function AY(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const MI=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function _I(t){return GL(t)&&"offsetHeight"in t}const ME=30,MY=t=>!isNaN(parseFloat(t));class _Y{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Pr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new c8);const r=this.events[e].add(n);return e==="change"?()=>{r(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ME)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,ME);return KL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cu(t,e){return new _Y(t,e)}const{schedule:k8}=sI(queueMicrotask,!1),Ui={x:!1,y:!1};function DI(){return Ui.x||Ui.y}function DY(t){return t==="x"||t==="y"?Ui[t]?null:(Ui[t]=!0,()=>{Ui[t]=!1}):Ui.x||Ui.y?null:(Ui.x=Ui.y=!0,()=>{Ui.x=Ui.y=!1})}function RI(t,e){const n=AY(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function _E(t){return!(t.pointerType==="touch"||DI())}function RY(t,e,n={}){const[r,i,s]=RI(t,n),o=l=>{if(!_E(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const f=p=>{_E(p)&&(d(p),u.removeEventListener("pointerleave",f))};u.addEventListener("pointerleave",f,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const jI=(t,e)=>e?t===e?!0:jI(t,e.parentElement):!1,E8=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,jY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OY(t){return jY.has(t.tagName)||t.tabIndex!==-1}const R0=new WeakSet;function DE(t){return e=>{e.key==="Enter"&&t(e)}}function z2(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const LY=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=DE(()=>{if(R0.has(n))return;z2(n,"down");const i=DE(()=>{z2(n,"up")}),s=()=>z2(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function RE(t){return E8(t)&&!DI()}function IY(t,e,n={}){const[r,i,s]=RI(t,n),o=l=>{const u=l.currentTarget;if(!RE(l))return;R0.add(u);const d=e(u,l),f=(b,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),R0.has(u)&&R0.delete(u),RE(b)&&typeof d=="function"&&d(b,{success:v})},p=b=>{f(b,u===window||u===document||n.useGlobalTarget||jI(u,b.target))},m=b=>{f(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),_I(l)&&(l.addEventListener("focus",d=>LY(d,i)),!OY(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function OI(t){return GL(t)&&"ownerSVGElement"in t}function PY(t){return OI(t)&&t.tagName==="svg"}const mr=t=>!!(t&&t.getVelocity),zY=[...NI,kn,Sa],BY=t=>zY.find(EI(t)),N8=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function VY(...t){return e=>{let n=!1;const r=t.map(i=>{const s=jE(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():jE(t[i],null)}}}}function HY(...t){return M.useCallback(VY(...t),t)}class FY extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=_I(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qY({children:t,isPresent:e,anchorX:n,root:r}){const i=M.useId(),s=M.useRef(null),o=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=M.useContext(N8),u=HY(s,t?.ref);return M.useInsertionEffect(()=>{const{width:d,height:f,top:p,left:m,right:b}=o.current;if(e||!s.current||!d||!f)return;const v=n==="left"?`left: ${m}`:`right: ${b}`;s.current.dataset.motionPopId=i;const w=document.createElement("style");l&&(w.nonce=l);const S=r??document.head;return S.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${v}px !important;
            top: ${p}px !important;
          }
        `),()=>{S.contains(w)&&S.removeChild(w)}},[e]),g.jsx(FY,{isPresent:e,childRef:s,sizeRef:o,children:M.cloneElement(t,{ref:u})})}const UY=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=r8($Y),f=M.useId();let p=!0,m=M.useMemo(()=>(p=!1,{id:f,initial:e,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const v of d.values())if(!v)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return s&&p&&(m={...m}),M.useMemo(()=>{d.forEach((b,v)=>d.set(v,!1))},[n]),M.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=g.jsx(qY,{isPresent:n,anchorX:l,root:u,children:t})),g.jsx(wg.Provider,{value:m,children:t})};function $Y(){return new Map}function LI(t=!0){const e=M.useContext(wg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=M.useId();M.useEffect(()=>{if(t)return i(s)},[t]);const o=M.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const n0=t=>t.key||"";function OE(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const uu=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,f]=LI(o),p=M.useMemo(()=>OE(t),[t]),m=o&&!d?[]:p.map(n0),b=M.useRef(!0),v=M.useRef(p),w=r8(()=>new Map),[S,k]=M.useState(p),[T,E]=M.useState(p);UL(()=>{b.current=!1,v.current=p;for(let _=0;_<T.length;_++){const j=n0(T[_]);m.includes(j)?w.delete(j):w.get(j)!==!0&&w.set(j,!1)}},[T,m.length,m.join("-")]);const N=[];if(p!==S){let _=[...p];for(let j=0;j<T.length;j++){const R=T[j],L=n0(R);m.includes(L)||(_.splice(j,0,R),N.push(R))}return s==="wait"&&N.length&&(_=N),E(OE(_)),k(p),null}const{forceRender:A}=M.useContext(n8);return g.jsx(g.Fragment,{children:T.map(_=>{const j=n0(_),R=o&&!d?!1:p===T||m.includes(j),L=()=>{if(w.has(j))w.set(j,!0);else return;let P=!0;w.forEach(F=>{F||(P=!1)}),P&&(A?.(),E(v.current),o&&f?.(),r&&r())};return g.jsx(UY,{isPresent:R,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:L,anchorX:l,children:_},j)})})},II=M.createContext({strict:!1}),LE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},du={};for(const t in LE)du[t]={isEnabled:e=>LE[t].some(n=>!!e[n])};function GY(t){for(const e in t)du[e]={...du[e],...t[e]}}const WY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||WY.has(t)}let PI=t=>!nm(t);function KY(t){typeof t=="function"&&(PI=e=>e.startsWith("on")?!nm(e):t(e))}try{KY(require("@emotion/is-prop-valid").default)}catch{}function YY(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(PI(i)||n===!0&&nm(i)||!e&&!nm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Sg=M.createContext({});function Cg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Lf(t){return typeof t=="string"||Array.isArray(t)}const T8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],A8=["initial",...T8];function kg(t){return Cg(t.animate)||A8.some(e=>Lf(t[e]))}function zI(t){return!!(kg(t)||t.variants)}function XY(t,e){if(kg(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Lf(n)?n:void 0,animate:Lf(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZY(t){const{initial:e,animate:n}=XY(t,M.useContext(Sg));return M.useMemo(()=>({initial:e,animate:n}),[IE(e),IE(n)])}function IE(t){return Array.isArray(t)?t.join(" "):t}const If={};function JY(t){for(const e in t)If[e]=t[e],f8(e)&&(If[e].isCSSVariable=!0)}function BI(t,{layout:e,layoutId:n}){return ju.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!If[t]||t==="opacity")}const QY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eX=Ru.length;function tX(t,e,n){let r="",i=!0;for(let s=0;s<eX;s++){const o=Ru[s],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=MI(l,C8[o]);if(!u){i=!1;const f=QY[o]||o;r+=`${f}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function M8(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(ju.has(u)){o=!0;continue}else if(f8(u)){i[u]=d;continue}else{const f=MI(d,C8[u]);u.startsWith("origin")?(l=!0,s[u]=f):r[u]=f}}if(e.transform||(o||n?r.transform=tX(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:f=0}=s;r.transformOrigin=`${u} ${d} ${f}`}}const _8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function VI(t,e,n){for(const r in e)!mr(e[r])&&!BI(r,n)&&(t[r]=e[r])}function nX({transformTemplate:t},e){return M.useMemo(()=>{const n=_8();return M8(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rX(t,e){const n=t.style||{},r={};return VI(r,n,t),Object.assign(r,nX(t,e)),r}function iX(t,e){const n={},r=rX(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const sX={offset:"stroke-dashoffset",array:"stroke-dasharray"},oX={offset:"strokeDashoffset",array:"strokeDasharray"};function aX(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?sX:oX;t[s.offset]=Ye.transform(-r);const o=Ye.transform(e),l=Ye.transform(n);t[s.array]=`${o} ${l}`}function HI(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,f){if(M8(t,l,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=f?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&aX(p,i,s,o,!1)}const FI=()=>({..._8(),attrs:{}}),qI=t=>typeof t=="string"&&t.toLowerCase()==="svg";function lX(t,e,n,r){const i=M.useMemo(()=>{const s=FI();return HI(s,e,qI(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};VI(s,t.style,t),i.style={...s,...i.style}}return i}const cX=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function D8(t){return typeof t!="string"||t.includes("-")?!1:!!(cX.indexOf(t)>-1||/[A-Z]/u.test(t))}function uX(t,e,n,{latestValues:r},i,s=!1){const l=(D8(t)?lX:iX)(e,r,i,t),u=YY(e,typeof t=="string",s),d=t!==M.Fragment?{...u,...l,ref:n}:{},{children:f}=e,p=M.useMemo(()=>mr(f)?f.get():f,[f]);return M.createElement(t,{...d,children:p})}function PE(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function R8(t,e,n,r){if(typeof e=="function"){const[i,s]=PE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=PE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function j0(t){return mr(t)?t.get():t}function dX({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:fX(n,r,i,t),renderState:e()}}function fX(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=j0(s[m]);let{initial:o,animate:l}=t;const u=kg(t),d=zI(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let f=n?n.initial===!1:!1;f=f||o===!1;const p=f?l:o;if(p&&typeof p!="boolean"&&!Cg(p)){const m=Array.isArray(p)?p:[p];for(let b=0;b<m.length;b++){const v=R8(t,m[b]);if(v){const{transitionEnd:w,transition:S,...k}=v;for(const T in k){let E=k[T];if(Array.isArray(E)){const N=f?E.length-1:0;E=E[N]}E!==null&&(i[T]=E)}for(const T in w)i[T]=w[T]}}}return i}const UI=t=>(e,n)=>{const r=M.useContext(Sg),i=M.useContext(wg),s=()=>dX(t,e,r,i);return n?s():r8(s)};function j8(t,e,n){const{style:r}=t,i={};for(const s in r)(mr(r[s])||e.style&&mr(e.style[s])||BI(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const hX=UI({scrapeMotionValuesFromProps:j8,createRenderState:_8});function $I(t,e,n){const r=j8(t,e,n);for(const i in t)if(mr(t[i])||mr(e[i])){const s=Ru.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const pX=UI({scrapeMotionValuesFromProps:$I,createRenderState:FI}),mX=Symbol.for("motionComponentSymbol");function Kc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function gX(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Kc(n)&&(n.current=r))},[e])}const O8=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yX="framerAppearId",GI="data-"+O8(yX),WI=M.createContext({});function bX(t,e,n,r,i){const{visualElement:s}=M.useContext(Sg),o=M.useContext(II),l=M.useContext(wg),u=M.useContext(N8).reducedMotion,d=M.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,p=M.useContext(WI);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&vX(d.current,n,i,p);const m=M.useRef(!1);M.useInsertionEffect(()=>{f&&m.current&&f.update(n,l)});const b=n[GI],v=M.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return UL(()=>{f&&(m.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),v.current&&f.animationState&&f.animationState.animateChanges())}),M.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),v.current=!1),f.enteringChildren=void 0)}),f}function vX(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:KI(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Kc(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:u,layoutRoot:d})}function KI(t){if(t)return t.options.allowProjection!==!1?t.projection:KI(t.parent)}function B2(t,{forwardMotionProps:e=!1}={},n,r){n&&GY(n);const i=D8(t)?pX:hX;function s(l,u){let d;const f={...M.useContext(N8),...l,layoutId:xX(l)},{isStatic:p}=f,m=ZY(l),b=i(l,p);if(!p&&i8){wX();const v=SX(f);d=v.MeasureLayout,m.visualElement=bX(t,b,f,r,v.ProjectionNode)}return g.jsxs(Sg.Provider,{value:m,children:[d&&m.visualElement?g.jsx(d,{visualElement:m.visualElement,...f}):null,uX(t,l,gX(b,m.visualElement,u),b,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=M.forwardRef(s);return o[mX]=t,o}function xX({layoutId:t}){const e=M.useContext(n8).id;return e&&t!==void 0?e+"-"+t:t}function wX(t,e){M.useContext(II).strict}function SX(t){const{drag:e,layout:n}=du;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function CX(t,e){if(typeof Proxy>"u")return B2;const n=new Map,r=(s,o)=>B2(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,B2(o,void 0,t,e)),n.get(o))})}function YI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function kX({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function EX(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function V2(t){return t===void 0||t===1}function j6({scale:t,scaleX:e,scaleY:n}){return!V2(t)||!V2(e)||!V2(n)}function sl(t){return j6(t)||XI(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function XI(t){return zE(t.x)||zE(t.y)}function zE(t){return t&&t!=="0%"}function rm(t,e,n){const r=t-n,i=e*r;return n+i}function BE(t,e,n,r,i){return i!==void 0&&(t=rm(t,i,r)),rm(t,n,r)+e}function O6(t,e=0,n=1,r,i){t.min=BE(t.min,e,n,r,i),t.max=BE(t.max,e,n,r,i)}function ZI(t,{x:e,y:n}){O6(t.x,e.translate,e.scale,e.originPoint),O6(t.y,n.translate,n.scale,n.originPoint)}const VE=.999999999999,HE=1.0000000000001;function NX(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xc(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ZI(t,o)),r&&sl(s.latestValues)&&Xc(t,s.latestValues))}e.x<HE&&e.x>VE&&(e.x=1),e.y<HE&&e.y>VE&&(e.y=1)}function Yc(t,e){t.min=t.min+e,t.max=t.max+e}function FE(t,e,n,r,i=.5){const s=tn(t.min,t.max,i);O6(t,e,n,s,r)}function Xc(t,e){FE(t.x,e.x,e.scaleX,e.scale,e.originX),FE(t.y,e.y,e.scaleY,e.scale,e.originY)}function JI(t,e){return YI(EX(t.getBoundingClientRect(),e))}function TX(t,e,n){const r=JI(t,n),{scroll:i}=e;return i&&(Yc(r.x,i.offset.x),Yc(r.y,i.offset.y)),r}const qE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zc=()=>({x:qE(),y:qE()}),UE=()=>({min:0,max:0}),hn=()=>({x:UE(),y:UE()}),L6={current:null},QI={current:!1};function AX(){if(QI.current=!0,!!i8)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>L6.current=t.matches;t.addEventListener("change",e),e()}else L6.current=!1}const MX=new WeakMap;function _X(t,e,n){for(const r in e){const i=e[r],s=n[r];if(mr(i))t.addValue(r,i);else if(mr(s))t.addValue(r,cu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,cu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const $E=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DX{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=w8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Pr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Gt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=kg(n),this.isVariantNode=zI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const b=p[m];u[m]!==void 0&&mr(b)&&b.set(u[m])}}mount(e){this.current=e,MX.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),QI.current||AX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:L6.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),wa(this.notifyUpdate),wa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ju.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in du){const n=du[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):hn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<$E.length;r++){const i=$E[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=_X(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=cu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($L(r)||WL(r))?r=parseFloat(r):!BY(r)&&Sa.test(n)&&(r=AI(e,n)),this.setBaseTarget(e,mr(r)?r.get():r)),mr(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=R8(this.props,n,this.presenceContext?.custom);s&&(r=s[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!mr(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new c8),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){k8.render(this.render)}}class eP extends DX{constructor(){super(...arguments),this.KeyframeResolver=TY}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mr(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function tP(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function RX(t){return window.getComputedStyle(t)}class jX extends eP{constructor(){super(...arguments),this.type="html",this.renderInstance=tP}readValueFromInstance(e,n){if(ju.has(n))return this.projection?.isProjecting?N6(n):GK(e,n);{const r=RX(e),i=(f8(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return JI(e,n)}build(e,n,r){M8(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return j8(e,n,r)}}const nP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function OX(t,e,n,r){tP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(nP.has(i)?i:O8(i),e.attrs[i])}class LX extends eP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=hn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ju.has(n)){const r=TI(n);return r&&r.default||0}return n=nP.has(n)?n:O8(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return $I(e,n,r)}build(e,n,r){HI(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){OX(e,n,r,i)}mount(e){this.isSVGTag=qI(e.tagName),super.mount(e)}}const IX=(t,e)=>D8(t)?new LX(e):new jX(e,{allowProjection:t!==M.Fragment});function tu(t,e,n){const r=t.getProps();return R8(r,e,n!==void 0?n:r.custom,t)}const I6=t=>Array.isArray(t);function PX(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,cu(n))}function zX(t){return I6(t)?t[t.length-1]||0:t}function BX(t,e){const n=tu(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=zX(s[o]);PX(t,o,l)}}function VX(t){return!!(mr(t)&&t.add)}function P6(t,e){const n=t.getValue("willChange");if(VX(n))return n.add(e);if(!n&&co.WillChange){const r=new co.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function rP(t){return t.props[GI]}const HX=t=>t!==null;function FX(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(HX),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const qX={type:"spring",stiffness:500,damping:25,restSpeed:10},UX=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$X={type:"keyframes",duration:.8},GX={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WX=(t,{keyframes:e})=>e.length>2?$X:ju.has(t)?t.startsWith("scale")?UX(e[1]):qX:GX;function KX({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...f}){return!!Object.keys(f).length}const L8=(t,e,n,r={},i,s)=>o=>{const l=S8(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Ss(u);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};KX(l)||Object.assign(f,WX(t,f)),f.duration&&(f.duration=Ss(f.duration)),f.repeatDelay&&(f.repeatDelay=Ss(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(D6(f),f.delay===0&&(p=!0)),(co.instantAnimations||co.skipAnimations)&&(p=!0,D6(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const m=FX(f.keyframes,l);if(m!==void 0){Gt.update(()=>{f.onUpdate(m),f.onComplete()});return}}return l.isSync?new x8(f):new mY(f)};function YX({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function iP(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,t.latestValues[f]??null),m=l[f];if(m===void 0||d&&YX(d,f))continue;const b={delay:n,...S8(s||{},f)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===v&&!b.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const k=rP(t);if(k){const T=window.MotionHandoffAnimation(k,f,Gt);T!==null&&(b.startTime=T,w=!0)}}P6(t,f),p.start(L8(f,p,m,t.shouldReduceMotion&&kI.has(f)?{type:!1}:b,t,w));const S=p.animation;S&&u.push(S)}return o&&Promise.all(u).then(()=>{Gt.update(()=>{o&&BX(t,o)})}),u}function sP(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,f)=>d.sortNodePosition(f)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function z6(t,e,n={}){const r=tu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(iP(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=i;return XX(t,e,u,d,f,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function XX(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),l.push(z6(u,e,{...o,delay:n+(typeof r=="function"?0:r)+sP(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function ZX(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>z6(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=z6(t,e,n);else{const i=typeof e=="function"?tu(t,e,n.custom):e;r=Promise.all(iP(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function oP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const JX=A8.length;function aP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?aP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<JX;n++){const r=A8[n],i=t.props[r];(Lf(i)||i===!1)&&(e[r]=i)}return e}const QX=[...T8].reverse(),eZ=T8.length;function tZ(t){return e=>Promise.all(e.map(({animation:n,options:r})=>ZX(t,n,r)))}function nZ(t){let e=tZ(t),n=GE(),r=!0;const i=u=>(d,f)=>{const p=tu(t,f,u==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:b,...v}=p;d={...d,...v,...b}}return d};function s(u){e=u(t)}function o(u){const{props:d}=t,f=aP(t.parent)||{},p=[],m=new Set;let b={},v=1/0;for(let S=0;S<eZ;S++){const k=QX[S],T=n[k],E=d[k]!==void 0?d[k]:f[k],N=Lf(E),A=k===u?T.isActive:null;A===!1&&(v=S);let _=E===f[k]&&E!==d[k]&&N;if(_&&r&&t.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...b},!T.isActive&&A===null||!E&&!T.prevProp||Cg(E)||typeof E=="boolean")continue;const j=rZ(T.prevProp,E);let R=j||k===u&&T.isActive&&!_&&N||S>v&&N,L=!1;const P=Array.isArray(E)?E:[E];let F=P.reduce(i(k),{});A===!1&&(F={});const{prevResolvedValues:V={}}=T,q={...V,...F},I=H=>{R=!0,m.has(H)&&(L=!0,m.delete(H)),T.needsAnimating[H]=!0;const G=t.getValue(H);G&&(G.liveStyle=!1)};for(const H in q){const G=F[H],ee=V[H];if(b.hasOwnProperty(H))continue;let B=!1;I6(G)&&I6(ee)?B=!oP(G,ee):B=G!==ee,B?G!=null?I(H):m.add(H):G!==void 0&&m.has(H)?I(H):T.protectedKeys[H]=!0}T.prevProp=E,T.prevResolvedValues=F,T.isActive&&(b={...b,...F}),r&&t.blockInitialAnimation&&(R=!1);const U=_&&j;R&&(!U||L)&&p.push(...P.map(H=>{const G={type:k};if(typeof H=="string"&&r&&!U&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,B=tu(ee,H);if(ee.enteringChildren&&B){const{delayChildren:W}=B.transition||{};G.delay=sP(ee.enteringChildren,t,W)}}return{animation:H,options:G}}))}if(m.size){const S={};if(typeof d.initial!="boolean"){const k=tu(t,Array.isArray(d.initial)?d.initial[0]:d.initial);k&&k.transition&&(S.transition=k.transition)}m.forEach(k=>{const T=t.getBaseTarget(k),E=t.getValue(k);E&&(E.liveStyle=!0),S[k]=T??null}),p.push({animation:S})}let w=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const f=o(u);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=GE(),r=!0}}}function rZ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!oP(e,t):!1}function nl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GE(){return{animate:nl(!0),whileInView:nl(),whileHover:nl(),whileTap:nl(),whileDrag:nl(),whileFocus:nl(),exit:nl()}}class Ma{constructor(e){this.isMounted=!1,this.node=e}update(){}}class iZ extends Ma{constructor(e){super(e),e.animationState||(e.animationState=nZ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let sZ=0;class oZ extends Ma{constructor(){super(...arguments),this.id=sZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const aZ={animation:{Feature:iZ},exit:{Feature:oZ}};function Pf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ch(t){return{point:{x:t.pageX,y:t.pageY}}}const lZ=t=>e=>E8(e)&&t(e,Ch(e));function df(t,e,n,r){return Pf(t,e,lZ(n),r)}const lP=1e-4,cZ=1-lP,uZ=1+lP,cP=.01,dZ=0-cP,fZ=0+cP;function kr(t){return t.max-t.min}function hZ(t,e,n){return Math.abs(t-e)<=n}function WE(t,e,n,r=.5){t.origin=r,t.originPoint=tn(e.min,e.max,t.origin),t.scale=kr(n)/kr(e),t.translate=tn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cZ&&t.scale<=uZ||isNaN(t.scale))&&(t.scale=1),(t.translate>=dZ&&t.translate<=fZ||isNaN(t.translate))&&(t.translate=0)}function ff(t,e,n,r){WE(t.x,e.x,n.x,r?r.originX:void 0),WE(t.y,e.y,n.y,r?r.originY:void 0)}function KE(t,e,n){t.min=n.min+e.min,t.max=t.min+kr(e)}function pZ(t,e,n){KE(t.x,e.x,n.x),KE(t.y,e.y,n.y)}function YE(t,e,n){t.min=e.min-n.min,t.max=t.min+kr(e)}function hf(t,e,n){YE(t.x,e.x,n.x),YE(t.y,e.y,n.y)}function Ci(t){return[t("x"),t("y")]}const uP=({current:t})=>t?t.ownerDocument.defaultView:null,XE=(t,e)=>Math.abs(t-e);function mZ(t,e){const n=XE(t.x,e.x),r=XE(t.y,e.y);return Math.sqrt(n**2+r**2)}class dP{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=F2(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,v=mZ(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!v)return;const{point:w}=m,{timestamp:S}=tr;this.history.push({...w,timestamp:S});const{onStart:k,onMove:T}=this.handlers;b||(k&&k(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=H2(b,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=F2(m.type==="pointercancel"?this.lastMoveEventInfo:H2(b,this.transformPagePoint),this.history);this.startEvent&&v&&v(m,k),w&&w(m,k)},!E8(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Ch(e),u=H2(l,this.transformPagePoint),{point:d}=u,{timestamp:f}=tr;this.history=[{...d,timestamp:f}];const{onSessionStart:p}=n;p&&p(e,F2(u,this.history)),this.removeListeners=xh(df(this.contextWindow,"pointermove",this.handlePointerMove),df(this.contextWindow,"pointerup",this.handlePointerUp),df(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wa(this.updatePoint)}}function H2(t,e){return e?{point:e(t.point)}:t}function ZE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function F2({point:t},e){return{point:t,delta:ZE(t,fP(e)),offset:ZE(t,gZ(e)),velocity:yZ(e,.1)}}function gZ(t){return t[0]}function fP(t){return t[t.length-1]}function yZ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=fP(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ss(e)));)n--;if(!r)return{x:0,y:0};const s=Mi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function bZ(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?tn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?tn(n,t,r.max):Math.min(t,n)),t}function JE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vZ(t,{top:e,left:n,bottom:r,right:i}){return{x:JE(t.x,n,i),y:JE(t.y,e,r)}}function QE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function xZ(t,e){return{x:QE(t.x,e.x),y:QE(t.y,e.y)}}function wZ(t,e){let n=.5;const r=kr(t),i=kr(e);return i>r?n=Rf(e.min,e.max-r,t.min):r>i&&(n=Rf(t.min,t.max-i,e.min)),lo(0,1,n)}function SZ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const B6=.35;function CZ(t=B6){return t===!1?t=0:t===!0&&(t=B6),{x:eN(t,"left","right"),y:eN(t,"top","bottom")}}function eN(t,e,n){return{min:tN(t,e),max:tN(t,n)}}function tN(t,e){return typeof t=="number"?t:t[e]||0}const kZ=new WeakMap;class EZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=hn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ch(p).point)},o=(p,m)=>{const{drag:b,dragPropagation:v,onDragStart:w}=this.getProps();if(b&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=DY(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ci(k=>{let T=this.getAxisMotionValue(k).get()||0;if(Cs.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[k];N&&(T=kr(N)*(parseFloat(T)/100))}}this.originPoint[k]=T}),w&&Gt.postRender(()=>w(p,m)),P6(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:v,onDirectionLock:w,onDrag:S}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:k}=m;if(v&&this.currentDirection===null){this.currentDirection=NZ(k),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,k),this.updateAxis("y",m.point,k),this.visualElement.render(),S&&S(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ci(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new dP(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:uP(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Gt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!r0(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=bZ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&Kc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=vZ(r.layoutBox,e):this.constraints=!1,this.elastic=CZ(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ci(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=SZ(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Kc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=TX(r,i.root,this.visualElement.getTransformPagePoint());let o=xZ(i.layout.layoutBox,s);if(n){const l=n(kX(o));this.hasMutatedConstraints=!!l,l&&(o=YI(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Ci(f=>{if(!r0(f,n,this.currentDirection))return;let p=u&&u[f]||{};o&&(p={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,v={type:"inertia",velocity:r?e[f]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,v)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return P6(this.visualElement,e),r.start(L8(e,r,0,n,this.visualElement,!1))}stopAnimation(){Ci(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ci(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Ci(n=>{const{drag:r}=this.getProps();if(!r0(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-tn(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Kc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ci(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=wZ({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Ci(o=>{if(!r0(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(tn(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;kZ.set(this.visualElement,this);const e=this.visualElement.current,n=df(e,"pointerdown",u=>{const{drag:d,dragListener:f=!0}=this.getProps();d&&f&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Kc(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Gt.read(r);const o=Pf(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ci(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=u[f].translate,p.set(p.get()+u[f].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=B6,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function r0(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function NZ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class TZ extends Ma{constructor(e){super(e),this.removeGroupControls=_i,this.removeListeners=_i,this.controls=new EZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_i}unmount(){this.removeGroupControls(),this.removeListeners()}}const nN=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class AZ extends Ma{constructor(){super(...arguments),this.removePointerDownListener=_i}onPointerDown(e){this.session=new dP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:nN(e),onStart:nN(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Gt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=df(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const O0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Hd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ye.test(t))t=parseFloat(t);else return t;const n=rN(t,e.target.x),r=rN(t,e.target.y);return`${n}% ${r}%`}},MZ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Sa.parse(t);if(i.length>5)return r;const s=Sa.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const d=tn(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let q2=!1;class _Z extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;JY(DZ),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),q2&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),O0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,q2=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Gt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),k8.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;q2=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hP(t){const[e,n]=LI(),r=M.useContext(n8);return g.jsx(_Z,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(WI),isPresent:e,safeToRemove:n})}const DZ={borderRadius:{...Hd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hd,borderTopRightRadius:Hd,borderBottomLeftRadius:Hd,borderBottomRightRadius:Hd,boxShadow:MZ};function RZ(t,e,n){const r=mr(t)?t:cu(t);return r.start(L8("",r,e,n)),r.animation}const jZ=(t,e)=>t.depth-e.depth;class OZ{constructor(){this.children=[],this.isDirty=!1}add(e){s8(this.children,e),this.isDirty=!0}remove(e){o8(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jZ),this.isDirty=!1,this.children.forEach(e)}}function LZ(t,e){const n=Pr.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(wa(r),t(s-e))};return Gt.setup(r,!0),()=>wa(r)}const pP=["TopLeft","TopRight","BottomLeft","BottomRight"],IZ=pP.length,iN=t=>typeof t=="string"?parseFloat(t):t,sN=t=>typeof t=="number"||Ye.test(t);function PZ(t,e,n,r,i,s){i?(t.opacity=tn(0,n.opacity??1,zZ(r)),t.opacityExit=tn(e.opacity??1,0,BZ(r))):s&&(t.opacity=tn(e.opacity??1,n.opacity??1,r));for(let o=0;o<IZ;o++){const l=`border${pP[o]}Radius`;let u=oN(e,l),d=oN(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||sN(u)===sN(d)?(t[l]=Math.max(tn(iN(u),iN(d),r),0),(Cs.test(d)||Cs.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=tn(e.rotate||0,n.rotate||0,r))}function oN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const zZ=mP(0,.5,tI),BZ=mP(.5,.95,_i);function mP(t,e,n){return r=>r<t?0:r>e?1:n(Rf(t,e,r))}function aN(t,e){t.min=e.min,t.max=e.max}function wi(t,e){aN(t.x,e.x),aN(t.y,e.y)}function lN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function cN(t,e,n,r,i){return t-=e,t=rm(t,1/n,r),i!==void 0&&(t=rm(t,1/i,r)),t}function VZ(t,e=0,n=1,r=.5,i,s=t,o=t){if(Cs.test(e)&&(e=parseFloat(e),e=tn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=tn(s.min,s.max,r);t===s&&(l-=e),t.min=cN(t.min,e,n,l,i),t.max=cN(t.max,e,n,l,i)}function uN(t,e,[n,r,i],s,o){VZ(t,e[n],e[r],e[i],e.scale,s,o)}const HZ=["x","scaleX","originX"],FZ=["y","scaleY","originY"];function dN(t,e,n,r){uN(t.x,e,HZ,n?n.x:void 0,r?r.x:void 0),uN(t.y,e,FZ,n?n.y:void 0,r?r.y:void 0)}function fN(t){return t.translate===0&&t.scale===1}function gP(t){return fN(t.x)&&fN(t.y)}function hN(t,e){return t.min===e.min&&t.max===e.max}function qZ(t,e){return hN(t.x,e.x)&&hN(t.y,e.y)}function pN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function yP(t,e){return pN(t.x,e.x)&&pN(t.y,e.y)}function mN(t){return kr(t.x)/kr(t.y)}function gN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class UZ{constructor(){this.members=[]}add(e){s8(this.members,e),e.scheduleRender()}remove(e){if(o8(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $Z(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:f,rotateX:p,rotateY:m,skewX:b,skewY:v}=n;d&&(r=`perspective(${d}px) ${r}`),f&&(r+=`rotate(${f}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const U2=["","X","Y","Z"],GZ=1e3;let WZ=0;function $2(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function bP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=rP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&bP(r)}function vP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e?.()){this.id=WZ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XZ),this.nodes.forEach(eJ),this.nodes.forEach(tJ),this.nodes.forEach(ZZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new OZ)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new c8),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=OI(o)&&!PY(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),t){let f,p=0;const m=()=>this.root.updateBlockedByResize=!1;Gt.read(()=>{p=window.innerWidth}),t(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,f&&f(),f=LZ(m,250),O0.hasAnimatedSinceResize&&(O0.hasAnimatedSinceResize=!1,this.nodes.forEach(vN)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||oJ,{onLayoutAnimationStart:w,onLayoutAnimationComplete:S}=d.getProps(),k=!this.targetLayout||!yP(this.targetLayout,b),T=!p&&m;if(this.options.layoutRoot||this.resumeFrom||T||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...S8(v,"layout"),onPlay:w,onComplete:S};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(f,T)}else p||vN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nJ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QZ),this.nodes.forEach(KZ),this.nodes.forEach(YZ)):this.nodes.forEach(bN),this.clearAllSnapshots();const l=Pr.now();tr.delta=lo(0,1e3/60,l-tr.timestamp),tr.timestamp=l,tr.isProcessing=!0,j2.update.process(tr),j2.preRender.process(tr),j2.render.process(tr),tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,k8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JZ),this.sharedNodes.forEach(rJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kr(this.snapshot.measuredBox.x)&&!kr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=hn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!gP(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,f=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||sl(this.latestValues)||f)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),aJ(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return hn();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(lJ))){const{scroll:d}=this.root;d&&(Yc(l.x,d.offset.x),Yc(l.y,d.offset.y))}return l}removeElementScroll(o){const l=hn();if(wi(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&wi(l,o),Yc(l.x,f.offset.x),Yc(l.y,f.offset.y))}return l}applyTransform(o,l=!1){const u=hn();wi(u,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Xc(u,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),sl(f.latestValues)&&Xc(u,f.latestValues)}return sl(this.latestValues)&&Xc(u,this.latestValues),u}removeTransform(o){const l=hn();wi(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!sl(d.latestValues))continue;j6(d.latestValues)&&d.updateSnapshot();const f=hn(),p=d.measurePageBox();wi(f,p),dN(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,f)}return sl(this.latestValues)&&dN(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=tr.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),hf(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=hn(),this.targetWithTransforms=hn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wi(this.target,this.layout.layoutBox),ZI(this.target,this.targetDelta)):wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=hn(),this.relativeTargetOrigin=hn(),hf(this.relativeTargetOrigin,this.target,m.target),wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||j6(this.parent.latestValues)||XI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===tr.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;wi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;NX(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=hn());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(lN(this.prevProjectionDelta.x,this.projectionDelta.x),lN(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!gN(this.projectionDelta.x,this.prevProjectionDelta.x)||!gN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zc(),this.projectionDelta=Zc(),this.projectionDeltaWithTransform=Zc()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},f={...this.latestValues},p=Zc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=hn(),b=u?u.source:void 0,v=this.layout?this.layout.source:void 0,w=b!==v,S=this.getStack(),k=!S||S.members.length<=1,T=!!(w&&!k&&this.options.crossfade===!0&&!this.path.some(sJ));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const A=N/1e3;xN(p.x,o.x,A),xN(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iJ(this.relativeTarget,this.relativeTargetOrigin,m,A),E&&qZ(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=hn()),wi(E,this.relativeTarget)),w&&(this.animationValues=f,PZ(f,d,this.latestValues,A,T,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{O0.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cu(0)),this.currentAnimation=RZ(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GZ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:f}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&xP(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||hn();const p=kr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=kr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}wi(l,u),Xc(l,f),ff(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new UZ),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&$2("z",o,d,this.animationValues);for(let f=0;f<U2.length;f++)$2(`rotate${U2[f]}`,o,d,this.animationValues),$2(`skew${U2[f]}`,o,d,this.animationValues);o.render();for(const f in d)o.setStaticValue(f,d[f]),this.animationValues&&(this.animationValues[f]=d[f]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=j0(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=j0(l?.pointerEvents)||""),this.hasProjected&&!sl(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const f=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=$Z(this.projectionDeltaWithTransform,this.treeScale,f);u&&(p=u(f,p)),o.transform=p;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:o.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in If){if(f[v]===void 0)continue;const{correct:w,applyTo:S,isCSSVariable:k}=If[v],T=p==="none"?f[v]:w(f[v],d);if(S){const E=S.length;for(let N=0;N<E;N++)o[S[N]]=T}else k?this.options.visualElement.renderState.vars[v]=T:o[v]=T}this.options.layoutId&&(o.pointerEvents=d===this?j0(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(yN),this.root.sharedNodes.clear()}}}function KZ(t){t.updateLayout()}function YZ(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,s=e.source!==t.layout.source;i==="size"?Ci(f=>{const p=s?e.measuredBox[f]:e.layoutBox[f],m=kr(p);p.min=n[f].min,p.max=p.min+m}):xP(i,e.layoutBox,n)&&Ci(f=>{const p=s?e.measuredBox[f]:e.layoutBox[f],m=kr(n[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const o=Zc();ff(o,n,e.layoutBox);const l=Zc();s?ff(l,t.applyTransform(r,!0),e.measuredBox):ff(l,n,e.layoutBox);const u=!gP(o);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const b=hn();hf(b,e.layoutBox,p.layoutBox);const v=hn();hf(v,n,m.layoutBox),yP(b,v)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=b,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function XZ(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ZZ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function JZ(t){t.clearSnapshot()}function yN(t){t.clearMeasurements()}function bN(t){t.isLayoutDirty=!1}function QZ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eJ(t){t.resolveTargetDelta()}function tJ(t){t.calcProjection()}function nJ(t){t.resetSkewAndRotation()}function rJ(t){t.removeLeadSnapshot()}function xN(t,e,n){t.translate=tn(e.translate,0,n),t.scale=tn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wN(t,e,n,r){t.min=tn(e.min,n.min,r),t.max=tn(e.max,n.max,r)}function iJ(t,e,n,r){wN(t.x,e.x,n.x,r),wN(t.y,e.y,n.y,r)}function sJ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oJ={duration:.45,ease:[.4,0,.1,1]},SN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),CN=SN("applewebkit/")&&!SN("chrome/")?Math.round:_i;function kN(t){t.min=CN(t.min),t.max=CN(t.max)}function aJ(t){kN(t.x),kN(t.y)}function xP(t,e,n){return t==="position"||t==="preserve-aspect"&&!hZ(mN(e),mN(n),.2)}function lJ(t){return t!==t.root&&t.scroll?.wasRoot}const cJ=vP({attachResizeListener:(t,e)=>Pf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),G2={current:void 0},wP=vP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!G2.current){const t=new cJ({});t.mount(window),t.setOptions({layoutScroll:!0}),G2.current=t}return G2.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uJ={pan:{Feature:AZ},drag:{Feature:TZ,ProjectionNode:wP,MeasureLayout:hP}};function EN(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Gt.postRender(()=>s(e,Ch(e)))}class dJ extends Ma{mount(){const{current:e}=this.node;e&&(this.unmount=RY(e,(n,r)=>(EN(this.node,r,"Start"),i=>EN(this.node,i,"End"))))}unmount(){}}class fJ extends Ma{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xh(Pf(this.node.current,"focus",()=>this.onFocus()),Pf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NN(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Gt.postRender(()=>s(e,Ch(e)))}class hJ extends Ma{mount(){const{current:e}=this.node;e&&(this.unmount=IY(e,(n,r)=>(NN(this.node,r,"Start"),(i,{success:s})=>NN(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const V6=new WeakMap,W2=new WeakMap,pJ=t=>{const e=V6.get(t.target);e&&e(t)},mJ=t=>{t.forEach(pJ)};function gJ({root:t,...e}){const n=t||document;W2.has(n)||W2.set(n,{});const r=W2.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(mJ,{root:t,...e})),r[i]}function yJ(t,e,n){const r=gJ(e);return V6.set(t,n),r.observe(t),()=>{V6.delete(t),r.unobserve(t)}}const bJ={some:0,all:1};class vJ extends Ma{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bJ[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),m=d?f:p;m&&m(u)};return yJ(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(xJ(e,n))&&this.startObserver()}unmount(){}}function xJ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const wJ={inView:{Feature:vJ},tap:{Feature:hJ},focus:{Feature:fJ},hover:{Feature:dJ}},SJ={layout:{ProjectionNode:wP,MeasureLayout:hP}},CJ={...aZ,...wJ,...uJ,...SJ},gt=CX(CJ,IX);function kJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(t)}function fu(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function Eg(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(t)}function EJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"},child:[]}]})(t)}function NJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"},child:[]}]})(t)}function H6(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(t)}function TJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(t)}function AJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(t)}function MJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(t)}function _J(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 20h20v-4H2v4zm2-3h2v2H4v-2zM2 4v4h20V4H2zm4 3H4V5h2v2zm-4 7h20v-4H2v4zm2-3h2v2H4v-2z"},child:[]}]})(t)}function DJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(t)}function RJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(t)}function jJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(t)}function OJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(t)}function LJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(t)}function IJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(t)}function PJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(t)}function zJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(t)}function BJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(t)}function VJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"},child:[]}]})(t)}function HJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function FJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function qJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m17 16-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"},child:[]}]})(t)}function UJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.5 1h-8A2.5 2.5 0 0 0 5 3.5v17A2.5 2.5 0 0 0 7.5 23h8a2.5 2.5 0 0 0 2.5-2.5v-17A2.5 2.5 0 0 0 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z"},child:[]}]})(t)}function $J(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m20.2 5.9.8-.8C19.6 3.7 17.8 3 16 3s-3.6.7-5 2.1l.8.8C13 4.8 14.5 4.2 16 4.2s3 .6 4.2 1.7zm-.9.8c-.9-.9-2.1-1.4-3.3-1.4s-2.4.5-3.3 1.4l.8.8c.7-.7 1.6-1 2.5-1 .9 0 1.8.3 2.5 1l.8-.8zM19 13h-2V9h-2v4H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2zM8 18H6v-2h2v2zm3.5 0h-2v-2h2v2zm3.5 0h-2v-2h2v2z"},child:[]}]})(t)}function GJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"},child:[]}]})(t)}function WJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z"},child:[]}]})(t)}function hu(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(t)}function KJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(t)}function SP(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(t)}function YJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(t)}function XJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(t)}function ZJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"},child:[]}]})(t)}function JJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(t)}function QJ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 .01c0-.01 0-.01 0 0L0 0v24h24V.01zM0 0h24v24H0V0zm0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4a9.793 9.793 0 0 0-4.49-2.56l3.53 3.53.96-.97zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24A9.684 9.684 0 0 0 5 13v.01L6.99 15a7.042 7.042 0 0 1 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3a4.237 4.237 0 0 0-6 0z"},child:[]}]})(t)}function eQ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(t)}function tQ(t){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(t)}const Ng=({isOpen:t,onClose:e,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=M.useState("login"),[l,u]=M.useState(""),[d,f]=M.useState(""),[p,m]=M.useState(""),[b,v]=M.useState(""),[w,S]=M.useState(!1),[k,T]=M.useState(!1);M.useEffect(()=>{const _=()=>{const L=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");T(L)};_();const j=window.matchMedia("(prefers-color-scheme: dark)"),R=new MutationObserver(_);return j.addEventListener("change",_),R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{j.removeEventListener("change",_),R.disconnect()}},[]);const E=M.useCallback(async _=>{if(i){S(!0),v("");try{await i(_.credential),e()}catch(j){v(j instanceof Error?j.message:"Google authentication failed")}finally{S(!1)}}},[i,e]);M.useEffect(()=>{if(!t||!i)return;const _=document.createElement("script");return _.src="https://accounts.google.com/gsi/client",_.async=!0,_.defer=!0,document.body.appendChild(_),_.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:k?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(_)&&document.body.removeChild(_)}},[t,s,i,E,k]);const N=async _=>{_.preventDefault(),v(""),S(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),e(),u(""),f(""),m("")}catch(j){v(j instanceof Error?j.message:"Authentication failed")}finally{S(!1)}},A=()=>{o(_=>_==="login"?"signup":"login"),v("")};return t?g.jsx(uu,{children:t&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:g.jsxs(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:_=>_.stopPropagation(),children:[g.jsxs("div",{className:"flex items-center justify-between mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),g.jsx("button",{type:"button",onClick:e,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:g.jsx(hu,{className:"h-5 w-5"})})]}),g.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),b&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:b}),i&&g.jsxs(g.Fragment,{children:[g.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-theme/20"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),g.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s==="signup"&&g.jsxs("div",{children:[g.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),g.jsx("input",{id:"name",type:"text",value:p,onChange:_=>m(_.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),g.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),g.jsx("input",{id:"password",type:"password",value:d,onChange:_=>f(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&g.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),g.jsx("button",{type:"submit",disabled:w,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:w?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),g.jsx("div",{className:"mt-6 text-center",children:g.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",g.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),g.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:g.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},TN=()=>{Ul();const t=gh(),[e,n]=M.useState(!1),[r,i]=M.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:f}=vh(),[p,m]=M.useState(!1),[b,v]=M.useState(!1),[w,S]=M.useState([]),[k,T]=M.useState(!1);M.useEffect(()=>{n(!0)},[]),M.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),M.useEffect(()=>{(async()=>{if(!o){S([]);return}T(!0);try{const L=await Jt.getUserDiagrams();S(L)}catch(L){console.error("Failed to load diagrams:",L)}finally{T(!1)}})()},[o]);const E=R=>{t(`/playground/free?diagramId=${R}`)},N=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create system designs, ER diagrams, and UML diagrams from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"75+ Components",description:"System design, ER diagrams, UML diagrams, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"75+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],j=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 78+ components, AI assessment, UML & ER diagrams, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design, ER diagram, entity relationship diagram, UML diagram, class diagram, database design",url:"https://satya00089.github.io/diagrammatic/"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[g.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[g.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),g.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),g.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),g.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),g.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),g.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),g.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),g.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),g.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),g.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),g.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),g.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),g.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),g.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),g.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),g.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),g.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),g.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),g.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),g.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("button",{type:"button",onClick:()=>t("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&g.jsx("button",{type:"button",onClick:()=>t("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:o?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?g.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),g.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),g.jsx("button",{type:"button",onClick:()=>{f(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):g.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),g.jsx("section",{className:"relative pt-16 pb-20",children:g.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[g.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[g.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),g.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),g.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),g.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),g.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),g.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),g.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),g.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),g.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),g.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:g.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[g.jsx("div",{className:"inline-block mb-6",children:g.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 75+ Components, UML & ER Diagrams, AI Assessment"})}),g.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[g.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),g.jsx("br",{}),g.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),g.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design, ER diagrams, and UML  practice, learn, and create architecture diagrams with ease"}),g.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((R,L)=>{const P=()=>L===0?"fade-in-up-delay-100":L===1?"fade-in-up-delay-200":"fade-in-up-delay-300";return g.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${e?"fade-in-up":"opacity-0 translate-y-5"} ${P()}`,children:[g.jsx("div",{className:"text-3xl mb-1",children:R.icon}),g.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),g.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label)})}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[g.jsxs("button",{type:"button",onClick:()=>t("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[g.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),g.jsxs("button",{type:"button",onClick:()=>t("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",g.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),g.jsx("p",{className:"mt-6 text-sm text-white/80",children:"Trusted by 1000+ developers  AI-powered feedback  Open source"})]})})]})}),o&&g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsxs("div",{className:"flex items-center justify-between mb-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),g.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),g.jsxs("div",{className:"flex items-center gap-3",children:[w.length>0&&g.jsx("button",{type:"button",onClick:()=>t("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),g.jsxs("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),k?g.jsx("div",{className:"flex items-center justify-center py-20",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):w.length===0?g.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),g.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.slice(0,6).map(R=>g.jsxs("div",{onClick:()=>E(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1",children:[g.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),!R.isOwner&&g.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[g.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),g.jsxs("div",{className:"relative flex items-center gap-1.5",children:[g.jsxs("div",{className:"relative flex-shrink-0",children:[R.owner.pictureUrl?g.jsx("img",{src:R.owner.pictureUrl,alt:R.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:R.owner.name[0]?.toUpperCase()}),g.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),g.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:R.owner.name})]})]})]}),g.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${R.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:R.permission==="edit"?g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),g.jsx("span",{children:R.permission==="edit"?"Can Edit":"View Only"})]})]}),R.description&&g.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),g.jsx("div",{className:"text-3xl ml-2",children:""})]}),g.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),g.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),g.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:N.map((R,L)=>{const P=()=>L===0?"delay-0":L===1?"delay-100":"delay-200";return g.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${P()}`,onClick:()=>t(R.route),onKeyDown:F=>F.key==="Enter"&&t(R.route),role:"button",tabIndex:0,children:[g.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),g.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),g.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,g.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title)})})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),g.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),g.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,L)=>{const P=()=>["delay-0","delay-[50ms]","delay-[100ms]","delay-[150ms]","delay-[200ms]","delay-[250ms]"][L]||"delay-[250ms]";return g.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${P()}`,children:[g.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),g.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),g.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title)})})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),g.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:j.map(R=>g.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[g.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),g.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),g.jsxs("div",{children:[g.jsx("div",{className:"font-semibold text-theme",children:R.author}),g.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`${R.author}-${R.role}`))})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:g.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[g.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[g.jsxs("div",{className:"relative inline-block mb-6",children:[g.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),g.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),g.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),g.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[g.jsxs("div",{className:"relative inline-block mb-6",children:[g.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),g.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),g.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),g.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[g.jsxs("div",{className:"relative inline-block mb-6",children:[g.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),g.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),g.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),g.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),g.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",g.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),g.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:g.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),g.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),g.jsxs("div",{className:"relative z-10",children:[g.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),g.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),g.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:g.jsx("div",{className:"max-w-7xl mx-auto",children:g.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),g.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),g.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),g.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&g.jsx(Ng,{isOpen:p,onClose:()=>m(!1),onLogin:async(R,L)=>{await l({email:R,password:L})},onSignup:async(R,L,P)=>{await u({email:R,password:L,name:P})},onGoogleLogin:async R=>{await d(R)}})]})]})};function uo(t){return Array.isArray?Array.isArray(t):EP(t)==="[object Array]"}function nQ(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function rQ(t){return t==null?"":nQ(t)}function xs(t){return typeof t=="string"}function CP(t){return typeof t=="number"}function iQ(t){return t===!0||t===!1||sQ(t)&&EP(t)=="[object Boolean]"}function kP(t){return typeof t=="object"}function sQ(t){return kP(t)&&t!==null}function si(t){return t!=null}function K2(t){return!t.trim().length}function EP(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const oQ="Incorrect 'index' type",aQ=t=>`Invalid value for key ${t}`,lQ=t=>`Pattern length exceeds max of ${t}.`,cQ=t=>`Missing ${t} property in key`,uQ=t=>`Property 'weight' in key '${t}' must be a positive integer`,AN=Object.prototype.hasOwnProperty;class dQ{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(r=>{let i=NP(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function NP(t){let e=null,n=null,r=null,i=1,s=null;if(xs(t)||uo(t))r=t,e=MN(t),n=F6(t);else{if(!AN.call(t,"name"))throw new Error(cQ("name"));const o=t.name;if(r=o,AN.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(uQ(o));e=MN(o),n=F6(o),s=t.getFn}return{path:e,id:n,weight:i,src:r,getFn:s}}function MN(t){return uo(t)?t:t.split(".")}function F6(t){return uo(t)?t.join("."):t}function fQ(t,e){let n=[],r=!1;const i=(s,o,l)=>{if(si(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!si(d))return;if(l===o.length-1&&(xs(d)||CP(d)||iQ(d)))n.push(rQ(d));else if(uo(d)){r=!0;for(let f=0,p=d.length;f<p;f+=1)i(d[f],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,xs(e)?e.split("."):e,0),r?n:n[0]}const hQ={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},pQ={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},mQ={location:0,threshold:.6,distance:100},gQ={useExtendedSearch:!1,getFn:fQ,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Xe={...pQ,...hQ,...mQ,...gQ};const yQ=/[^ ]+/g;function bQ(t=1,e=3){const n=new Map,r=Math.pow(10,e);return{get(i){const s=i.match(yQ).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*t),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class I8{constructor({getFn:e=Xe.getFn,fieldNormWeight:n=Xe.fieldNormWeight}={}){this.norm=bQ(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,xs(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();xs(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!si(e)||K2(e))return;let r={v:e,i:n,n:this.norm.get(e)};this.records.push(r)}_addObject(e,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(si(o)){if(uo(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:f}=u.pop();if(si(f))if(xs(f)&&!K2(f)){let p={v:f,i:d,n:this.norm.get(f)};l.push(p)}else uo(f)&&f.forEach((p,m)=>{u.push({nestedArrIndex:m,value:p})})}r.$[s]=l}else if(xs(o)&&!K2(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function TP(t,e,{getFn:n=Xe.getFn,fieldNormWeight:r=Xe.fieldNormWeight}={}){const i=new I8({getFn:n,fieldNormWeight:r});return i.setKeys(t.map(NP)),i.setSources(e),i.create(),i}function vQ(t,{getFn:e=Xe.getFn,fieldNormWeight:n=Xe.fieldNormWeight}={}){const{keys:r,records:i}=t,s=new I8({getFn:e,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function i0(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:i=Xe.distance,ignoreLocation:s=Xe.ignoreLocation}={}){const o=e/t.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function xQ(t=[],e=Xe.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=t.length;s<o;s+=1){let l=t[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=e&&n.push([r,i]),r=-1)}return t[s-1]&&s-r>=e&&n.push([r,s-1]),n}const al=32;function wQ(t,e,n,{location:r=Xe.location,distance:i=Xe.distance,threshold:s=Xe.threshold,findAllMatches:o=Xe.findAllMatches,minMatchCharLength:l=Xe.minMatchCharLength,includeMatches:u=Xe.includeMatches,ignoreLocation:d=Xe.ignoreLocation}={}){if(e.length>al)throw new Error(lQ(al));const f=e.length,p=t.length,m=Math.max(0,Math.min(r,p));let b=s,v=m;const w=l>1||u,S=w?Array(p):[];let k;for(;(k=t.indexOf(e,v))>-1;){let j=i0(e,{currentLocation:k,expectedLocation:m,distance:i,ignoreLocation:d});if(b=Math.min(j,b),v=k+f,w){let R=0;for(;R<f;)S[k+R]=1,R+=1}}v=-1;let T=[],E=1,N=f+p;const A=1<<f-1;for(let j=0;j<f;j+=1){let R=0,L=N;for(;R<L;)i0(e,{errors:j,currentLocation:m+L,expectedLocation:m,distance:i,ignoreLocation:d})<=b?R=L:N=L,L=Math.floor((N-R)/2+R);N=L;let P=Math.max(1,m-L+1),F=o?p:Math.min(m+L,p)+f,V=Array(F+2);V[F+1]=(1<<j)-1;for(let I=F;I>=P;I-=1){let U=I-1,O=n[t.charAt(U)];if(w&&(S[U]=+!!O),V[I]=(V[I+1]<<1|1)&O,j&&(V[I]|=(T[I+1]|T[I])<<1|1|T[I+1]),V[I]&A&&(E=i0(e,{errors:j,currentLocation:U,expectedLocation:m,distance:i,ignoreLocation:d}),E<=b)){if(b=E,v=U,v<=m)break;P=Math.max(1,2*m-v)}}if(i0(e,{errors:j+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:d})>b)break;T=V}const _={isMatch:v>=0,score:Math.max(.001,E)};if(w){const j=xQ(S,l);j.length?u&&(_.indices=j):_.isMatch=!1}return _}function SQ(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const i=t.charAt(n);e[i]=(e[i]||0)|1<<r-n-1}return e}const im=String.prototype.normalize?(t=>t.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(t=>t);class AP{constructor(e,{location:n=Xe.location,threshold:r=Xe.threshold,distance:i=Xe.distance,includeMatches:s=Xe.includeMatches,findAllMatches:o=Xe.findAllMatches,minMatchCharLength:l=Xe.minMatchCharLength,isCaseSensitive:u=Xe.isCaseSensitive,ignoreDiacritics:d=Xe.ignoreDiacritics,ignoreLocation:f=Xe.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f},e=u?e:e.toLowerCase(),e=d?im(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const p=(b,v)=>{this.chunks.push({pattern:b,alphabet:SQ(b),startIndex:v})},m=this.pattern.length;if(m>al){let b=0;const v=m%al,w=m-v;for(;b<w;)p(this.pattern.substr(b,al),b),b+=al;if(v){const S=m-al;p(this.pattern.substr(S),S)}}else p(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=r?im(e):e,this.pattern===e){let w={isMatch:!0,score:0};return i&&(w.indices=[[0,e.length-1]]),w}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:f}=this.options;let p=[],m=0,b=!1;this.chunks.forEach(({pattern:w,alphabet:S,startIndex:k})=>{const{isMatch:T,score:E,indices:N}=wQ(e,w,S,{location:s+k,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:f});T&&(b=!0),m+=E,T&&N&&(p=[...p,...N])});let v={isMatch:b,score:b?m/this.chunks.length:1};return b&&i&&(v.indices=p),v}}class _a{constructor(e){this.pattern=e}static isMultiMatch(e){return _N(e,this.multiRegex)}static isSingleMatch(e){return _N(e,this.singleRegex)}search(){}}function _N(t,e){const n=t.match(e);return n?n[1]:null}class CQ extends _a{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class kQ extends _a{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class EQ extends _a{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class NQ extends _a{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class TQ extends _a{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class AQ extends _a{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class MP extends _a{constructor(e,{location:n=Xe.location,threshold:r=Xe.threshold,distance:i=Xe.distance,includeMatches:s=Xe.includeMatches,findAllMatches:o=Xe.findAllMatches,minMatchCharLength:l=Xe.minMatchCharLength,isCaseSensitive:u=Xe.isCaseSensitive,ignoreDiacritics:d=Xe.ignoreDiacritics,ignoreLocation:f=Xe.ignoreLocation}={}){super(e),this._bitapSearch=new AP(e,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class _P extends _a{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,r;const i=[],s=this.pattern.length;for(;(r=e.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const q6=[CQ,_P,EQ,NQ,AQ,TQ,kQ,MP],DN=q6.length,MQ=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,_Q="|";function DQ(t,e={}){return t.split(_Q).map(n=>{let r=n.trim().split(MQ).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<DN;){const f=q6[d];let p=f.isMultiMatch(l);p&&(i.push(new f(p,e)),u=!0)}if(!u)for(d=-1;++d<DN;){const f=q6[d];let p=f.isSingleMatch(l);if(p){i.push(new f(p,e));break}}}return i})}const RQ=new Set([MP.type,_P.type]);class jQ{constructor(e,{isCaseSensitive:n=Xe.isCaseSensitive,ignoreDiacritics:r=Xe.ignoreDiacritics,includeMatches:i=Xe.includeMatches,minMatchCharLength:s=Xe.minMatchCharLength,ignoreLocation:o=Xe.ignoreLocation,findAllMatches:l=Xe.findAllMatches,location:u=Xe.location,threshold:d=Xe.threshold,distance:f=Xe.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:f},e=n?e:e.toLowerCase(),e=r?im(e):e,this.pattern=e,this.query=DQ(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;e=i?e:e.toLowerCase(),e=s?im(e):e;let o=0,l=[],u=0;for(let d=0,f=n.length;d<f;d+=1){const p=n[d];l.length=0,o=0;for(let m=0,b=p.length;m<b;m+=1){const v=p[m],{isMatch:w,indices:S,score:k}=v.search(e);if(w){if(o+=1,u+=k,r){const T=v.constructor.type;RQ.has(T)?l=[...l,...S]:l.push(S)}}else{u=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:u/o};return r&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const U6=[];function OQ(...t){U6.push(...t)}function $6(t,e){for(let n=0,r=U6.length;n<r;n+=1){let i=U6[n];if(i.condition(t,e))return new i(t,e)}return new AP(t,e)}const sm={AND:"$and",OR:"$or"},G6={PATH:"$path",PATTERN:"$val"},W6=t=>!!(t[sm.AND]||t[sm.OR]),LQ=t=>!!t[G6.PATH],IQ=t=>!uo(t)&&kP(t)&&!W6(t),RN=t=>({[sm.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function DP(t,e,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=LQ(i);if(!o&&s.length>1&&!W6(i))return r(RN(i));if(IQ(i)){const u=o?i[G6.PATH]:s[0],d=o?i[G6.PATTERN]:i[u];if(!xs(d))throw new Error(aQ(u));const f={keyId:F6(u),pattern:d};return n&&(f.searcher=$6(d,e)),f}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];uo(d)&&d.forEach(f=>{l.children.push(r(f))})}),l};return W6(t)||(t=RN(t)),r(t)}function PQ(t,{ignoreFieldNorm:e=Xe.ignoreFieldNorm}){t.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:s))}),n.score=r})}function zQ(t,e){const n=t.matches;e.matches=[],si(n)&&n.forEach(r=>{if(!si(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),e.matches.push(o)})}function BQ(t,e){e.score=t.score}function VQ(t,e,{includeMatches:n=Xe.includeMatches,includeScore:r=Xe.includeScore}={}){const i=[];return n&&i.push(zQ),r&&i.push(BQ),t.map(s=>{const{idx:o}=s,l={item:e[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class $l{constructor(e,n={},r){this.options={...Xe,...n},this.options.useExtendedSearch,this._keyStore=new dQ(this.options.keys),this.setCollection(e,r)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof I8))throw new Error(oQ);this._myIndex=n||TP(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){si(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];e(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=xs(e)?xs(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return PQ(u,{ignoreFieldNorm:l}),s&&u.sort(o),CP(n)&&n>-1&&(u=u.slice(0,n)),VQ(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const n=$6(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!si(s))return;const{isMatch:u,score:d,indices:f}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:f}]})}),i}_searchLogical(e){const n=DP(e,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:m}=l,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:m});return b&&b.length?[{idx:d,item:u,matches:b}]:[]}const f=[];for(let p=0,m=l.children.length;p<m;p+=1){const b=l.children[p],v=r(b,u,d);if(v.length)f.push(...v);else if(l.operator===sm.AND)return[]}return f},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(si(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:f})=>{s[u].matches.push(...f)}))}}),o}_searchObjectList(e){const n=$6(e,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!si(o))return;let u=[];r.forEach((d,f)=>{u.push(...this._findMatches({key:d,value:o[f],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:e,value:n,searcher:r}){if(!si(n))return[];let i=[];if(uo(n))n.forEach(({v:s,i:o,n:l})=>{if(!si(s))return;const{isMatch:u,score:d,indices:f}=r.searchIn(s);u&&i.push({score:d,key:e,value:s,idx:o,norm:l,indices:f})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:e,value:s,norm:o,indices:d})}return i}}$l.version="7.1.0";$l.createIndex=TP;$l.parseIndex=vQ;$l.config=Xe;$l.parseQuery=DP;OQ(jQ);const HQ=()=>{Ul();const t=gh(),[e,n]=M.useState("All"),[r,i]=M.useState("All"),[s,o]=M.useState(""),[l,u]=M.useState([]),[d,f]=M.useState(!0),[p,m]=M.useState(null),[b,v]=M.useState(!1),[w,S]=M.useState(!1),[k,T]=M.useState(new Set),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:j,logout:R}=vh();M.useEffect(()=>{(async()=>{try{f(!0),m(null);const U=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!U.ok)throw new Error(`Failed to fetch problems: ${U.status} ${U.statusText}`);const O=await U.json();u(O)}catch(I){m(I instanceof Error?I.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",I)}finally{f(!1)}})()},[]),M.useEffect(()=>{(async()=>{if(!N){T(new Set);return}try{const I=await Jt.getAttemptedProblems();T(new Set(I))}catch(I){console.error("Failed to fetch attempted problems:",I)}})()},[N]);const L=M.useMemo(()=>{const q=s?.trim()??"";let I=l;return q.length>0&&(I=new $l(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(q).map(H=>H.item)),I.filter(O=>{const H=e==="All"||O.difficulty===e,G=r==="All"||O.category===r;return H&&G}).sort((O,H)=>{const G=k.has(O.id)?1:0;return(k.has(H.id)?1:0)-G})},[e,r,s,l,k]),P=["All",...Array.from(new Set(l.map(q=>q.category)))],F=["All","Easy","Medium","Hard","Very Hard"],V=q=>{switch(q){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[N&&g.jsx("button",{type:"button",onClick:()=>t("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),g.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${L.length} problems available`}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:N?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?g.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),g.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),g.jsx("button",{type:"button",onClick:()=>{R(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):g.jsx("button",{type:"button",onClick:()=>S(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),g.jsx("div",{className:"pt-16 relative z-10",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),g.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),g.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),g.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),g.jsx("div",{className:"text-muted text-sm mb-6",children:p}),g.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),g.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:q=>o(q.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),g.jsx("select",{id:"difficulty-select",value:e,onChange:q=>n(q.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:F.map(q=>g.jsx("option",{value:q,children:q},q))})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),g.jsx("select",{id:"category-select",value:r,onChange:q=>i(q.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:P.map(q=>g.jsx("option",{value:q,children:q},q))})]})]})}),g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:L.map((q,I)=>g.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${I===0?"delay-0":I===1?"delay-100":I===2?"delay-200":""}`,children:[g.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),g.jsxs("div",{className:"relative p-6",children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1 pr-2",children:q.title}),g.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 flex-shrink-0 ${V(q.difficulty)}`,children:q.difficulty})]}),g.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:q.description}),g.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{children:""})," ",q.category]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("span",{children:""})," ",q.estimated_time]})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[q.tags.slice(0,3).map(U=>g.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:U},U)),q.tags.length>3&&g.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",q.tags.length-3," more"]})]}),g.jsx("button",{type:"button",onClick:U=>{U.stopPropagation(),t(`/playground/${q.id}`)},"aria-label":`Start ${q.title}`,className:`w-full px-6 py-3 font-semibold rounded-xl transition-all duration-300 cursor-pointer group-hover:shadow-xl ${N&&k.has(q.id)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:shadow-lg hover:scale-105":"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white hover:shadow-lg hover:scale-105"}`,children:g.jsxs("span",{className:"flex items-center justify-center gap-2",children:[N&&k.has(q.id)&&g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),N&&k.has(q.id)?"Continue Problem":"Start Problem"," "]})})]})]},q.id))}),L.length===0&&!d&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"text-7xl mb-6",children:""}),g.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),g.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),w&&g.jsx(Ng,{isOpen:w,onClose:()=>S(!1),onLogin:async(q,I)=>{await A({email:q,password:I})},onSignup:async(q,I,U)=>{await _({email:q,password:I,name:U})},onGoogleLogin:async q=>{await j(q)}})]})};var Y2={exports:{}},X2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jN;function FQ(){if(jN)return X2;jN=1;var t=ph();function e(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(p,m){var b=m(),v=r({inst:{value:b,getSnapshot:m}}),w=v[0].inst,S=v[1];return s(function(){w.value=b,w.getSnapshot=m,u(w)&&S({inst:w})},[p,b,m]),i(function(){return u(w)&&S({inst:w}),p(function(){u(w)&&S({inst:w})})},[p]),o(b),b}function u(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!n(p,b)}catch{return!0}}function d(p,m){return m()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return X2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,X2}var ON;function RP(){return ON||(ON=1,Y2.exports=FQ()),Y2.exports}var jP=RP();function er(t){this.content=t}er.prototype={constructor:er,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new er(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new er(n)},addToStart:function(t,e){return new er([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new er(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new er(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=er.from(t),t.size?new er(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=er.from(t),t.size?new er(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=er.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};er.from=function(t){if(t instanceof er)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new er(e)};function OP(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=OP(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function LP(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,f=Math.min(o.text.length,l.text.length);for(;d<f&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=LP(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class xe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>e&&r(u,i+l,s||null,o)!==!1&&u.content.size){let f=l+1;u.nodesBetween(Math.max(0,e-f),Math.min(u.content.size,n-f),r,i+f)}l=d}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(e,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new xe(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>e&&((o<e||u>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new xe(r,i)}cutByIndex(e,n){return e==n?xe.empty:e==0&&n==this.content.length?this:new xe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new xe(i,s)}addToStart(e){return new xe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new xe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return OP(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return LP(this,e,n,r)}findIndex(e){if(e==0)return s0(0,e);if(e==this.size)return s0(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?s0(n+1,s):s0(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return xe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new xe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return xe.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new xe(n||e,r)}static from(e){if(!e)return xe.empty;if(e instanceof xe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new xe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}xe.empty=new xe([],0);const Z2={index:0,offset:0};function s0(t,e){return Z2.index=t,Z2.offset=e,Z2}function om(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!om(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!om(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ot=class K6{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&om(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return K6.none;if(e instanceof K6)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Ot.none=[];class am extends Error{}class _e{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=PP(this.content,e+this.openStart,n);return r&&new _e(r,this.openStart,this.openEnd)}removeBetween(e,n){return new _e(IP(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return _e.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new _e(xe.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new _e(e,r,i)}}_e.empty=new _e(xe.empty,0,0);function IP(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(IP(s.content,e-i-1,n-i-1)))}function PP(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=PP(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function qQ(t,e,n){if(n.openStart>t.depth)throw new am("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new am("Inconsistent open depths");return zP(t,e,n,0)}function zP(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=zP(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return wl(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=UQ(n,t);return wl(s,VP(t,o,l,e,r))}else return wl(s,lm(t,e,r))}function BP(t,e){if(!e.type.compatibleContent(t.type))throw new am("Cannot join "+e.type.name+" onto "+t.type.name)}function Y6(t,e,n){let r=t.node(n);return BP(r,e.node(n)),r}function xl(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function pf(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(xl(t.nodeAfter,r),s++));for(let l=s;l<o;l++)xl(i.child(l),r);e&&e.depth==n&&e.textOffset&&xl(e.nodeBefore,r)}function wl(t,e){return t.type.checkContent(e),t.copy(e)}function VP(t,e,n,r,i){let s=t.depth>i&&Y6(t,e,i+1),o=r.depth>i&&Y6(n,r,i+1),l=[];return pf(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(BP(s,o),xl(wl(s,VP(t,e,n,r,i+1)),l)):(s&&xl(wl(s,lm(t,e,i+1)),l),pf(e,n,i,l),o&&xl(wl(o,lm(n,r,i+1)),l)),pf(r,null,i,l),new xe(l)}function lm(t,e,n){let r=[];if(pf(null,t,n,r),t.depth>n){let i=Y6(t,e,n+1);xl(wl(i,lm(t,e,n+1)),r)}return pf(e,null,n,r),new xe(r)}function UQ(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(xe.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class zf{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ot.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new cm(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new zf(n,r,s)}static resolveCached(e,n){let r=LN.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else LN.set(e,r=new $Q);let i=r.elts[r.i]=zf.resolve(e,n);return r.i=(r.i+1)%GQ,i}}class $Q{constructor(){this.elts=[],this.i=0}}const GQ=12,LN=new WeakMap;class cm{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const WQ=Object.create(null);let pa=class X6{constructor(e,n,r,i=Ot.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||xe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&om(this.attrs,n||e.defaultAttrs||WQ)&&Ot.sameSet(this.marks,r||Ot.none)}copy(e=null){return e==this.content?this:new X6(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new X6(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return _e.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new _e(d,i.depth-o,s.depth-o)}replace(e,n,r){return qQ(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return zf.resolveCached(this,e)}resolveNoCache(e){return zf.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),HP(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=xe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ot.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ot.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=xe.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};pa.prototype.text=void 0;class um extends pa{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):HP(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new um(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new um(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function HP(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ml{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new KQ(e,n);if(r.next==null)return Ml.empty;let i=FP(r);r.next&&r.err("Unexpected trailing text");let s=tee(eee(i));return nee(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(e,r);if(u&&(!n||u.validEnd))return xe.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:f,next:p}=o.next[d];if(!(f.isText||f.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=s(p,l.concat(f));if(m)return m}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}Ml.empty=new Ml(!0);class KQ{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function FP(t){let e=[];do e.push(YQ(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function YQ(t){let e=[];do e.push(XQ(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function XQ(t){let e=QQ(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=ZQ(t,e);else break;return e}function IN(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function ZQ(t,e){let n=IN(t),r=n;return t.eat(",")&&(t.next!="}"?r=IN(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function JQ(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function QQ(t){if(t.eat("(")){let e=FP(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=JQ(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function eee(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,u){let d={term:u,to:l};return e[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let f=n();i(s(o.expr,u),f),u=f}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let f=n();r(u,f),i(s(o.expr,u),f),u=f}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function qP(t,e){return e-t}function PN(t,e){let n=[];return r(e),n.sort(qP);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function tee(t){let e=Object.create(null);return n(PN(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let f=0;f<i.length;f++)i[f][0]==l&&(d=i[f][1]);PN(t,u).forEach(f=>{d||i.push([l,d=[]]),d.indexOf(f)==-1&&d.push(f)})})});let s=e[r.join(",")]=new Ml(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(qP);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function nee(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function UP(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function $P(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function GP(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function WP(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new iee(t,r,e[r]);return n}let zN=class KP{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=WP(e,r.attrs),this.defaultAttrs=UP(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ml.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:$P(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new pa(this,this.computeAttrs(e),xe.from(n),Ot.setFrom(r))}createChecked(e=null,n,r){return n=xe.from(n),this.checkContent(n),new pa(this,this.computeAttrs(e),n,Ot.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=xe.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(xe.empty,!0);return s?new pa(this,e,n.append(s),Ot.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){GP(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ot.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new KP(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ree(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class iee{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ree(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Tg{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=WP(e,i.attrs),this.excluded=null;let s=UP(this.attrs);this.instance=s?new Ot(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Ot(this,$P(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Tg(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){GP(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class YP{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=er.from(e.nodes),n.marks=er.from(e.marks||{}),this.nodes=zN.compile(this.spec.nodes,this),this.marks=Tg.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=Ml.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?BN(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:BN(this,o.split(" "))}this.nodeFromJSON=i=>pa.fromJSON(this,i),this.markFromJSON=i=>Ot.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof zN){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new um(r,r.defaultAttrs,e,Ot.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function BN(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let u=t.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function see(t){return t.tag!=null}function oee(t){return t.style!=null}let mf=class Z6{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(see(i))this.tags.push(i);else if(oee(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new HN(this,n,!1);return r.addAll(e,Ot.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new HN(this,n,!0);return r.addAll(e,Ot.none,n.from,n.to),_e.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(cee(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=FN(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=FN(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Z6(e,Z6.schemaRules(e)))}};const XP={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},aee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ZP={ol:!0,ul:!0},Bf=1,J6=2,gf=4;function VN(t,e,n){return e!=null?(e?Bf:0)|(e==="full"?J6:0):t&&t.whitespace=="pre"?Bf|J6:n&~gf}class o0{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Ot.none,this.match=s||(o&gf?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(xe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Bf)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=xe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(xe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!XP.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class HN{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=VN(null,n.preserveWhitespace,0)|(r?gf:0);i?s=new o0(i.type,i.attrs,Ot.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new o0(null,null,Ot.none,!0,null,o):s=new o0(e.schema.topNodeType,null,Ot.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&J6?"full":this.localPreserveWS||(i.options&Bf)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=e.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;ZP.hasOwnProperty(o)&&this.parser.normalizeLists&&lee(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(u?u.ignore:aee.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let d,f=this.needsBlock;if(XP.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let p=u&&u.skip?n:this.readStyles(e,n);p&&this.addAll(e,p),d&&this.sync(s),this.needsBlock=f}else{let d=this.readStyles(e,n);d&&this.addElementByRule(e,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(e);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Ot.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):qN(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=VN(e,s,o.options);o.options&gf&&o.content.length==0&&(l|=gf);let u=Ot.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):qN(d.type,e))?(u=d.addToSet(u),!1):!0),this.nodes.push(new o0(e,n,u,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Bf)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let f=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!f||f.name!=d&&!f.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function lee(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ZP.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function cee(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function FN(t){let e={};for(let n in t)e[n]=t[n];return e}function qN(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:f}=l.edge(u);if(d==e||s.indexOf(f)<0&&o(f))return!0}};if(o(i.contentMatch))return!0}}class Gl{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=J2(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],f=this.serializeMark(d,o.isInline,n);f&&(s.push([d,i]),i.appendChild(f.dom),i=f.contentDOM||f.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=L0(J2(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&L0(J2(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return L0(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Gl(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=UN(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return UN(e.marks)}}function UN(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function J2(t){return t.document||window.document}const $N=new WeakMap;function uee(t){let e=$N.get(t);return e===void 0&&$N.set(t,e=dee(t)),e}function dee(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function L0(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=uee(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?t.createElementNS(n,i):t.createElement(i),d=e[1],f=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){f=2;for(let p in d)if(d[p]!=null){let m=p.indexOf(" ");m>0?u.setAttributeNS(p.slice(0,m),p.slice(m+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=f;p<e.length;p++){let m=e[p];if(m===0){if(p<e.length-1||p>f)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:b,contentDOM:v}=L0(t,m,n,r);if(u.appendChild(b),v){if(l)throw new RangeError("Multiple content holes");l=v}}}return{dom:u,contentDOM:l}}const JP=65535,QP=Math.pow(2,16);function fee(t,e){return t+e*QP}function GN(t){return t&JP}function hee(t){return(t-(t&JP))/QP}const ez=1,tz=2,I0=4,nz=8;class Q6{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&nz)>0}get deletedBefore(){return(this.delInfo&(ez|I0))>0}get deletedAfter(){return(this.delInfo&(tz|I0))>0}get deletedAcross(){return(this.delInfo&I0)>0}}class oi{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&oi.empty)return oi.empty}recover(e){let n=0,r=GN(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+hee(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>e)break;let d=this.ranges[l+s],f=this.ranges[l+o],p=u+d;if(e<=p){let m=d?e==u?-1:e==p?1:n:n,b=u+i+(m<0?0:f);if(r)return b;let v=e==(n<0?u:p)?null:fee(l/3,e-u),w=e==u?tz:e==p?ez:I0;return(n<0?e!=u:e!=p)&&(w|=nz),new Q6(b,w,v)}i+=f-d}return r?e+i:new Q6(e+i,0,null)}touches(e,n){let r=0,i=GN(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>e)break;let d=this.ranges[l+s],f=u+d;if(e<=f&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],f=this.ranges[i+r];e(l,l+d,u,u+f),s+=f-d}}invert(){return new oi(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?oi.empty:new oi(e<0?[0,-e,0]:[0,0,e])}}oi.empty=new oi([]);class Vf{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Vf(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Vf;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,e=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new Q6(e,i,null)}}const Q2=Object.create(null);class br{getMap(){return oi.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Q2[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Q2)throw new RangeError("Duplicate use of step JSON ID "+e);return Q2[e]=n,n.prototype.jsonID=e,n}}class En{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new En(e,null)}static fail(e){return new En(null,e)}static fromReplace(e,n,r,i){try{return En.ok(e.replace(n,r,i))}catch(s){if(s instanceof am)return En.fail(s.message);throw s}}}function P8(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(P8(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return xe.fromArray(r)}class ua extends br{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new _e(P8(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return En.fromReplace(e,this.from,this.to,s)}invert(){return new Yi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ua(n.pos,r.pos,this.mark)}merge(e){return e instanceof ua&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ua(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new ua(n.from,n.to,e.markFromJSON(n.mark))}}br.jsonID("addMark",ua);class Yi extends br{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new _e(P8(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return En.fromReplace(e,this.from,this.to,r)}invert(){return new ua(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Yi(n.pos,r.pos,this.mark)}merge(e){return e instanceof Yi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Yi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Yi(n.from,n.to,e.markFromJSON(n.mark))}}br.jsonID("removeMark",Yi);class da extends br{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return En.fromReplace(e,this.pos,this.pos+1,new _e(xe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new da(this.pos,n.marks[i]);return new da(this.pos,this.mark)}}return new _l(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new da(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new da(n.pos,e.markFromJSON(n.mark))}}br.jsonID("addNodeMark",da);class _l extends br{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return En.fromReplace(e,this.pos,this.pos+1,new _e(xe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new da(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new _l(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new _l(n.pos,e.markFromJSON(n.mark))}}br.jsonID("removeNodeMark",_l);class qn extends br{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&ew(e,this.from,this.to)?En.fail("Structure replace would overwrite content"):En.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new oi([this.from,this.to-this.from,this.slice.size])}invert(e){return new qn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new qn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof qn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?_e.empty:new _e(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new qn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?_e.empty:new _e(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new qn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new qn(n.from,n.to,_e.fromJSON(e,n.slice),!!n.structure)}}br.jsonID("replace",qn);class $n extends br{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(ew(e,this.from,this.gapFrom)||ew(e,this.gapTo,this.to)))return En.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return En.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?En.fromReplace(e,this.from,this.to,r):En.fail("Content does not fit in gap")}getMap(){return new oi([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new $n(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new $n(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new $n(n.from,n.to,n.gapFrom,n.gapTo,_e.fromJSON(e,n.slice),n.insert,!!n.structure)}}br.jsonID("replaceAround",$n);function ew(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function pee(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(u,d,f)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&f.type.allowsMarkType(r.type)){let m=Math.max(d,e),b=Math.min(d+u.nodeSize,n),v=r.addToSet(p);for(let w=0;w<p.length;w++)p[w].isInSet(v)||(o&&o.to==m&&o.mark.eq(p[w])?o.to=b:i.push(o=new Yi(m,b,p[w])));l&&l.to==m?l.to=b:s.push(l=new ua(m,b,r))}}),i.forEach(u=>t.step(u)),s.forEach(u=>t.step(u))}function mee(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Tg){let d=o.marks,f;for(;f=r.isInSet(d);)(u||(u=[])).push(f),d=f.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let f=0;f<u.length;f++){let p=u[f],m;for(let b=0;b<i.length;b++){let v=i[b];v.step==s-1&&p.eq(i[b].style)&&(m=v)}m?(m.to=d,m.step=s):i.push({style:p,from:Math.max(l,e),to:d,step:s})}}}),i.forEach(o=>t.step(new Yi(o.from,o.to,o.style)))}function z8(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),f=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new qn(l,f,_e.empty));else{r=p;for(let m=0;m<d.marks.length;m++)n.allowsMarkType(d.marks[m].type)||t.step(new Yi(l,f,d.marks[m]));if(i&&d.isText&&n.whitespace!="pre"){let m,b=/\r?\n|\r/g,v;for(;m=b.exec(d.text);)v||(v=new _e(xe.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new qn(l+m.index,l+m.index+m[0].length,v))}}l=f}if(!r.validEnd){let u=r.fillBefore(xe.empty,!0);t.replace(l,l,new _e(u,0,0))}for(let u=o.length-1;u>=0;u--)t.step(o[u])}function gee(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ou(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!gee(i,s,o))break}return null}function yee(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),u=o,d=l,f=xe.empty,p=0;for(let v=s,w=!1;v>n;v--)w||r.index(v)>0?(w=!0,f=xe.from(r.node(v).copy(f)),p++):u--;let m=xe.empty,b=0;for(let v=s,w=!1;v>n;v--)w||i.after(v+1)<i.end(v)?(w=!0,m=xe.from(i.node(v).copy(m)),b++):d++;t.step(new $n(u,d,o,l,new _e(f.append(m),p,b),f.size-p,!0))}function B8(t,e,n=null,r=t){let i=bee(t,e),s=i&&vee(r,e);return s?i.map(WN).concat({type:e,attrs:n}).concat(s.map(WN)):null}function WN(t){return{type:t,attrs:null}}function bee(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function vee(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:e).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function xee(t,e,n){let r=xe.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=xe.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new $n(i,s,i,s,new _e(r,0,0),n.length,!0))}function wee(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&See(t.doc,t.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!v?d=!1:!b&&v&&(d=!0)}d===!1&&iz(t,o,l,s),z8(t,t.mapping.slice(s).map(l,1),r,void 0,d===null);let f=t.mapping.slice(s),p=f.map(l,1),m=f.map(l+o.nodeSize,1);return t.step(new $n(p,m,p+1,m-1,new _e(xe.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&rz(t,o,l,s),!1}})}function rz(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function iz(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function See(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Cee(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new $n(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new _e(xe.from(o),0,0),1,!0))}function so(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,f=n-2;d>s;d--,f--){let p=i.node(d),m=i.index(d);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(m,p.childCount),v=r&&r[f+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let w=r&&r[f]||p;if(!p.canReplace(m+1,p.childCount)||!w.type.validContent(b))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function kee(t,e,n=1,r){let i=t.doc.resolve(e),s=xe.empty,o=xe.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=xe.from(i.node(l).copy(s));let f=r&&r[d];o=xe.from(f?f.type.create(f.attrs,o):i.node(l).copy(o))}t.step(new qn(e,e,new _e(s.append(o),n,n),!0))}function Da(t,e){let n=t.resolve(e),r=n.index();return sz(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Eee(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function sz(t,e){return!!(t&&e&&!t.isLeaf&&Eee(t,e))}function Ag(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&sz(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Nee(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let f=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);f&&!p?r=!1:!f&&p&&(r=!0)}let l=t.steps.length;if(r===!1){let f=t.doc.resolve(e+n);iz(t,f.node(),f.before(),l)}o.inlineContent&&z8(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=t.mapping.slice(l),d=u.map(e-n);if(t.step(new qn(d,u.map(e+n,-1),_e.empty,!0)),r===!0){let f=t.doc.resolve(d);rz(t,f.node(),f.before(),t.steps.length)}return t}function Tee(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function oz(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),f=!1;if(s==1)f=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);f=p&&d.canReplaceWith(u,u,p[0])}if(f)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Mg(t,e,n=e,r=_e.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return az(i,s,r)?new qn(e,n,r):new Aee(i,s,r).fit()}function az(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Aee{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=xe.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=xe.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new _e(s,o,l);return e>-1?new $n(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new qn(r.pos,i.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=eb(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],f,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(xe.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(f=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:f};if(s&&d.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eb(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new _e(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eb(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new _e(Qd(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new _e(Qd(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let w=0;w<s.length;w++)this.openFrontierNode(s[w]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-e,d=0,f=[],{match:p,type:m}=this.frontier[n];if(i){for(let w=0;w<i.childCount;w++)f.push(i.child(w));p=p.matchFragment(i)}let b=l.size+e-(o.content.size-o.openEnd);for(;d<l.childCount;){let w=l.child(d),S=p.matchType(w.type);if(!S)break;d++,(d>1||u==0||w.content.size)&&(p=S,f.push(lz(w.mark(m.allowedMarks(w.marks)),d==1?u:0,d==l.childCount?b:-1)))}let v=d==l.childCount;v||(b=-1),this.placed=ef(this.placed,n,xe.from(f)),this.frontier[n].match=p,v&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=l;w<b;w++){let k=S.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),S=k.content}this.unplaced=v?e==0?_e.empty:new _e(Qd(o.content,e-1,1),e-1,b<0?o.openEnd:e-1):new _e(Qd(o.content,e,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!tb(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=tb(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],f=tb(e,l,d,u,!0);if(!f||f.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=ef(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=ef(this.placed,this.depth,xe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(xe.empty,!0);n.childCount&&(this.placed=ef(this.placed,this.frontier.length,n))}}function Qd(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Qd(t.firstChild.content,e-1,n)))}function ef(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ef(t.lastChild.content,e-1,n)))}function eb(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function lz(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,lz(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(xe.empty,!0)))),t.copy(r)}function tb(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!Mee(n,s.content,o)?l:null}function Mee(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function _ee(t){return t.spec.defining||t.spec.definingForContent}function Dee(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(az(i,s,r))return t.step(new qn(e,n,r));let o=uz(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let m=i.depth,b=i.pos-1;m>0;m--,b--){let v=i.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(m)>-1?l=m:i.before(m)==b&&o.splice(1,0,-m)}let u=o.indexOf(l),d=[],f=r.openStart;for(let m=r.content,b=0;;b++){let v=m.firstChild;if(d.push(v),b==r.openStart)break;m=v.content}for(let m=f-1;m>=0;m--){let b=d[m],v=_ee(b.type);if(v&&!b.sameMarkup(i.node(Math.abs(l)-1)))f=m;else if(v||!b.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let b=(m+f+1)%(r.openStart+1),v=d[b];if(v)for(let w=0;w<o.length;w++){let S=o[(w+u)%o.length],k=!0;S<0&&(k=!1,S=-S);let T=i.node(S-1),E=i.index(S-1);if(T.canReplaceWith(E,E,v.type,v.marks))return t.replace(i.before(S),k?s.after(S):n,new _e(cz(r.content,0,r.openStart,b),b,r.openEnd))}}let p=t.steps.length;for(let m=o.length-1;m>=0&&(t.replace(e,n,r),!(t.steps.length>p));m--){let b=o[m];b<0||(e=i.before(b),n=s.after(b))}}function cz(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(cz(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(xe.empty,!0))}return t}function Ree(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Tee(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new _e(xe.from(r),0,0))}function jee(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=uz(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function uz(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class nu extends br{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return En.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return En.fromReplace(e,this.pos,this.pos+1,new _e(xe.from(i),0,n.isLeaf?0:1))}getMap(){return oi.empty}invert(e){return new nu(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new nu(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new nu(n.pos,n.attr,n.value)}}br.jsonID("attr",nu);class Hf extends br{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return En.ok(r)}getMap(){return oi.empty}invert(e){return new Hf(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Hf(n.attr,n.value)}}br.jsonID("docAttr",Hf);let pu=class extends Error{};pu=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};pu.prototype=Object.create(Error.prototype);pu.prototype.constructor=pu;pu.prototype.name="TransformError";let dz=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Vf}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new pu(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=_e.empty){let i=Mg(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new _e(xe.from(r),0,0))}delete(e,n){return this.replace(e,n,_e.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Dee(this,e,n,r),this}replaceRangeWith(e,n,r){return Ree(this,e,n,r),this}deleteRange(e,n){return jee(this,e,n),this}lift(e,n){return yee(this,e,n),this}join(e,n=1){return Nee(this,e,n),this}wrap(e,n){return xee(this,e,n),this}setBlockType(e,n=e,r,i=null){return wee(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Cee(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new nu(e,n,r)),this}setDocAttribute(e,n){return this.step(new Hf(e,n)),this}addNodeMark(e,n){return this.step(new da(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ot)n.isInSet(r.marks)&&this.step(new _l(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new _l(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return kee(this,e,n,r),this}addMark(e,n,r){return pee(this,e,n,r),this}removeMark(e,n,r){return mee(this,e,n,r),this}clearIncompatible(e,n,r){return z8(this,e,n,r),this}};const nb=Object.create(null);let nt=class{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Oee(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=_e.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],f=e.mapping.slice(s);e.replaceRange(f.map(u.pos),f.map(d.pos),l?_e.empty:n),l==0&&XN(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=e.mapping.slice(r),d=u.map(o.pos),f=u.map(l.pos);s?e.deleteRange(d,f):(e.replaceRangeWith(d,f,n),XN(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ze(e):Hc(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Hc(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Hc(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new li(e.node(0))}static atStart(e){return Hc(e,e,0,0,1)||new li(e)}static atEnd(e){return Hc(e,e,e.content.size,e.childCount,-1)||new li(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nb[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nb)throw new RangeError("Duplicate use of selection JSON ID "+e);return nb[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ze.between(this.$anchor,this.$head).getBookmark()}};nt.prototype.visible=!0;class Oee{constructor(e,n){this.$from=e,this.$to=n}}let KN=!1;function YN(t){!KN&&!t.parent.inlineContent&&(KN=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ze extends nt{constructor(e,n=e){YN(e),YN(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return nt.near(r);let i=e.resolve(n.map(this.anchor));return new Ze(i.parent.inlineContent?i:r,r)}replace(e,n=_e.empty){if(super.replace(e,n),n==_e.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ze&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new _g(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ze(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=nt.findFrom(n,r,!0)||nt.findFrom(n,-r,!0);if(s)n=s.$head;else return nt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(nt.findFrom(e,-r,!0)||nt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ze(e,n)}}nt.jsonID("text",Ze);class _g{constructor(e,n){this.anchor=e,this.head=n}map(e){return new _g(e.map(this.anchor),e.map(this.head))}resolve(e){return Ze.between(e.resolve(this.anchor),e.resolve(this.head))}}class qe extends nt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?nt.near(s):new qe(s)}content(){return new _e(xe.from(this.node),0,0)}eq(e){return e instanceof qe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new V8(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new qe(e.resolve(n.anchor))}static create(e,n){return new qe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}qe.prototype.visible=!1;nt.jsonID("node",qe);class V8{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new _g(r,r):new V8(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&qe.isSelectable(r)?new qe(n):nt.near(n)}}class li extends nt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=_e.empty){if(n==_e.empty){e.delete(0,e.doc.content.size);let r=nt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new li(e)}map(e){return new li(e)}eq(e){return e instanceof li}getBookmark(){return Lee}}nt.jsonID("all",li);const Lee={map(){return this},resolve(t){return new li(t)}};function Hc(t,e,n,r,i,s=!1){if(e.inlineContent)return Ze.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&qe.isSelectable(l))return qe.create(t,n-(i<0?l.nodeSize:0))}else{let u=Hc(t,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function XN(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof qn||i instanceof $n))return;let s=t.mapping.maps[r],o;s.forEach((l,u,d,f)=>{o==null&&(o=f)}),t.setSelection(nt.near(t.doc.resolve(o),n))}const ZN=1,a0=2,JN=4;let Iee=class extends dz{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ZN)&~a0,this.storedMarks=null,this}get selectionSet(){return(this.updated&ZN)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=a0,this}ensureMarks(e){return Ot.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&a0)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~a0,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ot.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(nt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=JN,this}get scrolledIntoView(){return(this.updated&JN)>0}};function QN(t,e){return!e||!t?t:t.bind(e)}class tf{constructor(e,n,r){this.name=e,this.init=QN(n.init,r),this.apply=QN(n.apply,r)}}const Pee=[new tf("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new tf("selection",{init(t,e){return t.selection||nt.atStart(e.doc)},apply(t){return t.selection}}),new tf("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new tf("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rb{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Pee.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new tf(r.key,r.spec.state,r))})}}class Jc{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,f=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(f&&r.filterTransaction(f,o)){if(f.setMeta("appendedTransaction",e),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(f),r=r.applyInner(f),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Jc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new Iee(this)}static create(e){let n=new rb(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Jc(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rb(this.schema,e.plugins),r=n.fields,i=new Jc(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rb(e.schema,e.plugins),s=new Jc(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=pa.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=nt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function fz(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=fz(i,e,{})),n[r]=i}return n}class un{constructor(e){this.spec=e,this.props={},e.props&&fz(e.props,this,this.props),this.key=e.key?e.key.key:hz("plugin")}getState(e){return e[this.key]}}const ib=Object.create(null);function hz(t){return t in ib?t+"$"+ ++ib[t]:(ib[t]=0,t+"$")}class Wn{constructor(e="key"){this.key=hz(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const nr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},mu=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let tw=null;const no=function(t,e,n){let r=tw||(tw=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},zee=function(){tw=null},Dl=function(t,e,n,r){return n&&(eT(t,e,n,r,-1)||eT(t,e,n,r,1))},Bee=/^(img|br|input|textarea|hr)$/i;function eT(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Ni(t))){let o=t.parentNode;if(!o||o.nodeType!=1||kh(t)||Bee.test(t.nodeName)||t.contentEditable=="false")return!1;e=nr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Ni(t):0}else return!1}}function Ni(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Vee(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Ni(t)}else if(t.parentNode&&!kh(t))e=nr(t),t=t.parentNode;else return null}}function Hee(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!kh(t))e=nr(t)+1,t=t.parentNode;else return null}}function Fee(t,e,n){for(let r=e==0,i=e==Ni(t);r||i;){if(t==n)return!0;let s=nr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Ni(t)}}function kh(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Dg=function(t){return t.focusNode&&Dl(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ll(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function qee(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uee(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Ni(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Ni(r.startContainer),r.startOffset)}}}const Ns=typeof navigator<"u"?navigator:null,tT=typeof document<"u"?document:null,Ra=Ns&&Ns.userAgent||"",nw=/Edge\/(\d+)/.exec(Ra),pz=/MSIE \d/.exec(Ra),rw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ra),Br=!!(pz||rw||nw),ma=pz?document.documentMode:rw?+rw[1]:nw?+nw[1]:0,Di=!Br&&/gecko\/(\d+)/i.test(Ra);Di&&+(/Firefox\/(\d+)/.exec(Ra)||[0,0])[1];const iw=!Br&&/Chrome\/(\d+)/.exec(Ra),gr=!!iw,mz=iw?+iw[1]:0,Nr=!Br&&!!Ns&&/Apple Computer/.test(Ns.vendor),gu=Nr&&(/Mobile\/\w+/.test(Ra)||!!Ns&&Ns.maxTouchPoints>2),Ei=gu||(Ns?/Mac/.test(Ns.platform):!1),$ee=Ns?/Win/.test(Ns.platform):!1,ro=/Android \d/.test(Ra),Eh=!!tT&&"webkitFontSmoothing"in tT.documentElement.style,Gee=Eh?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Wee(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Ys(t,e){return typeof t=="number"?t:t[e]}function Kee(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function nT(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=mu(o);continue}let l=o,u=l==s.body,d=u?Wee(s):Kee(l),f=0,p=0;if(e.top<d.top+Ys(r,"top")?p=-(d.top-e.top+Ys(i,"top")):e.bottom>d.bottom-Ys(r,"bottom")&&(p=e.bottom-e.top>d.bottom-d.top?e.top+Ys(i,"top")-d.top:e.bottom-d.bottom+Ys(i,"bottom")),e.left<d.left+Ys(r,"left")?f=-(d.left-e.left+Ys(i,"left")):e.right>d.right-Ys(r,"right")&&(f=e.right-d.right+Ys(i,"right")),f||p)if(u)s.defaultView.scrollBy(f,p);else{let b=l.scrollLeft,v=l.scrollTop;p&&(l.scrollTop+=p),f&&(l.scrollLeft+=f);let w=l.scrollLeft-b,S=l.scrollTop-v;e={left:e.left-w,top:e.top-S,right:e.right-w,bottom:e.bottom-S}}let m=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(m))break;o=m=="absolute"?o.offsetParent:mu(o)}}function Yee(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:gz(t.dom)}}function gz(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=mu(r));return e}function Xee({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;yz(n,r==0?0:r-e)}function yz(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Lc=null;function Zee(t){if(t.setActive)return t.setActive();if(Lc)return t.focus(Lc);let e=gz(t);t.focus(Lc==null?{get preventScroll(){return Lc={preventScroll:!0},!0}}:void 0),Lc||(Lc=!1,yz(e,0))}function bz(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,u,d;for(let f=t.firstChild,p=0;f;f=f.nextSibling,p++){let m;if(f.nodeType==1)m=f.getClientRects();else if(f.nodeType==3)m=no(f).getClientRects();else continue;for(let b=0;b<m.length;b++){let v=m[b];if(v.top<=o&&v.bottom>=l){o=Math.max(v.bottom,o),l=Math.min(v.top,l);let w=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(w<r){n=f,r=w,i=w&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,f.nodeType==1&&w&&(s=p+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!u&&v.left<=e.left&&v.right>=e.left&&(u=f,d={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?Jee(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:bz(n,i)}function Jee(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=ta(r,1);if(s.top!=s.bottom&&H8(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function H8(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Qee(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function ete(t,e,n){let{node:r,offset:i}=bz(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function tte(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function vz(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(H8(e,d))return vz(o,e,d)}}if((s=(s+1)%r)==i)break}return t}function nte(t,e){let n=t.dom.ownerDocument,r,i=0,s=Uee(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=t.dom.getBoundingClientRect();if(!H8(e,d)||(o=vz(t.dom,e,d),!o))return null}if(Nr)for(let d=o;r&&d;d=mu(d))d.draggable&&(r=void 0);if(o=Qee(o,e),r){if(Di&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let f=r.childNodes[i],p;f.nodeName=="IMG"&&(p=f.getBoundingClientRect()).right<=e.left&&p.bottom>e.top&&i++}let d;Eh&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=tte(t,r,i,e))}l==null&&(l=ete(t,o,e));let u=t.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function rT(t){return t.top<t.bottom||t.left<t.right}function ta(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(rT(r))return r}return Array.prototype.find.call(n,rT)||t.getBoundingClientRect()}const rte=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xz(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Eh||Di;if(r.nodeType==3)if(o&&(rte.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=ta(no(r,i,i),n);if(Di&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=ta(no(r,i-1,i-1),-1);if(d.top==u.top){let f=ta(no(r,i,i+1),-1);if(f.top!=u.top)return Fd(f,f.left<d.left)}}return u}else{let u=i,d=i,f=n<0?1:-1;return n<0&&!i?(d++,f=-1):n>=0&&i==r.nodeValue.length?(u--,f=1):n<0?u--:d++,Fd(ta(no(r,u,d),f),f<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Ni(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return sb(u.getBoundingClientRect(),!1)}if(s==null&&i<Ni(r)){let u=r.childNodes[i];if(u.nodeType==1)return sb(u.getBoundingClientRect(),!0)}return sb(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Ni(r))){let u=r.childNodes[i-1],d=u.nodeType==3?no(u,Ni(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return Fd(ta(d,1),!1)}if(s==null&&i<Ni(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?no(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return Fd(ta(d,-1),!0)}return Fd(ta(r.nodeType==3?no(r):r,-n),n>=0)}function Fd(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function sb(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function wz(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ite(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return wz(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=xz(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=no(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let f=u[d];if(f.bottom>f.top+1&&(n=="up"?o.top-f.top>(f.bottom-o.top)*2:f.bottom-o.bottom>(o.bottom-f.top)*2))return!1}}return!0})}const ste=/[\u0590-\u08ac]/;function ote(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!ste.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:wz(t,e,()=>{let{focusNode:u,focusOffset:d,anchorNode:f,anchorOffset:p}=t.domSelectionRange(),m=l.caretBidiLevel;l.modify("move",n,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:v,focusOffset:w}=t.domSelectionRange(),S=v&&!b.contains(v.nodeType==1?v:v.parentNode)||u==v&&d==w;try{l.collapse(f,p),u&&(u!=f||d!=p)&&l.extend&&l.extend(u,d)}catch{}return m!=null&&(l.caretBidiLevel=m),S}):r.pos==r.start()||r.pos==r.end()}let iT=null,sT=null,oT=!1;function ate(t,e,n){return iT==e&&sT==n?oT:(iT=e,sT=n,oT=n=="up"||n=="down"?ite(t,e,n):ote(t,e,n))}const Ri=0,aT=1,dl=2,Ts=3;class Nh{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Ri,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>nr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Cz){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Sz&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?nr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?nr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&e<=d){let f=o+u.border;if(e>=f&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,f);e=o;for(let p=l;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=nr(m.dom)+1;break}e-=m.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let f=l+1;f<this.children.length;f++){let p=this.children[f];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=nr(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let b=0,v=0;b<this.children.length;b++){let w=this.children[b],S=v+w.size;if(s>v&&o<S)return w.setSelection(e-v-w.border,n-v-w.border,r,i);v=S}let l=this.domFromPos(e,e?-1:1),u=n==e?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),f=r.domSelectionRange(),p=!1;if((Di||Nr)&&e==n){let{node:b,offset:v}=l;if(b.nodeType==3){if(p=!!(v&&b.nodeValue[v-1]==`
`),p&&v==b.nodeValue.length)for(let w=b,S;w;w=w.parentNode){if(S=w.nextSibling){S.nodeName=="BR"&&(l=u={node:S.parentNode,offset:nr(S)+1});break}let k=w.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let w=b.childNodes[v-1];p=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Di&&f.focusNode&&f.focusNode!=u.node&&f.focusNode.nodeType==1){let b=f.focusNode.childNodes[f.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||p&&Nr)&&Dl(l.node,l.offset,f.anchorNode,f.anchorOffset)&&Dl(u.node,u.offset,f.focusNode,f.focusOffset))return;let m=!1;if((d.extend||e==n)&&!(p&&Di)){d.collapse(l.node,l.offset);try{e!=n&&d.extend(u.node,u.offset),m=!0}catch{}}if(!m){if(e>n){let v=l;l=u,u=v}let b=document.createRange();b.setEnd(u.node,u.offset),b.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,u=o-s.border;if(e>=l&&n<=u){this.dirty=e==r||n==o?dl:aT,e==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ts:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?dl:Ts}r=o}this.dirty=dl}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?dl:aT;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Sz extends Nh{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Ri&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class lte extends Nh{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Rl extends Nh{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Gl.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Rl(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Ts||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ts&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Ri){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ri}}slice(e,n,r){let i=Rl.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=ow(s,n,o,r)),e>0&&(s=ow(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ga extends Nh{constructor(e,n,r,i,s,o,l,u,d){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),f=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!f)f=document.createTextNode(n.text);else if(f.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else f||({dom:f,contentDOM:p}=Gl.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&f.nodeName!="BR"&&(f.hasAttribute("contenteditable")||(f.contentEditable="false"),n.type.spec.draggable&&(f.draggable=!0));let m=f;return f=Nz(f,r,n),d?u=new cte(e,n,r,i,f,p||null,m,d,s,o+1):n.isText?new Rg(e,n,r,i,f,m,s):new ga(e,n,r,i,f,p||null,m,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>xe.empty)}return e}matchesNode(e,n,r){return this.dirty==Ri&&e.eq(this.node)&&dm(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new dte(this,o&&o.node,e);pte(this.node,this.innerDeco,(d,f,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,e):d.type.side>=0&&!p&&u.syncToMarks(f==this.node.childCount?Ot.none:this.node.child(f).marks,r,e),u.placeWidget(d,e,i)},(d,f,p,m)=>{u.syncToMarks(d.marks,r,e);let b;u.findNodeMatch(d,f,p,m)||l&&e.state.selection.from>i&&e.state.selection.to<i+d.nodeSize&&(b=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,f,p,b,e)||u.updateNextNode(d,f,p,e,m,i)||u.addNode(d,f,p,e,i),i+=d.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==dl)&&(o&&this.protectLocalComposition(e,o),kz(this.contentDOM,this.children,e),gu&&mte(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ze)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=gte(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new lte(this,s,n,i);e.input.compositionNodes.push(o),this.children=ow(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Ts||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Ri}updateOuterDeco(e){if(dm(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Ez(this.dom,this.nodeDOM,sw(this.outerDeco,this.node,n),sw(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function lT(t,e,n,r,i){Nz(r,e,t);let s=new ga(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Rg extends ga{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Ts||this.dirty!=Ri&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Ri||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Ri,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new Rg(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ts)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Cz extends Nh{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Ri&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class cte extends ga{constructor(e,n,r,i,s,o,l,u,d,f){super(e,n,r,i,s,o,l,d,f),this.spec=u}update(e,n,r,i){if(this.dirty==Ts)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function kz(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=cT(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof Rl){let u=r?r.previousSibling:t.lastChild;kz(o.contentDOM,o.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=cT(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const yf=function(t){t&&(this.nodeName=t)};yf.prototype=Object.create(null);const fl=[new yf];function sw(t,e,n){if(t.length==0)return fl;let r=n?fl[0]:new yf,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new yf(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new yf(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function Ez(t,e,n,r){if(n==fl&&r==fl)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=t&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=fl[0]),i=u}ute(i,l||fl[0],o)}return i}function ute(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Nz(t,e,n){return Ez(t,t,fl,sw(e,n,t.nodeType!=1))}function dm(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function cT(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class dte{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=fte(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Ri,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(e[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Rl.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(e,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Ts&&o.dom==o.contentDOM&&(o.dirty=dl),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof ga){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let f=u.dom,p,m=this.isLocked(f)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Ts&&dm(n,u.outerDeco));if(!m&&u.update(e,n,r,i))return this.destroyBetween(this.index,l),u.dom!=f&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(u,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=dl,p.updateChildren(i,o+1),p.dirty=Ri),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!dm(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=ga.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let u of l.children)u.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=ga.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Sz(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Rl;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Rg)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Nr||gr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Cz(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function fte(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Rl)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function hte(t,e){return t.type.side-e.type.side}function pte(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let d=0;d<t.childCount;d++){let f=t.child(d);r(f,i,e.forChild(s,f),d),s+=f.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let f,p;for(;o<i.length&&i[o].to==s;){let S=i[o++];S.widget&&(f?(p||(p=[f])).push(S):f=S)}if(f)if(p){p.sort(hte);for(let S=0;S<p.length;S++)n(p[S],d,!!u)}else n(f,d,!!u);let m,b;if(u)b=-1,m=u,u=null;else if(d<t.childCount)b=d,m=t.child(d++);else break;for(let S=0;S<l.length;S++)l[S].to<=s&&l.splice(S--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let v=s+m.nodeSize;if(m.isText){let S=v;o<i.length&&i[o].from<S&&(S=i[o].from);for(let k=0;k<l.length;k++)l[k].to<S&&(S=l[k].to);S<v&&(u=m.cut(S-s),m=m.cut(0,S-s),v=S,b=-1)}else for(;o<i.length&&i[o].to<v;)o++;let w=m.isInline&&!m.isLeaf?l.filter(S=>!S.inline):l.slice();r(m,w,e.forChild(s,m),b),s=v}}function mte(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function gte(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<t.childCount;){let d=t.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-e.length-l,r-l)==e)return r-e.length;let d=l<r?u.lastIndexOf(e,r-l-1):-1;if(d>=0&&d+e.length+l>=n)return l+d;if(n==r&&u.length>=r+e.length-l&&u.slice(r-l,r-l+e.length)==e)return r}}return-1}function ow(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let u=t[o],d=l,f=l+=u.size;d>=n||f<=e?s.push(u):(d<e&&s.push(u.slice(0,e-d,r)),i&&(s.push(i),i=void 0),f>n&&s.push(u.slice(n-d,u.size,r)))}return s}function F8(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(Dg(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&qe.isSelectable(p)&&i.parent&&!(p.isInline&&Fee(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;d=new qe(o==m?l:r.resolve(m))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,m=o;for(let b=0;b<n.rangeCount;b++){let v=n.getRangeAt(b);p=Math.min(p,t.docView.posFromDOM(v.startContainer,v.startOffset,1)),m=Math.max(m,t.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[u,o]=m==t.state.selection.anchor?[m,p]:[p,m],l=r.resolve(o)}else u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let f=r.resolve(u);if(!d){let p=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;d=q8(t,f,l,p)}return d}function Tz(t){return t.editable?t.hasFocus():Mz(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function oo(t,e=!1){let n=t.state.selection;if(Az(t,n),!!Tz(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&gr){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Dl(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bte(t);else{let{anchor:r,head:i}=n,s,o;uT&&!(n instanceof Ze)&&(n.$from.parent.inlineContent||(s=dT(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=dT(t,n.to))),t.docView.setSelection(r,i,t,e),uT&&(s&&fT(s),o&&fT(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yte(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const uT=Nr||gr&&mz<63;function dT(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Nr&&i&&i.contentEditable=="false")return ob(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ob(i);if(s)return ob(s)}}function ob(t){return t.contentEditable="true",Nr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function fT(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yte(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Tz(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bte(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,nr(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Br&&ma<=11&&(n.disabled=!0,n.disabled=!1)}function Az(t,e){if(e instanceof qe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(hT(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else hT(t)}function hT(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function q8(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ze.between(e,n,r)}function pT(t){return t.editable&&!t.hasFocus()?!1:Mz(t)}function Mz(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function vte(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Dl(e.node,e.offset,n.anchorNode,n.anchorOffset)}function aw(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&nt.findFrom(s,e)}function na(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function mT(t,e,n){let r=t.state.selection;if(r instanceof Ze)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return na(t,new Ze(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=aw(t.state,e);return i&&i instanceof qe?na(t,i):!1}else if(!(Ei&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?qe.isSelectable(s)?na(t,new qe(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Eh?na(t,new Ze(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof qe&&r.node.isInline)return na(t,new Ze(e>0?r.$to:r.$from));{let i=aw(t.state,e);return i?na(t,i):!1}}}function fm(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function bf(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Ic(t,e){return e<0?xte(t):wte(t)}function xte(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Di&&n.nodeType==1&&r<fm(n)&&bf(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(bf(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(_z(n))break;{let l=n.previousSibling;for(;l&&bf(l,-1);)i=n.parentNode,s=nr(l),l=l.previousSibling;if(l)n=l,r=fm(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?lw(t,n,r):i&&lw(t,i,s)}function wte(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=fm(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(bf(l,1))s=n,o=++r;else break}else{if(_z(n))break;{let l=n.nextSibling;for(;l&&bf(l,1);)s=l.parentNode,o=nr(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=fm(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&lw(t,s,o)}function _z(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Ste(t,e){for(;t&&e==t.childNodes.length&&!kh(t);)e=nr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Cte(t,e){for(;t&&!e&&!kh(t);)e=nr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function lw(t,e,n){if(e.nodeType!=3){let s,o;(o=Ste(e,n))?(e=o,n=0):(s=Cte(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Dg(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&oo(t)},50)}function gT(t,e){let n=t.state.doc.resolve(e);if(!(gr||$ee)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function yT(t,e,n){let r=t.state.selection;if(r instanceof Ze&&!r.empty||n.indexOf("s")>-1||Ei&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=aw(t.state,e);if(o&&o instanceof qe)return na(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof li?nt.near(o,e):nt.findFrom(o,e);return l?na(t,l):!1}return!1}function bT(t,e){if(!(t.state.selection instanceof Ze))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function vT(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function kte(t){if(!Nr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;vT(t,r,"true"),setTimeout(()=>vT(t,r,"false"),20)}return!1}function Ete(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Nte(t,e){let n=e.keyCode,r=Ete(e);if(n==8||Ei&&n==72&&r=="c")return bT(t,-1)||Ic(t,-1);if(n==46&&!e.shiftKey||Ei&&n==68&&r=="c")return bT(t,1)||Ic(t,1);if(n==13||n==27)return!0;if(n==37||Ei&&n==66&&r=="c"){let i=n==37?gT(t,t.state.selection.from)=="ltr"?-1:1:-1;return mT(t,i,r)||Ic(t,i)}else if(n==39||Ei&&n==70&&r=="c"){let i=n==39?gT(t,t.state.selection.from)=="ltr"?1:-1:1;return mT(t,i,r)||Ic(t,i)}else{if(n==38||Ei&&n==80&&r=="c")return yT(t,-1,r)||Ic(t,-1);if(n==40||Ei&&n==78&&r=="c")return kte(t)||yT(t,1,r)||Ic(t,1);if(r==(Ei?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function U8(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let o=t.someProp("clipboardSerializer")||Gl.fromSchema(t.state.schema),l=Iz(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,f,p=0;for(;d&&d.nodeType==1&&(f=Lz[d.nodeName.toLowerCase()]);){for(let b=f.length-1;b>=0;b--){let v=l.createElement(f[b]);for(;u.firstChild;)v.appendChild(u.firstChild);u.appendChild(v),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:m,slice:e}}function Dz(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let u=!!e&&(r||s||!n);if(u){if(t.someProp("transformPastedText",m=>{e=m(e,s||r,t)}),s)return l=new _e(xe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",m=>{l=m(l,t,!0)}),l;let p=t.someProp("clipboardTextParser",m=>m(e,i,r,t));if(p)l=p;else{let m=i.marks(),{schema:b}=t.state,v=Gl.fromSchema(b);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=o.appendChild(document.createElement("p"));w&&S.appendChild(v.serializeNode(b.text(w,m)))})}}else t.someProp("transformPastedHTML",p=>{n=p(n,t)}),o=_te(n),Eh&&Dte(o);let d=o&&o.querySelector("[data-pm-slice]"),f=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(f&&f[3])for(let p=+f[3];p>0;p--){let m=o.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;o=m}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||mf.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||f),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!Tte.test(m.parentNode.nodeName)?{ignore:!0}:null}})),f)l=Rte(xT(l,+f[1],+f[2]),f[4]);else if(l=_e.maxOpen(Ate(l.content,i),!0),l.openStart||l.openEnd){let p=0,m=0;for(let b=l.content.firstChild;p<l.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=l.content.lastChild;m<l.openEnd&&!b.type.spec.isolating;m++,b=b.lastChild);l=xT(l,p,m)}return t.someProp("transformPasted",p=>{l=p(l,t,u)}),l}const Tte=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ate(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&jz(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=Oz(o[o.length-1],s.length));let f=Rz(l,u);o.push(f),i=i.matchType(f.type),s=u}}),o)return xe.from(o)}return t}function Rz(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,xe.from(t));return t}function jz(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=jz(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(xe.from(Rz(n,t,i+1))))}}function Oz(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Oz(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(xe.empty,!0);return t.copy(n.append(r))}function cw(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=cw(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(xe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function xT(t,e,n){return e<t.openStart&&(t=new _e(cw(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new _e(cw(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Lz={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let wT=null;function Iz(){return wT||(wT=document.implementation.createHTMLDocument("title"))}let ab=null;function Mte(t){let e=window.trustedTypes;return e?(ab||(ab=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),ab.createHTML(t)):t}function _te(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Iz().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Lz[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Mte(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function Dte(t){let e=t.querySelectorAll(gr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Rte(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=xe.from(u.create(r[l+1],i)),s++,o++}return new _e(i,s,o)}const Tr={},Ar={},jte={touchstart:!0,touchmove:!0};class Ote{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Lte(t){for(let e in Tr){let n=Tr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Pte(t,r)&&!$8(t,r)&&(t.editable||!(r.type in Ar))&&n(t,r)},jte[e]?{passive:!0}:void 0)}Nr&&t.dom.addEventListener("input",()=>null),uw(t)}function fa(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ite(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function uw(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>$8(t,r))})}function $8(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Pte(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function zte(t,e){!$8(t,e)&&Tr[e.type]&&(t.editable||!(e.type in Ar))&&Tr[e.type](t,e)}Ar.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!zz(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ro&&gr&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),gu&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,ll(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Nte(t,n)?n.preventDefault():fa(t,"key")};Ar.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ar.keypress=(t,e)=>{let n=e;if(zz(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ei&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ze)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function jg(t){return{left:t.clientX,top:t.clientY}}function Bte(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function G8(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function ru(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Vte(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&qe.isSelectable(r)?(ru(t,new qe(n)),!0):!1}function Hte(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof qe&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(qe.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(ru(t,qe.create(t.state.doc,i)),!0):!1}function Fte(t,e,n,r,i){return G8(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?Hte(t,n):Vte(t,n))}function qte(t,e,n,r){return G8(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function Ute(t,e,n,r){return G8(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||$te(t,n,r)}function $te(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(ru(t,Ze.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)ru(t,Ze.create(r,l+1,l+1+o.content.size));else if(qe.isSelectable(o))ru(t,qe.create(r,l));else continue;return!0}}function W8(t){return hm(t)}const Pz=Ei?"metaKey":"ctrlKey";Tr.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=W8(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&Bte(n,t.input.lastClick)&&!n[Pz]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(jg(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Gte(t,o,n,!!r)):(s=="doubleClick"?qte:Ute)(t,o.pos,o.inside,n)?n.preventDefault():fa(t,"pointer"))};class Gte{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Pz],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let f=e.state.doc.resolve(n.pos);s=f.parent,o=f.depth?f.before():0}const l=i?null:r.target,u=l?e.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof qe&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Di&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),fa(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>oo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(jg(e))),this.updateAllowDefault(e),this.allowDefault||!n?fa(this.view,"pointer"):Fte(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Nr&&this.mightDrag&&!this.mightDrag.node.isAtom||gr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(ru(this.view,nt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):fa(this.view,"pointer")}move(e){this.updateAllowDefault(e),fa(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Tr.touchstart=t=>{t.input.lastTouch=Date.now(),W8(t),fa(t,"pointer")};Tr.touchmove=t=>{t.input.lastTouch=Date.now(),fa(t,"pointer")};Tr.contextmenu=t=>W8(t);function zz(t,e){return t.composing?!0:Nr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Wte=ro?5e3:-1;Ar.compositionstart=Ar.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ze&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),hm(t,!0),t.markCursor=null;else if(hm(t,!e.selection.empty),Di&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Bz(t,Wte)};Ar.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Bz(t,20))};function Bz(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>hm(t),e))}function Vz(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Yte());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Kte(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=Vee(e.focusNode,e.focusOffset),r=Hee(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function Yte(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function hm(t,e=!1){if(!(ro&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Vz(t),e||t.docView&&t.docView.dirty){let n=F8(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Xte(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Ff=Br&&ma<15||gu&&Gee<604;Tr.copy=Ar.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Ff?null:n.clipboardData,o=r.content(),{dom:l,text:u}=U8(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):Xte(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Zte(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function Jte(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?qf(t,r.value,null,i,e):qf(t,r.textContent,r.innerHTML,i,e)},50)}function qf(t,e,n,r,i){let s=Dz(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,i,s||_e.empty)))return!0;if(!s)return!1;let o=Zte(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Hz(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ar.paste=(t,e)=>{let n=e;if(t.composing&&!ro)return;let r=Ff?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&qf(t,Hz(r),r.getData("text/html"),i,n)?n.preventDefault():Jte(t,n)};class Fz{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const Qte=Ei?"altKey":"ctrlKey";function qz(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[Qte]}Tr.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(jg(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof qe?i.to-1:i.to))){if(r&&r.mightDrag)o=qe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=t.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=t.docView&&(o=qe.create(t.state.doc,p.posBefore))}}let l=(o||t.state.selection).content(),{dom:u,text:d,slice:f}=U8(t,l);(!n.dataTransfer.files.length||!gr||mz>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Ff?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Ff||n.dataTransfer.setData("text/plain",d),t.dragging=new Fz(f,qz(t,n),o)};Tr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ar.dragover=Ar.dragenter=(t,e)=>e.preventDefault();Ar.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(jg(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",v=>{o=v(o,t,!1)}):o=Dz(t,Hz(n.dataTransfer),Ff?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&qz(t,n));if(t.someProp("handleDrop",v=>v(t,n,o||_e.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?oz(t.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=t.state.tr;if(l){let{node:v}=r;v?v.replace(d):d.deleteSelection()}let f=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(f,f,o.content.firstChild):d.replaceRange(f,f,o),d.doc.eq(m))return;let b=d.doc.resolve(f);if(p&&qe.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new qe(b));else{let v=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((w,S,k,T)=>v=T),d.setSelection(q8(t,b,d.doc.resolve(v)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))};Tr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&oo(t)},20))};Tr.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Tr.beforeinput=(t,e)=>{if(gr&&ro&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,ll(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ar)Tr[t]=Ar[t];function Uf(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class pm{constructor(e,n){this.toDOM=e,this.spec=n||Sl,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Er(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof pm&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Uf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ya{constructor(e,n){this.attrs=e,this.spec=n||Sl}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Er(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ya&&Uf(this.attrs,e.attrs)&&Uf(this.spec,e.spec)}static is(e){return e.type instanceof ya}destroy(){}}class K8{constructor(e,n){this.attrs=e,this.spec=n||Sl}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Er(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof K8&&Uf(this.attrs,e.attrs)&&Uf(this.spec,e.spec)}destroy(){}}class Er{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Er(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Er(e,e,new pm(n,r))}static inline(e,n,r,i){return new Er(e,n,new ya(r,i))}static node(e,n,r,i){return new Er(e,n,new K8(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ya}get widget(){return this.type instanceof pm}}const Fc=[],Sl={};class en{constructor(e,n){this.local=e.length?e:Fc,this.children=n.length?n:Fc}static create(e,n){return n.length?mm(n,e,0,Sl):fr}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==fr||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Sl)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(e,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?ene(this.children,o||[],e,n,r,i,s):o?new en(o.sort(Cl),Fc):fr}add(e,n){return n.length?this==fr?en.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,u)=>{let d=u+r,f;if(f=$z(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,f,d+1):i.splice(s,0,u,u+l.nodeSize,mm(f,l,d+1,Sl)),s+=3}});let o=Uz(s?Gz(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new en(o.length?this.local.concat(o).sort(Cl):this.local,i||this.children)}remove(e){return e.length==0||this==fr?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let f=0,p;f<e.length;f++)(p=e[f])&&p.from>l&&p.to<u&&(e[f]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=fr?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new en(i,r):fr}forChild(e,n){if(this==fr)return this;if(n.isLeaf)return en.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof ya){let d=Math.max(s,u.from)-s,f=Math.min(o,u.to)-s;d<f&&(i||(i=[])).push(u.copy(d,f))}}if(i){let l=new en(i.sort(Cl),Fc);return r?new sa([l,r]):l}return r||fr}eq(e){if(this==e)return!0;if(!(e instanceof en)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Y8(this.localsInner(e))}localsInner(e){if(this==fr)return Fc;if(e.inlineContent||!this.local.some(ya.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ya||n.push(this.local[r]);return n}forEachSet(e){e(this)}}en.empty=new en([],[]);en.removeOverlap=Y8;const fr=en.empty;class sa{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Sl));return sa.from(r)}forChild(e,n){if(n.isLeaf)return en.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=fr&&(s instanceof sa?r=r.concat(s.members):r.push(s))}return sa.from(r)}eq(e){if(!(e instanceof sa)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Y8(r?n:n.sort(Cl)):Fc}static from(e){switch(e.length){case 0:return fr;case 1:return e[0];default:return new sa(e.every(n=>n instanceof en)?e:e.reduce((n,r)=>n.concat(r instanceof en?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function ene(t,e,n,r,i,s,o){let l=t.slice();for(let d=0,f=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((m,b,v,w)=>{let S=w-v-(b-m);for(let k=0;k<l.length;k+=3){let T=l[k+1];if(T<0||m>T+f-p)continue;let E=l[k]+f-p;b>=E?l[k+1]=m<=E?-2:-1:m>=f&&S&&(l[k]+=S,l[k+1]+=S)}p+=S}),f=n.maps[d].map(f,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let f=n.map(t[d]+s),p=f-i;if(p<0||p>=r.content.size){u=!0;continue}let m=n.map(t[d+1]+s,-1),b=m-i,{index:v,offset:w}=r.content.findIndex(p),S=r.maybeChild(v);if(S&&w==p&&w+S.nodeSize==b){let k=l[d+2].mapInner(n,S,f+1,t[d]+s+1,o);k!=fr?(l[d]=p,l[d+1]=b,l[d+2]=k):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=tne(l,t,e,n,i,s,o),f=mm(d,r,0,o);e=f.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,m=0;p<f.children.length;p+=3){let b=f.children[p];for(;m<l.length&&l[m]<b;)m+=3;l.splice(m,0,f.children[p],f.children[p+1],f.children[p+2])}}return new en(e.sort(Cl),l)}function Uz(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Er(i.from+e,i.to+e,i.type))}return n}function tne(t,e,n,r,i,s,o){function l(u,d){for(let f=0;f<u.local.length;f++){let p=u.local[f].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[f].spec)}for(let f=0;f<u.children.length;f+=3)l(u.children[f+2],u.children[f]+d+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&l(t[u+2],e[u]+s+1);return n}function $z(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function Gz(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function mm(t,e,n,r){let i=[],s=!1;e.forEach((l,u)=>{let d=$z(t,l,u+n);if(d){s=!0;let f=mm(d,l,n+u+1,r);f!=fr&&i.push(u,u+l.nodeSize,f)}});let o=Uz(s?Gz(t):t,-n).sort(Cl);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new en(o,i):fr}function Cl(t,e){return t.from-e.from||t.to-e.to}function Y8(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),ST(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),ST(e,i,r.copy(s.from,r.to)));break}}}return e}function ST(t,e,n){for(;e<t.length&&Cl(n,t[e])>0;)e++;t.splice(e,0,n)}function lb(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=fr&&e.push(r)}),t.cursorWrapper&&e.push(en.create(t.state.doc,[t.cursorWrapper.deco])),sa.from(e)}const nne={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},rne=Br&&ma<=11;class ine{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class sne{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ine,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Br&&ma<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),rne&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,nne)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(pT(this.view)){if(this.suppressingSelectionUpdates)return oo(this.view);if(Br&&ma<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Dl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=mu(s))n.add(s);for(let s=e.anchorNode;s;s=mu(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&pT(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(e.editable)for(let f=0;f<n.length;f++){let p=this.registerMutation(n[f],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(Di&&u.length){let f=u.filter(p=>p.nodeName=="BR");if(f.length==2){let[p,m]=f;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of f){let b=m.parentNode;b&&b.nodeName=="LI"&&(!p||lne(e,p)!=b)&&m.remove()}}}let d=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Dg(r)&&(d=F8(e))&&d.eq(nt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,oo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),one(e)),this.handleDOMChange(s,o,l,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||oo(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let f=0;f<e.addedNodes.length;f++){let p=e.addedNodes[f];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Br&&ma<=11&&e.addedNodes.length)for(let f=0;f<e.addedNodes.length;f++){let{previousSibling:p,nextSibling:m}=e.addedNodes[f];(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(s=m)}let o=i&&i.parentNode==e.target?nr(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),u=s&&s.parentNode==e.target?nr(s):e.target.childNodes.length,d=r.localPosFromDOM(e.target,u,1);return{from:l,to:d}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let CT=new WeakMap,kT=!1;function one(t){if(!CT.has(t)&&(CT.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Di,kT)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),kT=!0}}function ET(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Dl(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function ane(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return ET(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ET(t,n):null}function lne(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function cne(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),u=t.domSelectionRange(),d,f=u.anchorNode;if(f&&t.dom.contains(f.nodeType==1?f:f.parentNode)&&(d=[{node:f,offset:u.anchorOffset}],Dg(u)||d.push({node:u.focusNode,offset:u.focusOffset})),gr&&t.input.lastKeyCode===8)for(let S=s;S>i;S--){let k=r.childNodes[S-1],T=k.pmViewDesc;if(k.nodeName=="BR"&&!T){s=S;break}if(!T||T.size)break}let p=t.state.doc,m=t.someProp("domParser")||mf.fromSchema(t.state.schema),b=p.resolve(o),v=null,w=m.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:une,context:b});if(d&&d[0].pos!=null){let S=d[0].pos,k=d[1]&&d[1].pos;k==null&&(k=S),v={anchor:S+o,head:k+o}}return{doc:w,sel:v,from:o,to:l}}function une(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Nr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Nr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const dne=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function fne(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,L=F8(t,R);if(L&&!t.state.selection.eq(L)){if(gr&&ro&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",F=>F(t,ll(13,"Enter"))))return;let P=t.state.tr.setSelection(L);R=="pointer"?P.setMeta("pointer",!0):R=="key"&&P.scrollIntoView(),s&&P.setMeta("composition",s),t.dispatch(P)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let u=t.state.selection,d=cne(t,e,n),f=t.state.doc,p=f.slice(d.from,d.to),m,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(m=t.state.selection.to,b="end"):(m=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let v=mne(p.content,d.doc.content,d.from,m,b);if(v&&t.input.domChangeCount++,(gu&&t.input.lastIOSEnter>Date.now()-225||ro)&&i.some(R=>R.nodeType==1&&!dne.test(R.nodeName))&&(!v||v.endA>=v.endB)&&t.someProp("handleKeyDown",R=>R(t,ll(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!v)if(r&&u instanceof Ze&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=NT(t,t.state.doc,d.sel);if(R&&!R.eq(t.state.selection)){let L=t.state.tr.setSelection(R);s&&L.setMeta("composition",s),t.dispatch(L)}}return}t.state.selection.from<t.state.selection.to&&v.start==v.endB&&t.state.selection instanceof Ze&&(v.start>t.state.selection.from&&v.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?v.start=t.state.selection.from:v.endA<t.state.selection.to&&v.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(v.endB+=t.state.selection.to-v.endA,v.endA=t.state.selection.to)),Br&&ma<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)==" "&&(v.start--,v.endA--,v.endB--);let w=d.doc.resolveNoCache(v.start-d.from),S=d.doc.resolveNoCache(v.endB-d.from),k=f.resolve(v.start),T=w.sameParent(S)&&w.parent.inlineContent&&k.end()>=v.endA,E;if((gu&&t.input.lastIOSEnter>Date.now()-225&&(!T||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!T&&w.pos<d.doc.content.size&&(!w.sameParent(S)||!w.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(w.pos,S.pos,"",""))&&(E=nt.findFrom(d.doc.resolve(w.pos+1),1,!0))&&E.head>w.pos)&&t.someProp("handleKeyDown",R=>R(t,ll(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>v.start&&pne(f,v.start,v.endA,w,S)&&t.someProp("handleKeyDown",R=>R(t,ll(8,"Backspace")))){ro&&gr&&t.domObserver.suppressSelectionUpdates();return}gr&&v.endB==v.start&&(t.input.lastChromeDelete=Date.now()),ro&&!T&&w.start()!=S.start()&&S.parentOffset==0&&w.depth==S.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,S=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,ll(13,"Enter"))})},20));let N=v.start,A=v.endA,_=R=>{let L=R||t.state.tr.replace(N,A,d.doc.slice(v.start-d.from,v.endB-d.from));if(d.sel){let P=NT(t,L.doc,d.sel);P&&!(gr&&t.composing&&P.empty&&(v.start!=v.endB||t.input.lastChromeDelete<Date.now()-100)&&(P.head==N||P.head==L.mapping.map(A)-1)||Br&&P.empty&&P.head==N)&&L.setSelection(P)}return s&&L.setMeta("composition",s),L.scrollIntoView()},j;if(T){if(w.pos==S.pos){Br&&ma<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>oo(t),20));let R=_(t.state.tr.delete(N,A)),L=f.resolve(v.start).marksAcross(f.resolve(v.endA));L&&R.ensureMarks(L),t.dispatch(R)}else if(v.endA==v.endB&&(j=hne(w.parent.content.cut(w.parentOffset,S.parentOffset),k.parent.content.cut(k.parentOffset,v.endA-k.start())))){let R=_(t.state.tr);j.type=="add"?R.addMark(N,A,j.mark):R.removeMark(N,A,j.mark),t.dispatch(R)}else if(w.parent.child(w.index()).isText&&w.index()==S.index()-(S.textOffset?0:1)){let R=w.parent.textBetween(w.parentOffset,S.parentOffset),L=()=>_(t.state.tr.insertText(R,N,A));t.someProp("handleTextInput",P=>P(t,N,A,R,L))||t.dispatch(L())}}else t.dispatch(_())}function NT(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:q8(t,e.resolve(n.anchor),e.resolve(n.head))}function hne(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,u;for(let f=0;f<r.length;f++)i=r[f].removeFromSet(i);for(let f=0;f<n.length;f++)s=n[f].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=f=>f.mark(l.addToSet(f.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=f=>f.mark(l.removeFromSet(f.marks));else return null;let d=[];for(let f=0;f<e.childCount;f++)d.push(u(e.child(f)));if(xe.from(d).eq(t))return{mark:l,type:o}}function pne(t,e,n,r,i){if(n-e<=i.pos-r.pos||cb(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(cb(s,!0,!0));return!o.parent.isTextblock||o.pos>n||cb(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function cb(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function mne(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&t.size<e.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<e.size&&TT(e.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<t.size&&TT(t.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function TT(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Wz{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ote,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(RT),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_T(this),MT(this),this.nodeViews=DT(this),this.docView=lT(this.state.doc,AT(this),lb(this),this.dom,this),this.domObserver=new sne(this,(r,i,s,o)=>fne(this,r,i,s,o)),this.domObserver.start(),Lte(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&uw(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(RT),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Vz(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=DT(this);yne(b,this.nodeViews)&&(this.nodeViews=b,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&uw(this),this.editable=_T(this),MT(this);let u=lb(this),d=AT(this),f=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(e.doc,d,u);(p||!e.selection.eq(i.selection))&&(o=!0);let m=f=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Yee(this);if(o){this.domObserver.stop();let b=p&&(Br||gr)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&gne(i.selection,e.selection);if(p){let v=gr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Kte(this)),(s||!this.docView.update(e.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=lT(e.doc,d,u,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&vte(this))?oo(this,b):(Az(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),f=="reset"?this.dom.scrollTop=0:f=="to selection"?this.scrollToSelection():m&&Xee(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof qe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&nT(this,n.getBoundingClientRect(),e)}else nT(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new Fz(e.slice,e.move,i<0?void 0:qe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Br){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Zee(this.dom),oo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return nte(this,e)}coordsAtPos(e,n=1){return xz(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return ate(this,n||this.state,e)}pasteHTML(e,n){return qf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return qf(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return U8(this,e)}destroy(){this.docView&&(Ite(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zee())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return zte(this,e)}domSelectionRange(){let e=this.domSelection();return e?Nr&&this.root.nodeType===11&&qee(this.dom.ownerDocument)==this.dom&&ane(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Wz.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function AT(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Er.node(0,t.state.doc.content.size,e)]}function MT(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Er.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _T(t){return!t.someProp("editable",e=>e(t.state)===!1)}function gne(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function DT(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function yne(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function RT(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ca={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gm={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},bne=typeof navigator<"u"&&/Mac/.test(navigator.platform),vne=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rr=0;rr<10;rr++)Ca[48+rr]=Ca[96+rr]=String(rr);for(var rr=1;rr<=24;rr++)Ca[rr+111]="F"+rr;for(var rr=65;rr<=90;rr++)Ca[rr]=String.fromCharCode(rr+32),gm[rr]=String.fromCharCode(rr);for(var ub in Ca)gm.hasOwnProperty(ub)||(gm[ub]=Ca[ub]);function xne(t){var e=bne&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||vne&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?gm:Ca)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const wne=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Sne=typeof navigator<"u"&&/Win/.test(navigator.platform);function Cne(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let u=e[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))wne?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function kne(t){let e=Object.create(null);for(let n in t)e[Cne(n)]=t[n];return e}function db(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Ene(t){return new un({props:{handleKeyDown:Kz(t)}})}function Kz(t){let e=kne(t);return function(n,r){let i=xne(r),s,o=e[db(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[db(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(Sne&&r.ctrlKey&&r.altKey)&&(s=Ca[r.keyCode])&&s!=i){let l=e[db(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const X8=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Yz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Xz=(t,e,n)=>{let r=Yz(t,n);if(!r)return!1;let i=Z8(r);if(!i){let o=r.blockRange(),l=o&&Ou(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(sB(t,i,e,-1))return!0;if(r.parent.content.size==0&&(yu(s,"end")||qe.isSelectable(s)))for(let o=r.depth;;o--){let l=Mg(t.doc,r.before(o),r.after(o),_e.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(yu(s,"end")?nt.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):qe.create(u.doc,i.pos-s.nodeSize)),e(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},Nne=(t,e,n)=>{let r=Yz(t,n);if(!r)return!1;let i=Z8(r);return i?Zz(t,i,e):!1},Tne=(t,e,n)=>{let r=Qz(t,n);if(!r)return!1;let i=J8(r);return i?Zz(t,i,e):!1};function Zz(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let f=i.lastChild;if(!f)return!1;i=f}let o=e.nodeAfter,l=o,u=e.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let f=l.firstChild;if(!f)return!1;l=f}let d=Mg(t.doc,s,u,_e.empty);if(!d||d.from!=s||d instanceof qn&&d.slice.size>=u-s)return!1;if(n){let f=t.tr.step(d);f.setSelection(Ze.create(f.doc,s)),n(f.scrollIntoView())}return!0}function yu(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Jz=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Z8(r)}let o=s&&s.nodeBefore;return!o||!qe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(qe.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Z8(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Qz(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const eB=(t,e,n)=>{let r=Qz(t,n);if(!r)return!1;let i=J8(r);if(!i)return!1;let s=i.nodeAfter;if(sB(t,i,e,1))return!0;if(r.parent.content.size==0&&(yu(s,"start")||qe.isSelectable(s))){let o=Mg(t.doc,r.before(),r.after(),_e.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(yu(s,"start")?nt.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):qe.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},tB=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=J8(r)}let o=s&&s.nodeAfter;return!o||!qe.isSelectable(o)?!1:(e&&e(t.tr.setSelection(qe.create(t.doc,s.pos)).scrollIntoView()),!0)};function J8(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Ane=(t,e)=>{let n=t.selection,r=n instanceof qe,i;if(r){if(n.node.isTextblock||!Da(t.doc,n.from))return!1;i=n.from}else if(i=Ag(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(qe.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},Mne=(t,e)=>{let n=t.selection,r;if(n instanceof qe){if(n.node.isTextblock||!Da(t.doc,n.to))return!1;r=n.to}else if(r=Ag(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},_ne=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ou(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},nB=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Q8(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Dne=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Q8(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),u=t.tr.replaceWith(l,l,o.createAndFill());u.setSelection(nt.near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0},rB=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof li||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Q8(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Ze.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},iB=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(so(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ou(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function Rne(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof qe&&e.selection.node.isBlock)return!r.parentOffset||!so(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){u=r.end(b)==r.pos+(r.depth-b),d=r.start(b)==r.pos-(r.depth-b),l=Q8(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),s.unshift(u&&l?{type:l}:null),o=b;break}else{if(b==1)return!1;s.unshift(null)}let f=e.tr;(e.selection instanceof Ze||e.selection instanceof li)&&f.deleteSelection();let p=f.mapping.map(r.pos),m=so(f.doc,p,s.length,s);if(m||(s[0]=l?{type:l}:null,m=so(f.doc,p,s.length,s)),!m)return!1;if(f.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let b=f.mapping.map(r.before(o)),v=f.doc.resolve(b);l&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,l)&&f.setNodeMarkup(f.mapping.map(r.before(o)),l)}return n&&n(f.scrollIntoView()),!0}}const jne=Rne(),One=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(qe.create(t.doc,i))),!0)};function Lne(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Da(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function sB(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&Lne(t,e,n))return!0;let d=!u&&e.parent.canReplace(e.index(),e.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let b=e.pos+s.nodeSize,v=xe.empty;for(let k=o.length-1;k>=0;k--)v=xe.from(o[k].create(null,v));v=xe.from(i.copy(v));let w=t.tr.step(new $n(e.pos-1,b,e.pos,b,new _e(v,1,0),o.length,!0)),S=w.doc.resolve(b+2*o.length);S.nodeAfter&&S.nodeAfter.type==i.type&&Da(w.doc,S.pos)&&w.join(S.pos),n(w.scrollIntoView())}return!0}let f=s.type.spec.isolating||r>0&&u?null:nt.findFrom(e,1),p=f&&f.$from.blockRange(f.$to),m=p&&Ou(p);if(m!=null&&m>=e.depth)return n&&n(t.tr.lift(p,m).scrollIntoView()),!0;if(d&&yu(s,"start",!0)&&yu(i,"end")){let b=i,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let w=s,S=1;for(;!w.isTextblock;w=w.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,w.content)){if(n){let k=xe.empty;for(let E=v.length-1;E>=0;E--)k=xe.from(v[E].copy(k));let T=t.tr.step(new $n(e.pos-v.length,e.pos+s.nodeSize,e.pos+S,e.pos+s.nodeSize-S,new _e(k,v.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function oB(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ze.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const Ine=oB(-1),Pne=oB(1);function zne(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&B8(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function jT(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)i=!0;else{let f=n.doc.resolve(d),p=f.index();i=f.parent.canReplaceWith(p,p+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,t,e)}r(s.scrollIntoView())}return!0}}function eS(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}eS(X8,Xz,Jz);eS(X8,eB,tB);eS(nB,rB,iB,jne);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Bne(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return Vne(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function Vne(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=o.resolve(e.start-2);s=new cm(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new cm(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=B8(s,n,r,e);return l?(t&&Hne(t,e,l,i,n),!0):!1}function Hne(t,e,n,r,i){let s=xe.empty;for(let f=n.length-1;f>=0;f--)s=xe.from(n[f].type.create(n[f].attrs,s));t.step(new $n(e.start-(r?2:0),e.end,e.start,e.end,new _e(s,0,0),n.length,!0));let o=0;for(let f=0;f<n.length;f++)n[f].type==i&&(o=f+1);let l=n.length-o,u=e.start+n.length-(r?2:0),d=e.parent;for(let f=e.startIndex,p=e.endIndex,m=!0;f<p;f++,m=!1)!m&&so(t.doc,u,l)&&(t.split(u,l),u+=2*l),u+=d.child(f).nodeSize;return t}function Fne(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?qne(e,n,t,s):Une(e,n,s):!0:!1}}function qne(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new $n(s-1,o,s,o,new _e(xe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new cm(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Ou(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return Da(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),e(i.scrollIntoView()),!0}function Une(t,e,n){let r=t.tr,i=n.parent;for(let b=n.end,v=n.endIndex-1,w=n.startIndex;v>w;v--)b-=i.child(v).nodeSize,r.delete(b-1,b+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),f=s.index(-1);if(!d.canReplace(f+(l?0:1),f+1,o.content.append(u?xe.empty:xe.from(i))))return!1;let p=s.pos,m=p+o.nodeSize;return r.step(new $n(p-(l?1:0),m+(u?1:0),p+1,m-1,new _e((l?xe.empty:xe.from(i.copy(xe.empty))).append(u?xe.empty:xe.from(i.copy(xe.empty))),l?0:1,u?0:1),l?0:1)),e(r.scrollIntoView()),!0}function $ne(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=t)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,f=xe.from(d?t.create():null),p=new _e(xe.from(t.create(null,xe.from(l.type.create(null,f)))),d?3:1,0),m=s.start,b=s.end;n(e.tr.step(new $n(m-(d?3:1),b,m,b,p,1,!0)).scrollIntoView())}return!0}}var Gne=Object.defineProperty,aB=(t,e)=>{for(var n in e)Gne(t,n,{get:e[n],enumerable:!0})};function Og(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Lg=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([o,l])=>[o,(...d)=>{const f=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),f}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!t,u=t||i.tr,d=()=>(!l&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),f={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...v)=>{const w=this.buildProps(u,e),S=m(...v)(w);return o.push(S),f}])),run:d};return f}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:t,editor:r,view:s,state:Og({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},Wne=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}};function lB(t,e){const n=new dz(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var cB=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&cB(r)}return t};function l0(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return cB(n)}function $f(t,e,n){if(t instanceof pa||t instanceof xe)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return xe.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),$f("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new YP({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?mf.fromSchema(u).parseSlice(l0(t),n.parseOptions):mf.fromSchema(u).parse(l0(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=mf.fromSchema(e);return n.slice?s.parseSlice(l0(t),n.parseOptions).content:s.parse(l0(t),n.parseOptions)}return $f("",e,n)}function dw(t,e,n={},r={}){return $f(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function Kne(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Yne(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function Xne(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ig(t){return e=>Xne(e.$from,t)}function He(t,e,n){return t.config[e]===void 0&&t.parent?He(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?He(t.parent,e,n):null}):t.config[e]}function tS(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=He(e,"addExtensions",n);return r?[e,...tS(r())]:e}).flat(10)}function nS(t,e){const n=Gl.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function uB(t){return typeof t=="function"}function Et(t,e=void 0,...n){return uB(t)?e?t.bind(e)(...n):t(...n):t}function Zne(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Gf(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function dB(t){const e=[],{nodeExtensions:n,markExtensions:r}=Gf(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=He(o,"addGlobalAttributes",l);if(!u)return;u().forEach(f=>{f.types.forEach(p=>{Object.entries(f.attributes).forEach(([m,b])=>{e.push({type:p,name:m,attribute:{...s,...b}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=He(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([f,p])=>{const m={...s,...p};typeof m?.default=="function"&&(m.default=m.default()),m?.isRequired&&m?.default===void 0&&delete m.default,e.push({type:o.name,name:f,attribute:m})})}),e}function Tn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(f=>!u.includes(f));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(f=>f.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(f=>f.trim()).filter(Boolean):[],d=new Map;u.forEach(f=>{const[p,m]=f.split(":").map(b=>b.trim());d.set(p,m)}),l.forEach(f=>{const[p,m]=f.split(":").map(b=>b.trim());d.set(p,m)}),r[i]=Array.from(d.entries()).map(([f,p])=>`${f}: ${p}`).join("; ")}else r[i]=s}),r},{})}function ym(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Tn(n,r),{})}function Jne(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function OT(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):Jne(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function LT(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&Zne(n)?!1:n!=null))}function Qne(t,e){var n;const r=dB(t),{nodeExtensions:i,markExtensions:s}=Gf(t),o=(n=i.find(d=>He(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const f=r.filter(k=>k.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},m=t.reduce((k,T)=>{const E=He(T,"extendNodeSchema",p);return{...k,...E?E(d):{}}},{}),b=LT({...m,content:Et(He(d,"content",p)),marks:Et(He(d,"marks",p)),group:Et(He(d,"group",p)),inline:Et(He(d,"inline",p)),atom:Et(He(d,"atom",p)),selectable:Et(He(d,"selectable",p)),draggable:Et(He(d,"draggable",p)),code:Et(He(d,"code",p)),whitespace:Et(He(d,"whitespace",p)),linebreakReplacement:Et(He(d,"linebreakReplacement",p)),defining:Et(He(d,"defining",p)),isolating:Et(He(d,"isolating",p)),attrs:Object.fromEntries(f.map(k=>{var T,E;return[k.name,{default:(T=k?.attribute)==null?void 0:T.default,validate:(E=k?.attribute)==null?void 0:E.validate}]}))}),v=Et(He(d,"parseHTML",p));v&&(b.parseDOM=v.map(k=>OT(k,f)));const w=He(d,"renderHTML",p);w&&(b.toDOM=k=>w({node:k,HTMLAttributes:ym(k,f)}));const S=He(d,"renderText",p);return S&&(b.toText=S),[d.name,b]})),u=Object.fromEntries(s.map(d=>{const f=r.filter(S=>S.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:e},m=t.reduce((S,k)=>{const T=He(k,"extendMarkSchema",p);return{...S,...T?T(d):{}}},{}),b=LT({...m,inclusive:Et(He(d,"inclusive",p)),excludes:Et(He(d,"excludes",p)),group:Et(He(d,"group",p)),spanning:Et(He(d,"spanning",p)),code:Et(He(d,"code",p)),attrs:Object.fromEntries(f.map(S=>{var k,T;return[S.name,{default:(k=S?.attribute)==null?void 0:k.default,validate:(T=S?.attribute)==null?void 0:T.validate}]}))}),v=Et(He(d,"parseHTML",p));v&&(b.parseDOM=v.map(S=>OT(S,f)));const w=He(d,"renderHTML",p);return w&&(b.toDOM=S=>w({mark:S,HTMLAttributes:ym(S,f)})),[d.name,b]}));return new YP({topNode:o,nodes:l,marks:u})}function ere(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function rS(t){return t.sort((n,r)=>{const i=He(n,"priority")||100,s=He(r,"priority")||100;return i>s?-1:i<s?1:0})}function fB(t){const e=rS(tS(t)),n=ere(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function hB(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(u,d,f,p)=>{var m;u.isBlock&&d>r&&(l+=s);const b=o?.[u.type.name];if(b)return f&&(l+=b({node:u,pos:d,parent:f,index:p,range:e})),!1;u.isText&&(l+=(m=u?.text)==null?void 0:m.slice(Math.max(r,d)-d,i-d))}),l}function tre(t,e){const n={from:0,to:t.content.size};return hB(t,n,e)}function pB(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function mo(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}function mB(t,e){const n=mo(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function An(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function nre(t,e){const n=An(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Pg(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function gB(t,e){const n=Pg(typeof e=="string"?e:e.name,t.schema);return n==="node"?nre(t,e):n==="mark"?mB(t,e):{}}function rre(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function ire(t){const e=rre(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function yB(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=e.slice(s).map(l,-1),f=e.slice(s).map(u),p=e.invert().map(d,-1),m=e.invert().map(f);r.push({oldRange:{from:p,to:m},newRange:{from:d,to:f}})})}),ire(r)}function iS(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function bm(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:iS(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function bB(t,e,n={}){return t.find(r=>r.type===e&&bm(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function IT(t,e,n={}){return!!bB(t,e,n)}function sS(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(f=>f.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(f=>f.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!bB([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&IT([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;u<t.parent.childCount&&IT([...t.parent.child(u).marks],e,n);)d+=t.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function oS(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=sS(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var sre=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===e?o=l:s-=1}return[o,s]};function fb(t,e){return e.nodes[t]||e.marks[t]||null}function P0(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var ore=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var u,d;const f=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?f:f.slice(0,Math.max(0,r-s))}),n};function fw(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?mo(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>bm(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:m})=>{const b=p.pos,v=m.pos;t.doc.nodesBetween(b,v,(w,S)=>{if(!w.isText&&!w.marks.length)return;const k=Math.max(b,S),T=Math.min(v,S+w.nodeSize),E=T-k;o+=E,l.push(...w.marks.map(N=>({mark:N,from:k,to:T})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>bm(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,m)=>p+m.to-m.from,0);return(u>0?u+d:u)>=o}function ka(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?An(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const b=Math.max(r,m),v=Math.min(i,m+p.nodeSize);l.push({node:p,from:b,to:v})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>bm(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,m)=>p+m.to-m.from,0)>=u}function are(t,e,n={}){if(!e)return ka(t,null,n)||fw(t,null,n);const r=Pg(e,t.schema);return r==="node"?ka(t,e,n):r==="mark"?fw(t,e,n):!1}var lre=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=Ig(l=>l.type.name===e)(t.selection);if(!s)return!1;const o=t.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},cre=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function PT(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function zT(t,e){const{nodeExtensions:n}=Gf(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Et(He(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function zg(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(zg(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function vB(t){return t instanceof qe}function xB(t){return t instanceof Ze}function hl(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function wB(t,e=null){if(!e)return null;const n=nt.atStart(t),r=nt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ze.create(t,hl(0,i,s),hl(t.content.size,i,s)):Ze.create(t,hl(e,i,s),hl(e,i,s))}function ure(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof qn||i instanceof $n))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,u,d,f)=>{o===0&&(o=f)}),t.setSelection(nt.near(t.doc.resolve(o),n))}var Bg=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},dre=(t,e)=>{if(iS(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function c0(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(e=d.nodeBefore||d.nodeAfter)!=null&&e.marks.find(m=>m.type.spec.code))return!1;let f=!1;const p=ore(d)+s;return o.forEach(m=>{if(f)return;const b=dre(p,m.find);if(!b)return;const v=u.state.tr,w=Og({state:u.state,transaction:v}),S={from:r-(b[0].length-s.length),to:i},{commands:k,chain:T,can:E}=new Lg({editor:n,state:w});m.handler({state:w,range:S,match:b,commands:k,chain:T,can:E})===null||!v.steps.length||(m.undoable&&v.setMeta(l,{transform:v,from:r,to:i,text:s}),u.dispatch(v),f=!0)}),f}function fre(t){const{editor:e,rules:n}=t,r=new un({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:f}=u;typeof f=="string"?f=f:f=nS(xe.from(f),o.schema);const{from:p}=u,m=p+f.length;c0({editor:e,from:p,to:m,text:f,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return c0({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&c0({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?c0({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function hre(t){return Object.prototype.toString.call(t).slice(8,-1)}function u0(t){return hre(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function SB(t,e){const n={...t};return u0(t)&&u0(e)&&Object.keys(e).forEach(r=>{u0(e[r])&&u0(t[r])?n[r]=SB(t[r],e[r]):n[r]=e[r]}),n}var aS=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Et(He(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Et(He(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>SB(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Wl=class CB extends aS{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new CB(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function pre(t){return typeof t=="number"}var mre=class{constructor(t){this.find=t.find,this.handler=t.handler}},gre=(t,e,n)=>{if(iS(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function yre(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:u,chain:d,can:f}=new Lg({editor:e,state:n}),p=[];return n.doc.nodesBetween(r,i,(b,v)=>{var w,S,k,T,E;if((S=(w=b.type)==null?void 0:w.spec)!=null&&S.code||!(b.isText||b.isTextblock||b.isInline))return;const N=(E=(T=(k=b.content)==null?void 0:k.size)!=null?T:b.nodeSize)!=null?E:0,A=Math.max(r,v),_=Math.min(i,v+N);if(A>=_)return;const j=b.isText?b.text||"":b.textBetween(A-v,_-v,void 0,"");gre(j,s.find,o).forEach(L=>{if(L.index===void 0)return;const P=A+L.index+1,F=P+L[0].length,V={from:n.tr.mapping.map(P),to:n.tr.mapping.map(F)},q=s.handler({state:n,range:V,match:L,commands:u,chain:d,can:f,pasteEvent:o,dropEvent:l});p.push(q)})}),p.every(b=>b!==null)}var d0=null,bre=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function vre(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:f,from:p,to:m,rule:b,pasteEvt:v})=>{const w=f.tr,S=Og({state:f,transaction:w});if(!(!yre({editor:e,state:S,from:Math.max(p-1,0),to:m.b-1,rule:b,pasteEvent:v,dropEvent:l})||!w.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(f=>new un({view(p){const m=v=>{var w;r=(w=p.dom.parentElement)!=null&&w.contains(v.target)?p.dom.parentElement:null,r&&(d0=e)},b=()=>{d0&&(d0=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(s=r===p.dom.parentElement,l=m,!s){const b=d0;b?.isEditable&&setTimeout(()=>{const v=b.state.selection;v&&b.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,m)=>{var b;const v=(b=m.clipboardData)==null?void 0:b.getData("text/html");return o=m,i=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(p,m,b)=>{const v=p[0],w=v.getMeta("uiEvent")==="paste"&&!i,S=v.getMeta("uiEvent")==="drop"&&!s,k=v.getMeta("applyPasteRules"),T=!!k;if(!w&&!S&&!T)return;if(T){let{text:A}=k;typeof A=="string"?A=A:A=nS(xe.from(A),b.schema);const{from:_}=k,j=_+A.length,R=bre(A);return u({rule:f,state:b,from:_,to:{b:j},pasteEvt:R})}const E=m.doc.content.findDiffStart(b.doc.content),N=m.doc.content.findDiffEnd(b.doc.content);if(!(!pre(E)||!N||E===N.b))return u({rule:f,state:b,from:E,to:N,pasteEvt:o})}}))}var Vg=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.extensions=fB(t),this.schema=Qne(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:fb(e.name,this.schema)},r=He(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return rS([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:fb(r.name,this.schema)},s=[],o=He(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&He(r,"exitable",i)&&(l.ArrowRight=()=>Wl.handleExit({editor:t,mark:r})),o){const m=Object.fromEntries(Object.entries(o()).map(([b,v])=>[b,()=>v({editor:t})]));l={...l,...m}}const u=Ene(l);s.push(u);const d=He(r,"addInputRules",i);if(PT(r,t.options.enableInputRules)&&d){const m=d();if(m&&m.length){const b=fre({editor:t,rules:m}),v=Array.isArray(b)?b:[b];s.push(...v)}}const f=He(r,"addPasteRules",i);if(PT(r,t.options.enablePasteRules)&&f){const m=f();if(m&&m.length){const b=vre({editor:t,rules:m});s.push(...b)}}const p=He(r,"addProseMirrorPlugins",i);if(p){const m=p();s.push(...m)}return s})}get attributes(){return dB(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Gf(this.extensions);return Object.fromEntries(e.filter(n=>!!He(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:An(n.name,this.schema)},s=He(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,f,p)=>{const m=ym(l,r);return s()({node:l,view:u,getPos:d,decorations:f,innerDecorations:p,editor:t,extension:n,HTMLAttributes:m})};return[n.name,o]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Gf(this.extensions);return Object.fromEntries(e.filter(n=>!!He(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:mo(n.name,this.schema)},s=He(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const f=ym(l,r);return s()({mark:l,view:u,inline:d,editor:t,extension:n,HTMLAttributes:f,updateAttributes:p=>{Lie(l,t,p)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:fb(e.name,this.schema)};e.type==="mark"&&((n=Et(He(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=He(e,"onBeforeCreate",r),s=He(e,"onCreate",r),o=He(e,"onUpdate",r),l=He(e,"onSelectionUpdate",r),u=He(e,"onTransaction",r),d=He(e,"onFocus",r),f=He(e,"onBlur",r),p=He(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),f&&this.editor.on("blur",f),p&&this.editor.on("destroy",p)})}};Vg.resolve=fB;Vg.sort=rS;Vg.flatten=tS;var xre={};aB(xre,{ClipboardTextSerializer:()=>EB,Commands:()=>AB,Delete:()=>MB,Drop:()=>_B,Editable:()=>DB,FocusEvents:()=>jB,Keymap:()=>OB,Paste:()=>LB,Tabindex:()=>IB,focusEventsPluginKey:()=>RB});var mn=class kB extends aS{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new kB(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},EB=mn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new un({key:new Wn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(f=>f.$from.pos)),l=Math.max(...s.map(f=>f.$to.pos)),u=pB(n);return hB(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),NB={};aB(NB,{blur:()=>wre,clearContent:()=>Sre,clearNodes:()=>Cre,command:()=>kre,createParagraphNear:()=>Ere,cut:()=>Nre,deleteCurrentNode:()=>Tre,deleteNode:()=>Are,deleteRange:()=>Mre,deleteSelection:()=>_re,enter:()=>Dre,exitCode:()=>Rre,extendMarkRange:()=>jre,first:()=>Ore,focus:()=>Ire,forEach:()=>Pre,insertContent:()=>zre,insertContentAt:()=>Vre,joinBackward:()=>qre,joinDown:()=>Fre,joinForward:()=>Ure,joinItemBackward:()=>$re,joinItemForward:()=>Gre,joinTextblockBackward:()=>Wre,joinTextblockForward:()=>Kre,joinUp:()=>Hre,keyboardShortcut:()=>Xre,lift:()=>Zre,liftEmptyBlock:()=>Jre,liftListItem:()=>Qre,newlineInCode:()=>eie,resetAttributes:()=>tie,scrollIntoView:()=>nie,selectAll:()=>rie,selectNodeBackward:()=>iie,selectNodeForward:()=>sie,selectParentNode:()=>oie,selectTextblockEnd:()=>aie,selectTextblockStart:()=>lie,setContent:()=>cie,setMark:()=>die,setMeta:()=>fie,setNode:()=>hie,setNodeSelection:()=>pie,setTextSelection:()=>mie,sinkListItem:()=>gie,splitBlock:()=>yie,splitListItem:()=>bie,toggleList:()=>vie,toggleMark:()=>xie,toggleNode:()=>wie,toggleWrap:()=>Sie,undoInputRule:()=>Cie,unsetAllMarks:()=>kie,unsetMark:()=>Eie,updateAttributes:()=>Nie,wrapIn:()=>Tie,wrapInList:()=>Aie});var wre=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),Sre=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Cre=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:f}=e,p=d.resolve(f.map(u)),m=d.resolve(f.map(u+l.nodeSize)),b=p.blockRange(m);if(!b)return;const v=Ou(b);if(l.type.isTextblock){const{defaultType:w}=p.parent.contentMatchAt(p.index());e.setNodeMarkup(b.start,w)}(v||v===0)&&e.lift(b,v)})}),!0},kre=t=>e=>t(e),Ere=()=>({state:t,dispatch:e})=>rB(t,e),Nre=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ze(r.doc.resolve(Math.max(o-1,0)))),!0},Tre=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),u=i.after(s);t.delete(l,u).scrollIntoView()}return!0}return!1},Are=t=>({tr:e,state:n,dispatch:r})=>{const i=An(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);e.delete(u,d).scrollIntoView()}return!0}return!1},Mre=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},_re=()=>({state:t,dispatch:e})=>X8(t,e),Dre=()=>({commands:t})=>t.keyboardShortcut("Enter"),Rre=()=>({state:t,dispatch:e})=>Dne(t,e),jre=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=mo(t,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:f}=l;if(i){const p=sS(u,s,e);if(p&&p.from<=d&&p.to>=f){const m=Ze.create(o,p.from,p.to);n.setSelection(m)}}return!0},Ore=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Lre(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function lS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Ire=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(lS()||Lre())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!xB(n.state.selection))return o(),!0;const l=wB(i.doc,t)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Pre=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),zre=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Bre=t=>!("type"in t),Vre=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=S=>{s.emit("contentError",{editor:s,error:S,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{$f(e,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(S){u(S)}try{l=$f(e,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(S){return u(S),!1}let{from:f,to:p}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},m=!0,b=!0;if((Bre(l)?l:[l]).forEach(S=>{S.check(),m=m?S.isText&&S.marks.length===0:!1,b=b?S.isBlock:!1}),f===p&&b){const{parent:S}=r.doc.resolve(f);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(f-=1,p+=1)}let w;if(m){if(Array.isArray(e))w=e.map(S=>S.text||"").join("");else if(e instanceof xe){let S="";e.forEach(k=>{k.text&&(S+=k.text)}),w=S}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,f,p)}else{w=l;const S=r.doc.resolve(f),k=S.node(),T=S.parentOffset===0,E=k.isText||k.isTextblock,N=k.content.size>0;T&&E&&N&&(f=Math.max(0,f-1)),r.replaceWith(f,p,w)}n.updateSelection&&ure(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:f,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:f,text:w})}return!0},Hre=()=>({state:t,dispatch:e})=>Ane(t,e),Fre=()=>({state:t,dispatch:e})=>Mne(t,e),qre=()=>({state:t,dispatch:e})=>Xz(t,e),Ure=()=>({state:t,dispatch:e})=>eB(t,e),$re=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ag(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Gre=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Ag(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},Wre=()=>({state:t,dispatch:e})=>Nne(t,e),Kre=()=>({state:t,dispatch:e})=>Tne(t,e);function TB(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Yre(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const u=e[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))lS()||TB()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var Xre=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=Yre(t).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const f=d.map(r.mapping);f&&i&&r.maybeStep(f)}),!0},Zre=(t,e={})=>({state:n,dispatch:r})=>{const i=An(t,n.schema);return ka(n,i,e)?_ne(n,r):!1},Jre=()=>({state:t,dispatch:e})=>iB(t,e),Qre=t=>({state:e,dispatch:n})=>{const r=An(t,e.schema);return Fne(r)(e,n)},eie=()=>({state:t,dispatch:e})=>nB(t,e);function BT(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var tie=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Pg(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=An(t,r.schema)),l==="mark"&&(o=mo(t,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,f)=>{s&&s===d.type&&n.setNodeMarkup(f,void 0,BT(d.attrs,e)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(f,f+d.nodeSize,o.create(BT(p.attrs,e)))})})}),!0):!1},nie=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),rie=()=>({tr:t,dispatch:e})=>{if(e){const n=new li(t.doc);t.setSelection(n)}return!0},iie=()=>({state:t,dispatch:e})=>Jz(t,e),sie=()=>({state:t,dispatch:e})=>tB(t,e),oie=()=>({state:t,dispatch:e})=>One(t,e),aie=()=>({state:t,dispatch:e})=>Pne(t,e),lie=()=>({state:t,dispatch:e})=>Ine(t,e),cie=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=dw(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function uie(t,e,n){var r;const{selection:i}=e;let s=null;if(xB(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,u.pos,(f,p,m)=>{if(d)return!1;if(f.isInline){const b=!m||m.type.allowsMarkType(n),v=!!n.isInSet(f.marks)||!f.marks.some(w=>w.type.excludes(n));d=b&&v}return!d}),d})}var die=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=mo(t,r.schema);if(i)if(o){const d=mB(r,u);n.addStoredMark(u.create({...d,...e}))}else l.forEach(d=>{const f=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(f,p,(m,b)=>{const v=Math.max(b,f),w=Math.min(b+m.nodeSize,p);m.marks.find(k=>k.type===u)?m.marks.forEach(k=>{u===k.type&&n.addMark(v,w,u.create({...k.attrs,...e}))}):n.addMark(v,w,u.create(e))})});return uie(r,n,u)},fie=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),hie=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=An(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>jT(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>jT(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},pie=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=hl(t,0,r.content.size),s=qe.create(r,i);e.setSelection(s)}return!0},mie=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ze.atStart(r).from,l=Ze.atEnd(r).to,u=hl(i,o,l),d=hl(s,o,l),f=Ze.create(r,u,d);e.setSelection(f)}return!0},gie=t=>({state:e,dispatch:n})=>{const r=An(t,e.schema);return $ne(r)(e,n)};function VT(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var yie=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:u}=s,d=i.extensionManager.attributes,f=P0(d,l.node().type.name,l.node().attrs);if(s instanceof qe&&s.node.isBlock)return!l.parentOffset||!so(o,l.pos)?!1:(r&&(t&&VT(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,m=l.depth===0?void 0:Kne(l.node(-1).contentMatchAt(l.indexAfter(-1)));let b=p&&m?[{type:m,attrs:f}]:void 0,v=so(e.doc,e.mapping.map(l.pos),1,b);if(!b&&!v&&so(e.doc,e.mapping.map(l.pos),1,m?[{type:m}]:void 0)&&(v=!0,b=m?[{type:m,attrs:f}]:void 0),r){if(v&&(s instanceof Ze&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,b),m&&!p&&!l.parentOffset&&l.parent.type!==m)){const w=e.mapping.map(l.before()),S=e.doc.resolve(w);l.node(-1).canReplaceWith(S.index(),S.index()+1,m)&&e.setNodeMarkup(e.mapping.map(l.before()),m)}t&&VT(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return v},bie=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=An(t,r.schema),{$from:u,$to:d}=r.selection,f=r.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const m=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let k=xe.empty;const T=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-T;R>=u.depth-3;R-=1)k=xe.from(u.node(R).copy(k));const E=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,N={...P0(m,u.node().type.name,u.node().attrs),...e},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(N))||void 0;k=k.append(xe.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(T-1));n.replace(_,u.after(-E),new _e(k,4-T,0));let j=-1;n.doc.nodesBetween(_,n.doc.content.size,(R,L)=>{if(j>-1)return!1;R.isTextblock&&R.content.size===0&&(j=L+1)}),j>-1&&n.setSelection(Ze.near(n.doc.resolve(j))),n.scrollIntoView()}return!0}const b=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,v={...P0(m,p.type.name,p.attrs),...e},w={...P0(m,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,d.pos);const S=b?[{type:l,attrs:v},{type:b,attrs:w}]:[{type:l,attrs:v}];if(!so(n.doc,u.pos,2))return!1;if(i){const{selection:k,storedMarks:T}=r,{splittableMarks:E}=s.extensionManager,N=T||k.$to.parentOffset&&k.$from.marks();if(n.split(u.pos,2,S).scrollIntoView(),!N||!i)return!0;const A=N.filter(_=>E.includes(_.type.name));n.ensureMarks(A)}return!0},hb=(t,e)=>{const n=Ig(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Da(t.doc,n.pos)&&t.join(n.pos),!0},pb=(t,e)=>{const n=Ig(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&Da(t.doc,r)&&t.join(r),!0},vie=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:f})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,b=An(t,o.schema),v=An(e,o.schema),{selection:w,storedMarks:S}=o,{$from:k,$to:T}=w,E=k.blockRange(T),N=S||w.$to.parentOffset&&w.$from.marks();if(!E)return!1;const A=Ig(_=>zT(_.type.name,p))(w);if(E.depth>=1&&A&&E.depth-A.depth<=1){if(A.node.type===b)return d.liftListItem(v);if(zT(A.node.type.name,p)&&b.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,b),!0)).command(()=>hb(s,b)).command(()=>pb(s,b)).run()}return!n||!N||!l?u().command(()=>f().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>hb(s,b)).command(()=>pb(s,b)).run():u().command(()=>{const _=f().wrapInList(b,r),j=N.filter(R=>m.includes(R.type.name));return s.ensureMarks(j),_?!0:d.clearNodes()}).wrapInList(b,r).command(()=>hb(s,b)).command(()=>pb(s,b)).run()},xie=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=mo(t,r.schema);return fw(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},wie=(t,e,n={})=>({state:r,commands:i})=>{const s=An(t,r.schema),o=An(e,r.schema),l=ka(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},Sie=(t,e={})=>({state:n,commands:r})=>{const i=An(t,n.schema);return ka(n,i,e)?r.lift(i):r.wrapIn(i,e)},Cie=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},kie=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},Eie=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,u=mo(t,r.schema),{$from:d,empty:f,ranges:p}=l;if(!i)return!0;if(f&&o){let{from:m,to:b}=l;const v=(s=d.marks().find(S=>S.type===u))==null?void 0:s.attrs,w=sS(d,u,v);w&&(m=w.from,b=w.to),n.removeMark(m,b,u)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,u)});return n.removeStoredMark(u),!0},Nie=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Pg(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=An(t,r.schema)),l==="mark"&&(o=mo(t,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,f=u.$to.pos;let p,m,b,v;n.selection.empty?r.doc.nodesBetween(d,f,(w,S)=>{s&&s===w.type&&(b=Math.max(S,d),v=Math.min(S+w.nodeSize,f),p=S,m=w)}):r.doc.nodesBetween(d,f,(w,S)=>{S<d&&s&&s===w.type&&(b=Math.max(S,d),v=Math.min(S+w.nodeSize,f),p=S,m=w),S>=d&&S<=f&&(s&&s===w.type&&n.setNodeMarkup(S,void 0,{...w.attrs,...e}),o&&w.marks.length&&w.marks.forEach(k=>{if(o===k.type){const T=Math.max(S,d),E=Math.min(S+w.nodeSize,f);n.addMark(T,E,o.create({...k.attrs,...e}))}}))}),m&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...m.attrs,...e}),o&&m.marks.length&&m.marks.forEach(w=>{o===w.type&&n.addMark(b,v,o.create({...w.attrs,...e}))}))}),!0):!1},Tie=(t,e={})=>({state:n,dispatch:r})=>{const i=An(t,n.schema);return zne(i,e)(n,r)},Aie=(t,e={})=>({state:n,dispatch:r})=>{const i=An(t,n.schema);return Bne(i,e)(n,r)},AB=mn.create({name:"commands",addCommands(){return{...NB}}}),MB=mn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,t))!=null?d:t.getMeta("y-sync$"))return;const f=lB(t.before,[t,...e]);yB(f).forEach(b=>{f.mapping.mapResult(b.oldRange.from).deletedAfter&&f.mapping.mapResult(b.oldRange.to).deletedBefore&&f.before.nodesBetween(b.oldRange.from,b.oldRange.to,(v,w)=>{const S=w+v.nodeSize-2,k=b.oldRange.from<=w&&S<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:w,to:S,newFrom:f.mapping.map(w),newTo:f.mapping.map(S),deletedRange:b.oldRange,newRange:b.newRange,partial:!k,editor:this.editor,transaction:t,combinedTransform:f})})});const m=f.mapping;f.steps.forEach((b,v)=>{var w,S;if(b instanceof Yi){const k=m.slice(v).map(b.from,-1),T=m.slice(v).map(b.to),E=m.invert().map(k,-1),N=m.invert().map(T),A=(w=f.doc.nodeAt(k-1))==null?void 0:w.marks.some(j=>j.eq(b.mark)),_=(S=f.doc.nodeAt(T))==null?void 0:S.marks.some(j=>j.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:E,to:N},newRange:{from:k,to:T},partial:!!(_||A),editor:this.editor,transaction:t,combinedTransform:f})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),_B=mn.create({name:"drop",addProseMirrorPlugins(){return[new un({key:new Wn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),DB=mn.create({name:"editable",addProseMirrorPlugins(){return[new un({key:new Wn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),RB=new Wn("focusEvents"),jB=mn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new un({key:RB,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),OB=mn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:f,$anchor:p}=u,{pos:m,parent:b}=p,v=p.parent.isTextblock&&m>0?l.doc.resolve(m-1):p,w=v.parent.type.spec.isolating,S=p.pos-p.parentOffset,k=w&&v.parent.childCount===1?S===p.pos:nt.atStart(d).from===m;return!f||!b.type.isTextblock||b.textContent.length||!k||k&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return lS()||TB()?s:i},addProseMirrorPlugins(){return[new un({key:new Wn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const r=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),i=t.some(w=>w.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,u=nt.atStart(e.doc).from,d=nt.atEnd(e.doc).to;if(s||!(o===u&&l===d)||!zg(n.doc))return;const m=n.tr,b=Og({state:n,transaction:m}),{commands:v}=new Lg({editor:this.editor,state:b});if(v.clearNodes(),!!m.steps.length)return m}})]}}),LB=mn.create({name:"paste",addProseMirrorPlugins(){return[new un({key:new Wn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),IB=mn.create({name:"tabindex",addProseMirrorPlugins(){return[new un({key:new Wn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Mie=class qc{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new qc(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new qc(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new qc(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new qc(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),e.push(new qc(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},_ie=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Die(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var Rie=class extends Wne{constructor(t={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=wB(e,this.options.autofocus);this.editorState=Jc.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Die(_ie,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=uB(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[DB,EB.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),AB,jB,OB,IB,_B,LB,MB].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Vg(r,this)}createCommandManager(){this.commandManager=new Lg({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=dw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=dw(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new Wz(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(d=>{var f;return(f=this.capturedTransaction)==null?void 0:f.step(d)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return gB(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return are(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return nS(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return tre(this.state.doc,{blockSeparator:e,textSerializers:{...pB(this.schema),...n}})}get isEmpty(){return zg(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new Mie(e,this)}get $doc(){return this.$pos(0)}};function bu(t){return new Bg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Et(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),f=d+o.length;if(oS(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(w=>w===t.type&&w!==b.mark.type)).filter(b=>b.to>d).length)return null;f<n.to&&s.delete(f,n.to),d>n.from&&s.delete(n.from+u,d);const m=n.from+u+o.length;s.addMark(n.from+u,m,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function jie(t){return new Bg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Et(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const u=t.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let f=o+d;f>l?f=l:l=f+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(f,l,u)}else if(r[0]){const d=t.type.isInline?o:o-1;s.insert(d,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:t.undoable})}function hw(t){return new Bg({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Et(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function vu(t){return new Bg({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Et(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&B8(u,t.type,s);if(!d)return null;if(o.wrap(u,d),t.keepMarks&&t.editor){const{selection:p,storedMarks:m}=e,{splittableMarks:b}=t.editor.extensionManager,v=m||p.$to.parentOffset&&p.$from.marks();if(v){const w=v.filter(S=>b.includes(S.type.name));o.ensureMarks(w)}}if(t.keepAttributes){const p=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const f=o.doc.resolve(n.from-1).nodeBefore;f&&f.type===t.type&&Da(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,f))&&o.join(n.from-1)},undoable:t.undoable})}function Oie(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof qe){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function Lie(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,o=t;i.descendants((l,u)=>{const d=s.mapping.map(u),f=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(b=>{if(b!==o)return!1;p=b}),!p)return;let m=!1;if(Object.keys(n).forEach(b=>{n[b]!==p.attrs[b]&&(m=!0)}),m){const b=t.type.create({...t.attrs,...n});s.removeMark(d,f,t.type),s.addMark(d,f,b)}}),s.docChanged&&e.view.dispatch(s)}var di=class PB extends aS{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new PB(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function jl(t){return new mre({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Et(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],u=r[0];let d=n.to;if(l){const f=u.search(/\S/),p=n.from+u.indexOf(l),m=p+l.length;if(oS(n.from,n.to,e.doc).filter(v=>v.mark.type.excluded.find(S=>S===t.type&&S!==v.mark.type)).filter(v=>v.to>p).length)return null;m<n.to&&o.delete(m,n.to),p>n.from&&o.delete(n.from+f,p),d=n.from+f+l.length,o.addMark(n.from+f,d,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}var mb,HT;function Iie(){return HT||(HT=1,mb=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),mb}var Pie=Iie();const zie=hh(Pie);var gb={exports:{}},yb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FT;function Bie(){if(FT)return yb;FT=1;var t=ph(),e=RP();function n(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,u=t.useDebugValue;return yb.useSyncExternalStoreWithSelector=function(d,f,p,m,b){var v=s(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=l(function(){function k(_){if(!T){if(T=!0,E=_,_=m(_),b!==void 0&&w.hasValue){var j=w.value;if(b(j,_))return N=j}return N=_}if(j=N,r(E,_))return j;var R=m(_);return b!==void 0&&b(j,R)?(E=_,j):(E=_,N=R)}var T=!1,E,N,A=p===void 0?null:p;return[function(){return k(f())},A===null?void 0:function(){return k(A())}]},[f,p,m,b]);var S=i(d,v[0],v[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),u(S),S},yb}var qT;function Vie(){return qT||(qT=1,gb.exports=Bie()),gb.exports}var zB=Vie();const Hie=hh(zB);var Fie=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},qie=({contentComponent:t})=>{const e=jP.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return g.jsx(g.Fragment,{children:Object.values(e)})};function Uie(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:mh.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var $ie=class extends Ae.Component{constructor(t){var e;super(t),this.editorContentRef=Ae.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=Uie(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return g.jsxs(g.Fragment,{children:[g.jsx("div",{ref:Fie(e,this.editorContentRef),...n}),t?.contentComponent&&g.jsx(qie,{contentComponent:t.contentComponent})]})}},Gie=M.forwardRef((t,e)=>{const n=Ae.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ae.createElement($ie,{key:n,innerRef:e,...t})}),UT=Ae.memo(Gie),Wie=typeof window<"u"?M.useLayoutEffect:M.useEffect,Kie=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function Yie(t){var e;const[n]=M.useState(()=>new Kie(t.editor)),r=zB.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:zie);return Wie(()=>n.watch(t.editor),[t.editor,n]),M.useDebugValue(r),r}var Xie=!1,pw=typeof window>"u",Zie=pw||!!(typeof window<"u"&&window.next),Jie=class BB{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?pw||Zie?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new Rie(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?BB.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Qie(t={},e=[]){const n=M.useRef(t);n.current=t;const[r]=M.useState(()=>new Jie(n)),i=jP.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(e)),Yie({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var ese=M.createContext({editor:null});ese.Consumer;var tse=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),nse=()=>M.useContext(tse);Ae.forwardRef((t,e)=>{const{onDragStart:n}=nse(),r=t.as||"div";return g.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Ae.createContext({markViewContentRef:()=>{}});var vm=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},rse=/^\s*>\s$/,ise=di.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return vm("blockquote",{...Tn(this.options.HTMLAttributes,t),children:vm("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[vu({find:rse,type:this.type})]}}),sse=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,ose=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ase=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,lse=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,cse=Wl.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return vm("strong",{...Tn(this.options.HTMLAttributes,t),children:vm("slot",{})})},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bu({find:sse,type:this.type}),bu({find:ase,type:this.type})]},addPasteRules(){return[jl({find:ose,type:this.type}),jl({find:lse,type:this.type})]}}),use=/(^|[^`])`([^`]+)`(?!`)$/,dse=/(^|[^`])`([^`]+)`(?!`)/g,fse=Wl.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bu({find:use,type:this.type})]},addPasteRules(){return[jl({find:dse,type:this.type})]}}),hse=/^```([a-z]+)?[\s\n]$/,pse=/^~~~([a-z]+)?[\s\n]$/,mse=di.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Tn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?t.commands.insertContent(s):t.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=e.doc.textBetween(l,u,`
`,`
`).split(`
`).map(m=>s+m).join(`
`);return o.replaceWith(l,u,e.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{if(!this.options.enableTabIndentation)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?t.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=e.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,b=0;const v=l-u;for(let N=0;N<p.length;N+=1){if(b+p[N].length>=v){m=N;break}b+=p[N].length+1}const S=((o=p[m].match(/^ */))==null?void 0:o[0])||"",k=Math.min(S.length,this.options.tabSize);if(k===0)return!0;let T=u;for(let N=0;N<m;N+=1)T+=p[N].length+1;return s.delete(T,T+k),l-T<=k&&s.setSelection(Ze.create(s.doc,T)),!0}):t.commands.command(({tr:s})=>{const{from:o,to:l}=n,f=e.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var m;const b=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(b.length,this.options.tabSize);return p.slice(v)}).join(`
`);return s.replaceWith(o,l,e.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:d})=>(d.setSelection(nt.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[hw({find:hse,type:this.type,getAttributes:t=>({language:t[1]})}),hw({find:pse,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new un({key:new Wn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ze.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),gse=di.create({name:"doc",topNode:!0,content:"block+"}),yse=di.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Tn(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:d,dispatch:f})=>{if(f&&u&&o){const p=u.filter(m=>l.includes(m.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),VB=di.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Tn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>hw({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),bse=VB,vse=di.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Tn(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Oie(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return vB(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ze.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(qe.create(s.doc,u.pos)):s.setSelection(Ze.create(s.doc,u.pos));else{const f=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();f&&(s.insert(d,f),s.setSelection(Ze.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[jie({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),xse=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,wse=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Sse=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Cse=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,kse=Wl.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bu({find:xse,type:this.type}),bu({find:Sse,type:this.type})]},addPasteRules(){return[jl({find:wse,type:this.type}),jl({find:Cse,type:this.type})]}});const Ese="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Nse="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",mw="numeric",gw="ascii",yw="alpha",vf="asciinumeric",nf="alphanumeric",bw="domain",HB="emoji",Tse="scheme",Ase="slashscheme",bb="whitespace";function Mse(t,e){return t in e||(e[t]=[]),e[t]}function pl(t,e,n){e[mw]&&(e[vf]=!0,e[nf]=!0),e[gw]&&(e[vf]=!0,e[yw]=!0),e[vf]&&(e[nf]=!0),e[yw]&&(e[nf]=!0),e[nf]&&(e[bw]=!0),e[HB]&&(e[bw]=!0);for(const r in e){const i=Mse(r,n);i.indexOf(t)<0&&i.push(t)}}function _se(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Ir(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Ir.groups={};Ir.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||Ir.groups;let i;return e&&e.j?i=e:(i=new Ir(e),n&&r&&pl(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(t[o]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||Ir.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let o,l=i.go(t);if(l?(o=new Ir,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Ir,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(_se(o.t,r),n);pl(s,u,r)}else n&&pl(s,n,r);o.t=s}return i.j[t]=o,o}};const rt=(t,e,n,r,i)=>t.ta(e,n,r,i),an=(t,e,n,r,i)=>t.tr(e,n,r,i),$T=(t,e,n,r,i)=>t.ts(e,n,r,i),we=(t,e,n,r,i)=>t.tt(e,n,r,i),eo="WORD",vw="UWORD",FB="ASCIINUMERICAL",qB="ALPHANUMERICAL",Wf="LOCALHOST",xw="TLD",ww="UTLD",z0="SCHEME",Uc="SLASH_SCHEME",cS="NUM",Sw="WS",uS="NL",xf="OPENBRACE",wf="CLOSEBRACE",xm="OPENBRACKET",wm="CLOSEBRACKET",Sm="OPENPAREN",Cm="CLOSEPAREN",km="OPENANGLEBRACKET",Em="CLOSEANGLEBRACKET",Nm="FULLWIDTHLEFTPAREN",Tm="FULLWIDTHRIGHTPAREN",Am="LEFTCORNERBRACKET",Mm="RIGHTCORNERBRACKET",_m="LEFTWHITECORNERBRACKET",Dm="RIGHTWHITECORNERBRACKET",Rm="FULLWIDTHLESSTHAN",jm="FULLWIDTHGREATERTHAN",Om="AMPERSAND",Lm="APOSTROPHE",Im="ASTERISK",ra="AT",Pm="BACKSLASH",zm="BACKTICK",Bm="CARET",oa="COLON",dS="COMMA",Vm="DOLLAR",ys="DOT",Hm="EQUALS",fS="EXCLAMATION",ki="HYPHEN",Sf="PERCENT",Fm="PIPE",qm="PLUS",Um="POUND",Cf="QUERY",hS="QUOTE",UB="FULLWIDTHMIDDLEDOT",pS="SEMI",bs="SLASH",kf="TILDE",$m="UNDERSCORE",$B="EMOJI",Gm="SYM";var GB=Object.freeze({__proto__:null,ALPHANUMERICAL:qB,AMPERSAND:Om,APOSTROPHE:Lm,ASCIINUMERICAL:FB,ASTERISK:Im,AT:ra,BACKSLASH:Pm,BACKTICK:zm,CARET:Bm,CLOSEANGLEBRACKET:Em,CLOSEBRACE:wf,CLOSEBRACKET:wm,CLOSEPAREN:Cm,COLON:oa,COMMA:dS,DOLLAR:Vm,DOT:ys,EMOJI:$B,EQUALS:Hm,EXCLAMATION:fS,FULLWIDTHGREATERTHAN:jm,FULLWIDTHLEFTPAREN:Nm,FULLWIDTHLESSTHAN:Rm,FULLWIDTHMIDDLEDOT:UB,FULLWIDTHRIGHTPAREN:Tm,HYPHEN:ki,LEFTCORNERBRACKET:Am,LEFTWHITECORNERBRACKET:_m,LOCALHOST:Wf,NL:uS,NUM:cS,OPENANGLEBRACKET:km,OPENBRACE:xf,OPENBRACKET:xm,OPENPAREN:Sm,PERCENT:Sf,PIPE:Fm,PLUS:qm,POUND:Um,QUERY:Cf,QUOTE:hS,RIGHTCORNERBRACKET:Mm,RIGHTWHITECORNERBRACKET:Dm,SCHEME:z0,SEMI:pS,SLASH:bs,SLASH_SCHEME:Uc,SYM:Gm,TILDE:kf,TLD:xw,UNDERSCORE:$m,UTLD:ww,UWORD:vw,WORD:eo,WS:Sw});const Xs=/[a-z]/,qd=new RegExp("\\p{L}","u"),vb=new RegExp("\\p{Emoji}","u"),Zs=/\d/,xb=/\s/,GT="\r",wb=`
`,Dse="",Rse="",Sb="";let f0=null,h0=null;function jse(t=[]){const e={};Ir.groups=e;const n=new Ir;f0==null&&(f0=WT(Ese)),h0==null&&(h0=WT(Nse)),we(n,"'",Lm),we(n,"{",xf),we(n,"}",wf),we(n,"[",xm),we(n,"]",wm),we(n,"(",Sm),we(n,")",Cm),we(n,"<",km),we(n,">",Em),we(n,"",Nm),we(n,"",Tm),we(n,"",Am),we(n,"",Mm),we(n,"",_m),we(n,"",Dm),we(n,"",Rm),we(n,"",jm),we(n,"&",Om),we(n,"*",Im),we(n,"@",ra),we(n,"`",zm),we(n,"^",Bm),we(n,":",oa),we(n,",",dS),we(n,"$",Vm),we(n,".",ys),we(n,"=",Hm),we(n,"!",fS),we(n,"-",ki),we(n,"%",Sf),we(n,"|",Fm),we(n,"+",qm),we(n,"#",Um),we(n,"?",Cf),we(n,'"',hS),we(n,"/",bs),we(n,";",pS),we(n,"~",kf),we(n,"_",$m),we(n,"\\",Pm),we(n,"",UB);const r=an(n,Zs,cS,{[mw]:!0});an(r,Zs,r);const i=an(r,Xs,FB,{[vf]:!0}),s=an(r,qd,qB,{[nf]:!0}),o=an(n,Xs,eo,{[gw]:!0});an(o,Zs,i),an(o,Xs,o),an(i,Zs,i),an(i,Xs,i);const l=an(n,qd,vw,{[yw]:!0});an(l,Xs),an(l,Zs,s),an(l,qd,l),an(s,Zs,s),an(s,Xs),an(s,qd,s);const u=we(n,wb,uS,{[bb]:!0}),d=we(n,GT,Sw,{[bb]:!0}),f=an(n,xb,Sw,{[bb]:!0});we(n,Sb,f),we(d,wb,u),we(d,Sb,f),an(d,xb,f),we(f,GT),we(f,wb),an(f,xb,f),we(f,Sb,f);const p=an(n,vb,$B,{[HB]:!0});we(p,"#"),an(p,vb,p),we(p,Dse,p);const m=we(p,Rse);we(m,"#"),an(m,vb,p);const b=[[Xs,o],[Zs,i]],v=[[Xs,null],[qd,l],[Zs,s]];for(let w=0;w<f0.length;w++)Xo(n,f0[w],xw,eo,b);for(let w=0;w<h0.length;w++)Xo(n,h0[w],ww,vw,v);pl(xw,{tld:!0,ascii:!0},e),pl(ww,{utld:!0,alpha:!0},e),Xo(n,"file",z0,eo,b),Xo(n,"mailto",z0,eo,b),Xo(n,"http",Uc,eo,b),Xo(n,"https",Uc,eo,b),Xo(n,"ftp",Uc,eo,b),Xo(n,"ftps",Uc,eo,b),pl(z0,{scheme:!0,ascii:!0},e),pl(Uc,{slashscheme:!0,ascii:!0},e),t=t.sort((w,S)=>w[0]>S[0]?1:-1);for(let w=0;w<t.length;w++){const S=t[w][0],T=t[w][1]?{[Tse]:!0}:{[Ase]:!0};S.indexOf("-")>=0?T[bw]=!0:Xs.test(S)?Zs.test(S)?T[vf]=!0:T[gw]=!0:T[mw]=!0,$T(n,S,S,T)}return $T(n,"localhost",Wf,{ascii:!0}),n.jd=new Ir(Gm),{start:n,tokens:Object.assign({groups:e},GB)}}function WB(t,e){const n=Ose(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=t,u=null,d=0,f=null,p=-1,m=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,m=0,f=l):p>=0&&(p+=n[o].length,m++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=m,d-=p,i.push({t:f.t,v:e.slice(s-d,s),s:s-d,e:s})}return i}function Ose(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Xo(t,e,n,r,i){let s;const o=e.length;for(let l=0;l<o-1;l++){const u=e[l];t.j[u]?s=t.j[u]:(s=new Ir(r),s.jr=i.slice(),t.j[u]=s),t=s}return s=new Ir(n),s.jr=i.slice(),t.j[e[o-1]]=s,s}function WT(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Kf={defaultProtocol:"http",events:null,format:KT,formatHref:KT,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function mS(t,e=null){let n=Object.assign({},Kf);t&&(n=Object.assign(n,t instanceof mS?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}mS.prototype={o:Kf,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Kf[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function KT(t){return t}function KB(t,e){this.t="token",this.v=t,this.tk=e}KB.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Kf.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),o={},l=t.get("className",n,e),u=t.get("target",n,e),d=t.get("rel",n,e),f=t.getObj("attributes",n,e),p=t.getObj("events",n,e);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),f&&Object.assign(o,f),{tagName:i,attributes:o,content:s,eventListeners:p}}};function Hg(t,e){class n extends KB{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const YT=Hg("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),XT=Hg("text"),Lse=Hg("nl"),p0=Hg("url",{isLink:!0,toHref(t=Kf.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Wf&&t[1].t===oa}}),Si=t=>new Ir(t);function Ise({groups:t}){const e=t.domain.concat([Om,Im,ra,Pm,zm,Bm,Vm,Hm,ki,cS,Sf,Fm,qm,Um,bs,Gm,kf,$m]),n=[Lm,oa,dS,ys,fS,Sf,Cf,hS,pS,km,Em,xf,wf,wm,xm,Sm,Cm,Nm,Tm,Am,Mm,_m,Dm,Rm,jm],r=[Om,Lm,Im,Pm,zm,Bm,Vm,Hm,ki,xf,wf,Sf,Fm,qm,Um,Cf,bs,Gm,kf,$m],i=Si(),s=we(i,kf);rt(s,r,s),rt(s,t.domain,s);const o=Si(),l=Si(),u=Si();rt(i,t.domain,o),rt(i,t.scheme,l),rt(i,t.slashscheme,u),rt(o,r,s),rt(o,t.domain,o);const d=we(o,ra);we(s,ra,d),we(l,ra,d),we(u,ra,d);const f=we(s,ys);rt(f,r,s),rt(f,t.domain,s);const p=Si();rt(d,t.domain,p),rt(p,t.domain,p);const m=we(p,ys);rt(m,t.domain,p);const b=Si(YT);rt(m,t.tld,b),rt(m,t.utld,b),we(d,Wf,b);const v=we(p,ki);we(v,ki,v),rt(v,t.domain,p),rt(b,t.domain,p),we(b,ys,m),we(b,ki,v);const w=we(b,oa);rt(w,t.numeric,YT);const S=we(o,ki),k=we(o,ys);we(S,ki,S),rt(S,t.domain,o),rt(k,r,s),rt(k,t.domain,o);const T=Si(p0);rt(k,t.tld,T),rt(k,t.utld,T),rt(T,t.domain,o),rt(T,r,s),we(T,ys,k),we(T,ki,S),we(T,ra,d);const E=we(T,oa),N=Si(p0);rt(E,t.numeric,N);const A=Si(p0),_=Si();rt(A,e,A),rt(A,n,_),rt(_,e,A),rt(_,n,_),we(T,bs,A),we(N,bs,A);const j=we(l,oa),R=we(u,oa),L=we(R,bs),P=we(L,bs);rt(l,t.domain,o),we(l,ys,k),we(l,ki,S),rt(u,t.domain,o),we(u,ys,k),we(u,ki,S),rt(j,t.domain,A),we(j,bs,A),we(j,Cf,A),rt(P,t.domain,A),rt(P,e,A),we(P,bs,A);const F=[[xf,wf],[xm,wm],[Sm,Cm],[km,Em],[Nm,Tm],[Am,Mm],[_m,Dm],[Rm,jm]];for(let V=0;V<F.length;V++){const[q,I]=F[V],U=we(A,q);we(_,q,U),we(U,I,A);const O=Si(p0);rt(U,e,O);const H=Si();rt(U,n),rt(O,e,O),rt(O,n,H),rt(H,e,O),rt(H,n,H),we(O,I,A),we(H,I,A)}return we(i,Wf,T),we(i,uS,Lse),{start:i,tokens:GB}}function Pse(t,e,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=t,u=null,d=null,f=0,p=null,m=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(m=0,p=l):m>=0&&m++,i++,f++;if(m<0)i-=f,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Cb(XT,e,o)),o=[]),i-=m,f-=m;const b=p.t,v=n.slice(i-f,i);s.push(Cb(b,e,v))}}return o.length>0&&s.push(Cb(XT,e,o)),s}function Cb(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const zse=typeof console<"u"&&console&&console.warn||(()=>{}),Bse="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Vse(){return Ir.groups={},Ft.scanner=null,Ft.parser=null,Ft.tokenQueue=[],Ft.pluginQueue=[],Ft.customSchemes=[],Ft.initialized=!1,Ft}function ZT(t,e=!1){if(Ft.initialized&&zse(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Bse}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ft.customSchemes.push([t,e])}function Hse(){Ft.scanner=jse(Ft.customSchemes);for(let t=0;t<Ft.tokenQueue.length;t++)Ft.tokenQueue[t][1]({scanner:Ft.scanner});Ft.parser=Ise(Ft.scanner.tokens);for(let t=0;t<Ft.pluginQueue.length;t++)Ft.pluginQueue[t][1]({scanner:Ft.scanner,parser:Ft.parser});return Ft.initialized=!0,Ft}function gS(t){return Ft.initialized||Hse(),Pse(Ft.parser.start,t,WB(Ft.scanner.start,t))}gS.scan=WB;function YB(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new mS(n),i=gS(t),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!e||l.t===e)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var yS="[\0- -\u2029]",Fse=new RegExp(yS),qse=new RegExp(`${yS}$`),Use=new RegExp(yS,"g");function $se(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Gse(t){return new un({key:new Wn("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=e.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=lB(n.doc,[...e]);if(yB(l).forEach(({newRange:d})=>{const f=Yne(r.doc,d,b=>b.isTextblock);let p,m;if(f.length>1)p=f[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(f.length){const b=r.doc.textBetween(d.from,d.to," "," ");if(!qse.test(b))return;p=f[0],m=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&m){const b=m.split(Fse).filter(Boolean);if(b.length<=0)return!1;const v=b[b.length-1],w=p.pos+m.lastIndexOf(v);if(!v)return!1;const S=gS(v).map(k=>k.toObject(t.defaultProtocol));if(!$se(S))return!1;S.filter(k=>k.isLink).map(k=>({...k,from:w+k.start+1,to:w+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>t.validate(k.value)).filter(k=>t.shouldAutoLink(k.value)).forEach(k=>{oS(k.from,k.to,r.doc).some(T=>T.mark.type===t.type)||o.addMark(k.from,k.to,t.type.create({href:k.href}))})}}),!!o.steps.length)return o}})}function Wse(t){return new un({key:new Wn("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let f=r.target;const p=[];for(;f.nodeName!=="DIV";)p.push(f),f=f.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return!1;const l=gB(e.state,t.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),o&&u?(window.open(u,d),!0):!1}}})}function Kse(t){return new un({key:new Wn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{state:i}=e,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=YB(l,{defaultProtocol:t.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function rl(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(Use,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var XB=Wl.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){ZT(t);return}ZT(t.scheme,t.optionalSlashes)})},onDestroy(){Vse()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!rl(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!rl(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!rl(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Tn(this.options.HTMLAttributes,t),0]:["a",Tn(this.options.HTMLAttributes,{...t,href:""}),0]},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!rl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!rl(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[jl({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=YB(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!rl(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>e.push({text:s.value,data:{href:s.href},index:s.start}))}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Gse({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!rl(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(Wse({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(Kse({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),t}}),Yse=XB,Xse=Object.defineProperty,Zse=(t,e)=>{for(var n in e)Xse(t,n,{get:e[n],enumerable:!0})},Jse="listItem",JT="textStyle",QT=/^\s*([-+*])\s$/,bS=di.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Jse,this.editor.getAttributes(JT)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=vu({find:QT,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=vu({find:QT,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(JT),editor:this.editor})),[t]}}),vS=di.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Tn(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Qse={};Zse(Qse,{findListItemPos:()=>Th,getNextListDepth:()=>xS,handleBackspace:()=>Cw,handleDelete:()=>kw,hasListBefore:()=>ZB,hasListItemAfter:()=>eoe,hasListItemBefore:()=>JB,listItemHasSubList:()=>QB,nextListIsDeeper:()=>eV,nextListIsHigher:()=>tV});var Th=(t,e)=>{const{$from:n}=e.selection,r=An(t,e.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:e.doc.resolve(o),depth:l}},xS=(t,e)=>{const n=Th(t,e);if(!n)return!1;const[,r]=sre(e,t,n.$pos.pos+4);return r},ZB=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},JB=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},QB=(t,e,n)=>{if(!n)return!1;const r=An(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},Cw=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ka(t.state,e)&&ZB(t.state,e,n)){const{$anchor:l}=t.state.selection,u=t.state.doc.resolve(l.before()-1),d=[];u.node().descendants((m,b)=>{m.type.name===e&&d.push({node:m,pos:b})});const f=d.at(-1);if(!f)return!1;const p=t.state.doc.resolve(u.start()+f.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!ka(t.state,e)||!cre(t.state))return!1;const r=Th(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=QB(e,t.state,s);return JB(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},eV=(t,e)=>{const n=xS(t,e),r=Th(t,e);return!r||!n?!1:n>r.depth},tV=(t,e)=>{const n=xS(t,e),r=Th(t,e);return!r||!n?!1:n<r.depth},kw=(t,e)=>{if(!ka(t.state,e)||!lre(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:eV(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():tV(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},eoe=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},nV=mn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&kw(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&kw(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Cw(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Cw(t,n,r)&&(e=!0)}),e}}}}),toe="listItem",eA="textStyle",tA=/^(\d+)\.\s$/,wS=di.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Tn(this.options.HTMLAttributes,n),0]:["ol",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(toe,this.editor.getAttributes(eA)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=vu({find:tA,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=vu({find:tA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(eA)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),noe=/^\s*(\[([( |x])?\])\s$/,roe=di.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Tn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=f=>{var p,m;l.ariaLabel=((m=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:m.call(p,f,l.checked))||`Task item checkbox for ${f.textContent||"empty task item"}`};return d(t),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",f=>f.preventDefault()),l.addEventListener("change",f=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=f.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const b=n();if(typeof b!="number")return!1;const v=m.doc.nodeAt(b);return m.setNodeMarkup(b,void 0,{...v?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([f,p])=>{i.setAttribute(f,p)}),i.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(e).forEach(([f,p])=>{i.setAttribute(f,p)}),{dom:i,contentDOM:u,update:f=>f.type!==this.type?!1:(i.dataset.checked=f.attrs.checked,l.checked=f.attrs.checked,d(f),!0)}}},addInputRules(){return[vu({find:noe,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),ioe=di.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Tn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});mn.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(bS.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(vS.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(nV.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(wS.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(roe.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(ioe.configure(this.options.taskList)),t}});var soe=di.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),ooe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,aoe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,loe=Wl.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bu({find:ooe,type:this.type})]},addPasteRules(){return[jl({find:aoe,type:this.type})]}}),coe=di.create({name:"text",group:"inline"}),rV=Wl.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Tn(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),uoe=rV;function doe(t={}){return new un({view(e){return new foe(e,t)}})}class foe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=e.nodeBefore,m=e.nodeAfter;if(p||m){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let v=b.getBoundingClientRect(),w=p?v.bottom:v.top;p&&m&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*l;r={left:v.left,right:v.right,top:w-S,bottom:w+S}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*o;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,f;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,f=-pageYOffset;else{let p=u.getBoundingClientRect(),m=p.width/u.offsetWidth,b=p.height/u.offsetHeight;d=p.left-u.scrollLeft*m,f=p.top-u.scrollTop*b}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-f)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=oz(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cn extends nt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return cn.valid(r)?new cn(r):nt.near(r)}content(){return _e.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(n.pos))}getBookmark(){return new SS(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!hoe(e)||!poe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let u=e.doc.resolve(i);if(cn.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!qe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(cn.valid(l))return l}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;nt.jsonID("gapcursor",cn);class SS{constructor(e){this.pos=e}map(e){return new SS(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return cn.valid(n)?new cn(n):nt.near(n)}}function hoe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function poe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function moe(){return new un({props:{decorations:voe,createSelectionBetween(t,e,n){return e.pos==n.pos&&cn.valid(n)?new cn(n):null},handleClick:yoe,handleKeyDown:goe,handleDOMEvents:{beforeinput:boe}}})}const goe=Kz({ArrowLeft:m0("horiz",-1),ArrowRight:m0("horiz",1),ArrowUp:m0("vert",-1),ArrowDown:m0("vert",1)});function m0(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,u=o.empty;if(o instanceof Ze){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(e>0?l.after():l.before())}let d=cn.findGapCursorFrom(l,e,u);return d?(i&&i(r.tr.setSelection(new cn(d))),!0):!1}}function yoe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!cn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&qe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cn(r))),!0)}function boe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=xe.empty;for(let o=r.length-1;o>=0;o--)i=xe.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new _e(i,0,0));return s.setSelection(Ze.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function voe(t){if(!(t.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",en.create(t.doc,[Er.widget(t.selection.head,e,{key:"gapcursor"})])}var Wm=200,Gn=function(){};Gn.prototype.append=function(e){return e.length?(e=Gn.from(e),!this.length&&e||e.length<Wm&&this.leafAppend(e)||this.length<Wm&&e.leafPrepend(this)||this.appendInner(e)):this};Gn.prototype.prepend=function(e){return e.length?Gn.from(e).append(this):this};Gn.prototype.appendInner=function(e){return new xoe(this,e)};Gn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Gn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Gn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Gn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Gn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Gn.from=function(e){return e instanceof Gn?e:e&&e.length?new iV(e):Gn.empty};var iV=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Wm)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Wm)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Gn);Gn.empty=new iV([]);var xoe=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Gn);const woe=500;class Wi{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,u,d=[],f=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),s=i.maps.length),s--,f.push(p);return}if(i){f.push(new Zo(p.map));let b=p.step.map(i.slice(s)),v;b&&o.maybeStep(b).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],d.push(new Zo(v,void 0,void 0,d.length+f.length))),s--,v&&i.appendMap(v,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Wi(this.items.slice(0,r).append(f.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let f=0;f<e.steps.length;f++){let p=e.steps[f].invert(e.docs[f]),m=new Zo(e.mapping.maps[f],p,n),b;(b=u&&u.merge(m))&&(m=b,f?s.pop():l=l.slice(0,l.length-1)),s.push(m),n&&(o++,n=void 0),i||(u=m)}let d=o-r.depth;return d>Coe&&(l=Soe(l,d),o-=d),new Wi(l.append(s),o)}remapping(e,n){let r=new Vf;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Wi(this.items.append(e.map(n=>new Zo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(m=>{m.selection&&l--},i);let u=n;this.items.forEach(m=>{let b=s.getMirror(--u);if(b==null)return;o=Math.min(o,b);let v=s.maps[b];if(m.step){let w=e.steps[b].invert(e.docs[b]),S=m.selection&&m.selection.map(s.slice(u+1,b));S&&l++,r.push(new Zo(v,w,S))}else r.push(new Zo(v))},i);let d=[];for(let m=n;m<o;m++)d.push(new Zo(s.maps[m]));let f=this.items.slice(0,i).append(d).append(r),p=new Wi(f,l);return p.emptyItemCount()>woe&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let f=o.selection&&o.selection.map(n.slice(r));f&&s++;let p=new Zo(d.invert(),u,f),m,b=i.length-1;(m=i.length&&i[b].merge(p))?i[b]=m:i.push(p)}}else o.map&&r--},this.items.length,0),new Wi(Gn.from(i.reverse()),s)}}Wi.empty=new Wi(Gn.empty,0);function Soe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}let Zo=class sV{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new sV(n.getMap().invert(),n,this.selection)}}};class ia{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Coe=20;function koe(t,e,n,r){let i=n.getMeta(kl),s;if(i)return i.historyState;n.getMeta(Toe)&&(t=new ia(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(kl))return o.getMeta(kl).redo?new ia(t.done.addTransform(n,void 0,r,B0(e)),t.undone,nA(n.mapping.maps),t.prevTime,t.prevComposition):new ia(t.done,t.undone.addTransform(n,void 0,r,B0(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Eoe(n,t.prevRanges)),d=o?kb(t.prevRanges,n.mapping):nA(n.mapping.maps);return new ia(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,B0(e)),Wi.empty,d,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ia(t.done.rebased(n,s),t.undone.rebased(n,s),kb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ia(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),kb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Eoe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function nA(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function kb(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function Noe(t,e,n){let r=B0(e),i=kl.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),u=new ia(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(kl,{redo:n,historyState:u})}let Eb=!1,rA=null;function B0(t){let e=t.plugins;if(rA!=e){Eb=!1,rA=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Eb=!0;break}}return Eb}const kl=new Wn("history"),Toe=new Wn("closeHistory");function Aoe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new un({key:kl,state:{init(){return new ia(Wi.empty,Wi.empty,null,0,-1)},apply(e,n,r){return koe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?aV:r=="historyRedo"?lV:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function oV(t,e){return(n,r)=>{let i=kl.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=Noe(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const aV=oV(!1,!0),lV=oV(!0,!0);mn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new un({key:new Wn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return t=!0,d}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,u=s-r,d=l-u,f=l;return e.deleteRange(d,f),!(this.storage.characters({node:e.doc})>r)}})]}});var Moe=mn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[doe(this.options)]}});mn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new un({key:new Wn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return en.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return t.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Er.node(d,d+u.nodeSize,{class:this.options.className}))}),en.create(t,s)}}})]}});var _oe=mn.create({name:"gapCursor",addProseMirrorPlugins(){return[moe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Et(He(t,"allowGapCursor",n)))!=null?e:null}}}),Doe=mn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new un({key:new Wn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&zg(o);if((u||!this.options.showOnlyCurrent)&&d){const f=[this.options.emptyNodeClass];s&&f.push(this.options.emptyEditorClass);const p=Er.node(l,l+o.nodeSize,{class:f.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),en.create(t,i)}}})]}});mn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new un({key:new Wn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||vB(n.selection)||t.view.dragging?null:en.create(n.doc,[Er.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function iA({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var Roe=mn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const t=new Wn(this.name),e=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new un({key:t,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=t.getState(i),d=s.content.size,f=l.nodes[this.options.node];if(u)return o.insert(d,f.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!iA({node:i,types:e})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!iA({node:i,types:e})}}})]}}),joe=mn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>aV(t,e),redo:()=>({state:t,dispatch:e})=>lV(t,e)}},addProseMirrorPlugins(){return[Aoe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Ooe=mn.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(cse.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(ise.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(bS.configure(this.options.bulletList)),this.options.code!==!1&&i.push(fse.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(mse.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(gse.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Moe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(_oe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(yse.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(VB.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(joe.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(vse.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(kse.configure(this.options.italic)),this.options.listItem!==!1&&i.push(vS.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(nV.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(XB.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(wS.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(soe.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(loe.configure(this.options.strike)),this.options.text!==!1&&i.push(coe.configure(this.options.text)),this.options.underline!==!1&&i.push(rV.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Roe.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Loe=Ooe,Ioe=mn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Poe=Ioe,zoe=Doe,Boe=bS,Voe=wS,Hoe=vS;const Fg=({label:t,id:e,children:n,focused:r,containerClassName:i})=>{const s=`${e}-label`;return g.jsxs(gt.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[t&&g.jsx(gt.label,{id:s,htmlFor:e,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:t}),n]})},qg=()=>{const[t,e]=Ae.useState(!1);return{focused:t,onFocus:()=>e(!0),onBlur:()=>e(!1)}},Pc=({onClick:t,disabled:e,active:n,title:r,children:i})=>g.jsx("button",{onClick:t,disabled:e,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${e?"opacity-50 cursor-not-allowed":""}`,children:i}),sA=({editor:t,disabled:e})=>{let n="0";return t.isActive("heading",{level:1})?n="1":t.isActive("heading",{level:2})?n="2":t.isActive("heading",{level:3})&&(n="3"),g.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?t.chain().focus().setParagraph().run():t.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:e,children:[g.jsx("option",{value:"0",children:"P"}),g.jsx("option",{value:"1",children:"H1"}),g.jsx("option",{value:"2",children:"H2"}),g.jsx("option",{value:"3",children:"H3"})]})},Km=({id:t,label:e,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=M.useState(0),[d,f]=M.useState(!1),{focused:p,onFocus:m,onBlur:b}=qg(),v=()=>u(Date.now()),w=()=>{f(!d)},S=Qie({extensions:[Loe.configure({bulletList:!1,orderedList:!1,listItem:!1}),Boe.configure({HTMLAttributes:{class:"bullet-list"}}),Voe.configure({HTMLAttributes:{class:"ordered-list"}}),Hoe.configure({HTMLAttributes:{class:"list-item"}}),uoe,Yse.configure({openOnClick:!1}),Poe.configure({types:["heading","paragraph"]}),bse.configure({levels:[1,2,3]}),zoe.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:N})=>{r(N.getHTML())},onFocus:m,onBlur:b,onSelectionUpdate:()=>{v()},onTransaction:()=>{v()}});if(M.useEffect(()=>{S&&(n!==S.getHTML()&&S.commands.setContent(n,{emitUpdate:!1}),S.setEditable(!s))},[n,s,S]),M.useEffect(()=>{const N=A=>{A.key==="Escape"&&d&&f(!1)};return d?(document.addEventListener("keydown",N),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",N),document.body.style.overflow=""}},[d]),!S)return null;const k=[{key:"bold",title:"Bold",onClick:()=>S.chain().focus().toggleBold().run(),active:S.isActive("bold"),node:g.jsx(OJ,{size:16})},{key:"italic",title:"Italic",onClick:()=>S.chain().focus().toggleItalic().run(),active:S.isActive("italic"),node:g.jsx(LJ,{size:16})},{key:"underline",title:"Underline",onClick:()=>S.chain().focus().toggleUnderline().run(),active:S.isActive("underline"),node:g.jsx(BJ,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>S.chain().focus().toggleStrike().run(),active:S.isActive("strike"),node:g.jsx(g.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>S.chain().focus().toggleBulletList().run(),active:S.isActive("bulletList"),node:g.jsx(IJ,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>S.chain().focus().toggleOrderedList().run(),active:S.isActive("orderedList"),node:g.jsx(PJ,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>S.chain().focus().toggleBlockquote().run(),active:S.isActive("blockquote"),node:g.jsx(zJ,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>S.chain().focus().toggleCodeBlock().run(),active:S.isActive("codeBlock"),node:g.jsx(kJ,{size:16})}],T=[{key:"align-left",title:"Align Left",onClick:()=>S.chain().focus().setTextAlign("left").run(),active:S.isActive({textAlign:"left"}),node:g.jsx(RJ,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>S.chain().focus().setTextAlign("center").run(),active:S.isActive({textAlign:"center"}),node:g.jsx(DJ,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>S.chain().focus().setTextAlign("right").run(),active:S.isActive({textAlign:"right"}),node:g.jsx(jJ,{size:16})}],E=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:w,active:d,node:d?g.jsx(YJ,{size:16}):g.jsx(XJ,{size:16})}];return g.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?g.jsxs(gt.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[g.jsx("div",{className:"flex items-center gap-2 mr-4",children:e&&g.jsx("span",{className:"font-medium text-theme",children:e})}),g.jsx(sA,{editor:S,disabled:s}),k.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),g.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),g.jsx("div",{className:"flex-1 overflow-hidden",children:g.jsx("div",{className:"h-full overflow-y-auto p-4",children:g.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:g.jsx(UT,{editor:S,className:"focus:outline-none h-full"})})})})]}):g.jsx(Fg,{id:t,label:e,focused:p,containerClassName:l,children:g.jsxs(gt.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[g.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[g.jsx(sA,{editor:S,disabled:s}),k.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),g.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>g.jsx(Pc,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),g.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:g.jsx(UT,{editor:S,className:"focus:outline-none"})})]})})})},Foe=()=>{Ul();const t=gh(),[e,n]=M.useState(!1),r=M.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=M.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(m,b)=>{o(v=>({...v,[m]:b}))},u=(m,b,v)=>{const w=s[m].map(S=>S.id===b?{...S,value:v}:S);o(S=>({...S,[m]:w}))},d=m=>{o(b=>({...b,[m]:[...b[m],{id:i(),value:""}]}))},f=(m,b)=>{const v=s[m].filter(w=>w.id!==b);o(w=>({...w,[m]:v.length>0?v:[{id:i(),value:""}]}))},p=()=>{n(!0);const m={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(b=>b.value).filter(b=>b.trim()!==""),constraints:s.constraints.map(b=>b.value).filter(b=>b.trim()!==""),hints:s.hints.map(b=>b.value).filter(b=>b.trim()!==""),tags:s.tags.map(b=>b.value).filter(b=>b.trim()!=="")};localStorage.setItem(`custom-problem-${m.id}`,JSON.stringify(m)),setTimeout(()=>{t(`/playground/${m.id}`)},300)};return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsx("div",{className:"flex items-center gap-4",children:g.jsx(yh,{})})]})})}),g.jsx("div",{className:"pt-16 relative z-10",children:g.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("div",{className:"inline-block mb-4",children:g.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),g.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),g.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:g.jsxs("div",{className:"space-y-8",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),g.jsx("input",{id:"title",type:"text",value:s.title,onChange:m=>l("title",m.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsx("div",{children:g.jsx(Km,{id:"description",label:" Description *",value:s.description,onChange:m=>l("description",m),placeholder:"Describe the problem in detail..."})}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),g.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:m=>l("difficulty",m.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[g.jsx("option",{value:"Easy",children:"Easy"}),g.jsx("option",{value:"Medium",children:"Medium"}),g.jsx("option",{value:"Hard",children:"Hard"})]})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Category"]}),g.jsx("input",{id:"category",type:"text",value:s.category,onChange:m=>l("category",m.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),g.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:m=>l("estimatedTime",m.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Requirements"]}),g.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((m,b)=>g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:"flex gap-3 items-start",children:[g.jsx("div",{className:"flex-1",children:g.jsx(Km,{id:`requirement-${m.id}`,label:`Requirement ${b+1}`,value:m.value,onChange:v=>u("requirements",m.id,v),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&g.jsx("button",{type:"button",onClick:()=>f("requirements",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},m.id))]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Constraints"]}),g.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(m=>g.jsxs("div",{className:"flex gap-3 mb-3",children:[g.jsx("input",{type:"text",value:m.value,onChange:b=>u("constraints",m.id,b.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&g.jsx("button",{type:"button",onClick:()=>f("constraints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),g.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(m=>g.jsxs("div",{className:"flex gap-3 mb-3",children:[g.jsx("input",{type:"text",value:m.value,onChange:b=>u("hints",m.id,b.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&g.jsx("button",{type:"button",onClick:()=>f("hints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),g.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[g.jsx("div",{className:"flex items-center justify-between mb-4",children:g.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[g.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(m=>m.value.trim())&&g.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(m=>m.value.trim()).map(m=>g.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[g.jsx("span",{children:m.value}),g.jsx("button",{type:"button",onClick:()=>f("tags",m.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},m.id))}),g.jsxs("div",{className:"flex gap-3",children:[g.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:m=>u("tags",s.tags.at(-1)?.id||"",m.target.value),onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.value.trim()&&(m.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),g.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),g.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[g.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||e,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:e?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):g.jsx(g.Fragment,{children:" Create & Start Designing"})}),g.jsx("button",{type:"button",onClick:()=>t("/"),disabled:e,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},qoe=()=>{Ul();const t=gh(),[e,n]=M.useState([]),[r,i]=M.useState(!1),[s,o]=M.useState(""),[l,u]=M.useState("updated"),[d,f]=M.useState("all"),[p,m]=M.useState(!1),[b,v]=M.useState(!1),[w,S]=M.useState(!1),[k,T]=M.useState(null),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:j,logout:R}=vh();M.useEffect(()=>{N||t("/")},[N,t]),M.useEffect(()=>{(async()=>{if(!N){n([]);return}i(!0);try{const H=await Jt.getUserDiagrams();n(H)}catch(H){console.error("Failed to load diagrams:",H)}finally{i(!1)}})()},[N]);const L=O=>{t(`/playground/free?diagramId=${O}`)},P=async(O,H)=>{H.stopPropagation(),O.isOwner&&(T(O),S(!0))},F=async()=>{if(k)try{await Jt.deleteDiagram(k.id),n(O=>O.filter(H=>H.id!==k.id)),S(!1),T(null)}catch(O){console.error("Failed to delete diagram:",O),alert("Failed to delete diagram. Please try again.")}},V=()=>{S(!1),T(null)},q=e.filter(O=>{if(d==="owned"&&!O.isOwner||d==="shared"&&O.isOwner)return!1;const H=s.toLowerCase();return O.title.toLowerCase().includes(H)||O.description?.toLowerCase().includes(H)||O.owner.name.toLowerCase().includes(H)||O.owner.email.toLowerCase().includes(H)||!1}).sort((O,H)=>{switch(l){case"title":return O.title.localeCompare(H.title);case"created":return new Date(H.createdAt).getTime()-new Date(O.createdAt).getTime();case"updated":default:return new Date(H.updatedAt).getTime()-new Date(O.updatedAt).getTime()}}),I=e.filter(O=>O.isOwner).length,U=e.filter(O=>!O.isOwner).length;return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects and diagrams shared with you",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),g.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[g.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex items-center justify-between h-16",children:[g.jsxs("button",{type:"button",onClick:()=>t("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[N&&g.jsx("button",{type:"button",onClick:()=>t("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),g.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${I} owned  ${U} shared`}),g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:N?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>m(!p),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[E?.picture?g.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):g.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:E?.name?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline text-sm",children:E?.name||E?.email}),g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&g.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:g.jsxs("div",{className:"py-1",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name}),g.jsx("p",{className:"text-sm text-muted truncate",children:E?.email})]}),g.jsx("button",{type:"button",onClick:()=>{m(!1),R()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):g.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),g.jsx("div",{className:"pt-16 relative z-10",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),g.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved projects and diagrams shared with you"})]}),!r&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex gap-2 mb-6 justify-center",children:[g.jsxs("button",{type:"button",onClick:()=>f("all"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="all"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["All Designs (",e.length,")"]}),g.jsxs("button",{type:"button",onClick:()=>f("owned"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="owned"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["My Designs (",I,")"]}),g.jsxs("button",{type:"button",onClick:()=>f("shared"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="shared"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["Shared with Me (",U,")"]})]}),g.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),g.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:O=>o(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),g.jsxs("select",{id:"sort-select",value:l,onChange:O=>u(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[g.jsx("option",{value:"updated",children:"Last Updated"}),g.jsx("option",{value:"created",children:"Date Created"}),g.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),g.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),g.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&q.length===0&&g.jsxs("div",{className:"text-center py-20",children:[g.jsx("div",{className:"text-7xl mb-6",children:s?"":d==="shared"?"":""}),g.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":d==="shared"?"No shared designs yet":d==="owned"?"No designs created yet":"No designs yet"}),g.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":d==="shared"?"Diagrams shared with you will appear here":"Start creating your first system design project"}),!s&&d!=="shared"&&g.jsx("button",{type:"button",onClick:()=>t("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&q.length>0&&g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:q.map((O,H)=>g.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${H===0?"delay-0":H===1?"delay-100":H===2?"delay-200":""}`,children:[g.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),g.jsxs("div",{className:"relative p-6",children:[O.isOwner&&g.jsx("button",{type:"button",onClick:G=>P(O,G),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),g.jsxs("div",{className:"cursor-pointer",onClick:()=>L(O.id),children:[g.jsxs("div",{className:"flex items-start justify-between mb-4",children:[g.jsxs("div",{className:"flex-1 pr-8",children:[g.jsx("div",{className:"flex items-start gap-2 mb-2",children:g.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:O.title})}),!O.isOwner&&g.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[g.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),g.jsxs("div",{className:"relative flex items-center gap-1.5",children:[g.jsxs("div",{className:"relative flex-shrink-0",children:[O.owner.pictureUrl?g.jsx("img",{src:O.owner.pictureUrl,alt:O.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):g.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:O.owner.name[0]?.toUpperCase()}),g.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),g.jsxs("div",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),g.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:O.owner.name})]})]})]}),g.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${O.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:O.permission==="edit"?g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),g.jsx("span",{children:O.permission==="edit"?"Can Edit":"View Only"})]})]}),O.description&&g.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:O.description})]}),g.jsx("div",{className:"text-3xl",children:""})]}),g.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),O.nodes.length," node",O.nodes.length===1?"":"s"]}),g.jsxs("span",{className:"flex items-center gap-1",children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),O.edges.length," connection",O.edges.length===1?"":"s"]})]}),g.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[g.jsxs("span",{children:["Updated"," ",new Date(O.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),g.jsxs("span",{children:["Created"," ",new Date(O.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),g.jsx("button",{type:"button",onClick:G=>{G.stopPropagation(),L(O.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},O.id))})]})]})})]}),b&&g.jsx(Ng,{isOpen:b,onClose:()=>v(!1),onLogin:async(O,H)=>{await A({email:O,password:H})},onSignup:async(O,H,G)=>{await _({email:O,password:H,name:G})},onGoogleLogin:async O=>{await j(O)}}),w&&k&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),g.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),g.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",g.jsxs("strong",{children:['"',k.title,'"']}),"? This will permanently remove the design and all its data."]}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),g.jsx("button",{type:"button",onClick:F,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function Uoe(t){return be({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(t)}const cV=({id:t,checked:e,onChange:n,label:r,disabled:i=!1,className:s=""})=>g.jsxs("label",{htmlFor:t,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[g.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[g.jsx("input",{id:t,type:"checkbox",checked:e,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),g.jsx(uu,{children:e&&g.jsx(gt.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&g.jsx("span",{className:"text-sm text-theme",children:r})]}),uV=({id:t,label:e,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:f,onFocus:p,onBlur:m}=qg();return g.jsx(Fg,{id:t,label:e,focused:f,containerClassName:d,children:g.jsx(gt.input,{id:t,type:"number",value:n??"",onChange:b=>r(Number(b.target.value)),onFocus:p,onBlur:m,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:f?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},V0=({id:t,label:e,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:f}=qg();return g.jsx(Fg,{id:t,label:e,focused:u,containerClassName:l,children:g.jsx(gt.input,{id:t,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:f,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},dV=({id:t,label:e,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:f}=qg(),p=`${t}-label`;return g.jsxs(Fg,{id:t,label:e,focused:u,containerClassName:l,children:[!e&&g.jsx("label",{id:p,htmlFor:t,className:"sr-only",children:t}),g.jsx(gt.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:g.jsx("select",{id:t,value:n??"",onChange:m=>r(m.target.value),onFocus:d,onBlur:f,disabled:s,"aria-labelledby":e?p:void 0,"aria-label":e||t,title:e||t,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(m=>g.jsx("option",{value:m,children:m},m))})})]})};function $oe(t,e=50){const[n,r]=M.useState({past:[],present:t,future:[]}),i=M.useRef(!1),s=M.useCallback(d=>{r(f=>{const p=typeof d=="function"?d(f.present):d;if(i.current)return i.current=!1,{...f,present:p};if(JSON.stringify(p)===JSON.stringify(f.present))return f;const m=[...f.past,f.present];return m.length>e&&m.shift(),{past:m,present:p,future:[]}})},[e]),o=M.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const f=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:f,future:[d.present,...d.future]}})},[]),l=M.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const f=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:f,future:p}})},[]),u=M.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Mn(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=Mn(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var Goe={value:()=>{}};function Ug(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new H0(n)}function H0(t){this._=t}function Woe(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}H0.prototype=Ug.prototype={constructor:H0,on:function(t,e){var n=this._,r=Woe(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=Koe(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=oA(n[i],t.name,e);else if(e==null)for(i in n)n[i]=oA(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new H0(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Koe(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function oA(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Goe,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Ew="http://www.w3.org/1999/xhtml";const aA={svg:"http://www.w3.org/2000/svg",xhtml:Ew,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $g(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),aA.hasOwnProperty(e)?{space:aA[e],local:t}:t}function Yoe(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Ew&&e.documentElement.namespaceURI===Ew?e.createElement(t):e.createElementNS(n,t)}}function Xoe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function fV(t){var e=$g(t);return(e.local?Xoe:Yoe)(e)}function Zoe(){}function CS(t){return t==null?Zoe:function(){return this.querySelector(t)}}function Joe(t){typeof t!="function"&&(t=CS(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,d,f=0;f<o;++f)(u=s[f])&&(d=t.call(u,u.__data__,f,s))&&("__data__"in u&&(d.__data__=u.__data__),l[f]=d);return new ui(r,this._parents)}function Qoe(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function eae(){return[]}function hV(t){return t==null?eae:function(){return this.querySelectorAll(t)}}function tae(t){return function(){return Qoe(t.apply(this,arguments))}}function nae(t){typeof t=="function"?t=tae(t):t=hV(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(t.call(u,u.__data__,d,o)),i.push(u));return new ui(r,i)}function pV(t){return function(){return this.matches(t)}}function mV(t){return function(e){return e.matches(t)}}var rae=Array.prototype.find;function iae(t){return function(){return rae.call(this.children,t)}}function sae(){return this.firstElementChild}function oae(t){return this.select(t==null?sae:iae(typeof t=="function"?t:mV(t)))}var aae=Array.prototype.filter;function lae(){return Array.from(this.children)}function cae(t){return function(){return aae.call(this.children,t)}}function uae(t){return this.selectAll(t==null?lae:cae(typeof t=="function"?t:mV(t)))}function dae(t){typeof t!="function"&&(t=pV(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&l.push(u);return new ui(r,this._parents)}function gV(t){return new Array(t.length)}function fae(){return new ui(this._enter||this._groups.map(gV),this._parents)}function Ym(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ym.prototype={constructor:Ym,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function hae(t){return function(){return t}}function pae(t,e,n,r,i,s){for(var o=0,l,u=e.length,d=s.length;o<d;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new Ym(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function mae(t,e,n,r,i,s,o){var l,u,d=new Map,f=e.length,p=s.length,m=new Array(f),b;for(l=0;l<f;++l)(u=e[l])&&(m[l]=b=o.call(u,u.__data__,l,e)+"",d.has(b)?i[l]=u:d.set(b,u));for(l=0;l<p;++l)b=o.call(t,s[l],l,s)+"",(u=d.get(b))?(r[l]=u,u.__data__=s[l],d.delete(b)):n[l]=new Ym(t,s[l]);for(l=0;l<f;++l)(u=e[l])&&d.get(m[l])===u&&(i[l]=u)}function gae(t){return t.__data__}function yae(t,e){if(!arguments.length)return Array.from(this,gae);var n=e?mae:pae,r=this._parents,i=this._groups;typeof t!="function"&&(t=hae(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var f=r[d],p=i[d],m=p.length,b=bae(t.call(f,f&&f.__data__,d,r)),v=b.length,w=l[d]=new Array(v),S=o[d]=new Array(v),k=u[d]=new Array(m);n(f,p,w,S,k,b,e);for(var T=0,E=0,N,A;T<v;++T)if(N=w[T]){for(T>=E&&(E=T+1);!(A=S[E])&&++E<v;);N._next=A||null}}return o=new ui(o,r),o._enter=l,o._exit=u,o}function bae(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vae(){return new ui(this._exit||this._groups.map(gV),this._parents)}function xae(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function wae(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],f=r[u],p=d.length,m=l[u]=new Array(p),b,v=0;v<p;++v)(b=d[v]||f[v])&&(m[v]=b);for(;u<i;++u)l[u]=n[u];return new ui(l,this._parents)}function Sae(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Cae(t){t||(t=kae);function e(p,m){return p&&m?t(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,f=0;f<l;++f)(d=o[f])&&(u[f]=d);u.sort(e)}return new ui(i,this._parents).order()}function kae(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Eae(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Nae(){return Array.from(this)}function Tae(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Aae(){let t=0;for(const e of this)++t;return t}function Mae(){return!this.node()}function _ae(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function Dae(t){return function(){this.removeAttribute(t)}}function Rae(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jae(t,e){return function(){this.setAttribute(t,e)}}function Oae(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Lae(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Iae(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pae(t,e){var n=$g(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Rae:Dae:typeof e=="function"?n.local?Iae:Lae:n.local?Oae:jae)(n,e))}function yV(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zae(t){return function(){this.style.removeProperty(t)}}function Bae(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Vae(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Hae(t,e,n){return arguments.length>1?this.each((e==null?zae:typeof e=="function"?Vae:Bae)(t,e,n??"")):xu(this.node(),t)}function xu(t,e){return t.style.getPropertyValue(e)||yV(t).getComputedStyle(t,null).getPropertyValue(e)}function Fae(t){return function(){delete this[t]}}function qae(t,e){return function(){this[t]=e}}function Uae(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function $ae(t,e){return arguments.length>1?this.each((e==null?Fae:typeof e=="function"?Uae:qae)(t,e)):this.node()[t]}function bV(t){return t.trim().split(/^|\s+/)}function kS(t){return t.classList||new vV(t)}function vV(t){this._node=t,this._names=bV(t.getAttribute("class")||"")}vV.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xV(t,e){for(var n=kS(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function wV(t,e){for(var n=kS(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Gae(t){return function(){xV(this,t)}}function Wae(t){return function(){wV(this,t)}}function Kae(t,e){return function(){(e.apply(this,arguments)?xV:wV)(this,t)}}function Yae(t,e){var n=bV(t+"");if(arguments.length<2){for(var r=kS(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Kae:e?Gae:Wae)(n,e))}function Xae(){this.textContent=""}function Zae(t){return function(){this.textContent=t}}function Jae(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Qae(t){return arguments.length?this.each(t==null?Xae:(typeof t=="function"?Jae:Zae)(t)):this.node().textContent}function ele(){this.innerHTML=""}function tle(t){return function(){this.innerHTML=t}}function nle(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rle(t){return arguments.length?this.each(t==null?ele:(typeof t=="function"?nle:tle)(t)):this.node().innerHTML}function ile(){this.nextSibling&&this.parentNode.appendChild(this)}function sle(){return this.each(ile)}function ole(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ale(){return this.each(ole)}function lle(t){var e=typeof t=="function"?t:fV(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cle(){return null}function ule(t,e){var n=typeof t=="function"?t:fV(t),r=e==null?cle:typeof e=="function"?e:CS(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dle(){var t=this.parentNode;t&&t.removeChild(this)}function fle(){return this.each(dle)}function hle(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ple(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mle(t){return this.select(t?ple:hle)}function gle(t){return arguments.length?this.property("__data__",t):this.node().__data__}function yle(t){return function(e){t.call(this,e,this.__data__)}}function ble(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function vle(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function xle(t,e,n){return function(){var r=this.__on,i,s=yle(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function wle(t,e,n){var r=ble(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,f;u<d;++u)for(i=0,f=l[u];i<s;++i)if((o=r[i]).type===f.type&&o.name===f.name)return f.value}return}for(l=e?xle:vle,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function SV(t,e,n){var r=yV(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Sle(t,e){return function(){return SV(this,t,e)}}function Cle(t,e){return function(){return SV(this,t,e.apply(this,arguments))}}function kle(t,e){return this.each((typeof e=="function"?Cle:Sle)(t,e))}function*Ele(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var CV=[null];function ui(t,e){this._groups=t,this._parents=e}function Ah(){return new ui([[document.documentElement]],CV)}function Nle(){return this}ui.prototype=Ah.prototype={constructor:ui,select:Joe,selectAll:nae,selectChild:oae,selectChildren:uae,filter:dae,data:yae,enter:fae,exit:vae,join:xae,merge:wae,selection:Nle,order:Sae,sort:Cae,call:Eae,nodes:Nae,node:Tae,size:Aae,empty:Mae,each:_ae,attr:Pae,style:Hae,property:$ae,classed:Yae,text:Qae,html:rle,raise:sle,lower:ale,append:lle,insert:ule,remove:fle,clone:mle,datum:gle,on:wle,dispatch:kle,[Symbol.iterator]:Ele};function ai(t){return typeof t=="string"?new ui([[document.querySelector(t)]],[document.documentElement]):new ui([[t]],CV)}function Tle(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Gi(t,e){if(t=Tle(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ale={passive:!1},Yf={capture:!0,passive:!1};function Nb(t){t.stopImmediatePropagation()}function iu(t){t.preventDefault(),t.stopImmediatePropagation()}function kV(t){var e=t.document.documentElement,n=ai(t).on("dragstart.drag",iu,Yf);"onselectstart"in e?n.on("selectstart.drag",iu,Yf):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function EV(t,e){var n=t.document.documentElement,r=ai(t).on("dragstart.drag",null);e&&(r.on("click.drag",iu,Yf),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const g0=t=>()=>t;function Nw(t,{sourceEvent:e,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:f}})}Nw.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Mle(t){return!t.ctrlKey&&!t.button}function _le(){return this.parentNode}function Dle(t,e){return e??{x:t.x,y:t.y}}function Rle(){return navigator.maxTouchPoints||"ontouchstart"in this}function NV(){var t=Mle,e=_le,n=Dle,r=Rle,i={},s=Ug("start","drag","end"),o=0,l,u,d,f,p=0;function m(N){N.on("mousedown.drag",b).filter(r).on("touchstart.drag",S).on("touchmove.drag",k,Ale).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(N,A){if(!(f||!t.call(this,N,A))){var _=E(this,e.call(this,N,A),N,A,"mouse");_&&(ai(N.view).on("mousemove.drag",v,Yf).on("mouseup.drag",w,Yf),kV(N.view),Nb(N),d=!1,l=N.clientX,u=N.clientY,_("start",N))}}function v(N){if(iu(N),!d){var A=N.clientX-l,_=N.clientY-u;d=A*A+_*_>p}i.mouse("drag",N)}function w(N){ai(N.view).on("mousemove.drag mouseup.drag",null),EV(N.view,d),iu(N),i.mouse("end",N)}function S(N,A){if(t.call(this,N,A)){var _=N.changedTouches,j=e.call(this,N,A),R=_.length,L,P;for(L=0;L<R;++L)(P=E(this,j,N,A,_[L].identifier,_[L]))&&(Nb(N),P("start",N,_[L]))}}function k(N){var A=N.changedTouches,_=A.length,j,R;for(j=0;j<_;++j)(R=i[A[j].identifier])&&(iu(N),R("drag",N,A[j]))}function T(N){var A=N.changedTouches,_=A.length,j,R;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),j=0;j<_;++j)(R=i[A[j].identifier])&&(Nb(N),R("end",N,A[j]))}function E(N,A,_,j,R,L){var P=s.copy(),F=Gi(L||_,A),V,q,I;if((I=n.call(N,new Nw("beforestart",{sourceEvent:_,target:m,identifier:R,active:o,x:F[0],y:F[1],dx:0,dy:0,dispatch:P}),j))!=null)return V=I.x-F[0]||0,q=I.y-F[1]||0,function U(O,H,G){var ee=F,B;switch(O){case"start":i[R]=U,B=o++;break;case"end":delete i[R],--o;case"drag":F=Gi(G||H,A),B=o;break}P.call(O,N,new Nw(O,{sourceEvent:H,subject:I,target:m,identifier:R,active:B,x:F[0]+V,y:F[1]+q,dx:F[0]-ee[0],dy:F[1]-ee[1],dispatch:P}),j)}}return m.filter=function(N){return arguments.length?(t=typeof N=="function"?N:g0(!!N),m):t},m.container=function(N){return arguments.length?(e=typeof N=="function"?N:g0(N),m):e},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:g0(N),m):n},m.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:g0(!!N),m):r},m.on=function(){var N=s.on.apply(s,arguments);return N===s?m:N},m.clickDistance=function(N){return arguments.length?(p=(N=+N)*N,m):Math.sqrt(p)},m}function ES(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function TV(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Mh(){}var Xf=.7,Xm=1/Xf,su="\\s*([+-]?\\d+)\\s*",Zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jle=/^#([0-9a-f]{3,8})$/,Ole=new RegExp(`^rgb\\(${su},${su},${su}\\)$`),Lle=new RegExp(`^rgb\\(${ks},${ks},${ks}\\)$`),Ile=new RegExp(`^rgba\\(${su},${su},${su},${Zf}\\)$`),Ple=new RegExp(`^rgba\\(${ks},${ks},${ks},${Zf}\\)$`),zle=new RegExp(`^hsl\\(${Zf},${ks},${ks}\\)$`),Ble=new RegExp(`^hsla\\(${Zf},${ks},${ks},${Zf}\\)$`),lA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ES(Mh,Ol,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:cA,formatHex:cA,formatHex8:Vle,formatHsl:Hle,formatRgb:uA,toString:uA});function cA(){return this.rgb().formatHex()}function Vle(){return this.rgb().formatHex8()}function Hle(){return AV(this).formatHsl()}function uA(){return this.rgb().formatRgb()}function Ol(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=jle.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?dA(e):n===3?new zr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?y0(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?y0(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ole.exec(t))?new zr(e[1],e[2],e[3],1):(e=Lle.exec(t))?new zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ile.exec(t))?y0(e[1],e[2],e[3],e[4]):(e=Ple.exec(t))?y0(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zle.exec(t))?pA(e[1],e[2]/100,e[3]/100,1):(e=Ble.exec(t))?pA(e[1],e[2]/100,e[3]/100,e[4]):lA.hasOwnProperty(t)?dA(lA[t]):t==="transparent"?new zr(NaN,NaN,NaN,0):null}function dA(t){return new zr(t>>16&255,t>>8&255,t&255,1)}function y0(t,e,n,r){return r<=0&&(t=e=n=NaN),new zr(t,e,n,r)}function Fle(t){return t instanceof Mh||(t=Ol(t)),t?(t=t.rgb(),new zr(t.r,t.g,t.b,t.opacity)):new zr}function Tw(t,e,n,r){return arguments.length===1?Fle(t):new zr(t,e,n,r??1)}function zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ES(zr,Tw,TV(Mh,{brighter(t){return t=t==null?Xm:Math.pow(Xm,t),new zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xf:Math.pow(Xf,t),new zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zr(El(this.r),El(this.g),El(this.b),Zm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fA,formatHex:fA,formatHex8:qle,formatRgb:hA,toString:hA}));function fA(){return`#${ml(this.r)}${ml(this.g)}${ml(this.b)}`}function qle(){return`#${ml(this.r)}${ml(this.g)}${ml(this.b)}${ml((isNaN(this.opacity)?1:this.opacity)*255)}`}function hA(){const t=Zm(this.opacity);return`${t===1?"rgb(":"rgba("}${El(this.r)}, ${El(this.g)}, ${El(this.b)}${t===1?")":`, ${t})`}`}function Zm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function El(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ml(t){return t=El(t),(t<16?"0":"")+t.toString(16)}function pA(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ki(t,e,n,r)}function AV(t){if(t instanceof Ki)return new Ki(t.h,t.s,t.l,t.opacity);if(t instanceof Mh||(t=Ol(t)),!t)return new Ki;if(t instanceof Ki)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(e===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-e)/l+2:o=(e-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Ki(o,l,u,t.opacity)}function Ule(t,e,n,r){return arguments.length===1?AV(t):new Ki(t,e,n,r??1)}function Ki(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ES(Ki,Ule,TV(Mh,{brighter(t){return t=t==null?Xm:Math.pow(Xm,t),new Ki(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xf:Math.pow(Xf,t),new Ki(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zr(Tb(t>=240?t-240:t+120,i,r),Tb(t,i,r),Tb(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ki(mA(this.h),b0(this.s),b0(this.l),Zm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zm(this.opacity);return`${t===1?"hsl(":"hsla("}${mA(this.h)}, ${b0(this.s)*100}%, ${b0(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mA(t){return t=(t||0)%360,t<0?t+360:t}function b0(t){return Math.max(0,Math.min(1,t||0))}function Tb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const NS=t=>()=>t;function $le(t,e){return function(n){return t+n*e}}function Gle(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Wle(t){return(t=+t)==1?MV:function(e,n){return n-e?Gle(e,n,t):NS(isNaN(e)?n:e)}}function MV(t,e){var n=e-t;return n?$le(t,n):NS(isNaN(t)?e:t)}const Jm=(function t(e){var n=Wle(e);function r(i,s){var o=n((i=Tw(i)).r,(s=Tw(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=MV(i.opacity,s.opacity);return function(f){return i.r=o(f),i.g=l(f),i.b=u(f),i.opacity=d(f),i+""}}return r.gamma=t,r})(1);function Kle(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Yle(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Xle(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ef(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function Zle(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function vs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Jle(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ef(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Aw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ab=new RegExp(Aw.source,"g");function Qle(t){return function(){return t}}function ece(t){return function(e){return t(e)+""}}function _V(t,e){var n=Aw.lastIndex=Ab.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(t=t+"",e=e+"";(r=Aw.exec(t))&&(i=Ab.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:vs(r,i)})),n=Ab.lastIndex;return n<e.length&&(s=e.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?ece(u[0].x):Qle(e):(e=u.length,function(d){for(var f=0,p;f<e;++f)l[(p=u[f]).i]=p.x(d);return l.join("")})}function Ef(t,e){var n=typeof e,r;return e==null||n==="boolean"?NS(e):(n==="number"?vs:n==="string"?(r=Ol(e))?(e=r,Jm):_V:e instanceof Ol?Jm:e instanceof Date?Zle:Yle(e)?Kle:Array.isArray(e)?Xle:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Jle:vs)(t,e)}var gA=180/Math.PI,Mw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function DV(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*gA,skewX:Math.atan(u)*gA,scaleX:o,scaleY:l}}var v0;function tce(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mw:DV(e.a,e.b,e.c,e.d,e.e,e.f)}function nce(t){return t==null||(v0||(v0=document.createElementNS("http://www.w3.org/2000/svg","g")),v0.setAttribute("transform",t),!(t=v0.transform.baseVal.consolidate()))?Mw:(t=t.matrix,DV(t.a,t.b,t.c,t.d,t.e,t.f))}function RV(t,e,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,f,p,m,b,v){if(d!==p||f!==m){var w=b.push("translate(",null,e,null,n);v.push({i:w-4,x:vs(d,p)},{i:w-2,x:vs(f,m)})}else(p||m)&&b.push("translate("+p+e+m+n)}function o(d,f,p,m){d!==f?(d-f>180?f+=360:f-d>180&&(d+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:vs(d,f)})):f&&p.push(i(p)+"rotate("+f+r)}function l(d,f,p,m){d!==f?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:vs(d,f)}):f&&p.push(i(p)+"skewX("+f+r)}function u(d,f,p,m,b,v){if(d!==p||f!==m){var w=b.push(i(b)+"scale(",null,",",null,")");v.push({i:w-4,x:vs(d,p)},{i:w-2,x:vs(f,m)})}else(p!==1||m!==1)&&b.push(i(b)+"scale("+p+","+m+")")}return function(d,f){var p=[],m=[];return d=t(d),f=t(f),s(d.translateX,d.translateY,f.translateX,f.translateY,p,m),o(d.rotate,f.rotate,p,m),l(d.skewX,f.skewX,p,m),u(d.scaleX,d.scaleY,f.scaleX,f.scaleY,p,m),d=f=null,function(b){for(var v=-1,w=m.length,S;++v<w;)p[(S=m[v]).i]=S.x(b);return p.join("")}}}var rce=RV(tce,"px, ","px)","deg)"),ice=RV(nce,", ",")",")"),sce=1e-12;function yA(t){return((t=Math.exp(t))+1/t)/2}function oce(t){return((t=Math.exp(t))-1/t)/2}function ace(t){return((t=Math.exp(2*t))-1)/(t+1)}const F0=(function t(e,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],f=o[0],p=o[1],m=o[2],b=f-l,v=p-u,w=b*b+v*v,S,k;if(w<sce)k=Math.log(m/d)/e,S=function(j){return[l+j*b,u+j*v,d*Math.exp(e*j*k)]};else{var T=Math.sqrt(w),E=(m*m-d*d+r*w)/(2*d*n*T),N=(m*m-d*d-r*w)/(2*m*n*T),A=Math.log(Math.sqrt(E*E+1)-E),_=Math.log(Math.sqrt(N*N+1)-N);k=(_-A)/e,S=function(j){var R=j*k,L=yA(A),P=d/(n*T)*(L*ace(e*R+A)-oce(A));return[l+P*b,u+P*v,d*L/yA(e*R+A)]}}return S.duration=k*1e3*e/Math.SQRT2,S}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i})(Math.SQRT2,2,4);var wu=0,rf=0,Ud=0,jV=1e3,Qm,sf,eg=0,Ll=0,Gg=0,Jf=typeof performance=="object"&&performance.now?performance:Date,OV=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function TS(){return Ll||(OV(lce),Ll=Jf.now()+Gg)}function lce(){Ll=0}function tg(){this._call=this._time=this._next=null}tg.prototype=LV.prototype={constructor:tg,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?TS():+n)+(e==null?0:+e),!this._next&&sf!==this&&(sf?sf._next=this:Qm=this,sf=this),this._call=t,this._time=n,_w()},stop:function(){this._call&&(this._call=null,this._time=1/0,_w())}};function LV(t,e,n){var r=new tg;return r.restart(t,e,n),r}function cce(){TS(),++wu;for(var t=Qm,e;t;)(e=Ll-t._time)>=0&&t._call.call(void 0,e),t=t._next;--wu}function bA(){Ll=(eg=Jf.now())+Gg,wu=rf=0;try{cce()}finally{wu=0,dce(),Ll=0}}function uce(){var t=Jf.now(),e=t-eg;e>jV&&(Gg-=e,eg=t)}function dce(){for(var t,e=Qm,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Qm=n);sf=t,_w(r)}function _w(t){if(!wu){rf&&(rf=clearTimeout(rf));var e=t-Ll;e>24?(t<1/0&&(rf=setTimeout(bA,t-Jf.now()-Gg)),Ud&&(Ud=clearInterval(Ud))):(Ud||(eg=Jf.now(),Ud=setInterval(uce,jV)),wu=1,OV(bA))}}function vA(t,e,n){var r=new tg;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var fce=Ug("start","end","cancel","interrupt"),hce=[],IV=0,xA=1,Dw=2,q0=3,wA=4,Rw=5,U0=6;function Wg(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;pce(t,n,{name:e,index:r,group:i,on:fce,tween:hce,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:IV})}function AS(t,e){var n=Ji(t,e);if(n.state>IV)throw new Error("too late; already scheduled");return n}function Rs(t,e){var n=Ji(t,e);if(n.state>q0)throw new Error("too late; already running");return n}function Ji(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function pce(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=LV(s,0,n.time);function s(d){n.state=xA,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var f,p,m,b;if(n.state!==xA)return u();for(f in r)if(b=r[f],b.name===n.name){if(b.state===q0)return vA(o);b.state===wA?(b.state=U0,b.timer.stop(),b.on.call("interrupt",t,t.__data__,b.index,b.group),delete r[f]):+f<e&&(b.state=U0,b.timer.stop(),b.on.call("cancel",t,t.__data__,b.index,b.group),delete r[f])}if(vA(function(){n.state===q0&&(n.state=wA,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=Dw,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Dw){for(n.state=q0,i=new Array(m=n.tween.length),f=0,p=-1;f<m;++f)(b=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function l(d){for(var f=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Rw,1),p=-1,m=i.length;++p<m;)i[p].call(t,f);n.state===Rw&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=U0,n.timer.stop(),delete r[e];for(var d in r)return;delete t.__transition}}function $0(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>Dw&&r.state<Rw,r.state=U0,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function mce(t){return this.each(function(){$0(this,t)})}function gce(t,e){var n,r;return function(){var i=Rs(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function yce(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Rs(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===e){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function bce(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ji(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?gce:yce)(n,t,e))}function MS(t,e,n){var r=t._id;return t.each(function(){var i=Rs(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Ji(i,r).value[e]}}function PV(t,e){var n;return(typeof e=="number"?vs:e instanceof Ol?Jm:(n=Ol(e))?(e=n,Jm):_V)(t,e)}function vce(t){return function(){this.removeAttribute(t)}}function xce(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wce(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function Sce(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function Cce(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function kce(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function Ece(t,e){var n=$g(t),r=n==="transform"?ice:PV;return this.attrTween(t,typeof e=="function"?(n.local?kce:Cce)(n,r,MS(this,"attr."+t,e)):e==null?(n.local?xce:vce)(n):(n.local?Sce:wce)(n,r,e))}function Nce(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Tce(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ace(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Tce(t,s)),n}return i._value=e,i}function Mce(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Nce(t,s)),n}return i._value=e,i}function _ce(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=$g(t);return this.tween(n,(r.local?Ace:Mce)(r,e))}function Dce(t,e){return function(){AS(this,t).delay=+e.apply(this,arguments)}}function Rce(t,e){return e=+e,function(){AS(this,t).delay=e}}function jce(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Dce:Rce)(e,t)):Ji(this.node(),e).delay}function Oce(t,e){return function(){Rs(this,t).duration=+e.apply(this,arguments)}}function Lce(t,e){return e=+e,function(){Rs(this,t).duration=e}}function Ice(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Oce:Lce)(e,t)):Ji(this.node(),e).duration}function Pce(t,e){if(typeof e!="function")throw new Error;return function(){Rs(this,t).ease=e}}function zce(t){var e=this._id;return arguments.length?this.each(Pce(e,t)):Ji(this.node(),e).ease}function Bce(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Rs(this,t).ease=n}}function Vce(t){if(typeof t!="function")throw new Error;return this.each(Bce(this._id,t))}function Hce(t){typeof t!="function"&&(t=pV(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&t.call(u,u.__data__,d,s)&&l.push(u);return new fo(r,this._parents,this._name,this._id)}function Fce(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],d=n[l],f=u.length,p=o[l]=new Array(f),m,b=0;b<f;++b)(m=u[b]||d[b])&&(p[b]=m);for(;l<r;++l)o[l]=e[l];return new fo(o,this._parents,this._name,this._id)}function qce(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Uce(t,e,n){var r,i,s=qce(e)?AS:Rs;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function $ce(t,e){var n=this._id;return arguments.length<2?Ji(this.node(),n).on.on(t):this.each(Uce(n,t,e))}function Gce(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Wce(){return this.on("end.remove",Gce(this._id))}function Kce(t){var e=this._name,n=this._id;typeof t!="function"&&(t=CS(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),f,p,m=0;m<u;++m)(f=l[m])&&(p=t.call(f,f.__data__,m,l))&&("__data__"in f&&(p.__data__=f.__data__),d[m]=p,Wg(d[m],e,n,m,d,Ji(f,n)));return new fo(s,this._parents,e,n)}function Yce(t){var e=this._name,n=this._id;typeof t!="function"&&(t=hV(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,f,p=0;p<d;++p)if(f=u[p]){for(var m=t.call(f,f.__data__,p,u),b,v=Ji(f,n),w=0,S=m.length;w<S;++w)(b=m[w])&&Wg(b,e,n,w,m,v);s.push(m),o.push(f)}return new fo(s,o,e,n)}var Xce=Ah.prototype.constructor;function Zce(){return new Xce(this._groups,this._parents)}function Jce(t,e){var n,r,i;return function(){var s=xu(this,t),o=(this.style.removeProperty(t),xu(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function zV(t){return function(){this.style.removeProperty(t)}}function Qce(t,e,n){var r,i=n+"",s;return function(){var o=xu(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function eue(t,e,n){var r,i,s;return function(){var o=xu(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),xu(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function tue(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=Rs(this,t),d=u.on,f=u.value[s]==null?l||(l=zV(e)):void 0;(d!==n||i!==f)&&(r=(n=d).copy()).on(o,i=f),u.on=r}}function nue(t,e,n){var r=(t+="")=="transform"?rce:PV;return e==null?this.styleTween(t,Jce(t,r)).on("end.style."+t,zV(t)):typeof e=="function"?this.styleTween(t,eue(t,r,MS(this,"style."+t,e))).each(tue(this._id,t)):this.styleTween(t,Qce(t,r,e),n).on("end.style."+t,null)}function rue(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function iue(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&rue(t,o,n)),r}return s._value=e,s}function sue(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,iue(t,e,n??""))}function oue(t){return function(){this.textContent=t}}function aue(t){return function(){var e=t(this);this.textContent=e??""}}function lue(t){return this.tween("text",typeof t=="function"?aue(MS(this,"text",t)):oue(t==null?"":t+""))}function cue(t){return function(e){this.textContent=t.call(this,e)}}function uue(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&cue(i)),e}return r._value=t,r}function due(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,uue(t))}function fue(){for(var t=this._name,e=this._id,n=BV(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var f=Ji(u,e);Wg(u,t,n,d,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new fo(r,this._parents,t,n)}function hue(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=Rs(this,r),f=d.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),d.on=e}),i===0&&s()})}var pue=0;function fo(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function BV(){return++pue}var Js=Ah.prototype;fo.prototype={constructor:fo,select:Kce,selectAll:Yce,selectChild:Js.selectChild,selectChildren:Js.selectChildren,filter:Hce,merge:Fce,selection:Zce,transition:fue,call:Js.call,nodes:Js.nodes,node:Js.node,size:Js.size,empty:Js.empty,each:Js.each,on:$ce,attr:Ece,attrTween:_ce,style:nue,styleTween:sue,text:lue,textTween:due,remove:Wce,tween:bce,delay:jce,duration:Ice,ease:zce,easeVarying:Vce,end:hue,[Symbol.iterator]:Js[Symbol.iterator]};function mue(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var gue={time:null,delay:0,duration:250,ease:mue};function yue(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function bue(t){var e,n;t instanceof fo?(e=t._id,t=t._name):(e=BV(),(n=gue).time=TS(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&Wg(u,t,e,d,o,n||yue(u,e));return new fo(r,this._parents,t,e)}Ah.prototype.interrupt=mce;Ah.prototype.transition=bue;const x0=t=>()=>t;function vue(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function io(t,e,n){this.k=t,this.x=e,this.y=n}io.prototype={constructor:io,scale:function(t){return t===1?this:new io(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new io(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Kg=new io(1,0,0);VV.prototype=io.prototype;function VV(t){for(;!t.__zoom;)if(!(t=t.parentNode))return Kg;return t.__zoom}function Mb(t){t.stopImmediatePropagation()}function $d(t){t.preventDefault(),t.stopImmediatePropagation()}function xue(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function wue(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function SA(){return this.__zoom||Kg}function Sue(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Cue(){return navigator.maxTouchPoints||"ontouchstart"in this}function kue(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function HV(){var t=xue,e=wue,n=kue,r=Sue,i=Cue,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=F0,d=Ug("start","zoom","end"),f,p,m,b=500,v=150,w=0,S=10;function k(I){I.property("__zoom",SA).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",P).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(I,U,O,H){var G=I.selection?I.selection():I;G.property("__zoom",SA),I!==G?A(I,U,O,H):G.interrupt().each(function(){_(this,arguments).event(H).start().zoom(null,typeof U=="function"?U.apply(this,arguments):U).end()})},k.scaleBy=function(I,U,O,H){k.scaleTo(I,function(){var G=this.__zoom.k,ee=typeof U=="function"?U.apply(this,arguments):U;return G*ee},O,H)},k.scaleTo=function(I,U,O,H){k.transform(I,function(){var G=e.apply(this,arguments),ee=this.__zoom,B=O==null?N(G):typeof O=="function"?O.apply(this,arguments):O,W=ee.invert(B),ie=typeof U=="function"?U.apply(this,arguments):U;return n(E(T(ee,ie),B,W),G,o)},O,H)},k.translateBy=function(I,U,O,H){k.transform(I,function(){return n(this.__zoom.translate(typeof U=="function"?U.apply(this,arguments):U,typeof O=="function"?O.apply(this,arguments):O),e.apply(this,arguments),o)},null,H)},k.translateTo=function(I,U,O,H,G){k.transform(I,function(){var ee=e.apply(this,arguments),B=this.__zoom,W=H==null?N(ee):typeof H=="function"?H.apply(this,arguments):H;return n(Kg.translate(W[0],W[1]).scale(B.k).translate(typeof U=="function"?-U.apply(this,arguments):-U,typeof O=="function"?-O.apply(this,arguments):-O),ee,o)},H,G)};function T(I,U){return U=Math.max(s[0],Math.min(s[1],U)),U===I.k?I:new io(U,I.x,I.y)}function E(I,U,O){var H=U[0]-O[0]*I.k,G=U[1]-O[1]*I.k;return H===I.x&&G===I.y?I:new io(I.k,H,G)}function N(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,U,O,H){I.on("start.zoom",function(){_(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(H).end()}).tween("zoom",function(){var G=this,ee=arguments,B=_(G,ee).event(H),W=e.apply(G,ee),ie=O==null?N(W):typeof O=="function"?O.apply(G,ee):O,oe=Math.max(W[1][0]-W[0][0],W[1][1]-W[0][1]),$=G.__zoom,Z=typeof U=="function"?U.apply(G,ee):U,te=u($.invert(ie).concat(oe/$.k),Z.invert(ie).concat(oe/Z.k));return function(ce){if(ce===1)ce=Z;else{var re=te(ce),ye=oe/re[2];ce=new io(ye,ie[0]-re[0]*ye,ie[1]-re[1]*ye)}B.zoom(null,ce)}})}function _(I,U,O){return!O&&I.__zooming||new j(I,U)}function j(I,U){this.that=I,this.args=U,this.active=0,this.sourceEvent=null,this.extent=e.apply(I,U),this.taps=0}j.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,U){return this.mouse&&I!=="mouse"&&(this.mouse[1]=U.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=U.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=U.invert(this.touch1[0])),this.that.__zoom=U,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var U=ai(this.that).datum();d.call(I,this.that,new vue(I,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:d}),U)}};function R(I,...U){if(!t.apply(this,arguments))return;var O=_(this,U).event(I),H=this.__zoom,G=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),ee=Gi(I);if(O.wheel)(O.mouse[0][0]!==ee[0]||O.mouse[0][1]!==ee[1])&&(O.mouse[1]=H.invert(O.mouse[0]=ee)),clearTimeout(O.wheel);else{if(H.k===G)return;O.mouse=[ee,H.invert(ee)],$0(this),O.start()}$d(I),O.wheel=setTimeout(B,v),O.zoom("mouse",n(E(T(H,G),O.mouse[0],O.mouse[1]),O.extent,o));function B(){O.wheel=null,O.end()}}function L(I,...U){if(m||!t.apply(this,arguments))return;var O=I.currentTarget,H=_(this,U,!0).event(I),G=ai(I.view).on("mousemove.zoom",ie,!0).on("mouseup.zoom",oe,!0),ee=Gi(I,O),B=I.clientX,W=I.clientY;kV(I.view),Mb(I),H.mouse=[ee,this.__zoom.invert(ee)],$0(this),H.start();function ie($){if($d($),!H.moved){var Z=$.clientX-B,te=$.clientY-W;H.moved=Z*Z+te*te>w}H.event($).zoom("mouse",n(E(H.that.__zoom,H.mouse[0]=Gi($,O),H.mouse[1]),H.extent,o))}function oe($){G.on("mousemove.zoom mouseup.zoom",null),EV($.view,H.moved),$d($),H.event($).end()}}function P(I,...U){if(t.apply(this,arguments)){var O=this.__zoom,H=Gi(I.changedTouches?I.changedTouches[0]:I,this),G=O.invert(H),ee=O.k*(I.shiftKey?.5:2),B=n(E(T(O,ee),H,G),e.apply(this,U),o);$d(I),l>0?ai(this).transition().duration(l).call(A,B,H,I):ai(this).call(k.transform,B,H,I)}}function F(I,...U){if(t.apply(this,arguments)){var O=I.touches,H=O.length,G=_(this,U,I.changedTouches.length===H).event(I),ee,B,W,ie;for(Mb(I),B=0;B<H;++B)W=O[B],ie=Gi(W,this),ie=[ie,this.__zoom.invert(ie),W.identifier],G.touch0?!G.touch1&&G.touch0[2]!==ie[2]&&(G.touch1=ie,G.taps=0):(G.touch0=ie,ee=!0,G.taps=1+!!f);f&&(f=clearTimeout(f)),ee&&(G.taps<2&&(p=ie[0],f=setTimeout(function(){f=null},b)),$0(this),G.start())}}function V(I,...U){if(this.__zooming){var O=_(this,U).event(I),H=I.changedTouches,G=H.length,ee,B,W,ie;for($d(I),ee=0;ee<G;++ee)B=H[ee],W=Gi(B,this),O.touch0&&O.touch0[2]===B.identifier?O.touch0[0]=W:O.touch1&&O.touch1[2]===B.identifier&&(O.touch1[0]=W);if(B=O.that.__zoom,O.touch1){var oe=O.touch0[0],$=O.touch0[1],Z=O.touch1[0],te=O.touch1[1],ce=(ce=Z[0]-oe[0])*ce+(ce=Z[1]-oe[1])*ce,re=(re=te[0]-$[0])*re+(re=te[1]-$[1])*re;B=T(B,Math.sqrt(ce/re)),W=[(oe[0]+Z[0])/2,(oe[1]+Z[1])/2],ie=[($[0]+te[0])/2,($[1]+te[1])/2]}else if(O.touch0)W=O.touch0[0],ie=O.touch0[1];else return;O.zoom("touch",n(E(B,W,ie),O.extent,o))}}function q(I,...U){if(this.__zooming){var O=_(this,U).event(I),H=I.changedTouches,G=H.length,ee,B;for(Mb(I),m&&clearTimeout(m),m=setTimeout(function(){m=null},b),ee=0;ee<G;++ee)B=H[ee],O.touch0&&O.touch0[2]===B.identifier?delete O.touch0:O.touch1&&O.touch1[2]===B.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(B=Gi(B,this),Math.hypot(p[0]-B[0],p[1]-B[1])<S)){var W=ai(this).on("dblclick.zoom");W&&W.apply(this,arguments)}}}return k.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:x0(+I),k):r},k.filter=function(I){return arguments.length?(t=typeof I=="function"?I:x0(!!I),k):t},k.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:x0(!!I),k):i},k.extent=function(I){return arguments.length?(e=typeof I=="function"?I:x0([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),k):e},k.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],k):[s[0],s[1]]},k.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],k):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},k.constrain=function(I){return arguments.length?(n=I,k):n},k.duration=function(I){return arguments.length?(l=+I,k):l},k.interpolate=function(I){return arguments.length?(u=I,k):u},k.on=function(){var I=d.on.apply(d,arguments);return I===d?k:I},k.clickDistance=function(I){return arguments.length?(w=(I=+I)*I,k):Math.sqrt(w)},k.tapDistance=function(I){return arguments.length?(S=+I,k):S},k}const As={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:r}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Qf=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],FV=["Enter"," ","Escape"],qV={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Il;(function(t){t.Strict="strict",t.Loose="loose"})(Il||(Il={}));var Nl;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Nl||(Nl={}));var eh;(function(t){t.Partial="partial",t.Full="full"})(eh||(eh={}));const UV={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var aa;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(aa||(aa={}));var ng;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(ng||(ng={}));var Re;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Re||(Re={}));const CA={[Re.Left]:Re.Right,[Re.Right]:Re.Left,[Re.Top]:Re.Bottom,[Re.Bottom]:Re.Top};function $V(t){return t===null?null:t?"valid":"invalid"}const GV=t=>"id"in t&&"source"in t&&"target"in t,Eue=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),_S=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),_h=(t,e=[0,0])=>{const{width:n,height:r}=go(t),i=t.origin??e,s=n*i[0],o=r*i[1];return{x:t.position.x-s,y:t.position.y-o}},WV=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,i)=>{const s=typeof i=="string";let o=!e.nodeLookup&&!s?i:void 0;e.nodeLookup&&(o=s?e.nodeLookup.get(i):_S(i)?i:e.nodeLookup.get(i.id));const l=o?rg(o,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Yg(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Xg(n)},Dh=(t,e={})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(r=>{if(e.filter===void 0||e.filter(r)){const i=rg(r);n=Yg(n,i)}}),Xg(n)},DS=(t,e,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...jh(e,[n,r,i]),width:e.width/i,height:e.height/i},u=[];for(const d of t.values()){const{measured:f,selectable:p=!0,hidden:m=!1}=d;if(o&&!p||m)continue;const b=f.width??d.width??d.initialWidth??null,v=f.height??d.height??d.initialHeight??null,w=th(l,Cu(d)),S=(b??0)*(v??0),k=s&&w>0;(!d.internals.handleBounds||k||w>=S||d.dragging)&&u.push(d)}return u},Nue=(t,e)=>{const n=new Set;return t.forEach(r=>{n.add(r.id)}),e.filter(r=>n.has(r.source)||n.has(r.target))};function Tue(t,e){const n=new Map,r=e?.nodes?new Set(e.nodes.map(i=>i.id)):null;return t.forEach(i=>{i.measured.width&&i.measured.height&&(e?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Aue({nodes:t,width:e,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(t.size===0)return Promise.resolve(!0);const l=Tue(t,o),u=Dh(l),d=Zg(u,e,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function KV({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(t),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},f=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",As.error005());else{const b=l.measured.width,v=l.measured.height;b&&v&&(p=[[u,d],[u+b,d+v]])}else l&&ku(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const m=ku(p)?Pl(e,p,o.measured):e;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",As.error015()),{position:{x:m.x-u+(o.measured.width??0)*f[0],y:m.y-d+(o.measured.height??0)*f[1]},positionAbsolute:m}}async function Mue({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(t.map(m=>m.id)),o=[];for(const m of n){if(m.deletable===!1)continue;const b=s.has(m.id),v=!b&&m.parentId&&o.find(w=>w.id===m.parentId);(b||v)&&o.push(m)}const l=new Set(e.map(m=>m.id)),u=r.filter(m=>m.deletable!==!1),f=Nue(o,u);for(const m of u)l.has(m.id)&&!f.find(v=>v.id===m.id)&&f.push(m);if(!i)return{edges:f,nodes:o};const p=await i({nodes:o,edges:f});return typeof p=="boolean"?p?{edges:f,nodes:o}:{edges:[],nodes:[]}:p}const Su=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Pl=(t={x:0,y:0},e,n)=>({x:Su(t.x,e[0][0],e[1][0]-(n?.width??0)),y:Su(t.y,e[0][1],e[1][1]-(n?.height??0))});function YV(t,e,n){const{width:r,height:i}=go(n),{x:s,y:o}=n.internals.positionAbsolute;return Pl(t,[[s,o],[s+r,o+i]],e)}const kA=(t,e,n)=>t<e?Su(Math.abs(t-e),1,e)/e:t>n?-Su(Math.abs(t-n),1,e)/e:0,XV=(t,e,n=15,r=40)=>{const i=kA(t.x,r,e.width-r)*n,s=kA(t.y,r,e.height-r)*n;return[i,s]},Yg=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),jw=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),Xg=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Cu=(t,e=[0,0])=>{const{x:n,y:r}=_S(t)?t.internals.positionAbsolute:_h(t,e);return{x:n,y:r,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},rg=(t,e=[0,0])=>{const{x:n,y:r}=_S(t)?t.internals.positionAbsolute:_h(t,e);return{x:n,y:r,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:r+(t.measured?.height??t.height??t.initialHeight??0)}},ZV=(t,e)=>Xg(Yg(jw(t),jw(e))),th=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},EA=t=>Xi(t.width)&&Xi(t.height)&&Xi(t.x)&&Xi(t.y),Xi=t=>!isNaN(t)&&isFinite(t),_ue=(t,e)=>{},Rh=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),jh=({x:t,y:e},[n,r,i],s=!1,o=[1,1])=>{const l={x:(t-n)/i,y:(e-r)/i};return s?Rh(l,o):l},ig=({x:t,y:e},[n,r,i])=>({x:t*i+n,y:e*i+r});function zc(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Due(t,e,n){if(typeof t=="string"||typeof t=="number"){const r=zc(t,n),i=zc(t,e);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof t=="object"){const r=zc(t.top??t.y??0,n),i=zc(t.bottom??t.y??0,n),s=zc(t.left??t.x??0,e),o=zc(t.right??t.x??0,e);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Rue(t,e,n,r,i,s){const{x:o,y:l}=ig(t,[e,n,r]),{x:u,y:d}=ig({x:t.x+t.width,y:t.y+t.height},[e,n,r]),f=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(f),bottom:Math.floor(p)}}const Zg=(t,e,n,r,i,s)=>{const o=Due(s,e,n),l=(e-o.x)/t.width,u=(n-o.y)/t.height,d=Math.min(l,u),f=Su(d,r,i),p=t.x+t.width/2,m=t.y+t.height/2,b=e/2-p*f,v=n/2-m*f,w=Rue(t,b,v,f,e,n),S={left:Math.min(w.left-o.left,0),top:Math.min(w.top-o.top,0),right:Math.min(w.right-o.right,0),bottom:Math.min(w.bottom-o.bottom,0)};return{x:b-S.left+S.right,y:v-S.top+S.bottom,zoom:f}},nh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function ku(t){return t!=null&&t!=="parent"}function go(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function JV(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function QV(t,e={width:0,height:0},n,r,i){const s={...t},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(e.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(e.height??0)*l[1]}return s}function NA(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function jue(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function Oue(t){return{...qV,...t||{}}}function Nf(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=ws(t),l=jh({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Rh(l,e):l;return{xSnapped:u,ySnapped:d,...l}}const RS=t=>({width:t.offsetWidth,height:t.offsetHeight}),eH=t=>t?.getRootNode?.()||window?.document,Lue=["INPUT","SELECT","TEXTAREA"];function tH(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:Lue.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const nH=t=>"clientX"in t,ws=(t,e)=>{const n=nH(t),r=n?t.clientX:t.touches?.[0].clientX,i=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:i-(e?.top??0)}},TA=(t,e,n,r,i)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:t,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...RS(o)}})};function rH({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=t*.125+i*.375+o*.375+n*.125,d=e*.125+s*.375+l*.375+r*.125,f=Math.abs(u-t),p=Math.abs(d-e);return[u,d,f,p]}function w0(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function AA({pos:t,x1:e,y1:n,x2:r,y2:i,c:s}){switch(t){case Re.Left:return[e-w0(e-r,s),n];case Re.Right:return[e+w0(r-e,s),n];case Re.Top:return[e,n-w0(n-i,s)];case Re.Bottom:return[e,n+w0(i-n,s)]}}function Jg({sourceX:t,sourceY:e,sourcePosition:n=Re.Bottom,targetX:r,targetY:i,targetPosition:s=Re.Top,curvature:o=.25}){const[l,u]=AA({pos:n,x1:t,y1:e,x2:r,y2:i,c:o}),[d,f]=AA({pos:s,x1:r,y1:i,x2:t,y2:e,c:o}),[p,m,b,v]=rH({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:f});return[`M${t},${e} C${l},${u} ${d},${f} ${r},${i}`,p,m,b,v]}function Qg({sourceX:t,sourceY:e,targetX:n,targetY:r}){const i=Math.abs(n-t)/2,s=n<t?n+i:n-i,o=Math.abs(r-e)/2,l=r<e?r+o:r-o;return[s,l,i,o]}function Iue({sourceNode:t,targetNode:e,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(t.parentId?t.internals.z:0,e.parentId?e.internals.z:0);return s+o}function Pue({sourceNode:t,targetNode:e,width:n,height:r,transform:i}){const s=Yg(rg(t),rg(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return th(o,Xg(s))>0}const zue=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`xy-edge__${t}${e||""}-${n}${r||""}`,Bue=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),iH=(t,e)=>{if(!t.source||!t.target)return e;let n;return GV(t)?n={...t}:n={...t,id:zue(t)},Bue(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function sH({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[i,s,o,l]=Qg({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,i,s,o,l]}const MA={[Re.Left]:{x:-1,y:0},[Re.Right]:{x:1,y:0},[Re.Top]:{x:0,y:-1},[Re.Bottom]:{x:0,y:1}},Vue=({source:t,sourcePosition:e=Re.Bottom,target:n})=>e===Re.Left||e===Re.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},_A=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Hue({source:t,sourcePosition:e=Re.Bottom,target:n,targetPosition:r=Re.Top,center:i,offset:s,stepPosition:o}){const l=MA[e],u=MA[r],d={x:t.x+l.x*s,y:t.y+l.y*s},f={x:n.x+u.x*s,y:n.y+u.y*s},p=Vue({source:d,sourcePosition:e,target:f}),m=p.x!==0?"x":"y",b=p[m];let v=[],w,S;const k={x:0,y:0},T={x:0,y:0},[,,E,N]=Qg({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(l[m]*u[m]===-1){m==="x"?(w=i.x??d.x+(f.x-d.x)*o,S=i.y??(d.y+f.y)/2):(w=i.x??(d.x+f.x)/2,S=i.y??d.y+(f.y-d.y)*o);const _=[{x:w,y:d.y},{x:w,y:f.y}],j=[{x:d.x,y:S},{x:f.x,y:S}];l[m]===b?v=m==="x"?_:j:v=m==="x"?j:_}else{const _=[{x:d.x,y:f.y}],j=[{x:f.x,y:d.y}];if(m==="x"?v=l.x===b?j:_:v=l.y===b?_:j,e===r){const V=Math.abs(t[m]-n[m]);if(V<=s){const q=Math.min(s-1,s-V);l[m]===b?k[m]=(d[m]>t[m]?-1:1)*q:T[m]=(f[m]>n[m]?-1:1)*q}}if(e!==r){const V=m==="x"?"y":"x",q=l[m]===u[V],I=d[V]>f[V],U=d[V]<f[V];(l[m]===1&&(!q&&I||q&&U)||l[m]!==1&&(!q&&U||q&&I))&&(v=m==="x"?_:j)}const R={x:d.x+k.x,y:d.y+k.y},L={x:f.x+T.x,y:f.y+T.y},P=Math.max(Math.abs(R.x-v[0].x),Math.abs(L.x-v[0].x)),F=Math.max(Math.abs(R.y-v[0].y),Math.abs(L.y-v[0].y));P>=F?(w=(R.x+L.x)/2,S=v[0].y):(w=v[0].x,S=(R.y+L.y)/2)}return[[t,{x:d.x+k.x,y:d.y+k.y},...v,{x:f.x+T.x,y:f.y+T.y},n],w,S,E,N]}function Fue(t,e,n,r){const i=Math.min(_A(t,e)/2,_A(e,n)/2,r),{x:s,y:o}=e;if(t.x===s&&s===n.x||t.y===o&&o===n.y)return`L${s} ${o}`;if(t.y===o){const d=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*f}`}const l=t.x<n.x?1:-1,u=t.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function Ow({sourceX:t,sourceY:e,sourcePosition:n=Re.Bottom,targetX:r,targetY:i,targetPosition:s=Re.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:f=.5}){const[p,m,b,v,w]=Hue({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:f});return[p.reduce((k,T,E)=>{let N="";return E>0&&E<p.length-1?N=Fue(p[E-1],T,p[E+1],o):N=`${E===0?"M":"L"}${T.x} ${T.y}`,k+=N,k},""),m,b,v,w]}function DA(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function que(t){const{sourceNode:e,targetNode:n}=t;if(!DA(e)||!DA(n))return null;const r=e.internals.handleBounds||RA(e.handles),i=n.internals.handleBounds||RA(n.handles),s=jA(r?.source??[],t.sourceHandle),o=jA(t.connectionMode===Il.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),t.targetHandle);if(!s||!o)return t.onError?.("008",As.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const l=s?.position||Re.Bottom,u=o?.position||Re.Top,d=rh(e,s,l),f=rh(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:f.x,targetY:f.y,sourcePosition:l,targetPosition:u}}function RA(t){if(!t)return null;const e=[],n=[];for(const r of t)r.width=r.width??1,r.height=r.height??1,r.type==="source"?e.push(r):r.type==="target"&&n.push(r);return{source:e,target:n}}function rh(t,e,n=Re.Left,r=!1){const i=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:o,height:l}=e??go(t);if(r)return{x:i+o/2,y:s+l/2};switch(e?.position??n){case Re.Top:return{x:i+o/2,y:s};case Re.Right:return{x:i+o,y:s+l/2};case Re.Bottom:return{x:i+o/2,y:s+l};case Re.Left:return{x:i,y:s+l/2}}}function jA(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Lw(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`:""}function Uue(t,{id:e,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return t.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=Lw(u,e);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const jS={nodeOrigin:[0,0],nodeExtent:Qf,elevateNodesOnSelect:!0,defaults:{}},$ue={...jS,checkEquality:!0};function OS(t,e){const n={...t};for(const r in e)e[r]!==void 0&&(n[r]=e[r]);return n}function Gue(t,e,n){const r=OS(jS,n);for(const i of t.values())if(i.parentId)LS(i,t,e,r);else{const s=_h(i,r.nodeOrigin),o=ku(i.extent)?i.extent:r.nodeExtent,l=Pl(s,o,go(i));i.internals.positionAbsolute=l}}function Iw(t,e,n,r){const i=OS($ue,r);let s=t.length>0;const o=new Map(e),l=i?.elevateNodesOnSelect?1e3:0;e.clear(),n.clear();for(const u of t){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)e.set(u.id,d);else{const f=_h(u,i.nodeOrigin),p=ku(u.extent)?u.extent:i.nodeExtent,m=Pl(f,p,go(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:m,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:oH(u,l),userNode:u}},e.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&LS(d,e,n,r)}return s}function Wue(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function LS(t,e,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=OS(jS,r),l=t.parentId,u=e.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Wue(t,n);const d=i?1e3:0,{x:f,y:p,z:m}=Kue(t,u,s,o,d),{positionAbsolute:b}=t.internals,v=f!==b.x||p!==b.y;(v||m!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:v?{x:f,y:p}:b,z:m}})}function oH(t,e){return(Xi(t.zIndex)?t.zIndex:0)+(t.selected?e:0)}function Kue(t,e,n,r,i){const{x:s,y:o}=e.internals.positionAbsolute,l=go(t),u=_h(t,n),d=ku(t.extent)?Pl(u,t.extent,l):u;let f=Pl({x:s+d.x,y:o+d.y},r,l);t.extent==="parent"&&(f=YV(f,l,e));const p=oH(t,i),m=e.internals.z??0;return{x:f.x,y:f.y,z:m>=p?m+1:p}}function IS(t,e,n,r=[0,0]){const i=[],s=new Map;for(const o of t){const l=e.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Cu(l),d=ZV(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,f=go(l),p=l.origin??r,m=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,b=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,v=Math.max(f.width,Math.round(o.width)),w=Math.max(f.height,Math.round(o.height)),S=(v-f.width)*p[0],k=(w-f.height)*p[1];(m>0||b>0||S||k)&&(i.push({id:u,type:"position",position:{x:l.position.x-m+S,y:l.position.y-b+k}}),n.get(u)?.forEach(T=>{t.some(E=>E.id===T.id)||i.push({id:T.id,type:"position",position:{x:T.position.x+m,y:T.position.y+b}})})),(f.width<o.width||f.height<o.height||m||b)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:v+(m?p[0]*m-S:0),height:w+(b?p[1]*b-k:0)}})}),i}function Yue(t,e,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:f}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const m of t.values()){const b=e.get(m.id);if(!b)continue;if(b.hidden){e.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),l=!0;continue}const v=RS(m.nodeElement),w=b.measured.width!==v.width||b.measured.height!==v.height;if(!!(v.width&&v.height&&(w||!b.internals.handleBounds||m.force))){const k=m.nodeElement.getBoundingClientRect(),T=ku(b.extent)?b.extent:s;let{positionAbsolute:E}=b.internals;b.parentId&&b.extent==="parent"?E=YV(E,v,e.get(b.parentId)):T&&(E=Pl(E,T,v));const N={...b,measured:v,internals:{...b.internals,positionAbsolute:E,handleBounds:{source:TA("source",m.nodeElement,k,f,b.id),target:TA("target",m.nodeElement,k,f,b.id)}}};e.set(b.id,N),b.parentId&&LS(N,e,n,{nodeOrigin:i}),l=!0,w&&(u.push({id:b.id,type:"dimensions",dimensions:v}),b.expandParent&&b.parentId&&p.push({id:b.id,parentId:b.parentId,rect:Cu(N,i)}))}}if(p.length>0){const m=IS(p,e,n,i);u.push(...m)}return{changes:u,updatedInternals:l}}async function Xue({delta:t,panZoom:e,transform:n,translateExtent:r,width:i,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const o=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function OA(t,e,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,e)),o=`${i}-${t}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,e)),s){o=`${i}-${t}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,e))}}function aH(t,e,n){t.clear(),e.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,f=`${s}-${l}--${i}-${o}`;OA("source",u,f,t,i,o),OA("target",u,d,t,s,l),e.set(r.id,r)}}function lH(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:lH(n,e):!1}function LA(t,e,n){let r=t;do{if(r?.matches?.(e))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Zue(t,e,n,r){const i=new Map;for(const[s,o]of t)if((o.selected||o.id===r)&&(!o.parentId||!lH(o,t))&&(o.draggable||e&&typeof o.draggable>"u")){const l=t.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function _b({nodeId:t,dragItems:e,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of e){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!t)return[i[0],i];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:r}:i[0],i]}function Jue({dragItems:t,snapGrid:e,x:n,y:r}){const i=t.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Rh(s,e);return{x:o.x-s.x,y:o.y-s.y}}function Que({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},f=null,p=!1,m=null,b=!1,v=!1,w=null;function S({noDragClassName:T,handleSelector:E,domNode:N,isSelectable:A,nodeId:_,nodeClickDistance:j=0}){m=ai(N);function R({x:V,y:q}){const{nodeLookup:I,nodeExtent:U,snapGrid:O,snapToGrid:H,nodeOrigin:G,onNodeDrag:ee,onSelectionDrag:B,onError:W,updateNodePositions:ie}=e();s={x:V,y:q};let oe=!1;const $=l.size>1,Z=$&&U?jw(Dh(l)):null,te=$&&H?Jue({dragItems:l,snapGrid:O,x:V,y:q}):null;for(const[ce,re]of l){if(!I.has(ce))continue;let ye={x:V-re.distance.x,y:q-re.distance.y};H&&(ye=te?{x:Math.round(ye.x+te.x),y:Math.round(ye.y+te.y)}:Rh(ye,O));let Ce=null;if($&&U&&!re.extent&&Z){const{positionAbsolute:Ne}=re.internals,Ee=Ne.x-Z.x+U[0][0],Me=Ne.x+re.measured.width-Z.x2+U[1][0],yt=Ne.y-Z.y+U[0][1],Pe=Ne.y+re.measured.height-Z.y2+U[1][1];Ce=[[Ee,yt],[Me,Pe]]}const{position:De,positionAbsolute:Se}=KV({nodeId:ce,nextPosition:ye,nodeLookup:I,nodeExtent:Ce||U,nodeOrigin:G,onError:W});oe=oe||re.position.x!==De.x||re.position.y!==De.y,re.position=De,re.internals.positionAbsolute=Se}if(v=v||oe,!!oe&&(ie(l,!0),w&&(r||ee||!_&&B))){const[ce,re]=_b({nodeId:_,dragItems:l,nodeLookup:I});r?.(w,l,ce,re),ee?.(w,ce,re),_||B?.(w,re)}}async function L(){if(!f)return;const{transform:V,panBy:q,autoPanSpeed:I,autoPanOnNodeDrag:U}=e();if(!U){u=!1,cancelAnimationFrame(o);return}const[O,H]=XV(d,f,I);(O!==0||H!==0)&&(s.x=(s.x??0)-O/V[2],s.y=(s.y??0)-H/V[2],await q({x:O,y:H})&&R(s)),o=requestAnimationFrame(L)}function P(V){const{nodeLookup:q,multiSelectionActive:I,nodesDraggable:U,transform:O,snapGrid:H,snapToGrid:G,selectNodesOnDrag:ee,onNodeDragStart:B,onSelectionDragStart:W,unselectNodesAndEdges:ie}=e();p=!0,(!ee||!A)&&!I&&_&&(q.get(_)?.selected||ie()),A&&ee&&_&&t?.(_);const oe=Nf(V.sourceEvent,{transform:O,snapGrid:H,snapToGrid:G,containerBounds:f});if(s=oe,l=Zue(q,U,oe,_),l.size>0&&(n||B||!_&&W)){const[$,Z]=_b({nodeId:_,dragItems:l,nodeLookup:q});n?.(V.sourceEvent,l,$,Z),B?.(V.sourceEvent,$,Z),_||W?.(V.sourceEvent,Z)}}const F=NV().clickDistance(j).on("start",V=>{const{domNode:q,nodeDragThreshold:I,transform:U,snapGrid:O,snapToGrid:H}=e();f=q?.getBoundingClientRect()||null,b=!1,v=!1,w=V.sourceEvent,I===0&&P(V),s=Nf(V.sourceEvent,{transform:U,snapGrid:O,snapToGrid:H,containerBounds:f}),d=ws(V.sourceEvent,f)}).on("drag",V=>{const{autoPanOnNodeDrag:q,transform:I,snapGrid:U,snapToGrid:O,nodeDragThreshold:H,nodeLookup:G}=e(),ee=Nf(V.sourceEvent,{transform:I,snapGrid:U,snapToGrid:O,containerBounds:f});if(w=V.sourceEvent,(V.sourceEvent.type==="touchmove"&&V.sourceEvent.touches.length>1||_&&!G.has(_))&&(b=!0),!b){if(!u&&q&&p&&(u=!0,L()),!p){const B=ee.xSnapped-(s.x??0),W=ee.ySnapped-(s.y??0);Math.sqrt(B*B+W*W)>H&&P(V)}(s.x!==ee.xSnapped||s.y!==ee.ySnapped)&&l&&p&&(d=ws(V.sourceEvent,f),R(ee))}}).on("end",V=>{if(!(!p||b)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:q,updateNodePositions:I,onNodeDragStop:U,onSelectionDragStop:O}=e();if(v&&(I(l,!1),v=!1),i||U||!_&&O){const[H,G]=_b({nodeId:_,dragItems:l,nodeLookup:q,dragging:!1});i?.(V.sourceEvent,l,H,G),U?.(V.sourceEvent,H,G),_||O?.(V.sourceEvent,G)}}}).filter(V=>{const q=V.target;return!V.button&&(!T||!LA(q,`.${T}`,N))&&(!E||LA(q,E,N))});m.call(F)}function k(){m?.on(".drag",null)}return{update:S,destroy:k}}function ede(t,e,n){const r=[],i={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())th(i,Cu(s))>0&&r.push(s);return r}const tde=250;function nde(t,e,n,r){let i=[],s=1/0;const o=ede(t,n,e+tde);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:f,y:p}=rh(l,d,d.position,!0),m=Math.sqrt(Math.pow(f-t.x,2)+Math.pow(p-t.y,2));m>e||(m<s?(i=[{...d,x:f,y:p}],s=m):m===s&&i.push({...d,x:f,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function cH(t,e,n,r,i,s=!1){const o=r.get(t);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[e]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...rh(o,u,u.position,!0)}:u}function uH(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function rde(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const dH=()=>!0;function ide(t,{connectionMode:e,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:f,flowId:p,panBy:m,cancelConnection:b,onConnectStart:v,onConnect:w,onConnectEnd:S,isValidConnection:k=dH,onReconnectEnd:T,updateConnection:E,getTransform:N,getFromHandle:A,autoPanSpeed:_,dragThreshold:j=1,handleDomNode:R}){const L=eH(t.target);let P=0,F;const{x:V,y:q}=ws(t),I=uH(s,R),U=l?.getBoundingClientRect();let O=!1;if(!U||!I)return;const H=cH(i,I,r,u,e);if(!H)return;let G=ws(t,U),ee=!1,B=null,W=!1,ie=null;function oe(){if(!f||!U)return;const[De,Se]=XV(G,U,_);m({x:De,y:Se}),P=requestAnimationFrame(oe)}const $={...H,nodeId:i,type:I,position:H.position},Z=u.get(i);let ce={inProgress:!0,isValid:null,from:rh(Z,$,Re.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:Z,to:G,toHandle:null,toPosition:CA[$.position],toNode:null};function re(){O=!0,E(ce),v?.(t,{nodeId:i,handleId:r,handleType:I})}j===0&&re();function ye(De){if(!O){const{x:Me,y:yt}=ws(De),Pe=Me-V,vt=yt-q;if(!(Pe*Pe+vt*vt>j*j))return;re()}if(!A()||!$){Ce(De);return}const Se=N();G=ws(De,U),F=nde(jh(G,Se,!1,[1,1]),n,u,$),ee||(oe(),ee=!0);const Ne=fH(De,{handle:F,connectionMode:e,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:k,doc:L,lib:d,flowId:p,nodeLookup:u});ie=Ne.handleDomNode,B=Ne.connection,W=rde(!!F,Ne.isValid);const Ee={...ce,isValid:W,to:Ne.toHandle&&W?ig({x:Ne.toHandle.x,y:Ne.toHandle.y},Se):G,toHandle:Ne.toHandle,toPosition:W&&Ne.toHandle?Ne.toHandle.position:CA[$.position],toNode:Ne.toHandle?u.get(Ne.toHandle.nodeId):null};W&&F&&ce.toHandle&&Ee.toHandle&&ce.toHandle.type===Ee.toHandle.type&&ce.toHandle.nodeId===Ee.toHandle.nodeId&&ce.toHandle.id===Ee.toHandle.id&&ce.to.x===Ee.to.x&&ce.to.y===Ee.to.y||(E(Ee),ce=Ee)}function Ce(De){if(O){(F||ie)&&B&&W&&w?.(B);const{inProgress:Se,...Ne}=ce,Ee={...Ne,toPosition:ce.toHandle?ce.toPosition:null};S?.(De,Ee),s&&T?.(De,Ee)}b(),cancelAnimationFrame(P),ee=!1,W=!1,B=null,ie=null,L.removeEventListener("mousemove",ye),L.removeEventListener("mouseup",Ce),L.removeEventListener("touchmove",ye),L.removeEventListener("touchend",Ce)}L.addEventListener("mousemove",ye),L.addEventListener("mouseup",Ce),L.addEventListener("touchmove",ye),L.addEventListener("touchend",Ce)}function fH(t,{handle:e,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=dH,nodeLookup:f}){const p=s==="target",m=e?o.querySelector(`.${l}-flow__handle[data-id="${u}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:b,y:v}=ws(t),w=o.elementFromPoint(b,v),S=w?.classList.contains(`${l}-flow__handle`)?w:m,k={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const T=uH(void 0,S),E=S.getAttribute("data-nodeid"),N=S.getAttribute("data-handleid"),A=S.classList.contains("connectable"),_=S.classList.contains("connectableend");if(!E||!T)return k;const j={source:p?E:r,sourceHandle:p?N:i,target:p?r:E,targetHandle:p?i:N};k.connection=j;const L=A&&_&&(n===Il.Strict?p&&T==="source"||!p&&T==="target":E!==r||N!==i);k.isValid=L&&d(j),k.toHandle=cH(E,T,N,f,n,!0)}return k}const Pw={onPointerDown:ide,isValid:fH};function sde({domNode:t,panZoom:e,getTransform:n,getViewScale:r}){const i=ai(t);function s({translateExtent:l,width:u,height:d,zoomStep:f=1,pannable:p=!0,zoomable:m=!0,inversePan:b=!1}){const v=E=>{if(E.sourceEvent.type!=="wheel"||!e)return;const N=n(),A=E.sourceEvent.ctrlKey&&nh()?10:1,_=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*f,j=N[2]*Math.pow(2,_*A);e.scaleTo(j)};let w=[0,0];const S=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(w=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},k=E=>{const N=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!e)return;const A=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],_=[A[0]-w[0],A[1]-w[1]];w=A;const j=r()*Math.max(N[2],Math.log(N[2]))*(b?-1:1),R={x:N[0]-_[0]*j,y:N[1]-_[1]*j},L=[[0,0],[u,d]];e.setViewportConstrained({x:R.x,y:R.y,zoom:N[2]},L,l)},T=HV().on("start",S).on("zoom",p?k:null).on("zoom.wheel",m?v:null);i.call(T,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Gi}}const ode=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,e1=t=>({x:t.x,y:t.y,zoom:t.k}),Db=({x:t,y:e,zoom:n})=>Kg.translate(t,e).scale(n),Qc=(t,e)=>t.target.closest(`.${e}`),hH=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),ade=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,Rb=(t,e=0,n=ade,r=()=>{})=>{const i=typeof e=="number"&&e>0;return i||r(),i?t.transition().duration(e).ease(n).on("end",r):t},pH=t=>{const e=t.ctrlKey&&nh()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function lde({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return f=>{if(Qc(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(f.ctrlKey&&o){const S=Gi(f),k=pH(f),T=p*Math.pow(2,k);r.scaleTo(n,T,S,f);return}const m=f.deltaMode===1?20:1;let b=i===Nl.Vertical?0:f.deltaX*m,v=i===Nl.Horizontal?0:f.deltaY*m;!nh()&&f.shiftKey&&i!==Nl.Vertical&&(b=f.deltaY*m,v=0),r.translateBy(n,-(b/p)*s,-(v/p)*s,{internal:!0});const w=e1(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l?.(f,w)),t.isPanScrolling&&(u?.(f,w),t.panScrollTimeout=setTimeout(()=>{d?.(f,w),t.isPanScrolling=!1},150))}}function cde({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!e&&s&&!r.ctrlKey,l=Qc(r,t);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function ude({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=e1(r.transform);t.mouseButton=r.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=i,r.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(r.sourceEvent,i)}}function dde({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{t.usedRightMouseButton=!!(n&&hH(e,t.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,e1(s.transform))}}function fde({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&hH(e,t.mouseButton??0)&&!t.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),t.usedRightMouseButton=!1,r(!1),i&&ode(t.prevViewport,o.transform))){const l=e1(o.transform);t.prevViewport=l,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function hde({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return f=>{const p=t||e,m=n&&f.ctrlKey;if(f.button===1&&f.type==="mousedown"&&(Qc(f,`${d}-flow__node`)||Qc(f,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Qc(f,l)&&f.type==="wheel"||Qc(f,u)&&(f.type!=="wheel"||i&&f.type==="wheel"&&!t)||!n&&f.ctrlKey&&f.type==="wheel")return!1;if(!n&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!p&&!i&&!m&&f.type==="wheel"||!r&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(r)&&!r.includes(f.button)&&f.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type==="wheel")&&b}}function pde({domNode:t,minZoom:e,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=t.getBoundingClientRect(),m=HV().clickDistance(!Xi(r)||r<0?0:r).scaleExtent([e,n]).translateExtent(i),b=ai(t).call(m);E({x:s.x,y:s.y,zoom:Su(s.zoom,e,n)},[[0,0],[p.width,p.height]],i);const v=b.on("wheel.zoom"),w=b.on("dblclick.zoom");m.wheelDelta(pH);function S(V,q){return b?new Promise(I=>{m?.interpolate(q?.interpolate==="linear"?Ef:F0).transform(Rb(b,q?.duration,q?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function k({noWheelClassName:V,noPanClassName:q,onPaneContextMenu:I,userSelectionActive:U,panOnScroll:O,panOnDrag:H,panOnScrollMode:G,panOnScrollSpeed:ee,preventScrolling:B,zoomOnPinch:W,zoomOnScroll:ie,zoomOnDoubleClick:oe,zoomActivationKeyPressed:$,lib:Z,onTransformChange:te}){U&&!f.isZoomingOrPanning&&T();const re=O&&!$&&!U?lde({zoomPanValues:f,noWheelClassName:V,d3Selection:b,d3Zoom:m,panOnScrollMode:G,panOnScrollSpeed:ee,zoomOnPinch:W,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):cde({noWheelClassName:V,preventScrolling:B,d3ZoomHandler:v});if(b.on("wheel.zoom",re,{passive:!1}),!U){const Ce=ude({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:l});m.on("start",Ce);const De=dde({zoomPanValues:f,panOnDrag:H,onPaneContextMenu:!!I,onPanZoom:o,onTransformChange:te});m.on("zoom",De);const Se=fde({zoomPanValues:f,panOnDrag:H,panOnScroll:O,onPaneContextMenu:I,onPanZoomEnd:u,onDraggingChange:d});m.on("end",Se)}const ye=hde({zoomActivationKeyPressed:$,panOnDrag:H,zoomOnScroll:ie,panOnScroll:O,zoomOnDoubleClick:oe,zoomOnPinch:W,userSelectionActive:U,noPanClassName:q,noWheelClassName:V,lib:Z});m.filter(ye),oe?b.on("dblclick.zoom",w):b.on("dblclick.zoom",null)}function T(){m.on("zoom",null)}async function E(V,q,I){const U=Db(V),O=m?.constrain()(U,q,I);return O&&await S(O),new Promise(H=>H(O))}async function N(V,q){const I=Db(V);return await S(I,q),new Promise(U=>U(I))}function A(V){if(b){const q=Db(V),I=b.property("__zoom");(I.k!==V.zoom||I.x!==V.x||I.y!==V.y)&&m?.transform(b,q,null,{sync:!0})}}function _(){const V=b?VV(b.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function j(V,q){return b?new Promise(I=>{m?.interpolate(q?.interpolate==="linear"?Ef:F0).scaleTo(Rb(b,q?.duration,q?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function R(V,q){return b?new Promise(I=>{m?.interpolate(q?.interpolate==="linear"?Ef:F0).scaleBy(Rb(b,q?.duration,q?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function L(V){m?.scaleExtent(V)}function P(V){m?.translateExtent(V)}function F(V){const q=!Xi(V)||V<0?0:V;m?.clickDistance(q)}return{update:k,destroy:T,setViewport:N,setViewportConstrained:E,getViewport:_,scaleTo:j,scaleBy:R,setScaleExtent:L,setTranslateExtent:P,syncViewport:A,setClickDistance:F}}var zl;(function(t){t.Line="line",t.Handle="handle"})(zl||(zl={}));const mde=["top-left","top-right","bottom-left","bottom-right"],gde=["top","right","bottom","left"];function yde({width:t,prevWidth:e,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=t-e,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function bde(t){const e=t.includes("right")||t.includes("left"),n=t.includes("bottom")||t.includes("top"),r=t.includes("left"),i=t.includes("top");return{isHorizontal:e,isVertical:n,affectsX:r,affectsY:i}}function Jo(t,e){return Math.max(0,e-t)}function Qo(t,e){return Math.max(0,t-e)}function S0(t,e,n){return Math.max(0,e-t,t-n)}function IA(t,e){return t?!e:e}function vde(t,e,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=e;const{isHorizontal:f,isVertical:p}=e,m=f&&p,{xSnapped:b,ySnapped:v}=n,{minWidth:w,maxWidth:S,minHeight:k,maxHeight:T}=r,{x:E,y:N,width:A,height:_,aspectRatio:j}=t;let R=Math.floor(f?b-t.pointerX:0),L=Math.floor(p?v-t.pointerY:0);const P=A+(u?-R:R),F=_+(d?-L:L),V=-s[0]*A,q=-s[1]*_;let I=S0(P,w,S),U=S0(F,k,T);if(o){let G=0,ee=0;u&&R<0?G=Jo(E+R+V,o[0][0]):!u&&R>0&&(G=Qo(E+P+V,o[1][0])),d&&L<0?ee=Jo(N+L+q,o[0][1]):!d&&L>0&&(ee=Qo(N+F+q,o[1][1])),I=Math.max(I,G),U=Math.max(U,ee)}if(l){let G=0,ee=0;u&&R>0?G=Qo(E+R,l[0][0]):!u&&R<0&&(G=Jo(E+P,l[1][0])),d&&L>0?ee=Qo(N+L,l[0][1]):!d&&L<0&&(ee=Jo(N+F,l[1][1])),I=Math.max(I,G),U=Math.max(U,ee)}if(i){if(f){const G=S0(P/j,k,T)*j;if(I=Math.max(I,G),o){let ee=0;!u&&!d||u&&!d&&m?ee=Qo(N+q+P/j,o[1][1])*j:ee=Jo(N+q+(u?R:-R)/j,o[0][1])*j,I=Math.max(I,ee)}if(l){let ee=0;!u&&!d||u&&!d&&m?ee=Jo(N+P/j,l[1][1])*j:ee=Qo(N+(u?R:-R)/j,l[0][1])*j,I=Math.max(I,ee)}}if(p){const G=S0(F*j,w,S)/j;if(U=Math.max(U,G),o){let ee=0;!u&&!d||d&&!u&&m?ee=Qo(E+F*j+V,o[1][0])/j:ee=Jo(E+(d?L:-L)*j+V,o[0][0])/j,U=Math.max(U,ee)}if(l){let ee=0;!u&&!d||d&&!u&&m?ee=Jo(E+F*j,l[1][0])/j:ee=Qo(E+(d?L:-L)*j,l[0][0])/j,U=Math.max(U,ee)}}}L=L+(L<0?U:-U),R=R+(R<0?I:-I),i&&(m?P>F*j?L=(IA(u,d)?-R:R)/j:R=(IA(u,d)?-L:L)*j:f?(L=R/j,d=u):(R=L*j,u=d));const O=u?E+R:E,H=d?N+L:N;return{width:A+(u?-R:R),height:_+(d?-L:L),x:s[0]*R*(u?-1:1)+O,y:s[1]*L*(d?-1:1)+H}}const mH={width:0,height:0,x:0,y:0},xde={...mH,pointerX:0,pointerY:0,aspectRatio:1};function wde(t){return[[0,0],[t.measured.width,t.measured.height]]}function Sde(t,e,n){const r=e.position.x+t.position.x,i=e.position.y+t.position.y,s=t.measured.width??0,o=t.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Cde({domNode:t,nodeId:e,getStoreItems:n,onChange:r,onEnd:i}){const s=ai(t);function o({controlPosition:u,boundaries:d,keepAspectRatio:f,resizeDirection:p,onResizeStart:m,onResize:b,onResizeEnd:v,shouldResize:w}){let S={...mH},k={...xde};const T=bde(u);let E,N=null,A=[],_,j,R;const L=NV().on("start",P=>{const{nodeLookup:F,transform:V,snapGrid:q,snapToGrid:I,nodeOrigin:U,paneDomNode:O}=n();if(E=F.get(e),!E)return;N=O?.getBoundingClientRect()??null;const{xSnapped:H,ySnapped:G}=Nf(P.sourceEvent,{transform:V,snapGrid:q,snapToGrid:I,containerBounds:N});S={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},k={...S,pointerX:H,pointerY:G,aspectRatio:S.width/S.height},_=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(_=F.get(E.parentId),j=_&&E.extent==="parent"?wde(_):void 0),A=[],R=void 0;for(const[ee,B]of F)if(B.parentId===e&&(A.push({id:ee,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const W=Sde(B,E,B.origin??U);R?R=[[Math.min(W[0][0],R[0][0]),Math.min(W[0][1],R[0][1])],[Math.max(W[1][0],R[1][0]),Math.max(W[1][1],R[1][1])]]:R=W}m?.(P,{...S})}).on("drag",P=>{const{transform:F,snapGrid:V,snapToGrid:q,nodeOrigin:I}=n(),U=Nf(P.sourceEvent,{transform:F,snapGrid:V,snapToGrid:q,containerBounds:N}),O=[];if(!E)return;const{x:H,y:G,width:ee,height:B}=S,W={},ie=E.origin??I,{width:oe,height:$,x:Z,y:te}=vde(k,T,U,d,f,ie,j,R),ce=oe!==ee,re=$!==B,ye=Z!==H&&ce,Ce=te!==G&&re;if(!ye&&!Ce&&!ce&&!re)return;if((ye||Ce||ie[0]===1||ie[1]===1)&&(W.x=ye?Z:S.x,W.y=Ce?te:S.y,S.x=W.x,S.y=W.y,A.length>0)){const Ee=Z-H,Me=te-G;for(const yt of A)yt.position={x:yt.position.x-Ee+ie[0]*(oe-ee),y:yt.position.y-Me+ie[1]*($-B)},O.push(yt)}if((ce||re)&&(W.width=ce&&(!p||p==="horizontal")?oe:S.width,W.height=re&&(!p||p==="vertical")?$:S.height,S.width=W.width,S.height=W.height),_&&E.expandParent){const Ee=ie[0]*(W.width??0);W.x&&W.x<Ee&&(S.x=Ee,k.x=k.x-(W.x-Ee));const Me=ie[1]*(W.height??0);W.y&&W.y<Me&&(S.y=Me,k.y=k.y-(W.y-Me))}const De=yde({width:S.width,prevWidth:ee,height:S.height,prevHeight:B,affectsX:T.affectsX,affectsY:T.affectsY}),Se={...S,direction:De};w?.(P,Se)!==!1&&(b?.(P,Se),r(W,O))}).on("end",P=>{v?.(P,{...S}),i?.({...S})});s.call(L)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const kde={},PA=t=>{let e;const n=new Set,r=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const b=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(v=>v(e,b))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(kde?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,i,u);return u},Ede=t=>t?PA(t):PA,{useDebugValue:Nde}=Ae,{useSyncExternalStoreWithSelector:Tde}=Hie,Ade=t=>t;function gH(t,e=Ade,n){const r=Tde(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return Nde(r),r}const zA=(t,e)=>{const n=Ede(t),r=(i,s=e)=>gH(n,i,s);return Object.assign(r,n),r},Mde=(t,e)=>t?zA(t,e):zA;function nn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const t1=M.createContext(null),_de=t1.Provider,yH=As.error001();function ct(t,e){const n=M.useContext(t1);if(n===null)throw new Error(yH);return gH(n,t,e)}function Wt(){const t=M.useContext(t1);if(t===null)throw new Error(yH);return M.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe}),[t])}const BA={display:"none"},Dde={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bH="react-flow__node-desc",vH="react-flow__edge-desc",Rde="react-flow__aria-live",jde=t=>t.ariaLiveMessage,Ode=t=>t.ariaLabelConfig;function Lde({rfId:t}){const e=ct(jde);return g.jsx("div",{id:`${Rde}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Dde,children:e})}function Ide({rfId:t,disableKeyboardA11y:e}){const n=ct(Ode);return g.jsxs(g.Fragment,{children:[g.jsx("div",{id:`${bH}-${t}`,style:BA,children:e?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),g.jsx("div",{id:`${vH}-${t}`,style:BA,children:n["edge.a11yDescription.default"]}),!e&&g.jsx(Lde,{rfId:t})]})}const n1=M.forwardRef(({position:t="top-left",children:e,className:n,style:r,...i},s)=>{const o=`${t}`.split("-");return g.jsx("div",{className:Mn(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:e})});n1.displayName="Panel";function Pde({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:g.jsx(n1,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const zde=t=>{const e=[],n=[];for(const[,r]of t.nodeLookup)r.selected&&e.push(r.internals.userNode);for(const[,r]of t.edgeLookup)r.selected&&n.push(r);return{selectedNodes:e,selectedEdges:n}},C0=t=>t.id;function Bde(t,e){return nn(t.selectedNodes.map(C0),e.selectedNodes.map(C0))&&nn(t.selectedEdges.map(C0),e.selectedEdges.map(C0))}function Vde({onSelectionChange:t}){const e=Wt(),{selectedNodes:n,selectedEdges:r}=ct(zde,Bde);return M.useEffect(()=>{const i={nodes:n,edges:r};t?.(i),e.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,t]),null}const Hde=t=>!!t.onSelectionChangeHandlers;function Fde({onSelectionChange:t}){const e=ct(Hde);return t||e?g.jsx(Vde,{onSelectionChange:t}):null}const xH=[0,0],qde={x:0,y:0,zoom:1},Ude=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],VA=[...Ude,"rfId"],$de=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setPaneClickDistance:t.setPaneClickDistance}),HA={translateExtent:Qf,nodeOrigin:xH,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Gde(t){const{setNodes:e,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=ct($de,nn),f=Wt();M.useEffect(()=>(u(t.defaultNodes,t.defaultEdges),()=>{p.current=HA,l()}),[]);const p=M.useRef(HA);return M.useEffect(()=>{for(const m of VA){const b=t[m],v=p.current[m];b!==v&&(typeof t[m]>"u"||(m==="nodes"?e(b):m==="edges"?n(b):m==="minZoom"?r(b):m==="maxZoom"?i(b):m==="translateExtent"?s(b):m==="nodeExtent"?o(b):m==="paneClickDistance"?d(b):m==="ariaLabelConfig"?f.setState({ariaLabelConfig:Oue(b)}):m==="fitView"?f.setState({fitViewQueued:b}):m==="fitViewOptions"?f.setState({fitViewOptions:b}):f.setState({[m]:b})))}p.current=t},VA.map(m=>t[m])),null}function FA(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Wde(t){const[e,n]=M.useState(t==="system"?null:t);return M.useEffect(()=>{if(t!=="system"){n(t);return}const r=FA(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[t]),e!==null?e:FA()?.matches?"dark":"light"}const qA=typeof document<"u"?document:null;function ih(t=null,e={target:qA,actInsideInputWithModifier:!0}){const[n,r]=M.useState(!1),i=M.useRef(!1),s=M.useRef(new Set([])),[o,l]=M.useMemo(()=>{if(t!==null){const d=(Array.isArray(t)?t:[t]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),f=d.reduce((p,m)=>p.concat(...m),[]);return[d,f]}return[[],[]]},[t]);return M.useEffect(()=>{const u=e?.target??qA,d=e?.actInsideInputWithModifier??!0;if(t!==null){const f=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!i.current||i.current&&!d)&&tH(b))return!1;const w=$A(b.code,l);if(s.current.add(b[w]),UA(o,s.current,!1)){const S=b.composedPath?.()?.[0]||b.target,k=S?.nodeName==="BUTTON"||S?.nodeName==="A";e.preventDefault!==!1&&(i.current||!k)&&b.preventDefault(),r(!0)}},p=b=>{const v=$A(b.code,l);UA(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[v]),b.key==="Meta"&&s.current.clear(),i.current=!1},m=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",f),u?.addEventListener("keyup",p),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{u?.removeEventListener("keydown",f),u?.removeEventListener("keyup",p),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[t,r]),n}function UA(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(i=>e.has(i)))}function $A(t,e){return e.includes(t)?"code":"key"}const Kde=()=>{const t=Wt();return M.useMemo(()=>({zoomIn:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomOut:e=>{const{panZoom:n}=t.getState();return n?n.scaleBy(1/1.2,{duration:e?.duration}):Promise.resolve(!1)},zoomTo:(e,n)=>{const{panZoom:r}=t.getState();return r?r.scaleTo(e,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>t.getState().transform[2],setViewport:async(e,n)=>{const{transform:[r,i,s],panZoom:o}=t.getState();return o?(await o.setViewport({x:e.x??r,y:e.y??i,zoom:e.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[e,n,r]=t.getState().transform;return{x:e,y:n,zoom:r}},setCenter:async(e,n,r)=>t.getState().setCenter(e,n,r),fitBounds:async(e,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=t.getState(),u=Zg(e,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(e,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=t.getState();if(!o)return e;const{x:l,y:u}=o.getBoundingClientRect(),d={x:e.x-l,y:e.y-u},f=n.snapGrid??i,p=n.snapToGrid??s;return jh(d,r,p,f)},flowToScreenPosition:e=>{const{transform:n,domNode:r}=t.getState();if(!r)return e;const{x:i,y:s}=r.getBoundingClientRect(),o=ig(e,n);return{x:o.x+i,y:o.y+s}}}),[])};function wH(t,e){const n=[],r=new Map,i=[];for(const s of t)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of e){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)Yde(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function Yde(t,e){switch(t.type){case"select":{e.selected=t.selected;break}case"position":{typeof t.position<"u"&&(e.position=t.position),typeof t.dragging<"u"&&(e.dragging=t.dragging);break}case"dimensions":{typeof t.dimensions<"u"&&(e.measured??={},e.measured.width=t.dimensions.width,e.measured.height=t.dimensions.height,t.setAttributes&&((t.setAttributes===!0||t.setAttributes==="width")&&(e.width=t.dimensions.width),(t.setAttributes===!0||t.setAttributes==="height")&&(e.height=t.dimensions.height))),typeof t.resizing=="boolean"&&(e.resizing=t.resizing);break}}}function SH(t,e){return wH(t,e)}function CH(t,e){return wH(t,e)}function ol(t,e){return{id:t,type:"select",selected:e}}function eu(t,e=new Set,n=!1){const r=[];for(const[i,s]of t){const o=e.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(ol(s.id,o)))}return r}function GA({items:t=[],lookup:e}){const n=[],r=new Map(t.map(i=>[i.id,i]));for(const[i,s]of t.entries()){const o=e.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of e)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function WA(t){return{id:t.id,type:"remove"}}const KA=t=>Eue(t),Xde=t=>GV(t);function kH(t){return M.forwardRef(t)}const Zde=typeof window<"u"?M.useLayoutEffect:M.useEffect;function YA(t){const[e,n]=M.useState(BigInt(0)),[r]=M.useState(()=>Jde(()=>n(i=>i+BigInt(1))));return Zde(()=>{const i=r.get();i.length&&(t(i),r.reset())},[e]),r}function Jde(t){let e=[];return{get:()=>e,reset:()=>{e=[]},push:n=>{e.push(n),t()}}}const EH=M.createContext(null);function Qde({children:t}){const e=Wt(),n=M.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:f,onNodesChange:p,nodeLookup:m,fitViewQueued:b}=e.getState();let v=u;for(const S of l)v=typeof S=="function"?S(v):S;const w=GA({items:v,lookup:m});f&&d(v),w.length>0?p?.(w):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:S,nodes:k,setNodes:T}=e.getState();S&&T(k)})},[]),r=YA(n),i=M.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:f,onEdgesChange:p,edgeLookup:m}=e.getState();let b=u;for(const v of l)b=typeof v=="function"?v(b):v;f?d(b):p&&p(GA({items:b,lookup:m}))},[]),s=YA(i),o=M.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return g.jsx(EH.Provider,{value:o,children:t})}function efe(){const t=M.useContext(EH);if(!t)throw new Error("useBatchContext must be used within a BatchProvider");return t}const tfe=t=>!!t.panZoom;function sh(){const t=Kde(),e=Wt(),n=efe(),r=ct(tfe),i=M.useMemo(()=>{const s=p=>e.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:m,nodeOrigin:b}=e.getState(),v=KA(p)?p:m.get(p.id),w=v.parentId?QV(v.position,v.measured,v.parentId,m,b):v.position,S={...v,position:w,width:v.measured?.width??v.width,height:v.measured?.height??v.height};return Cu(S)},d=(p,m,b={replace:!1})=>{o(v=>v.map(w=>{if(w.id===p){const S=typeof m=="function"?m(w):m;return b.replace&&KA(S)?S:{...w,...S}}return w}))},f=(p,m,b={replace:!1})=>{l(v=>v.map(w=>{if(w.id===p){const S=typeof m=="function"?m(w):m;return b.replace&&Xde(S)?S:{...w,...S}}return w}))};return{getNodes:()=>e.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=e.getState();return p.map(m=>({...m}))},getEdge:p=>e.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const m=Array.isArray(p)?p:[p];n.nodeQueue.push(b=>[...b,...m])},addEdges:p=>{const m=Array.isArray(p)?p:[p];n.edgeQueue.push(b=>[...b,...m])},toObject:()=>{const{nodes:p=[],edges:m=[],transform:b}=e.getState(),[v,w,S]=b;return{nodes:p.map(k=>({...k})),edges:m.map(k=>({...k})),viewport:{x:v,y:w,zoom:S}}},deleteElements:async({nodes:p=[],edges:m=[]})=>{const{nodes:b,edges:v,onNodesDelete:w,onEdgesDelete:S,triggerNodeChanges:k,triggerEdgeChanges:T,onDelete:E,onBeforeDelete:N}=e.getState(),{nodes:A,edges:_}=await Mue({nodesToRemove:p,edgesToRemove:m,nodes:b,edges:v,onBeforeDelete:N}),j=_.length>0,R=A.length>0;if(j){const L=_.map(WA);S?.(_),T(L)}if(R){const L=A.map(WA);w?.(A),k(L)}return(R||j)&&E?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,m=!0,b)=>{const v=EA(p),w=v?p:u(p),S=b!==void 0;return w?(b||e.getState().nodes).filter(k=>{const T=e.getState().nodeLookup.get(k.id);if(T&&!v&&(k.id===p.id||!T.internals.positionAbsolute))return!1;const E=Cu(S?k:T),N=th(E,w);return m&&N>0||N>=E.width*E.height||N>=w.width*w.height}):[]},isNodeIntersecting:(p,m,b=!0)=>{const w=EA(p)?p:u(p);if(!w)return!1;const S=th(w,m);return b&&S>0||S>=w.width*w.height},updateNode:d,updateNodeData:(p,m,b={replace:!1})=>{d(p,v=>{const w=typeof m=="function"?m(v):m;return b.replace?{...v,data:w}:{...v,data:{...v.data,...w}}},b)},updateEdge:f,updateEdgeData:(p,m,b={replace:!1})=>{f(p,v=>{const w=typeof m=="function"?m(v):m;return b.replace?{...v,data:w}:{...v,data:{...v.data,...w}}},b)},getNodesBounds:p=>{const{nodeLookup:m,nodeOrigin:b}=e.getState();return WV(p,{nodeLookup:m,nodeOrigin:b})},getHandleConnections:({type:p,id:m,nodeId:b})=>Array.from(e.getState().connectionLookup.get(`${b}-${p}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:m,nodeId:b})=>Array.from(e.getState().connectionLookup.get(`${b}${p?m?`-${p}-${m}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const m=e.getState().fitViewResolver??jue();return e.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:m}),n.nodeQueue.push(b=>[...b]),m.promise}}},[]);return M.useMemo(()=>({...i,...t,viewportInitialized:r}),[r])}const XA=t=>t.selected,nfe=typeof window<"u"?window:void 0;function rfe({deleteKeyCode:t,multiSelectionKeyCode:e}){const n=Wt(),{deleteElements:r}=sh(),i=ih(t,{actInsideInputWithModifier:!1}),s=ih(e,{target:nfe});M.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(XA),edges:o.filter(XA)}),n.setState({nodesSelectionActive:!1})}},[i]),M.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function ife(t){const e=Wt();M.useEffect(()=>{const n=()=>{if(!t.current)return!1;const r=RS(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",As.error004()),e.setState({width:r.width||500,height:r.height||500})};if(t.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(t.current),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}}},[])}const r1={position:"absolute",width:"100%",height:"100%",top:0,left:0},sfe=t=>({userSelectionActive:t.userSelectionActive,lib:t.lib});function ofe({onPaneContextMenu:t,zoomOnScroll:e=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Nl.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:f,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:b=!0,children:v,noWheelClassName:w,noPanClassName:S,onViewportChange:k,isControlledViewport:T,paneClickDistance:E}){const N=Wt(),A=M.useRef(null),{userSelectionActive:_,lib:j}=ct(sfe,nn),R=ih(m),L=M.useRef();ife(A);const P=M.useCallback(F=>{k?.({x:F[0],y:F[1],zoom:F[2]}),T||N.setState({transform:F})},[k,T]);return M.useEffect(()=>{if(A.current){L.current=pde({domNode:A.current,minZoom:f,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:E,onDraggingChange:I=>N.setState({paneDragging:I}),onPanZoomStart:(I,U)=>{const{onViewportChangeStart:O,onMoveStart:H}=N.getState();H?.(I,U),O?.(U)},onPanZoom:(I,U)=>{const{onViewportChange:O,onMove:H}=N.getState();H?.(I,U),O?.(U)},onPanZoomEnd:(I,U)=>{const{onViewportChangeEnd:O,onMoveEnd:H}=N.getState();H?.(I,U),O?.(U)}});const{x:F,y:V,zoom:q}=L.current.getViewport();return N.setState({panZoom:L.current,transform:[F,V,q],domNode:A.current.closest(".react-flow")}),()=>{L.current?.destroy()}}},[]),M.useEffect(()=>{L.current?.update({onPaneContextMenu:t,zoomOnScroll:e,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:b,noPanClassName:S,userSelectionActive:_,noWheelClassName:w,lib:j,onTransformChange:P})},[t,e,n,r,i,s,o,l,R,b,S,_,w,j,P]),g.jsx("div",{className:"react-flow__renderer",ref:A,style:r1,children:v})}const afe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function lfe(){const{userSelectionActive:t,userSelectionRect:e}=ct(afe,nn);return t&&e?g.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}const jb=(t,e)=>n=>{n.target===e.current&&t?.(n)},cfe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,connectionInProgress:t.connection.inProgress,dragging:t.paneDragging});function ufe({isSelecting:t,selectionKeyPressed:e,selectionMode:n=eh.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:m,children:b}){const v=Wt(),{userSelectionActive:w,elementsSelectable:S,dragging:k,connectionInProgress:T}=ct(cfe,nn),E=S&&(t||w),N=M.useRef(null),A=M.useRef(),_=M.useRef(new Set),j=M.useRef(new Set),R=M.useRef(!1),L=M.useRef(!1),P=H=>{if(R.current||T){R.current=!1;return}l?.(H),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},F=H=>{if(Array.isArray(r)&&r?.includes(2)){H.preventDefault();return}u?.(H)},V=d?H=>d(H):void 0,q=H=>{const{resetSelectedElements:G,domNode:ee}=v.getState();if(A.current=ee?.getBoundingClientRect(),!S||!t||H.button!==0||H.target!==N.current||!A.current)return;H.target?.setPointerCapture?.(H.pointerId),L.current=!0,R.current=!1;const{x:B,y:W}=ws(H.nativeEvent,A.current);G(),v.setState({userSelectionRect:{width:0,height:0,startX:B,startY:W,x:B,y:W}}),s?.(H)},I=H=>{const{userSelectionRect:G,transform:ee,nodeLookup:B,edgeLookup:W,connectionLookup:ie,triggerNodeChanges:oe,triggerEdgeChanges:$,defaultEdgeOptions:Z}=v.getState();if(!A.current||!G)return;R.current=!0;const{x:te,y:ce}=ws(H.nativeEvent,A.current),{startX:re,startY:ye}=G,Ce={startX:re,startY:ye,x:te<re?te:re,y:ce<ye?ce:ye,width:Math.abs(te-re),height:Math.abs(ce-ye)},De=_.current,Se=j.current;_.current=new Set(DS(B,Ce,ee,n===eh.Partial,!0).map(Ee=>Ee.id)),j.current=new Set;const Ne=Z?.selectable??!0;for(const Ee of _.current){const Me=ie.get(Ee);if(Me)for(const{edgeId:yt}of Me.values()){const Pe=W.get(yt);Pe&&(Pe.selectable??Ne)&&j.current.add(yt)}}if(!NA(De,_.current)){const Ee=eu(B,_.current,!0);oe(Ee)}if(!NA(Se,j.current)){const Ee=eu(W,j.current);$(Ee)}v.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},U=H=>{if(H.button!==0||!L.current)return;H.target?.releasePointerCapture?.(H.pointerId);const{userSelectionRect:G}=v.getState();!w&&G&&H.target===N.current&&P?.(H),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(H),(e||i)&&(R.current=!1),L.current=!1},O=r===!0||Array.isArray(r)&&r.includes(0);return g.jsxs("div",{className:Mn(["react-flow__pane",{draggable:O,dragging:k,selection:t}]),onClick:E?void 0:jb(P,N),onContextMenu:jb(F,N),onWheel:jb(V,N),onPointerEnter:E?void 0:f,onPointerDown:E?q:p,onPointerMove:E?I:p,onPointerUp:E?U:void 0,onPointerLeave:m,ref:N,style:r1,children:[b,g.jsx(lfe,{})]})}function zw({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=e.getState(),d=l.get(t);if(!d){u?.("012",As.error012(t));return}e.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([t])}function NH({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Wt(),[u,d]=M.useState(!1),f=M.useRef();return M.useEffect(()=>{f.current=Que({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{zw({id:p,store:l,nodeRef:t})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),M.useEffect(()=>{if(e)f.current?.destroy();else if(t.current)return f.current?.update({noDragClassName:n,handleSelector:r,domNode:t.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{f.current?.destroy()}},[n,r,e,s,t,i]),u}const dfe=t=>e=>e.selected&&(e.draggable||t&&typeof e.draggable>"u");function TH(){const t=Wt();return M.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:f}=t.getState(),p=new Map,m=dfe(o),b=i?s[0]:5,v=i?s[1]:5,w=n.direction.x*b*n.factor,S=n.direction.y*v*n.factor;for(const[,k]of d){if(!m(k))continue;let T={x:k.internals.positionAbsolute.x+w,y:k.internals.positionAbsolute.y+S};i&&(T=Rh(T,s));const{position:E,positionAbsolute:N}=KV({nodeId:k.id,nextPosition:T,nodeLookup:d,nodeExtent:r,nodeOrigin:f,onError:l});k.position=E,k.internals.positionAbsolute=N,p.set(k.id,k)}u(p)},[])}const PS=M.createContext(null),ffe=PS.Provider;PS.Consumer;const AH=()=>M.useContext(PS),hfe=t=>({connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName,rfId:t.rfId}),pfe=(t,e,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,f=u?.nodeId===t&&u?.id===e&&u?.type===n;return{connectingFrom:l?.nodeId===t&&l?.id===e&&l?.type===n,connectingTo:f,clickConnecting:i?.nodeId===t&&i?.id===e&&i?.type===n,isPossibleEndHandle:s===Il.Strict?l?.type!==n:t!==l?.nodeId||e!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:f&&d}};function mfe({type:t="source",position:e=Re.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:f,onTouchStart:p,...m},b){const v=o||null,w=t==="target",S=Wt(),k=AH(),{connectOnClick:T,noPanClassName:E,rfId:N}=ct(hfe,nn),{connectingFrom:A,connectingTo:_,clickConnecting:j,isPossibleEndHandle:R,connectionInProcess:L,clickConnectionInProcess:P,valid:F}=ct(pfe(k,v,t),nn);k||S.getState().onError?.("010",As.error010());const V=U=>{const{defaultEdgeOptions:O,onConnect:H,hasDefaultEdges:G}=S.getState(),ee={...O,...U};if(G){const{edges:B,setEdges:W}=S.getState();W(iH(ee,B))}H?.(ee),l?.(ee)},q=U=>{if(!k)return;const O=nH(U.nativeEvent);if(i&&(O&&U.button===0||!O)){const H=S.getState();Pw.onPointerDown(U.nativeEvent,{handleDomNode:U.currentTarget,autoPanOnConnect:H.autoPanOnConnect,connectionMode:H.connectionMode,connectionRadius:H.connectionRadius,domNode:H.domNode,nodeLookup:H.nodeLookup,lib:H.lib,isTarget:w,handleId:v,nodeId:k,flowId:H.rfId,panBy:H.panBy,cancelConnection:H.cancelConnection,onConnectStart:H.onConnectStart,onConnectEnd:H.onConnectEnd,updateConnection:H.updateConnection,onConnect:V,isValidConnection:n||H.isValidConnection,getTransform:()=>S.getState().transform,getFromHandle:()=>S.getState().connection.fromHandle,autoPanSpeed:H.autoPanSpeed,dragThreshold:H.connectionDragThreshold})}O?f?.(U):p?.(U)},I=U=>{const{onClickConnectStart:O,onClickConnectEnd:H,connectionClickStartHandle:G,connectionMode:ee,isValidConnection:B,lib:W,rfId:ie,nodeLookup:oe,connection:$}=S.getState();if(!k||!G&&!i)return;if(!G){O?.(U.nativeEvent,{nodeId:k,handleId:v,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:k,type:t,id:v}});return}const Z=eH(U.target),te=n||B,{connection:ce,isValid:re}=Pw.isValid(U.nativeEvent,{handle:{nodeId:k,id:v,type:t},connectionMode:ee,fromNodeId:G.nodeId,fromHandleId:G.id||null,fromType:G.type,isValidConnection:te,flowId:ie,doc:Z,lib:W,nodeLookup:oe});re&&ce&&V(ce);const ye=structuredClone($);delete ye.inProgress,ye.toPosition=ye.toHandle?ye.toHandle.position:null,H?.(U,ye),S.setState({connectionClickStartHandle:null})};return g.jsx("div",{"data-handleid":v,"data-nodeid":k,"data-handlepos":e,"data-id":`${N}-${k}-${v}-${t}`,className:Mn(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,d,{source:!w,target:w,connectable:r,connectablestart:i,connectableend:s,clickconnecting:j,connectingfrom:A,connectingto:_,valid:F,connectionindicator:r&&(!L||R)&&(L||P?s:i)}]),onMouseDown:q,onTouchStart:q,onClick:T?I:void 0,ref:b,...m,children:u})}const Nn=M.memo(kH(mfe));function gfe({data:t,isConnectable:e,sourcePosition:n=Re.Bottom}){return g.jsxs(g.Fragment,{children:[t?.label,g.jsx(Nn,{type:"source",position:n,isConnectable:e})]})}function yfe({data:t,isConnectable:e,targetPosition:n=Re.Top,sourcePosition:r=Re.Bottom}){return g.jsxs(g.Fragment,{children:[g.jsx(Nn,{type:"target",position:n,isConnectable:e}),t?.label,g.jsx(Nn,{type:"source",position:r,isConnectable:e})]})}function bfe(){return null}function vfe({data:t,isConnectable:e,targetPosition:n=Re.Top}){return g.jsxs(g.Fragment,{children:[g.jsx(Nn,{type:"target",position:n,isConnectable:e}),t?.label]})}const sg={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ZA={input:gfe,default:yfe,output:vfe,group:bfe};function xfe(t){return t.internals.handleBounds===void 0?{width:t.width??t.initialWidth??t.style?.width,height:t.height??t.initialHeight??t.style?.height}:{width:t.width??t.style?.width,height:t.height??t.style?.height}}const wfe=t=>{const{width:e,height:n,x:r,y:i}=Dh(t.nodeLookup,{filter:s=>!!s.selected});return{width:Xi(e)?e:null,height:Xi(n)?n:null,userSelectionActive:t.userSelectionActive,transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]}) translate(${r}px,${i}px)`}};function Sfe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Wt(),{width:i,height:s,transformString:o,userSelectionActive:l}=ct(wfe,nn),u=TH(),d=M.useRef(null);if(M.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),NH({nodeRef:d}),l||!i||!s)return null;const f=t?m=>{const b=r.getState().nodes.filter(v=>v.selected);t(m,b)}:void 0,p=m=>{Object.prototype.hasOwnProperty.call(sg,m.key)&&(m.preventDefault(),u({direction:sg[m.key],factor:m.shiftKey?4:1}))};return g.jsx("div",{className:Mn(["react-flow__nodesselection","react-flow__container",e]),style:{transform:o},children:g.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const JA=typeof window<"u"?window:void 0,Cfe=t=>({nodesSelectionActive:t.nodesSelectionActive,userSelectionActive:t.userSelectionActive});function MH({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:f,selectionMode:p,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:v,panActivationKeyCode:w,zoomActivationKeyCode:S,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:N,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:j,panOnDrag:R,defaultViewport:L,translateExtent:P,minZoom:F,maxZoom:V,preventScrolling:q,onSelectionContextMenu:I,noWheelClassName:U,noPanClassName:O,disableKeyboardA11y:H,onViewportChange:G,isControlledViewport:ee}){const{nodesSelectionActive:B,userSelectionActive:W}=ct(Cfe),ie=ih(d,{target:JA}),oe=ih(w,{target:JA}),$=oe||R,Z=oe||N,te=f&&$!==!0,ce=ie||W||te;return rfe({deleteKeyCode:u,multiSelectionKeyCode:v}),g.jsx(ofe,{onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:Z,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:j,panOnDrag:!ie&&$,defaultViewport:L,translateExtent:P,minZoom:F,maxZoom:V,zoomActivationKeyCode:S,preventScrolling:q,noWheelClassName:U,noPanClassName:O,onViewportChange:G,isControlledViewport:ee,paneClickDistance:l,children:g.jsxs(ufe,{onSelectionStart:m,onSelectionEnd:b,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:$,isSelecting:!!ce,selectionMode:p,selectionKeyPressed:ie,selectionOnDrag:te,children:[t,B&&g.jsx(Sfe,{onSelectionContextMenu:I,noPanClassName:O,disableKeyboardA11y:H})]})})}MH.displayName="FlowRenderer";const kfe=M.memo(MH),Efe=t=>e=>t?DS(e.nodeLookup,{x:0,y:0,width:e.width,height:e.height},e.transform,!0).map(n=>n.id):Array.from(e.nodeLookup.keys());function Nfe(t){return ct(M.useCallback(Efe(t),[t]),nn)}const Tfe=t=>t.updateNodeInternals;function Afe(){const t=ct(Tfe),[e]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),t(r)}));return M.useEffect(()=>()=>{e?.disconnect()},[e]),e}function Mfe({node:t,nodeType:e,hasDimensions:n,resizeObserver:r}){const i=Wt(),s=M.useRef(null),o=M.useRef(null),l=M.useRef(t.sourcePosition),u=M.useRef(t.targetPosition),d=M.useRef(e),f=n&&!!t.internals.handleBounds;return M.useEffect(()=>{s.current&&!t.hidden&&(!f||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[f,t.hidden]),M.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),M.useEffect(()=>{if(s.current){const p=d.current!==e,m=l.current!==t.sourcePosition,b=u.current!==t.targetPosition;(p||m||b)&&(d.current=e,l.current=t.sourcePosition,u.current=t.targetPosition,i.getState().updateNodeInternals(new Map([[t.id,{id:t.id,nodeElement:s.current,force:!0}]])))}},[t.id,e,t.sourcePosition,t.targetPosition]),s}function _fe({id:t,onClick:e,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:f,resizeObserver:p,noDragClassName:m,noPanClassName:b,disableKeyboardA11y:v,rfId:w,nodeTypes:S,nodeClickDistance:k,onError:T}){const{node:E,internals:N,isParent:A}=ct(re=>{const ye=re.nodeLookup.get(t),Ce=re.parentLookup.has(t);return{node:ye,internals:ye.internals,isParent:Ce}},nn);let _=E.type||"default",j=S?.[_]||ZA[_];j===void 0&&(T?.("003",As.error003(_)),_="default",j=S?.default||ZA.default);const R=!!(E.draggable||l&&typeof E.draggable>"u"),L=!!(E.selectable||u&&typeof E.selectable>"u"),P=!!(E.connectable||d&&typeof E.connectable>"u"),F=!!(E.focusable||f&&typeof E.focusable>"u"),V=Wt(),q=JV(E),I=Mfe({node:E,nodeType:_,hasDimensions:q,resizeObserver:p}),U=NH({nodeRef:I,disabled:E.hidden||!R,noDragClassName:m,handleSelector:E.dragHandle,nodeId:t,isSelectable:L,nodeClickDistance:k}),O=TH();if(E.hidden)return null;const H=go(E),G=xfe(E),ee=L||R||e||n||r||i,B=n?re=>n(re,{...N.userNode}):void 0,W=r?re=>r(re,{...N.userNode}):void 0,ie=i?re=>i(re,{...N.userNode}):void 0,oe=s?re=>s(re,{...N.userNode}):void 0,$=o?re=>o(re,{...N.userNode}):void 0,Z=re=>{const{selectNodesOnDrag:ye,nodeDragThreshold:Ce}=V.getState();L&&(!ye||!R||Ce>0)&&zw({id:t,store:V,nodeRef:I}),e&&e(re,{...N.userNode})},te=re=>{if(!(tH(re.nativeEvent)||v)){if(FV.includes(re.key)&&L){const ye=re.key==="Escape";zw({id:t,store:V,unselect:ye,nodeRef:I})}else if(R&&E.selected&&Object.prototype.hasOwnProperty.call(sg,re.key)){re.preventDefault();const{ariaLabelConfig:ye}=V.getState();V.setState({ariaLiveMessage:ye["node.a11yDescription.ariaLiveMessage"]({direction:re.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),O({direction:sg[re.key],factor:re.shiftKey?4:1})}}},ce=()=>{if(v||!I.current?.matches(":focus-visible"))return;const{transform:re,width:ye,height:Ce,autoPanOnNodeFocus:De,setCenter:Se}=V.getState();if(!De)return;DS(new Map([[t,E]]),{x:0,y:0,width:ye,height:Ce},re,!0).length>0||Se(E.position.x+H.width/2,E.position.y+H.height/2,{zoom:re[2]})};return g.jsx("div",{className:Mn(["react-flow__node",`react-flow__node-${_}`,{[b]:R},E.className,{selected:E.selected,selectable:L,parent:A,draggable:R,dragging:U}]),ref:I,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:ee?"all":"none",visibility:q?"visible":"hidden",...E.style,...G},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:B,onMouseMove:W,onMouseLeave:ie,onContextMenu:oe,onClick:Z,onDoubleClick:$,onKeyDown:F?te:void 0,tabIndex:F?0:void 0,onFocus:F?ce:void 0,role:E.ariaRole??(F?"group":void 0),"aria-roledescription":"node","aria-describedby":v?void 0:`${bH}-${w}`,"aria-label":E.ariaLabel,...E.domAttributes,children:g.jsx(ffe,{value:t,children:g.jsx(j,{id:t,data:E.data,type:_,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:E.selected??!1,selectable:L,draggable:R,deletable:E.deletable??!0,isConnectable:P,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:U,dragHandle:E.dragHandle,zIndex:N.z,parentId:E.parentId,...H})})})}const Dfe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,onError:t.onError});function _H(t){const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=ct(Dfe,nn),o=Nfe(t.onlyRenderVisibleElements),l=Afe();return g.jsx("div",{className:"react-flow__nodes",style:r1,children:o.map(u=>g.jsx(_fe,{id:u,nodeTypes:t.nodeTypes,nodeExtent:t.nodeExtent,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,resizeObserver:l,nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:t.nodeClickDistance,onError:s},u))})}_H.displayName="NodeRenderer";const Rfe=M.memo(_H);function jfe(t){return ct(M.useCallback(n=>{if(!t)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Pue({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[t]),nn)}const Ofe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t}};return g.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Lfe=({color:t="none",strokeWidth:e=1})=>{const n={strokeWidth:e,...t&&{stroke:t,fill:t}};return g.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},QA={[ng.Arrow]:Ofe,[ng.ArrowClosed]:Lfe};function Ife(t){const e=Wt();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(QA,t)?QA[t]:(e.getState().onError?.("009",As.error009(t)),null),[t])}const Pfe=({id:t,type:e,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Ife(e);return u?g.jsx("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:g.jsx(u,{color:n,strokeWidth:o})}):null},DH=({defaultColor:t,rfId:e})=>{const n=ct(s=>s.edges),r=ct(s=>s.defaultEdgeOptions),i=M.useMemo(()=>Uue(n,{id:e,defaultColor:t,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,e,t]);return i.length?g.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:g.jsx("defs",{children:i.map(s=>g.jsx(Pfe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};DH.displayName="MarkerDefinitions";var zfe=M.memo(DH);function RH({x:t,y:e,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...f}){const[p,m]=M.useState({x:1,y:0,width:0,height:0}),b=Mn(["react-flow__edge-textwrapper",d]),v=M.useRef(null);return M.useEffect(()=>{if(v.current){const w=v.current.getBBox();m({x:w.x,y:w.y,width:w.width,height:w.height})}},[n]),n?g.jsxs("g",{transform:`translate(${t-p.width/2} ${e-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...f,children:[i&&g.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),g.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:v,style:r,children:n}),u]}):null}RH.displayName="EdgeText";const Bfe=M.memo(RH);function i1({path:t,labelX:e,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...f}){return g.jsxs(g.Fragment,{children:[g.jsx("path",{...f,d:t,fill:"none",className:Mn(["react-flow__edge-path",f.className])}),d?g.jsx("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&Xi(e)&&Xi(n)?g.jsx(Bfe,{x:e,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function eM({pos:t,x1:e,y1:n,x2:r,y2:i}){return t===Re.Left||t===Re.Right?[.5*(e+r),n]:[e,.5*(n+i)]}function jH({sourceX:t,sourceY:e,sourcePosition:n=Re.Bottom,targetX:r,targetY:i,targetPosition:s=Re.Top}){const[o,l]=eM({pos:n,x1:t,y1:e,x2:r,y2:i}),[u,d]=eM({pos:s,x1:r,y1:i,x2:t,y2:e}),[f,p,m,b]=rH({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${r},${i}`,f,p,m,b]}function OH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:v,markerEnd:w,markerStart:S,interactionWidth:k})=>{const[T,E,N]=jH({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=t.isInternal?void 0:e;return g.jsx(i1,{id:A,path:T,labelX:E,labelY:N,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:v,markerEnd:w,markerStart:S,interactionWidth:k})})}const Vfe=OH({isInternal:!1}),LH=OH({isInternal:!0});Vfe.displayName="SimpleBezierEdge";LH.displayName="SimpleBezierEdgeInternal";function IH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,sourcePosition:b=Re.Bottom,targetPosition:v=Re.Top,markerEnd:w,markerStart:S,pathOptions:k,interactionWidth:T})=>{const[E,N,A]=Ow({sourceX:n,sourceY:r,sourcePosition:b,targetX:i,targetY:s,targetPosition:v,borderRadius:k?.borderRadius,offset:k?.offset,stepPosition:k?.stepPosition}),_=t.isInternal?void 0:e;return g.jsx(i1,{id:_,path:E,labelX:N,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:w,markerStart:S,interactionWidth:T})})}const PH=IH({isInternal:!1}),zH=IH({isInternal:!0});PH.displayName="SmoothStepEdge";zH.displayName="SmoothStepEdgeInternal";function BH(t){return M.memo(({id:e,...n})=>{const r=t.isInternal?void 0:e;return g.jsx(PH,{...n,id:r,pathOptions:M.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Hfe=BH({isInternal:!1}),VH=BH({isInternal:!0});Hfe.displayName="StepEdge";VH.displayName="StepEdgeInternal";function HH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:v,interactionWidth:w})=>{const[S,k,T]=sH({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=t.isInternal?void 0:e;return g.jsx(i1,{id:E,path:S,labelX:k,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:f,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:v,interactionWidth:w})})}const Ffe=HH({isInternal:!1}),FH=HH({isInternal:!0});Ffe.displayName="StraightEdge";FH.displayName="StraightEdgeInternal";function qH(t){return M.memo(({id:e,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Re.Bottom,targetPosition:l=Re.Top,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:v,markerEnd:w,markerStart:S,pathOptions:k,interactionWidth:T})=>{const[E,N,A]=Jg({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:k?.curvature}),_=t.isInternal?void 0:e;return g.jsx(i1,{id:_,path:E,labelX:N,labelY:A,label:u,labelStyle:d,labelShowBg:f,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:v,markerEnd:w,markerStart:S,interactionWidth:T})})}const qfe=qH({isInternal:!1}),UH=qH({isInternal:!0});qfe.displayName="BezierEdge";UH.displayName="BezierEdgeInternal";const tM={default:UH,straight:FH,step:VH,smoothstep:zH,simplebezier:LH},nM={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Ufe=(t,e,n)=>n===Re.Left?t-e:n===Re.Right?t+e:t,$fe=(t,e,n)=>n===Re.Top?t-e:n===Re.Bottom?t+e:t,rM="react-flow__edgeupdater";function iM({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return g.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Mn([rM,`${rM}-${l}`]),cx:Ufe(e,r,t),cy:$fe(n,r,t),r,stroke:"transparent",fill:"transparent"})}function Gfe({isReconnectable:t,reconnectRadius:e,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:f,onReconnectEnd:p,setReconnecting:m,setUpdateHover:b}){const v=Wt(),w=(N,A)=>{if(N.button!==0)return;const{autoPanOnConnect:_,domNode:j,isValidConnection:R,connectionMode:L,connectionRadius:P,lib:F,onConnectStart:V,onConnectEnd:q,cancelConnection:I,nodeLookup:U,rfId:O,panBy:H,updateConnection:G}=v.getState(),ee=A.type==="target",B=(oe,$)=>{m(!1),p?.(oe,n,A.type,$)},W=oe=>d?.(n,oe),ie=(oe,$)=>{m(!0),f?.(N,n,A.type),V?.(oe,$)};Pw.onPointerDown(N.nativeEvent,{autoPanOnConnect:_,connectionMode:L,connectionRadius:P,domNode:j,handleId:A.id,nodeId:A.nodeId,nodeLookup:U,isTarget:ee,edgeUpdaterType:A.type,lib:F,flowId:O,cancelConnection:I,panBy:H,isValidConnection:R,onConnect:W,onConnectStart:ie,onConnectEnd:q,onReconnectEnd:B,updateConnection:G,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,dragThreshold:v.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},S=N=>w(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),k=N=>w(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>b(!0),E=()=>b(!1);return g.jsxs(g.Fragment,{children:[(t===!0||t==="source")&&g.jsx(iM,{position:l,centerX:r,centerY:i,radius:e,onMouseDown:S,onMouseEnter:T,onMouseOut:E,type:"source"}),(t===!0||t==="target")&&g.jsx(iM,{position:u,centerX:s,centerY:o,radius:e,onMouseDown:k,onMouseEnter:T,onMouseOut:E,type:"target"})]})}function Wfe({id:t,edgesFocusable:e,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:b,rfId:v,edgeTypes:w,noPanClassName:S,onError:k,disableKeyboardA11y:T}){let E=ct(Se=>Se.edgeLookup.get(t));const N=ct(Se=>Se.defaultEdgeOptions);E=N?{...N,...E}:E;let A=E.type||"default",_=w?.[A]||tM[A];_===void 0&&(k?.("011",As.error011(A)),A="default",_=w?.default||tM.default);const j=!!(E.focusable||e&&typeof E.focusable>"u"),R=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),L=!!(E.selectable||r&&typeof E.selectable>"u"),P=M.useRef(null),[F,V]=M.useState(!1),[q,I]=M.useState(!1),U=Wt(),{zIndex:O,sourceX:H,sourceY:G,targetX:ee,targetY:B,sourcePosition:W,targetPosition:ie}=ct(M.useCallback(Se=>{const Ne=Se.nodeLookup.get(E.source),Ee=Se.nodeLookup.get(E.target);if(!Ne||!Ee)return{zIndex:E.zIndex,...nM};const Me=que({id:t,sourceNode:Ne,targetNode:Ee,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Se.connectionMode,onError:k});return{zIndex:Iue({selected:E.selected,zIndex:E.zIndex,sourceNode:Ne,targetNode:Ee,elevateOnSelect:Se.elevateEdgesOnSelect}),...Me||nM}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),nn),oe=M.useMemo(()=>E.markerStart?`url('#${Lw(E.markerStart,v)}')`:void 0,[E.markerStart,v]),$=M.useMemo(()=>E.markerEnd?`url('#${Lw(E.markerEnd,v)}')`:void 0,[E.markerEnd,v]);if(E.hidden||H===null||G===null||ee===null||B===null)return null;const Z=Se=>{const{addSelectedEdges:Ne,unselectNodesAndEdges:Ee,multiSelectionActive:Me}=U.getState();L&&(U.setState({nodesSelectionActive:!1}),E.selected&&Me?(Ee({nodes:[],edges:[E]}),P.current?.blur()):Ne([t])),i&&i(Se,E)},te=s?Se=>{s(Se,{...E})}:void 0,ce=o?Se=>{o(Se,{...E})}:void 0,re=l?Se=>{l(Se,{...E})}:void 0,ye=u?Se=>{u(Se,{...E})}:void 0,Ce=d?Se=>{d(Se,{...E})}:void 0,De=Se=>{if(!T&&FV.includes(Se.key)&&L){const{unselectNodesAndEdges:Ne,addSelectedEdges:Ee}=U.getState();Se.key==="Escape"?(P.current?.blur(),Ne({edges:[E]})):Ee([t])}};return g.jsx("svg",{style:{zIndex:O},children:g.jsxs("g",{className:Mn(["react-flow__edge",`react-flow__edge-${A}`,E.className,S,{selected:E.selected,animated:E.animated,inactive:!L&&!i,updating:F,selectable:L}]),onClick:Z,onDoubleClick:te,onContextMenu:ce,onMouseEnter:re,onMouseMove:ye,onMouseLeave:Ce,onKeyDown:j?De:void 0,tabIndex:j?0:void 0,role:E.ariaRole??(j?"group":"img"),"aria-roledescription":"edge","data-id":t,"data-testid":`rf__edge-${t}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":j?`${vH}-${v}`:void 0,ref:P,...E.domAttributes,children:[!q&&g.jsx(_,{id:t,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:L,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:H,sourceY:G,targetX:ee,targetY:B,sourcePosition:W,targetPosition:ie,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:oe,markerEnd:$,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),R&&g.jsx(Gfe,{edge:E,isReconnectable:R,reconnectRadius:f,onReconnect:p,onReconnectStart:m,onReconnectEnd:b,sourceX:H,sourceY:G,targetX:ee,targetY:B,sourcePosition:W,targetPosition:ie,setUpdateHover:V,setReconnecting:I})]})})}const Kfe=t=>({edgesFocusable:t.edgesFocusable,edgesReconnectable:t.edgesReconnectable,elementsSelectable:t.elementsSelectable,connectionMode:t.connectionMode,onError:t.onError});function $H({defaultMarkerColor:t,onlyRenderVisibleElements:e,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:f,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:b,onReconnectEnd:v,disableKeyboardA11y:w}){const{edgesFocusable:S,edgesReconnectable:k,elementsSelectable:T,onError:E}=ct(Kfe,nn),N=jfe(e);return g.jsxs("div",{className:"react-flow__edges",children:[g.jsx(zfe,{defaultColor:t,rfId:n}),N.map(A=>g.jsx(Wfe,{id:A,edgesFocusable:S,edgesReconnectable:k,elementsSelectable:T,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:f,reconnectRadius:p,onDoubleClick:m,onReconnectStart:b,onReconnectEnd:v,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:w},A))]})}$H.displayName="EdgeRenderer";const Yfe=M.memo($H),Xfe=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Zfe({children:t}){const e=ct(Xfe);return g.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:e},children:t})}function Jfe(t){const e=sh(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Qfe=t=>t.panZoom?.syncViewport;function ehe(t){const e=ct(Qfe),n=Wt();return M.useEffect(()=>{t&&(e?.(t),n.setState({transform:[t.x,t.y,t.zoom]}))},[t,e]),null}function the(t){return t.connection.inProgress?{...t.connection,to:jh(t.connection.to,t.transform)}:{...t.connection}}function nhe(t){return the}function rhe(t){const e=nhe();return ct(e,nn)}const ihe=t=>({nodesConnectable:t.nodesConnectable,isValid:t.connection.isValid,inProgress:t.connection.inProgress,width:t.width,height:t.height});function she({containerStyle:t,style:e,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=ct(ihe,nn);return!(s&&i&&u)?null:g.jsx("svg",{style:t,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:g.jsx("g",{className:Mn(["react-flow__connection",$V(l)]),children:g.jsx(GH,{style:e,type:n,CustomComponent:r,isValid:l})})})}const GH=({style:t,type:e=aa.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:f,toHandle:p,toPosition:m}=rhe();if(!i)return;if(n)return g.jsx(n,{connectionLineType:e,connectionLineStyle:t,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:m,connectionStatus:$V(r),toNode:f,toHandle:p});let b="";const v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:m};switch(e){case aa.Bezier:[b]=Jg(v);break;case aa.SimpleBezier:[b]=jH(v);break;case aa.Step:[b]=Ow({...v,borderRadius:0});break;case aa.SmoothStep:[b]=Ow(v);break;default:[b]=sH(v)}return g.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:t})};GH.displayName="ConnectionLine";const ohe={};function sM(t=ohe){M.useRef(t),Wt(),M.useEffect(()=>{},[t])}function ahe(){Wt(),M.useRef(!1),M.useEffect(()=>{},[])}function WH({nodeTypes:t,edgeTypes:e,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:b,connectionLineType:v,connectionLineStyle:w,connectionLineComponent:S,connectionLineContainerStyle:k,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:j,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:P,defaultViewport:F,translateExtent:V,minZoom:q,maxZoom:I,preventScrolling:U,defaultMarkerColor:O,zoomOnScroll:H,zoomOnPinch:G,panOnScroll:ee,panOnScrollSpeed:B,panOnScrollMode:W,zoomOnDoubleClick:ie,panOnDrag:oe,onPaneClick:$,onPaneMouseEnter:Z,onPaneMouseMove:te,onPaneMouseLeave:ce,onPaneScroll:re,onPaneContextMenu:ye,paneClickDistance:Ce,nodeClickDistance:De,onEdgeContextMenu:Se,onEdgeMouseEnter:Ne,onEdgeMouseMove:Ee,onEdgeMouseLeave:Me,reconnectRadius:yt,onReconnect:Pe,onReconnectStart:vt,onReconnectEnd:wt,noDragClassName:Yt,noWheelClassName:gn,noPanClassName:qt,disableKeyboardA11y:Mt,nodeExtent:Dn,rfId:yn,viewport:zt,onViewportChange:ht}){return sM(t),sM(e),ahe(),Jfe(n),ehe(zt),g.jsx(kfe,{onPaneClick:$,onPaneMouseEnter:Z,onPaneMouseMove:te,onPaneMouseLeave:ce,onPaneContextMenu:ye,onPaneScroll:re,paneClickDistance:Ce,deleteKeyCode:R,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:j,elementsSelectable:P,zoomOnScroll:H,zoomOnPinch:G,zoomOnDoubleClick:ie,panOnScroll:ee,panOnScrollSpeed:B,panOnScrollMode:W,panOnDrag:oe,defaultViewport:F,translateExtent:V,minZoom:q,maxZoom:I,onSelectionContextMenu:p,preventScrolling:U,noDragClassName:Yt,noWheelClassName:gn,noPanClassName:qt,disableKeyboardA11y:Mt,onViewportChange:ht,isControlledViewport:!!zt,children:g.jsxs(Zfe,{children:[g.jsx(Yfe,{edgeTypes:e,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Pe,onReconnectStart:vt,onReconnectEnd:wt,onlyRenderVisibleElements:L,onEdgeContextMenu:Se,onEdgeMouseEnter:Ne,onEdgeMouseMove:Ee,onEdgeMouseLeave:Me,reconnectRadius:yt,defaultMarkerColor:O,noPanClassName:qt,disableKeyboardA11y:Mt,rfId:yn}),g.jsx(she,{style:w,type:v,component:S,containerStyle:k}),g.jsx("div",{className:"react-flow__edgelabel-renderer"}),g.jsx(Rfe,{nodeTypes:t,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:f,nodeClickDistance:De,onlyRenderVisibleElements:L,noPanClassName:qt,noDragClassName:Yt,disableKeyboardA11y:Mt,nodeExtent:Dn,rfId:yn}),g.jsx("div",{className:"react-flow__viewport-portal"})]})})}WH.displayName="GraphView";const lhe=M.memo(WH),oM=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:f,nodeExtent:p}={})=>{const m=new Map,b=new Map,v=new Map,w=new Map,S=r??e??[],k=n??t??[],T=f??[0,0],E=p??Qf;aH(v,w,S);const N=Iw(k,m,b,{nodeOrigin:T,nodeExtent:E,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=Dh(m,{filter:P=>!!((P.width||P.initialWidth)&&(P.height||P.initialHeight))}),{x:j,y:R,zoom:L}=Zg(_,i,s,u,d,l?.padding??.1);A=[j,R,L]}return{rfId:"1",width:0,height:0,transform:A,nodes:k,nodesInitialized:N,nodeLookup:m,parentLookup:b,edges:S,edgeLookup:w,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:Qf,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Il.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...UV},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:_ue,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:qV}},che=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:p})=>Mde((m,b)=>{async function v(){const{nodeLookup:w,panZoom:S,fitViewOptions:k,fitViewResolver:T,width:E,height:N,minZoom:A,maxZoom:_}=b();S&&(await Aue({nodes:w,width:E,height:N,panZoom:S,minZoom:A,maxZoom:_},k),T?.resolve(!0),m({fitViewResolver:null}))}return{...oM({nodes:t,edges:e,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:f,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:w=>{const{nodeLookup:S,parentLookup:k,nodeOrigin:T,elevateNodesOnSelect:E,fitViewQueued:N}=b(),A=Iw(w,S,k,{nodeOrigin:T,nodeExtent:p,elevateNodesOnSelect:E,checkEquality:!0});N&&A?(v(),m({nodes:w,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):m({nodes:w,nodesInitialized:A})},setEdges:w=>{const{connectionLookup:S,edgeLookup:k}=b();aH(S,k,w),m({edges:w})},setDefaultNodesAndEdges:(w,S)=>{if(w){const{setNodes:k}=b();k(w),m({hasDefaultNodes:!0})}if(S){const{setEdges:k}=b();k(S),m({hasDefaultEdges:!0})}},updateNodeInternals:w=>{const{triggerNodeChanges:S,nodeLookup:k,parentLookup:T,domNode:E,nodeOrigin:N,nodeExtent:A,debug:_,fitViewQueued:j}=b(),{changes:R,updatedInternals:L}=Yue(w,k,T,E,N,A);L&&(Gue(k,T,{nodeOrigin:N,nodeExtent:A}),j?(v(),m({fitViewQueued:!1,fitViewOptions:void 0})):m({}),R?.length>0&&(_&&console.log("React Flow: trigger node changes",R),S?.(R)))},updateNodePositions:(w,S=!1)=>{const k=[],T=[],{nodeLookup:E,triggerNodeChanges:N}=b();for(const[A,_]of w){const j=E.get(A),R=!!(j?.expandParent&&j?.parentId&&_?.position),L={id:A,type:"position",position:R?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:S};R&&j.parentId&&k.push({id:A,parentId:j.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),T.push(L)}if(k.length>0){const{parentLookup:A,nodeOrigin:_}=b(),j=IS(k,E,A,_);T.push(...j)}N(T)},triggerNodeChanges:w=>{const{onNodesChange:S,setNodes:k,nodes:T,hasDefaultNodes:E,debug:N}=b();if(w?.length){if(E){const A=SH(w,T);k(A)}N&&console.log("React Flow: trigger node changes",w),S?.(w)}},triggerEdgeChanges:w=>{const{onEdgesChange:S,setEdges:k,edges:T,hasDefaultEdges:E,debug:N}=b();if(w?.length){if(E){const A=CH(w,T);k(A)}N&&console.log("React Flow: trigger edge changes",w),S?.(w)}},addSelectedNodes:w=>{const{multiSelectionActive:S,edgeLookup:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(S){const A=w.map(_=>ol(_,!0));E(A);return}E(eu(T,new Set([...w]),!0)),N(eu(k))},addSelectedEdges:w=>{const{multiSelectionActive:S,edgeLookup:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(S){const A=w.map(_=>ol(_,!0));N(A);return}N(eu(k,new Set([...w]))),E(eu(T,new Set,!0))},unselectNodesAndEdges:({nodes:w,edges:S}={})=>{const{edges:k,nodes:T,nodeLookup:E,triggerNodeChanges:N,triggerEdgeChanges:A}=b(),_=w||T,j=S||k,R=_.map(P=>{const F=E.get(P.id);return F&&(F.selected=!1),ol(P.id,!1)}),L=j.map(P=>ol(P.id,!1));N(R),A(L)},setMinZoom:w=>{const{panZoom:S,maxZoom:k}=b();S?.setScaleExtent([w,k]),m({minZoom:w})},setMaxZoom:w=>{const{panZoom:S,minZoom:k}=b();S?.setScaleExtent([k,w]),m({maxZoom:w})},setTranslateExtent:w=>{b().panZoom?.setTranslateExtent(w),m({translateExtent:w})},setPaneClickDistance:w=>{b().panZoom?.setClickDistance(w)},resetSelectedElements:()=>{const{edges:w,nodes:S,triggerNodeChanges:k,triggerEdgeChanges:T,elementsSelectable:E}=b();if(!E)return;const N=S.reduce((_,j)=>j.selected?[..._,ol(j.id,!1)]:_,[]),A=w.reduce((_,j)=>j.selected?[..._,ol(j.id,!1)]:_,[]);k(N),T(A)},setNodeExtent:w=>{const{nodes:S,nodeLookup:k,parentLookup:T,nodeOrigin:E,elevateNodesOnSelect:N,nodeExtent:A}=b();w[0][0]===A[0][0]&&w[0][1]===A[0][1]&&w[1][0]===A[1][0]&&w[1][1]===A[1][1]||(Iw(S,k,T,{nodeOrigin:E,nodeExtent:w,elevateNodesOnSelect:N,checkEquality:!1}),m({nodeExtent:w}))},panBy:w=>{const{transform:S,width:k,height:T,panZoom:E,translateExtent:N}=b();return Xue({delta:w,panZoom:E,transform:S,translateExtent:N,width:k,height:T})},setCenter:async(w,S,k)=>{const{width:T,height:E,maxZoom:N,panZoom:A}=b();if(!A)return Promise.resolve(!1);const _=typeof k?.zoom<"u"?k.zoom:N;return await A.setViewport({x:T/2-w*_,y:E/2-S*_,zoom:_},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{m({connection:{...UV}})},updateConnection:w=>{m({connection:w})},reset:()=>m({...oM()})}},Object.is);function KH({initialNodes:t,initialEdges:e,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:f,nodeExtent:p,children:m}){const[b]=M.useState(()=>che({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:f,nodeExtent:p}));return g.jsx(_de,{value:b,children:g.jsx(Qde,{children:m})})}function uhe({children:t,nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:f,nodeOrigin:p,nodeExtent:m}){return M.useContext(t1)?g.jsx(g.Fragment,{children:t}):g.jsx(KH,{initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:f,nodeOrigin:p,nodeExtent:m,children:t})}const dhe={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function fhe({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:f,onMoveStart:p,onMoveEnd:m,onConnect:b,onConnectStart:v,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:k,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:L,onNodesDelete:P,onEdgesDelete:F,onDelete:V,onSelectionChange:q,onSelectionDragStart:I,onSelectionDrag:U,onSelectionDragStop:O,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:ee,onBeforeDelete:B,connectionMode:W,connectionLineType:ie=aa.Bezier,connectionLineStyle:oe,connectionLineComponent:$,connectionLineContainerStyle:Z,deleteKeyCode:te="Backspace",selectionKeyCode:ce="Shift",selectionOnDrag:re=!1,selectionMode:ye=eh.Full,panActivationKeyCode:Ce="Space",multiSelectionKeyCode:De=nh()?"Meta":"Control",zoomActivationKeyCode:Se=nh()?"Meta":"Control",snapToGrid:Ne,snapGrid:Ee,onlyRenderVisibleElements:Me=!1,selectNodesOnDrag:yt,nodesDraggable:Pe,autoPanOnNodeFocus:vt,nodesConnectable:wt,nodesFocusable:Yt,nodeOrigin:gn=xH,edgesFocusable:qt,edgesReconnectable:Mt,elementsSelectable:Dn=!0,defaultViewport:yn=qde,minZoom:zt=.5,maxZoom:ht=2,translateExtent:_t=Qf,preventScrolling:Dt=!0,nodeExtent:vr,defaultMarkerColor:qr="#b1b1b7",zoomOnScroll:Ii=!0,zoomOnPinch:rn=!0,panOnScroll:ze=!1,panOnScrollSpeed:Ge=.5,panOnScrollMode:xr=Nl.Free,zoomOnDoubleClick:pt=!0,panOnDrag:bn=!0,onPaneClick:wo,onPaneMouseEnter:Pi,onPaneMouseMove:Ur,onPaneMouseLeave:$r,onPaneScroll:wr,onPaneContextMenu:Dr,paneClickDistance:Gr=0,nodeClickDistance:St=0,children:Kn,onReconnect:So,onReconnectStart:zi,onReconnectEnd:sr,onEdgeContextMenu:Xt,onEdgeDoubleClick:Bt,onEdgeMouseEnter:Rr,onEdgeMouseMove:Rn,onEdgeMouseLeave:Wr,reconnectRadius:es=10,onNodesChange:Ls,onEdgesChange:Kr,noDragClassName:ts="nodrag",noWheelClassName:vn="nowheel",noPanClassName:Ue="nopan",fitView:or,fitViewOptions:ar,connectOnClick:Lt,attributionPosition:ns,proOptions:Le,defaultEdgeOptions:J,elevateNodesOnSelect:ge,elevateEdgesOnSelect:je,disableKeyboardA11y:dt=!1,autoPanOnConnect:Vt,autoPanOnNodeDrag:Rt,autoPanSpeed:Ut,connectionRadius:zn,isValidConnection:xn,onError:fi,style:Ht,id:Yn,nodeDragThreshold:rs,connectionDragThreshold:La,viewport:ec,onViewportChange:tc,width:lr,height:nc,colorMode:qu="light",debug:Co,onScroll:is,ariaLabelConfig:ss,...ko},cr){const Yr=Yn||"1",Eo=Wde(qu),Ia=M.useCallback(Bi=>{Bi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),is?.(Bi)},[is]);return g.jsx("div",{"data-testid":"rf__wrapper",...ko,onScroll:Ia,style:{...Ht,...dhe},ref:cr,className:Mn(["react-flow",i,Eo]),id:Yn,role:"application",children:g.jsxs(uhe,{nodes:t,edges:e,width:lr,height:nc,fitView:or,fitViewOptions:ar,minZoom:zt,maxZoom:ht,nodeOrigin:gn,nodeExtent:vr,children:[g.jsx(lhe,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:ie,connectionLineStyle:oe,connectionLineComponent:$,connectionLineContainerStyle:Z,selectionKeyCode:ce,selectionOnDrag:re,selectionMode:ye,deleteKeyCode:te,multiSelectionKeyCode:De,panActivationKeyCode:Ce,zoomActivationKeyCode:Se,onlyRenderVisibleElements:Me,defaultViewport:yn,translateExtent:_t,minZoom:zt,maxZoom:ht,preventScrolling:Dt,zoomOnScroll:Ii,zoomOnPinch:rn,zoomOnDoubleClick:pt,panOnScroll:ze,panOnScrollSpeed:Ge,panOnScrollMode:xr,panOnDrag:bn,onPaneClick:wo,onPaneMouseEnter:Pi,onPaneMouseMove:Ur,onPaneMouseLeave:$r,onPaneScroll:wr,onPaneContextMenu:Dr,paneClickDistance:Gr,nodeClickDistance:St,onSelectionContextMenu:H,onSelectionStart:G,onSelectionEnd:ee,onReconnect:So,onReconnectStart:zi,onReconnectEnd:sr,onEdgeContextMenu:Xt,onEdgeDoubleClick:Bt,onEdgeMouseEnter:Rr,onEdgeMouseMove:Rn,onEdgeMouseLeave:Wr,reconnectRadius:es,defaultMarkerColor:qr,noDragClassName:ts,noWheelClassName:vn,noPanClassName:Ue,rfId:Yr,disableKeyboardA11y:dt,nodeExtent:vr,viewport:ec,onViewportChange:tc}),g.jsx(Gde,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:v,onConnectEnd:w,onClickConnectStart:S,onClickConnectEnd:k,nodesDraggable:Pe,autoPanOnNodeFocus:vt,nodesConnectable:wt,nodesFocusable:Yt,edgesFocusable:qt,edgesReconnectable:Mt,elementsSelectable:Dn,elevateNodesOnSelect:ge,elevateEdgesOnSelect:je,minZoom:zt,maxZoom:ht,nodeExtent:vr,onNodesChange:Ls,onEdgesChange:Kr,snapToGrid:Ne,snapGrid:Ee,connectionMode:W,translateExtent:_t,connectOnClick:Lt,defaultEdgeOptions:J,fitView:or,fitViewOptions:ar,onNodesDelete:P,onEdgesDelete:F,onDelete:V,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:L,onSelectionDrag:U,onSelectionDragStart:I,onSelectionDragStop:O,onMove:f,onMoveStart:p,onMoveEnd:m,noPanClassName:Ue,nodeOrigin:gn,rfId:Yr,autoPanOnConnect:Vt,autoPanOnNodeDrag:Rt,autoPanSpeed:Ut,onError:fi,connectionRadius:zn,isValidConnection:xn,selectNodesOnDrag:yt,nodeDragThreshold:rs,connectionDragThreshold:La,onBeforeDelete:B,paneClickDistance:Gr,debug:Co,ariaLabelConfig:ss}),g.jsx(Fde,{onSelectionChange:q}),Kn,g.jsx(Pde,{proOptions:Le,position:ns}),g.jsx(Ide,{rfId:Yr,disableKeyboardA11y:dt})]})})}var hhe=kH(fhe);function phe(t){const[e,n]=M.useState(t),r=M.useCallback(i=>n(s=>SH(i,s)),[]);return[e,n,r]}function mhe(t){const[e,n]=M.useState(t),r=M.useCallback(i=>n(s=>CH(i,s)),[]);return[e,n,r]}function ghe({dimensions:t,lineWidth:e,variant:n,className:r}){return g.jsx("path",{strokeWidth:e,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`,className:Mn(["react-flow__background-pattern",n,r])})}function yhe({radius:t,className:e}){return g.jsx("circle",{cx:t,cy:t,r:t,className:Mn(["react-flow__background-pattern","dots",e])})}var ba;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(ba||(ba={}));const bhe={[ba.Dots]:1,[ba.Lines]:1,[ba.Cross]:6},vhe=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function YH({id:t,variant:e=ba.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:f}){const p=M.useRef(null),{transform:m,patternId:b}=ct(vhe,nn),v=r||bhe[e],w=e===ba.Dots,S=e===ba.Cross,k=Array.isArray(n)?n:[n,n],T=[k[0]*m[2]||1,k[1]*m[2]||1],E=v*m[2],N=Array.isArray(s)?s:[s,s],A=S?[E,E]:T,_=[N[0]*m[2]||1+A[0]/2,N[1]*m[2]||1+A[1]/2],j=`${b}${t||""}`;return g.jsxs("svg",{className:Mn(["react-flow__background",d]),style:{...u,...r1,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[g.jsx("pattern",{id:j,x:m[0]%T[0],y:m[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:w?g.jsx(yhe,{radius:E/2,className:f}):g.jsx(ghe,{dimensions:A,lineWidth:i,variant:e,className:f})}),g.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${j})`})]})}YH.displayName="Background";const xhe=M.memo(YH);function whe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function She(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Che(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function khe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ehe(){return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function k0({children:t,className:e,...n}){return g.jsx("button",{type:"button",className:Mn(["react-flow__controls-button",e]),...n,children:t})}const Nhe=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom,ariaLabelConfig:t.ariaLabelConfig});function XH({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:f,position:p="bottom-left",orientation:m="vertical","aria-label":b}){const v=Wt(),{isInteractive:w,minZoomReached:S,maxZoomReached:k,ariaLabelConfig:T}=ct(Nhe,nn),{zoomIn:E,zoomOut:N,fitView:A}=sh(),_=()=>{E(),s?.()},j=()=>{N(),o?.()},R=()=>{A(i),l?.()},L=()=>{v.setState({nodesDraggable:!w,nodesConnectable:!w,elementsSelectable:!w}),u?.(!w)},P=m==="horizontal"?"horizontal":"vertical";return g.jsxs(n1,{className:Mn(["react-flow__controls",P,d]),position:p,style:t,"data-testid":"rf__controls","aria-label":b??T["controls.ariaLabel"],children:[e&&g.jsxs(g.Fragment,{children:[g.jsx(k0,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:k,children:g.jsx(whe,{})}),g.jsx(k0,{onClick:j,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:S,children:g.jsx(She,{})})]}),n&&g.jsx(k0,{className:"react-flow__controls-fitview",onClick:R,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:g.jsx(Che,{})}),r&&g.jsx(k0,{className:"react-flow__controls-interactive",onClick:L,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:w?g.jsx(Ehe,{}):g.jsx(khe,{})}),f]})}XH.displayName="Controls";const The=M.memo(XH);function Ahe({id:t,x:e,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:f,shapeRendering:p,selected:m,onClick:b}){const{background:v,backgroundColor:w}=s||{},S=o||v||w;return g.jsx("rect",{className:Mn(["react-flow__minimap-node",{selected:m},d]),x:e,y:n,rx:f,ry:f,width:r,height:i,style:{fill:S,stroke:l,strokeWidth:u},shapeRendering:p,onClick:b?k=>b(k,t):void 0})}const Mhe=M.memo(Ahe),_he=t=>t.nodes.map(e=>e.id),Ob=t=>t instanceof Function?t:()=>t;function Dhe({nodeStrokeColor:t,nodeColor:e,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Mhe,onClick:o}){const l=ct(_he,nn),u=Ob(e),d=Ob(t),f=Ob(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return g.jsx(g.Fragment,{children:l.map(m=>g.jsx(jhe,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:f,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function Rhe({id:t,nodeColorFunc:e,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:f,y:p,width:m,height:b}=ct(v=>{const{internals:w}=v.nodeLookup.get(t),S=w.userNode,{x:k,y:T}=w.positionAbsolute,{width:E,height:N}=go(S);return{node:S,x:k,y:T,width:E,height:N}},nn);return!d||d.hidden||!JV(d)?null:g.jsx(l,{x:f,y:p,width:m,height:b,style:d.style,selected:!!d.selected,className:r(d),color:e(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const jhe=M.memo(Rhe);var Ohe=M.memo(Dhe);const Lhe=200,Ihe=150,Phe=t=>!t.hidden,zhe=t=>{const e={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:e,boundingRect:t.nodeLookup.size>0?ZV(Dh(t.nodeLookup,{filter:Phe}),e):e,rfId:t.rfId,panZoom:t.panZoom,translateExtent:t.translateExtent,flowWidth:t.width,flowHeight:t.height,ariaLabelConfig:t.ariaLabelConfig}},Bhe="react-flow__minimap-desc";function ZH({style:t,className:e,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:f,maskStrokeWidth:p,position:m="bottom-right",onClick:b,onNodeClick:v,pannable:w=!1,zoomable:S=!1,ariaLabel:k,inversePan:T,zoomStep:E=1,offsetScale:N=5}){const A=Wt(),_=M.useRef(null),{boundingRect:j,viewBB:R,rfId:L,panZoom:P,translateExtent:F,flowWidth:V,flowHeight:q,ariaLabelConfig:I}=ct(zhe,nn),U=t?.width??Lhe,O=t?.height??Ihe,H=j.width/U,G=j.height/O,ee=Math.max(H,G),B=ee*U,W=ee*O,ie=N*ee,oe=j.x-(B-j.width)/2-ie,$=j.y-(W-j.height)/2-ie,Z=B+ie*2,te=W+ie*2,ce=`${Bhe}-${L}`,re=M.useRef(0),ye=M.useRef();re.current=ee,M.useEffect(()=>{if(_.current&&P)return ye.current=sde({domNode:_.current,panZoom:P,getTransform:()=>A.getState().transform,getViewScale:()=>re.current}),()=>{ye.current?.destroy()}},[P]),M.useEffect(()=>{ye.current?.update({translateExtent:F,width:V,height:q,inversePan:T,pannable:w,zoomStep:E,zoomable:S})},[w,S,T,E,F,V,q]);const Ce=b?Ne=>{const[Ee,Me]=ye.current?.pointer(Ne)||[0,0];b(Ne,{x:Ee,y:Me})}:void 0,De=v?M.useCallback((Ne,Ee)=>{const Me=A.getState().nodeLookup.get(Ee).internals.userNode;v(Ne,Me)},[]):void 0,Se=k??I["minimap.ariaLabel"];return g.jsx(n1,{position:m,style:{...t,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*ee:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Mn(["react-flow__minimap",e]),"data-testid":"rf__minimap",children:g.jsxs("svg",{width:U,height:O,viewBox:`${oe} ${$} ${Z} ${te}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ce,ref:_,onClick:Ce,children:[Se&&g.jsx("title",{id:ce,children:Se}),g.jsx(Ohe,{onClick:De,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),g.jsx("path",{className:"react-flow__minimap-mask",d:`M${oe-ie},${$-ie}h${Z+ie*2}v${te+ie*2}h${-Z-ie*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}ZH.displayName="MiniMap";const Vhe=M.memo(ZH),Hhe=t=>e=>t?`${Math.max(1/e.transform[2],1)}`:void 0,Fhe={[zl.Line]:"right",[zl.Handle]:"bottom-right"};function qhe({nodeId:t,position:e,variant:n=zl.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:m,autoScale:b=!0,shouldResize:v,onResizeStart:w,onResize:S,onResizeEnd:k}){const T=AH(),E=typeof t=="string"?t:T,N=Wt(),A=M.useRef(null),_=n===zl.Handle,j=ct(M.useCallback(Hhe(_&&b),[_,b]),nn),R=M.useRef(null),L=e??Fhe[n];M.useEffect(()=>{if(!(!A.current||!E))return R.current||(R.current=Cde({domNode:A.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:F,transform:V,snapGrid:q,snapToGrid:I,nodeOrigin:U,domNode:O}=N.getState();return{nodeLookup:F,transform:V,snapGrid:q,snapToGrid:I,nodeOrigin:U,paneDomNode:O}},onChange:(F,V)=>{const{triggerNodeChanges:q,nodeLookup:I,parentLookup:U,nodeOrigin:O}=N.getState(),H=[],G={x:F.x,y:F.y},ee=I.get(E);if(ee&&ee.expandParent&&ee.parentId){const B=ee.origin??O,W=F.width??ee.measured.width??0,ie=F.height??ee.measured.height??0,oe={id:ee.id,parentId:ee.parentId,rect:{width:W,height:ie,...QV({x:F.x??ee.position.x,y:F.y??ee.position.y},{width:W,height:ie},ee.parentId,I,B)}},$=IS([oe],I,U,O);H.push(...$),G.x=F.x?Math.max(B[0]*W,F.x):void 0,G.y=F.y?Math.max(B[1]*ie,F.y):void 0}if(G.x!==void 0&&G.y!==void 0){const B={id:E,type:"position",position:{...G}};H.push(B)}if(F.width!==void 0&&F.height!==void 0){const W={id:E,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:F.width,height:F.height}};H.push(W)}for(const B of V){const W={...B,type:"position"};H.push(W)}q(H)},onEnd:({width:F,height:V})=>{const q={id:E,type:"dimensions",resizing:!1,dimensions:{width:F,height:V}};N.getState().triggerNodeChanges([q])}})),R.current.update({controlPosition:L,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:f},keepAspectRatio:p,resizeDirection:m,onResizeStart:w,onResize:S,onResizeEnd:k,shouldResize:v}),()=>{R.current?.destroy()}},[L,l,u,d,f,p,w,S,k,v]);const P=L.split("-");return g.jsx("div",{className:Mn(["react-flow__resize-control","nodrag",...P,n,r]),ref:A,style:{...i,scale:j,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const aM=M.memo(qhe);function Uhe({nodeId:t,isVisible:e=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:f=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:m=!0,shouldResize:b,onResizeStart:v,onResize:w,onResizeEnd:S}){return e?g.jsxs(g.Fragment,{children:[gde.map(k=>g.jsx(aM,{className:i,style:s,nodeId:t,position:k,variant:zl.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:f,onResizeStart:v,keepAspectRatio:p,autoScale:m,shouldResize:b,onResize:w,onResizeEnd:S},k)),mde.map(k=>g.jsx(aM,{className:n,style:r,nodeId:t,position:k,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:f,onResizeStart:v,keepAspectRatio:p,autoScale:m,shouldResize:b,onResize:w,onResizeEnd:S},k))]}):null}function $he(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const Ghe=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function va(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let Bc=null;function JH(t={}){return Bc||(t.includeStyleProperties?(Bc=t.includeStyleProperties,Bc):(Bc=va(window.getComputedStyle(document.documentElement)),Bc))}function og(t,e){const r=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return r?parseFloat(r.replace("px","")):0}function Whe(t){const e=og(t,"border-left-width"),n=og(t,"border-right-width");return t.clientWidth+e+n}function Khe(t){const e=og(t,"border-top-width"),n=og(t,"border-bottom-width");return t.clientHeight+e+n}function QH(t,e={}){const n=e.width||Whe(t),r=e.height||Khe(t);return{width:n,height:r}}function Yhe(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const ii=16384;function Xhe(t){(t.width>ii||t.height>ii)&&(t.width>ii&&t.height>ii?t.width>t.height?(t.height*=ii/t.width,t.width=ii):(t.width*=ii/t.height,t.height=ii):t.width>ii?(t.height*=ii/t.width,t.width=ii):(t.width*=ii/t.height,t.height=ii))}function ag(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Zhe(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Jhe(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(t),Zhe(i)}const Vr=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||Vr(n,e)};function Qhe(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function epe(t,e){return JH(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function tpe(t,e,n,r){const i=`.${t}:${e}`,s=n.cssText?Qhe(n):epe(n,r);return document.createTextNode(`${i}{${s}}`)}function lM(t,e,n,r){const i=window.getComputedStyle(t,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=Ghe();try{e.className=`${e.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(tpe(o,n,i,r)),e.appendChild(l)}function npe(t,e,n){lM(t,e,":before",n),lM(t,e,":after",n)}const cM="application/font-woff",uM="image/jpeg",rpe={woff:cM,woff2:cM,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:uM,jpeg:uM,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ipe(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function zS(t){const e=ipe(t).toLowerCase();return rpe[e]||""}function spe(t){return t.split(/,/)[1]}function Bw(t){return t.search(/^(data:)/)!==-1}function ope(t,e){return`data:${e};base64,${t}`}async function eF(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const Lb={};function ape(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function BS(t,e,n){const r=ape(t,e,n.includeQueryParams);if(Lb[r]!=null)return Lb[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const s=await eF(t,n.fetchRequestInit,({res:o,result:l})=>(e||(e=o.headers.get("Content-Type")||""),spe(l)));i=ope(s,e)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${t}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Lb[r]=i,i}async function lpe(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ag(e)}async function cpe(t,e){if(t.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=t.clientWidth,s.height=t.clientHeight,o?.drawImage(t,0,0,s.width,s.height);const l=s.toDataURL();return ag(l)}const n=t.poster,r=zS(n),i=await BS(n,r,e);return ag(i)}async function upe(t,e){var n;try{if(!((n=t?.contentDocument)===null||n===void 0)&&n.body)return await s1(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function dpe(t,e){return Vr(t,HTMLCanvasElement)?lpe(t):Vr(t,HTMLVideoElement)?cpe(t,e):Vr(t,HTMLIFrameElement)?upe(t,e):t.cloneNode(tF(t))}const fpe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",tF=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function hpe(t,e,n){var r,i;if(tF(e))return e;let s=[];return fpe(t)&&t.assignedNodes?s=va(t.assignedNodes()):Vr(t,HTMLIFrameElement)&&(!((r=t.contentDocument)===null||r===void 0)&&r.body)?s=va(t.contentDocument.body.childNodes):s=va(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),s.length===0||Vr(t,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>s1(l,n)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function ppe(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):JH(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Vr(t,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&e.getAttribute("d")&&(o=`path(${e.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function mpe(t,e){Vr(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Vr(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function gpe(t,e){if(Vr(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function ype(t,e,n){return Vr(e,Element)&&(ppe(t,e,n),npe(t,e,n),mpe(t,e),gpe(t,e)),e}async function bpe(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=t.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await s1(d,e,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);t.appendChild(o)}return t}async function s1(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>dpe(r,e)).then(r=>hpe(t,r,e)).then(r=>ype(t,r,e)).then(r=>bpe(r,e))}const nF=/url\((['"]?)([^'"]+?)\1\)/g,vpe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,xpe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function wpe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function Spe(t){const e=[];return t.replace(nF,(n,r,i)=>(e.push(i),n)),e.filter(n=>!Bw(n))}async function Cpe(t,e,n,r,i){try{const s=n?$he(e,n):e,o=zS(e);let l;return i||(l=await BS(s,o,r)),t.replace(wpe(e),`$1${l}$3`)}catch{}return t}function kpe(t,{preferredFontFormat:e}){return e?t.replace(xpe,n=>{for(;;){const[r,,i]=vpe.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function rF(t){return t.search(nF)!==-1}async function iF(t,e,n){if(!rF(t))return t;const r=kpe(t,n);return Spe(r).reduce((s,o)=>s.then(l=>Cpe(l,o,e,n)),Promise.resolve(r))}async function Vc(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const s=await iF(i,null,n);return e.style.setProperty(t,s,e.style.getPropertyPriority(t)),!0}return!1}async function Epe(t,e){await Vc("background",t,e)||await Vc("background-image",t,e),await Vc("mask",t,e)||await Vc("-webkit-mask",t,e)||await Vc("mask-image",t,e)||await Vc("-webkit-mask-image",t,e)}async function Npe(t,e){const n=Vr(t,HTMLImageElement);if(!(n&&!Bw(t.src))&&!(Vr(t,SVGImageElement)&&!Bw(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await BS(r,zS(r),e);await new Promise((s,o)=>{t.onload=s,t.onerror=e.onImageErrorHandler?(...u)=>{try{s(e.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=t;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function Tpe(t,e){const r=va(t.childNodes).map(i=>sF(i,e));await Promise.all(r).then(()=>t)}async function sF(t,e){Vr(t,Element)&&(await Epe(t,e),await Npe(t,e),await Tpe(t,e))}function Ape(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const dM={};async function fM(t){let e=dM[t];if(e!=null)return e;const r=await(await fetch(t)).text();return e={url:t,cssText:r},dM[t]=e,e}async function hM(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,t.url).href),eF(l,e.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function pM(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;e.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;e.push(u[0])}return e}async function Mpe(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{va(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=fM(u).then(f=>hM(f,e)).then(f=>pM(f).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:p,error:m})}})).catch(f=>{console.error("Error loading remote css",f.toString())});r.push(d)}})}catch(s){const o=t.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(fM(i.href).then(l=>hM(l,e)).then(l=>pM(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{va(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function _pe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>rF(e.style.getPropertyValue("src")))}async function Dpe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=va(t.ownerDocument.styleSheets),r=await Mpe(n,e);return _pe(r)}function oF(t){return t.trim().replace(/["']/g,"")}function Rpe(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{e.add(oF(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(t),e}async function jpe(t,e){const n=await Dpe(t,e),r=Rpe(t);return(await Promise.all(n.filter(s=>r.has(oF(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return iF(s.cssText,o,e)}))).join(`
`)}async function Ope(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await jpe(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function aF(t,e={}){const{width:n,height:r}=QH(t,e),i=await s1(t,e,!0);return await Ope(i,e),await sF(i,e),Ape(i,e),await Jhe(i,n,r)}async function lF(t,e={}){const{width:n,height:r}=QH(t,e),i=await aF(t,e),s=await ag(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=e.pixelRatio||Yhe(),d=e.canvasWidth||n,f=e.canvasHeight||r;return o.width=d*u,o.height=f*u,e.skipAutoScale||Xhe(o),o.style.width=`${d}`,o.style.height=`${f}`,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Lpe(t,e={}){return(await lF(t,e)).toDataURL()}async function Ipe(t,e={}){return(await lF(t,e)).toDataURL("image/jpeg",e.quality||1)}function VS(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ib,mM;function Ppe(){if(mM)return Ib;mM=1;function t(){this.__data__=[],this.size=0}return Ib=t,Ib}var Pb,gM;function Lu(){if(gM)return Pb;gM=1;function t(e,n){return e===n||e!==e&&n!==n}return Pb=t,Pb}var zb,yM;function o1(){if(yM)return zb;yM=1;var t=Lu();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return zb=e,zb}var Bb,bM;function zpe(){if(bM)return Bb;bM=1;var t=o1(),e=Array.prototype,n=e.splice;function r(i){var s=this.__data__,o=t(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return Bb=r,Bb}var Vb,vM;function Bpe(){if(vM)return Vb;vM=1;var t=o1();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return Vb=e,Vb}var Hb,xM;function Vpe(){if(xM)return Hb;xM=1;var t=o1();function e(n){return t(this.__data__,n)>-1}return Hb=e,Hb}var Fb,wM;function Hpe(){if(wM)return Fb;wM=1;var t=o1();function e(n,r){var i=this.__data__,s=t(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Fb=e,Fb}var qb,SM;function a1(){if(SM)return qb;SM=1;var t=Ppe(),e=zpe(),n=Bpe(),r=Vpe(),i=Hpe();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,qb=s,qb}var Ub,CM;function Fpe(){if(CM)return Ub;CM=1;var t=a1();function e(){this.__data__=new t,this.size=0}return Ub=e,Ub}var $b,kM;function qpe(){if(kM)return $b;kM=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return $b=t,$b}var Gb,EM;function Upe(){if(EM)return Gb;EM=1;function t(e){return this.__data__.get(e)}return Gb=t,Gb}var Wb,NM;function $pe(){if(NM)return Wb;NM=1;function t(e){return this.__data__.has(e)}return Wb=t,Wb}var Kb,TM;function cF(){if(TM)return Kb;TM=1;var t=typeof Qp=="object"&&Qp&&Qp.Object===Object&&Qp;return Kb=t,Kb}var Yb,AM;function Qi(){if(AM)return Yb;AM=1;var t=cF(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return Yb=n,Yb}var Xb,MM;function Iu(){if(MM)return Xb;MM=1;var t=Qi(),e=t.Symbol;return Xb=e,Xb}var Zb,_M;function Gpe(){if(_M)return Zb;_M=1;var t=Iu(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var f=r.call(o);return d&&(l?o[i]=u:delete o[i]),f}return Zb=s,Zb}var Jb,DM;function Wpe(){if(DM)return Jb;DM=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return Jb=n,Jb}var Qb,RM;function Kl(){if(RM)return Qb;RM=1;var t=Iu(),e=Gpe(),n=Wpe(),r="[object Null]",i="[object Undefined]",s=t?t.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?e(l):n(l)}return Qb=o,Qb}var ev,jM;function Oi(){if(jM)return ev;jM=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return ev=t,ev}var tv,OM;function Oh(){if(OM)return tv;OM=1;var t=Kl(),e=Oi(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==r||u==i||u==n||u==s}return tv=o,tv}var nv,LM;function Kpe(){if(LM)return nv;LM=1;var t=Qi(),e=t["__core-js_shared__"];return nv=e,nv}var rv,IM;function Ype(){if(IM)return rv;IM=1;var t=Kpe(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return rv=n,rv}var iv,PM;function uF(){if(PM)return iv;PM=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return iv=n,iv}var sv,zM;function Xpe(){if(zM)return sv;zM=1;var t=Oh(),e=Ype(),n=Oi(),r=uF(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,f=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||e(m))return!1;var b=t(m)?f:s;return b.test(r(m))}return sv=p,sv}var ov,BM;function Zpe(){if(BM)return ov;BM=1;function t(e,n){return e?.[n]}return ov=t,ov}var av,VM;function Yl(){if(VM)return av;VM=1;var t=Xpe(),e=Zpe();function n(r,i){var s=e(r,i);return t(s)?s:void 0}return av=n,av}var lv,HM;function HS(){if(HM)return lv;HM=1;var t=Yl(),e=Qi(),n=t(e,"Map");return lv=n,lv}var cv,FM;function l1(){if(FM)return cv;FM=1;var t=Yl(),e=t(Object,"create");return cv=e,cv}var uv,qM;function Jpe(){if(qM)return uv;qM=1;var t=l1();function e(){this.__data__=t?t(null):{},this.size=0}return uv=e,uv}var dv,UM;function Qpe(){if(UM)return dv;UM=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return dv=t,dv}var fv,$M;function e0e(){if($M)return fv;$M=1;var t=l1(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(t){var l=o[s];return l===e?void 0:l}return r.call(o,s)?o[s]:void 0}return fv=i,fv}var hv,GM;function t0e(){if(GM)return hv;GM=1;var t=l1(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var s=this.__data__;return t?s[i]!==void 0:n.call(s,i)}return hv=r,hv}var pv,WM;function n0e(){if(WM)return pv;WM=1;var t=l1(),e="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=t&&i===void 0?e:i,this}return pv=n,pv}var mv,KM;function r0e(){if(KM)return mv;KM=1;var t=Jpe(),e=Qpe(),n=e0e(),r=t0e(),i=n0e();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,mv=s,mv}var gv,YM;function i0e(){if(YM)return gv;YM=1;var t=r0e(),e=a1(),n=HS();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return gv=r,gv}var yv,XM;function s0e(){if(XM)return yv;XM=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return yv=t,yv}var bv,ZM;function c1(){if(ZM)return bv;ZM=1;var t=s0e();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return bv=e,bv}var vv,JM;function o0e(){if(JM)return vv;JM=1;var t=c1();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return vv=e,vv}var xv,QM;function a0e(){if(QM)return xv;QM=1;var t=c1();function e(n){return t(this,n).get(n)}return xv=e,xv}var wv,e_;function l0e(){if(e_)return wv;e_=1;var t=c1();function e(n){return t(this,n).has(n)}return wv=e,wv}var Sv,t_;function c0e(){if(t_)return Sv;t_=1;var t=c1();function e(n,r){var i=t(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Sv=e,Sv}var Cv,n_;function FS(){if(n_)return Cv;n_=1;var t=i0e(),e=o0e(),n=a0e(),r=l0e(),i=c0e();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=t,s.prototype.delete=e,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Cv=s,Cv}var kv,r_;function u0e(){if(r_)return kv;r_=1;var t=a1(),e=HS(),n=FS(),r=200;function i(s,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return kv=i,kv}var Ev,i_;function u1(){if(i_)return Ev;i_=1;var t=a1(),e=Fpe(),n=qpe(),r=Upe(),i=$pe(),s=u0e();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Ev=o,Ev}var Nv,s_;function qS(){if(s_)return Nv;s_=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Nv=t,Nv}var Tv,o_;function dF(){if(o_)return Tv;o_=1;var t=Yl(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Tv=e,Tv}var Av,a_;function d1(){if(a_)return Av;a_=1;var t=dF();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Av=e,Av}var Mv,l_;function f1(){if(l_)return Mv;l_=1;var t=d1(),e=Lu(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&e(u,l))||l===void 0&&!(o in s))&&t(s,o,l)}return Mv=i,Mv}var _v,c_;function Lh(){if(c_)return _v;c_=1;var t=f1(),e=d1();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var f=i[u],p=o?o(s[f],r[f],f,s,r):void 0;p===void 0&&(p=r[f]),l?e(s,f,p):t(s,f,p)}return s}return _v=n,_v}var Dv,u_;function d0e(){if(u_)return Dv;u_=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return Dv=t,Dv}var Rv,d_;function js(){if(d_)return Rv;d_=1;function t(e){return e!=null&&typeof e=="object"}return Rv=t,Rv}var jv,f_;function f0e(){if(f_)return jv;f_=1;var t=Kl(),e=js(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return jv=r,jv}var Ov,h_;function Ih(){if(h_)return Ov;h_=1;var t=f0e(),e=js(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Ov=s,Ov}var Lv,p_;function _n(){if(p_)return Lv;p_=1;var t=Array.isArray;return Lv=t,Lv}var of={exports:{}},Iv,m_;function h0e(){if(m_)return Iv;m_=1;function t(){return!1}return Iv=t,Iv}of.exports;var g_;function Pu(){return g_||(g_=1,(function(t,e){var n=Qi(),r=h0e(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;t.exports=d})(of,of.exports)),of.exports}var Pv,y_;function h1(){if(y_)return Pv;y_=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??t,!!i&&(s=="number"||s!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return Pv=n,Pv}var zv,b_;function US(){if(b_)return zv;b_=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return zv=e,zv}var Bv,v_;function p0e(){if(v_)return Bv;v_=1;var t=Kl(),e=US(),n=js(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",m="[object RegExp]",b="[object Set]",v="[object String]",w="[object WeakMap]",S="[object ArrayBuffer]",k="[object DataView]",T="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",j="[object Uint8Array]",R="[object Uint8ClampedArray]",L="[object Uint16Array]",P="[object Uint32Array]",F={};F[T]=F[E]=F[N]=F[A]=F[_]=F[j]=F[R]=F[L]=F[P]=!0,F[r]=F[i]=F[S]=F[s]=F[k]=F[o]=F[l]=F[u]=F[d]=F[f]=F[p]=F[m]=F[b]=F[v]=F[w]=!1;function V(q){return n(q)&&e(q.length)&&!!F[t(q)]}return Bv=V,Bv}var Vv,x_;function p1(){if(x_)return Vv;x_=1;function t(e){return function(n){return e(n)}}return Vv=t,Vv}var af={exports:{}};af.exports;var w_;function $S(){return w_||(w_=1,(function(t,e){var n=cF(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();t.exports=l})(af,af.exports)),af.exports}var Hv,S_;function Ph(){if(S_)return Hv;S_=1;var t=p0e(),e=p1(),n=$S(),r=n&&n.isTypedArray,i=r?e(r):t;return Hv=i,Hv}var Fv,C_;function fF(){if(C_)return Fv;C_=1;var t=d0e(),e=Ih(),n=_n(),r=Pu(),i=h1(),s=Ph(),o=Object.prototype,l=o.hasOwnProperty;function u(d,f){var p=n(d),m=!p&&e(d),b=!p&&!m&&r(d),v=!p&&!m&&!b&&s(d),w=p||m||b||v,S=w?t(d.length,String):[],k=S.length;for(var T in d)(f||l.call(d,T))&&!(w&&(T=="length"||b&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,k)))&&S.push(T);return S}return Fv=u,Fv}var qv,k_;function m1(){if(k_)return qv;k_=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return qv=e,qv}var Uv,E_;function hF(){if(E_)return Uv;E_=1;function t(e,n){return function(r){return e(n(r))}}return Uv=t,Uv}var $v,N_;function m0e(){if(N_)return $v;N_=1;var t=hF(),e=t(Object.keys,Object);return $v=e,$v}var Gv,T_;function GS(){if(T_)return Gv;T_=1;var t=m1(),e=m0e(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!t(s))return e(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return Gv=i,Gv}var Wv,A_;function yo(){if(A_)return Wv;A_=1;var t=Oh(),e=US();function n(r){return r!=null&&e(r.length)&&!t(r)}return Wv=n,Wv}var Kv,M_;function ja(){if(M_)return Kv;M_=1;var t=fF(),e=GS(),n=yo();function r(i){return n(i)?t(i):e(i)}return Kv=r,Kv}var Yv,__;function g0e(){if(__)return Yv;__=1;var t=Lh(),e=ja();function n(r,i){return r&&t(i,e(i),r)}return Yv=n,Yv}var Xv,D_;function y0e(){if(D_)return Xv;D_=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return Xv=t,Xv}var Zv,R_;function b0e(){if(R_)return Zv;R_=1;var t=Oi(),e=m1(),n=y0e(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!t(o))return n(o);var l=e(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return Zv=s,Zv}var Jv,j_;function Xl(){if(j_)return Jv;j_=1;var t=fF(),e=b0e(),n=yo();function r(i){return n(i)?t(i,!0):e(i)}return Jv=r,Jv}var Qv,O_;function v0e(){if(O_)return Qv;O_=1;var t=Lh(),e=Xl();function n(r,i){return r&&t(i,e(i),r)}return Qv=n,Qv}var lf={exports:{}};lf.exports;var L_;function pF(){return L_||(L_=1,(function(t,e){var n=Qi(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,f){if(f)return d.slice();var p=d.length,m=l?l(p):new d.constructor(p);return d.copy(m),m}t.exports=u})(lf,lf.exports)),lf.exports}var ex,I_;function mF(){if(I_)return ex;I_=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return ex=t,ex}var tx,P_;function gF(){if(P_)return tx;P_=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=0,o=[];++r<i;){var l=e[r];n(l,r,e)&&(o[s++]=l)}return o}return tx=t,tx}var nx,z_;function yF(){if(z_)return nx;z_=1;function t(){return[]}return nx=t,nx}var rx,B_;function WS(){if(B_)return rx;B_=1;var t=gF(),e=yF(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(l){return r.call(o,l)}))}:e;return rx=s,rx}var ix,V_;function x0e(){if(V_)return ix;V_=1;var t=Lh(),e=WS();function n(r,i){return t(r,e(r),i)}return ix=n,ix}var sx,H_;function KS(){if(H_)return sx;H_=1;function t(e,n){for(var r=-1,i=n.length,s=e.length;++r<i;)e[s+r]=n[r];return e}return sx=t,sx}var ox,F_;function g1(){if(F_)return ox;F_=1;var t=hF(),e=t(Object.getPrototypeOf,Object);return ox=e,ox}var ax,q_;function bF(){if(q_)return ax;q_=1;var t=KS(),e=g1(),n=WS(),r=yF(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)t(l,n(o)),o=e(o);return l}:r;return ax=s,ax}var lx,U_;function w0e(){if(U_)return lx;U_=1;var t=Lh(),e=bF();function n(r,i){return t(r,e(r),i)}return lx=n,lx}var cx,$_;function vF(){if($_)return cx;$_=1;var t=KS(),e=_n();function n(r,i,s){var o=i(r);return e(r)?o:t(o,s(r))}return cx=n,cx}var ux,G_;function xF(){if(G_)return ux;G_=1;var t=vF(),e=WS(),n=ja();function r(i){return t(i,n,e)}return ux=r,ux}var dx,W_;function S0e(){if(W_)return dx;W_=1;var t=vF(),e=bF(),n=Xl();function r(i){return t(i,n,e)}return dx=r,dx}var fx,K_;function C0e(){if(K_)return fx;K_=1;var t=Yl(),e=Qi(),n=t(e,"DataView");return fx=n,fx}var hx,Y_;function k0e(){if(Y_)return hx;Y_=1;var t=Yl(),e=Qi(),n=t(e,"Promise");return hx=n,hx}var px,X_;function wF(){if(X_)return px;X_=1;var t=Yl(),e=Qi(),n=t(e,"Set");return px=n,px}var mx,Z_;function E0e(){if(Z_)return mx;Z_=1;var t=Yl(),e=Qi(),n=t(e,"WeakMap");return mx=n,mx}var gx,J_;function zu(){if(J_)return gx;J_=1;var t=C0e(),e=HS(),n=k0e(),r=wF(),i=E0e(),s=Kl(),o=uF(),l="[object Map]",u="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",b=o(t),v=o(e),w=o(n),S=o(r),k=o(i),T=s;return(t&&T(new t(new ArrayBuffer(1)))!=m||e&&T(new e)!=l||n&&T(n.resolve())!=d||r&&T(new r)!=f||i&&T(new i)!=p)&&(T=function(E){var N=s(E),A=N==u?E.constructor:void 0,_=A?o(A):"";if(_)switch(_){case b:return m;case v:return l;case w:return d;case S:return f;case k:return p}return N}),gx=T,gx}var yx,Q_;function N0e(){if(Q_)return yx;Q_=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return yx=n,yx}var bx,eD;function SF(){if(eD)return bx;eD=1;var t=Qi(),e=t.Uint8Array;return bx=e,bx}var vx,tD;function YS(){if(tD)return vx;tD=1;var t=SF();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return vx=e,vx}var xx,nD;function T0e(){if(nD)return xx;nD=1;var t=YS();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return xx=e,xx}var wx,rD;function A0e(){if(rD)return wx;rD=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return wx=e,wx}var Sx,iD;function M0e(){if(iD)return Sx;iD=1;var t=Iu(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Sx=r,Sx}var Cx,sD;function CF(){if(sD)return Cx;sD=1;var t=YS();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Cx=e,Cx}var kx,oD;function _0e(){if(oD)return kx;oD=1;var t=YS(),e=T0e(),n=A0e(),r=M0e(),i=CF(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",f="[object Set]",p="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",v="[object DataView]",w="[object Float32Array]",S="[object Float64Array]",k="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",j="[object Uint32Array]";function R(L,P,F){var V=L.constructor;switch(P){case b:return t(L);case s:case o:return new V(+L);case v:return e(L,F);case w:case S:case k:case T:case E:case N:case A:case _:case j:return i(L,F);case l:return new V;case u:case p:return new V(L);case d:return n(L);case f:return new V;case m:return r(L)}}return kx=R,kx}var Ex,aD;function kF(){if(aD)return Ex;aD=1;var t=Oi(),e=Object.create,n=(function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return Ex=n,Ex}var Nx,lD;function EF(){if(lD)return Nx;lD=1;var t=kF(),e=g1(),n=m1();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Nx=r,Nx}var Tx,cD;function D0e(){if(cD)return Tx;cD=1;var t=zu(),e=js(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return Tx=r,Tx}var Ax,uD;function R0e(){if(uD)return Ax;uD=1;var t=D0e(),e=p1(),n=$S(),r=n&&n.isMap,i=r?e(r):t;return Ax=i,Ax}var Mx,dD;function j0e(){if(dD)return Mx;dD=1;var t=zu(),e=js(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return Mx=r,Mx}var _x,fD;function O0e(){if(fD)return _x;fD=1;var t=j0e(),e=p1(),n=$S(),r=n&&n.isSet,i=r?e(r):t;return _x=i,_x}var Dx,hD;function NF(){if(hD)return Dx;hD=1;var t=u1(),e=qS(),n=f1(),r=g0e(),i=v0e(),s=pF(),o=mF(),l=x0e(),u=w0e(),d=xF(),f=S0e(),p=zu(),m=N0e(),b=_0e(),v=EF(),w=_n(),S=Pu(),k=R0e(),T=Oi(),E=O0e(),N=ja(),A=Xl(),_=1,j=2,R=4,L="[object Arguments]",P="[object Array]",F="[object Boolean]",V="[object Date]",q="[object Error]",I="[object Function]",U="[object GeneratorFunction]",O="[object Map]",H="[object Number]",G="[object Object]",ee="[object RegExp]",B="[object Set]",W="[object String]",ie="[object Symbol]",oe="[object WeakMap]",$="[object ArrayBuffer]",Z="[object DataView]",te="[object Float32Array]",ce="[object Float64Array]",re="[object Int8Array]",ye="[object Int16Array]",Ce="[object Int32Array]",De="[object Uint8Array]",Se="[object Uint8ClampedArray]",Ne="[object Uint16Array]",Ee="[object Uint32Array]",Me={};Me[L]=Me[P]=Me[$]=Me[Z]=Me[F]=Me[V]=Me[te]=Me[ce]=Me[re]=Me[ye]=Me[Ce]=Me[O]=Me[H]=Me[G]=Me[ee]=Me[B]=Me[W]=Me[ie]=Me[De]=Me[Se]=Me[Ne]=Me[Ee]=!0,Me[q]=Me[I]=Me[oe]=!1;function yt(Pe,vt,wt,Yt,gn,qt){var Mt,Dn=vt&_,yn=vt&j,zt=vt&R;if(wt&&(Mt=gn?wt(Pe,Yt,gn,qt):wt(Pe)),Mt!==void 0)return Mt;if(!T(Pe))return Pe;var ht=w(Pe);if(ht){if(Mt=m(Pe),!Dn)return o(Pe,Mt)}else{var _t=p(Pe),Dt=_t==I||_t==U;if(S(Pe))return s(Pe,Dn);if(_t==G||_t==L||Dt&&!gn){if(Mt=yn||Dt?{}:v(Pe),!Dn)return yn?u(Pe,i(Mt,Pe)):l(Pe,r(Mt,Pe))}else{if(!Me[_t])return gn?Pe:{};Mt=b(Pe,_t,Dn)}}qt||(qt=new t);var vr=qt.get(Pe);if(vr)return vr;qt.set(Pe,Mt),E(Pe)?Pe.forEach(function(rn){Mt.add(yt(rn,vt,wt,rn,Pe,qt))}):k(Pe)&&Pe.forEach(function(rn,ze){Mt.set(ze,yt(rn,vt,wt,ze,Pe,qt))});var qr=zt?yn?f:d:yn?A:N,Ii=ht?void 0:qr(Pe);return e(Ii||Pe,function(rn,ze){Ii&&(ze=rn,rn=Pe[ze]),n(Mt,ze,yt(rn,vt,wt,ze,Pe,qt))}),Mt}return Dx=yt,Dx}var Rx,pD;function L0e(){if(pD)return Rx;pD=1;var t=NF(),e=4;function n(r){return t(r,e)}return Rx=n,Rx}var jx,mD;function XS(){if(mD)return jx;mD=1;function t(e){return function(){return e}}return jx=t,jx}var Ox,gD;function I0e(){if(gD)return Ox;gD=1;function t(e){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[e?u:++s];if(r(o[d],d,o)===!1)break}return n}}return Ox=t,Ox}var Lx,yD;function ZS(){if(yD)return Lx;yD=1;var t=I0e(),e=t();return Lx=e,Lx}var Ix,bD;function JS(){if(bD)return Ix;bD=1;var t=ZS(),e=ja();function n(r,i){return r&&t(r,i,e)}return Ix=n,Ix}var Px,vD;function P0e(){if(vD)return Px;vD=1;var t=yo();function e(n,r){return function(i,s){if(i==null)return i;if(!t(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return Px=e,Px}var zx,xD;function y1(){if(xD)return zx;xD=1;var t=JS(),e=P0e(),n=e(t);return zx=n,zx}var Bx,wD;function Zl(){if(wD)return Bx;wD=1;function t(e){return e}return Bx=t,Bx}var Vx,SD;function TF(){if(SD)return Vx;SD=1;var t=Zl();function e(n){return typeof n=="function"?n:t}return Vx=e,Vx}var Hx,CD;function AF(){if(CD)return Hx;CD=1;var t=qS(),e=y1(),n=TF(),r=_n();function i(s,o){var l=r(s)?t:e;return l(s,n(o))}return Hx=i,Hx}var Fx,kD;function MF(){return kD||(kD=1,Fx=AF()),Fx}var qx,ED;function z0e(){if(ED)return qx;ED=1;var t=y1();function e(n,r){var i=[];return t(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return qx=e,qx}var Ux,ND;function B0e(){if(ND)return Ux;ND=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return Ux=e,Ux}var $x,TD;function V0e(){if(TD)return $x;TD=1;function t(e){return this.__data__.has(e)}return $x=t,$x}var Gx,AD;function _F(){if(AD)return Gx;AD=1;var t=FS(),e=B0e(),n=V0e();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new t;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,Gx=r,Gx}var Wx,MD;function H0e(){if(MD)return Wx;MD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return Wx=t,Wx}var Kx,_D;function DF(){if(_D)return Kx;_D=1;function t(e,n){return e.has(n)}return Kx=t,Kx}var Yx,DD;function RF(){if(DD)return Yx;DD=1;var t=_F(),e=H0e(),n=DF(),r=1,i=2;function s(o,l,u,d,f,p){var m=u&r,b=o.length,v=l.length;if(b!=v&&!(m&&v>b))return!1;var w=p.get(o),S=p.get(l);if(w&&S)return w==l&&S==o;var k=-1,T=!0,E=u&i?new t:void 0;for(p.set(o,l),p.set(l,o);++k<b;){var N=o[k],A=l[k];if(d)var _=m?d(A,N,k,l,o,p):d(N,A,k,o,l,p);if(_!==void 0){if(_)continue;T=!1;break}if(E){if(!e(l,function(j,R){if(!n(E,R)&&(N===j||f(N,j,u,d,p)))return E.push(R)})){T=!1;break}}else if(!(N===A||f(N,A,u,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return Yx=s,Yx}var Xx,RD;function F0e(){if(RD)return Xx;RD=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,s){r[++n]=[s,i]}),r}return Xx=t,Xx}var Zx,jD;function QS(){if(jD)return Zx;jD=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return Zx=t,Zx}var Jx,OD;function q0e(){if(OD)return Jx;OD=1;var t=Iu(),e=SF(),n=Lu(),r=RF(),i=F0e(),s=QS(),o=1,l=2,u="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",m="[object Number]",b="[object RegExp]",v="[object Set]",w="[object String]",S="[object Symbol]",k="[object ArrayBuffer]",T="[object DataView]",E=t?t.prototype:void 0,N=E?E.valueOf:void 0;function A(_,j,R,L,P,F,V){switch(R){case T:if(_.byteLength!=j.byteLength||_.byteOffset!=j.byteOffset)return!1;_=_.buffer,j=j.buffer;case k:return!(_.byteLength!=j.byteLength||!F(new e(_),new e(j)));case u:case d:case m:return n(+_,+j);case f:return _.name==j.name&&_.message==j.message;case b:case w:return _==j+"";case p:var q=i;case v:var I=L&o;if(q||(q=s),_.size!=j.size&&!I)return!1;var U=V.get(_);if(U)return U==j;L|=l,V.set(_,j);var O=r(q(_),q(j),L,P,F,V);return V.delete(_),O;case S:if(N)return N.call(_)==N.call(j)}return!1}return Jx=A,Jx}var Qx,LD;function U0e(){if(LD)return Qx;LD=1;var t=xF(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,f){var p=l&e,m=t(s),b=m.length,v=t(o),w=v.length;if(b!=w&&!p)return!1;for(var S=b;S--;){var k=m[S];if(!(p?k in o:r.call(o,k)))return!1}var T=f.get(s),E=f.get(o);if(T&&E)return T==o&&E==s;var N=!0;f.set(s,o),f.set(o,s);for(var A=p;++S<b;){k=m[S];var _=s[k],j=o[k];if(u)var R=p?u(j,_,k,o,s,f):u(_,j,k,s,o,f);if(!(R===void 0?_===j||d(_,j,l,u,f):R)){N=!1;break}A||(A=k=="constructor")}if(N&&!A){var L=s.constructor,P=o.constructor;L!=P&&"constructor"in s&&"constructor"in o&&!(typeof L=="function"&&L instanceof L&&typeof P=="function"&&P instanceof P)&&(N=!1)}return f.delete(s),f.delete(o),N}return Qx=i,Qx}var e4,ID;function $0e(){if(ID)return e4;ID=1;var t=u1(),e=RF(),n=q0e(),r=U0e(),i=zu(),s=_n(),o=Pu(),l=Ph(),u=1,d="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype,b=m.hasOwnProperty;function v(w,S,k,T,E,N){var A=s(w),_=s(S),j=A?f:i(w),R=_?f:i(S);j=j==d?p:j,R=R==d?p:R;var L=j==p,P=R==p,F=j==R;if(F&&o(w)){if(!o(S))return!1;A=!0,L=!1}if(F&&!L)return N||(N=new t),A||l(w)?e(w,S,k,T,E,N):n(w,S,j,k,T,E,N);if(!(k&u)){var V=L&&b.call(w,"__wrapped__"),q=P&&b.call(S,"__wrapped__");if(V||q){var I=V?w.value():w,U=q?S.value():S;return N||(N=new t),E(I,U,k,T,N)}}return F?(N||(N=new t),r(w,S,k,T,E,N)):!1}return e4=v,e4}var t4,PD;function jF(){if(PD)return t4;PD=1;var t=$0e(),e=js();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,s,o,n,l)}return t4=n,t4}var n4,zD;function G0e(){if(zD)return n4;zD=1;var t=u1(),e=jF(),n=1,r=2;function i(s,o,l,u){var d=l.length,f=d,p=!u;if(s==null)return!f;for(s=Object(s);d--;){var m=l[d];if(p&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++d<f;){m=l[d];var b=m[0],v=s[b],w=m[1];if(p&&m[2]){if(v===void 0&&!(b in s))return!1}else{var S=new t;if(u)var k=u(v,w,b,s,o,S);if(!(k===void 0?e(w,v,n|r,u,S):k))return!1}}return!0}return n4=i,n4}var r4,BD;function OF(){if(BD)return r4;BD=1;var t=Oi();function e(n){return n===n&&!t(n)}return r4=e,r4}var i4,VD;function W0e(){if(VD)return i4;VD=1;var t=OF(),e=ja();function n(r){for(var i=e(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,t(l)]}return i}return i4=n,i4}var s4,HD;function LF(){if(HD)return s4;HD=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return s4=t,s4}var o4,FD;function K0e(){if(FD)return o4;FD=1;var t=G0e(),e=W0e(),n=LF();function r(i){var s=e(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||t(o,i,s)}}return o4=r,o4}var a4,qD;function Bu(){if(qD)return a4;qD=1;var t=Kl(),e=js(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return a4=r,a4}var l4,UD;function e7(){if(UD)return l4;UD=1;var t=_n(),e=Bu(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(t(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||e(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return l4=i,l4}var c4,$D;function Y0e(){if($D)return c4;$D=1;var t=FS(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||t),s}return n.Cache=t,c4=n,c4}var u4,GD;function X0e(){if(GD)return u4;GD=1;var t=Y0e(),e=500;function n(r){var i=t(r,function(o){return s.size===e&&s.clear(),o}),s=i.cache;return i}return u4=n,u4}var d4,WD;function Z0e(){if(WD)return d4;WD=1;var t=X0e(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(e,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return d4=r,d4}var f4,KD;function b1(){if(KD)return f4;KD=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,s=Array(i);++r<i;)s[r]=n(e[r],r,e);return s}return f4=t,f4}var h4,YD;function J0e(){if(YD)return h4;YD=1;var t=Iu(),e=b1(),n=_n(),r=Bu(),i=t?t.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return e(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return h4=o,h4}var p4,XD;function IF(){if(XD)return p4;XD=1;var t=J0e();function e(n){return n==null?"":t(n)}return p4=e,p4}var m4,ZD;function v1(){if(ZD)return m4;ZD=1;var t=_n(),e=e7(),n=Z0e(),r=IF();function i(s,o){return t(s)?s:e(s,o)?[s]:n(r(s))}return m4=i,m4}var g4,JD;function zh(){if(JD)return g4;JD=1;var t=Bu();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return g4=e,g4}var y4,QD;function x1(){if(QD)return y4;QD=1;var t=v1(),e=zh();function n(r,i){i=t(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[e(i[s++])];return s&&s==o?r:void 0}return y4=n,y4}var b4,eR;function Q0e(){if(eR)return b4;eR=1;var t=x1();function e(n,r,i){var s=n==null?void 0:t(n,r);return s===void 0?i:s}return b4=e,b4}var v4,tR;function eme(){if(tR)return v4;tR=1;function t(e,n){return e!=null&&n in Object(e)}return v4=t,v4}var x4,nR;function PF(){if(nR)return x4;nR=1;var t=v1(),e=Ih(),n=_n(),r=h1(),i=US(),s=zh();function o(l,u,d){u=t(u,l);for(var f=-1,p=u.length,m=!1;++f<p;){var b=s(u[f]);if(!(m=l!=null&&d(l,b)))break;l=l[b]}return m||++f!=p?m:(p=l==null?0:l.length,!!p&&i(p)&&r(b,p)&&(n(l)||e(l)))}return x4=o,x4}var w4,rR;function zF(){if(rR)return w4;rR=1;var t=eme(),e=PF();function n(r,i){return r!=null&&e(r,i,t)}return w4=n,w4}var S4,iR;function tme(){if(iR)return S4;iR=1;var t=jF(),e=Q0e(),n=zF(),r=e7(),i=OF(),s=LF(),o=zh(),l=1,u=2;function d(f,p){return r(f)&&i(p)?s(o(f),p):function(m){var b=e(m,f);return b===void 0&&b===p?n(m,f):t(p,b,l|u)}}return S4=d,S4}var C4,sR;function BF(){if(sR)return C4;sR=1;function t(e){return function(n){return n?.[e]}}return C4=t,C4}var k4,oR;function nme(){if(oR)return k4;oR=1;var t=x1();function e(n){return function(r){return t(r,n)}}return k4=e,k4}var E4,aR;function rme(){if(aR)return E4;aR=1;var t=BF(),e=nme(),n=e7(),r=zh();function i(s){return n(s)?t(r(s)):e(s)}return E4=i,E4}var N4,lR;function bo(){if(lR)return N4;lR=1;var t=K0e(),e=tme(),n=Zl(),r=_n(),i=rme();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return N4=s,N4}var T4,cR;function VF(){if(cR)return T4;cR=1;var t=gF(),e=z0e(),n=bo(),r=_n();function i(s,o){var l=r(s)?t:e;return l(s,n(o,3))}return T4=i,T4}var A4,uR;function ime(){if(uR)return A4;uR=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return A4=n,A4}var M4,dR;function HF(){if(dR)return M4;dR=1;var t=ime(),e=PF();function n(r,i){return r!=null&&e(r,i,t)}return M4=n,M4}var _4,fR;function sme(){if(fR)return _4;fR=1;var t=GS(),e=zu(),n=Ih(),r=_n(),i=yo(),s=Pu(),o=m1(),l=Ph(),u="[object Map]",d="[object Set]",f=Object.prototype,p=f.hasOwnProperty;function m(b){if(b==null)return!0;if(i(b)&&(r(b)||typeof b=="string"||typeof b.splice=="function"||s(b)||l(b)||n(b)))return!b.length;var v=e(b);if(v==u||v==d)return!b.size;if(o(b))return!t(b).length;for(var w in b)if(p.call(b,w))return!1;return!0}return _4=m,_4}var D4,hR;function FF(){if(hR)return D4;hR=1;function t(e){return e===void 0}return D4=t,D4}var R4,pR;function qF(){if(pR)return R4;pR=1;var t=y1(),e=yo();function n(r,i){var s=-1,o=e(r)?Array(r.length):[];return t(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return R4=n,R4}var j4,mR;function UF(){if(mR)return j4;mR=1;var t=b1(),e=bo(),n=qF(),r=_n();function i(s,o){var l=r(s)?t:n;return l(s,e(o,3))}return j4=i,j4}var O4,gR;function ome(){if(gR)return O4;gR=1;function t(e,n,r,i){var s=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++s]);++s<o;)r=n(r,e[s],s,e);return r}return O4=t,O4}var L4,yR;function ame(){if(yR)return L4;yR=1;function t(e,n,r,i,s){return s(e,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return L4=t,L4}var I4,bR;function $F(){if(bR)return I4;bR=1;var t=ome(),e=y1(),n=bo(),r=ame(),i=_n();function s(o,l,u){var d=i(o)?t:r,f=arguments.length<3;return d(o,n(l,4),u,f,e)}return I4=s,I4}var P4,vR;function lme(){if(vR)return P4;vR=1;var t=Kl(),e=_n(),n=js(),r="[object String]";function i(s){return typeof s=="string"||!e(s)&&n(s)&&t(s)==r}return P4=i,P4}var z4,xR;function cme(){if(xR)return z4;xR=1;var t=BF(),e=t("length");return z4=e,z4}var B4,wR;function ume(){if(wR)return B4;wR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+i+s+"]");function u(d){return l.test(d)}return B4=u,B4}var V4,SR;function dme(){if(SR)return V4;SR=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,s="\\ufe0e\\ufe0f",o="["+t+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",f="[^"+t+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",v=d+"?",w="["+s+"]?",S="(?:"+b+"(?:"+[f,p,m].join("|")+")"+w+v+")*",k=w+v+S,T="(?:"+[f+l+"?",l,p,m,o].join("|")+")",E=RegExp(u+"(?="+u+")|"+T+k,"g");function N(A){for(var _=E.lastIndex=0;E.test(A);)++_;return _}return V4=N,V4}var H4,CR;function fme(){if(CR)return H4;CR=1;var t=cme(),e=ume(),n=dme();function r(i){return e(i)?n(i):t(i)}return H4=r,H4}var F4,kR;function hme(){if(kR)return F4;kR=1;var t=GS(),e=zu(),n=yo(),r=lme(),i=fme(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=e(u);return d==s||d==o?u.size:t(u).length}return F4=l,F4}var q4,ER;function pme(){if(ER)return q4;ER=1;var t=qS(),e=kF(),n=JS(),r=bo(),i=g1(),s=_n(),o=Pu(),l=Oh(),u=Oi(),d=Ph();function f(p,m,b){var v=s(p),w=v||o(p)||d(p);if(m=r(m,4),b==null){var S=p&&p.constructor;w?b=v?new S:[]:u(p)?b=l(S)?e(i(p)):{}:b={}}return(w?t:n)(p,function(k,T,E){return m(b,k,T,E)}),b}return q4=f,q4}var U4,NR;function mme(){if(NR)return U4;NR=1;var t=Iu(),e=Ih(),n=_n(),r=t?t.isConcatSpreadable:void 0;function i(s){return n(s)||e(s)||!!(r&&s&&s[r])}return U4=i,U4}var $4,TR;function t7(){if(TR)return $4;TR=1;var t=KS(),e=mme();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=e),l||(l=[]);++u<d;){var f=r[u];i>0&&s(f)?i>1?n(f,i-1,s,o,l):t(l,f):o||(l[l.length]=f)}return l}return $4=n,$4}var G4,AR;function gme(){if(AR)return G4;AR=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return G4=t,G4}var W4,MR;function GF(){if(MR)return W4;MR=1;var t=gme(),e=Math.max;function n(r,i,s){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=e(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var f=Array(i+1);++l<i;)f[l]=o[l];return f[i]=s(d),t(r,this,f)}}return W4=n,W4}var K4,_R;function yme(){if(_R)return K4;_R=1;var t=XS(),e=dF(),n=Zl(),r=e?function(i,s){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(s),writable:!0})}:n;return K4=r,K4}var Y4,DR;function bme(){if(DR)return Y4;DR=1;var t=800,e=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=e-(l-o);if(o=l,u>0){if(++s>=t)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Y4=r,Y4}var X4,RR;function WF(){if(RR)return X4;RR=1;var t=yme(),e=bme(),n=e(t);return X4=n,X4}var Z4,jR;function w1(){if(jR)return Z4;jR=1;var t=Zl(),e=GF(),n=WF();function r(i,s){return n(e(i,s,t),i+"")}return Z4=r,Z4}var J4,OR;function KF(){if(OR)return J4;OR=1;function t(e,n,r,i){for(var s=e.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(e[o],o,e))return o;return-1}return J4=t,J4}var Q4,LR;function vme(){if(LR)return Q4;LR=1;function t(e){return e!==e}return Q4=t,Q4}var e3,IR;function xme(){if(IR)return e3;IR=1;function t(e,n,r){for(var i=r-1,s=e.length;++i<s;)if(e[i]===n)return i;return-1}return e3=t,e3}var t3,PR;function wme(){if(PR)return t3;PR=1;var t=KF(),e=vme(),n=xme();function r(i,s,o){return s===s?n(i,s,o):t(i,e,o)}return t3=r,t3}var n3,zR;function Sme(){if(zR)return n3;zR=1;var t=wme();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return n3=e,n3}var r3,BR;function Cme(){if(BR)return r3;BR=1;function t(e,n,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(n,e[i]))return!0;return!1}return r3=t,r3}var i3,VR;function kme(){if(VR)return i3;VR=1;function t(){}return i3=t,i3}var s3,HR;function Eme(){if(HR)return s3;HR=1;var t=wF(),e=kme(),n=QS(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(s){return new t(s)}:e;return s3=i,s3}var o3,FR;function Nme(){if(FR)return o3;FR=1;var t=_F(),e=Sme(),n=Cme(),r=DF(),i=Eme(),s=QS(),o=200;function l(u,d,f){var p=-1,m=e,b=u.length,v=!0,w=[],S=w;if(f)v=!1,m=n;else if(b>=o){var k=d?null:i(u);if(k)return s(k);v=!1,m=r,S=new t}else S=d?[]:w;e:for(;++p<b;){var T=u[p],E=d?d(T):T;if(T=f||T!==0?T:0,v&&E===E){for(var N=S.length;N--;)if(S[N]===E)continue e;d&&S.push(E),w.push(T)}else m(S,E,f)||(S!==w&&S.push(E),w.push(T))}return w}return o3=l,o3}var a3,qR;function YF(){if(qR)return a3;qR=1;var t=yo(),e=js();function n(r){return e(r)&&t(r)}return a3=n,a3}var l3,UR;function Tme(){if(UR)return l3;UR=1;var t=t7(),e=w1(),n=Nme(),r=YF(),i=e(function(s){return n(t(s,1,r,!0))});return l3=i,l3}var c3,$R;function Ame(){if($R)return c3;$R=1;var t=b1();function e(n,r){return t(r,function(i){return n[i]})}return c3=e,c3}var u3,GR;function XF(){if(GR)return u3;GR=1;var t=Ame(),e=ja();function n(r){return r==null?[]:t(r,e(r))}return u3=n,u3}var d3,WR;function Li(){if(WR)return d3;WR=1;var t;if(typeof VS=="function")try{t={clone:L0e(),constant:XS(),each:MF(),filter:VF(),has:HF(),isArray:_n(),isEmpty:sme(),isFunction:Oh(),isUndefined:FF(),keys:ja(),map:UF(),reduce:$F(),size:hme(),transform:pme(),union:Tme(),values:XF()}}catch{}return t||(t=window._),d3=t,d3}var f3,KR;function n7(){if(KR)return f3;KR=1;var t=Li();f3=i;var e="\0",n="\0",r="";function i(f){this._isDirected=t.has(f,"directed")?f.directed:!0,this._isMultigraph=t.has(f,"multigraph")?f.multigraph:!1,this._isCompound=t.has(f,"compound")?f.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(f){return this._label=f,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultNodeLabelFn=f,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var f=this;return t.filter(this.nodes(),function(p){return t.isEmpty(f._in[p])})},i.prototype.sinks=function(){var f=this;return t.filter(this.nodes(),function(p){return t.isEmpty(f._out[p])})},i.prototype.setNodes=function(f,p){var m=arguments,b=this;return t.each(f,function(v){m.length>1?b.setNode(v,p):b.setNode(v)}),this},i.prototype.setNode=function(f,p){return t.has(this._nodes,f)?(arguments.length>1&&(this._nodes[f]=p),this):(this._nodes[f]=arguments.length>1?p:this._defaultNodeLabelFn(f),this._isCompound&&(this._parent[f]=n,this._children[f]={},this._children[n][f]=!0),this._in[f]={},this._preds[f]={},this._out[f]={},this._sucs[f]={},++this._nodeCount,this)},i.prototype.node=function(f){return this._nodes[f]},i.prototype.hasNode=function(f){return t.has(this._nodes,f)},i.prototype.removeNode=function(f){var p=this;if(t.has(this._nodes,f)){var m=function(b){p.removeEdge(p._edgeObjs[b])};delete this._nodes[f],this._isCompound&&(this._removeFromParentsChildList(f),delete this._parent[f],t.each(this.children(f),function(b){p.setParent(b)}),delete this._children[f]),t.each(t.keys(this._in[f]),m),delete this._in[f],delete this._preds[f],t.each(t.keys(this._out[f]),m),delete this._out[f],delete this._sucs[f],--this._nodeCount}return this},i.prototype.setParent=function(f,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(p))p=n;else{p+="";for(var m=p;!t.isUndefined(m);m=this.parent(m))if(m===f)throw new Error("Setting "+p+" as parent of "+f+" would create a cycle");this.setNode(p)}return this.setNode(f),this._removeFromParentsChildList(f),this._parent[f]=p,this._children[p][f]=!0,this},i.prototype._removeFromParentsChildList=function(f){delete this._children[this._parent[f]][f]},i.prototype.parent=function(f){if(this._isCompound){var p=this._parent[f];if(p!==n)return p}},i.prototype.children=function(f){if(t.isUndefined(f)&&(f=n),this._isCompound){var p=this._children[f];if(p)return t.keys(p)}else{if(f===n)return this.nodes();if(this.hasNode(f))return[]}},i.prototype.predecessors=function(f){var p=this._preds[f];if(p)return t.keys(p)},i.prototype.successors=function(f){var p=this._sucs[f];if(p)return t.keys(p)},i.prototype.neighbors=function(f){var p=this.predecessors(f);if(p)return t.union(p,this.successors(f))},i.prototype.isLeaf=function(f){var p;return this.isDirected()?p=this.successors(f):p=this.neighbors(f),p.length===0},i.prototype.filterNodes=function(f){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;t.each(this._nodes,function(w,S){f(S)&&p.setNode(S,w)}),t.each(this._edgeObjs,function(w){p.hasNode(w.v)&&p.hasNode(w.w)&&p.setEdge(w,m.edge(w))});var b={};function v(w){var S=m.parent(w);return S===void 0||p.hasNode(S)?(b[w]=S,S):S in b?b[S]:v(S)}return this._isCompound&&t.each(p.nodes(),function(w){p.setParent(w,v(w))}),p},i.prototype.setDefaultEdgeLabel=function(f){return t.isFunction(f)||(f=t.constant(f)),this._defaultEdgeLabelFn=f,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(f,p){var m=this,b=arguments;return t.reduce(f,function(v,w){return b.length>1?m.setEdge(v,w,p):m.setEdge(v,w),w}),this},i.prototype.setEdge=function(){var f,p,m,b,v=!1,w=arguments[0];typeof w=="object"&&w!==null&&"v"in w?(f=w.v,p=w.w,m=w.name,arguments.length===2&&(b=arguments[1],v=!0)):(f=w,p=arguments[1],m=arguments[3],arguments.length>2&&(b=arguments[2],v=!0)),f=""+f,p=""+p,t.isUndefined(m)||(m=""+m);var S=l(this._isDirected,f,p,m);if(t.has(this._edgeLabels,S))return v&&(this._edgeLabels[S]=b),this;if(!t.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(f),this.setNode(p),this._edgeLabels[S]=v?b:this._defaultEdgeLabelFn(f,p,m);var k=u(this._isDirected,f,p,m);return f=k.v,p=k.w,Object.freeze(k),this._edgeObjs[S]=k,s(this._preds[p],f),s(this._sucs[f],p),this._in[p][S]=k,this._out[f][S]=k,this._edgeCount++,this},i.prototype.edge=function(f,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,m);return this._edgeLabels[b]},i.prototype.hasEdge=function(f,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,m);return t.has(this._edgeLabels,b)},i.prototype.removeEdge=function(f,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,f,p,m),v=this._edgeObjs[b];return v&&(f=v.v,p=v.w,delete this._edgeLabels[b],delete this._edgeObjs[b],o(this._preds[p],f),o(this._sucs[f],p),delete this._in[p][b],delete this._out[f][b],this._edgeCount--),this},i.prototype.inEdges=function(f,p){var m=this._in[f];if(m){var b=t.values(m);return p?t.filter(b,function(v){return v.v===p}):b}},i.prototype.outEdges=function(f,p){var m=this._out[f];if(m){var b=t.values(m);return p?t.filter(b,function(v){return v.w===p}):b}},i.prototype.nodeEdges=function(f,p){var m=this.inEdges(f,p);if(m)return m.concat(this.outEdges(f,p))};function s(f,p){f[p]?f[p]++:f[p]=1}function o(f,p){--f[p]||delete f[p]}function l(f,p,m,b){var v=""+p,w=""+m;if(!f&&v>w){var S=v;v=w,w=S}return v+r+w+r+(t.isUndefined(b)?e:b)}function u(f,p,m,b){var v=""+p,w=""+m;if(!f&&v>w){var S=v;v=w,w=S}var k={v,w};return b&&(k.name=b),k}function d(f,p){return l(f,p.v,p.w,p.name)}return f3}var h3,YR;function Mme(){return YR||(YR=1,h3="2.1.8"),h3}var p3,XR;function _me(){return XR||(XR=1,p3={Graph:n7(),version:Mme()}),p3}var m3,ZR;function Dme(){if(ZR)return m3;ZR=1;var t=Li(),e=n7();m3={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return t.isUndefined(o.graph())||(l.value=t.clone(o.graph())),l}function r(o){return t.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),f={v:l};return t.isUndefined(u)||(f.value=u),t.isUndefined(d)||(f.parent=d),f})}function i(o){return t.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return t.isUndefined(l.name)||(d.name=l.name),t.isUndefined(u)||(d.value=u),d})}function s(o){var l=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),t.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return m3}var g3,JR;function Rme(){if(JR)return g3;JR=1;var t=Li();g3=e;function e(n){var r={},i=[],s;function o(l){t.has(r,l)||(r[l]=!0,s.push(l),t.each(n.successors(l),o),t.each(n.predecessors(l),o))}return t.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return g3}var y3,QR;function ZF(){if(QR)return y3;QR=1;var t=Li();y3=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},e.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},y3}var b3,ej;function JF(){if(ej)return b3;ej=1;var t=Li(),e=ZF();b3=r;var n=t.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},f=new e,p,m,b=function(v){var w=v.v!==p?v.v:v.w,S=d[w],k=l(v),T=m.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+k);T<S.distance&&(S.distance=T,S.predecessor=p,f.decrease(w,T))};for(s.nodes().forEach(function(v){var w=v===o?0:Number.POSITIVE_INFINITY;d[v]={distance:w},f.add(v,w)});f.size()>0&&(p=f.removeMin(),m=d[p],m.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(b);return d}return b3}var v3,tj;function jme(){if(tj)return v3;tj=1;var t=JF(),e=Li();v3=n;function n(r,i,s){return e.transform(r.nodes(),function(o,l){o[l]=t(r,l,i,s)},{})}return v3}var x3,nj;function QF(){if(nj)return x3;nj=1;var t=Li();x3=e;function e(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(m){t.has(s,m)?s[m].onStack&&(d.lowlink=Math.min(d.lowlink,s[m].index)):(l(m),d.lowlink=Math.min(d.lowlink,s[m].lowlink))}),d.lowlink===d.index){var f=[],p;do p=i.pop(),s[p].onStack=!1,f.push(p);while(u!==p);o.push(f)}}return n.nodes().forEach(function(u){t.has(s,u)||l(u)}),o}return x3}var w3,rj;function Ome(){if(rj)return w3;rj=1;var t=Li(),e=QF();w3=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return w3}var S3,ij;function Lme(){if(ij)return S3;ij=1;var t=Li();S3=n;var e=t.constant(1);function n(i,s,o){return r(i,s||e,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(f){d!==f&&(l[d][f]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(f){var p=f.v===d?f.w:f.v,m=s(f);l[d][p]={distance:m,predecessor:d}})}),u.forEach(function(d){var f=l[d];u.forEach(function(p){var m=l[p];u.forEach(function(b){var v=m[d],w=f[b],S=m[b],k=v.distance+w.distance;k<S.distance&&(S.distance=k,S.predecessor=w.predecessor)})})}),l}return S3}var C3,sj;function eq(){if(sj)return C3;sj=1;var t=Li();C3=e,e.CycleException=n;function e(r){var i={},s={},o=[];function l(u){if(t.has(s,u))throw new n;t.has(i,u)||(s[u]=!0,i[u]=!0,t.each(r.predecessors(u),l),delete s[u],o.push(u))}if(t.each(r.sinks(),l),t.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,C3}var k3,oj;function Ime(){if(oj)return k3;oj=1;var t=eq();k3=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return k3}var E3,aj;function tq(){if(aj)return E3;aj=1;var t=Li();E3=e;function e(r,i,s){t.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return t.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){t.has(o,i)||(o[i]=!0,s||u.push(i),t.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return E3}var N3,lj;function Pme(){if(lj)return N3;lj=1;var t=tq();N3=e;function e(n,r){return t(n,r,"post")}return N3}var T3,cj;function zme(){if(cj)return T3;cj=1;var t=tq();T3=e;function e(n,r){return t(n,r,"pre")}return T3}var A3,uj;function Bme(){if(uj)return A3;uj=1;var t=Li(),e=n7(),n=ZF();A3=r;function r(i,s){var o=new e,l={},u=new n,d;function f(m){var b=m.v===d?m.w:m.v,v=u.priority(b);if(v!==void 0){var w=s(m);w<v&&(l[b]=d,u.decrease(b,w))}}if(i.nodeCount()===0)return o;t.each(i.nodes(),function(m){u.add(m,Number.POSITIVE_INFINITY),o.setNode(m)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),t.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(f)}return o}return A3}var M3,dj;function Vme(){return dj||(dj=1,M3={components:Rme(),dijkstra:JF(),dijkstraAll:jme(),findCycles:Ome(),floydWarshall:Lme(),isAcyclic:Ime(),postorder:Pme(),preorder:zme(),prim:Bme(),tarjan:QF(),topsort:eq()}),M3}var _3,fj;function Hme(){if(fj)return _3;fj=1;var t=_me();return _3={Graph:t.Graph,json:Dme(),alg:Vme(),version:t.version},_3}var D3,hj;function Zi(){if(hj)return D3;hj=1;var t;if(typeof VS=="function")try{t=Hme()}catch{}return t||(t=window.graphlib),D3=t,D3}var R3,pj;function Fme(){if(pj)return R3;pj=1;var t=NF(),e=1,n=4;function r(i){return t(i,e|n)}return R3=r,R3}var j3,mj;function S1(){if(mj)return j3;mj=1;var t=Lu(),e=yo(),n=h1(),r=Oi();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?e(l)&&n(o,l.length):u=="string"&&o in l)?t(l[o],s):!1}return j3=i,j3}var O3,gj;function qme(){if(gj)return O3;gj=1;var t=w1(),e=Lu(),n=S1(),r=Xl(),i=Object.prototype,s=i.hasOwnProperty,o=t(function(l,u){l=Object(l);var d=-1,f=u.length,p=f>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(f=1);++d<f;)for(var m=u[d],b=r(m),v=-1,w=b.length;++v<w;){var S=b[v],k=l[S];(k===void 0||e(k,i[S])&&!s.call(l,S))&&(l[S]=m[S])}return l});return O3=o,O3}var L3,yj;function Ume(){if(yj)return L3;yj=1;var t=bo(),e=yo(),n=ja();function r(i){return function(s,o,l){var u=Object(s);if(!e(s)){var d=t(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var f=i(s,o,l);return f>-1?u[d?s[f]:f]:void 0}}return L3=r,L3}var I3,bj;function $me(){if(bj)return I3;bj=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return I3=e,I3}var P3,vj;function Gme(){if(vj)return P3;vj=1;var t=$me(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return P3=n,P3}var z3,xj;function Wme(){if(xj)return z3;xj=1;var t=Gme(),e=Oi(),n=Bu(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(e(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=e(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=t(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return z3=u,z3}var B3,wj;function nq(){if(wj)return B3;wj=1;var t=Wme(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var s=i<0?-1:1;return s*n}return i===i?i:0}return B3=r,B3}var V3,Sj;function Kme(){if(Sj)return V3;Sj=1;var t=nq();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return V3=e,V3}var H3,Cj;function Yme(){if(Cj)return H3;Cj=1;var t=KF(),e=bo(),n=Kme(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),t(s,e(o,3),d)}return H3=i,H3}var F3,kj;function Xme(){if(kj)return F3;kj=1;var t=Ume(),e=Yme(),n=t(e);return F3=n,F3}var q3,Ej;function rq(){if(Ej)return q3;Ej=1;var t=t7();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return q3=e,q3}var U3,Nj;function Zme(){if(Nj)return U3;Nj=1;var t=ZS(),e=TF(),n=Xl();function r(i,s){return i==null?i:t(i,e(s),n)}return U3=r,U3}var $3,Tj;function Jme(){if(Tj)return $3;Tj=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return $3=t,$3}var G3,Aj;function Qme(){if(Aj)return G3;Aj=1;var t=d1(),e=JS(),n=bo();function r(i,s){var o={};return s=n(s,3),e(i,function(l,u,d){t(o,u,s(l,u,d))}),o}return G3=r,G3}var W3,Mj;function r7(){if(Mj)return W3;Mj=1;var t=Bu();function e(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!t(u):i(u,d)))var d=u,f=l}return f}return W3=e,W3}var K3,_j;function ege(){if(_j)return K3;_j=1;function t(e,n){return e>n}return K3=t,K3}var Y3,Dj;function tge(){if(Dj)return Y3;Dj=1;var t=r7(),e=ege(),n=Zl();function r(i){return i&&i.length?t(i,n,e):void 0}return Y3=r,Y3}var X3,Rj;function iq(){if(Rj)return X3;Rj=1;var t=d1(),e=Lu();function n(r,i,s){(s!==void 0&&!e(r[i],s)||s===void 0&&!(i in r))&&t(r,i,s)}return X3=n,X3}var Z3,jj;function nge(){if(jj)return Z3;jj=1;var t=Kl(),e=g1(),n=js(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(f){if(!n(f)||t(f)!=r)return!1;var p=e(f);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return Z3=d,Z3}var J3,Oj;function sq(){if(Oj)return J3;Oj=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return J3=t,J3}var Q3,Lj;function rge(){if(Lj)return Q3;Lj=1;var t=Lh(),e=Xl();function n(r){return t(r,e(r))}return Q3=n,Q3}var e5,Ij;function ige(){if(Ij)return e5;Ij=1;var t=iq(),e=pF(),n=CF(),r=mF(),i=EF(),s=Ih(),o=_n(),l=YF(),u=Pu(),d=Oh(),f=Oi(),p=nge(),m=Ph(),b=sq(),v=rge();function w(S,k,T,E,N,A,_){var j=b(S,T),R=b(k,T),L=_.get(R);if(L){t(S,T,L);return}var P=A?A(j,R,T+"",S,k,_):void 0,F=P===void 0;if(F){var V=o(R),q=!V&&u(R),I=!V&&!q&&m(R);P=R,V||q||I?o(j)?P=j:l(j)?P=r(j):q?(F=!1,P=e(R,!0)):I?(F=!1,P=n(R,!0)):P=[]:p(R)||s(R)?(P=j,s(j)?P=v(j):(!f(j)||d(j))&&(P=i(R))):F=!1}F&&(_.set(R,P),N(P,R,E,A,_),_.delete(R)),t(S,T,P)}return e5=w,e5}var t5,Pj;function sge(){if(Pj)return t5;Pj=1;var t=u1(),e=iq(),n=ZS(),r=ige(),i=Oi(),s=Xl(),o=sq();function l(u,d,f,p,m){u!==d&&n(d,function(b,v){if(m||(m=new t),i(b))r(u,d,v,f,l,p,m);else{var w=p?p(o(u,v),b,v+"",u,d,m):void 0;w===void 0&&(w=b),e(u,v,w)}},s)}return t5=l,t5}var n5,zj;function oge(){if(zj)return n5;zj=1;var t=w1(),e=S1();function n(r){return t(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&e(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var f=s[o];f&&r(i,f,o,u)}return i})}return n5=n,n5}var r5,Bj;function age(){if(Bj)return r5;Bj=1;var t=sge(),e=oge(),n=e(function(r,i,s){t(r,i,s)});return r5=n,r5}var i5,Vj;function oq(){if(Vj)return i5;Vj=1;function t(e,n){return e<n}return i5=t,i5}var s5,Hj;function lge(){if(Hj)return s5;Hj=1;var t=r7(),e=oq(),n=Zl();function r(i){return i&&i.length?t(i,n,e):void 0}return s5=r,s5}var o5,Fj;function cge(){if(Fj)return o5;Fj=1;var t=r7(),e=bo(),n=oq();function r(i,s){return i&&i.length?t(i,e(s,2),n):void 0}return o5=r,o5}var a5,qj;function uge(){if(qj)return a5;qj=1;var t=Qi(),e=function(){return t.Date.now()};return a5=e,a5}var l5,Uj;function dge(){if(Uj)return l5;Uj=1;var t=f1(),e=v1(),n=h1(),r=Oi(),i=zh();function s(o,l,u,d){if(!r(o))return o;l=e(l,o);for(var f=-1,p=l.length,m=p-1,b=o;b!=null&&++f<p;){var v=i(l[f]),w=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(f!=m){var S=b[v];w=d?d(S,v,b):void 0,w===void 0&&(w=r(S)?S:n(l[f+1])?[]:{})}t(b,v,w),b=b[v]}return o}return l5=s,l5}var c5,$j;function fge(){if($j)return c5;$j=1;var t=x1(),e=dge(),n=v1();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var f=s[l],p=t(i,f);o(p,f)&&e(d,n(f,i),p)}return d}return c5=r,c5}var u5,Gj;function hge(){if(Gj)return u5;Gj=1;var t=fge(),e=zF();function n(r,i){return t(r,i,function(s,o){return e(r,o)})}return u5=n,u5}var d5,Wj;function pge(){if(Wj)return d5;Wj=1;var t=rq(),e=GF(),n=WF();function r(i){return n(e(i,void 0,t),i+"")}return d5=r,d5}var f5,Kj;function mge(){if(Kj)return f5;Kj=1;var t=hge(),e=pge(),n=e(function(r,i){return r==null?{}:t(r,i)});return f5=n,f5}var h5,Yj;function gge(){if(Yj)return h5;Yj=1;var t=Math.ceil,e=Math.max;function n(r,i,s,o){for(var l=-1,u=e(t((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return h5=n,h5}var p5,Xj;function yge(){if(Xj)return p5;Xj=1;var t=gge(),e=S1(),n=nq();function r(i){return function(s,o,l){return l&&typeof l!="number"&&e(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),t(s,o,l,i)}}return p5=r,p5}var m5,Zj;function bge(){if(Zj)return m5;Zj=1;var t=yge(),e=t();return m5=e,m5}var g5,Jj;function vge(){if(Jj)return g5;Jj=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return g5=t,g5}var y5,Qj;function xge(){if(Qj)return y5;Qj=1;var t=Bu();function e(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=t(n),u=r!==void 0,d=r===null,f=r===r,p=t(r);if(!d&&!p&&!l&&n>r||l&&u&&f&&!d&&!p||s&&u&&f||!i&&f||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!f)return-1}return 0}return y5=e,y5}var b5,eO;function wge(){if(eO)return b5;eO=1;var t=xge();function e(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var f=t(o[s],l[s]);if(f){if(s>=d)return f;var p=i[s];return f*(p=="desc"?-1:1)}}return n.index-r.index}return b5=e,b5}var v5,tO;function Sge(){if(tO)return v5;tO=1;var t=b1(),e=x1(),n=bo(),r=qF(),i=vge(),s=p1(),o=wge(),l=Zl(),u=_n();function d(f,p,m){p.length?p=t(p,function(w){return u(w)?function(S){return e(S,w.length===1?w[0]:w)}:w}):p=[l];var b=-1;p=t(p,s(n));var v=r(f,function(w,S,k){var T=t(p,function(E){return E(w)});return{criteria:T,index:++b,value:w}});return i(v,function(w,S){return o(w,S,m)})}return v5=d,v5}var x5,nO;function Cge(){if(nO)return x5;nO=1;var t=t7(),e=Sge(),n=w1(),r=S1(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(s,t(o,1),[])});return x5=i,x5}var w5,rO;function kge(){if(rO)return w5;rO=1;var t=IF(),e=0;function n(r){var i=++e;return t(r)+i}return w5=n,w5}var S5,iO;function Ege(){if(iO)return S5;iO=1;function t(e,n,r){for(var i=-1,s=e.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,e[i],u)}return l}return S5=t,S5}var C5,sO;function Nge(){if(sO)return C5;sO=1;var t=f1(),e=Ege();function n(r,i){return e(r||[],i||[],t)}return C5=n,C5}var k5,oO;function Kt(){if(oO)return k5;oO=1;var t;if(typeof VS=="function")try{t={cloneDeep:Fme(),constant:XS(),defaults:qme(),each:MF(),filter:VF(),find:Xme(),flatten:rq(),forEach:AF(),forIn:Zme(),has:HF(),isUndefined:FF(),last:Jme(),map:UF(),mapValues:Qme(),max:tge(),merge:age(),min:lge(),minBy:cge(),now:uge(),pick:mge(),range:bge(),reduce:$F(),sortBy:Cge(),uniqueId:kge(),values:XF(),zipObject:Nge()}}catch{}return t||(t=window._),k5=t,k5}var E5,aO;function Tge(){if(aO)return E5;aO=1,E5=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return E5}var N5,lO;function Age(){if(lO)return N5;lO=1;var t=Kt(),e=Zi().Graph,n=Tge();N5=i;var r=t.constant(1);function i(d,f){if(d.nodeCount()<=1)return[];var p=l(d,f||r),m=s(p.graph,p.buckets,p.zeroIdx);return t.flatten(t.map(m,function(b){return d.outEdges(b.v,b.w)}),!0)}function s(d,f,p){for(var m=[],b=f[f.length-1],v=f[0],w;d.nodeCount();){for(;w=v.dequeue();)o(d,f,p,w);for(;w=b.dequeue();)o(d,f,p,w);if(d.nodeCount()){for(var S=f.length-2;S>0;--S)if(w=f[S].dequeue(),w){m=m.concat(o(d,f,p,w,!0));break}}}return m}function o(d,f,p,m,b){var v=b?[]:void 0;return t.forEach(d.inEdges(m.v),function(w){var S=d.edge(w),k=d.node(w.v);b&&v.push({v:w.v,w:w.w}),k.out-=S,u(f,p,k)}),t.forEach(d.outEdges(m.v),function(w){var S=d.edge(w),k=w.w,T=d.node(k);T.in-=S,u(f,p,T)}),d.removeNode(m.v),v}function l(d,f){var p=new e,m=0,b=0;t.forEach(d.nodes(),function(S){p.setNode(S,{v:S,in:0,out:0})}),t.forEach(d.edges(),function(S){var k=p.edge(S.v,S.w)||0,T=f(S),E=k+T;p.setEdge(S.v,S.w,E),b=Math.max(b,p.node(S.v).out+=T),m=Math.max(m,p.node(S.w).in+=T)});var v=t.range(b+m+3).map(function(){return new n}),w=m+1;return t.forEach(p.nodes(),function(S){u(v,w,p.node(S))}),{graph:p,buckets:v,zeroIdx:w}}function u(d,f,p){p.out?p.in?d[p.out-p.in+f].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return N5}var T5,cO;function Mge(){if(cO)return T5;cO=1;var t=Kt(),e=Age();T5={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?e(s,l(s)):r(s);t.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,t.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(f){t.has(u,f)||(u[f]=!0,l[f]=!0,t.forEach(s.outEdges(f),function(p){t.has(l,p.w)?o.push(p):d(p.w)}),delete l[f])}return t.forEach(s.nodes(),d),o}function i(s){t.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return T5}var A5,uO;function Hr(){if(uO)return A5;uO=1;var t=Kt(),e=Zi().Graph;A5={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:f,addBorderNode:p,maxRank:m,partition:b,time:v,notime:w};function n(S,k,T,E){var N;do N=t.uniqueId(E);while(S.hasNode(N));return T.dummy=k,S.setNode(N,T),N}function r(S){var k=new e().setGraph(S.graph());return t.forEach(S.nodes(),function(T){k.setNode(T,S.node(T))}),t.forEach(S.edges(),function(T){var E=k.edge(T.v,T.w)||{weight:0,minlen:1},N=S.edge(T);k.setEdge(T.v,T.w,{weight:E.weight+N.weight,minlen:Math.max(E.minlen,N.minlen)})}),k}function i(S){var k=new e({multigraph:S.isMultigraph()}).setGraph(S.graph());return t.forEach(S.nodes(),function(T){S.children(T).length||k.setNode(T,S.node(T))}),t.forEach(S.edges(),function(T){k.setEdge(T,S.edge(T))}),k}function s(S){var k=t.map(S.nodes(),function(T){var E={};return t.forEach(S.outEdges(T),function(N){E[N.w]=(E[N.w]||0)+S.edge(N).weight}),E});return t.zipObject(S.nodes(),k)}function o(S){var k=t.map(S.nodes(),function(T){var E={};return t.forEach(S.inEdges(T),function(N){E[N.v]=(E[N.v]||0)+S.edge(N).weight}),E});return t.zipObject(S.nodes(),k)}function l(S,k){var T=S.x,E=S.y,N=k.x-T,A=k.y-E,_=S.width/2,j=S.height/2;if(!N&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,L;return Math.abs(A)*_>Math.abs(N)*j?(A<0&&(j=-j),R=j*N/A,L=j):(N<0&&(_=-_),R=_,L=_*A/N),{x:T+R,y:E+L}}function u(S){var k=t.map(t.range(m(S)+1),function(){return[]});return t.forEach(S.nodes(),function(T){var E=S.node(T),N=E.rank;t.isUndefined(N)||(k[N][E.order]=T)}),k}function d(S){var k=t.min(t.map(S.nodes(),function(T){return S.node(T).rank}));t.forEach(S.nodes(),function(T){var E=S.node(T);t.has(E,"rank")&&(E.rank-=k)})}function f(S){var k=t.min(t.map(S.nodes(),function(A){return S.node(A).rank})),T=[];t.forEach(S.nodes(),function(A){var _=S.node(A).rank-k;T[_]||(T[_]=[]),T[_].push(A)});var E=0,N=S.graph().nodeRankFactor;t.forEach(T,function(A,_){t.isUndefined(A)&&_%N!==0?--E:E&&t.forEach(A,function(j){S.node(j).rank+=E})})}function p(S,k,T,E){var N={width:0,height:0};return arguments.length>=4&&(N.rank=T,N.order=E),n(S,"border",N,k)}function m(S){return t.max(t.map(S.nodes(),function(k){var T=S.node(k).rank;if(!t.isUndefined(T))return T}))}function b(S,k){var T={lhs:[],rhs:[]};return t.forEach(S,function(E){k(E)?T.lhs.push(E):T.rhs.push(E)}),T}function v(S,k){var T=t.now();try{return k()}finally{console.log(S+" time: "+(t.now()-T)+"ms")}}function w(S,k){return k()}return A5}var M5,dO;function _ge(){if(dO)return M5;dO=1;var t=Kt(),e=Hr();M5={run:n,undo:i};function n(s){s.graph().dummyChains=[],t.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,f=s.node(d).rank,p=o.name,m=s.edge(o),b=m.labelRank;if(f!==u+1){s.removeEdge(o);var v,w,S;for(S=0,++u;u<f;++S,++u)m.points=[],w={width:0,height:0,edgeLabel:m,edgeObj:o,rank:u},v=e.addDummyNode(s,"edge",w,"_d"),u===b&&(w.width=m.width,w.height=m.height,w.dummy="edge-label",w.labelpos=m.labelpos),s.setEdge(l,v,{weight:m.weight},p),S===0&&s.graph().dummyChains.push(v),l=v;s.setEdge(l,d,{weight:m.weight},p)}}function i(s){t.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return M5}var _5,fO;function lg(){if(fO)return _5;fO=1;var t=Kt();_5={longestPath:e,slack:n};function e(r){var i={};function s(o){var l=r.node(o);if(t.has(i,o))return l.rank;i[o]=!0;var u=t.min(t.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}t.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return _5}var D5,hO;function aq(){if(hO)return D5;hO=1;var t=Kt(),e=Zi().Graph,n=lg().slack;D5=r;function r(l){var u=new e({directed:!1}),d=l.nodes()[0],f=l.nodeCount();u.setNode(d,{});for(var p,m;i(u,l)<f;)p=s(u,l),m=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,m);return u}function i(l,u){function d(f){t.forEach(u.nodeEdges(f),function(p){var m=p.v,b=f===m?p.w:m;!l.hasNode(b)&&!n(u,p)&&(l.setNode(b,{}),l.setEdge(f,b,{}),d(b))})}return t.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return t.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){t.forEach(l.nodes(),function(f){u.node(f).rank+=d})}return D5}var R5,pO;function Dge(){if(pO)return R5;pO=1;var t=Kt(),e=aq(),n=lg().slack,r=lg().longestPath,i=Zi().alg.preorder,s=Zi().alg.postorder,o=Hr().simplify;R5=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=f,l.leaveEdge=b,l.enterEdge=v,l.exchangeEdges=w;function l(E){E=o(E),r(E);var N=e(E);p(N),u(N,E);for(var A,_;A=b(N);)_=v(N,E,A),w(N,E,A,_)}function u(E,N){var A=s(E,E.nodes());A=A.slice(0,A.length-1),t.forEach(A,function(_){d(E,N,_)})}function d(E,N,A){var _=E.node(A),j=_.parent;E.edge(A,j).cutvalue=f(E,N,A)}function f(E,N,A){var _=E.node(A),j=_.parent,R=!0,L=N.edge(A,j),P=0;return L||(R=!1,L=N.edge(j,A)),P=L.weight,t.forEach(N.nodeEdges(A),function(F){var V=F.v===A,q=V?F.w:F.v;if(q!==j){var I=V===R,U=N.edge(F).weight;if(P+=I?U:-U,k(E,A,q)){var O=E.edge(A,q).cutvalue;P+=I?-O:O}}}),P}function p(E,N){arguments.length<2&&(N=E.nodes()[0]),m(E,{},1,N)}function m(E,N,A,_,j){var R=A,L=E.node(_);return N[_]=!0,t.forEach(E.neighbors(_),function(P){t.has(N,P)||(A=m(E,N,A,P,_))}),L.low=R,L.lim=A++,j?L.parent=j:delete L.parent,A}function b(E){return t.find(E.edges(),function(N){return E.edge(N).cutvalue<0})}function v(E,N,A){var _=A.v,j=A.w;N.hasEdge(_,j)||(_=A.w,j=A.v);var R=E.node(_),L=E.node(j),P=R,F=!1;R.lim>L.lim&&(P=L,F=!0);var V=t.filter(N.edges(),function(q){return F===T(E,E.node(q.v),P)&&F!==T(E,E.node(q.w),P)});return t.minBy(V,function(q){return n(N,q)})}function w(E,N,A,_){var j=A.v,R=A.w;E.removeEdge(j,R),E.setEdge(_.v,_.w,{}),p(E),u(E,N),S(E,N)}function S(E,N){var A=t.find(E.nodes(),function(j){return!N.node(j).parent}),_=i(E,A);_=_.slice(1),t.forEach(_,function(j){var R=E.node(j).parent,L=N.edge(j,R),P=!1;L||(L=N.edge(R,j),P=!0),N.node(j).rank=N.node(R).rank+(P?L.minlen:-L.minlen)})}function k(E,N,A){return E.hasEdge(N,A)}function T(E,N,A){return A.low<=N.lim&&N.lim<=A.lim}return R5}var j5,mO;function Rge(){if(mO)return j5;mO=1;var t=lg(),e=t.longestPath,n=aq(),r=Dge();j5=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=e;function o(u){e(u),n(u)}function l(u){r(u)}return j5}var O5,gO;function jge(){if(gO)return O5;gO=1;var t=Kt();O5=e;function e(i){var s=r(i);t.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),f=d.path,p=d.lca,m=0,b=f[m],v=!0;o!==u.w;){if(l=i.node(o),v){for(;(b=f[m])!==p&&i.node(b).maxRank<l.rank;)m++;b===p&&(v=!1)}if(!v){for(;m<f.length-1&&i.node(b=f[m+1]).minRank<=l.rank;)m++;b=f[m]}i.setParent(o,b),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],f=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),m,b;m=o;do m=i.parent(m),u.push(m);while(m&&(s[m].low>f||p>s[m].lim));for(b=m,m=l;(m=i.parent(m))!==b;)d.push(m);return{path:u.concat(d.reverse()),lca:b}}function r(i){var s={},o=0;function l(u){var d=o;t.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return t.forEach(i.children(),l),s}return O5}var L5,yO;function Oge(){if(yO)return L5;yO=1;var t=Kt(),e=Hr();L5={run:n,cleanup:o};function n(l){var u=e.addDummyNode(l,"root",{},"_root"),d=i(l),f=t.max(t.values(d))-1,p=2*f+1;l.graph().nestingRoot=u,t.forEach(l.edges(),function(b){l.edge(b).minlen*=p});var m=s(l)+1;t.forEach(l.children(),function(b){r(l,u,p,m,f,d,b)}),l.graph().nodeRankFactor=p}function r(l,u,d,f,p,m,b){var v=l.children(b);if(!v.length){b!==u&&l.setEdge(u,b,{weight:0,minlen:d});return}var w=e.addBorderNode(l,"_bt"),S=e.addBorderNode(l,"_bb"),k=l.node(b);l.setParent(w,b),k.borderTop=w,l.setParent(S,b),k.borderBottom=S,t.forEach(v,function(T){r(l,u,d,f,p,m,T);var E=l.node(T),N=E.borderTop?E.borderTop:T,A=E.borderBottom?E.borderBottom:T,_=E.borderTop?f:2*f,j=N!==A?1:p-m[b]+1;l.setEdge(w,N,{weight:_,minlen:j,nestingEdge:!0}),l.setEdge(A,S,{weight:_,minlen:j,nestingEdge:!0})}),l.parent(b)||l.setEdge(u,w,{weight:0,minlen:p+m[b]})}function i(l){var u={};function d(f,p){var m=l.children(f);m&&m.length&&t.forEach(m,function(b){d(b,p+1)}),u[f]=p}return t.forEach(l.children(),function(f){d(f,1)}),u}function s(l){return t.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,t.forEach(l.edges(),function(d){var f=l.edge(d);f.nestingEdge&&l.removeEdge(d)})}return L5}var I5,bO;function Lge(){if(bO)return I5;bO=1;var t=Kt(),e=Hr();I5=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&t.forEach(l,s),t.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,f=u.maxRank+1;d<f;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}t.forEach(i.children(),s)}function r(i,s,o,l,u,d){var f={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],m=e.addDummyNode(i,"border",f,o);u[s][d]=m,i.setParent(m,l),p&&i.setEdge(p,m,{weight:1})}return I5}var P5,vO;function Ige(){if(vO)return P5;vO=1;var t=Kt();P5={adjust:e,undo:n};function e(d){var f=d.graph().rankdir.toLowerCase();(f==="lr"||f==="rl")&&r(d)}function n(d){var f=d.graph().rankdir.toLowerCase();(f==="bt"||f==="rl")&&s(d),(f==="lr"||f==="rl")&&(l(d),r(d))}function r(d){t.forEach(d.nodes(),function(f){i(d.node(f))}),t.forEach(d.edges(),function(f){i(d.edge(f))})}function i(d){var f=d.width;d.width=d.height,d.height=f}function s(d){t.forEach(d.nodes(),function(f){o(d.node(f))}),t.forEach(d.edges(),function(f){var p=d.edge(f);t.forEach(p.points,o),t.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){t.forEach(d.nodes(),function(f){u(d.node(f))}),t.forEach(d.edges(),function(f){var p=d.edge(f);t.forEach(p.points,u),t.has(p,"x")&&u(p)})}function u(d){var f=d.x;d.x=d.y,d.y=f}return P5}var z5,xO;function Pge(){if(xO)return z5;xO=1;var t=Kt();z5=e;function e(n){var r={},i=t.filter(n.nodes(),function(d){return!n.children(d).length}),s=t.max(t.map(i,function(d){return n.node(d).rank})),o=t.map(t.range(s+1),function(){return[]});function l(d){if(!t.has(r,d)){r[d]=!0;var f=n.node(d);o[f.rank].push(d),t.forEach(n.successors(d),l)}}var u=t.sortBy(i,function(d){return n.node(d).rank});return t.forEach(u,l),o}return z5}var B5,wO;function zge(){if(wO)return B5;wO=1;var t=Kt();B5=e;function e(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=t.zipObject(s,t.map(s,function(m,b){return b})),l=t.flatten(t.map(i,function(m){return t.sortBy(t.map(r.outEdges(m),function(b){return{pos:o[b.w],weight:r.edge(b).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var f=t.map(new Array(d),function(){return 0}),p=0;return t.forEach(l.forEach(function(m){var b=m.pos+u;f[b]+=m.weight;for(var v=0;b>0;)b%2&&(v+=f[b+1]),b=b-1>>1,f[b]+=m.weight;p+=m.weight*v})),p}return B5}var V5,SO;function Bge(){if(SO)return V5;SO=1;var t=Kt();V5=e;function e(n,r){return t.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=t.reduce(s,function(l,u){var d=n.edge(u),f=n.node(u.v);return{sum:l.sum+d.weight*f.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return V5}var H5,CO;function Vge(){if(CO)return H5;CO=1;var t=Kt();H5=e;function e(i,s){var o={};t.forEach(i,function(u,d){var f=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};t.isUndefined(u.barycenter)||(f.barycenter=u.barycenter,f.weight=u.weight)}),t.forEach(s.edges(),function(u){var d=o[u.v],f=o[u.w];!t.isUndefined(d)&&!t.isUndefined(f)&&(f.indegree++,d.out.push(o[u.w]))});var l=t.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(f){f.merged||(t.isUndefined(f.barycenter)||t.isUndefined(d.barycenter)||f.barycenter>=d.barycenter)&&r(d,f)}}function l(d){return function(f){f.in.push(d),--f.indegree===0&&i.push(f)}}for(;i.length;){var u=i.pop();s.push(u),t.forEach(u.in.reverse(),o(u)),t.forEach(u.out,l(u))}return t.map(t.filter(s,function(d){return!d.merged}),function(d){return t.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return H5}var F5,kO;function Hge(){if(kO)return F5;kO=1;var t=Kt(),e=Hr();F5=n;function n(s,o){var l=e.partition(s,function(w){return t.has(w,"barycenter")}),u=l.lhs,d=t.sortBy(l.rhs,function(w){return-w.i}),f=[],p=0,m=0,b=0;u.sort(i(!!o)),b=r(f,d,b),t.forEach(u,function(w){b+=w.vs.length,f.push(w.vs),p+=w.barycenter*w.weight,m+=w.weight,b=r(f,d,b)});var v={vs:t.flatten(f,!0)};return m&&(v.barycenter=p/m,v.weight=m),v}function r(s,o,l){for(var u;o.length&&(u=t.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return F5}var q5,EO;function Fge(){if(EO)return q5;EO=1;var t=Kt(),e=Bge(),n=Vge(),r=Hge();q5=i;function i(l,u,d,f){var p=l.children(u),m=l.node(u),b=m?m.borderLeft:void 0,v=m?m.borderRight:void 0,w={};b&&(p=t.filter(p,function(A){return A!==b&&A!==v}));var S=e(l,p);t.forEach(S,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,f);w[A.v]=_,t.has(_,"barycenter")&&o(A,_)}});var k=n(S,d);s(k,w);var T=r(k,f);if(b&&(T.vs=t.flatten([b,T.vs,v],!0),l.predecessors(b).length)){var E=l.node(l.predecessors(b)[0]),N=l.node(l.predecessors(v)[0]);t.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+E.order+N.order)/(T.weight+2),T.weight+=2}return T}function s(l,u){t.forEach(l,function(d){d.vs=t.flatten(d.vs.map(function(f){return u[f]?u[f].vs:f}),!0)})}function o(l,u){t.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return q5}var U5,NO;function qge(){if(NO)return U5;NO=1;var t=Kt(),e=Zi().Graph;U5=n;function n(i,s,o){var l=r(i),u=new e({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return t.forEach(i.nodes(),function(d){var f=i.node(d),p=i.parent(d);(f.rank===s||f.minRank<=s&&s<=f.maxRank)&&(u.setNode(d),u.setParent(d,p||l),t.forEach(i[o](d),function(m){var b=m.v===d?m.w:m.v,v=u.edge(b,d),w=t.isUndefined(v)?0:v.weight;u.setEdge(b,d,{weight:i.edge(m).weight+w})}),t.has(f,"minRank")&&u.setNode(d,{borderLeft:f.borderLeft[s],borderRight:f.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=t.uniqueId("_root")););return s}return U5}var $5,TO;function Uge(){if(TO)return $5;TO=1;var t=Kt();$5=e;function e(n,r,i){var s={},o;t.forEach(i,function(l){for(var u=n.parent(l),d,f;u;){if(d=n.parent(u),d?(f=s[d],s[d]=u):(f=o,o=u),f&&f!==u){r.setEdge(f,u);return}u=d}})}return $5}var G5,AO;function $ge(){if(AO)return G5;AO=1;var t=Kt(),e=Pge(),n=zge(),r=Fge(),i=qge(),s=Uge(),o=Zi().Graph,l=Hr();G5=u;function u(m){var b=l.maxRank(m),v=d(m,t.range(1,b+1),"inEdges"),w=d(m,t.range(b-1,-1,-1),"outEdges"),S=e(m);p(m,S);for(var k=Number.POSITIVE_INFINITY,T,E=0,N=0;N<4;++E,++N){f(E%2?v:w,E%4>=2),S=l.buildLayerMatrix(m);var A=n(m,S);A<k&&(N=0,T=t.cloneDeep(S),k=A)}p(m,T)}function d(m,b,v){return t.map(b,function(w){return i(m,w,v)})}function f(m,b){var v=new o;t.forEach(m,function(w){var S=w.graph().root,k=r(w,S,v,b);t.forEach(k.vs,function(T,E){w.node(T).order=E}),s(w,v,k.vs)})}function p(m,b){t.forEach(b,function(v){t.forEach(v,function(w,S){m.node(w).order=S})})}return G5}var W5,MO;function Gge(){if(MO)return W5;MO=1;var t=Kt(),e=Zi().Graph,n=Hr();W5={positionX:v,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:m,findSmallestWidthAlignment:p,balance:b};function r(k,T){var E={};function N(A,_){var j=0,R=0,L=A.length,P=t.last(_);return t.forEach(_,function(F,V){var q=s(k,F),I=q?k.node(q).order:L;(q||F===P)&&(t.forEach(_.slice(R,V+1),function(U){t.forEach(k.predecessors(U),function(O){var H=k.node(O),G=H.order;(G<j||I<G)&&!(H.dummy&&k.node(U).dummy)&&o(E,O,U)})}),R=V+1,j=I)}),_}return t.reduce(T,N),E}function i(k,T){var E={};function N(_,j,R,L,P){var F;t.forEach(t.range(j,R),function(V){F=_[V],k.node(F).dummy&&t.forEach(k.predecessors(F),function(q){var I=k.node(q);I.dummy&&(I.order<L||I.order>P)&&o(E,q,F)})})}function A(_,j){var R=-1,L,P=0;return t.forEach(j,function(F,V){if(k.node(F).dummy==="border"){var q=k.predecessors(F);q.length&&(L=k.node(q[0]).order,N(j,P,V,R,L),P=V,R=L)}N(j,P,j.length,L,_.length)}),j}return t.reduce(T,A),E}function s(k,T){if(k.node(T).dummy)return t.find(k.predecessors(T),function(E){return k.node(E).dummy})}function o(k,T,E){if(T>E){var N=T;T=E,E=N}var A=k[T];A||(k[T]=A={}),A[E]=!0}function l(k,T,E){if(T>E){var N=T;T=E,E=N}return t.has(k[T],E)}function u(k,T,E,N){var A={},_={},j={};return t.forEach(T,function(R){t.forEach(R,function(L,P){A[L]=L,_[L]=L,j[L]=P})}),t.forEach(T,function(R){var L=-1;t.forEach(R,function(P){var F=N(P);if(F.length){F=t.sortBy(F,function(O){return j[O]});for(var V=(F.length-1)/2,q=Math.floor(V),I=Math.ceil(V);q<=I;++q){var U=F[q];_[P]===P&&L<j[U]&&!l(E,P,U)&&(_[U]=P,_[P]=A[P]=A[U],L=j[U])}}})}),{root:A,align:_}}function d(k,T,E,N,A){var _={},j=f(k,T,E,A),R=A?"borderLeft":"borderRight";function L(V,q){for(var I=j.nodes(),U=I.pop(),O={};U;)O[U]?V(U):(O[U]=!0,I.push(U),I=I.concat(q(U))),U=I.pop()}function P(V){_[V]=j.inEdges(V).reduce(function(q,I){return Math.max(q,_[I.v]+j.edge(I))},0)}function F(V){var q=j.outEdges(V).reduce(function(U,O){return Math.min(U,_[O.w]-j.edge(O))},Number.POSITIVE_INFINITY),I=k.node(V);q!==Number.POSITIVE_INFINITY&&I.borderType!==R&&(_[V]=Math.max(_[V],q))}return L(P,j.predecessors.bind(j)),L(F,j.successors.bind(j)),t.forEach(N,function(V){_[V]=_[E[V]]}),_}function f(k,T,E,N){var A=new e,_=k.graph(),j=w(_.nodesep,_.edgesep,N);return t.forEach(T,function(R){var L;t.forEach(R,function(P){var F=E[P];if(A.setNode(F),L){var V=E[L],q=A.edge(V,F);A.setEdge(V,F,Math.max(j(k,P,L),q||0))}L=P})}),A}function p(k,T){return t.minBy(t.values(T),function(E){var N=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return t.forIn(E,function(_,j){var R=S(k,j)/2;N=Math.max(_+R,N),A=Math.min(_-R,A)}),N-A})}function m(k,T){var E=t.values(T),N=t.min(E),A=t.max(E);t.forEach(["u","d"],function(_){t.forEach(["l","r"],function(j){var R=_+j,L=k[R],P;if(L!==T){var F=t.values(L);P=j==="l"?N-t.min(F):A-t.max(F),P&&(k[R]=t.mapValues(L,function(V){return V+P}))}})})}function b(k,T){return t.mapValues(k.ul,function(E,N){if(T)return k[T.toLowerCase()][N];var A=t.sortBy(t.map(k,N));return(A[1]+A[2])/2})}function v(k){var T=n.buildLayerMatrix(k),E=t.merge(r(k,T),i(k,T)),N={},A;t.forEach(["u","d"],function(j){A=j==="u"?T:t.values(T).reverse(),t.forEach(["l","r"],function(R){R==="r"&&(A=t.map(A,function(V){return t.values(V).reverse()}));var L=(j==="u"?k.predecessors:k.successors).bind(k),P=u(k,A,E,L),F=d(k,A,P.root,P.align,R==="r");R==="r"&&(F=t.mapValues(F,function(V){return-V})),N[j+R]=F})});var _=p(k,N);return m(N,_),b(N,k.graph().align)}function w(k,T,E){return function(N,A,_){var j=N.node(A),R=N.node(_),L=0,P;if(L+=j.width/2,t.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":P=-j.width/2;break;case"r":P=j.width/2;break}if(P&&(L+=E?P:-P),P=0,L+=(j.dummy?T:k)/2,L+=(R.dummy?T:k)/2,L+=R.width/2,t.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":P=R.width/2;break;case"r":P=-R.width/2;break}return P&&(L+=E?P:-P),P=0,L}}function S(k,T){return k.node(T).width}return W5}var K5,_O;function Wge(){if(_O)return K5;_O=1;var t=Kt(),e=Hr(),n=Gge().positionX;K5=r;function r(s){s=e.asNonCompoundGraph(s),i(s),t.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=e.buildLayerMatrix(s),l=s.graph().ranksep,u=0;t.forEach(o,function(d){var f=t.max(t.map(d,function(p){return s.node(p).height}));t.forEach(d,function(p){s.node(p).y=u+f/2}),u+=f+l})}return K5}var Y5,DO;function Kge(){if(DO)return Y5;DO=1;var t=Kt(),e=Mge(),n=_ge(),r=Rge(),i=Hr().normalizeRanks,s=jge(),o=Hr().removeEmptyRanks,l=Oge(),u=Lge(),d=Ige(),f=$ge(),p=Wge(),m=Hr(),b=Zi().Graph;Y5=v;function v($,Z){var te=Z&&Z.debugTiming?m.time:m.notime;te("layout",function(){var ce=te("  buildLayoutGraph",function(){return L($)});te("  runLayout",function(){w(ce,te)}),te("  updateInputGraph",function(){S($,ce)})})}function w($,Z){Z("    makeSpaceForEdgeLabels",function(){P($)}),Z("    removeSelfEdges",function(){ee($)}),Z("    acyclic",function(){e.run($)}),Z("    nestingGraph.run",function(){l.run($)}),Z("    rank",function(){r(m.asNonCompoundGraph($))}),Z("    injectEdgeLabelProxies",function(){F($)}),Z("    removeEmptyRanks",function(){o($)}),Z("    nestingGraph.cleanup",function(){l.cleanup($)}),Z("    normalizeRanks",function(){i($)}),Z("    assignRankMinMax",function(){V($)}),Z("    removeEdgeLabelProxies",function(){q($)}),Z("    normalize.run",function(){n.run($)}),Z("    parentDummyChains",function(){s($)}),Z("    addBorderSegments",function(){u($)}),Z("    order",function(){f($)}),Z("    insertSelfEdges",function(){B($)}),Z("    adjustCoordinateSystem",function(){d.adjust($)}),Z("    position",function(){p($)}),Z("    positionSelfEdges",function(){W($)}),Z("    removeBorderNodes",function(){G($)}),Z("    normalize.undo",function(){n.undo($)}),Z("    fixupEdgeLabelCoords",function(){O($)}),Z("    undoCoordinateSystem",function(){d.undo($)}),Z("    translateGraph",function(){I($)}),Z("    assignNodeIntersects",function(){U($)}),Z("    reversePoints",function(){H($)}),Z("    acyclic.undo",function(){e.undo($)})}function S($,Z){t.forEach($.nodes(),function(te){var ce=$.node(te),re=Z.node(te);ce&&(ce.x=re.x,ce.y=re.y,Z.children(te).length&&(ce.width=re.width,ce.height=re.height))}),t.forEach($.edges(),function(te){var ce=$.edge(te),re=Z.edge(te);ce.points=re.points,t.has(re,"x")&&(ce.x=re.x,ce.y=re.y)}),$.graph().width=Z.graph().width,$.graph().height=Z.graph().height}var k=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],N=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function L($){var Z=new b({multigraph:!0,compound:!0}),te=oe($.graph());return Z.setGraph(t.merge({},T,ie(te,k),t.pick(te,E))),t.forEach($.nodes(),function(ce){var re=oe($.node(ce));Z.setNode(ce,t.defaults(ie(re,N),A)),Z.setParent(ce,$.parent(ce))}),t.forEach($.edges(),function(ce){var re=oe($.edge(ce));Z.setEdge(ce,t.merge({},j,ie(re,_),t.pick(re,R)))}),Z}function P($){var Z=$.graph();Z.ranksep/=2,t.forEach($.edges(),function(te){var ce=$.edge(te);ce.minlen*=2,ce.labelpos.toLowerCase()!=="c"&&(Z.rankdir==="TB"||Z.rankdir==="BT"?ce.width+=ce.labeloffset:ce.height+=ce.labeloffset)})}function F($){t.forEach($.edges(),function(Z){var te=$.edge(Z);if(te.width&&te.height){var ce=$.node(Z.v),re=$.node(Z.w),ye={rank:(re.rank-ce.rank)/2+ce.rank,e:Z};m.addDummyNode($,"edge-proxy",ye,"_ep")}})}function V($){var Z=0;t.forEach($.nodes(),function(te){var ce=$.node(te);ce.borderTop&&(ce.minRank=$.node(ce.borderTop).rank,ce.maxRank=$.node(ce.borderBottom).rank,Z=t.max(Z,ce.maxRank))}),$.graph().maxRank=Z}function q($){t.forEach($.nodes(),function(Z){var te=$.node(Z);te.dummy==="edge-proxy"&&($.edge(te.e).labelRank=te.rank,$.removeNode(Z))})}function I($){var Z=Number.POSITIVE_INFINITY,te=0,ce=Number.POSITIVE_INFINITY,re=0,ye=$.graph(),Ce=ye.marginx||0,De=ye.marginy||0;function Se(Ne){var Ee=Ne.x,Me=Ne.y,yt=Ne.width,Pe=Ne.height;Z=Math.min(Z,Ee-yt/2),te=Math.max(te,Ee+yt/2),ce=Math.min(ce,Me-Pe/2),re=Math.max(re,Me+Pe/2)}t.forEach($.nodes(),function(Ne){Se($.node(Ne))}),t.forEach($.edges(),function(Ne){var Ee=$.edge(Ne);t.has(Ee,"x")&&Se(Ee)}),Z-=Ce,ce-=De,t.forEach($.nodes(),function(Ne){var Ee=$.node(Ne);Ee.x-=Z,Ee.y-=ce}),t.forEach($.edges(),function(Ne){var Ee=$.edge(Ne);t.forEach(Ee.points,function(Me){Me.x-=Z,Me.y-=ce}),t.has(Ee,"x")&&(Ee.x-=Z),t.has(Ee,"y")&&(Ee.y-=ce)}),ye.width=te-Z+Ce,ye.height=re-ce+De}function U($){t.forEach($.edges(),function(Z){var te=$.edge(Z),ce=$.node(Z.v),re=$.node(Z.w),ye,Ce;te.points?(ye=te.points[0],Ce=te.points[te.points.length-1]):(te.points=[],ye=re,Ce=ce),te.points.unshift(m.intersectRect(ce,ye)),te.points.push(m.intersectRect(re,Ce))})}function O($){t.forEach($.edges(),function(Z){var te=$.edge(Z);if(t.has(te,"x"))switch((te.labelpos==="l"||te.labelpos==="r")&&(te.width-=te.labeloffset),te.labelpos){case"l":te.x-=te.width/2+te.labeloffset;break;case"r":te.x+=te.width/2+te.labeloffset;break}})}function H($){t.forEach($.edges(),function(Z){var te=$.edge(Z);te.reversed&&te.points.reverse()})}function G($){t.forEach($.nodes(),function(Z){if($.children(Z).length){var te=$.node(Z),ce=$.node(te.borderTop),re=$.node(te.borderBottom),ye=$.node(t.last(te.borderLeft)),Ce=$.node(t.last(te.borderRight));te.width=Math.abs(Ce.x-ye.x),te.height=Math.abs(re.y-ce.y),te.x=ye.x+te.width/2,te.y=ce.y+te.height/2}}),t.forEach($.nodes(),function(Z){$.node(Z).dummy==="border"&&$.removeNode(Z)})}function ee($){t.forEach($.edges(),function(Z){if(Z.v===Z.w){var te=$.node(Z.v);te.selfEdges||(te.selfEdges=[]),te.selfEdges.push({e:Z,label:$.edge(Z)}),$.removeEdge(Z)}})}function B($){var Z=m.buildLayerMatrix($);t.forEach(Z,function(te){var ce=0;t.forEach(te,function(re,ye){var Ce=$.node(re);Ce.order=ye+ce,t.forEach(Ce.selfEdges,function(De){m.addDummyNode($,"selfedge",{width:De.label.width,height:De.label.height,rank:Ce.rank,order:ye+ ++ce,e:De.e,label:De.label},"_se")}),delete Ce.selfEdges})})}function W($){t.forEach($.nodes(),function(Z){var te=$.node(Z);if(te.dummy==="selfedge"){var ce=$.node(te.e.v),re=ce.x+ce.width/2,ye=ce.y,Ce=te.x-re,De=ce.height/2;$.setEdge(te.e,te.label),$.removeNode(Z),te.label.points=[{x:re+2*Ce/3,y:ye-De},{x:re+5*Ce/6,y:ye-De},{x:re+Ce,y:ye},{x:re+5*Ce/6,y:ye+De},{x:re+2*Ce/3,y:ye+De}],te.label.x=te.x,te.label.y=te.y}})}function ie($,Z){return t.mapValues(t.pick($,Z),Number)}function oe($){var Z={};return t.forEach($,function(te,ce){Z[ce.toLowerCase()]=te}),Z}return Y5}var X5,RO;function Yge(){if(RO)return X5;RO=1;var t=Kt(),e=Hr(),n=Zi().Graph;X5={debugOrdering:r};function r(i){var s=e.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),t.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),t.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),t.reduce(l,function(f,p){return o.setEdge(f,p,{style:"invis"}),p})}),o}return X5}var Z5,jO;function Xge(){return jO||(jO=1,Z5="0.8.5"),Z5}var J5,OO;function Zge(){return OO||(OO=1,J5={graphlib:Zi(),layout:Kge(),debug:Yge(),util:{time:Hr().time,notime:Hr().notime},version:Xge()}),J5}var Jge=Zge();const E0=hh(Jge);function LO(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"},child:[]}]})(t)}function Qge(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M223.99908,224a32,32,0,1,0,32.00782,32A32.06431,32.06431,0,0,0,223.99908,224Zm214.172-96c-10.877-19.5-40.50979-50.75-116.27544-41.875C300.39168,34.875,267.63386,0,223.99908,0s-76.39066,34.875-97.89653,86.125C50.3369,77.375,20.706,108.5,9.82907,128-6.54984,157.375-5.17484,201.125,34.958,256-5.17484,310.875-6.54984,354.625,9.82907,384c29.13087,52.375,101.64652,43.625,116.27348,41.875C147.60842,477.125,180.36429,512,223.99908,512s76.3926-34.875,97.89652-86.125c14.62891,1.75,87.14456,10.5,116.27544-41.875C454.55,354.625,453.175,310.875,413.04017,256,453.175,201.125,454.55,157.375,438.171,128ZM63.33886,352c-4-7.25-.125-24.75,15.00391-48.25,6.87695,6.5,14.12891,12.875,21.88087,19.125,1.625,13.75,4,27.125,6.75,40.125C82.34472,363.875,67.09081,358.625,63.33886,352Zm36.88478-162.875c-7.752,6.25-15.00392,12.625-21.88087,19.125-15.12891-23.5-19.00392-41-15.00391-48.25,3.377-6.125,16.37891-11.5,37.88478-11.5,1.75,0,3.875.375,5.75.375C104.09864,162.25,101.84864,175.625,100.22364,189.125ZM223.99908,64c9.50195,0,22.25586,13.5,33.88282,37.25-11.252,3.75-22.50391,8-33.88282,12.875-11.377-4.875-22.62892-9.125-33.88283-12.875C201.74516,77.5,214.49712,64,223.99908,64Zm0,384c-9.502,0-22.25392-13.5-33.88283-37.25,11.25391-3.75,22.50587-8,33.88283-12.875C235.378,402.75,246.62994,407,257.8819,410.75,246.25494,434.5,233.501,448,223.99908,448Zm0-112a80,80,0,1,1,80-80A80.00023,80.00023,0,0,1,223.99908,336ZM384.6593,352c-3.625,6.625-19.00392,11.875-43.63479,11,2.752-13,5.127-26.375,6.752-40.125,7.75195-6.25,15.00391-12.625,21.87891-19.125C384.7843,327.25,388.6593,344.75,384.6593,352ZM369.65538,208.25c-6.875-6.5-14.127-12.875-21.87891-19.125-1.625-13.5-3.875-26.875-6.752-40.25,1.875,0,4.002-.375,5.752-.375,21.50391,0,34.50782,5.375,37.88283,11.5C388.6593,167.25,384.7843,184.75,369.65538,208.25Z"},child:[]}]})(t)}function e1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M256 336h-.02c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0C-2.06 328.75.02 320.33.02 336H0c0 44.18 57.31 80 128 80s128-35.82 128-80zM128 176l72 144H56l72-144zm511.98 160c0-16.18 1.34-8.73-85.05-181.51-17.65-35.29-68.19-35.36-85.87 0-87.12 174.26-85.04 165.84-85.04 181.51H384c0 44.18 57.31 80 128 80s128-35.82 128-80h-.02zM440 320l72-144 72 144H440zm88 128H352V153.25c23.51-10.29 41.16-31.48 46.39-57.25H528c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H383.64C369.04 12.68 346.09 0 320 0s-49.04 12.68-63.64 32H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h129.61c5.23 25.76 22.87 46.96 46.39 57.25V448H112c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function IO(t){return be({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z"},child:[]}]})(t)}function t1e(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"},child:[]}]})(t)}function PO(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(t)}function n1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M150.94 192h33.73c11.01 0 18.61-10.83 14.86-21.18-4.93-13.58-7.55-27.98-7.55-42.82s2.62-29.24 7.55-42.82C203.29 74.83 195.68 64 184.67 64h-33.73c-7.01 0-13.46 4.49-15.41 11.23C130.64 92.21 128 109.88 128 128c0 18.12 2.64 35.79 7.54 52.76 1.94 6.74 8.39 11.24 15.4 11.24zM89.92 23.34C95.56 12.72 87.97 0 75.96 0H40.63c-6.27 0-12.14 3.59-14.74 9.31C9.4 45.54 0 85.65 0 128c0 24.75 3.12 68.33 26.69 118.86 2.62 5.63 8.42 9.14 14.61 9.14h34.84c12.02 0 19.61-12.74 13.95-23.37-49.78-93.32-16.71-178.15-.17-209.29zM614.06 9.29C611.46 3.58 605.6 0 599.33 0h-35.42c-11.98 0-19.66 12.66-14.02 23.25 18.27 34.29 48.42 119.42.28 209.23-5.72 10.68 1.8 23.52 13.91 23.52h35.23c6.27 0 12.13-3.58 14.73-9.29C630.57 210.48 640 170.36 640 128s-9.42-82.48-25.94-118.71zM489.06 64h-33.73c-11.01 0-18.61 10.83-14.86 21.18 4.93 13.58 7.55 27.98 7.55 42.82s-2.62 29.24-7.55 42.82c-3.76 10.35 3.85 21.18 14.86 21.18h33.73c7.02 0 13.46-4.49 15.41-11.24 4.9-16.97 7.53-34.64 7.53-52.76 0-18.12-2.64-35.79-7.54-52.76-1.94-6.75-8.39-11.24-15.4-11.24zm-116.3 100.12c7.05-10.29 11.2-22.71 11.2-36.12 0-35.35-28.63-64-63.96-64-35.32 0-63.96 28.65-63.96 64 0 13.41 4.15 25.83 11.2 36.12l-130.5 313.41c-3.4 8.15.46 17.52 8.61 20.92l29.51 12.31c8.15 3.4 17.52-.46 20.91-8.61L244.96 384h150.07l49.2 118.15c3.4 8.16 12.76 12.01 20.91 8.61l29.51-12.31c8.15-3.4 12-12.77 8.61-20.92l-130.5-313.41zM271.62 320L320 203.81 368.38 320h-96.76z"},child:[]}]})(t)}function r1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function zO(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function i1e(t){return be({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function s1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M537.6 226.6c4.1-10.7 6.4-22.4 6.4-34.6 0-53-43-96-96-96-19.7 0-38.1 6-53.3 16.2C367 64.2 315.3 32 256 32c-88.4 0-160 71.6-160 160 0 2.7.1 5.4.2 8.1C40.2 219.8 0 273.2 0 336c0 79.5 64.5 144 144 144h368c70.7 0 128-57.3 128-128 0-61.9-44-113.6-102.4-125.4zM393.4 288H328v112c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V288h-65.4c-14.3 0-21.4-17.2-11.3-27.3l105.4-105.4c6.2-6.2 16.4-6.2 22.6 0l105.4 105.4c10.1 10.1 2.9 27.3-11.3 27.3z"},child:[]}]})(t)}function BO(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(t)}function o1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"},child:[]}]})(t)}function a1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z"},child:[]}]})(t)}function l1e(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(t)}function c1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M457.01 344.42c-25.05 20.33-52.63 37.18-82.54 49.05l54.38 94.19 53.95 23.04c9.81 4.19 20.89-2.21 22.17-12.8l7.02-58.25-54.98-95.23zm42.49-94.56c4.86-7.67 1.89-17.99-6.05-22.39l-28.07-15.57c-7.48-4.15-16.61-1.46-21.26 5.72C403.01 281.15 332.25 320 256 320c-23.93 0-47.23-4.25-69.41-11.53l67.36-116.68c.7.02 1.34.21 2.04.21s1.35-.19 2.04-.21l51.09 88.5c31.23-8.96 59.56-25.75 82.61-48.92l-51.79-89.71C347.39 128.03 352 112.63 352 96c0-53.02-42.98-96-96-96s-96 42.98-96 96c0 16.63 4.61 32.03 12.05 45.66l-68.3 118.31c-12.55-11.61-23.96-24.59-33.68-39-4.79-7.1-13.97-9.62-21.38-5.33l-27.75 16.07c-7.85 4.54-10.63 14.9-5.64 22.47 15.57 23.64 34.69 44.21 55.98 62.02L0 439.66l7.02 58.25c1.28 10.59 12.36 16.99 22.17 12.8l53.95-23.04 70.8-122.63C186.13 377.28 220.62 384 256 384c99.05 0 190.88-51.01 243.5-134.14zM256 64c17.67 0 32 14.33 32 32s-14.33 32-32 32-32-14.33-32-32 14.33-32 32-32z"},child:[]}]})(t)}function u1e(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(t)}function VO(t){return be({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function d1e(t){return be({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(t)}function f1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"},child:[]}]})(t)}function Q5(t){return be({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function h1e(t){return be({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(t)}function p1e(t){return be({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function m1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function g1e(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function y1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 128V96h20c6.627 0 12-5.373 12-12V44c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v20H64V44c0-6.627-5.373-12-12-12H12C5.373 32 0 37.373 0 44v40c0 6.627 5.373 12 12 12h20v320H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-20h384v20c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-20V128zM96 276V140c0-6.627 5.373-12 12-12h168c6.627 0 12 5.373 12 12v136c0 6.627-5.373 12-12 12H108c-6.627 0-12-5.373-12-12zm320 96c0 6.627-5.373 12-12 12H236c-6.627 0-12-5.373-12-12v-52h72c13.255 0 24-10.745 24-24v-72h84c6.627 0 12 5.373 12 12v136z"},child:[]}]})(t)}function b1e(t){return be({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M320,32a32,32,0,0,0-64,0v96h64Zm48,128H16A16,16,0,0,0,0,176v32a16,16,0,0,0,16,16H32v32A160.07,160.07,0,0,0,160,412.8V512h64V412.8A160.07,160.07,0,0,0,352,256V224h16a16,16,0,0,0,16-16V176A16,16,0,0,0,368,160ZM128,32a32,32,0,0,0-64,0v96h64Z"},child:[]}]})(t)}function v1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M384 320H256c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V352c0-17.67-14.33-32-32-32zM192 32c0-17.67-14.33-32-32-32H32C14.33 0 0 14.33 0 32v128c0 17.67 14.33 32 32 32h95.72l73.16 128.04C211.98 300.98 232.4 288 256 288h.28L192 175.51V128h224V64H192V32zM608 0H480c-17.67 0-32 14.33-32 32v128c0 17.67 14.33 32 32 32h128c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function x1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 320h-96c-17.6 0-32-14.4-32-32s14.4-32 32-32h96s96-107 96-160-43-96-96-96-96 43-96 96c0 25.5 22.2 63.4 45.3 96H320c-52.9 0-96 43.1-96 96s43.1 96 96 96h96c17.6 0 32 14.4 32 32s-14.4 32-32 32H185.5c-16 24.8-33.8 47.7-47.3 64H416c52.9 0 96-43.1 96-96s-43.1-96-96-96zm0-256c17.7 0 32 14.3 32 32s-14.3 32-32 32-32-14.3-32-32 14.3-32 32-32zM96 256c-53 0-96 43-96 96s96 160 96 160 96-107 96-160-43-96-96-96zm0 128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function w1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.60969,310.04206l-96.70393,96.71625a31.88151,31.88151,0,0,1-45.00765,0L280.572,326.34115l-9.89231,9.90759a190.56343,190.56343,0,0,1-5.40716,168.52287c-4.50077,8.50115-16.39342,9.59505-23.20707,2.79725L134.54715,400.05428l-17.7999,17.79929c.70324,2.60972,1.60965,5.00067,1.60965,7.79793a32.00544,32.00544,0,1,1-32.00544-32.00434c2.79735,0,5.18838.90637,7.7982,1.60959l17.7999-17.79929L4.43129,269.94287c-6.798-6.81342-5.70409-18.6119,2.79735-23.20627a190.58161,190.58161,0,0,1,168.52864-5.407l9.79854-9.79821-80.31053-80.41716a32.002,32.002,0,0,1,0-45.09987L201.96474,9.29814A31.62639,31.62639,0,0,1,224.46868,0a31.99951,31.99951,0,0,1,22.59759,9.29814l80.32615,80.30777,47.805-47.89713a33.6075,33.6075,0,0,1,47.50808,0l47.50807,47.50645a33.63308,33.63308,0,0,1,0,47.50644l-47.805,47.89713L502.71908,265.036A31.78938,31.78938,0,0,1,502.60969,310.04206ZM219.56159,197.433l73.82505-73.82252-68.918-68.9-73.80942,73.80689Zm237.74352,90.106-68.90233-68.9156-73.825,73.82252,68.918,68.9Z"},child:[]}]})(t)}function HO(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"},child:[]}]})(t)}function S1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(t)}function C1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M128 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-24-80h192v48h48v-48h192v48h48v-57.59c0-21.17-17.23-38.41-38.41-38.41H344v-64h40c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h40v64H94.41C73.23 224 56 241.23 56 262.41V320h48v-48zm264 80h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm240 0h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function FO(t){return be({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M312 320h136V56c0-13.3-10.7-24-24-24H24C10.7 32 0 42.7 0 56v400c0 13.3 10.7 24 24 24h264V344c0-13.2 10.8-24 24-24zm129 55l-98 98c-4.5 4.5-10.6 7-17 7h-6V352h128v6.1c0 6.3-2.5 12.4-7 16.9z"},child:[]}]})(t)}function k1e(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(t)}function E1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"},child:[]}]})(t)}function N1e(t){return be({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 192h-64v-37.88c37.2-13.22 64-48.38 64-90.12h-64V32c0-17.67-14.33-32-32-32H96C78.33 0 64 14.33 64 32v32H0c0 41.74 26.8 76.9 64 90.12V192H0c0 41.74 26.8 76.9 64 90.12V320H0c0 42.84 28.25 78.69 66.99 91.05C79.42 468.72 130.6 512 192 512s112.58-43.28 125.01-100.95C355.75 398.69 384 362.84 384 320h-64v-37.88c37.2-13.22 64-48.38 64-90.12zM192 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-128c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm0-128c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48z"},child:[]}]})(t)}function T1e(t){return be({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function A1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3.192 13.236c.028.035.064.069.098.101l.024.022.008.004a.736.736 0 0 0 .179.065 8.117 8.117 0 0 1-.138-1.758c.027-.797.178-1.47.462-2.059a8.02 8.02 0 0 1 .315-.519s-.176 1.202-.202 1.673a7.104 7.104 0 0 0 .16 1.868l.072-.05c-.043-.389-.042-.8.004-1.22a6.987 6.987 0 0 1 .419-1.721 9.266 9.266 0 0 1 .973-1.892c-1.985.209-2.418 2.1-2.418 2.1s.017-.347.024-.434c.057-.649.123-.961.205-1.287-.13.238-.212.488-.271.688-.139.47-.216.949-.273 1.356a9.022 9.022 0 0 0-.096 1.289c.002.38.024.828.176 1.263.073.205.164.373.279.511zm1.44-.737c.179-.113.385-.2.626-.268.425-.119.889-.239 1.461-.379l.19-.046c.478-.116.974-.237 1.439-.415.283-.108.552-.25.824-.436.38-.26.721-.579 1.012-.951.154-.196.232-.349.309-.605l.114-.378s.464.519-.004 1.436c.297-.107.582-.413.798-.788.181-.315.491-1.451.491-1.451s.569.875-.105 2.011a1.59 1.59 0 0 0 .356-.227c2.507-2.49.349-3.899-.103-4.236a4.141 4.141 0 0 0-.982-.525L11 5.218c-.03-.013-.047-.033-.055-.042l-.321-.35.563.155c.079.021.154.042.228.064.614.182 1.082.4 1.472.686.445.325 2.142 1.751.348 3.837.556-.191 1.606-.772 1.962-1.272 1.713-2.405-.254-3.808-.17-3.808.019 0 .044.002.099.01a.44.44 0 0 0 .069.006c.036 0 .097-.006.109-.041.015-.042-.014-.122-.073-.168-.154-.117-.321-.202-.533-.169C12.926 4.4 12.3 3.85 12.3 3.85s2.482.129 2.562-.28a4.92 4.92 0 0 0-1.225-.912 6.697 6.697 0 0 0-2.228-.743c-1.207-.179-2.13.053-2.13.053.096-.121.574-.667 2.556-.511.802.063 1.564.316 2.27.669.182.091.29-.125.293-.223.004-.114.201.379.203.405.019-.049.096-.308.112-.308.047 0 .24.603.24.603.002-.024.257-.286.257-.286.076.343.066.514.047.562.002-.009.267-.172.267-.172s.152.638.412.891c.084.082.238.296.328.527.19-.133.421-.799.421-.799s.119.353.019.988c.007-.008.301-.219.301-.219s.042.449-.15 1.008a.572.572 0 0 0-.022.095c.162-.091.404-.388.404-.388l-.042.188c-.048.214-.137.629-.327.953a2.549 2.549 0 0 0-.29.686c.049-.045.099-.085.152-.12.1-.065.199-.117.293-.151l.232-.085c.392-.142.788-.309 1.173-.479.812-.359.631-.86.631-.86-.209.408-.966.816-.966.816s.98-.878.562-1.905c-.115.27-.224.538-.327.792-.144.353-.314.726-.59 1.055-.141.168-.286.29-.446.373a.686.686 0 0 1-.115.048l-.043.016s.172-.283.184-1.063c.004-.282.012-.571.012-.826v-.054c0-.132-.003-.263-.002-.395.005-.558.015-.982.132-1.373-.012-.022-.005-.045-.018-.068-.027-.046-.047-.099-.071-.157-.036-.089-.066-.178-.101-.275-.127-.36-.308-.538-.365-.588-.038.115-.271.591-.271.591s.001-.365-.001-.393c-.067-.511-1.33-.972-1.356-.988l.067.401s-.382-.028-.545-.284c-.034-.052-.084-.09-.13-.125l.09.306.093.214s-.296-.024-.435-.269c-.033-.057-.075-.121-.112-.189a.746.746 0 0 0-.574-.396 8.393 8.393 0 0 0-.601-.062 1.301 1.301 0 0 1-.479-.11L12.573 0l.046.087c.015.029.025.058.04.095l.008.022.032.078.048.172s-.353-.014-.765-.299c-.089-.062-.201-.062-.325-.072L11.622.08a4.192 4.192 0 0 0-.332-.014 3.097 3.097 0 0 0-.974.149c.035-.002.071-.003.106-.003l.067.001c.677.012.887.413.887.413s-.606 0-.785.023c-.209.027-.42.052-.616.106a5.102 5.102 0 0 0-1.622.796c-.124.088-.253.17-.389.256-.23.147-.424.341-.576.577a.357.357 0 0 0-.034.068c-.014.036-.008.039.015.051a.78.78 0 0 0 .168.061 2.353 2.353 0 0 1 1.786 2.005l.015.123c.035.307.072.623.056.944a3.413 3.413 0 0 1-.901 2.191c-.59.646-1.323.69-1.316.685.435-.406.722-.95.876-1.66a1.395 1.395 0 0 0-.084-.828.868.868 0 0 0-.016.047c-.097.276-.22.594-.447.857-.132.15-.312.322-.521.521-.911.867-2.435 2.317-2.409 4.623 0 .135.027.3.056.427zm13.967-5.836c-.113.098-.226.196-.341.292-.205.171-.351.28-.666.394-.276.099-.488-.124-.488-.124a1.3 1.3 0 0 0 .447-.389 7.968 7.968 0 0 0-1.154.71 2.41 2.41 0 0 0-.389.353c-.124.156-.205.318-.205.484v.002c0-.003.044-.005.053-.007a6.122 6.122 0 0 0 1.226-.49 16.006 16.006 0 0 0 1.757-1.074.334.334 0 0 1 .095-.048l.371-.106-.228.314a.288.288 0 0 1-.027.034c-.745.741-1.517 1.272-2.36 1.622a4.734 4.734 0 0 1-.492.174 9.201 9.201 0 0 0 1.513-.525c.537-.244.913-.483 1.22-.772.475-.45.814-.981 1.009-1.576a.732.732 0 0 0 .024-.1l-.111.033c-.127.037-.258.074-.373.13a2.367 2.367 0 0 0-.427.286c-.158.127-.321.269-.454.383zM1.578 14.987c.128.205.268.407.403.602l.021.031c-.351-1.236.223-1.982.223-1.982l.142.391c.036.101.091.199.167.302.147-.275.326-.538.534-.784a1.438 1.438 0 0 1-.472-.415c-.2-.264-.332-.581-.415-.996a5.507 5.507 0 0 1-.069-1.562c.015-.174.036-.348.059-.525a8.377 8.377 0 0 0-1.626 2.716.046.046 0 0 0 .003.021 9.438 9.438 0 0 0 1.03 2.201zM18.221 3.353a5.045 5.045 0 0 1 .366-1.933l.018-.041a.94.94 0 0 0-.246.252c-.168.242-.291.53-.397.932-.182.687-.29 1.427-.337 2.308.192-.205.507-.657.572-1.215.011-.094.024-.199.024-.303zm3.368 19.012c-.396-.065-1.234-.36-1.468-.945-.288.707.306 1.221.75 1.451.077.04.1.05.181.082.084.037-.165.494.045.704.21.21.409.148.487.148 0 0 .361.335.567.111.053-.058.098-.262.029-.385-.086-.152-.295-.124-.315-.124-.41.005-.373-.188-.311-.27.045-.059.132-.055.205-.055.017 0 .034.001.053.004.094.011.184.016.268.016.335 0 .726-.035.985-.179.186-.104.491-.456.475-.692-.017.006-.825.319-1.951.134zm2.324-7.785c-.038-.097-.085-.196-.126-.283l-.06-.126c-.021-.047-.044-.093-.066-.139-.055-.111-.112-.226-.151-.35-.034-.106-.043-.216-.052-.32a3.312 3.312 0 0 0-1.886-2.716 1.25 1.25 0 0 1-.215.417c-.09.12-.144.138-.262.138-.157 0-.18-.18-.133-.265a1.45 1.45 0 0 0 .196-.543c.033-.377-.177-.786-.435-1.068-.239-.261-.649-.564-.979-.663-.079.307.017.812.124 1.109.132.36.544 1.069.445 1.499 0 0-.029.275-.304.448-.153.096-.215.053-.215.053.294-.627.297-.891-.028-1.485-.245-.447-.358-.899-.27-1.398.003-.02.01-.04.014-.06a2.222 2.222 0 0 1-.088.199c-.25.439-.486.667-.628 1.121-.149.508.01 1.059.325 1.598a1.237 1.237 0 0 1-.553-.804 4.323 4.323 0 0 0-1.334 1.166c-.08.104-.175.191-.259.268a4.92 4.92 0 0 1-1.978 1.099c-.493.145-1.001.267-1.502.388l-.131.031c-.683.165-1.409.351-2.097.657-.792.352-1.42.757-1.918 1.239a4.412 4.412 0 0 0-1.326 2.593c-.114.781-.055 1.595.18 2.49.008.032-1.03-.941-.494-3.741a6.322 6.322 0 0 0-.236-.007l-.067.001c-1.933.058-2.737 1.123-2.737 1.123s.126-1.182 1.987-1.579c.14-.03 1.312-.293 1.352-.306.154-.314.341-.612.557-.889l-.166.026c-.319.05-.648.1-.975.143l-.252.03c-.577.074-1.174.149-1.74.316-.594.174-1.059.426-1.422.768-.389.366-.668.839-.852 1.442l-.023.086c-.013.05-.026.101-.045.151-.02.052-.024.11.018.22.348.923.945 1.723 1.774 2.376a7.587 7.587 0 0 0 2.146 1.18c.026.009.07.024.109.064l.348.337-.544-.13c-.064-.015-.127-.029-.191-.047-1.114-.306-2.085-.821-2.885-1.532-.273-.099-1.668-.794-2.26-1.936l-.099-.19s.757.746 1.288.855a5.59 5.59 0 0 1-.564-1.22.283.283 0 0 0-.049-.087C1.273 17.196.624 16.054.196 14.834a4.708 4.708 0 0 1-.085-.262c-.043.355-.064.71-.064 1.057 0 .11.955 2.647.955 2.647s-.42-.467-.768-1.059c0 0-.061-.199-.069-.212.149.897.439 1.74.863 2.521 1.167 2.147 2.956 3.554 5.47 4.212a7.73 7.73 0 0 0 1.955.255l7.855.007c.369 0 .652-.022.915-.07l.041-.007a1.47 1.47 0 0 1 .281-.034c.106.001.219.014.345.044l.062.015c.116.026.224.052.331.052 1.32.01 1.137-.785 1.137-.785-.055-.207-.295-.351-.557-.413a1.204 1.204 0 0 0-.28-.033c-.179 0-.367.041-.559.12l-.288.123-.172.075a1.317 1.317 0 0 1-.098.038.54.54 0 0 1-.17.036c-.199 0-.208-.195-.213-.312a.46.46 0 0 1 .169-.373c.093-.079.194-.156.302-.228.195-.132.396-.268.551-.446a1.49 1.49 0 0 0 .361-.699.825.825 0 0 0-.044-.469c-.014-.035-.027-.042-.04-.046a9.037 9.037 0 0 0-.368-.112c-.488-.137-.847-.342-1.127-.643a2.803 2.803 0 0 1-.439-.671 5.783 5.783 0 0 1-.416-1.096c-.159-.601-.536-1.083-1.15-1.472a3.536 3.536 0 0 0-1.557-.524c-.137-.015-.276-.021-.423-.028-.037-.002-.122-.013-.208-.024-.077-.01-.153-.021-.188-.022l-.21-.013s.054-.076.489-.242c.082-.031.167-.039.25-.054.201-.035.4-.053.59-.053.458 0 .891.106 1.288.314.494.26.888.656 1.206 1.211.173.302.309.626.416.992.021.07.038.14.058.216.035.134.071.271.122.396.307.756.876 1.198 1.69 1.315.216.031.426.046.626.046a3.48 3.48 0 0 0 1.077-.165c.455-.149.803-.382 1.062-.712a1.42 1.42 0 0 0 .255-.494l.035-.121.203.048c.043.011.086.021.13.03a.483.483 0 0 0 .094.009c.092 0 .186-.022.288-.044l.017-.004c.076-.017.15-.02.222-.023l.061-.003c.072 0 .132.048.159.093.031.053.081.083.175.104a.367.367 0 0 0 .075.007c.229 0 .47-.21.476-.416.003-.079-.018-.127-.07-.163-.041-.028-.083-.054-.131-.084l-.228-.143.152-.116a.245.245 0 0 1 .147-.051c.045 0 .085.013.12.028 0 0-.191-1.01-1.527-.716 0 0-.217.089-.328.131l-.052.02a.27.27 0 0 1-.101.019.358.358 0 0 1-.166-.047c-.468-.235-.926-.131-1.002-.131a2.28 2.28 0 0 1-.538-.059.222.222 0 0 1-.116-.067l-.086-.097a2.634 2.634 0 0 1-1.183-.197c-.436-.186-.784-.47-.995-.903a1.487 1.487 0 0 1-.15-.685l.026.067c.084.248.208.474.374.678.306.379.701.634 1.15.813.243.097.495.165.764.21 0 0 .955.036 1.38-.317.323-.18.614-.264.917-.264h.063c1.027-.001 1.118-.498 1.118-.498s.117.076.281.051a.666.666 0 0 0 .604-.63l-.34-.306-.072-.063-.134-.106.092-.105a.274.274 0 0 1 .207-.099c.046 0 .091.012.134.035.061.034.115.077.164.117l.051.04.064.05a.559.559 0 0 0-.036-.265zm-1.267-.273c-.038.106-.088.123-.199.099a.688.688 0 0 0-.181-.014c-.111.005-.221.024-.332.026-.277.005-.543-.045-.763-.225-.312-.256-.372-.559-.177-.943l.004.037a.745.745 0 0 0 .345.611c.18.121.385.17.595.196.17.021.338.05.487.142l.041.021a.043.043 0 0 1 .006-.007c-.029-.041-.039-.183-.024-.242a.565.565 0 0 0 .002-.297.622.622 0 0 1-.25.304.076.076 0 0 1-.053.02 2.53 2.53 0 0 1-.654-.233c-.186-.102-.283-.261-.234-.484a.198.198 0 0 0-.056-.189c-.023-.023-.043-.05-.067-.078.055-.051.102-.1.155-.143.05-.04.102-.078.158-.109.432-.245 1.016-.061 1.208.389.049.114.075.24.089.363.028.259-.013.511-.1.756zm-20.67 2.926c-.02-.237-.033-.474-.046-.756a.102.102 0 0 0-.021-.064c-.63-.909-1.089-1.696-1.446-2.476a7.292 7.292 0 0 1-.169-.394 7.748 7.748 0 0 0 1.682 3.694v-.004zm18.991 4.103c.176.117.395.203.732.287.34.085.653.125.966.125.185 0 .334-.019.47-.059a.81.81 0 0 0 .59-.639 6.03 6.03 0 0 0 .128-.713 1.798 1.798 0 0 0-.372-1.323c-.035.031-.07.061-.106.089a1.104 1.104 0 0 1-.198.121.658.658 0 0 1-.291.072.593.593 0 0 1-.281-.072.96.96 0 0 0-.461-.104c-.063 0-.131.005-.208.013-.027.003-.039.009-.054.04-.258.531-.683.908-1.298 1.154l-.017.007-.003.013a1.15 1.15 0 0 0-.001.454c.054.216.185.391.404.535zM14.99 9.512c-.516.525-1.141.958-1.964 1.364-.52.256-1.1.441-1.826.582-.415.081-.829.159-1.243.237l-.086.015-1.056.2c-.929.178-1.92.389-2.872.71-.691.234-1.224.481-1.677.779-.444.291-.75.591-.965.943a2.637 2.637 0 0 0-.146.291 5.696 5.696 0 0 1-.075.159.42.42 0 0 1-.076.114c-.484.473-.69 1.064-.613 1.756.046.416.176.821.395 1.236.127-.846.574-1.492 1.328-1.92.41-.233.863-.403 1.383-.517.526-.117 1.06-.214 1.561-.304l.307-.054c.516-.091 1.051-.184 1.558-.345.12-.038.238-.08.348-.121.147-.055.275-.12.391-.206.141-.105.289-.2.444-.291-.653-.015-1.76-.017-2.104-.019-.77-.004-1.3.06-1.964.312-.694.264-2.676 1.271-2.676 1.271s.985-1.054 2.837-1.844a7.858 7.858 0 0 1 2.928-.53c.275 0 .561.011.872.033.512.038 1.024.075 1.535.11l.014.001c.024 0 .05-.004.075-.011a10.63 10.63 0 0 1 1.572-.325c.175-.025.353-.061.528-.097-.034-.011-.069-.02-.103-.03a1.13 1.13 0 0 1-.118-.044l-.088-.035-.345-.233 1.296.028c.279 0 3.032-.443 4.21-3.723.078-.219.16-.437.223-.676a7.611 7.611 0 0 1-2.669 1.063 7.155 7.155 0 0 1-1.139.121zm4.784-1.871zm1.701 5.622a.27.27 0 1 0 .54 0 .27.27 0 0 0-.54 0z"},child:[]}]})(t)}function M1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.71 2.136a1.43 1.43 0 0 0-2.047 0h-.007a1.48 1.48 0 0 0-.421 1.042c0 .41.161.777.422 1.039l.007.007c.257.264.616.426 1.019.426.404 0 .766-.162 1.027-.426l.003-.007c.261-.262.421-.629.421-1.039 0-.408-.159-.777-.421-1.042H9.71zM8.683 22.295c.404 0 .766-.167 1.027-.429l.003-.008c.261-.261.421-.631.421-1.036 0-.41-.159-.778-.421-1.044H9.71a1.42 1.42 0 0 0-1.027-.432 1.4 1.4 0 0 0-1.02.432h-.007c-.26.266-.422.634-.422 1.044 0 .406.161.775.422 1.036l.007.008c.258.262.617.429 1.02.429zm7.89-4.462c.359-.096.683-.33.882-.684l.027-.052a1.47 1.47 0 0 0 .114-1.067 1.454 1.454 0 0 0-.675-.896l-.021-.014a1.425 1.425 0 0 0-1.078-.132c-.36.091-.684.335-.881.686-.2.349-.241.75-.146 1.119.099.363.33.691.675.896h.002c.346.203.737.239 1.101.144zm-6.405-7.342a2.083 2.083 0 0 0-1.485-.627c-.58 0-1.103.242-1.482.627-.378.385-.612.916-.612 1.507s.233 1.124.612 1.514a2.08 2.08 0 0 0 2.967 0c.379-.39.612-.923.612-1.514s-.233-1.122-.612-1.507zm-.835-2.51c.843.141 1.6.552 2.178 1.144h.004c.092.093.182.196.265.299l1.446-.851a3.176 3.176 0 0 1-.047-1.808 3.149 3.149 0 0 1 1.456-1.926l.025-.016a3.062 3.062 0 0 1 2.345-.306c.77.21 1.465.721 1.898 1.482v.002c.431.757.518 1.626.313 2.408a3.145 3.145 0 0 1-1.456 1.928l-.198.118h-.02a3.095 3.095 0 0 1-2.154.201 3.127 3.127 0 0 1-1.514-.944l-1.444.848a4.162 4.162 0 0 1 0 2.879l1.444.846c.413-.47.939-.789 1.514-.944a3.041 3.041 0 0 1 2.371.319l.048.023v.002a3.17 3.17 0 0 1 1.408 1.906 3.215 3.215 0 0 1-.313 2.405l-.026.053-.003-.005a3.147 3.147 0 0 1-1.867 1.436 3.096 3.096 0 0 1-2.371-.318v-.006a3.156 3.156 0 0 1-1.456-1.927 3.175 3.175 0 0 1 .047-1.805l-1.446-.848a3.905 3.905 0 0 1-.265.294l-.004.005a3.938 3.938 0 0 1-2.178 1.138v1.699a3.09 3.09 0 0 1 1.56.862l.002.004c.565.572.914 1.368.914 2.243 0 .873-.35 1.664-.914 2.239l-.002.009a3.1 3.1 0 0 1-2.21.931 3.1 3.1 0 0 1-2.206-.93h-.002v-.009a3.186 3.186 0 0 1-.916-2.239c0-.875.35-1.672.916-2.243v-.004h.002a3.1 3.1 0 0 1 1.558-.862v-1.699a3.926 3.926 0 0 1-2.176-1.138l-.006-.005a4.098 4.098 0 0 1-1.173-2.874c0-1.122.452-2.136 1.173-2.872h.006a3.947 3.947 0 0 1 2.176-1.144V6.289a3.137 3.137 0 0 1-1.558-.864h-.002v-.004a3.192 3.192 0 0 1-.916-2.243c0-.871.35-1.669.916-2.243l.002-.002A3.084 3.084 0 0 1 8.683 0c.861 0 1.641.355 2.21.932v.002h.002c.565.574.914 1.372.914 2.243 0 .876-.35 1.667-.914 2.243l-.002.005a3.142 3.142 0 0 1-1.56.864v1.692zm8.121-1.129l-.012-.019a1.452 1.452 0 0 0-.87-.668 1.43 1.43 0 0 0-1.103.146h.002c-.347.2-.58.529-.677.896-.095.365-.054.768.146 1.119l.007.009c.2.347.519.579.874.673.357.103.755.059 1.098-.144l.019-.009a1.47 1.47 0 0 0 .657-.885 1.493 1.493 0 0 0-.141-1.118"},child:[]}]})(t)}function _1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.5088 16.8447c.1475-.5068.0908-.9707-.1553-1.3154-.2246-.3164-.6045-.499-1.0615-.5205l-8.6592-.1123a.1559.1559 0 0 1-.1333-.0713c-.0283-.042-.0351-.0986-.021-.1553.0278-.084.1123-.1484.2036-.1562l8.7359-.1123c1.0351-.0489 2.1601-.8868 2.5537-1.9136l.499-1.3013c.0215-.0561.0293-.1128.0147-.168-.5625-2.5463-2.835-4.4453-5.5499-4.4453-2.5039 0-4.6284 1.6177-5.3876 3.8614-.4927-.3658-1.1187-.5625-1.794-.499-1.2026.119-2.1665 1.083-2.2861 2.2856-.0283.31-.0069.6128.0635.894C1.5683 13.171 0 14.7754 0 16.752c0 .1748.0142.3515.0352.5273.0141.083.0844.1475.1689.1475h15.9814c.0909 0 .1758-.0645.2032-.1553l.12-.4268zm2.7568-5.5634c-.0771 0-.1611 0-.2383.0112-.0566 0-.1054.0415-.127.0976l-.3378 1.1744c-.1475.5068-.0918.9707.1543 1.3164.2256.3164.6055.498 1.0625.5195l1.8437.1133c.0557 0 .1055.0263.1329.0703.0283.043.0351.1074.0214.1562-.0283.084-.1132.1485-.204.1553l-1.921.1123c-1.041.0488-2.1582.8867-2.5527 1.914l-.1406.3585c-.0283.0713.0215.1416.0986.1416h6.5977c.0771 0 .1474-.0489.169-.126.1122-.4082.1757-.837.1757-1.2803 0-2.6025-2.125-4.727-4.7344-4.727"},child:[]}]})(t)}function D1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.394 0C8.683 0 4.609 2.716 2.644 6.667h15.641a4.77 4.77 0 0 0 3.073-1.11c.446-.375.864-.785 1.247-1.243l.001-.002A11.974 11.974 0 0 0 13.394 0zM1.804 8.889a12.009 12.009 0 0 0 0 6.222h14.7a3.111 3.111 0 1 0 0-6.222zm.84 8.444C4.61 21.283 8.684 24 13.395 24c3.701 0 7.011-1.677 9.212-4.312l-.001-.002a9.958 9.958 0 0 0-1.247-1.243 4.77 4.77 0 0 0-3.073-1.11z"},child:[]}]})(t)}function R1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.02 10.59a8.578 8.578 0 0 0-.862-3.034 8.911 8.911 0 0 0-1.789-2.445c.337-1.342-.413-2.505-.413-2.505-1.292-.08-2.113.4-2.416.62-.052-.02-.102-.044-.154-.064-.22-.089-.446-.172-.677-.247-.231-.073-.47-.14-.711-.197a9.867 9.867 0 0 0-.875-.161C14.557.753 12.94 0 12.94 0c-1.804 1.145-2.147 2.744-2.147 2.744l-.018.093c-.098.029-.2.057-.298.088-.138.042-.275.094-.413.143-.138.055-.275.107-.41.166a8.869 8.869 0 0 0-1.557.87l-.063-.029c-2.497-.955-4.716.195-4.716.195-.203 2.658.996 4.33 1.235 4.636a11.608 11.608 0 0 0-.607 2.635C1.636 12.677.953 15.014.953 15.014c1.926 2.214 4.171 2.351 4.171 2.351.003-.002.006-.002.006-.005.285.509.615.994.986 1.446.156.19.32.371.488.548-.704 2.009.099 3.68.099 3.68 2.144.08 3.553-.937 3.849-1.173a9.784 9.784 0 0 0 3.164.501h.08l.055-.003.107-.002.103-.005.003.002c1.01 1.44 2.788 1.646 2.788 1.646 1.264-1.332 1.337-2.653 1.337-2.94v-.058c0-.02-.003-.039-.003-.06.265-.187.52-.387.758-.6a7.875 7.875 0 0 0 1.415-1.7c1.43.083 2.437-.885 2.437-.885-.236-1.49-1.085-2.216-1.264-2.354l-.018-.013-.016-.013a.217.217 0 0 1-.031-.02c.008-.092.016-.18.02-.27.011-.162.016-.323.016-.48v-.253l-.005-.098-.008-.135a1.891 1.891 0 0 0-.01-.13c-.003-.042-.008-.083-.013-.125l-.016-.124-.018-.122a6.215 6.215 0 0 0-2.032-3.73 6.015 6.015 0 0 0-3.222-1.46 6.292 6.292 0 0 0-.85-.048l-.107.002h-.063l-.044.003-.104.008a4.777 4.777 0 0 0-3.335 1.695c-.332.4-.592.84-.768 1.297a4.594 4.594 0 0 0-.312 1.817l.003.091c.005.055.007.11.013.164a3.615 3.615 0 0 0 .698 1.82 3.53 3.53 0 0 0 1.827 1.282c.33.098.66.14.971.137.039 0 .078 0 .114-.002l.063-.003c.02 0 .041-.003.062-.003.034-.002.065-.007.099-.01.007 0 .018-.003.028-.003l.031-.005.06-.008a1.18 1.18 0 0 0 .112-.02c.036-.008.072-.013.109-.024a2.634 2.634 0 0 0 .914-.415c.028-.02.056-.041.085-.065a.248.248 0 0 0 .039-.35.244.244 0 0 0-.309-.06l-.078.042c-.09.044-.184.083-.283.116a2.476 2.476 0 0 1-.475.096c-.028.003-.054.006-.083.006l-.083.002c-.026 0-.054 0-.08-.002l-.102-.006h-.012l-.024.006c-.016-.003-.031-.003-.044-.006-.031-.002-.06-.007-.091-.01a2.59 2.59 0 0 1-.724-.213 2.557 2.557 0 0 1-.667-.438 2.52 2.52 0 0 1-.805-1.475 2.306 2.306 0 0 1-.029-.444l.006-.122v-.023l.002-.031c.003-.021.003-.04.005-.06a3.163 3.163 0 0 1 1.352-2.29 3.12 3.12 0 0 1 .937-.43 2.946 2.946 0 0 1 .776-.101h.06l.07.002.045.003h.026l.07.005a4.041 4.041 0 0 1 1.635.49 3.94 3.94 0 0 1 1.602 1.662 3.77 3.77 0 0 1 .397 1.414l.005.076.003.075c.002.026.002.05.002.075 0 .024.003.052 0 .07v.065l-.002.073-.008.174a6.195 6.195 0 0 1-.08.639 5.1 5.1 0 0 1-.267.927 5.31 5.31 0 0 1-.624 1.13 5.052 5.052 0 0 1-3.237 2.014 4.82 4.82 0 0 1-.649.066l-.039.003h-.287a6.607 6.607 0 0 1-1.716-.265 6.776 6.776 0 0 1-3.4-2.274 6.75 6.75 0 0 1-.746-1.15 6.616 6.616 0 0 1-.714-2.596l-.005-.083-.002-.02v-.056l-.003-.073v-.096l-.003-.104v-.07l.003-.163c.008-.22.026-.45.054-.678a8.707 8.707 0 0 1 .28-1.355c.128-.444.286-.872.473-1.277a7.04 7.04 0 0 1 1.456-2.1 5.925 5.925 0 0 1 .953-.763c.169-.111.343-.213.524-.306.089-.05.182-.091.273-.135.047-.02.093-.042.138-.062a7.177 7.177 0 0 1 .714-.267l.145-.045c.049-.015.098-.026.148-.041.098-.029.197-.052.296-.076.049-.013.1-.02.15-.033l.15-.032.151-.028.076-.013.075-.01.153-.024c.057-.01.114-.013.171-.023l.169-.021c.036-.003.073-.008.106-.01l.073-.008.036-.003.042-.002c.057-.003.114-.008.171-.01l.086-.006h.023l.037-.003.145-.007a7.999 7.999 0 0 1 1.708.125 7.917 7.917 0 0 1 2.048.68 8.253 8.253 0 0 1 1.672 1.09l.09.077.089.078c.06.052.114.107.171.159.057.052.112.106.166.16.052.055.107.107.159.164a8.671 8.671 0 0 1 1.41 1.978c.012.026.028.052.04.078l.04.078.075.156c.023.051.05.1.07.153l.065.15a8.848 8.848 0 0 1 .45 1.34.19.19 0 0 0 .201.142.186.186 0 0 0 .172-.184c.01-.246.002-.532-.024-.856z"},child:[]}]})(t)}function j1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.816 22.3774c0 .0724-.1283.1311-.2865.1311-.1581 0-.2864-.0587-.2864-.131 0-.0725.1283-.1311.2864-.1311.1582 0 .2865.0586.2865.131Zm-.738.1554c0 .075-.126.136-.2815.136-.1555 0-.2816-.061-.2816-.136 0-.075.126-.136.2816-.136.1555 0 .2816.061.2816.136Zm-.7427.1408c0 .0697-.1739.1262-.3884.1262-.2145 0-.3884-.0565-.3884-.1262 0-.0697.174-.1263.3884-.1263.2145 0 .3884.0566.3884.1263Zm-1.136.1116c0 .0885-.1587.1602-.3544.1602-.1957 0-.3544-.0717-.3544-.1602 0-.0885.1587-.1602.3544-.1602.1957 0 .3544.0717.3544.1602Zm-1.1943.0389c0 .0965-.2369.1747-.5291.1747-.2923 0-.5292-.0782-.5292-.1747 0-.0966.237-.1748.5292-.1748s.5291.0782.5291.1748Zm1.107-.8787c.6116-.0292.7718-.1214.7912-.3253 0 0 .1214-.1505-.2913-.233-.4126-.0826-.9952-.0826-.8932-.4127.102-.335 1.1554-.3932 1.7865-.3932s1.3447-.0388 1.2525.301c-.0874.3398-.5486.3447-.5097.5728.0388.2282.4175.1602.3495.5195-.068.3592-1.7428.4903-2.9274.5923-1.1797.102-1.9321-.0195-1.7428-.3399.1893-.3204 1.573-.2524 2.1846-.2815Zm-9.9693 1.0755c.0066.045-.128.102-.3004.127-.1724.0251-.3176.0089-.3241-.0362-.0066-.0452.128-.102.3004-.1271.1725-.025.3176-.0088.3241.0363Zm.0918.226c.0077.053-.1474.1195-.3464.1484-.199.029-.3665.0094-.3742-.0437-.0078-.053.1473-.1195.3463-.1485.199-.0289.3666-.0093.3743.0438Zm.1648.204c.0077.053-.1473.1194-.3463.1484-.199.0289-.3666.0093-.3743-.0437-.0077-.0531.1473-.1196.3463-.1485.199-.029.3666-.0094.3743.0437Zm.7387.114c.0086.0638-.1501.138-.3547.166-.2046.0278-.3774-.0013-.3861-.065-.0087-.0638.15-.138.3546-.166.2046-.0278.3775.0013.3862.065Zm1.1803.1309c.0066.0828-.2394.17-.5494.1947s-.5667-.0225-.5733-.1053c-.0066-.0829.2394-.17.5494-.1947s.5667.0224.5733.1053Zm1.1926.0011c.0182.0838-.2006.2026-.4888.2653-.2882.0627-.5366.0456-.5548-.0382-.0182-.0839.2006-.2027.4888-.2654.2882-.0627.5366-.0455.5548.0383Zm1.2463-2.0331c.3544-.0777 1.9856-.0388 2.0292.2476.0534.2913-2.67.5437-3.2866.631-.6165.0875-.6408.2622-.6408.2622 0 .0146-.0534.1554.3495.1505.5632-.0097.9564.1068.7234.3787-.233.2719-2.8109.199-3.34 0-.5292-.199-.3204-.398-.0486-.5.2719-.0971 1.0438-.1894 1.937-.3593.8933-.1699 1.9274-.7282 2.2769-.8107Zm6.7917-9.7337a.6457.6457 0 1 1-1.2914 0 .6457.6457 0 0 1 1.2914 0ZM7.3155 13.44a.6457.6457 0 1 1-1.2914 0 .6457.6457 0 0 1 1.2914 0ZM4.325 20.023c-.3544 0-.602-.1409-.7573-.4176-.0631-.1068-.102-.2379-.1311-.3738-.0631-.335-.0437-.7282.0291-1.0972.0825-.4126.2282-.7961.3835-1.0389.1408-.2233.2719-.369.3884-.466a50.61 50.61 0 0 0 .5195 1.3205c.2378.5874.4563 1.1068.6165 1.4758-.0097.0194-.0243.034-.0388.0534-.233.3107-.5583.5437-1.0098.5437Zm15.0155-2.1944c0 .0146.0049.0388.0195.0728.0534.2913.233 1.0778.3543 1.5292-1.8642.2088-4.5051.3399-7.4325.3399-2.4759 0-4.7479-.0923-6.515-.2476a86.46 86.46 0 0 1-.6748-1.607c-.597-1.4563-1.3302-3.3933-1.5583-4.5779-.2088-1.0923-.4612-2.4176.1165-3.6119A28.5682 28.5682 0 0 1 3.32 9.697c-1.369-.1456-1.5535-.4127-1.6263-.5243-.0777-.1117-.0923-.2427-.0389-.3738.1214-.3059.534-.5826 1.0146-.8108a5.028 5.028 0 0 0 .136.2816c-.437.2088-.7768.432-.8593.6457-.0194.0437-.0097.0631.0049.0874.068.097.4611.398 2.6846.4709a.6316.6316 0 0 1-.5-.505.634.634 0 0 1 .0582-.3931c-.2039.1068-.4078.233-.602.364 0 0-1.6554-2.1748-.4709-2.8933.136-.0826.267-.1214.3981-.1214.9904 0 1.7234 2.1603 1.7234 2.1603s-.1456.0534-.3592.1505c.2621.0243.7816.1457 1.8302.568 1.068.4321 1.4952.4612 1.6118.4612A.625.625 0 0 1 9 9.3426l.034.034a22.885 22.885 0 0 0 .4563-.0389c.0485-.0048.1116-.0194.1942-.0388a.6277.6277 0 0 1 .2864-.5826.6193.6193 0 0 1 .733.0437.434.434 0 0 0 .0874-.034c.2719-.1359 1.2331-1.1602 1.9565-2.034a.616.616 0 0 1 .6117-.2137c.1941-.6553.9709-2.9759 2.1554-2.9759 1.3788 0 .5777 2.7283.4418 2.9225 0 0-.3204-.0242-.7573-.0242-.4855 0-1.1166.029-1.6312.165.0146.0097.034.0243.0534.0389.267.2184.301.6117.0825.8787-.1165.1359-.267.3204-.4417.5194.3592-.1456.733-.3058 1.1068-.466.6263-.2768 1.2089-.539 1.7234-.7914h.0098l.0048-.0097c.4418-.2136.8399-.4175 1.1748-.6068 1.17-.6554 1.3157-.9418 1.3302-1.0146.0097-.0486 0-.0631-.0048-.068-.0097-.0194-.0923-.097-.4612-.097-.403 0-.9661.0922-1.5535.2184a3.849 3.849 0 0 0 .0291-.3253c.5729-.1165 1.1214-.2039 1.5292-.2039.369 0 .5923.068.7088.2136.0534.0631.1068.1748.068.335-.0437.1893-.2428.5194-1.4807 1.2137a8.6623 8.6623 0 0 1-.3738.2039c-.0922.0534-.1942.102-.2961.1553.5582.471.9758 1.1748 1.2379 2.1943.5292 2.039.937 4.4275 1.2185 6.3208-.4612.0583-.7427.2767-.801.6311-.0631.3836.136.5923.3447.8156.2233.2379.4806.505.5631 1.1069Zm-4.84-12.331c0 .0244.0048.0195.0048.0195s.0242-.0437.063-.1165c.0438-.0728.102-.1748.17-.2961.0728-.1214.1553-.2573.2573-.3787.0485-.0583.1068-.1165.165-.1602.0632-.0437.1214-.0728.1845-.0825.0194 0 .034-.0049.0486-.0049.0145.0049.034 0 .0485.0049.0146.0048.034.0048.0486.0097l.0388.0097.0097.0048c0 .0049.0049.0049.0049.0097.0097.0146.0145.0437.0194.0777 0 .068-.0049.1505-.0194.2233-.0097.0729-.0292.1457-.0437.2136-.034.136-.0631.2476-.0826.3302-.0242.0825-.034.131-.034.131s.034-.034.0874-.102c.0534-.063.1214-.165.1942-.2912.034-.0631.0729-.136.102-.2185.0291-.0825.0582-.1747.068-.2815.0048-.0534.0048-.1165-.0195-.1845-.0048-.0194-.0145-.034-.0242-.0534l-.0146-.0243-.0194-.0243c-.0194-.029-.0971-.0776-.102-.0776l-.0097-.0049h-.0048l-.0146-.0048h-.0049l-.0194-.0097-.0437-.0146c-.0242-.0097-.0582-.0146-.0874-.0194-.029-.0049-.063-.0049-.0922-.0049-.0291.0049-.0631.0049-.0922.0097a.6844.6844 0 0 0-.3204.1554c-.0874.0728-.1505.1553-.204.2379-.1019.165-.1601.33-.199.4709-.034.1456-.0534.267-.0582.3495-.0049.0388-.0049.0728-.0049.097Zm-4.2868 3.578c-.0874.0534-.1116.165-.063.2524.0145.0195.0922.1311.2572.1942a.707.707 0 0 0 .2525.0437c.1456 0 .3058-.0388.4709-.1116.3592-.1602 1.2379-1.0487 2.2428-2.2575.0631-.0776.0534-.1942-.0242-.2573-.0437-.034-.0874-.0437-.1166-.0437a.1794.1794 0 0 0-.1407.068c-.4321.5195-1.6555 1.9225-2.0924 2.1458l-.0194.0097c-.0534.0194-.102.0388-.1505.0534l-.2233.0631-.1797-.1456c-.0291-.0292-.0728-.0437-.1165-.0437a.175.175 0 0 0-.097.029ZM9.17 14.304c.0582.335.5874.5243 1.1845.4272.5971-.097 1.039-.4515.9807-.7865-.0583-.335-.5875-.5243-1.1846-.4272-.5971.102-1.034.4564-.9806.7865ZM4.4172 7.9493a2.001 2.001 0 0 0 .0729.0922s-.0049-.0145-.0049-.034c-.0049-.0194-.0049-.0485-.0146-.0873-.0097-.0777-.0388-.1845-.0776-.3107a2.4088 2.4088 0 0 0-.1748-.4175 1.8868 1.8868 0 0 0-.1408-.2233c-.0534-.0729-.1165-.1457-.2039-.2136-.0485-.0292-.097-.0632-.165-.0826-.0146-.0048-.034-.0048-.0535-.0097h-.0728c-.0097 0-.0291.0049-.034.0049l-.029.0097-.0195.0048-.0049.0049-.0097.0048a.3371.3371 0 0 0-.1602.136.4473.4473 0 0 0-.0534.1747c-.0097.1068.0146.1942.034.272.0243.0776.0534.1504.0825.2087a1.493 1.493 0 0 0 .17.2718c.0242.0291.0436.0534.0582.068l.0243.0243s-.0097-.0437-.0243-.1166c-.0146-.0728-.0388-.1796-.0582-.301a2.2904 2.2904 0 0 1-.0243-.1941c-.0049-.068-.0049-.136.0097-.1894.0048-.0242.0146-.0437.0243-.0534.0097-.0048.0145-.0097.029-.0145h.0098l.0146-.0049c.0048 0 0 .0049 0 .0049h.0048a.2045.2045 0 0 1 .0631.034c.0486.0388.102.0922.1505.1504.0534.0632.102.1214.1457.1845.0873.1262.1747.2476.2476.3496a5.199 5.199 0 0 0 .1844.2524Zm.3544 1.0777.034.0049c.131.0146.5534.0922 1.5923.5097.8545.3447 1.5001.5195 1.9128.5195.3107 0 .3932-.0971.4223-.131.0437-.0535.0486-.1069.0437-.136-.0048-.0291-.0145-.0825-.068-.1262-.0436-.034-.0873-.0437-.1164-.0437-.0292 0-.0583.0048-.0826.0194l-.0874.0437h-.1165c-.2476 0-.7622-.0825-1.767-.4903-1.204-.4855-1.6458-.539-1.7769-.539-.0291 0-.0388 0-.0582.005-.0632.0145-.102.0533-.1166.0776-.0145.0194-.0388.0728-.029.136.0145.0873.0922.1504.1795.1504h.034Zm.0437 3.6945c0 1.1262.9127 2.0438 2.039 2.039 1.1263 0 2.039-.9128 2.039-2.039 0-1.1263-.9127-2.039-2.039-2.039s-2.039.9127-2.039 2.039Zm5.5246 3.3643c-.267.102-.5.2475-.7039.3738.0486.2184.199.7088.6311.5825.3544-.1068.1505-.733.0728-.9563Zm.6214.7816c.1166.0437.5778.0825.534-.4758-.0145-.1942-.029-.3301-.0388-.4224-.0437-.0048-.0825-.0048-.1213-.0048-.136 0-.2622-.0049-.369-.0049-.1117 0-.17.0049-.1942.0097a9.3046 9.3046 0 0 0-.1553.0292c.0388.2524.1456.7961.3446.869Zm1.7866-1.3788c.432-.1942.432-.5243.4078-.6942-.0292-.1796-.2962-.5583-1.3788-.568 0 0-.335.7816-1.2428.9273-.9078.1505-1.2962-.0243-1.4515-.2185 0 0-.8739.2573-.9467.8107-.0728.5535.6603.7477 1.0098.5535.3495-.1942.8738-.6166 1.573-.7088.3737-.0486 1.5971.0922 2.0292-.102Zm2.471-4.2333c0-1.1262-.9127-2.039-2.039-2.039s-2.039.9128-2.039 2.039c0 1.1263.9127 2.039 2.039 2.039s2.039-.9175 2.039-2.039ZM3.1162 18.1975c-.0437.267-.0728.6117-.0243.9564-.6602-.1408-1.034-.3058-1.034-.4757 0-.17.3835-.335 1.0583-.4807Zm18.4866.0389c.5729.136.8884.2864.8836.4418 0 .2476-.767.4757-2.0633.6553.233-.063.4952-.233.7962-.5146.1505-.1407.267-.3107.3495-.5a.5922.5922 0 0 0 .034-.0825Zm-.3495-.0728a1.0453 1.0453 0 0 1-.2767.3883c-.3884.369-.6214.4467-.7525.4467-.2573 0-.4466-.3593-.5583-1.0632-.0049-.0486-.0146-.0971-.0194-.1456-.0923-.6991-.4127-1.039-.6457-1.2817-.2039-.2136-.301-.3301-.2621-.5486.0534-.3155.4369-.3835.7476-.3835.1456 0 .2573.0146.2573.0146h.0194c.5728.0097 1.17.5291 1.4515 1.2525.1554.398.2185.903.0389 1.3205ZM4.7085 6.3618c-.1068-.1456-.2136-.267-.3253-.3592-.0097-.3981-.0097-.7574.0098-.8981.0388-.2622.6893-1.0244 1.2962-1.607.5097-.4903 1.4855-1.335 2.301-1.5.1263-.0243.272-.0389.4419-.0389 1.5535 0 4.6993 1.1651 4.8546 1.3205l.0097.0097c.0389-.3787.0777-.9078.0098-1.0583 0 0 .296.0922.3495.2767 0 0 .733-.738.6602-1.6554 0 0 .165 0 .1845.296 0 0 .5292-1.2524.9175-1.1408.3884.1117-.1262 1.8594-.4029 2.1895 0 0 .4418-.1068.4952-.403 0 0 .0534.2574-.0194.403 0 0 .9952-.8107.9563-1.1214 0 0 .1311.3155.0923.5534 0 0 .8253-.6602.8253-.937 0 0 .1262 1.6021-1.471 2.1895 0 0 .4224-.0534.6263-.0922 0 0-.1748.2281-.4418.5534-.1602-.102-.3496-.1505-.5632-.1505-.6408 0-1.2282.4855-1.7476 1.4419.0776-.4175-.0292-.7574-.1845-.7914-.0049-.0048-.0146-.0048-.0243-.0048-.1602 0-.3884.2767-.4806.6894-.0923.4369.0146.8058.1748.8398.0582.0146.131-.0194.2039-.0874-.1505.3593-.267.6942-.3447.9321-3.976 1.7914-6.5053 1.7527-7.656 1.573-.0825-.2137-.233-.5778-.4417-.9419-.0583-.097-.1166-.1941-.1748-.2815 2.7769.7476 6.4761-.6506 7.9568-1.2962-.0777-.2185-.0874-.5-.0194-.806.0631-.296.1942-.5485.3544-.7184-.0291-.1165-.0534-.199-.0728-.2427-.3399-.1845-3.1556-1.2331-4.6265-1.2331-.1457 0-.272.0145-.3787.034-1.301.267-3.277 2.5292-3.3497 2.8497-.0243.1553-.0146.6796.0048 1.2136Z"},child:[]}]})(t)}function O1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.204 14.35l.007.01-.999 2.413a5.171 5.171 0 0 1-2.075-2.597l2.578-.437.004.005a.44.44 0 0 1 .484.606zm-.833-2.129a.44.44 0 0 0 .173-.756l.002-.011L7.585 9.7a5.143 5.143 0 0 0-.73 3.255l2.514-.725.002-.009zm1.145-1.98a.44.44 0 0 0 .699-.337l.01-.005.15-2.62a5.144 5.144 0 0 0-3.01 1.442l2.147 1.523.004-.002zm.76 2.75l.723.349.722-.347.18-.78-.5-.623h-.804l-.5.623.179.779zm1.5-3.095a.44.44 0 0 0 .7.336l.008.003 2.134-1.513a5.188 5.188 0 0 0-2.992-1.442l.148 2.615.002.001zm10.876 5.97l-5.773 7.181a1.6 1.6 0 0 1-1.248.594l-9.261.003a1.6 1.6 0 0 1-1.247-.596l-5.776-7.18a1.583 1.583 0 0 1-.307-1.34L2.1 5.573c.108-.47.425-.864.863-1.073L11.305.513a1.606 1.606 0 0 1 1.385 0l8.345 3.985c.438.209.755.604.863 1.073l2.062 8.955c.108.47-.005.963-.308 1.34zm-3.289-2.057c-.042-.01-.103-.026-.145-.034-.174-.033-.315-.025-.479-.038-.35-.037-.638-.067-.895-.148-.105-.04-.18-.165-.216-.216l-.201-.059a6.45 6.45 0 0 0-.105-2.332 6.465 6.465 0 0 0-.936-2.163c.052-.047.15-.133.177-.159.008-.09.001-.183.094-.282.197-.185.444-.338.743-.522.142-.084.273-.137.415-.242.032-.024.076-.062.11-.089.24-.191.295-.52.123-.736-.172-.216-.506-.236-.745-.045-.034.027-.08.062-.111.088-.134.116-.217.23-.33.35-.246.25-.45.458-.673.609-.097.056-.239.037-.303.033l-.19.135a6.545 6.545 0 0 0-4.146-2.003l-.012-.223c-.065-.062-.143-.115-.163-.25-.022-.268.015-.557.057-.905.023-.163.061-.298.068-.475.001-.04-.001-.099-.001-.142 0-.306-.224-.555-.5-.555-.275 0-.499.249-.499.555l.001.014c0 .041-.002.092 0 .128.006.177.044.312.067.475.042.348.078.637.056.906a.545.545 0 0 1-.162.258l-.012.211a6.424 6.424 0 0 0-4.166 2.003 8.373 8.373 0 0 1-.18-.128c-.09.012-.18.04-.297-.029-.223-.15-.427-.358-.673-.608-.113-.12-.195-.234-.329-.349-.03-.026-.077-.062-.111-.088a.594.594 0 0 0-.348-.132.481.481 0 0 0-.398.176c-.172.216-.117.546.123.737l.007.005.104.083c.142.105.272.159.414.242.299.185.546.338.743.522.076.082.09.226.1.288l.16.143a6.462 6.462 0 0 0-1.02 4.506l-.208.06c-.055.072-.133.184-.215.217-.257.081-.546.11-.895.147-.164.014-.305.006-.48.039-.037.007-.09.02-.133.03l-.004.002-.007.002c-.295.071-.484.342-.423.608.061.267.349.429.645.365l.007-.001.01-.003.129-.029c.17-.046.294-.113.448-.172.33-.118.604-.217.87-.256.112-.009.23.069.288.101l.217-.037a6.5 6.5 0 0 0 2.88 3.596l-.09.218c.033.084.069.199.044.282-.097.252-.263.517-.452.813-.091.136-.185.242-.268.399-.02.037-.045.095-.064.134-.128.275-.034.591.213.71.248.12.556-.007.69-.282v-.002c.02-.039.046-.09.062-.127.07-.162.094-.301.144-.458.132-.332.205-.68.387-.897.05-.06.13-.082.215-.105l.113-.205a6.453 6.453 0 0 0 4.609.012l.106.192c.086.028.18.042.256.155.136.232.229.507.342.84.05.156.074.295.145.457.016.037.043.09.062.129.133.276.442.402.69.282.247-.118.341-.435.213-.71-.02-.039-.045-.096-.065-.134-.083-.156-.177-.261-.268-.398-.19-.296-.346-.541-.443-.793-.04-.13.007-.21.038-.294-.018-.022-.059-.144-.083-.202a6.499 6.499 0 0 0 2.88-3.622c.064.01.176.03.213.038.075-.05.144-.114.28-.104.266.039.54.138.87.256.154.06.277.128.448.173.036.01.088.019.13.028l.009.003.007.001c.297.064.584-.098.645-.365.06-.266-.128-.537-.423-.608zM16.4 9.701l-1.95 1.746v.005a.44.44 0 0 0 .173.757l.003.01 2.526.728a5.199 5.199 0 0 0-.108-1.674A5.208 5.208 0 0 0 16.4 9.7zm-4.013 5.325a.437.437 0 0 0-.404-.232.44.44 0 0 0-.372.233h-.002l-1.268 2.292a5.164 5.164 0 0 0 3.326.003l-1.27-2.296h-.01zm1.888-1.293a.44.44 0 0 0-.27.036.44.44 0 0 0-.214.572l-.003.004 1.01 2.438a5.15 5.15 0 0 0 2.081-2.615l-2.6-.44-.004.005z"},child:[]}]})(t)}function L1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 0L1.605 6v12L12 24l10.395-6V6L12 0zm6 16.59c0 .705-.646 1.29-1.529 1.29-.631 0-1.351-.255-1.801-.81l-6-7.141v6.66c0 .721-.57 1.29-1.274 1.29H7.32c-.721 0-1.29-.6-1.29-1.29V7.41c0-.705.63-1.29 1.5-1.29.646 0 1.38.255 1.83.81l5.97 7.141V7.41c0-.721.6-1.29 1.29-1.29h.075c.72 0 1.29.6 1.29 1.29v9.18H18z"},child:[]}]})(t)}function I1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364 15.1192 7.2a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.407-.667zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997Z"},child:[]}]})(t)}function P1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.5594 14.7228a.5269.5269 0 0 0-.0563-.1191c-.139-.2632-.4768-.3418-1.0074-.2321-1.6533.3411-2.2935.1312-2.5256-.0191 1.342-2.0482 2.445-4.522 3.0411-6.8297.2714-1.0507.7982-3.5237.1222-4.7316a1.5641 1.5641 0 0 0-.1509-.235C21.6931.9086 19.8007.0248 17.5099.0005c-1.4947-.0158-2.7705.3461-3.1161.4794a9.449 9.449 0 0 0-.5159-.0816 8.044 8.044 0 0 0-1.3114-.1278c-1.1822-.0184-2.2038.2642-3.0498.8406-.8573-.3211-4.7888-1.645-7.2219.0788C.9359 2.1526.3086 3.8733.4302 6.3043c.0409.818.5069 3.334 1.2423 5.7436.4598 1.5065.9387 2.7019 1.4334 3.582.553.9942 1.1259 1.5933 1.7143 1.7895.4474.1491 1.1327.1441 1.8581-.7279.8012-.9635 1.5903-1.8258 1.9446-2.2069.4351.2355.9064.3625 1.39.3772a.0569.0569 0 0 0 .0004.0041 11.0312 11.0312 0 0 0-.2472.3054c-.3389.4302-.4094.5197-1.5002.7443-.3102.064-1.1344.2339-1.1464.8115-.0025.1224.0329.2309.0919.3268.2269.4231.9216.6097 1.015.6331 1.3345.3335 2.5044.092 3.3714-.6787-.017 2.231.0775 4.4174.3454 5.0874.2212.5529.7618 1.9045 2.4692 1.9043.2505 0 .5263-.0291.8296-.0941 1.7819-.3821 2.5557-1.1696 2.855-2.9059.1503-.8707.4016-2.8753.5388-4.1012.0169-.0703.0357-.1207.057-.1362.0007-.0005.0697-.0471.4272.0307a.3673.3673 0 0 0 .0443.0068l.2539.0223.0149.001c.8468.0384 1.9114-.1426 2.5312-.4308.6438-.2988 1.8057-1.0323 1.5951-1.6698zM2.371 11.8765c-.7435-2.4358-1.1779-4.8851-1.2123-5.5719-.1086-2.1714.4171-3.6829 1.5623-4.4927 1.8367-1.2986 4.8398-.5408 6.108-.13-.0032.0032-.0066.0061-.0098.0094-2.0238 2.044-1.9758 5.536-1.9708 5.7495-.0002.0823.0066.1989.0162.3593.0348.5873.0996 1.6804-.0735 2.9184-.1609 1.1504.1937 2.2764.9728 3.0892.0806.0841.1648.1631.2518.2374-.3468.3714-1.1004 1.1926-1.9025 2.1576-.5677.6825-.9597.5517-1.0886.5087-.3919-.1307-.813-.5871-1.2381-1.3223-.4796-.839-.9635-2.0317-1.4155-3.5126zm6.0072 5.0871c-.1711-.0428-.3271-.1132-.4322-.1772.0889-.0394.2374-.0902.4833-.1409 1.2833-.2641 1.4815-.4506 1.9143-1.0002.0992-.126.2116-.2687.3673-.4426a.3549.3549 0 0 0 .0737-.1298c.1708-.1513.2724-.1099.4369-.0417.156.0646.3078.26.3695.4752.0291.1016.0619.2945-.0452.4444-.9043 1.2658-2.2216 1.2494-3.1676 1.0128zm2.094-3.988-.0525.141c-.133.3566-.2567.6881-.3334 1.003-.6674-.0021-1.3168-.2872-1.8105-.8024-.6279-.6551-.9131-1.5664-.7825-2.5004.1828-1.3079.1153-2.4468.079-3.0586-.005-.0857-.0095-.1607-.0122-.2199.2957-.2621 1.6659-.9962 2.6429-.7724.4459.1022.7176.4057.8305.928.5846 2.7038.0774 3.8307-.3302 4.7363-.084.1866-.1633.3629-.2311.5454zm7.3637 4.5725c-.0169.1768-.0358.376-.0618.5959l-.146.4383a.3547.3547 0 0 0-.0182.1077c-.0059.4747-.054.6489-.115.8693-.0634.2292-.1353.4891-.1794 1.0575-.11 1.4143-.8782 2.2267-2.4172 2.5565-1.5155.3251-1.7843-.4968-2.0212-1.2217a6.5824 6.5824 0 0 0-.0769-.2266c-.2154-.5858-.1911-1.4119-.1574-2.5551.0165-.5612-.0249-1.9013-.3302-2.6462.0044-.2932.0106-.5909.019-.8918a.3529.3529 0 0 0-.0153-.1126 1.4927 1.4927 0 0 0-.0439-.208c-.1226-.4283-.4213-.7866-.7797-.9351-.1424-.059-.4038-.1672-.7178-.0869.067-.276.1831-.5875.309-.9249l.0529-.142c.0595-.16.134-.3257.213-.5012.4265-.9476 1.0106-2.2453.3766-5.1772-.2374-1.0981-1.0304-1.6343-2.2324-1.5098-.7207.0746-1.3799.3654-1.7088.5321a5.6716 5.6716 0 0 0-.1958.1041c.0918-1.1064.4386-3.1741 1.7357-4.4823a4.0306 4.0306 0 0 1 .3033-.276.3532.3532 0 0 0 .1447-.0644c.7524-.5706 1.6945-.8506 2.802-.8325.4091.0067.8017.0339 1.1742.081 1.939.3544 3.2439 1.4468 4.0359 2.3827.8143.9623 1.2552 1.9315 1.4312 2.4543-1.3232-.1346-2.2234.1268-2.6797.779-.9926 1.4189.543 4.1729 1.2811 5.4964.1353.2426.2522.4522.2889.5413.2403.5825.5515.9713.7787 1.2552.0696.087.1372.1714.1885.245-.4008.1155-1.1208.3825-1.0552 1.717-.0123.1563-.0423.4469-.0834.8148-.0461.2077-.0702.4603-.0994.7662zm.8905-1.6211c-.0405-.8316.2691-.9185.5967-1.0105a2.8566 2.8566 0 0 0 .135-.0406 1.202 1.202 0 0 0 .1342.103c.5703.3765 1.5823.4213 3.0068.1344-.2016.1769-.5189.3994-.9533.6011-.4098.1903-1.0957.333-1.7473.3636-.7197.0336-1.0859-.0807-1.1721-.151zm.5695-9.2712c-.0059.3508-.0542.6692-.1054 1.0017-.055.3576-.112.7274-.1264 1.1762-.0142.4368.0404.8909.0932 1.3301.1066.887.216 1.8003-.2075 2.7014a3.5272 3.5272 0 0 1-.1876-.3856c-.0527-.1276-.1669-.3326-.3251-.6162-.6156-1.1041-2.0574-3.6896-1.3193-4.7446.3795-.5427 1.3408-.5661 2.1781-.463zm.2284 7.0137a12.3762 12.3762 0 0 0-.0853-.1074l-.0355-.0444c.7262-1.1995.5842-2.3862.4578-3.4385-.0519-.4318-.1009-.8396-.0885-1.2226.0129-.4061.0666-.7543.1185-1.0911.0639-.415.1288-.8443.1109-1.3505.0134-.0531.0188-.1158.0118-.1902-.0457-.4855-.5999-1.938-1.7294-3.253-.6076-.7073-1.4896-1.4972-2.6889-2.0395.5251-.1066 1.2328-.2035 2.0244-.1859 2.0515.0456 3.6746.8135 4.8242 2.2824a.908.908 0 0 1 .0667.1002c.7231 1.3556-.2762 6.2751-2.9867 10.5405zm-8.8166-6.1162c-.025.1794-.3089.4225-.6211.4225a.5821.5821 0 0 1-.0809-.0056c-.1873-.026-.3765-.144-.5059-.3156-.0458-.0605-.1203-.178-.1055-.2844.0055-.0401.0261-.0985.0925-.1488.1182-.0894.3518-.1226.6096-.0867.3163.0441.6426.1938.6113.4186zm7.9305-.4114c.0111.0792-.049.201-.1531.3102-.0683.0717-.212.1961-.4079.2232a.5456.5456 0 0 1-.075.0052c-.2935 0-.5414-.2344-.5607-.3717-.024-.1765.2641-.3106.5611-.352.297-.0414.6111.0088.6356.1851z"},child:[]}]})(t)}function z1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12s12-5.373 12-12c0-6.628-5.373-12-12-12zm0 22.46c-1.885 0-3.414-1.26-3.414-2.814h6.828c0 1.553-1.528 2.813-3.414 2.813zm5.64-3.745H6.36v-2.046h11.28v2.046zm-.04-3.098H6.391c-.037-.043-.075-.086-.111-.13-1.155-1.401-1.427-2.133-1.69-2.879-.005-.025 1.4.287 2.395.511 0 0 .513.119 1.262.255-.72-.843-1.147-1.915-1.147-3.01 0-2.406 1.845-4.508 1.18-6.207.648.053 1.34 1.367 1.387 3.422.689-.951.977-2.69.977-3.755 0-1.103.727-2.385 1.454-2.429-.648 1.069.168 1.984.894 4.256.272.854.237 2.29.447 3.201.07-1.892.395-4.652 1.595-5.605-.529 1.2.079 2.702.494 3.424.671 1.164 1.078 2.047 1.078 3.716a4.642 4.642 0 01-1.11 2.996c.792-.149 1.34-.283 1.34-.283l2.573-.502s-.374 1.538-1.81 3.019z"},child:[]}]})(t)}function B1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.005 0L4.952 7.053a9.865 9.865 0 000 14.022 9.866 9.866 0 0014.022 0c3.984-3.9 3.986-10.205.085-14.023l-1.744 1.743c2.904 2.905 2.904 7.634 0 10.538s-7.634 2.904-10.538 0-2.904-7.634 0-10.538l4.647-4.646.582-.665zm3.568 3.899a1.327 1.327 0 00-1.327 1.327 1.327 1.327 0 001.327 1.328A1.327 1.327 0 0016.9 5.226 1.327 1.327 0 0015.573 3.9z"},child:[]}]})(t)}function V1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M23.035 9.601h-7.677a.956.956 0 01-.962-.962V.962a.956.956 0 00-.962-.956H10.56a.956.956 0 00-.962.956V8.64a.956.956 0 01-.962.962H5.762a.956.956 0 01-.961-.962V.962A.956.956 0 003.839 0H.959a.956.956 0 00-.956.962v22.076A.956.956 0 00.965 24h22.07a.956.956 0 00.962-.962V10.58a.956.956 0 00-.962-.98zm-3.86 8.152a1.437 1.437 0 01-1.437 1.443h-1.924a1.437 1.437 0 01-1.436-1.443v-1.917a1.437 1.437 0 011.436-1.443h1.924a1.437 1.437 0 011.437 1.443z"},child:[]}]})(t)}function H1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.71 13.145c-1.66 2.092-3.452 4.483-7.038 4.483-3.203 0-4.397-2.825-4.48-5.12.701 1.484 2.073 2.685 4.214 2.63 4.117-.133 6.94-3.852 6.94-7.239 0-4.05-3.022-6.972-8.268-6.972-3.752 0-8.4 1.428-11.455 3.685C2.59 6.937 3.885 9.958 4.35 9.626c2.648-1.904 4.748-3.13 6.784-3.744C8.12 9.244.886 17.05 0 18.425c.1 1.261 1.66 4.648 2.424 4.648.232 0 .431-.133.664-.365a100.49 100.49 0 0 0 5.54-6.765c.222 3.104 1.748 6.898 6.014 6.898 3.819 0 7.604-2.756 9.33-8.965.2-.764-.73-1.361-1.261-.73zm-4.349-5.013c0 1.959-1.926 2.922-3.685 2.922-.941 0-1.664-.247-2.235-.568 1.051-1.592 2.092-3.225 3.21-4.973 1.972.334 2.71 1.43 2.71 2.619z"},child:[]}]})(t)}function F1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M0 17.57h4.248l-1.316 3.974H0zm0-7.557h6.75l-1.316 3.974H0zm0-7.557h9.252L7.936 6.431H0zm13.44 0H24v3.975H12.123zM9.62 13.987l1.317-3.974H24v3.974zM8.436 17.57H24v3.975H7.119Z"},child:[]}]})(t)}function q1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M24 3.459c0 .646-.418 1.18-1.141 1.18-.723 0-1.142-.534-1.142-1.18 0-.647.419-1.18 1.142-1.18.723 0 1.141.533 1.141 1.18zm-.228 0c0-.533-.38-.951-.913-.951s-.913.38-.913.95c0 .533.38.952.913.952.57 0 .913-.419.913-.951zm-1.37-.533h.495c.266 0 .456.152.456.38 0 .153-.076.229-.19.305l.19.266v.038h-.266l-.19-.266h-.229v.266h-.266zm.495.228h-.229v.267h.229c.114 0 .152-.038.152-.114.038-.077-.038-.153-.152-.153zM7.602 12.4c.038-.151.076-.304.076-.456 0-.114-.038-.228-.038-.342-.114-.343-.304-.647-.646-.838l-4.87-2.777c-.685-.38-1.56-.152-1.94.533-.381.685-.153 1.56.532 1.94l2.701 1.56-2.701 1.56c-.685.38-.913 1.256-.533 1.94.38.685 1.256.914 1.94.533l4.832-2.777c.343-.267.571-.533.647-.876zm1.332 2.626c-.266-.038-.57.038-.837.19l-4.832 2.777c-.685.38-.913 1.256-.532 1.94.38.686 1.255.914 1.94.533l2.701-1.56v3.12c0 .8.647 1.408 1.446 1.408.799 0 1.407-.647 1.407-1.408v-5.592c0-.761-.57-1.37-1.293-1.408zm4.946-6.088c.266.038.57-.038.837-.19l4.832-2.777c.685-.38.913-1.256.532-1.94-.38-.686-1.255-.914-1.94-.533l-2.701 1.56V1.975c0-.799-.647-1.408-1.446-1.408-.799 0-1.446.609-1.446 1.408V7.53c0 .76.609 1.37 1.332 1.407zM3.265 5.97l4.832 2.777c.266.152.533.19.837.19.723-.038 1.331-.684 1.331-1.407V1.975c0-.799-.646-1.408-1.407-1.408-.799 0-1.446.647-1.446 1.408v3.12l-2.701-1.56c-.685-.38-1.56-.152-1.94.533-.419.646-.19 1.521.494 1.902zm9.093 6.011a.412.412 0 00-.114-.266l-.57-.571a.346.346 0 00-.267-.114.412.412 0 00-.266.114l-.571.57a.411.411 0 00-.114.267c0 .076.038.19.114.267l.57.57a.345.345 0 00.267.114c.076 0 .19-.038.266-.114l.571-.57a.412.412 0 00.114-.267zm1.598.533L11.94 14.53c-.039.038-.153.114-.229.114h-.608a.411.411 0 01-.267-.114L8.82 12.514a.408.408 0 01-.076-.229v-.608c0-.076.038-.19.114-.267l2.016-2.016a.41.41 0 01.267-.114h.608a.41.41 0 01.267.114l2.016 2.016a.347.347 0 01.114.267v.608c-.076.077-.114.19-.19.229zm5.593 5.44l-4.832-2.777c-.266-.152-.57-.19-.837-.152-.723.038-1.332.684-1.332 1.408v5.554c0 .8.647 1.408 1.408 1.408.799 0 1.446-.647 1.446-1.408v-3.12l2.7 1.56c.686.38 1.561.152 1.941-.533.419-.646.19-1.521-.494-1.94zm2.549-7.533l-2.701 1.56 2.7 1.56c.686.38.914 1.256.533 1.94-.38.685-1.255.913-1.94.533l-4.832-2.778a1.644 1.644 0 01-.647-.798c-.037-.153-.076-.305-.076-.457 0-.114.039-.228.039-.342.114-.343.342-.647.646-.837l4.832-2.778c.685-.38 1.56-.152 1.94.533.457.609.19 1.484-.494 1.864"},child:[]}]})(t)}function U1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.976 9.15c-2.172-.806-3.356-1.426-3.356-2.409 0-.831.683-1.305 1.901-1.305 2.227 0 4.515.858 6.09 1.631l.89-5.494C18.252.975 15.697 0 12.165 0 9.667 0 7.589.654 6.104 1.872 4.56 3.147 3.757 4.992 3.757 7.218c0 4.039 2.467 5.76 6.476 7.219 2.585.92 3.445 1.574 3.445 2.583 0 .98-.84 1.545-2.354 1.545-1.875 0-4.965-.921-6.99-2.109l-.9 5.555C5.175 22.99 8.385 24 11.714 24c2.641 0 4.843-.624 6.328-1.813 1.664-1.305 2.525-3.236 2.525-5.732 0-4.128-2.524-5.851-6.594-7.305h.003z"},child:[]}]})(t)}function $1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.292 5.856L11.54 0v24l-4.095-2.378V7.603l-6.168 3.564.015-5.31zm21.43 5.311l-.014-5.31L12.46 0v24l4.095-2.378V14.87l3.092 1.788-.018-4.618-3.074-1.756V7.603l6.168 3.564z"},child:[]}]})(t)}function G1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 0C5.381-.008.008 5.352 0 11.971V12c0 6.64 5.359 12 12 12 6.64 0 12-5.36 12-12 0-6.641-5.36-12-12-12zm0 20.801c-4.846.015-8.786-3.904-8.801-8.75V12c-.014-4.846 3.904-8.786 8.75-8.801H12c4.847-.014 8.786 3.904 8.801 8.75V12c.015 4.847-3.904 8.786-8.75 8.801H12zm5.44-11.76c0 1.359-1.12 2.479-2.481 2.479-1.366-.007-2.472-1.113-2.479-2.479 0-1.361 1.12-2.481 2.479-2.481 1.361 0 2.481 1.12 2.481 2.481zm0 5.919c0 1.36-1.12 2.48-2.481 2.48-1.367-.008-2.473-1.114-2.479-2.48 0-1.359 1.12-2.479 2.479-2.479 1.361-.001 2.481 1.12 2.481 2.479zm-5.919 0c0 1.36-1.12 2.48-2.479 2.48-1.368-.007-2.475-1.113-2.481-2.48 0-1.359 1.12-2.479 2.481-2.479 1.358-.001 2.479 1.12 2.479 2.479zm0-5.919c0 1.359-1.12 2.479-2.479 2.479-1.367-.007-2.475-1.112-2.481-2.479 0-1.361 1.12-2.481 2.481-2.481 1.358 0 2.479 1.12 2.479 2.481z"},child:[]}]})(t)}function W1e(t){return be({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M0 0l11.955 24L24 0zm13.366 4.827h1.393v1.38h-1.393zm-2.77 5.569H9.22V8.993h1.389zm0-2.087H9.22V6.906h1.389zm0-2.086H9.22V4.819h1.389zm2.087 6.263h-1.377V11.08h1.388zm0-2.09h-1.377V8.993h1.388zm0-2.087h-1.377V6.906h1.388zm0-2.086h-1.377V4.819h1.388zm.683.683h1.393v1.389h-1.393zm0 3.475V8.993h1.389v1.388Z"},child:[]}]})(t)}const qO={Compute:1,"Data Layer":2,Services:3,Networking:4,Frontend:5,Messaging:6,Security:7,Observability:8,Delivery:9,"AI & ML":10,Grouping:11,"DNS & Network":12,"ER Diagram":13,UML:14,Custom:15},ms=[{id:"web-app",group:"Frontend",icon:l1e,label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:UJ,label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:Q5,label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:P1e,label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:e1e,label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:H1e,label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:HO,label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:M1e,label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:T1e,label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:_1e,label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:D1e,label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:i1e,label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:r1e,label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:Q5,label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:C1e,label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:w1e,label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:Q5,label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:$J,label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:n1e,label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:h1e,label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:g1e,label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:LO,label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:_J,label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:BO,label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:eQ,label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:p1e,label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:U1e,label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:VO,label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:V1e,label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:HO,label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:BO,label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:VJ,label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:x1e,label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:O1e,label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:F1e,label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:L1e,label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:A1e,label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:q1e,label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:z1e,label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:j1e,label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:N1e,label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:IO,label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:f1e,label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:S1e,label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:d1e,label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:W1e,label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:NJ,label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:G1e,label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:PO,label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:$1e,label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:B1e,label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:s1e,label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:LO,label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:E1e,label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:v1e,label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:t1e,label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:a1e,label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:I1e,label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:Qge,label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:R1e,label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:y1e,label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:WJ,label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:qJ,label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:ZJ,label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:GJ,label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:PO,label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]},{id:"entity",group:"ER Diagram",icon:k1e,label:"Entity",description:"Database table/entity with attributes",nodeType:"tableNode",tags:["entity","table","database","erd","relation","schema","model"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., User, Order, Product",default:"Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this entity represents",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Regular",options:["Regular","Junction","Audit","Archive","View","Materialized View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0,isNullable:!1},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"weak-entity",group:"ER Diagram",icon:VO,label:"Weak Entity",description:"Entity dependent on another entity for identification",nodeType:"tableNode",tags:["weak entity","dependent","erd","relationship","partial key"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., OrderItem, Dependent, Comment",default:"Weak Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this weak entity",default:""},{key:"ownerEntity",label:"Owner Entity",type:"text",placeholder:"Parent entity that this depends on",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Weak Entity",options:["Weak Entity","Junction","Dependent"]}],data:{attributes:[{id:"attr-1",name:"owner_id",type:"UUID",isForeignKey:!0,isNullable:!1},{id:"attr-2",name:"sequence_number",type:"INT",isPrimaryKey:!0,isNullable:!1},{id:"attr-3",name:"data",type:"VARCHAR(255)",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"double",borderWidth:4}},{id:"er-trigger",group:"ER Diagram",nodeType:"erNode",icon:IO,label:"Trigger",description:"Database trigger for automated actions on events",tags:["trigger","automation","event","database","erd"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-trigger"},{key:"componentName",label:"Trigger Name",type:"text",placeholder:"e.g., update_timestamp, log_changes, validate_data",default:"update_timestamp"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this trigger does",default:"Automatically updates the updated_at timestamp when a row is modified"},{key:"targetTable",label:"Target Table",type:"text",placeholder:"Table this trigger is attached to",default:"users"},{key:"timing",label:"Timing",type:"select",default:"BEFORE",options:["BEFORE","AFTER","INSTEAD OF"]},{key:"event",label:"Event",type:"select",default:"UPDATE",options:["INSERT","UPDATE","DELETE","TRUNCATE"]},{key:"level",label:"Level",type:"select",default:"ROW",options:["ROW","STATEMENT"]},{key:"condition",label:"Condition (WHEN)",type:"textarea",placeholder:"Optional condition: e.g., NEW.status != OLD.status",default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:100}},{id:"er-note",group:"ER Diagram",nodeType:"erNode",icon:FO,label:"Note/Constraint",description:"Business rule, constraint, or annotation",tags:["note","constraint","rule","annotation","comment","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"e.g., Business Rule, Constraint, Assumption",default:"Business Rule"},{key:"description",label:"Note Content",type:"textarea",placeholder:`Describe the rule, constraint, or important note
e.g., Email must be unique across all users
Orders can only be placed by verified customers`,default:"Email addresses must be unique across all user accounts"},{key:"type",label:"Type",type:"select",default:"Business Rule",options:["Business Rule","Database Constraint","Assumption","Clarification","TODO","Warning","Best Practice"]},{key:"severity",label:"Severity",type:"select",default:"Info",options:["Critical","High","Medium","Low","Info"]},{key:"relatedEntity",label:"Related To",type:"text",placeholder:"Entity or relationship this applies to",default:""},{key:"sqlConstraint",label:"SQL Constraint",type:"textarea",placeholder:`SQL code for this constraint
e.g., CHECK (price > 0)
CHECK (start_date < end_date)`,default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:120,borderStyle:"dashed"}},{id:"er-use-case",group:"ER Diagram",nodeType:"erNode",icon:zO,label:"Use Case",description:"Use case or functional requirement for the system",tags:["use case","requirement","functionality","scenario","note","annotation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., User Registration, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case or requirement",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"relatedEntities",label:"Related Entities",type:"text",placeholder:"Entities involved (comma-separated)",default:""}]},{id:"er-view",group:"ER Diagram",nodeType:"tableNode",icon:u1e,label:"View",description:"Database view or materialized view",tags:["view","query","virtual table","materialized","aggregation"],properties:[{key:"componentName",label:"View Name",type:"text",placeholder:"e.g., active_users_view, order_summary_view",default:"View"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this view provides",default:""},{key:"viewType",label:"View Type",type:"select",default:"Standard View",options:["Standard View","Materialized View","Indexed View","Updateable View"]},{key:"baseTables",label:"Base Tables",type:"text",placeholder:"Tables this view depends on (comma-separated)",default:""},{key:"tableType",label:"Table Type",type:"select",default:"View",options:["View","Materialized View","Indexed View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"computed_field",type:"VARCHAR(100)",isNullable:!0},{id:"attr-3",name:"aggregate_value",type:"INT",isNullable:!0}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:1}},{id:"uml-class",group:"UML",icon:o1e,label:"Class",description:"UML Class with attributes and methods",nodeType:"tableNode",tags:["uml","class","object-oriented","oop","class diagram","blueprint"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., User, Product, Order",default:"Class"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this class represents",default:""},{key:"stereotype",label:"Stereotype",type:"select",default:"None",options:["None","<<abstract>>","<<interface>>","<<entity>>","<<controller>>","<<service>>","<<repository>>"]},{key:"visibility",label:"Default Visibility",type:"select",default:"public",options:["public","private","protected","package"]}],data:{attributes:[{id:"attr-1",name:"- id",type:"String",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"+ name",type:"String",isNullable:!1},{id:"attr-3",name:"# createdAt",type:"Date",isNullable:!1},{id:"attr-4",name:"+ getName()",type:"String",isNullable:!1},{id:"attr-5",name:"+ setName(name: String)",type:"void",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-interface",group:"UML",icon:b1e,label:"Interface",description:"UML Interface definition",nodeType:"tableNode",tags:["uml","interface","contract","abstraction","oop"],properties:[{key:"componentName",label:"Interface Name",type:"text",placeholder:"e.g., IRepository, IService, Serializable",default:"Interface"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this interface defines",default:""}],data:{attributes:[{id:"attr-1",name:"+ save()",type:"void",isNullable:!1},{id:"attr-2",name:"+ delete()",type:"void",isNullable:!1},{id:"attr-3",name:"+ findById(id: String)",type:"Object",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Method",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm italic"}},{key:"type",label:"Return Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:2}},{id:"uml-abstract-class",group:"UML",icon:c1e,label:"Abstract Class",description:"Abstract class with abstract methods",nodeType:"tableNode",tags:["uml","abstract","base class","inheritance","oop"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., BaseRepository, AbstractService",default:"AbstractClass"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this abstract class",default:""}],data:{attributes:[{id:"attr-1",name:"# data",type:"Object",isNullable:!1},{id:"attr-2",name:"+ process()",type:"void",isNullable:!1},{id:"attr-3",name:"+ validate()",type:"boolean",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"solid",borderWidth:2}},{id:"uml-enum",group:"UML",icon:m1e,label:"Enum",description:"Enumeration type",nodeType:"tableNode",tags:["uml","enum","enumeration","constants","type"],properties:[{key:"componentName",label:"Enum Name",type:"text",placeholder:"e.g., Status, Color, Role",default:"Enum"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this enumeration",default:""}],data:{attributes:[{id:"attr-1",name:"ACTIVE",type:"",isNullable:!1},{id:"attr-2",name:"INACTIVE",type:"",isNullable:!1},{id:"attr-3",name:"PENDING",type:"",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Value",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm uppercase"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-use-case",group:"UML",nodeType:"erNode",icon:zO,label:"Use Case",description:"System use case or functionality",tags:["uml","use case","functionality","requirement","scenario","er diagram","note"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., Login, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"complexity",label:"Complexity",type:"select",default:"Medium",options:["Simple","Medium","Complex"]}]},{id:"uml-note",group:"UML",nodeType:"erNode",icon:FO,label:"Note/Comment",description:"Annotation or comment",tags:["uml","note","comment","annotation","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"Optional title",default:"Note"},{key:"description",label:"Content",type:"textarea",placeholder:"Add your note or comment here",default:""}]}];function lq(t){return be({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(t)}function cq(t){return be({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(t)}function uq(t){return be({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(t)}function K1e(t){return be({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(t)}function Y1e({components:t,onAdd:e}){const[n,r]=Ae.useState(!0),[i,s]=Ae.useState(new Set),[o,l]=Ae.useState(null),[u,d]=Ae.useState(""),f=Ae.useMemo(()=>new $l(Array.from(t),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[t]),p=Ae.useMemo(()=>{const v=u.trim();if(!v)return Array.from(t);const S=f.search(v).map(E=>E.item),k=t.find(E=>E.id==="custom-component"),T=S.some(E=>E.id==="custom-component");return k&&!T&&S.push(k),S},[t,f,u]),m=Ae.useMemo(()=>{const v=new Map;for(const w of p){const S=w.group??"Other";v.has(S)||v.set(S,[]),v.get(S).push(w)}return Array.from(v.entries()).sort((w,S)=>{const k=qO[w[0]]??999,T=qO[S[0]]??999;return k-T})},[p]);Ae.useEffect(()=>{m.length>0&&i.size===0&&s(new Set(m.map(([v])=>v)))},[m,i.size]);const b=v=>{s(w=>{const S=new Set(w);return S.has(v)?S.delete(v):S.add(v),S})};return g.jsxs("div",{className:"relative z-40",children:[g.jsx("button",{type:"button",onClick:()=>r(v=>!v),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?g.jsx(cq,{size:16}):g.jsx(uq,{size:16})}),g.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?g.jsxs(g.Fragment,{children:[g.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),g.jsx("div",{className:"mr-3 mb-3",children:g.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),g.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[m.length===0?g.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):m.map(([v,w])=>{const S=i.has(v);return g.jsxs("div",{children:[g.jsxs("button",{type:"button",onClick:()=>b(v),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":S,"aria-controls":`group-${v}`,children:[g.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:v}),g.jsx(lq,{size:12,className:`text-muted transition-transform duration-150 ${S?"rotate-0":"-rotate-90"}`})]}),S&&g.jsx("div",{id:`group-${v}`,className:"mt-1 mb-3 px-1",children:g.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:w.map(k=>g.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${k.label} to canvas`,onMouseEnter:T=>{const E=T.currentTarget.getBoundingClientRect();l({label:k.label,description:k.description||"",rect:E})},onMouseLeave:()=>l(null),onDragStart:T=>{l(null),T.dataTransfer?.setData("application/reactflow",JSON.stringify({type:k.id})),T.dataTransfer?.setData("text/plain",k.id),T.dataTransfer&&(T.dataTransfer.effectAllowed="move")},onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),e(k.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[g.jsx("div",{className:"flex justify-center items-center",children:g.jsxs("div",{className:"w-10 h-10 mb-1 relative",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[var(--brand)]/15 to-[var(--brand)]/5 rounded-full"}),g.jsx("div",{className:"z-10 opacity-75 w-full h-full flex items-center justify-center",children:g.jsx("span",{className:"inline-flex items-center justify-center w-full h-full",children:k.icon?Ae.createElement(k.icon,{size:24}):g.jsx("span",{className:"text-lg",children:"?"})})})]})}),g.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:k.label})]},k.id))})})]},v)}),g.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[g.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),g.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):g.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:g.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&mh.createPortal(g.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[g.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),g.jsx("div",{className:"text-muted",children:o.description}),g.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const X1e=({reactFlowWrapperRef:t,nodes:e,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:f,onMouseMove:p,children:m})=>g.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:g.jsx("section",{className:"w-full h-full",ref:t,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:g.jsxs(hhe,{className:"w-full h-full",nodes:e,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:f,onMouseMove:p,connectionMode:Il.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[g.jsx(Vhe,{nodeStrokeWidth:3}),g.jsx(The,{}),g.jsx(xhe,{gap:16}),m]})})}),Z1e=({problem:t,activeTab:e,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:f,isNodeInGroup:p})=>{const[m,b]=Ae.useState(320),v=260,w=640,S=Ae.useRef(!1),k=Ae.useRef(null),[T,E]=Ae.useState(!1),[N,A]=Ae.useState(!0),_=Ae.useCallback(V=>{if(!S.current)return;const q=Math.min(Math.max(window.innerWidth-V.clientX,v),w);b(q)},[]),j=Ae.useCallback(()=>{S.current=!1,document.body.style.userSelect=""},[]),R=V=>{V.preventDefault(),S.current=!0,document.body.style.userSelect="none"};Ae.useEffect(()=>(globalThis.addEventListener("mousemove",_),globalThis.addEventListener("mouseup",j),()=>{globalThis.removeEventListener("mousemove",_),globalThis.removeEventListener("mouseup",j)}),[_,j]),Ae.useEffect(()=>{k.current&&(k.current.style.width=m+"px")},[m]);const L=t?.id==="free";if(Ae.useEffect(()=>{L&&!r&&A(!1)},[L,r]),Ae.useEffect(()=>{L&&r&&(n("inspector"),A(!0))},[L,r,n]),!t)return null;const P=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const V=document.createElement("textarea");V.value=JSON.stringify(d,null,2),V.style.position="fixed",V.style.opacity="0",document.body.appendChild(V),V.select();try{document.execCommand("copy")}catch{}V.remove()}},F=()=>{if(!d)return;const V=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),q=URL.createObjectURL(V),I=document.createElement("a");I.href=q,I.download=`assessment-${Date.now()}.json`,document.body.appendChild(I),I.click(),I.remove(),URL.revokeObjectURL(q)};return g.jsxs("div",{className:"relative z-40",children:[g.jsx("button",{type:"button",onClick:()=>A(V=>!V),"aria-label":N?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:N?g.jsx(uq,{size:16}):g.jsx(cq,{size:16})}),g.jsx("aside",{ref:k,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${N?"p-4":"w-6 p-1"}`,"data-width":m,style:{width:N?`${m}px`:"24px"},children:N&&g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onMouseDown:R,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[g.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),g.jsx(K1e,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),g.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!L&&g.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[g.jsx("span",{className:"text-sm",children:""}),g.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),!L&&g.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="assessment"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("assessment"),children:[g.jsx("span",{className:"text-sm",children:""}),g.jsx("span",{className:"text-sm font-medium",children:"Assessment"}),d&&g.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-semibold rounded-full bg-[var(--brand)] text-white",children:d.score})]}),g.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${e==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[g.jsx("span",{className:"text-sm",children:""}),g.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),g.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),g.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[e==="details"&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:t.title}),g.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:t.description}),g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),g.jsx("ul",{className:"space-y-1",children:t.requirements.map(V=>g.jsxs("li",{className:"flex items-start space-x-2",children:[g.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),g.jsx("span",{className:"text-xs text-muted",children:V})]},V))})]}),g.jsxs("div",{className:"mb-4",children:[g.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),g.jsx("ul",{className:"space-y-1",children:t.constraints.map(V=>g.jsxs("li",{className:"flex items-start space-x-2",children:[g.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),g.jsx("span",{className:"text-xs text-muted",children:V})]},V))})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("button",{type:"button",onClick:()=>E(!T),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[g.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),g.jsx(lq,{size:14,className:`text-muted transition-transform duration-150 ${T?"rotate-0":"-rotate-90"}`})]}),T&&g.jsx("div",{id:"hints-content",className:"space-y-2",children:t.hints.map(V=>g.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:g.jsx("div",{className:"text-xs text-white",children:V})},V))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),g.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map(V=>g.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:V},V))})]})]}),e==="inspector"&&g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&g.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&g.jsxs("div",{children:[g.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&g.jsxs("div",{className:"mb-6",children:[g.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),g.jsx("div",{className:"space-y-2",children:s})]}),g.jsxs("div",{className:"mb-4",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),g.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[g.jsx(H6,{size:14}),g.jsx("span",{children:"Add"})]})]}),g.jsx("div",{className:"space-y-2",children:o})]}),g.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&f&&g.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:f,title:"Remove this node from its parent group",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Detach from Group"})]}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),g.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]}),e==="assessment"&&g.jsx("div",{children:d?g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsxs("div",{className:"flex items-center justify-between mb-2",children:[g.jsx("div",{className:"text-lg font-semibold text-theme",children:"Assessment Score"}),g.jsxs("div",{className:"text-2xl font-bold text-[var(--brand)]",children:[d.score,"%"]})]}),g.jsx("div",{className:"text-sm text-muted",children:d.isValid?" Pass":" Needs Improvement"})]}),g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-green-500",children:""}),g.jsx("span",{children:"What Went Right"})]}),d.architectureStrengths.length>0?g.jsx("ul",{className:"space-y-2",children:d.architectureStrengths.map(V=>g.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-green-500 mt-0.5",children:""}),g.jsx("span",{className:"text-theme",children:V})]},V))}):g.jsx("div",{className:"text-sm text-muted",children:"No notable strengths detected."})]}),g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[g.jsx("span",{className:"text-orange-500",children:"!"}),g.jsx("span",{children:"What to Improve"})]}),d.improvements.length>0?g.jsx("ul",{className:"space-y-2",children:d.improvements.map(V=>g.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[g.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),g.jsx("span",{className:"text-theme",children:V})]},V))}):g.jsx("div",{className:"text-sm text-muted",children:"No specific improvements suggested."})]}),g.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[g.jsx("div",{className:"font-semibold text-theme mb-3",children:"Detailed Feedback"}),g.jsx("div",{className:"space-y-3",children:d.feedback.map(V=>g.jsxs("div",{className:"border-l-2 border-[var(--brand)] pl-3 py-1",children:[g.jsx("div",{className:"font-medium text-xs text-[var(--brand)] uppercase mb-1",children:V.category}),g.jsx("div",{className:"text-sm text-theme",children:V.message})]},`${V.category}-${V.message}`))})]}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{type:"button",onClick:P,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Copy JSON"}),g.jsx("button",{type:"button",onClick:F,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Download"})]})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:""}),g.jsx("div",{className:"text-lg font-semibold text-theme mb-2",children:"No Assessment Yet"}),g.jsx("div",{className:"text-sm text-muted",children:"Run an assessment to see your design evaluation and feedback."})]})})]})]})})]})},J1e=({isLoading:t,collaborators:e,onUpdatePermission:n,onRemove:r})=>t?g.jsxs("div",{className:"text-center py-4",children:[g.jsx("div",{className:"inline-block w-4 h-4 border border-accent/30 border-t-accent rounded-full animate-spin"}),g.jsx("p",{className:"text-sm text-muted mt-2",children:"Loading collaborators..."})]}):e.length===0?g.jsxs("div",{className:"text-center py-4 text-muted",children:[g.jsx("p",{className:"text-sm",children:"No collaborators yet"}),g.jsx("p",{className:"text-xs mt-1",children:"Share this diagram to start collaborating"})]}):g.jsx("div",{className:"space-y-2",children:e.map(i=>g.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme/5 rounded-md",children:[g.jsxs("div",{className:"flex items-center space-x-3",children:[g.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:g.jsx("span",{className:"text-sm font-medium text-accent",children:i.email[0].toUpperCase()})}),g.jsxs("div",{children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:i.email}),g.jsxs("p",{className:"text-xs text-muted capitalize",children:[i.permission," access"]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2",children:[g.jsxs("select",{value:i.permission,onChange:s=>n(i.id,s.target.value),className:"text-xs px-2 py-1 border border-theme/20 rounded bg-theme text-theme",children:[g.jsx("option",{value:"read",children:"Read"}),g.jsx("option",{value:"edit",children:"Edit"})]}),g.jsx("button",{type:"button",onClick:()=>r(i.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove collaborator",children:g.jsx(hu,{className:"h-4 w-4"})})]})]},i.id))});async function Q1e(t,e){if(!t)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:t.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:t.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:t.explanation,keyPoints:t.keyPoints,problem:e?{title:e.title,description:e.description,requirements:Array.isArray(e.requirements)?e.requirements.join(`.
`):e.requirements,constraints:Array.isArray(e.constraints)?e.constraints.join(`.
`):e.constraints,difficulty:e.difficulty,category:e.category,estimatedTime:e.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),eye(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function eye(t){const e=t,n=(e.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:e.is_valid||!1,score:e.overall_score||0,feedback:n,suggestions:e.suggestions||[],missingComponents:e.missing_components||[],architectureStrengths:e.strengths||[],improvements:e.improvements||[]}}function i7(t){return be({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(t)}const dq=Ae.memo(({id:t,data:e,onCopy:n,isInGroup:r})=>{const[i,s]=Ae.useState({visible:!1,x:0,y:0}),o=e.componentName||e.label,l=Ae.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),u=Ae.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),d=Ae.useCallback(b=>{b.stopPropagation(),n?.(t,e)},[t,e,n]),f=Ae.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:t}}))},[t]),p=Ae.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s({visible:!0,x:b.clientX,y:b.clientY})},[]),m=Ae.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return Ae.useEffect(()=>{if(i.visible){const b=v=>{const w=document.querySelector("[data-context-menu]");w&&!w.contains(v.target)&&m()};return document.addEventListener("click",b),document.addEventListener("contextmenu",b),()=>{document.removeEventListener("click",b),document.removeEventListener("contextmenu",b)}}},[i.visible,m]),g.jsxs(g.Fragment,{children:[g.jsxs(gt.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative p-3",onContextMenu:p,children:[g.jsx("legend",{className:"sr-only",children:o}),g.jsx(Nn,{id:"top",type:"source",position:Re.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Re.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Re.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Re.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[g.jsxs("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)]/20 to-[var(--brand)]/5 flex items-center justify-center text-xl relative overflow-hidden",children:[g.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent to-[var(--brand)]/10 rounded-full"}),g.jsx("div",{className:"relative z-10 opacity-80",children:e.icon?Ae.createElement(e.icon,{size:24}):""})]}),g.jsxs("div",{className:"min-w-0 w-full text-center",children:[g.jsx("div",{className:"truncate font-medium text-sm",children:o}),e.subtitle&&g.jsx("div",{className:"text-xs text-muted truncate",children:e.subtitle})]})]})]}),i.visible&&mh.createPortal(g.jsxs(gt.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),u(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Eg,{className:"w-4 h-4"}),"Settings"]}),r&&g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),f(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[g.jsx(t8,{className:"w-4 h-4"}),"Detach from Group"]}),g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),d(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(i7,{className:"w-4 h-4"}),"Duplicate"]}),g.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),l(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[g.jsx(fu,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});dq.displayName="Node";/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:fq,setPrototypeOf:UO,isFrozen:tye,getPrototypeOf:nye,getOwnPropertyDescriptor:rye}=Object;let{freeze:Mr,seal:ji,create:Vw}=Object,{apply:Hw,construct:Fw}=typeof Reflect<"u"&&Reflect;Mr||(Mr=function(e){return e});ji||(ji=function(e){return e});Hw||(Hw=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return e.apply(n,i)});Fw||(Fw=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new e(...r)});const N0=_r(Array.prototype.forEach),iye=_r(Array.prototype.lastIndexOf),$O=_r(Array.prototype.pop),Gd=_r(Array.prototype.push),sye=_r(Array.prototype.splice),G0=_r(String.prototype.toLowerCase),e6=_r(String.prototype.toString),t6=_r(String.prototype.match),Wd=_r(String.prototype.replace),oye=_r(String.prototype.indexOf),aye=_r(String.prototype.trim),$i=_r(Object.prototype.hasOwnProperty),Cr=_r(RegExp.prototype.test),Kd=lye(TypeError);function _r(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Hw(t,e,r)}}function lye(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Fw(t,n)}}function lt(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:G0;UO&&UO(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const s=n(i);s!==i&&(tye(e)||(e[r]=s),i=s)}t[i]=!0}return t}function cye(t){for(let e=0;e<t.length;e++)$i(t,e)||(t[e]=null);return t}function to(t){const e=Vw(null);for(const[n,r]of fq(t))$i(t,n)&&(Array.isArray(r)?e[n]=cye(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=to(r):e[n]=r);return e}function Yd(t,e){for(;t!==null;){const r=rye(t,e);if(r){if(r.get)return _r(r.get);if(typeof r.value=="function")return _r(r.value)}t=nye(t)}function n(){return null}return n}const GO=Mr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),n6=Mr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),r6=Mr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uye=Mr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),i6=Mr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dye=Mr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),WO=Mr(["#text"]),KO=Mr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),s6=Mr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YO=Mr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),T0=Mr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fye=ji(/\{\{[\w\W]*|[\w\W]*\}\}/gm),hye=ji(/<%[\w\W]*|[\w\W]*%>/gm),pye=ji(/\$\{[\w\W]*/gm),mye=ji(/^data-[\-\w.\u00B7-\uFFFF]+$/),gye=ji(/^aria-[\-\w]+$/),hq=ji(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),yye=ji(/^(?:\w+script|data):/i),bye=ji(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pq=ji(/^html$/i),vye=ji(/^[a-z][.\w]*(-[.\w]+)+$/i);var XO=Object.freeze({__proto__:null,ARIA_ATTR:gye,ATTR_WHITESPACE:bye,CUSTOM_ELEMENT:vye,DATA_ATTR:mye,DOCTYPE_NAME:pq,ERB_EXPR:hye,IS_ALLOWED_URI:hq,IS_SCRIPT_OR_DATA:yye,MUSTACHE_EXPR:fye,TMPLIT_EXPR:pye});const Xd={element:1,text:3,progressingInstruction:7,comment:8,document:9},xye=function(){return typeof window>"u"?null:window},wye=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},ZO=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function mq(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xye();const e=Le=>mq(Le);if(e.version="3.3.0",e.removed=[],!t||!t.document||t.document.nodeType!==Xd.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:d,NamedNodeMap:f=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:b}=t,v=u.prototype,w=Yd(v,"cloneNode"),S=Yd(v,"remove"),k=Yd(v,"nextSibling"),T=Yd(v,"childNodes"),E=Yd(v,"parentNode");if(typeof o=="function"){const Le=n.createElement("template");Le.content&&Le.content.ownerDocument&&(n=Le.content.ownerDocument)}let N,A="";const{implementation:_,createNodeIterator:j,createDocumentFragment:R,getElementsByTagName:L}=n,{importNode:P}=r;let F=ZO();e.isSupported=typeof fq=="function"&&typeof E=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:q,TMPLIT_EXPR:I,DATA_ATTR:U,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:H,ATTR_WHITESPACE:G,CUSTOM_ELEMENT:ee}=XO;let{IS_ALLOWED_URI:B}=XO,W=null;const ie=lt({},[...GO,...n6,...r6,...i6,...WO]);let oe=null;const $=lt({},[...KO,...s6,...YO,...T0]);let Z=Object.seal(Vw(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,ce=null;const re=Object.seal(Vw(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ye=!0,Ce=!0,De=!1,Se=!0,Ne=!1,Ee=!0,Me=!1,yt=!1,Pe=!1,vt=!1,wt=!1,Yt=!1,gn=!0,qt=!1;const Mt="user-content-";let Dn=!0,yn=!1,zt={},ht=null;const _t=lt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Dt=null;const vr=lt({},["audio","video","img","source","image","track"]);let qr=null;const Ii=lt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),rn="http://www.w3.org/1998/Math/MathML",ze="http://www.w3.org/2000/svg",Ge="http://www.w3.org/1999/xhtml";let xr=Ge,pt=!1,bn=null;const wo=lt({},[rn,ze,Ge],e6);let Pi=lt({},["mi","mo","mn","ms","mtext"]),Ur=lt({},["annotation-xml"]);const $r=lt({},["title","style","font","a","script"]);let wr=null;const Dr=["application/xhtml+xml","text/html"],Gr="text/html";let St=null,Kn=null;const So=n.createElement("form"),zi=function(J){return J instanceof RegExp||J instanceof Function},sr=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Kn&&Kn===J)){if((!J||typeof J!="object")&&(J={}),J=to(J),wr=Dr.indexOf(J.PARSER_MEDIA_TYPE)===-1?Gr:J.PARSER_MEDIA_TYPE,St=wr==="application/xhtml+xml"?e6:G0,W=$i(J,"ALLOWED_TAGS")?lt({},J.ALLOWED_TAGS,St):ie,oe=$i(J,"ALLOWED_ATTR")?lt({},J.ALLOWED_ATTR,St):$,bn=$i(J,"ALLOWED_NAMESPACES")?lt({},J.ALLOWED_NAMESPACES,e6):wo,qr=$i(J,"ADD_URI_SAFE_ATTR")?lt(to(Ii),J.ADD_URI_SAFE_ATTR,St):Ii,Dt=$i(J,"ADD_DATA_URI_TAGS")?lt(to(vr),J.ADD_DATA_URI_TAGS,St):vr,ht=$i(J,"FORBID_CONTENTS")?lt({},J.FORBID_CONTENTS,St):_t,te=$i(J,"FORBID_TAGS")?lt({},J.FORBID_TAGS,St):to({}),ce=$i(J,"FORBID_ATTR")?lt({},J.FORBID_ATTR,St):to({}),zt=$i(J,"USE_PROFILES")?J.USE_PROFILES:!1,ye=J.ALLOW_ARIA_ATTR!==!1,Ce=J.ALLOW_DATA_ATTR!==!1,De=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Se=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ne=J.SAFE_FOR_TEMPLATES||!1,Ee=J.SAFE_FOR_XML!==!1,Me=J.WHOLE_DOCUMENT||!1,vt=J.RETURN_DOM||!1,wt=J.RETURN_DOM_FRAGMENT||!1,Yt=J.RETURN_TRUSTED_TYPE||!1,Pe=J.FORCE_BODY||!1,gn=J.SANITIZE_DOM!==!1,qt=J.SANITIZE_NAMED_PROPS||!1,Dn=J.KEEP_CONTENT!==!1,yn=J.IN_PLACE||!1,B=J.ALLOWED_URI_REGEXP||hq,xr=J.NAMESPACE||Ge,Pi=J.MATHML_TEXT_INTEGRATION_POINTS||Pi,Ur=J.HTML_INTEGRATION_POINTS||Ur,Z=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&zi(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&zi(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ne&&(Ce=!1),wt&&(vt=!0),zt&&(W=lt({},WO),oe=[],zt.html===!0&&(lt(W,GO),lt(oe,KO)),zt.svg===!0&&(lt(W,n6),lt(oe,s6),lt(oe,T0)),zt.svgFilters===!0&&(lt(W,r6),lt(oe,s6),lt(oe,T0)),zt.mathMl===!0&&(lt(W,i6),lt(oe,YO),lt(oe,T0))),J.ADD_TAGS&&(typeof J.ADD_TAGS=="function"?re.tagCheck=J.ADD_TAGS:(W===ie&&(W=to(W)),lt(W,J.ADD_TAGS,St))),J.ADD_ATTR&&(typeof J.ADD_ATTR=="function"?re.attributeCheck=J.ADD_ATTR:(oe===$&&(oe=to(oe)),lt(oe,J.ADD_ATTR,St))),J.ADD_URI_SAFE_ATTR&&lt(qr,J.ADD_URI_SAFE_ATTR,St),J.FORBID_CONTENTS&&(ht===_t&&(ht=to(ht)),lt(ht,J.FORBID_CONTENTS,St)),Dn&&(W["#text"]=!0),Me&&lt(W,["html","head","body"]),W.table&&(lt(W,["tbody"]),delete te.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw Kd('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Kd('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=J.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else N===void 0&&(N=wye(b,i)),N!==null&&typeof A=="string"&&(A=N.createHTML(""));Mr&&Mr(J),Kn=J}},Xt=lt({},[...n6,...r6,...uye]),Bt=lt({},[...i6,...dye]),Rr=function(J){let ge=E(J);(!ge||!ge.tagName)&&(ge={namespaceURI:xr,tagName:"template"});const je=G0(J.tagName),dt=G0(ge.tagName);return bn[J.namespaceURI]?J.namespaceURI===ze?ge.namespaceURI===Ge?je==="svg":ge.namespaceURI===rn?je==="svg"&&(dt==="annotation-xml"||Pi[dt]):!!Xt[je]:J.namespaceURI===rn?ge.namespaceURI===Ge?je==="math":ge.namespaceURI===ze?je==="math"&&Ur[dt]:!!Bt[je]:J.namespaceURI===Ge?ge.namespaceURI===ze&&!Ur[dt]||ge.namespaceURI===rn&&!Pi[dt]?!1:!Bt[je]&&($r[je]||!Xt[je]):!!(wr==="application/xhtml+xml"&&bn[J.namespaceURI]):!1},Rn=function(J){Gd(e.removed,{element:J});try{E(J).removeChild(J)}catch{S(J)}},Wr=function(J,ge){try{Gd(e.removed,{attribute:ge.getAttributeNode(J),from:ge})}catch{Gd(e.removed,{attribute:null,from:ge})}if(ge.removeAttribute(J),J==="is")if(vt||wt)try{Rn(ge)}catch{}else try{ge.setAttribute(J,"")}catch{}},es=function(J){let ge=null,je=null;if(Pe)J="<remove></remove>"+J;else{const Rt=t6(J,/^[\r\n\t ]+/);je=Rt&&Rt[0]}wr==="application/xhtml+xml"&&xr===Ge&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const dt=N?N.createHTML(J):J;if(xr===Ge)try{ge=new m().parseFromString(dt,wr)}catch{}if(!ge||!ge.documentElement){ge=_.createDocument(xr,"template",null);try{ge.documentElement.innerHTML=pt?A:dt}catch{}}const Vt=ge.body||ge.documentElement;return J&&je&&Vt.insertBefore(n.createTextNode(je),Vt.childNodes[0]||null),xr===Ge?L.call(ge,Me?"html":"body")[0]:Me?ge.documentElement:Vt},Ls=function(J){return j.call(J.ownerDocument||J,J,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Kr=function(J){return J instanceof p&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof f)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},ts=function(J){return typeof l=="function"&&J instanceof l};function vn(Le,J,ge){N0(Le,je=>{je.call(e,J,ge,Kn)})}const Ue=function(J){let ge=null;if(vn(F.beforeSanitizeElements,J,null),Kr(J))return Rn(J),!0;const je=St(J.nodeName);if(vn(F.uponSanitizeElement,J,{tagName:je,allowedTags:W}),Ee&&J.hasChildNodes()&&!ts(J.firstElementChild)&&Cr(/<[/\w!]/g,J.innerHTML)&&Cr(/<[/\w!]/g,J.textContent)||J.nodeType===Xd.progressingInstruction||Ee&&J.nodeType===Xd.comment&&Cr(/<[/\w]/g,J.data))return Rn(J),!0;if(!(re.tagCheck instanceof Function&&re.tagCheck(je))&&(!W[je]||te[je])){if(!te[je]&&ar(je)&&(Z.tagNameCheck instanceof RegExp&&Cr(Z.tagNameCheck,je)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(je)))return!1;if(Dn&&!ht[je]){const dt=E(J)||J.parentNode,Vt=T(J)||J.childNodes;if(Vt&&dt){const Rt=Vt.length;for(let Ut=Rt-1;Ut>=0;--Ut){const zn=w(Vt[Ut],!0);zn.__removalCount=(J.__removalCount||0)+1,dt.insertBefore(zn,k(J))}}}return Rn(J),!0}return J instanceof u&&!Rr(J)||(je==="noscript"||je==="noembed"||je==="noframes")&&Cr(/<\/no(script|embed|frames)/i,J.innerHTML)?(Rn(J),!0):(Ne&&J.nodeType===Xd.text&&(ge=J.textContent,N0([V,q,I],dt=>{ge=Wd(ge,dt," ")}),J.textContent!==ge&&(Gd(e.removed,{element:J.cloneNode()}),J.textContent=ge)),vn(F.afterSanitizeElements,J,null),!1)},or=function(J,ge,je){if(gn&&(ge==="id"||ge==="name")&&(je in n||je in So))return!1;if(!(Ce&&!ce[ge]&&Cr(U,ge))){if(!(ye&&Cr(O,ge))){if(!(re.attributeCheck instanceof Function&&re.attributeCheck(ge,J))){if(!oe[ge]||ce[ge]){if(!(ar(J)&&(Z.tagNameCheck instanceof RegExp&&Cr(Z.tagNameCheck,J)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(J))&&(Z.attributeNameCheck instanceof RegExp&&Cr(Z.attributeNameCheck,ge)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(ge,J))||ge==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&Cr(Z.tagNameCheck,je)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(je))))return!1}else if(!qr[ge]){if(!Cr(B,Wd(je,G,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&J!=="script"&&oye(je,"data:")===0&&Dt[J])){if(!(De&&!Cr(H,Wd(je,G,"")))){if(je)return!1}}}}}}}return!0},ar=function(J){return J!=="annotation-xml"&&t6(J,ee)},Lt=function(J){vn(F.beforeSanitizeAttributes,J,null);const{attributes:ge}=J;if(!ge||Kr(J))return;const je={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:oe,forceKeepAttr:void 0};let dt=ge.length;for(;dt--;){const Vt=ge[dt],{name:Rt,namespaceURI:Ut,value:zn}=Vt,xn=St(Rt),fi=zn;let Ht=Rt==="value"?fi:aye(fi);if(je.attrName=xn,je.attrValue=Ht,je.keepAttr=!0,je.forceKeepAttr=void 0,vn(F.uponSanitizeAttribute,J,je),Ht=je.attrValue,qt&&(xn==="id"||xn==="name")&&(Wr(Rt,J),Ht=Mt+Ht),Ee&&Cr(/((--!?|])>)|<\/(style|title|textarea)/i,Ht)){Wr(Rt,J);continue}if(xn==="attributename"&&t6(Ht,"href")){Wr(Rt,J);continue}if(je.forceKeepAttr)continue;if(!je.keepAttr){Wr(Rt,J);continue}if(!Se&&Cr(/\/>/i,Ht)){Wr(Rt,J);continue}Ne&&N0([V,q,I],rs=>{Ht=Wd(Ht,rs," ")});const Yn=St(J.nodeName);if(!or(Yn,xn,Ht)){Wr(Rt,J);continue}if(N&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Ut)switch(b.getAttributeType(Yn,xn)){case"TrustedHTML":{Ht=N.createHTML(Ht);break}case"TrustedScriptURL":{Ht=N.createScriptURL(Ht);break}}if(Ht!==fi)try{Ut?J.setAttributeNS(Ut,Rt,Ht):J.setAttribute(Rt,Ht),Kr(J)?Rn(J):$O(e.removed)}catch{Wr(Rt,J)}}vn(F.afterSanitizeAttributes,J,null)},ns=function Le(J){let ge=null;const je=Ls(J);for(vn(F.beforeSanitizeShadowDOM,J,null);ge=je.nextNode();)vn(F.uponSanitizeShadowNode,ge,null),Ue(ge),Lt(ge),ge.content instanceof s&&Le(ge.content);vn(F.afterSanitizeShadowDOM,J,null)};return e.sanitize=function(Le){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,je=null,dt=null,Vt=null;if(pt=!Le,pt&&(Le="<!-->"),typeof Le!="string"&&!ts(Le))if(typeof Le.toString=="function"){if(Le=Le.toString(),typeof Le!="string")throw Kd("dirty is not a string, aborting")}else throw Kd("toString is not a function");if(!e.isSupported)return Le;if(yt||sr(J),e.removed=[],typeof Le=="string"&&(yn=!1),yn){if(Le.nodeName){const zn=St(Le.nodeName);if(!W[zn]||te[zn])throw Kd("root node is forbidden and cannot be sanitized in-place")}}else if(Le instanceof l)ge=es("<!---->"),je=ge.ownerDocument.importNode(Le,!0),je.nodeType===Xd.element&&je.nodeName==="BODY"||je.nodeName==="HTML"?ge=je:ge.appendChild(je);else{if(!vt&&!Ne&&!Me&&Le.indexOf("<")===-1)return N&&Yt?N.createHTML(Le):Le;if(ge=es(Le),!ge)return vt?null:Yt?A:""}ge&&Pe&&Rn(ge.firstChild);const Rt=Ls(yn?Le:ge);for(;dt=Rt.nextNode();)Ue(dt),Lt(dt),dt.content instanceof s&&ns(dt.content);if(yn)return Le;if(vt){if(wt)for(Vt=R.call(ge.ownerDocument);ge.firstChild;)Vt.appendChild(ge.firstChild);else Vt=ge;return(oe.shadowroot||oe.shadowrootmode)&&(Vt=P.call(r,Vt,!0)),Vt}let Ut=Me?ge.outerHTML:ge.innerHTML;return Me&&W["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&Cr(pq,ge.ownerDocument.doctype.name)&&(Ut="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+Ut),Ne&&N0([V,q,I],zn=>{Ut=Wd(Ut,zn," ")}),N&&Yt?N.createHTML(Ut):Ut},e.setConfig=function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sr(Le),yt=!0},e.clearConfig=function(){Kn=null,yt=!1},e.isValidAttribute=function(Le,J,ge){Kn||sr({});const je=St(Le),dt=St(J);return or(je,dt,ge)},e.addHook=function(Le,J){typeof J=="function"&&Gd(F[Le],J)},e.removeHook=function(Le,J){if(J!==void 0){const ge=iye(F[Le],J);return ge===-1?void 0:sye(F[Le],ge,1)[0]}return $O(F[Le])},e.removeHooks=function(Le){F[Le]=[]},e.removeAllHooks=function(){F=ZO()},e}var o6=mq();const gq=Ae.memo(({id:t,data:e,onCopy:n,isInGroup:r})=>{const[i,s]=Ae.useState({visible:!1,x:0,y:0}),o=e.componentName||e.label,l=e.nodeType||"entity",u=Ae.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),d=Ae.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),f=Ae.useCallback(N=>{N.stopPropagation(),n?.(t,e)},[t,e,n]),p=Ae.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:t}}))},[t]),m=Ae.useCallback(N=>{N.preventDefault(),N.stopPropagation(),s({visible:!0,x:N.clientX,y:N.clientY})},[]),b=Ae.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);Ae.useEffect(()=>{if(i.visible){const N=A=>{const _=document.querySelector("[data-context-menu]");_&&!_.contains(A.target)&&b()};return document.addEventListener("click",N),document.addEventListener("contextmenu",N),()=>{document.removeEventListener("click",N),document.removeEventListener("contextmenu",N)}}},[i.visible,b]);const v=e.attributes?e.attributes.split(`
`).filter(N=>N.trim()):[],S=(()=>{switch(l){case"weak-entity":return{border:"3px double var(--theme-color, #333)",borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"};case"er-note":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};case"er-trigger":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--accent-bg, #fef3e7)",borderLeft:"4px solid var(--accent, #f59e0b)"};case"er-view":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px",borderStyle:"dashed",borderWidth:"2px"};case"uml-use-case":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--brand, #6366f1)"};case"uml-note":return{borderRadius:"0.25rem",minWidth:"160px",maxWidth:"450px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};default:return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"}}})(),k=l==="er-note"||l==="uml-note"||l==="uml-use-case",T=l==="er-trigger",E=["uml-use-case","uml-note"].includes(l);return g.jsxs(g.Fragment,{children:[g.jsxs(gt.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:`bg-surface border-2 border-theme text-sm shadow-sm cursor-grab relative overflow-y-auto er-node-scroll ${k?"bg-yellow-50 dark:bg-yellow-900/20 text-gray-900 dark:text-gray-100":""} ${T?"bg-orange-50 dark:bg-orange-900/20 text-gray-900 dark:text-gray-100":"text-theme"}`,style:S,onContextMenu:m,children:[g.jsx(Nn,{id:"top",type:"source",position:Re.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Re.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Re.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Re.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),!k&&!T&&g.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold text-center flex items-center justify-center gap-2",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{children:o})]}),k&&g.jsxs("div",{className:"px-3 py-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),e.description&&g.jsx("div",{className:"text-xs text-gray-700 mt-1",dangerouslySetInnerHTML:{__html:o6.sanitize(e.description)}})]}),T&&g.jsxs("div",{className:"px-3 py-2",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),g.jsxs("div",{className:"text-xs space-y-1 mt-2",children:[e.timing&&e.event&&g.jsxs("div",{className:"font-mono text-[11px] text-orange-700",children:[e.timing," ",e.event]}),e.targetTable&&g.jsxs("div",{className:"text-gray-700",children:["ON ",g.jsx("span",{className:"font-semibold text-gray-700",children:e.targetTable})]}),e.level&&g.jsxs("div",{className:"text-gray-600 text-[10px]",children:["FOR EACH ",e.level]}),e.description&&g.jsx("div",{className:"text-gray-700 mt-1 pt-1 border-t border-gray-300",dangerouslySetInnerHTML:{__html:o6.sanitize(e.description)}})]})]}),E&&!k&&g.jsx("div",{className:"px-4 py-3",children:g.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.icon&&g.jsx("span",{className:"text-3xl",children:e.icon}),g.jsx("span",{className:"font-semibold text-theme text-center",children:o}),e.description&&g.jsx("div",{className:"text-xs text-muted mt-1 text-center",dangerouslySetInnerHTML:{__html:o6.sanitize(e.description)}})]})}),(l==="entity"||l==="weak-entity")&&v.length>0&&g.jsx("div",{className:"px-3 py-2 border-t border-theme/20",children:g.jsx("div",{className:"space-y-1 text-xs",children:v.map((N,A)=>{const _=e.primaryKey&&N.includes(e.primaryKey),j=e.foreignKeys&&e.foreignKeys.split(`
`).some(R=>N.includes(R));return g.jsx("div",{className:`font-mono ${_?"font-bold text-yellow-600 dark:text-yellow-400":j?"text-blue-600 dark:text-blue-400":""}`,children:N.trim().startsWith("+")?g.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[" ",N.trim().substring(1).trim()]}):N.trim()},A)})})})]}),i.visible&&mh.createPortal(g.jsxs(gt.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),d(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Eg,{className:"w-4 h-4"}),"Settings"]}),r&&g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),p(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[g.jsx(t8,{className:"w-4 h-4"}),"Detach from Group"]}),g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),f(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(i7,{className:"w-4 h-4"}),"Duplicate"]}),g.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),u(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[g.jsx(fu,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});gq.displayName="ERNode";const yq=Ae.memo(({id:t,data:e,onCopy:n,isInGroup:r})=>{const[i,s]=M.useState({visible:!1,x:0,y:0}),[o,l]=M.useState(null),[u,d]=M.useState({name:"",type:""}),f=e.componentName||e.label,p=Ae.useMemo(()=>{if(!e.attributes)return[];if(Array.isArray(e.attributes))return e.attributes;if(typeof e.attributes=="string")try{const P=JSON.parse(e.attributes);return Array.isArray(P)?P:[]}catch{return[]}return[]},[e.attributes]),m=Ae.useMemo(()=>e.renderConfig?.columns&&e.renderConfig.columns.length>0?e.renderConfig.columns:[{key:"pk",label:"PK",width:"w-6"},{key:"name",label:"Column Name",width:"flex-1"},{key:"type",label:"Data Type",width:"w-24"},{key:"actions",label:"",width:"w-8"}],[e.renderConfig]),b=M.useCallback(P=>{P.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),v=M.useCallback(P=>{P.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]),w=M.useCallback(P=>{P.stopPropagation(),n?.(t,e)},[t,e,n]),S=M.useCallback(P=>{P.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:t}}))},[t]),k=M.useCallback(P=>{P.preventDefault(),P.stopPropagation(),s({visible:!0,x:P.clientX,y:P.clientY})},[]),T=M.useCallback(()=>{s({visible:!1,x:0,y:0})},[]),E=M.useCallback(P=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-delete",{detail:{nodeId:t,attributeId:P}}))},[t]),N=M.useCallback(P=>{P.stopPropagation();const V=e.componentId?.startsWith("uml-")?{id:`attr-${Date.now()}`,name:"+ newMethod()",type:"void",isNullable:!1}:{id:`attr-${Date.now()}`,name:"newColumn",type:"VARCHAR(255)",isNullable:!0};globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-add",{detail:{nodeId:t,attribute:V}}))},[t,e.componentId]),A=M.useCallback((P,F)=>{F.stopPropagation(),l(P.id),d({name:P.name,type:P.type})},[]),_=M.useCallback(()=>{o&&(globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-update",{detail:{nodeId:t,attributeId:o,name:u.name,type:u.type}})),l(null))},[t,o,u]),j=M.useCallback(()=>{l(null)},[]),R=M.useCallback((P,F)=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-toggle",{detail:{nodeId:t,attributeId:P,key:F}}))},[t]),L=M.useCallback((P,F,V)=>{const q=P.width||"flex-1",I=F[P.key];if(P.type==="boolean"){const U=!!I,H=P.key==="isNullable"?!U:U,G=H?P.icon?.active:P.icon?.inactive,ee=H?P.color?.active:P.color?.inactive;return g.jsx("button",{type:"button",onClick:()=>R(F.id,P.key),className:`${q} flex items-center justify-center ${ee||""}`,title:P.label,children:G?g.jsx("span",{className:"text-xs",children:G}):g.jsx("div",{className:"w-3 h-3 border border-theme/40 rounded"})},P.key)}if(P.type==="text"&&P.editable){if(V)return g.jsx("input",{type:"text",value:String(u[P.key]||I||""),onChange:O=>d({...u,[P.key]:O.target.value}),onKeyDown:O=>{O.key==="Enter"&&_(),O.key==="Escape"&&j()},className:`${q} px-1 py-0.5 bg-surface border border-theme/40 rounded text-xs`,autoFocus:P.key==="name",onClick:O=>O.stopPropagation()},P.key);let U="text-xs cursor-pointer";return P.key==="name"?F.isPrimaryKey?U+=" font-semibold text-yellow-600 dark:text-yellow-400":F.isForeignKey&&(U+=" text-blue-600 dark:text-blue-400"):P.key==="type"&&(U+=" text-muted"),g.jsx("span",{className:`${q} truncate ${U}`,onDoubleClick:O=>A(F,O),title:"Double-click to edit",role:"button",tabIndex:0,children:String(I||"")},P.key)}return P.type==="readonly"&&P.key==="actions"?V?g.jsx("button",{type:"button",onClick:_,className:`${q} text-green-600 hover:text-green-700 text-xs`,title:"Save",children:""},"actions"):g.jsx("button",{type:"button",onClick:()=>E(F.id),className:`${q} opacity-0 group-hover:opacity-100 text-red-600 hover:text-red-700 transition-opacity`,title:"Delete attribute",children:g.jsx(fu,{className:"w-3 h-3"})},"actions"):g.jsx("span",{className:q,children:String(I||"")},P.key)},[R,E,A,_,j,u]);return Ae.useEffect(()=>{if(i.visible){const P=F=>{const V=document.querySelector("[data-context-menu]");V&&!V.contains(F.target)&&T()};return document.addEventListener("click",P),document.addEventListener("contextmenu",P),()=>{document.removeEventListener("click",P),document.removeEventListener("contextmenu",P)}}},[i.visible,T]),g.jsxs(g.Fragment,{children:[g.jsxs(gt.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[220px] max-h-[500px] bg-surface border-2 border-theme text-theme text-sm shadow-lg cursor-grab relative rounded-lg overflow-hidden flex flex-col",onContextMenu:k,children:[g.jsx(Nn,{id:"top",type:"source",position:Re.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Re.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Re.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Re.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold flex items-center justify-between flex-shrink-0",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[e.icon&&g.jsx("span",{className:"text-lg",children:e.icon}),g.jsx("span",{children:f})]}),g.jsx("button",{type:"button",onClick:N,className:"p-1 hover:bg-white/20 rounded transition-colors",title:"Add attribute",children:g.jsx(H6,{className:"w-4 h-4"})})]}),g.jsx("div",{className:"bg-[var(--bg-hover)] px-3 py-1 border-b border-theme/20 flex items-center gap-2 text-xs font-semibold flex-shrink-0",children:m.map(P=>g.jsx("span",{className:P.width||"flex-1",style:{textAlign:P.align||"left"},children:P.label},P.key))}),g.jsx("div",{className:"divide-y divide-theme/10 overflow-y-auto flex-1 table-node-scroll",children:p.map(P=>{const F=o===P.id;return g.jsx("div",{className:"flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] group",children:m.map(V=>L(V,P,F))},P.id)})}),p.length===0&&g.jsx("div",{className:"px-3 py-4 text-center text-xs text-muted",children:"Click + to add attributes"})]}),i.visible&&mh.createPortal(g.jsxs(gt.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[g.jsxs("button",{type:"button",onClick:P=>{P.stopPropagation(),v(P),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(Eg,{className:"w-4 h-4"}),"Settings"]}),g.jsxs("button",{type:"button",onClick:P=>{P.stopPropagation(),N(P),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(H6,{className:"w-4 h-4"}),"Add Attribute"]}),r&&g.jsxs("button",{type:"button",onClick:P=>{P.stopPropagation(),S(P),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[g.jsx(t8,{className:"w-4 h-4"}),"Detach from Group"]}),g.jsxs("button",{type:"button",onClick:P=>{P.stopPropagation(),w(P),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[g.jsx(i7,{className:"w-4 h-4"}),"Duplicate"]}),g.jsxs("button",{type:"button",onClick:P=>{P.stopPropagation(),b(P),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[g.jsx(fu,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});yq.displayName="TableNode";const Sye=({sourceX:t,sourceY:e,targetX:n,targetY:r},i)=>{const s=(t+n)/2,o=(e+r)/2;return`M ${t} ${e} Q ${s} ${o+i} ${n} ${r}`},Cye=(t,e)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=t;if(e){const d=n<i?25:-25,f=Sye({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,b=p,v=m+d/2;return{edgePath:f,centerX:b,centerY:v}}const[o]=Jg(t),[l,u]=Qg({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},kye=t=>{const{id:e,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:f,selected:p,markerEnd:m}=t,[b,v]=M.useState(!1),[w,S]=M.useState(f?.label??""),[k,T]=M.useState(f?.hasLabel??!1),E=M.useRef(null),N=ct(q=>{const I=q.edges.some(U=>U.id!==e&&U.source===r&&U.target===n);return I&&console.log(`Bi-directional edge detected: ${e} (${n} -> ${r})`),I}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:j,centerY:R}=Cye(A,N),L=q=>{q.stopPropagation(),v(!0),setTimeout(()=>E.current?.focus(),0)},P=q=>{q.stopPropagation(),T(!0),v(!0),setTimeout(()=>E.current?.focus(),0)},F=q=>{q.stopPropagation(),T(!1),S(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:"",hasLabel:!1}}))},V=()=>{v(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:w,hasLabel:k||w.trim().length>0}}))};return g.jsxs("g",{className:"react-flow__edge",children:[g.jsx("defs",{children:g.jsx("marker",{id:`arrow-${e}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:g.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),g.jsx("path",{id:e,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:m||`url(#arrow-${e})`,className:"transition-colors"}),g.jsx("foreignObject",{x:j-75,y:R-12,width:150,height:24,className:"overflow-visible",children:g.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:k?g.jsx("div",{className:"flex items-center gap-1",children:b?g.jsx("input",{ref:E,value:w,onChange:q=>S(q.target.value),onBlur:V,onKeyDown:q=>{q.key==="Enter"&&V(),q.key==="Escape"&&(v(!1),S(f?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onDoubleClick:L,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:w||"Label"}),p&&g.jsx("button",{onClick:F,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&g.jsx("button",{onClick:P,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},Eye=({sourceX:t,sourceY:e,targetX:n,targetY:r},i)=>{const s=(t+n)/2,o=(e+r)/2;return`M ${t} ${e} Q ${s} ${o+i} ${n} ${r}`},Nye=(t,e)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=t;if(e){const d=n<i?25:-25,f=Eye({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,b=p,v=m+d/2;return{edgePath:f,centerX:b,centerY:v}}const[o]=Jg(t),[l,u]=Qg({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Tye=t=>{switch(t){case"one-to-one":case"one-to-many":case"zero-to-one":case"one-mandatory-many-optional":case"one-or-many":return"one";case"many-to-one":case"many-to-many":case"mandatory-many-to-many":case"optional-many-to-many":return"many";case"mandatory-one-to-one":case"mandatory-one-to-many":return"mandatory-one";case"optional-zero-to-one":case"optional-zero-to-many":case"zero-to-many":return"optional-zero";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"one";case"recursive-many-to-many":return"many";default:return"one"}},Aye=t=>{switch(t){case"one-to-one":case"many-to-one":case"zero-to-one":return"one";case"one-to-many":case"many-to-many":case"zero-to-many":case"one-mandatory-many-optional":case"one-or-many":return"many";case"mandatory-one-to-one":return"mandatory-one";case"mandatory-one-to-many":case"mandatory-many-to-many":return"mandatory-many";case"optional-zero-to-one":return"optional-one";case"optional-zero-to-many":case"optional-many-to-many":return"optional-many";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"many";case"recursive-many-to-many":return"many";default:return"many"}},Mye=t=>{const{id:e,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:f,selected:p}=t,m=f||{},[b,v]=M.useState(!1),[w,S]=M.useState(m.label??""),[k,T]=M.useState(m.hasLabel??!1),[E,N]=M.useState(m.cardinality??"one-to-many"),A=M.useRef(null),_=ct(G=>G.edges.some(B=>B.id!==e&&B.source===r&&B.target===n)),j={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:R,centerX:L,centerY:P}=Nye(j,_),F=G=>{G.stopPropagation(),v(!0),setTimeout(()=>A.current?.focus(),0)},V=G=>{G.stopPropagation(),T(!0),v(!0),setTimeout(()=>A.current?.focus(),0)},q=G=>{G.stopPropagation(),T(!1),S(""),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:"",hasLabel:!1}}))},I=()=>{v(!1),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:e,label:w,hasLabel:k||w.trim().length>0}}))},U=G=>{N(G),globalThis.dispatchEvent(new CustomEvent("diagram:edge-cardinality-change",{detail:{id:e,cardinality:G}}))},O=Tye(E),H=Aye(E);return g.jsxs("g",{className:"react-flow__edge",children:[g.jsxs("defs",{children:[g.jsx("marker",{id:`er-one-${e}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:g.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),g.jsxs("marker",{id:`er-many-${e}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[g.jsx("line",{x1:"0",y1:"10",x2:"15",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-mandatory-one-${e}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[g.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"3",y1:"0",x2:"3",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-mandatory-many-${e}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[g.jsx("line",{x1:"0",y1:"10",x2:"12",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"3",y1:"8",x2:"3",y2:"12",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsx("marker",{id:`er-optional-zero-${e}`,viewBox:"0 0 12 12",refX:"10",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:g.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})}),g.jsxs("marker",{id:`er-optional-one-${e}`,viewBox:"0 0 15 12",refX:"14",refY:"6",markerWidth:"12",markerHeight:"10",orient:"auto",children:[g.jsx("circle",{cx:"4",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),g.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"12",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-optional-many-${e}`,viewBox:"0 0 25 20",refX:"23",refY:"10",markerWidth:"14",markerHeight:"12",orient:"auto",children:[g.jsx("circle",{cx:"4",cy:"10",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),g.jsx("line",{x1:"10",y1:"10",x2:"18",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsx("marker",{id:`er-one-source-${e}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:g.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),g.jsxs("marker",{id:`er-many-source-${e}`,viewBox:"0 0 20 20",refX:"2",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[g.jsx("line",{x1:"20",y1:"10",x2:"5",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsxs("marker",{id:`er-mandatory-one-source-${e}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[g.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),g.jsx("line",{x1:"7",y1:"0",x2:"7",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),g.jsx("marker",{id:`er-optional-zero-source-${e}`,viewBox:"0 0 12 12",refX:"2",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:g.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})})]}),g.jsx("path",{id:e,d:R,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:`url(#er-${H}-${e})`,markerStart:`url(#er-${O}-source-${e})`,className:"transition-colors"}),g.jsx("foreignObject",{x:L-100,y:P-40,width:200,height:80,className:"overflow-visible",children:g.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pointer-events-auto gap-2",children:[k?g.jsx("div",{className:"flex items-center gap-1",children:b?g.jsx("input",{ref:A,value:w,onChange:G=>S(G.target.value),onBlur:I,onKeyDown:G=>{G.key==="Enter"&&I(),G.key==="Escape"&&(v(!1),S(m.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):g.jsxs(g.Fragment,{children:[g.jsx("button",{onDoubleClick:F,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:w||"Label"}),p&&g.jsx("button",{onClick:q,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",type:"button",children:""})]})}):p&&g.jsx("button",{onClick:V,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",type:"button",children:"+ Label"}),p&&g.jsx("div",{className:"flex items-center gap-1 bg-[var(--surface)] border border-[var(--brand)] rounded px-2 py-1",children:g.jsxs("select",{value:E,onChange:G=>U(G.target.value),className:"text-xs bg-transparent text-theme focus:outline-none cursor-pointer",onClick:G=>G.stopPropagation(),children:[g.jsxs("optgroup",{label:" Basic Cardinality ",children:[g.jsx("option",{value:"one-to-one",children:"1:1 (One to One)"}),g.jsx("option",{value:"one-to-many",children:"1:N (One to Many)"}),g.jsx("option",{value:"many-to-one",children:"N:1 (Many to One)"}),g.jsx("option",{value:"many-to-many",children:"N:M (Many to Many)"})]}),g.jsxs("optgroup",{label:" Mandatory (Must Participate) ",children:[g.jsx("option",{value:"mandatory-one-to-one",children:"1:1 Mandatory (Both must exist)"}),g.jsx("option",{value:"mandatory-one-to-many",children:"1:N Mandatory (Both must exist)"}),g.jsx("option",{value:"mandatory-many-to-many",children:"M:N Mandatory (Both must exist)"})]}),g.jsxs("optgroup",{label:" Optional (May Participate) ",children:[g.jsx("option",{value:"optional-zero-to-one",children:"0:1 Optional (Zero or One)"}),g.jsx("option",{value:"optional-zero-to-many",children:"0:N Optional (Zero or Many)"}),g.jsx("option",{value:"optional-many-to-many",children:"0:M to 0:N Optional (Both optional)"})]}),g.jsxs("optgroup",{label:" Mixed Participation ",children:[g.jsx("option",{value:"one-mandatory-many-optional",children:"1 to 0..N (One mandatory, many optional)"}),g.jsx("option",{value:"zero-to-one",children:"0..1 (Zero or One)"}),g.jsx("option",{value:"zero-to-many",children:"0..N (Zero or Many)"}),g.jsx("option",{value:"one-or-many",children:"1..N (One or Many - at least one)"})]}),g.jsxs("optgroup",{label:" Recursive (Self-Referencing) ",children:[g.jsx("option",{value:"recursive-one-to-one",children:"Self 1:1 (Recursive One-to-One)"}),g.jsx("option",{value:"recursive-one-to-many",children:"Self 1:N (Recursive One-to-Many)"}),g.jsx("option",{value:"recursive-many-to-many",children:"Self M:N (Recursive Many-to-Many)"})]})]})})]})})]})},_ye=({id:t,data:e})=>{const n=e.backgroundColor||"rgba(100, 100, 255, 0.05)",r=e.borderColor||"rgba(100, 100, 255, 0.3)",i=Ae.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:t}}))},[t]),s=Ae.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:t}}))},[t]);return g.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[g.jsx(Uhe,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),g.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[g.jsx(gt.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:g.jsx(Eg,{className:"w-3 h-3"})}),g.jsx(gt.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:g.jsx(fu,{className:"w-3 h-3"})})]}),g.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.icon&&g.jsx("span",{children:e.icon}),g.jsx("span",{children:e.label})]}),e.subtitle&&g.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:e.subtitle}),g.jsx(Nn,{id:"top",type:"source",position:Re.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"right",type:"source",position:Re.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"bottom",type:"source",position:Re.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),g.jsx(Nn,{id:"left",type:"source",position:Re.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Dye=({property:t,onUpdate:e,onDelete:n,isNew:r=!1})=>{const[i,s]=M.useState(r),o=d=>{e(t.id,{value:d})},l=(d,f)=>{e(t.id,{[d]:f})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return g.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[g.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[g.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?g.jsx(KJ,{size:18}):g.jsx(SP,{size:18}),g.jsx("span",{className:"text-sm font-medium text-theme truncate",children:t.label||"Unnamed Property"})]}),g.jsx("button",{type:"button",onClick:()=>n(t.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:g.jsx(fu,{size:16})})]}),i&&g.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[g.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[g.jsx(V0,{id:`${t.id}-key`,label:"Key",value:t.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),g.jsx(V0,{id:`${t.id}-label`,label:"Label",value:t.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),g.jsx(dV,{id:`${t.id}-type`,label:"Type",value:t.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),g.jsxs("div",{className:"border-t border-theme pt-3",children:[g.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),t.type==="text"&&g.jsx(V0,{id:`${t.id}-value`,label:"",value:String(t.value),onChange:o,placeholder:"Enter value"}),t.type==="textarea"&&g.jsx(Km,{id:`${t.id}-value`,label:"",value:String(t.value),onChange:o,placeholder:"Enter value"}),t.type==="number"&&g.jsx(uV,{id:`${t.id}-value`,label:"",value:Number(t.value)||0,onChange:d=>o(d)}),t.type==="boolean"&&g.jsx("div",{className:"pt-1",children:g.jsx(cV,{id:`${t.id}-value`,checked:!!t.value,onChange:o,label:"Enabled"})})]})]})]})},Rye=()=>{const[t,e]=M.useState([]),n=M.useCallback((u,d="info",f)=>{const m={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:f};e(b=>[...b,m])},[]),r=M.useCallback(u=>{e(d=>d.filter(f=>f.id!==u))},[]),i=M.useCallback((u,d)=>{n(u,"success",d)},[n]),s=M.useCallback((u,d)=>{n(u,"error",d)},[n]),o=M.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=M.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:t,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},jye=({toast:t,onClose:e})=>{M.useEffect(()=>{const i=setTimeout(()=>{e(t.id)},t.duration||5e3);return()=>clearTimeout(i)},[t.id,t.duration,e]);const n=()=>{switch(t.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(t.type){case"success":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return g.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return g.jsxs(gt.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[g.jsx("div",{className:"flex-shrink-0",children:r()}),g.jsx("div",{className:"flex-1 text-sm font-medium",children:t.message}),g.jsx("button",{type:"button",onClick:()=>e(t.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:g.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Oye=({toasts:t,onClose:e})=>g.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:g.jsx(uu,{children:t.map(n=>g.jsx("div",{className:"pointer-events-auto",children:g.jsx(jye,{toast:n,onClose:e})},n.id))})}),gs={YJS_COLLABORATION:"yjs-collaboration",AUTO_SAVE:"auto-save",OFFLINE_MODE:"offline-mode"},JO={development:{[gs.YJS_COLLABORATION]:!0,[gs.AUTO_SAVE]:!0,[gs.OFFLINE_MODE]:!1},staging:{[gs.YJS_COLLABORATION]:!1,[gs.AUTO_SAVE]:!0,[gs.OFFLINE_MODE]:!1},production:{[gs.YJS_COLLABORATION]:!1,[gs.AUTO_SAVE]:!0,[gs.OFFLINE_MODE]:!1}},Lye=(t,e="development")=>{const n=`feature-flag-${t}`,r=localStorage.getItem(n);return r!==null?r==="true":(JO[e]||JO.development)[t]??!1},Iye="wss://diagrammatic-yjs-server-production.up.railway.app",Pye=()=>Iye,Fr=()=>new Map,qw=t=>{const e=Fr();return t.forEach((n,r)=>{e.set(r,n)}),e},Os=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},zye=(t,e)=>{const n=[];for(const[r,i]of t)n.push(e(i,r));return n},Bye=(t,e)=>{for(const[n,r]of t)if(e(r,n))return!0;return!1},Ea=()=>new Set,a6=t=>t[t.length-1],Vye=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},ho=Array.from,Hye=Array.isArray;class bq{constructor(){this._observers=Fr()}on(e,n){return Os(this._observers,e,Ea).add(n),n}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return ho((this._observers.get(e)||Fr()).values()).forEach(r=>r(...n))}destroy(){this._observers=Fr()}}class Fye{constructor(){this._observers=Fr()}on(e,n){Os(this._observers,e,Ea).add(n)}once(e,n){const r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return ho((this._observers.get(e)||Fr()).values()).forEach(r=>r(...n))}destroy(){this._observers=Fr()}}const po=Math.floor,W0=Math.abs,s7=(t,e)=>t<e?t:e,Jl=(t,e)=>t>e?t:e,qye=Math.pow,vq=t=>t!==0?t<0:1/t<0,QO=1,eL=2,l6=4,c6=8,oh=32,ao=64,ci=128,C1=31,Uw=63,Tl=127,Uye=2147483647,xq=Number.MAX_SAFE_INTEGER,$ye=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&po(t)===t),Gye=String.fromCharCode,Wye=t=>t.toLowerCase(),Kye=/^\s*/g,Yye=t=>t.replace(Kye,""),Xye=/([A-Z])/g,tL=(t,e)=>Yye(t.replace(Xye,n=>`${e}${Wye(n)}`)),Zye=t=>{const e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},ah=typeof TextEncoder<"u"?new TextEncoder:null,Jye=t=>ah.encode(t),Qye=ah?Jye:Zye;let Tf=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Tf&&Tf.decode(new Uint8Array).length===1&&(Tf=null);class Bh{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const pr=()=>new Bh,o7=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e},Qt=t=>{const e=new Uint8Array(o7(t));let n=0;for(let r=0;r<t.bufs.length;r++){const i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},e2e=(t,e)=>{const n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Jl(n,e)*2),t.cpos=0)},Fn=(t,e)=>{const n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e},$w=Fn,Fe=(t,e)=>{for(;e>Tl;)Fn(t,ci|Tl&e),e=po(e/128);Fn(t,Tl&e)},a7=(t,e)=>{const n=vq(e);for(n&&(e=-e),Fn(t,(e>Uw?ci:0)|(n?ao:0)|Uw&e),e=po(e/64);e>0;)Fn(t,(e>Tl?ci:0)|Tl&e),e=po(e/128)},Gw=new Uint8Array(3e4),t2e=Gw.length/3,n2e=(t,e)=>{if(e.length<t2e){const n=ah.encodeInto(e,Gw).written||0;Fe(t,n);for(let r=0;r<n;r++)Fn(t,Gw[r])}else pn(t,Qye(e))},r2e=(t,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;Fe(t,r);for(let i=0;i<r;i++)Fn(t,n.codePointAt(i))},Al=ah&&ah.encodeInto?n2e:r2e,k1=(t,e)=>{const n=t.cbuf.length,r=t.cpos,i=s7(n-r,e.length),s=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,s>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Jl(n*2,s)),t.cbuf.set(e.subarray(i)),t.cpos=s)},pn=(t,e)=>{Fe(t,e.byteLength),k1(t,e)},l7=(t,e)=>{e2e(t,e);const n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},i2e=(t,e)=>l7(t,4).setFloat32(0,e,!1),s2e=(t,e)=>l7(t,8).setFloat64(0,e,!1),o2e=(t,e)=>l7(t,8).setBigInt64(0,e,!1),nL=new DataView(new ArrayBuffer(4)),a2e=t=>(nL.setFloat32(0,t),nL.getFloat32(0)===t),lh=(t,e)=>{switch(typeof e){case"string":Fn(t,119),Al(t,e);break;case"number":$ye(e)&&W0(e)<=Uye?(Fn(t,125),a7(t,e)):a2e(e)?(Fn(t,124),i2e(t,e)):(Fn(t,123),s2e(t,e));break;case"bigint":Fn(t,122),o2e(t,e);break;case"object":if(e===null)Fn(t,126);else if(Hye(e)){Fn(t,117),Fe(t,e.length);for(let n=0;n<e.length;n++)lh(t,e[n])}else if(e instanceof Uint8Array)Fn(t,116),pn(t,e);else{Fn(t,118);const n=Object.keys(e);Fe(t,n.length);for(let r=0;r<n.length;r++){const i=n[r];Al(t,i),lh(t,e[i])}}break;case"boolean":Fn(t,e?120:121);break;default:Fn(t,127)}};class rL extends Bh{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&Fe(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const iL=t=>{t.count>0&&(a7(t.encoder,t.count===1?t.s:-t.s),t.count>1&&Fe(t.encoder,t.count-2))};class K0{constructor(){this.encoder=new Bh,this.s=0,this.count=0}write(e){this.s===e?this.count++:(iL(this),this.count=1,this.s=e)}toUint8Array(){return iL(this),Qt(this.encoder)}}const sL=t=>{if(t.count>0){const e=t.diff*2+(t.count===1?0:1);a7(t.encoder,e),t.count>1&&Fe(t.encoder,t.count-2)}};class u6{constructor(){this.encoder=new Bh,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(sL(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return sL(this),Qt(this.encoder)}}class l2e{constructor(){this.sarr=[],this.s="",this.lensE=new K0}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Bh;return this.sarr.push(this.s),this.s="",Al(e,this.sarr.join("")),k1(e,this.lensE.toUint8Array()),Qt(e)}}const Na=t=>new Error(t),Es=()=>{throw Na("Method unimplemented")},Ms=()=>{throw Na("Unexpected case")},wq=Na("Unexpected end of array"),Sq=Na("Integer out of Range");class E1{constructor(e){this.arr=e,this.pos=0}}const Oa=t=>new E1(t),c2e=t=>t.pos!==t.arr.length,u2e=(t,e)=>{const n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},hr=t=>u2e(t,Qe(t)),Eu=t=>t.arr[t.pos++],Qe=t=>{let e=0,n=1;const r=t.arr.length;for(;t.pos<r;){const i=t.arr[t.pos++];if(e=e+(i&Tl)*n,n*=128,i<ci)return e;if(e>xq)throw Sq}throw wq},c7=t=>{let e=t.arr[t.pos++],n=e&Uw,r=64;const i=(e&ao)>0?-1:1;if((e&ci)===0)return i*n;const s=t.arr.length;for(;t.pos<s;){if(e=t.arr[t.pos++],n=n+(e&Tl)*r,r*=128,e<ci)return i*n;if(n>xq)throw Sq}throw wq},d2e=t=>{let e=Qe(t);if(e===0)return"";{let n=String.fromCodePoint(Eu(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(Eu(t));else for(;e>0;){const r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},f2e=t=>Tf.decode(hr(t)),xa=Tf?f2e:d2e,u7=(t,e)=>{const n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},h2e=t=>u7(t,4).getFloat32(0,!1),p2e=t=>u7(t,8).getFloat64(0,!1),m2e=t=>u7(t,8).getBigInt64(0,!1),g2e=[t=>{},t=>null,c7,h2e,p2e,m2e,t=>!1,t=>!0,xa,t=>{const e=Qe(t),n={};for(let r=0;r<e;r++){const i=xa(t);n[i]=ch(t)}return n},t=>{const e=Qe(t),n=[];for(let r=0;r<e;r++)n.push(ch(t));return n},hr],ch=t=>g2e[127-Eu(t)](t);class oL extends E1{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),c2e(this)?this.count=Qe(this)+1:this.count=-1),this.count--,this.s}}class Y0 extends E1{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=c7(this);const e=vq(this.s);this.count=1,e&&(this.s=-this.s,this.count=Qe(this)+2)}return this.count--,this.s}}class d6 extends E1{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=c7(this),n=e&1;this.diff=po(e/2),this.count=1,n&&(this.count=Qe(this)+2)}return this.s+=this.diff,this.count--,this.s}}class y2e{constructor(e){this.decoder=new Y0(e),this.str=xa(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const b2e=crypto.getRandomValues.bind(crypto),Cq=()=>b2e(new Uint32Array(1))[0],v2e="10000000-1000-4000-8000"+-1e11,x2e=()=>v2e.replace(/[018]/g,t=>(t^Cq()&15>>t/4).toString(16)),Bl=Date.now,aL=t=>new Promise(t);Promise.all.bind(Promise);const lL=t=>t===void 0?null:t;class w2e{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let kq=new w2e,d7=!0;try{typeof localStorage<"u"&&localStorage&&(kq=localStorage,d7=!1)}catch{}const Eq=kq,S2e=t=>d7||addEventListener("storage",t),C2e=t=>d7||removeEventListener("storage",t),k2e=Object.assign,Nq=Object.keys,E2e=(t,e)=>{for(const n in t)e(t[n],n)},N2e=(t,e)=>{const n=[];for(const r in t)n.push(e(t[r],r));return n},cL=t=>Nq(t).length,uL=t=>Nq(t).length,T2e=t=>{for(const e in t)return!1;return!0},A2e=(t,e)=>{for(const n in t)if(!e(t[n],n))return!1;return!0},Tq=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),M2e=(t,e)=>t===e||uL(t)===uL(e)&&A2e(t,(n,r)=>(n!==void 0||Tq(e,r))&&e[r]===n),_2e=Object.freeze,Aq=t=>{for(const e in t){const n=t[e];(typeof n=="object"||typeof n=="function")&&Aq(t[e])}return _2e(t)},dL=Symbol("Equality"),f7=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&f7(t,e,n+1)}},D2e=t=>t,Af=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor)return!1;if(t[dL]!=null)return t[dL](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(const n of t.keys())if(!e.has(n)||!Af(t.get(n),e.get(n)))return!1;break}case Object:if(cL(t)!==cL(e))return!1;for(const n in t)if(!Tq(t,n)||!Af(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Af(t[n],e[n]))return!1;break;default:return!1}return!0},R2e=(t,e)=>e.includes(t);var Mq={};const Ta=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",_q=typeof window<"u"&&typeof document<"u"&&!Ta;let ps;const j2e=()=>{if(ps===void 0)if(Ta){ps=Fr();const t=process.argv;let e=null;for(let n=0;n<t.length;n++){const r=t[n];r[0]==="-"?(e!==null&&ps.set(e,""),e=r):e!==null&&(ps.set(e,r),e=null)}e!==null&&ps.set(e,"")}else typeof location=="object"?(ps=Fr(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){const[e,n]=t.split("=");ps.set(`--${tL(e,"-")}`,n),ps.set(`-${tL(e,"-")}`,n)}})):ps=Fr();return ps},Ww=t=>j2e().has(t),cg=t=>lL(Ta?Mq[t.toUpperCase().replaceAll("-","_")]:Eq.getItem(t)),Dq=t=>Ww("--"+t)||cg(t)!==null;Dq("production");const O2e=Ta&&R2e(Mq.FORCE_COLOR,["true","1","2"]),L2e=O2e||!Ww("--no-colors")&&!Dq("no-color")&&(!Ta||process.stdout.isTTY)&&(!Ta||Ww("--color")||cg("COLORTERM")!==null||(cg("TERM")||"").includes("color")),Rq=t=>new Uint8Array(t),I2e=(t,e,n)=>new Uint8Array(t,e,n),P2e=t=>new Uint8Array(t),z2e=t=>{let e="";for(let n=0;n<t.byteLength;n++)e+=Gye(t[n]);return btoa(e)},B2e=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),V2e=t=>{const e=atob(t),n=Rq(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},H2e=t=>{const e=Buffer.from(t,"base64");return I2e(e.buffer,e.byteOffset,e.byteLength)},F2e=_q?z2e:B2e,q2e=_q?V2e:H2e,U2e=t=>{const e=Rq(t.byteLength);return e.set(t),e};class $2e{constructor(e,n){this.left=e,this.right=n}}const Qs=(t,e)=>new $2e(t,e);typeof DOMParser<"u"&&new DOMParser;const G2e=t=>zye(t,(e,n)=>`${n}:${e};`).join(""),vo=Symbol,jq=vo(),Oq=vo(),W2e=vo(),K2e=vo(),Y2e=vo(),Lq=vo(),X2e=vo(),h7=vo(),Z2e=vo(),J2e=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[];let r=0;for(;r<t.length;r++){const i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){const i=t[r];i instanceof Symbol||n.push(i)}return n},Q2e={[jq]:Qs("font-weight","bold"),[Oq]:Qs("font-weight","normal"),[W2e]:Qs("color","blue"),[Y2e]:Qs("color","green"),[K2e]:Qs("color","grey"),[Lq]:Qs("color","red"),[X2e]:Qs("color","purple"),[h7]:Qs("color","orange"),[Z2e]:Qs("color","black")},ebe=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());const e=[],n=[],r=Fr();let i=[],s=0;for(;s<t.length;s++){const o=t[s],l=Q2e[o];if(l!==void 0)r.set(l.left,l.right);else{if(o===void 0)break;if(o.constructor===String||o.constructor===Number){const u=G2e(r);s>0||u.length>0?(e.push("%c"+o),n.push(u)):e.push(o)}else break}}for(s>0&&(i=n,i.unshift(e.join("")));s<t.length;s++){const o=t[s];o instanceof Symbol||i.push(o)}return i},Iq=L2e?ebe:J2e,tbe=(...t)=>{console.log(...Iq(t)),Pq.forEach(e=>e.print(t))},nbe=(...t)=>{console.warn(...Iq(t)),t.unshift(h7),Pq.forEach(e=>e.print(t))},Pq=Ea(),zq=t=>({[Symbol.iterator](){return this},next:t}),rbe=(t,e)=>zq(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),f6=(t,e)=>zq(()=>{const{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});class p7{constructor(e,n){this.clock=e,this.len=n}}class Vh{constructor(){this.clients=new Map}}const Bq=(t,e,n)=>e.clients.forEach((r,i)=>{const s=t.doc.store.clients.get(i);if(s!=null){const o=s[s.length-1],l=o.id.clock+o.length;for(let u=0,d=r[u];u<r.length&&d.clock<l;d=r[++u])Jq(t,s,d.clock,d.len,n)}}),ibe=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){const i=po((n+r)/2),s=t[i],o=s.clock;if(o<=e){if(e<o+s.len)return i;n=i+1}else r=i-1}return null},Vq=(t,e)=>{const n=t.clients.get(e.client);return n!==void 0&&ibe(n,e.clock)!==null},m7=t=>{t.clients.forEach(e=>{e.sort((i,s)=>i.clock-s.clock);let n,r;for(n=1,r=1;n<e.length;n++){const i=e[r-1],s=e[n];i.clock+i.len>=s.clock?i.len=Jl(i.len,s.clock+s.len-i.clock):(r<n&&(e[r]=s),r++)}e.length=r})},sbe=t=>{const e=new Vh;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){const s=r.slice();for(let o=n+1;o<t.length;o++)Vye(s,t[o].clients.get(i)||[]);e.clients.set(i,s)}});return m7(e),e},ug=(t,e,n,r)=>{Os(t.clients,e,()=>[]).push(new p7(n,r))},obe=()=>new Vh,abe=t=>{const e=obe();return t.clients.forEach((n,r)=>{const i=[];for(let s=0;s<n.length;s++){const o=n[s];if(o.deleted){const l=o.id.clock;let u=o.length;if(s+1<n.length)for(let d=n[s+1];s+1<n.length&&d.deleted;d=n[++s+1])u+=d.length;i.push(new p7(l,u))}}i.length>0&&e.clients.set(r,i)}),e},Vu=(t,e)=>{Fe(t.restEncoder,e.clients.size),ho(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),Fe(t.restEncoder,n);const i=r.length;Fe(t.restEncoder,i);for(let s=0;s<i;s++){const o=r[s];t.writeDsClock(o.clock),t.writeDsLen(o.len)}})},g7=t=>{const e=new Vh,n=Qe(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();const i=Qe(t.restDecoder),s=Qe(t.restDecoder);if(s>0){const o=Os(e.clients,i,()=>[]);for(let l=0;l<s;l++)o.push(new p7(t.readDsClock(),t.readDsLen()))}}return e},fL=(t,e,n)=>{const r=new Vh,i=Qe(t.restDecoder);for(let s=0;s<i;s++){t.resetDsCurVal();const o=Qe(t.restDecoder),l=Qe(t.restDecoder),u=n.clients.get(o)||[],d=Un(n,o);for(let f=0;f<l;f++){const p=t.readDsClock(),m=p+t.readDsLen();if(p<d){d<m&&ug(r,o,d,m-d);let b=_s(u,p),v=u[b];for(!v.deleted&&v.id.clock<p&&(u.splice(b+1,0,yg(e,v,p-v.id.clock)),b++);b<u.length&&(v=u[b++],v.id.clock<m);)v.deleted||(m<v.id.clock+v.length&&u.splice(b,0,yg(e,v,m-v.id.clock)),v.delete(e))}else ug(r,o,p,m-p)}}if(r.clients.size>0){const s=new Vl;return Fe(s.restEncoder,0),Vu(s,r),s.toUint8Array()}return null},Hq=Cq;class Hu extends bq{constructor({guid:e=x2e(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:s=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=Hq(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new Xq,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=s,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=aL(d=>{this.on("load",()=>{this.isLoaded=!0,d(this)})});const u=()=>aL(d=>{const f=p=>{(p===void 0||p===!0)&&(this.off("sync",f),d())};this.on("sync",f)});this.on("sync",d=>{d===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=d===void 0||d===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Pt(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ho(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Pt(this,e,n)}get(e,n=ir){const r=Os(this.share,e,()=>{const s=new n;return s._integrate(this,null),s}),i=r.constructor;if(n!==ir&&i!==n)if(i===ir){const s=new n;s._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=s}),s._start=r._start;for(let o=s._start;o!==null;o=o.right)o.parent=s;return s._length=r._length,this.share.set(e,s),s._integrate(this,null),s}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,au)}getText(e=""){return this.get(e,Au)}getMap(e=""){return this.get(e,Tu)}getXmlElement(e=""){return this.get(e,Mu)}getXmlFragment(e=""){return this.get(e,Hl)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,ho(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Hu({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Pt(e.parent.doc,r=>{const i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Fq{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return Qe(this.restDecoder)}readDsLen(){return Qe(this.restDecoder)}}class qq extends Fq{readLeftID(){return ut(Qe(this.restDecoder),Qe(this.restDecoder))}readRightID(){return ut(Qe(this.restDecoder),Qe(this.restDecoder))}readClient(){return Qe(this.restDecoder)}readInfo(){return Eu(this.restDecoder)}readString(){return xa(this.restDecoder)}readParentInfo(){return Qe(this.restDecoder)===1}readTypeRef(){return Qe(this.restDecoder)}readLen(){return Qe(this.restDecoder)}readAny(){return ch(this.restDecoder)}readBuf(){return U2e(hr(this.restDecoder))}readJSON(){return JSON.parse(xa(this.restDecoder))}readKey(){return xa(this.restDecoder)}}class lbe{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Qe(this.restDecoder),this.dsCurrVal}readDsLen(){const e=Qe(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class Nu extends lbe{constructor(e){super(e),this.keys=[],Qe(e),this.keyClockDecoder=new d6(hr(e)),this.clientDecoder=new Y0(hr(e)),this.leftClockDecoder=new d6(hr(e)),this.rightClockDecoder=new d6(hr(e)),this.infoDecoder=new oL(hr(e),Eu),this.stringDecoder=new y2e(hr(e)),this.parentInfoDecoder=new oL(hr(e),Eu),this.typeRefDecoder=new Y0(hr(e)),this.lenDecoder=new Y0(hr(e))}readLeftID(){return new ou(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ou(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ch(this.restDecoder)}readBuf(){return hr(this.restDecoder)}readJSON(){return ch(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Uq{constructor(){this.restEncoder=pr()}toUint8Array(){return Qt(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){Fe(this.restEncoder,e)}writeDsLen(e){Fe(this.restEncoder,e)}}class Hh extends Uq{writeLeftID(e){Fe(this.restEncoder,e.client),Fe(this.restEncoder,e.clock)}writeRightID(e){Fe(this.restEncoder,e.client),Fe(this.restEncoder,e.clock)}writeClient(e){Fe(this.restEncoder,e)}writeInfo(e){$w(this.restEncoder,e)}writeString(e){Al(this.restEncoder,e)}writeParentInfo(e){Fe(this.restEncoder,e?1:0)}writeTypeRef(e){Fe(this.restEncoder,e)}writeLen(e){Fe(this.restEncoder,e)}writeAny(e){lh(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){Al(this.restEncoder,JSON.stringify(e))}writeKey(e){Al(this.restEncoder,e)}}class $q{constructor(){this.restEncoder=pr(),this.dsCurrVal=0}toUint8Array(){return Qt(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,Fe(this.restEncoder,n)}writeDsLen(e){e===0&&Ms(),Fe(this.restEncoder,e-1),this.dsCurrVal+=e}}class Vl extends $q{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new u6,this.clientEncoder=new K0,this.leftClockEncoder=new u6,this.rightClockEncoder=new u6,this.infoEncoder=new rL($w),this.stringEncoder=new l2e,this.parentInfoEncoder=new rL($w),this.typeRefEncoder=new K0,this.lenEncoder=new K0}toUint8Array(){const e=pr();return Fe(e,0),pn(e,this.keyClockEncoder.toUint8Array()),pn(e,this.clientEncoder.toUint8Array()),pn(e,this.leftClockEncoder.toUint8Array()),pn(e,this.rightClockEncoder.toUint8Array()),pn(e,Qt(this.infoEncoder)),pn(e,this.stringEncoder.toUint8Array()),pn(e,Qt(this.parentInfoEncoder)),pn(e,this.typeRefEncoder.toUint8Array()),pn(e,this.lenEncoder.toUint8Array()),k1(e,Qt(this.restEncoder)),Qt(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){lh(this.restEncoder,e)}writeBuf(e){pn(this.restEncoder,e)}writeJSON(e){lh(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const cbe=(t,e,n,r)=>{r=Jl(r,e[0].id.clock);const i=_s(e,r);Fe(t.restEncoder,e.length-i),t.writeClient(n),Fe(t.restEncoder,r);const s=e[i];s.write(t,r-s.id.clock);for(let o=i+1;o<e.length;o++)e[o].write(t,0)},y7=(t,e,n)=>{const r=new Map;n.forEach((i,s)=>{Un(e,s)>i&&r.set(s,i)}),N1(e).forEach((i,s)=>{n.has(s)||r.set(s,0)}),Fe(t.restEncoder,r.size),ho(r.entries()).sort((i,s)=>s[0]-i[0]).forEach(([i,s])=>{cbe(t,e.clients.get(i),i,s)})},ube=(t,e)=>{const n=Fr(),r=Qe(t.restDecoder);for(let i=0;i<r;i++){const s=Qe(t.restDecoder),o=new Array(s),l=t.readClient();let u=Qe(t.restDecoder);n.set(l,{i:0,refs:o});for(let d=0;d<s;d++){const f=t.readInfo();switch(C1&f){case 0:{const p=t.readLen();o[d]=new Ti(ut(l,u),p),u+=p;break}case 10:{const p=Qe(t.restDecoder);o[d]=new Ai(ut(l,u),p),u+=p;break}default:{const p=(f&(ao|ci))===0,m=new Ln(ut(l,u),null,(f&ci)===ci?t.readLeftID():null,null,(f&ao)===ao?t.readRightID():null,p?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,p&&(f&oh)===oh?t.readString():null,yU(t,f));o[d]=m,u+=m.length}}}}return n},dbe=(t,e,n)=>{const r=[];let i=ho(n.keys()).sort((b,v)=>b-v);if(i.length===0)return null;const s=()=>{if(i.length===0)return null;let b=n.get(i[i.length-1]);for(;b.refs.length===b.i;)if(i.pop(),i.length>0)b=n.get(i[i.length-1]);else return null;return b};let o=s();if(o===null)return null;const l=new Xq,u=new Map,d=(b,v)=>{const w=u.get(b);(w==null||w>v)&&u.set(b,v)};let f=o.refs[o.i++];const p=new Map,m=()=>{for(const b of r){const v=b.id.client,w=n.get(v);w?(w.i--,l.clients.set(v,w.refs.slice(w.i)),n.delete(v),w.i=0,w.refs=[]):l.clients.set(v,[b]),i=i.filter(S=>S!==v)}r.length=0};for(;;){if(f.constructor!==Ai){const v=Os(p,f.id.client,()=>Un(e,f.id.client))-f.id.clock;if(v<0)r.push(f),d(f.id.client,f.id.clock-1),m();else{const w=f.getMissing(t,e);if(w!==null){r.push(f);const S=n.get(w)||{refs:[],i:0};if(S.refs.length===S.i)d(w,Un(e,w)),m();else{f=S.refs[S.i++];continue}}else(v===0||v<f.length)&&(f.integrate(t,v),p.set(f.id.client,f.id.clock+f.length))}}if(r.length>0)f=r.pop();else if(o!==null&&o.i<o.refs.length)f=o.refs[o.i++];else{if(o=s(),o===null)break;f=o.refs[o.i++]}}if(l.clients.size>0){const b=new Vl;return y7(b,l,new Map),Fe(b.restEncoder,0),{missing:u,update:b.toUint8Array()}}return null},fbe=(t,e)=>y7(t,e.doc.store,e.beforeState),hbe=(t,e,n,r=new Nu(t))=>Pt(e,i=>{i.local=!1;let s=!1;const o=i.doc,l=o.store,u=ube(r,o),d=dbe(i,l,u),f=l.pendingStructs;if(f){for(const[m,b]of f.missing)if(b<Un(l,m)){s=!0;break}if(d){for(const[m,b]of d.missing){const v=f.missing.get(m);(v==null||v>b)&&f.missing.set(m,b)}f.update=dg([f.update,d.update])}}else l.pendingStructs=d;const p=fL(r,i,l);if(l.pendingDs){const m=new Nu(Oa(l.pendingDs));Qe(m.restDecoder);const b=fL(m,i,l);p&&b?l.pendingDs=dg([p,b]):l.pendingDs=p||b}else l.pendingDs=p;if(s){const m=l.pendingStructs.update;l.pendingStructs=null,Gq(i.doc,m)}},n,!1),Gq=(t,e,n,r=Nu)=>{const i=Oa(e);hbe(i,t,n,new r(i))},pbe=(t,e,n)=>Gq(t,e,n,qq),mbe=(t,e,n=new Map)=>{y7(t,e.store,n),Vu(t,abe(e.store))},gbe=(t,e=new Uint8Array([0]),n=new Vl)=>{const r=Wq(e);mbe(n,t,r);const i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Rbe(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===Hh)return _be(i.map((s,o)=>o===0?s:Obe(s)));if(n.constructor===Vl)return dg(i)}return i[0]},ybe=(t,e)=>gbe(t,e,new Hh),bbe=t=>{const e=new Map,n=Qe(t.restDecoder);for(let r=0;r<n;r++){const i=Qe(t.restDecoder),s=Qe(t.restDecoder);e.set(i,s)}return e},Wq=t=>bbe(new Fq(Oa(t))),Kq=(t,e)=>(Fe(t.restEncoder,e.size),ho(e.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{Fe(t.restEncoder,n),Fe(t.restEncoder,r)}),t),vbe=(t,e)=>Kq(t,N1(e.store)),xbe=(t,e=new $q)=>(t instanceof Map?Kq(e,t):vbe(e,t),e.toUint8Array()),wbe=t=>xbe(t,new Uq);class Sbe{constructor(){this.l=[]}}const hL=()=>new Sbe,pL=(t,e)=>t.l.push(e),mL=(t,e)=>{const n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Yq=(t,e,n)=>f7(t.l,[e,n]);class ou{constructor(e,n){this.client=e,this.clock=n}}const A0=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,ut=(t,e)=>new ou(t,e),Cbe=t=>{for(const[e,n]of t.doc.share.entries())if(n===t)return e;throw Ms()},$c=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Vq(e.ds,t.id),Kw=(t,e)=>{const n=Os(t.meta,Kw,Ea),r=t.doc.store;n.has(e)||(e.sv.forEach((i,s)=>{i<Un(r,s)&&Aa(t,ut(s,i))}),Bq(t,e.ds,i=>{}),n.add(e))};class Xq{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const N1=t=>{const e=new Map;return t.clients.forEach((n,r)=>{const i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},Un=(t,e)=>{const n=t.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},Zq=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Ms()}n.push(e)},_s=(t,e)=>{let n=0,r=t.length-1,i=t[r],s=i.id.clock;if(s===e)return r;let o=po(e/(s+i.length-1)*r);for(;n<=r;){if(i=t[o],s=i.id.clock,s<=e){if(e<s+i.length)return o;n=o+1}else r=o-1;o=po((n+r)/2)}throw Ms()},kbe=(t,e)=>{const n=t.clients.get(e.client);return n[_s(n,e.clock)]},h6=kbe,Yw=(t,e,n)=>{const r=_s(e,n),i=e[r];return i.id.clock<n&&i instanceof Ln?(e.splice(r+1,0,yg(t,i,n-i.id.clock)),r+1):r},Aa=(t,e)=>{const n=t.doc.store.clients.get(e.client);return n[Yw(t,n,e.clock)]},gL=(t,e,n)=>{const r=e.clients.get(n.client),i=_s(r,n.clock),s=r[i];return n.clock!==s.id.clock+s.length-1&&s.constructor!==Ti&&r.splice(i+1,0,yg(t,s,n.clock-s.id.clock+1)),s},Ebe=(t,e,n)=>{const r=t.clients.get(e.id.client);r[_s(r,e.id.clock)]=n},Jq=(t,e,n,r,i)=>{if(r===0)return;const s=n+r;let o=Yw(t,e,n),l;do l=e[o++],s<l.id.clock+l.length&&Yw(t,e,s),i(l);while(o<e.length&&e[o].id.clock<s)};class Nbe{constructor(e,n,r){this.doc=e,this.deleteSet=new Vh,this.beforeState=N1(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const yL=(t,e)=>e.deleteSet.clients.size===0&&!Bye(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(m7(e.deleteSet),fbe(t,e),Vu(t,e.deleteSet),!0),bL=(t,e,n)=>{const r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&Os(t.changed,e,Ea).add(n)},X0=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof Ln&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const s=e-i;return s&&t.splice(e+1-s,s),s},Tbe=(t,e,n)=>{for(const[r,i]of t.clients.entries()){const s=e.clients.get(r);for(let o=i.length-1;o>=0;o--){const l=i[o],u=l.clock+l.len;for(let d=_s(s,l.clock),f=s[d];d<s.length&&f.id.clock<u;f=s[++d]){const p=s[d];if(l.clock+l.len<=p.id.clock)break;p instanceof Ln&&p.deleted&&!p.keep&&n(p)&&p.gc(e,!1)}}}},Abe=(t,e)=>{t.clients.forEach((n,r)=>{const i=e.clients.get(r);for(let s=n.length-1;s>=0;s--){const o=n[s],l=s7(i.length-1,1+_s(i,o.clock+o.len-1));for(let u=l,d=i[u];u>0&&d.id.clock>=o.clock;d=i[u])u-=1+X0(i,u)}})},Qq=(t,e)=>{if(e<t.length){const n=t[e],r=n.doc,i=r.store,s=n.deleteSet,o=n._mergeStructs;try{m7(s),n.afterState=N1(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((u,d)=>l.push(()=>{(d._item===null||!d._item.deleted)&&d._callObserver(n,u)})),l.push(()=>{n.changedParentTypes.forEach((u,d)=>{d._dEH.l.length>0&&(d._item===null||!d._item.deleted)&&(u=u.filter(f=>f.target._item===null||!f.target._item.deleted),u.forEach(f=>{f.currentTarget=d,f._path=null}),u.sort((f,p)=>f.path.length-p.path.length),Yq(d._dEH,u,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),f7(l,[]),n._needFormattingCleanup&&Kbe(n)}finally{r.gc&&Tbe(s,i,r.gcFilter),Abe(s,i),n.afterState.forEach((f,p)=>{const m=n.beforeState.get(p)||0;if(m!==f){const b=i.clients.get(p),v=Jl(_s(b,m),1);for(let w=b.length-1;w>=v;)w-=1+X0(b,w)}});for(let f=o.length-1;f>=0;f--){const{client:p,clock:m}=o[f].id,b=i.clients.get(p),v=_s(b,m);v+1<b.length&&X0(b,v+1)>1||v>0&&X0(b,v)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(tbe(h7,jq,"[yjs] ",Oq,Lq,"Changed the client-id because another client seems to be using it."),r.clientID=Hq()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const f=new Hh;yL(f,n)&&r.emit("update",[f.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const f=new Vl;yL(f,n)&&r.emit("updateV2",[f.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:d}=n;(l.size>0||d.size>0||u.size>0)&&(l.forEach(f=>{f.clientID=r.clientID,f.collectionid==null&&(f.collectionid=r.collectionid),r.subdocs.add(f)}),d.forEach(f=>r.subdocs.delete(f)),r.emit("subdocs",[{loaded:u,added:l,removed:d},r,n]),d.forEach(f=>f.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Qq(t,e+1)}}},Pt=(t,e,n=null,r=!0)=>{const i=t._transactionCleanups;let s=!1,o=null;t._transaction===null&&(s=!0,t._transaction=new Nbe(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{o=e(t._transaction)}finally{if(s){const l=t._transaction===i[0];t._transaction=null,l&&Qq(i,0)}}return o};function*Mbe(t){const e=Qe(t.restDecoder);for(let n=0;n<e;n++){const r=Qe(t.restDecoder),i=t.readClient();let s=Qe(t.restDecoder);for(let o=0;o<r;o++){const l=t.readInfo();if(l===10){const u=Qe(t.restDecoder);yield new Ai(ut(i,s),u),s+=u}else if((C1&l)!==0){const u=(l&(ao|ci))===0,d=new Ln(ut(i,s),null,(l&ci)===ci?t.readLeftID():null,null,(l&ao)===ao?t.readRightID():null,u?t.readParentInfo()?t.readString():t.readLeftID():null,u&&(l&oh)===oh?t.readString():null,yU(t,l));yield d,s+=d.length}else{const u=t.readLen();yield new Ti(ut(i,s),u),s+=u}}}}class b7{constructor(e,n){this.gen=Mbe(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Ai);return this.curr}}class v7{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const _be=t=>dg(t,qq,Hh),Dbe=(t,e)=>{if(t.constructor===Ti){const{client:n,clock:r}=t.id;return new Ti(ut(n,r+e),t.length-e)}else if(t.constructor===Ai){const{client:n,clock:r}=t.id;return new Ai(ut(n,r+e),t.length-e)}else{const n=t,{client:r,clock:i}=n.id;return new Ln(ut(r,i+e),null,ut(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},dg=(t,e=Nu,n=Vl)=>{if(t.length===1)return t[0];const r=t.map(f=>new e(Oa(f)));let i=r.map(f=>new b7(f,!0)),s=null;const o=new n,l=new v7(o);for(;i=i.filter(m=>m.curr!==null),i.sort((m,b)=>{if(m.curr.id.client===b.curr.id.client){const v=m.curr.id.clock-b.curr.id.clock;return v===0?m.curr.constructor===b.curr.constructor?0:m.curr.constructor===Ai?1:-1:v}else return b.curr.id.client-m.curr.id.client}),i.length!==0;){const f=i[0],p=f.curr.id.client;if(s!==null){let m=f.curr,b=!1;for(;m!==null&&m.id.clock+m.length<=s.struct.id.clock+s.struct.length&&m.id.client>=s.struct.id.client;)m=f.next(),b=!0;if(m===null||m.id.client!==p||b&&m.id.clock>s.struct.id.clock+s.struct.length)continue;if(p!==s.struct.id.client)la(l,s.struct,s.offset),s={struct:m,offset:0},f.next();else if(s.struct.id.clock+s.struct.length<m.id.clock)if(s.struct.constructor===Ai)s.struct.length=m.id.clock+m.length-s.struct.id.clock;else{la(l,s.struct,s.offset);const v=m.id.clock-s.struct.id.clock-s.struct.length;s={struct:new Ai(ut(p,s.struct.id.clock+s.struct.length),v),offset:0}}else{const v=s.struct.id.clock+s.struct.length-m.id.clock;v>0&&(s.struct.constructor===Ai?s.struct.length-=v:m=Dbe(m,v)),s.struct.mergeWith(m)||(la(l,s.struct,s.offset),s={struct:m,offset:0},f.next())}}else s={struct:f.curr,offset:0},f.next();for(let m=f.curr;m!==null&&m.id.client===p&&m.id.clock===s.struct.id.clock+s.struct.length&&m.constructor!==Ai;m=f.next())la(l,s.struct,s.offset),s={struct:m,offset:0}}s!==null&&(la(l,s.struct,s.offset),s=null),x7(l);const u=r.map(f=>g7(f)),d=sbe(u);return Vu(o,d),o.toUint8Array()},Rbe=(t,e,n=Nu,r=Vl)=>{const i=Wq(e),s=new r,o=new v7(s),l=new n(Oa(t)),u=new b7(l,!1);for(;u.curr;){const f=u.curr,p=f.id.client,m=i.get(p)||0;if(u.curr.constructor===Ai){u.next();continue}if(f.id.clock+f.length>m)for(la(o,f,Jl(m-f.id.clock,0)),u.next();u.curr&&u.curr.id.client===p;)la(o,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===p&&u.curr.id.clock+u.curr.length<=m;)u.next()}x7(o);const d=g7(l);return Vu(s,d),s.toUint8Array()},eU=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Qt(t.encoder.restEncoder)}),t.encoder.restEncoder=pr(),t.written=0)},la=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&eU(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),Fe(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},x7=t=>{eU(t);const e=t.encoder.restEncoder;Fe(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){const r=t.clientStructs[n];Fe(e,r.written),k1(e,r.restEncoder)}},jbe=(t,e,n,r)=>{const i=new n(Oa(t)),s=new b7(i,!1),o=new r,l=new v7(o);for(let d=s.curr;d!==null;d=s.next())la(l,e(d),0);x7(l);const u=g7(i);return Vu(o,u),o.toUint8Array()},Obe=t=>jbe(t,D2e,Nu,Hh),vL="You must not compute changes after the event-handler fired.";class T1{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Lbe(this.currentTarget,this.target))}deletes(e){return Vq(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Na(vL);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){const s=n._map.get(i);let o,l;if(this.adds(s)){let u=s.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(s))if(u!==null&&this.deletes(u))o="delete",l=a6(u.content.getContent());else return;else u!==null&&this.deletes(u)?(o="update",l=a6(u.content.getContent())):(o="add",l=void 0)}else if(this.deletes(s))o="delete",l=a6(s.content.getContent());else return;e.set(i,{action:o,oldValue:l})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw Na(vL);const n=this.target,r=Ea(),i=Ea(),s=[];if(e={added:r,deleted:i,delta:s,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const u=()=>{l&&s.push(l)};for(let d=n._start;d!==null;d=d.right)d.deleted?this.deletes(d)&&!this.adds(d)&&((l===null||l.delete===void 0)&&(u(),l={delete:0}),l.delete+=d.length,i.add(d)):this.adds(d)?((l===null||l.insert===void 0)&&(u(),l={insert:[]}),l.insert=l.insert.concat(d.content.getContent()),r.add(d)):((l===null||l.retain===void 0)&&(u(),l={retain:0}),l.retain+=d.length);l!==null&&l.retain===void 0&&u()}this._changes=e}return e}}const Lbe=(t,e)=>{const n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},yr=()=>{nbe("Invalid access: Add Yjs type to a document before reading data.")},tU=80;let w7=0;class Ibe{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=w7++}}const Pbe=t=>{t.timestamp=w7++},nU=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=w7++},zbe=(t,e,n)=>{if(t.length>=tU){const r=t.reduce((i,s)=>i.timestamp<s.timestamp?i:s);return nU(r,e,n),r}else{const r=new Ibe(e,n);return t.push(r),r}},A1=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;const n=t._searchMarker.length===0?null:t._searchMarker.reduce((s,o)=>W0(e-s.index)<W0(e-o.index)?s:o);let r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,Pbe(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&W0(n.index-i)<r.parent.length/tU?(nU(n,r,i),n):zbe(t._searchMarker,r,i)},uh=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){const i=t[r];if(n>0){let s=i.p;for(s.marker=!1;s&&(s.deleted||!s.countable);)s=s.left,s&&!s.deleted&&s.countable&&(i.index-=s.length);if(s===null||s.marker===!0){t.splice(r,1);continue}i.p=s,s.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Jl(e,i.index+n))}},M1=(t,e,n)=>{const r=t,i=e.changedParentTypes;for(;Os(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;Yq(r._eH,n,e)};class ir{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=hL(),this._dEH=hL(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Es()}clone(){throw Es()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){pL(this._eH,e)}observeDeep(e){pL(this._dEH,e)}unobserve(e){mL(this._eH,e)}unobserveDeep(e){mL(this._dEH,e)}toJSON(){}}const rU=(t,e,n)=>{t.doc??yr(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e;const i=[];let s=t._start;for(;s!==null&&r>0;){if(s.countable&&!s.deleted){const o=s.content.getContent();if(o.length<=e)e-=o.length;else{for(let l=e;l<o.length&&r>0;l++)i.push(o[l]),r--;e=0}}s=s.right}return i},iU=t=>{t.doc??yr();const e=[];let n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e},dh=(t,e)=>{let n=0,r=t._start;for(t.doc??yr();r!==null;){if(r.countable&&!r.deleted){const i=r.content.getContent();for(let s=0;s<i.length;s++)e(i[s],n++,t)}r=r.right}},sU=(t,e)=>{const n=[];return dh(t,(r,i)=>{n.push(e(r,i,t))}),n},Bbe=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},oU=(t,e)=>{t.doc??yr();const n=A1(t,e);let r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},fg=(t,e,n,r)=>{let i=n;const s=t.doc,o=s.clientID,l=s.store,u=n===null?e._start:n.right;let d=[];const f=()=>{d.length>0&&(i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new Fl(d)),i.integrate(t,0),d=[])};r.forEach(p=>{if(p===null)d.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:d.push(p);break;default:switch(f(),p.constructor){case Uint8Array:case ArrayBuffer:i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new Fh(new Uint8Array(p))),i.integrate(t,0);break;case Hu:i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new qh(p)),i.integrate(t,0);break;default:if(p instanceof ir)i=new Ln(ut(o,Un(l,o)),i,i&&i.lastId,u,u&&u.id,e,null,new xo(p)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),f()},aU=()=>Na("Length exceeded!"),lU=(t,e,n,r)=>{if(n>e._length)throw aU();if(n===0)return e._searchMarker&&uh(e._searchMarker,n,r.length),fg(t,e,null,r);const i=n,s=A1(e,n);let o=e._start;for(s!==null&&(o=s.p,n-=s.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Aa(t,ut(o.id.client,o.id.clock+n));break}n-=o.length}return e._searchMarker&&uh(e._searchMarker,i,r.length),fg(t,e,o,r)},Vbe=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((s,o)=>o.index>s.index?o:s,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return fg(t,e,i,n)},cU=(t,e,n,r)=>{if(r===0)return;const i=n,s=r,o=A1(e,n);let l=e._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Aa(t,ut(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Aa(t,ut(l.id.client,l.id.clock+r)),l.delete(t),r-=l.length),l=l.right;if(r>0)throw aU();e._searchMarker&&uh(e._searchMarker,i,-s+r)},hg=(t,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(t)},S7=(t,e,n,r)=>{const i=e._map.get(n)||null,s=t.doc,o=s.clientID;let l;if(r==null)l=new Fl([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:l=new Fl([r]);break;case Uint8Array:l=new Fh(r);break;case Hu:l=new qh(r);break;default:if(r instanceof ir)l=new xo(r);else throw new Error("Unexpected content type")}new Ln(ut(o,Un(s.store,o)),i,i&&i.lastId,null,null,e,n,l).integrate(t,0)},C7=(t,e)=>{t.doc??yr();const n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},uU=t=>{const e={};return t.doc??yr(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},dU=(t,e)=>{t.doc??yr();const n=t._map.get(e);return n!==void 0&&!n.deleted},Hbe=(t,e)=>{const n={};return t._map.forEach((r,i)=>{let s=r;for(;s!==null&&(!e.sv.has(s.id.client)||s.id.clock>=(e.sv.get(s.id.client)||0));)s=s.left;s!==null&&$c(s,e)&&(n[i]=s.content.getContent()[s.length-1])}),n},M0=t=>(t.doc??yr(),rbe(t._map.entries(),e=>!e[1].deleted));class Fbe extends T1{}class au extends ir{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new au;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new au}clone(){const e=new au;return e.insert(0,this.toArray().map(n=>n instanceof ir?n.clone():n)),e}get length(){return this.doc??yr(),this._length}_callObserver(e,n){super._callObserver(e,n),M1(this,e,new Fbe(this,e))}insert(e,n){this.doc!==null?Pt(this.doc,r=>{lU(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Pt(this.doc,n=>{Vbe(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Pt(this.doc,r=>{cU(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return oU(this,e)}toArray(){return iU(this)}slice(e=0,n=this.length){return rU(this,e,n)}toJSON(){return this.map(e=>e instanceof ir?e.toJSON():e)}map(e){return sU(this,e)}forEach(e){dh(this,e)}[Symbol.iterator](){return Bbe(this)}_write(e){e.writeTypeRef(hve)}}const qbe=t=>new au;class Ube extends T1{constructor(e,n,r){super(e,n),this.keysChanged=r}}class Tu extends ir{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new Tu}clone(){const e=new Tu;return this.forEach((n,r)=>{e.set(r,n instanceof ir?n.clone():n)}),e}_callObserver(e,n){M1(this,e,new Ube(this,e,n))}toJSON(){this.doc??yr();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const i=n.content.getContent()[n.length-1];e[r]=i instanceof ir?i.toJSON():i}}),e}get size(){return[...M0(this)].length}keys(){return f6(M0(this),e=>e[0])}values(){return f6(M0(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return f6(M0(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??yr(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Pt(this.doc,n=>{hg(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Pt(this.doc,r=>{S7(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return C7(this,e)}has(e){return dU(this,e)}clear(){this.doc!==null?Pt(this.doc,e=>{this.forEach(function(n,r,i){hg(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(pve)}}const $be=t=>new Tu,ha=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&M2e(t,e);class Xw{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){switch(this.right===null&&Ms(),this.right.content.constructor){case Pn:this.right.deleted||Fu(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const xL=(t,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case Pn:e.right.deleted||Fu(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&Aa(t,ut(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},_0=(t,e,n,r)=>{const i=new Map,s=r?A1(e,n):null;if(s){const o=new Xw(s.p.left,s.p,s.index,i);return xL(t,o,n-s.index)}else{const o=new Xw(null,e._start,0,i);return xL(t,o,n)}},fU=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Pn&&ha(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const i=t.doc,s=i.clientID;r.forEach((o,l)=>{const u=n.left,d=n.right,f=new Ln(ut(s,Un(i.store,s)),u,u&&u.lastId,d,d&&d.id,e,null,new Pn(l,o));f.integrate(t,0),n.right=f,n.forward()})},Fu=(t,e)=>{const{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},hU=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===Pn&&ha(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},pU=(t,e,n,r)=>{const i=t.doc,s=i.clientID,o=new Map;for(const l in r){const u=r[l],d=n.currentAttributes.get(l)??null;if(!ha(d,u)){o.set(l,d);const{left:f,right:p}=n;n.right=new Ln(ut(s,Un(i.store,s)),f,f&&f.lastId,p,p&&p.id,e,null,new Pn(l,u)),n.right.integrate(t,0),n.forward()}}return o},p6=(t,e,n,r,i)=>{n.currentAttributes.forEach((m,b)=>{i[b]===void 0&&(i[b]=null)});const s=t.doc,o=s.clientID;hU(n,i);const l=pU(t,e,n,i),u=r.constructor===String?new Ds(r):r instanceof ir?new xo(r):new Ql(r);let{left:d,right:f,index:p}=n;e._searchMarker&&uh(e._searchMarker,n.index,u.getLength()),f=new Ln(ut(o,Un(s.store,o)),d,d&&d.lastId,f,f&&f.id,e,null,u),f.integrate(t,0),n.right=f,n.index=p,n.forward(),fU(t,e,n,l)},wL=(t,e,n,r,i)=>{const s=t.doc,o=s.clientID;hU(n,i);const l=pU(t,e,n,i);e:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===Pn));){if(!n.right.deleted)switch(n.right.content.constructor){case Pn:{const{key:u,value:d}=n.right.content,f=i[u];if(f!==void 0){if(ha(f,d))l.delete(u);else{if(r===0)break e;l.set(u,d)}n.right.delete(t)}else n.currentAttributes.set(u,d);break}default:r<n.right.length&&Aa(t,ut(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new Ln(ut(o,Un(s.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Ds(u)),n.right.integrate(t,0),n.forward()}fU(t,e,n,l)},mU=(t,e,n,r,i)=>{let s=e;const o=Fr();for(;s&&(!s.countable||s.deleted);){if(!s.deleted&&s.content.constructor===Pn){const d=s.content;o.set(d.key,d)}s=s.right}let l=0,u=!1;for(;e!==s;){if(n===e&&(u=!0),!e.deleted){const d=e.content;switch(d.constructor){case Pn:{const{key:f,value:p}=d,m=r.get(f)??null;(o.get(f)!==d||m===p)&&(e.delete(t),l++,!u&&(i.get(f)??null)===p&&m!==p&&(m===null?i.delete(f):i.set(f,m))),!u&&!e.deleted&&Fu(i,d);break}}}e=e.right}return l},Gbe=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===Pn){const r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},Wbe=t=>{let e=0;return Pt(t.doc,n=>{let r=t._start,i=t._start,s=Fr();const o=qw(s);for(;i;){if(i.deleted===!1)switch(i.content.constructor){case Pn:Fu(o,i.content);break;default:e+=mU(n,r,i,s,o),s=qw(o),r=i;break}i=i.right}}),e},Kbe=t=>{const e=new Set,n=t.doc;for(const[r,i]of t.afterState.entries()){const s=t.beforeState.get(r)||0;i!==s&&Jq(t,n.store.clients.get(r),s,i,o=>{!o.deleted&&o.content.constructor===Pn&&o.constructor!==Ti&&e.add(o.parent)})}Pt(n,r=>{Bq(t,t.deleteSet,i=>{if(i instanceof Ti||!i.parent._hasFormatting||e.has(i.parent))return;const s=i.parent;i.content.constructor===Pn?e.add(s):Gbe(r,i)});for(const i of e)Wbe(i)})},SL=(t,e,n)=>{const r=n,i=qw(e.currentAttributes),s=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case xo:case Ql:case Ds:n<e.right.length&&Aa(t,ut(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}s&&mU(t,s,e.right,i,e.currentAttributes);const o=(e.left||e.right).parent;return o._searchMarker&&uh(o._searchMarker,e.index,-r+n),e};class Ybe extends T1{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Pt(e,r=>{const i=new Map,s=new Map;let o=this.target._start,l=null;const u={};let d="",f=0,p=0;const m=()=>{if(l!==null){let b=null;switch(l){case"delete":p>0&&(b={delete:p}),p=0;break;case"insert":(typeof d=="object"||d.length>0)&&(b={insert:d},i.size>0&&(b.attributes={},i.forEach((v,w)=>{v!==null&&(b.attributes[w]=v)}))),d="";break;case"retain":f>0&&(b={retain:f},T2e(u)||(b.attributes=k2e({},u))),f=0;break}b&&n.push(b),l=null}};for(;o!==null;){switch(o.content.constructor){case xo:case Ql:this.adds(o)?this.deletes(o)||(m(),l="insert",d=o.content.getContent()[0],m()):this.deletes(o)?(l!=="delete"&&(m(),l="delete"),p+=1):o.deleted||(l!=="retain"&&(m(),l="retain"),f+=1);break;case Ds:this.adds(o)?this.deletes(o)||(l!=="insert"&&(m(),l="insert"),d+=o.content.str):this.deletes(o)?(l!=="delete"&&(m(),l="delete"),p+=o.length):o.deleted||(l!=="retain"&&(m(),l="retain"),f+=o.length);break;case Pn:{const{key:b,value:v}=o.content;if(this.adds(o)){if(!this.deletes(o)){const w=i.get(b)??null;ha(w,v)?v!==null&&o.delete(r):(l==="retain"&&m(),ha(v,s.get(b)??null)?delete u[b]:u[b]=v)}}else if(this.deletes(o)){s.set(b,v);const w=i.get(b)??null;ha(w,v)||(l==="retain"&&m(),u[b]=w)}else if(!o.deleted){s.set(b,v);const w=u[b];w!==void 0&&(ha(w,v)?w!==null&&o.delete(r):(l==="retain"&&m(),v===null?delete u[b]:u[b]=v))}o.deleted||(l==="insert"&&m(),Fu(i,o.content));break}}o=o.right}for(m();n.length>0;){const b=n[n.length-1];if(b.retain!==void 0&&b.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Au extends ir{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??yr(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Au}clone(){const e=new Au;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new Ybe(this,e,n);M1(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??yr();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Ds&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Pt(this.doc,r=>{const i=new Xw(null,this._start,0,new Map);for(let s=0;s<e.length;s++){const o=e[s];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&s===e.length-1&&i.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&p6(r,this,i,l,o.attributes||{})}else o.retain!==void 0?wL(r,this,i,o.retain,o.attributes||{}):o.delete!==void 0&&SL(r,i,o.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??yr();const i=[],s=new Map,o=this.doc;let l="",u=this._start;function d(){if(l.length>0){const p={};let m=!1;s.forEach((v,w)=>{m=!0,p[w]=v});const b={insert:l};m&&(b.attributes=p),i.push(b),l=""}}const f=()=>{for(;u!==null;){if($c(u,e)||n!==void 0&&$c(u,n))switch(u.content.constructor){case Ds:{const p=s.get("ychange");e!==void 0&&!$c(u,e)?(p===void 0||p.user!==u.id.client||p.type!=="removed")&&(d(),s.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!$c(u,n)?(p===void 0||p.user!==u.id.client||p.type!=="added")&&(d(),s.set("ychange",r?r("added",u.id):{type:"added"})):p!==void 0&&(d(),s.delete("ychange")),l+=u.content.str;break}case xo:case Ql:{d();const p={insert:u.content.getContent()[0]};if(s.size>0){const m={};p.attributes=m,s.forEach((b,v)=>{m[v]=b})}i.push(p);break}case Pn:$c(u,e)&&(d(),Fu(s,u.content));break}u=u.right}d()};return e||n?Pt(o,p=>{e&&Kw(p,e),n&&Kw(p,n),f()},"cleanup"):f(),i}insert(e,n,r){if(n.length<=0)return;const i=this.doc;i!==null?Pt(i,s=>{const o=_0(s,this,e,!r);r||(r={},o.currentAttributes.forEach((l,u)=>{r[u]=l})),p6(s,this,o,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const i=this.doc;i!==null?Pt(i,s=>{const o=_0(s,this,e,!r);p6(s,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Pt(r,i=>{SL(i,_0(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const i=this.doc;i!==null?Pt(i,s=>{const o=_0(s,this,e,!1);o.right!==null&&wL(s,this,o,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Pt(this.doc,n=>{hg(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Pt(this.doc,r=>{S7(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return C7(this,e)}getAttributes(){return uU(this)}_write(e){e.writeTypeRef(mve)}}const Xbe=t=>new Au;class m6{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??yr()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Mu||n.constructor===Hl)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class Hl extends ir{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Hl}clone(){const e=new Hl;return e.insert(0,this.toArray().map(n=>n instanceof ir?n.clone():n)),e}get length(){return this.doc??yr(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new m6(this,e)}querySelector(e){e=e.toUpperCase();const r=new m6(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),ho(new m6(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){M1(this,e,new Qbe(this,n,e))}toString(){return sU(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),dh(this,s=>{i.insertBefore(s.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?Pt(this.doc,r=>{lU(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Pt(this.doc,r=>{const i=e&&e instanceof ir?e._item:e;fg(r,this,i,n)});else{const r=this._prelimContent,i=e===null?0:r.findIndex(s=>s===e)+1;if(i===0&&e!==null)throw Na("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?Pt(this.doc,r=>{cU(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return iU(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return oU(this,e)}slice(e=0,n=this.length){return rU(this,e,n)}forEach(e){dh(this,e)}_write(e){e.writeTypeRef(yve)}}const Zbe=t=>new Hl;class Mu extends Hl{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new Mu(this.nodeName)}clone(){const e=new Mu(this.nodeName),n=this.getAttributes();return E2e(n,(r,i)=>{typeof r=="string"&&e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof ir?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const l in e)r.push(l);r.sort();const i=r.length;for(let l=0;l<i;l++){const u=r[l];n.push(u+'="'+e[u]+'"')}const s=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${s}${o}>${super.toString()}</${s}>`}removeAttribute(e){this.doc!==null?Pt(this.doc,n=>{hg(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Pt(this.doc,r=>{S7(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return C7(this,e)}hasAttribute(e){return dU(this,e)}getAttributes(e){return e?Hbe(this,e):uU(this)}toDOM(e=document,n={},r){const i=e.createElement(this.nodeName),s=this.getAttributes();for(const o in s){const l=s[o];typeof l=="string"&&i.setAttribute(o,l)}return dh(this,o=>{i.appendChild(o.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(gve),e.writeKey(this.nodeName)}}const Jbe=t=>new Mu(t.readKey());class Qbe extends T1{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}}class pg extends Tu{constructor(e){super(),this.hookName=e}_copy(){return new pg(this.hookName)}clone(){const e=new pg(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const i=n[this.hookName];let s;return i!==void 0?s=i.createDom(this):s=document.createElement(this.hookName),s.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(s,this),s}_write(e){e.writeTypeRef(bve),e.writeKey(this.hookName)}}const eve=t=>new pg(t.readKey());class mg extends Au{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new mg}clone(){const e=new mg;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{const n=[];for(const i in e.attributes){const s=[];for(const o in e.attributes[i])s.push({key:o,value:e.attributes[i][o]});s.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:i,attrs:s})}n.sort((i,s)=>i.nodeName<s.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){const s=n[i];r+=`<${s.nodeName}`;for(let o=0;o<s.attrs.length;o++){const l=s.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(vve)}}const tve=t=>new mg;class k7{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Es()}mergeWith(e){return!1}write(e,n,r){throw Es()}integrate(e,n){throw Es()}}const nve=0;class Ti extends k7{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),Zq(e.doc.store,this)}write(e,n){e.writeInfo(nve),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Fh{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Fh(this.content)}splice(e){throw Es()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const rve=t=>new Fh(t.readBuf());class fh{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new fh(this.len)}splice(e){const n=new fh(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){ug(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const ive=t=>new fh(t.readLen()),gU=(t,e)=>new Hu({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class qh{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new qh(gU(this.doc.guid,this.opts))}splice(e){throw Es()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const sve=t=>new qh(gU(t.readString(),t.readAny()));class Ql{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Ql(this.embed)}splice(e){throw Es()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const ove=t=>new Ql(t.readJSON());class Pn{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Pn(this.key,this.value)}splice(e){throw Es()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const ave=t=>new Pn(t.readKey(),t.readJSON());class gg{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new gg(this.arr)}splice(e){const n=new gg(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeString(s===void 0?"undefined":JSON.stringify(s))}}getRef(){return 2}}const lve=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++){const i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new gg(n)},cve=cg("node_env")==="development";class Fl{constructor(e){this.arr=e,cve&&Aq(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Fl(this.arr)}splice(e){const n=new Fl(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){const s=this.arr[i];e.writeAny(s)}}getRef(){return 8}}const uve=t=>{const e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Fl(n)};class Ds{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ds(this.str)}splice(e){const n=new Ds(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"",n.str=""+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const dve=t=>new Ds(t.readString()),fve=[qbe,$be,Xbe,Jbe,Zbe,eve,tve],hve=0,pve=1,mve=2,gve=3,yve=4,bve=5,vve=6;class xo{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xo(this.type._copy())}splice(e){throw Es()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const xve=t=>new xo(fve[t.readTypeRef()](t)),yg=(t,e,n)=>{const{client:r,clock:i}=e.id,s=new Ln(ut(r,i+n),e,ut(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&s.markDeleted(),e.keep&&(s.keep=!0),e.redone!==null&&(s.redone=ut(e.redone.client,e.redone.clock+n)),e.right=s,s.right!==null&&(s.right.left=s),t._mergeStructs.push(s),s.parentSub!==null&&s.right===null&&s.parent._map.set(s.parentSub,s),e.length=n,s};class Ln extends k7{constructor(e,n,r,i,s,o,l,u){super(e,u.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=s,this.parent=o,this.parentSub=l,this.redone=null,this.content=u,this.info=this.content.isCountable()?eL:0}set marker(e){(this.info&c6)>0!==e&&(this.info^=c6)}get marker(){return(this.info&c6)>0}get keep(){return(this.info&QO)>0}set keep(e){this.keep!==e&&(this.info^=QO)}get countable(){return(this.info&eL)>0}get deleted(){return(this.info&l6)>0}set deleted(e){this.deleted!==e&&(this.info^=l6)}markDeleted(){this.info|=l6}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Un(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Un(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ou&&this.id.client!==this.parent.client&&this.parent.clock>=Un(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=gL(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Aa(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Ti||this.right&&this.right.constructor===Ti)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===Ln?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===Ln&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ou){const r=h6(n,this.parent);r.constructor===Ti?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=gL(e,e.doc.store,ut(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;const s=new Set,o=new Set;for(;i!==null&&i!==this.right;){if(o.add(i),s.add(i),A0(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,s.clear();else if(A0(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&o.has(h6(e.doc.store,i.origin)))s.has(h6(e.doc.store,i.origin))||(r=i,s.clear());else break;i=i.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Zq(e.doc.store,this),this.content.integrate(e,this),bL(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new Ti(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:ut(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&A0(e.origin,this.lastId)&&this.right===e&&A0(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),ug(e.deleteSet,this.id.client,this.id.clock,this.length),bL(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Ms();this.content.gc(e),n?Ebe(e,this,new Ti(this.id,this.length)):this.content=new fh(this.length)}write(e,n){const r=n>0?ut(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,s=this.parentSub,o=this.content.getRef()&C1|(r===null?0:ci)|(i===null?0:ao)|(s===null?0:oh);if(e.writeInfo(o),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){const l=this.parent;if(l._item!==void 0){const u=l._item;if(u===null){const d=Cbe(l);e.writeParentInfo(!0),e.writeString(d)}else e.writeParentInfo(!1),e.writeLeftID(u.id)}else l.constructor===String?(e.writeParentInfo(!0),e.writeString(l)):l.constructor===ou?(e.writeParentInfo(!1),e.writeLeftID(l)):Ms();s!==null&&e.writeString(s)}this.content.write(e,n)}}const yU=(t,e)=>wve[e&C1](t),wve=[()=>{Ms()},ive,lve,rve,dve,ove,ave,xve,uve,sve,()=>{Ms()}],Sve=10;class Ai extends k7{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Ms()}write(e,n){e.writeInfo(Sve),Fe(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const bU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},vU="__ $YJS$ __";bU[vU]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");bU[vU]=!0;const xU=new Map;class Cve{constructor(e){this.room=e,this.onmessage=null,this._onChange=n=>n.key===e&&this.onmessage!==null&&this.onmessage({data:q2e(n.newValue||"")}),S2e(this._onChange)}postMessage(e){Eq.setItem(this.room,F2e(P2e(e)))}close(){C2e(this._onChange)}}const kve=typeof BroadcastChannel>"u"?Cve:BroadcastChannel,E7=t=>Os(xU,t,()=>{const e=Ea(),n=new kve(t);return n.onmessage=r=>e.forEach(i=>i(r.data,"broadcastchannel")),{bc:n,subs:e}}),Eve=(t,e)=>(E7(t).subs.add(e),e),Nve=(t,e)=>{const n=E7(t),r=n.subs.delete(e);return r&&n.subs.size===0&&(n.bc.close(),xU.delete(t)),r},Gc=(t,e,n=null)=>{const r=E7(t);r.bc.postMessage(e),r.subs.forEach(i=>i(e,n))},wU=0,N7=1,SU=2,Zw=(t,e)=>{Fe(t,wU);const n=wbe(e);pn(t,n)},CU=(t,e,n)=>{Fe(t,N7),pn(t,ybe(e,n))},Tve=(t,e,n)=>CU(e,n,hr(t)),kU=(t,e,n)=>{try{pbe(e,hr(t),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},Ave=(t,e)=>{Fe(t,SU),pn(t,e)},Mve=kU,_ve=(t,e,n,r)=>{const i=Qe(t);switch(i){case wU:Tve(t,e,n);break;case N7:kU(t,n,r);break;case SU:Mve(t,n,r);break;default:throw new Error("Unknown message type")}return i},Dve=0,Rve=(t,e,n)=>{switch(Qe(t)){case Dve:n(e,xa(t))}},g6=3e4;class jve extends Fye{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=Bl();this.getLocalState()!==null&&g6/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((i,s)=>{s!==this.clientID&&g6<=n-i.lastUpdated&&this.states.has(s)&&r.push(s)}),r.length>0&&T7(this,r,"timeout")},po(g6/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const n=this.clientID,r=this.meta.get(n),i=r===void 0?0:r.clock+1,s=this.states.get(n);e===null?this.states.delete(n):this.states.set(n,e),this.meta.set(n,{clock:i,lastUpdated:Bl()});const o=[],l=[],u=[],d=[];e===null?d.push(n):s==null?e!=null&&o.push(n):(l.push(n),Af(s,e)||u.push(n)),(o.length>0||u.length>0||d.length>0)&&this.emit("change",[{added:o,updated:u,removed:d},"local"]),this.emit("update",[{added:o,updated:l,removed:d},"local"])}setLocalStateField(e,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[e]:n})}getStates(){return this.states}}const T7=(t,e,n)=>{const r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t.states.has(s)){if(t.states.delete(s),s===t.clientID){const o=t.meta.get(s);t.meta.set(s,{clock:o.clock+1,lastUpdated:Bl()})}r.push(s)}}r.length>0&&(t.emit("change",[{added:[],updated:[],removed:r},n]),t.emit("update",[{added:[],updated:[],removed:r},n]))},Mf=(t,e,n=t.states)=>{const r=e.length,i=pr();Fe(i,r);for(let s=0;s<r;s++){const o=e[s],l=n.get(o)||null,u=t.meta.get(o).clock;Fe(i,o),Fe(i,u),Al(i,JSON.stringify(l))}return Qt(i)},Ove=(t,e,n)=>{const r=Oa(e),i=Bl(),s=[],o=[],l=[],u=[],d=Qe(r);for(let f=0;f<d;f++){const p=Qe(r);let m=Qe(r);const b=JSON.parse(xa(r)),v=t.meta.get(p),w=t.states.get(p),S=v===void 0?0:v.clock;(S<m||S===m&&b===null&&t.states.has(p))&&(b===null?p===t.clientID&&t.getLocalState()!=null?m++:t.states.delete(p):t.states.set(p,b),t.meta.set(p,{clock:m,lastUpdated:i}),v===void 0&&b!==null?s.push(p):v!==void 0&&b===null?u.push(p):b!==null&&(Af(b,w)||l.push(p),o.push(p)))}(s.length>0||l.length>0||u.length>0)&&t.emit("change",[{added:s,updated:l,removed:u},n]),(s.length>0||o.length>0||u.length>0)&&t.emit("update",[{added:s,updated:o,removed:u},n])},Lve=t=>N2e(t,(e,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(e)}`).join("&"),gl=0,EU=3,lu=1,Ive=2,Uh=[];Uh[gl]=(t,e,n,r,i)=>{Fe(t,gl);const s=_ve(e,t,n.doc,n);r&&s===N7&&!n.synced&&(n.synced=!0)};Uh[EU]=(t,e,n,r,i)=>{Fe(t,lu),pn(t,Mf(n.awareness,Array.from(n.awareness.getStates().keys())))};Uh[lu]=(t,e,n,r,i)=>{Ove(n.awareness,hr(e),n)};Uh[Ive]=(t,e,n,r,i)=>{Rve(e,n.doc,(s,o)=>Pve(n,o))};const CL=3e4,Pve=(t,e)=>console.warn(`Permission denied to access ${t.url}.
${e}`),NU=(t,e,n)=>{const r=Oa(e),i=pr(),s=Qe(r),o=t.messageHandlers[s];return o?o(i,r,t,n,s):console.error("Unable to compute message"),i},Jw=(t,e,n)=>{e===t.ws&&(t.emit("connection-close",[n,t]),t.ws=null,e.close(),t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,T7(t.awareness,Array.from(t.awareness.getStates().keys()).filter(r=>r!==t.doc.clientID),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(TU,s7(qye(2,t.wsUnsuccessfulReconnects)*100,t.maxBackoffTime),t))},TU=t=>{if(t.shouldConnect&&t.ws===null){const e=new t._WS(t.url,t.protocols);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=n=>{t.wsLastMessageReceived=Bl();const r=NU(t,new Uint8Array(n.data),!0);o7(r)>1&&e.send(Qt(r))},e.onerror=n=>{t.emit("connection-error",[n,t])},e.onclose=n=>{Jw(t,e,n)},e.onopen=()=>{t.wsLastMessageReceived=Bl(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);const n=pr();if(Fe(n,gl),Zw(n,t.doc),e.send(Qt(n)),t.awareness.getLocalState()!==null){const r=pr();Fe(r,lu),pn(r,Mf(t.awareness,[t.doc.clientID])),e.send(Qt(r))}},t.emit("status",[{status:"connecting"}])}},y6=(t,e)=>{const n=t.ws;t.wsconnected&&n&&n.readyState===n.OPEN&&n.send(e),t.bcconnected&&Gc(t.bcChannel,e,t)};class zve extends bq{constructor(e,n,r,{connect:i=!0,awareness:s=new jve(r),params:o={},protocols:l=[],WebSocketPolyfill:u=WebSocket,resyncInterval:d=-1,maxBackoffTime:f=2500,disableBc:p=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+n,this.maxBackoffTime=f,this.params=o,this.protocols=l,this.roomname=n,this.doc=r,this._WS=u,this.awareness=s,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=p,this.wsUnsuccessfulReconnects=0,this.messageHandlers=Uh.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=i,this._resyncInterval=0,d>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const m=pr();Fe(m,gl),Zw(m,r),this.ws.send(Qt(m))}},d)),this._bcSubscriber=(m,b)=>{if(b!==this){const v=NU(this,new Uint8Array(m),!1);o7(v)>1&&Gc(this.bcChannel,Qt(v),this)}},this._updateHandler=(m,b)=>{if(b!==this){const v=pr();Fe(v,gl),Ave(v,m),y6(this,Qt(v))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:m,updated:b,removed:v},w)=>{const S=m.concat(b).concat(v),k=pr();Fe(k,lu),pn(k,Mf(s,S)),y6(this,Qt(k))},this._exitHandler=()=>{T7(this.awareness,[r.clientID],"app closed")},Ta&&typeof process<"u"&&process.on("exit",this._exitHandler),s.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&CL<Bl()-this.wsLastMessageReceived&&Jw(this,this.ws,null)},CL/10),i&&this.connect()}get url(){const e=Lve(this.params);return this.serverUrl+"/"+this.roomname+(e.length===0?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),Ta&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(Eve(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const e=pr();Fe(e,gl),Zw(e,this.doc),Gc(this.bcChannel,Qt(e),this);const n=pr();Fe(n,gl),CU(n,this.doc),Gc(this.bcChannel,Qt(n),this);const r=pr();Fe(r,EU),Gc(this.bcChannel,Qt(r),this);const i=pr();Fe(i,lu),pn(i,Mf(this.awareness,[this.doc.clientID])),Gc(this.bcChannel,Qt(i),this)}disconnectBc(){const e=pr();Fe(e,lu),pn(e,Mf(this.awareness,[this.doc.clientID],new Map)),y6(this,Qt(e)),this.bcconnected&&(Nve(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&Jw(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(TU(this),this.connectBc())}}const Bve=({diagramId:t,nodes:e,edges:n,onNodesChange:r,onEdgesChange:i,userId:s,userName:o,userEmail:l,userPictureUrl:u,enabled:d=!0,onUserJoined:f,onUserLeft:p})=>{const m=M.useRef(null),b=M.useRef(null),[v,w]=M.useState({isConnected:!1,isSynced:!1,error:null,collaboratorCount:0}),[S,k]=M.useState([]),[T,E]=M.useState([]),N=M.useRef([]),A=M.useRef(r),_=M.useRef(i),j=M.useRef(f),R=M.useRef(p),L=M.useRef(e),P=M.useRef(n);M.useEffect(()=>{A.current=r,_.current=i,j.current=f,R.current=p,L.current=e,P.current=n},[r,i,f,p,e,n]);const F=M.useRef(!1),V=M.useRef(""),q=M.useRef(""),I=M.useCallback(()=>{if(d)try{const G=Pye(),ee=new Hu;m.current=ee;const B=ee.getArray("nodes"),W=ee.getArray("edges"),ie=new zve(G,`diagram-${t}`,ee,{connect:!0});b.current=ie,ie.awareness.setLocalState({user:{id:s,name:o,email:l,pictureUrl:u},cursor:null}),ie.on("status",({status:ce})=>{console.log(" Yjs Connection Status:",ce),w(re=>({...re,isConnected:ce==="connected",error:ce==="disconnected"?"Disconnected from server":null}))}),ie.on("sync",ce=>{if(console.log(" Yjs Sync Status:",ce),w(re=>({...re,isSynced:ce})),ce&&B.length===0&&W.length===0)console.log(" Initial Yjs sync - pushing local state"),F.current=!0,ee.transact(()=>{L.current.length>0&&B.push(L.current),P.current.length>0&&W.push(P.current)}),V.current=JSON.stringify(L.current.map(re=>({id:re.id,position:re.position,data:re.data}))),q.current=JSON.stringify(P.current.map(re=>({id:re.id,source:re.source,target:re.target}))),F.current=!1,console.log(` Initial sync complete - ${L.current.length} nodes, ${P.current.length} edges`);else if(ce&&(B.length>0||W.length>0)){console.log(" Yjs already has data - pulling remote state"),F.current=!0;const re=B.toArray(),ye=W.toArray(),Ce=re.reduce((Se,Ne)=>(Se.some(Ee=>Ee.id===Ne.id)||Se.push(Ne),Se),[]),De=ye.reduce((Se,Ne)=>(Se.some(Ee=>Ee.id===Ne.id)||Se.push(Ne),Se),[]);console.log(` Pulled ${Ce.length} nodes, ${De.length} edges from remote`),A.current(Ce),_.current(De),V.current=JSON.stringify(Ce.map(Se=>({id:Se.id,position:Se.position,data:Se.data}))),q.current=JSON.stringify(De.map(Se=>({id:Se.id,source:Se.source,target:Se.target}))),F.current=!1}}),ie.awareness.on("change",ce=>{const re=ie.awareness.getStates(),ye=ie.awareness.clientID,Ce=[],De=[];re.forEach((Se,Ne)=>{if(Ne===ye)return;const Ee=Se.user;Ee&&(Ce.push(Ee),Se.cursor&&De.push({userId:Ee.id,user:Ee,position:Se.cursor,timestamp:new Date().toISOString()}))}),k(Ce),E(De),N.current=Ce,w(Se=>({...Se,collaboratorCount:Ce.length})),ce.added.forEach(Se=>{if(Se===ye)return;const Ne=re.get(Se);Ne?.user&&j.current?.(Ne.user)}),ce.removed.forEach(Se=>{if(Se===ye)return;const Ne=N.current.find(Ee=>!Ce.some(Me=>Me.id===Ee.id));Ne&&R.current?.(Ne)})});let oe=null,$=null;const Z=()=>{F.current||(oe&&clearTimeout(oe),oe=setTimeout(()=>{const ce=B.toArray(),re=ce.reduce((Ce,De)=>(Ce.some(Se=>Se.id===De.id)||Ce.push(De),Ce),[]),ye=JSON.stringify(re.map(Ce=>({id:Ce.id,position:Ce.position,data:Ce.data})));ye!==V.current&&(console.log(` Yjs received ${re.length} unique nodes (deduplicated from ${ce.length})`),V.current=ye,A.current(re))},50))},te=()=>{F.current||($&&clearTimeout($),$=setTimeout(()=>{const ce=W.toArray(),re=ce.reduce((Ce,De)=>(Ce.some(Se=>Se.id===De.id)||Ce.push(De),Ce),[]),ye=JSON.stringify(re.map(Ce=>({id:Ce.id,source:Ce.source,target:Ce.target})));ye!==q.current&&(console.log(` Yjs received ${re.length} unique edges (deduplicated from ${ce.length})`),q.current=ye,_.current(re))},50))};return B.observe(Z),W.observe(te),()=>{oe&&clearTimeout(oe),$&&clearTimeout($),B.unobserve(Z),W.unobserve(te),ie.destroy(),ee.destroy()}}catch(G){w(ee=>({...ee,error:G instanceof Error?G.message:"Failed to initialize collaboration"})),console.error("Yjs initialization error:",G);return}},[t,s,o,l,u,d]);M.useEffect(()=>{const G=m.current;if(!G||!v.isSynced)return;const ee=G.getArray("nodes"),B=G.getArray("edges"),W=JSON.stringify(e.map($=>({id:$.id,position:$.position,data:$.data}))),ie=JSON.stringify(n.map($=>({id:$.id,source:$.source,target:$.target})));if(W===V.current&&ie===q.current)return;const oe=setTimeout(()=>{F.current=!0,G.transact(()=>{ee.length>0&&ee.delete(0,ee.length),e.length>0&&ee.push(e),B.length>0&&B.delete(0,B.length),n.length>0&&B.push(n)}),V.current=W,q.current=ie,F.current=!1},100);return()=>clearTimeout(oe)},[e,n,v.isSynced]),M.useEffect(()=>I(),[I]);const U=M.useCallback(()=>{b.current&&(b.current.disconnect(),w(G=>({...G,isConnected:!1,isSynced:!1})))},[]),O=M.useCallback(()=>{b.current?b.current.connect():I()},[I]),H=M.useCallback(G=>{const ee=b.current;if(!ee||!v.isConnected)return;const B=ee.awareness.getLocalState();ee.awareness.setLocalState({...B,cursor:G})},[v.isConnected]);return{state:v,provider:b.current,collaborators:S,cursors:T,sendCursorPosition:H,disconnect:U,reconnect:O}},Vve=({url:t,enabled:e=!0,onMessage:n,onOpen:r,onClose:i,onError:s,reconnect:o=!0,reconnectInterval:l=1e3,maxReconnectAttempts:u=5})=>{const d=M.useRef(null),f=M.useRef(null),p=M.useRef(0),m=M.useRef(!0),b=M.useRef(null),[v,w]=M.useState(!1),[S,k]=M.useState(!1),[T,E]=M.useState(0),N=M.useCallback(()=>{f.current&&(clearTimeout(f.current),f.current=null)},[]),A=M.useCallback(()=>{m.current=!1,N(),d.current&&(d.current.close(),d.current=null),w(!1),k(!1),p.current=0,E(0)},[N]),_=M.useCallback(()=>{if(!(d.current?.readyState===WebSocket.OPEN||d.current?.readyState===WebSocket.CONNECTING))try{k(!0),d.current=new WebSocket(t),d.current.onopen=()=>{console.log("WebSocket connected"),w(!0),k(!1),p.current=0,E(0),r?.()},d.current.onmessage=L=>{try{const P=JSON.parse(L.data);n?.(P)}catch(P){console.error("Failed to parse WebSocket message:",P)}},d.current.onclose=L=>{console.log("WebSocket disconnected",L.code,L.reason),w(!1),k(!1),d.current=null,i?.(),m.current&&o&&b.current&&b.current()},d.current.onerror=L=>{console.error("WebSocket error:",L),s?.(L)}}catch(L){console.error("Failed to create WebSocket connection:",L),k(!1),m.current&&o&&b.current&&b.current()}},[t,n,r,i,s,o]),j=M.useCallback(()=>{if(!o||!m.current)return;if(p.current>=u){console.error("Max reconnection attempts reached"),k(!1);return}N();const L=l*Math.pow(2,p.current),P=Math.random()*1e3,F=Math.min(L+P,3e4);console.log(`Reconnecting in ${Math.round(F/1e3)}s... (attempt ${p.current+1}/${u})`),f.current=setTimeout(()=>{p.current++,E(p.current),_()},F)},[o,l,u,N,_]);M.useEffect(()=>{b.current=j},[j]);const R=M.useCallback(L=>{if(d.current?.readyState===WebSocket.OPEN)try{d.current.send(JSON.stringify(L))}catch(P){console.error("Failed to send WebSocket message:",P)}else console.warn("WebSocket is not connected. Message not sent:",L)},[]);return M.useEffect(()=>{if(e)return m.current=!0,_(),()=>{m.current=!1,A()}},[_,A,e]),{sendMessage:R,disconnect:A,connect:_,isConnected:v,isConnecting:S,reconnectAttempts:T}},Hve=t=>t.startsWith("https://")?t.replace("https://","wss://"):t.startsWith("http://")?t.replace("http://","ws://"):`ws://${t}`,Fve=Hve("https://diagrammatic-api.vercel.app"),qve=({diagramId:t,token:e,enabled:n,onDiagramUpdate:r,onUserJoined:i,onUserLeft:s,onError:o})=>{const[l,u]=M.useState([]),[d,f]=M.useState([]),p=M.useRef(null),m=M.useRef(0),b=M.useRef(null),v=`${Fve}/api/v1/diagrams/${t}/collaborate?token=${e}`,w=M.useCallback(P=>{const F=P.type?.trim();switch(F){case"welcome":{const V=P.user;p.current=V.id,console.log("Welcome message received:",V.name);break}case"user_joined":{const V=P.user;u(q=>q.some(I=>I.id===V.id)?q:[...q,V]),i?.(V);break}case"user_left":{const V=P.user;u(q=>q.filter(I=>I.id!==V.id)),f(q=>q.filter(I=>I.userId!==V.id)),s?.(V);break}case"diagram_update":{const V=P.user,q=P.data;if(V.id===p.current)return;const I=Date.now();if(I-m.current<100)return;m.current=I,r?.(q,V.id);break}case"cursor_move":case"cursor_update":{const V=P.user,q=P.position,I=P.timestamp;if(V.id===p.current)return;f(U=>{const O=U.findIndex(G=>G.userId===V.id),H={userId:V.id,user:V,position:q,timestamp:I};if(O>=0){const G=[...U];return G[O]=H,G}return[...U,H]});break}case"pong":break;case"error":{const V=P.message||"Unknown error";console.error("WebSocket error:",V),o?.(V);break}default:console.warn("Unknown WebSocket message type:",F)}},[r,i,s,o]),S=M.useCallback(()=>{console.log("Collaboration WebSocket connected")},[]),k=M.useCallback(()=>{console.log("Collaboration WebSocket disconnected"),u([]),f([])},[]),T=M.useCallback(P=>{console.error("Collaboration WebSocket error:",P),o?.("Connection error. Retrying...")},[o]),{sendMessage:E,disconnect:N,isConnected:A,isConnecting:_,reconnectAttempts:j}=Vve({url:v,enabled:n,onMessage:w,onOpen:S,onClose:k,onError:T,reconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5}),R=M.useCallback(P=>{!n||!A||(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{E({type:"diagram_update",data:P,timestamp:new Date().toISOString()})},300))},[n,A,E]),L=M.useCallback(P=>{!n||!A||E({type:"cursor_move",position:P,timestamp:new Date().toISOString()})},[n,A,E]);return M.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),M.useEffect(()=>{if(!A||!n)return;const P=setInterval(()=>{E({type:"ping",timestamp:new Date().toISOString()})},3e4);return()=>clearInterval(P)},[A,n,E]),{sendDiagramUpdate:R,sendCursorPosition:L,collaborators:l,cursors:d,isConnected:A,isConnecting:_,reconnectAttempts:j,disconnect:N}},Uve=({diagramId:t,nodes:e,edges:n,onNodesChange:r,onEdgesChange:i,enabled:s})=>{const{user:o,token:l}=vh(),u=Lye(gs.YJS_COLLABORATION),d=Bve({diagramId:t,nodes:e,edges:n,onNodesChange:r,onEdgesChange:i,userId:o?.id||"anonymous",userName:o?.name||"Anonymous",userEmail:o?.email,userPictureUrl:o?.picture||void 0,enabled:u&&s}),[f,p]=M.useState([]),[m,b]=M.useState([]),v=qve({diagramId:t,token:l||"",enabled:!u&&s,onDiagramUpdate:j=>{j.nodes&&r(j.nodes),j.edges&&i(j.edges)},onUserJoined:j=>{p(R=>R.some(L=>L.id===j.id)?R:[...R,j])},onUserLeft:j=>{p(R=>R.filter(L=>L.id!==j.id)),b(R=>R.filter(L=>L.userId!==j.id))}}),w=v.cursors;w&&w.length!==m.length&&b(w.map(j=>({userId:j.userId,user:j.user,position:j.position,timestamp:j.timestamp})));const S=u?{isConnected:d.state.isConnected,isSynced:d.state.isSynced,collaboratorCount:d.state.collaboratorCount,error:d.state.error}:{isConnected:v.isConnected,isSynced:v.isConnected,collaboratorCount:f.length,error:v.isConnected?null:"Disconnected"},k=u?d.collaborators:f,T=u?d.cursors:m,E=M.useCallback(j=>{u||v.sendDiagramUpdate(j)},[u,v]),N=M.useCallback(j=>{u?d.sendCursorPosition(j):v.sendCursorPosition(j)},[u,d,v]),A=M.useCallback(()=>{u?d.disconnect():v.disconnect()},[u,d,v]),_=M.useCallback(()=>{u&&d.reconnect()},[u,d]);return{state:S,collaborators:k,cursors:T,sendUpdate:E,sendCursorPosition:N,disconnect:A,reconnect:_}},Qw=t=>{const e=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899","#06b6d4","#6366f1"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},$ve=({isConnected:t,isConnecting:e,reconnectAttempts:n,collaborators:r,showCollaborators:i=!0})=>{const[s,o]=Ae.useState(!1),l=e||!t,u=i&&r.length>0;if(!l&&!u)return null;const d=()=>e?n>0?`Reconnecting... (${n})`:"Connecting...":"Connection lost",f=()=>e?g.jsx(JJ,{className:"h-4 w-4 animate-spin"}):g.jsx(QJ,{className:"h-4 w-4"}),p=()=>e?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return g.jsxs("div",{className:"flex items-center gap-2",children:[l&&g.jsxs("button",{type:"button",className:`relative flex items-center gap-2 px-3 py-1.5 rounded-lg bg-surface border border-theme/10 ${p()} transition-colors cursor-default`,"aria-label":d(),"aria-describedby":s?"connection-tooltip":void 0,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onFocus:()=>o(!0),onBlur:()=>o(!1),tabIndex:0,children:[f(),g.jsx("span",{className:"text-xs font-medium",children:d()}),g.jsx(uu,{children:s&&g.jsx(gt.div,{id:"connection-tooltip",role:"tooltip",initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full left-0 mt-2 p-2 bg-surface border border-theme/10 rounded-lg shadow-lg z-50 min-w-[200px]",children:g.jsxs("div",{className:"text-xs text-theme",children:[g.jsx("div",{className:"font-semibold mb-1",children:"Connection Status"}),g.jsx("div",{className:"text-muted",children:e?"Establishing connection...":"Collaboration unavailable"})]})})})]}),u&&g.jsxs("div",{className:"flex items-center gap-1 px-3",role:"group","aria-label":`${r.length} collaborator${r.length>1?"s":""} online`,children:[g.jsx(tQ,{className:"h-4 w-4 text-theme","aria-hidden":"true"}),g.jsxs("div",{className:"flex -space-x-2",children:[r.slice(0,3).map(m=>g.jsx("div",{className:"relative group",role:"img","aria-label":m.name,title:m.name,children:m.pictureUrl?g.jsx("img",{src:m.pictureUrl,alt:m.name,className:"w-8 h-8 rounded-full border-2 border-surface",style:{borderColor:Qw(m.id)}}):g.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-surface flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:Qw(m.id)},"aria-label":m.name,children:m.name.charAt(0).toUpperCase()})},m.id)),r.length>3&&g.jsxs("div",{className:"w-6 h-6 rounded-full bg-theme/10 border-2 border-surface flex items-center justify-center text-xs font-bold text-theme",role:"img","aria-label":`${r.length-3} more collaborator${r.length-3>1?"s":""}`,children:["+",r.length-3]})]})]})]})},Gve=({name:t,color:e,position:n,pictureUrl:r})=>g.jsxs(gt.div,{className:"pointer-events-none absolute z-50",style:{left:n.x,top:n.y},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:[g.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:g.jsx("path",{d:"M5.5 3.21V20.79L10.29 16L14 21.5L15.5 20.5L11.79 15L18.5 14L5.5 3.21Z",fill:e,stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})}),g.jsxs("div",{className:"ml-6 -mt-2 px-2 py-1 rounded-md text-xs font-medium text-white whitespace-nowrap shadow-lg flex items-center gap-1.5",style:{backgroundColor:e},children:[r&&g.jsx("img",{src:r,alt:t,className:"w-4 h-4 rounded-full border border-white/50"}),g.jsx("span",{children:t})]})]}),Wve=(t,e,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:t,edges:e};return JSON.stringify(i,null,2)},Kve=(t,e,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<t.length;l++){const u=t[l],d=`node-${l+2}`,f=u.data?.label||u.id,p=u.position?.x||0,m=u.position?.y||0,b=u.style?.width||u.width||200,v=u.style?.height||u.height||80,w=s();o+=`        <mxCell id="${d}" value="${i(String(f))}" `,o+=`style="${w}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${m}" width="${b}" height="${v}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<e.length;l++){const u=e[l],d=`edge-${l}`,f=t.findIndex(b=>b.id===u.source),p=t.findIndex(b=>b.id===u.target),m=u.label||u.data?.label||"";f!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(m))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${f+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},kL=t=>{try{const e=JSON.parse(t);if(!e.nodes||!Array.isArray(e.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!e.edges||!Array.isArray(e.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:e.nodes,edges:e.edges}}catch(e){throw new Error(e instanceof Error?`Failed to import JSON: ${e.message}`:"Failed to import JSON: Invalid format")}},EL=t=>{try{const n=new DOMParser().parseFromString(t,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const m=p.getAttribute("id")||`cell-${u}`,b=p.getAttribute("value")||`Node ${u+1}`,v=p.querySelector("mxGeometry"),w=Number.parseFloat(v?.getAttribute("x")||"0"),S=Number.parseFloat(v?.getAttribute("y")||"0"),k=Number.parseFloat(v?.getAttribute("width")||"200"),T=Number.parseFloat(v?.getAttribute("height")||"80"),E=`imported-node-${Date.now()}-${u}`;o.set(m,E);const N={label:b},A=p.querySelector("mxData");if(A){const _=A.querySelectorAll("property");for(const j of _){const R=j.getAttribute("name"),L=j.getAttribute("value");if(R&&L)try{N[R]=JSON.parse(L)}catch{N[R]=L}}}i.push({id:E,type:"custom",position:{x:w,y:S},data:N,...k&&T?{style:{width:k,height:T}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let f=0;for(const p of d){const m=p.getAttribute("source"),b=p.getAttribute("target"),v=p.getAttribute("value")||"";if(m&&b){const w=o.get(m),S=o.get(b);if(w&&S){const k={};v&&(k.label=v,k.hasLabel=!0);const T=p.querySelector("mxData");if(T){const E=T.querySelectorAll("property");for(const N of E){const A=N.getAttribute("name"),_=N.getAttribute("value");if(A&&_)try{k[A]=JSON.parse(_)}catch{k[A]=_}}}s.push({id:`imported-edge-${Date.now()}-${f}`,source:w,target:S,type:"customEdge",data:k,...v?{label:v}:{}})}}f++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(e){throw new Error(e instanceof Error?`Failed to import XML: ${e.message}`:"Failed to import XML: Invalid format")}},NL=(t,e,n)=>{const r=new Blob([t],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},Yve=async t=>t.text(),TL={isOpen:!1,showWelcome:!0,userIntent:null,canvasContext:null,messages:[],currentSuggestions:[]},AU=M.createContext(void 0),Xve=({children:t})=>{const[e,n]=M.useState(TL),r=M.useCallback(()=>{n(f=>({...f,isOpen:!f.isOpen}))},[]),i=M.useCallback(f=>{n(p=>({...p,userIntent:f,showWelcome:!1}))},[]),s=M.useCallback(f=>{n(p=>({...p,canvasContext:f}))},[]),o=M.useCallback(f=>{const p={...f,id:`msg-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,timestamp:new Date};n(m=>({...m,messages:[...m.messages,p]}))},[]),l=M.useCallback(()=>{n(f=>({...f,showWelcome:!1}))},[]),u=M.useCallback(()=>{n(TL)},[]),d=M.useMemo(()=>({...e,toggleChatBot:r,setUserIntent:i,updateCanvasContext:s,addMessage:o,dismissWelcome:l,resetChatBot:u}),[e,r,i,s,o,l,u]);return g.jsx(AU.Provider,{value:d,children:t})},A7=()=>{const t=M.useContext(AU);if(!t)throw new Error("useChatBot must be used within a ChatBotProvider");return t},Zve=(t,e,n=[],r=[])=>{const[i,s]=M.useState(null);M.useEffect(()=>{if(!e){s(null);return}const l=async()=>{try{const d=n.map(b=>{const v=b.data||{},w=!!(v.description||v.subtitle||v.properties&&Object.keys(v.properties).length>0),S={description:v.description||v.subtitle||"",componentId:v.componentId,icon:v.icon};return v.properties&&typeof v.properties=="object"&&Object.assign(S,v.properties),v._customProperties&&(S.customProperties=v._customProperties),{id:b.id,type:b.type||"custom",label:typeof v.label=="string"?v.label:b.id,hasDescription:w,properties:S}}),f=r.map(b=>{const v=b.data||{};return{source:b.source,target:b.target,type:b.type||v.type,hasLabel:!!(v.label||v.hasLabel)}}),p=await Jt.getRecommendations({userIntent:t,canvasContext:e||{nodeCount:0,edgeCount:0,componentTypes:[],isEmpty:!0},components:d,connections:f,maxSuggestions:5}),m=p.recommendations.map(b=>({id:b.id,title:b.title,description:b.description,icon:b.icon,category:b.category,priority:b.priority,componentId:b.componentId,componentIds:b.componentIds,actionType:b.actionType,confidence:b.confidence,reasoning:b.reasoning,action:()=>{}}));s(m),m.length>0&&console.log(` AI Recommendations: ${m.length} suggestions (confidence >= ${p.minConfidenceThreshold})`)}catch(d){console.log(" Falling back to rule-based suggestions:",d instanceof Error?d.message:"Unknown error"),s(null)}},u=setTimeout(()=>{l()},500);return()=>clearTimeout(u)},[t,e,n,r]);const o=M.useMemo(()=>{const l=[];if(!t&&!e)return l;const u=t?`${t.title} ${t.description}`.toLowerCase():"";if((u.includes("database")||u.includes("schema")||u.includes("er "))&&(l.push({id:"er-entity",title:"Add Entity",description:"Create a database entity with attributes",action:()=>{},icon:"",category:"component",priority:10,componentId:"er-entity",actionType:"add-component"}),l.push({id:"er-relationship",title:"Add Relationship",description:"Connect entities with relationships",action:()=>{},icon:"",category:"component",priority:9,componentId:"er-relationship",actionType:"add-component"})),(u.includes("class")||u.includes("uml")||u.includes("oop")||u.includes("object-oriented"))&&(l.push({id:"uml-class",title:"Add Class",description:"Create a UML class with methods and properties",action:()=>{},icon:"",category:"component",priority:10,componentId:"uml-class",actionType:"add-component"}),l.push({id:"uml-interface",title:"Add Interface",description:"Define an interface for your design",action:()=>{},icon:"",category:"component",priority:8,componentId:"uml-interface",actionType:"add-component"})),(u.includes("system")||u.includes("architecture")||u.includes("microservice")||u.includes("api"))&&(l.push({id:"api-gateway",title:"Add API Gateway",description:"Central entry point for your services",action:()=>{},icon:"",category:"component",priority:10,componentId:"api-gateway",actionType:"add-component"}),l.push({id:"load-balancer",title:"Add Load Balancer",description:"Distribute traffic across servers",action:()=>{},icon:"",category:"component",priority:9,componentId:"loadbalancer",actionType:"add-component"}),l.push({id:"database",title:"Add Database",description:"Add a database to store your data",action:()=>{},icon:"",category:"component",priority:8,componentId:"database",actionType:"add-component"})),(u.includes("cache")||u.includes("redis")||u.includes("performance"))&&l.push({id:"cache",title:"Add Cache Layer",description:"Improve performance with caching",action:()=>{},icon:"",category:"component",priority:9,componentId:"cache",actionType:"add-component"}),(u.includes("queue")||u.includes("async")||u.includes("message")||u.includes("event"))&&l.push({id:"message-queue",title:"Add Message Queue",description:"Enable asynchronous communication",action:()=>{},icon:"",category:"component",priority:9,componentId:"queue",actionType:"add-component"}),e){const{nodeCount:d,componentTypes:f,isEmpty:p}=e;p&&l.push({id:"tip-start",title:"Start with a Component",description:"Drag a component from the palette to begin your design",action:()=>{},icon:"",category:"tip",priority:10,actionType:"info-only"}),d>1&&f.length>1&&l.push({id:"tip-connect",title:"Connect Components",description:"Click and drag from one component to another to create connections",action:()=>{},icon:"",category:"tip",priority:8,actionType:"info-only"}),d>5&&l.push({id:"group",title:"Organize with Groups",description:"Use group containers to organize related components",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"cluster",actionType:"add-component"}),f.includes("database")&&!f.includes("cache")&&l.push({id:"pattern-cache",title:"Consider Adding Cache",description:"Reduce database load with a caching layer",action:()=>{},icon:"",category:"pattern",priority:8,componentId:"cache",actionType:"add-component"}),(f.includes("api-gateway")||f.includes("server"))&&!f.includes("load-balancer")&&l.push({id:"pattern-lb",title:"Add Load Balancing",description:"Scale your API with a load balancer",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"loadbalancer",actionType:"add-component"})}return l.length===0&&(l.push({id:"tip-palette",title:"Explore Components",description:`Browse ${ms.length}+ components in the palette`,action:()=>{},icon:"",category:"tip",priority:5,actionType:"info-only"}),l.push({id:"tip-export",title:"Export Your Design",description:"Save your work as PNG or JSON",action:()=>{},icon:"",category:"tip",priority:4,actionType:"info-only"})),l.sort((d,f)=>f.priority-d.priority).slice(0,5)},[t,e]);return i&&i.length>0?i:o},Jve=()=>{const{dismissWelcome:t}=A7();return g.jsx(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-4xl mb-3",children:""}),g.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Design Assistant!"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"I'm here to help you with smart suggestions based on what you're building. Start adding components to your canvas, and I'll provide contextual tips!"}),g.jsx("button",{onClick:t,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md
            transition-colors font-medium`,children:"Got it!"})]})})},Qve=({suggestion:t,wasAdded:e,onClick:n})=>{const r=t.actionType==="add-component"||t.actionType==="add-pattern",i=()=>{let o=`bg-theme/50 rounded-xl p-3.5
      transition-all duration-300 border shadow-sm`;return r?o+=` hover:shadow-md hover:scale-[1.02] hover:border-accent/40 
        hover:bg-accent/5 cursor-pointer transform`:o+=" border-theme/10",e?o+=" bg-green-500/10 border-green-500/30 shadow-green-500/20":o+=" border-theme/10",o},s=()=>r&&!e?g.jsx("span",{className:`text-xs px-2 py-1 bg-accent/10 text-accent rounded-full 
          font-medium border border-accent/20`,children:"Click to add"}):e?g.jsxs(gt.span,{initial:{scale:0},animate:{scale:1},className:`text-xs px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 
            rounded-full font-medium border border-green-500/20 flex items-center gap-1`,children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Added"})]}):null;return g.jsx(gt.div,{whileHover:r?{x:4}:{},className:i(),onClick:()=>n(t),children:g.jsxs("div",{className:"flex items-start gap-3",children:[t.icon&&g.jsx("div",{className:`w-8 h-8 flex-shrink-0 bg-accent/10 rounded-lg 
            flex items-center justify-center`,children:g.jsx("span",{className:"text-lg",children:t.icon})}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[g.jsx("h5",{className:"font-semibold text-sm text-theme",children:t.title}),s()]}),g.jsx("p",{className:"text-xs text-muted leading-relaxed",children:t.description})]})]})})},exe=({canvasContext:t,nodes:e=[],edges:n=[],onAddComponent:r})=>{const{isOpen:i,showWelcome:s,userIntent:o,toggleChatBot:l,updateCanvasContext:u}=A7(),d=Zve(o,t??null,e,n),[f,p]=M.useState(null);M.useEffect(()=>{t&&u(t)},[t,u]);const m=b=>{if(b.actionType==="add-component"&&b.componentId&&r)r(b.componentId),p(b.id),setTimeout(()=>p(null),2e3);else if(b.actionType==="add-pattern"&&b.componentIds&&r){for(const v of b.componentIds)r(v);p(b.id),setTimeout(()=>p(null),2e3)}};return g.jsxs(g.Fragment,{children:[g.jsxs(gt.button,{onClick:l,className:`fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]
          text-white rounded-full shadow-xl flex items-center justify-center
          z-50 transition-all hover:shadow-2xl`,whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},"aria-label":"Toggle chat bot",children:[i?g.jsx(hu,{className:"w-8 h-8"}):g.jsx(EJ,{className:"w-8 h-8"}),d.length>0&&!i&&g.jsx(gt.div,{initial:{scale:0},animate:{scale:1},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full 
              flex items-center justify-center text-xs font-bold`,children:d.length})]}),g.jsx(uu,{children:i&&g.jsxs(gt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:`fixed bottom-24 right-6 w-96 max-h-[600px] 
              bg-[var(--surface)] rounded-2xl shadow-2xl
              border border-theme/10 backdrop-blur-sm
              flex flex-col z-50 overflow-hidden`,children:[g.jsxs("div",{className:`flex items-center justify-between px-5 py-4 
              bg-gradient-to-r from-[var(--brand)] to-[var(--accent)]`,children:[g.jsxs("div",{className:"flex items-center gap-3",children:[g.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:g.jsx("span",{className:"text-2xl",children:""})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-white text-lg",children:"Design Assistant"}),g.jsx("p",{className:"text-xs text-white/80",children:"Smart suggestions for you"})]})]}),g.jsx("button",{onClick:l,className:`text-white/80 hover:text-white transition-colors 
                  w-8 h-8 flex items-center justify-center rounded-full
                  hover:bg-white/10`,"aria-label":"Close chat bot",children:g.jsx(hu,{className:"w-5 h-5"})})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-gradient-to-b from-transparent to-theme/5 chatbot-scroll",children:g.jsx(uu,{mode:"wait",children:s?g.jsx(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:g.jsx(Jve,{})},"welcome"):g.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[o&&g.jsx(gt.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`bg-gradient-to-br from-accent/10 to-accent/5 
                          border border-accent/20 rounded-xl p-4 mb-4 shadow-sm`,children:g.jsxs("div",{className:"flex items-start gap-3",children:[g.jsx("span",{className:"text-2xl",children:""}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"font-bold text-theme text-base mb-1",children:o.title||"Your Project"}),o.description&&g.jsx("p",{className:"text-sm text-muted leading-relaxed",children:o.description})]})]})}),d.length>0?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("h4",{className:"text-sm font-bold text-theme",children:"Suggestions for you"}),g.jsx("span",{className:`ml-auto text-xs px-2 py-1 bg-accent/10 
                            text-accent rounded-full font-medium`,children:d.length})]}),g.jsx("div",{className:"space-y-2",children:d.map((b,v)=>g.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.05},children:g.jsx(Qve,{suggestion:b,wasAdded:f===b.id,onClick:m})},b.id))})]}):g.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[g.jsx("div",{className:`w-16 h-16 mx-auto mb-4 bg-theme/5 rounded-full 
                          flex items-center justify-center`,children:g.jsx("span",{className:"text-4xl opacity-50",children:""})}),g.jsx("p",{className:"text-muted text-sm",children:"Start adding components to your canvas!"}),g.jsx("p",{className:"text-muted text-xs mt-1",children:"I'll provide smart suggestions as you design"})]}),t&&!t.isEmpty&&g.jsxs(gt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-5 pt-4 border-t border-theme/10",children:[g.jsxs("h5",{className:"text-xs font-bold text-muted uppercase tracking-wide mb-3 flex items-center gap-2",children:[g.jsx("span",{children:""}),g.jsx("span",{children:"Canvas Overview"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[g.jsxs("div",{className:`bg-gradient-to-br from-blue-500/10 to-blue-500/5 
                            border border-blue-500/20 rounded-lg p-3 text-center`,children:[g.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:t.nodeCount}),g.jsx("div",{className:"text-xs text-muted mt-1",children:"Components"})]}),g.jsxs("div",{className:`bg-gradient-to-br from-purple-500/10 to-purple-500/5 
                            border border-purple-500/20 rounded-lg p-3 text-center`,children:[g.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.edgeCount}),g.jsx("div",{className:"text-xs text-muted mt-1",children:"Connections"})]})]})]})]},"suggestions")})}),g.jsx("div",{className:"px-5 py-3 border-t border-theme/10 bg-theme/5",children:g.jsxs("div",{className:"flex items-center justify-center gap-2",children:[g.jsx("span",{className:"text-lg",children:""}),g.jsx("p",{className:"text-xs text-muted font-medium",children:"Suggestions adapt to your design"})]})})]})})]})},txe=({onSubmit:t,onSkip:e})=>{const[n,r]=M.useState(""),[i,s]=M.useState(""),o=l=>{if(l.preventDefault(),n.trim()||i.trim()){const u={title:n.trim(),description:i.trim(),timestamp:new Date};t(u)}};return g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:g.jsx(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-[var(--surface)] rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4",children:g.jsxs("form",{onSubmit:o,children:[g.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[g.jsx("h2",{className:"text-xl font-bold text-theme",children:" What are you designing today?"}),g.jsx("p",{className:"text-sm text-muted mt-1",children:"Help us provide better suggestions by sharing what you're building"})]}),g.jsxs("div",{className:"px-6 py-4 space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"project-title",className:"block text-sm font-medium text-theme mb-2",children:"Project Title"}),g.jsx("input",{id:"project-title",type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"e.g., E-commerce System, Blog Database, Microservices Architecture...",className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted`,autoFocus:!0})]}),g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"project-description",className:"block text-sm font-medium text-theme mb-2",children:["Description ",g.jsx("span",{className:"text-muted",children:"(Optional)"})]}),g.jsx("textarea",{id:"project-description",value:i,onChange:l=>s(l.target.value),placeholder:"Briefly describe what you want to design and its key features...",rows:4,className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted
                  resize-none`})]}),g.jsx("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-3",children:g.jsxs("p",{className:"text-xs text-theme",children:[" ",g.jsx("strong",{children:"Tip:"})," This information will be used for auto-save and to provide you with smart, context-aware suggestions while you design."]})})]}),g.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[g.jsx("button",{type:"button",onClick:e,className:`px-4 py-2 text-sm font-medium text-muted
                hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors`,children:"Skip for now"}),g.jsx("button",{type:"submit",className:`px-4 py-2 text-sm font-medium bg-accent hover:brightness-90 
                text-white rounded-md transition-all`,children:"Continue"})]})]})})})},nxe={customEdge:kye,erRelationship:Mye},rxe=Ae.memo(t=>{const e=t.data;return g.jsx(dq,{id:t.id,data:e,onCopy:(n,r)=>t.onCopy(n,r),isInGroup:t.isInGroup})}),ixe=Ae.memo(t=>{const e=t.data;return g.jsx(gq,{id:t.id,data:e,onCopy:(n,r)=>t.onCopy(n,r),isInGroup:t.isInGroup})}),sxe=Ae.memo(t=>{const e=t.data;return g.jsx(yq,{id:t.id,data:e,onCopy:(n,r)=>t.onCopy(n,r),isInGroup:t.isInGroup})}),oxe=(t,e)=>n=>{const r=e.current?.find(i=>i.id===n.id)?.parentId!==void 0;return g.jsx(rxe,{...n,onCopy:t,isInGroup:r})},axe=(t,e)=>n=>{const r=e.current?.find(i=>i.id===n.id)?.parentId!==void 0;return g.jsx(ixe,{...n,onCopy:t,isInGroup:r})},lxe=(t,e)=>n=>{const r=e.current.find(i=>i.id===n.id)?.parentId!==void 0;return g.jsx(sxe,{...n,onCopy:t,isInGroup:r})},cxe=()=>{Ul();const t=gh(),n=cW()?.id,{screenToFlowPosition:r,flowToScreenPosition:i}=sh(),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:f}=vh(),{userIntent:p,setUserIntent:m,resetChatBot:b}=A7(),v=Rye(),w=M.useRef(v);w.current=v;const S=M.useRef([]),k=M.useRef(!1),E=new URLSearchParams(globalThis.location.search).get("diagramId"),[N,A]=M.useState(null),[_,j]=M.useState(!0),[R,L]=M.useState(null),[P,F]=M.useState(!1),[V,q]=M.useState(null),[I,U]=M.useState(null),[O,H]=M.useState(!1),[G,ee]=M.useState(!1),[B,W]=M.useState(!1),[ie,oe]=M.useState(""),[$,Z]=M.useState(""),[te,ce]=M.useState(!1),[re,ye]=M.useState(""),[Ce,De]=M.useState("read"),[Se,Ne]=M.useState([]),[Ee,Me]=M.useState(!1),[yt,Pe]=M.useState(!1),[vt,wt]=M.useState("idle"),[Yt,gn]=M.useState(null),[qt,Mt]=M.useState(!1),[Dn,yn]=M.useState(0),zt=M.useRef(null);M.useEffect(()=>{if(!n){j(!1),L("No problem ID provided");return}if(n==="free"){A({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),j(!1);return}if(n.startsWith("custom-")){const Y=localStorage.getItem(`custom-problem-${n}`);if(Y){A(JSON.parse(Y)),j(!1);return}}(async()=>{try{j(!0),L(null);const se=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!se.ok)throw new Error(`Failed to fetch problem: ${se.status} ${se.statusText}`);const pe=await se.json();A(pe)}catch(Y){L(Y instanceof Error?Y.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",Y)}finally{j(!1)}})()},[n]);const ht=()=>t("/"),{state:_t,setState:Dt,undo:vr,redo:qr,canUndo:Ii,canRedo:rn}=$oe({nodes:[],edges:[]}),[ze,Ge,xr]=phe(_t.nodes),[pt,bn,wo]=mhe(_t.edges),{getNodes:Pi,fitView:Ur}=sh(),$r=M.useRef(!1);M.useEffect(()=>{S.current=ze},[ze]),M.useEffect(()=>{if(n==="free"&&!_){const X=!V&&!E&&ze.length===0;if(X&&!k.current){b();const Y=setTimeout(()=>{ee(!0),k.current=!0},500);return()=>clearTimeout(Y)}else X||(k.current=!1)}},[n,_,V,E,ze.length,b]);const[wr,Dr]=M.useState(!1),[Gr,St]=M.useState(!1),Kn=M.useRef(null);M.useEffect(()=>{if(E)(async()=>{try{const Y=o?await Jt.getDiagram(E):await Jt.getPublicDiagram(E),se=Y.nodes,pe=Y.edges;Ge(se),bn(pe),q(Y.id),U(Y),Dt({nodes:se,edges:pe})}catch(Y){console.error("Failed to load diagram:",Y),v.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&o){const X=`last-diagram-${s?.id||"anonymous"}`,Y=localStorage.getItem(X);Y&&(async()=>{try{const pe=await Jt.getDiagram(Y),ve=pe.nodes,ke=pe.edges;Ge(ve),bn(ke),q(pe.id),U(pe),Dt({nodes:ve,edges:ke}),v.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(X),v.error("Failed to restore previous design. Starting fresh.")}})()}else n&&n!=="free"&&o&&(async()=>{try{const Y=await Jt.getAttemptByProblem(n);if(console.log("Loaded attempt:",Y),Y){const se=Y.nodes,pe=Y.edges;Ge(se),bn(pe),Y.elapsedTime&&yn(Y.elapsedTime),Y.lastAssessment&&(console.log("Restoring assessment:",Y.lastAssessment),Bt(Y.lastAssessment),ge("assessment")),Dt({nodes:se,edges:pe}),v.success("Progress restored from previous session")}}catch(Y){console.error("Failed to load saved attempt:",Y)}})()},[E,o,n,s?.id]),M.useEffect(()=>{Mt(o&&n!==void 0)},[o,n]),M.useEffect(()=>{if(!qt||ze.length===0)return;const Y=setTimeout(async()=>{try{if(wt("saving"),n==="free")if(V){await Jt.updateDiagram(V,{title:I?.title||"Auto-saved Design",description:I?.description||"Auto-saved design",nodes:ze,edges:pt});const ve=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(ve,V)}else if(p&&(p.title||p.description)){const ve=await Jt.saveDiagram({title:p.title||"Untitled Design",description:p.description||"",nodes:ze,edges:pt});q(ve.id),U(ve);const ke=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(ke,ve.id)}else{W(!0),wt("idle");return}else{if(!n)return;await Jt.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:ze,edges:pt,elapsedTime:Dn})}wt("saved"),gn(new Date);const se=localStorage.getItem("lastAutoSaveToast"),pe=Date.now();(!se||pe-Number.parseInt(se)>6e4)&&(v.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),localStorage.setItem("lastAutoSaveToast",pe.toString())),setTimeout(()=>wt("idle"),3e3)}catch(se){console.error("Auto-save failed:",se),wt("error"),setTimeout(()=>wt("idle"),5e3)}},3e3);return()=>clearTimeout(Y)},[ze,pt,qt,n,V,s?.id,Dn,N,p]),M.useEffect(()=>{$r.current=!0,Ge(_t.nodes),bn(_t.edges),setTimeout(()=>{$r.current=!1},0)},[_t,Ge,bn]),M.useEffect(()=>{B&&p&&(p.title&&!ie&&oe(p.title),p.description&&!$&&Z(p.description))},[B,p,ie,$]),M.useEffect(()=>{if(n!=="free")return zt.current=setInterval(()=>{yn(X=>X+1)},1e3),()=>{zt.current&&clearInterval(zt.current)}},[n]),M.useEffect(()=>()=>{const X=`last-diagram-${s?.id||"anonymous"}`;if(localStorage.removeItem(X),n&&n!=="free"){const Y=`problem-progress-${s?.id||"anonymous"}-${n}`;localStorage.removeItem(Y)}},[s?.id,n]);const So=X=>{const Y=Math.floor(X/3600),se=Math.floor(X%3600/60),pe=X%60;return Y>0?`${Y.toString().padStart(2,"0")}:${se.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${se.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},zi=X=>{const se=Math.floor((new Date().getTime()-X.getTime())/1e3);if(se<60)return"a moment ago";if(se<1800)return`${Math.floor(se/60)} min ago`;if(se<3600)return"about an hour ago";if(se<86400){const pe=Math.floor(se/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${X.toLocaleTimeString()}`};M.useEffect(()=>{const X=Y=>{wr&&(Y.target.closest(".relative")||Dr(!1))};if(wr)return document.addEventListener("click",X),()=>document.removeEventListener("click",X)},[wr]),M.useEffect(()=>{const X=Y=>{Gr&&(Y.target.closest(".relative")||St(!1))};if(Gr)return document.addEventListener("click",X),()=>document.removeEventListener("click",X)},[Gr]);const sr=X=>{const Y=ze.find(Te=>Te.id===X.source),se=ze.find(Te=>Te.id===X.target),pe=Te=>{const Be=Te?.data?.componentId;return Be==="entity"||Be==="weak-entity"},ve=pe(Y)&&pe(se),ke={...X,type:ve?"erRelationship":"customEdge",data:ve?{label:"",hasLabel:!1,cardinality:"one-to-many"}:{label:"",hasLabel:!1}};bn(Te=>iH(ke,Te))},[Xt,Bt]=Ae.useState(null),[Rr,Rn]=M.useState(!1),Wr=async()=>{if(Rr)return;Rn(!0),Bt(null);const X={components:ze.map(Y=>{const se=Y.data??{},pe=se.type;let ve;typeof pe=="string"?ve=pe:typeof Y.type=="string"?ve=Y.type:ve="microservice";const ke=se.label,Te=typeof ke=="string"?ke:String(Y.id),Be=se&&typeof se=="object"?{...se}:{},{icon:et,subtitle:Oe,...Je}=Be;return{id:Y.id,type:ve,label:Te,position:{x:Y.position?.x??0,y:Y.position?.y??0},properties:{...Je,nodeData:{label:Te,icon:se.icon,subtitle:se.subtitle}}}}),connections:pt.map(Y=>{const se=Y.data??{},pe=se.type,ve=typeof pe=="string"?pe:"api-call",ke=se.label,Te=typeof ke=="string"?ke:void 0;return{id:Y.id??`${Y.source}-${Y.target}`,source:Y.source,target:Y.target,type:ve,label:Te,properties:se}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",X);const Y=await Q1e(X,N);if(Bt(Y),ge("assessment"),n&&n!=="free"&&o)try{console.log("Saving assessment to database:",Y),await Jt.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:ze,edges:pt,elapsedTime:Dn,lastAssessment:Y}),console.log("Assessment saved successfully")}catch(se){console.error("Failed to save assessment:",se)}}catch(Y){console.error("Assessment failed:",Y),Bt({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{Rn(!1)}},es=M.useRef(null),Ls=X=>{X.preventDefault(),X.dataTransfer&&(X.dataTransfer.dropEffect="move")},Kr=X=>{X.preventDefault();const Y=X.dataTransfer?.getData("application/reactflow")||X.dataTransfer?.getData("text/plain");let se=Y;try{Y&&(se=JSON.parse(Y).type||Y)}catch{}const pe=r({x:X.clientX,y:X.clientY}),ve=`${se}-${Date.now()}`,ke=ms.find(Oe=>Oe.id===se),Te=ke?.group==="Grouping",Be=ke?.nodeType||(Te?"group":"custom"),et={id:ve,position:pe,type:Be,style:Te?{width:400,height:300,zIndex:-1}:void 0,data:{label:ke?.label??se,componentId:ke?.id,icon:ke?.icon,subtitle:ke?.description,backgroundColor:Te?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Te?"rgba(100, 100, 255, 0.3)":void 0,...Be==="tableNode"?{componentName:ke?.label||"Entity",attributes:ke?.data?.attributes||[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}],renderConfig:ke?.renderConfig}:{},...Be==="erNode"?ke?.properties?.reduce((Oe,Je)=>(Je.default!==void 0&&Je.default!==""&&(Oe[Je.key]=Je.default),Oe),{}):{}}};Ge(Oe=>[...Oe,et])},ts=(X,Y)=>{if(Y.parentId)return;const se=ze.filter(ve=>ve.type==="group");let pe;for(const ve of se){if(ve.id===Y.id)continue;const ke=ve.position.x,Te=ve.position.y,Be=ve.style?.width||400,et=ve.style?.height||300,Oe=Y.position.x,Je=Y.position.y,mt=10;if(Oe>ke+mt&&Oe<ke+Be-mt&&Je>Te+mt&&Je<Te+et-mt){pe=ve.id;break}}pe&&Ge(ve=>ve.map(ke=>{if(ke.id===Y.id){const Te=ve.find(et=>et.id===pe),Be=Te?{x:Y.position.x-Te.position.x,y:Y.position.y-Te.position.y}:Y.position;return{...ke,position:Be,parentId:pe,extent:"parent"}}return ke}))},vn=M.useCallback(()=>{const X=Vt.current;X&&Ge(Y=>Y.map(se=>{if(se.id===X&&se.parentId){const pe=Y.find(Te=>Te.id===se.parentId);let ve=se.position.x,ke=se.position.y;return pe&&(ve+=pe.position.x,ke+=pe.position.y),{...se,position:{x:ve,y:ke},parentId:void 0,extent:void 0}}return se}))},[Ge]),[Ue,or]=M.useState(null),[ar,Lt]=M.useState({}),[ns,Le]=M.useState({}),[J,ge]=M.useState("details"),[je,dt]=M.useState(!1),Vt=M.useRef(null);Ae.useEffect(()=>{Vt.current=Ue},[Ue]);const Rt=M.useRef(void 0);Rt.current=X=>{const se=X.detail.id;Ge(pe=>pe.filter(ve=>ve.id!==se)),Vt.current===se&&(or(null),ge("details"))};const Ut=M.useRef(void 0);Ut.current=X=>{const se=X.detail.id;or(pe=>{const ve=pe===se?null:se;return ge(ve?"inspector":"details"),ve})};function zn(X,Y,se,pe){return X.map(ve=>ve.id===Y?{...ve,data:{...ve.data,label:se,hasLabel:pe},label:se}:ve)}function xn(X,Y,se){return X.map(pe=>pe.id===Y?{...pe,data:{...pe.data,cardinality:se}}:pe)}const fi=Ae.useRef(void 0);fi.current=X=>{const Y=X,{id:se,label:pe,hasLabel:ve}=Y.detail;bn(ke=>zn(ke,se,pe,ve))};const Ht=Ae.useRef(void 0);Ht.current=X=>{const Y=X,{id:se,cardinality:pe}=Y.detail;bn(ve=>xn(ve,se,pe))},Ae.useEffect(()=>{const X=se=>fi.current?.(se),Y=se=>Ht.current?.(se);return globalThis.addEventListener("diagram:edge-label-change",X),globalThis.addEventListener("diagram:edge-cardinality-change",Y),()=>{globalThis.removeEventListener("diagram:edge-label-change",X),globalThis.removeEventListener("diagram:edge-cardinality-change",Y)}},[]),Ae.useEffect(()=>{const X=pe=>Rt.current?.(pe),Y=pe=>Ut.current?.(pe),se=pe=>{const ve=pe;Ge(ke=>ke.map(Te=>{if(Te.id===ve.detail.id&&Te.parentId){const Be=ke.find(Je=>Je.id===Te.parentId);let et=Te.position.x,Oe=Te.position.y;return Be&&(et+=Be.position.x,Oe+=Be.position.y),{...Te,position:{x:et,y:Oe},parentId:void 0,extent:void 0}}return Te}))};return globalThis.addEventListener("diagram:node-delete",X),globalThis.addEventListener("diagram:node-toggle",Y),globalThis.addEventListener("diagram:node-detach",se),()=>{globalThis.removeEventListener("diagram:node-delete",X),globalThis.removeEventListener("diagram:node-toggle",Y),globalThis.removeEventListener("diagram:node-detach",se)}},[Ge]),Ae.useEffect(()=>{const X=ke=>{if(!ke)return[];if(Array.isArray(ke))return ke;if(typeof ke=="string")try{const Te=JSON.parse(ke);return Array.isArray(Te)?Te:[]}catch{return[]}return[]},Y=ke=>{const Te=ke;Ge(Be=>Be.map(et=>{if(et.id===Te.detail.nodeId){const Oe=et.data,Je=X(Oe.attributes);return{...et,data:{...Oe,attributes:[...Je,Te.detail.attribute]}}}return et}))},se=ke=>{const Te=ke;Ge(Be=>Be.map(et=>{if(et.id===Te.detail.nodeId){const Oe=et.data,Je=X(Oe.attributes);return{...et,data:{...Oe,attributes:Je.filter(mt=>mt.id!==Te.detail.attributeId)}}}return et}))},pe=ke=>{const Te=ke;Ge(Be=>Be.map(et=>{if(et.id===Te.detail.nodeId){const Oe=et.data,Je=X(Oe.attributes);return{...et,data:{...Oe,attributes:Je.map(mt=>mt.id===Te.detail.attributeId?{...mt,[Te.detail.key]:!mt[Te.detail.key]}:mt)}}}return et}))},ve=ke=>{const Te=ke;Ge(Be=>Be.map(et=>{if(et.id===Te.detail.nodeId){const Oe=et.data,Je=X(Oe.attributes);return{...et,data:{...Oe,attributes:Je.map(mt=>mt.id===Te.detail.attributeId?{...mt,name:Te.detail.name,type:Te.detail.type}:mt)}}}return et}))};return globalThis.addEventListener("diagram:table-attribute-add",Y),globalThis.addEventListener("diagram:table-attribute-delete",se),globalThis.addEventListener("diagram:table-attribute-toggle",pe),globalThis.addEventListener("diagram:table-attribute-update",ve),()=>{globalThis.removeEventListener("diagram:table-attribute-add",Y),globalThis.removeEventListener("diagram:table-attribute-delete",se),globalThis.removeEventListener("diagram:table-attribute-toggle",pe),globalThis.removeEventListener("diagram:table-attribute-update",ve)}},[Ge]),Ae.useEffect(()=>{if(!Ue)return;const X=ze.find(Y=>Y.id===Ue);Lt(X?.data??{})},[Ue,ze]);const Yn=(X,Y)=>{Lt(se=>({...se,[X]:Y})),Ue&&Ge(se=>se.map(pe=>pe.id===Ue?{...pe,data:{...pe.data,[X]:Y}}:pe))},rs=(X,Y)=>Yn(X,Y),La=(X,Y)=>Yn(X,Y),ec=(X,Y)=>Yn(X,Y),tc=(X,Y)=>Yn(X,Y),lr=()=>{if(!Ue)return;const X={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(ns[Ue]?.length||0)+1}`,label:`Custom Property ${(ns[Ue]?.length||0)+1}`,type:"text",value:""};Le(Y=>{const se={...Y,[Ue]:[...Y[Ue]||[],X]};return Ge(pe=>pe.map(ve=>ve.id===Ue?{...ve,data:{...ve.data,_customProperties:se[Ue]}}:ve)),se})},nc=(X,Y)=>{Ue&&Le(se=>{const ve=(se[Ue]||[]).map(ke=>ke.id===X?{...ke,...Y}:ke);return Ge(ke=>ke.map(Te=>Te.id===Ue?{...Te,data:{...Te.data,_customProperties:ve}}:Te)),{...se,[Ue]:ve}})},qu=X=>{Ue&&Le(Y=>{const pe=(Y[Ue]||[]).filter(ve=>ve.id!==X);return Ge(ve=>ve.map(ke=>ke.id===Ue?{...ke,data:{...ke.data,_customProperties:pe}}:ke)),{...Y,[Ue]:pe}})};Ae.useEffect(()=>{if(!Ue)return;const X=ze.find(Y=>Y.id===Ue);X?.data?._customProperties&&Le(Y=>({...Y,[Ue]:X.data._customProperties}))},[Ue,ze]);const Co=X=>{const Y=`${Ue}-${X.key}`,se=ar[X.key];let pe;typeof se=="number"?pe=se:typeof X.default=="number"?pe=X.default:pe=void 0;let ve;typeof se=="string"?ve=se:X.default===null||X.default===void 0?ve="":ve=String(X.default);let ke;typeof se=="string"?ke=se:X.default===null||X.default===void 0?ke=void 0:ke=String(X.default);const Te=!!se;return g.jsxs("div",{className:"flex flex-col px-1",children:[X.type==="boolean"&&g.jsx(cV,{id:Y,checked:Te,onChange:Be=>rs(X.key,Be),label:X.label}),X.type==="number"&&g.jsx(uV,{id:Y,label:X.label,value:pe,onChange:Be=>La(X.key,Be)}),X.type==="text"&&g.jsx(V0,{id:Y,label:X.label,value:ve,placeholder:X.placeholder,onChange:Be=>ec(X.key,Be)}),X.type==="textarea"&&g.jsx(Km,{id:Y,label:X.label,value:ve,placeholder:X.placeholder,onChange:Be=>ec(X.key,Be)}),X.type==="select"&&g.jsx(dV,{id:Y,label:X.label,value:ke,options:X.options||[],onChange:Be=>tc(X.key,Be)})]},X.key)};let is=null;if(Ue){const X=ze.find(Y=>Y.id===Ue);if(X){const Y=X.data.componentId?ms.find(se=>se.id===X.data.componentId):ms.find(se=>se.label===X.data.label);Y?.properties?is=Y.properties.map(se=>Co(se)):is=g.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else is=g.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let ss=null;if(Ue){const X=ns[Ue]||[];X.length>0?ss=X.map(Y=>g.jsx(Dye,{property:Y,onUpdate:nc,onDelete:qu},Y.id)):ss=g.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const ko=M.useCallback((X,Y)=>{const se=S.current.find(ke=>ke.id===X);if(!se)return;const pe=`${X}-copy-${Date.now()}`,ve={...se,id:pe,position:{x:se.position.x+200,y:se.position.y+100},data:{...Y},selected:!1};Ge(ke=>[...ke,ve])},[Ge]),cr=M.useMemo(()=>({custom:oxe(ko,S),erNode:axe(ko,S),tableNode:lxe(ko,S),group:_ye}),[ko]),Yr=M.useCallback(async()=>{if(!(!V||!te))try{Pe(!0);const X=await Jt.getCollaborators(V);Ne(X)}catch(X){console.error("Failed to load collaborators:",X),w.current.error("Failed to load collaborators.")}finally{Pe(!1)}},[V,te]);M.useEffect(()=>{te&&V?Yr():te||Ne([])},[te,V,Yr]);const{state:Eo,collaborators:Ia,cursors:Bi,sendCursorPosition:Uu}=Uve({diagramId:V||"",nodes:ze,edges:pt,onNodesChange:M.useCallback(X=>{Ge(X)},[Ge]),onEdgesChange:M.useCallback(X=>{bn(X)},[bn]),enabled:!!V&&o}),as=Eo.isConnected,No=!Eo.isConnected&&!Eo.error,_1=0;M.useEffect(()=>{$r.current||ze.length===0&&pt.length===0||as||Dt({nodes:ze,edges:pt})},[ze,pt,Dt,as]),M.useEffect(()=>{const X=Y=>{as||((Y.ctrlKey||Y.metaKey)&&Y.key==="z"&&!Y.shiftKey&&(Y.preventDefault(),vr()),((Y.ctrlKey||Y.metaKey)&&Y.shiftKey&&Y.key==="z"||Y.ctrlKey&&Y.key==="y")&&(Y.preventDefault(),qr()))};return globalThis.addEventListener("keydown",X),()=>globalThis.removeEventListener("keydown",X)},[vr,qr,as]);const $h=M.useCallback(X=>{if(!as||!es.current?.getBoundingClientRect())return;const se=r({x:X.clientX,y:X.clientY});Uu(se)},[as,Uu,r]),Gh=M.useMemo(()=>{if(n!=="free")return;const X=ze.map(Y=>Y.data?.componentId).filter(Boolean);return{nodeCount:ze.length,edgeCount:pt.length,componentTypes:X,isEmpty:ze.length===0}},[n,ze,pt]);if(_)return g.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),g.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(R)return g.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),g.jsx("div",{className:"text-muted mb-4",children:R}),g.jsxs("div",{className:"flex gap-3 justify-center",children:[g.jsx("button",{onClick:ht,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),g.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!N)return g.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),g.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),g.jsx("button",{onClick:ht,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function $u(X){const Y=ms.find(Be=>Be.id===X);if(Y)return Y;const se=X.toLowerCase(),pe=ms.find(Be=>Be.id.toLowerCase()===se);if(pe)return pe;const ve=ms.find(Be=>Be.label.toLowerCase()===se);if(ve)return ve;const ke=ms.find(Be=>Be.tags?.some(et=>et.toLowerCase().includes(se)));if(ke)return ke;const Te=ms.find(Be=>Be.label.toLowerCase().includes(se)||se.includes(Be.label.toLowerCase()));return Te||null}function Wh(X){const Y=$u(X),se=es.current?.getBoundingClientRect();if(!se)return;const pe=r({x:se.left+se.width/2,y:se.top+se.height/2}),ve=`${Y?.id||"custom-component"}-${Date.now()}`,ke=Y?.group==="Grouping",Te=Y?.nodeType||(ke?"group":"custom"),Be=Y?.label??X,et=Y?.icon??"",Oe=Y?.description??"Custom Component",Je={id:ve,position:pe,type:Te,style:ke?{width:400,height:300,zIndex:-1}:void 0,data:{label:Be,componentId:Y?.id||"custom-component",icon:et,subtitle:Oe,backgroundColor:ke?"rgba(100, 100, 255, 0.05)":void 0,borderColor:ke?"rgba(100, 100, 255, 0.3)":void 0}};Ge(mt=>[...mt,Je])}const D1=()=>{ze.length===0&&pt.length===0||dt(!0)},rc=()=>{Ge([]),bn([]),or(null),Bt(null),dt(!1)},Gu=()=>{dt(!1)},Pa=(X="png")=>{const Y=WV(Pi()),se=Zg(Y,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let ve,ke;X==="svg"?(ve=aF,ke="svg"):X==="jpeg"?(ve=Ipe,ke="jpg"):(ve=Lpe,ke="png"),ve(pe,{backgroundColor:X==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${se.x}px, ${se.y}px) scale(${se.zoom})`}}).then(Te=>{const Be=document.createElement("a");Be.setAttribute("download",`system-design-${Date.now()}.${ke}`),Be.setAttribute("href",Te),Be.click()}).catch(Te=>{console.error("Error generating image:",Te)})},To=()=>{try{const X=N?.title||"System Design",Y=N?.description,se=Wve(ze,pt,X,Y),pe=`${X.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;NL(se,pe,"application/json"),w.current.success("Design exported as JSON successfully!")}catch(X){console.error("Export JSON error:",X),w.current.error("Failed to export as JSON")}},Ao=()=>{try{const X=N?.title||"System Design",Y=N?.description,se=Kve(ze,pt,X,Y),pe=`${X.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;NL(se,pe,"application/xml"),v.success("Design exported as XML successfully!")}catch(X){console.error("Export XML error:",X),v.error("Failed to export as XML")}},Kh=async X=>{const Y=X.target.files?.[0];if(Y)try{const se=await Yve(Y);let pe;if(Y.name.endsWith(".json"))pe=kL(se),v.success("Design imported from JSON successfully!");else if(Y.name.endsWith(".xml")||Y.name.endsWith(".drawio"))pe=EL(se),v.success("Design imported from XML successfully!");else{const ve=se.trim();if(ve.startsWith("{")||ve.startsWith("["))pe=kL(se),v.success("Design imported from JSON successfully!");else if(ve.startsWith("<?xml")||ve.startsWith("<mxfile"))pe=EL(se),v.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}Ge(pe.nodes),bn(pe.edges),q(null),setTimeout(()=>{Ur({padding:.2,duration:400})},100)}catch(se){console.error("Import error:",se),v.error(se instanceof Error?se.message:"Failed to import diagram")}finally{Kn.current&&(Kn.current.value="")}},Wu=()=>{Kn.current?.click()},Yh=async()=>{if(!(!re.trim()||!V))try{Me(!0),await Jt.addCollaborator(V,re.trim(),Ce),w.current.success(`Diagram shared with ${re} successfully!`),ye(""),De("read"),Yr()}catch(X){console.error("Failed to Share Design:",X),w.current.error("Failed to Share Design. Please try again.")}finally{Me(!1)}},za=async(X,Y)=>{if(V)try{await Jt.updateCollaborator(V,X,Y),w.current.success("Permission updated successfully!"),Yr()}catch(se){console.error("Failed to update permission:",se),w.current.error("Failed to update permission.")}},Vi=async X=>{if(V)try{await Jt.removeCollaborator(V,X),w.current.success("Collaborator removed successfully!"),Yr()}catch(Y){console.error("Failed to remove collaborator:",Y),w.current.error("Failed to remove collaborator.")}},Ku=X=>{m(X),ee(!1),v.success("Great! I'll provide suggestions based on your project.")},Ba=()=>{ee(!1)},ls=async X=>{if(X.preventDefault(),!!ie.trim())try{wt("saving");const Y={title:ie.trim(),description:$.trim()||void 0,nodes:ze,edges:pt},se=await Jt.saveDiagram(Y);q(se.id),U(se);const pe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(pe,se.id),wt("saved"),gn(new Date),W(!1),oe(""),Z(""),v.success("Design saved successfully!")}catch(Y){console.error("Failed to save diagram:",Y),wt("error"),v.error("Failed to save design. Please try again.")}},Yu=()=>{W(!1),wt("idle"),oe(""),Z("")},Va=(X="TB")=>{const Y=ze.filter(Oe=>Oe.type==="group"),se=ze.filter(Oe=>Oe.type!=="group"&&!Oe.parentId),pe=Oe=>Oe.type==="tableNode"?{width:400,height:400}:Oe.type==="erNode"?{width:400,height:300}:{width:200,height:80},ve=new Map,ke=new Map;for(const Oe of Y){const Je=ze.filter(Xn=>Xn.parentId===Oe.id);if(Je.length===0)continue;const mt=new E0.graphlib.Graph;mt.setDefaultEdgeLabel(()=>({})),mt.setGraph({rankdir:X,nodesep:X==="LR"?80:60,ranksep:X==="LR"?100:80,marginx:20,marginy:20});for(const Xn of Je){const hi=pe(Xn);ve.set(Xn.id,hi),mt.setNode(Xn.id,hi)}const R1=pt.filter(Xn=>Je.some(hi=>hi.id===Xn.source)&&Je.some(hi=>hi.id===Xn.target));for(const Xn of R1)mt.setEdge(Xn.source,Xn.target);E0.layout(mt);const j1=30,Xu=50,Zh=new Map;for(const Xn of Je){const hi=mt.node(Xn.id);if(hi){const Jh=ve.get(Xn.id)||{width:200,height:80};Zh.set(Xn.id,{x:hi.x-Jh.width/2+j1,y:hi.y-Jh.height/2+Xu})}}ke.set(Oe.id,Zh)}const Te=new E0.graphlib.Graph;Te.setDefaultEdgeLabel(()=>({})),Te.setGraph({rankdir:X,nodesep:X==="LR"?150:80,ranksep:X==="LR"?200:100});for(const Oe of se){const Je=pe(Oe);ve.set(Oe.id,Je),Te.setNode(Oe.id,Je)}const Be=pt.filter(Oe=>se.some(Je=>Je.id===Oe.source)&&se.some(Je=>Je.id===Oe.target));for(const Oe of Be)Te.setEdge(Oe.source,Oe.target);se.length>0&&E0.layout(Te);const et=ze.map(Oe=>{if(Oe.type==="group")return Oe;if(Oe.parentId){const Je=ke.get(Oe.parentId);if(Je){const mt=Je.get(Oe.id);if(mt)return{...Oe,position:{x:mt.x,y:mt.y}}}return Oe}else{const Je=Te.node(Oe.id);if(Je){const mt=ve.get(Oe.id)||{width:200,height:80};return{...Oe,position:{x:Je.x-mt.width/2,y:Je.y-mt.height/2}}}}return Oe});Ge(et),globalThis.requestAnimationFrame(()=>{Ur({padding:.2,duration:400})})},Xh=()=>{if(Ge(X=>X.map(Y=>Y.id===Ue?{...Y,data:{...Y.data,...ar}}:Y)),Ue){const X=ze.find(Y=>Y.id===Ue);console.log("Node properties saved:",{id:Ue,data:X?.data,nodeProps:ar})}},ic=n==="free"?"Design Studio | Diagrammatic":`${N?.title||"System Design Challenge"} | Diagrammatic`,sc=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${N?.title||"system design"} challenge. ${N?.description?.substring(0,150)||"Practice system design skills"}...`;return g.jsxs(g.Fragment,{children:[g.jsx(bh,{title:ic,description:sc,keywords:`system design playground, ${N?.title||"free canvas"}, architecture diagram tool, ${N?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),g.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[g.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:g.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:g.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsxs("button",{type:"button",onClick:ht,className:"flex items-center space-x-3 group cursor-pointer",children:[g.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),g.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),g.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[g.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":N.title,children:N.title}),n!=="free"&&g.jsxs(g.Fragment,{children:[g.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":N.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:N.difficulty}),N.estimated_time&&g.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[g.jsx(MJ,{className:"h-3 w-3"}),N.estimated_time]})]}),n!=="free"&&g.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:g.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:So(Dn)})})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&g.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:qt&&g.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[vt==="saving"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:"Saving..."})]}),vt==="saved"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),g.jsxs("span",{children:["Saved"," ",Yt&&zi(Yt)]})]}),vt==="error"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),g.jsx("span",{children:"Save failed"})]}),vt==="idle"&&Yt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),g.jsxs("span",{children:["Saved ",zi(Yt)]})]})]})}),n&&n!=="free"&&qt&&g.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:g.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[vt==="saving"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),g.jsx("span",{children:"Saving progress..."})]}),vt==="saved"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),g.jsxs("span",{children:["Progress saved"," ",Yt&&zi(Yt)]})]}),vt==="error"&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),g.jsx("span",{children:"Save failed"})]}),vt==="idle"&&Yt&&g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),g.jsxs("span",{children:["Progress saved ",zi(Yt)]})]})]})}),g.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[g.jsx("button",{type:"button",onClick:vr,disabled:!Ii,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:g.jsx(AJ,{className:"h-5 w-5"})}),g.jsx("button",{type:"button",onClick:qr,disabled:!rn,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:g.jsx(TJ,{className:"h-5 w-5"})}),g.jsx("button",{type:"button",onClick:D1,disabled:ze.length===0&&pt.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:g.jsx(hu,{className:"h-5 w-5"})})]}),n==="free"&&g.jsxs(g.Fragment,{children:[g.jsx("button",{type:"button",onClick:Wu,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:g.jsx(FJ,{className:"h-5 w-5"})}),g.jsx("input",{ref:Kn,type:"file",accept:".json,.xml,.drawio",onChange:Kh,className:"hidden","aria-label":"Import diagram file"})]}),g.jsxs("div",{className:"relative",children:[g.jsx("button",{type:"button",onClick:()=>Dr(!wr),disabled:ze.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:g.jsx(HJ,{className:"h-5 w-5"})}),wr&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),g.jsx("button",{type:"button",onClick:()=>{Pa("png"),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),g.jsx("button",{type:"button",onClick:()=>{Pa("jpeg"),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),g.jsx("button",{type:"button",onClick:()=>{Pa("svg"),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),g.jsx("div",{className:"border-t border-theme/10 my-1"}),g.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),g.jsx("button",{type:"button",onClick:()=>{To(),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),g.jsx("button",{type:"button",onClick:()=>{Ao(),Dr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),g.jsxs("div",{className:"relative",children:[g.jsx("button",{type:"button",onClick:()=>St(!Gr),disabled:ze.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:g.jsx(Uoe,{className:"h-5 w-5"})}),Gr&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[g.jsx("button",{type:"button",onClick:()=>{Va("TB"),St(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),g.jsx("button",{type:"button",onClick:()=>{Va("LR"),St(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&o&&V&&g.jsxs(g.Fragment,{children:[g.jsx("button",{type:"button",onClick:()=>ce(!0),className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Share Diagram",children:g.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),g.jsx($ve,{isConnected:as,isConnecting:No,reconnectAttempts:_1,collaborators:Ia,showCollaborators:!0})]}),N?.id!=="free"&&g.jsx("button",{type:"button",onClick:Wr,disabled:Rr,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:Rr?"Assessing...":"Run Assessment"}),g.jsx(yh,{}),g.jsx("div",{className:"relative",children:o?g.jsxs(g.Fragment,{children:[g.jsxs("button",{type:"button",onClick:()=>H(!O),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?g.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):g.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),g.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),g.jsx(SP,{className:"h-4 w-4"})]}),O&&g.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[g.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[g.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),g.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),g.jsx("button",{type:"button",onClick:()=>{f(),H(!1),q(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):g.jsx("button",{type:"button",onClick:()=>F(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),g.jsxs("div",{className:"flex-1 flex min-h-0",children:[g.jsx(Y1e,{components:ms,onAdd:Wh}),g.jsx(X1e,{reactFlowWrapperRef:es,nodes:ze,edges:pt,nodeTypes:cr,edgeTypes:nxe,onNodesChange:xr,onEdgesChange:wo,onConnect:sr,onDragOver:Ls,onDrop:Kr,onNodeDragStop:ts,onMouseMove:$h,children:Bi.map(X=>{const Y=i(X.position);return g.jsx(Gve,{name:X.user.name,color:Qw(X.userId),position:Y,pictureUrl:X.user.pictureUrl},X.userId)})}),g.jsx(Z1e,{problem:N,activeTab:J,setActiveTab:ge,inspectedNodeId:Ue,setInspectedNodeId:or,propertyElements:is,customPropertyElements:ss,onAddCustomProperty:lr,handleSave:Xh,assessmentResult:Xt,onDetachFromGroup:vn,isNodeInGroup:Ue?ze.find(X=>X.id===Ue)?.parentId!==void 0:!1})]}),je&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[g.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[g.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),g.jsxs("div",{children:[g.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),g.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),g.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{type:"button",onClick:Gu,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),g.jsx("button",{type:"button",onClick:rc,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),g.jsx(Ng,{isOpen:P,onClose:()=>F(!1),onLogin:async(X,Y)=>{await l({email:X,password:Y})},onSignup:async(X,Y,se)=>{await u({email:X,password:Y,name:se})},onGoogleLogin:d}),G&&g.jsx(txe,{onSubmit:Ku,onSkip:Ba}),B&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:g.jsxs("form",{onSubmit:ls,children:[g.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:g.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),g.jsxs("div",{className:"px-6 py-4 space-y-4",children:[g.jsxs("div",{children:[g.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{id:"title-input",type:"text",value:ie,onChange:X=>oe(X.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),g.jsx("textarea",{id:"description-input",value:$,onChange:X=>Z(X.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),g.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[g.jsx("button",{type:"button",onClick:Yu,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:!ie.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),te&&g.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Share Design"}),g.jsx("button",{type:"button",onClick:()=>ce(!1),className:"p-1 text-muted hover:text-theme rounded-md transition-colors",children:g.jsx(hu,{className:"h-5 w-5"})})]}),g.jsxs("p",{className:"text-sm text-muted mt-1",children:['Share "',I?.title||"Untitled Design",'" with others']})]}),g.jsxs("div",{className:"px-6 py-4 space-y-6",children:[g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-medium text-theme",children:"Add Collaborator"}),g.jsxs("div",{className:"space-y-3",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"share-email",className:"block text-sm font-medium text-theme mb-2",children:"Email Address"}),g.jsx("input",{id:"share-email",type:"email",value:re,onChange:X=>ye(X.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"share-permission",className:"block text-sm font-medium text-theme mb-2",children:"Permission Level"}),g.jsxs("select",{id:"share-permission",value:Ce,onChange:X=>De(X.target.value),className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",children:[g.jsx("option",{value:"read",children:"Read Only - Can view the diagram"}),g.jsx("option",{value:"edit",children:"Read & Edit - Can view and modify the diagram"})]})]}),g.jsx("button",{type:"button",onClick:Yh,disabled:!re.trim()||Ee,className:"w-full px-4 py-2 bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:Ee?"Sharing...":"Share Design"})]})]}),g.jsxs("div",{className:"space-y-4",children:[g.jsx("h3",{className:"text-sm font-medium text-theme",children:"Current Collaborators"}),g.jsx(J1e,{isLoading:yt,collaborators:Se,onUpdatePermission:za,onRemove:Vi})]}),g.jsxs("div",{className:"space-y-3",children:[g.jsx("h3",{className:"text-sm font-medium text-theme",children:"Share Link"}),g.jsxs("div",{className:"flex space-x-2",children:[g.jsx("input",{type:"text",value:`${globalThis.location.origin}/#/playground/free?diagramId=${V}`,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-theme/20 rounded-md bg-theme/50 text-theme"}),g.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${globalThis.location.origin}/#/playground/free?diagramId=${V}`),v.success("Link copied to clipboard!")},className:"px-3 py-2 bg-theme/10 hover:bg-theme/20 text-theme rounded-md transition-colors",children:"Copy"})]}),g.jsx("p",{className:"text-xs text-muted",children:"Anyone with this link can access the diagram according to their permission level"})]})]})]})}),g.jsx(Oye,{toasts:v.toasts,onClose:v.removeToast}),n==="free"&&g.jsx(exe,{canvasContext:Gh,nodes:ze,edges:pt,onAddComponent:Wh})]})]})},uxe=()=>g.jsx(KH,{children:g.jsx(cxe,{})}),dxe=()=>(Ul(),g.jsx(qW,{children:g.jsx(Xve,{children:g.jsx(AW,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:g.jsxs(EW,{children:[g.jsx(il,{path:"/",element:g.jsx(TN,{})}),g.jsx(il,{path:"/problems",element:g.jsx(HQ,{})}),g.jsx(il,{path:"/create-problem",element:g.jsx(Foe,{})}),g.jsx(il,{path:"/diagrams",element:g.jsx(qoe,{})}),g.jsx(il,{path:"/playground/:id",element:g.jsx(uxe,{})}),g.jsx(il,{path:"*",element:g.jsx(TN,{})})]})})})}));DG.createRoot(document.getElementById("root")).render(g.jsx(M.StrictMode,{children:g.jsx(dxe,{})}));
